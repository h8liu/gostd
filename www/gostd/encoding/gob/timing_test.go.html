<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8164749">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8164804">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8164858">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8164909">package</span>&nbsp;<span class="ident" id="8164917">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8164922">import</span>&nbsp;<span class="op" id="8164929">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8164932">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8164941">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8164947">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8164953">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8164964">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8164974">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8164977">type</span>&nbsp;<span class="ident" id="8164982">Bench</span>&nbsp;<span class="keyword" id="8164988">struct</span>&nbsp;<span class="op" id="8164995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164998">A</span>&nbsp;<span class="builtintype" id="8165000">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165005">B</span>&nbsp;<span class="builtintype" id="8165007">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165016">C</span>&nbsp;<span class="builtintype" id="8165018">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165026">D</span>&nbsp;<span class="op" id="8165028">[</span><span class="op" id="8165029">]</span><span class="builtintype" id="8165030">byte</span><br>
<span class="lineno">20</span><span class="op" id="8165035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8165038">func</span>&nbsp;<span class="ident" id="8165043">benchmarkEndToEnd</span><span class="op" id="8165060">(</span><span class="ident" id="8165061">b</span>&nbsp;<span class="op" id="8165063">*</span><span class="ident" id="8165064">testing</span><span class="op" id="8165071">.</span><span class="ident" id="8165072">B</span><span class="op" id="8165073">,</span>&nbsp;<span class="ident" id="8165075">ctor</span>&nbsp;<span class="keyword" id="8165080">func</span><span class="op" id="8165084">(</span><span class="op" id="8165085">)</span>&nbsp;<span class="keyword" id="8165087">interface</span><span class="op" id="8165096">{</span><span class="op" id="8165097">}</span><span class="op" id="8165098">,</span>&nbsp;<span class="ident" id="8165100">pipe</span>&nbsp;<span class="keyword" id="8165105">func</span><span class="op" id="8165109">(</span><span class="op" id="8165110">)</span>&nbsp;<span class="op" id="8165112">(</span><span class="ident" id="8165113">r</span>&nbsp;<span class="ident" id="8165115">io</span><span class="op" id="8165117">.</span><span class="ident" id="8165118">Reader</span><span class="op" id="8165124">,</span>&nbsp;<span class="ident" id="8165126">w</span>&nbsp;<span class="ident" id="8165128">io</span><span class="op" id="8165130">.</span><span class="ident" id="8165131">Writer</span><span class="op" id="8165137">,</span>&nbsp;<span class="ident" id="8165139">err</span>&nbsp;<span class="builtintype" id="8165143">error</span><span class="op" id="8165148">)</span><span class="op" id="8165149">)</span>&nbsp;<span class="op" id="8165151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165154">b</span><span class="op" id="8165155">.</span><span class="ident" id="8165156">RunParallel</span><span class="op" id="8165167">(</span><span class="keyword" id="8165168">func</span><span class="op" id="8165172">(</span><span class="ident" id="8165173">pb</span>&nbsp;<span class="op" id="8165176">*</span><span class="ident" id="8165177">testing</span><span class="op" id="8165184">.</span><span class="ident" id="8165185">PB</span><span class="op" id="8165187">)</span>&nbsp;<span class="op" id="8165189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165193">r</span><span class="op" id="8165194">,</span>&nbsp;<span class="ident" id="8165196">w</span><span class="op" id="8165197">,</span>&nbsp;<span class="ident" id="8165199">err</span>&nbsp;<span class="op" id="8165203">:=</span>&nbsp;<span class="ident" id="8165206">pipe</span><span class="op" id="8165210">(</span><span class="op" id="8165211">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165215">if</span>&nbsp;<span class="ident" id="8165218">err</span>&nbsp;<span class="op" id="8165222">!=</span>&nbsp;<span class="ident" id="8165225">nil</span>&nbsp;<span class="op" id="8165229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165234">b</span><span class="op" id="8165235">.</span><span class="ident" id="8165236">Fatal</span><span class="op" id="8165241">(</span><span class="string" id="8165242">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8165259">,</span>&nbsp;<span class="ident" id="8165261">err</span><span class="op" id="8165264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165272">v</span>&nbsp;<span class="op" id="8165274">:=</span>&nbsp;<span class="ident" id="8165277">ctor</span><span class="op" id="8165281">(</span><span class="op" id="8165282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165286">enc</span>&nbsp;<span class="op" id="8165290">:=</span>&nbsp;<span class="ident" id="8165293">NewEncoder</span><span class="op" id="8165303">(</span><span class="ident" id="8165304">w</span><span class="op" id="8165305">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165309">dec</span>&nbsp;<span class="op" id="8165313">:=</span>&nbsp;<span class="ident" id="8165316">NewDecoder</span><span class="op" id="8165326">(</span><span class="ident" id="8165327">r</span><span class="op" id="8165328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165332">for</span>&nbsp;<span class="ident" id="8165336">pb</span><span class="op" id="8165338">.</span><span class="ident" id="8165339">Next</span><span class="op" id="8165343">(</span><span class="op" id="8165344">)</span>&nbsp;<span class="op" id="8165346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165351">if</span>&nbsp;<span class="ident" id="8165354">err</span>&nbsp;<span class="op" id="8165358">:=</span>&nbsp;<span class="ident" id="8165361">enc</span><span class="op" id="8165364">.</span><span class="ident" id="8165365">Encode</span><span class="op" id="8165371">(</span><span class="ident" id="8165372">v</span><span class="op" id="8165373">)</span><span class="op" id="8165374">;</span>&nbsp;<span class="ident" id="8165376">err</span>&nbsp;<span class="op" id="8165380">!=</span>&nbsp;<span class="ident" id="8165383">nil</span>&nbsp;<span class="op" id="8165387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165393">b</span><span class="op" id="8165394">.</span><span class="ident" id="8165395">Fatal</span><span class="op" id="8165400">(</span><span class="string" id="8165401">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8165416">,</span>&nbsp;<span class="ident" id="8165418">err</span><span class="op" id="8165421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165426">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165431">if</span>&nbsp;<span class="ident" id="8165434">err</span>&nbsp;<span class="op" id="8165438">:=</span>&nbsp;<span class="ident" id="8165441">dec</span><span class="op" id="8165444">.</span><span class="ident" id="8165445">Decode</span><span class="op" id="8165451">(</span><span class="ident" id="8165452">v</span><span class="op" id="8165453">)</span><span class="op" id="8165454">;</span>&nbsp;<span class="ident" id="8165456">err</span>&nbsp;<span class="op" id="8165460">!=</span>&nbsp;<span class="ident" id="8165463">nil</span>&nbsp;<span class="op" id="8165467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165473">b</span><span class="op" id="8165474">.</span><span class="ident" id="8165475">Fatal</span><span class="op" id="8165480">(</span><span class="string" id="8165481">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8165496">,</span>&nbsp;<span class="ident" id="8165498">err</span><span class="op" id="8165501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165513">}</span><span class="op" id="8165514">)</span><br>
<span class="lineno">40</span><span class="op" id="8165516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8165519">func</span>&nbsp;<span class="ident" id="8165524">BenchmarkEndToEndPipe</span><span class="op" id="8165545">(</span><span class="ident" id="8165546">b</span>&nbsp;<span class="op" id="8165548">*</span><span class="ident" id="8165549">testing</span><span class="op" id="8165556">.</span><span class="ident" id="8165557">B</span><span class="op" id="8165558">)</span>&nbsp;<span class="op" id="8165560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165563">benchmarkEndToEnd</span><span class="op" id="8165580">(</span><span class="ident" id="8165581">b</span><span class="op" id="8165582">,</span>&nbsp;<span class="keyword" id="8165584">func</span><span class="op" id="8165588">(</span><span class="op" id="8165589">)</span>&nbsp;<span class="keyword" id="8165591">interface</span><span class="op" id="8165600">{</span><span class="op" id="8165601">}</span>&nbsp;<span class="op" id="8165603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165607">return</span>&nbsp;<span class="op" id="8165614">&amp;</span><span class="ident" id="8165615">Bench</span><span class="op" id="8165620">{</span><span class="num" id="8165621">7</span><span class="op" id="8165622">,</span>&nbsp;<span class="num" id="8165624">3.2</span><span class="op" id="8165627">,</span>&nbsp;<span class="string" id="8165629">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8165646">,</span>&nbsp;<span class="ident" id="8165648">bytes</span><span class="op" id="8165653">.</span><span class="ident" id="8165654">Repeat</span><span class="op" id="8165660">(</span><span class="op" id="8165661">[</span><span class="op" id="8165662">]</span><span class="builtintype" id="8165663">byte</span><span class="op" id="8165667">(</span><span class="string" id="8165668">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8165686">)</span><span class="op" id="8165687">,</span>&nbsp;<span class="num" id="8165689">100</span><span class="op" id="8165692">)</span><span class="op" id="8165693">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165696">}</span><span class="op" id="8165697">,</span>&nbsp;<span class="keyword" id="8165699">func</span><span class="op" id="8165703">(</span><span class="op" id="8165704">)</span>&nbsp;<span class="op" id="8165706">(</span><span class="ident" id="8165707">r</span>&nbsp;<span class="ident" id="8165709">io</span><span class="op" id="8165711">.</span><span class="ident" id="8165712">Reader</span><span class="op" id="8165718">,</span>&nbsp;<span class="ident" id="8165720">w</span>&nbsp;<span class="ident" id="8165722">io</span><span class="op" id="8165724">.</span><span class="ident" id="8165725">Writer</span><span class="op" id="8165731">,</span>&nbsp;<span class="ident" id="8165733">err</span>&nbsp;<span class="builtintype" id="8165737">error</span><span class="op" id="8165742">)</span>&nbsp;<span class="op" id="8165744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165748">r</span><span class="op" id="8165749">,</span>&nbsp;<span class="ident" id="8165751">w</span><span class="op" id="8165752">,</span>&nbsp;<span class="ident" id="8165754">err</span>&nbsp;<span class="op" id="8165758">=</span>&nbsp;<span class="ident" id="8165760">os</span><span class="op" id="8165762">.</span><span class="ident" id="8165763">Pipe</span><span class="op" id="8165767">(</span><span class="op" id="8165768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165772">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165780">}</span><span class="op" id="8165781">)</span><br>
<span class="lineno"></span><span class="op" id="8165783">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8165786">func</span>&nbsp;<span class="ident" id="8165791">BenchmarkEndToEndByteBuffer</span><span class="op" id="8165818">(</span><span class="ident" id="8165819">b</span>&nbsp;<span class="op" id="8165821">*</span><span class="ident" id="8165822">testing</span><span class="op" id="8165829">.</span><span class="ident" id="8165830">B</span><span class="op" id="8165831">)</span>&nbsp;<span class="op" id="8165833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8165836">benchmarkEndToEnd</span><span class="op" id="8165853">(</span><span class="ident" id="8165854">b</span><span class="op" id="8165855">,</span>&nbsp;<span class="keyword" id="8165857">func</span><span class="op" id="8165861">(</span><span class="op" id="8165862">)</span>&nbsp;<span class="keyword" id="8165864">interface</span><span class="op" id="8165873">{</span><span class="op" id="8165874">}</span>&nbsp;<span class="op" id="8165876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8165880">return</span>&nbsp;<span class="op" id="8165887">&amp;</span><span class="ident" id="8165888">Bench</span><span class="op" id="8165893">{</span><span class="num" id="8165894">7</span><span class="op" id="8165895">,</span>&nbsp;<span class="num" id="8165897">3.2</span><span class="op" id="8165900">,</span>&nbsp;<span class="string" id="8165902">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8165919">,</span>&nbsp;<span class="ident" id="8165921">bytes</span><span class="op" id="8165926">.</span><span class="ident" id="8165927">Repeat</span><span class="op" id="8165933">(</span><span class="op" id="8165934">[</span><span class="op" id="8165935">]</span><span class="builtintype" id="8165936">byte</span><span class="op" id="8165940">(</span><span class="string" id="8165941">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8165959">)</span><span class="op" id="8165960">,</span>&nbsp;<span class="num" id="8165962">100</span><span class="op" id="8165965">)</span><span class="op" id="8165966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8165969">}</span><span class="op" id="8165970">,</span>&nbsp;<span class="keyword" id="8165972">func</span><span class="op" id="8165976">(</span><span class="op" id="8165977">)</span>&nbsp;<span class="op" id="8165979">(</span><span class="ident" id="8165980">r</span>&nbsp;<span class="ident" id="8165982">io</span><span class="op" id="8165984">.</span><span class="ident" id="8165985">Reader</span><span class="op" id="8165991">,</span>&nbsp;<span class="ident" id="8165993">w</span>&nbsp;<span class="ident" id="8165995">io</span><span class="op" id="8165997">.</span><span class="ident" id="8165998">Writer</span><span class="op" id="8166004">,</span>&nbsp;<span class="ident" id="8166006">err</span>&nbsp;<span class="builtintype" id="8166010">error</span><span class="op" id="8166015">)</span>&nbsp;<span class="op" id="8166017">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166021">var</span>&nbsp;<span class="ident" id="8166025">buf</span>&nbsp;<span class="ident" id="8166029">bytes</span><span class="op" id="8166034">.</span><span class="ident" id="8166035">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166044">return</span>&nbsp;<span class="op" id="8166051">&amp;</span><span class="ident" id="8166052">buf</span><span class="op" id="8166055">,</span>&nbsp;<span class="op" id="8166057">&amp;</span><span class="ident" id="8166058">buf</span><span class="op" id="8166061">,</span>&nbsp;<span class="ident" id="8166063">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166068">}</span><span class="op" id="8166069">)</span><br>
<span class="lineno"></span><span class="op" id="8166071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8166074">func</span>&nbsp;<span class="ident" id="8166079">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8166111">(</span><span class="ident" id="8166112">b</span>&nbsp;<span class="op" id="8166114">*</span><span class="ident" id="8166115">testing</span><span class="op" id="8166122">.</span><span class="ident" id="8166123">B</span><span class="op" id="8166124">)</span>&nbsp;<span class="op" id="8166126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166129">benchmarkEndToEnd</span><span class="op" id="8166146">(</span><span class="ident" id="8166147">b</span><span class="op" id="8166148">,</span>&nbsp;<span class="keyword" id="8166150">func</span><span class="op" id="8166154">(</span><span class="op" id="8166155">)</span>&nbsp;<span class="keyword" id="8166157">interface</span><span class="op" id="8166166">{</span><span class="op" id="8166167">}</span>&nbsp;<span class="op" id="8166169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166173">v</span>&nbsp;<span class="op" id="8166175">:=</span>&nbsp;<span class="op" id="8166178">&amp;</span><span class="ident" id="8166179">Bench</span><span class="op" id="8166184">{</span><span class="num" id="8166185">7</span><span class="op" id="8166186">,</span>&nbsp;<span class="num" id="8166188">3.2</span><span class="op" id="8166191">,</span>&nbsp;<span class="string" id="8166193">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8166210">,</span>&nbsp;<span class="ident" id="8166212">nil</span><span class="op" id="8166215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166219">Register</span><span class="op" id="8166227">(</span><span class="ident" id="8166228">v</span><span class="op" id="8166229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166233">arr</span>&nbsp;<span class="op" id="8166237">:=</span>&nbsp;<span class="builtinfunc" id="8166240">make</span><span class="op" id="8166244">(</span><span class="op" id="8166245">[</span><span class="op" id="8166246">]</span><span class="keyword" id="8166247">interface</span><span class="op" id="8166256">{</span><span class="op" id="8166257">}</span><span class="op" id="8166258">,</span>&nbsp;<span class="num" id="8166260">100</span><span class="op" id="8166263">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166267">for</span>&nbsp;<span class="ident" id="8166271">i</span>&nbsp;<span class="op" id="8166273">:=</span>&nbsp;<span class="keyword" id="8166276">range</span>&nbsp;<span class="ident" id="8166282">arr</span>&nbsp;<span class="op" id="8166286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166291">arr</span><span class="op" id="8166294">[</span><span class="ident" id="8166295">i</span><span class="op" id="8166296">]</span>&nbsp;<span class="op" id="8166298">=</span>&nbsp;<span class="ident" id="8166300">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166308">return</span>&nbsp;<span class="op" id="8166315">&amp;</span><span class="ident" id="8166316">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166321">}</span><span class="op" id="8166322">,</span>&nbsp;<span class="keyword" id="8166324">func</span><span class="op" id="8166328">(</span><span class="op" id="8166329">)</span>&nbsp;<span class="op" id="8166331">(</span><span class="ident" id="8166332">r</span>&nbsp;<span class="ident" id="8166334">io</span><span class="op" id="8166336">.</span><span class="ident" id="8166337">Reader</span><span class="op" id="8166343">,</span>&nbsp;<span class="ident" id="8166345">w</span>&nbsp;<span class="ident" id="8166347">io</span><span class="op" id="8166349">.</span><span class="ident" id="8166350">Writer</span><span class="op" id="8166356">,</span>&nbsp;<span class="ident" id="8166358">err</span>&nbsp;<span class="builtintype" id="8166362">error</span><span class="op" id="8166367">)</span>&nbsp;<span class="op" id="8166369">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166373">var</span>&nbsp;<span class="ident" id="8166377">buf</span>&nbsp;<span class="ident" id="8166381">bytes</span><span class="op" id="8166386">.</span><span class="ident" id="8166387">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166396">return</span>&nbsp;<span class="op" id="8166403">&amp;</span><span class="ident" id="8166404">buf</span><span class="op" id="8166407">,</span>&nbsp;<span class="op" id="8166409">&amp;</span><span class="ident" id="8166410">buf</span><span class="op" id="8166413">,</span>&nbsp;<span class="ident" id="8166415">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166420">}</span><span class="op" id="8166421">)</span><br>
<span class="lineno"></span><span class="op" id="8166423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8166426">func</span>&nbsp;<span class="ident" id="8166431">TestCountEncodeMallocs</span><span class="op" id="8166453">(</span><span class="ident" id="8166454">t</span>&nbsp;<span class="op" id="8166456">*</span><span class="ident" id="8166457">testing</span><span class="op" id="8166464">.</span><span class="ident" id="8166465">T</span><span class="op" id="8166466">)</span>&nbsp;<span class="op" id="8166468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166471">if</span>&nbsp;<span class="ident" id="8166474">testing</span><span class="op" id="8166481">.</span><span class="ident" id="8166482">Short</span><span class="op" id="8166487">(</span><span class="op" id="8166488">)</span>&nbsp;<span class="op" id="8166490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166494">t</span><span class="op" id="8166495">.</span><span class="ident" id="8166496">Skip</span><span class="op" id="8166500">(</span><span class="string" id="8166501">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8166538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166544">if</span>&nbsp;<span class="ident" id="8166547">runtime</span><span class="op" id="8166554">.</span><span class="ident" id="8166555">GOMAXPROCS</span><span class="op" id="8166565">(</span><span class="num" id="8166566">0</span><span class="op" id="8166567">)</span>&nbsp;<span class="op" id="8166569">&gt;</span>&nbsp;<span class="num" id="8166571">1</span>&nbsp;<span class="op" id="8166573">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166577">t</span><span class="op" id="8166578">.</span><span class="ident" id="8166579">Skip</span><span class="op" id="8166583">(</span><span class="string" id="8166584">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8166608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166615">const</span>&nbsp;<span class="ident" id="8166621">N</span>&nbsp;<span class="op" id="8166623">=</span>&nbsp;<span class="num" id="8166625">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166632">var</span>&nbsp;<span class="ident" id="8166636">buf</span>&nbsp;<span class="ident" id="8166640">bytes</span><span class="op" id="8166645">.</span><span class="ident" id="8166646">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166654">enc</span>&nbsp;<span class="op" id="8166658">:=</span>&nbsp;<span class="ident" id="8166661">NewEncoder</span><span class="op" id="8166671">(</span><span class="op" id="8166672">&amp;</span><span class="ident" id="8166673">buf</span><span class="op" id="8166676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166679">bench</span>&nbsp;<span class="op" id="8166685">:=</span>&nbsp;<span class="op" id="8166688">&amp;</span><span class="ident" id="8166689">Bench</span><span class="op" id="8166694">{</span><span class="num" id="8166695">7</span><span class="op" id="8166696">,</span>&nbsp;<span class="num" id="8166698">3.2</span><span class="op" id="8166701">,</span>&nbsp;<span class="string" id="8166703">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8166720">,</span>&nbsp;<span class="op" id="8166722">[</span><span class="op" id="8166723">]</span><span class="builtintype" id="8166724">byte</span><span class="op" id="8166728">(</span><span class="string" id="8166729">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8166747">)</span><span class="op" id="8166748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166752">allocs</span>&nbsp;<span class="op" id="8166759">:=</span>&nbsp;<span class="ident" id="8166762">testing</span><span class="op" id="8166769">.</span><span class="ident" id="8166770">AllocsPerRun</span><span class="op" id="8166782">(</span><span class="ident" id="8166783">N</span><span class="op" id="8166784">,</span>&nbsp;<span class="keyword" id="8166786">func</span><span class="op" id="8166790">(</span><span class="op" id="8166791">)</span>&nbsp;<span class="op" id="8166793">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166797">err</span>&nbsp;<span class="op" id="8166801">:=</span>&nbsp;<span class="ident" id="8166804">enc</span><span class="op" id="8166807">.</span><span class="ident" id="8166808">Encode</span><span class="op" id="8166814">(</span><span class="ident" id="8166815">bench</span><span class="op" id="8166820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166824">if</span>&nbsp;<span class="ident" id="8166827">err</span>&nbsp;<span class="op" id="8166831">!=</span>&nbsp;<span class="ident" id="8166834">nil</span>&nbsp;<span class="op" id="8166838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166843">t</span><span class="op" id="8166844">.</span><span class="ident" id="8166845">Fatal</span><span class="op" id="8166850">(</span><span class="string" id="8166851">&#34;encode:&#34;</span><span class="op" id="8166860">,</span>&nbsp;<span class="ident" id="8166862">err</span><span class="op" id="8166865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166872">}</span><span class="op" id="8166873">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8166876">if</span>&nbsp;<span class="ident" id="8166879">allocs</span>&nbsp;<span class="op" id="8166886">!=</span>&nbsp;<span class="num" id="8166889">0</span>&nbsp;<span class="op" id="8166891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8166895">t</span><span class="op" id="8166896">.</span><span class="ident" id="8166897">Fatalf</span><span class="op" id="8166903">(</span><span class="string" id="8166904">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8166954">,</span>&nbsp;<span class="ident" id="8166956">allocs</span><span class="op" id="8166962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8166965">}</span><br>
<span class="lineno"></span><span class="op" id="8166967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8166970">func</span>&nbsp;<span class="ident" id="8166975">TestCountDecodeMallocs</span><span class="op" id="8166997">(</span><span class="ident" id="8166998">t</span>&nbsp;<span class="op" id="8167000">*</span><span class="ident" id="8167001">testing</span><span class="op" id="8167008">.</span><span class="ident" id="8167009">T</span><span class="op" id="8167010">)</span>&nbsp;<span class="op" id="8167012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167015">if</span>&nbsp;<span class="ident" id="8167018">testing</span><span class="op" id="8167025">.</span><span class="ident" id="8167026">Short</span><span class="op" id="8167031">(</span><span class="op" id="8167032">)</span>&nbsp;<span class="op" id="8167034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167038">t</span><span class="op" id="8167039">.</span><span class="ident" id="8167040">Skip</span><span class="op" id="8167044">(</span><span class="string" id="8167045">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8167082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167088">if</span>&nbsp;<span class="ident" id="8167091">runtime</span><span class="op" id="8167098">.</span><span class="ident" id="8167099">GOMAXPROCS</span><span class="op" id="8167109">(</span><span class="num" id="8167110">0</span><span class="op" id="8167111">)</span>&nbsp;<span class="op" id="8167113">&gt;</span>&nbsp;<span class="num" id="8167115">1</span>&nbsp;<span class="op" id="8167117">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167121">t</span><span class="op" id="8167122">.</span><span class="ident" id="8167123">Skip</span><span class="op" id="8167127">(</span><span class="string" id="8167128">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8167152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167159">const</span>&nbsp;<span class="ident" id="8167165">N</span>&nbsp;<span class="op" id="8167167">=</span>&nbsp;<span class="num" id="8167169">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167176">var</span>&nbsp;<span class="ident" id="8167180">buf</span>&nbsp;<span class="ident" id="8167184">bytes</span><span class="op" id="8167189">.</span><span class="ident" id="8167190">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167198">enc</span>&nbsp;<span class="op" id="8167202">:=</span>&nbsp;<span class="ident" id="8167205">NewEncoder</span><span class="op" id="8167215">(</span><span class="op" id="8167216">&amp;</span><span class="ident" id="8167217">buf</span><span class="op" id="8167220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167223">bench</span>&nbsp;<span class="op" id="8167229">:=</span>&nbsp;<span class="op" id="8167232">&amp;</span><span class="ident" id="8167233">Bench</span><span class="op" id="8167238">{</span><span class="num" id="8167239">7</span><span class="op" id="8167240">,</span>&nbsp;<span class="num" id="8167242">3.2</span><span class="op" id="8167245">,</span>&nbsp;<span class="string" id="8167247">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8167264">,</span>&nbsp;<span class="op" id="8167266">[</span><span class="op" id="8167267">]</span><span class="builtintype" id="8167268">byte</span><span class="op" id="8167272">(</span><span class="string" id="8167273">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8167291">)</span><span class="op" id="8167292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8167296">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167338">testing</span><span class="op" id="8167345">.</span><span class="ident" id="8167346">AllocsPerRun</span><span class="op" id="8167358">(</span><span class="ident" id="8167359">N</span><span class="op" id="8167360">,</span>&nbsp;<span class="keyword" id="8167362">func</span><span class="op" id="8167366">(</span><span class="op" id="8167367">)</span>&nbsp;<span class="op" id="8167369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167373">err</span>&nbsp;<span class="op" id="8167377">:=</span>&nbsp;<span class="ident" id="8167380">enc</span><span class="op" id="8167383">.</span><span class="ident" id="8167384">Encode</span><span class="op" id="8167390">(</span><span class="ident" id="8167391">bench</span><span class="op" id="8167396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167400">if</span>&nbsp;<span class="ident" id="8167403">err</span>&nbsp;<span class="op" id="8167407">!=</span>&nbsp;<span class="ident" id="8167410">nil</span>&nbsp;<span class="op" id="8167414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167419">t</span><span class="op" id="8167420">.</span><span class="ident" id="8167421">Fatal</span><span class="op" id="8167426">(</span><span class="string" id="8167427">&#34;encode:&#34;</span><span class="op" id="8167436">,</span>&nbsp;<span class="ident" id="8167438">err</span><span class="op" id="8167441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167445">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167448">}</span><span class="op" id="8167449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167453">dec</span>&nbsp;<span class="op" id="8167457">:=</span>&nbsp;<span class="ident" id="8167460">NewDecoder</span><span class="op" id="8167470">(</span><span class="op" id="8167471">&amp;</span><span class="ident" id="8167472">buf</span><span class="op" id="8167475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167478">allocs</span>&nbsp;<span class="op" id="8167485">:=</span>&nbsp;<span class="ident" id="8167488">testing</span><span class="op" id="8167495">.</span><span class="ident" id="8167496">AllocsPerRun</span><span class="op" id="8167508">(</span><span class="ident" id="8167509">N</span><span class="op" id="8167510">,</span>&nbsp;<span class="keyword" id="8167512">func</span><span class="op" id="8167516">(</span><span class="op" id="8167517">)</span>&nbsp;<span class="op" id="8167519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167523">*</span><span class="ident" id="8167524">bench</span>&nbsp;<span class="op" id="8167530">=</span>&nbsp;<span class="ident" id="8167532">Bench</span><span class="op" id="8167537">{</span><span class="op" id="8167538">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167542">err</span>&nbsp;<span class="op" id="8167546">:=</span>&nbsp;<span class="ident" id="8167549">dec</span><span class="op" id="8167552">.</span><span class="ident" id="8167553">Decode</span><span class="op" id="8167559">(</span><span class="op" id="8167560">&amp;</span><span class="ident" id="8167561">bench</span><span class="op" id="8167566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167570">if</span>&nbsp;<span class="ident" id="8167573">err</span>&nbsp;<span class="op" id="8167577">!=</span>&nbsp;<span class="ident" id="8167580">nil</span>&nbsp;<span class="op" id="8167584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167589">t</span><span class="op" id="8167590">.</span><span class="ident" id="8167591">Fatal</span><span class="op" id="8167596">(</span><span class="string" id="8167597">&#34;decode:&#34;</span><span class="op" id="8167606">,</span>&nbsp;<span class="ident" id="8167608">err</span><span class="op" id="8167611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167618">}</span><span class="op" id="8167619">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167622">if</span>&nbsp;<span class="ident" id="8167625">allocs</span>&nbsp;<span class="op" id="8167632">!=</span>&nbsp;<span class="num" id="8167635">4</span>&nbsp;<span class="op" id="8167637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167641">t</span><span class="op" id="8167642">.</span><span class="ident" id="8167643">Fatalf</span><span class="op" id="8167649">(</span><span class="string" id="8167650">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8167700">,</span>&nbsp;<span class="ident" id="8167702">allocs</span><span class="op" id="8167708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167711">}</span><br>
<span class="lineno"></span><span class="op" id="8167713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8167716">func</span>&nbsp;<span class="ident" id="8167721">BenchmarkEncodeComplex128Slice</span><span class="op" id="8167751">(</span><span class="ident" id="8167752">b</span>&nbsp;<span class="op" id="8167754">*</span><span class="ident" id="8167755">testing</span><span class="op" id="8167762">.</span><span class="ident" id="8167763">B</span><span class="op" id="8167764">)</span>&nbsp;<span class="op" id="8167766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167769">var</span>&nbsp;<span class="ident" id="8167773">buf</span>&nbsp;<span class="ident" id="8167777">bytes</span><span class="op" id="8167782">.</span><span class="ident" id="8167783">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167791">enc</span>&nbsp;<span class="op" id="8167795">:=</span>&nbsp;<span class="ident" id="8167798">NewEncoder</span><span class="op" id="8167808">(</span><span class="op" id="8167809">&amp;</span><span class="ident" id="8167810">buf</span><span class="op" id="8167813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167816">a</span>&nbsp;<span class="op" id="8167818">:=</span>&nbsp;<span class="builtinfunc" id="8167821">make</span><span class="op" id="8167825">(</span><span class="op" id="8167826">[</span><span class="op" id="8167827">]</span><span class="builtintype" id="8167828">complex128</span><span class="op" id="8167838">,</span>&nbsp;<span class="num" id="8167840">1000</span><span class="op" id="8167844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167847">for</span>&nbsp;<span class="ident" id="8167851">i</span>&nbsp;<span class="op" id="8167853">:=</span>&nbsp;<span class="keyword" id="8167856">range</span>&nbsp;<span class="ident" id="8167862">a</span>&nbsp;<span class="op" id="8167864">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167868">a</span><span class="op" id="8167869">[</span><span class="ident" id="8167870">i</span><span class="op" id="8167871">]</span>&nbsp;<span class="op" id="8167873">=</span>&nbsp;<span class="num" id="8167875">1.2</span>&nbsp;<span class="op" id="8167879">+</span>&nbsp;<span class="num" id="8167881">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8167887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167890">b</span><span class="op" id="8167891">.</span><span class="ident" id="8167892">ResetTimer</span><span class="op" id="8167902">(</span><span class="op" id="8167903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167906">for</span>&nbsp;<span class="ident" id="8167910">i</span>&nbsp;<span class="op" id="8167912">:=</span>&nbsp;<span class="num" id="8167915">0</span><span class="op" id="8167916">;</span>&nbsp;<span class="ident" id="8167918">i</span>&nbsp;<span class="op" id="8167920">&lt;</span>&nbsp;<span class="ident" id="8167922">b</span><span class="op" id="8167923">.</span><span class="ident" id="8167924">N</span><span class="op" id="8167925">;</span>&nbsp;<span class="ident" id="8167927">i</span><span class="op" id="8167928">++</span>&nbsp;<span class="op" id="8167931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167935">buf</span><span class="op" id="8167938">.</span><span class="ident" id="8167939">Reset</span><span class="op" id="8167944">(</span><span class="op" id="8167945">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167949">err</span>&nbsp;<span class="op" id="8167953">:=</span>&nbsp;<span class="ident" id="8167956">enc</span><span class="op" id="8167959">.</span><span class="ident" id="8167960">Encode</span><span class="op" id="8167966">(</span><span class="ident" id="8167967">a</span><span class="op" id="8167968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8167972">if</span>&nbsp;<span class="ident" id="8167975">err</span>&nbsp;<span class="op" id="8167979">!=</span>&nbsp;<span class="ident" id="8167982">nil</span>&nbsp;<span class="op" id="8167986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8167991">b</span><span class="op" id="8167992">.</span><span class="ident" id="8167993">Fatal</span><span class="op" id="8167998">(</span><span class="ident" id="8167999">err</span><span class="op" id="8168002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168009">}</span><br>
<span class="lineno">150</span><span class="op" id="8168011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8168014">func</span>&nbsp;<span class="ident" id="8168019">BenchmarkEncodeFloat64Slice</span><span class="op" id="8168046">(</span><span class="ident" id="8168047">b</span>&nbsp;<span class="op" id="8168049">*</span><span class="ident" id="8168050">testing</span><span class="op" id="8168057">.</span><span class="ident" id="8168058">B</span><span class="op" id="8168059">)</span>&nbsp;<span class="op" id="8168061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168064">var</span>&nbsp;<span class="ident" id="8168068">buf</span>&nbsp;<span class="ident" id="8168072">bytes</span><span class="op" id="8168077">.</span><span class="ident" id="8168078">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168086">enc</span>&nbsp;<span class="op" id="8168090">:=</span>&nbsp;<span class="ident" id="8168093">NewEncoder</span><span class="op" id="8168103">(</span><span class="op" id="8168104">&amp;</span><span class="ident" id="8168105">buf</span><span class="op" id="8168108">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168111">a</span>&nbsp;<span class="op" id="8168113">:=</span>&nbsp;<span class="builtinfunc" id="8168116">make</span><span class="op" id="8168120">(</span><span class="op" id="8168121">[</span><span class="op" id="8168122">]</span><span class="builtintype" id="8168123">float64</span><span class="op" id="8168130">,</span>&nbsp;<span class="num" id="8168132">1000</span><span class="op" id="8168136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168139">for</span>&nbsp;<span class="ident" id="8168143">i</span>&nbsp;<span class="op" id="8168145">:=</span>&nbsp;<span class="keyword" id="8168148">range</span>&nbsp;<span class="ident" id="8168154">a</span>&nbsp;<span class="op" id="8168156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168160">a</span><span class="op" id="8168161">[</span><span class="ident" id="8168162">i</span><span class="op" id="8168163">]</span>&nbsp;<span class="op" id="8168165">=</span>&nbsp;<span class="num" id="8168167">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168178">b</span><span class="op" id="8168179">.</span><span class="ident" id="8168180">ResetTimer</span><span class="op" id="8168190">(</span><span class="op" id="8168191">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168194">for</span>&nbsp;<span class="ident" id="8168198">i</span>&nbsp;<span class="op" id="8168200">:=</span>&nbsp;<span class="num" id="8168203">0</span><span class="op" id="8168204">;</span>&nbsp;<span class="ident" id="8168206">i</span>&nbsp;<span class="op" id="8168208">&lt;</span>&nbsp;<span class="ident" id="8168210">b</span><span class="op" id="8168211">.</span><span class="ident" id="8168212">N</span><span class="op" id="8168213">;</span>&nbsp;<span class="ident" id="8168215">i</span><span class="op" id="8168216">++</span>&nbsp;<span class="op" id="8168219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168223">buf</span><span class="op" id="8168226">.</span><span class="ident" id="8168227">Reset</span><span class="op" id="8168232">(</span><span class="op" id="8168233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168237">err</span>&nbsp;<span class="op" id="8168241">:=</span>&nbsp;<span class="ident" id="8168244">enc</span><span class="op" id="8168247">.</span><span class="ident" id="8168248">Encode</span><span class="op" id="8168254">(</span><span class="ident" id="8168255">a</span><span class="op" id="8168256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168260">if</span>&nbsp;<span class="ident" id="8168263">err</span>&nbsp;<span class="op" id="8168267">!=</span>&nbsp;<span class="ident" id="8168270">nil</span>&nbsp;<span class="op" id="8168274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168279">b</span><span class="op" id="8168280">.</span><span class="ident" id="8168281">Fatal</span><span class="op" id="8168286">(</span><span class="ident" id="8168287">err</span><span class="op" id="8168290">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168297">}</span><br>
<span class="lineno"></span><span class="op" id="8168299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8168302">func</span>&nbsp;<span class="ident" id="8168307">BenchmarkEncodeInt32Slice</span><span class="op" id="8168332">(</span><span class="ident" id="8168333">b</span>&nbsp;<span class="op" id="8168335">*</span><span class="ident" id="8168336">testing</span><span class="op" id="8168343">.</span><span class="ident" id="8168344">B</span><span class="op" id="8168345">)</span>&nbsp;<span class="op" id="8168347">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168350">var</span>&nbsp;<span class="ident" id="8168354">buf</span>&nbsp;<span class="ident" id="8168358">bytes</span><span class="op" id="8168363">.</span><span class="ident" id="8168364">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168372">enc</span>&nbsp;<span class="op" id="8168376">:=</span>&nbsp;<span class="ident" id="8168379">NewEncoder</span><span class="op" id="8168389">(</span><span class="op" id="8168390">&amp;</span><span class="ident" id="8168391">buf</span><span class="op" id="8168394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168397">a</span>&nbsp;<span class="op" id="8168399">:=</span>&nbsp;<span class="builtinfunc" id="8168402">make</span><span class="op" id="8168406">(</span><span class="op" id="8168407">[</span><span class="op" id="8168408">]</span><span class="builtintype" id="8168409">int32</span><span class="op" id="8168414">,</span>&nbsp;<span class="num" id="8168416">1000</span><span class="op" id="8168420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168423">for</span>&nbsp;<span class="ident" id="8168427">i</span>&nbsp;<span class="op" id="8168429">:=</span>&nbsp;<span class="keyword" id="8168432">range</span>&nbsp;<span class="ident" id="8168438">a</span>&nbsp;<span class="op" id="8168440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168444">a</span><span class="op" id="8168445">[</span><span class="ident" id="8168446">i</span><span class="op" id="8168447">]</span>&nbsp;<span class="op" id="8168449">=</span>&nbsp;<span class="num" id="8168451">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168460">b</span><span class="op" id="8168461">.</span><span class="ident" id="8168462">ResetTimer</span><span class="op" id="8168472">(</span><span class="op" id="8168473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168476">for</span>&nbsp;<span class="ident" id="8168480">i</span>&nbsp;<span class="op" id="8168482">:=</span>&nbsp;<span class="num" id="8168485">0</span><span class="op" id="8168486">;</span>&nbsp;<span class="ident" id="8168488">i</span>&nbsp;<span class="op" id="8168490">&lt;</span>&nbsp;<span class="ident" id="8168492">b</span><span class="op" id="8168493">.</span><span class="ident" id="8168494">N</span><span class="op" id="8168495">;</span>&nbsp;<span class="ident" id="8168497">i</span><span class="op" id="8168498">++</span>&nbsp;<span class="op" id="8168501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168505">buf</span><span class="op" id="8168508">.</span><span class="ident" id="8168509">Reset</span><span class="op" id="8168514">(</span><span class="op" id="8168515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168519">err</span>&nbsp;<span class="op" id="8168523">:=</span>&nbsp;<span class="ident" id="8168526">enc</span><span class="op" id="8168529">.</span><span class="ident" id="8168530">Encode</span><span class="op" id="8168536">(</span><span class="ident" id="8168537">a</span><span class="op" id="8168538">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168542">if</span>&nbsp;<span class="ident" id="8168545">err</span>&nbsp;<span class="op" id="8168549">!=</span>&nbsp;<span class="ident" id="8168552">nil</span>&nbsp;<span class="op" id="8168556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168561">b</span><span class="op" id="8168562">.</span><span class="ident" id="8168563">Fatal</span><span class="op" id="8168568">(</span><span class="ident" id="8168569">err</span><span class="op" id="8168572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168579">}</span><br>
<span class="lineno"></span><span class="op" id="8168581">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8168584">func</span>&nbsp;<span class="ident" id="8168589">BenchmarkEncodeStringSlice</span><span class="op" id="8168615">(</span><span class="ident" id="8168616">b</span>&nbsp;<span class="op" id="8168618">*</span><span class="ident" id="8168619">testing</span><span class="op" id="8168626">.</span><span class="ident" id="8168627">B</span><span class="op" id="8168628">)</span>&nbsp;<span class="op" id="8168630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168633">var</span>&nbsp;<span class="ident" id="8168637">buf</span>&nbsp;<span class="ident" id="8168641">bytes</span><span class="op" id="8168646">.</span><span class="ident" id="8168647">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168655">enc</span>&nbsp;<span class="op" id="8168659">:=</span>&nbsp;<span class="ident" id="8168662">NewEncoder</span><span class="op" id="8168672">(</span><span class="op" id="8168673">&amp;</span><span class="ident" id="8168674">buf</span><span class="op" id="8168677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168680">a</span>&nbsp;<span class="op" id="8168682">:=</span>&nbsp;<span class="builtinfunc" id="8168685">make</span><span class="op" id="8168689">(</span><span class="op" id="8168690">[</span><span class="op" id="8168691">]</span><span class="builtintype" id="8168692">string</span><span class="op" id="8168698">,</span>&nbsp;<span class="num" id="8168700">1000</span><span class="op" id="8168704">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168707">for</span>&nbsp;<span class="ident" id="8168711">i</span>&nbsp;<span class="op" id="8168713">:=</span>&nbsp;<span class="keyword" id="8168716">range</span>&nbsp;<span class="ident" id="8168722">a</span>&nbsp;<span class="op" id="8168724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168728">a</span><span class="op" id="8168729">[</span><span class="ident" id="8168730">i</span><span class="op" id="8168731">]</span>&nbsp;<span class="op" id="8168733">=</span>&nbsp;<span class="string" id="8168735">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168757">b</span><span class="op" id="8168758">.</span><span class="ident" id="8168759">ResetTimer</span><span class="op" id="8168769">(</span><span class="op" id="8168770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168773">for</span>&nbsp;<span class="ident" id="8168777">i</span>&nbsp;<span class="op" id="8168779">:=</span>&nbsp;<span class="num" id="8168782">0</span><span class="op" id="8168783">;</span>&nbsp;<span class="ident" id="8168785">i</span>&nbsp;<span class="op" id="8168787">&lt;</span>&nbsp;<span class="ident" id="8168789">b</span><span class="op" id="8168790">.</span><span class="ident" id="8168791">N</span><span class="op" id="8168792">;</span>&nbsp;<span class="ident" id="8168794">i</span><span class="op" id="8168795">++</span>&nbsp;<span class="op" id="8168798">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168802">buf</span><span class="op" id="8168805">.</span><span class="ident" id="8168806">Reset</span><span class="op" id="8168811">(</span><span class="op" id="8168812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168816">err</span>&nbsp;<span class="op" id="8168820">:=</span>&nbsp;<span class="ident" id="8168823">enc</span><span class="op" id="8168826">.</span><span class="ident" id="8168827">Encode</span><span class="op" id="8168833">(</span><span class="ident" id="8168834">a</span><span class="op" id="8168835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8168839">if</span>&nbsp;<span class="ident" id="8168842">err</span>&nbsp;<span class="op" id="8168846">!=</span>&nbsp;<span class="ident" id="8168849">nil</span>&nbsp;<span class="op" id="8168853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168858">b</span><span class="op" id="8168859">.</span><span class="ident" id="8168860">Fatal</span><span class="op" id="8168865">(</span><span class="ident" id="8168866">err</span><span class="op" id="8168869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168873">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8168876">}</span><br>
<span class="lineno"></span><span class="op" id="8168878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8168881">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8168927">type</span>&nbsp;<span class="ident" id="8168932">benchmarkBuf</span>&nbsp;<span class="keyword" id="8168945">struct</span>&nbsp;<span class="op" id="8168952">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168955">offset</span>&nbsp;<span class="builtintype" id="8168962">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8168967">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8168974">[</span><span class="op" id="8168975">]</span><span class="builtintype" id="8168976">byte</span><br>
<span class="lineno"></span><span class="op" id="8168981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8168984">func</span>&nbsp;<span class="op" id="8168989">(</span><span class="ident" id="8168990">b</span>&nbsp;<span class="op" id="8168992">*</span><span class="ident" id="8168993">benchmarkBuf</span><span class="op" id="8169005">)</span>&nbsp;<span class="ident" id="8169007">Read</span><span class="op" id="8169011">(</span><span class="ident" id="8169012">p</span>&nbsp;<span class="op" id="8169014">[</span><span class="op" id="8169015">]</span><span class="builtintype" id="8169016">byte</span><span class="op" id="8169020">)</span>&nbsp;<span class="op" id="8169022">(</span><span class="ident" id="8169023">n</span>&nbsp;<span class="builtintype" id="8169025">int</span><span class="op" id="8169028">,</span>&nbsp;<span class="ident" id="8169030">err</span>&nbsp;<span class="builtintype" id="8169034">error</span><span class="op" id="8169039">)</span>&nbsp;<span class="op" id="8169041">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169044">n</span>&nbsp;<span class="op" id="8169046">=</span>&nbsp;<span class="builtinfunc" id="8169048">copy</span><span class="op" id="8169052">(</span><span class="ident" id="8169053">p</span><span class="op" id="8169054">,</span>&nbsp;<span class="ident" id="8169056">b</span><span class="op" id="8169057">.</span><span class="ident" id="8169058">data</span><span class="op" id="8169062">[</span><span class="ident" id="8169063">b</span><span class="op" id="8169064">.</span><span class="ident" id="8169065">offset</span><span class="op" id="8169071">:</span><span class="op" id="8169072">]</span><span class="op" id="8169073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169076">if</span>&nbsp;<span class="ident" id="8169079">n</span>&nbsp;<span class="op" id="8169081">==</span>&nbsp;<span class="num" id="8169084">0</span>&nbsp;<span class="op" id="8169086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169090">return</span>&nbsp;<span class="num" id="8169097">0</span><span class="op" id="8169098">,</span>&nbsp;<span class="ident" id="8169100">io</span><span class="op" id="8169102">.</span><span class="ident" id="8169103">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169111">b</span><span class="op" id="8169112">.</span><span class="ident" id="8169113">offset</span>&nbsp;<span class="op" id="8169120">+=</span>&nbsp;<span class="ident" id="8169123">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169126">return</span><br>
<span class="lineno"></span><span class="op" id="8169133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8169136">func</span>&nbsp;<span class="op" id="8169141">(</span><span class="ident" id="8169142">b</span>&nbsp;<span class="op" id="8169144">*</span><span class="ident" id="8169145">benchmarkBuf</span><span class="op" id="8169157">)</span>&nbsp;<span class="ident" id="8169159">ReadByte</span><span class="op" id="8169167">(</span><span class="op" id="8169168">)</span>&nbsp;<span class="op" id="8169170">(</span><span class="ident" id="8169171">c</span>&nbsp;<span class="builtintype" id="8169173">byte</span><span class="op" id="8169177">,</span>&nbsp;<span class="ident" id="8169179">err</span>&nbsp;<span class="builtintype" id="8169183">error</span><span class="op" id="8169188">)</span>&nbsp;<span class="op" id="8169190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169193">if</span>&nbsp;<span class="ident" id="8169196">b</span><span class="op" id="8169197">.</span><span class="ident" id="8169198">offset</span>&nbsp;<span class="op" id="8169205">&gt;=</span>&nbsp;<span class="builtinfunc" id="8169208">len</span><span class="op" id="8169211">(</span><span class="ident" id="8169212">b</span><span class="op" id="8169213">.</span><span class="ident" id="8169214">data</span><span class="op" id="8169218">)</span>&nbsp;<span class="op" id="8169220">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169224">return</span>&nbsp;<span class="num" id="8169231">0</span><span class="op" id="8169232">,</span>&nbsp;<span class="ident" id="8169234">io</span><span class="op" id="8169236">.</span><span class="ident" id="8169237">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169245">c</span>&nbsp;<span class="op" id="8169247">=</span>&nbsp;<span class="ident" id="8169249">b</span><span class="op" id="8169250">.</span><span class="ident" id="8169251">data</span><span class="op" id="8169255">[</span><span class="ident" id="8169256">b</span><span class="op" id="8169257">.</span><span class="ident" id="8169258">offset</span><span class="op" id="8169264">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169267">b</span><span class="op" id="8169268">.</span><span class="ident" id="8169269">offset</span><span class="op" id="8169275">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169279">return</span><br>
<span class="lineno">225</span><span class="op" id="8169286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8169289">func</span>&nbsp;<span class="op" id="8169294">(</span><span class="ident" id="8169295">b</span>&nbsp;<span class="op" id="8169297">*</span><span class="ident" id="8169298">benchmarkBuf</span><span class="op" id="8169310">)</span>&nbsp;<span class="ident" id="8169312">reset</span><span class="op" id="8169317">(</span><span class="op" id="8169318">)</span>&nbsp;<span class="op" id="8169320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169323">b</span><span class="op" id="8169324">.</span><span class="ident" id="8169325">offset</span>&nbsp;<span class="op" id="8169332">=</span>&nbsp;<span class="num" id="8169334">0</span><br>
<span class="lineno"></span><span class="op" id="8169336">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8169339">func</span>&nbsp;<span class="ident" id="8169344">BenchmarkDecodeComplex128Slice</span><span class="op" id="8169374">(</span><span class="ident" id="8169375">b</span>&nbsp;<span class="op" id="8169377">*</span><span class="ident" id="8169378">testing</span><span class="op" id="8169385">.</span><span class="ident" id="8169386">B</span><span class="op" id="8169387">)</span>&nbsp;<span class="op" id="8169389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169392">var</span>&nbsp;<span class="ident" id="8169396">buf</span>&nbsp;<span class="ident" id="8169400">bytes</span><span class="op" id="8169405">.</span><span class="ident" id="8169406">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169414">enc</span>&nbsp;<span class="op" id="8169418">:=</span>&nbsp;<span class="ident" id="8169421">NewEncoder</span><span class="op" id="8169431">(</span><span class="op" id="8169432">&amp;</span><span class="ident" id="8169433">buf</span><span class="op" id="8169436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169439">a</span>&nbsp;<span class="op" id="8169441">:=</span>&nbsp;<span class="builtinfunc" id="8169444">make</span><span class="op" id="8169448">(</span><span class="op" id="8169449">[</span><span class="op" id="8169450">]</span><span class="builtintype" id="8169451">complex128</span><span class="op" id="8169461">,</span>&nbsp;<span class="num" id="8169463">1000</span><span class="op" id="8169467">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169470">for</span>&nbsp;<span class="ident" id="8169474">i</span>&nbsp;<span class="op" id="8169476">:=</span>&nbsp;<span class="keyword" id="8169479">range</span>&nbsp;<span class="ident" id="8169485">a</span>&nbsp;<span class="op" id="8169487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169491">a</span><span class="op" id="8169492">[</span><span class="ident" id="8169493">i</span><span class="op" id="8169494">]</span>&nbsp;<span class="op" id="8169496">=</span>&nbsp;<span class="num" id="8169498">1.2</span>&nbsp;<span class="op" id="8169502">+</span>&nbsp;<span class="num" id="8169504">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169513">err</span>&nbsp;<span class="op" id="8169517">:=</span>&nbsp;<span class="ident" id="8169520">enc</span><span class="op" id="8169523">.</span><span class="ident" id="8169524">Encode</span><span class="op" id="8169530">(</span><span class="ident" id="8169531">a</span><span class="op" id="8169532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169535">if</span>&nbsp;<span class="ident" id="8169538">err</span>&nbsp;<span class="op" id="8169542">!=</span>&nbsp;<span class="ident" id="8169545">nil</span>&nbsp;<span class="op" id="8169549">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169553">b</span><span class="op" id="8169554">.</span><span class="ident" id="8169555">Fatal</span><span class="op" id="8169560">(</span><span class="ident" id="8169561">err</span><span class="op" id="8169564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169570">x</span>&nbsp;<span class="op" id="8169572">:=</span>&nbsp;<span class="builtinfunc" id="8169575">make</span><span class="op" id="8169579">(</span><span class="op" id="8169580">[</span><span class="op" id="8169581">]</span><span class="builtintype" id="8169582">complex128</span><span class="op" id="8169592">,</span>&nbsp;<span class="num" id="8169594">1000</span><span class="op" id="8169598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169601">bbuf</span>&nbsp;<span class="op" id="8169606">:=</span>&nbsp;<span class="ident" id="8169609">benchmarkBuf</span><span class="op" id="8169621">{</span><span class="ident" id="8169622">data</span><span class="op" id="8169626">:</span>&nbsp;<span class="ident" id="8169628">buf</span><span class="op" id="8169631">.</span><span class="ident" id="8169632">Bytes</span><span class="op" id="8169637">(</span><span class="op" id="8169638">)</span><span class="op" id="8169639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169642">b</span><span class="op" id="8169643">.</span><span class="ident" id="8169644">ResetTimer</span><span class="op" id="8169654">(</span><span class="op" id="8169655">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169658">for</span>&nbsp;<span class="ident" id="8169662">i</span>&nbsp;<span class="op" id="8169664">:=</span>&nbsp;<span class="num" id="8169667">0</span><span class="op" id="8169668">;</span>&nbsp;<span class="ident" id="8169670">i</span>&nbsp;<span class="op" id="8169672">&lt;</span>&nbsp;<span class="ident" id="8169674">b</span><span class="op" id="8169675">.</span><span class="ident" id="8169676">N</span><span class="op" id="8169677">;</span>&nbsp;<span class="ident" id="8169679">i</span><span class="op" id="8169680">++</span>&nbsp;<span class="op" id="8169683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169687">bbuf</span><span class="op" id="8169691">.</span><span class="ident" id="8169692">reset</span><span class="op" id="8169697">(</span><span class="op" id="8169698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169702">dec</span>&nbsp;<span class="op" id="8169706">:=</span>&nbsp;<span class="ident" id="8169709">NewDecoder</span><span class="op" id="8169719">(</span><span class="op" id="8169720">&amp;</span><span class="ident" id="8169721">bbuf</span><span class="op" id="8169725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169729">err</span>&nbsp;<span class="op" id="8169733">:=</span>&nbsp;<span class="ident" id="8169736">dec</span><span class="op" id="8169739">.</span><span class="ident" id="8169740">Decode</span><span class="op" id="8169746">(</span><span class="op" id="8169747">&amp;</span><span class="ident" id="8169748">x</span><span class="op" id="8169749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169753">if</span>&nbsp;<span class="ident" id="8169756">err</span>&nbsp;<span class="op" id="8169760">!=</span>&nbsp;<span class="ident" id="8169763">nil</span>&nbsp;<span class="op" id="8169767">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169772">b</span><span class="op" id="8169773">.</span><span class="ident" id="8169774">Fatal</span><span class="op" id="8169779">(</span><span class="ident" id="8169780">i</span><span class="op" id="8169781">,</span>&nbsp;<span class="ident" id="8169783">err</span><span class="op" id="8169786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169793">}</span><br>
<span class="lineno"></span><span class="op" id="8169795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8169798">func</span>&nbsp;<span class="ident" id="8169803">BenchmarkDecodeFloat64Slice</span><span class="op" id="8169830">(</span><span class="ident" id="8169831">b</span>&nbsp;<span class="op" id="8169833">*</span><span class="ident" id="8169834">testing</span><span class="op" id="8169841">.</span><span class="ident" id="8169842">B</span><span class="op" id="8169843">)</span>&nbsp;<span class="op" id="8169845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169848">var</span>&nbsp;<span class="ident" id="8169852">buf</span>&nbsp;<span class="ident" id="8169856">bytes</span><span class="op" id="8169861">.</span><span class="ident" id="8169862">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169870">enc</span>&nbsp;<span class="op" id="8169874">:=</span>&nbsp;<span class="ident" id="8169877">NewEncoder</span><span class="op" id="8169887">(</span><span class="op" id="8169888">&amp;</span><span class="ident" id="8169889">buf</span><span class="op" id="8169892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169895">a</span>&nbsp;<span class="op" id="8169897">:=</span>&nbsp;<span class="builtinfunc" id="8169900">make</span><span class="op" id="8169904">(</span><span class="op" id="8169905">[</span><span class="op" id="8169906">]</span><span class="builtintype" id="8169907">float64</span><span class="op" id="8169914">,</span>&nbsp;<span class="num" id="8169916">1000</span><span class="op" id="8169920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169923">for</span>&nbsp;<span class="ident" id="8169927">i</span>&nbsp;<span class="op" id="8169929">:=</span>&nbsp;<span class="keyword" id="8169932">range</span>&nbsp;<span class="ident" id="8169938">a</span>&nbsp;<span class="op" id="8169940">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169944">a</span><span class="op" id="8169945">[</span><span class="ident" id="8169946">i</span><span class="op" id="8169947">]</span>&nbsp;<span class="op" id="8169949">=</span>&nbsp;<span class="num" id="8169951">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169962">err</span>&nbsp;<span class="op" id="8169966">:=</span>&nbsp;<span class="ident" id="8169969">enc</span><span class="op" id="8169972">.</span><span class="ident" id="8169973">Encode</span><span class="op" id="8169979">(</span><span class="ident" id="8169980">a</span><span class="op" id="8169981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8169984">if</span>&nbsp;<span class="ident" id="8169987">err</span>&nbsp;<span class="op" id="8169991">!=</span>&nbsp;<span class="ident" id="8169994">nil</span>&nbsp;<span class="op" id="8169998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170002">b</span><span class="op" id="8170003">.</span><span class="ident" id="8170004">Fatal</span><span class="op" id="8170009">(</span><span class="ident" id="8170010">err</span><span class="op" id="8170013">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170019">x</span>&nbsp;<span class="op" id="8170021">:=</span>&nbsp;<span class="builtinfunc" id="8170024">make</span><span class="op" id="8170028">(</span><span class="op" id="8170029">[</span><span class="op" id="8170030">]</span><span class="builtintype" id="8170031">float64</span><span class="op" id="8170038">,</span>&nbsp;<span class="num" id="8170040">1000</span><span class="op" id="8170044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170047">bbuf</span>&nbsp;<span class="op" id="8170052">:=</span>&nbsp;<span class="ident" id="8170055">benchmarkBuf</span><span class="op" id="8170067">{</span><span class="ident" id="8170068">data</span><span class="op" id="8170072">:</span>&nbsp;<span class="ident" id="8170074">buf</span><span class="op" id="8170077">.</span><span class="ident" id="8170078">Bytes</span><span class="op" id="8170083">(</span><span class="op" id="8170084">)</span><span class="op" id="8170085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170088">b</span><span class="op" id="8170089">.</span><span class="ident" id="8170090">ResetTimer</span><span class="op" id="8170100">(</span><span class="op" id="8170101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170104">for</span>&nbsp;<span class="ident" id="8170108">i</span>&nbsp;<span class="op" id="8170110">:=</span>&nbsp;<span class="num" id="8170113">0</span><span class="op" id="8170114">;</span>&nbsp;<span class="ident" id="8170116">i</span>&nbsp;<span class="op" id="8170118">&lt;</span>&nbsp;<span class="ident" id="8170120">b</span><span class="op" id="8170121">.</span><span class="ident" id="8170122">N</span><span class="op" id="8170123">;</span>&nbsp;<span class="ident" id="8170125">i</span><span class="op" id="8170126">++</span>&nbsp;<span class="op" id="8170129">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170133">bbuf</span><span class="op" id="8170137">.</span><span class="ident" id="8170138">reset</span><span class="op" id="8170143">(</span><span class="op" id="8170144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170148">dec</span>&nbsp;<span class="op" id="8170152">:=</span>&nbsp;<span class="ident" id="8170155">NewDecoder</span><span class="op" id="8170165">(</span><span class="op" id="8170166">&amp;</span><span class="ident" id="8170167">bbuf</span><span class="op" id="8170171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170175">err</span>&nbsp;<span class="op" id="8170179">:=</span>&nbsp;<span class="ident" id="8170182">dec</span><span class="op" id="8170185">.</span><span class="ident" id="8170186">Decode</span><span class="op" id="8170192">(</span><span class="op" id="8170193">&amp;</span><span class="ident" id="8170194">x</span><span class="op" id="8170195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170199">if</span>&nbsp;<span class="ident" id="8170202">err</span>&nbsp;<span class="op" id="8170206">!=</span>&nbsp;<span class="ident" id="8170209">nil</span>&nbsp;<span class="op" id="8170213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170218">b</span><span class="op" id="8170219">.</span><span class="ident" id="8170220">Fatal</span><span class="op" id="8170225">(</span><span class="ident" id="8170226">i</span><span class="op" id="8170227">,</span>&nbsp;<span class="ident" id="8170229">err</span><span class="op" id="8170232">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170239">}</span><br>
<span class="lineno"></span><span class="op" id="8170241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8170244">func</span>&nbsp;<span class="ident" id="8170249">BenchmarkDecodeInt32Slice</span><span class="op" id="8170274">(</span><span class="ident" id="8170275">b</span>&nbsp;<span class="op" id="8170277">*</span><span class="ident" id="8170278">testing</span><span class="op" id="8170285">.</span><span class="ident" id="8170286">B</span><span class="op" id="8170287">)</span>&nbsp;<span class="op" id="8170289">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170292">var</span>&nbsp;<span class="ident" id="8170296">buf</span>&nbsp;<span class="ident" id="8170300">bytes</span><span class="op" id="8170305">.</span><span class="ident" id="8170306">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170314">enc</span>&nbsp;<span class="op" id="8170318">:=</span>&nbsp;<span class="ident" id="8170321">NewEncoder</span><span class="op" id="8170331">(</span><span class="op" id="8170332">&amp;</span><span class="ident" id="8170333">buf</span><span class="op" id="8170336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170339">a</span>&nbsp;<span class="op" id="8170341">:=</span>&nbsp;<span class="builtinfunc" id="8170344">make</span><span class="op" id="8170348">(</span><span class="op" id="8170349">[</span><span class="op" id="8170350">]</span><span class="builtintype" id="8170351">int32</span><span class="op" id="8170356">,</span>&nbsp;<span class="num" id="8170358">1000</span><span class="op" id="8170362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170365">for</span>&nbsp;<span class="ident" id="8170369">i</span>&nbsp;<span class="op" id="8170371">:=</span>&nbsp;<span class="keyword" id="8170374">range</span>&nbsp;<span class="ident" id="8170380">a</span>&nbsp;<span class="op" id="8170382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170386">a</span><span class="op" id="8170387">[</span><span class="ident" id="8170388">i</span><span class="op" id="8170389">]</span>&nbsp;<span class="op" id="8170391">=</span>&nbsp;<span class="num" id="8170393">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170402">err</span>&nbsp;<span class="op" id="8170406">:=</span>&nbsp;<span class="ident" id="8170409">enc</span><span class="op" id="8170412">.</span><span class="ident" id="8170413">Encode</span><span class="op" id="8170419">(</span><span class="ident" id="8170420">a</span><span class="op" id="8170421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170424">if</span>&nbsp;<span class="ident" id="8170427">err</span>&nbsp;<span class="op" id="8170431">!=</span>&nbsp;<span class="ident" id="8170434">nil</span>&nbsp;<span class="op" id="8170438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170442">b</span><span class="op" id="8170443">.</span><span class="ident" id="8170444">Fatal</span><span class="op" id="8170449">(</span><span class="ident" id="8170450">err</span><span class="op" id="8170453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170456">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170459">x</span>&nbsp;<span class="op" id="8170461">:=</span>&nbsp;<span class="builtinfunc" id="8170464">make</span><span class="op" id="8170468">(</span><span class="op" id="8170469">[</span><span class="op" id="8170470">]</span><span class="builtintype" id="8170471">int32</span><span class="op" id="8170476">,</span>&nbsp;<span class="num" id="8170478">1000</span><span class="op" id="8170482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170485">bbuf</span>&nbsp;<span class="op" id="8170490">:=</span>&nbsp;<span class="ident" id="8170493">benchmarkBuf</span><span class="op" id="8170505">{</span><span class="ident" id="8170506">data</span><span class="op" id="8170510">:</span>&nbsp;<span class="ident" id="8170512">buf</span><span class="op" id="8170515">.</span><span class="ident" id="8170516">Bytes</span><span class="op" id="8170521">(</span><span class="op" id="8170522">)</span><span class="op" id="8170523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170526">b</span><span class="op" id="8170527">.</span><span class="ident" id="8170528">ResetTimer</span><span class="op" id="8170538">(</span><span class="op" id="8170539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170542">for</span>&nbsp;<span class="ident" id="8170546">i</span>&nbsp;<span class="op" id="8170548">:=</span>&nbsp;<span class="num" id="8170551">0</span><span class="op" id="8170552">;</span>&nbsp;<span class="ident" id="8170554">i</span>&nbsp;<span class="op" id="8170556">&lt;</span>&nbsp;<span class="ident" id="8170558">b</span><span class="op" id="8170559">.</span><span class="ident" id="8170560">N</span><span class="op" id="8170561">;</span>&nbsp;<span class="ident" id="8170563">i</span><span class="op" id="8170564">++</span>&nbsp;<span class="op" id="8170567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170571">bbuf</span><span class="op" id="8170575">.</span><span class="ident" id="8170576">reset</span><span class="op" id="8170581">(</span><span class="op" id="8170582">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170586">dec</span>&nbsp;<span class="op" id="8170590">:=</span>&nbsp;<span class="ident" id="8170593">NewDecoder</span><span class="op" id="8170603">(</span><span class="op" id="8170604">&amp;</span><span class="ident" id="8170605">bbuf</span><span class="op" id="8170609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170613">err</span>&nbsp;<span class="op" id="8170617">:=</span>&nbsp;<span class="ident" id="8170620">dec</span><span class="op" id="8170623">.</span><span class="ident" id="8170624">Decode</span><span class="op" id="8170630">(</span><span class="op" id="8170631">&amp;</span><span class="ident" id="8170632">x</span><span class="op" id="8170633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170637">if</span>&nbsp;<span class="ident" id="8170640">err</span>&nbsp;<span class="op" id="8170644">!=</span>&nbsp;<span class="ident" id="8170647">nil</span>&nbsp;<span class="op" id="8170651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170656">b</span><span class="op" id="8170657">.</span><span class="ident" id="8170658">Fatal</span><span class="op" id="8170663">(</span><span class="ident" id="8170664">i</span><span class="op" id="8170665">,</span>&nbsp;<span class="ident" id="8170667">err</span><span class="op" id="8170670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170674">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170677">}</span><br>
<span class="lineno"></span><span class="op" id="8170679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8170682">func</span>&nbsp;<span class="ident" id="8170687">BenchmarkDecodeStringSlice</span><span class="op" id="8170713">(</span><span class="ident" id="8170714">b</span>&nbsp;<span class="op" id="8170716">*</span><span class="ident" id="8170717">testing</span><span class="op" id="8170724">.</span><span class="ident" id="8170725">B</span><span class="op" id="8170726">)</span>&nbsp;<span class="op" id="8170728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170731">var</span>&nbsp;<span class="ident" id="8170735">buf</span>&nbsp;<span class="ident" id="8170739">bytes</span><span class="op" id="8170744">.</span><span class="ident" id="8170745">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170753">enc</span>&nbsp;<span class="op" id="8170757">:=</span>&nbsp;<span class="ident" id="8170760">NewEncoder</span><span class="op" id="8170770">(</span><span class="op" id="8170771">&amp;</span><span class="ident" id="8170772">buf</span><span class="op" id="8170775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170778">a</span>&nbsp;<span class="op" id="8170780">:=</span>&nbsp;<span class="builtinfunc" id="8170783">make</span><span class="op" id="8170787">(</span><span class="op" id="8170788">[</span><span class="op" id="8170789">]</span><span class="builtintype" id="8170790">string</span><span class="op" id="8170796">,</span>&nbsp;<span class="num" id="8170798">1000</span><span class="op" id="8170802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170805">for</span>&nbsp;<span class="ident" id="8170809">i</span>&nbsp;<span class="op" id="8170811">:=</span>&nbsp;<span class="keyword" id="8170814">range</span>&nbsp;<span class="ident" id="8170820">a</span>&nbsp;<span class="op" id="8170822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170826">a</span><span class="op" id="8170827">[</span><span class="ident" id="8170828">i</span><span class="op" id="8170829">]</span>&nbsp;<span class="op" id="8170831">=</span>&nbsp;<span class="string" id="8170833">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170852">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170855">err</span>&nbsp;<span class="op" id="8170859">:=</span>&nbsp;<span class="ident" id="8170862">enc</span><span class="op" id="8170865">.</span><span class="ident" id="8170866">Encode</span><span class="op" id="8170872">(</span><span class="ident" id="8170873">a</span><span class="op" id="8170874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170877">if</span>&nbsp;<span class="ident" id="8170880">err</span>&nbsp;<span class="op" id="8170884">!=</span>&nbsp;<span class="ident" id="8170887">nil</span>&nbsp;<span class="op" id="8170891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170895">b</span><span class="op" id="8170896">.</span><span class="ident" id="8170897">Fatal</span><span class="op" id="8170902">(</span><span class="ident" id="8170903">err</span><span class="op" id="8170906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170912">x</span>&nbsp;<span class="op" id="8170914">:=</span>&nbsp;<span class="builtinfunc" id="8170917">make</span><span class="op" id="8170921">(</span><span class="op" id="8170922">[</span><span class="op" id="8170923">]</span><span class="builtintype" id="8170924">string</span><span class="op" id="8170930">,</span>&nbsp;<span class="num" id="8170932">1000</span><span class="op" id="8170936">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170939">bbuf</span>&nbsp;<span class="op" id="8170944">:=</span>&nbsp;<span class="ident" id="8170947">benchmarkBuf</span><span class="op" id="8170959">{</span><span class="ident" id="8170960">data</span><span class="op" id="8170964">:</span>&nbsp;<span class="ident" id="8170966">buf</span><span class="op" id="8170969">.</span><span class="ident" id="8170970">Bytes</span><span class="op" id="8170975">(</span><span class="op" id="8170976">)</span><span class="op" id="8170977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170980">b</span><span class="op" id="8170981">.</span><span class="ident" id="8170982">ResetTimer</span><span class="op" id="8170992">(</span><span class="op" id="8170993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8170996">for</span>&nbsp;<span class="ident" id="8171000">i</span>&nbsp;<span class="op" id="8171002">:=</span>&nbsp;<span class="num" id="8171005">0</span><span class="op" id="8171006">;</span>&nbsp;<span class="ident" id="8171008">i</span>&nbsp;<span class="op" id="8171010">&lt;</span>&nbsp;<span class="ident" id="8171012">b</span><span class="op" id="8171013">.</span><span class="ident" id="8171014">N</span><span class="op" id="8171015">;</span>&nbsp;<span class="ident" id="8171017">i</span><span class="op" id="8171018">++</span>&nbsp;<span class="op" id="8171021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171025">bbuf</span><span class="op" id="8171029">.</span><span class="ident" id="8171030">reset</span><span class="op" id="8171035">(</span><span class="op" id="8171036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171040">dec</span>&nbsp;<span class="op" id="8171044">:=</span>&nbsp;<span class="ident" id="8171047">NewDecoder</span><span class="op" id="8171057">(</span><span class="op" id="8171058">&amp;</span><span class="ident" id="8171059">bbuf</span><span class="op" id="8171063">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171067">err</span>&nbsp;<span class="op" id="8171071">:=</span>&nbsp;<span class="ident" id="8171074">dec</span><span class="op" id="8171077">.</span><span class="ident" id="8171078">Decode</span><span class="op" id="8171084">(</span><span class="op" id="8171085">&amp;</span><span class="ident" id="8171086">x</span><span class="op" id="8171087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171091">if</span>&nbsp;<span class="ident" id="8171094">err</span>&nbsp;<span class="op" id="8171098">!=</span>&nbsp;<span class="ident" id="8171101">nil</span>&nbsp;<span class="op" id="8171105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171110">b</span><span class="op" id="8171111">.</span><span class="ident" id="8171112">Fatal</span><span class="op" id="8171117">(</span><span class="ident" id="8171118">i</span><span class="op" id="8171119">,</span>&nbsp;<span class="ident" id="8171121">err</span><span class="op" id="8171124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171131">}</span><br>
<span class="lineno">325</span><span class="op" id="8171133">}</span>
</div>
</body>
</html>
