<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html" class="current">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7908310">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7908366">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7908420">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7908471">package</span>&nbsp;<span class="ident" id="7908479">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908486">import</span>&nbsp;<span class="op" id="7908493">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908496">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908502">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908513">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7908523">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908526">const</span>&nbsp;<span class="ident" id="7908532">quote</span>&nbsp;<span class="op" id="7908538">=</span>&nbsp;<span class="string" id="7908540">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7908545">type</span>&nbsp;<span class="ident" id="7908550">readTest</span>&nbsp;<span class="keyword" id="7908559">struct</span>&nbsp;<span class="op" id="7908566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7908569">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908628">in</span>&nbsp;&nbsp;<span class="builtintype" id="7908632">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908640">err</span>&nbsp;<span class="builtintype" id="7908644">string</span><br>
<span class="lineno"></span><span class="op" id="7908651">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7908654">var</span>&nbsp;<span class="ident" id="7908658">readImportsTests</span>&nbsp;<span class="op" id="7908675">=</span>&nbsp;<span class="op" id="7908677">[</span><span class="op" id="7908678">]</span><span class="ident" id="7908679">readTest</span><span class="op" id="7908687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908694">`package&nbsp;p`</span><span class="op" id="7908705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908709">&#34;&#34;</span><span class="op" id="7908711">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908714">}</span><span class="op" id="7908715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908722">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7908745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908749">&#34;&#34;</span><span class="op" id="7908751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908754">}</span><span class="op" id="7908755">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908762">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7908787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908791">&#34;&#34;</span><span class="op" id="7908793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908796">}</span><span class="op" id="7908797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908800">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908804">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="7908840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908844">&#34;&#34;</span><span class="op" id="7908846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908849">}</span><span class="op" id="7908850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908857">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="7909018">+</span>&nbsp;<span class="ident" id="7909020">quote</span>&nbsp;<span class="op" id="7909026">+</span>&nbsp;<span class="string" id="7909028">`x`</span>&nbsp;<span class="op" id="7909032">+</span>&nbsp;<span class="ident" id="7909034">quote</span>&nbsp;<span class="op" id="7909040">+</span>&nbsp;<span class="string" id="7909042">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="7909063">+</span>&nbsp;<span class="ident" id="7909065">quote</span>&nbsp;<span class="op" id="7909071">+</span>&nbsp;<span class="string" id="7909073">`x`</span>&nbsp;<span class="op" id="7909077">+</span>&nbsp;<span class="ident" id="7909079">quote</span>&nbsp;<span class="op" id="7909085">+</span>&nbsp;<span class="string" id="7909087">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="7909096">+</span>&nbsp;<span class="ident" id="7909098">quote</span>&nbsp;<span class="op" id="7909104">+</span>&nbsp;<span class="string" id="7909106">`x`</span>&nbsp;<span class="op" id="7909110">+</span>&nbsp;<span class="ident" id="7909112">quote</span>&nbsp;<span class="op" id="7909118">+</span>&nbsp;<span class="string" id="7909120">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="7909230">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909234">&#34;&#34;</span><span class="op" id="7909236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909239">}</span><span class="op" id="7909240">,</span><br>
<span class="lineno"></span><span class="op" id="7909242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909245">var</span>&nbsp;<span class="ident" id="7909249">readCommentsTests</span>&nbsp;<span class="op" id="7909267">=</span>&nbsp;<span class="op" id="7909269">[</span><span class="op" id="7909270">]</span><span class="ident" id="7909271">readTest</span><span class="op" id="7909279">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909286">`ℙpackage&nbsp;p`</span><span class="op" id="7909300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909304">&#34;&#34;</span><span class="op" id="7909306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909309">}</span><span class="op" id="7909310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909313">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909317">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7909343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909347">&#34;&#34;</span><span class="op" id="7909349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909352">}</span><span class="op" id="7909353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909360">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7909388">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909392">&#34;&#34;</span><span class="op" id="7909394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909397">}</span><span class="op" id="7909398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909405">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="7909492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909496">&#34;&#34;</span><span class="op" id="7909498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909501">}</span><span class="op" id="7909502">,</span><br>
<span class="lineno">95</span><span class="op" id="7909504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909507">func</span>&nbsp;<span class="ident" id="7909512">testRead</span><span class="op" id="7909520">(</span><span class="ident" id="7909521">t</span>&nbsp;<span class="op" id="7909523">*</span><span class="ident" id="7909524">testing</span><span class="op" id="7909531">.</span><span class="ident" id="7909532">T</span><span class="op" id="7909533">,</span>&nbsp;<span class="ident" id="7909535">tests</span>&nbsp;<span class="op" id="7909541">[</span><span class="op" id="7909542">]</span><span class="ident" id="7909543">readTest</span><span class="op" id="7909551">,</span>&nbsp;<span class="ident" id="7909553">read</span>&nbsp;<span class="keyword" id="7909558">func</span><span class="op" id="7909562">(</span><span class="ident" id="7909563">io</span><span class="op" id="7909565">.</span><span class="ident" id="7909566">Reader</span><span class="op" id="7909572">)</span>&nbsp;<span class="op" id="7909574">(</span><span class="op" id="7909575">[</span><span class="op" id="7909576">]</span><span class="builtintype" id="7909577">byte</span><span class="op" id="7909581">,</span>&nbsp;<span class="builtintype" id="7909583">error</span><span class="op" id="7909588">)</span><span class="op" id="7909589">)</span>&nbsp;<span class="op" id="7909591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909594">for</span>&nbsp;<span class="ident" id="7909598">i</span><span class="op" id="7909599">,</span>&nbsp;<span class="ident" id="7909601">tt</span>&nbsp;<span class="op" id="7909604">:=</span>&nbsp;<span class="keyword" id="7909607">range</span>&nbsp;<span class="ident" id="7909613">tests</span>&nbsp;<span class="op" id="7909619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909623">var</span>&nbsp;<span class="ident" id="7909627">in</span><span class="op" id="7909629">,</span>&nbsp;<span class="ident" id="7909631">testOut</span>&nbsp;<span class="builtintype" id="7909639">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909648">j</span>&nbsp;<span class="op" id="7909650">:=</span>&nbsp;<span class="ident" id="7909653">strings</span><span class="op" id="7909660">.</span><span class="ident" id="7909661">Index</span><span class="op" id="7909666">(</span><span class="ident" id="7909667">tt</span><span class="op" id="7909669">.</span><span class="ident" id="7909670">in</span><span class="op" id="7909672">,</span>&nbsp;<span class="string" id="7909674">&#34;ℙ&#34;</span><span class="op" id="7909679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909683">if</span>&nbsp;<span class="ident" id="7909686">j</span>&nbsp;<span class="op" id="7909688">&lt;</span>&nbsp;<span class="num" id="7909690">0</span>&nbsp;<span class="op" id="7909692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909697">in</span>&nbsp;<span class="op" id="7909700">=</span>&nbsp;<span class="ident" id="7909702">tt</span><span class="op" id="7909704">.</span><span class="ident" id="7909705">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909711">testOut</span>&nbsp;<span class="op" id="7909719">=</span>&nbsp;<span class="ident" id="7909721">tt</span><span class="op" id="7909723">.</span><span class="ident" id="7909724">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909729">}</span>&nbsp;<span class="keyword" id="7909731">else</span>&nbsp;<span class="op" id="7909736">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909741">in</span>&nbsp;<span class="op" id="7909744">=</span>&nbsp;<span class="ident" id="7909746">tt</span><span class="op" id="7909748">.</span><span class="ident" id="7909749">in</span><span class="op" id="7909751">[</span><span class="op" id="7909752">:</span><span class="ident" id="7909753">j</span><span class="op" id="7909754">]</span>&nbsp;<span class="op" id="7909756">+</span>&nbsp;<span class="ident" id="7909758">tt</span><span class="op" id="7909760">.</span><span class="ident" id="7909761">in</span><span class="op" id="7909763">[</span><span class="ident" id="7909764">j</span><span class="op" id="7909765">+</span><span class="builtinfunc" id="7909766">len</span><span class="op" id="7909769">(</span><span class="string" id="7909770">&#34;ℙ&#34;</span><span class="op" id="7909775">)</span><span class="op" id="7909776">:</span><span class="op" id="7909777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909782">testOut</span>&nbsp;<span class="op" id="7909790">=</span>&nbsp;<span class="ident" id="7909792">tt</span><span class="op" id="7909794">.</span><span class="ident" id="7909795">in</span><span class="op" id="7909797">[</span><span class="op" id="7909798">:</span><span class="ident" id="7909799">j</span><span class="op" id="7909800">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909808">r</span>&nbsp;<span class="op" id="7909810">:=</span>&nbsp;<span class="ident" id="7909813">strings</span><span class="op" id="7909820">.</span><span class="ident" id="7909821">NewReader</span><span class="op" id="7909830">(</span><span class="ident" id="7909831">in</span><span class="op" id="7909833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909837">buf</span><span class="op" id="7909840">,</span>&nbsp;<span class="ident" id="7909842">err</span>&nbsp;<span class="op" id="7909846">:=</span>&nbsp;<span class="ident" id="7909849">read</span><span class="op" id="7909853">(</span><span class="ident" id="7909854">r</span><span class="op" id="7909855">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909859">if</span>&nbsp;<span class="ident" id="7909862">err</span>&nbsp;<span class="op" id="7909866">!=</span>&nbsp;<span class="ident" id="7909869">nil</span>&nbsp;<span class="op" id="7909873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909878">if</span>&nbsp;<span class="ident" id="7909881">tt</span><span class="op" id="7909883">.</span><span class="ident" id="7909884">err</span>&nbsp;<span class="op" id="7909888">==</span>&nbsp;<span class="string" id="7909891">&#34;&#34;</span>&nbsp;<span class="op" id="7909894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909900">t</span><span class="op" id="7909901">.</span><span class="ident" id="7909902">Errorf</span><span class="op" id="7909908">(</span><span class="string" id="7909909">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="7909945">,</span>&nbsp;<span class="ident" id="7909947">i</span><span class="op" id="7909948">,</span>&nbsp;<span class="ident" id="7909950">err</span><span class="op" id="7909953">,</span>&nbsp;<span class="builtintype" id="7909955">string</span><span class="op" id="7909961">(</span><span class="ident" id="7909962">buf</span><span class="op" id="7909965">)</span><span class="op" id="7909966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909972">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909984">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909989">if</span>&nbsp;<span class="op" id="7909992">!</span><span class="ident" id="7909993">strings</span><span class="op" id="7910000">.</span><span class="ident" id="7910001">Contains</span><span class="op" id="7910009">(</span><span class="ident" id="7910010">err</span><span class="op" id="7910013">.</span><span class="ident" id="7910014">Error</span><span class="op" id="7910019">(</span><span class="op" id="7910020">)</span><span class="op" id="7910021">,</span>&nbsp;<span class="ident" id="7910023">tt</span><span class="op" id="7910025">.</span><span class="ident" id="7910026">err</span><span class="op" id="7910029">)</span>&nbsp;<span class="op" id="7910031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910037">t</span><span class="op" id="7910038">.</span><span class="ident" id="7910039">Errorf</span><span class="op" id="7910045">(</span><span class="string" id="7910046">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7910072">,</span>&nbsp;<span class="ident" id="7910074">i</span><span class="op" id="7910075">,</span>&nbsp;<span class="ident" id="7910077">err</span><span class="op" id="7910080">,</span>&nbsp;<span class="ident" id="7910082">tt</span><span class="op" id="7910084">.</span><span class="ident" id="7910085">err</span><span class="op" id="7910088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910094">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910111">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910126">if</span>&nbsp;<span class="ident" id="7910129">err</span>&nbsp;<span class="op" id="7910133">==</span>&nbsp;<span class="ident" id="7910136">nil</span>&nbsp;<span class="op" id="7910140">&amp;&amp;</span>&nbsp;<span class="ident" id="7910143">tt</span><span class="op" id="7910145">.</span><span class="ident" id="7910146">err</span>&nbsp;<span class="op" id="7910150">!=</span>&nbsp;<span class="string" id="7910153">&#34;&#34;</span>&nbsp;<span class="op" id="7910156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910161">t</span><span class="op" id="7910162">.</span><span class="ident" id="7910163">Errorf</span><span class="op" id="7910169">(</span><span class="string" id="7910170">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7910197">,</span>&nbsp;<span class="ident" id="7910199">i</span><span class="op" id="7910200">,</span>&nbsp;<span class="ident" id="7910202">tt</span><span class="op" id="7910204">.</span><span class="ident" id="7910205">err</span><span class="op" id="7910208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910213">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910224">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910229">out</span>&nbsp;<span class="op" id="7910233">:=</span>&nbsp;<span class="builtintype" id="7910236">string</span><span class="op" id="7910242">(</span><span class="ident" id="7910243">buf</span><span class="op" id="7910246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910250">if</span>&nbsp;<span class="ident" id="7910253">out</span>&nbsp;<span class="op" id="7910257">!=</span>&nbsp;<span class="ident" id="7910260">testOut</span>&nbsp;<span class="op" id="7910268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910273">t</span><span class="op" id="7910274">.</span><span class="ident" id="7910275">Errorf</span><span class="op" id="7910281">(</span><span class="string" id="7910282">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="7910322">,</span>&nbsp;<span class="ident" id="7910324">i</span><span class="op" id="7910325">,</span>&nbsp;<span class="ident" id="7910327">out</span><span class="op" id="7910330">,</span>&nbsp;<span class="ident" id="7910332">testOut</span><span class="op" id="7910339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910343">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910346">}</span><br>
<span class="lineno"></span><span class="op" id="7910348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910351">func</span>&nbsp;<span class="ident" id="7910356">TestReadImports</span><span class="op" id="7910371">(</span><span class="ident" id="7910372">t</span>&nbsp;<span class="op" id="7910374">*</span><span class="ident" id="7910375">testing</span><span class="op" id="7910382">.</span><span class="ident" id="7910383">T</span><span class="op" id="7910384">)</span>&nbsp;<span class="op" id="7910386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910389">testRead</span><span class="op" id="7910397">(</span><span class="ident" id="7910398">t</span><span class="op" id="7910399">,</span>&nbsp;<span class="ident" id="7910401">readImportsTests</span><span class="op" id="7910417">,</span>&nbsp;<span class="keyword" id="7910419">func</span><span class="op" id="7910423">(</span><span class="ident" id="7910424">r</span>&nbsp;<span class="ident" id="7910426">io</span><span class="op" id="7910428">.</span><span class="ident" id="7910429">Reader</span><span class="op" id="7910435">)</span>&nbsp;<span class="op" id="7910437">(</span><span class="op" id="7910438">[</span><span class="op" id="7910439">]</span><span class="builtintype" id="7910440">byte</span><span class="op" id="7910444">,</span>&nbsp;<span class="builtintype" id="7910446">error</span><span class="op" id="7910451">)</span>&nbsp;<span class="op" id="7910453">{</span>&nbsp;<span class="keyword" id="7910455">return</span>&nbsp;<span class="ident" id="7910462">readImports</span><span class="op" id="7910473">(</span><span class="ident" id="7910474">r</span><span class="op" id="7910475">,</span>&nbsp;<span class="builtintype" id="7910477">true</span><span class="op" id="7910481">)</span>&nbsp;<span class="op" id="7910483">}</span><span class="op" id="7910484">)</span><br>
<span class="lineno">135</span><span class="op" id="7910486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910489">func</span>&nbsp;<span class="ident" id="7910494">TestReadComments</span><span class="op" id="7910510">(</span><span class="ident" id="7910511">t</span>&nbsp;<span class="op" id="7910513">*</span><span class="ident" id="7910514">testing</span><span class="op" id="7910521">.</span><span class="ident" id="7910522">T</span><span class="op" id="7910523">)</span>&nbsp;<span class="op" id="7910525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910528">testRead</span><span class="op" id="7910536">(</span><span class="ident" id="7910537">t</span><span class="op" id="7910538">,</span>&nbsp;<span class="ident" id="7910540">readCommentsTests</span><span class="op" id="7910557">,</span>&nbsp;<span class="ident" id="7910559">readComments</span><span class="op" id="7910571">)</span><br>
<span class="lineno"></span><span class="op" id="7910573">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7910576">var</span>&nbsp;<span class="ident" id="7910580">readFailuresTests</span>&nbsp;<span class="op" id="7910598">=</span>&nbsp;<span class="op" id="7910600">[</span><span class="op" id="7910601">]</span><span class="ident" id="7910602">readTest</span><span class="op" id="7910610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910617">`package`</span><span class="op" id="7910626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910630">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910644">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910647">}</span><span class="op" id="7910648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910655">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="7910689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910693">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="7910718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910721">}</span><span class="op" id="7910722">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910729">`package&nbsp;p;&nbsp;import`</span><span class="op" id="7910748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910752">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910769">}</span><span class="op" id="7910770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910773">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910777">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="7910798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910802">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910819">}</span><span class="op" id="7910820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910827">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="7910853">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910857">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910874">}</span><span class="op" id="7910875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910882">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="7910904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910908">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910922">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910925">}</span><span class="op" id="7910926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910933">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="7910954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910958">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7910972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910975">}</span><span class="op" id="7910976">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910983">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="7911006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911010">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911027">}</span><span class="op" id="7911028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911031">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911035">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="7911059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911063">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911080">}</span><span class="op" id="7911081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911088">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="7911109">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911113">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911130">}</span><span class="op" id="7911131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911138">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="7911161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911165">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911179">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911182">}</span><span class="op" id="7911183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911190">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="7911214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911218">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911235">}</span><span class="op" id="7911236">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911243">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="7911264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911268">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911285">}</span><span class="op" id="7911286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911289">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911293">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="7911315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911319">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911336">}</span><span class="op" id="7911337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911344">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="7911367">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911371">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911388">}</span><span class="op" id="7911389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911396">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="7911420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7911424">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7911438">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911441">}</span><span class="op" id="7911442">,</span><br>
<span class="lineno"></span><span class="op" id="7911444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911447">func</span>&nbsp;<span class="ident" id="7911452">TestReadFailures</span><span class="op" id="7911468">(</span><span class="ident" id="7911469">t</span>&nbsp;<span class="op" id="7911471">*</span><span class="ident" id="7911472">testing</span><span class="op" id="7911479">.</span><span class="ident" id="7911480">T</span><span class="op" id="7911481">)</span>&nbsp;<span class="op" id="7911483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911486">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911543">testRead</span><span class="op" id="7911551">(</span><span class="ident" id="7911552">t</span><span class="op" id="7911553">,</span>&nbsp;<span class="ident" id="7911555">readFailuresTests</span><span class="op" id="7911572">,</span>&nbsp;<span class="keyword" id="7911574">func</span><span class="op" id="7911578">(</span><span class="ident" id="7911579">r</span>&nbsp;<span class="ident" id="7911581">io</span><span class="op" id="7911583">.</span><span class="ident" id="7911584">Reader</span><span class="op" id="7911590">)</span>&nbsp;<span class="op" id="7911592">(</span><span class="op" id="7911593">[</span><span class="op" id="7911594">]</span><span class="builtintype" id="7911595">byte</span><span class="op" id="7911599">,</span>&nbsp;<span class="builtintype" id="7911601">error</span><span class="op" id="7911606">)</span>&nbsp;<span class="op" id="7911608">{</span>&nbsp;<span class="keyword" id="7911610">return</span>&nbsp;<span class="ident" id="7911617">readImports</span><span class="op" id="7911628">(</span><span class="ident" id="7911629">r</span><span class="op" id="7911630">,</span>&nbsp;<span class="builtintype" id="7911632">true</span><span class="op" id="7911636">)</span>&nbsp;<span class="op" id="7911638">}</span><span class="op" id="7911639">)</span><br>
<span class="lineno"></span><span class="op" id="7911641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911644">func</span>&nbsp;<span class="ident" id="7911649">TestReadFailuresIgnored</span><span class="op" id="7911672">(</span><span class="ident" id="7911673">t</span>&nbsp;<span class="op" id="7911675">*</span><span class="ident" id="7911676">testing</span><span class="op" id="7911683">.</span><span class="ident" id="7911684">T</span><span class="op" id="7911685">)</span>&nbsp;<span class="op" id="7911687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911690">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911759">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911819">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911866">tests</span>&nbsp;<span class="op" id="7911872">:=</span>&nbsp;<span class="builtinfunc" id="7911875">make</span><span class="op" id="7911879">(</span><span class="op" id="7911880">[</span><span class="op" id="7911881">]</span><span class="ident" id="7911882">readTest</span><span class="op" id="7911890">,</span>&nbsp;<span class="builtinfunc" id="7911892">len</span><span class="op" id="7911895">(</span><span class="ident" id="7911896">readFailuresTests</span><span class="op" id="7911913">)</span><span class="op" id="7911914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7911917">copy</span><span class="op" id="7911921">(</span><span class="ident" id="7911922">tests</span><span class="op" id="7911927">,</span>&nbsp;<span class="ident" id="7911929">readFailuresTests</span><span class="op" id="7911946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911949">for</span>&nbsp;<span class="ident" id="7911953">i</span>&nbsp;<span class="op" id="7911955">:=</span>&nbsp;<span class="keyword" id="7911958">range</span>&nbsp;<span class="ident" id="7911964">tests</span>&nbsp;<span class="op" id="7911970">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911974">tt</span>&nbsp;<span class="op" id="7911977">:=</span>&nbsp;<span class="op" id="7911980">&amp;</span><span class="ident" id="7911981">tests</span><span class="op" id="7911986">[</span><span class="ident" id="7911987">i</span><span class="op" id="7911988">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911992">if</span>&nbsp;<span class="op" id="7911995">!</span><span class="ident" id="7911996">strings</span><span class="op" id="7912003">.</span><span class="ident" id="7912004">Contains</span><span class="op" id="7912012">(</span><span class="ident" id="7912013">tt</span><span class="op" id="7912015">.</span><span class="ident" id="7912016">err</span><span class="op" id="7912019">,</span>&nbsp;<span class="string" id="7912021">&#34;NUL&#34;</span><span class="op" id="7912026">)</span>&nbsp;<span class="op" id="7912028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912033">tt</span><span class="op" id="7912035">.</span><span class="ident" id="7912036">err</span>&nbsp;<span class="op" id="7912040">=</span>&nbsp;<span class="string" id="7912042">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912050">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912053">testRead</span><span class="op" id="7912061">(</span><span class="ident" id="7912062">t</span><span class="op" id="7912063">,</span>&nbsp;<span class="ident" id="7912065">tests</span><span class="op" id="7912070">,</span>&nbsp;<span class="keyword" id="7912072">func</span><span class="op" id="7912076">(</span><span class="ident" id="7912077">r</span>&nbsp;<span class="ident" id="7912079">io</span><span class="op" id="7912081">.</span><span class="ident" id="7912082">Reader</span><span class="op" id="7912088">)</span>&nbsp;<span class="op" id="7912090">(</span><span class="op" id="7912091">[</span><span class="op" id="7912092">]</span><span class="builtintype" id="7912093">byte</span><span class="op" id="7912097">,</span>&nbsp;<span class="builtintype" id="7912099">error</span><span class="op" id="7912104">)</span>&nbsp;<span class="op" id="7912106">{</span>&nbsp;<span class="keyword" id="7912108">return</span>&nbsp;<span class="ident" id="7912115">readImports</span><span class="op" id="7912126">(</span><span class="ident" id="7912127">r</span><span class="op" id="7912128">,</span>&nbsp;<span class="builtintype" id="7912130">false</span><span class="op" id="7912135">)</span>&nbsp;<span class="op" id="7912137">}</span><span class="op" id="7912138">)</span><br>
<span class="lineno"></span><span class="op" id="7912140">}</span>
</div>
</body>
</html>
