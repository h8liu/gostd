<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7998863">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7998919">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7998973">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7999024">package</span>&nbsp;<span class="ident" id="7999032">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7999038">import</span>&nbsp;<span class="op" id="7999045">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999048">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999057">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999066">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999073">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999079">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999090">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999101">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999112">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7999122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7999125">type</span>&nbsp;<span class="ident" id="7999130">reqTest</span>&nbsp;<span class="keyword" id="7999138">struct</span>&nbsp;<span class="op" id="7999145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999148">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7999156">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999164">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7999172">*</span><span class="ident" id="7999173">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999182">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7999190">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999198">Trailer</span>&nbsp;<span class="ident" id="7999206">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999214">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7999222">string</span><br>
<span class="lineno"></span><span class="op" id="7999229">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7999232">var</span>&nbsp;<span class="ident" id="7999236">noError</span>&nbsp;<span class="op" id="7999244">=</span>&nbsp;<span class="string" id="7999246">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7999249">var</span>&nbsp;<span class="ident" id="7999253">noBody</span>&nbsp;<span class="op" id="7999260">=</span>&nbsp;<span class="string" id="7999262">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7999265">var</span>&nbsp;<span class="ident" id="7999269">noTrailer</span>&nbsp;<span class="ident" id="7999279">Header</span>&nbsp;<span class="op" id="7999286">=</span>&nbsp;<span class="ident" id="7999288">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7999293">var</span>&nbsp;<span class="ident" id="7999297">reqTests</span>&nbsp;<span class="op" id="7999306">=</span>&nbsp;<span class="op" id="7999308">[</span><span class="op" id="7999309">]</span><span class="ident" id="7999310">reqTest</span><span class="op" id="7999317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7999320">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999388">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7999434">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999439">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7999470">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999475">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7999498">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999503">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7999581">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999586">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7999624">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999629">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7999665">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999670">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7999723">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999728">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7999750">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999755">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="7999779">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999784">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7999823">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7999828">&#34;abcdef\n???&#34;</span><span class="op" id="7999841">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999846">&amp;</span><span class="ident" id="7999847">Request</span><span class="op" id="7999854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999859">Method</span><span class="op" id="7999865">:</span>&nbsp;<span class="string" id="7999867">&#34;GET&#34;</span><span class="op" id="7999872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999877">URL</span><span class="op" id="7999880">:</span>&nbsp;<span class="op" id="7999882">&amp;</span><span class="ident" id="7999883">url</span><span class="op" id="7999886">.</span><span class="ident" id="7999887">URL</span><span class="op" id="7999890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999896">Scheme</span><span class="op" id="7999902">:</span>&nbsp;<span class="string" id="7999904">&#34;http&#34;</span><span class="op" id="7999910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999916">Host</span><span class="op" id="7999920">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7999924">&#34;www.techcrunch.com&#34;</span><span class="op" id="7999944">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999950">Path</span><span class="op" id="7999954">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7999958">&#34;/&#34;</span><span class="op" id="7999961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999966">}</span><span class="op" id="7999967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999972">Proto</span><span class="op" id="7999977">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7999984">&#34;HTTP/1.1&#34;</span><span class="op" id="7999994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999999">ProtoMajor</span><span class="op" id="8000009">:</span>&nbsp;<span class="num" id="8000011">1</span><span class="op" id="8000012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000017">ProtoMinor</span><span class="op" id="8000027">:</span>&nbsp;<span class="num" id="8000029">1</span><span class="op" id="8000030">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000035">Header</span><span class="op" id="8000041">:</span>&nbsp;<span class="ident" id="8000043">Header</span><span class="op" id="8000049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000055">&#34;Accept&#34;</span><span class="op" id="8000063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8000075">{</span><span class="string" id="8000076">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="8000141">}</span><span class="op" id="8000142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000148">&#34;Accept-Language&#34;</span><span class="op" id="8000165">:</span>&nbsp;&nbsp;<span class="op" id="8000168">{</span><span class="string" id="8000169">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="8000185">}</span><span class="op" id="8000186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000192">&#34;Accept-Encoding&#34;</span><span class="op" id="8000209">:</span>&nbsp;&nbsp;<span class="op" id="8000212">{</span><span class="string" id="8000213">&#34;gzip,deflate&#34;</span><span class="op" id="8000227">}</span><span class="op" id="8000228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000234">&#34;Accept-Charset&#34;</span><span class="op" id="8000250">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8000254">{</span><span class="string" id="8000255">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="8000287">}</span><span class="op" id="8000288">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000294">&#34;Keep-Alive&#34;</span><span class="op" id="8000306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8000314">{</span><span class="string" id="8000315">&#34;300&#34;</span><span class="op" id="8000320">}</span><span class="op" id="8000321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000327">&#34;Proxy-Connection&#34;</span><span class="op" id="8000345">:</span>&nbsp;<span class="op" id="8000347">{</span><span class="string" id="8000348">&#34;keep-alive&#34;</span><span class="op" id="8000360">}</span><span class="op" id="8000361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000367">&#34;Content-Length&#34;</span><span class="op" id="8000383">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8000387">{</span><span class="string" id="8000388">&#34;7&#34;</span><span class="op" id="8000391">}</span><span class="op" id="8000392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000398">&#34;User-Agent&#34;</span><span class="op" id="8000410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8000418">{</span><span class="string" id="8000419">&#34;Fake&#34;</span><span class="op" id="8000425">}</span><span class="op" id="8000426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000431">}</span><span class="op" id="8000432">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000437">Close</span><span class="op" id="8000442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8000452">false</span><span class="op" id="8000457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000462">ContentLength</span><span class="op" id="8000475">:</span>&nbsp;<span class="num" id="8000477">7</span><span class="op" id="8000478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000483">Host</span><span class="op" id="8000487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8000498">&#34;www.techcrunch.com&#34;</span><span class="op" id="8000518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000523">RequestURI</span><span class="op" id="8000533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8000538">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="8000566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000570">}</span><span class="op" id="8000571">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000576">&#34;abcdef\n&#34;</span><span class="op" id="8000586">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000591">noTrailer</span><span class="op" id="8000600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000604">noError</span><span class="op" id="8000611">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000614">}</span><span class="op" id="8000615">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8000619">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000670">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8000691">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000696">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="8000719">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000724">&amp;</span><span class="ident" id="8000725">Request</span><span class="op" id="8000732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000737">Method</span><span class="op" id="8000743">:</span>&nbsp;<span class="string" id="8000745">&#34;GET&#34;</span><span class="op" id="8000750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000755">URL</span><span class="op" id="8000758">:</span>&nbsp;<span class="op" id="8000760">&amp;</span><span class="ident" id="8000761">url</span><span class="op" id="8000764">.</span><span class="ident" id="8000765">URL</span><span class="op" id="8000768">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000774">Path</span><span class="op" id="8000778">:</span>&nbsp;<span class="string" id="8000780">&#34;/&#34;</span><span class="op" id="8000783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000788">}</span><span class="op" id="8000789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000794">Proto</span><span class="op" id="8000799">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8000809">&#34;HTTP/1.1&#34;</span><span class="op" id="8000819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000824">ProtoMajor</span><span class="op" id="8000834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8000839">1</span><span class="op" id="8000840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000845">ProtoMinor</span><span class="op" id="8000855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8000860">1</span><span class="op" id="8000861">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000866">Header</span><span class="op" id="8000872">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8000881">Header</span><span class="op" id="8000887">{</span><span class="op" id="8000888">}</span><span class="op" id="8000889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000894">Close</span><span class="op" id="8000899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8000909">false</span><span class="op" id="8000914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000919">ContentLength</span><span class="op" id="8000932">:</span>&nbsp;<span class="num" id="8000934">0</span><span class="op" id="8000935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000940">Host</span><span class="op" id="8000944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8000955">&#34;foo.com&#34;</span><span class="op" id="8000964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000969">RequestURI</span><span class="op" id="8000979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8000984">&#34;/&#34;</span><span class="op" id="8000987">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000991">}</span><span class="op" id="8000992">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000997">noBody</span><span class="op" id="8001003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001007">noTrailer</span><span class="op" id="8001016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001020">noError</span><span class="op" id="8001027">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001030">}</span><span class="op" id="8001031">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001035">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001090">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001140">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001144">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8001195">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001200">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8001220">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001225">&amp;</span><span class="ident" id="8001226">Request</span><span class="op" id="8001233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001238">Method</span><span class="op" id="8001244">:</span>&nbsp;<span class="string" id="8001246">&#34;GET&#34;</span><span class="op" id="8001251">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001256">URL</span><span class="op" id="8001259">:</span>&nbsp;<span class="op" id="8001261">&amp;</span><span class="ident" id="8001262">url</span><span class="op" id="8001265">.</span><span class="ident" id="8001266">URL</span><span class="op" id="8001269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001275">Path</span><span class="op" id="8001279">:</span>&nbsp;<span class="string" id="8001281">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8001314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001319">}</span><span class="op" id="8001320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001325">Proto</span><span class="op" id="8001330">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8001340">&#34;HTTP/1.1&#34;</span><span class="op" id="8001350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001355">ProtoMajor</span><span class="op" id="8001365">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8001370">1</span><span class="op" id="8001371">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001376">ProtoMinor</span><span class="op" id="8001386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8001391">1</span><span class="op" id="8001392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001397">Header</span><span class="op" id="8001403">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8001412">Header</span><span class="op" id="8001418">{</span><span class="op" id="8001419">}</span><span class="op" id="8001420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001425">Close</span><span class="op" id="8001430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8001440">false</span><span class="op" id="8001445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001450">ContentLength</span><span class="op" id="8001463">:</span>&nbsp;<span class="num" id="8001465">0</span><span class="op" id="8001466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001471">Host</span><span class="op" id="8001475">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8001486">&#34;test&#34;</span><span class="op" id="8001492">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001497">RequestURI</span><span class="op" id="8001507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8001512">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8001545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001549">}</span><span class="op" id="8001550">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001555">noBody</span><span class="op" id="8001561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001565">noTrailer</span><span class="op" id="8001574">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001578">noError</span><span class="op" id="8001585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001588">}</span><span class="op" id="8001589">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001593">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001665">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001669">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8001711">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001716">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8001736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001740">nil</span><span class="op" id="8001743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001747">noBody</span><span class="op" id="8001753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001757">noTrailer</span><span class="op" id="8001766">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001770">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="8001825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001828">}</span><span class="op" id="8001829">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001833">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001856">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001860">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8001880">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001885">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8001905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001909">nil</span><span class="op" id="8001912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001916">noBody</span><span class="op" id="8001922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001926">noTrailer</span><span class="op" id="8001935">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001939">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="8001958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001961">}</span><span class="op" id="8001962">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001966">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002003">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002007">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8002029">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002034">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="8002054">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002059">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8002096">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002101">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="8002116">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002121">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="8002136">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002141">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8002149">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002154">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="8002187">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002192">&#34;\r\n&#34;</span><span class="op" id="8002198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002202">&amp;</span><span class="ident" id="8002203">Request</span><span class="op" id="8002210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002215">Method</span><span class="op" id="8002221">:</span>&nbsp;<span class="string" id="8002223">&#34;POST&#34;</span><span class="op" id="8002229">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002234">URL</span><span class="op" id="8002237">:</span>&nbsp;<span class="op" id="8002239">&amp;</span><span class="ident" id="8002240">url</span><span class="op" id="8002243">.</span><span class="ident" id="8002244">URL</span><span class="op" id="8002247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002253">Path</span><span class="op" id="8002257">:</span>&nbsp;<span class="string" id="8002259">&#34;/&#34;</span><span class="op" id="8002262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002267">}</span><span class="op" id="8002268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002273">TransferEncoding</span><span class="op" id="8002289">:</span>&nbsp;<span class="op" id="8002291">[</span><span class="op" id="8002292">]</span><span class="builtintype" id="8002293">string</span><span class="op" id="8002299">{</span><span class="string" id="8002300">&#34;chunked&#34;</span><span class="op" id="8002309">}</span><span class="op" id="8002310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002315">Proto</span><span class="op" id="8002320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002333">&#34;HTTP/1.1&#34;</span><span class="op" id="8002343">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002348">ProtoMajor</span><span class="op" id="8002358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8002366">1</span><span class="op" id="8002367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002372">ProtoMinor</span><span class="op" id="8002382">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8002390">1</span><span class="op" id="8002391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002396">Header</span><span class="op" id="8002402">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8002414">Header</span><span class="op" id="8002420">{</span><span class="op" id="8002421">}</span><span class="op" id="8002422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002427">ContentLength</span><span class="op" id="8002440">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8002445">-</span><span class="num" id="8002446">1</span><span class="op" id="8002447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002452">Host</span><span class="op" id="8002456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002470">&#34;foo.com&#34;</span><span class="op" id="8002479">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002484">RequestURI</span><span class="op" id="8002494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002502">&#34;/&#34;</span><span class="op" id="8002505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002509">}</span><span class="op" id="8002510">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002515">&#34;foobar&#34;</span><span class="op" id="8002523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002527">Header</span><span class="op" id="8002533">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002538">&#34;Trailer-Key&#34;</span><span class="op" id="8002551">:</span>&nbsp;<span class="op" id="8002553">{</span><span class="string" id="8002554">&#34;Trailer-Value&#34;</span><span class="op" id="8002569">}</span><span class="op" id="8002570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002574">}</span><span class="op" id="8002575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002579">noError</span><span class="op" id="8002586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002589">}</span><span class="op" id="8002590">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8002594">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002636">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8002681">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002686">&amp;</span><span class="ident" id="8002687">Request</span><span class="op" id="8002694">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002699">Method</span><span class="op" id="8002705">:</span>&nbsp;<span class="string" id="8002707">&#34;CONNECT&#34;</span><span class="op" id="8002716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002721">URL</span><span class="op" id="8002724">:</span>&nbsp;<span class="op" id="8002726">&amp;</span><span class="ident" id="8002727">url</span><span class="op" id="8002730">.</span><span class="ident" id="8002731">URL</span><span class="op" id="8002734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002740">Host</span><span class="op" id="8002744">:</span>&nbsp;<span class="string" id="8002746">&#34;www.google.com:443&#34;</span><span class="op" id="8002766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002771">}</span><span class="op" id="8002772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002777">Proto</span><span class="op" id="8002782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002792">&#34;HTTP/1.1&#34;</span><span class="op" id="8002802">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002807">ProtoMajor</span><span class="op" id="8002817">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8002822">1</span><span class="op" id="8002823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002828">ProtoMinor</span><span class="op" id="8002838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8002843">1</span><span class="op" id="8002844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002849">Header</span><span class="op" id="8002855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8002864">Header</span><span class="op" id="8002870">{</span><span class="op" id="8002871">}</span><span class="op" id="8002872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002877">Close</span><span class="op" id="8002882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8002892">false</span><span class="op" id="8002897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002902">ContentLength</span><span class="op" id="8002915">:</span>&nbsp;<span class="num" id="8002917">0</span><span class="op" id="8002918">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002923">Host</span><span class="op" id="8002927">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002938">&#34;www.google.com:443&#34;</span><span class="op" id="8002958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002963">RequestURI</span><span class="op" id="8002973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002978">&#34;www.google.com:443&#34;</span><span class="op" id="8002998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003002">}</span><span class="op" id="8003003">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003008">noBody</span><span class="op" id="8003014">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003018">noTrailer</span><span class="op" id="8003027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003031">noError</span><span class="op" id="8003038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003041">}</span><span class="op" id="8003042">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003046">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8003087">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8003128">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003133">&amp;</span><span class="ident" id="8003134">Request</span><span class="op" id="8003141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003146">Method</span><span class="op" id="8003152">:</span>&nbsp;<span class="string" id="8003154">&#34;CONNECT&#34;</span><span class="op" id="8003163">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003168">URL</span><span class="op" id="8003171">:</span>&nbsp;<span class="op" id="8003173">&amp;</span><span class="ident" id="8003174">url</span><span class="op" id="8003177">.</span><span class="ident" id="8003178">URL</span><span class="op" id="8003181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003187">Host</span><span class="op" id="8003191">:</span>&nbsp;<span class="string" id="8003193">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8003209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003214">}</span><span class="op" id="8003215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003220">Proto</span><span class="op" id="8003225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003235">&#34;HTTP/1.1&#34;</span><span class="op" id="8003245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003250">ProtoMajor</span><span class="op" id="8003260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8003265">1</span><span class="op" id="8003266">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003271">ProtoMinor</span><span class="op" id="8003281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8003286">1</span><span class="op" id="8003287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003292">Header</span><span class="op" id="8003298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8003307">Header</span><span class="op" id="8003313">{</span><span class="op" id="8003314">}</span><span class="op" id="8003315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003320">Close</span><span class="op" id="8003325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8003335">false</span><span class="op" id="8003340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003345">ContentLength</span><span class="op" id="8003358">:</span>&nbsp;<span class="num" id="8003360">0</span><span class="op" id="8003361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003366">Host</span><span class="op" id="8003370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003381">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8003397">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003402">RequestURI</span><span class="op" id="8003412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003417">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8003433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003437">}</span><span class="op" id="8003438">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003443">noBody</span><span class="op" id="8003449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003453">noTrailer</span><span class="op" id="8003462">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003466">noError</span><span class="op" id="8003473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003476">}</span><span class="op" id="8003477">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003481">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003510">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8003514">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8003549">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003554">&amp;</span><span class="ident" id="8003555">Request</span><span class="op" id="8003562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003567">Method</span><span class="op" id="8003573">:</span>&nbsp;<span class="string" id="8003575">&#34;CONNECT&#34;</span><span class="op" id="8003584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003589">URL</span><span class="op" id="8003592">:</span>&nbsp;<span class="op" id="8003594">&amp;</span><span class="ident" id="8003595">url</span><span class="op" id="8003598">.</span><span class="ident" id="8003599">URL</span><span class="op" id="8003602">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003608">Path</span><span class="op" id="8003612">:</span>&nbsp;<span class="string" id="8003614">&#34;/_goRPC_&#34;</span><span class="op" id="8003624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003629">}</span><span class="op" id="8003630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003635">Proto</span><span class="op" id="8003640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003650">&#34;HTTP/1.1&#34;</span><span class="op" id="8003660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003665">ProtoMajor</span><span class="op" id="8003675">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8003680">1</span><span class="op" id="8003681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003686">ProtoMinor</span><span class="op" id="8003696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8003701">1</span><span class="op" id="8003702">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003707">Header</span><span class="op" id="8003713">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8003722">Header</span><span class="op" id="8003728">{</span><span class="op" id="8003729">}</span><span class="op" id="8003730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003735">Close</span><span class="op" id="8003740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8003750">false</span><span class="op" id="8003755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003760">ContentLength</span><span class="op" id="8003773">:</span>&nbsp;<span class="num" id="8003775">0</span><span class="op" id="8003776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003781">Host</span><span class="op" id="8003785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003796">&#34;&#34;</span><span class="op" id="8003798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003803">RequestURI</span><span class="op" id="8003813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8003818">&#34;/_goRPC_&#34;</span><span class="op" id="8003828">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003832">}</span><span class="op" id="8003833">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003838">noBody</span><span class="op" id="8003844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003848">noTrailer</span><span class="op" id="8003857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003861">noError</span><span class="op" id="8003868">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003871">}</span><span class="op" id="8003872">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003876">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8003927">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8003969">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003973">&amp;</span><span class="ident" id="8003974">Request</span><span class="op" id="8003981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003986">Method</span><span class="op" id="8003992">:</span>&nbsp;<span class="string" id="8003994">&#34;NOTIFY&#34;</span><span class="op" id="8004002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004007">URL</span><span class="op" id="8004010">:</span>&nbsp;<span class="op" id="8004012">&amp;</span><span class="ident" id="8004013">url</span><span class="op" id="8004016">.</span><span class="ident" id="8004017">URL</span><span class="op" id="8004020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004026">Path</span><span class="op" id="8004030">:</span>&nbsp;<span class="string" id="8004032">&#34;*&#34;</span><span class="op" id="8004035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004040">}</span><span class="op" id="8004041">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004046">Proto</span><span class="op" id="8004051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8004058">&#34;HTTP/1.1&#34;</span><span class="op" id="8004068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004073">ProtoMajor</span><span class="op" id="8004083">:</span>&nbsp;<span class="num" id="8004085">1</span><span class="op" id="8004086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004091">ProtoMinor</span><span class="op" id="8004101">:</span>&nbsp;<span class="num" id="8004103">1</span><span class="op" id="8004104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004109">Header</span><span class="op" id="8004115">:</span>&nbsp;<span class="ident" id="8004117">Header</span><span class="op" id="8004123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004129">&#34;Server&#34;</span><span class="op" id="8004137">:</span>&nbsp;<span class="op" id="8004139">[</span><span class="op" id="8004140">]</span><span class="builtintype" id="8004141">string</span><span class="op" id="8004147">{</span><span class="string" id="8004148">&#34;foo&#34;</span><span class="op" id="8004153">}</span><span class="op" id="8004154">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004159">}</span><span class="op" id="8004160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004165">Close</span><span class="op" id="8004170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8004180">false</span><span class="op" id="8004185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004190">ContentLength</span><span class="op" id="8004203">:</span>&nbsp;<span class="num" id="8004205">0</span><span class="op" id="8004206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004211">RequestURI</span><span class="op" id="8004221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8004226">&#34;*&#34;</span><span class="op" id="8004229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004233">}</span><span class="op" id="8004234">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004239">noBody</span><span class="op" id="8004245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004249">noTrailer</span><span class="op" id="8004258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004262">noError</span><span class="op" id="8004269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004272">}</span><span class="op" id="8004273">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8004277">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004335">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8004378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004382">&amp;</span><span class="ident" id="8004383">Request</span><span class="op" id="8004390">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004395">Method</span><span class="op" id="8004401">:</span>&nbsp;<span class="string" id="8004403">&#34;OPTIONS&#34;</span><span class="op" id="8004412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004417">URL</span><span class="op" id="8004420">:</span>&nbsp;<span class="op" id="8004422">&amp;</span><span class="ident" id="8004423">url</span><span class="op" id="8004426">.</span><span class="ident" id="8004427">URL</span><span class="op" id="8004430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004436">Path</span><span class="op" id="8004440">:</span>&nbsp;<span class="string" id="8004442">&#34;*&#34;</span><span class="op" id="8004445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004450">}</span><span class="op" id="8004451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004456">Proto</span><span class="op" id="8004461">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8004468">&#34;HTTP/1.1&#34;</span><span class="op" id="8004478">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004483">ProtoMajor</span><span class="op" id="8004493">:</span>&nbsp;<span class="num" id="8004495">1</span><span class="op" id="8004496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004501">ProtoMinor</span><span class="op" id="8004511">:</span>&nbsp;<span class="num" id="8004513">1</span><span class="op" id="8004514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004519">Header</span><span class="op" id="8004525">:</span>&nbsp;<span class="ident" id="8004527">Header</span><span class="op" id="8004533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004539">&#34;Server&#34;</span><span class="op" id="8004547">:</span>&nbsp;<span class="op" id="8004549">[</span><span class="op" id="8004550">]</span><span class="builtintype" id="8004551">string</span><span class="op" id="8004557">{</span><span class="string" id="8004558">&#34;foo&#34;</span><span class="op" id="8004563">}</span><span class="op" id="8004564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004569">}</span><span class="op" id="8004570">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004575">Close</span><span class="op" id="8004580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8004590">false</span><span class="op" id="8004595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004600">ContentLength</span><span class="op" id="8004613">:</span>&nbsp;<span class="num" id="8004615">0</span><span class="op" id="8004616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004621">RequestURI</span><span class="op" id="8004631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8004636">&#34;*&#34;</span><span class="op" id="8004639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004643">}</span><span class="op" id="8004644">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004649">noBody</span><span class="op" id="8004655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004659">noTrailer</span><span class="op" id="8004668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004672">noError</span><span class="op" id="8004679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004682">}</span><span class="op" id="8004683">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8004687">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004736">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="8004804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004808">&amp;</span><span class="ident" id="8004809">Request</span><span class="op" id="8004816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004821">Method</span><span class="op" id="8004827">:</span>&nbsp;<span class="string" id="8004829">&#34;GET&#34;</span><span class="op" id="8004834">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004839">URL</span><span class="op" id="8004842">:</span>&nbsp;<span class="op" id="8004844">&amp;</span><span class="ident" id="8004845">url</span><span class="op" id="8004848">.</span><span class="ident" id="8004849">URL</span><span class="op" id="8004852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004858">Path</span><span class="op" id="8004862">:</span>&nbsp;<span class="string" id="8004864">&#34;/&#34;</span><span class="op" id="8004867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004872">}</span><span class="op" id="8004873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004878">Header</span><span class="op" id="8004884">:</span>&nbsp;<span class="ident" id="8004886">Header</span><span class="op" id="8004892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8004898">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8004940">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8004980">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004998">&#34;Connection&#34;</span><span class="op" id="8005010">:</span>&nbsp;<span class="op" id="8005012">[</span><span class="op" id="8005013">]</span><span class="builtintype" id="8005014">string</span><span class="op" id="8005020">{</span><span class="string" id="8005021">&#34;close&#34;</span><span class="op" id="8005028">}</span><span class="op" id="8005029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005034">}</span><span class="op" id="8005035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005040">Host</span><span class="op" id="8005044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8005052">&#34;issue8261.com&#34;</span><span class="op" id="8005067">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005072">Proto</span><span class="op" id="8005077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8005084">&#34;HTTP/1.1&#34;</span><span class="op" id="8005094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005099">ProtoMajor</span><span class="op" id="8005109">:</span>&nbsp;<span class="num" id="8005111">1</span><span class="op" id="8005112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005117">ProtoMinor</span><span class="op" id="8005127">:</span>&nbsp;<span class="num" id="8005129">1</span><span class="op" id="8005130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005135">Close</span><span class="op" id="8005140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8005147">true</span><span class="op" id="8005151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005156">RequestURI</span><span class="op" id="8005166">:</span>&nbsp;<span class="string" id="8005168">&#34;/&#34;</span><span class="op" id="8005171">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005175">}</span><span class="op" id="8005176">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005181">noBody</span><span class="op" id="8005187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005191">noTrailer</span><span class="op" id="8005200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005204">noError</span><span class="op" id="8005211">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005214">}</span><span class="op" id="8005215">,</span><br>
<span class="lineno"></span><span class="op" id="8005217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8005220">func</span>&nbsp;<span class="ident" id="8005225">TestReadRequest</span><span class="op" id="8005240">(</span><span class="ident" id="8005241">t</span>&nbsp;<span class="op" id="8005243">*</span><span class="ident" id="8005244">testing</span><span class="op" id="8005251">.</span><span class="ident" id="8005252">T</span><span class="op" id="8005253">)</span>&nbsp;<span class="op" id="8005255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005258">for</span>&nbsp;<span class="ident" id="8005262">i</span>&nbsp;<span class="op" id="8005264">:=</span>&nbsp;<span class="keyword" id="8005267">range</span>&nbsp;<span class="ident" id="8005273">reqTests</span>&nbsp;<span class="op" id="8005282">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005286">tt</span>&nbsp;<span class="op" id="8005289">:=</span>&nbsp;<span class="op" id="8005292">&amp;</span><span class="ident" id="8005293">reqTests</span><span class="op" id="8005301">[</span><span class="ident" id="8005302">i</span><span class="op" id="8005303">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005307">req</span><span class="op" id="8005310">,</span>&nbsp;<span class="ident" id="8005312">err</span>&nbsp;<span class="op" id="8005316">:=</span>&nbsp;<span class="ident" id="8005319">ReadRequest</span><span class="op" id="8005330">(</span><span class="ident" id="8005331">bufio</span><span class="op" id="8005336">.</span><span class="ident" id="8005337">NewReader</span><span class="op" id="8005346">(</span><span class="ident" id="8005347">strings</span><span class="op" id="8005354">.</span><span class="ident" id="8005355">NewReader</span><span class="op" id="8005364">(</span><span class="ident" id="8005365">tt</span><span class="op" id="8005367">.</span><span class="ident" id="8005368">Raw</span><span class="op" id="8005371">)</span><span class="op" id="8005372">)</span><span class="op" id="8005373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005377">if</span>&nbsp;<span class="ident" id="8005380">err</span>&nbsp;<span class="op" id="8005384">!=</span>&nbsp;<span class="ident" id="8005387">nil</span>&nbsp;<span class="op" id="8005391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005396">if</span>&nbsp;<span class="ident" id="8005399">err</span><span class="op" id="8005402">.</span><span class="ident" id="8005403">Error</span><span class="op" id="8005408">(</span><span class="op" id="8005409">)</span>&nbsp;<span class="op" id="8005411">!=</span>&nbsp;<span class="ident" id="8005414">tt</span><span class="op" id="8005416">.</span><span class="ident" id="8005417">Error</span>&nbsp;<span class="op" id="8005423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005429">t</span><span class="op" id="8005430">.</span><span class="ident" id="8005431">Errorf</span><span class="op" id="8005437">(</span><span class="string" id="8005438">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8005468">,</span>&nbsp;<span class="ident" id="8005470">i</span><span class="op" id="8005471">,</span>&nbsp;<span class="ident" id="8005473">err</span><span class="op" id="8005476">.</span><span class="ident" id="8005477">Error</span><span class="op" id="8005482">(</span><span class="op" id="8005483">)</span><span class="op" id="8005484">,</span>&nbsp;<span class="ident" id="8005486">tt</span><span class="op" id="8005488">.</span><span class="ident" id="8005489">Error</span><span class="op" id="8005494">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005504">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005519">rbody</span>&nbsp;<span class="op" id="8005525">:=</span>&nbsp;<span class="ident" id="8005528">req</span><span class="op" id="8005531">.</span><span class="ident" id="8005532">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005539">req</span><span class="op" id="8005542">.</span><span class="ident" id="8005543">Body</span>&nbsp;<span class="op" id="8005548">=</span>&nbsp;<span class="ident" id="8005550">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005556">testName</span>&nbsp;<span class="op" id="8005565">:=</span>&nbsp;<span class="ident" id="8005568">fmt</span><span class="op" id="8005571">.</span><span class="ident" id="8005572">Sprintf</span><span class="op" id="8005579">(</span><span class="string" id="8005580">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="8005594">,</span>&nbsp;<span class="ident" id="8005596">i</span><span class="op" id="8005597">,</span>&nbsp;<span class="ident" id="8005599">tt</span><span class="op" id="8005601">.</span><span class="ident" id="8005602">Raw</span><span class="op" id="8005605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005609">diff</span><span class="op" id="8005613">(</span><span class="ident" id="8005614">t</span><span class="op" id="8005615">,</span>&nbsp;<span class="ident" id="8005617">testName</span><span class="op" id="8005625">,</span>&nbsp;<span class="ident" id="8005627">req</span><span class="op" id="8005630">,</span>&nbsp;<span class="ident" id="8005632">tt</span><span class="op" id="8005634">.</span><span class="ident" id="8005635">Req</span><span class="op" id="8005638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005642">var</span>&nbsp;<span class="ident" id="8005646">bout</span>&nbsp;<span class="ident" id="8005651">bytes</span><span class="op" id="8005656">.</span><span class="ident" id="8005657">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005666">if</span>&nbsp;<span class="ident" id="8005669">rbody</span>&nbsp;<span class="op" id="8005675">!=</span>&nbsp;<span class="ident" id="8005678">nil</span>&nbsp;<span class="op" id="8005682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005687">_</span><span class="op" id="8005688">,</span>&nbsp;<span class="ident" id="8005690">err</span>&nbsp;<span class="op" id="8005694">:=</span>&nbsp;<span class="ident" id="8005697">io</span><span class="op" id="8005699">.</span><span class="ident" id="8005700">Copy</span><span class="op" id="8005704">(</span><span class="op" id="8005705">&amp;</span><span class="ident" id="8005706">bout</span><span class="op" id="8005710">,</span>&nbsp;<span class="ident" id="8005712">rbody</span><span class="op" id="8005717">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005722">if</span>&nbsp;<span class="ident" id="8005725">err</span>&nbsp;<span class="op" id="8005729">!=</span>&nbsp;<span class="ident" id="8005732">nil</span>&nbsp;<span class="op" id="8005736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005742">t</span><span class="op" id="8005743">.</span><span class="ident" id="8005744">Fatalf</span><span class="op" id="8005750">(</span><span class="string" id="8005751">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8005773">,</span>&nbsp;<span class="ident" id="8005775">testName</span><span class="op" id="8005783">,</span>&nbsp;<span class="ident" id="8005785">err</span><span class="op" id="8005788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005798">rbody</span><span class="op" id="8005803">.</span><span class="ident" id="8005804">Close</span><span class="op" id="8005809">(</span><span class="op" id="8005810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005814">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005818">body</span>&nbsp;<span class="op" id="8005823">:=</span>&nbsp;<span class="ident" id="8005826">bout</span><span class="op" id="8005830">.</span><span class="ident" id="8005831">String</span><span class="op" id="8005837">(</span><span class="op" id="8005838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005842">if</span>&nbsp;<span class="ident" id="8005845">body</span>&nbsp;<span class="op" id="8005850">!=</span>&nbsp;<span class="ident" id="8005853">tt</span><span class="op" id="8005855">.</span><span class="ident" id="8005856">Body</span>&nbsp;<span class="op" id="8005861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005866">t</span><span class="op" id="8005867">.</span><span class="ident" id="8005868">Errorf</span><span class="op" id="8005874">(</span><span class="string" id="8005875">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8005898">,</span>&nbsp;<span class="ident" id="8005900">testName</span><span class="op" id="8005908">,</span>&nbsp;<span class="ident" id="8005910">body</span><span class="op" id="8005914">,</span>&nbsp;<span class="ident" id="8005916">tt</span><span class="op" id="8005918">.</span><span class="ident" id="8005919">Body</span><span class="op" id="8005923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005931">if</span>&nbsp;<span class="op" id="8005934">!</span><span class="ident" id="8005935">reflect</span><span class="op" id="8005942">.</span><span class="ident" id="8005943">DeepEqual</span><span class="op" id="8005952">(</span><span class="ident" id="8005953">tt</span><span class="op" id="8005955">.</span><span class="ident" id="8005956">Trailer</span><span class="op" id="8005963">,</span>&nbsp;<span class="ident" id="8005965">req</span><span class="op" id="8005968">.</span><span class="ident" id="8005969">Trailer</span><span class="op" id="8005976">)</span>&nbsp;<span class="op" id="8005978">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005983">t</span><span class="op" id="8005984">.</span><span class="ident" id="8005985">Errorf</span><span class="op" id="8005991">(</span><span class="string" id="8005992">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8006034">,</span>&nbsp;<span class="ident" id="8006036">testName</span><span class="op" id="8006044">,</span>&nbsp;<span class="ident" id="8006046">req</span><span class="op" id="8006049">.</span><span class="ident" id="8006050">Trailer</span><span class="op" id="8006057">,</span>&nbsp;<span class="ident" id="8006059">tt</span><span class="op" id="8006061">.</span><span class="ident" id="8006062">Trailer</span><span class="op" id="8006069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006076">}</span><br>
<span class="lineno"></span><span class="op" id="8006078">}</span>
</div>
</body>
</html>
