<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html" class="current">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5317612">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5317668">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5317722">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5317773">package</span>&nbsp;<span class="ident" id="5317781">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5317788">import</span>&nbsp;<span class="op" id="5317795">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5317798">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5317817">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5317824">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5317830">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5317835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5317838">//&nbsp;A&nbsp;FatFile&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;universal&nbsp;binary&nbsp;that&nbsp;contains&nbsp;at&nbsp;least&nbsp;one&nbsp;architecture.</span><br>
<span class="lineno">15</span><span class="keyword" id="5317921">type</span>&nbsp;<span class="ident" id="5317926">FatFile</span>&nbsp;<span class="keyword" id="5317934">struct</span>&nbsp;<span class="op" id="5317941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317944">Magic</span>&nbsp;&nbsp;<span class="builtintype" id="5317951">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317959">Arches</span>&nbsp;<span class="op" id="5317966">[</span><span class="op" id="5317967">]</span><span class="ident" id="5317968">FatArch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317977">closer</span>&nbsp;<span class="ident" id="5317984">io</span><span class="op" id="5317986">.</span><span class="ident" id="5317987">Closer</span><br>
<span class="lineno"></span><span class="op" id="5317994">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5317997">//&nbsp;A&nbsp;FatArchHeader&nbsp;represents&nbsp;a&nbsp;fat&nbsp;header&nbsp;for&nbsp;a&nbsp;specific&nbsp;image&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="keyword" id="5318075">type</span>&nbsp;<span class="ident" id="5318080">FatArchHeader</span>&nbsp;<span class="keyword" id="5318094">struct</span>&nbsp;<span class="op" id="5318101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318104">Cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5318111">Cpu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318116">SubCpu</span>&nbsp;<span class="builtintype" id="5318123">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318131">Offset</span>&nbsp;<span class="builtintype" id="5318138">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318146">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5318153">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318161">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5318168">uint32</span><br>
<span class="lineno"></span><span class="op" id="5318175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5318178">const</span>&nbsp;<span class="ident" id="5318184">fatArchHeaderSize</span>&nbsp;<span class="op" id="5318202">=</span>&nbsp;<span class="num" id="5318204">5</span>&nbsp;<span class="op" id="5318206">*</span>&nbsp;<span class="num" id="5318208">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5318211">//&nbsp;A&nbsp;FatArch&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;File&nbsp;inside&nbsp;a&nbsp;FatFile.</span><br>
<span class="lineno"></span><span class="keyword" id="5318259">type</span>&nbsp;<span class="ident" id="5318264">FatArch</span>&nbsp;<span class="keyword" id="5318272">struct</span>&nbsp;<span class="op" id="5318279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318282">FatArchHeader</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5318297">*</span><span class="ident" id="5318298">File</span><br>
<span class="lineno"></span><span class="op" id="5318303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5318306">//&nbsp;ErrNotFat&nbsp;is&nbsp;returned&nbsp;from&nbsp;NewFatFile&nbsp;or&nbsp;OpenFat&nbsp;when&nbsp;the&nbsp;file&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5318381">//&nbsp;universal&nbsp;binary&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;thin&nbsp;binary,&nbsp;based&nbsp;on&nbsp;its&nbsp;magic&nbsp;number.</span><br>
<span class="lineno">40</span><span class="keyword" id="5318454">var</span>&nbsp;<span class="ident" id="5318458">ErrNotFat</span>&nbsp;<span class="op" id="5318468">=</span>&nbsp;<span class="op" id="5318470">&amp;</span><span class="ident" id="5318471">FormatError</span><span class="op" id="5318482">{</span><span class="num" id="5318483">0</span><span class="op" id="5318484">,</span>&nbsp;<span class="string" id="5318486">&#34;not&nbsp;a&nbsp;fat&nbsp;Mach-O&nbsp;file&#34;</span><span class="op" id="5318509">,</span>&nbsp;<span class="ident" id="5318511">nil</span><span class="op" id="5318514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5318517">//&nbsp;NewFatFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;FatFile&nbsp;for&nbsp;accessing&nbsp;all&nbsp;the&nbsp;Mach-O&nbsp;images&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5318594">//&nbsp;universal&nbsp;binary.&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5318671">//&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">45</span><span class="keyword" id="5318688">func</span>&nbsp;<span class="ident" id="5318693">NewFatFile</span><span class="op" id="5318703">(</span><span class="ident" id="5318704">r</span>&nbsp;<span class="ident" id="5318706">io</span><span class="op" id="5318708">.</span><span class="ident" id="5318709">ReaderAt</span><span class="op" id="5318717">)</span>&nbsp;<span class="op" id="5318719">(</span><span class="op" id="5318720">*</span><span class="ident" id="5318721">FatFile</span><span class="op" id="5318728">,</span>&nbsp;<span class="builtintype" id="5318730">error</span><span class="op" id="5318735">)</span>&nbsp;<span class="op" id="5318737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318740">var</span>&nbsp;<span class="ident" id="5318744">ff</span>&nbsp;<span class="ident" id="5318747">FatFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318756">sr</span>&nbsp;<span class="op" id="5318759">:=</span>&nbsp;<span class="ident" id="5318762">io</span><span class="op" id="5318764">.</span><span class="ident" id="5318765">NewSectionReader</span><span class="op" id="5318781">(</span><span class="ident" id="5318782">r</span><span class="op" id="5318783">,</span>&nbsp;<span class="num" id="5318785">0</span><span class="op" id="5318786">,</span>&nbsp;<span class="num" id="5318788">1</span><span class="op" id="5318789">&lt;&lt;</span><span class="num" id="5318791">63</span><span class="op" id="5318793">-</span><span class="num" id="5318794">1</span><span class="op" id="5318795">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5318799">//&nbsp;Read&nbsp;the&nbsp;fat_header&nbsp;struct,&nbsp;which&nbsp;is&nbsp;always&nbsp;in&nbsp;big&nbsp;endian.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5318862">//&nbsp;Start&nbsp;with&nbsp;the&nbsp;magic&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318895">err</span>&nbsp;<span class="op" id="5318899">:=</span>&nbsp;<span class="ident" id="5318902">binary</span><span class="op" id="5318908">.</span><span class="ident" id="5318909">Read</span><span class="op" id="5318913">(</span><span class="ident" id="5318914">sr</span><span class="op" id="5318916">,</span>&nbsp;<span class="ident" id="5318918">binary</span><span class="op" id="5318924">.</span><span class="ident" id="5318925">BigEndian</span><span class="op" id="5318934">,</span>&nbsp;<span class="op" id="5318936">&amp;</span><span class="ident" id="5318937">ff</span><span class="op" id="5318939">.</span><span class="ident" id="5318940">Magic</span><span class="op" id="5318945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318948">if</span>&nbsp;<span class="ident" id="5318951">err</span>&nbsp;<span class="op" id="5318955">!=</span>&nbsp;<span class="ident" id="5318958">nil</span>&nbsp;<span class="op" id="5318962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318966">return</span>&nbsp;<span class="ident" id="5318973">nil</span><span class="op" id="5318976">,</span>&nbsp;<span class="op" id="5318978">&amp;</span><span class="ident" id="5318979">FormatError</span><span class="op" id="5318990">{</span><span class="num" id="5318991">0</span><span class="op" id="5318992">,</span>&nbsp;<span class="string" id="5318994">&#34;error&nbsp;reading&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5319022">,</span>&nbsp;<span class="ident" id="5319024">nil</span><span class="op" id="5319027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319030">}</span>&nbsp;<span class="keyword" id="5319032">else</span>&nbsp;<span class="keyword" id="5319037">if</span>&nbsp;<span class="ident" id="5319040">ff</span><span class="op" id="5319042">.</span><span class="ident" id="5319043">Magic</span>&nbsp;<span class="op" id="5319049">!=</span>&nbsp;<span class="ident" id="5319052">MagicFat</span>&nbsp;<span class="op" id="5319061">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319065">//&nbsp;See&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;file&nbsp;via&nbsp;its&nbsp;magic&nbsp;number.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319131">//&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;little&nbsp;endian&nbsp;first&nbsp;though.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319185">var</span>&nbsp;<span class="ident" id="5319189">buf</span>&nbsp;<span class="op" id="5319193">[</span><span class="num" id="5319194">4</span><span class="op" id="5319195">]</span><span class="builtintype" id="5319196">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319203">binary</span><span class="op" id="5319209">.</span><span class="ident" id="5319210">BigEndian</span><span class="op" id="5319219">.</span><span class="ident" id="5319220">PutUint32</span><span class="op" id="5319229">(</span><span class="ident" id="5319230">buf</span><span class="op" id="5319233">[</span><span class="op" id="5319234">:</span><span class="op" id="5319235">]</span><span class="op" id="5319236">,</span>&nbsp;<span class="ident" id="5319238">ff</span><span class="op" id="5319240">.</span><span class="ident" id="5319241">Magic</span><span class="op" id="5319246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319250">leMagic</span>&nbsp;<span class="op" id="5319258">:=</span>&nbsp;<span class="ident" id="5319261">binary</span><span class="op" id="5319267">.</span><span class="ident" id="5319268">LittleEndian</span><span class="op" id="5319280">.</span><span class="ident" id="5319281">Uint32</span><span class="op" id="5319287">(</span><span class="ident" id="5319288">buf</span><span class="op" id="5319291">[</span><span class="op" id="5319292">:</span><span class="op" id="5319293">]</span><span class="op" id="5319294">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319298">if</span>&nbsp;<span class="ident" id="5319301">leMagic</span>&nbsp;<span class="op" id="5319309">==</span>&nbsp;<span class="ident" id="5319312">Magic32</span>&nbsp;<span class="op" id="5319320">||</span>&nbsp;<span class="ident" id="5319323">leMagic</span>&nbsp;<span class="op" id="5319331">==</span>&nbsp;<span class="ident" id="5319334">Magic64</span>&nbsp;<span class="op" id="5319342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319347">return</span>&nbsp;<span class="ident" id="5319354">nil</span><span class="op" id="5319357">,</span>&nbsp;<span class="ident" id="5319359">ErrNotFat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319371">}</span>&nbsp;<span class="keyword" id="5319373">else</span>&nbsp;<span class="op" id="5319378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319383">return</span>&nbsp;<span class="ident" id="5319390">nil</span><span class="op" id="5319393">,</span>&nbsp;<span class="op" id="5319395">&amp;</span><span class="ident" id="5319396">FormatError</span><span class="op" id="5319407">{</span><span class="num" id="5319408">0</span><span class="op" id="5319409">,</span>&nbsp;<span class="string" id="5319411">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5319433">,</span>&nbsp;<span class="ident" id="5319435">nil</span><span class="op" id="5319438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319442">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319448">offset</span>&nbsp;<span class="op" id="5319455">:=</span>&nbsp;<span class="ident" id="5319458">int64</span><span class="op" id="5319463">(</span><span class="num" id="5319464">4</span><span class="op" id="5319465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319469">//&nbsp;Read&nbsp;the&nbsp;number&nbsp;of&nbsp;FatArchHeaders&nbsp;that&nbsp;come&nbsp;after&nbsp;the&nbsp;fat_header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319539">var</span>&nbsp;<span class="ident" id="5319543">narch</span>&nbsp;<span class="builtintype" id="5319549">uint32</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319557">err</span>&nbsp;<span class="op" id="5319561">=</span>&nbsp;<span class="ident" id="5319563">binary</span><span class="op" id="5319569">.</span><span class="ident" id="5319570">Read</span><span class="op" id="5319574">(</span><span class="ident" id="5319575">sr</span><span class="op" id="5319577">,</span>&nbsp;<span class="ident" id="5319579">binary</span><span class="op" id="5319585">.</span><span class="ident" id="5319586">BigEndian</span><span class="op" id="5319595">,</span>&nbsp;<span class="op" id="5319597">&amp;</span><span class="ident" id="5319598">narch</span><span class="op" id="5319603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319606">if</span>&nbsp;<span class="ident" id="5319609">err</span>&nbsp;<span class="op" id="5319613">!=</span>&nbsp;<span class="ident" id="5319616">nil</span>&nbsp;<span class="op" id="5319620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319624">return</span>&nbsp;<span class="ident" id="5319631">nil</span><span class="op" id="5319634">,</span>&nbsp;<span class="op" id="5319636">&amp;</span><span class="ident" id="5319637">FormatError</span><span class="op" id="5319648">{</span><span class="ident" id="5319649">offset</span><span class="op" id="5319655">,</span>&nbsp;<span class="string" id="5319657">&#34;invalid&nbsp;fat_header&#34;</span><span class="op" id="5319677">,</span>&nbsp;<span class="ident" id="5319679">nil</span><span class="op" id="5319682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319688">offset</span>&nbsp;<span class="op" id="5319695">+=</span>&nbsp;<span class="num" id="5319698">4</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319702">if</span>&nbsp;<span class="ident" id="5319705">narch</span>&nbsp;<span class="op" id="5319711">&lt;</span>&nbsp;<span class="num" id="5319713">1</span>&nbsp;<span class="op" id="5319715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319719">return</span>&nbsp;<span class="ident" id="5319726">nil</span><span class="op" id="5319729">,</span>&nbsp;<span class="op" id="5319731">&amp;</span><span class="ident" id="5319732">FormatError</span><span class="op" id="5319743">{</span><span class="ident" id="5319744">offset</span><span class="op" id="5319750">,</span>&nbsp;<span class="string" id="5319752">&#34;file&nbsp;contains&nbsp;no&nbsp;images&#34;</span><span class="op" id="5319777">,</span>&nbsp;<span class="ident" id="5319779">nil</span><span class="op" id="5319782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319789">//&nbsp;Combine&nbsp;the&nbsp;Cpu&nbsp;and&nbsp;SubCpu&nbsp;(both&nbsp;uint32)&nbsp;into&nbsp;a&nbsp;uint64&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319861">//&nbsp;there&nbsp;are&nbsp;not&nbsp;duplicate&nbsp;architectures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5319904">seenArches</span>&nbsp;<span class="op" id="5319915">:=</span>&nbsp;<span class="builtinfunc" id="5319918">make</span><span class="op" id="5319922">(</span><span class="keyword" id="5319923">map</span><span class="op" id="5319926">[</span><span class="ident" id="5319927">uint64</span><span class="op" id="5319933">]</span><span class="builtintype" id="5319934">bool</span><span class="op" id="5319938">,</span>&nbsp;<span class="ident" id="5319940">narch</span><span class="op" id="5319945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5319948">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;all&nbsp;images&nbsp;are&nbsp;for&nbsp;the&nbsp;same&nbsp;MH_&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320005">var</span>&nbsp;<span class="ident" id="5320009">machoType</span>&nbsp;<span class="ident" id="5320019">Type</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5320026">//&nbsp;Following&nbsp;the&nbsp;fat_header&nbsp;comes&nbsp;narch&nbsp;fat_arch&nbsp;structs&nbsp;that&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5320095">//&nbsp;Mach-O&nbsp;images&nbsp;further&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320134">ff</span><span class="op" id="5320136">.</span><span class="ident" id="5320137">Arches</span>&nbsp;<span class="op" id="5320144">=</span>&nbsp;<span class="builtinfunc" id="5320146">make</span><span class="op" id="5320150">(</span><span class="op" id="5320151">[</span><span class="op" id="5320152">]</span><span class="ident" id="5320153">FatArch</span><span class="op" id="5320160">,</span>&nbsp;<span class="ident" id="5320162">narch</span><span class="op" id="5320167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320170">for</span>&nbsp;<span class="ident" id="5320174">i</span>&nbsp;<span class="op" id="5320176">:=</span>&nbsp;<span class="builtintype" id="5320179">uint32</span><span class="op" id="5320185">(</span><span class="num" id="5320186">0</span><span class="op" id="5320187">)</span><span class="op" id="5320188">;</span>&nbsp;<span class="ident" id="5320190">i</span>&nbsp;<span class="op" id="5320192">&lt;</span>&nbsp;<span class="ident" id="5320194">narch</span><span class="op" id="5320199">;</span>&nbsp;<span class="ident" id="5320201">i</span><span class="op" id="5320202">++</span>&nbsp;<span class="op" id="5320205">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320209">fa</span>&nbsp;<span class="op" id="5320212">:=</span>&nbsp;<span class="op" id="5320215">&amp;</span><span class="ident" id="5320216">ff</span><span class="op" id="5320218">.</span><span class="ident" id="5320219">Arches</span><span class="op" id="5320225">[</span><span class="ident" id="5320226">i</span><span class="op" id="5320227">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320231">err</span>&nbsp;<span class="op" id="5320235">=</span>&nbsp;<span class="ident" id="5320237">binary</span><span class="op" id="5320243">.</span><span class="ident" id="5320244">Read</span><span class="op" id="5320248">(</span><span class="ident" id="5320249">sr</span><span class="op" id="5320251">,</span>&nbsp;<span class="ident" id="5320253">binary</span><span class="op" id="5320259">.</span><span class="ident" id="5320260">BigEndian</span><span class="op" id="5320269">,</span>&nbsp;<span class="op" id="5320271">&amp;</span><span class="ident" id="5320272">fa</span><span class="op" id="5320274">.</span><span class="ident" id="5320275">FatArchHeader</span><span class="op" id="5320288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320292">if</span>&nbsp;<span class="ident" id="5320295">err</span>&nbsp;<span class="op" id="5320299">!=</span>&nbsp;<span class="ident" id="5320302">nil</span>&nbsp;<span class="op" id="5320306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320311">return</span>&nbsp;<span class="ident" id="5320318">nil</span><span class="op" id="5320321">,</span>&nbsp;<span class="op" id="5320323">&amp;</span><span class="ident" id="5320324">FormatError</span><span class="op" id="5320335">{</span><span class="ident" id="5320336">offset</span><span class="op" id="5320342">,</span>&nbsp;<span class="string" id="5320344">&#34;invalid&nbsp;fat_arch&nbsp;header&#34;</span><span class="op" id="5320369">,</span>&nbsp;<span class="ident" id="5320371">nil</span><span class="op" id="5320374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5320378">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320382">offset</span>&nbsp;<span class="op" id="5320389">+=</span>&nbsp;<span class="ident" id="5320392">fatArchHeaderSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320413">fr</span>&nbsp;<span class="op" id="5320416">:=</span>&nbsp;<span class="ident" id="5320419">io</span><span class="op" id="5320421">.</span><span class="ident" id="5320422">NewSectionReader</span><span class="op" id="5320438">(</span><span class="ident" id="5320439">r</span><span class="op" id="5320440">,</span>&nbsp;<span class="ident" id="5320442">int64</span><span class="op" id="5320447">(</span><span class="ident" id="5320448">fa</span><span class="op" id="5320450">.</span><span class="ident" id="5320451">Offset</span><span class="op" id="5320457">)</span><span class="op" id="5320458">,</span>&nbsp;<span class="ident" id="5320460">int64</span><span class="op" id="5320465">(</span><span class="ident" id="5320466">fa</span><span class="op" id="5320468">.</span><span class="ident" id="5320469">Size</span><span class="op" id="5320473">)</span><span class="op" id="5320474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320478">fa</span><span class="op" id="5320480">.</span><span class="ident" id="5320481">File</span><span class="op" id="5320485">,</span>&nbsp;<span class="ident" id="5320487">err</span>&nbsp;<span class="op" id="5320491">=</span>&nbsp;<span class="ident" id="5320493">NewFile</span><span class="op" id="5320500">(</span><span class="ident" id="5320501">fr</span><span class="op" id="5320503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320507">if</span>&nbsp;<span class="ident" id="5320510">err</span>&nbsp;<span class="op" id="5320514">!=</span>&nbsp;<span class="ident" id="5320517">nil</span>&nbsp;<span class="op" id="5320521">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320526">return</span>&nbsp;<span class="ident" id="5320533">nil</span><span class="op" id="5320536">,</span>&nbsp;<span class="ident" id="5320538">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5320544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5320549">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;architecture&nbsp;for&nbsp;this&nbsp;image&nbsp;is&nbsp;not&nbsp;duplicate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320614">seenArch</span>&nbsp;<span class="op" id="5320623">:=</span>&nbsp;<span class="op" id="5320626">(</span><span class="ident" id="5320627">uint64</span><span class="op" id="5320633">(</span><span class="ident" id="5320634">fa</span><span class="op" id="5320636">.</span><span class="ident" id="5320637">Cpu</span><span class="op" id="5320640">)</span>&nbsp;<span class="op" id="5320642">&lt;&lt;</span>&nbsp;<span class="num" id="5320645">32</span><span class="op" id="5320647">)</span>&nbsp;<span class="op" id="5320649">|</span>&nbsp;<span class="ident" id="5320651">uint64</span><span class="op" id="5320657">(</span><span class="ident" id="5320658">fa</span><span class="op" id="5320660">.</span><span class="ident" id="5320661">SubCpu</span><span class="op" id="5320667">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320671">if</span>&nbsp;<span class="ident" id="5320674">o</span><span class="op" id="5320675">,</span>&nbsp;<span class="ident" id="5320677">k</span>&nbsp;<span class="op" id="5320679">:=</span>&nbsp;<span class="ident" id="5320682">seenArches</span><span class="op" id="5320692">[</span><span class="ident" id="5320693">seenArch</span><span class="op" id="5320701">]</span><span class="op" id="5320702">;</span>&nbsp;<span class="ident" id="5320704">o</span>&nbsp;<span class="op" id="5320706">||</span>&nbsp;<span class="ident" id="5320709">k</span>&nbsp;<span class="op" id="5320711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320716">return</span>&nbsp;<span class="ident" id="5320723">nil</span><span class="op" id="5320726">,</span>&nbsp;<span class="op" id="5320728">&amp;</span><span class="ident" id="5320729">FormatError</span><span class="op" id="5320740">{</span><span class="ident" id="5320741">offset</span><span class="op" id="5320747">,</span>&nbsp;<span class="ident" id="5320749">fmt</span><span class="op" id="5320752">.</span><span class="ident" id="5320753">Sprintf</span><span class="op" id="5320760">(</span><span class="string" id="5320761">&#34;duplicate&nbsp;architecture&nbsp;cpu=%v,&nbsp;subcpu=%#x&#34;</span><span class="op" id="5320804">,</span>&nbsp;<span class="ident" id="5320806">fa</span><span class="op" id="5320808">.</span><span class="ident" id="5320809">Cpu</span><span class="op" id="5320812">,</span>&nbsp;<span class="ident" id="5320814">fa</span><span class="op" id="5320816">.</span><span class="ident" id="5320817">SubCpu</span><span class="op" id="5320823">)</span><span class="op" id="5320824">,</span>&nbsp;<span class="ident" id="5320826">nil</span><span class="op" id="5320829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5320833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320837">seenArches</span><span class="op" id="5320847">[</span><span class="ident" id="5320848">seenArch</span><span class="op" id="5320856">]</span>&nbsp;<span class="op" id="5320858">=</span>&nbsp;<span class="builtintype" id="5320860">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5320868">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;Mach-O&nbsp;type&nbsp;matches&nbsp;that&nbsp;of&nbsp;the&nbsp;first&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320932">if</span>&nbsp;<span class="ident" id="5320935">i</span>&nbsp;<span class="op" id="5320937">==</span>&nbsp;<span class="num" id="5320940">0</span>&nbsp;<span class="op" id="5320942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5320947">machoType</span>&nbsp;<span class="op" id="5320957">=</span>&nbsp;<span class="ident" id="5320959">fa</span><span class="op" id="5320961">.</span><span class="ident" id="5320962">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5320969">}</span>&nbsp;<span class="keyword" id="5320971">else</span>&nbsp;<span class="op" id="5320976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5320981">if</span>&nbsp;<span class="ident" id="5320984">fa</span><span class="op" id="5320986">.</span><span class="ident" id="5320987">Type</span>&nbsp;<span class="op" id="5320992">!=</span>&nbsp;<span class="ident" id="5320995">machoType</span>&nbsp;<span class="op" id="5321005">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321011">return</span>&nbsp;<span class="ident" id="5321018">nil</span><span class="op" id="5321021">,</span>&nbsp;<span class="op" id="5321023">&amp;</span><span class="ident" id="5321024">FormatError</span><span class="op" id="5321035">{</span><span class="ident" id="5321036">offset</span><span class="op" id="5321042">,</span>&nbsp;<span class="ident" id="5321044">fmt</span><span class="op" id="5321047">.</span><span class="ident" id="5321048">Sprintf</span><span class="op" id="5321055">(</span><span class="string" id="5321056">&#34;Mach-O&nbsp;type&nbsp;for&nbsp;architecture&nbsp;#%d&nbsp;(type=%#x)&nbsp;does&nbsp;not&nbsp;match&nbsp;first&nbsp;(type=%#x)&#34;</span><span class="op" id="5321133">,</span>&nbsp;<span class="ident" id="5321135">i</span><span class="op" id="5321136">,</span>&nbsp;<span class="ident" id="5321138">fa</span><span class="op" id="5321140">.</span><span class="ident" id="5321141">Type</span><span class="op" id="5321145">,</span>&nbsp;<span class="ident" id="5321147">machoType</span><span class="op" id="5321156">)</span><span class="op" id="5321157">,</span>&nbsp;<span class="ident" id="5321159">nil</span><span class="op" id="5321162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321178">return</span>&nbsp;<span class="op" id="5321185">&amp;</span><span class="ident" id="5321186">ff</span><span class="op" id="5321188">,</span>&nbsp;<span class="ident" id="5321190">nil</span><br>
<span class="lineno"></span><span class="op" id="5321194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5321197">//&nbsp;OpenFat&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O</span><br>
<span class="lineno"></span><span class="comment" id="5321279">//&nbsp;universal&nbsp;binary.</span><br>
<span class="lineno">125</span><span class="keyword" id="5321300">func</span>&nbsp;<span class="ident" id="5321305">OpenFat</span><span class="op" id="5321312">(</span><span class="ident" id="5321313">name</span>&nbsp;<span class="builtintype" id="5321318">string</span><span class="op" id="5321324">)</span>&nbsp;<span class="op" id="5321326">(</span><span class="ident" id="5321327">ff</span>&nbsp;<span class="op" id="5321330">*</span><span class="ident" id="5321331">FatFile</span><span class="op" id="5321338">,</span>&nbsp;<span class="ident" id="5321340">err</span>&nbsp;<span class="builtintype" id="5321344">error</span><span class="op" id="5321349">)</span>&nbsp;<span class="op" id="5321351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321354">f</span><span class="op" id="5321355">,</span>&nbsp;<span class="ident" id="5321357">err</span>&nbsp;<span class="op" id="5321361">:=</span>&nbsp;<span class="ident" id="5321364">os</span><span class="op" id="5321366">.</span><span class="ident" id="5321367">Open</span><span class="op" id="5321371">(</span><span class="ident" id="5321372">name</span><span class="op" id="5321376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321379">if</span>&nbsp;<span class="ident" id="5321382">err</span>&nbsp;<span class="op" id="5321386">!=</span>&nbsp;<span class="ident" id="5321389">nil</span>&nbsp;<span class="op" id="5321393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321397">return</span>&nbsp;<span class="ident" id="5321404">nil</span><span class="op" id="5321407">,</span>&nbsp;<span class="ident" id="5321409">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321414">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321417">ff</span><span class="op" id="5321419">,</span>&nbsp;<span class="ident" id="5321421">err</span>&nbsp;<span class="op" id="5321425">=</span>&nbsp;<span class="ident" id="5321427">NewFatFile</span><span class="op" id="5321437">(</span><span class="ident" id="5321438">f</span><span class="op" id="5321439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321442">if</span>&nbsp;<span class="ident" id="5321445">err</span>&nbsp;<span class="op" id="5321449">!=</span>&nbsp;<span class="ident" id="5321452">nil</span>&nbsp;<span class="op" id="5321456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321460">f</span><span class="op" id="5321461">.</span><span class="ident" id="5321462">Close</span><span class="op" id="5321467">(</span><span class="op" id="5321468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321472">return</span>&nbsp;<span class="ident" id="5321479">nil</span><span class="op" id="5321482">,</span>&nbsp;<span class="ident" id="5321484">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321489">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321492">ff</span><span class="op" id="5321494">.</span><span class="ident" id="5321495">closer</span>&nbsp;<span class="op" id="5321502">=</span>&nbsp;<span class="ident" id="5321504">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321507">return</span><br>
<span class="lineno"></span><span class="op" id="5321514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5321517">func</span>&nbsp;<span class="op" id="5321522">(</span><span class="ident" id="5321523">ff</span>&nbsp;<span class="op" id="5321526">*</span><span class="ident" id="5321527">FatFile</span><span class="op" id="5321534">)</span>&nbsp;<span class="ident" id="5321536">Close</span><span class="op" id="5321541">(</span><span class="op" id="5321542">)</span>&nbsp;<span class="builtintype" id="5321544">error</span>&nbsp;<span class="op" id="5321550">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321553">var</span>&nbsp;<span class="ident" id="5321557">err</span>&nbsp;<span class="builtintype" id="5321561">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321568">if</span>&nbsp;<span class="ident" id="5321571">ff</span><span class="op" id="5321573">.</span><span class="ident" id="5321574">closer</span>&nbsp;<span class="op" id="5321581">!=</span>&nbsp;<span class="ident" id="5321584">nil</span>&nbsp;<span class="op" id="5321588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321592">err</span>&nbsp;<span class="op" id="5321596">=</span>&nbsp;<span class="ident" id="5321598">ff</span><span class="op" id="5321600">.</span><span class="ident" id="5321601">closer</span><span class="op" id="5321607">.</span><span class="ident" id="5321608">Close</span><span class="op" id="5321613">(</span><span class="op" id="5321614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5321618">ff</span><span class="op" id="5321620">.</span><span class="ident" id="5321621">closer</span>&nbsp;<span class="op" id="5321628">=</span>&nbsp;<span class="ident" id="5321630">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5321635">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5321638">return</span>&nbsp;<span class="ident" id="5321645">err</span><br>
<span class="lineno"></span><span class="op" id="5321649">}</span>
</div>
</body>
</html>
