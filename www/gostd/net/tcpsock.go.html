<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3397933">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3397989">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3398043">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3398094">package</span>&nbsp;<span class="ident" id="3398102">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3398107">//&nbsp;TCPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;TCP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="3398161">type</span>&nbsp;<span class="ident" id="3398166">TCPAddr</span>&nbsp;<span class="keyword" id="3398174">struct</span>&nbsp;<span class="op" id="3398181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3398184">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3398189">IP</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3398193">Port</span>&nbsp;<span class="builtintype" id="3398198">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3398203">Zone</span>&nbsp;<span class="builtintype" id="3398208">string</span>&nbsp;<span class="comment" id="3398215">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="3398246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3398249">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;tcp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="3398303">func</span>&nbsp;<span class="op" id="3398308">(</span><span class="ident" id="3398309">a</span>&nbsp;<span class="op" id="3398311">*</span><span class="ident" id="3398312">TCPAddr</span><span class="op" id="3398319">)</span>&nbsp;<span class="ident" id="3398321">Network</span><span class="op" id="3398328">(</span><span class="op" id="3398329">)</span>&nbsp;<span class="builtintype" id="3398331">string</span>&nbsp;<span class="op" id="3398338">{</span>&nbsp;<span class="keyword" id="3398340">return</span>&nbsp;<span class="string" id="3398347">&#34;tcp&#34;</span>&nbsp;<span class="op" id="3398353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398356">func</span>&nbsp;<span class="op" id="3398361">(</span><span class="ident" id="3398362">a</span>&nbsp;<span class="op" id="3398364">*</span><span class="ident" id="3398365">TCPAddr</span><span class="op" id="3398372">)</span>&nbsp;<span class="ident" id="3398374">String</span><span class="op" id="3398380">(</span><span class="op" id="3398381">)</span>&nbsp;<span class="builtintype" id="3398383">string</span>&nbsp;<span class="op" id="3398390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398393">if</span>&nbsp;<span class="ident" id="3398396">a</span>&nbsp;<span class="op" id="3398398">==</span>&nbsp;<span class="ident" id="3398401">nil</span>&nbsp;<span class="op" id="3398405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398409">return</span>&nbsp;<span class="string" id="3398416">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3398425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3398428">ip</span>&nbsp;<span class="op" id="3398431">:=</span>&nbsp;<span class="ident" id="3398434">ipEmptyString</span><span class="op" id="3398447">(</span><span class="ident" id="3398448">a</span><span class="op" id="3398449">.</span><span class="ident" id="3398450">IP</span><span class="op" id="3398452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398455">if</span>&nbsp;<span class="ident" id="3398458">a</span><span class="op" id="3398459">.</span><span class="ident" id="3398460">Zone</span>&nbsp;<span class="op" id="3398465">!=</span>&nbsp;<span class="string" id="3398468">&#34;&#34;</span>&nbsp;<span class="op" id="3398471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398475">return</span>&nbsp;<span class="ident" id="3398482">JoinHostPort</span><span class="op" id="3398494">(</span><span class="ident" id="3398495">ip</span><span class="op" id="3398497">+</span><span class="string" id="3398498">&#34;%&#34;</span><span class="op" id="3398501">+</span><span class="ident" id="3398502">a</span><span class="op" id="3398503">.</span><span class="ident" id="3398504">Zone</span><span class="op" id="3398508">,</span>&nbsp;<span class="ident" id="3398510">itoa</span><span class="op" id="3398514">(</span><span class="ident" id="3398515">a</span><span class="op" id="3398516">.</span><span class="ident" id="3398517">Port</span><span class="op" id="3398521">)</span><span class="op" id="3398522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3398525">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398528">return</span>&nbsp;<span class="ident" id="3398535">JoinHostPort</span><span class="op" id="3398547">(</span><span class="ident" id="3398548">ip</span><span class="op" id="3398550">,</span>&nbsp;<span class="ident" id="3398552">itoa</span><span class="op" id="3398556">(</span><span class="ident" id="3398557">a</span><span class="op" id="3398558">.</span><span class="ident" id="3398559">Port</span><span class="op" id="3398563">)</span><span class="op" id="3398564">)</span><br>
<span class="lineno"></span><span class="op" id="3398566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398569">func</span>&nbsp;<span class="op" id="3398574">(</span><span class="ident" id="3398575">a</span>&nbsp;<span class="op" id="3398577">*</span><span class="ident" id="3398578">TCPAddr</span><span class="op" id="3398585">)</span>&nbsp;<span class="ident" id="3398587">toAddr</span><span class="op" id="3398593">(</span><span class="op" id="3398594">)</span>&nbsp;<span class="ident" id="3398596">Addr</span>&nbsp;<span class="op" id="3398601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398604">if</span>&nbsp;<span class="ident" id="3398607">a</span>&nbsp;<span class="op" id="3398609">==</span>&nbsp;<span class="ident" id="3398612">nil</span>&nbsp;<span class="op" id="3398616">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398620">return</span>&nbsp;<span class="ident" id="3398627">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3398632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3398635">return</span>&nbsp;<span class="ident" id="3398642">a</span><br>
<span class="lineno"></span><span class="op" id="3398644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3398647">//&nbsp;ResolveTCPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;TCP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3398718">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3398787">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3398851">//&nbsp;&#34;tcp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="3398920">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="3398983">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3399009">func</span>&nbsp;<span class="ident" id="3399014">ResolveTCPAddr</span><span class="op" id="3399028">(</span><span class="ident" id="3399029">net</span><span class="op" id="3399032">,</span>&nbsp;<span class="ident" id="3399034">addr</span>&nbsp;<span class="builtintype" id="3399039">string</span><span class="op" id="3399045">)</span>&nbsp;<span class="op" id="3399047">(</span><span class="op" id="3399048">*</span><span class="ident" id="3399049">TCPAddr</span><span class="op" id="3399056">,</span>&nbsp;<span class="builtintype" id="3399058">error</span><span class="op" id="3399063">)</span>&nbsp;<span class="op" id="3399065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399068">switch</span>&nbsp;<span class="ident" id="3399075">net</span>&nbsp;<span class="op" id="3399079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399082">case</span>&nbsp;<span class="string" id="3399087">&#34;tcp&#34;</span><span class="op" id="3399092">,</span>&nbsp;<span class="string" id="3399094">&#34;tcp4&#34;</span><span class="op" id="3399100">,</span>&nbsp;<span class="string" id="3399102">&#34;tcp6&#34;</span><span class="op" id="3399108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399111">case</span>&nbsp;<span class="string" id="3399116">&#34;&#34;</span><span class="op" id="3399118">:</span>&nbsp;<span class="comment" id="3399120">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3399174">net</span>&nbsp;<span class="op" id="3399178">=</span>&nbsp;<span class="string" id="3399180">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399187">default</span><span class="op" id="3399194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399198">return</span>&nbsp;<span class="ident" id="3399205">nil</span><span class="op" id="3399208">,</span>&nbsp;<span class="ident" id="3399210">UnknownNetworkError</span><span class="op" id="3399229">(</span><span class="ident" id="3399230">net</span><span class="op" id="3399233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3399236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3399239">a</span><span class="op" id="3399240">,</span>&nbsp;<span class="ident" id="3399242">err</span>&nbsp;<span class="op" id="3399246">:=</span>&nbsp;<span class="ident" id="3399249">resolveInternetAddr</span><span class="op" id="3399268">(</span><span class="ident" id="3399269">net</span><span class="op" id="3399272">,</span>&nbsp;<span class="ident" id="3399274">addr</span><span class="op" id="3399278">,</span>&nbsp;<span class="ident" id="3399280">noDeadline</span><span class="op" id="3399290">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399293">if</span>&nbsp;<span class="ident" id="3399296">err</span>&nbsp;<span class="op" id="3399300">!=</span>&nbsp;<span class="ident" id="3399303">nil</span>&nbsp;<span class="op" id="3399307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399311">return</span>&nbsp;<span class="ident" id="3399318">nil</span><span class="op" id="3399321">,</span>&nbsp;<span class="ident" id="3399323">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3399328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3399331">return</span>&nbsp;<span class="ident" id="3399338">a</span><span class="op" id="3399339">.</span><span class="ident" id="3399340">toAddr</span><span class="op" id="3399346">(</span><span class="op" id="3399347">)</span><span class="op" id="3399348">.</span><span class="op" id="3399349">(</span><span class="op" id="3399350">*</span><span class="ident" id="3399351">TCPAddr</span><span class="op" id="3399358">)</span><span class="op" id="3399359">,</span>&nbsp;<span class="ident" id="3399361">nil</span><br>
<span class="lineno"></span><span class="op" id="3399365">}</span>
</div>
</body>
</html>
