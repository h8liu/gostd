<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5031629">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5031684">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5031738">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5031789">package</span>&nbsp;<span class="ident" id="5031797">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5031806">import</span>&nbsp;<span class="op" id="5031813">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031816">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031825">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031832">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031838">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031844">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5031855">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5031862">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5031865">type</span>&nbsp;<span class="ident" id="5031870">InternalExample</span>&nbsp;<span class="keyword" id="5031886">struct</span>&nbsp;<span class="op" id="5031893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5031896">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5031903">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5031911">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5031918">func</span><span class="op" id="5031922">(</span><span class="op" id="5031923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5031926">Output</span>&nbsp;<span class="builtintype" id="5031933">string</span><br>
<span class="lineno">20</span><span class="op" id="5031940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5031943">func</span>&nbsp;<span class="ident" id="5031948">RunExamples</span><span class="op" id="5031959">(</span><span class="ident" id="5031960">matchString</span>&nbsp;<span class="keyword" id="5031972">func</span><span class="op" id="5031976">(</span><span class="ident" id="5031977">pat</span><span class="op" id="5031980">,</span>&nbsp;<span class="ident" id="5031982">str</span>&nbsp;<span class="builtintype" id="5031986">string</span><span class="op" id="5031992">)</span>&nbsp;<span class="op" id="5031994">(</span><span class="builtintype" id="5031995">bool</span><span class="op" id="5031999">,</span>&nbsp;<span class="builtintype" id="5032001">error</span><span class="op" id="5032006">)</span><span class="op" id="5032007">,</span>&nbsp;<span class="ident" id="5032009">examples</span>&nbsp;<span class="op" id="5032018">[</span><span class="op" id="5032019">]</span><span class="ident" id="5032020"><a href="/testing/example.go.html#5031870">InternalExample</a></span><span class="op" id="5032035">)</span>&nbsp;<span class="op" id="5032037">(</span><span class="ident" id="5032038">ok</span>&nbsp;<span class="builtintype" id="5032041">bool</span><span class="op" id="5032045">)</span>&nbsp;<span class="op" id="5032047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032050"><a href="/testing/example.go.html#5032038">ok</a></span>&nbsp;<span class="op" id="5032053">=</span>&nbsp;<span class="builtintype" id="5032055">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032062">var</span>&nbsp;<span class="ident" id="5032066">eg</span>&nbsp;<span class="ident" id="5032069"><a href="/testing/example.go.html#5031870">InternalExample</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032087">for</span>&nbsp;<span class="ident" id="5032091">_</span><span class="op" id="5032092">,</span>&nbsp;<span class="ident" id="5032094"><a href="/testing/example.go.html#5032066">eg</a></span>&nbsp;<span class="op" id="5032097">=</span>&nbsp;<span class="keyword" id="5032099">range</span>&nbsp;<span class="ident" id="5032105"><a href="/testing/example.go.html#5032009">examples</a></span>&nbsp;<span class="op" id="5032114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032118">matched</span><span class="op" id="5032125">,</span>&nbsp;<span class="ident" id="5032127">err</span>&nbsp;<span class="op" id="5032131">:=</span>&nbsp;<span class="ident" id="5032134"><a href="/testing/example.go.html#5031960">matchString</a></span><span class="op" id="5032145">(</span><span class="op" id="5032146">*</span><span class="ident" id="5032147"><a href="/testing/testing.go.html#5039977">match</a></span><span class="op" id="5032152">,</span>&nbsp;<span class="ident" id="5032154"><a href="/testing/example.go.html#5032066">eg</a></span><span class="op" id="5032156">.</span><span class="ident" id="5032157">Name</span><span class="op" id="5032161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032165">if</span>&nbsp;<span class="ident" id="5032168"><a href="/testing/example.go.html#5032127">err</a></span>&nbsp;<span class="op" id="5032172">!=</span>&nbsp;<span class="ident" id="5032175">nil</span>&nbsp;<span class="op" id="5032179">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032184"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5032187">.</span><span class="ident" id="5032188">Fprintf</span><span class="op" id="5032195">(</span><span class="ident" id="5032196"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032198">.</span><span class="ident" id="5032199">Stderr</span><span class="op" id="5032205">,</span>&nbsp;<span class="string" id="5032207">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5032252">,</span>&nbsp;<span class="ident" id="5032254"><a href="/testing/example.go.html#5032127">err</a></span><span class="op" id="5032257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032262"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032264">.</span><span class="ident" id="5032265">Exit</span><span class="op" id="5032269">(</span><span class="num" id="5032270">1</span><span class="op" id="5032271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032279">if</span>&nbsp;<span class="op" id="5032282">!</span><span class="ident" id="5032283"><a href="/testing/example.go.html#5032118">matched</a></span>&nbsp;<span class="op" id="5032291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032296">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032311">if</span>&nbsp;<span class="op" id="5032314">!</span><span class="ident" id="5032315"><a href="/testing/example.go.html#5032370">runExample</a></span><span class="op" id="5032325">(</span><span class="ident" id="5032326"><a href="/testing/example.go.html#5032066">eg</a></span><span class="op" id="5032328">)</span>&nbsp;<span class="op" id="5032330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032335"><a href="/testing/example.go.html#5032038">ok</a></span>&nbsp;<span class="op" id="5032338">=</span>&nbsp;<span class="builtintype" id="5032340">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032351">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032355">return</span><br>
<span class="lineno"></span><span class="op" id="5032362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5032365">func</span>&nbsp;<span class="ident" id="5032370">runExample</span><span class="op" id="5032380">(</span><span class="ident" id="5032381">eg</span>&nbsp;<span class="ident" id="5032384"><a href="/testing/example.go.html#5031870">InternalExample</a></span><span class="op" id="5032399">)</span>&nbsp;<span class="op" id="5032401">(</span><span class="ident" id="5032402">ok</span>&nbsp;<span class="builtintype" id="5032405">bool</span><span class="op" id="5032409">)</span>&nbsp;<span class="op" id="5032411">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032414">if</span>&nbsp;<span class="op" id="5032417">*</span><span class="ident" id="5032418"><a href="/testing/testing.go.html#5039775">chatty</a></span>&nbsp;<span class="op" id="5032425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032429"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5032432">.</span><span class="ident" id="5032433">Printf</span><span class="op" id="5032439">(</span><span class="string" id="5032440">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="5032455">,</span>&nbsp;<span class="ident" id="5032457"><a href="/testing/example.go.html#5032381">eg</a></span><span class="op" id="5032459">.</span><span class="ident" id="5032460">Name</span><span class="op" id="5032464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5032471">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032491">stdout</span>&nbsp;<span class="op" id="5032498">:=</span>&nbsp;<span class="ident" id="5032501"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032503">.</span><span class="ident" id="5032504">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032512">r</span><span class="op" id="5032513">,</span>&nbsp;<span class="ident" id="5032515">w</span><span class="op" id="5032516">,</span>&nbsp;<span class="ident" id="5032518">err</span>&nbsp;<span class="op" id="5032522">:=</span>&nbsp;<span class="ident" id="5032525"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032527">.</span><span class="ident" id="5032528">Pipe</span><span class="op" id="5032532">(</span><span class="op" id="5032533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032536">if</span>&nbsp;<span class="ident" id="5032539"><a href="/testing/example.go.html#5032518">err</a></span>&nbsp;<span class="op" id="5032543">!=</span>&nbsp;<span class="ident" id="5032546">nil</span>&nbsp;<span class="op" id="5032550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032554"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5032557">.</span><span class="ident" id="5032558">Fprintln</span><span class="op" id="5032566">(</span><span class="ident" id="5032567"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032569">.</span><span class="ident" id="5032570">Stderr</span><span class="op" id="5032576">,</span>&nbsp;<span class="ident" id="5032578"><a href="/testing/example.go.html#5032518">err</a></span><span class="op" id="5032581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032585"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032587">.</span><span class="ident" id="5032588">Exit</span><span class="op" id="5032592">(</span><span class="num" id="5032593">1</span><span class="op" id="5032594">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032600"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032602">.</span><span class="ident" id="5032603">Stdout</span>&nbsp;<span class="op" id="5032610">=</span>&nbsp;<span class="ident" id="5032612"><a href="/testing/example.go.html#5032515">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032615">outC</span>&nbsp;<span class="op" id="5032620">:=</span>&nbsp;<span class="builtinfunc" id="5032623">make</span><span class="op" id="5032627">(</span><span class="keyword" id="5032628">chan</span>&nbsp;<span class="builtintype" id="5032633">string</span><span class="op" id="5032639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032642">go</span>&nbsp;<span class="keyword" id="5032645">func</span><span class="op" id="5032649">(</span><span class="op" id="5032650">)</span>&nbsp;<span class="op" id="5032652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032656">buf</span>&nbsp;<span class="op" id="5032660">:=</span>&nbsp;<span class="builtinfunc" id="5032663">new</span><span class="op" id="5032666">(</span><span class="ident" id="5032667"><a href="/testing/example.go.html#5031816">bytes</a></span><span class="op" id="5032672">.</span><span class="ident" id="5032673">Buffer</span><span class="op" id="5032679">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032683">_</span><span class="op" id="5032684">,</span>&nbsp;<span class="ident" id="5032686">err</span>&nbsp;<span class="op" id="5032690">:=</span>&nbsp;<span class="ident" id="5032693"><a href="/testing/example.go.html#5031832">io</a></span><span class="op" id="5032695">.</span><span class="ident" id="5032696">Copy</span><span class="op" id="5032700">(</span><span class="ident" id="5032701"><a href="/testing/example.go.html#5032656">buf</a></span><span class="op" id="5032704">,</span>&nbsp;<span class="ident" id="5032706"><a href="/testing/example.go.html#5032512">r</a></span><span class="op" id="5032707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032711"><a href="/testing/example.go.html#5032512">r</a></span><span class="op" id="5032712">.</span><span class="ident" id="5032713">Close</span><span class="op" id="5032718">(</span><span class="op" id="5032719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032723">if</span>&nbsp;<span class="ident" id="5032726"><a href="/testing/example.go.html#5032686">err</a></span>&nbsp;<span class="op" id="5032730">!=</span>&nbsp;<span class="ident" id="5032733">nil</span>&nbsp;<span class="op" id="5032737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032742"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5032745">.</span><span class="ident" id="5032746">Fprintf</span><span class="op" id="5032753">(</span><span class="ident" id="5032754"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032756">.</span><span class="ident" id="5032757">Stderr</span><span class="op" id="5032763">,</span>&nbsp;<span class="string" id="5032765">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="5032794">,</span>&nbsp;<span class="ident" id="5032796"><a href="/testing/example.go.html#5032686">err</a></span><span class="op" id="5032799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032804"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5032806">.</span><span class="ident" id="5032807">Exit</span><span class="op" id="5032811">(</span><span class="num" id="5032812">1</span><span class="op" id="5032813">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032821"><a href="/testing/example.go.html#5032615">outC</a></span>&nbsp;<span class="op" id="5032826">&lt;-</span>&nbsp;<span class="ident" id="5032829"><a href="/testing/example.go.html#5032656">buf</a></span><span class="op" id="5032832">.</span><span class="ident" id="5032833">String</span><span class="op" id="5032839">(</span><span class="op" id="5032840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5032843">}</span><span class="op" id="5032844">(</span><span class="op" id="5032845">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032849">start</span>&nbsp;<span class="op" id="5032855">:=</span>&nbsp;<span class="ident" id="5032858"><a href="/testing/example.go.html#5031855">time</a></span><span class="op" id="5032862">.</span><span class="ident" id="5032863">Now</span><span class="op" id="5032866">(</span><span class="op" id="5032867">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032870"><a href="/testing/example.go.html#5032402">ok</a></span>&nbsp;<span class="op" id="5032873">=</span>&nbsp;<span class="builtintype" id="5032875">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5032882">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5032955">defer</span>&nbsp;<span class="keyword" id="5032961">func</span><span class="op" id="5032965">(</span><span class="op" id="5032966">)</span>&nbsp;<span class="op" id="5032968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5032972">dstr</span>&nbsp;<span class="op" id="5032977">:=</span>&nbsp;<span class="ident" id="5032980"><a href="/testing/testing.go.html#5042842">fmtDuration</a></span><span class="op" id="5032991">(</span><span class="ident" id="5032992"><a href="/testing/example.go.html#5031855">time</a></span><span class="op" id="5032996">.</span><span class="ident" id="5032997">Now</span><span class="op" id="5033000">(</span><span class="op" id="5033001">)</span><span class="op" id="5033002">.</span><span class="ident" id="5033003">Sub</span><span class="op" id="5033006">(</span><span class="ident" id="5033007"><a href="/testing/example.go.html#5032849">start</a></span><span class="op" id="5033012">)</span><span class="op" id="5033013">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5033018">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033063"><a href="/testing/example.go.html#5032515">w</a></span><span class="op" id="5033064">.</span><span class="ident" id="5033065">Close</span><span class="op" id="5033070">(</span><span class="op" id="5033071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033075"><a href="/testing/example.go.html#5031838">os</a></span><span class="op" id="5033077">.</span><span class="ident" id="5033078">Stdout</span>&nbsp;<span class="op" id="5033085">=</span>&nbsp;<span class="ident" id="5033087"><a href="/testing/example.go.html#5032491">stdout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033096">out</span>&nbsp;<span class="op" id="5033100">:=</span>&nbsp;<span class="op" id="5033103">&lt;-</span><span class="ident" id="5033105"><a href="/testing/example.go.html#5032615">outC</a></span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5033113">var</span>&nbsp;<span class="ident" id="5033117">fail</span>&nbsp;<span class="builtintype" id="5033122">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033131">err</span>&nbsp;<span class="op" id="5033135">:=</span>&nbsp;<span class="builtinfunc" id="5033138">recover</span><span class="op" id="5033145">(</span><span class="op" id="5033146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5033150">if</span>&nbsp;<span class="ident" id="5033153">g</span><span class="op" id="5033154">,</span>&nbsp;<span class="ident" id="5033156">e</span>&nbsp;<span class="op" id="5033158">:=</span>&nbsp;<span class="ident" id="5033161"><a href="/testing/example.go.html#5031844">strings</a></span><span class="op" id="5033168">.</span><span class="ident" id="5033169">TrimSpace</span><span class="op" id="5033178">(</span><span class="ident" id="5033179"><a href="/testing/example.go.html#5033096">out</a></span><span class="op" id="5033182">)</span><span class="op" id="5033183">,</span>&nbsp;<span class="ident" id="5033185"><a href="/testing/example.go.html#5031844">strings</a></span><span class="op" id="5033192">.</span><span class="ident" id="5033193">TrimSpace</span><span class="op" id="5033202">(</span><span class="ident" id="5033203"><a href="/testing/example.go.html#5032381">eg</a></span><span class="op" id="5033205">.</span><span class="ident" id="5033206">Output</span><span class="op" id="5033212">)</span><span class="op" id="5033213">;</span>&nbsp;<span class="ident" id="5033215"><a href="/testing/example.go.html#5033153">g</a></span>&nbsp;<span class="op" id="5033217">!=</span>&nbsp;<span class="ident" id="5033220"><a href="/testing/example.go.html#5033156">e</a></span>&nbsp;<span class="op" id="5033222">&amp;&amp;</span>&nbsp;<span class="ident" id="5033225"><a href="/testing/example.go.html#5033131">err</a></span>&nbsp;<span class="op" id="5033229">==</span>&nbsp;<span class="ident" id="5033232">nil</span>&nbsp;<span class="op" id="5033236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033241"><a href="/testing/example.go.html#5033117">fail</a></span>&nbsp;<span class="op" id="5033246">=</span>&nbsp;<span class="ident" id="5033248"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5033251">.</span><span class="ident" id="5033252">Sprintf</span><span class="op" id="5033259">(</span><span class="string" id="5033260">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="5033283">,</span>&nbsp;<span class="ident" id="5033285"><a href="/testing/example.go.html#5033153">g</a></span><span class="op" id="5033286">,</span>&nbsp;<span class="ident" id="5033288"><a href="/testing/example.go.html#5033156">e</a></span><span class="op" id="5033289">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5033293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5033297">if</span>&nbsp;<span class="ident" id="5033300"><a href="/testing/example.go.html#5033117">fail</a></span>&nbsp;<span class="op" id="5033305">!=</span>&nbsp;<span class="string" id="5033308">&#34;&#34;</span>&nbsp;<span class="op" id="5033311">||</span>&nbsp;<span class="ident" id="5033314"><a href="/testing/example.go.html#5033131">err</a></span>&nbsp;<span class="op" id="5033318">!=</span>&nbsp;<span class="ident" id="5033321">nil</span>&nbsp;<span class="op" id="5033325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033330"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5033333">.</span><span class="ident" id="5033334">Printf</span><span class="op" id="5033340">(</span><span class="string" id="5033341">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="5033364">,</span>&nbsp;<span class="ident" id="5033366"><a href="/testing/example.go.html#5032381">eg</a></span><span class="op" id="5033368">.</span><span class="ident" id="5033369">Name</span><span class="op" id="5033373">,</span>&nbsp;<span class="ident" id="5033375"><a href="/testing/example.go.html#5032972">dstr</a></span><span class="op" id="5033379">,</span>&nbsp;<span class="ident" id="5033381"><a href="/testing/example.go.html#5033117">fail</a></span><span class="op" id="5033385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033390"><a href="/testing/example.go.html#5032402">ok</a></span>&nbsp;<span class="op" id="5033393">=</span>&nbsp;<span class="builtintype" id="5033395">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5033403">}</span>&nbsp;<span class="keyword" id="5033405">else</span>&nbsp;<span class="keyword" id="5033410">if</span>&nbsp;<span class="op" id="5033413">*</span><span class="ident" id="5033414"><a href="/testing/testing.go.html#5039775">chatty</a></span>&nbsp;<span class="op" id="5033421">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033426"><a href="/testing/example.go.html#5031825">fmt</a></span><span class="op" id="5033429">.</span><span class="ident" id="5033430">Printf</span><span class="op" id="5033436">(</span><span class="string" id="5033437">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="5033458">,</span>&nbsp;<span class="ident" id="5033460"><a href="/testing/example.go.html#5032381">eg</a></span><span class="op" id="5033462">.</span><span class="ident" id="5033463">Name</span><span class="op" id="5033467">,</span>&nbsp;<span class="ident" id="5033469"><a href="/testing/example.go.html#5032972">dstr</a></span><span class="op" id="5033473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5033477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5033481">if</span>&nbsp;<span class="ident" id="5033484"><a href="/testing/example.go.html#5033131">err</a></span>&nbsp;<span class="op" id="5033488">!=</span>&nbsp;<span class="ident" id="5033491">nil</span>&nbsp;<span class="op" id="5033495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5033500">panic</span><span class="op" id="5033505">(</span><span class="ident" id="5033506"><a href="/testing/example.go.html#5033131">err</a></span><span class="op" id="5033509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5033513">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5033516">}</span><span class="op" id="5033517">(</span><span class="op" id="5033518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5033522">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5033539"><a href="/testing/example.go.html#5032381">eg</a></span><span class="op" id="5033541">.</span><span class="ident" id="5033542">F</span><span class="op" id="5033543">(</span><span class="op" id="5033544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5033547">return</span><br>
<span class="lineno">100</span><span class="op" id="5033554">}</span>
</div>
</body>
</html>
