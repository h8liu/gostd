<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1384527">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1384582">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1384636">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1384687">package</span>&nbsp;<span class="ident" id="1384695">fmt</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1384700">import</span>&nbsp;<span class="op" id="1384707">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384710">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384720">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384726">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384734">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384740">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384751">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384762">&#34;sync&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1384770">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1384785">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1384788">//&nbsp;runeUnreader&nbsp;is&nbsp;the&nbsp;interface&nbsp;to&nbsp;something&nbsp;that&nbsp;can&nbsp;unread&nbsp;runes.</span><br>
<span class="lineno"></span><span class="comment" id="1384857">//&nbsp;If&nbsp;the&nbsp;object&nbsp;provided&nbsp;to&nbsp;Scan&nbsp;does&nbsp;not&nbsp;satisfy&nbsp;this&nbsp;interface,</span><br>
<span class="lineno">20</span><span class="comment" id="1384924">//&nbsp;a&nbsp;local&nbsp;buffer&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;back&nbsp;up&nbsp;the&nbsp;input,&nbsp;but&nbsp;its&nbsp;contents</span><br>
<span class="lineno"></span><span class="comment" id="1384994">//&nbsp;will&nbsp;be&nbsp;lost&nbsp;when&nbsp;Scan&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="1385029">type</span>&nbsp;<span class="ident" id="1385034">runeUnreader</span>&nbsp;<span class="keyword" id="1385047">interface</span>&nbsp;<span class="op" id="1385057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385060">UnreadRune</span><span class="op" id="1385070">(</span><span class="op" id="1385071">)</span>&nbsp;<span class="builtintype" id="1385073">error</span><br>
<span class="lineno"></span><span class="op" id="1385079">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1385082">//&nbsp;ScanState&nbsp;represents&nbsp;the&nbsp;scanner&nbsp;state&nbsp;passed&nbsp;to&nbsp;custom&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="comment" id="1385151">//&nbsp;Scanners&nbsp;may&nbsp;do&nbsp;rune-at-a-time&nbsp;scanning&nbsp;or&nbsp;ask&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="1385215">//&nbsp;to&nbsp;discover&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="1385262">type</span>&nbsp;<span class="ident" id="1385267">ScanState</span>&nbsp;<span class="keyword" id="1385277">interface</span>&nbsp;<span class="op" id="1385287">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385290">//&nbsp;ReadRune&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;(Unicode&nbsp;code&nbsp;point)&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385360">//&nbsp;If&nbsp;invoked&nbsp;during&nbsp;Scanln,&nbsp;Fscanln,&nbsp;or&nbsp;Sscanln,&nbsp;ReadRune()&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385427">//&nbsp;return&nbsp;EOF&nbsp;after&nbsp;returning&nbsp;the&nbsp;first&nbsp;&#39;\n&#39;&nbsp;or&nbsp;when&nbsp;reading&nbsp;beyond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385496">//&nbsp;the&nbsp;specified&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385521">ReadRune</span><span class="op" id="1385529">(</span><span class="op" id="1385530">)</span>&nbsp;<span class="op" id="1385532">(</span><span class="ident" id="1385533">r</span>&nbsp;<span class="builtintype" id="1385535">rune</span><span class="op" id="1385539">,</span>&nbsp;<span class="ident" id="1385541">size</span>&nbsp;<span class="builtintype" id="1385546">int</span><span class="op" id="1385549">,</span>&nbsp;<span class="ident" id="1385551">err</span>&nbsp;<span class="builtintype" id="1385555">error</span><span class="op" id="1385560">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385563">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385636">UnreadRune</span><span class="op" id="1385646">(</span><span class="op" id="1385647">)</span>&nbsp;<span class="builtintype" id="1385649">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385656">//&nbsp;SkipSpace&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input.&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385726">//&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385801">//&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as&nbsp;EOF.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385834">SkipSpace</span><span class="op" id="1385843">(</span><span class="op" id="1385844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385847">//&nbsp;Token&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input&nbsp;if&nbsp;skipSpace&nbsp;is&nbsp;true,&nbsp;then&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385921">//&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c).&nbsp;&nbsp;If&nbsp;f&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1385985">//&nbsp;!unicode.IsSpace(c)&nbsp;is&nbsp;used;&nbsp;that&nbsp;is,&nbsp;the&nbsp;token&nbsp;will&nbsp;hold&nbsp;non-space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386057">//&nbsp;characters.&nbsp;&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386130">//&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386203">//&nbsp;EOF.&nbsp;&nbsp;The&nbsp;returned&nbsp;slice&nbsp;points&nbsp;to&nbsp;shared&nbsp;data&nbsp;that&nbsp;may&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386278">//&nbsp;by&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;Token,&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;Scan&nbsp;function&nbsp;using&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386355">//&nbsp;as&nbsp;input,&nbsp;or&nbsp;when&nbsp;the&nbsp;calling&nbsp;Scan&nbsp;method&nbsp;returns.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386410">Token</span><span class="op" id="1386415">(</span><span class="ident" id="1386416">skipSpace</span>&nbsp;<span class="builtintype" id="1386426">bool</span><span class="op" id="1386430">,</span>&nbsp;<span class="ident" id="1386432">f</span>&nbsp;<span class="keyword" id="1386434">func</span><span class="op" id="1386438">(</span><span class="builtintype" id="1386439">rune</span><span class="op" id="1386443">)</span>&nbsp;<span class="builtintype" id="1386445">bool</span><span class="op" id="1386449">)</span>&nbsp;<span class="op" id="1386451">(</span><span class="ident" id="1386452">token</span>&nbsp;<span class="op" id="1386458">[</span><span class="op" id="1386459">]</span><span class="builtintype" id="1386460">byte</span><span class="op" id="1386464">,</span>&nbsp;<span class="ident" id="1386466">err</span>&nbsp;<span class="builtintype" id="1386470">error</span><span class="op" id="1386475">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386478">//&nbsp;Width&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;width&nbsp;option&nbsp;and&nbsp;whether&nbsp;it&nbsp;has&nbsp;been&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386555">//&nbsp;The&nbsp;unit&nbsp;is&nbsp;Unicode&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386592">Width</span><span class="op" id="1386597">(</span><span class="op" id="1386598">)</span>&nbsp;<span class="op" id="1386600">(</span><span class="ident" id="1386601">wid</span>&nbsp;<span class="builtintype" id="1386605">int</span><span class="op" id="1386608">,</span>&nbsp;<span class="ident" id="1386610">ok</span>&nbsp;<span class="builtintype" id="1386613">bool</span><span class="op" id="1386617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386620">//&nbsp;Because&nbsp;ReadRune&nbsp;is&nbsp;implemented&nbsp;by&nbsp;the&nbsp;interface,&nbsp;Read&nbsp;should&nbsp;never&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386695">//&nbsp;called&nbsp;by&nbsp;the&nbsp;scanning&nbsp;routines&nbsp;and&nbsp;a&nbsp;valid&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1386761">//&nbsp;ScanState&nbsp;may&nbsp;choose&nbsp;always&nbsp;to&nbsp;return&nbsp;an&nbsp;error&nbsp;from&nbsp;Read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386823">Read</span><span class="op" id="1386827">(</span><span class="ident" id="1386828">buf</span>&nbsp;<span class="op" id="1386832">[</span><span class="op" id="1386833">]</span><span class="builtintype" id="1386834">byte</span><span class="op" id="1386838">)</span>&nbsp;<span class="op" id="1386840">(</span><span class="ident" id="1386841">n</span>&nbsp;<span class="builtintype" id="1386843">int</span><span class="op" id="1386846">,</span>&nbsp;<span class="ident" id="1386848">err</span>&nbsp;<span class="builtintype" id="1386852">error</span><span class="op" id="1386857">)</span><br>
<span class="lineno"></span><span class="op" id="1386859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1386862">//&nbsp;Scanner&nbsp;is&nbsp;implemented&nbsp;by&nbsp;any&nbsp;value&nbsp;that&nbsp;has&nbsp;a&nbsp;Scan&nbsp;method,&nbsp;which&nbsp;scans</span><br>
<span class="lineno">60</span><span class="comment" id="1386937">//&nbsp;the&nbsp;input&nbsp;for&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;value&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1387013">//&nbsp;receiver,&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;be&nbsp;useful.&nbsp;&nbsp;The&nbsp;Scan&nbsp;method&nbsp;is&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="1387091">//&nbsp;for&nbsp;any&nbsp;argument&nbsp;to&nbsp;Scan,&nbsp;Scanf,&nbsp;or&nbsp;Scanln&nbsp;that&nbsp;implements&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1387157">type</span>&nbsp;<span class="ident" id="1387162">Scanner</span>&nbsp;<span class="keyword" id="1387170">interface</span>&nbsp;<span class="op" id="1387180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387183">Scan</span><span class="op" id="1387187">(</span><span class="ident" id="1387188">state</span>&nbsp;<span class="ident" id="1387194"><a href="/fmt/scan.go.html#1385267">ScanState</a></span><span class="op" id="1387203">,</span>&nbsp;<span class="ident" id="1387205">verb</span>&nbsp;<span class="builtintype" id="1387210">rune</span><span class="op" id="1387214">)</span>&nbsp;<span class="builtintype" id="1387216">error</span><br>
<span class="lineno">65</span><span class="op" id="1387222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1387225">//&nbsp;Scan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="1387289">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count</span><br>
<span class="lineno"></span><span class="comment" id="1387358">//&nbsp;as&nbsp;space.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno">70</span><span class="comment" id="1387425">//&nbsp;If&nbsp;that&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="1387495">func</span>&nbsp;<span class="ident" id="1387500">Scan</span><span class="op" id="1387504">(</span><span class="ident" id="1387505">a</span>&nbsp;<span class="op" id="1387507">...</span><span class="keyword" id="1387510">interface</span><span class="op" id="1387519">{</span><span class="op" id="1387520">}</span><span class="op" id="1387521">)</span>&nbsp;<span class="op" id="1387523">(</span><span class="ident" id="1387524">n</span>&nbsp;<span class="builtintype" id="1387526">int</span><span class="op" id="1387529">,</span>&nbsp;<span class="ident" id="1387531">err</span>&nbsp;<span class="builtintype" id="1387535">error</span><span class="op" id="1387540">)</span>&nbsp;<span class="op" id="1387542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387545">return</span>&nbsp;<span class="ident" id="1387552"><a href="/fmt/scan.go.html#1389450">Fscan</a></span><span class="op" id="1387557">(</span><span class="ident" id="1387558"><a href="/fmt/scan.go.html#1384734">os</a></span><span class="op" id="1387560">.</span><span class="ident" id="1387561">Stdin</span><span class="op" id="1387566">,</span>&nbsp;<span class="ident" id="1387568"><a href="/fmt/scan.go.html#1387505">a</a></span><span class="op" id="1387569">...</span><span class="op" id="1387572">)</span><br>
<span class="lineno"></span><span class="op" id="1387574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="1387577">//&nbsp;Scanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Scan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1387643">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="1387699">func</span>&nbsp;<span class="ident" id="1387704">Scanln</span><span class="op" id="1387710">(</span><span class="ident" id="1387711">a</span>&nbsp;<span class="op" id="1387713">...</span><span class="keyword" id="1387716">interface</span><span class="op" id="1387725">{</span><span class="op" id="1387726">}</span><span class="op" id="1387727">)</span>&nbsp;<span class="op" id="1387729">(</span><span class="ident" id="1387730">n</span>&nbsp;<span class="builtintype" id="1387732">int</span><span class="op" id="1387735">,</span>&nbsp;<span class="ident" id="1387737">err</span>&nbsp;<span class="builtintype" id="1387741">error</span><span class="op" id="1387746">)</span>&nbsp;<span class="op" id="1387748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387751">return</span>&nbsp;<span class="ident" id="1387758"><a href="/fmt/scan.go.html#1389723">Fscanln</a></span><span class="op" id="1387765">(</span><span class="ident" id="1387766"><a href="/fmt/scan.go.html#1384734">os</a></span><span class="op" id="1387768">.</span><span class="ident" id="1387769">Stdin</span><span class="op" id="1387774">,</span>&nbsp;<span class="ident" id="1387776"><a href="/fmt/scan.go.html#1387711">a</a></span><span class="op" id="1387777">...</span><span class="op" id="1387780">)</span><br>
<span class="lineno"></span><span class="op" id="1387782">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="1387785">//&nbsp;Scanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="1387850">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="1387919">//&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="1387988">func</span>&nbsp;<span class="ident" id="1387993">Scanf</span><span class="op" id="1387998">(</span><span class="ident" id="1387999">format</span>&nbsp;<span class="builtintype" id="1388006">string</span><span class="op" id="1388012">,</span>&nbsp;<span class="ident" id="1388014">a</span>&nbsp;<span class="op" id="1388016">...</span><span class="keyword" id="1388019">interface</span><span class="op" id="1388028">{</span><span class="op" id="1388029">}</span><span class="op" id="1388030">)</span>&nbsp;<span class="op" id="1388032">(</span><span class="ident" id="1388033">n</span>&nbsp;<span class="builtintype" id="1388035">int</span><span class="op" id="1388038">,</span>&nbsp;<span class="ident" id="1388040">err</span>&nbsp;<span class="builtintype" id="1388044">error</span><span class="op" id="1388049">)</span>&nbsp;<span class="op" id="1388051">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1388054">return</span>&nbsp;<span class="ident" id="1388061"><a href="/fmt/scan.go.html#1390064">Fscanf</a></span><span class="op" id="1388067">(</span><span class="ident" id="1388068"><a href="/fmt/scan.go.html#1384734">os</a></span><span class="op" id="1388070">.</span><span class="ident" id="1388071">Stdin</span><span class="op" id="1388076">,</span>&nbsp;<span class="ident" id="1388078"><a href="/fmt/scan.go.html#1387999">format</a></span><span class="op" id="1388084">,</span>&nbsp;<span class="ident" id="1388086"><a href="/fmt/scan.go.html#1388014">a</a></span><span class="op" id="1388087">...</span><span class="op" id="1388090">)</span><br>
<span class="lineno"></span><span class="op" id="1388092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1388095">type</span>&nbsp;<span class="ident" id="1388100">stringReader</span>&nbsp;<span class="builtintype" id="1388113">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="1388121">func</span>&nbsp;<span class="op" id="1388126">(</span><span class="ident" id="1388127">r</span>&nbsp;<span class="op" id="1388129">*</span><span class="ident" id="1388130"><a href="/fmt/scan.go.html#1388100">stringReader</a></span><span class="op" id="1388142">)</span>&nbsp;<span class="ident" id="1388144">Read</span><span class="op" id="1388148">(</span><span class="ident" id="1388149">b</span>&nbsp;<span class="op" id="1388151">[</span><span class="op" id="1388152">]</span><span class="builtintype" id="1388153">byte</span><span class="op" id="1388157">)</span>&nbsp;<span class="op" id="1388159">(</span><span class="ident" id="1388160">n</span>&nbsp;<span class="builtintype" id="1388162">int</span><span class="op" id="1388165">,</span>&nbsp;<span class="ident" id="1388167">err</span>&nbsp;<span class="builtintype" id="1388171">error</span><span class="op" id="1388176">)</span>&nbsp;<span class="op" id="1388178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1388181"><a href="/fmt/scan.go.html#1388160">n</a></span>&nbsp;<span class="op" id="1388183">=</span>&nbsp;<span class="builtinfunc" id="1388185">copy</span><span class="op" id="1388189">(</span><span class="ident" id="1388190"><a href="/fmt/scan.go.html#1388149">b</a></span><span class="op" id="1388191">,</span>&nbsp;<span class="op" id="1388193">*</span><span class="ident" id="1388194"><a href="/fmt/scan.go.html#1388127">r</a></span><span class="op" id="1388195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1388198">*</span><span class="ident" id="1388199"><a href="/fmt/scan.go.html#1388127">r</a></span>&nbsp;<span class="op" id="1388201">=</span>&nbsp;<span class="op" id="1388203">(</span><span class="op" id="1388204">*</span><span class="ident" id="1388205"><a href="/fmt/scan.go.html#1388127">r</a></span><span class="op" id="1388206">)</span><span class="op" id="1388207">[</span><span class="ident" id="1388208"><a href="/fmt/scan.go.html#1388160">n</a></span><span class="op" id="1388209">:</span><span class="op" id="1388210">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1388213">if</span>&nbsp;<span class="ident" id="1388216"><a href="/fmt/scan.go.html#1388160">n</a></span>&nbsp;<span class="op" id="1388218">==</span>&nbsp;<span class="num" id="1388221">0</span>&nbsp;<span class="op" id="1388223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1388227"><a href="/fmt/scan.go.html#1388167">err</a></span>&nbsp;<span class="op" id="1388231">=</span>&nbsp;<span class="ident" id="1388233"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1388235">.</span><span class="ident" id="1388236">EOF</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1388241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1388244">return</span><br>
<span class="lineno"></span><span class="op" id="1388251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1388254">//&nbsp;Sscan&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno">100</span><span class="comment" id="1388325">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1388392">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="1388462">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="1388516">func</span>&nbsp;<span class="ident" id="1388521">Sscan</span><span class="op" id="1388526">(</span><span class="ident" id="1388527">str</span>&nbsp;<span class="builtintype" id="1388531">string</span><span class="op" id="1388537">,</span>&nbsp;<span class="ident" id="1388539">a</span>&nbsp;<span class="op" id="1388541">...</span><span class="keyword" id="1388544">interface</span><span class="op" id="1388553">{</span><span class="op" id="1388554">}</span><span class="op" id="1388555">)</span>&nbsp;<span class="op" id="1388557">(</span><span class="ident" id="1388558">n</span>&nbsp;<span class="builtintype" id="1388560">int</span><span class="op" id="1388563">,</span>&nbsp;<span class="ident" id="1388565">err</span>&nbsp;<span class="builtintype" id="1388569">error</span><span class="op" id="1388574">)</span>&nbsp;<span class="op" id="1388576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1388579">return</span>&nbsp;<span class="ident" id="1388586"><a href="/fmt/scan.go.html#1389450">Fscan</a></span><span class="op" id="1388591">(</span><span class="op" id="1388592">(</span><span class="op" id="1388593">*</span><span class="ident" id="1388594"><a href="/fmt/scan.go.html#1388100">stringReader</a></span><span class="op" id="1388606">)</span><span class="op" id="1388607">(</span><span class="op" id="1388608">&amp;</span><span class="ident" id="1388609"><a href="/fmt/scan.go.html#1388527">str</a></span><span class="op" id="1388612">)</span><span class="op" id="1388613">,</span>&nbsp;<span class="ident" id="1388615"><a href="/fmt/scan.go.html#1388539">a</a></span><span class="op" id="1388616">...</span><span class="op" id="1388619">)</span><br>
<span class="lineno">105</span><span class="op" id="1388621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1388624">//&nbsp;Sscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Sscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1388692">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="1388748">func</span>&nbsp;<span class="ident" id="1388753">Sscanln</span><span class="op" id="1388760">(</span><span class="ident" id="1388761">str</span>&nbsp;<span class="builtintype" id="1388765">string</span><span class="op" id="1388771">,</span>&nbsp;<span class="ident" id="1388773">a</span>&nbsp;<span class="op" id="1388775">...</span><span class="keyword" id="1388778">interface</span><span class="op" id="1388787">{</span><span class="op" id="1388788">}</span><span class="op" id="1388789">)</span>&nbsp;<span class="op" id="1388791">(</span><span class="ident" id="1388792">n</span>&nbsp;<span class="builtintype" id="1388794">int</span><span class="op" id="1388797">,</span>&nbsp;<span class="ident" id="1388799">err</span>&nbsp;<span class="builtintype" id="1388803">error</span><span class="op" id="1388808">)</span>&nbsp;<span class="op" id="1388810">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1388813">return</span>&nbsp;<span class="ident" id="1388820"><a href="/fmt/scan.go.html#1389723">Fscanln</a></span><span class="op" id="1388827">(</span><span class="op" id="1388828">(</span><span class="op" id="1388829">*</span><span class="ident" id="1388830"><a href="/fmt/scan.go.html#1388100">stringReader</a></span><span class="op" id="1388842">)</span><span class="op" id="1388843">(</span><span class="op" id="1388844">&amp;</span><span class="ident" id="1388845"><a href="/fmt/scan.go.html#1388761">str</a></span><span class="op" id="1388848">)</span><span class="op" id="1388849">,</span>&nbsp;<span class="ident" id="1388851"><a href="/fmt/scan.go.html#1388773">a</a></span><span class="op" id="1388852">...</span><span class="op" id="1388855">)</span><br>
<span class="lineno"></span><span class="op" id="1388857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1388860">//&nbsp;Sscanf&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="1388932">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno">115</span><span class="comment" id="1389001">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="1389053">func</span>&nbsp;<span class="ident" id="1389058">Sscanf</span><span class="op" id="1389064">(</span><span class="ident" id="1389065">str</span>&nbsp;<span class="builtintype" id="1389069">string</span><span class="op" id="1389075">,</span>&nbsp;<span class="ident" id="1389077">format</span>&nbsp;<span class="builtintype" id="1389084">string</span><span class="op" id="1389090">,</span>&nbsp;<span class="ident" id="1389092">a</span>&nbsp;<span class="op" id="1389094">...</span><span class="keyword" id="1389097">interface</span><span class="op" id="1389106">{</span><span class="op" id="1389107">}</span><span class="op" id="1389108">)</span>&nbsp;<span class="op" id="1389110">(</span><span class="ident" id="1389111">n</span>&nbsp;<span class="builtintype" id="1389113">int</span><span class="op" id="1389116">,</span>&nbsp;<span class="ident" id="1389118">err</span>&nbsp;<span class="builtintype" id="1389122">error</span><span class="op" id="1389127">)</span>&nbsp;<span class="op" id="1389129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1389132">return</span>&nbsp;<span class="ident" id="1389139"><a href="/fmt/scan.go.html#1390064">Fscanf</a></span><span class="op" id="1389145">(</span><span class="op" id="1389146">(</span><span class="op" id="1389147">*</span><span class="ident" id="1389148"><a href="/fmt/scan.go.html#1388100">stringReader</a></span><span class="op" id="1389160">)</span><span class="op" id="1389161">(</span><span class="op" id="1389162">&amp;</span><span class="ident" id="1389163"><a href="/fmt/scan.go.html#1389065">str</a></span><span class="op" id="1389166">)</span><span class="op" id="1389167">,</span>&nbsp;<span class="ident" id="1389169"><a href="/fmt/scan.go.html#1389077">format</a></span><span class="op" id="1389175">,</span>&nbsp;<span class="ident" id="1389177"><a href="/fmt/scan.go.html#1389092">a</a></span><span class="op" id="1389178">...</span><span class="op" id="1389181">)</span><br>
<span class="lineno"></span><span class="op" id="1389183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="1389186">//&nbsp;Fscan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="1389254">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1389321">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="1389391">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="1389445">func</span>&nbsp;<span class="ident" id="1389450">Fscan</span><span class="op" id="1389455">(</span><span class="ident" id="1389456">r</span>&nbsp;<span class="ident" id="1389458"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1389460">.</span><span class="ident" id="1389461">Reader</span><span class="op" id="1389467">,</span>&nbsp;<span class="ident" id="1389469">a</span>&nbsp;<span class="op" id="1389471">...</span><span class="keyword" id="1389474">interface</span><span class="op" id="1389483">{</span><span class="op" id="1389484">}</span><span class="op" id="1389485">)</span>&nbsp;<span class="op" id="1389487">(</span><span class="ident" id="1389488">n</span>&nbsp;<span class="builtintype" id="1389490">int</span><span class="op" id="1389493">,</span>&nbsp;<span class="ident" id="1389495">err</span>&nbsp;<span class="builtintype" id="1389499">error</span><span class="op" id="1389504">)</span>&nbsp;<span class="op" id="1389506">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389509">s</span><span class="op" id="1389510">,</span>&nbsp;<span class="ident" id="1389512">old</span>&nbsp;<span class="op" id="1389516">:=</span>&nbsp;<span class="ident" id="1389519"><a href="/fmt/scan.go.html#1395789">newScanState</a></span><span class="op" id="1389531">(</span><span class="ident" id="1389532"><a href="/fmt/scan.go.html#1389456">r</a></span><span class="op" id="1389533">,</span>&nbsp;<span class="ident" id="1389535">true</span><span class="op" id="1389539">,</span>&nbsp;<span class="ident" id="1389541">false</span><span class="op" id="1389546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389549"><a href="/fmt/scan.go.html#1389488">n</a></span><span class="op" id="1389550">,</span>&nbsp;<span class="ident" id="1389552"><a href="/fmt/scan.go.html#1389495">err</a></span>&nbsp;<span class="op" id="1389556">=</span>&nbsp;<span class="ident" id="1389558"><a href="/fmt/scan.go.html#1389509">s</a></span><span class="op" id="1389559">.</span><span class="ident" id="1389560">doScan</span><span class="op" id="1389566">(</span><span class="ident" id="1389567"><a href="/fmt/scan.go.html#1389469">a</a></span><span class="op" id="1389568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389571"><a href="/fmt/scan.go.html#1389509">s</a></span><span class="op" id="1389572">.</span><span class="ident" id="1389573">free</span><span class="op" id="1389577">(</span><span class="ident" id="1389578"><a href="/fmt/scan.go.html#1389512">old</a></span><span class="op" id="1389581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1389584">return</span><br>
<span class="lineno"></span><span class="op" id="1389591">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="1389594">//&nbsp;Fscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Fscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1389662">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="1389718">func</span>&nbsp;<span class="ident" id="1389723">Fscanln</span><span class="op" id="1389730">(</span><span class="ident" id="1389731">r</span>&nbsp;<span class="ident" id="1389733"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1389735">.</span><span class="ident" id="1389736">Reader</span><span class="op" id="1389742">,</span>&nbsp;<span class="ident" id="1389744">a</span>&nbsp;<span class="op" id="1389746">...</span><span class="keyword" id="1389749">interface</span><span class="op" id="1389758">{</span><span class="op" id="1389759">}</span><span class="op" id="1389760">)</span>&nbsp;<span class="op" id="1389762">(</span><span class="ident" id="1389763">n</span>&nbsp;<span class="builtintype" id="1389765">int</span><span class="op" id="1389768">,</span>&nbsp;<span class="ident" id="1389770">err</span>&nbsp;<span class="builtintype" id="1389774">error</span><span class="op" id="1389779">)</span>&nbsp;<span class="op" id="1389781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389784">s</span><span class="op" id="1389785">,</span>&nbsp;<span class="ident" id="1389787">old</span>&nbsp;<span class="op" id="1389791">:=</span>&nbsp;<span class="ident" id="1389794"><a href="/fmt/scan.go.html#1395789">newScanState</a></span><span class="op" id="1389806">(</span><span class="ident" id="1389807"><a href="/fmt/scan.go.html#1389731">r</a></span><span class="op" id="1389808">,</span>&nbsp;<span class="ident" id="1389810">false</span><span class="op" id="1389815">,</span>&nbsp;<span class="ident" id="1389817">true</span><span class="op" id="1389821">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389824"><a href="/fmt/scan.go.html#1389763">n</a></span><span class="op" id="1389825">,</span>&nbsp;<span class="ident" id="1389827"><a href="/fmt/scan.go.html#1389770">err</a></span>&nbsp;<span class="op" id="1389831">=</span>&nbsp;<span class="ident" id="1389833"><a href="/fmt/scan.go.html#1389784">s</a></span><span class="op" id="1389834">.</span><span class="ident" id="1389835">doScan</span><span class="op" id="1389841">(</span><span class="ident" id="1389842"><a href="/fmt/scan.go.html#1389744">a</a></span><span class="op" id="1389843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1389846"><a href="/fmt/scan.go.html#1389784">s</a></span><span class="op" id="1389847">.</span><span class="ident" id="1389848">free</span><span class="op" id="1389852">(</span><span class="ident" id="1389853"><a href="/fmt/scan.go.html#1389787">old</a></span><span class="op" id="1389856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1389859">return</span><br>
<span class="lineno"></span><span class="op" id="1389866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="1389869">//&nbsp;Fscanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="1389938">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1390007">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="1390059">func</span>&nbsp;<span class="ident" id="1390064">Fscanf</span><span class="op" id="1390070">(</span><span class="ident" id="1390071">r</span>&nbsp;<span class="ident" id="1390073"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1390075">.</span><span class="ident" id="1390076">Reader</span><span class="op" id="1390082">,</span>&nbsp;<span class="ident" id="1390084">format</span>&nbsp;<span class="builtintype" id="1390091">string</span><span class="op" id="1390097">,</span>&nbsp;<span class="ident" id="1390099">a</span>&nbsp;<span class="op" id="1390101">...</span><span class="keyword" id="1390104">interface</span><span class="op" id="1390113">{</span><span class="op" id="1390114">}</span><span class="op" id="1390115">)</span>&nbsp;<span class="op" id="1390117">(</span><span class="ident" id="1390118">n</span>&nbsp;<span class="builtintype" id="1390120">int</span><span class="op" id="1390123">,</span>&nbsp;<span class="ident" id="1390125">err</span>&nbsp;<span class="builtintype" id="1390129">error</span><span class="op" id="1390134">)</span>&nbsp;<span class="op" id="1390136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390139">s</span><span class="op" id="1390140">,</span>&nbsp;<span class="ident" id="1390142">old</span>&nbsp;<span class="op" id="1390146">:=</span>&nbsp;<span class="ident" id="1390149"><a href="/fmt/scan.go.html#1395789">newScanState</a></span><span class="op" id="1390161">(</span><span class="ident" id="1390162"><a href="/fmt/scan.go.html#1390071">r</a></span><span class="op" id="1390163">,</span>&nbsp;<span class="ident" id="1390165">false</span><span class="op" id="1390170">,</span>&nbsp;<span class="ident" id="1390172">false</span><span class="op" id="1390177">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390180"><a href="/fmt/scan.go.html#1390118">n</a></span><span class="op" id="1390181">,</span>&nbsp;<span class="ident" id="1390183"><a href="/fmt/scan.go.html#1390125">err</a></span>&nbsp;<span class="op" id="1390187">=</span>&nbsp;<span class="ident" id="1390189"><a href="/fmt/scan.go.html#1390139">s</a></span><span class="op" id="1390190">.</span><span class="ident" id="1390191">doScanf</span><span class="op" id="1390198">(</span><span class="ident" id="1390199"><a href="/fmt/scan.go.html#1390084">format</a></span><span class="op" id="1390205">,</span>&nbsp;<span class="ident" id="1390207"><a href="/fmt/scan.go.html#1390099">a</a></span><span class="op" id="1390208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390211"><a href="/fmt/scan.go.html#1390139">s</a></span><span class="op" id="1390212">.</span><span class="ident" id="1390213">free</span><span class="op" id="1390217">(</span><span class="ident" id="1390218"><a href="/fmt/scan.go.html#1390142">old</a></span><span class="op" id="1390221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1390224">return</span><br>
<span class="lineno"></span><span class="op" id="1390231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="1390234">//&nbsp;scanError&nbsp;represents&nbsp;an&nbsp;error&nbsp;generated&nbsp;by&nbsp;the&nbsp;scanning&nbsp;software.</span><br>
<span class="lineno"></span><span class="comment" id="1390303">//&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;unique&nbsp;signature&nbsp;to&nbsp;identify&nbsp;such&nbsp;errors&nbsp;when&nbsp;recovering.</span><br>
<span class="lineno"></span><span class="keyword" id="1390379">type</span>&nbsp;<span class="ident" id="1390384">scanError</span>&nbsp;<span class="keyword" id="1390394">struct</span>&nbsp;<span class="op" id="1390401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390404">err</span>&nbsp;<span class="builtintype" id="1390408">error</span><br>
<span class="lineno"></span><span class="op" id="1390414">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="1390417">const</span>&nbsp;<span class="ident" id="1390423">eof</span>&nbsp;<span class="op" id="1390427">=</span>&nbsp;<span class="op" id="1390429">-</span><span class="num" id="1390430">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1390433">//&nbsp;ss&nbsp;is&nbsp;the&nbsp;internal&nbsp;implementation&nbsp;of&nbsp;ScanState.</span><br>
<span class="lineno"></span><span class="keyword" id="1390484">type</span>&nbsp;<span class="ident" id="1390489">ss</span>&nbsp;<span class="keyword" id="1390492">struct</span>&nbsp;<span class="op" id="1390499">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390502">rr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390511"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1390513">.</span><span class="ident" id="1390514">RuneReader</span>&nbsp;<span class="comment" id="1390525">//&nbsp;where&nbsp;to&nbsp;read&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390549">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1390558"><a href="/fmt/print.go.html#1356619">buffer</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1390572">//&nbsp;token&nbsp;accumulator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390594">peekRune</span>&nbsp;<span class="builtintype" id="1390603">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1390617">//&nbsp;one-rune&nbsp;lookahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390640">prevRune</span>&nbsp;<span class="builtintype" id="1390649">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1390663">//&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390698">count</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1390707">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1390721">//&nbsp;runes&nbsp;consumed&nbsp;so&nbsp;far.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390748">atEOF</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1390757">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1390771">//&nbsp;already&nbsp;read&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390792"><a href="/fmt/scan.go.html#1390895">ssave</a></span><br>
<span class="lineno"></span><span class="op" id="1390798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1390801">//&nbsp;ssave&nbsp;holds&nbsp;the&nbsp;parts&nbsp;of&nbsp;ss&nbsp;that&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno">170</span><span class="comment" id="1390848">//&nbsp;saved&nbsp;and&nbsp;restored&nbsp;on&nbsp;recursive&nbsp;scans.</span><br>
<span class="lineno"></span><span class="keyword" id="1390890">type</span>&nbsp;<span class="ident" id="1390895">ssave</span>&nbsp;<span class="keyword" id="1390901">struct</span>&nbsp;<span class="op" id="1390908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390911">validSave</span>&nbsp;<span class="builtintype" id="1390921">bool</span>&nbsp;<span class="comment" id="1390926">//&nbsp;is&nbsp;or&nbsp;was&nbsp;a&nbsp;part&nbsp;of&nbsp;an&nbsp;actual&nbsp;ss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1390964">nlIsEnd</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1390974">bool</span>&nbsp;<span class="comment" id="1390979">//&nbsp;whether&nbsp;newline&nbsp;terminates&nbsp;scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391015">nlIsSpace</span>&nbsp;<span class="builtintype" id="1391025">bool</span>&nbsp;<span class="comment" id="1391030">//&nbsp;whether&nbsp;newline&nbsp;counts&nbsp;as&nbsp;white&nbsp;space</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391072">argLimit</span>&nbsp;&nbsp;<span class="builtintype" id="1391082">int</span>&nbsp;&nbsp;<span class="comment" id="1391087">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count&nbsp;for&nbsp;this&nbsp;arg;&nbsp;argLimit&nbsp;&lt;=&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391145">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1391155">int</span>&nbsp;&nbsp;<span class="comment" id="1391160">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391187">maxWid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1391197">int</span>&nbsp;&nbsp;<span class="comment" id="1391202">//&nbsp;width&nbsp;of&nbsp;this&nbsp;arg.</span><br>
<span class="lineno"></span><span class="op" id="1391224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="1391227">//&nbsp;The&nbsp;Read&nbsp;method&nbsp;is&nbsp;only&nbsp;in&nbsp;ScanState&nbsp;so&nbsp;that&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="1391285">//&nbsp;satisfies&nbsp;io.Reader.&nbsp;It&nbsp;will&nbsp;never&nbsp;be&nbsp;called&nbsp;when&nbsp;used&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="1391346">//&nbsp;intended,&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;make&nbsp;it&nbsp;actually&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="1391405">func</span>&nbsp;<span class="op" id="1391410">(</span><span class="ident" id="1391411">s</span>&nbsp;<span class="op" id="1391413">*</span><span class="ident" id="1391414"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1391416">)</span>&nbsp;<span class="ident" id="1391418">Read</span><span class="op" id="1391422">(</span><span class="ident" id="1391423">buf</span>&nbsp;<span class="op" id="1391427">[</span><span class="op" id="1391428">]</span><span class="builtintype" id="1391429">byte</span><span class="op" id="1391433">)</span>&nbsp;<span class="op" id="1391435">(</span><span class="ident" id="1391436">n</span>&nbsp;<span class="builtintype" id="1391438">int</span><span class="op" id="1391441">,</span>&nbsp;<span class="ident" id="1391443">err</span>&nbsp;<span class="builtintype" id="1391447">error</span><span class="op" id="1391452">)</span>&nbsp;<span class="op" id="1391454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391457">return</span>&nbsp;<span class="num" id="1391464">0</span><span class="op" id="1391465">,</span>&nbsp;<span class="ident" id="1391467"><a href="/fmt/scan.go.html#1384710">errors</a></span><span class="op" id="1391473">.</span><span class="ident" id="1391474">New</span><span class="op" id="1391477">(</span><span class="string" id="1391478">&#34;ScanState&#39;s&nbsp;Read&nbsp;should&nbsp;not&nbsp;be&nbsp;called.&nbsp;Use&nbsp;ReadRune&#34;</span><span class="op" id="1391531">)</span><br>
<span class="lineno">185</span><span class="op" id="1391533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1391536">func</span>&nbsp;<span class="op" id="1391541">(</span><span class="ident" id="1391542">s</span>&nbsp;<span class="op" id="1391544">*</span><span class="ident" id="1391545"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1391547">)</span>&nbsp;<span class="ident" id="1391549">ReadRune</span><span class="op" id="1391557">(</span><span class="op" id="1391558">)</span>&nbsp;<span class="op" id="1391560">(</span><span class="ident" id="1391561">r</span>&nbsp;<span class="builtintype" id="1391563">rune</span><span class="op" id="1391567">,</span>&nbsp;<span class="ident" id="1391569">size</span>&nbsp;<span class="builtintype" id="1391574">int</span><span class="op" id="1391577">,</span>&nbsp;<span class="ident" id="1391579">err</span>&nbsp;<span class="builtintype" id="1391583">error</span><span class="op" id="1391588">)</span>&nbsp;<span class="op" id="1391590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391593">if</span>&nbsp;<span class="ident" id="1391596"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391597">.</span><span class="ident" id="1391598">peekRune</span>&nbsp;<span class="op" id="1391607">&gt;=</span>&nbsp;<span class="num" id="1391610">0</span>&nbsp;<span class="op" id="1391612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391616"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391617">.</span><span class="ident" id="1391618">count</span><span class="op" id="1391623">++</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391628"><a href="/fmt/scan.go.html#1391561">r</a></span>&nbsp;<span class="op" id="1391630">=</span>&nbsp;<span class="ident" id="1391632"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391633">.</span><span class="ident" id="1391634">peekRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391645"><a href="/fmt/scan.go.html#1391569">size</a></span>&nbsp;<span class="op" id="1391650">=</span>&nbsp;<span class="ident" id="1391652"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1391656">.</span><span class="ident" id="1391657">RuneLen</span><span class="op" id="1391664">(</span><span class="ident" id="1391665"><a href="/fmt/scan.go.html#1391561">r</a></span><span class="op" id="1391666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391670"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391671">.</span><span class="ident" id="1391672">prevRune</span>&nbsp;<span class="op" id="1391681">=</span>&nbsp;<span class="ident" id="1391683"><a href="/fmt/scan.go.html#1391561">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391687"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391688">.</span><span class="ident" id="1391689">peekRune</span>&nbsp;<span class="op" id="1391698">=</span>&nbsp;<span class="op" id="1391700">-</span><span class="num" id="1391701">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391705">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1391713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391716">if</span>&nbsp;<span class="ident" id="1391719"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391720">.</span><span class="ident" id="1391721">atEOF</span>&nbsp;<span class="op" id="1391727">||</span>&nbsp;<span class="ident" id="1391730"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391731">.</span><span class="ident" id="1391732">nlIsEnd</span>&nbsp;<span class="op" id="1391740">&amp;&amp;</span>&nbsp;<span class="ident" id="1391743"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391744">.</span><span class="ident" id="1391745">prevRune</span>&nbsp;<span class="op" id="1391754">==</span>&nbsp;<span class="string" id="1391757">&#39;\n&#39;</span>&nbsp;<span class="op" id="1391762">||</span>&nbsp;<span class="ident" id="1391765"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391766">.</span><span class="ident" id="1391767">count</span>&nbsp;<span class="op" id="1391773">&gt;=</span>&nbsp;<span class="ident" id="1391776"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391777">.</span><span class="ident" id="1391778">argLimit</span>&nbsp;<span class="op" id="1391787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391791"><a href="/fmt/scan.go.html#1391579">err</a></span>&nbsp;<span class="op" id="1391795">=</span>&nbsp;<span class="ident" id="1391797"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1391799">.</span><span class="ident" id="1391800">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391806">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1391814">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391818"><a href="/fmt/scan.go.html#1391561">r</a></span><span class="op" id="1391819">,</span>&nbsp;<span class="ident" id="1391821"><a href="/fmt/scan.go.html#1391569">size</a></span><span class="op" id="1391825">,</span>&nbsp;<span class="ident" id="1391827"><a href="/fmt/scan.go.html#1391579">err</a></span>&nbsp;<span class="op" id="1391831">=</span>&nbsp;<span class="ident" id="1391833"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391834">.</span><span class="ident" id="1391835">rr</span><span class="op" id="1391837">.</span><span class="ident" id="1391838">ReadRune</span><span class="op" id="1391846">(</span><span class="op" id="1391847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391850">if</span>&nbsp;<span class="ident" id="1391853"><a href="/fmt/scan.go.html#1391579">err</a></span>&nbsp;<span class="op" id="1391857">==</span>&nbsp;<span class="ident" id="1391860">nil</span>&nbsp;<span class="op" id="1391864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391868"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391869">.</span><span class="ident" id="1391870">count</span><span class="op" id="1391875">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391880"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391881">.</span><span class="ident" id="1391882">prevRune</span>&nbsp;<span class="op" id="1391891">=</span>&nbsp;<span class="ident" id="1391893"><a href="/fmt/scan.go.html#1391561">r</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1391896">}</span>&nbsp;<span class="keyword" id="1391898">else</span>&nbsp;<span class="keyword" id="1391903">if</span>&nbsp;<span class="ident" id="1391906"><a href="/fmt/scan.go.html#1391579">err</a></span>&nbsp;<span class="op" id="1391910">==</span>&nbsp;<span class="ident" id="1391913"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1391915">.</span><span class="ident" id="1391916">EOF</span>&nbsp;<span class="op" id="1391920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1391924"><a href="/fmt/scan.go.html#1391542">s</a></span><span class="op" id="1391925">.</span><span class="ident" id="1391926">atEOF</span>&nbsp;<span class="op" id="1391932">=</span>&nbsp;<span class="ident" id="1391934">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1391940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391943">return</span><br>
<span class="lineno"></span><span class="op" id="1391950">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1391953">func</span>&nbsp;<span class="op" id="1391958">(</span><span class="ident" id="1391959">s</span>&nbsp;<span class="op" id="1391961">*</span><span class="ident" id="1391962"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1391964">)</span>&nbsp;<span class="ident" id="1391966">Width</span><span class="op" id="1391971">(</span><span class="op" id="1391972">)</span>&nbsp;<span class="op" id="1391974">(</span><span class="ident" id="1391975">wid</span>&nbsp;<span class="builtintype" id="1391979">int</span><span class="op" id="1391982">,</span>&nbsp;<span class="ident" id="1391984">ok</span>&nbsp;<span class="builtintype" id="1391987">bool</span><span class="op" id="1391991">)</span>&nbsp;<span class="op" id="1391993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1391996">if</span>&nbsp;<span class="ident" id="1391999"><a href="/fmt/scan.go.html#1391959">s</a></span><span class="op" id="1392000">.</span><span class="ident" id="1392001">maxWid</span>&nbsp;<span class="op" id="1392008">==</span>&nbsp;<span class="ident" id="1392011"><a href="/fmt/scan.go.html#1408532">hugeWid</a></span>&nbsp;<span class="op" id="1392019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392023">return</span>&nbsp;<span class="num" id="1392030">0</span><span class="op" id="1392031">,</span>&nbsp;<span class="ident" id="1392033">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392040">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392043">return</span>&nbsp;<span class="ident" id="1392050"><a href="/fmt/scan.go.html#1391959">s</a></span><span class="op" id="1392051">.</span><span class="ident" id="1392052">maxWid</span><span class="op" id="1392058">,</span>&nbsp;<span class="ident" id="1392060">true</span><br>
<span class="lineno"></span><span class="op" id="1392065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1392068">//&nbsp;The&nbsp;public&nbsp;method&nbsp;returns&nbsp;an&nbsp;error;&nbsp;this&nbsp;private&nbsp;one&nbsp;panics.</span><br>
<span class="lineno"></span><span class="comment" id="1392132">//&nbsp;If&nbsp;getRune&nbsp;reaches&nbsp;EOF,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;EOF&nbsp;(-1).</span><br>
<span class="lineno">220</span><span class="keyword" id="1392189">func</span>&nbsp;<span class="op" id="1392194">(</span><span class="ident" id="1392195">s</span>&nbsp;<span class="op" id="1392197">*</span><span class="ident" id="1392198"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392200">)</span>&nbsp;<span class="ident" id="1392202">getRune</span><span class="op" id="1392209">(</span><span class="op" id="1392210">)</span>&nbsp;<span class="op" id="1392212">(</span><span class="ident" id="1392213">r</span>&nbsp;<span class="builtintype" id="1392215">rune</span><span class="op" id="1392219">)</span>&nbsp;<span class="op" id="1392221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392224"><a href="/fmt/scan.go.html#1392213">r</a></span><span class="op" id="1392225">,</span>&nbsp;<span class="ident" id="1392227">_</span><span class="op" id="1392228">,</span>&nbsp;<span class="ident" id="1392230">err</span>&nbsp;<span class="op" id="1392234">:=</span>&nbsp;<span class="ident" id="1392237"><a href="/fmt/scan.go.html#1392195">s</a></span><span class="op" id="1392238">.</span><span class="ident" id="1392239">ReadRune</span><span class="op" id="1392247">(</span><span class="op" id="1392248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392251">if</span>&nbsp;<span class="ident" id="1392254"><a href="/fmt/scan.go.html#1392230">err</a></span>&nbsp;<span class="op" id="1392258">!=</span>&nbsp;<span class="ident" id="1392261">nil</span>&nbsp;<span class="op" id="1392265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392269">if</span>&nbsp;<span class="ident" id="1392272"><a href="/fmt/scan.go.html#1392230">err</a></span>&nbsp;<span class="op" id="1392276">==</span>&nbsp;<span class="ident" id="1392279"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1392281">.</span><span class="ident" id="1392282">EOF</span>&nbsp;<span class="op" id="1392286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392291">return</span>&nbsp;<span class="ident" id="1392298"><a href="/fmt/scan.go.html#1390423">eof</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392308"><a href="/fmt/scan.go.html#1392195">s</a></span><span class="op" id="1392309">.</span><span class="builtintype" id="1392310">error</span><span class="op" id="1392315">(</span><span class="ident" id="1392316"><a href="/fmt/scan.go.html#1392230">err</a></span><span class="op" id="1392319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392325">return</span><br>
<span class="lineno"></span><span class="op" id="1392332">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="1392335">//&nbsp;mustReadRune&nbsp;turns&nbsp;io.EOF&nbsp;into&nbsp;a&nbsp;panic(io.ErrUnexpectedEOF).</span><br>
<span class="lineno"></span><span class="comment" id="1392399">//&nbsp;It&nbsp;is&nbsp;called&nbsp;in&nbsp;cases&nbsp;such&nbsp;as&nbsp;string&nbsp;scanning&nbsp;where&nbsp;an&nbsp;EOF&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1392466">//&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="1392483">func</span>&nbsp;<span class="op" id="1392488">(</span><span class="ident" id="1392489">s</span>&nbsp;<span class="op" id="1392491">*</span><span class="ident" id="1392492"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392494">)</span>&nbsp;<span class="ident" id="1392496">mustReadRune</span><span class="op" id="1392508">(</span><span class="op" id="1392509">)</span>&nbsp;<span class="op" id="1392511">(</span><span class="ident" id="1392512">r</span>&nbsp;<span class="builtintype" id="1392514">rune</span><span class="op" id="1392518">)</span>&nbsp;<span class="op" id="1392520">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392523"><a href="/fmt/scan.go.html#1392512">r</a></span>&nbsp;<span class="op" id="1392525">=</span>&nbsp;<span class="ident" id="1392527"><a href="/fmt/scan.go.html#1392489">s</a></span><span class="op" id="1392528">.</span><span class="ident" id="1392529">getRune</span><span class="op" id="1392536">(</span><span class="op" id="1392537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392540">if</span>&nbsp;<span class="ident" id="1392543"><a href="/fmt/scan.go.html#1392512">r</a></span>&nbsp;<span class="op" id="1392545">==</span>&nbsp;<span class="ident" id="1392548"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1392552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392556"><a href="/fmt/scan.go.html#1392489">s</a></span><span class="op" id="1392557">.</span><span class="builtintype" id="1392558">error</span><span class="op" id="1392563">(</span><span class="ident" id="1392564"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1392566">.</span><span class="ident" id="1392567">ErrUnexpectedEOF</span><span class="op" id="1392583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392589">return</span><br>
<span class="lineno">240</span><span class="op" id="1392596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1392599">func</span>&nbsp;<span class="op" id="1392604">(</span><span class="ident" id="1392605">s</span>&nbsp;<span class="op" id="1392607">*</span><span class="ident" id="1392608"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392610">)</span>&nbsp;<span class="ident" id="1392612">UnreadRune</span><span class="op" id="1392622">(</span><span class="op" id="1392623">)</span>&nbsp;<span class="builtintype" id="1392625">error</span>&nbsp;<span class="op" id="1392631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392634">if</span>&nbsp;<span class="ident" id="1392637">u</span><span class="op" id="1392638">,</span>&nbsp;<span class="ident" id="1392640">ok</span>&nbsp;<span class="op" id="1392643">:=</span>&nbsp;<span class="ident" id="1392646"><a href="/fmt/scan.go.html#1392605">s</a></span><span class="op" id="1392647">.</span><span class="ident" id="1392648">rr</span><span class="op" id="1392650">.</span><span class="op" id="1392651">(</span><span class="ident" id="1392652"><a href="/fmt/scan.go.html#1385034">runeUnreader</a></span><span class="op" id="1392664">)</span><span class="op" id="1392665">;</span>&nbsp;<span class="ident" id="1392667"><a href="/fmt/scan.go.html#1392640">ok</a></span>&nbsp;<span class="op" id="1392670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392674"><a href="/fmt/scan.go.html#1392637">u</a></span><span class="op" id="1392675">.</span><span class="ident" id="1392676">UnreadRune</span><span class="op" id="1392686">(</span><span class="op" id="1392687">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392690">}</span>&nbsp;<span class="keyword" id="1392692">else</span>&nbsp;<span class="op" id="1392697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392701"><a href="/fmt/scan.go.html#1392605">s</a></span><span class="op" id="1392702">.</span><span class="ident" id="1392703">peekRune</span>&nbsp;<span class="op" id="1392712">=</span>&nbsp;<span class="ident" id="1392714"><a href="/fmt/scan.go.html#1392605">s</a></span><span class="op" id="1392715">.</span><span class="ident" id="1392716">prevRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1392726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392729"><a href="/fmt/scan.go.html#1392605">s</a></span><span class="op" id="1392730">.</span><span class="ident" id="1392731">prevRune</span>&nbsp;<span class="op" id="1392740">=</span>&nbsp;<span class="op" id="1392742">-</span><span class="num" id="1392743">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1392746"><a href="/fmt/scan.go.html#1392605">s</a></span><span class="op" id="1392747">.</span><span class="ident" id="1392748">count</span><span class="op" id="1392753">--</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392757">return</span>&nbsp;<span class="ident" id="1392764">nil</span><br>
<span class="lineno"></span><span class="op" id="1392768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1392771">func</span>&nbsp;<span class="op" id="1392776">(</span><span class="ident" id="1392777">s</span>&nbsp;<span class="op" id="1392779">*</span><span class="ident" id="1392780"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392782">)</span>&nbsp;<span class="builtintype" id="1392784">error</span><span class="op" id="1392789">(</span><span class="ident" id="1392790">err</span>&nbsp;<span class="builtintype" id="1392794">error</span><span class="op" id="1392799">)</span>&nbsp;<span class="op" id="1392801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1392804">panic</span><span class="op" id="1392809">(</span><span class="ident" id="1392810"><a href="/fmt/scan.go.html#1390384">scanError</a></span><span class="op" id="1392819">{</span><span class="ident" id="1392820"><a href="/fmt/scan.go.html#1392790">err</a></span><span class="op" id="1392823">}</span><span class="op" id="1392824">)</span><br>
<span class="lineno">255</span><span class="op" id="1392826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1392829">func</span>&nbsp;<span class="op" id="1392834">(</span><span class="ident" id="1392835">s</span>&nbsp;<span class="op" id="1392837">*</span><span class="ident" id="1392838"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392840">)</span>&nbsp;<span class="ident" id="1392842">errorString</span><span class="op" id="1392853">(</span><span class="ident" id="1392854">err</span>&nbsp;<span class="builtintype" id="1392858">string</span><span class="op" id="1392864">)</span>&nbsp;<span class="op" id="1392866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1392869">panic</span><span class="op" id="1392874">(</span><span class="ident" id="1392875"><a href="/fmt/scan.go.html#1390384">scanError</a></span><span class="op" id="1392884">{</span><span class="ident" id="1392885"><a href="/fmt/scan.go.html#1384710">errors</a></span><span class="op" id="1392891">.</span><span class="ident" id="1392892">New</span><span class="op" id="1392895">(</span><span class="ident" id="1392896"><a href="/fmt/scan.go.html#1392854">err</a></span><span class="op" id="1392899">)</span><span class="op" id="1392900">}</span><span class="op" id="1392901">)</span><br>
<span class="lineno"></span><span class="op" id="1392903">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="1392906">func</span>&nbsp;<span class="op" id="1392911">(</span><span class="ident" id="1392912">s</span>&nbsp;<span class="op" id="1392914">*</span><span class="ident" id="1392915"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1392917">)</span>&nbsp;<span class="ident" id="1392919">Token</span><span class="op" id="1392924">(</span><span class="ident" id="1392925">skipSpace</span>&nbsp;<span class="builtintype" id="1392935">bool</span><span class="op" id="1392939">,</span>&nbsp;<span class="ident" id="1392941">f</span>&nbsp;<span class="keyword" id="1392943">func</span><span class="op" id="1392947">(</span><span class="builtintype" id="1392948">rune</span><span class="op" id="1392952">)</span>&nbsp;<span class="builtintype" id="1392954">bool</span><span class="op" id="1392958">)</span>&nbsp;<span class="op" id="1392960">(</span><span class="ident" id="1392961">tok</span>&nbsp;<span class="op" id="1392965">[</span><span class="op" id="1392966">]</span><span class="builtintype" id="1392967">byte</span><span class="op" id="1392971">,</span>&nbsp;<span class="ident" id="1392973">err</span>&nbsp;<span class="builtintype" id="1392977">error</span><span class="op" id="1392982">)</span>&nbsp;<span class="op" id="1392984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1392987">defer</span>&nbsp;<span class="keyword" id="1392993">func</span><span class="op" id="1392997">(</span><span class="op" id="1392998">)</span>&nbsp;<span class="op" id="1393000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393004">if</span>&nbsp;<span class="ident" id="1393007">e</span>&nbsp;<span class="op" id="1393009">:=</span>&nbsp;<span class="builtinfunc" id="1393012">recover</span><span class="op" id="1393019">(</span><span class="op" id="1393020">)</span><span class="op" id="1393021">;</span>&nbsp;<span class="ident" id="1393023"><a href="/fmt/scan.go.html#1393007">e</a></span>&nbsp;<span class="op" id="1393025">!=</span>&nbsp;<span class="ident" id="1393028">nil</span>&nbsp;<span class="op" id="1393032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393037">if</span>&nbsp;<span class="ident" id="1393040">se</span><span class="op" id="1393042">,</span>&nbsp;<span class="ident" id="1393044">ok</span>&nbsp;<span class="op" id="1393047">:=</span>&nbsp;<span class="ident" id="1393050"><a href="/fmt/scan.go.html#1393007">e</a></span><span class="op" id="1393051">.</span><span class="op" id="1393052">(</span><span class="ident" id="1393053"><a href="/fmt/scan.go.html#1390384">scanError</a></span><span class="op" id="1393062">)</span><span class="op" id="1393063">;</span>&nbsp;<span class="ident" id="1393065"><a href="/fmt/scan.go.html#1393044">ok</a></span>&nbsp;<span class="op" id="1393068">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1393074"><a href="/fmt/scan.go.html#1392973">err</a></span>&nbsp;<span class="op" id="1393078">=</span>&nbsp;<span class="ident" id="1393080"><a href="/fmt/scan.go.html#1393040">se</a></span><span class="op" id="1393082">.</span><span class="ident" id="1393083">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393090">}</span>&nbsp;<span class="keyword" id="1393092">else</span>&nbsp;<span class="op" id="1393097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1393103">panic</span><span class="op" id="1393108">(</span><span class="ident" id="1393109"><a href="/fmt/scan.go.html#1393007">e</a></span><span class="op" id="1393110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393119">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393122">}</span><span class="op" id="1393123">(</span><span class="op" id="1393124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393127">if</span>&nbsp;<span class="ident" id="1393130"><a href="/fmt/scan.go.html#1392941">f</a></span>&nbsp;<span class="op" id="1393132">==</span>&nbsp;<span class="ident" id="1393135">nil</span>&nbsp;<span class="op" id="1393139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1393143"><a href="/fmt/scan.go.html#1392941">f</a></span>&nbsp;<span class="op" id="1393145">=</span>&nbsp;<span class="ident" id="1393147"><a href="/fmt/scan.go.html#1393804">notSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1393160"><a href="/fmt/scan.go.html#1392912">s</a></span><span class="op" id="1393161">.</span><span class="ident" id="1393162">buf</span>&nbsp;<span class="op" id="1393166">=</span>&nbsp;<span class="ident" id="1393168"><a href="/fmt/scan.go.html#1392912">s</a></span><span class="op" id="1393169">.</span><span class="ident" id="1393170">buf</span><span class="op" id="1393173">[</span><span class="op" id="1393174">:</span><span class="num" id="1393175">0</span><span class="op" id="1393176">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1393179"><a href="/fmt/scan.go.html#1392961">tok</a></span>&nbsp;<span class="op" id="1393183">=</span>&nbsp;<span class="ident" id="1393185"><a href="/fmt/scan.go.html#1392912">s</a></span><span class="op" id="1393186">.</span><span class="ident" id="1393187">token</span><span class="op" id="1393192">(</span><span class="ident" id="1393193"><a href="/fmt/scan.go.html#1392925">skipSpace</a></span><span class="op" id="1393202">,</span>&nbsp;<span class="ident" id="1393204"><a href="/fmt/scan.go.html#1392941">f</a></span><span class="op" id="1393205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393208">return</span><br>
<span class="lineno"></span><span class="op" id="1393215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1393218">//&nbsp;space&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;unicode.White_Space&nbsp;ranges,</span><br>
<span class="lineno">280</span><span class="comment" id="1393272">//&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="1393314">var</span>&nbsp;<span class="ident" id="1393318">space</span>&nbsp;<span class="op" id="1393324">=</span>&nbsp;<span class="op" id="1393326">[</span><span class="op" id="1393327">]</span><span class="op" id="1393328">[</span><span class="num" id="1393329">2</span><span class="op" id="1393330">]</span><span class="builtintype" id="1393331">uint16</span><span class="op" id="1393337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393340">{</span><span class="num" id="1393341">0x0009</span><span class="op" id="1393347">,</span>&nbsp;<span class="num" id="1393349">0x000d</span><span class="op" id="1393355">}</span><span class="op" id="1393356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393359">{</span><span class="num" id="1393360">0x0020</span><span class="op" id="1393366">,</span>&nbsp;<span class="num" id="1393368">0x0020</span><span class="op" id="1393374">}</span><span class="op" id="1393375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393378">{</span><span class="num" id="1393379">0x0085</span><span class="op" id="1393385">,</span>&nbsp;<span class="num" id="1393387">0x0085</span><span class="op" id="1393393">}</span><span class="op" id="1393394">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393397">{</span><span class="num" id="1393398">0x00a0</span><span class="op" id="1393404">,</span>&nbsp;<span class="num" id="1393406">0x00a0</span><span class="op" id="1393412">}</span><span class="op" id="1393413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393416">{</span><span class="num" id="1393417">0x1680</span><span class="op" id="1393423">,</span>&nbsp;<span class="num" id="1393425">0x1680</span><span class="op" id="1393431">}</span><span class="op" id="1393432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393435">{</span><span class="num" id="1393436">0x2000</span><span class="op" id="1393442">,</span>&nbsp;<span class="num" id="1393444">0x200a</span><span class="op" id="1393450">}</span><span class="op" id="1393451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393454">{</span><span class="num" id="1393455">0x2028</span><span class="op" id="1393461">,</span>&nbsp;<span class="num" id="1393463">0x2029</span><span class="op" id="1393469">}</span><span class="op" id="1393470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393473">{</span><span class="num" id="1393474">0x202f</span><span class="op" id="1393480">,</span>&nbsp;<span class="num" id="1393482">0x202f</span><span class="op" id="1393488">}</span><span class="op" id="1393489">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393492">{</span><span class="num" id="1393493">0x205f</span><span class="op" id="1393499">,</span>&nbsp;<span class="num" id="1393501">0x205f</span><span class="op" id="1393507">}</span><span class="op" id="1393508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393511">{</span><span class="num" id="1393512">0x3000</span><span class="op" id="1393518">,</span>&nbsp;<span class="num" id="1393520">0x3000</span><span class="op" id="1393526">}</span><span class="op" id="1393527">,</span><br>
<span class="lineno"></span><span class="op" id="1393529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1393532">func</span>&nbsp;<span class="ident" id="1393537">isSpace</span><span class="op" id="1393544">(</span><span class="ident" id="1393545">r</span>&nbsp;<span class="builtintype" id="1393547">rune</span><span class="op" id="1393551">)</span>&nbsp;<span class="builtintype" id="1393553">bool</span>&nbsp;<span class="op" id="1393558">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393561">if</span>&nbsp;<span class="ident" id="1393564"><a href="/fmt/scan.go.html#1393545">r</a></span>&nbsp;<span class="op" id="1393566">&gt;=</span>&nbsp;<span class="num" id="1393569">1</span><span class="op" id="1393570">&lt;&lt;</span><span class="num" id="1393572">16</span>&nbsp;<span class="op" id="1393575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393579">return</span>&nbsp;<span class="ident" id="1393586">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1393596">rx</span>&nbsp;<span class="op" id="1393599">:=</span>&nbsp;<span class="builtintype" id="1393602">uint16</span><span class="op" id="1393608">(</span><span class="ident" id="1393609"><a href="/fmt/scan.go.html#1393545">r</a></span><span class="op" id="1393610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393613">for</span>&nbsp;<span class="ident" id="1393617">_</span><span class="op" id="1393618">,</span>&nbsp;<span class="ident" id="1393620">rng</span>&nbsp;<span class="op" id="1393624">:=</span>&nbsp;<span class="keyword" id="1393627">range</span>&nbsp;<span class="ident" id="1393633"><a href="/fmt/scan.go.html#1393318">space</a></span>&nbsp;<span class="op" id="1393639">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393643">if</span>&nbsp;<span class="ident" id="1393646"><a href="/fmt/scan.go.html#1393596">rx</a></span>&nbsp;<span class="op" id="1393649">&lt;</span>&nbsp;<span class="ident" id="1393651"><a href="/fmt/scan.go.html#1393620">rng</a></span><span class="op" id="1393654">[</span><span class="num" id="1393655">0</span><span class="op" id="1393656">]</span>&nbsp;<span class="op" id="1393658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393663">return</span>&nbsp;<span class="ident" id="1393670">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393682">if</span>&nbsp;<span class="ident" id="1393685"><a href="/fmt/scan.go.html#1393596">rx</a></span>&nbsp;<span class="op" id="1393688">&lt;=</span>&nbsp;<span class="ident" id="1393691"><a href="/fmt/scan.go.html#1393620">rng</a></span><span class="op" id="1393694">[</span><span class="num" id="1393695">1</span><span class="op" id="1393696">]</span>&nbsp;<span class="op" id="1393698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393703">return</span>&nbsp;<span class="ident" id="1393710">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1393720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393723">return</span>&nbsp;<span class="ident" id="1393730">false</span><br>
<span class="lineno"></span><span class="op" id="1393736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="1393739">//&nbsp;notSpace&nbsp;is&nbsp;the&nbsp;default&nbsp;scanning&nbsp;function&nbsp;used&nbsp;in&nbsp;Token.</span><br>
<span class="lineno"></span><span class="keyword" id="1393799">func</span>&nbsp;<span class="ident" id="1393804">notSpace</span><span class="op" id="1393812">(</span><span class="ident" id="1393813">r</span>&nbsp;<span class="builtintype" id="1393815">rune</span><span class="op" id="1393819">)</span>&nbsp;<span class="builtintype" id="1393821">bool</span>&nbsp;<span class="op" id="1393826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1393829">return</span>&nbsp;<span class="op" id="1393836">!</span><span class="ident" id="1393837"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1393844">(</span><span class="ident" id="1393845"><a href="/fmt/scan.go.html#1393813">r</a></span><span class="op" id="1393846">)</span><br>
<span class="lineno"></span><span class="op" id="1393848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="comment" id="1393851">//&nbsp;SkipSpace&nbsp;provides&nbsp;Scan&nbsp;methods&nbsp;the&nbsp;ability&nbsp;to&nbsp;skip&nbsp;space&nbsp;and&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="1393924">//&nbsp;characters&nbsp;in&nbsp;keeping&nbsp;with&nbsp;the&nbsp;current&nbsp;scanning&nbsp;mode&nbsp;set&nbsp;by&nbsp;format&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="1394002">//&nbsp;and&nbsp;Scan/Scanln.</span><br>
<span class="lineno"></span><span class="keyword" id="1394022">func</span>&nbsp;<span class="op" id="1394027">(</span><span class="ident" id="1394028">s</span>&nbsp;<span class="op" id="1394030">*</span><span class="ident" id="1394031"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1394033">)</span>&nbsp;<span class="ident" id="1394035">SkipSpace</span><span class="op" id="1394044">(</span><span class="op" id="1394045">)</span>&nbsp;<span class="op" id="1394047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394050"><a href="/fmt/scan.go.html#1394028">s</a></span><span class="op" id="1394051">.</span><span class="ident" id="1394052">skipSpace</span><span class="op" id="1394061">(</span><span class="ident" id="1394062">false</span><span class="op" id="1394067">)</span><br>
<span class="lineno">320</span><span class="op" id="1394069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1394072">//&nbsp;readRune&nbsp;is&nbsp;a&nbsp;structure&nbsp;to&nbsp;enable&nbsp;reading&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;points</span><br>
<span class="lineno"></span><span class="comment" id="1394143">//&nbsp;from&nbsp;an&nbsp;io.Reader.&nbsp;&nbsp;It&nbsp;is&nbsp;used&nbsp;if&nbsp;the&nbsp;Reader&nbsp;given&nbsp;to&nbsp;the&nbsp;scanner&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="1394217">//&nbsp;not&nbsp;already&nbsp;implement&nbsp;io.RuneReader.</span><br>
<span class="lineno">325</span><span class="keyword" id="1394257">type</span>&nbsp;<span class="ident" id="1394262">readRune</span>&nbsp;<span class="keyword" id="1394271">struct</span>&nbsp;<span class="op" id="1394278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394281">reader</span>&nbsp;&nbsp;<span class="ident" id="1394289"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1394291">.</span><span class="ident" id="1394292">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394300">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1394308">[</span><span class="ident" id="1394309"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1394313">.</span><span class="ident" id="1394314">UTFMax</span><span class="op" id="1394320">]</span><span class="builtintype" id="1394321">byte</span>&nbsp;<span class="comment" id="1394326">//&nbsp;used&nbsp;only&nbsp;inside&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394356">pending</span>&nbsp;<span class="builtintype" id="1394364">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1394382">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;pendBuf;&nbsp;only&nbsp;&gt;0&nbsp;for&nbsp;bad&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394436">pendBuf</span>&nbsp;<span class="op" id="1394444">[</span><span class="ident" id="1394445"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1394449">.</span><span class="ident" id="1394450">UTFMax</span><span class="op" id="1394456">]</span><span class="builtintype" id="1394457">byte</span>&nbsp;<span class="comment" id="1394462">//&nbsp;bytes&nbsp;left&nbsp;over</span><br>
<span class="lineno">330</span><span class="op" id="1394481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1394484">//&nbsp;readByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;which&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="1394547">//&nbsp;left&nbsp;over&nbsp;from&nbsp;a&nbsp;previous&nbsp;read&nbsp;if&nbsp;the&nbsp;UTF-8&nbsp;was&nbsp;ill-formed.</span><br>
<span class="lineno"></span><span class="keyword" id="1394610">func</span>&nbsp;<span class="op" id="1394615">(</span><span class="ident" id="1394616">r</span>&nbsp;<span class="op" id="1394618">*</span><span class="ident" id="1394619"><a href="/fmt/scan.go.html#1394262">readRune</a></span><span class="op" id="1394627">)</span>&nbsp;<span class="ident" id="1394629">readByte</span><span class="op" id="1394637">(</span><span class="op" id="1394638">)</span>&nbsp;<span class="op" id="1394640">(</span><span class="ident" id="1394641">b</span>&nbsp;<span class="builtintype" id="1394643">byte</span><span class="op" id="1394647">,</span>&nbsp;<span class="ident" id="1394649">err</span>&nbsp;<span class="builtintype" id="1394653">error</span><span class="op" id="1394658">)</span>&nbsp;<span class="op" id="1394660">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1394663">if</span>&nbsp;<span class="ident" id="1394666"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394667">.</span><span class="ident" id="1394668">pending</span>&nbsp;<span class="op" id="1394676">&gt;</span>&nbsp;<span class="num" id="1394678">0</span>&nbsp;<span class="op" id="1394680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394684"><a href="/fmt/scan.go.html#1394641">b</a></span>&nbsp;<span class="op" id="1394686">=</span>&nbsp;<span class="ident" id="1394688"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394689">.</span><span class="ident" id="1394690">pendBuf</span><span class="op" id="1394697">[</span><span class="num" id="1394698">0</span><span class="op" id="1394699">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1394703">copy</span><span class="op" id="1394707">(</span><span class="ident" id="1394708"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394709">.</span><span class="ident" id="1394710">pendBuf</span><span class="op" id="1394717">[</span><span class="num" id="1394718">0</span><span class="op" id="1394719">:</span><span class="op" id="1394720">]</span><span class="op" id="1394721">,</span>&nbsp;<span class="ident" id="1394723"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394724">.</span><span class="ident" id="1394725">pendBuf</span><span class="op" id="1394732">[</span><span class="num" id="1394733">1</span><span class="op" id="1394734">:</span><span class="op" id="1394735">]</span><span class="op" id="1394736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394740"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394741">.</span><span class="ident" id="1394742">pending</span><span class="op" id="1394749">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1394754">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1394762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394765">n</span><span class="op" id="1394766">,</span>&nbsp;<span class="ident" id="1394768"><a href="/fmt/scan.go.html#1394649">err</a></span>&nbsp;<span class="op" id="1394772">:=</span>&nbsp;<span class="ident" id="1394775"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1394777">.</span><span class="ident" id="1394778">ReadFull</span><span class="op" id="1394786">(</span><span class="ident" id="1394787"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394788">.</span><span class="ident" id="1394789">reader</span><span class="op" id="1394795">,</span>&nbsp;<span class="ident" id="1394797"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394798">.</span><span class="ident" id="1394799">pendBuf</span><span class="op" id="1394806">[</span><span class="num" id="1394807">0</span><span class="op" id="1394808">:</span><span class="num" id="1394809">1</span><span class="op" id="1394810">]</span><span class="op" id="1394811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1394814">if</span>&nbsp;<span class="ident" id="1394817"><a href="/fmt/scan.go.html#1394765">n</a></span>&nbsp;<span class="op" id="1394819">!=</span>&nbsp;<span class="num" id="1394822">1</span>&nbsp;<span class="op" id="1394824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1394828">return</span>&nbsp;<span class="num" id="1394835">0</span><span class="op" id="1394836">,</span>&nbsp;<span class="ident" id="1394838"><a href="/fmt/scan.go.html#1394649">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1394843">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1394846">return</span>&nbsp;<span class="ident" id="1394853"><a href="/fmt/scan.go.html#1394616">r</a></span><span class="op" id="1394854">.</span><span class="ident" id="1394855">pendBuf</span><span class="op" id="1394862">[</span><span class="num" id="1394863">0</span><span class="op" id="1394864">]</span><span class="op" id="1394865">,</span>&nbsp;<span class="ident" id="1394867"><a href="/fmt/scan.go.html#1394649">err</a></span><br>
<span class="lineno"></span><span class="op" id="1394871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1394874">//&nbsp;unread&nbsp;saves&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="1394919">func</span>&nbsp;<span class="op" id="1394924">(</span><span class="ident" id="1394925">r</span>&nbsp;<span class="op" id="1394927">*</span><span class="ident" id="1394928"><a href="/fmt/scan.go.html#1394262">readRune</a></span><span class="op" id="1394936">)</span>&nbsp;<span class="ident" id="1394938">unread</span><span class="op" id="1394944">(</span><span class="ident" id="1394945">buf</span>&nbsp;<span class="op" id="1394949">[</span><span class="op" id="1394950">]</span><span class="builtintype" id="1394951">byte</span><span class="op" id="1394955">)</span>&nbsp;<span class="op" id="1394957">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1394960">copy</span><span class="op" id="1394964">(</span><span class="ident" id="1394965"><a href="/fmt/scan.go.html#1394925">r</a></span><span class="op" id="1394966">.</span><span class="ident" id="1394967">pendBuf</span><span class="op" id="1394974">[</span><span class="ident" id="1394975"><a href="/fmt/scan.go.html#1394925">r</a></span><span class="op" id="1394976">.</span><span class="ident" id="1394977">pending</span><span class="op" id="1394984">:</span><span class="op" id="1394985">]</span><span class="op" id="1394986">,</span>&nbsp;<span class="ident" id="1394988"><a href="/fmt/scan.go.html#1394945">buf</a></span><span class="op" id="1394991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1394994"><a href="/fmt/scan.go.html#1394925">r</a></span><span class="op" id="1394995">.</span><span class="ident" id="1394996">pending</span>&nbsp;<span class="op" id="1395004">+=</span>&nbsp;<span class="builtinfunc" id="1395007">len</span><span class="op" id="1395010">(</span><span class="ident" id="1395011"><a href="/fmt/scan.go.html#1394945">buf</a></span><span class="op" id="1395014">)</span><br>
<span class="lineno"></span><span class="op" id="1395016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1395019">//&nbsp;ReadRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;point&nbsp;from&nbsp;the</span><br>
<span class="lineno">355</span><span class="comment" id="1395082">//&nbsp;io.Reader&nbsp;inside&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="1395105">func</span>&nbsp;<span class="op" id="1395110">(</span><span class="ident" id="1395111">r</span>&nbsp;<span class="op" id="1395113">*</span><span class="ident" id="1395114"><a href="/fmt/scan.go.html#1394262">readRune</a></span><span class="op" id="1395122">)</span>&nbsp;<span class="ident" id="1395124">ReadRune</span><span class="op" id="1395132">(</span><span class="op" id="1395133">)</span>&nbsp;<span class="op" id="1395135">(</span><span class="ident" id="1395136">rr</span>&nbsp;<span class="builtintype" id="1395139">rune</span><span class="op" id="1395143">,</span>&nbsp;<span class="ident" id="1395145">size</span>&nbsp;<span class="builtintype" id="1395150">int</span><span class="op" id="1395153">,</span>&nbsp;<span class="ident" id="1395155">err</span>&nbsp;<span class="builtintype" id="1395159">error</span><span class="op" id="1395164">)</span>&nbsp;<span class="op" id="1395166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395169"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395170">.</span><span class="ident" id="1395171">buf</span><span class="op" id="1395174">[</span><span class="num" id="1395175">0</span><span class="op" id="1395176">]</span><span class="op" id="1395177">,</span>&nbsp;<span class="ident" id="1395179"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395183">=</span>&nbsp;<span class="ident" id="1395185"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395186">.</span><span class="ident" id="1395187">readByte</span><span class="op" id="1395195">(</span><span class="op" id="1395196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395199">if</span>&nbsp;<span class="ident" id="1395202"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395206">!=</span>&nbsp;<span class="ident" id="1395209">nil</span>&nbsp;<span class="op" id="1395213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395217">return</span>&nbsp;<span class="num" id="1395224">0</span><span class="op" id="1395225">,</span>&nbsp;<span class="num" id="1395227">0</span><span class="op" id="1395228">,</span>&nbsp;<span class="ident" id="1395230"><a href="/fmt/scan.go.html#1395155">err</a></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395238">if</span>&nbsp;<span class="ident" id="1395241"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395242">.</span><span class="ident" id="1395243">buf</span><span class="op" id="1395246">[</span><span class="num" id="1395247">0</span><span class="op" id="1395248">]</span>&nbsp;<span class="op" id="1395250">&lt;</span>&nbsp;<span class="ident" id="1395252"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1395256">.</span><span class="ident" id="1395257">RuneSelf</span>&nbsp;<span class="op" id="1395266">{</span>&nbsp;<span class="comment" id="1395268">//&nbsp;fast&nbsp;check&nbsp;for&nbsp;common&nbsp;ASCII&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395306"><a href="/fmt/scan.go.html#1395136">rr</a></span>&nbsp;<span class="op" id="1395309">=</span>&nbsp;<span class="builtintype" id="1395311">rune</span><span class="op" id="1395315">(</span><span class="ident" id="1395316"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395317">.</span><span class="ident" id="1395318">buf</span><span class="op" id="1395321">[</span><span class="num" id="1395322">0</span><span class="op" id="1395323">]</span><span class="op" id="1395324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395328"><a href="/fmt/scan.go.html#1395145">size</a></span>&nbsp;<span class="op" id="1395333">=</span>&nbsp;<span class="num" id="1395335">1</span>&nbsp;<span class="comment" id="1395337">//&nbsp;Known&nbsp;to&nbsp;be&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395357">return</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395368">var</span>&nbsp;<span class="ident" id="1395372">n</span>&nbsp;<span class="builtintype" id="1395374">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395379">for</span>&nbsp;<span class="ident" id="1395383"><a href="/fmt/scan.go.html#1395372">n</a></span>&nbsp;<span class="op" id="1395385">=</span>&nbsp;<span class="num" id="1395387">1</span><span class="op" id="1395388">;</span>&nbsp;<span class="op" id="1395390">!</span><span class="ident" id="1395391"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1395395">.</span><span class="ident" id="1395396">FullRune</span><span class="op" id="1395404">(</span><span class="ident" id="1395405"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395406">.</span><span class="ident" id="1395407">buf</span><span class="op" id="1395410">[</span><span class="num" id="1395411">0</span><span class="op" id="1395412">:</span><span class="ident" id="1395413"><a href="/fmt/scan.go.html#1395372">n</a></span><span class="op" id="1395414">]</span><span class="op" id="1395415">)</span><span class="op" id="1395416">;</span>&nbsp;<span class="ident" id="1395418"><a href="/fmt/scan.go.html#1395372">n</a></span><span class="op" id="1395419">++</span>&nbsp;<span class="op" id="1395422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395426"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395427">.</span><span class="ident" id="1395428">buf</span><span class="op" id="1395431">[</span><span class="ident" id="1395432"><a href="/fmt/scan.go.html#1395372">n</a></span><span class="op" id="1395433">]</span><span class="op" id="1395434">,</span>&nbsp;<span class="ident" id="1395436"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395440">=</span>&nbsp;<span class="ident" id="1395442"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395443">.</span><span class="ident" id="1395444">readByte</span><span class="op" id="1395452">(</span><span class="op" id="1395453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395457">if</span>&nbsp;<span class="ident" id="1395460"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395464">!=</span>&nbsp;<span class="ident" id="1395467">nil</span>&nbsp;<span class="op" id="1395471">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395476">if</span>&nbsp;<span class="ident" id="1395479"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395483">==</span>&nbsp;<span class="ident" id="1395486"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1395488">.</span><span class="ident" id="1395489">EOF</span>&nbsp;<span class="op" id="1395493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395499"><a href="/fmt/scan.go.html#1395155">err</a></span>&nbsp;<span class="op" id="1395503">=</span>&nbsp;<span class="ident" id="1395505">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395513">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395527">return</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395542"><a href="/fmt/scan.go.html#1395136">rr</a></span><span class="op" id="1395544">,</span>&nbsp;<span class="ident" id="1395546"><a href="/fmt/scan.go.html#1395145">size</a></span>&nbsp;<span class="op" id="1395551">=</span>&nbsp;<span class="ident" id="1395553"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1395557">.</span><span class="ident" id="1395558">DecodeRune</span><span class="op" id="1395568">(</span><span class="ident" id="1395569"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395570">.</span><span class="ident" id="1395571">buf</span><span class="op" id="1395574">[</span><span class="num" id="1395575">0</span><span class="op" id="1395576">:</span><span class="ident" id="1395577"><a href="/fmt/scan.go.html#1395372">n</a></span><span class="op" id="1395578">]</span><span class="op" id="1395579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395582">if</span>&nbsp;<span class="ident" id="1395585"><a href="/fmt/scan.go.html#1395145">size</a></span>&nbsp;<span class="op" id="1395590">&lt;</span>&nbsp;<span class="ident" id="1395592"><a href="/fmt/scan.go.html#1395372">n</a></span>&nbsp;<span class="op" id="1395594">{</span>&nbsp;<span class="comment" id="1395596">//&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395610"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395611">.</span><span class="ident" id="1395612">unread</span><span class="op" id="1395618">(</span><span class="ident" id="1395619"><a href="/fmt/scan.go.html#1395111">r</a></span><span class="op" id="1395620">.</span><span class="ident" id="1395621">buf</span><span class="op" id="1395624">[</span><span class="ident" id="1395625"><a href="/fmt/scan.go.html#1395145">size</a></span><span class="op" id="1395629">:</span><span class="ident" id="1395630"><a href="/fmt/scan.go.html#1395372">n</a></span><span class="op" id="1395631">]</span><span class="op" id="1395632">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1395635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395638">return</span><br>
<span class="lineno"></span><span class="op" id="1395645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1395648">var</span>&nbsp;<span class="ident" id="1395652">ssFree</span>&nbsp;<span class="op" id="1395659">=</span>&nbsp;<span class="ident" id="1395661"><a href="/fmt/scan.go.html#1384762">sync</a></span><span class="op" id="1395665">.</span><span class="ident" id="1395666">Pool</span><span class="op" id="1395670">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395673">New</span><span class="op" id="1395676">:</span>&nbsp;<span class="keyword" id="1395678">func</span><span class="op" id="1395682">(</span><span class="op" id="1395683">)</span>&nbsp;<span class="keyword" id="1395685">interface</span><span class="op" id="1395694">{</span><span class="op" id="1395695">}</span>&nbsp;<span class="op" id="1395697">{</span>&nbsp;<span class="keyword" id="1395699">return</span>&nbsp;<span class="builtinfunc" id="1395706">new</span><span class="op" id="1395709">(</span><span class="ident" id="1395710"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1395712">)</span>&nbsp;<span class="op" id="1395714">}</span><span class="op" id="1395715">,</span><br>
<span class="lineno"></span><span class="op" id="1395717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1395720">//&nbsp;newScanState&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ss&nbsp;struct&nbsp;or&nbsp;grab&nbsp;a&nbsp;cached&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="1395784">func</span>&nbsp;<span class="ident" id="1395789">newScanState</span><span class="op" id="1395801">(</span><span class="ident" id="1395802">r</span>&nbsp;<span class="ident" id="1395804"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1395806">.</span><span class="ident" id="1395807">Reader</span><span class="op" id="1395813">,</span>&nbsp;<span class="ident" id="1395815">nlIsSpace</span><span class="op" id="1395824">,</span>&nbsp;<span class="ident" id="1395826">nlIsEnd</span>&nbsp;<span class="builtintype" id="1395834">bool</span><span class="op" id="1395838">)</span>&nbsp;<span class="op" id="1395840">(</span><span class="ident" id="1395841">s</span>&nbsp;<span class="op" id="1395843">*</span><span class="ident" id="1395844"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1395846">,</span>&nbsp;<span class="ident" id="1395848">old</span>&nbsp;<span class="ident" id="1395852"><a href="/fmt/scan.go.html#1390895">ssave</a></span><span class="op" id="1395857">)</span>&nbsp;<span class="op" id="1395859">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1395862">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;is&nbsp;a&nbsp;*ss,&nbsp;then&nbsp;we&#39;ve&nbsp;got&nbsp;a&nbsp;recursive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1395917">//&nbsp;call&nbsp;to&nbsp;Scan,&nbsp;so&nbsp;re-use&nbsp;the&nbsp;scan&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395961"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1395962">,</span>&nbsp;<span class="ident" id="1395964">ok</span>&nbsp;<span class="op" id="1395967">:=</span>&nbsp;<span class="ident" id="1395970"><a href="/fmt/scan.go.html#1395802">r</a></span><span class="op" id="1395971">.</span><span class="op" id="1395972">(</span><span class="op" id="1395973">*</span><span class="ident" id="1395974"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1395976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1395979">if</span>&nbsp;<span class="ident" id="1395982"><a href="/fmt/scan.go.html#1395964">ok</a></span>&nbsp;<span class="op" id="1395985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1395989"><a href="/fmt/scan.go.html#1395848">old</a></span>&nbsp;<span class="op" id="1395993">=</span>&nbsp;<span class="ident" id="1395995"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1395996">.</span><span class="ident" id="1395997">ssave</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396005"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396006">.</span><span class="ident" id="1396007">limit</span>&nbsp;<span class="op" id="1396013">=</span>&nbsp;<span class="ident" id="1396015"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396016">.</span><span class="ident" id="1396017">argLimit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396028"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396029">.</span><span class="ident" id="1396030">nlIsEnd</span>&nbsp;<span class="op" id="1396038">=</span>&nbsp;<span class="ident" id="1396040"><a href="/fmt/scan.go.html#1395826">nlIsEnd</a></span>&nbsp;<span class="op" id="1396048">||</span>&nbsp;<span class="ident" id="1396051"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396052">.</span><span class="ident" id="1396053">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396063"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396064">.</span><span class="ident" id="1396065">nlIsSpace</span>&nbsp;<span class="op" id="1396075">=</span>&nbsp;<span class="ident" id="1396077"><a href="/fmt/scan.go.html#1395815">nlIsSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396089">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396097">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396101"><a href="/fmt/scan.go.html#1395841">s</a></span>&nbsp;<span class="op" id="1396103">=</span>&nbsp;<span class="ident" id="1396105"><a href="/fmt/scan.go.html#1395652">ssFree</a></span><span class="op" id="1396111">.</span><span class="ident" id="1396112">Get</span><span class="op" id="1396115">(</span><span class="op" id="1396116">)</span><span class="op" id="1396117">.</span><span class="op" id="1396118">(</span><span class="op" id="1396119">*</span><span class="ident" id="1396120"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1396122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396125">if</span>&nbsp;<span class="ident" id="1396128">rr</span><span class="op" id="1396130">,</span>&nbsp;<span class="ident" id="1396132">ok</span>&nbsp;<span class="op" id="1396135">:=</span>&nbsp;<span class="ident" id="1396138"><a href="/fmt/scan.go.html#1395802">r</a></span><span class="op" id="1396139">.</span><span class="op" id="1396140">(</span><span class="ident" id="1396141"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1396143">.</span><span class="ident" id="1396144">RuneReader</span><span class="op" id="1396154">)</span><span class="op" id="1396155">;</span>&nbsp;<span class="ident" id="1396157"><a href="/fmt/scan.go.html#1396132">ok</a></span>&nbsp;<span class="op" id="1396160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396164"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396165">.</span><span class="ident" id="1396166">rr</span>&nbsp;<span class="op" id="1396169">=</span>&nbsp;<span class="ident" id="1396171"><a href="/fmt/scan.go.html#1396128">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396175">}</span>&nbsp;<span class="keyword" id="1396177">else</span>&nbsp;<span class="op" id="1396182">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396186"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396187">.</span><span class="ident" id="1396188">rr</span>&nbsp;<span class="op" id="1396191">=</span>&nbsp;<span class="op" id="1396193">&amp;</span><span class="ident" id="1396194"><a href="/fmt/scan.go.html#1394262">readRune</a></span><span class="op" id="1396202">{</span><span class="ident" id="1396203">reader</span><span class="op" id="1396209">:</span>&nbsp;<span class="ident" id="1396211"><a href="/fmt/scan.go.html#1395802">r</a></span><span class="op" id="1396212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396218"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396219">.</span><span class="ident" id="1396220">nlIsSpace</span>&nbsp;<span class="op" id="1396230">=</span>&nbsp;<span class="ident" id="1396232"><a href="/fmt/scan.go.html#1395815">nlIsSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396243"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396244">.</span><span class="ident" id="1396245">nlIsEnd</span>&nbsp;<span class="op" id="1396253">=</span>&nbsp;<span class="ident" id="1396255"><a href="/fmt/scan.go.html#1395826">nlIsEnd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396264"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396265">.</span><span class="ident" id="1396266">prevRune</span>&nbsp;<span class="op" id="1396275">=</span>&nbsp;<span class="op" id="1396277">-</span><span class="num" id="1396278">1</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396281"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396282">.</span><span class="ident" id="1396283">peekRune</span>&nbsp;<span class="op" id="1396292">=</span>&nbsp;<span class="op" id="1396294">-</span><span class="num" id="1396295">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396298"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396299">.</span><span class="ident" id="1396300">atEOF</span>&nbsp;<span class="op" id="1396306">=</span>&nbsp;<span class="ident" id="1396308">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396315"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396316">.</span><span class="ident" id="1396317">limit</span>&nbsp;<span class="op" id="1396323">=</span>&nbsp;<span class="ident" id="1396325"><a href="/fmt/scan.go.html#1408532">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396334"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396335">.</span><span class="ident" id="1396336">argLimit</span>&nbsp;<span class="op" id="1396345">=</span>&nbsp;<span class="ident" id="1396347"><a href="/fmt/scan.go.html#1408532">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396356"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396357">.</span><span class="ident" id="1396358">maxWid</span>&nbsp;<span class="op" id="1396365">=</span>&nbsp;<span class="ident" id="1396367"><a href="/fmt/scan.go.html#1408532">hugeWid</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396376"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396377">.</span><span class="ident" id="1396378">validSave</span>&nbsp;<span class="op" id="1396388">=</span>&nbsp;<span class="ident" id="1396390">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396396"><a href="/fmt/scan.go.html#1395841">s</a></span><span class="op" id="1396397">.</span><span class="ident" id="1396398">count</span>&nbsp;<span class="op" id="1396404">=</span>&nbsp;<span class="num" id="1396406">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396409">return</span><br>
<span class="lineno"></span><span class="op" id="1396416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="1396419">//&nbsp;free&nbsp;saves&nbsp;used&nbsp;ss&nbsp;structs&nbsp;in&nbsp;ssFree;&nbsp;avoid&nbsp;an&nbsp;allocation&nbsp;per&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="keyword" id="1396496">func</span>&nbsp;<span class="op" id="1396501">(</span><span class="ident" id="1396502">s</span>&nbsp;<span class="op" id="1396504">*</span><span class="ident" id="1396505"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1396507">)</span>&nbsp;<span class="ident" id="1396509">free</span><span class="op" id="1396513">(</span><span class="ident" id="1396514">old</span>&nbsp;<span class="ident" id="1396518"><a href="/fmt/scan.go.html#1390895">ssave</a></span><span class="op" id="1396523">)</span>&nbsp;<span class="op" id="1396525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1396528">//&nbsp;If&nbsp;it&nbsp;was&nbsp;used&nbsp;recursively,&nbsp;just&nbsp;restore&nbsp;the&nbsp;old&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396588">if</span>&nbsp;<span class="ident" id="1396591"><a href="/fmt/scan.go.html#1396514">old</a></span><span class="op" id="1396594">.</span><span class="ident" id="1396595">validSave</span>&nbsp;<span class="op" id="1396605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396609"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396610">.</span><span class="ident" id="1396611">ssave</span>&nbsp;<span class="op" id="1396617">=</span>&nbsp;<span class="ident" id="1396619"><a href="/fmt/scan.go.html#1396514">old</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396625">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1396636">//&nbsp;Don&#39;t&nbsp;hold&nbsp;on&nbsp;to&nbsp;ss&nbsp;structs&nbsp;with&nbsp;large&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396688">if</span>&nbsp;<span class="builtinfunc" id="1396691">cap</span><span class="op" id="1396694">(</span><span class="ident" id="1396695"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396696">.</span><span class="ident" id="1396697">buf</span><span class="op" id="1396700">)</span>&nbsp;<span class="op" id="1396702">&gt;</span>&nbsp;<span class="num" id="1396704">1024</span>&nbsp;<span class="op" id="1396709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396713">return</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396724"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396725">.</span><span class="ident" id="1396726">buf</span>&nbsp;<span class="op" id="1396730">=</span>&nbsp;<span class="ident" id="1396732"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396733">.</span><span class="ident" id="1396734">buf</span><span class="op" id="1396737">[</span><span class="op" id="1396738">:</span><span class="num" id="1396739">0</span><span class="op" id="1396740">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396743"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396744">.</span><span class="ident" id="1396745">rr</span>&nbsp;<span class="op" id="1396748">=</span>&nbsp;<span class="ident" id="1396750">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396755"><a href="/fmt/scan.go.html#1395652">ssFree</a></span><span class="op" id="1396761">.</span><span class="ident" id="1396762">Put</span><span class="op" id="1396765">(</span><span class="ident" id="1396766"><a href="/fmt/scan.go.html#1396502">s</a></span><span class="op" id="1396767">)</span><br>
<span class="lineno"></span><span class="op" id="1396769">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="1396772">//&nbsp;skipSpace&nbsp;skips&nbsp;spaces&nbsp;and&nbsp;maybe&nbsp;newlines.</span><br>
<span class="lineno"></span><span class="keyword" id="1396818">func</span>&nbsp;<span class="op" id="1396823">(</span><span class="ident" id="1396824">s</span>&nbsp;<span class="op" id="1396826">*</span><span class="ident" id="1396827"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1396829">)</span>&nbsp;<span class="ident" id="1396831">skipSpace</span><span class="op" id="1396840">(</span><span class="ident" id="1396841">stopAtNewline</span>&nbsp;<span class="builtintype" id="1396855">bool</span><span class="op" id="1396859">)</span>&nbsp;<span class="op" id="1396861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396864">for</span>&nbsp;<span class="op" id="1396868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1396872">r</span>&nbsp;<span class="op" id="1396874">:=</span>&nbsp;<span class="ident" id="1396877"><a href="/fmt/scan.go.html#1396824">s</a></span><span class="op" id="1396878">.</span><span class="ident" id="1396879">getRune</span><span class="op" id="1396886">(</span><span class="op" id="1396887">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396891">if</span>&nbsp;<span class="ident" id="1396894"><a href="/fmt/scan.go.html#1396872">r</a></span>&nbsp;<span class="op" id="1396896">==</span>&nbsp;<span class="ident" id="1396899"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1396903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396908">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396921">if</span>&nbsp;<span class="ident" id="1396924"><a href="/fmt/scan.go.html#1396872">r</a></span>&nbsp;<span class="op" id="1396926">==</span>&nbsp;<span class="string" id="1396929">&#39;\r&#39;</span>&nbsp;<span class="op" id="1396934">&amp;&amp;</span>&nbsp;<span class="ident" id="1396937"><a href="/fmt/scan.go.html#1396824">s</a></span><span class="op" id="1396938">.</span><span class="ident" id="1396939">peek</span><span class="op" id="1396943">(</span><span class="string" id="1396944">&#34;\n&#34;</span><span class="op" id="1396948">)</span>&nbsp;<span class="op" id="1396950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396955">continue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1396966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396970">if</span>&nbsp;<span class="ident" id="1396973"><a href="/fmt/scan.go.html#1396872">r</a></span>&nbsp;<span class="op" id="1396975">==</span>&nbsp;<span class="string" id="1396978">&#39;\n&#39;</span>&nbsp;<span class="op" id="1396983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1396988">if</span>&nbsp;<span class="ident" id="1396991"><a href="/fmt/scan.go.html#1396841">stopAtNewline</a></span>&nbsp;<span class="op" id="1397005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397011">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397020">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397025">if</span>&nbsp;<span class="ident" id="1397028"><a href="/fmt/scan.go.html#1396824">s</a></span><span class="op" id="1397029">.</span><span class="ident" id="1397030">nlIsSpace</span>&nbsp;<span class="op" id="1397040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397046">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397063"><a href="/fmt/scan.go.html#1396824">s</a></span><span class="op" id="1397064">.</span><span class="ident" id="1397065">errorString</span><span class="op" id="1397076">(</span><span class="string" id="1397077">&#34;unexpected&nbsp;newline&#34;</span><span class="op" id="1397097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397102">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397115">if</span>&nbsp;<span class="op" id="1397118">!</span><span class="ident" id="1397119"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1397126">(</span><span class="ident" id="1397127"><a href="/fmt/scan.go.html#1396872">r</a></span><span class="op" id="1397128">)</span>&nbsp;<span class="op" id="1397130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397135"><a href="/fmt/scan.go.html#1396824">s</a></span><span class="op" id="1397136">.</span><span class="ident" id="1397137">UnreadRune</span><span class="op" id="1397147">(</span><span class="op" id="1397148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397153">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397161">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397164">}</span><br>
<span class="lineno"></span><span class="op" id="1397166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1397169">//&nbsp;token&nbsp;returns&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;string&nbsp;from&nbsp;the&nbsp;input.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1397238">//&nbsp;skips&nbsp;white&nbsp;space.&nbsp;&nbsp;For&nbsp;Scanln,&nbsp;it&nbsp;stops&nbsp;at&nbsp;newlines.&nbsp;&nbsp;For&nbsp;Scan,</span><br>
<span class="lineno">465</span><span class="comment" id="1397306">//&nbsp;newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno"></span><span class="keyword" id="1397341">func</span>&nbsp;<span class="op" id="1397346">(</span><span class="ident" id="1397347">s</span>&nbsp;<span class="op" id="1397349">*</span><span class="ident" id="1397350"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1397352">)</span>&nbsp;<span class="ident" id="1397354">token</span><span class="op" id="1397359">(</span><span class="ident" id="1397360">skipSpace</span>&nbsp;<span class="builtintype" id="1397370">bool</span><span class="op" id="1397374">,</span>&nbsp;<span class="ident" id="1397376">f</span>&nbsp;<span class="keyword" id="1397378">func</span><span class="op" id="1397382">(</span><span class="builtintype" id="1397383">rune</span><span class="op" id="1397387">)</span>&nbsp;<span class="builtintype" id="1397389">bool</span><span class="op" id="1397393">)</span>&nbsp;<span class="op" id="1397395">[</span><span class="op" id="1397396">]</span><span class="builtintype" id="1397397">byte</span>&nbsp;<span class="op" id="1397402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397405">if</span>&nbsp;<span class="ident" id="1397408"><a href="/fmt/scan.go.html#1397360">skipSpace</a></span>&nbsp;<span class="op" id="1397418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397422"><a href="/fmt/scan.go.html#1397347">s</a></span><span class="op" id="1397423">.</span><span class="ident" id="1397424">skipSpace</span><span class="op" id="1397433">(</span><span class="ident" id="1397434">false</span><span class="op" id="1397439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397442">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1397445">//&nbsp;read&nbsp;until&nbsp;white&nbsp;space&nbsp;or&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397483">for</span>&nbsp;<span class="op" id="1397487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397491">r</span>&nbsp;<span class="op" id="1397493">:=</span>&nbsp;<span class="ident" id="1397496"><a href="/fmt/scan.go.html#1397347">s</a></span><span class="op" id="1397497">.</span><span class="ident" id="1397498">getRune</span><span class="op" id="1397505">(</span><span class="op" id="1397506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397510">if</span>&nbsp;<span class="ident" id="1397513"><a href="/fmt/scan.go.html#1397491">r</a></span>&nbsp;<span class="op" id="1397515">==</span>&nbsp;<span class="ident" id="1397518"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1397522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397527">break</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397539">if</span>&nbsp;<span class="op" id="1397542">!</span><span class="ident" id="1397543"><a href="/fmt/scan.go.html#1397376">f</a></span><span class="op" id="1397544">(</span><span class="ident" id="1397545"><a href="/fmt/scan.go.html#1397491">r</a></span><span class="op" id="1397546">)</span>&nbsp;<span class="op" id="1397548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397553"><a href="/fmt/scan.go.html#1397347">s</a></span><span class="op" id="1397554">.</span><span class="ident" id="1397555">UnreadRune</span><span class="op" id="1397565">(</span><span class="op" id="1397566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397571">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397579">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1397583"><a href="/fmt/scan.go.html#1397347">s</a></span><span class="op" id="1397584">.</span><span class="ident" id="1397585">buf</span><span class="op" id="1397588">.</span><span class="ident" id="1397589">WriteRune</span><span class="op" id="1397598">(</span><span class="ident" id="1397599"><a href="/fmt/scan.go.html#1397491">r</a></span><span class="op" id="1397600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397606">return</span>&nbsp;<span class="ident" id="1397613"><a href="/fmt/scan.go.html#1397347">s</a></span><span class="op" id="1397614">.</span><span class="ident" id="1397615">buf</span><br>
<span class="lineno"></span><span class="op" id="1397619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="1397622">var</span>&nbsp;<span class="ident" id="1397626">complexError</span>&nbsp;<span class="op" id="1397639">=</span>&nbsp;<span class="ident" id="1397641"><a href="/fmt/scan.go.html#1384710">errors</a></span><span class="op" id="1397647">.</span><span class="ident" id="1397648">New</span><span class="op" id="1397651">(</span><span class="string" id="1397652">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;complex&nbsp;number&#34;</span><span class="op" id="1397690">)</span><br>
<span class="lineno"></span><span class="keyword" id="1397692">var</span>&nbsp;<span class="ident" id="1397696">boolError</span>&nbsp;<span class="op" id="1397706">=</span>&nbsp;<span class="ident" id="1397708"><a href="/fmt/scan.go.html#1384710">errors</a></span><span class="op" id="1397714">.</span><span class="ident" id="1397715">New</span><span class="op" id="1397718">(</span><span class="string" id="1397719">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;boolean&#34;</span><span class="op" id="1397750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1397753">func</span>&nbsp;<span class="ident" id="1397758">indexRune</span><span class="op" id="1397767">(</span><span class="ident" id="1397768">s</span>&nbsp;<span class="builtintype" id="1397770">string</span><span class="op" id="1397776">,</span>&nbsp;<span class="ident" id="1397778">r</span>&nbsp;<span class="builtintype" id="1397780">rune</span><span class="op" id="1397784">)</span>&nbsp;<span class="builtintype" id="1397786">int</span>&nbsp;<span class="op" id="1397790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397793">for</span>&nbsp;<span class="ident" id="1397797">i</span><span class="op" id="1397798">,</span>&nbsp;<span class="ident" id="1397800">c</span>&nbsp;<span class="op" id="1397802">:=</span>&nbsp;<span class="keyword" id="1397805">range</span>&nbsp;<span class="ident" id="1397811"><a href="/fmt/scan.go.html#1397768">s</a></span>&nbsp;<span class="op" id="1397813">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397817">if</span>&nbsp;<span class="ident" id="1397820"><a href="/fmt/scan.go.html#1397800">c</a></span>&nbsp;<span class="op" id="1397822">==</span>&nbsp;<span class="ident" id="1397825"><a href="/fmt/scan.go.html#1397778">r</a></span>&nbsp;<span class="op" id="1397827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397832">return</span>&nbsp;<span class="ident" id="1397839"><a href="/fmt/scan.go.html#1397797">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1397846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1397849">return</span>&nbsp;<span class="op" id="1397856">-</span><span class="num" id="1397857">1</span><br>
<span class="lineno">495</span><span class="op" id="1397859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1397862">//&nbsp;consume&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1397950">//&nbsp;If&nbsp;accept&nbsp;is&nbsp;true,&nbsp;it&nbsp;puts&nbsp;the&nbsp;character&nbsp;into&nbsp;the&nbsp;input&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="1398016">func</span>&nbsp;<span class="op" id="1398021">(</span><span class="ident" id="1398022">s</span>&nbsp;<span class="op" id="1398024">*</span><span class="ident" id="1398025"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1398027">)</span>&nbsp;<span class="ident" id="1398029">consume</span><span class="op" id="1398036">(</span><span class="ident" id="1398037">ok</span>&nbsp;<span class="builtintype" id="1398040">string</span><span class="op" id="1398046">,</span>&nbsp;<span class="ident" id="1398048">accept</span>&nbsp;<span class="builtintype" id="1398055">bool</span><span class="op" id="1398059">)</span>&nbsp;<span class="builtintype" id="1398061">bool</span>&nbsp;<span class="op" id="1398066">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398069">r</span>&nbsp;<span class="op" id="1398071">:=</span>&nbsp;<span class="ident" id="1398074"><a href="/fmt/scan.go.html#1398022">s</a></span><span class="op" id="1398075">.</span><span class="ident" id="1398076">getRune</span><span class="op" id="1398083">(</span><span class="op" id="1398084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398087">if</span>&nbsp;<span class="ident" id="1398090"><a href="/fmt/scan.go.html#1398069">r</a></span>&nbsp;<span class="op" id="1398092">==</span>&nbsp;<span class="ident" id="1398095"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1398099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398103">return</span>&nbsp;<span class="ident" id="1398110">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398120">if</span>&nbsp;<span class="ident" id="1398123"><a href="/fmt/scan.go.html#1397758">indexRune</a></span><span class="op" id="1398132">(</span><span class="ident" id="1398133"><a href="/fmt/scan.go.html#1398037">ok</a></span><span class="op" id="1398135">,</span>&nbsp;<span class="ident" id="1398137"><a href="/fmt/scan.go.html#1398069">r</a></span><span class="op" id="1398138">)</span>&nbsp;<span class="op" id="1398140">&gt;=</span>&nbsp;<span class="num" id="1398143">0</span>&nbsp;<span class="op" id="1398145">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398149">if</span>&nbsp;<span class="ident" id="1398152"><a href="/fmt/scan.go.html#1398048">accept</a></span>&nbsp;<span class="op" id="1398159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398164"><a href="/fmt/scan.go.html#1398022">s</a></span><span class="op" id="1398165">.</span><span class="ident" id="1398166">buf</span><span class="op" id="1398169">.</span><span class="ident" id="1398170">WriteRune</span><span class="op" id="1398179">(</span><span class="ident" id="1398180"><a href="/fmt/scan.go.html#1398069">r</a></span><span class="op" id="1398181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398189">return</span>&nbsp;<span class="ident" id="1398196">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398202">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398205">if</span>&nbsp;<span class="ident" id="1398208"><a href="/fmt/scan.go.html#1398069">r</a></span>&nbsp;<span class="op" id="1398210">!=</span>&nbsp;<span class="ident" id="1398213"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1398217">&amp;&amp;</span>&nbsp;<span class="ident" id="1398220"><a href="/fmt/scan.go.html#1398048">accept</a></span>&nbsp;<span class="op" id="1398227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398231"><a href="/fmt/scan.go.html#1398022">s</a></span><span class="op" id="1398232">.</span><span class="ident" id="1398233">UnreadRune</span><span class="op" id="1398243">(</span><span class="op" id="1398244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398250">return</span>&nbsp;<span class="ident" id="1398257">false</span><br>
<span class="lineno"></span><span class="op" id="1398263">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="1398266">//&nbsp;peek&nbsp;reports&nbsp;whether&nbsp;the&nbsp;next&nbsp;character&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string,&nbsp;without&nbsp;consuming&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1398352">func</span>&nbsp;<span class="op" id="1398357">(</span><span class="ident" id="1398358">s</span>&nbsp;<span class="op" id="1398360">*</span><span class="ident" id="1398361"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1398363">)</span>&nbsp;<span class="ident" id="1398365">peek</span><span class="op" id="1398369">(</span><span class="ident" id="1398370">ok</span>&nbsp;<span class="builtintype" id="1398373">string</span><span class="op" id="1398379">)</span>&nbsp;<span class="builtintype" id="1398381">bool</span>&nbsp;<span class="op" id="1398386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398389">r</span>&nbsp;<span class="op" id="1398391">:=</span>&nbsp;<span class="ident" id="1398394"><a href="/fmt/scan.go.html#1398358">s</a></span><span class="op" id="1398395">.</span><span class="ident" id="1398396">getRune</span><span class="op" id="1398403">(</span><span class="op" id="1398404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398407">if</span>&nbsp;<span class="ident" id="1398410"><a href="/fmt/scan.go.html#1398389">r</a></span>&nbsp;<span class="op" id="1398412">!=</span>&nbsp;<span class="ident" id="1398415"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1398419">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398423"><a href="/fmt/scan.go.html#1398358">s</a></span><span class="op" id="1398424">.</span><span class="ident" id="1398425">UnreadRune</span><span class="op" id="1398435">(</span><span class="op" id="1398436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398442">return</span>&nbsp;<span class="ident" id="1398449"><a href="/fmt/scan.go.html#1397758">indexRune</a></span><span class="op" id="1398458">(</span><span class="ident" id="1398459"><a href="/fmt/scan.go.html#1398370">ok</a></span><span class="op" id="1398461">,</span>&nbsp;<span class="ident" id="1398463"><a href="/fmt/scan.go.html#1398389">r</a></span><span class="op" id="1398464">)</span>&nbsp;<span class="op" id="1398466">&gt;=</span>&nbsp;<span class="num" id="1398469">0</span><br>
<span class="lineno"></span><span class="op" id="1398471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="keyword" id="1398474">func</span>&nbsp;<span class="op" id="1398479">(</span><span class="ident" id="1398480">s</span>&nbsp;<span class="op" id="1398482">*</span><span class="ident" id="1398483"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1398485">)</span>&nbsp;<span class="ident" id="1398487">notEOF</span><span class="op" id="1398493">(</span><span class="op" id="1398494">)</span>&nbsp;<span class="op" id="1398496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1398499">//&nbsp;Guarantee&nbsp;there&nbsp;is&nbsp;data&nbsp;to&nbsp;be&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398539">if</span>&nbsp;<span class="ident" id="1398542">r</span>&nbsp;<span class="op" id="1398544">:=</span>&nbsp;<span class="ident" id="1398547"><a href="/fmt/scan.go.html#1398480">s</a></span><span class="op" id="1398548">.</span><span class="ident" id="1398549">getRune</span><span class="op" id="1398556">(</span><span class="op" id="1398557">)</span><span class="op" id="1398558">;</span>&nbsp;<span class="ident" id="1398560"><a href="/fmt/scan.go.html#1398542">r</a></span>&nbsp;<span class="op" id="1398562">==</span>&nbsp;<span class="ident" id="1398565"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1398569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1398573">panic</span><span class="op" id="1398578">(</span><span class="ident" id="1398579"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1398581">.</span><span class="ident" id="1398582">EOF</span><span class="op" id="1398585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1398588">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1398591"><a href="/fmt/scan.go.html#1398480">s</a></span><span class="op" id="1398592">.</span><span class="ident" id="1398593">UnreadRune</span><span class="op" id="1398603">(</span><span class="op" id="1398604">)</span><br>
<span class="lineno"></span><span class="op" id="1398606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1398609">//&nbsp;accept&nbsp;checks&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.&nbsp;&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;byte&nbsp;(sic)&nbsp;in&nbsp;the&nbsp;string,&nbsp;it&nbsp;puts&nbsp;it&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1398709">//&nbsp;buffer&nbsp;and&nbsp;returns&nbsp;true.&nbsp;Otherwise&nbsp;it&nbsp;return&nbsp;false.</span><br>
<span class="lineno">535</span><span class="keyword" id="1398764">func</span>&nbsp;<span class="op" id="1398769">(</span><span class="ident" id="1398770">s</span>&nbsp;<span class="op" id="1398772">*</span><span class="ident" id="1398773"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1398775">)</span>&nbsp;<span class="ident" id="1398777">accept</span><span class="op" id="1398783">(</span><span class="ident" id="1398784">ok</span>&nbsp;<span class="builtintype" id="1398787">string</span><span class="op" id="1398793">)</span>&nbsp;<span class="builtintype" id="1398795">bool</span>&nbsp;<span class="op" id="1398800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398803">return</span>&nbsp;<span class="ident" id="1398810"><a href="/fmt/scan.go.html#1398770">s</a></span><span class="op" id="1398811">.</span><span class="ident" id="1398812">consume</span><span class="op" id="1398819">(</span><span class="ident" id="1398820"><a href="/fmt/scan.go.html#1398784">ok</a></span><span class="op" id="1398822">,</span>&nbsp;<span class="ident" id="1398824">true</span><span class="op" id="1398828">)</span><br>
<span class="lineno"></span><span class="op" id="1398830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1398833">//&nbsp;okVerb&nbsp;verifies&nbsp;that&nbsp;the&nbsp;verb&nbsp;is&nbsp;present&nbsp;in&nbsp;the&nbsp;list,&nbsp;setting&nbsp;s.err&nbsp;appropriately&nbsp;if&nbsp;not.</span><br>
<span class="lineno">540</span><span class="keyword" id="1398926">func</span>&nbsp;<span class="op" id="1398931">(</span><span class="ident" id="1398932">s</span>&nbsp;<span class="op" id="1398934">*</span><span class="ident" id="1398935"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1398937">)</span>&nbsp;<span class="ident" id="1398939">okVerb</span><span class="op" id="1398945">(</span><span class="ident" id="1398946">verb</span>&nbsp;<span class="builtintype" id="1398951">rune</span><span class="op" id="1398955">,</span>&nbsp;<span class="ident" id="1398957">okVerbs</span><span class="op" id="1398964">,</span>&nbsp;<span class="ident" id="1398966">typ</span>&nbsp;<span class="builtintype" id="1398970">string</span><span class="op" id="1398976">)</span>&nbsp;<span class="builtintype" id="1398978">bool</span>&nbsp;<span class="op" id="1398983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1398986">for</span>&nbsp;<span class="ident" id="1398990">_</span><span class="op" id="1398991">,</span>&nbsp;<span class="ident" id="1398993">v</span>&nbsp;<span class="op" id="1398995">:=</span>&nbsp;<span class="keyword" id="1398998">range</span>&nbsp;<span class="ident" id="1399004"><a href="/fmt/scan.go.html#1398957">okVerbs</a></span>&nbsp;<span class="op" id="1399012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399016">if</span>&nbsp;<span class="ident" id="1399019"><a href="/fmt/scan.go.html#1398993">v</a></span>&nbsp;<span class="op" id="1399021">==</span>&nbsp;<span class="ident" id="1399024"><a href="/fmt/scan.go.html#1398946">verb</a></span>&nbsp;<span class="op" id="1399029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399034">return</span>&nbsp;<span class="ident" id="1399041">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399048">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399054"><a href="/fmt/scan.go.html#1398932">s</a></span><span class="op" id="1399055">.</span><span class="ident" id="1399056">errorString</span><span class="op" id="1399067">(</span><span class="string" id="1399068">&#34;bad&nbsp;verb&nbsp;%&#34;</span>&nbsp;<span class="op" id="1399081">+</span>&nbsp;<span class="builtintype" id="1399083">string</span><span class="op" id="1399089">(</span><span class="ident" id="1399090"><a href="/fmt/scan.go.html#1398946">verb</a></span><span class="op" id="1399094">)</span>&nbsp;<span class="op" id="1399096">+</span>&nbsp;<span class="string" id="1399098">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="1399106">+</span>&nbsp;<span class="ident" id="1399108"><a href="/fmt/scan.go.html#1398966">typ</a></span><span class="op" id="1399111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399114">return</span>&nbsp;<span class="ident" id="1399121">false</span><br>
<span class="lineno"></span><span class="op" id="1399127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="1399130">//&nbsp;scanBool&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="1399206">func</span>&nbsp;<span class="op" id="1399211">(</span><span class="ident" id="1399212">s</span>&nbsp;<span class="op" id="1399214">*</span><span class="ident" id="1399215"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1399217">)</span>&nbsp;<span class="ident" id="1399219">scanBool</span><span class="op" id="1399227">(</span><span class="ident" id="1399228">verb</span>&nbsp;<span class="builtintype" id="1399233">rune</span><span class="op" id="1399237">)</span>&nbsp;<span class="builtintype" id="1399239">bool</span>&nbsp;<span class="op" id="1399244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399247"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399248">.</span><span class="ident" id="1399249">skipSpace</span><span class="op" id="1399258">(</span><span class="ident" id="1399259">false</span><span class="op" id="1399264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399267"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399268">.</span><span class="ident" id="1399269">notEOF</span><span class="op" id="1399275">(</span><span class="op" id="1399276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399279">if</span>&nbsp;<span class="op" id="1399282">!</span><span class="ident" id="1399283"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399284">.</span><span class="ident" id="1399285">okVerb</span><span class="op" id="1399291">(</span><span class="ident" id="1399292"><a href="/fmt/scan.go.html#1399228">verb</a></span><span class="op" id="1399296">,</span>&nbsp;<span class="string" id="1399298">&#34;tv&#34;</span><span class="op" id="1399302">,</span>&nbsp;<span class="string" id="1399304">&#34;boolean&#34;</span><span class="op" id="1399313">)</span>&nbsp;<span class="op" id="1399315">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399319">return</span>&nbsp;<span class="ident" id="1399326">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1399336">//&nbsp;Syntax-checking&nbsp;a&nbsp;boolean&nbsp;is&nbsp;annoying.&nbsp;&nbsp;We&#39;re&nbsp;not&nbsp;fastidious&nbsp;about&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399413">switch</span>&nbsp;<span class="ident" id="1399420"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399421">.</span><span class="ident" id="1399422">getRune</span><span class="op" id="1399429">(</span><span class="op" id="1399430">)</span>&nbsp;<span class="op" id="1399432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399435">case</span>&nbsp;<span class="string" id="1399440">&#39;0&#39;</span><span class="op" id="1399443">:</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399447">return</span>&nbsp;<span class="ident" id="1399454">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399461">case</span>&nbsp;<span class="string" id="1399466">&#39;1&#39;</span><span class="op" id="1399469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399473">return</span>&nbsp;<span class="ident" id="1399480">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399486">case</span>&nbsp;<span class="string" id="1399491">&#39;t&#39;</span><span class="op" id="1399494">,</span>&nbsp;<span class="string" id="1399496">&#39;T&#39;</span><span class="op" id="1399499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399503">if</span>&nbsp;<span class="ident" id="1399506"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399507">.</span><span class="ident" id="1399508">accept</span><span class="op" id="1399514">(</span><span class="string" id="1399515">&#34;rR&#34;</span><span class="op" id="1399519">)</span>&nbsp;<span class="op" id="1399521">&amp;&amp;</span>&nbsp;<span class="op" id="1399524">(</span><span class="op" id="1399525">!</span><span class="ident" id="1399526"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399527">.</span><span class="ident" id="1399528">accept</span><span class="op" id="1399534">(</span><span class="string" id="1399535">&#34;uU&#34;</span><span class="op" id="1399539">)</span>&nbsp;<span class="op" id="1399541">||</span>&nbsp;<span class="op" id="1399544">!</span><span class="ident" id="1399545"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399546">.</span><span class="ident" id="1399547">accept</span><span class="op" id="1399553">(</span><span class="string" id="1399554">&#34;eE&#34;</span><span class="op" id="1399558">)</span><span class="op" id="1399559">)</span>&nbsp;<span class="op" id="1399561">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399566"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399567">.</span><span class="builtintype" id="1399568">error</span><span class="op" id="1399573">(</span><span class="ident" id="1399574"><a href="/fmt/scan.go.html#1397696">boolError</a></span><span class="op" id="1399583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399591">return</span>&nbsp;<span class="ident" id="1399598">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399604">case</span>&nbsp;<span class="string" id="1399609">&#39;f&#39;</span><span class="op" id="1399612">,</span>&nbsp;<span class="string" id="1399614">&#39;F&#39;</span><span class="op" id="1399617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399621">if</span>&nbsp;<span class="ident" id="1399624"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399625">.</span><span class="ident" id="1399626">accept</span><span class="op" id="1399632">(</span><span class="string" id="1399633">&#34;aA&#34;</span><span class="op" id="1399637">)</span>&nbsp;<span class="op" id="1399639">&amp;&amp;</span>&nbsp;<span class="op" id="1399642">(</span><span class="op" id="1399643">!</span><span class="ident" id="1399644"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399645">.</span><span class="ident" id="1399646">accept</span><span class="op" id="1399652">(</span><span class="string" id="1399653">&#34;lL&#34;</span><span class="op" id="1399657">)</span>&nbsp;<span class="op" id="1399659">||</span>&nbsp;<span class="op" id="1399662">!</span><span class="ident" id="1399663"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399664">.</span><span class="ident" id="1399665">accept</span><span class="op" id="1399671">(</span><span class="string" id="1399672">&#34;sS&#34;</span><span class="op" id="1399676">)</span>&nbsp;<span class="op" id="1399678">||</span>&nbsp;<span class="op" id="1399681">!</span><span class="ident" id="1399682"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399683">.</span><span class="ident" id="1399684">accept</span><span class="op" id="1399690">(</span><span class="string" id="1399691">&#34;eE&#34;</span><span class="op" id="1399695">)</span><span class="op" id="1399696">)</span>&nbsp;<span class="op" id="1399698">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399703"><a href="/fmt/scan.go.html#1399212">s</a></span><span class="op" id="1399704">.</span><span class="builtintype" id="1399705">error</span><span class="op" id="1399710">(</span><span class="ident" id="1399711"><a href="/fmt/scan.go.html#1397696">boolError</a></span><span class="op" id="1399720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399728">return</span>&nbsp;<span class="ident" id="1399735">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1399742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1399745">return</span>&nbsp;<span class="ident" id="1399752">false</span><br>
<span class="lineno">575</span><span class="op" id="1399758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1399761">//&nbsp;Numerical&nbsp;elements</span><br>
<span class="lineno"></span><span class="keyword" id="1399783">const</span>&nbsp;<span class="op" id="1399789">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399792">binaryDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399810">=</span>&nbsp;<span class="string" id="1399812">&#34;01&#34;</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399818">octalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399836">=</span>&nbsp;<span class="string" id="1399838">&#34;01234567&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399850">decimalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399868">=</span>&nbsp;<span class="string" id="1399870">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399884">hexadecimalDigits</span>&nbsp;<span class="op" id="1399902">=</span>&nbsp;<span class="string" id="1399904">&#34;0123456789aAbBcCdDeEfF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399930">sign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399948">=</span>&nbsp;<span class="string" id="1399950">&#34;+-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399956">period</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399974">=</span>&nbsp;<span class="string" id="1399976">&#34;.&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1399981">exponent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1399999">=</span>&nbsp;<span class="string" id="1400001">&#34;eEp&#34;</span><br>
<span class="lineno"></span><span class="op" id="1400007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1400010">//&nbsp;getBase&nbsp;returns&nbsp;the&nbsp;numeric&nbsp;base&nbsp;represented&nbsp;by&nbsp;the&nbsp;verb&nbsp;and&nbsp;its&nbsp;digit&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1400092">func</span>&nbsp;<span class="op" id="1400097">(</span><span class="ident" id="1400098">s</span>&nbsp;<span class="op" id="1400100">*</span><span class="ident" id="1400101"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1400103">)</span>&nbsp;<span class="ident" id="1400105">getBase</span><span class="op" id="1400112">(</span><span class="ident" id="1400113">verb</span>&nbsp;<span class="builtintype" id="1400118">rune</span><span class="op" id="1400122">)</span>&nbsp;<span class="op" id="1400124">(</span><span class="ident" id="1400125">base</span>&nbsp;<span class="builtintype" id="1400130">int</span><span class="op" id="1400133">,</span>&nbsp;<span class="ident" id="1400135">digits</span>&nbsp;<span class="builtintype" id="1400142">string</span><span class="op" id="1400148">)</span>&nbsp;<span class="op" id="1400150">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400153"><a href="/fmt/scan.go.html#1400098">s</a></span><span class="op" id="1400154">.</span><span class="ident" id="1400155">okVerb</span><span class="op" id="1400161">(</span><span class="ident" id="1400162"><a href="/fmt/scan.go.html#1400113">verb</a></span><span class="op" id="1400166">,</span>&nbsp;<span class="string" id="1400168">&#34;bdoUxXv&#34;</span><span class="op" id="1400177">,</span>&nbsp;<span class="string" id="1400179">&#34;integer&#34;</span><span class="op" id="1400188">)</span>&nbsp;<span class="comment" id="1400190">//&nbsp;sets&nbsp;s.err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400205"><a href="/fmt/scan.go.html#1400125">base</a></span>&nbsp;<span class="op" id="1400210">=</span>&nbsp;<span class="num" id="1400212">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400216"><a href="/fmt/scan.go.html#1400135">digits</a></span>&nbsp;<span class="op" id="1400223">=</span>&nbsp;<span class="ident" id="1400225"><a href="/fmt/scan.go.html#1399850">decimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400240">switch</span>&nbsp;<span class="ident" id="1400247"><a href="/fmt/scan.go.html#1400113">verb</a></span>&nbsp;<span class="op" id="1400252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400255">case</span>&nbsp;<span class="string" id="1400260">&#39;b&#39;</span><span class="op" id="1400263">:</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400267"><a href="/fmt/scan.go.html#1400125">base</a></span>&nbsp;<span class="op" id="1400272">=</span>&nbsp;<span class="num" id="1400274">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400278"><a href="/fmt/scan.go.html#1400135">digits</a></span>&nbsp;<span class="op" id="1400285">=</span>&nbsp;<span class="ident" id="1400287"><a href="/fmt/scan.go.html#1399792">binaryDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400301">case</span>&nbsp;<span class="string" id="1400306">&#39;o&#39;</span><span class="op" id="1400309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400313"><a href="/fmt/scan.go.html#1400125">base</a></span>&nbsp;<span class="op" id="1400318">=</span>&nbsp;<span class="num" id="1400320">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400324"><a href="/fmt/scan.go.html#1400135">digits</a></span>&nbsp;<span class="op" id="1400331">=</span>&nbsp;<span class="ident" id="1400333"><a href="/fmt/scan.go.html#1399818">octalDigits</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400346">case</span>&nbsp;<span class="string" id="1400351">&#39;x&#39;</span><span class="op" id="1400354">,</span>&nbsp;<span class="string" id="1400356">&#39;X&#39;</span><span class="op" id="1400359">,</span>&nbsp;<span class="string" id="1400361">&#39;U&#39;</span><span class="op" id="1400364">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400368"><a href="/fmt/scan.go.html#1400125">base</a></span>&nbsp;<span class="op" id="1400373">=</span>&nbsp;<span class="num" id="1400375">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400380"><a href="/fmt/scan.go.html#1400135">digits</a></span>&nbsp;<span class="op" id="1400387">=</span>&nbsp;<span class="ident" id="1400389"><a href="/fmt/scan.go.html#1399884">hexadecimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400411">return</span><br>
<span class="lineno">605</span><span class="op" id="1400418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1400421">//&nbsp;scanNumber&nbsp;returns&nbsp;the&nbsp;numerical&nbsp;string&nbsp;with&nbsp;specified&nbsp;digits&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="keyword" id="1400501">func</span>&nbsp;<span class="op" id="1400506">(</span><span class="ident" id="1400507">s</span>&nbsp;<span class="op" id="1400509">*</span><span class="ident" id="1400510"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1400512">)</span>&nbsp;<span class="ident" id="1400514">scanNumber</span><span class="op" id="1400524">(</span><span class="ident" id="1400525">digits</span>&nbsp;<span class="builtintype" id="1400532">string</span><span class="op" id="1400538">,</span>&nbsp;<span class="ident" id="1400540">haveDigits</span>&nbsp;<span class="builtintype" id="1400551">bool</span><span class="op" id="1400555">)</span>&nbsp;<span class="builtintype" id="1400557">string</span>&nbsp;<span class="op" id="1400564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400567">if</span>&nbsp;<span class="op" id="1400570">!</span><span class="ident" id="1400571"><a href="/fmt/scan.go.html#1400540">haveDigits</a></span>&nbsp;<span class="op" id="1400582">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400586"><a href="/fmt/scan.go.html#1400507">s</a></span><span class="op" id="1400587">.</span><span class="ident" id="1400588">notEOF</span><span class="op" id="1400594">(</span><span class="op" id="1400595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400599">if</span>&nbsp;<span class="op" id="1400602">!</span><span class="ident" id="1400603"><a href="/fmt/scan.go.html#1400507">s</a></span><span class="op" id="1400604">.</span><span class="ident" id="1400605">accept</span><span class="op" id="1400611">(</span><span class="ident" id="1400612"><a href="/fmt/scan.go.html#1400525">digits</a></span><span class="op" id="1400618">)</span>&nbsp;<span class="op" id="1400620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400625"><a href="/fmt/scan.go.html#1400507">s</a></span><span class="op" id="1400626">.</span><span class="ident" id="1400627">errorString</span><span class="op" id="1400638">(</span><span class="string" id="1400639">&#34;expected&nbsp;integer&#34;</span><span class="op" id="1400657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400664">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400667">for</span>&nbsp;<span class="ident" id="1400671"><a href="/fmt/scan.go.html#1400507">s</a></span><span class="op" id="1400672">.</span><span class="ident" id="1400673">accept</span><span class="op" id="1400679">(</span><span class="ident" id="1400680"><a href="/fmt/scan.go.html#1400525">digits</a></span><span class="op" id="1400686">)</span>&nbsp;<span class="op" id="1400688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400694">return</span>&nbsp;<span class="builtintype" id="1400701">string</span><span class="op" id="1400707">(</span><span class="ident" id="1400708"><a href="/fmt/scan.go.html#1400507">s</a></span><span class="op" id="1400709">.</span><span class="ident" id="1400710">buf</span><span class="op" id="1400713">)</span><br>
<span class="lineno"></span><span class="op" id="1400715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="1400718">//&nbsp;scanRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;value&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="1400772">func</span>&nbsp;<span class="op" id="1400777">(</span><span class="ident" id="1400778">s</span>&nbsp;<span class="op" id="1400780">*</span><span class="ident" id="1400781"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1400783">)</span>&nbsp;<span class="ident" id="1400785">scanRune</span><span class="op" id="1400793">(</span><span class="ident" id="1400794">bitSize</span>&nbsp;<span class="builtintype" id="1400802">int</span><span class="op" id="1400805">)</span>&nbsp;<span class="ident" id="1400807">int64</span>&nbsp;<span class="op" id="1400813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400816"><a href="/fmt/scan.go.html#1400778">s</a></span><span class="op" id="1400817">.</span><span class="ident" id="1400818">notEOF</span><span class="op" id="1400824">(</span><span class="op" id="1400825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400828">r</span>&nbsp;<span class="op" id="1400830">:=</span>&nbsp;<span class="ident" id="1400833">int64</span><span class="op" id="1400838">(</span><span class="ident" id="1400839"><a href="/fmt/scan.go.html#1400778">s</a></span><span class="op" id="1400840">.</span><span class="ident" id="1400841">getRune</span><span class="op" id="1400848">(</span><span class="op" id="1400849">)</span><span class="op" id="1400850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400853">n</span>&nbsp;<span class="op" id="1400855">:=</span>&nbsp;<span class="builtintype" id="1400858">uint</span><span class="op" id="1400862">(</span><span class="ident" id="1400863"><a href="/fmt/scan.go.html#1400794">bitSize</a></span><span class="op" id="1400870">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400873">x</span>&nbsp;<span class="op" id="1400875">:=</span>&nbsp;<span class="op" id="1400878">(</span><span class="ident" id="1400879"><a href="/fmt/scan.go.html#1400828">r</a></span>&nbsp;<span class="op" id="1400881">&lt;&lt;</span>&nbsp;<span class="op" id="1400884">(</span><span class="num" id="1400885">64</span>&nbsp;<span class="op" id="1400888">-</span>&nbsp;<span class="ident" id="1400890"><a href="/fmt/scan.go.html#1400853">n</a></span><span class="op" id="1400891">)</span><span class="op" id="1400892">)</span>&nbsp;<span class="op" id="1400894">&gt;&gt;</span>&nbsp;<span class="op" id="1400897">(</span><span class="num" id="1400898">64</span>&nbsp;<span class="op" id="1400901">-</span>&nbsp;<span class="ident" id="1400903"><a href="/fmt/scan.go.html#1400853">n</a></span><span class="op" id="1400904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400907">if</span>&nbsp;<span class="ident" id="1400910"><a href="/fmt/scan.go.html#1400873">x</a></span>&nbsp;<span class="op" id="1400912">!=</span>&nbsp;<span class="ident" id="1400915"><a href="/fmt/scan.go.html#1400828">r</a></span>&nbsp;<span class="op" id="1400917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400921"><a href="/fmt/scan.go.html#1400778">s</a></span><span class="op" id="1400922">.</span><span class="ident" id="1400923">errorString</span><span class="op" id="1400934">(</span><span class="string" id="1400935">&#34;overflow&nbsp;on&nbsp;character&nbsp;value&nbsp;&#34;</span>&nbsp;<span class="op" id="1400966">+</span>&nbsp;<span class="builtintype" id="1400968">string</span><span class="op" id="1400974">(</span><span class="ident" id="1400975"><a href="/fmt/scan.go.html#1400828">r</a></span><span class="op" id="1400976">)</span><span class="op" id="1400977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400983">return</span>&nbsp;<span class="ident" id="1400990"><a href="/fmt/scan.go.html#1400828">r</a></span><br>
<span class="lineno">630</span><span class="op" id="1400992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1400995">//&nbsp;scanBasePrefix&nbsp;reports&nbsp;whether&nbsp;the&nbsp;integer&nbsp;begins&nbsp;with&nbsp;a&nbsp;0&nbsp;or&nbsp;0x,</span><br>
<span class="lineno"></span><span class="comment" id="1401064">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;base,&nbsp;digit&nbsp;string,&nbsp;and&nbsp;whether&nbsp;a&nbsp;zero&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="1401133">//&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;the&nbsp;verb&nbsp;is&nbsp;%v.</span><br>
<span class="lineno">635</span><span class="keyword" id="1401173">func</span>&nbsp;<span class="op" id="1401178">(</span><span class="ident" id="1401179">s</span>&nbsp;<span class="op" id="1401181">*</span><span class="ident" id="1401182"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1401184">)</span>&nbsp;<span class="ident" id="1401186">scanBasePrefix</span><span class="op" id="1401200">(</span><span class="op" id="1401201">)</span>&nbsp;<span class="op" id="1401203">(</span><span class="ident" id="1401204">base</span>&nbsp;<span class="builtintype" id="1401209">int</span><span class="op" id="1401212">,</span>&nbsp;<span class="ident" id="1401214">digits</span>&nbsp;<span class="builtintype" id="1401221">string</span><span class="op" id="1401227">,</span>&nbsp;<span class="ident" id="1401229">found</span>&nbsp;<span class="builtintype" id="1401235">bool</span><span class="op" id="1401239">)</span>&nbsp;<span class="op" id="1401241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401244">if</span>&nbsp;<span class="op" id="1401247">!</span><span class="ident" id="1401248"><a href="/fmt/scan.go.html#1401179">s</a></span><span class="op" id="1401249">.</span><span class="ident" id="1401250">peek</span><span class="op" id="1401254">(</span><span class="string" id="1401255">&#34;0&#34;</span><span class="op" id="1401258">)</span>&nbsp;<span class="op" id="1401260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401264">return</span>&nbsp;<span class="num" id="1401271">10</span><span class="op" id="1401273">,</span>&nbsp;<span class="ident" id="1401275"><a href="/fmt/scan.go.html#1399850">decimalDigits</a></span><span class="op" id="1401288">,</span>&nbsp;<span class="ident" id="1401290">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401300"><a href="/fmt/scan.go.html#1401179">s</a></span><span class="op" id="1401301">.</span><span class="ident" id="1401302">accept</span><span class="op" id="1401308">(</span><span class="string" id="1401309">&#34;0&#34;</span><span class="op" id="1401312">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401315"><a href="/fmt/scan.go.html#1401229">found</a></span>&nbsp;<span class="op" id="1401321">=</span>&nbsp;<span class="ident" id="1401323">true</span>&nbsp;<span class="comment" id="1401328">//&nbsp;We&#39;ve&nbsp;put&nbsp;a&nbsp;digit&nbsp;into&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1401373">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;&#39;0&#39;&nbsp;&amp;&amp;&nbsp;&#39;0x&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401407"><a href="/fmt/scan.go.html#1401204">base</a></span><span class="op" id="1401411">,</span>&nbsp;<span class="ident" id="1401413"><a href="/fmt/scan.go.html#1401214">digits</a></span>&nbsp;<span class="op" id="1401420">=</span>&nbsp;<span class="num" id="1401422">8</span><span class="op" id="1401423">,</span>&nbsp;<span class="ident" id="1401425"><a href="/fmt/scan.go.html#1399818">octalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401438">if</span>&nbsp;<span class="ident" id="1401441"><a href="/fmt/scan.go.html#1401179">s</a></span><span class="op" id="1401442">.</span><span class="ident" id="1401443">peek</span><span class="op" id="1401447">(</span><span class="string" id="1401448">&#34;xX&#34;</span><span class="op" id="1401452">)</span>&nbsp;<span class="op" id="1401454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401458"><a href="/fmt/scan.go.html#1401179">s</a></span><span class="op" id="1401459">.</span><span class="ident" id="1401460">consume</span><span class="op" id="1401467">(</span><span class="string" id="1401468">&#34;xX&#34;</span><span class="op" id="1401472">,</span>&nbsp;<span class="ident" id="1401474">false</span><span class="op" id="1401479">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401483"><a href="/fmt/scan.go.html#1401204">base</a></span><span class="op" id="1401487">,</span>&nbsp;<span class="ident" id="1401489"><a href="/fmt/scan.go.html#1401214">digits</a></span>&nbsp;<span class="op" id="1401496">=</span>&nbsp;<span class="num" id="1401498">16</span><span class="op" id="1401500">,</span>&nbsp;<span class="ident" id="1401502"><a href="/fmt/scan.go.html#1399884">hexadecimalDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401524">return</span><br>
<span class="lineno"></span><span class="op" id="1401531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="1401534">//&nbsp;scanInt&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;integer&nbsp;represented&nbsp;by&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="1401602">//&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno"></span><span class="keyword" id="1401666">func</span>&nbsp;<span class="op" id="1401671">(</span><span class="ident" id="1401672">s</span>&nbsp;<span class="op" id="1401674">*</span><span class="ident" id="1401675"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1401677">)</span>&nbsp;<span class="ident" id="1401679">scanInt</span><span class="op" id="1401686">(</span><span class="ident" id="1401687">verb</span>&nbsp;<span class="builtintype" id="1401692">rune</span><span class="op" id="1401696">,</span>&nbsp;<span class="ident" id="1401698">bitSize</span>&nbsp;<span class="builtintype" id="1401706">int</span><span class="op" id="1401709">)</span>&nbsp;<span class="ident" id="1401711">int64</span>&nbsp;<span class="op" id="1401717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401720">if</span>&nbsp;<span class="ident" id="1401723"><a href="/fmt/scan.go.html#1401687">verb</a></span>&nbsp;<span class="op" id="1401728">==</span>&nbsp;<span class="string" id="1401731">&#39;c&#39;</span>&nbsp;<span class="op" id="1401735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401739">return</span>&nbsp;<span class="ident" id="1401746"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401747">.</span><span class="ident" id="1401748">scanRune</span><span class="op" id="1401756">(</span><span class="ident" id="1401757"><a href="/fmt/scan.go.html#1401698">bitSize</a></span><span class="op" id="1401764">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401770"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401771">.</span><span class="ident" id="1401772">skipSpace</span><span class="op" id="1401781">(</span><span class="ident" id="1401782">false</span><span class="op" id="1401787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401790"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401791">.</span><span class="ident" id="1401792">notEOF</span><span class="op" id="1401798">(</span><span class="op" id="1401799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401802">base</span><span class="op" id="1401806">,</span>&nbsp;<span class="ident" id="1401808">digits</span>&nbsp;<span class="op" id="1401815">:=</span>&nbsp;<span class="ident" id="1401818"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401819">.</span><span class="ident" id="1401820">getBase</span><span class="op" id="1401827">(</span><span class="ident" id="1401828"><a href="/fmt/scan.go.html#1401687">verb</a></span><span class="op" id="1401832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401835">haveDigits</span>&nbsp;<span class="op" id="1401846">:=</span>&nbsp;<span class="ident" id="1401849">false</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401856">if</span>&nbsp;<span class="ident" id="1401859"><a href="/fmt/scan.go.html#1401687">verb</a></span>&nbsp;<span class="op" id="1401864">==</span>&nbsp;<span class="string" id="1401867">&#39;U&#39;</span>&nbsp;<span class="op" id="1401871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401875">if</span>&nbsp;<span class="op" id="1401878">!</span><span class="ident" id="1401879"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401880">.</span><span class="ident" id="1401881">consume</span><span class="op" id="1401888">(</span><span class="string" id="1401889">&#34;U&#34;</span><span class="op" id="1401892">,</span>&nbsp;<span class="ident" id="1401894">false</span><span class="op" id="1401899">)</span>&nbsp;<span class="op" id="1401901">||</span>&nbsp;<span class="op" id="1401904">!</span><span class="ident" id="1401905"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401906">.</span><span class="ident" id="1401907">consume</span><span class="op" id="1401914">(</span><span class="string" id="1401915">&#34;+&#34;</span><span class="op" id="1401918">,</span>&nbsp;<span class="ident" id="1401920">false</span><span class="op" id="1401925">)</span>&nbsp;<span class="op" id="1401927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401932"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401933">.</span><span class="ident" id="1401934">errorString</span><span class="op" id="1401945">(</span><span class="string" id="1401946">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="1401967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401974">}</span>&nbsp;<span class="keyword" id="1401976">else</span>&nbsp;<span class="op" id="1401981">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401985"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1401986">.</span><span class="ident" id="1401987">accept</span><span class="op" id="1401993">(</span><span class="ident" id="1401994"><a href="/fmt/scan.go.html#1399930">sign</a></span><span class="op" id="1401998">)</span>&nbsp;<span class="comment" id="1402000">//&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;sign,&nbsp;it&nbsp;will&nbsp;be&nbsp;left&nbsp;in&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402061">if</span>&nbsp;<span class="ident" id="1402064"><a href="/fmt/scan.go.html#1401687">verb</a></span>&nbsp;<span class="op" id="1402069">==</span>&nbsp;<span class="string" id="1402072">&#39;v&#39;</span>&nbsp;<span class="op" id="1402076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402081"><a href="/fmt/scan.go.html#1401802">base</a></span><span class="op" id="1402085">,</span>&nbsp;<span class="ident" id="1402087"><a href="/fmt/scan.go.html#1401808">digits</a></span><span class="op" id="1402093">,</span>&nbsp;<span class="ident" id="1402095"><a href="/fmt/scan.go.html#1401835">haveDigits</a></span>&nbsp;<span class="op" id="1402106">=</span>&nbsp;<span class="ident" id="1402108"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1402109">.</span><span class="ident" id="1402110">scanBasePrefix</span><span class="op" id="1402124">(</span><span class="op" id="1402125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402132">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402135">tok</span>&nbsp;<span class="op" id="1402139">:=</span>&nbsp;<span class="ident" id="1402142"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1402143">.</span><span class="ident" id="1402144">scanNumber</span><span class="op" id="1402154">(</span><span class="ident" id="1402155"><a href="/fmt/scan.go.html#1401808">digits</a></span><span class="op" id="1402161">,</span>&nbsp;<span class="ident" id="1402163"><a href="/fmt/scan.go.html#1401835">haveDigits</a></span><span class="op" id="1402173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402176">i</span><span class="op" id="1402177">,</span>&nbsp;<span class="ident" id="1402179">err</span>&nbsp;<span class="op" id="1402183">:=</span>&nbsp;<span class="ident" id="1402186"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1402193">.</span><span class="ident" id="1402194">ParseInt</span><span class="op" id="1402202">(</span><span class="ident" id="1402203"><a href="/fmt/scan.go.html#1402135">tok</a></span><span class="op" id="1402206">,</span>&nbsp;<span class="ident" id="1402208"><a href="/fmt/scan.go.html#1401802">base</a></span><span class="op" id="1402212">,</span>&nbsp;<span class="num" id="1402214">64</span><span class="op" id="1402216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402219">if</span>&nbsp;<span class="ident" id="1402222"><a href="/fmt/scan.go.html#1402179">err</a></span>&nbsp;<span class="op" id="1402226">!=</span>&nbsp;<span class="ident" id="1402229">nil</span>&nbsp;<span class="op" id="1402233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402237"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1402238">.</span><span class="builtintype" id="1402239">error</span><span class="op" id="1402244">(</span><span class="ident" id="1402245"><a href="/fmt/scan.go.html#1402179">err</a></span><span class="op" id="1402248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402251">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402254">n</span>&nbsp;<span class="op" id="1402256">:=</span>&nbsp;<span class="builtintype" id="1402259">uint</span><span class="op" id="1402263">(</span><span class="ident" id="1402264"><a href="/fmt/scan.go.html#1401698">bitSize</a></span><span class="op" id="1402271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402274">x</span>&nbsp;<span class="op" id="1402276">:=</span>&nbsp;<span class="op" id="1402279">(</span><span class="ident" id="1402280"><a href="/fmt/scan.go.html#1402176">i</a></span>&nbsp;<span class="op" id="1402282">&lt;&lt;</span>&nbsp;<span class="op" id="1402285">(</span><span class="num" id="1402286">64</span>&nbsp;<span class="op" id="1402289">-</span>&nbsp;<span class="ident" id="1402291"><a href="/fmt/scan.go.html#1402254">n</a></span><span class="op" id="1402292">)</span><span class="op" id="1402293">)</span>&nbsp;<span class="op" id="1402295">&gt;&gt;</span>&nbsp;<span class="op" id="1402298">(</span><span class="num" id="1402299">64</span>&nbsp;<span class="op" id="1402302">-</span>&nbsp;<span class="ident" id="1402304"><a href="/fmt/scan.go.html#1402254">n</a></span><span class="op" id="1402305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402308">if</span>&nbsp;<span class="ident" id="1402311"><a href="/fmt/scan.go.html#1402274">x</a></span>&nbsp;<span class="op" id="1402313">!=</span>&nbsp;<span class="ident" id="1402316"><a href="/fmt/scan.go.html#1402176">i</a></span>&nbsp;<span class="op" id="1402318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402322"><a href="/fmt/scan.go.html#1401672">s</a></span><span class="op" id="1402323">.</span><span class="ident" id="1402324">errorString</span><span class="op" id="1402335">(</span><span class="string" id="1402336">&#34;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="1402365">+</span>&nbsp;<span class="ident" id="1402367"><a href="/fmt/scan.go.html#1402135">tok</a></span><span class="op" id="1402370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402373">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402376">return</span>&nbsp;<span class="ident" id="1402383"><a href="/fmt/scan.go.html#1402176">i</a></span><br>
<span class="lineno"></span><span class="op" id="1402385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1402388">//&nbsp;scanUint&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="1402454">//&nbsp;by&nbsp;the&nbsp;next&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno">685</span><span class="keyword" id="1402530">func</span>&nbsp;<span class="op" id="1402535">(</span><span class="ident" id="1402536">s</span>&nbsp;<span class="op" id="1402538">*</span><span class="ident" id="1402539"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1402541">)</span>&nbsp;<span class="ident" id="1402543">scanUint</span><span class="op" id="1402551">(</span><span class="ident" id="1402552">verb</span>&nbsp;<span class="builtintype" id="1402557">rune</span><span class="op" id="1402561">,</span>&nbsp;<span class="ident" id="1402563">bitSize</span>&nbsp;<span class="builtintype" id="1402571">int</span><span class="op" id="1402574">)</span>&nbsp;<span class="ident" id="1402576">uint64</span>&nbsp;<span class="op" id="1402583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402586">if</span>&nbsp;<span class="ident" id="1402589"><a href="/fmt/scan.go.html#1402552">verb</a></span>&nbsp;<span class="op" id="1402594">==</span>&nbsp;<span class="string" id="1402597">&#39;c&#39;</span>&nbsp;<span class="op" id="1402601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402605">return</span>&nbsp;<span class="ident" id="1402612">uint64</span><span class="op" id="1402618">(</span><span class="ident" id="1402619"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402620">.</span><span class="ident" id="1402621">scanRune</span><span class="op" id="1402629">(</span><span class="ident" id="1402630"><a href="/fmt/scan.go.html#1402563">bitSize</a></span><span class="op" id="1402637">)</span><span class="op" id="1402638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402644"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402645">.</span><span class="ident" id="1402646">skipSpace</span><span class="op" id="1402655">(</span><span class="ident" id="1402656">false</span><span class="op" id="1402661">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402664"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402665">.</span><span class="ident" id="1402666">notEOF</span><span class="op" id="1402672">(</span><span class="op" id="1402673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402676">base</span><span class="op" id="1402680">,</span>&nbsp;<span class="ident" id="1402682">digits</span>&nbsp;<span class="op" id="1402689">:=</span>&nbsp;<span class="ident" id="1402692"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402693">.</span><span class="ident" id="1402694">getBase</span><span class="op" id="1402701">(</span><span class="ident" id="1402702"><a href="/fmt/scan.go.html#1402552">verb</a></span><span class="op" id="1402706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402709">haveDigits</span>&nbsp;<span class="op" id="1402720">:=</span>&nbsp;<span class="ident" id="1402723">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402730">if</span>&nbsp;<span class="ident" id="1402733"><a href="/fmt/scan.go.html#1402552">verb</a></span>&nbsp;<span class="op" id="1402738">==</span>&nbsp;<span class="string" id="1402741">&#39;U&#39;</span>&nbsp;<span class="op" id="1402745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402749">if</span>&nbsp;<span class="op" id="1402752">!</span><span class="ident" id="1402753"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402754">.</span><span class="ident" id="1402755">consume</span><span class="op" id="1402762">(</span><span class="string" id="1402763">&#34;U&#34;</span><span class="op" id="1402766">,</span>&nbsp;<span class="ident" id="1402768">false</span><span class="op" id="1402773">)</span>&nbsp;<span class="op" id="1402775">||</span>&nbsp;<span class="op" id="1402778">!</span><span class="ident" id="1402779"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402780">.</span><span class="ident" id="1402781">consume</span><span class="op" id="1402788">(</span><span class="string" id="1402789">&#34;+&#34;</span><span class="op" id="1402792">,</span>&nbsp;<span class="ident" id="1402794">false</span><span class="op" id="1402799">)</span>&nbsp;<span class="op" id="1402801">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402806"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402807">.</span><span class="ident" id="1402808">errorString</span><span class="op" id="1402819">(</span><span class="string" id="1402820">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="1402841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402848">}</span>&nbsp;<span class="keyword" id="1402850">else</span>&nbsp;<span class="keyword" id="1402855">if</span>&nbsp;<span class="ident" id="1402858"><a href="/fmt/scan.go.html#1402552">verb</a></span>&nbsp;<span class="op" id="1402863">==</span>&nbsp;<span class="string" id="1402866">&#39;v&#39;</span>&nbsp;<span class="op" id="1402870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402874"><a href="/fmt/scan.go.html#1402676">base</a></span><span class="op" id="1402878">,</span>&nbsp;<span class="ident" id="1402880"><a href="/fmt/scan.go.html#1402682">digits</a></span><span class="op" id="1402886">,</span>&nbsp;<span class="ident" id="1402888"><a href="/fmt/scan.go.html#1402709">haveDigits</a></span>&nbsp;<span class="op" id="1402899">=</span>&nbsp;<span class="ident" id="1402901"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402902">.</span><span class="ident" id="1402903">scanBasePrefix</span><span class="op" id="1402917">(</span><span class="op" id="1402918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402921">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402924">tok</span>&nbsp;<span class="op" id="1402928">:=</span>&nbsp;<span class="ident" id="1402931"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1402932">.</span><span class="ident" id="1402933">scanNumber</span><span class="op" id="1402943">(</span><span class="ident" id="1402944"><a href="/fmt/scan.go.html#1402682">digits</a></span><span class="op" id="1402950">,</span>&nbsp;<span class="ident" id="1402952"><a href="/fmt/scan.go.html#1402709">haveDigits</a></span><span class="op" id="1402962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402965">i</span><span class="op" id="1402966">,</span>&nbsp;<span class="ident" id="1402968">err</span>&nbsp;<span class="op" id="1402972">:=</span>&nbsp;<span class="ident" id="1402975"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1402982">.</span><span class="ident" id="1402983">ParseUint</span><span class="op" id="1402992">(</span><span class="ident" id="1402993"><a href="/fmt/scan.go.html#1402924">tok</a></span><span class="op" id="1402996">,</span>&nbsp;<span class="ident" id="1402998"><a href="/fmt/scan.go.html#1402676">base</a></span><span class="op" id="1403002">,</span>&nbsp;<span class="num" id="1403004">64</span><span class="op" id="1403006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403009">if</span>&nbsp;<span class="ident" id="1403012"><a href="/fmt/scan.go.html#1402968">err</a></span>&nbsp;<span class="op" id="1403016">!=</span>&nbsp;<span class="ident" id="1403019">nil</span>&nbsp;<span class="op" id="1403023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403027"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1403028">.</span><span class="builtintype" id="1403029">error</span><span class="op" id="1403034">(</span><span class="ident" id="1403035"><a href="/fmt/scan.go.html#1402968">err</a></span><span class="op" id="1403038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403041">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403044">n</span>&nbsp;<span class="op" id="1403046">:=</span>&nbsp;<span class="builtintype" id="1403049">uint</span><span class="op" id="1403053">(</span><span class="ident" id="1403054"><a href="/fmt/scan.go.html#1402563">bitSize</a></span><span class="op" id="1403061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403064">x</span>&nbsp;<span class="op" id="1403066">:=</span>&nbsp;<span class="op" id="1403069">(</span><span class="ident" id="1403070"><a href="/fmt/scan.go.html#1402965">i</a></span>&nbsp;<span class="op" id="1403072">&lt;&lt;</span>&nbsp;<span class="op" id="1403075">(</span><span class="num" id="1403076">64</span>&nbsp;<span class="op" id="1403079">-</span>&nbsp;<span class="ident" id="1403081"><a href="/fmt/scan.go.html#1403044">n</a></span><span class="op" id="1403082">)</span><span class="op" id="1403083">)</span>&nbsp;<span class="op" id="1403085">&gt;&gt;</span>&nbsp;<span class="op" id="1403088">(</span><span class="num" id="1403089">64</span>&nbsp;<span class="op" id="1403092">-</span>&nbsp;<span class="ident" id="1403094"><a href="/fmt/scan.go.html#1403044">n</a></span><span class="op" id="1403095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403098">if</span>&nbsp;<span class="ident" id="1403101"><a href="/fmt/scan.go.html#1403064">x</a></span>&nbsp;<span class="op" id="1403103">!=</span>&nbsp;<span class="ident" id="1403106"><a href="/fmt/scan.go.html#1402965">i</a></span>&nbsp;<span class="op" id="1403108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403112"><a href="/fmt/scan.go.html#1402536">s</a></span><span class="op" id="1403113">.</span><span class="ident" id="1403114">errorString</span><span class="op" id="1403125">(</span><span class="string" id="1403126">&#34;unsigned&nbsp;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="1403164">+</span>&nbsp;<span class="ident" id="1403166"><a href="/fmt/scan.go.html#1402924">tok</a></span><span class="op" id="1403169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403172">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403175">return</span>&nbsp;<span class="ident" id="1403182"><a href="/fmt/scan.go.html#1402965">i</a></span><br>
<span class="lineno"></span><span class="op" id="1403184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1403187">//&nbsp;floatToken&nbsp;returns&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;starting&nbsp;here,&nbsp;no&nbsp;longer&nbsp;than&nbsp;swid</span><br>
<span class="lineno"></span><span class="comment" id="1403270">//&nbsp;if&nbsp;the&nbsp;width&nbsp;is&nbsp;specified.&nbsp;It&#39;s&nbsp;not&nbsp;rigorous&nbsp;about&nbsp;syntax&nbsp;because&nbsp;it&nbsp;doesn&#39;t&nbsp;check&nbsp;that</span><br>
<span class="lineno">715</span><span class="comment" id="1403361">//&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;some&nbsp;digits,&nbsp;but&nbsp;Atof&nbsp;will&nbsp;do&nbsp;that.</span><br>
<span class="lineno"></span><span class="keyword" id="1403417">func</span>&nbsp;<span class="op" id="1403422">(</span><span class="ident" id="1403423">s</span>&nbsp;<span class="op" id="1403425">*</span><span class="ident" id="1403426"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1403428">)</span>&nbsp;<span class="ident" id="1403430">floatToken</span><span class="op" id="1403440">(</span><span class="op" id="1403441">)</span>&nbsp;<span class="builtintype" id="1403443">string</span>&nbsp;<span class="op" id="1403450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403453"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403454">.</span><span class="ident" id="1403455">buf</span>&nbsp;<span class="op" id="1403459">=</span>&nbsp;<span class="ident" id="1403461"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403462">.</span><span class="ident" id="1403463">buf</span><span class="op" id="1403466">[</span><span class="op" id="1403467">:</span><span class="num" id="1403468">0</span><span class="op" id="1403469">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403472">//&nbsp;NaN?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403481">if</span>&nbsp;<span class="ident" id="1403484"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403485">.</span><span class="ident" id="1403486">accept</span><span class="op" id="1403492">(</span><span class="string" id="1403493">&#34;nN&#34;</span><span class="op" id="1403497">)</span>&nbsp;<span class="op" id="1403499">&amp;&amp;</span>&nbsp;<span class="ident" id="1403502"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403503">.</span><span class="ident" id="1403504">accept</span><span class="op" id="1403510">(</span><span class="string" id="1403511">&#34;aA&#34;</span><span class="op" id="1403515">)</span>&nbsp;<span class="op" id="1403517">&amp;&amp;</span>&nbsp;<span class="ident" id="1403520"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403521">.</span><span class="ident" id="1403522">accept</span><span class="op" id="1403528">(</span><span class="string" id="1403529">&#34;nN&#34;</span><span class="op" id="1403533">)</span>&nbsp;<span class="op" id="1403535">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403539">return</span>&nbsp;<span class="builtintype" id="1403546">string</span><span class="op" id="1403552">(</span><span class="ident" id="1403553"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403554">.</span><span class="ident" id="1403555">buf</span><span class="op" id="1403558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403564">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403582"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403583">.</span><span class="ident" id="1403584">accept</span><span class="op" id="1403590">(</span><span class="ident" id="1403591"><a href="/fmt/scan.go.html#1399930">sign</a></span><span class="op" id="1403595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403598">//&nbsp;Inf?</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403607">if</span>&nbsp;<span class="ident" id="1403610"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403611">.</span><span class="ident" id="1403612">accept</span><span class="op" id="1403618">(</span><span class="string" id="1403619">&#34;iI&#34;</span><span class="op" id="1403623">)</span>&nbsp;<span class="op" id="1403625">&amp;&amp;</span>&nbsp;<span class="ident" id="1403628"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403629">.</span><span class="ident" id="1403630">accept</span><span class="op" id="1403636">(</span><span class="string" id="1403637">&#34;nN&#34;</span><span class="op" id="1403641">)</span>&nbsp;<span class="op" id="1403643">&amp;&amp;</span>&nbsp;<span class="ident" id="1403646"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403647">.</span><span class="ident" id="1403648">accept</span><span class="op" id="1403654">(</span><span class="string" id="1403655">&#34;fF&#34;</span><span class="op" id="1403659">)</span>&nbsp;<span class="op" id="1403661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403665">return</span>&nbsp;<span class="builtintype" id="1403672">string</span><span class="op" id="1403678">(</span><span class="ident" id="1403679"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403680">.</span><span class="ident" id="1403681">buf</span><span class="op" id="1403684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403690">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403702">for</span>&nbsp;<span class="ident" id="1403706"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403707">.</span><span class="ident" id="1403708">accept</span><span class="op" id="1403714">(</span><span class="ident" id="1403715"><a href="/fmt/scan.go.html#1399850">decimalDigits</a></span><span class="op" id="1403728">)</span>&nbsp;<span class="op" id="1403730">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403736">//&nbsp;decimal&nbsp;point?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403755">if</span>&nbsp;<span class="ident" id="1403758"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403759">.</span><span class="ident" id="1403760">accept</span><span class="op" id="1403766">(</span><span class="ident" id="1403767"><a href="/fmt/scan.go.html#1399956">period</a></span><span class="op" id="1403773">)</span>&nbsp;<span class="op" id="1403775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403779">//&nbsp;fraction?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403794">for</span>&nbsp;<span class="ident" id="1403798"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403799">.</span><span class="ident" id="1403800">accept</span><span class="op" id="1403806">(</span><span class="ident" id="1403807"><a href="/fmt/scan.go.html#1399850">decimalDigits</a></span><span class="op" id="1403820">)</span>&nbsp;<span class="op" id="1403822">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403832">//&nbsp;exponent?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403846">if</span>&nbsp;<span class="ident" id="1403849"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403850">.</span><span class="ident" id="1403851">accept</span><span class="op" id="1403857">(</span><span class="ident" id="1403858"><a href="/fmt/scan.go.html#1399981">exponent</a></span><span class="op" id="1403866">)</span>&nbsp;<span class="op" id="1403868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403872">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403891"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403892">.</span><span class="ident" id="1403893">accept</span><span class="op" id="1403899">(</span><span class="ident" id="1403900"><a href="/fmt/scan.go.html#1399930">sign</a></span><span class="op" id="1403904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1403908">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403921">for</span>&nbsp;<span class="ident" id="1403925"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403926">.</span><span class="ident" id="1403927">accept</span><span class="op" id="1403933">(</span><span class="ident" id="1403934"><a href="/fmt/scan.go.html#1399850">decimalDigits</a></span><span class="op" id="1403947">)</span>&nbsp;<span class="op" id="1403949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403956">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403959">return</span>&nbsp;<span class="builtintype" id="1403966">string</span><span class="op" id="1403972">(</span><span class="ident" id="1403973"><a href="/fmt/scan.go.html#1403423">s</a></span><span class="op" id="1403974">.</span><span class="ident" id="1403975">buf</span><span class="op" id="1403978">)</span><br>
<span class="lineno"></span><span class="op" id="1403980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1403983">//&nbsp;complexTokens&nbsp;returns&nbsp;the&nbsp;real&nbsp;and&nbsp;imaginary&nbsp;parts&nbsp;of&nbsp;the&nbsp;complex&nbsp;number&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="comment" id="1404074">//&nbsp;The&nbsp;number&nbsp;might&nbsp;be&nbsp;parenthesized&nbsp;and&nbsp;has&nbsp;the&nbsp;format&nbsp;(N+Ni)&nbsp;where&nbsp;N&nbsp;is&nbsp;a&nbsp;floating-point</span><br>
<span class="lineno">750</span><span class="comment" id="1404165">//&nbsp;number&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;spaces&nbsp;within.</span><br>
<span class="lineno"></span><span class="keyword" id="1404207">func</span>&nbsp;<span class="op" id="1404212">(</span><span class="ident" id="1404213">s</span>&nbsp;<span class="op" id="1404215">*</span><span class="ident" id="1404216"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1404218">)</span>&nbsp;<span class="ident" id="1404220">complexTokens</span><span class="op" id="1404233">(</span><span class="op" id="1404234">)</span>&nbsp;<span class="op" id="1404236">(</span><span class="builtinfunc" id="1404237">real</span><span class="op" id="1404241">,</span>&nbsp;<span class="builtinfunc" id="1404243">imag</span>&nbsp;<span class="builtintype" id="1404248">string</span><span class="op" id="1404254">)</span>&nbsp;<span class="op" id="1404256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404259">//&nbsp;TODO:&nbsp;accept&nbsp;N&nbsp;and&nbsp;Ni&nbsp;independently?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404300">parens</span>&nbsp;<span class="op" id="1404307">:=</span>&nbsp;<span class="ident" id="1404310"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404311">.</span><span class="ident" id="1404312">accept</span><span class="op" id="1404318">(</span><span class="string" id="1404319">&#34;(&#34;</span><span class="op" id="1404322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1404325"><a href="/fmt/scan.go.html#1404237">real</a></span>&nbsp;<span class="op" id="1404330">=</span>&nbsp;<span class="ident" id="1404332"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404333">.</span><span class="ident" id="1404334">floatToken</span><span class="op" id="1404344">(</span><span class="op" id="1404345">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404348"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404349">.</span><span class="ident" id="1404350">buf</span>&nbsp;<span class="op" id="1404354">=</span>&nbsp;<span class="ident" id="1404356"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404357">.</span><span class="ident" id="1404358">buf</span><span class="op" id="1404361">[</span><span class="op" id="1404362">:</span><span class="num" id="1404363">0</span><span class="op" id="1404364">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404367">//&nbsp;Must&nbsp;now&nbsp;have&nbsp;a&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404393">if</span>&nbsp;<span class="op" id="1404396">!</span><span class="ident" id="1404397"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404398">.</span><span class="ident" id="1404399">accept</span><span class="op" id="1404405">(</span><span class="string" id="1404406">&#34;+-&#34;</span><span class="op" id="1404410">)</span>&nbsp;<span class="op" id="1404412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404416"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404417">.</span><span class="builtintype" id="1404418">error</span><span class="op" id="1404423">(</span><span class="ident" id="1404424"><a href="/fmt/scan.go.html#1397626">complexError</a></span><span class="op" id="1404436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404439">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404442">//&nbsp;Sign&nbsp;is&nbsp;now&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404468">imagSign</span>&nbsp;<span class="op" id="1404477">:=</span>&nbsp;<span class="builtintype" id="1404480">string</span><span class="op" id="1404486">(</span><span class="ident" id="1404487"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404488">.</span><span class="ident" id="1404489">buf</span><span class="op" id="1404492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1404495"><a href="/fmt/scan.go.html#1404243">imag</a></span>&nbsp;<span class="op" id="1404500">=</span>&nbsp;<span class="ident" id="1404502"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404503">.</span><span class="ident" id="1404504">floatToken</span><span class="op" id="1404514">(</span><span class="op" id="1404515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404518">if</span>&nbsp;<span class="op" id="1404521">!</span><span class="ident" id="1404522"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404523">.</span><span class="ident" id="1404524">accept</span><span class="op" id="1404530">(</span><span class="string" id="1404531">&#34;i&#34;</span><span class="op" id="1404534">)</span>&nbsp;<span class="op" id="1404536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404540"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404541">.</span><span class="builtintype" id="1404542">error</span><span class="op" id="1404547">(</span><span class="ident" id="1404548"><a href="/fmt/scan.go.html#1397626">complexError</a></span><span class="op" id="1404560">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404566">if</span>&nbsp;<span class="ident" id="1404569"><a href="/fmt/scan.go.html#1404300">parens</a></span>&nbsp;<span class="op" id="1404576">&amp;&amp;</span>&nbsp;<span class="op" id="1404579">!</span><span class="ident" id="1404580"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404581">.</span><span class="ident" id="1404582">accept</span><span class="op" id="1404588">(</span><span class="string" id="1404589">&#34;)&#34;</span><span class="op" id="1404592">)</span>&nbsp;<span class="op" id="1404594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404598"><a href="/fmt/scan.go.html#1404213">s</a></span><span class="op" id="1404599">.</span><span class="builtintype" id="1404600">error</span><span class="op" id="1404605">(</span><span class="ident" id="1404606"><a href="/fmt/scan.go.html#1397626">complexError</a></span><span class="op" id="1404618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404624">return</span>&nbsp;<span class="builtinfunc" id="1404631"><a href="/fmt/scan.go.html#1404237">real</a></span><span class="op" id="1404635">,</span>&nbsp;<span class="ident" id="1404637"><a href="/fmt/scan.go.html#1404468">imagSign</a></span>&nbsp;<span class="op" id="1404646">+</span>&nbsp;<span class="builtinfunc" id="1404648"><a href="/fmt/scan.go.html#1404243">imag</a></span><br>
<span class="lineno">770</span><span class="op" id="1404653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1404656">//&nbsp;convertFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;to&nbsp;a&nbsp;float64value.</span><br>
<span class="lineno"></span><span class="keyword" id="1404711">func</span>&nbsp;<span class="op" id="1404716">(</span><span class="ident" id="1404717">s</span>&nbsp;<span class="op" id="1404719">*</span><span class="ident" id="1404720"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1404722">)</span>&nbsp;<span class="ident" id="1404724">convertFloat</span><span class="op" id="1404736">(</span><span class="ident" id="1404737">str</span>&nbsp;<span class="builtintype" id="1404741">string</span><span class="op" id="1404747">,</span>&nbsp;<span class="ident" id="1404749">n</span>&nbsp;<span class="builtintype" id="1404751">int</span><span class="op" id="1404754">)</span>&nbsp;<span class="builtintype" id="1404756">float64</span>&nbsp;<span class="op" id="1404764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404767">if</span>&nbsp;<span class="ident" id="1404770">p</span>&nbsp;<span class="op" id="1404772">:=</span>&nbsp;<span class="ident" id="1404775"><a href="/fmt/scan.go.html#1397758">indexRune</a></span><span class="op" id="1404784">(</span><span class="ident" id="1404785"><a href="/fmt/scan.go.html#1404737">str</a></span><span class="op" id="1404788">,</span>&nbsp;<span class="string" id="1404790">&#39;p&#39;</span><span class="op" id="1404793">)</span><span class="op" id="1404794">;</span>&nbsp;<span class="ident" id="1404796"><a href="/fmt/scan.go.html#1404770">p</a></span>&nbsp;<span class="op" id="1404798">&gt;=</span>&nbsp;<span class="num" id="1404801">0</span>&nbsp;<span class="op" id="1404803">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404807">//&nbsp;Atof&nbsp;doesn&#39;t&nbsp;handle&nbsp;power-of-2&nbsp;exponents,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404854">//&nbsp;but&nbsp;they&#39;re&nbsp;easy&nbsp;to&nbsp;evaluate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404889">f</span><span class="op" id="1404890">,</span>&nbsp;<span class="ident" id="1404892">err</span>&nbsp;<span class="op" id="1404896">:=</span>&nbsp;<span class="ident" id="1404899"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1404906">.</span><span class="ident" id="1404907">ParseFloat</span><span class="op" id="1404917">(</span><span class="ident" id="1404918"><a href="/fmt/scan.go.html#1404737">str</a></span><span class="op" id="1404921">[</span><span class="op" id="1404922">:</span><span class="ident" id="1404923"><a href="/fmt/scan.go.html#1404770">p</a></span><span class="op" id="1404924">]</span><span class="op" id="1404925">,</span>&nbsp;<span class="ident" id="1404927"><a href="/fmt/scan.go.html#1404749">n</a></span><span class="op" id="1404928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404932">if</span>&nbsp;<span class="ident" id="1404935"><a href="/fmt/scan.go.html#1404892">err</a></span>&nbsp;<span class="op" id="1404939">!=</span>&nbsp;<span class="ident" id="1404942">nil</span>&nbsp;<span class="op" id="1404946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404951">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404985">if</span>&nbsp;<span class="ident" id="1404988">e</span><span class="op" id="1404989">,</span>&nbsp;<span class="ident" id="1404991">ok</span>&nbsp;<span class="op" id="1404994">:=</span>&nbsp;<span class="ident" id="1404997"><a href="/fmt/scan.go.html#1404892">err</a></span><span class="op" id="1405000">.</span><span class="op" id="1405001">(</span><span class="op" id="1405002">*</span><span class="ident" id="1405003"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1405010">.</span><span class="ident" id="1405011">NumError</span><span class="op" id="1405019">)</span><span class="op" id="1405020">;</span>&nbsp;<span class="ident" id="1405022"><a href="/fmt/scan.go.html#1404991">ok</a></span>&nbsp;<span class="op" id="1405025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405031"><a href="/fmt/scan.go.html#1404988">e</a></span><span class="op" id="1405032">.</span><span class="ident" id="1405033">Num</span>&nbsp;<span class="op" id="1405037">=</span>&nbsp;<span class="ident" id="1405039"><a href="/fmt/scan.go.html#1404737">str</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405051"><a href="/fmt/scan.go.html#1404717">s</a></span><span class="op" id="1405052">.</span><span class="builtintype" id="1405053">error</span><span class="op" id="1405058">(</span><span class="ident" id="1405059"><a href="/fmt/scan.go.html#1404892">err</a></span><span class="op" id="1405062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405066">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405070">m</span><span class="op" id="1405071">,</span>&nbsp;<span class="ident" id="1405073"><a href="/fmt/scan.go.html#1404892">err</a></span>&nbsp;<span class="op" id="1405077">:=</span>&nbsp;<span class="ident" id="1405080"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1405087">.</span><span class="ident" id="1405088">Atoi</span><span class="op" id="1405092">(</span><span class="ident" id="1405093"><a href="/fmt/scan.go.html#1404737">str</a></span><span class="op" id="1405096">[</span><span class="ident" id="1405097"><a href="/fmt/scan.go.html#1404770">p</a></span><span class="op" id="1405098">+</span><span class="num" id="1405099">1</span><span class="op" id="1405100">:</span><span class="op" id="1405101">]</span><span class="op" id="1405102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405106">if</span>&nbsp;<span class="ident" id="1405109"><a href="/fmt/scan.go.html#1404892">err</a></span>&nbsp;<span class="op" id="1405113">!=</span>&nbsp;<span class="ident" id="1405116">nil</span>&nbsp;<span class="op" id="1405120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1405125">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405159">if</span>&nbsp;<span class="ident" id="1405162">e</span><span class="op" id="1405163">,</span>&nbsp;<span class="ident" id="1405165">ok</span>&nbsp;<span class="op" id="1405168">:=</span>&nbsp;<span class="ident" id="1405171"><a href="/fmt/scan.go.html#1404892">err</a></span><span class="op" id="1405174">.</span><span class="op" id="1405175">(</span><span class="op" id="1405176">*</span><span class="ident" id="1405177"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1405184">.</span><span class="ident" id="1405185">NumError</span><span class="op" id="1405193">)</span><span class="op" id="1405194">;</span>&nbsp;<span class="ident" id="1405196"><a href="/fmt/scan.go.html#1405165">ok</a></span>&nbsp;<span class="op" id="1405199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405205"><a href="/fmt/scan.go.html#1405162">e</a></span><span class="op" id="1405206">.</span><span class="ident" id="1405207">Num</span>&nbsp;<span class="op" id="1405211">=</span>&nbsp;<span class="ident" id="1405213"><a href="/fmt/scan.go.html#1404737">str</a></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405225"><a href="/fmt/scan.go.html#1404717">s</a></span><span class="op" id="1405226">.</span><span class="builtintype" id="1405227">error</span><span class="op" id="1405232">(</span><span class="ident" id="1405233"><a href="/fmt/scan.go.html#1404892">err</a></span><span class="op" id="1405236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405244">return</span>&nbsp;<span class="ident" id="1405251"><a href="/fmt/scan.go.html#1384726">math</a></span><span class="op" id="1405255">.</span><span class="ident" id="1405256">Ldexp</span><span class="op" id="1405261">(</span><span class="ident" id="1405262"><a href="/fmt/scan.go.html#1404889">f</a></span><span class="op" id="1405263">,</span>&nbsp;<span class="ident" id="1405265"><a href="/fmt/scan.go.html#1405070">m</a></span><span class="op" id="1405266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405269">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405272">f</span><span class="op" id="1405273">,</span>&nbsp;<span class="ident" id="1405275">err</span>&nbsp;<span class="op" id="1405279">:=</span>&nbsp;<span class="ident" id="1405282"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1405289">.</span><span class="ident" id="1405290">ParseFloat</span><span class="op" id="1405300">(</span><span class="ident" id="1405301"><a href="/fmt/scan.go.html#1404737">str</a></span><span class="op" id="1405304">,</span>&nbsp;<span class="ident" id="1405306"><a href="/fmt/scan.go.html#1404749">n</a></span><span class="op" id="1405307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405310">if</span>&nbsp;<span class="ident" id="1405313"><a href="/fmt/scan.go.html#1405275">err</a></span>&nbsp;<span class="op" id="1405317">!=</span>&nbsp;<span class="ident" id="1405320">nil</span>&nbsp;<span class="op" id="1405324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405328"><a href="/fmt/scan.go.html#1404717">s</a></span><span class="op" id="1405329">.</span><span class="builtintype" id="1405330">error</span><span class="op" id="1405335">(</span><span class="ident" id="1405336"><a href="/fmt/scan.go.html#1405275">err</a></span><span class="op" id="1405339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405345">return</span>&nbsp;<span class="ident" id="1405352"><a href="/fmt/scan.go.html#1405272">f</a></span><br>
<span class="lineno">800</span><span class="op" id="1405354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1405357">//&nbsp;convertComplex&nbsp;converts&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;a&nbsp;complex128&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="1405422">//&nbsp;The&nbsp;atof&nbsp;argument&nbsp;is&nbsp;a&nbsp;type-specific&nbsp;reader&nbsp;for&nbsp;the&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="1405494">//&nbsp;If&nbsp;we&#39;re&nbsp;reading&nbsp;complex64,&nbsp;atof&nbsp;will&nbsp;parse&nbsp;float32s&nbsp;and&nbsp;convert&nbsp;them</span><br>
<span class="lineno">805</span><span class="comment" id="1405567">//&nbsp;to&nbsp;float64&#39;s&nbsp;to&nbsp;avoid&nbsp;reproducing&nbsp;this&nbsp;code&nbsp;for&nbsp;each&nbsp;complex&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="1405637">func</span>&nbsp;<span class="op" id="1405642">(</span><span class="ident" id="1405643">s</span>&nbsp;<span class="op" id="1405645">*</span><span class="ident" id="1405646"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1405648">)</span>&nbsp;<span class="ident" id="1405650">scanComplex</span><span class="op" id="1405661">(</span><span class="ident" id="1405662">verb</span>&nbsp;<span class="builtintype" id="1405667">rune</span><span class="op" id="1405671">,</span>&nbsp;<span class="ident" id="1405673">n</span>&nbsp;<span class="builtintype" id="1405675">int</span><span class="op" id="1405678">)</span>&nbsp;<span class="builtintype" id="1405680">complex128</span>&nbsp;<span class="op" id="1405691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405694">if</span>&nbsp;<span class="op" id="1405697">!</span><span class="ident" id="1405698"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405699">.</span><span class="ident" id="1405700">okVerb</span><span class="op" id="1405706">(</span><span class="ident" id="1405707"><a href="/fmt/scan.go.html#1405662">verb</a></span><span class="op" id="1405711">,</span>&nbsp;<span class="ident" id="1405713"><a href="/fmt/scan.go.html#1408501">floatVerbs</a></span><span class="op" id="1405723">,</span>&nbsp;<span class="string" id="1405725">&#34;complex&#34;</span><span class="op" id="1405734">)</span>&nbsp;<span class="op" id="1405736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405740">return</span>&nbsp;<span class="num" id="1405747">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405750">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405753"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405754">.</span><span class="ident" id="1405755">skipSpace</span><span class="op" id="1405764">(</span><span class="ident" id="1405765">false</span><span class="op" id="1405770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405773"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405774">.</span><span class="ident" id="1405775">notEOF</span><span class="op" id="1405781">(</span><span class="op" id="1405782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405785">sreal</span><span class="op" id="1405790">,</span>&nbsp;<span class="ident" id="1405792">simag</span>&nbsp;<span class="op" id="1405798">:=</span>&nbsp;<span class="ident" id="1405801"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405802">.</span><span class="ident" id="1405803">complexTokens</span><span class="op" id="1405816">(</span><span class="op" id="1405817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1405820">real</span>&nbsp;<span class="op" id="1405825">:=</span>&nbsp;<span class="ident" id="1405828"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405829">.</span><span class="ident" id="1405830">convertFloat</span><span class="op" id="1405842">(</span><span class="ident" id="1405843"><a href="/fmt/scan.go.html#1405785">sreal</a></span><span class="op" id="1405848">,</span>&nbsp;<span class="ident" id="1405850"><a href="/fmt/scan.go.html#1405673">n</a></span><span class="op" id="1405851">/</span><span class="num" id="1405852">2</span><span class="op" id="1405853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1405856">imag</span>&nbsp;<span class="op" id="1405861">:=</span>&nbsp;<span class="ident" id="1405864"><a href="/fmt/scan.go.html#1405643">s</a></span><span class="op" id="1405865">.</span><span class="ident" id="1405866">convertFloat</span><span class="op" id="1405878">(</span><span class="ident" id="1405879"><a href="/fmt/scan.go.html#1405792">simag</a></span><span class="op" id="1405884">,</span>&nbsp;<span class="ident" id="1405886"><a href="/fmt/scan.go.html#1405673">n</a></span><span class="op" id="1405887">/</span><span class="num" id="1405888">2</span><span class="op" id="1405889">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405892">return</span>&nbsp;<span class="builtinfunc" id="1405899">complex</span><span class="op" id="1405906">(</span><span class="builtinfunc" id="1405907"><a href="/fmt/scan.go.html#1405820">real</a></span><span class="op" id="1405911">,</span>&nbsp;<span class="builtinfunc" id="1405913"><a href="/fmt/scan.go.html#1405856">imag</a></span><span class="op" id="1405917">)</span><br>
<span class="lineno"></span><span class="op" id="1405919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1405922">//&nbsp;convertString&nbsp;returns&nbsp;the&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="1406000">//&nbsp;The&nbsp;format&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;determined&nbsp;by&nbsp;the&nbsp;verb.</span><br>
<span class="lineno">820</span><span class="keyword" id="1406054">func</span>&nbsp;<span class="op" id="1406059">(</span><span class="ident" id="1406060">s</span>&nbsp;<span class="op" id="1406062">*</span><span class="ident" id="1406063"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1406065">)</span>&nbsp;<span class="ident" id="1406067">convertString</span><span class="op" id="1406080">(</span><span class="ident" id="1406081">verb</span>&nbsp;<span class="builtintype" id="1406086">rune</span><span class="op" id="1406090">)</span>&nbsp;<span class="op" id="1406092">(</span><span class="ident" id="1406093">str</span>&nbsp;<span class="builtintype" id="1406097">string</span><span class="op" id="1406103">)</span>&nbsp;<span class="op" id="1406105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406108">if</span>&nbsp;<span class="op" id="1406111">!</span><span class="ident" id="1406112"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406113">.</span><span class="ident" id="1406114">okVerb</span><span class="op" id="1406120">(</span><span class="ident" id="1406121"><a href="/fmt/scan.go.html#1406081">verb</a></span><span class="op" id="1406125">,</span>&nbsp;<span class="string" id="1406127">&#34;svqx&#34;</span><span class="op" id="1406133">,</span>&nbsp;<span class="string" id="1406135">&#34;string&#34;</span><span class="op" id="1406143">)</span>&nbsp;<span class="op" id="1406145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406149">return</span>&nbsp;<span class="string" id="1406156">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1406160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406163"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406164">.</span><span class="ident" id="1406165">skipSpace</span><span class="op" id="1406174">(</span><span class="ident" id="1406175">false</span><span class="op" id="1406180">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406183"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406184">.</span><span class="ident" id="1406185">notEOF</span><span class="op" id="1406191">(</span><span class="op" id="1406192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406195">switch</span>&nbsp;<span class="ident" id="1406202"><a href="/fmt/scan.go.html#1406081">verb</a></span>&nbsp;<span class="op" id="1406207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406210">case</span>&nbsp;<span class="string" id="1406215">&#39;q&#39;</span><span class="op" id="1406218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406222"><a href="/fmt/scan.go.html#1406093">str</a></span>&nbsp;<span class="op" id="1406226">=</span>&nbsp;<span class="ident" id="1406228"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406229">.</span><span class="ident" id="1406230">quotedString</span><span class="op" id="1406242">(</span><span class="op" id="1406243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406246">case</span>&nbsp;<span class="string" id="1406251">&#39;x&#39;</span><span class="op" id="1406254">:</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406258"><a href="/fmt/scan.go.html#1406093">str</a></span>&nbsp;<span class="op" id="1406262">=</span>&nbsp;<span class="ident" id="1406264"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406265">.</span><span class="ident" id="1406266">hexString</span><span class="op" id="1406275">(</span><span class="op" id="1406276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406279">default</span><span class="op" id="1406286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406290"><a href="/fmt/scan.go.html#1406093">str</a></span>&nbsp;<span class="op" id="1406294">=</span>&nbsp;<span class="builtintype" id="1406296">string</span><span class="op" id="1406302">(</span><span class="ident" id="1406303"><a href="/fmt/scan.go.html#1406060">s</a></span><span class="op" id="1406304">.</span><span class="ident" id="1406305">token</span><span class="op" id="1406310">(</span><span class="ident" id="1406311">true</span><span class="op" id="1406315">,</span>&nbsp;<span class="ident" id="1406317"><a href="/fmt/scan.go.html#1393804">notSpace</a></span><span class="op" id="1406325">)</span><span class="op" id="1406326">)</span>&nbsp;<span class="comment" id="1406328">//&nbsp;%s&nbsp;and&nbsp;%v&nbsp;just&nbsp;return&nbsp;the&nbsp;next&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1406368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406371">return</span><br>
<span class="lineno">835</span><span class="op" id="1406378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1406381">//&nbsp;quotedString&nbsp;returns&nbsp;the&nbsp;double-&nbsp;or&nbsp;back-quoted&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="1406481">func</span>&nbsp;<span class="op" id="1406486">(</span><span class="ident" id="1406487">s</span>&nbsp;<span class="op" id="1406489">*</span><span class="ident" id="1406490"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1406492">)</span>&nbsp;<span class="ident" id="1406494">quotedString</span><span class="op" id="1406506">(</span><span class="op" id="1406507">)</span>&nbsp;<span class="builtintype" id="1406509">string</span>&nbsp;<span class="op" id="1406516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406519"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406520">.</span><span class="ident" id="1406521">notEOF</span><span class="op" id="1406527">(</span><span class="op" id="1406528">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406531">quote</span>&nbsp;<span class="op" id="1406537">:=</span>&nbsp;<span class="ident" id="1406540"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406541">.</span><span class="ident" id="1406542">getRune</span><span class="op" id="1406549">(</span><span class="op" id="1406550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406553">switch</span>&nbsp;<span class="ident" id="1406560"><a href="/fmt/scan.go.html#1406531">quote</a></span>&nbsp;<span class="op" id="1406566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406569">case</span>&nbsp;<span class="string" id="1406574">&#39;`&#39;</span><span class="op" id="1406577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1406581">//&nbsp;Back-quoted:&nbsp;Anything&nbsp;goes&nbsp;until&nbsp;EOF&nbsp;or&nbsp;back&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406638">for</span>&nbsp;<span class="op" id="1406642">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406647">r</span>&nbsp;<span class="op" id="1406649">:=</span>&nbsp;<span class="ident" id="1406652"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406653">.</span><span class="ident" id="1406654">mustReadRune</span><span class="op" id="1406666">(</span><span class="op" id="1406667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406672">if</span>&nbsp;<span class="ident" id="1406675"><a href="/fmt/scan.go.html#1406647">r</a></span>&nbsp;<span class="op" id="1406677">==</span>&nbsp;<span class="ident" id="1406680"><a href="/fmt/scan.go.html#1406531">quote</a></span>&nbsp;<span class="op" id="1406686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406692">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1406701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406706"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406707">.</span><span class="ident" id="1406708">buf</span><span class="op" id="1406711">.</span><span class="ident" id="1406712">WriteRune</span><span class="op" id="1406721">(</span><span class="ident" id="1406722"><a href="/fmt/scan.go.html#1406647">r</a></span><span class="op" id="1406723">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1406727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406731">return</span>&nbsp;<span class="builtintype" id="1406738">string</span><span class="op" id="1406744">(</span><span class="ident" id="1406745"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406746">.</span><span class="ident" id="1406747">buf</span><span class="op" id="1406750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406753">case</span>&nbsp;<span class="string" id="1406758">&#39;&#34;&#39;</span><span class="op" id="1406761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1406765">//&nbsp;Double-quoted:&nbsp;Include&nbsp;the&nbsp;quotes&nbsp;and&nbsp;let&nbsp;strconv.Unquote&nbsp;do&nbsp;the&nbsp;backslash&nbsp;escapes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406854"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406855">.</span><span class="ident" id="1406856">buf</span><span class="op" id="1406859">.</span><span class="ident" id="1406860">WriteRune</span><span class="op" id="1406869">(</span><span class="ident" id="1406870"><a href="/fmt/scan.go.html#1406531">quote</a></span><span class="op" id="1406875">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406879">for</span>&nbsp;<span class="op" id="1406883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406888">r</span>&nbsp;<span class="op" id="1406890">:=</span>&nbsp;<span class="ident" id="1406893"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406894">.</span><span class="ident" id="1406895">mustReadRune</span><span class="op" id="1406907">(</span><span class="op" id="1406908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1406913"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1406914">.</span><span class="ident" id="1406915">buf</span><span class="op" id="1406918">.</span><span class="ident" id="1406919">WriteRune</span><span class="op" id="1406928">(</span><span class="ident" id="1406929"><a href="/fmt/scan.go.html#1406888">r</a></span><span class="op" id="1406930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1406935">if</span>&nbsp;<span class="ident" id="1406938"><a href="/fmt/scan.go.html#1406888">r</a></span>&nbsp;<span class="op" id="1406940">==</span>&nbsp;<span class="string" id="1406943">&#39;\\&#39;</span>&nbsp;<span class="op" id="1406948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1406954">//&nbsp;In&nbsp;a&nbsp;legal&nbsp;backslash&nbsp;escape,&nbsp;no&nbsp;matter&nbsp;how&nbsp;long,&nbsp;only&nbsp;the&nbsp;character</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1407029">//&nbsp;immediately&nbsp;after&nbsp;the&nbsp;escape&nbsp;can&nbsp;itself&nbsp;be&nbsp;a&nbsp;backslash&nbsp;or&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1407101">//&nbsp;Thus&nbsp;we&nbsp;only&nbsp;need&nbsp;to&nbsp;protect&nbsp;the&nbsp;first&nbsp;character&nbsp;after&nbsp;the&nbsp;backslash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407178"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1407179">.</span><span class="ident" id="1407180">buf</span><span class="op" id="1407183">.</span><span class="ident" id="1407184">WriteRune</span><span class="op" id="1407193">(</span><span class="ident" id="1407194"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1407195">.</span><span class="ident" id="1407196">mustReadRune</span><span class="op" id="1407208">(</span><span class="op" id="1407209">)</span><span class="op" id="1407210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407215">}</span>&nbsp;<span class="keyword" id="1407217">else</span>&nbsp;<span class="keyword" id="1407222">if</span>&nbsp;<span class="ident" id="1407225"><a href="/fmt/scan.go.html#1406888">r</a></span>&nbsp;<span class="op" id="1407227">==</span>&nbsp;<span class="string" id="1407230">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="1407234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407240">break</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407257">result</span><span class="op" id="1407263">,</span>&nbsp;<span class="ident" id="1407265">err</span>&nbsp;<span class="op" id="1407269">:=</span>&nbsp;<span class="ident" id="1407272"><a href="/fmt/scan.go.html#1384751">strconv</a></span><span class="op" id="1407279">.</span><span class="ident" id="1407280">Unquote</span><span class="op" id="1407287">(</span><span class="builtintype" id="1407288">string</span><span class="op" id="1407294">(</span><span class="ident" id="1407295"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1407296">.</span><span class="ident" id="1407297">buf</span><span class="op" id="1407300">)</span><span class="op" id="1407301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407305">if</span>&nbsp;<span class="ident" id="1407308"><a href="/fmt/scan.go.html#1407265">err</a></span>&nbsp;<span class="op" id="1407312">!=</span>&nbsp;<span class="ident" id="1407315">nil</span>&nbsp;<span class="op" id="1407319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407324"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1407325">.</span><span class="builtintype" id="1407326">error</span><span class="op" id="1407331">(</span><span class="ident" id="1407332"><a href="/fmt/scan.go.html#1407265">err</a></span><span class="op" id="1407335">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407343">return</span>&nbsp;<span class="ident" id="1407350"><a href="/fmt/scan.go.html#1407257">result</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407358">default</span><span class="op" id="1407365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407369"><a href="/fmt/scan.go.html#1406487">s</a></span><span class="op" id="1407370">.</span><span class="ident" id="1407371">errorString</span><span class="op" id="1407382">(</span><span class="string" id="1407383">&#34;expected&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="1407407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407410">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407413">return</span>&nbsp;<span class="string" id="1407420">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="1407423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1407426">//&nbsp;hexDigit&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;hexadecimal&nbsp;digit</span><br>
<span class="lineno"></span><span class="keyword" id="1407481">func</span>&nbsp;<span class="op" id="1407486">(</span><span class="ident" id="1407487">s</span>&nbsp;<span class="op" id="1407489">*</span><span class="ident" id="1407490"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1407492">)</span>&nbsp;<span class="ident" id="1407494">hexDigit</span><span class="op" id="1407502">(</span><span class="ident" id="1407503">d</span>&nbsp;<span class="builtintype" id="1407505">rune</span><span class="op" id="1407509">)</span>&nbsp;<span class="builtintype" id="1407511">int</span>&nbsp;<span class="op" id="1407515">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407518">digit</span>&nbsp;<span class="op" id="1407524">:=</span>&nbsp;<span class="builtintype" id="1407527">int</span><span class="op" id="1407530">(</span><span class="ident" id="1407531"><a href="/fmt/scan.go.html#1407503">d</a></span><span class="op" id="1407532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407535">switch</span>&nbsp;<span class="ident" id="1407542"><a href="/fmt/scan.go.html#1407518">digit</a></span>&nbsp;<span class="op" id="1407548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407551">case</span>&nbsp;<span class="string" id="1407556">&#39;0&#39;</span><span class="op" id="1407559">,</span>&nbsp;<span class="string" id="1407561">&#39;1&#39;</span><span class="op" id="1407564">,</span>&nbsp;<span class="string" id="1407566">&#39;2&#39;</span><span class="op" id="1407569">,</span>&nbsp;<span class="string" id="1407571">&#39;3&#39;</span><span class="op" id="1407574">,</span>&nbsp;<span class="string" id="1407576">&#39;4&#39;</span><span class="op" id="1407579">,</span>&nbsp;<span class="string" id="1407581">&#39;5&#39;</span><span class="op" id="1407584">,</span>&nbsp;<span class="string" id="1407586">&#39;6&#39;</span><span class="op" id="1407589">,</span>&nbsp;<span class="string" id="1407591">&#39;7&#39;</span><span class="op" id="1407594">,</span>&nbsp;<span class="string" id="1407596">&#39;8&#39;</span><span class="op" id="1407599">,</span>&nbsp;<span class="string" id="1407601">&#39;9&#39;</span><span class="op" id="1407604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407608">return</span>&nbsp;<span class="ident" id="1407615"><a href="/fmt/scan.go.html#1407518">digit</a></span>&nbsp;<span class="op" id="1407621">-</span>&nbsp;<span class="string" id="1407623">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407628">case</span>&nbsp;<span class="string" id="1407633">&#39;a&#39;</span><span class="op" id="1407636">,</span>&nbsp;<span class="string" id="1407638">&#39;b&#39;</span><span class="op" id="1407641">,</span>&nbsp;<span class="string" id="1407643">&#39;c&#39;</span><span class="op" id="1407646">,</span>&nbsp;<span class="string" id="1407648">&#39;d&#39;</span><span class="op" id="1407651">,</span>&nbsp;<span class="string" id="1407653">&#39;e&#39;</span><span class="op" id="1407656">,</span>&nbsp;<span class="string" id="1407658">&#39;f&#39;</span><span class="op" id="1407661">:</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407665">return</span>&nbsp;<span class="num" id="1407672">10</span>&nbsp;<span class="op" id="1407675">+</span>&nbsp;<span class="ident" id="1407677"><a href="/fmt/scan.go.html#1407518">digit</a></span>&nbsp;<span class="op" id="1407683">-</span>&nbsp;<span class="string" id="1407685">&#39;a&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407690">case</span>&nbsp;<span class="string" id="1407695">&#39;A&#39;</span><span class="op" id="1407698">,</span>&nbsp;<span class="string" id="1407700">&#39;B&#39;</span><span class="op" id="1407703">,</span>&nbsp;<span class="string" id="1407705">&#39;C&#39;</span><span class="op" id="1407708">,</span>&nbsp;<span class="string" id="1407710">&#39;D&#39;</span><span class="op" id="1407713">,</span>&nbsp;<span class="string" id="1407715">&#39;E&#39;</span><span class="op" id="1407718">,</span>&nbsp;<span class="string" id="1407720">&#39;F&#39;</span><span class="op" id="1407723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407727">return</span>&nbsp;<span class="num" id="1407734">10</span>&nbsp;<span class="op" id="1407737">+</span>&nbsp;<span class="ident" id="1407739"><a href="/fmt/scan.go.html#1407518">digit</a></span>&nbsp;<span class="op" id="1407745">-</span>&nbsp;<span class="string" id="1407747">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1407752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1407755"><a href="/fmt/scan.go.html#1407487">s</a></span><span class="op" id="1407756">.</span><span class="ident" id="1407757">errorString</span><span class="op" id="1407768">(</span><span class="string" id="1407769">&#34;illegal&nbsp;hex&nbsp;digit&#34;</span><span class="op" id="1407788">)</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1407791">return</span>&nbsp;<span class="num" id="1407798">0</span><br>
<span class="lineno"></span><span class="op" id="1407800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1407803">//&nbsp;hexByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;hex-encoded&nbsp;(two-character)&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1407880">//&nbsp;There&nbsp;must&nbsp;be&nbsp;either&nbsp;two&nbsp;hexadecimal&nbsp;digits&nbsp;or&nbsp;a&nbsp;space&nbsp;character&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">895</span><span class="keyword" id="1407962">func</span>&nbsp;<span class="op" id="1407967">(</span><span class="ident" id="1407968">s</span>&nbsp;<span class="op" id="1407970">*</span><span class="ident" id="1407971"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1407973">)</span>&nbsp;<span class="ident" id="1407975">hexByte</span><span class="op" id="1407982">(</span><span class="op" id="1407983">)</span>&nbsp;<span class="op" id="1407985">(</span><span class="ident" id="1407986">b</span>&nbsp;<span class="builtintype" id="1407988">byte</span><span class="op" id="1407992">,</span>&nbsp;<span class="ident" id="1407994">ok</span>&nbsp;<span class="builtintype" id="1407997">bool</span><span class="op" id="1408001">)</span>&nbsp;<span class="op" id="1408003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408006">rune1</span>&nbsp;<span class="op" id="1408012">:=</span>&nbsp;<span class="ident" id="1408015"><a href="/fmt/scan.go.html#1407968">s</a></span><span class="op" id="1408016">.</span><span class="ident" id="1408017">getRune</span><span class="op" id="1408024">(</span><span class="op" id="1408025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408028">if</span>&nbsp;<span class="ident" id="1408031"><a href="/fmt/scan.go.html#1408006">rune1</a></span>&nbsp;<span class="op" id="1408037">==</span>&nbsp;<span class="ident" id="1408040"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1408044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408048">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408056">}</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408059">if</span>&nbsp;<span class="ident" id="1408062"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1408069">(</span><span class="ident" id="1408070"><a href="/fmt/scan.go.html#1408006">rune1</a></span><span class="op" id="1408075">)</span>&nbsp;<span class="op" id="1408077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408081"><a href="/fmt/scan.go.html#1407968">s</a></span><span class="op" id="1408082">.</span><span class="ident" id="1408083">UnreadRune</span><span class="op" id="1408093">(</span><span class="op" id="1408094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408098">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408109">rune2</span>&nbsp;<span class="op" id="1408115">:=</span>&nbsp;<span class="ident" id="1408118"><a href="/fmt/scan.go.html#1407968">s</a></span><span class="op" id="1408119">.</span><span class="ident" id="1408120">mustReadRune</span><span class="op" id="1408132">(</span><span class="op" id="1408133">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408136">return</span>&nbsp;<span class="builtintype" id="1408143">byte</span><span class="op" id="1408147">(</span><span class="ident" id="1408148"><a href="/fmt/scan.go.html#1407968">s</a></span><span class="op" id="1408149">.</span><span class="ident" id="1408150">hexDigit</span><span class="op" id="1408158">(</span><span class="ident" id="1408159"><a href="/fmt/scan.go.html#1408006">rune1</a></span><span class="op" id="1408164">)</span><span class="op" id="1408165">&lt;&lt;</span><span class="num" id="1408167">4</span>&nbsp;<span class="op" id="1408169">|</span>&nbsp;<span class="ident" id="1408171"><a href="/fmt/scan.go.html#1407968">s</a></span><span class="op" id="1408172">.</span><span class="ident" id="1408173">hexDigit</span><span class="op" id="1408181">(</span><span class="ident" id="1408182"><a href="/fmt/scan.go.html#1408109">rune2</a></span><span class="op" id="1408187">)</span><span class="op" id="1408188">)</span><span class="op" id="1408189">,</span>&nbsp;<span class="ident" id="1408191">true</span><br>
<span class="lineno"></span><span class="op" id="1408196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1408199">//&nbsp;hexString&nbsp;returns&nbsp;the&nbsp;space-delimited&nbsp;hexpair-encoded&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1408264">func</span>&nbsp;<span class="op" id="1408269">(</span><span class="ident" id="1408270">s</span>&nbsp;<span class="op" id="1408272">*</span><span class="ident" id="1408273"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1408275">)</span>&nbsp;<span class="ident" id="1408277">hexString</span><span class="op" id="1408286">(</span><span class="op" id="1408287">)</span>&nbsp;<span class="builtintype" id="1408289">string</span>&nbsp;<span class="op" id="1408296">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408299"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408300">.</span><span class="ident" id="1408301">notEOF</span><span class="op" id="1408307">(</span><span class="op" id="1408308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408311">for</span>&nbsp;<span class="op" id="1408315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408319">b</span><span class="op" id="1408320">,</span>&nbsp;<span class="ident" id="1408322">ok</span>&nbsp;<span class="op" id="1408325">:=</span>&nbsp;<span class="ident" id="1408328"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408329">.</span><span class="ident" id="1408330">hexByte</span><span class="op" id="1408337">(</span><span class="op" id="1408338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408342">if</span>&nbsp;<span class="op" id="1408345">!</span><span class="ident" id="1408346"><a href="/fmt/scan.go.html#1408322">ok</a></span>&nbsp;<span class="op" id="1408349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408354">break</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408366"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408367">.</span><span class="ident" id="1408368">buf</span><span class="op" id="1408371">.</span><span class="ident" id="1408372">WriteByte</span><span class="op" id="1408381">(</span><span class="ident" id="1408382"><a href="/fmt/scan.go.html#1408319">b</a></span><span class="op" id="1408383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408389">if</span>&nbsp;<span class="builtinfunc" id="1408392">len</span><span class="op" id="1408395">(</span><span class="ident" id="1408396"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408397">.</span><span class="ident" id="1408398">buf</span><span class="op" id="1408401">)</span>&nbsp;<span class="op" id="1408403">==</span>&nbsp;<span class="num" id="1408406">0</span>&nbsp;<span class="op" id="1408408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408412"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408413">.</span><span class="ident" id="1408414">errorString</span><span class="op" id="1408425">(</span><span class="string" id="1408426">&#34;no&nbsp;hex&nbsp;data&nbsp;for&nbsp;%x&nbsp;string&#34;</span><span class="op" id="1408453">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408457">return</span>&nbsp;<span class="string" id="1408464">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408471">return</span>&nbsp;<span class="builtintype" id="1408478">string</span><span class="op" id="1408484">(</span><span class="ident" id="1408485"><a href="/fmt/scan.go.html#1408270">s</a></span><span class="op" id="1408486">.</span><span class="ident" id="1408487">buf</span><span class="op" id="1408490">)</span><br>
<span class="lineno"></span><span class="op" id="1408492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="keyword" id="1408495">const</span>&nbsp;<span class="ident" id="1408501">floatVerbs</span>&nbsp;<span class="op" id="1408512">=</span>&nbsp;<span class="string" id="1408514">&#34;beEfFgGv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1408526">const</span>&nbsp;<span class="ident" id="1408532">hugeWid</span>&nbsp;<span class="op" id="1408540">=</span>&nbsp;<span class="num" id="1408542">1</span>&nbsp;<span class="op" id="1408544">&lt;&lt;</span>&nbsp;<span class="num" id="1408547">30</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1408551">//&nbsp;scanOne&nbsp;scans&nbsp;a&nbsp;single&nbsp;value,&nbsp;deriving&nbsp;the&nbsp;scanner&nbsp;from&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;argument.</span><br>
<span class="lineno">930</span><span class="keyword" id="1408636">func</span>&nbsp;<span class="op" id="1408641">(</span><span class="ident" id="1408642">s</span>&nbsp;<span class="op" id="1408644">*</span><span class="ident" id="1408645"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1408647">)</span>&nbsp;<span class="ident" id="1408649">scanOne</span><span class="op" id="1408656">(</span><span class="ident" id="1408657">verb</span>&nbsp;<span class="builtintype" id="1408662">rune</span><span class="op" id="1408666">,</span>&nbsp;<span class="ident" id="1408668">arg</span>&nbsp;<span class="keyword" id="1408672">interface</span><span class="op" id="1408681">{</span><span class="op" id="1408682">}</span><span class="op" id="1408683">)</span>&nbsp;<span class="op" id="1408685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408688"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1408689">.</span><span class="ident" id="1408690">buf</span>&nbsp;<span class="op" id="1408694">=</span>&nbsp;<span class="ident" id="1408696"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1408697">.</span><span class="ident" id="1408698">buf</span><span class="op" id="1408701">[</span><span class="op" id="1408702">:</span><span class="num" id="1408703">0</span><span class="op" id="1408704">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408707">var</span>&nbsp;<span class="ident" id="1408711">err</span>&nbsp;<span class="builtintype" id="1408715">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1408722">//&nbsp;If&nbsp;the&nbsp;parameter&nbsp;has&nbsp;its&nbsp;own&nbsp;Scan&nbsp;method,&nbsp;use&nbsp;that.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408778">if</span>&nbsp;<span class="ident" id="1408781">v</span><span class="op" id="1408782">,</span>&nbsp;<span class="ident" id="1408784">ok</span>&nbsp;<span class="op" id="1408787">:=</span>&nbsp;<span class="ident" id="1408790"><a href="/fmt/scan.go.html#1408668">arg</a></span><span class="op" id="1408793">.</span><span class="op" id="1408794">(</span><span class="ident" id="1408795"><a href="/fmt/scan.go.html#1387162">Scanner</a></span><span class="op" id="1408802">)</span><span class="op" id="1408803">;</span>&nbsp;<span class="ident" id="1408805"><a href="/fmt/scan.go.html#1408784">ok</a></span>&nbsp;<span class="op" id="1408808">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408812"><a href="/fmt/scan.go.html#1408711">err</a></span>&nbsp;<span class="op" id="1408816">=</span>&nbsp;<span class="ident" id="1408818"><a href="/fmt/scan.go.html#1408781">v</a></span><span class="op" id="1408819">.</span><span class="ident" id="1408820">Scan</span><span class="op" id="1408824">(</span><span class="ident" id="1408825"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1408826">,</span>&nbsp;<span class="ident" id="1408828"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1408832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408836">if</span>&nbsp;<span class="ident" id="1408839"><a href="/fmt/scan.go.html#1408711">err</a></span>&nbsp;<span class="op" id="1408843">!=</span>&nbsp;<span class="ident" id="1408846">nil</span>&nbsp;<span class="op" id="1408850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408855">if</span>&nbsp;<span class="ident" id="1408858"><a href="/fmt/scan.go.html#1408711">err</a></span>&nbsp;<span class="op" id="1408862">==</span>&nbsp;<span class="ident" id="1408865"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1408867">.</span><span class="ident" id="1408868">EOF</span>&nbsp;<span class="op" id="1408872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408878"><a href="/fmt/scan.go.html#1408711">err</a></span>&nbsp;<span class="op" id="1408882">=</span>&nbsp;<span class="ident" id="1408884"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1408886">.</span><span class="ident" id="1408887">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408907">}</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408912"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1408913">.</span><span class="builtintype" id="1408914">error</span><span class="op" id="1408919">(</span><span class="ident" id="1408920"><a href="/fmt/scan.go.html#1408711">err</a></span><span class="op" id="1408923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408931">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408943">switch</span>&nbsp;<span class="ident" id="1408950">v</span>&nbsp;<span class="op" id="1408952">:=</span>&nbsp;<span class="ident" id="1408955"><a href="/fmt/scan.go.html#1408668">arg</a></span><span class="op" id="1408958">.</span><span class="op" id="1408959">(</span><span class="keyword" id="1408960">type</span><span class="op" id="1408964">)</span>&nbsp;<span class="op" id="1408966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1408969">case</span>&nbsp;<span class="op" id="1408974">*</span><span class="builtintype" id="1408975">bool</span><span class="op" id="1408979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1408983">*</span><span class="ident" id="1408984"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1408986">=</span>&nbsp;<span class="ident" id="1408988"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1408989">.</span><span class="ident" id="1408990">scanBool</span><span class="op" id="1408998">(</span><span class="ident" id="1408999"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409006">case</span>&nbsp;<span class="op" id="1409011">*</span><span class="builtintype" id="1409012">complex64</span><span class="op" id="1409021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409025">*</span><span class="ident" id="1409026"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409028">=</span>&nbsp;<span class="builtintype" id="1409030">complex64</span><span class="op" id="1409039">(</span><span class="ident" id="1409040"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409041">.</span><span class="ident" id="1409042">scanComplex</span><span class="op" id="1409053">(</span><span class="ident" id="1409054"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409058">,</span>&nbsp;<span class="num" id="1409060">64</span><span class="op" id="1409062">)</span><span class="op" id="1409063">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409066">case</span>&nbsp;<span class="op" id="1409071">*</span><span class="builtintype" id="1409072">complex128</span><span class="op" id="1409082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409086">*</span><span class="ident" id="1409087"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409089">=</span>&nbsp;<span class="ident" id="1409091"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409092">.</span><span class="ident" id="1409093">scanComplex</span><span class="op" id="1409104">(</span><span class="ident" id="1409105"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409109">,</span>&nbsp;<span class="num" id="1409111">128</span><span class="op" id="1409114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409117">case</span>&nbsp;<span class="op" id="1409122">*</span><span class="builtintype" id="1409123">int</span><span class="op" id="1409126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409130">*</span><span class="ident" id="1409131"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409133">=</span>&nbsp;<span class="builtintype" id="1409135">int</span><span class="op" id="1409138">(</span><span class="ident" id="1409139"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409140">.</span><span class="ident" id="1409141">scanInt</span><span class="op" id="1409148">(</span><span class="ident" id="1409149"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409153">,</span>&nbsp;<span class="ident" id="1409155"><a href="/fmt/print.go.html#1368916">intBits</a></span><span class="op" id="1409162">)</span><span class="op" id="1409163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409166">case</span>&nbsp;<span class="op" id="1409171">*</span><span class="builtintype" id="1409172">int8</span><span class="op" id="1409176">:</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409180">*</span><span class="ident" id="1409181"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409183">=</span>&nbsp;<span class="builtintype" id="1409185">int8</span><span class="op" id="1409189">(</span><span class="ident" id="1409190"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409191">.</span><span class="ident" id="1409192">scanInt</span><span class="op" id="1409199">(</span><span class="ident" id="1409200"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409204">,</span>&nbsp;<span class="num" id="1409206">8</span><span class="op" id="1409207">)</span><span class="op" id="1409208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409211">case</span>&nbsp;<span class="op" id="1409216">*</span><span class="builtintype" id="1409217">int16</span><span class="op" id="1409222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409226">*</span><span class="ident" id="1409227"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409229">=</span>&nbsp;<span class="builtintype" id="1409231">int16</span><span class="op" id="1409236">(</span><span class="ident" id="1409237"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409238">.</span><span class="ident" id="1409239">scanInt</span><span class="op" id="1409246">(</span><span class="ident" id="1409247"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409251">,</span>&nbsp;<span class="num" id="1409253">16</span><span class="op" id="1409255">)</span><span class="op" id="1409256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409259">case</span>&nbsp;<span class="op" id="1409264">*</span><span class="builtintype" id="1409265">int32</span><span class="op" id="1409270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409274">*</span><span class="ident" id="1409275"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409277">=</span>&nbsp;<span class="builtintype" id="1409279">int32</span><span class="op" id="1409284">(</span><span class="ident" id="1409285"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409286">.</span><span class="ident" id="1409287">scanInt</span><span class="op" id="1409294">(</span><span class="ident" id="1409295"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409299">,</span>&nbsp;<span class="num" id="1409301">32</span><span class="op" id="1409303">)</span><span class="op" id="1409304">)</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409307">case</span>&nbsp;<span class="op" id="1409312">*</span><span class="ident" id="1409313">int64</span><span class="op" id="1409318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409322">*</span><span class="ident" id="1409323"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409325">=</span>&nbsp;<span class="ident" id="1409327"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409328">.</span><span class="ident" id="1409329">scanInt</span><span class="op" id="1409336">(</span><span class="ident" id="1409337"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409341">,</span>&nbsp;<span class="num" id="1409343">64</span><span class="op" id="1409345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409348">case</span>&nbsp;<span class="op" id="1409353">*</span><span class="builtintype" id="1409354">uint</span><span class="op" id="1409358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409362">*</span><span class="ident" id="1409363"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409365">=</span>&nbsp;<span class="builtintype" id="1409367">uint</span><span class="op" id="1409371">(</span><span class="ident" id="1409372"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409373">.</span><span class="ident" id="1409374">scanUint</span><span class="op" id="1409382">(</span><span class="ident" id="1409383"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409387">,</span>&nbsp;<span class="ident" id="1409389"><a href="/fmt/print.go.html#1368916">intBits</a></span><span class="op" id="1409396">)</span><span class="op" id="1409397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409400">case</span>&nbsp;<span class="op" id="1409405">*</span><span class="builtintype" id="1409406">uint8</span><span class="op" id="1409411">:</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409415">*</span><span class="ident" id="1409416"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409418">=</span>&nbsp;<span class="builtintype" id="1409420">uint8</span><span class="op" id="1409425">(</span><span class="ident" id="1409426"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409427">.</span><span class="ident" id="1409428">scanUint</span><span class="op" id="1409436">(</span><span class="ident" id="1409437"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409441">,</span>&nbsp;<span class="num" id="1409443">8</span><span class="op" id="1409444">)</span><span class="op" id="1409445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409448">case</span>&nbsp;<span class="op" id="1409453">*</span><span class="builtintype" id="1409454">uint16</span><span class="op" id="1409460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409464">*</span><span class="ident" id="1409465"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409467">=</span>&nbsp;<span class="builtintype" id="1409469">uint16</span><span class="op" id="1409475">(</span><span class="ident" id="1409476"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409477">.</span><span class="ident" id="1409478">scanUint</span><span class="op" id="1409486">(</span><span class="ident" id="1409487"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409491">,</span>&nbsp;<span class="num" id="1409493">16</span><span class="op" id="1409495">)</span><span class="op" id="1409496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409499">case</span>&nbsp;<span class="op" id="1409504">*</span><span class="builtintype" id="1409505">uint32</span><span class="op" id="1409511">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409515">*</span><span class="ident" id="1409516"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409518">=</span>&nbsp;<span class="builtintype" id="1409520">uint32</span><span class="op" id="1409526">(</span><span class="ident" id="1409527"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409528">.</span><span class="ident" id="1409529">scanUint</span><span class="op" id="1409537">(</span><span class="ident" id="1409538"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409542">,</span>&nbsp;<span class="num" id="1409544">32</span><span class="op" id="1409546">)</span><span class="op" id="1409547">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409550">case</span>&nbsp;<span class="op" id="1409555">*</span><span class="ident" id="1409556">uint64</span><span class="op" id="1409562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409566">*</span><span class="ident" id="1409567"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409569">=</span>&nbsp;<span class="ident" id="1409571"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409572">.</span><span class="ident" id="1409573">scanUint</span><span class="op" id="1409581">(</span><span class="ident" id="1409582"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409586">,</span>&nbsp;<span class="num" id="1409588">64</span><span class="op" id="1409590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409593">case</span>&nbsp;<span class="op" id="1409598">*</span><span class="builtintype" id="1409599">uintptr</span><span class="op" id="1409606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409610">*</span><span class="ident" id="1409611"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409613">=</span>&nbsp;<span class="builtintype" id="1409615">uintptr</span><span class="op" id="1409622">(</span><span class="ident" id="1409623"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409624">.</span><span class="ident" id="1409625">scanUint</span><span class="op" id="1409633">(</span><span class="ident" id="1409634"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409638">,</span>&nbsp;<span class="ident" id="1409640"><a href="/fmt/print.go.html#1368956">uintptrBits</a></span><span class="op" id="1409651">)</span><span class="op" id="1409652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1409655">//&nbsp;Floats&nbsp;are&nbsp;tricky&nbsp;because&nbsp;you&nbsp;want&nbsp;to&nbsp;scan&nbsp;in&nbsp;the&nbsp;precision&nbsp;of&nbsp;the&nbsp;result,&nbsp;not</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1409738">//&nbsp;scan&nbsp;in&nbsp;high&nbsp;precision&nbsp;and&nbsp;convert,&nbsp;in&nbsp;order&nbsp;to&nbsp;preserve&nbsp;the&nbsp;correct&nbsp;error&nbsp;condition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409828">case</span>&nbsp;<span class="op" id="1409833">*</span><span class="builtintype" id="1409834">float32</span><span class="op" id="1409841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409845">if</span>&nbsp;<span class="ident" id="1409848"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409849">.</span><span class="ident" id="1409850">okVerb</span><span class="op" id="1409856">(</span><span class="ident" id="1409857"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1409861">,</span>&nbsp;<span class="ident" id="1409863"><a href="/fmt/scan.go.html#1408501">floatVerbs</a></span><span class="op" id="1409873">,</span>&nbsp;<span class="string" id="1409875">&#34;float32&#34;</span><span class="op" id="1409884">)</span>&nbsp;<span class="op" id="1409886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1409891"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409892">.</span><span class="ident" id="1409893">skipSpace</span><span class="op" id="1409902">(</span><span class="ident" id="1409903">false</span><span class="op" id="1409908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1409913"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409914">.</span><span class="ident" id="1409915">notEOF</span><span class="op" id="1409921">(</span><span class="op" id="1409922">)</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409927">*</span><span class="ident" id="1409928"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1409930">=</span>&nbsp;<span class="builtintype" id="1409932">float32</span><span class="op" id="1409939">(</span><span class="ident" id="1409940"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409941">.</span><span class="ident" id="1409942">convertFloat</span><span class="op" id="1409954">(</span><span class="ident" id="1409955"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1409956">.</span><span class="ident" id="1409957">floatToken</span><span class="op" id="1409967">(</span><span class="op" id="1409968">)</span><span class="op" id="1409969">,</span>&nbsp;<span class="num" id="1409971">32</span><span class="op" id="1409973">)</span><span class="op" id="1409974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1409978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409981">case</span>&nbsp;<span class="op" id="1409986">*</span><span class="builtintype" id="1409987">float64</span><span class="op" id="1409994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1409998">if</span>&nbsp;<span class="ident" id="1410001"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410002">.</span><span class="ident" id="1410003">okVerb</span><span class="op" id="1410009">(</span><span class="ident" id="1410010"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410014">,</span>&nbsp;<span class="ident" id="1410016"><a href="/fmt/scan.go.html#1408501">floatVerbs</a></span><span class="op" id="1410026">,</span>&nbsp;<span class="string" id="1410028">&#34;float64&#34;</span><span class="op" id="1410037">)</span>&nbsp;<span class="op" id="1410039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410044"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410045">.</span><span class="ident" id="1410046">skipSpace</span><span class="op" id="1410055">(</span><span class="ident" id="1410056">false</span><span class="op" id="1410061">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410066"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410067">.</span><span class="ident" id="1410068">notEOF</span><span class="op" id="1410074">(</span><span class="op" id="1410075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1410080">*</span><span class="ident" id="1410081"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1410083">=</span>&nbsp;<span class="ident" id="1410085"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410086">.</span><span class="ident" id="1410087">convertFloat</span><span class="op" id="1410099">(</span><span class="ident" id="1410100"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410101">.</span><span class="ident" id="1410102">floatToken</span><span class="op" id="1410112">(</span><span class="op" id="1410113">)</span><span class="op" id="1410114">,</span>&nbsp;<span class="num" id="1410116">64</span><span class="op" id="1410118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1410122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410125">case</span>&nbsp;<span class="op" id="1410130">*</span><span class="builtintype" id="1410131">string</span><span class="op" id="1410137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1410141">*</span><span class="ident" id="1410142"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1410144">=</span>&nbsp;<span class="ident" id="1410146"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410147">.</span><span class="ident" id="1410148">convertString</span><span class="op" id="1410161">(</span><span class="ident" id="1410162"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410166">)</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410169">case</span>&nbsp;<span class="op" id="1410174">*</span><span class="op" id="1410175">[</span><span class="op" id="1410176">]</span><span class="builtintype" id="1410177">byte</span><span class="op" id="1410181">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1410185">//&nbsp;We&nbsp;scan&nbsp;to&nbsp;string&nbsp;and&nbsp;convert&nbsp;so&nbsp;we&nbsp;get&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1410250">//&nbsp;If&nbsp;we&nbsp;scanned&nbsp;to&nbsp;bytes,&nbsp;the&nbsp;slice&nbsp;would&nbsp;point&nbsp;at&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1410316">*</span><span class="ident" id="1410317"><a href="/fmt/scan.go.html#1408950">v</a></span>&nbsp;<span class="op" id="1410319">=</span>&nbsp;<span class="op" id="1410321">[</span><span class="op" id="1410322">]</span><span class="builtintype" id="1410323">byte</span><span class="op" id="1410327">(</span><span class="ident" id="1410328"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410329">.</span><span class="ident" id="1410330">convertString</span><span class="op" id="1410343">(</span><span class="ident" id="1410344"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410348">)</span><span class="op" id="1410349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410352">default</span><span class="op" id="1410359">:</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410363">val</span>&nbsp;<span class="op" id="1410367">:=</span>&nbsp;<span class="ident" id="1410370"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410377">.</span><span class="ident" id="1410378">ValueOf</span><span class="op" id="1410385">(</span><span class="ident" id="1410386"><a href="/fmt/scan.go.html#1408950">v</a></span><span class="op" id="1410387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410391">ptr</span>&nbsp;<span class="op" id="1410395">:=</span>&nbsp;<span class="ident" id="1410398"><a href="/fmt/scan.go.html#1410363">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410404">if</span>&nbsp;<span class="ident" id="1410407"><a href="/fmt/scan.go.html#1410391">ptr</a></span><span class="op" id="1410410">.</span><span class="ident" id="1410411">Kind</span><span class="op" id="1410415">(</span><span class="op" id="1410416">)</span>&nbsp;<span class="op" id="1410418">!=</span>&nbsp;<span class="ident" id="1410421"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410428">.</span><span class="ident" id="1410429">Ptr</span>&nbsp;<span class="op" id="1410433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410438"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410439">.</span><span class="ident" id="1410440">errorString</span><span class="op" id="1410451">(</span><span class="string" id="1410452">&#34;type&nbsp;not&nbsp;a&nbsp;pointer:&nbsp;&#34;</span>&nbsp;<span class="op" id="1410475">+</span>&nbsp;<span class="ident" id="1410477"><a href="/fmt/scan.go.html#1410363">val</a></span><span class="op" id="1410480">.</span><span class="ident" id="1410481">Type</span><span class="op" id="1410485">(</span><span class="op" id="1410486">)</span><span class="op" id="1410487">.</span><span class="ident" id="1410488">String</span><span class="op" id="1410494">(</span><span class="op" id="1410495">)</span><span class="op" id="1410496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410501">return</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1410510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410514">switch</span>&nbsp;<span class="ident" id="1410521">v</span>&nbsp;<span class="op" id="1410523">:=</span>&nbsp;<span class="ident" id="1410526"><a href="/fmt/scan.go.html#1410391">ptr</a></span><span class="op" id="1410529">.</span><span class="ident" id="1410530">Elem</span><span class="op" id="1410534">(</span><span class="op" id="1410535">)</span><span class="op" id="1410536">;</span>&nbsp;<span class="ident" id="1410538"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410539">.</span><span class="ident" id="1410540">Kind</span><span class="op" id="1410544">(</span><span class="op" id="1410545">)</span>&nbsp;<span class="op" id="1410547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410551">case</span>&nbsp;<span class="ident" id="1410556"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410563">.</span><span class="ident" id="1410564">Bool</span><span class="op" id="1410568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410573"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410574">.</span><span class="ident" id="1410575">SetBool</span><span class="op" id="1410582">(</span><span class="ident" id="1410583"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410584">.</span><span class="ident" id="1410585">scanBool</span><span class="op" id="1410593">(</span><span class="ident" id="1410594"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410598">)</span><span class="op" id="1410599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410603">case</span>&nbsp;<span class="ident" id="1410608"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410615">.</span><span class="ident" id="1410616">Int</span><span class="op" id="1410619">,</span>&nbsp;<span class="ident" id="1410621"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410628">.</span><span class="ident" id="1410629">Int8</span><span class="op" id="1410633">,</span>&nbsp;<span class="ident" id="1410635"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410642">.</span><span class="ident" id="1410643">Int16</span><span class="op" id="1410648">,</span>&nbsp;<span class="ident" id="1410650"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410657">.</span><span class="ident" id="1410658">Int32</span><span class="op" id="1410663">,</span>&nbsp;<span class="ident" id="1410665"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410672">.</span><span class="ident" id="1410673">Int64</span><span class="op" id="1410678">:</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410683"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410684">.</span><span class="ident" id="1410685">SetInt</span><span class="op" id="1410691">(</span><span class="ident" id="1410692"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410693">.</span><span class="ident" id="1410694">scanInt</span><span class="op" id="1410701">(</span><span class="ident" id="1410702"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410706">,</span>&nbsp;<span class="ident" id="1410708"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410709">.</span><span class="ident" id="1410710">Type</span><span class="op" id="1410714">(</span><span class="op" id="1410715">)</span><span class="op" id="1410716">.</span><span class="ident" id="1410717">Bits</span><span class="op" id="1410721">(</span><span class="op" id="1410722">)</span><span class="op" id="1410723">)</span><span class="op" id="1410724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410728">case</span>&nbsp;<span class="ident" id="1410733"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410740">.</span><span class="ident" id="1410741">Uint</span><span class="op" id="1410745">,</span>&nbsp;<span class="ident" id="1410747"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410754">.</span><span class="ident" id="1410755">Uint8</span><span class="op" id="1410760">,</span>&nbsp;<span class="ident" id="1410762"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410769">.</span><span class="ident" id="1410770">Uint16</span><span class="op" id="1410776">,</span>&nbsp;<span class="ident" id="1410778"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410785">.</span><span class="ident" id="1410786">Uint32</span><span class="op" id="1410792">,</span>&nbsp;<span class="ident" id="1410794"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410801">.</span><span class="ident" id="1410802">Uint64</span><span class="op" id="1410808">,</span>&nbsp;<span class="ident" id="1410810"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410817">.</span><span class="ident" id="1410818">Uintptr</span><span class="op" id="1410825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410830"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410831">.</span><span class="ident" id="1410832">SetUint</span><span class="op" id="1410839">(</span><span class="ident" id="1410840"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410841">.</span><span class="ident" id="1410842">scanUint</span><span class="op" id="1410850">(</span><span class="ident" id="1410851"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410855">,</span>&nbsp;<span class="ident" id="1410857"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410858">.</span><span class="ident" id="1410859">Type</span><span class="op" id="1410863">(</span><span class="op" id="1410864">)</span><span class="op" id="1410865">.</span><span class="ident" id="1410866">Bits</span><span class="op" id="1410870">(</span><span class="op" id="1410871">)</span><span class="op" id="1410872">)</span><span class="op" id="1410873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410877">case</span>&nbsp;<span class="ident" id="1410882"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410889">.</span><span class="ident" id="1410890">String</span><span class="op" id="1410896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410901"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1410902">.</span><span class="ident" id="1410903">SetString</span><span class="op" id="1410912">(</span><span class="ident" id="1410913"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1410914">.</span><span class="ident" id="1410915">convertString</span><span class="op" id="1410928">(</span><span class="ident" id="1410929"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1410933">)</span><span class="op" id="1410934">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1410938">case</span>&nbsp;<span class="ident" id="1410943"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1410950">.</span><span class="ident" id="1410951">Slice</span><span class="op" id="1410956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1410961">//&nbsp;For&nbsp;now,&nbsp;can&nbsp;only&nbsp;handle&nbsp;(renamed)&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411010">typ</span>&nbsp;<span class="op" id="1411014">:=</span>&nbsp;<span class="ident" id="1411017"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411018">.</span><span class="ident" id="1411019">Type</span><span class="op" id="1411023">(</span><span class="op" id="1411024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411029">if</span>&nbsp;<span class="ident" id="1411032"><a href="/fmt/scan.go.html#1411010">typ</a></span><span class="op" id="1411035">.</span><span class="ident" id="1411036">Elem</span><span class="op" id="1411040">(</span><span class="op" id="1411041">)</span><span class="op" id="1411042">.</span><span class="ident" id="1411043">Kind</span><span class="op" id="1411047">(</span><span class="op" id="1411048">)</span>&nbsp;<span class="op" id="1411050">!=</span>&nbsp;<span class="ident" id="1411053"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411060">.</span><span class="ident" id="1411061">Uint8</span>&nbsp;<span class="op" id="1411067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411073"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411074">.</span><span class="ident" id="1411075">errorString</span><span class="op" id="1411086">(</span><span class="string" id="1411087">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="1411107">+</span>&nbsp;<span class="ident" id="1411109"><a href="/fmt/scan.go.html#1410363">val</a></span><span class="op" id="1411112">.</span><span class="ident" id="1411113">Type</span><span class="op" id="1411117">(</span><span class="op" id="1411118">)</span><span class="op" id="1411119">.</span><span class="ident" id="1411120">String</span><span class="op" id="1411126">(</span><span class="op" id="1411127">)</span><span class="op" id="1411128">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411138">str</span>&nbsp;<span class="op" id="1411142">:=</span>&nbsp;<span class="ident" id="1411145"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411146">.</span><span class="ident" id="1411147">convertString</span><span class="op" id="1411160">(</span><span class="ident" id="1411161"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1411165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411170"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411171">.</span><span class="ident" id="1411172">Set</span><span class="op" id="1411175">(</span><span class="ident" id="1411176"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411183">.</span><span class="ident" id="1411184">MakeSlice</span><span class="op" id="1411193">(</span><span class="ident" id="1411194"><a href="/fmt/scan.go.html#1411010">typ</a></span><span class="op" id="1411197">,</span>&nbsp;<span class="builtinfunc" id="1411199">len</span><span class="op" id="1411202">(</span><span class="ident" id="1411203"><a href="/fmt/scan.go.html#1411138">str</a></span><span class="op" id="1411206">)</span><span class="op" id="1411207">,</span>&nbsp;<span class="builtinfunc" id="1411209">len</span><span class="op" id="1411212">(</span><span class="ident" id="1411213"><a href="/fmt/scan.go.html#1411138">str</a></span><span class="op" id="1411216">)</span><span class="op" id="1411217">)</span><span class="op" id="1411218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411223">for</span>&nbsp;<span class="ident" id="1411227">i</span>&nbsp;<span class="op" id="1411229">:=</span>&nbsp;<span class="num" id="1411232">0</span><span class="op" id="1411233">;</span>&nbsp;<span class="ident" id="1411235"><a href="/fmt/scan.go.html#1411227">i</a></span>&nbsp;<span class="op" id="1411237">&lt;</span>&nbsp;<span class="builtinfunc" id="1411239">len</span><span class="op" id="1411242">(</span><span class="ident" id="1411243"><a href="/fmt/scan.go.html#1411138">str</a></span><span class="op" id="1411246">)</span><span class="op" id="1411247">;</span>&nbsp;<span class="ident" id="1411249"><a href="/fmt/scan.go.html#1411227">i</a></span><span class="op" id="1411250">++</span>&nbsp;<span class="op" id="1411253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411259"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411260">.</span><span class="ident" id="1411261">Index</span><span class="op" id="1411266">(</span><span class="ident" id="1411267"><a href="/fmt/scan.go.html#1411227">i</a></span><span class="op" id="1411268">)</span><span class="op" id="1411269">.</span><span class="ident" id="1411270">SetUint</span><span class="op" id="1411277">(</span><span class="ident" id="1411278">uint64</span><span class="op" id="1411284">(</span><span class="ident" id="1411285"><a href="/fmt/scan.go.html#1411138">str</a></span><span class="op" id="1411288">[</span><span class="ident" id="1411289"><a href="/fmt/scan.go.html#1411227">i</a></span><span class="op" id="1411290">]</span><span class="op" id="1411291">)</span><span class="op" id="1411292">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411301">case</span>&nbsp;<span class="ident" id="1411306"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411313">.</span><span class="ident" id="1411314">Float32</span><span class="op" id="1411321">,</span>&nbsp;<span class="ident" id="1411323"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411330">.</span><span class="ident" id="1411331">Float64</span><span class="op" id="1411338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411343"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411344">.</span><span class="ident" id="1411345">skipSpace</span><span class="op" id="1411354">(</span><span class="ident" id="1411355">false</span><span class="op" id="1411360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411365"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411366">.</span><span class="ident" id="1411367">notEOF</span><span class="op" id="1411373">(</span><span class="op" id="1411374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411379"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411380">.</span><span class="ident" id="1411381">SetFloat</span><span class="op" id="1411389">(</span><span class="ident" id="1411390"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411391">.</span><span class="ident" id="1411392">convertFloat</span><span class="op" id="1411404">(</span><span class="ident" id="1411405"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411406">.</span><span class="ident" id="1411407">floatToken</span><span class="op" id="1411417">(</span><span class="op" id="1411418">)</span><span class="op" id="1411419">,</span>&nbsp;<span class="ident" id="1411421"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411422">.</span><span class="ident" id="1411423">Type</span><span class="op" id="1411427">(</span><span class="op" id="1411428">)</span><span class="op" id="1411429">.</span><span class="ident" id="1411430">Bits</span><span class="op" id="1411434">(</span><span class="op" id="1411435">)</span><span class="op" id="1411436">)</span><span class="op" id="1411437">)</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411441">case</span>&nbsp;<span class="ident" id="1411446"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411453">.</span><span class="ident" id="1411454">Complex64</span><span class="op" id="1411463">,</span>&nbsp;<span class="ident" id="1411465"><a href="/fmt/scan.go.html#1384740">reflect</a></span><span class="op" id="1411472">.</span><span class="ident" id="1411473">Complex128</span><span class="op" id="1411483">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411488"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411489">.</span><span class="ident" id="1411490">SetComplex</span><span class="op" id="1411500">(</span><span class="ident" id="1411501"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411502">.</span><span class="ident" id="1411503">scanComplex</span><span class="op" id="1411514">(</span><span class="ident" id="1411515"><a href="/fmt/scan.go.html#1408657">verb</a></span><span class="op" id="1411519">,</span>&nbsp;<span class="ident" id="1411521"><a href="/fmt/scan.go.html#1410521">v</a></span><span class="op" id="1411522">.</span><span class="ident" id="1411523">Type</span><span class="op" id="1411527">(</span><span class="op" id="1411528">)</span><span class="op" id="1411529">.</span><span class="ident" id="1411530">Bits</span><span class="op" id="1411534">(</span><span class="op" id="1411535">)</span><span class="op" id="1411536">)</span><span class="op" id="1411537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411541">default</span><span class="op" id="1411548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411553"><a href="/fmt/scan.go.html#1408642">s</a></span><span class="op" id="1411554">.</span><span class="ident" id="1411555">errorString</span><span class="op" id="1411566">(</span><span class="string" id="1411567">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="1411587">+</span>&nbsp;<span class="ident" id="1411589"><a href="/fmt/scan.go.html#1410363">val</a></span><span class="op" id="1411592">.</span><span class="ident" id="1411593">Type</span><span class="op" id="1411597">(</span><span class="op" id="1411598">)</span><span class="op" id="1411599">.</span><span class="ident" id="1411600">String</span><span class="op" id="1411606">(</span><span class="op" id="1411607">)</span><span class="op" id="1411608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411612">}</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411615">}</span><br>
<span class="lineno"></span><span class="op" id="1411617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1411620">//&nbsp;errorHandler&nbsp;turns&nbsp;local&nbsp;panics&nbsp;into&nbsp;error&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="1411675">func</span>&nbsp;<span class="ident" id="1411680">errorHandler</span><span class="op" id="1411692">(</span><span class="ident" id="1411693">errp</span>&nbsp;<span class="op" id="1411698">*</span><span class="builtintype" id="1411699">error</span><span class="op" id="1411704">)</span>&nbsp;<span class="op" id="1411706">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411709">if</span>&nbsp;<span class="ident" id="1411712">e</span>&nbsp;<span class="op" id="1411714">:=</span>&nbsp;<span class="builtinfunc" id="1411717">recover</span><span class="op" id="1411724">(</span><span class="op" id="1411725">)</span><span class="op" id="1411726">;</span>&nbsp;<span class="ident" id="1411728"><a href="/fmt/scan.go.html#1411712">e</a></span>&nbsp;<span class="op" id="1411730">!=</span>&nbsp;<span class="ident" id="1411733">nil</span>&nbsp;<span class="op" id="1411737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1411741">if</span>&nbsp;<span class="ident" id="1411744">se</span><span class="op" id="1411746">,</span>&nbsp;<span class="ident" id="1411748">ok</span>&nbsp;<span class="op" id="1411751">:=</span>&nbsp;<span class="ident" id="1411754"><a href="/fmt/scan.go.html#1411712">e</a></span><span class="op" id="1411755">.</span><span class="op" id="1411756">(</span><span class="ident" id="1411757"><a href="/fmt/scan.go.html#1390384">scanError</a></span><span class="op" id="1411766">)</span><span class="op" id="1411767">;</span>&nbsp;<span class="ident" id="1411769"><a href="/fmt/scan.go.html#1411748">ok</a></span>&nbsp;<span class="op" id="1411772">{</span>&nbsp;<span class="comment" id="1411774">//&nbsp;catch&nbsp;local&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411798">*</span><span class="ident" id="1411799"><a href="/fmt/scan.go.html#1411693">errp</a></span>&nbsp;<span class="op" id="1411804">=</span>&nbsp;<span class="ident" id="1411806"><a href="/fmt/scan.go.html#1411744">se</a></span><span class="op" id="1411808">.</span><span class="ident" id="1411809">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411815">}</span>&nbsp;<span class="keyword" id="1411817">else</span>&nbsp;<span class="keyword" id="1411822">if</span>&nbsp;<span class="ident" id="1411825">eof</span><span class="op" id="1411828">,</span>&nbsp;<span class="ident" id="1411830">ok</span>&nbsp;<span class="op" id="1411833">:=</span>&nbsp;<span class="ident" id="1411836"><a href="/fmt/scan.go.html#1411712">e</a></span><span class="op" id="1411837">.</span><span class="op" id="1411838">(</span><span class="builtintype" id="1411839">error</span><span class="op" id="1411844">)</span><span class="op" id="1411845">;</span>&nbsp;<span class="ident" id="1411847"><a href="/fmt/scan.go.html#1411830">ok</a></span>&nbsp;<span class="op" id="1411850">&amp;&amp;</span>&nbsp;<span class="ident" id="1411853"><a href="/fmt/scan.go.html#1411825">eof</a></span>&nbsp;<span class="op" id="1411857">==</span>&nbsp;<span class="ident" id="1411860"><a href="/fmt/scan.go.html#1384720">io</a></span><span class="op" id="1411862">.</span><span class="ident" id="1411863">EOF</span>&nbsp;<span class="op" id="1411867">{</span>&nbsp;<span class="comment" id="1411869">//&nbsp;out&nbsp;of&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411888">*</span><span class="ident" id="1411889"><a href="/fmt/scan.go.html#1411693">errp</a></span>&nbsp;<span class="op" id="1411894">=</span>&nbsp;<span class="ident" id="1411896"><a href="/fmt/scan.go.html#1411825">eof</a></span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411902">}</span>&nbsp;<span class="keyword" id="1411904">else</span>&nbsp;<span class="op" id="1411909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1411914">panic</span><span class="op" id="1411919">(</span><span class="ident" id="1411920"><a href="/fmt/scan.go.html#1411712">e</a></span><span class="op" id="1411921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1411928">}</span><br>
<span class="lineno"></span><span class="op" id="1411930">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="1411933">//&nbsp;doScan&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;for&nbsp;scanning&nbsp;without&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1412000">func</span>&nbsp;<span class="op" id="1412005">(</span><span class="ident" id="1412006">s</span>&nbsp;<span class="op" id="1412008">*</span><span class="ident" id="1412009"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1412011">)</span>&nbsp;<span class="ident" id="1412013">doScan</span><span class="op" id="1412019">(</span><span class="ident" id="1412020">a</span>&nbsp;<span class="op" id="1412022">[</span><span class="op" id="1412023">]</span><span class="keyword" id="1412024">interface</span><span class="op" id="1412033">{</span><span class="op" id="1412034">}</span><span class="op" id="1412035">)</span>&nbsp;<span class="op" id="1412037">(</span><span class="ident" id="1412038">numProcessed</span>&nbsp;<span class="builtintype" id="1412051">int</span><span class="op" id="1412054">,</span>&nbsp;<span class="ident" id="1412056">err</span>&nbsp;<span class="builtintype" id="1412060">error</span><span class="op" id="1412065">)</span>&nbsp;<span class="op" id="1412067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412070">defer</span>&nbsp;<span class="ident" id="1412076"><a href="/fmt/scan.go.html#1411680">errorHandler</a></span><span class="op" id="1412088">(</span><span class="op" id="1412089">&amp;</span><span class="ident" id="1412090"><a href="/fmt/scan.go.html#1412056">err</a></span><span class="op" id="1412093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412096">for</span>&nbsp;<span class="ident" id="1412100">_</span><span class="op" id="1412101">,</span>&nbsp;<span class="ident" id="1412103">arg</span>&nbsp;<span class="op" id="1412107">:=</span>&nbsp;<span class="keyword" id="1412110">range</span>&nbsp;<span class="ident" id="1412116"><a href="/fmt/scan.go.html#1412020">a</a></span>&nbsp;<span class="op" id="1412118">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412122"><a href="/fmt/scan.go.html#1412006">s</a></span><span class="op" id="1412123">.</span><span class="ident" id="1412124">scanOne</span><span class="op" id="1412131">(</span><span class="string" id="1412132">&#39;v&#39;</span><span class="op" id="1412135">,</span>&nbsp;<span class="ident" id="1412137"><a href="/fmt/scan.go.html#1412103">arg</a></span><span class="op" id="1412140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412144"><a href="/fmt/scan.go.html#1412038">numProcessed</a></span><span class="op" id="1412156">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1412160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1412163">//&nbsp;Check&nbsp;for&nbsp;newline&nbsp;if&nbsp;required.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412198">if</span>&nbsp;<span class="op" id="1412201">!</span><span class="ident" id="1412202"><a href="/fmt/scan.go.html#1412006">s</a></span><span class="op" id="1412203">.</span><span class="ident" id="1412204">nlIsSpace</span>&nbsp;<span class="op" id="1412214">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412218">for</span>&nbsp;<span class="op" id="1412222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412227">r</span>&nbsp;<span class="op" id="1412229">:=</span>&nbsp;<span class="ident" id="1412232"><a href="/fmt/scan.go.html#1412006">s</a></span><span class="op" id="1412233">.</span><span class="ident" id="1412234">getRune</span><span class="op" id="1412241">(</span><span class="op" id="1412242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412247">if</span>&nbsp;<span class="ident" id="1412250"><a href="/fmt/scan.go.html#1412227">r</a></span>&nbsp;<span class="op" id="1412252">==</span>&nbsp;<span class="string" id="1412255">&#39;\n&#39;</span>&nbsp;<span class="op" id="1412260">||</span>&nbsp;<span class="ident" id="1412263"><a href="/fmt/scan.go.html#1412227">r</a></span>&nbsp;<span class="op" id="1412265">==</span>&nbsp;<span class="ident" id="1412268"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1412272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412278">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1412287">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412292">if</span>&nbsp;<span class="op" id="1412295">!</span><span class="ident" id="1412296"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1412303">(</span><span class="ident" id="1412304"><a href="/fmt/scan.go.html#1412227">r</a></span><span class="op" id="1412305">)</span>&nbsp;<span class="op" id="1412307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412313"><a href="/fmt/scan.go.html#1412006">s</a></span><span class="op" id="1412314">.</span><span class="ident" id="1412315">errorString</span><span class="op" id="1412326">(</span><span class="string" id="1412327">&#34;expected&nbsp;newline&#34;</span><span class="op" id="1412345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412351">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1412360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1412364">}</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1412367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412370">return</span><br>
<span class="lineno"></span><span class="op" id="1412377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1412380">//&nbsp;advance&nbsp;determines&nbsp;whether&nbsp;the&nbsp;next&nbsp;characters&nbsp;in&nbsp;the&nbsp;input&nbsp;match</span><br>
<span class="lineno">1070</span><span class="comment" id="1412449">//&nbsp;those&nbsp;of&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;(sic)&nbsp;consumed</span><br>
<span class="lineno"></span><span class="comment" id="1412520">//&nbsp;in&nbsp;the&nbsp;format.&nbsp;Newlines&nbsp;included,&nbsp;all&nbsp;runs&nbsp;of&nbsp;space&nbsp;characters&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1412589">//&nbsp;either&nbsp;input&nbsp;or&nbsp;format&nbsp;behave&nbsp;as&nbsp;a&nbsp;single&nbsp;space.&nbsp;This&nbsp;routine&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="1412659">//&nbsp;handles&nbsp;the&nbsp;%%&nbsp;case.&nbsp;&nbsp;If&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;zero,&nbsp;either&nbsp;format</span><br>
<span class="lineno"></span><span class="comment" id="1412727">//&nbsp;starts&nbsp;with&nbsp;a&nbsp;%&nbsp;(with&nbsp;no&nbsp;following&nbsp;%)&nbsp;or&nbsp;the&nbsp;input&nbsp;is&nbsp;empty.</span><br>
<span class="lineno">1075</span><span class="comment" id="1412791">//&nbsp;If&nbsp;it&nbsp;is&nbsp;negative,&nbsp;the&nbsp;input&nbsp;did&nbsp;not&nbsp;match&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1412849">func</span>&nbsp;<span class="op" id="1412854">(</span><span class="ident" id="1412855">s</span>&nbsp;<span class="op" id="1412857">*</span><span class="ident" id="1412858"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1412860">)</span>&nbsp;<span class="ident" id="1412862">advance</span><span class="op" id="1412869">(</span><span class="ident" id="1412870">format</span>&nbsp;<span class="builtintype" id="1412877">string</span><span class="op" id="1412883">)</span>&nbsp;<span class="op" id="1412885">(</span><span class="ident" id="1412886">i</span>&nbsp;<span class="builtintype" id="1412888">int</span><span class="op" id="1412891">)</span>&nbsp;<span class="op" id="1412893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412896">for</span>&nbsp;<span class="ident" id="1412900"><a href="/fmt/scan.go.html#1412886">i</a></span>&nbsp;<span class="op" id="1412902">&lt;</span>&nbsp;<span class="builtinfunc" id="1412904">len</span><span class="op" id="1412907">(</span><span class="ident" id="1412908"><a href="/fmt/scan.go.html#1412870">format</a></span><span class="op" id="1412914">)</span>&nbsp;<span class="op" id="1412916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412920">fmtc</span><span class="op" id="1412924">,</span>&nbsp;<span class="ident" id="1412926">w</span>&nbsp;<span class="op" id="1412928">:=</span>&nbsp;<span class="ident" id="1412931"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1412935">.</span><span class="ident" id="1412936">DecodeRuneInString</span><span class="op" id="1412954">(</span><span class="ident" id="1412955"><a href="/fmt/scan.go.html#1412870">format</a></span><span class="op" id="1412961">[</span><span class="ident" id="1412962"><a href="/fmt/scan.go.html#1412886">i</a></span><span class="op" id="1412963">:</span><span class="op" id="1412964">]</span><span class="op" id="1412965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1412969">if</span>&nbsp;<span class="ident" id="1412972"><a href="/fmt/scan.go.html#1412920">fmtc</a></span>&nbsp;<span class="op" id="1412977">==</span>&nbsp;<span class="string" id="1412980">&#39;%&#39;</span>&nbsp;<span class="op" id="1412984">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1412989">//&nbsp;%%&nbsp;acts&nbsp;like&nbsp;a&nbsp;real&nbsp;percent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413023">nextc</span><span class="op" id="1413028">,</span>&nbsp;<span class="ident" id="1413030">_</span>&nbsp;<span class="op" id="1413032">:=</span>&nbsp;<span class="ident" id="1413035"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1413039">.</span><span class="ident" id="1413040">DecodeRuneInString</span><span class="op" id="1413058">(</span><span class="ident" id="1413059"><a href="/fmt/scan.go.html#1412870">format</a></span><span class="op" id="1413065">[</span><span class="ident" id="1413066"><a href="/fmt/scan.go.html#1412886">i</a></span><span class="op" id="1413067">+</span><span class="ident" id="1413068"><a href="/fmt/scan.go.html#1412926">w</a></span><span class="op" id="1413069">:</span><span class="op" id="1413070">]</span><span class="op" id="1413071">)</span>&nbsp;<span class="comment" id="1413073">//&nbsp;will&nbsp;not&nbsp;match&nbsp;%&nbsp;if&nbsp;string&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413115">if</span>&nbsp;<span class="ident" id="1413118"><a href="/fmt/scan.go.html#1413023">nextc</a></span>&nbsp;<span class="op" id="1413124">!=</span>&nbsp;<span class="string" id="1413127">&#39;%&#39;</span>&nbsp;<span class="op" id="1413131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413137">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413147">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413152"><a href="/fmt/scan.go.html#1412886">i</a></span>&nbsp;<span class="op" id="1413154">+=</span>&nbsp;<span class="ident" id="1413157"><a href="/fmt/scan.go.html#1412926">w</a></span>&nbsp;<span class="comment" id="1413159">//&nbsp;skip&nbsp;the&nbsp;first&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413185">sawSpace</span>&nbsp;<span class="op" id="1413194">:=</span>&nbsp;<span class="ident" id="1413197">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413205">for</span>&nbsp;<span class="ident" id="1413209"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1413216">(</span><span class="ident" id="1413217"><a href="/fmt/scan.go.html#1412920">fmtc</a></span><span class="op" id="1413221">)</span>&nbsp;<span class="op" id="1413223">&amp;&amp;</span>&nbsp;<span class="ident" id="1413226"><a href="/fmt/scan.go.html#1412886">i</a></span>&nbsp;<span class="op" id="1413228">&lt;</span>&nbsp;<span class="builtinfunc" id="1413230">len</span><span class="op" id="1413233">(</span><span class="ident" id="1413234"><a href="/fmt/scan.go.html#1412870">format</a></span><span class="op" id="1413240">)</span>&nbsp;<span class="op" id="1413242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413247"><a href="/fmt/scan.go.html#1413185">sawSpace</a></span>&nbsp;<span class="op" id="1413256">=</span>&nbsp;<span class="ident" id="1413258">true</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413266"><a href="/fmt/scan.go.html#1412886">i</a></span>&nbsp;<span class="op" id="1413268">+=</span>&nbsp;<span class="ident" id="1413271"><a href="/fmt/scan.go.html#1412926">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413276"><a href="/fmt/scan.go.html#1412920">fmtc</a></span><span class="op" id="1413280">,</span>&nbsp;<span class="ident" id="1413282"><a href="/fmt/scan.go.html#1412926">w</a></span>&nbsp;<span class="op" id="1413284">=</span>&nbsp;<span class="ident" id="1413286"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1413290">.</span><span class="ident" id="1413291">DecodeRuneInString</span><span class="op" id="1413309">(</span><span class="ident" id="1413310"><a href="/fmt/scan.go.html#1412870">format</a></span><span class="op" id="1413316">[</span><span class="ident" id="1413317"><a href="/fmt/scan.go.html#1412886">i</a></span><span class="op" id="1413318">:</span><span class="op" id="1413319">]</span><span class="op" id="1413320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413328">if</span>&nbsp;<span class="ident" id="1413331"><a href="/fmt/scan.go.html#1413185">sawSpace</a></span>&nbsp;<span class="op" id="1413340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1413345">//&nbsp;There&nbsp;was&nbsp;space&nbsp;in&nbsp;the&nbsp;format,&nbsp;so&nbsp;there&nbsp;should&nbsp;be&nbsp;space&nbsp;(EOF)</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1413413">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413433">inputc</span>&nbsp;<span class="op" id="1413440">:=</span>&nbsp;<span class="ident" id="1413443"><a href="/fmt/scan.go.html#1412855">s</a></span><span class="op" id="1413444">.</span><span class="ident" id="1413445">getRune</span><span class="op" id="1413452">(</span><span class="op" id="1413453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413458">if</span>&nbsp;<span class="ident" id="1413461"><a href="/fmt/scan.go.html#1413433">inputc</a></span>&nbsp;<span class="op" id="1413468">==</span>&nbsp;<span class="ident" id="1413471"><a href="/fmt/scan.go.html#1390423">eof</a></span>&nbsp;<span class="op" id="1413475">||</span>&nbsp;<span class="ident" id="1413478"><a href="/fmt/scan.go.html#1413433">inputc</a></span>&nbsp;<span class="op" id="1413485">==</span>&nbsp;<span class="string" id="1413488">&#39;\n&#39;</span>&nbsp;<span class="op" id="1413493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1413499">//&nbsp;If&nbsp;we&#39;ve&nbsp;reached&nbsp;a&nbsp;newline,&nbsp;stop&nbsp;now;&nbsp;don&#39;t&nbsp;read&nbsp;ahead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413562">return</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413577">if</span>&nbsp;<span class="op" id="1413580">!</span><span class="ident" id="1413581"><a href="/fmt/scan.go.html#1393537">isSpace</a></span><span class="op" id="1413588">(</span><span class="ident" id="1413589"><a href="/fmt/scan.go.html#1413433">inputc</a></span><span class="op" id="1413595">)</span>&nbsp;<span class="op" id="1413597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1413603">//&nbsp;Space&nbsp;in&nbsp;format&nbsp;but&nbsp;not&nbsp;in&nbsp;input:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413650"><a href="/fmt/scan.go.html#1412855">s</a></span><span class="op" id="1413651">.</span><span class="ident" id="1413652">errorString</span><span class="op" id="1413663">(</span><span class="string" id="1413664">&#34;expected&nbsp;space&nbsp;in&nbsp;input&nbsp;to&nbsp;match&nbsp;format&#34;</span><span class="op" id="1413705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413710">}</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413715"><a href="/fmt/scan.go.html#1412855">s</a></span><span class="op" id="1413716">.</span><span class="ident" id="1413717">skipSpace</span><span class="op" id="1413726">(</span><span class="ident" id="1413727">true</span><span class="op" id="1413731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413736">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413751">inputc</span>&nbsp;<span class="op" id="1413758">:=</span>&nbsp;<span class="ident" id="1413761"><a href="/fmt/scan.go.html#1412855">s</a></span><span class="op" id="1413762">.</span><span class="ident" id="1413763">mustReadRune</span><span class="op" id="1413775">(</span><span class="op" id="1413776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413780">if</span>&nbsp;<span class="ident" id="1413783"><a href="/fmt/scan.go.html#1412920">fmtc</a></span>&nbsp;<span class="op" id="1413788">!=</span>&nbsp;<span class="ident" id="1413791"><a href="/fmt/scan.go.html#1413751">inputc</a></span>&nbsp;<span class="op" id="1413798">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413803"><a href="/fmt/scan.go.html#1412855">s</a></span><span class="op" id="1413804">.</span><span class="ident" id="1413805">UnreadRune</span><span class="op" id="1413815">(</span><span class="op" id="1413816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413821">return</span>&nbsp;<span class="op" id="1413828">-</span><span class="num" id="1413829">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413837"><a href="/fmt/scan.go.html#1412886">i</a></span>&nbsp;<span class="op" id="1413839">+=</span>&nbsp;<span class="ident" id="1413842"><a href="/fmt/scan.go.html#1412926">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1413845">}</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1413848">return</span><br>
<span class="lineno"></span><span class="op" id="1413855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1413858">//&nbsp;doScanf&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;when&nbsp;scanning&nbsp;with&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1413924">//&nbsp;&nbsp;At&nbsp;the&nbsp;moment,&nbsp;it&nbsp;handles&nbsp;only&nbsp;pointers&nbsp;to&nbsp;basic&nbsp;types.</span><br>
<span class="lineno">1120</span><span class="keyword" id="1413984">func</span>&nbsp;<span class="op" id="1413989">(</span><span class="ident" id="1413990">s</span>&nbsp;<span class="op" id="1413992">*</span><span class="ident" id="1413993"><a href="/fmt/scan.go.html#1390489">ss</a></span><span class="op" id="1413995">)</span>&nbsp;<span class="ident" id="1413997">doScanf</span><span class="op" id="1414004">(</span><span class="ident" id="1414005">format</span>&nbsp;<span class="builtintype" id="1414012">string</span><span class="op" id="1414018">,</span>&nbsp;<span class="ident" id="1414020">a</span>&nbsp;<span class="op" id="1414022">[</span><span class="op" id="1414023">]</span><span class="keyword" id="1414024">interface</span><span class="op" id="1414033">{</span><span class="op" id="1414034">}</span><span class="op" id="1414035">)</span>&nbsp;<span class="op" id="1414037">(</span><span class="ident" id="1414038">numProcessed</span>&nbsp;<span class="builtintype" id="1414051">int</span><span class="op" id="1414054">,</span>&nbsp;<span class="ident" id="1414056">err</span>&nbsp;<span class="builtintype" id="1414060">error</span><span class="op" id="1414065">)</span>&nbsp;<span class="op" id="1414067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414070">defer</span>&nbsp;<span class="ident" id="1414076"><a href="/fmt/scan.go.html#1411680">errorHandler</a></span><span class="op" id="1414088">(</span><span class="op" id="1414089">&amp;</span><span class="ident" id="1414090"><a href="/fmt/scan.go.html#1414056">err</a></span><span class="op" id="1414093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414096">end</span>&nbsp;<span class="op" id="1414100">:=</span>&nbsp;<span class="builtinfunc" id="1414103">len</span><span class="op" id="1414106">(</span><span class="ident" id="1414107"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414113">)</span>&nbsp;<span class="op" id="1414115">-</span>&nbsp;<span class="num" id="1414117">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1414120">//&nbsp;We&nbsp;process&nbsp;one&nbsp;item&nbsp;per&nbsp;non-trivial&nbsp;format</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414167">for</span>&nbsp;<span class="ident" id="1414171">i</span>&nbsp;<span class="op" id="1414173">:=</span>&nbsp;<span class="num" id="1414176">0</span><span class="op" id="1414177">;</span>&nbsp;<span class="ident" id="1414179"><a href="/fmt/scan.go.html#1414171">i</a></span>&nbsp;<span class="op" id="1414181">&lt;=</span>&nbsp;<span class="ident" id="1414184"><a href="/fmt/scan.go.html#1414096">end</a></span><span class="op" id="1414187">;</span>&nbsp;<span class="op" id="1414189">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414193">w</span>&nbsp;<span class="op" id="1414195">:=</span>&nbsp;<span class="ident" id="1414198"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414199">.</span><span class="ident" id="1414200">advance</span><span class="op" id="1414207">(</span><span class="ident" id="1414208"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414214">[</span><span class="ident" id="1414215"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414216">:</span><span class="op" id="1414217">]</span><span class="op" id="1414218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414222">if</span>&nbsp;<span class="ident" id="1414225"><a href="/fmt/scan.go.html#1414193">w</a></span>&nbsp;<span class="op" id="1414227">&gt;</span>&nbsp;<span class="num" id="1414229">0</span>&nbsp;<span class="op" id="1414231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414236"><a href="/fmt/scan.go.html#1414171">i</a></span>&nbsp;<span class="op" id="1414238">+=</span>&nbsp;<span class="ident" id="1414241"><a href="/fmt/scan.go.html#1414193">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414246">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414257">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1414261">//&nbsp;Either&nbsp;we&nbsp;failed&nbsp;to&nbsp;advance,&nbsp;we&nbsp;have&nbsp;a&nbsp;percent&nbsp;character,&nbsp;or&nbsp;we&nbsp;ran&nbsp;out&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414348">if</span>&nbsp;<span class="ident" id="1414351"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414357">[</span><span class="ident" id="1414358"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414359">]</span>&nbsp;<span class="op" id="1414361">!=</span>&nbsp;<span class="string" id="1414364">&#39;%&#39;</span>&nbsp;<span class="op" id="1414368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1414373">//&nbsp;Can&#39;t&nbsp;advance&nbsp;format.&nbsp;&nbsp;Why&nbsp;not?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414411">if</span>&nbsp;<span class="ident" id="1414414"><a href="/fmt/scan.go.html#1414193">w</a></span>&nbsp;<span class="op" id="1414416">&lt;</span>&nbsp;<span class="num" id="1414418">0</span>&nbsp;<span class="op" id="1414420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414426"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414427">.</span><span class="ident" id="1414428">errorString</span><span class="op" id="1414439">(</span><span class="string" id="1414440">&#34;input&nbsp;does&nbsp;not&nbsp;match&nbsp;format&#34;</span><span class="op" id="1414469">)</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1414479">//&nbsp;Otherwise&nbsp;at&nbsp;EOF;&nbsp;&#34;too&nbsp;many&nbsp;operands&#34;&nbsp;error&nbsp;handled&nbsp;below</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414543">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414555"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414556">++</span>&nbsp;<span class="comment" id="1414559">//&nbsp;%&nbsp;is&nbsp;one&nbsp;byte</span><br>
<span class="lineno">1140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1414579">//&nbsp;do&nbsp;we&nbsp;have&nbsp;20&nbsp;(width)?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414607">var</span>&nbsp;<span class="ident" id="1414611">widPresent</span>&nbsp;<span class="builtintype" id="1414622">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414629"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414630">.</span><span class="ident" id="1414631">maxWid</span><span class="op" id="1414637">,</span>&nbsp;<span class="ident" id="1414639"><a href="/fmt/scan.go.html#1414611">widPresent</a></span><span class="op" id="1414649">,</span>&nbsp;<span class="ident" id="1414651"><a href="/fmt/scan.go.html#1414171">i</a></span>&nbsp;<span class="op" id="1414653">=</span>&nbsp;<span class="ident" id="1414655"><a href="/fmt/print.go.html#1362561">parsenum</a></span><span class="op" id="1414663">(</span><span class="ident" id="1414664"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414670">,</span>&nbsp;<span class="ident" id="1414672"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414673">,</span>&nbsp;<span class="ident" id="1414675"><a href="/fmt/scan.go.html#1414096">end</a></span><span class="op" id="1414678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414682">if</span>&nbsp;<span class="op" id="1414685">!</span><span class="ident" id="1414686"><a href="/fmt/scan.go.html#1414611">widPresent</a></span>&nbsp;<span class="op" id="1414697">{</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414702"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414703">.</span><span class="ident" id="1414704">maxWid</span>&nbsp;<span class="op" id="1414711">=</span>&nbsp;<span class="ident" id="1414713"><a href="/fmt/scan.go.html#1408532">hugeWid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414727"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414728">.</span><span class="ident" id="1414729">argLimit</span>&nbsp;<span class="op" id="1414738">=</span>&nbsp;<span class="ident" id="1414740"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414741">.</span><span class="ident" id="1414742">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414750">if</span>&nbsp;<span class="ident" id="1414753">f</span>&nbsp;<span class="op" id="1414755">:=</span>&nbsp;<span class="ident" id="1414758"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414759">.</span><span class="ident" id="1414760">count</span>&nbsp;<span class="op" id="1414766">+</span>&nbsp;<span class="ident" id="1414768"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414769">.</span><span class="ident" id="1414770">maxWid</span><span class="op" id="1414776">;</span>&nbsp;<span class="ident" id="1414778"><a href="/fmt/scan.go.html#1414753">f</a></span>&nbsp;<span class="op" id="1414780">&lt;</span>&nbsp;<span class="ident" id="1414782"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414783">.</span><span class="ident" id="1414784">argLimit</span>&nbsp;<span class="op" id="1414793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414798"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414799">.</span><span class="ident" id="1414800">argLimit</span>&nbsp;<span class="op" id="1414809">=</span>&nbsp;<span class="ident" id="1414811"><a href="/fmt/scan.go.html#1414753">f</a></span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414820">c</span><span class="op" id="1414821">,</span>&nbsp;<span class="ident" id="1414823"><a href="/fmt/scan.go.html#1414193">w</a></span>&nbsp;<span class="op" id="1414825">:=</span>&nbsp;<span class="ident" id="1414828"><a href="/fmt/scan.go.html#1384770">utf8</a></span><span class="op" id="1414832">.</span><span class="ident" id="1414833">DecodeRuneInString</span><span class="op" id="1414851">(</span><span class="ident" id="1414852"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414858">[</span><span class="ident" id="1414859"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414860">:</span><span class="op" id="1414861">]</span><span class="op" id="1414862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414866"><a href="/fmt/scan.go.html#1414171">i</a></span>&nbsp;<span class="op" id="1414868">+=</span>&nbsp;<span class="ident" id="1414871"><a href="/fmt/scan.go.html#1414193">w</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414876">if</span>&nbsp;<span class="ident" id="1414879"><a href="/fmt/scan.go.html#1414038">numProcessed</a></span>&nbsp;<span class="op" id="1414892">&gt;=</span>&nbsp;<span class="builtinfunc" id="1414895">len</span><span class="op" id="1414898">(</span><span class="ident" id="1414899"><a href="/fmt/scan.go.html#1414020">a</a></span><span class="op" id="1414900">)</span>&nbsp;<span class="op" id="1414902">{</span>&nbsp;<span class="comment" id="1414904">//&nbsp;out&nbsp;of&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414926"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1414927">.</span><span class="ident" id="1414928">errorString</span><span class="op" id="1414939">(</span><span class="string" id="1414940">&#34;too&nbsp;few&nbsp;operands&nbsp;for&nbsp;format&nbsp;%&#34;</span>&nbsp;<span class="op" id="1414972">+</span>&nbsp;<span class="ident" id="1414974"><a href="/fmt/scan.go.html#1414005">format</a></span><span class="op" id="1414980">[</span><span class="ident" id="1414981"><a href="/fmt/scan.go.html#1414171">i</a></span><span class="op" id="1414982">-</span><span class="ident" id="1414983"><a href="/fmt/scan.go.html#1414193">w</a></span><span class="op" id="1414984">:</span><span class="op" id="1414985">]</span><span class="op" id="1414986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1414991">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1414999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415003">arg</span>&nbsp;<span class="op" id="1415007">:=</span>&nbsp;<span class="ident" id="1415010"><a href="/fmt/scan.go.html#1414020">a</a></span><span class="op" id="1415011">[</span><span class="ident" id="1415012"><a href="/fmt/scan.go.html#1414038">numProcessed</a></span><span class="op" id="1415024">]</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415029"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1415030">.</span><span class="ident" id="1415031">scanOne</span><span class="op" id="1415038">(</span><span class="ident" id="1415039"><a href="/fmt/scan.go.html#1414820">c</a></span><span class="op" id="1415040">,</span>&nbsp;<span class="ident" id="1415042"><a href="/fmt/scan.go.html#1415003">arg</a></span><span class="op" id="1415045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415049"><a href="/fmt/scan.go.html#1414038">numProcessed</a></span><span class="op" id="1415061">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415066"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1415067">.</span><span class="ident" id="1415068">argLimit</span>&nbsp;<span class="op" id="1415077">=</span>&nbsp;<span class="ident" id="1415079"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1415080">.</span><span class="ident" id="1415081">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415088">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415091">if</span>&nbsp;<span class="ident" id="1415094"><a href="/fmt/scan.go.html#1414038">numProcessed</a></span>&nbsp;<span class="op" id="1415107">&lt;</span>&nbsp;<span class="builtinfunc" id="1415109">len</span><span class="op" id="1415112">(</span><span class="ident" id="1415113"><a href="/fmt/scan.go.html#1414020">a</a></span><span class="op" id="1415114">)</span>&nbsp;<span class="op" id="1415116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415120"><a href="/fmt/scan.go.html#1413990">s</a></span><span class="op" id="1415121">.</span><span class="ident" id="1415122">errorString</span><span class="op" id="1415133">(</span><span class="string" id="1415134">&#34;too&nbsp;many&nbsp;operands&#34;</span><span class="op" id="1415153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415159">return</span><br>
<span class="lineno"></span><span class="op" id="1415166">}</span>
</div>
</body>
</html>
