<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7736428">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7736483">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7736537">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7736588">package</span>&nbsp;<span class="ident" id="7736596">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736601">import</span>&nbsp;<span class="op" id="7736608">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736611">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736620">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736639">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736655">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736661">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736674">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736680">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736697">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736707">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736718">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736729">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7736736">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7736739">type</span>&nbsp;<span class="ident" id="7736744">ZipTest</span>&nbsp;<span class="keyword" id="7736752">struct</span>&nbsp;<span class="op" id="7736759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736762">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7736770">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736778">Source</span>&nbsp;&nbsp;<span class="keyword" id="7736786">func</span><span class="op" id="7736790">(</span><span class="op" id="7736791">)</span>&nbsp;<span class="op" id="7736793">(</span><span class="ident" id="7736794">r</span>&nbsp;<span class="ident" id="7736796">io</span><span class="op" id="7736798">.</span><span class="ident" id="7736799">ReaderAt</span><span class="op" id="7736807">,</span>&nbsp;<span class="ident" id="7736809">size</span>&nbsp;<span class="ident" id="7736814">int64</span><span class="op" id="7736819">)</span>&nbsp;<span class="comment" id="7736821">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736874">Comment</span>&nbsp;<span class="builtintype" id="7736882">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736890">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736898">[</span><span class="op" id="7736899">]</span><span class="ident" id="7736900">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736913">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7736921">error</span>&nbsp;<span class="comment" id="7736927">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7736977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736980">type</span>&nbsp;<span class="ident" id="7736985">ZipTestFile</span>&nbsp;<span class="keyword" id="7736997">struct</span>&nbsp;<span class="op" id="7737004">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737007">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7737018">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737026">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737037">[</span><span class="op" id="7737038">]</span><span class="builtintype" id="7737039">byte</span>&nbsp;<span class="comment" id="7737044">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737095">ContentErr</span>&nbsp;<span class="builtintype" id="7737106">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737113">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7737124">string</span>&nbsp;<span class="comment" id="7737131">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737186">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7737197">string</span>&nbsp;<span class="comment" id="7737204">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737252">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737263">os</span><span class="op" id="7737265">.</span><span class="ident" id="7737266">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7737275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7737278">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7737353">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7737428">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7737502">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7737576">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7737652">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7737726">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7737806">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7737885">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7737933">var</span>&nbsp;<span class="ident" id="7737937">tests</span>&nbsp;<span class="op" id="7737943">=</span>&nbsp;<span class="op" id="7737945">[</span><span class="op" id="7737946">]</span><span class="ident" id="7737947">ZipTest</span><span class="op" id="7737954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737957">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737961">Name</span><span class="op" id="7737965">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737970">&#34;test.zip&#34;</span><span class="op" id="7737980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737984">Comment</span><span class="op" id="7737991">:</span>&nbsp;<span class="string" id="7737993">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7738021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738025">File</span><span class="op" id="7738029">:</span>&nbsp;<span class="op" id="7738031">[</span><span class="op" id="7738032">]</span><span class="ident" id="7738033">ZipTestFile</span><span class="op" id="7738044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738055">Name</span><span class="op" id="7738059">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738064">&#34;test.txt&#34;</span><span class="op" id="7738074">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738080">Content</span><span class="op" id="7738087">:</span>&nbsp;<span class="op" id="7738089">[</span><span class="op" id="7738090">]</span><span class="builtintype" id="7738091">byte</span><span class="op" id="7738095">(</span><span class="string" id="7738096">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7738125">)</span><span class="op" id="7738126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738132">Mtime</span><span class="op" id="7738137">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7738141">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7738160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738166">Mode</span><span class="op" id="7738170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738175">0644</span><span class="op" id="7738179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738184">}</span><span class="op" id="7738185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738190">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738196">Name</span><span class="op" id="7738200">:</span>&nbsp;&nbsp;<span class="string" id="7738203">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7738225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738231">File</span><span class="op" id="7738235">:</span>&nbsp;&nbsp;<span class="string" id="7738238">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7738260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738266">Mtime</span><span class="op" id="7738271">:</span>&nbsp;<span class="string" id="7738273">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7738292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738298">Mode</span><span class="op" id="7738302">:</span>&nbsp;&nbsp;<span class="num" id="7738305">0644</span><span class="op" id="7738309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738314">}</span><span class="op" id="7738315">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738319">}</span><span class="op" id="7738320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738323">}</span><span class="op" id="7738324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738331">Name</span><span class="op" id="7738335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738340">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7738364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738368">Comment</span><span class="op" id="7738375">:</span>&nbsp;<span class="string" id="7738377">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7738405">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738409">File</span><span class="op" id="7738413">:</span>&nbsp;<span class="op" id="7738415">[</span><span class="op" id="7738416">]</span><span class="ident" id="7738417">ZipTestFile</span><span class="op" id="7738428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738439">Name</span><span class="op" id="7738443">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738448">&#34;test.txt&#34;</span><span class="op" id="7738458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738464">Content</span><span class="op" id="7738471">:</span>&nbsp;<span class="op" id="7738473">[</span><span class="op" id="7738474">]</span><span class="builtintype" id="7738475">byte</span><span class="op" id="7738479">(</span><span class="string" id="7738480">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7738509">)</span><span class="op" id="7738510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738516">Mtime</span><span class="op" id="7738521">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7738525">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7738544">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738550">Mode</span><span class="op" id="7738554">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738559">0644</span><span class="op" id="7738563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738568">}</span><span class="op" id="7738569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738580">Name</span><span class="op" id="7738584">:</span>&nbsp;&nbsp;<span class="string" id="7738587">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7738609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738615">File</span><span class="op" id="7738619">:</span>&nbsp;&nbsp;<span class="string" id="7738622">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7738644">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738650">Mtime</span><span class="op" id="7738655">:</span>&nbsp;<span class="string" id="7738657">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7738676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738682">Mode</span><span class="op" id="7738686">:</span>&nbsp;&nbsp;<span class="num" id="7738689">0644</span><span class="op" id="7738693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738698">}</span><span class="op" id="7738699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738703">}</span><span class="op" id="7738704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738707">}</span><span class="op" id="7738708">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738715">Name</span><span class="op" id="7738719">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7738723">&#34;r.zip&#34;</span><span class="op" id="7738730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738734">Source</span><span class="op" id="7738740">:</span>&nbsp;<span class="ident" id="7738742">returnRecursiveZip</span><span class="op" id="7738760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738764">File</span><span class="op" id="7738768">:</span>&nbsp;<span class="op" id="7738770">[</span><span class="op" id="7738771">]</span><span class="ident" id="7738772">ZipTestFile</span><span class="op" id="7738783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738788">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738794">Name</span><span class="op" id="7738798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738803">&#34;r/r.zip&#34;</span><span class="op" id="7738812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738818">Content</span><span class="op" id="7738825">:</span>&nbsp;<span class="ident" id="7738827">rZipBytes</span><span class="op" id="7738836">(</span><span class="op" id="7738837">)</span><span class="op" id="7738838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738844">Mtime</span><span class="op" id="7738849">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7738853">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7738872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738878">Mode</span><span class="op" id="7738882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738887">0666</span><span class="op" id="7738891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738896">}</span><span class="op" id="7738897">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738901">}</span><span class="op" id="7738902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738905">}</span><span class="op" id="7738906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738913">Name</span><span class="op" id="7738917">:</span>&nbsp;<span class="string" id="7738919">&#34;symlink.zip&#34;</span><span class="op" id="7738932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738936">File</span><span class="op" id="7738940">:</span>&nbsp;<span class="op" id="7738942">[</span><span class="op" id="7738943">]</span><span class="ident" id="7738944">ZipTestFile</span><span class="op" id="7738955">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738966">Name</span><span class="op" id="7738970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738975">&#34;symlink&#34;</span><span class="op" id="7738984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738990">Content</span><span class="op" id="7738997">:</span>&nbsp;<span class="op" id="7738999">[</span><span class="op" id="7739000">]</span><span class="builtintype" id="7739001">byte</span><span class="op" id="7739005">(</span><span class="string" id="7739006">&#34;../target&#34;</span><span class="op" id="7739017">)</span><span class="op" id="7739018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739024">Mode</span><span class="op" id="7739028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739033">0777</span>&nbsp;<span class="op" id="7739038">|</span>&nbsp;<span class="ident" id="7739040">os</span><span class="op" id="7739042">.</span><span class="ident" id="7739043">ModeSymlink</span><span class="op" id="7739054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739059">}</span><span class="op" id="7739060">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739064">}</span><span class="op" id="7739065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739068">}</span><span class="op" id="7739069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739076">Name</span><span class="op" id="7739080">:</span>&nbsp;<span class="string" id="7739082">&#34;readme.zip&#34;</span><span class="op" id="7739094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739097">}</span><span class="op" id="7739098">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739105">Name</span><span class="op" id="7739109">:</span>&nbsp;&nbsp;<span class="string" id="7739112">&#34;readme.notzip&#34;</span><span class="op" id="7739127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739131">Error</span><span class="op" id="7739136">:</span>&nbsp;<span class="ident" id="7739138">ErrFormat</span><span class="op" id="7739147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739150">}</span><span class="op" id="7739151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739154">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739158">Name</span><span class="op" id="7739162">:</span>&nbsp;<span class="string" id="7739164">&#34;dd.zip&#34;</span><span class="op" id="7739172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739176">File</span><span class="op" id="7739180">:</span>&nbsp;<span class="op" id="7739182">[</span><span class="op" id="7739183">]</span><span class="ident" id="7739184">ZipTestFile</span><span class="op" id="7739195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739206">Name</span><span class="op" id="7739210">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739215">&#34;filename&#34;</span><span class="op" id="7739225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739231">Content</span><span class="op" id="7739238">:</span>&nbsp;<span class="op" id="7739240">[</span><span class="op" id="7739241">]</span><span class="builtintype" id="7739242">byte</span><span class="op" id="7739246">(</span><span class="string" id="7739247">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7739275">)</span><span class="op" id="7739276">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739282">Mtime</span><span class="op" id="7739287">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7739291">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7739310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739316">Mode</span><span class="op" id="7739320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739325">0666</span><span class="op" id="7739329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739334">}</span><span class="op" id="7739335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739339">}</span><span class="op" id="7739340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739343">}</span><span class="op" id="7739344">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7739351">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739392">Name</span><span class="op" id="7739396">:</span>&nbsp;<span class="string" id="7739398">&#34;winxp.zip&#34;</span><span class="op" id="7739409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739413">File</span><span class="op" id="7739417">:</span>&nbsp;<span class="ident" id="7739419">crossPlatform</span><span class="op" id="7739432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739435">}</span><span class="op" id="7739436">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7739443">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739479">Name</span><span class="op" id="7739483">:</span>&nbsp;<span class="string" id="7739485">&#34;unix.zip&#34;</span><span class="op" id="7739495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739499">File</span><span class="op" id="7739503">:</span>&nbsp;<span class="ident" id="7739505">crossPlatform</span><span class="op" id="7739518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739521">}</span><span class="op" id="7739522">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7739529">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7739585">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739641">Name</span><span class="op" id="7739645">:</span>&nbsp;<span class="string" id="7739647">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7739671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739675">File</span><span class="op" id="7739679">:</span>&nbsp;<span class="op" id="7739681">[</span><span class="op" id="7739682">]</span><span class="ident" id="7739683">ZipTestFile</span><span class="op" id="7739694">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739705">Name</span><span class="op" id="7739709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739714">&#34;foo.txt&#34;</span><span class="op" id="7739723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739729">Content</span><span class="op" id="7739736">:</span>&nbsp;<span class="op" id="7739738">[</span><span class="op" id="7739739">]</span><span class="builtintype" id="7739740">byte</span><span class="op" id="7739744">(</span><span class="string" id="7739745">&#34;foo\n&#34;</span><span class="op" id="7739752">)</span><span class="op" id="7739753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739759">Mtime</span><span class="op" id="7739764">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7739768">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7739787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739793">Mode</span><span class="op" id="7739797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739802">0644</span><span class="op" id="7739806">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739811">}</span><span class="op" id="7739812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739823">Name</span><span class="op" id="7739827">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739832">&#34;bar.txt&#34;</span><span class="op" id="7739841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739847">Content</span><span class="op" id="7739854">:</span>&nbsp;<span class="op" id="7739856">[</span><span class="op" id="7739857">]</span><span class="builtintype" id="7739858">byte</span><span class="op" id="7739862">(</span><span class="string" id="7739863">&#34;bar\n&#34;</span><span class="op" id="7739870">)</span><span class="op" id="7739871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739877">Mtime</span><span class="op" id="7739882">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7739886">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7739905">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739911">Mode</span><span class="op" id="7739915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739920">0644</span><span class="op" id="7739924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739929">}</span><span class="op" id="7739930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739934">}</span><span class="op" id="7739935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739938">}</span><span class="op" id="7739939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739942">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7739946">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7740001">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740057">Name</span><span class="op" id="7740061">:</span>&nbsp;<span class="string" id="7740063">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7740089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740093">File</span><span class="op" id="7740097">:</span>&nbsp;<span class="op" id="7740099">[</span><span class="op" id="7740100">]</span><span class="ident" id="7740101">ZipTestFile</span><span class="op" id="7740112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740117">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740123">Name</span><span class="op" id="7740127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740132">&#34;foo.txt&#34;</span><span class="op" id="7740141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740147">Content</span><span class="op" id="7740154">:</span>&nbsp;<span class="op" id="7740156">[</span><span class="op" id="7740157">]</span><span class="builtintype" id="7740158">byte</span><span class="op" id="7740162">(</span><span class="string" id="7740163">&#34;foo\n&#34;</span><span class="op" id="7740170">)</span><span class="op" id="7740171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740177">Mode</span><span class="op" id="7740181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7740186">0666</span><span class="op" id="7740190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740195">}</span><span class="op" id="7740196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740201">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740207">Name</span><span class="op" id="7740211">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740216">&#34;bar.txt&#34;</span><span class="op" id="7740225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740231">Content</span><span class="op" id="7740238">:</span>&nbsp;<span class="op" id="7740240">[</span><span class="op" id="7740241">]</span><span class="builtintype" id="7740242">byte</span><span class="op" id="7740246">(</span><span class="string" id="7740247">&#34;bar\n&#34;</span><span class="op" id="7740254">)</span><span class="op" id="7740255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740261">Mode</span><span class="op" id="7740265">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7740270">0666</span><span class="op" id="7740274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740279">}</span><span class="op" id="7740280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740284">}</span><span class="op" id="7740285">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740288">}</span><span class="op" id="7740289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740296">Name</span><span class="op" id="7740300">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7740304">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7740334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740338">Source</span><span class="op" id="7740344">:</span>&nbsp;<span class="ident" id="7740346">returnCorruptCRC32Zip</span><span class="op" id="7740367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740371">File</span><span class="op" id="7740375">:</span>&nbsp;<span class="op" id="7740377">[</span><span class="op" id="7740378">]</span><span class="ident" id="7740379">ZipTestFile</span><span class="op" id="7740390">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740401">Name</span><span class="op" id="7740405">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740413">&#34;foo.txt&#34;</span><span class="op" id="7740422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740428">Content</span><span class="op" id="7740435">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740440">[</span><span class="op" id="7740441">]</span><span class="builtintype" id="7740442">byte</span><span class="op" id="7740446">(</span><span class="string" id="7740447">&#34;foo\n&#34;</span><span class="op" id="7740454">)</span><span class="op" id="7740455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740461">Mode</span><span class="op" id="7740465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7740473">0666</span><span class="op" id="7740477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740483">ContentErr</span><span class="op" id="7740493">:</span>&nbsp;<span class="ident" id="7740495">ErrChecksum</span><span class="op" id="7740506">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740511">}</span><span class="op" id="7740512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740523">Name</span><span class="op" id="7740527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740532">&#34;bar.txt&#34;</span><span class="op" id="7740541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740547">Content</span><span class="op" id="7740554">:</span>&nbsp;<span class="op" id="7740556">[</span><span class="op" id="7740557">]</span><span class="builtintype" id="7740558">byte</span><span class="op" id="7740562">(</span><span class="string" id="7740563">&#34;bar\n&#34;</span><span class="op" id="7740570">)</span><span class="op" id="7740571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740577">Mode</span><span class="op" id="7740581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7740586">0666</span><span class="op" id="7740590">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740595">}</span><span class="op" id="7740596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740600">}</span><span class="op" id="7740601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740604">}</span><span class="op" id="7740605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7740608">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7740668">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740735">Name</span><span class="op" id="7740739">:</span>&nbsp;<span class="string" id="7740741">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7740765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740769">File</span><span class="op" id="7740773">:</span>&nbsp;<span class="op" id="7740775">[</span><span class="op" id="7740776">]</span><span class="ident" id="7740777">ZipTestFile</span><span class="op" id="7740788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740799">Name</span><span class="op" id="7740803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740808">&#34;foo.txt&#34;</span><span class="op" id="7740817">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740823">Content</span><span class="op" id="7740830">:</span>&nbsp;<span class="op" id="7740832">[</span><span class="op" id="7740833">]</span><span class="builtintype" id="7740834">byte</span><span class="op" id="7740838">(</span><span class="string" id="7740839">&#34;foo\n&#34;</span><span class="op" id="7740846">)</span><span class="op" id="7740847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740853">Mtime</span><span class="op" id="7740858">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7740862">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7740881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740887">Mode</span><span class="op" id="7740891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7740896">0644</span><span class="op" id="7740900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740905">}</span><span class="op" id="7740906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740911">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740917">Name</span><span class="op" id="7740921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740926">&#34;bar.txt&#34;</span><span class="op" id="7740935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740941">Content</span><span class="op" id="7740948">:</span>&nbsp;<span class="op" id="7740950">[</span><span class="op" id="7740951">]</span><span class="builtintype" id="7740952">byte</span><span class="op" id="7740956">(</span><span class="string" id="7740957">&#34;bar\n&#34;</span><span class="op" id="7740964">)</span><span class="op" id="7740965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740971">Mtime</span><span class="op" id="7740976">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7740980">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7740999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741005">Mode</span><span class="op" id="7741009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7741014">0644</span><span class="op" id="7741018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741023">}</span><span class="op" id="7741024">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741028">}</span><span class="op" id="7741029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741032">}</span><span class="op" id="7741033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7741036">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7741098">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741161">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741165">Name</span><span class="op" id="7741169">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7741173">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7741197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741201">Source</span><span class="op" id="7741207">:</span>&nbsp;<span class="ident" id="7741209">returnCorruptNotStreamedZip</span><span class="op" id="7741236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741240">File</span><span class="op" id="7741244">:</span>&nbsp;<span class="op" id="7741246">[</span><span class="op" id="7741247">]</span><span class="ident" id="7741248">ZipTestFile</span><span class="op" id="7741259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741270">Name</span><span class="op" id="7741274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741282">&#34;foo.txt&#34;</span><span class="op" id="7741291">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741297">Content</span><span class="op" id="7741304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741309">[</span><span class="op" id="7741310">]</span><span class="builtintype" id="7741311">byte</span><span class="op" id="7741315">(</span><span class="string" id="7741316">&#34;foo\n&#34;</span><span class="op" id="7741323">)</span><span class="op" id="7741324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741330">Mtime</span><span class="op" id="7741335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741342">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7741361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741367">Mode</span><span class="op" id="7741371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7741379">0644</span><span class="op" id="7741383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741389">ContentErr</span><span class="op" id="7741399">:</span>&nbsp;<span class="ident" id="7741401">ErrChecksum</span><span class="op" id="7741412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741417">}</span><span class="op" id="7741418">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741429">Name</span><span class="op" id="7741433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741438">&#34;bar.txt&#34;</span><span class="op" id="7741447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741453">Content</span><span class="op" id="7741460">:</span>&nbsp;<span class="op" id="7741462">[</span><span class="op" id="7741463">]</span><span class="builtintype" id="7741464">byte</span><span class="op" id="7741468">(</span><span class="string" id="7741469">&#34;bar\n&#34;</span><span class="op" id="7741476">)</span><span class="op" id="7741477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741483">Mtime</span><span class="op" id="7741488">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7741492">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7741511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741517">Mode</span><span class="op" id="7741521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7741526">0644</span><span class="op" id="7741530">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741535">}</span><span class="op" id="7741536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741540">}</span><span class="op" id="7741541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741544">}</span><span class="op" id="7741545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741552">Name</span><span class="op" id="7741556">:</span>&nbsp;<span class="string" id="7741558">&#34;zip64.zip&#34;</span><span class="op" id="7741569">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741573">File</span><span class="op" id="7741577">:</span>&nbsp;<span class="op" id="7741579">[</span><span class="op" id="7741580">]</span><span class="ident" id="7741581">ZipTestFile</span><span class="op" id="7741592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741603">Name</span><span class="op" id="7741607">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741612">&#34;README&#34;</span><span class="op" id="7741620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741626">Content</span><span class="op" id="7741633">:</span>&nbsp;<span class="op" id="7741635">[</span><span class="op" id="7741636">]</span><span class="builtintype" id="7741637">byte</span><span class="op" id="7741641">(</span><span class="string" id="7741642">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7741681">)</span><span class="op" id="7741682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741688">Mtime</span><span class="op" id="7741693">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7741697">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7741716">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741722">Mode</span><span class="op" id="7741726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7741731">0644</span><span class="op" id="7741735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741740">}</span><span class="op" id="7741741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741745">}</span><span class="op" id="7741746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741749">}</span><span class="op" id="7741750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7741753">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741834">Name</span><span class="op" id="7741838">:</span>&nbsp;<span class="string" id="7741840">&#34;zip64-2.zip&#34;</span><span class="op" id="7741853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741857">File</span><span class="op" id="7741861">:</span>&nbsp;<span class="op" id="7741863">[</span><span class="op" id="7741864">]</span><span class="ident" id="7741865">ZipTestFile</span><span class="op" id="7741876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741887">Name</span><span class="op" id="7741891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741896">&#34;README&#34;</span><span class="op" id="7741904">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741910">Content</span><span class="op" id="7741917">:</span>&nbsp;<span class="op" id="7741919">[</span><span class="op" id="7741920">]</span><span class="builtintype" id="7741921">byte</span><span class="op" id="7741925">(</span><span class="string" id="7741926">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7741965">)</span><span class="op" id="7741966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741972">Mtime</span><span class="op" id="7741977">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7741981">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7742000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742006">Mode</span><span class="op" id="7742010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7742015">0644</span><span class="op" id="7742019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742024">}</span><span class="op" id="7742025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742029">}</span><span class="op" id="7742030">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742033">}</span><span class="op" id="7742034">,</span><br>
<span class="lineno"></span><span class="op" id="7742036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742039">var</span>&nbsp;<span class="ident" id="7742043">crossPlatform</span>&nbsp;<span class="op" id="7742057">=</span>&nbsp;<span class="op" id="7742059">[</span><span class="op" id="7742060">]</span><span class="ident" id="7742061">ZipTestFile</span><span class="op" id="7742072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742075">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742079">Name</span><span class="op" id="7742083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7742088">&#34;hello&#34;</span><span class="op" id="7742095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742099">Content</span><span class="op" id="7742106">:</span>&nbsp;<span class="op" id="7742108">[</span><span class="op" id="7742109">]</span><span class="builtintype" id="7742110">byte</span><span class="op" id="7742114">(</span><span class="string" id="7742115">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7742127">)</span><span class="op" id="7742128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742132">Mode</span><span class="op" id="7742136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7742141">0666</span><span class="op" id="7742145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742148">}</span><span class="op" id="7742149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742152">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742156">Name</span><span class="op" id="7742160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7742165">&#34;dir/bar&#34;</span><span class="op" id="7742174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742178">Content</span><span class="op" id="7742185">:</span>&nbsp;<span class="op" id="7742187">[</span><span class="op" id="7742188">]</span><span class="builtintype" id="7742189">byte</span><span class="op" id="7742193">(</span><span class="string" id="7742194">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7742204">)</span><span class="op" id="7742205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742209">Mode</span><span class="op" id="7742213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7742218">0666</span><span class="op" id="7742222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742225">}</span><span class="op" id="7742226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742229">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742233">Name</span><span class="op" id="7742237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7742242">&#34;dir/empty/&#34;</span><span class="op" id="7742254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742258">Content</span><span class="op" id="7742265">:</span>&nbsp;<span class="op" id="7742267">[</span><span class="op" id="7742268">]</span><span class="builtintype" id="7742269">byte</span><span class="op" id="7742273">{</span><span class="op" id="7742274">}</span><span class="op" id="7742275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742279">Mode</span><span class="op" id="7742283">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742288">os</span><span class="op" id="7742290">.</span><span class="ident" id="7742291">ModeDir</span>&nbsp;<span class="op" id="7742299">|</span>&nbsp;<span class="num" id="7742301">0777</span><span class="op" id="7742305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742308">}</span><span class="op" id="7742309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742312">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742316">Name</span><span class="op" id="7742320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7742325">&#34;readonly&#34;</span><span class="op" id="7742335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742339">Content</span><span class="op" id="7742346">:</span>&nbsp;<span class="op" id="7742348">[</span><span class="op" id="7742349">]</span><span class="builtintype" id="7742350">byte</span><span class="op" id="7742354">(</span><span class="string" id="7742355">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7742371">)</span><span class="op" id="7742372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742376">Mode</span><span class="op" id="7742380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7742385">0444</span><span class="op" id="7742389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742392">}</span><span class="op" id="7742393">,</span><br>
<span class="lineno"></span><span class="op" id="7742395">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7742398">func</span>&nbsp;<span class="ident" id="7742403">TestReader</span><span class="op" id="7742413">(</span><span class="ident" id="7742414">t</span>&nbsp;<span class="op" id="7742416">*</span><span class="ident" id="7742417">testing</span><span class="op" id="7742424">.</span><span class="ident" id="7742425">T</span><span class="op" id="7742426">)</span>&nbsp;<span class="op" id="7742428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742431">for</span>&nbsp;<span class="ident" id="7742435">_</span><span class="op" id="7742436">,</span>&nbsp;<span class="ident" id="7742438">zt</span>&nbsp;<span class="op" id="7742441">:=</span>&nbsp;<span class="keyword" id="7742444">range</span>&nbsp;<span class="ident" id="7742450">tests</span>&nbsp;<span class="op" id="7742456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742460">readTestZip</span><span class="op" id="7742471">(</span><span class="ident" id="7742472">t</span><span class="op" id="7742473">,</span>&nbsp;<span class="ident" id="7742475">zt</span><span class="op" id="7742477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742480">}</span><br>
<span class="lineno">280</span><span class="op" id="7742482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742485">func</span>&nbsp;<span class="ident" id="7742490">readTestZip</span><span class="op" id="7742501">(</span><span class="ident" id="7742502">t</span>&nbsp;<span class="op" id="7742504">*</span><span class="ident" id="7742505">testing</span><span class="op" id="7742512">.</span><span class="ident" id="7742513">T</span><span class="op" id="7742514">,</span>&nbsp;<span class="ident" id="7742516">zt</span>&nbsp;<span class="ident" id="7742519">ZipTest</span><span class="op" id="7742526">)</span>&nbsp;<span class="op" id="7742528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742531">var</span>&nbsp;<span class="ident" id="7742535">z</span>&nbsp;<span class="op" id="7742537">*</span><span class="ident" id="7742538">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742546">var</span>&nbsp;<span class="ident" id="7742550">err</span>&nbsp;<span class="builtintype" id="7742554">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742561">if</span>&nbsp;<span class="ident" id="7742564">zt</span><span class="op" id="7742566">.</span><span class="ident" id="7742567">Source</span>&nbsp;<span class="op" id="7742574">!=</span>&nbsp;<span class="ident" id="7742577">nil</span>&nbsp;<span class="op" id="7742581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742585">rat</span><span class="op" id="7742588">,</span>&nbsp;<span class="ident" id="7742590">size</span>&nbsp;<span class="op" id="7742595">:=</span>&nbsp;<span class="ident" id="7742598">zt</span><span class="op" id="7742600">.</span><span class="ident" id="7742601">Source</span><span class="op" id="7742607">(</span><span class="op" id="7742608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742612">z</span><span class="op" id="7742613">,</span>&nbsp;<span class="ident" id="7742615">err</span>&nbsp;<span class="op" id="7742619">=</span>&nbsp;<span class="ident" id="7742621">NewReader</span><span class="op" id="7742630">(</span><span class="ident" id="7742631">rat</span><span class="op" id="7742634">,</span>&nbsp;<span class="ident" id="7742636">size</span><span class="op" id="7742640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742643">}</span>&nbsp;<span class="keyword" id="7742645">else</span>&nbsp;<span class="op" id="7742650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742654">var</span>&nbsp;<span class="ident" id="7742658">rc</span>&nbsp;<span class="op" id="7742661">*</span><span class="ident" id="7742662">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742675">rc</span><span class="op" id="7742677">,</span>&nbsp;<span class="ident" id="7742679">err</span>&nbsp;<span class="op" id="7742683">=</span>&nbsp;<span class="ident" id="7742685">OpenReader</span><span class="op" id="7742695">(</span><span class="ident" id="7742696">filepath</span><span class="op" id="7742704">.</span><span class="ident" id="7742705">Join</span><span class="op" id="7742709">(</span><span class="string" id="7742710">&#34;testdata&#34;</span><span class="op" id="7742720">,</span>&nbsp;<span class="ident" id="7742722">zt</span><span class="op" id="7742724">.</span><span class="ident" id="7742725">Name</span><span class="op" id="7742729">)</span><span class="op" id="7742730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742734">if</span>&nbsp;<span class="ident" id="7742737">err</span>&nbsp;<span class="op" id="7742741">==</span>&nbsp;<span class="ident" id="7742744">nil</span>&nbsp;<span class="op" id="7742748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742753">defer</span>&nbsp;<span class="ident" id="7742759">rc</span><span class="op" id="7742761">.</span><span class="ident" id="7742762">Close</span><span class="op" id="7742767">(</span><span class="op" id="7742768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742773">z</span>&nbsp;<span class="op" id="7742775">=</span>&nbsp;<span class="op" id="7742777">&amp;</span><span class="ident" id="7742778">rc</span><span class="op" id="7742780">.</span><span class="ident" id="7742781">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742790">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742796">if</span>&nbsp;<span class="ident" id="7742799">err</span>&nbsp;<span class="op" id="7742803">!=</span>&nbsp;<span class="ident" id="7742806">zt</span><span class="op" id="7742808">.</span><span class="ident" id="7742809">Error</span>&nbsp;<span class="op" id="7742815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742819">t</span><span class="op" id="7742820">.</span><span class="ident" id="7742821">Errorf</span><span class="op" id="7742827">(</span><span class="string" id="7742828">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7742851">,</span>&nbsp;<span class="ident" id="7742853">zt</span><span class="op" id="7742855">.</span><span class="ident" id="7742856">Name</span><span class="op" id="7742860">,</span>&nbsp;<span class="ident" id="7742862">err</span><span class="op" id="7742865">,</span>&nbsp;<span class="ident" id="7742867">zt</span><span class="op" id="7742869">.</span><span class="ident" id="7742870">Error</span><span class="op" id="7742875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742879">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742887">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7742891">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742919">if</span>&nbsp;<span class="ident" id="7742922">err</span>&nbsp;<span class="op" id="7742926">==</span>&nbsp;<span class="ident" id="7742929">ErrFormat</span>&nbsp;<span class="op" id="7742939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742951">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7742955">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7743003">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743067">if</span>&nbsp;<span class="ident" id="7743070">zt</span><span class="op" id="7743072">.</span><span class="ident" id="7743073">File</span>&nbsp;<span class="op" id="7743078">==</span>&nbsp;<span class="ident" id="7743081">nil</span>&nbsp;<span class="op" id="7743085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743089">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743101">if</span>&nbsp;<span class="ident" id="7743104">z</span><span class="op" id="7743105">.</span><span class="ident" id="7743106">Comment</span>&nbsp;<span class="op" id="7743114">!=</span>&nbsp;<span class="ident" id="7743117">zt</span><span class="op" id="7743119">.</span><span class="ident" id="7743120">Comment</span>&nbsp;<span class="op" id="7743128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743132">t</span><span class="op" id="7743133">.</span><span class="ident" id="7743134">Errorf</span><span class="op" id="7743140">(</span><span class="string" id="7743141">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7743166">,</span>&nbsp;<span class="ident" id="7743168">zt</span><span class="op" id="7743170">.</span><span class="ident" id="7743171">Name</span><span class="op" id="7743175">,</span>&nbsp;<span class="ident" id="7743177">z</span><span class="op" id="7743178">.</span><span class="ident" id="7743179">Comment</span><span class="op" id="7743186">,</span>&nbsp;<span class="ident" id="7743188">zt</span><span class="op" id="7743190">.</span><span class="ident" id="7743191">Comment</span><span class="op" id="7743198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743201">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743204">if</span>&nbsp;<span class="builtinfunc" id="7743207">len</span><span class="op" id="7743210">(</span><span class="ident" id="7743211">z</span><span class="op" id="7743212">.</span><span class="ident" id="7743213">File</span><span class="op" id="7743217">)</span>&nbsp;<span class="op" id="7743219">!=</span>&nbsp;<span class="builtinfunc" id="7743222">len</span><span class="op" id="7743225">(</span><span class="ident" id="7743226">zt</span><span class="op" id="7743228">.</span><span class="ident" id="7743229">File</span><span class="op" id="7743233">)</span>&nbsp;<span class="op" id="7743235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743239">t</span><span class="op" id="7743240">.</span><span class="ident" id="7743241">Fatalf</span><span class="op" id="7743247">(</span><span class="string" id="7743248">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7743276">,</span>&nbsp;<span class="ident" id="7743278">zt</span><span class="op" id="7743280">.</span><span class="ident" id="7743281">Name</span><span class="op" id="7743285">,</span>&nbsp;<span class="builtinfunc" id="7743287">len</span><span class="op" id="7743290">(</span><span class="ident" id="7743291">z</span><span class="op" id="7743292">.</span><span class="ident" id="7743293">File</span><span class="op" id="7743297">)</span><span class="op" id="7743298">,</span>&nbsp;<span class="builtinfunc" id="7743300">len</span><span class="op" id="7743303">(</span><span class="ident" id="7743304">zt</span><span class="op" id="7743306">.</span><span class="ident" id="7743307">File</span><span class="op" id="7743311">)</span><span class="op" id="7743312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7743319">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743346">for</span>&nbsp;<span class="ident" id="7743350">i</span><span class="op" id="7743351">,</span>&nbsp;<span class="ident" id="7743353">ft</span>&nbsp;<span class="op" id="7743356">:=</span>&nbsp;<span class="keyword" id="7743359">range</span>&nbsp;<span class="ident" id="7743365">zt</span><span class="op" id="7743367">.</span><span class="ident" id="7743368">File</span>&nbsp;<span class="op" id="7743373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743377">readTestFile</span><span class="op" id="7743389">(</span><span class="ident" id="7743390">t</span><span class="op" id="7743391">,</span>&nbsp;<span class="ident" id="7743393">zt</span><span class="op" id="7743395">,</span>&nbsp;<span class="ident" id="7743397">ft</span><span class="op" id="7743399">,</span>&nbsp;<span class="ident" id="7743401">z</span><span class="op" id="7743402">.</span><span class="ident" id="7743403">File</span><span class="op" id="7743407">[</span><span class="ident" id="7743408">i</span><span class="op" id="7743409">]</span><span class="op" id="7743410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7743417">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743445">n</span>&nbsp;<span class="op" id="7743447">:=</span>&nbsp;<span class="num" id="7743450">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743453">done</span>&nbsp;<span class="op" id="7743458">:=</span>&nbsp;<span class="builtinfunc" id="7743461">make</span><span class="op" id="7743465">(</span><span class="keyword" id="7743466">chan</span>&nbsp;<span class="builtintype" id="7743471">bool</span><span class="op" id="7743475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743478">for</span>&nbsp;<span class="ident" id="7743482">i</span>&nbsp;<span class="op" id="7743484">:=</span>&nbsp;<span class="num" id="7743487">0</span><span class="op" id="7743488">;</span>&nbsp;<span class="ident" id="7743490">i</span>&nbsp;<span class="op" id="7743492">&lt;</span>&nbsp;<span class="num" id="7743494">5</span><span class="op" id="7743495">;</span>&nbsp;<span class="ident" id="7743497">i</span><span class="op" id="7743498">++</span>&nbsp;<span class="op" id="7743501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743505">for</span>&nbsp;<span class="ident" id="7743509">j</span><span class="op" id="7743510">,</span>&nbsp;<span class="ident" id="7743512">ft</span>&nbsp;<span class="op" id="7743515">:=</span>&nbsp;<span class="keyword" id="7743518">range</span>&nbsp;<span class="ident" id="7743524">zt</span><span class="op" id="7743526">.</span><span class="ident" id="7743527">File</span>&nbsp;<span class="op" id="7743532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743537">go</span>&nbsp;<span class="keyword" id="7743540">func</span><span class="op" id="7743544">(</span><span class="ident" id="7743545">j</span>&nbsp;<span class="builtintype" id="7743547">int</span><span class="op" id="7743550">,</span>&nbsp;<span class="ident" id="7743552">ft</span>&nbsp;<span class="ident" id="7743555">ZipTestFile</span><span class="op" id="7743566">)</span>&nbsp;<span class="op" id="7743568">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743574">readTestFile</span><span class="op" id="7743586">(</span><span class="ident" id="7743587">t</span><span class="op" id="7743588">,</span>&nbsp;<span class="ident" id="7743590">zt</span><span class="op" id="7743592">,</span>&nbsp;<span class="ident" id="7743594">ft</span><span class="op" id="7743596">,</span>&nbsp;<span class="ident" id="7743598">z</span><span class="op" id="7743599">.</span><span class="ident" id="7743600">File</span><span class="op" id="7743604">[</span><span class="ident" id="7743605">j</span><span class="op" id="7743606">]</span><span class="op" id="7743607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743613">done</span>&nbsp;<span class="op" id="7743618">&lt;-</span>&nbsp;<span class="ident" id="7743621">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743629">}</span><span class="op" id="7743630">(</span><span class="ident" id="7743631">j</span><span class="op" id="7743632">,</span>&nbsp;<span class="ident" id="7743634">ft</span><span class="op" id="7743636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743641">n</span><span class="op" id="7743642">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743647">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743653">for</span>&nbsp;<span class="op" id="7743657">;</span>&nbsp;<span class="ident" id="7743659">n</span>&nbsp;<span class="op" id="7743661">&gt;</span>&nbsp;<span class="num" id="7743663">0</span><span class="op" id="7743664">;</span>&nbsp;<span class="ident" id="7743666">n</span><span class="op" id="7743667">--</span>&nbsp;<span class="op" id="7743670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743674">&lt;-</span><span class="ident" id="7743676">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743682">}</span><br>
<span class="lineno"></span><span class="op" id="7743684">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7743687">func</span>&nbsp;<span class="ident" id="7743692">readTestFile</span><span class="op" id="7743704">(</span><span class="ident" id="7743705">t</span>&nbsp;<span class="op" id="7743707">*</span><span class="ident" id="7743708">testing</span><span class="op" id="7743715">.</span><span class="ident" id="7743716">T</span><span class="op" id="7743717">,</span>&nbsp;<span class="ident" id="7743719">zt</span>&nbsp;<span class="ident" id="7743722">ZipTest</span><span class="op" id="7743729">,</span>&nbsp;<span class="ident" id="7743731">ft</span>&nbsp;<span class="ident" id="7743734">ZipTestFile</span><span class="op" id="7743745">,</span>&nbsp;<span class="ident" id="7743747">f</span>&nbsp;<span class="op" id="7743749">*</span><span class="ident" id="7743750">File</span><span class="op" id="7743754">)</span>&nbsp;<span class="op" id="7743756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743759">if</span>&nbsp;<span class="ident" id="7743762">f</span><span class="op" id="7743763">.</span><span class="ident" id="7743764">Name</span>&nbsp;<span class="op" id="7743769">!=</span>&nbsp;<span class="ident" id="7743772">ft</span><span class="op" id="7743774">.</span><span class="ident" id="7743775">Name</span>&nbsp;<span class="op" id="7743780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743784">t</span><span class="op" id="7743785">.</span><span class="ident" id="7743786">Errorf</span><span class="op" id="7743792">(</span><span class="string" id="7743793">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7743815">,</span>&nbsp;<span class="ident" id="7743817">zt</span><span class="op" id="7743819">.</span><span class="ident" id="7743820">Name</span><span class="op" id="7743824">,</span>&nbsp;<span class="ident" id="7743826">f</span><span class="op" id="7743827">.</span><span class="ident" id="7743828">Name</span><span class="op" id="7743832">,</span>&nbsp;<span class="ident" id="7743834">ft</span><span class="op" id="7743836">.</span><span class="ident" id="7743837">Name</span><span class="op" id="7743841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743844">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743848">if</span>&nbsp;<span class="ident" id="7743851">ft</span><span class="op" id="7743853">.</span><span class="ident" id="7743854">Mtime</span>&nbsp;<span class="op" id="7743860">!=</span>&nbsp;<span class="string" id="7743863">&#34;&#34;</span>&nbsp;<span class="op" id="7743866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743870">mtime</span><span class="op" id="7743875">,</span>&nbsp;<span class="ident" id="7743877">err</span>&nbsp;<span class="op" id="7743881">:=</span>&nbsp;<span class="ident" id="7743884">time</span><span class="op" id="7743888">.</span><span class="ident" id="7743889">Parse</span><span class="op" id="7743894">(</span><span class="string" id="7743895">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7743914">,</span>&nbsp;<span class="ident" id="7743916">ft</span><span class="op" id="7743918">.</span><span class="ident" id="7743919">Mtime</span><span class="op" id="7743924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743928">if</span>&nbsp;<span class="ident" id="7743931">err</span>&nbsp;<span class="op" id="7743935">!=</span>&nbsp;<span class="ident" id="7743938">nil</span>&nbsp;<span class="op" id="7743942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743947">t</span><span class="op" id="7743948">.</span><span class="ident" id="7743949">Error</span><span class="op" id="7743954">(</span><span class="ident" id="7743955">err</span><span class="op" id="7743958">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743963">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743976">if</span>&nbsp;<span class="ident" id="7743979">ft</span>&nbsp;<span class="op" id="7743982">:=</span>&nbsp;<span class="ident" id="7743985">f</span><span class="op" id="7743986">.</span><span class="ident" id="7743987">ModTime</span><span class="op" id="7743994">(</span><span class="op" id="7743995">)</span><span class="op" id="7743996">;</span>&nbsp;<span class="op" id="7743998">!</span><span class="ident" id="7743999">ft</span><span class="op" id="7744001">.</span><span class="ident" id="7744002">Equal</span><span class="op" id="7744007">(</span><span class="ident" id="7744008">mtime</span><span class="op" id="7744013">)</span>&nbsp;<span class="op" id="7744015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744020">t</span><span class="op" id="7744021">.</span><span class="ident" id="7744022">Errorf</span><span class="op" id="7744028">(</span><span class="string" id="7744029">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7744056">,</span>&nbsp;<span class="ident" id="7744058">zt</span><span class="op" id="7744060">.</span><span class="ident" id="7744061">Name</span><span class="op" id="7744065">,</span>&nbsp;<span class="ident" id="7744067">f</span><span class="op" id="7744068">.</span><span class="ident" id="7744069">Name</span><span class="op" id="7744073">,</span>&nbsp;<span class="ident" id="7744075">ft</span><span class="op" id="7744077">,</span>&nbsp;<span class="ident" id="7744079">mtime</span><span class="op" id="7744084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744088">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744095">testFileMode</span><span class="op" id="7744107">(</span><span class="ident" id="7744108">t</span><span class="op" id="7744109">,</span>&nbsp;<span class="ident" id="7744111">zt</span><span class="op" id="7744113">.</span><span class="ident" id="7744114">Name</span><span class="op" id="7744118">,</span>&nbsp;<span class="ident" id="7744120">f</span><span class="op" id="7744121">,</span>&nbsp;<span class="ident" id="7744123">ft</span><span class="op" id="7744125">.</span><span class="ident" id="7744126">Mode</span><span class="op" id="7744130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744134">var</span>&nbsp;<span class="ident" id="7744138">b</span>&nbsp;<span class="ident" id="7744140">bytes</span><span class="op" id="7744145">.</span><span class="ident" id="7744146">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744154">r</span><span class="op" id="7744155">,</span>&nbsp;<span class="ident" id="7744157">err</span>&nbsp;<span class="op" id="7744161">:=</span>&nbsp;<span class="ident" id="7744164">f</span><span class="op" id="7744165">.</span><span class="ident" id="7744166">Open</span><span class="op" id="7744170">(</span><span class="op" id="7744171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744174">if</span>&nbsp;<span class="ident" id="7744177">err</span>&nbsp;<span class="op" id="7744181">!=</span>&nbsp;<span class="ident" id="7744184">nil</span>&nbsp;<span class="op" id="7744188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744192">t</span><span class="op" id="7744193">.</span><span class="ident" id="7744194">Errorf</span><span class="op" id="7744200">(</span><span class="string" id="7744201">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7744209">,</span>&nbsp;<span class="ident" id="7744211">zt</span><span class="op" id="7744213">.</span><span class="ident" id="7744214">Name</span><span class="op" id="7744218">,</span>&nbsp;<span class="ident" id="7744220">err</span><span class="op" id="7744223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744227">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744235">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744239">_</span><span class="op" id="7744240">,</span>&nbsp;<span class="ident" id="7744242">err</span>&nbsp;<span class="op" id="7744246">=</span>&nbsp;<span class="ident" id="7744248">io</span><span class="op" id="7744250">.</span><span class="ident" id="7744251">Copy</span><span class="op" id="7744255">(</span><span class="op" id="7744256">&amp;</span><span class="ident" id="7744257">b</span><span class="op" id="7744258">,</span>&nbsp;<span class="ident" id="7744260">r</span><span class="op" id="7744261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744264">if</span>&nbsp;<span class="ident" id="7744267">err</span>&nbsp;<span class="op" id="7744271">!=</span>&nbsp;<span class="ident" id="7744274">ft</span><span class="op" id="7744276">.</span><span class="ident" id="7744277">ContentErr</span>&nbsp;<span class="op" id="7744288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744292">t</span><span class="op" id="7744293">.</span><span class="ident" id="7744294">Errorf</span><span class="op" id="7744300">(</span><span class="string" id="7744301">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7744337">,</span>&nbsp;<span class="ident" id="7744339">zt</span><span class="op" id="7744341">.</span><span class="ident" id="7744342">Name</span><span class="op" id="7744346">,</span>&nbsp;<span class="ident" id="7744348">err</span><span class="op" id="7744351">,</span>&nbsp;<span class="ident" id="7744353">ft</span><span class="op" id="7744355">.</span><span class="ident" id="7744356">ContentErr</span><span class="op" id="7744366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744369">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744372">if</span>&nbsp;<span class="ident" id="7744375">err</span>&nbsp;<span class="op" id="7744379">!=</span>&nbsp;<span class="ident" id="7744382">nil</span>&nbsp;<span class="op" id="7744386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744390">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744401">r</span><span class="op" id="7744402">.</span><span class="ident" id="7744403">Close</span><span class="op" id="7744408">(</span><span class="op" id="7744409">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744413">size</span>&nbsp;<span class="op" id="7744418">:=</span>&nbsp;<span class="ident" id="7744421">uint64</span><span class="op" id="7744427">(</span><span class="ident" id="7744428">f</span><span class="op" id="7744429">.</span><span class="ident" id="7744430">UncompressedSize</span><span class="op" id="7744446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744449">if</span>&nbsp;<span class="ident" id="7744452">size</span>&nbsp;<span class="op" id="7744457">==</span>&nbsp;<span class="ident" id="7744460">uint32max</span>&nbsp;<span class="op" id="7744470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744474">size</span>&nbsp;<span class="op" id="7744479">=</span>&nbsp;<span class="ident" id="7744481">f</span><span class="op" id="7744482">.</span><span class="ident" id="7744483">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744506">if</span>&nbsp;<span class="ident" id="7744509">g</span>&nbsp;<span class="op" id="7744511">:=</span>&nbsp;<span class="ident" id="7744514">uint64</span><span class="op" id="7744520">(</span><span class="ident" id="7744521">b</span><span class="op" id="7744522">.</span><span class="ident" id="7744523">Len</span><span class="op" id="7744526">(</span><span class="op" id="7744527">)</span><span class="op" id="7744528">)</span><span class="op" id="7744529">;</span>&nbsp;<span class="ident" id="7744531">g</span>&nbsp;<span class="op" id="7744533">!=</span>&nbsp;<span class="ident" id="7744536">size</span>&nbsp;<span class="op" id="7744541">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744545">t</span><span class="op" id="7744546">.</span><span class="ident" id="7744547">Errorf</span><span class="op" id="7744553">(</span><span class="string" id="7744554">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7744602">,</span>&nbsp;<span class="ident" id="7744604">f</span><span class="op" id="7744605">.</span><span class="ident" id="7744606">Name</span><span class="op" id="7744610">,</span>&nbsp;<span class="ident" id="7744612">g</span><span class="op" id="7744613">,</span>&nbsp;<span class="ident" id="7744615">size</span><span class="op" id="7744619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744626">var</span>&nbsp;<span class="ident" id="7744630">c</span>&nbsp;<span class="op" id="7744632">[</span><span class="op" id="7744633">]</span><span class="builtintype" id="7744634">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744640">if</span>&nbsp;<span class="ident" id="7744643">ft</span><span class="op" id="7744645">.</span><span class="ident" id="7744646">Content</span>&nbsp;<span class="op" id="7744654">!=</span>&nbsp;<span class="ident" id="7744657">nil</span>&nbsp;<span class="op" id="7744661">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744665">c</span>&nbsp;<span class="op" id="7744667">=</span>&nbsp;<span class="ident" id="7744669">ft</span><span class="op" id="7744671">.</span><span class="ident" id="7744672">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744681">}</span>&nbsp;<span class="keyword" id="7744683">else</span>&nbsp;<span class="keyword" id="7744688">if</span>&nbsp;<span class="ident" id="7744691">c</span><span class="op" id="7744692">,</span>&nbsp;<span class="ident" id="7744694">err</span>&nbsp;<span class="op" id="7744698">=</span>&nbsp;<span class="ident" id="7744700">ioutil</span><span class="op" id="7744706">.</span><span class="ident" id="7744707">ReadFile</span><span class="op" id="7744715">(</span><span class="string" id="7744716">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7744728">+</span>&nbsp;<span class="ident" id="7744730">ft</span><span class="op" id="7744732">.</span><span class="ident" id="7744733">File</span><span class="op" id="7744737">)</span><span class="op" id="7744738">;</span>&nbsp;<span class="ident" id="7744740">err</span>&nbsp;<span class="op" id="7744744">!=</span>&nbsp;<span class="ident" id="7744747">nil</span>&nbsp;<span class="op" id="7744751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744755">t</span><span class="op" id="7744756">.</span><span class="ident" id="7744757">Error</span><span class="op" id="7744762">(</span><span class="ident" id="7744763">err</span><span class="op" id="7744766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744770">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744778">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744782">if</span>&nbsp;<span class="ident" id="7744785">b</span><span class="op" id="7744786">.</span><span class="ident" id="7744787">Len</span><span class="op" id="7744790">(</span><span class="op" id="7744791">)</span>&nbsp;<span class="op" id="7744793">!=</span>&nbsp;<span class="builtinfunc" id="7744796">len</span><span class="op" id="7744799">(</span><span class="ident" id="7744800">c</span><span class="op" id="7744801">)</span>&nbsp;<span class="op" id="7744803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744807">t</span><span class="op" id="7744808">.</span><span class="ident" id="7744809">Errorf</span><span class="op" id="7744815">(</span><span class="string" id="7744816">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7744837">,</span>&nbsp;<span class="ident" id="7744839">f</span><span class="op" id="7744840">.</span><span class="ident" id="7744841">Name</span><span class="op" id="7744845">,</span>&nbsp;<span class="ident" id="7744847">b</span><span class="op" id="7744848">.</span><span class="ident" id="7744849">Len</span><span class="op" id="7744852">(</span><span class="op" id="7744853">)</span><span class="op" id="7744854">,</span>&nbsp;<span class="builtinfunc" id="7744856">len</span><span class="op" id="7744859">(</span><span class="ident" id="7744860">c</span><span class="op" id="7744861">)</span><span class="op" id="7744862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744866">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744874">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744878">for</span>&nbsp;<span class="ident" id="7744882">i</span><span class="op" id="7744883">,</span>&nbsp;<span class="ident" id="7744885">b</span>&nbsp;<span class="op" id="7744887">:=</span>&nbsp;<span class="keyword" id="7744890">range</span>&nbsp;<span class="ident" id="7744896">b</span><span class="op" id="7744897">.</span><span class="ident" id="7744898">Bytes</span><span class="op" id="7744903">(</span><span class="op" id="7744904">)</span>&nbsp;<span class="op" id="7744906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744910">if</span>&nbsp;<span class="ident" id="7744913">b</span>&nbsp;<span class="op" id="7744915">!=</span>&nbsp;<span class="ident" id="7744918">c</span><span class="op" id="7744919">[</span><span class="ident" id="7744920">i</span><span class="op" id="7744921">]</span>&nbsp;<span class="op" id="7744923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744928">t</span><span class="op" id="7744929">.</span><span class="ident" id="7744930">Errorf</span><span class="op" id="7744936">(</span><span class="string" id="7744937">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7744965">,</span>&nbsp;<span class="ident" id="7744967">f</span><span class="op" id="7744968">.</span><span class="ident" id="7744969">Name</span><span class="op" id="7744973">,</span>&nbsp;<span class="ident" id="7744975">i</span><span class="op" id="7744976">,</span>&nbsp;<span class="ident" id="7744978">b</span><span class="op" id="7744979">,</span>&nbsp;<span class="ident" id="7744981">c</span><span class="op" id="7744982">[</span><span class="ident" id="7744983">i</span><span class="op" id="7744984">]</span><span class="op" id="7744985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744990">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745002">}</span><br>
<span class="lineno"></span><span class="op" id="7745004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745007">func</span>&nbsp;<span class="ident" id="7745012">testFileMode</span><span class="op" id="7745024">(</span><span class="ident" id="7745025">t</span>&nbsp;<span class="op" id="7745027">*</span><span class="ident" id="7745028">testing</span><span class="op" id="7745035">.</span><span class="ident" id="7745036">T</span><span class="op" id="7745037">,</span>&nbsp;<span class="ident" id="7745039">zipName</span>&nbsp;<span class="builtintype" id="7745047">string</span><span class="op" id="7745053">,</span>&nbsp;<span class="ident" id="7745055">f</span>&nbsp;<span class="op" id="7745057">*</span><span class="ident" id="7745058">File</span><span class="op" id="7745062">,</span>&nbsp;<span class="ident" id="7745064">want</span>&nbsp;<span class="ident" id="7745069">os</span><span class="op" id="7745071">.</span><span class="ident" id="7745072">FileMode</span><span class="op" id="7745080">)</span>&nbsp;<span class="op" id="7745082">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745085">mode</span>&nbsp;<span class="op" id="7745090">:=</span>&nbsp;<span class="ident" id="7745093">f</span><span class="op" id="7745094">.</span><span class="ident" id="7745095">Mode</span><span class="op" id="7745099">(</span><span class="op" id="7745100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745103">if</span>&nbsp;<span class="ident" id="7745106">want</span>&nbsp;<span class="op" id="7745111">==</span>&nbsp;<span class="num" id="7745114">0</span>&nbsp;<span class="op" id="7745116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745120">t</span><span class="op" id="7745121">.</span><span class="ident" id="7745122">Errorf</span><span class="op" id="7745128">(</span><span class="string" id="7745129">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7745161">,</span>&nbsp;<span class="ident" id="7745163">zipName</span><span class="op" id="7745170">,</span>&nbsp;<span class="ident" id="7745172">f</span><span class="op" id="7745173">.</span><span class="ident" id="7745174">Name</span><span class="op" id="7745178">,</span>&nbsp;<span class="ident" id="7745180">mode</span><span class="op" id="7745184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745187">}</span>&nbsp;<span class="keyword" id="7745189">else</span>&nbsp;<span class="keyword" id="7745194">if</span>&nbsp;<span class="ident" id="7745197">mode</span>&nbsp;<span class="op" id="7745202">!=</span>&nbsp;<span class="ident" id="7745205">want</span>&nbsp;<span class="op" id="7745210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745214">t</span><span class="op" id="7745215">.</span><span class="ident" id="7745216">Errorf</span><span class="op" id="7745222">(</span><span class="string" id="7745223">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7745253">,</span>&nbsp;<span class="ident" id="7745255">zipName</span><span class="op" id="7745262">,</span>&nbsp;<span class="ident" id="7745264">f</span><span class="op" id="7745265">.</span><span class="ident" id="7745266">Name</span><span class="op" id="7745270">,</span>&nbsp;<span class="ident" id="7745272">want</span><span class="op" id="7745276">,</span>&nbsp;<span class="ident" id="7745278">mode</span><span class="op" id="7745282">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745285">}</span><br>
<span class="lineno"></span><span class="op" id="7745287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745290">func</span>&nbsp;<span class="ident" id="7745295">TestInvalidFiles</span><span class="op" id="7745311">(</span><span class="ident" id="7745312">t</span>&nbsp;<span class="op" id="7745314">*</span><span class="ident" id="7745315">testing</span><span class="op" id="7745322">.</span><span class="ident" id="7745323">T</span><span class="op" id="7745324">)</span>&nbsp;<span class="op" id="7745326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745329">const</span>&nbsp;<span class="ident" id="7745335">size</span>&nbsp;<span class="op" id="7745340">=</span>&nbsp;<span class="num" id="7745342">1024</span>&nbsp;<span class="op" id="7745347">*</span>&nbsp;<span class="num" id="7745349">70</span>&nbsp;<span class="comment" id="7745352">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745361">b</span>&nbsp;<span class="op" id="7745363">:=</span>&nbsp;<span class="builtinfunc" id="7745366">make</span><span class="op" id="7745370">(</span><span class="op" id="7745371">[</span><span class="op" id="7745372">]</span><span class="builtintype" id="7745373">byte</span><span class="op" id="7745377">,</span>&nbsp;<span class="ident" id="7745379">size</span><span class="op" id="7745383">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7745387">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745398">_</span><span class="op" id="7745399">,</span>&nbsp;<span class="ident" id="7745401">err</span>&nbsp;<span class="op" id="7745405">:=</span>&nbsp;<span class="ident" id="7745408">NewReader</span><span class="op" id="7745417">(</span><span class="ident" id="7745418">bytes</span><span class="op" id="7745423">.</span><span class="ident" id="7745424">NewReader</span><span class="op" id="7745433">(</span><span class="ident" id="7745434">b</span><span class="op" id="7745435">)</span><span class="op" id="7745436">,</span>&nbsp;<span class="ident" id="7745438">size</span><span class="op" id="7745442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745445">if</span>&nbsp;<span class="ident" id="7745448">err</span>&nbsp;<span class="op" id="7745452">!=</span>&nbsp;<span class="ident" id="7745455">ErrFormat</span>&nbsp;<span class="op" id="7745465">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745469">t</span><span class="op" id="7745470">.</span><span class="ident" id="7745471">Errorf</span><span class="op" id="7745477">(</span><span class="string" id="7745478">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7745505">,</span>&nbsp;<span class="ident" id="7745507">err</span><span class="op" id="7745510">,</span>&nbsp;<span class="ident" id="7745512">ErrFormat</span><span class="op" id="7745521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7745528">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745564">sig</span>&nbsp;<span class="op" id="7745568">:=</span>&nbsp;<span class="builtinfunc" id="7745571">make</span><span class="op" id="7745575">(</span><span class="op" id="7745576">[</span><span class="op" id="7745577">]</span><span class="builtintype" id="7745578">byte</span><span class="op" id="7745582">,</span>&nbsp;<span class="num" id="7745584">4</span><span class="op" id="7745585">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745588">binary</span><span class="op" id="7745594">.</span><span class="ident" id="7745595">LittleEndian</span><span class="op" id="7745607">.</span><span class="ident" id="7745608">PutUint32</span><span class="op" id="7745617">(</span><span class="ident" id="7745618">sig</span><span class="op" id="7745621">,</span>&nbsp;<span class="ident" id="7745623">directoryEndSignature</span><span class="op" id="7745644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745647">for</span>&nbsp;<span class="ident" id="7745651">i</span>&nbsp;<span class="op" id="7745653">:=</span>&nbsp;<span class="num" id="7745656">0</span><span class="op" id="7745657">;</span>&nbsp;<span class="ident" id="7745659">i</span>&nbsp;<span class="op" id="7745661">&lt;</span>&nbsp;<span class="ident" id="7745663">size</span><span class="op" id="7745667">-</span><span class="num" id="7745668">4</span><span class="op" id="7745669">;</span>&nbsp;<span class="ident" id="7745671">i</span>&nbsp;<span class="op" id="7745673">+=</span>&nbsp;<span class="num" id="7745676">4</span>&nbsp;<span class="op" id="7745678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7745682">copy</span><span class="op" id="7745686">(</span><span class="ident" id="7745687">b</span><span class="op" id="7745688">[</span><span class="ident" id="7745689">i</span><span class="op" id="7745690">:</span><span class="ident" id="7745691">i</span><span class="op" id="7745692">+</span><span class="num" id="7745693">4</span><span class="op" id="7745694">]</span><span class="op" id="7745695">,</span>&nbsp;<span class="ident" id="7745697">sig</span><span class="op" id="7745700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745706">_</span><span class="op" id="7745707">,</span>&nbsp;<span class="ident" id="7745709">err</span>&nbsp;<span class="op" id="7745713">=</span>&nbsp;<span class="ident" id="7745715">NewReader</span><span class="op" id="7745724">(</span><span class="ident" id="7745725">bytes</span><span class="op" id="7745730">.</span><span class="ident" id="7745731">NewReader</span><span class="op" id="7745740">(</span><span class="ident" id="7745741">b</span><span class="op" id="7745742">)</span><span class="op" id="7745743">,</span>&nbsp;<span class="ident" id="7745745">size</span><span class="op" id="7745749">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745752">if</span>&nbsp;<span class="ident" id="7745755">err</span>&nbsp;<span class="op" id="7745759">!=</span>&nbsp;<span class="ident" id="7745762">ErrFormat</span>&nbsp;<span class="op" id="7745772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745776">t</span><span class="op" id="7745777">.</span><span class="ident" id="7745778">Errorf</span><span class="op" id="7745784">(</span><span class="string" id="7745785">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7745810">,</span>&nbsp;<span class="ident" id="7745812">err</span><span class="op" id="7745815">,</span>&nbsp;<span class="ident" id="7745817">ErrFormat</span><span class="op" id="7745826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745829">}</span><br>
<span class="lineno"></span><span class="op" id="7745831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7745834">func</span>&nbsp;<span class="ident" id="7745839">messWith</span><span class="op" id="7745847">(</span><span class="ident" id="7745848">fileName</span>&nbsp;<span class="builtintype" id="7745857">string</span><span class="op" id="7745863">,</span>&nbsp;<span class="ident" id="7745865">corrupter</span>&nbsp;<span class="keyword" id="7745875">func</span><span class="op" id="7745879">(</span><span class="ident" id="7745880">b</span>&nbsp;<span class="op" id="7745882">[</span><span class="op" id="7745883">]</span><span class="builtintype" id="7745884">byte</span><span class="op" id="7745888">)</span><span class="op" id="7745889">)</span>&nbsp;<span class="op" id="7745891">(</span><span class="ident" id="7745892">r</span>&nbsp;<span class="ident" id="7745894">io</span><span class="op" id="7745896">.</span><span class="ident" id="7745897">ReaderAt</span><span class="op" id="7745905">,</span>&nbsp;<span class="ident" id="7745907">size</span>&nbsp;<span class="ident" id="7745912">int64</span><span class="op" id="7745917">)</span>&nbsp;<span class="op" id="7745919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745922">data</span><span class="op" id="7745926">,</span>&nbsp;<span class="ident" id="7745928">err</span>&nbsp;<span class="op" id="7745932">:=</span>&nbsp;<span class="ident" id="7745935">ioutil</span><span class="op" id="7745941">.</span><span class="ident" id="7745942">ReadFile</span><span class="op" id="7745950">(</span><span class="ident" id="7745951">filepath</span><span class="op" id="7745959">.</span><span class="ident" id="7745960">Join</span><span class="op" id="7745964">(</span><span class="string" id="7745965">&#34;testdata&#34;</span><span class="op" id="7745975">,</span>&nbsp;<span class="ident" id="7745977">fileName</span><span class="op" id="7745985">)</span><span class="op" id="7745986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745989">if</span>&nbsp;<span class="ident" id="7745992">err</span>&nbsp;<span class="op" id="7745996">!=</span>&nbsp;<span class="ident" id="7745999">nil</span>&nbsp;<span class="op" id="7746003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7746007">panic</span><span class="op" id="7746012">(</span><span class="string" id="7746013">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7746030">+</span>&nbsp;<span class="ident" id="7746032">fileName</span>&nbsp;<span class="op" id="7746041">+</span>&nbsp;<span class="string" id="7746043">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7746048">+</span>&nbsp;<span class="ident" id="7746050">err</span><span class="op" id="7746053">.</span><span class="ident" id="7746054">Error</span><span class="op" id="7746059">(</span><span class="op" id="7746060">)</span><span class="op" id="7746061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746064">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746067">corrupter</span><span class="op" id="7746076">(</span><span class="ident" id="7746077">data</span><span class="op" id="7746081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746084">return</span>&nbsp;<span class="ident" id="7746091">bytes</span><span class="op" id="7746096">.</span><span class="ident" id="7746097">NewReader</span><span class="op" id="7746106">(</span><span class="ident" id="7746107">data</span><span class="op" id="7746111">)</span><span class="op" id="7746112">,</span>&nbsp;<span class="ident" id="7746114">int64</span><span class="op" id="7746119">(</span><span class="builtinfunc" id="7746120">len</span><span class="op" id="7746123">(</span><span class="ident" id="7746124">data</span><span class="op" id="7746128">)</span><span class="op" id="7746129">)</span><br>
<span class="lineno"></span><span class="op" id="7746131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7746134">func</span>&nbsp;<span class="ident" id="7746139">returnCorruptCRC32Zip</span><span class="op" id="7746160">(</span><span class="op" id="7746161">)</span>&nbsp;<span class="op" id="7746163">(</span><span class="ident" id="7746164">r</span>&nbsp;<span class="ident" id="7746166">io</span><span class="op" id="7746168">.</span><span class="ident" id="7746169">ReaderAt</span><span class="op" id="7746177">,</span>&nbsp;<span class="ident" id="7746179">size</span>&nbsp;<span class="ident" id="7746184">int64</span><span class="op" id="7746189">)</span>&nbsp;<span class="op" id="7746191">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746194">return</span>&nbsp;<span class="ident" id="7746201">messWith</span><span class="op" id="7746209">(</span><span class="string" id="7746210">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7746236">,</span>&nbsp;<span class="keyword" id="7746238">func</span><span class="op" id="7746242">(</span><span class="ident" id="7746243">b</span>&nbsp;<span class="op" id="7746245">[</span><span class="op" id="7746246">]</span><span class="builtintype" id="7746247">byte</span><span class="op" id="7746251">)</span>&nbsp;<span class="op" id="7746253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746257">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746312">b</span><span class="op" id="7746313">[</span><span class="num" id="7746314">0x2d</span><span class="op" id="7746318">]</span><span class="op" id="7746319">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746323">}</span><span class="op" id="7746324">)</span><br>
<span class="lineno"></span><span class="op" id="7746326">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7746329">func</span>&nbsp;<span class="ident" id="7746334">returnCorruptNotStreamedZip</span><span class="op" id="7746361">(</span><span class="op" id="7746362">)</span>&nbsp;<span class="op" id="7746364">(</span><span class="ident" id="7746365">r</span>&nbsp;<span class="ident" id="7746367">io</span><span class="op" id="7746369">.</span><span class="ident" id="7746370">ReaderAt</span><span class="op" id="7746378">,</span>&nbsp;<span class="ident" id="7746380">size</span>&nbsp;<span class="ident" id="7746385">int64</span><span class="op" id="7746390">)</span>&nbsp;<span class="op" id="7746392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746395">return</span>&nbsp;<span class="ident" id="7746402">messWith</span><span class="op" id="7746410">(</span><span class="string" id="7746411">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7746435">,</span>&nbsp;<span class="keyword" id="7746437">func</span><span class="op" id="7746441">(</span><span class="ident" id="7746442">b</span>&nbsp;<span class="op" id="7746444">[</span><span class="op" id="7746445">]</span><span class="builtintype" id="7746446">byte</span><span class="op" id="7746450">)</span>&nbsp;<span class="op" id="7746452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746456">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746505">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746550">b</span><span class="op" id="7746551">[</span><span class="num" id="7746552">0x11</span><span class="op" id="7746556">]</span><span class="op" id="7746557">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746562">b</span><span class="op" id="7746563">[</span><span class="num" id="7746564">0x9d</span><span class="op" id="7746568">]</span><span class="op" id="7746569">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746575">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746630">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746687">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746745">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746799">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746854">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746875">}</span><span class="op" id="7746876">)</span><br>
<span class="lineno">465</span><span class="op" id="7746878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7746881">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7746945">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7747006">func</span>&nbsp;<span class="ident" id="7747011">rZipBytes</span><span class="op" id="7747020">(</span><span class="op" id="7747021">)</span>&nbsp;<span class="op" id="7747023">[</span><span class="op" id="7747024">]</span><span class="builtintype" id="7747025">byte</span>&nbsp;<span class="op" id="7747030">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747033">s</span>&nbsp;<span class="op" id="7747035">:=</span>&nbsp;<span class="string" id="7747038">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748586">s</span>&nbsp;<span class="op" id="7748588">=</span>&nbsp;<span class="ident" id="7748590">regexp</span><span class="op" id="7748596">.</span><span class="ident" id="7748597">MustCompile</span><span class="op" id="7748608">(</span><span class="string" id="7748609">`[0-9a-f]{7}`</span><span class="op" id="7748622">)</span><span class="op" id="7748623">.</span><span class="ident" id="7748624">ReplaceAllString</span><span class="op" id="7748640">(</span><span class="ident" id="7748641">s</span><span class="op" id="7748642">,</span>&nbsp;<span class="string" id="7748644">&#34;&#34;</span><span class="op" id="7748646">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748649">s</span>&nbsp;<span class="op" id="7748651">=</span>&nbsp;<span class="ident" id="7748653">regexp</span><span class="op" id="7748659">.</span><span class="ident" id="7748660">MustCompile</span><span class="op" id="7748671">(</span><span class="string" id="7748672">`\s+`</span><span class="op" id="7748677">)</span><span class="op" id="7748678">.</span><span class="ident" id="7748679">ReplaceAllString</span><span class="op" id="7748695">(</span><span class="ident" id="7748696">s</span><span class="op" id="7748697">,</span>&nbsp;<span class="string" id="7748699">&#34;&#34;</span><span class="op" id="7748701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748704">b</span><span class="op" id="7748705">,</span>&nbsp;<span class="ident" id="7748707">err</span>&nbsp;<span class="op" id="7748711">:=</span>&nbsp;<span class="ident" id="7748714">hex</span><span class="op" id="7748717">.</span><span class="ident" id="7748718">DecodeString</span><span class="op" id="7748730">(</span><span class="ident" id="7748731">s</span><span class="op" id="7748732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7748735">if</span>&nbsp;<span class="ident" id="7748738">err</span>&nbsp;<span class="op" id="7748742">!=</span>&nbsp;<span class="ident" id="7748745">nil</span>&nbsp;<span class="op" id="7748749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7748753">panic</span><span class="op" id="7748758">(</span><span class="ident" id="7748759">err</span><span class="op" id="7748762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748765">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7748768">return</span>&nbsp;<span class="ident" id="7748775">b</span><br>
<span class="lineno"></span><span class="op" id="7748777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748780">func</span>&nbsp;<span class="ident" id="7748785">returnRecursiveZip</span><span class="op" id="7748803">(</span><span class="op" id="7748804">)</span>&nbsp;<span class="op" id="7748806">(</span><span class="ident" id="7748807">r</span>&nbsp;<span class="ident" id="7748809">io</span><span class="op" id="7748811">.</span><span class="ident" id="7748812">ReaderAt</span><span class="op" id="7748820">,</span>&nbsp;<span class="ident" id="7748822">size</span>&nbsp;<span class="ident" id="7748827">int64</span><span class="op" id="7748832">)</span>&nbsp;<span class="op" id="7748834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748837">b</span>&nbsp;<span class="op" id="7748839">:=</span>&nbsp;<span class="ident" id="7748842">rZipBytes</span><span class="op" id="7748851">(</span><span class="op" id="7748852">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7748855">return</span>&nbsp;<span class="ident" id="7748862">bytes</span><span class="op" id="7748867">.</span><span class="ident" id="7748868">NewReader</span><span class="op" id="7748877">(</span><span class="ident" id="7748878">b</span><span class="op" id="7748879">)</span><span class="op" id="7748880">,</span>&nbsp;<span class="ident" id="7748882">int64</span><span class="op" id="7748887">(</span><span class="builtinfunc" id="7748888">len</span><span class="op" id="7748891">(</span><span class="ident" id="7748892">b</span><span class="op" id="7748893">)</span><span class="op" id="7748894">)</span><br>
<span class="lineno"></span><span class="op" id="7748896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748899">func</span>&nbsp;<span class="ident" id="7748904">TestIssue8186</span><span class="op" id="7748917">(</span><span class="ident" id="7748918">t</span>&nbsp;<span class="op" id="7748920">*</span><span class="ident" id="7748921">testing</span><span class="op" id="7748928">.</span><span class="ident" id="7748929">T</span><span class="op" id="7748930">)</span>&nbsp;<span class="op" id="7748932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7748935">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748996">dirEnts</span>&nbsp;<span class="op" id="7749004">:=</span>&nbsp;<span class="op" id="7749007">[</span><span class="op" id="7749008">]</span><span class="builtintype" id="7749009">string</span><span class="op" id="7749015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749019">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7749246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749250">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7749428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749432">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7749603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749607">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7749775">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749779">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7749962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749966">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7750148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750152">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7750322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750326">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98o\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7750495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750499">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7750672">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750678">for</span>&nbsp;<span class="ident" id="7750682">i</span><span class="op" id="7750683">,</span>&nbsp;<span class="ident" id="7750685">s</span>&nbsp;<span class="op" id="7750687">:=</span>&nbsp;<span class="keyword" id="7750690">range</span>&nbsp;<span class="ident" id="7750696">dirEnts</span>&nbsp;<span class="op" id="7750704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750708">var</span>&nbsp;<span class="ident" id="7750712">f</span>&nbsp;<span class="ident" id="7750714">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750721">err</span>&nbsp;<span class="op" id="7750725">:=</span>&nbsp;<span class="ident" id="7750728">readDirectoryHeader</span><span class="op" id="7750747">(</span><span class="op" id="7750748">&amp;</span><span class="ident" id="7750749">f</span><span class="op" id="7750750">,</span>&nbsp;<span class="ident" id="7750752">strings</span><span class="op" id="7750759">.</span><span class="ident" id="7750760">NewReader</span><span class="op" id="7750769">(</span><span class="ident" id="7750770">s</span><span class="op" id="7750771">)</span><span class="op" id="7750772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750776">if</span>&nbsp;<span class="ident" id="7750779">err</span>&nbsp;<span class="op" id="7750783">!=</span>&nbsp;<span class="ident" id="7750786">nil</span>&nbsp;<span class="op" id="7750790">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750795">t</span><span class="op" id="7750796">.</span><span class="ident" id="7750797">Errorf</span><span class="op" id="7750803">(</span><span class="string" id="7750804">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7750827">,</span>&nbsp;<span class="ident" id="7750829">i</span><span class="op" id="7750830">,</span>&nbsp;<span class="ident" id="7750832">err</span><span class="op" id="7750835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750842">}</span><br>
<span class="lineno"></span><span class="op" id="7750844">}</span>
</div>
</body>
</html>
