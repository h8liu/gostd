<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7889329">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7889384">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7889438">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7889489">package</span>&nbsp;<span class="ident" id="7889497">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7889502">import</span>&nbsp;<span class="op" id="7889509">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889512">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889519">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889530">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889541">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7889551">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7889554">type</span>&nbsp;<span class="ident" id="7889559">URLTest</span>&nbsp;<span class="keyword" id="7889567">struct</span>&nbsp;<span class="op" id="7889574">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889577">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7889587">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889595">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889605">*</span><span class="ident" id="7889606">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889611">roundtrip</span>&nbsp;<span class="builtintype" id="7889621">string</span>&nbsp;<span class="comment" id="7889628">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7889699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7889702">var</span>&nbsp;<span class="ident" id="7889706">urltests</span>&nbsp;<span class="op" id="7889715">=</span>&nbsp;<span class="op" id="7889717">[</span><span class="op" id="7889718">]</span><span class="ident" id="7889719">URLTest</span><span class="op" id="7889726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7889729">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889745">&#34;http://www.google.com&#34;</span><span class="op" id="7889768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889772">&amp;</span><span class="ident" id="7889773">URL</span><span class="op" id="7889776">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889781">Scheme</span><span class="op" id="7889787">:</span>&nbsp;<span class="string" id="7889789">&#34;http&#34;</span><span class="op" id="7889795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889800">Host</span><span class="op" id="7889804">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7889808">&#34;www.google.com&#34;</span><span class="op" id="7889824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889828">}</span><span class="op" id="7889829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889833">&#34;&#34;</span><span class="op" id="7889835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889838">}</span><span class="op" id="7889839">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7889842">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889855">&#34;http://www.google.com/&#34;</span><span class="op" id="7889879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889883">&amp;</span><span class="ident" id="7889884">URL</span><span class="op" id="7889887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889892">Scheme</span><span class="op" id="7889898">:</span>&nbsp;<span class="string" id="7889900">&#34;http&#34;</span><span class="op" id="7889906">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889911">Host</span><span class="op" id="7889915">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7889919">&#34;www.google.com&#34;</span><span class="op" id="7889935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889940">Path</span><span class="op" id="7889944">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7889948">&#34;/&#34;</span><span class="op" id="7889951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889955">}</span><span class="op" id="7889956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7889960">&#34;&#34;</span><span class="op" id="7889962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889965">}</span><span class="op" id="7889966">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7889969">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890000">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7890040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890044">&amp;</span><span class="ident" id="7890045">URL</span><span class="op" id="7890048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890053">Scheme</span><span class="op" id="7890059">:</span>&nbsp;<span class="string" id="7890061">&#34;http&#34;</span><span class="op" id="7890067">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890072">Host</span><span class="op" id="7890076">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890080">&#34;www.google.com&#34;</span><span class="op" id="7890096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890101">Path</span><span class="op" id="7890105">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890109">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7890124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890128">}</span><span class="op" id="7890129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890133">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7890171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890174">}</span><span class="op" id="7890175">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7890178">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890191">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7890224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890228">&amp;</span><span class="ident" id="7890229">URL</span><span class="op" id="7890232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890237">Scheme</span><span class="op" id="7890243">:</span>&nbsp;<span class="string" id="7890245">&#34;ftp&#34;</span><span class="op" id="7890250">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890255">User</span><span class="op" id="7890259">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7890263">User</span><span class="op" id="7890267">(</span><span class="string" id="7890268">&#34;webmaster&#34;</span><span class="op" id="7890279">)</span><span class="op" id="7890280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890285">Host</span><span class="op" id="7890289">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890293">&#34;www.google.com&#34;</span><span class="op" id="7890309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890314">Path</span><span class="op" id="7890318">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890322">&#34;/&#34;</span><span class="op" id="7890325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890329">}</span><span class="op" id="7890330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890334">&#34;&#34;</span><span class="op" id="7890336">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890339">}</span><span class="op" id="7890340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7890343">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890379">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7890413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890417">&amp;</span><span class="ident" id="7890418">URL</span><span class="op" id="7890421">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890426">Scheme</span><span class="op" id="7890432">:</span>&nbsp;<span class="string" id="7890434">&#34;ftp&#34;</span><span class="op" id="7890439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890444">User</span><span class="op" id="7890448">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7890452">User</span><span class="op" id="7890456">(</span><span class="string" id="7890457">&#34;john&nbsp;doe&#34;</span><span class="op" id="7890467">)</span><span class="op" id="7890468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890473">Host</span><span class="op" id="7890477">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890481">&#34;www.google.com&#34;</span><span class="op" id="7890497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890502">Path</span><span class="op" id="7890506">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890510">&#34;/&#34;</span><span class="op" id="7890513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890517">}</span><span class="op" id="7890518">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890522">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7890556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890559">}</span><span class="op" id="7890560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7890563">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890577">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7890615">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890619">&amp;</span><span class="ident" id="7890620">URL</span><span class="op" id="7890623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890628">Scheme</span><span class="op" id="7890634">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890638">&#34;http&#34;</span><span class="op" id="7890644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890649">Host</span><span class="op" id="7890653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890659">&#34;www.google.com&#34;</span><span class="op" id="7890675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890680">Path</span><span class="op" id="7890684">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890690">&#34;/&#34;</span><span class="op" id="7890693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890698">RawQuery</span><span class="op" id="7890706">:</span>&nbsp;<span class="string" id="7890708">&#34;q=go+language&#34;</span><span class="op" id="7890723">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890727">}</span><span class="op" id="7890728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890732">&#34;&#34;</span><span class="op" id="7890734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890737">}</span><span class="op" id="7890738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7890741">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890781">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890785">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7890825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890829">&amp;</span><span class="ident" id="7890830">URL</span><span class="op" id="7890833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890838">Scheme</span><span class="op" id="7890844">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7890848">&#34;http&#34;</span><span class="op" id="7890854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890859">Host</span><span class="op" id="7890863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890869">&#34;www.google.com&#34;</span><span class="op" id="7890885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890890">Path</span><span class="op" id="7890894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890900">&#34;/&#34;</span><span class="op" id="7890903">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890908">RawQuery</span><span class="op" id="7890916">:</span>&nbsp;<span class="string" id="7890918">&#34;q=go%20language&#34;</span><span class="op" id="7890935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890939">}</span><span class="op" id="7890940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890944">&#34;&#34;</span><span class="op" id="7890946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890949">}</span><span class="op" id="7890950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7890953">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7890979">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7891014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891018">&amp;</span><span class="ident" id="7891019">URL</span><span class="op" id="7891022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891027">Scheme</span><span class="op" id="7891033">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891037">&#34;http&#34;</span><span class="op" id="7891043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891048">Host</span><span class="op" id="7891052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891058">&#34;www.google.com&#34;</span><span class="op" id="7891074">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891079">Path</span><span class="op" id="7891083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891089">&#34;/a&nbsp;b&#34;</span><span class="op" id="7891095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891100">RawQuery</span><span class="op" id="7891108">:</span>&nbsp;<span class="string" id="7891110">&#34;q=c+d&#34;</span><span class="op" id="7891117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891121">}</span><span class="op" id="7891122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891126">&#34;&#34;</span><span class="op" id="7891128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891131">}</span><span class="op" id="7891132">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7891135">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891181">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7891217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891221">&amp;</span><span class="ident" id="7891222">URL</span><span class="op" id="7891225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891230">Scheme</span><span class="op" id="7891236">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891240">&#34;http&#34;</span><span class="op" id="7891246">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891251">Opaque</span><span class="op" id="7891257">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891261">&#34;www.google.com/&#34;</span><span class="op" id="7891278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891283">RawQuery</span><span class="op" id="7891291">:</span>&nbsp;<span class="string" id="7891293">&#34;q=go+language&#34;</span><span class="op" id="7891308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891312">}</span><span class="op" id="7891313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891317">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7891353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891356">}</span><span class="op" id="7891357">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7891360">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891406">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7891448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891452">&amp;</span><span class="ident" id="7891453">URL</span><span class="op" id="7891456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891461">Scheme</span><span class="op" id="7891467">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891471">&#34;http&#34;</span><span class="op" id="7891477">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891482">Opaque</span><span class="op" id="7891488">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891492">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7891515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891520">RawQuery</span><span class="op" id="7891528">:</span>&nbsp;<span class="string" id="7891530">&#34;q=go+language&#34;</span><span class="op" id="7891545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891549">}</span><span class="op" id="7891550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891554">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7891596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891599">}</span><span class="op" id="7891600">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7891603">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891635">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7891665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891669">&amp;</span><span class="ident" id="7891670">URL</span><span class="op" id="7891673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891678">Scheme</span><span class="op" id="7891684">:</span>&nbsp;<span class="string" id="7891686">&#34;mailto&#34;</span><span class="op" id="7891694">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891699">Path</span><span class="op" id="7891703">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7891707">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7891730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891734">}</span><span class="op" id="7891735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891739">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7891771">,</span>&nbsp;<span class="comment" id="7891773">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891800">}</span><span class="op" id="7891801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7891804">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891826">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7891855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891859">&amp;</span><span class="ident" id="7891860">URL</span><span class="op" id="7891863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891868">Scheme</span><span class="op" id="7891874">:</span>&nbsp;<span class="string" id="7891876">&#34;mailto&#34;</span><span class="op" id="7891884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891889">Opaque</span><span class="op" id="7891895">:</span>&nbsp;<span class="string" id="7891897">&#34;webmaster@golang.org&#34;</span><span class="op" id="7891919">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891923">}</span><span class="op" id="7891924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891928">&#34;&#34;</span><span class="op" id="7891930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891933">}</span><span class="op" id="7891934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7891937">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891991">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7891995">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7892018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892022">&amp;</span><span class="ident" id="7892023">URL</span><span class="op" id="7892026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892031">Path</span><span class="op" id="7892035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892041">&#34;/foo&#34;</span><span class="op" id="7892047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892052">RawQuery</span><span class="op" id="7892060">:</span>&nbsp;<span class="string" id="7892062">&#34;query=http://bad&#34;</span><span class="op" id="7892080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892084">}</span><span class="op" id="7892085">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892089">&#34;&#34;</span><span class="op" id="7892091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892094">}</span><span class="op" id="7892095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892098">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892159">&#34;//foo&#34;</span><span class="op" id="7892166">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892170">&amp;</span><span class="ident" id="7892171">URL</span><span class="op" id="7892174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892179">Host</span><span class="op" id="7892183">:</span>&nbsp;<span class="string" id="7892185">&#34;foo&#34;</span><span class="op" id="7892190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892194">}</span><span class="op" id="7892195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892199">&#34;&#34;</span><span class="op" id="7892201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892204">}</span><span class="op" id="7892205">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892208">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892274">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7892295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892299">&amp;</span><span class="ident" id="7892300">URL</span><span class="op" id="7892303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892308">User</span><span class="op" id="7892312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892318">User</span><span class="op" id="7892322">(</span><span class="string" id="7892323">&#34;user&#34;</span><span class="op" id="7892329">)</span><span class="op" id="7892330">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892335">Host</span><span class="op" id="7892339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892345">&#34;foo&#34;</span><span class="op" id="7892350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892355">Path</span><span class="op" id="7892359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892365">&#34;/path&#34;</span><span class="op" id="7892372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892377">RawQuery</span><span class="op" id="7892385">:</span>&nbsp;<span class="string" id="7892387">&#34;a=b&#34;</span><span class="op" id="7892392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892396">}</span><span class="op" id="7892397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892401">&#34;&#34;</span><span class="op" id="7892403">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892406">}</span><span class="op" id="7892407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892410">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892485">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892546">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892605">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892665">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892688">&#34;///threeslashes&#34;</span><span class="op" id="7892705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892709">&amp;</span><span class="ident" id="7892710">URL</span><span class="op" id="7892713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892718">Path</span><span class="op" id="7892722">:</span>&nbsp;<span class="string" id="7892724">&#34;///threeslashes&#34;</span><span class="op" id="7892741">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892745">}</span><span class="op" id="7892746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892750">&#34;&#34;</span><span class="op" id="7892752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892755">}</span><span class="op" id="7892756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892763">&#34;http://user:password@google.com&#34;</span><span class="op" id="7892796">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892800">&amp;</span><span class="ident" id="7892801">URL</span><span class="op" id="7892804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892809">Scheme</span><span class="op" id="7892815">:</span>&nbsp;<span class="string" id="7892817">&#34;http&#34;</span><span class="op" id="7892823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892828">User</span><span class="op" id="7892832">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7892836">UserPassword</span><span class="op" id="7892848">(</span><span class="string" id="7892849">&#34;user&#34;</span><span class="op" id="7892855">,</span>&nbsp;<span class="string" id="7892857">&#34;password&#34;</span><span class="op" id="7892867">)</span><span class="op" id="7892868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892873">Host</span><span class="op" id="7892877">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7892881">&#34;google.com&#34;</span><span class="op" id="7892893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892897">}</span><span class="op" id="7892898">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892902">&#34;http://user:password@google.com&#34;</span><span class="op" id="7892935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892938">}</span><span class="op" id="7892939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7892942">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7892998">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7893031">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893035">&amp;</span><span class="ident" id="7893036">URL</span><span class="op" id="7893039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893044">Scheme</span><span class="op" id="7893050">:</span>&nbsp;<span class="string" id="7893052">&#34;http&#34;</span><span class="op" id="7893058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893063">User</span><span class="op" id="7893067">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7893071">UserPassword</span><span class="op" id="7893083">(</span><span class="string" id="7893084">&#34;j@ne&#34;</span><span class="op" id="7893090">,</span>&nbsp;<span class="string" id="7893092">&#34;password&#34;</span><span class="op" id="7893102">)</span><span class="op" id="7893103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893108">Host</span><span class="op" id="7893112">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7893116">&#34;google.com&#34;</span><span class="op" id="7893128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893132">}</span><span class="op" id="7893133">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893137">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7893172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893175">}</span><span class="op" id="7893176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7893179">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893235">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7893268">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893272">&amp;</span><span class="ident" id="7893273">URL</span><span class="op" id="7893276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893281">Scheme</span><span class="op" id="7893287">:</span>&nbsp;<span class="string" id="7893289">&#34;http&#34;</span><span class="op" id="7893295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893300">User</span><span class="op" id="7893304">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7893308">UserPassword</span><span class="op" id="7893320">(</span><span class="string" id="7893321">&#34;jane&#34;</span><span class="op" id="7893327">,</span>&nbsp;<span class="string" id="7893329">&#34;p@ssword&#34;</span><span class="op" id="7893339">)</span><span class="op" id="7893340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893345">Host</span><span class="op" id="7893349">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7893353">&#34;google.com&#34;</span><span class="op" id="7893365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893369">}</span><span class="op" id="7893370">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893374">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7893409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893412">}</span><span class="op" id="7893413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893420">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7893464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893468">&amp;</span><span class="ident" id="7893469">URL</span><span class="op" id="7893472">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893477">Scheme</span><span class="op" id="7893483">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7893487">&#34;http&#34;</span><span class="op" id="7893493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893498">User</span><span class="op" id="7893502">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893508">UserPassword</span><span class="op" id="7893520">(</span><span class="string" id="7893521">&#34;j@ne&#34;</span><span class="op" id="7893527">,</span>&nbsp;<span class="string" id="7893529">&#34;password&#34;</span><span class="op" id="7893539">)</span><span class="op" id="7893540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893545">Host</span><span class="op" id="7893549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893555">&#34;google.com&#34;</span><span class="op" id="7893567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893572">Path</span><span class="op" id="7893576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893582">&#34;/p@th&#34;</span><span class="op" id="7893589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893594">RawQuery</span><span class="op" id="7893602">:</span>&nbsp;<span class="string" id="7893604">&#34;q=@go&#34;</span><span class="op" id="7893611">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893615">}</span><span class="op" id="7893616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893620">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7893666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893669">}</span><span class="op" id="7893670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893677">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7893719">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893723">&amp;</span><span class="ident" id="7893724">URL</span><span class="op" id="7893727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893732">Scheme</span><span class="op" id="7893738">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7893742">&#34;http&#34;</span><span class="op" id="7893748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893753">Host</span><span class="op" id="7893757">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893763">&#34;www.google.com&#34;</span><span class="op" id="7893779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893784">Path</span><span class="op" id="7893788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893794">&#34;/&#34;</span><span class="op" id="7893797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893802">RawQuery</span><span class="op" id="7893810">:</span>&nbsp;<span class="string" id="7893812">&#34;q=go+language&#34;</span><span class="op" id="7893827">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893832">Fragment</span><span class="op" id="7893840">:</span>&nbsp;<span class="string" id="7893842">&#34;foo&#34;</span><span class="op" id="7893847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893851">}</span><span class="op" id="7893852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893856">&#34;&#34;</span><span class="op" id="7893858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893861">}</span><span class="op" id="7893862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893865">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893869">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7893917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893921">&amp;</span><span class="ident" id="7893922">URL</span><span class="op" id="7893925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893930">Scheme</span><span class="op" id="7893936">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7893940">&#34;http&#34;</span><span class="op" id="7893946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893951">Host</span><span class="op" id="7893955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893961">&#34;www.google.com&#34;</span><span class="op" id="7893977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893982">Path</span><span class="op" id="7893986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893992">&#34;/&#34;</span><span class="op" id="7893995">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894000">RawQuery</span><span class="op" id="7894008">:</span>&nbsp;<span class="string" id="7894010">&#34;q=go+language&#34;</span><span class="op" id="7894025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894030">Fragment</span><span class="op" id="7894038">:</span>&nbsp;<span class="string" id="7894040">&#34;foo&amp;bar&#34;</span><span class="op" id="7894049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894053">}</span><span class="op" id="7894054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894058">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7894104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894107">}</span><span class="op" id="7894108">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894115">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7894141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894145">&amp;</span><span class="ident" id="7894146">URL</span><span class="op" id="7894149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894154">Scheme</span><span class="op" id="7894160">:</span>&nbsp;<span class="string" id="7894162">&#34;file&#34;</span><span class="op" id="7894168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894173">Host</span><span class="op" id="7894177">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7894181">&#34;&#34;</span><span class="op" id="7894183">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894188">Path</span><span class="op" id="7894192">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7894196">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7894215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894219">}</span><span class="op" id="7894220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894224">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7894250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894253">}</span><span class="op" id="7894254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894257">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894307">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894365">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7894392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894396">&amp;</span><span class="ident" id="7894397">URL</span><span class="op" id="7894400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894405">Scheme</span><span class="op" id="7894411">:</span>&nbsp;<span class="string" id="7894413">&#34;file&#34;</span><span class="op" id="7894419">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894424">Host</span><span class="op" id="7894428">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7894432">&#34;&#34;</span><span class="op" id="7894434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894439">Path</span><span class="op" id="7894443">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7894447">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7894467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894471">}</span><span class="op" id="7894472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894476">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7894503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894506">}</span><span class="op" id="7894507">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894510">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894542">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7894571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894575">&amp;</span><span class="ident" id="7894576">URL</span><span class="op" id="7894579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894584">Scheme</span><span class="op" id="7894590">:</span>&nbsp;<span class="string" id="7894592">&#34;mailto&#34;</span><span class="op" id="7894600">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894605">Opaque</span><span class="op" id="7894611">:</span>&nbsp;<span class="string" id="7894613">&#34;webmaster@golang.org&#34;</span><span class="op" id="7894635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894639">}</span><span class="op" id="7894640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894644">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7894673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894676">}</span><span class="op" id="7894677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894680">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894702">&#34;a/b/c&#34;</span><span class="op" id="7894709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894713">&amp;</span><span class="ident" id="7894714">URL</span><span class="op" id="7894717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894722">Path</span><span class="op" id="7894726">:</span>&nbsp;<span class="string" id="7894728">&#34;a/b/c&#34;</span><span class="op" id="7894735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894739">}</span><span class="op" id="7894740">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894744">&#34;a/b/c&#34;</span><span class="op" id="7894751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894754">}</span><span class="op" id="7894755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894758">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894803">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7894839">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894843">&amp;</span><span class="ident" id="7894844">URL</span><span class="op" id="7894847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894852">Scheme</span><span class="op" id="7894858">:</span>&nbsp;<span class="string" id="7894860">&#34;http&#34;</span><span class="op" id="7894866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894871">User</span><span class="op" id="7894875">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7894879">UserPassword</span><span class="op" id="7894891">(</span><span class="string" id="7894892">&#34;?am&#34;</span><span class="op" id="7894897">,</span>&nbsp;<span class="string" id="7894899">&#34;pa?sword&#34;</span><span class="op" id="7894909">)</span><span class="op" id="7894910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894915">Host</span><span class="op" id="7894919">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7894923">&#34;google.com&#34;</span><span class="op" id="7894935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894939">}</span><span class="op" id="7894940">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7894944">&#34;&#34;</span><span class="op" id="7894946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894949">}</span><span class="op" id="7894950">,</span><br>
<span class="lineno"></span><span class="op" id="7894952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7894955">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7895017">func</span>&nbsp;<span class="ident" id="7895022">ufmt</span><span class="op" id="7895026">(</span><span class="ident" id="7895027">u</span>&nbsp;<span class="op" id="7895029">*</span><span class="ident" id="7895030">URL</span><span class="op" id="7895033">)</span>&nbsp;<span class="builtintype" id="7895035">string</span>&nbsp;<span class="op" id="7895042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895045">var</span>&nbsp;<span class="ident" id="7895049">user</span><span class="op" id="7895053">,</span>&nbsp;<span class="ident" id="7895055">pass</span>&nbsp;<span class="keyword" id="7895060">interface</span><span class="op" id="7895069">{</span><span class="op" id="7895070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895073">if</span>&nbsp;<span class="ident" id="7895076">u</span><span class="op" id="7895077">.</span><span class="ident" id="7895078">User</span>&nbsp;<span class="op" id="7895083">!=</span>&nbsp;<span class="ident" id="7895086">nil</span>&nbsp;<span class="op" id="7895090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895094">user</span>&nbsp;<span class="op" id="7895099">=</span>&nbsp;<span class="ident" id="7895101">u</span><span class="op" id="7895102">.</span><span class="ident" id="7895103">User</span><span class="op" id="7895107">.</span><span class="ident" id="7895108">Username</span><span class="op" id="7895116">(</span><span class="op" id="7895117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895121">if</span>&nbsp;<span class="ident" id="7895124">p</span><span class="op" id="7895125">,</span>&nbsp;<span class="ident" id="7895127">ok</span>&nbsp;<span class="op" id="7895130">:=</span>&nbsp;<span class="ident" id="7895133">u</span><span class="op" id="7895134">.</span><span class="ident" id="7895135">User</span><span class="op" id="7895139">.</span><span class="ident" id="7895140">Password</span><span class="op" id="7895148">(</span><span class="op" id="7895149">)</span><span class="op" id="7895150">;</span>&nbsp;<span class="ident" id="7895152">ok</span>&nbsp;<span class="op" id="7895155">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895160">pass</span>&nbsp;<span class="op" id="7895165">=</span>&nbsp;<span class="ident" id="7895167">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895177">return</span>&nbsp;<span class="ident" id="7895184">fmt</span><span class="op" id="7895187">.</span><span class="ident" id="7895188">Sprintf</span><span class="op" id="7895195">(</span><span class="string" id="7895196">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7895274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895278">u</span><span class="op" id="7895279">.</span><span class="ident" id="7895280">Opaque</span><span class="op" id="7895286">,</span>&nbsp;<span class="ident" id="7895288">u</span><span class="op" id="7895289">.</span><span class="ident" id="7895290">Scheme</span><span class="op" id="7895296">,</span>&nbsp;<span class="ident" id="7895298">user</span><span class="op" id="7895302">,</span>&nbsp;<span class="ident" id="7895304">pass</span><span class="op" id="7895308">,</span>&nbsp;<span class="ident" id="7895310">u</span><span class="op" id="7895311">.</span><span class="ident" id="7895312">Host</span><span class="op" id="7895316">,</span>&nbsp;<span class="ident" id="7895318">u</span><span class="op" id="7895319">.</span><span class="ident" id="7895320">Path</span><span class="op" id="7895324">,</span>&nbsp;<span class="ident" id="7895326">u</span><span class="op" id="7895327">.</span><span class="ident" id="7895328">RawQuery</span><span class="op" id="7895336">,</span>&nbsp;<span class="ident" id="7895338">u</span><span class="op" id="7895339">.</span><span class="ident" id="7895340">Fragment</span><span class="op" id="7895348">)</span><br>
<span class="lineno">305</span><span class="op" id="7895350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7895353">func</span>&nbsp;<span class="ident" id="7895358">DoTest</span><span class="op" id="7895364">(</span><span class="ident" id="7895365">t</span>&nbsp;<span class="op" id="7895367">*</span><span class="ident" id="7895368">testing</span><span class="op" id="7895375">.</span><span class="ident" id="7895376">T</span><span class="op" id="7895377">,</span>&nbsp;<span class="ident" id="7895379">parse</span>&nbsp;<span class="keyword" id="7895385">func</span><span class="op" id="7895389">(</span><span class="builtintype" id="7895390">string</span><span class="op" id="7895396">)</span>&nbsp;<span class="op" id="7895398">(</span><span class="op" id="7895399">*</span><span class="ident" id="7895400">URL</span><span class="op" id="7895403">,</span>&nbsp;<span class="builtintype" id="7895405">error</span><span class="op" id="7895410">)</span><span class="op" id="7895411">,</span>&nbsp;<span class="ident" id="7895413">name</span>&nbsp;<span class="builtintype" id="7895418">string</span><span class="op" id="7895424">,</span>&nbsp;<span class="ident" id="7895426">tests</span>&nbsp;<span class="op" id="7895432">[</span><span class="op" id="7895433">]</span><span class="ident" id="7895434">URLTest</span><span class="op" id="7895441">)</span>&nbsp;<span class="op" id="7895443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895446">for</span>&nbsp;<span class="ident" id="7895450">_</span><span class="op" id="7895451">,</span>&nbsp;<span class="ident" id="7895453">tt</span>&nbsp;<span class="op" id="7895456">:=</span>&nbsp;<span class="keyword" id="7895459">range</span>&nbsp;<span class="ident" id="7895465">tests</span>&nbsp;<span class="op" id="7895471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895475">u</span><span class="op" id="7895476">,</span>&nbsp;<span class="ident" id="7895478">err</span>&nbsp;<span class="op" id="7895482">:=</span>&nbsp;<span class="ident" id="7895485">parse</span><span class="op" id="7895490">(</span><span class="ident" id="7895491">tt</span><span class="op" id="7895493">.</span><span class="ident" id="7895494">in</span><span class="op" id="7895496">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895500">if</span>&nbsp;<span class="ident" id="7895503">err</span>&nbsp;<span class="op" id="7895507">!=</span>&nbsp;<span class="ident" id="7895510">nil</span>&nbsp;<span class="op" id="7895514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895519">t</span><span class="op" id="7895520">.</span><span class="ident" id="7895521">Errorf</span><span class="op" id="7895527">(</span><span class="string" id="7895528">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7895554">,</span>&nbsp;<span class="ident" id="7895556">name</span><span class="op" id="7895560">,</span>&nbsp;<span class="ident" id="7895562">tt</span><span class="op" id="7895564">.</span><span class="ident" id="7895565">in</span><span class="op" id="7895567">,</span>&nbsp;<span class="ident" id="7895569">err</span><span class="op" id="7895572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895577">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895592">if</span>&nbsp;<span class="op" id="7895595">!</span><span class="ident" id="7895596">reflect</span><span class="op" id="7895603">.</span><span class="ident" id="7895604">DeepEqual</span><span class="op" id="7895613">(</span><span class="ident" id="7895614">u</span><span class="op" id="7895615">,</span>&nbsp;<span class="ident" id="7895617">tt</span><span class="op" id="7895619">.</span><span class="ident" id="7895620">out</span><span class="op" id="7895623">)</span>&nbsp;<span class="op" id="7895625">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895630">t</span><span class="op" id="7895631">.</span><span class="ident" id="7895632">Errorf</span><span class="op" id="7895638">(</span><span class="string" id="7895639">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7895672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895678">name</span><span class="op" id="7895682">,</span>&nbsp;<span class="ident" id="7895684">tt</span><span class="op" id="7895686">.</span><span class="ident" id="7895687">in</span><span class="op" id="7895689">,</span>&nbsp;<span class="ident" id="7895691">ufmt</span><span class="op" id="7895695">(</span><span class="ident" id="7895696">u</span><span class="op" id="7895697">)</span><span class="op" id="7895698">,</span>&nbsp;<span class="ident" id="7895700">ufmt</span><span class="op" id="7895704">(</span><span class="ident" id="7895705">tt</span><span class="op" id="7895707">.</span><span class="ident" id="7895708">out</span><span class="op" id="7895711">)</span><span class="op" id="7895712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895719">}</span><br>
<span class="lineno"></span><span class="op" id="7895721">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7895724">func</span>&nbsp;<span class="ident" id="7895729">BenchmarkString</span><span class="op" id="7895744">(</span><span class="ident" id="7895745">b</span>&nbsp;<span class="op" id="7895747">*</span><span class="ident" id="7895748">testing</span><span class="op" id="7895755">.</span><span class="ident" id="7895756">B</span><span class="op" id="7895757">)</span>&nbsp;<span class="op" id="7895759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895762">b</span><span class="op" id="7895763">.</span><span class="ident" id="7895764">StopTimer</span><span class="op" id="7895773">(</span><span class="op" id="7895774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895777">b</span><span class="op" id="7895778">.</span><span class="ident" id="7895779">ReportAllocs</span><span class="op" id="7895791">(</span><span class="op" id="7895792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895795">for</span>&nbsp;<span class="ident" id="7895799">_</span><span class="op" id="7895800">,</span>&nbsp;<span class="ident" id="7895802">tt</span>&nbsp;<span class="op" id="7895805">:=</span>&nbsp;<span class="keyword" id="7895808">range</span>&nbsp;<span class="ident" id="7895814">urltests</span>&nbsp;<span class="op" id="7895823">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895827">u</span><span class="op" id="7895828">,</span>&nbsp;<span class="ident" id="7895830">err</span>&nbsp;<span class="op" id="7895834">:=</span>&nbsp;<span class="ident" id="7895837">Parse</span><span class="op" id="7895842">(</span><span class="ident" id="7895843">tt</span><span class="op" id="7895845">.</span><span class="ident" id="7895846">in</span><span class="op" id="7895848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895852">if</span>&nbsp;<span class="ident" id="7895855">err</span>&nbsp;<span class="op" id="7895859">!=</span>&nbsp;<span class="ident" id="7895862">nil</span>&nbsp;<span class="op" id="7895866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895871">b</span><span class="op" id="7895872">.</span><span class="ident" id="7895873">Errorf</span><span class="op" id="7895879">(</span><span class="string" id="7895880">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7895909">,</span>&nbsp;<span class="ident" id="7895911">tt</span><span class="op" id="7895913">.</span><span class="ident" id="7895914">in</span><span class="op" id="7895916">,</span>&nbsp;<span class="ident" id="7895918">err</span><span class="op" id="7895921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895926">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895937">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895941">if</span>&nbsp;<span class="ident" id="7895944">tt</span><span class="op" id="7895946">.</span><span class="ident" id="7895947">roundtrip</span>&nbsp;<span class="op" id="7895957">==</span>&nbsp;<span class="string" id="7895960">&#34;&#34;</span>&nbsp;<span class="op" id="7895963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895968">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895983">b</span><span class="op" id="7895984">.</span><span class="ident" id="7895985">StartTimer</span><span class="op" id="7895995">(</span><span class="op" id="7895996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896000">var</span>&nbsp;<span class="ident" id="7896004">g</span>&nbsp;<span class="builtintype" id="7896006">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896015">for</span>&nbsp;<span class="ident" id="7896019">i</span>&nbsp;<span class="op" id="7896021">:=</span>&nbsp;<span class="num" id="7896024">0</span><span class="op" id="7896025">;</span>&nbsp;<span class="ident" id="7896027">i</span>&nbsp;<span class="op" id="7896029">&lt;</span>&nbsp;<span class="ident" id="7896031">b</span><span class="op" id="7896032">.</span><span class="ident" id="7896033">N</span><span class="op" id="7896034">;</span>&nbsp;<span class="ident" id="7896036">i</span><span class="op" id="7896037">++</span>&nbsp;<span class="op" id="7896040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896045">g</span>&nbsp;<span class="op" id="7896047">=</span>&nbsp;<span class="ident" id="7896049">u</span><span class="op" id="7896050">.</span><span class="ident" id="7896051">String</span><span class="op" id="7896057">(</span><span class="op" id="7896058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896066">b</span><span class="op" id="7896067">.</span><span class="ident" id="7896068">StopTimer</span><span class="op" id="7896077">(</span><span class="op" id="7896078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896082">if</span>&nbsp;<span class="ident" id="7896085">w</span>&nbsp;<span class="op" id="7896087">:=</span>&nbsp;<span class="ident" id="7896090">tt</span><span class="op" id="7896092">.</span><span class="ident" id="7896093">roundtrip</span><span class="op" id="7896102">;</span>&nbsp;<span class="ident" id="7896104">g</span>&nbsp;<span class="op" id="7896106">!=</span>&nbsp;<span class="ident" id="7896109">w</span>&nbsp;<span class="op" id="7896111">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896116">b</span><span class="op" id="7896117">.</span><span class="ident" id="7896118">Errorf</span><span class="op" id="7896124">(</span><span class="string" id="7896125">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7896160">,</span>&nbsp;<span class="ident" id="7896162">tt</span><span class="op" id="7896164">.</span><span class="ident" id="7896165">in</span><span class="op" id="7896167">,</span>&nbsp;<span class="ident" id="7896169">g</span><span class="op" id="7896170">,</span>&nbsp;<span class="ident" id="7896172">w</span><span class="op" id="7896173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896180">}</span><br>
<span class="lineno"></span><span class="op" id="7896182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7896185">func</span>&nbsp;<span class="ident" id="7896190">TestParse</span><span class="op" id="7896199">(</span><span class="ident" id="7896200">t</span>&nbsp;<span class="op" id="7896202">*</span><span class="ident" id="7896203">testing</span><span class="op" id="7896210">.</span><span class="ident" id="7896211">T</span><span class="op" id="7896212">)</span>&nbsp;<span class="op" id="7896214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896217">DoTest</span><span class="op" id="7896223">(</span><span class="ident" id="7896224">t</span><span class="op" id="7896225">,</span>&nbsp;<span class="ident" id="7896227">Parse</span><span class="op" id="7896232">,</span>&nbsp;<span class="string" id="7896234">&#34;Parse&#34;</span><span class="op" id="7896241">,</span>&nbsp;<span class="ident" id="7896243">urltests</span><span class="op" id="7896251">)</span><br>
<span class="lineno"></span><span class="op" id="7896253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7896256">const</span>&nbsp;<span class="ident" id="7896262">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7896290">=</span>&nbsp;<span class="string" id="7896292">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7896331">var</span>&nbsp;<span class="ident" id="7896335">parseRequestURLTests</span>&nbsp;<span class="op" id="7896356">=</span>&nbsp;<span class="op" id="7896358">[</span><span class="op" id="7896359">]</span><span class="keyword" id="7896360">struct</span>&nbsp;<span class="op" id="7896367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896370">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7896384">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896392">expectedValid</span>&nbsp;<span class="builtintype" id="7896406">bool</span><br>
<span class="lineno"></span><span class="op" id="7896411">}</span><span class="op" id="7896412">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896415">{</span><span class="string" id="7896416">&#34;http://foo.com&#34;</span><span class="op" id="7896432">,</span>&nbsp;<span class="builtintype" id="7896434">true</span><span class="op" id="7896438">}</span><span class="op" id="7896439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896442">{</span><span class="string" id="7896443">&#34;http://foo.com/&#34;</span><span class="op" id="7896460">,</span>&nbsp;<span class="builtintype" id="7896462">true</span><span class="op" id="7896466">}</span><span class="op" id="7896467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896470">{</span><span class="string" id="7896471">&#34;http://foo.com/path&#34;</span><span class="op" id="7896492">,</span>&nbsp;<span class="builtintype" id="7896494">true</span><span class="op" id="7896498">}</span><span class="op" id="7896499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896502">{</span><span class="string" id="7896503">&#34;/&#34;</span><span class="op" id="7896506">,</span>&nbsp;<span class="builtintype" id="7896508">true</span><span class="op" id="7896512">}</span><span class="op" id="7896513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896516">{</span><span class="ident" id="7896517">pathThatLooksSchemeRelative</span><span class="op" id="7896544">,</span>&nbsp;<span class="builtintype" id="7896546">true</span><span class="op" id="7896550">}</span><span class="op" id="7896551">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896554">{</span><span class="string" id="7896555">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7896600">,</span>&nbsp;<span class="builtintype" id="7896602">true</span><span class="op" id="7896606">}</span><span class="op" id="7896607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896610">{</span><span class="string" id="7896611">&#34;foo.html&#34;</span><span class="op" id="7896621">,</span>&nbsp;<span class="builtintype" id="7896623">false</span><span class="op" id="7896628">}</span><span class="op" id="7896629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896632">{</span><span class="string" id="7896633">&#34;../dir/&#34;</span><span class="op" id="7896642">,</span>&nbsp;<span class="builtintype" id="7896644">false</span><span class="op" id="7896649">}</span><span class="op" id="7896650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896653">{</span><span class="string" id="7896654">&#34;*&#34;</span><span class="op" id="7896657">,</span>&nbsp;<span class="builtintype" id="7896659">true</span><span class="op" id="7896663">}</span><span class="op" id="7896664">,</span><br>
<span class="lineno"></span><span class="op" id="7896666">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7896669">func</span>&nbsp;<span class="ident" id="7896674">TestParseRequestURI</span><span class="op" id="7896693">(</span><span class="ident" id="7896694">t</span>&nbsp;<span class="op" id="7896696">*</span><span class="ident" id="7896697">testing</span><span class="op" id="7896704">.</span><span class="ident" id="7896705">T</span><span class="op" id="7896706">)</span>&nbsp;<span class="op" id="7896708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896711">for</span>&nbsp;<span class="ident" id="7896715">_</span><span class="op" id="7896716">,</span>&nbsp;<span class="ident" id="7896718">test</span>&nbsp;<span class="op" id="7896723">:=</span>&nbsp;<span class="keyword" id="7896726">range</span>&nbsp;<span class="ident" id="7896732">parseRequestURLTests</span>&nbsp;<span class="op" id="7896753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896757">_</span><span class="op" id="7896758">,</span>&nbsp;<span class="ident" id="7896760">err</span>&nbsp;<span class="op" id="7896764">:=</span>&nbsp;<span class="ident" id="7896767">ParseRequestURI</span><span class="op" id="7896782">(</span><span class="ident" id="7896783">test</span><span class="op" id="7896787">.</span><span class="ident" id="7896788">url</span><span class="op" id="7896791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896795">valid</span>&nbsp;<span class="op" id="7896801">:=</span>&nbsp;<span class="ident" id="7896804">err</span>&nbsp;<span class="op" id="7896808">==</span>&nbsp;<span class="ident" id="7896811">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896817">if</span>&nbsp;<span class="ident" id="7896820">valid</span>&nbsp;<span class="op" id="7896826">!=</span>&nbsp;<span class="ident" id="7896829">test</span><span class="op" id="7896833">.</span><span class="ident" id="7896834">expectedValid</span>&nbsp;<span class="op" id="7896848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896853">t</span><span class="op" id="7896854">.</span><span class="ident" id="7896855">Errorf</span><span class="op" id="7896861">(</span><span class="string" id="7896862">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7896896">,</span>&nbsp;<span class="ident" id="7896898">test</span><span class="op" id="7896902">.</span><span class="ident" id="7896903">expectedValid</span><span class="op" id="7896916">,</span>&nbsp;<span class="ident" id="7896918">test</span><span class="op" id="7896922">.</span><span class="ident" id="7896923">url</span><span class="op" id="7896926">,</span>&nbsp;<span class="ident" id="7896928">valid</span><span class="op" id="7896933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896944">url</span><span class="op" id="7896947">,</span>&nbsp;<span class="ident" id="7896949">err</span>&nbsp;<span class="op" id="7896953">:=</span>&nbsp;<span class="ident" id="7896956">ParseRequestURI</span><span class="op" id="7896971">(</span><span class="ident" id="7896972">pathThatLooksSchemeRelative</span><span class="op" id="7896999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897002">if</span>&nbsp;<span class="ident" id="7897005">err</span>&nbsp;<span class="op" id="7897009">!=</span>&nbsp;<span class="ident" id="7897012">nil</span>&nbsp;<span class="op" id="7897016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897020">t</span><span class="op" id="7897021">.</span><span class="ident" id="7897022">Fatalf</span><span class="op" id="7897028">(</span><span class="string" id="7897029">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7897050">,</span>&nbsp;<span class="ident" id="7897052">err</span><span class="op" id="7897055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897061">if</span>&nbsp;<span class="ident" id="7897064">url</span><span class="op" id="7897067">.</span><span class="ident" id="7897068">Path</span>&nbsp;<span class="op" id="7897073">!=</span>&nbsp;<span class="ident" id="7897076">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7897104">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897108">t</span><span class="op" id="7897109">.</span><span class="ident" id="7897110">Errorf</span><span class="op" id="7897116">(</span><span class="string" id="7897117">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7897143">,</span>&nbsp;<span class="ident" id="7897145">pathThatLooksSchemeRelative</span><span class="op" id="7897172">,</span>&nbsp;<span class="ident" id="7897174">url</span><span class="op" id="7897177">.</span><span class="ident" id="7897178">Path</span><span class="op" id="7897182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897185">}</span><br>
<span class="lineno"></span><span class="op" id="7897187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7897190">func</span>&nbsp;<span class="ident" id="7897195">DoTestString</span><span class="op" id="7897207">(</span><span class="ident" id="7897208">t</span>&nbsp;<span class="op" id="7897210">*</span><span class="ident" id="7897211">testing</span><span class="op" id="7897218">.</span><span class="ident" id="7897219">T</span><span class="op" id="7897220">,</span>&nbsp;<span class="ident" id="7897222">parse</span>&nbsp;<span class="keyword" id="7897228">func</span><span class="op" id="7897232">(</span><span class="builtintype" id="7897233">string</span><span class="op" id="7897239">)</span>&nbsp;<span class="op" id="7897241">(</span><span class="op" id="7897242">*</span><span class="ident" id="7897243">URL</span><span class="op" id="7897246">,</span>&nbsp;<span class="builtintype" id="7897248">error</span><span class="op" id="7897253">)</span><span class="op" id="7897254">,</span>&nbsp;<span class="ident" id="7897256">name</span>&nbsp;<span class="builtintype" id="7897261">string</span><span class="op" id="7897267">,</span>&nbsp;<span class="ident" id="7897269">tests</span>&nbsp;<span class="op" id="7897275">[</span><span class="op" id="7897276">]</span><span class="ident" id="7897277">URLTest</span><span class="op" id="7897284">)</span>&nbsp;<span class="op" id="7897286">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897289">for</span>&nbsp;<span class="ident" id="7897293">_</span><span class="op" id="7897294">,</span>&nbsp;<span class="ident" id="7897296">tt</span>&nbsp;<span class="op" id="7897299">:=</span>&nbsp;<span class="keyword" id="7897302">range</span>&nbsp;<span class="ident" id="7897308">tests</span>&nbsp;<span class="op" id="7897314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897318">u</span><span class="op" id="7897319">,</span>&nbsp;<span class="ident" id="7897321">err</span>&nbsp;<span class="op" id="7897325">:=</span>&nbsp;<span class="ident" id="7897328">parse</span><span class="op" id="7897333">(</span><span class="ident" id="7897334">tt</span><span class="op" id="7897336">.</span><span class="ident" id="7897337">in</span><span class="op" id="7897339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897343">if</span>&nbsp;<span class="ident" id="7897346">err</span>&nbsp;<span class="op" id="7897350">!=</span>&nbsp;<span class="ident" id="7897353">nil</span>&nbsp;<span class="op" id="7897357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897362">t</span><span class="op" id="7897363">.</span><span class="ident" id="7897364">Errorf</span><span class="op" id="7897370">(</span><span class="string" id="7897371">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7897397">,</span>&nbsp;<span class="ident" id="7897399">name</span><span class="op" id="7897403">,</span>&nbsp;<span class="ident" id="7897405">tt</span><span class="op" id="7897407">.</span><span class="ident" id="7897408">in</span><span class="op" id="7897410">,</span>&nbsp;<span class="ident" id="7897412">err</span><span class="op" id="7897415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897420">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897435">expected</span>&nbsp;<span class="op" id="7897444">:=</span>&nbsp;<span class="ident" id="7897447">tt</span><span class="op" id="7897449">.</span><span class="ident" id="7897450">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897455">if</span>&nbsp;<span class="builtinfunc" id="7897458">len</span><span class="op" id="7897461">(</span><span class="ident" id="7897462">tt</span><span class="op" id="7897464">.</span><span class="ident" id="7897465">roundtrip</span><span class="op" id="7897474">)</span>&nbsp;<span class="op" id="7897476">&gt;</span>&nbsp;<span class="num" id="7897478">0</span>&nbsp;<span class="op" id="7897480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897485">expected</span>&nbsp;<span class="op" id="7897494">=</span>&nbsp;<span class="ident" id="7897496">tt</span><span class="op" id="7897498">.</span><span class="ident" id="7897499">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897511">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897515">s</span>&nbsp;<span class="op" id="7897517">:=</span>&nbsp;<span class="ident" id="7897520">u</span><span class="op" id="7897521">.</span><span class="ident" id="7897522">String</span><span class="op" id="7897528">(</span><span class="op" id="7897529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897533">if</span>&nbsp;<span class="ident" id="7897536">s</span>&nbsp;<span class="op" id="7897538">!=</span>&nbsp;<span class="ident" id="7897541">expected</span>&nbsp;<span class="op" id="7897550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897555">t</span><span class="op" id="7897556">.</span><span class="ident" id="7897557">Errorf</span><span class="op" id="7897563">(</span><span class="string" id="7897564">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7897601">,</span>&nbsp;<span class="ident" id="7897603">name</span><span class="op" id="7897607">,</span>&nbsp;<span class="ident" id="7897609">tt</span><span class="op" id="7897611">.</span><span class="ident" id="7897612">in</span><span class="op" id="7897614">,</span>&nbsp;<span class="ident" id="7897616">s</span><span class="op" id="7897617">,</span>&nbsp;<span class="ident" id="7897619">expected</span><span class="op" id="7897627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897634">}</span><br>
<span class="lineno">400</span><span class="op" id="7897636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7897639">func</span>&nbsp;<span class="ident" id="7897644">TestURLString</span><span class="op" id="7897657">(</span><span class="ident" id="7897658">t</span>&nbsp;<span class="op" id="7897660">*</span><span class="ident" id="7897661">testing</span><span class="op" id="7897668">.</span><span class="ident" id="7897669">T</span><span class="op" id="7897670">)</span>&nbsp;<span class="op" id="7897672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897675">DoTestString</span><span class="op" id="7897687">(</span><span class="ident" id="7897688">t</span><span class="op" id="7897689">,</span>&nbsp;<span class="ident" id="7897691">Parse</span><span class="op" id="7897696">,</span>&nbsp;<span class="string" id="7897698">&#34;Parse&#34;</span><span class="op" id="7897705">,</span>&nbsp;<span class="ident" id="7897707">urltests</span><span class="op" id="7897715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7897719">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7897763">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897790">noslash</span>&nbsp;<span class="op" id="7897798">:=</span>&nbsp;<span class="ident" id="7897801">URLTest</span><span class="op" id="7897808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7897812">&#34;http://www.google.com/search&#34;</span><span class="op" id="7897842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897846">&amp;</span><span class="ident" id="7897847">URL</span><span class="op" id="7897850">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897855">Scheme</span><span class="op" id="7897861">:</span>&nbsp;<span class="string" id="7897863">&#34;http&#34;</span><span class="op" id="7897869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897874">Host</span><span class="op" id="7897878">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7897882">&#34;www.google.com&#34;</span><span class="op" id="7897898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897903">Path</span><span class="op" id="7897907">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7897911">&#34;search&#34;</span><span class="op" id="7897919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897923">}</span><span class="op" id="7897924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7897928">&#34;&#34;</span><span class="op" id="7897930">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897936">s</span>&nbsp;<span class="op" id="7897938">:=</span>&nbsp;<span class="ident" id="7897941">noslash</span><span class="op" id="7897948">.</span><span class="ident" id="7897949">out</span><span class="op" id="7897952">.</span><span class="ident" id="7897953">String</span><span class="op" id="7897959">(</span><span class="op" id="7897960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7897963">if</span>&nbsp;<span class="ident" id="7897966">s</span>&nbsp;<span class="op" id="7897968">!=</span>&nbsp;<span class="ident" id="7897971">noslash</span><span class="op" id="7897978">.</span><span class="ident" id="7897979">in</span>&nbsp;<span class="op" id="7897982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7897986">t</span><span class="op" id="7897987">.</span><span class="ident" id="7897988">Errorf</span><span class="op" id="7897994">(</span><span class="string" id="7897995">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7898015">,</span>&nbsp;<span class="ident" id="7898017">noslash</span><span class="op" id="7898024">.</span><span class="ident" id="7898025">in</span><span class="op" id="7898027">,</span>&nbsp;<span class="ident" id="7898029">s</span><span class="op" id="7898030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898033">}</span><br>
<span class="lineno">420</span><span class="op" id="7898035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7898038">type</span>&nbsp;<span class="ident" id="7898043">EscapeTest</span>&nbsp;<span class="keyword" id="7898054">struct</span>&nbsp;<span class="op" id="7898061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898064">in</span>&nbsp;&nbsp;<span class="builtintype" id="7898068">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898076">out</span>&nbsp;<span class="builtintype" id="7898080">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898088">err</span>&nbsp;<span class="builtintype" id="7898092">error</span><br>
<span class="lineno"></span><span class="op" id="7898098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7898101">var</span>&nbsp;<span class="ident" id="7898105">unescapeTests</span>&nbsp;<span class="op" id="7898119">=</span>&nbsp;<span class="op" id="7898121">[</span><span class="op" id="7898122">]</span><span class="ident" id="7898123">EscapeTest</span><span class="op" id="7898133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898136">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898140">&#34;&#34;</span><span class="op" id="7898142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898146">&#34;&#34;</span><span class="op" id="7898148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898152">nil</span><span class="op" id="7898155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898158">}</span><span class="op" id="7898159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898162">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898166">&#34;abc&#34;</span><span class="op" id="7898171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898175">&#34;abc&#34;</span><span class="op" id="7898180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898184">nil</span><span class="op" id="7898187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898190">}</span><span class="op" id="7898191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898194">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898198">&#34;1%41&#34;</span><span class="op" id="7898204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898208">&#34;1A&#34;</span><span class="op" id="7898212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898216">nil</span><span class="op" id="7898219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898222">}</span><span class="op" id="7898223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898226">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898230">&#34;1%41%42%43&#34;</span><span class="op" id="7898242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898246">&#34;1ABC&#34;</span><span class="op" id="7898252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898256">nil</span><span class="op" id="7898259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898262">}</span><span class="op" id="7898263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898266">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898270">&#34;%4a&#34;</span><span class="op" id="7898275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898279">&#34;J&#34;</span><span class="op" id="7898282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898286">nil</span><span class="op" id="7898289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898292">}</span><span class="op" id="7898293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898296">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898300">&#34;%6F&#34;</span><span class="op" id="7898305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898309">&#34;o&#34;</span><span class="op" id="7898312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898316">nil</span><span class="op" id="7898319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898322">}</span><span class="op" id="7898323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898326">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898330">&#34;%&#34;</span><span class="op" id="7898333">,</span>&nbsp;<span class="comment" id="7898335">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898370">&#34;&#34;</span><span class="op" id="7898372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898376">EscapeError</span><span class="op" id="7898387">(</span><span class="string" id="7898388">&#34;%&#34;</span><span class="op" id="7898391">)</span><span class="op" id="7898392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898395">}</span><span class="op" id="7898396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898399">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898403">&#34;%a&#34;</span><span class="op" id="7898407">,</span>&nbsp;<span class="comment" id="7898409">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898444">&#34;&#34;</span><span class="op" id="7898446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898450">EscapeError</span><span class="op" id="7898461">(</span><span class="string" id="7898462">&#34;%a&#34;</span><span class="op" id="7898466">)</span><span class="op" id="7898467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898470">}</span><span class="op" id="7898471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898474">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898478">&#34;%1&#34;</span><span class="op" id="7898482">,</span>&nbsp;<span class="comment" id="7898484">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898519">&#34;&#34;</span><span class="op" id="7898521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898525">EscapeError</span><span class="op" id="7898536">(</span><span class="string" id="7898537">&#34;%1&#34;</span><span class="op" id="7898541">)</span><span class="op" id="7898542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898545">}</span><span class="op" id="7898546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898549">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898553">&#34;123%45%6&#34;</span><span class="op" id="7898563">,</span>&nbsp;<span class="comment" id="7898565">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898600">&#34;&#34;</span><span class="op" id="7898602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898606">EscapeError</span><span class="op" id="7898617">(</span><span class="string" id="7898618">&#34;%6&#34;</span><span class="op" id="7898622">)</span><span class="op" id="7898623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898626">}</span><span class="op" id="7898627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898630">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898634">&#34;%zzzzz&#34;</span><span class="op" id="7898642">,</span>&nbsp;<span class="comment" id="7898644">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7898668">&#34;&#34;</span><span class="op" id="7898670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898674">EscapeError</span><span class="op" id="7898685">(</span><span class="string" id="7898686">&#34;%zz&#34;</span><span class="op" id="7898691">)</span><span class="op" id="7898692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898695">}</span><span class="op" id="7898696">,</span><br>
<span class="lineno"></span><span class="op" id="7898698">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7898701">func</span>&nbsp;<span class="ident" id="7898706">TestUnescape</span><span class="op" id="7898718">(</span><span class="ident" id="7898719">t</span>&nbsp;<span class="op" id="7898721">*</span><span class="ident" id="7898722">testing</span><span class="op" id="7898729">.</span><span class="ident" id="7898730">T</span><span class="op" id="7898731">)</span>&nbsp;<span class="op" id="7898733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7898736">for</span>&nbsp;<span class="ident" id="7898740">_</span><span class="op" id="7898741">,</span>&nbsp;<span class="ident" id="7898743">tt</span>&nbsp;<span class="op" id="7898746">:=</span>&nbsp;<span class="keyword" id="7898749">range</span>&nbsp;<span class="ident" id="7898755">unescapeTests</span>&nbsp;<span class="op" id="7898769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898773">actual</span><span class="op" id="7898779">,</span>&nbsp;<span class="ident" id="7898781">err</span>&nbsp;<span class="op" id="7898785">:=</span>&nbsp;<span class="ident" id="7898788">QueryUnescape</span><span class="op" id="7898801">(</span><span class="ident" id="7898802">tt</span><span class="op" id="7898804">.</span><span class="ident" id="7898805">in</span><span class="op" id="7898807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7898811">if</span>&nbsp;<span class="ident" id="7898814">actual</span>&nbsp;<span class="op" id="7898821">!=</span>&nbsp;<span class="ident" id="7898824">tt</span><span class="op" id="7898826">.</span><span class="ident" id="7898827">out</span>&nbsp;<span class="op" id="7898831">||</span>&nbsp;<span class="op" id="7898834">(</span><span class="ident" id="7898835">err</span>&nbsp;<span class="op" id="7898839">!=</span>&nbsp;<span class="ident" id="7898842">nil</span><span class="op" id="7898845">)</span>&nbsp;<span class="op" id="7898847">!=</span>&nbsp;<span class="op" id="7898850">(</span><span class="ident" id="7898851">tt</span><span class="op" id="7898853">.</span><span class="ident" id="7898854">err</span>&nbsp;<span class="op" id="7898858">!=</span>&nbsp;<span class="ident" id="7898861">nil</span><span class="op" id="7898864">)</span>&nbsp;<span class="op" id="7898866">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898871">t</span><span class="op" id="7898872">.</span><span class="ident" id="7898873">Errorf</span><span class="op" id="7898879">(</span><span class="string" id="7898880">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7898921">,</span>&nbsp;<span class="ident" id="7898923">tt</span><span class="op" id="7898925">.</span><span class="ident" id="7898926">in</span><span class="op" id="7898928">,</span>&nbsp;<span class="ident" id="7898930">actual</span><span class="op" id="7898936">,</span>&nbsp;<span class="ident" id="7898938">err</span><span class="op" id="7898941">,</span>&nbsp;<span class="ident" id="7898943">tt</span><span class="op" id="7898945">.</span><span class="ident" id="7898946">out</span><span class="op" id="7898949">,</span>&nbsp;<span class="ident" id="7898951">tt</span><span class="op" id="7898953">.</span><span class="ident" id="7898954">err</span><span class="op" id="7898957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898964">}</span><br>
<span class="lineno"></span><span class="op" id="7898966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7898969">var</span>&nbsp;<span class="ident" id="7898973">escapeTests</span>&nbsp;<span class="op" id="7898985">=</span>&nbsp;<span class="op" id="7898987">[</span><span class="op" id="7898988">]</span><span class="ident" id="7898989">EscapeTest</span><span class="op" id="7898999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899006">&#34;&#34;</span><span class="op" id="7899008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899012">&#34;&#34;</span><span class="op" id="7899014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899018">nil</span><span class="op" id="7899021">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899024">}</span><span class="op" id="7899025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899032">&#34;abc&#34;</span><span class="op" id="7899037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899041">&#34;abc&#34;</span><span class="op" id="7899046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899050">nil</span><span class="op" id="7899053">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899056">}</span><span class="op" id="7899057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899064">&#34;one&nbsp;two&#34;</span><span class="op" id="7899073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899077">&#34;one+two&#34;</span><span class="op" id="7899086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899090">nil</span><span class="op" id="7899093">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899096">}</span><span class="op" id="7899097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899104">&#34;10%&#34;</span><span class="op" id="7899109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899113">&#34;10%25&#34;</span><span class="op" id="7899120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899124">nil</span><span class="op" id="7899127">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899130">}</span><span class="op" id="7899131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899138">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7899177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7899181">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7899283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899287">nil</span><span class="op" id="7899290">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899293">}</span><span class="op" id="7899294">,</span><br>
<span class="lineno"></span><span class="op" id="7899296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7899299">func</span>&nbsp;<span class="ident" id="7899304">TestEscape</span><span class="op" id="7899314">(</span><span class="ident" id="7899315">t</span>&nbsp;<span class="op" id="7899317">*</span><span class="ident" id="7899318">testing</span><span class="op" id="7899325">.</span><span class="ident" id="7899326">T</span><span class="op" id="7899327">)</span>&nbsp;<span class="op" id="7899329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7899332">for</span>&nbsp;<span class="ident" id="7899336">_</span><span class="op" id="7899337">,</span>&nbsp;<span class="ident" id="7899339">tt</span>&nbsp;<span class="op" id="7899342">:=</span>&nbsp;<span class="keyword" id="7899345">range</span>&nbsp;<span class="ident" id="7899351">escapeTests</span>&nbsp;<span class="op" id="7899363">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899367">actual</span>&nbsp;<span class="op" id="7899374">:=</span>&nbsp;<span class="ident" id="7899377">QueryEscape</span><span class="op" id="7899388">(</span><span class="ident" id="7899389">tt</span><span class="op" id="7899391">.</span><span class="ident" id="7899392">in</span><span class="op" id="7899394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7899398">if</span>&nbsp;<span class="ident" id="7899401">tt</span><span class="op" id="7899403">.</span><span class="ident" id="7899404">out</span>&nbsp;<span class="op" id="7899408">!=</span>&nbsp;<span class="ident" id="7899411">actual</span>&nbsp;<span class="op" id="7899418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899423">t</span><span class="op" id="7899424">.</span><span class="ident" id="7899425">Errorf</span><span class="op" id="7899431">(</span><span class="string" id="7899432">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7899463">,</span>&nbsp;<span class="ident" id="7899465">tt</span><span class="op" id="7899467">.</span><span class="ident" id="7899468">in</span><span class="op" id="7899470">,</span>&nbsp;<span class="ident" id="7899472">actual</span><span class="op" id="7899478">,</span>&nbsp;<span class="ident" id="7899480">tt</span><span class="op" id="7899482">.</span><span class="ident" id="7899483">out</span><span class="op" id="7899486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7899495">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899562">roundtrip</span><span class="op" id="7899571">,</span>&nbsp;<span class="ident" id="7899573">err</span>&nbsp;<span class="op" id="7899577">:=</span>&nbsp;<span class="ident" id="7899580">QueryUnescape</span><span class="op" id="7899593">(</span><span class="ident" id="7899594">actual</span><span class="op" id="7899600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7899604">if</span>&nbsp;<span class="ident" id="7899607">roundtrip</span>&nbsp;<span class="op" id="7899617">!=</span>&nbsp;<span class="ident" id="7899620">tt</span><span class="op" id="7899622">.</span><span class="ident" id="7899623">in</span>&nbsp;<span class="op" id="7899626">||</span>&nbsp;<span class="ident" id="7899629">err</span>&nbsp;<span class="op" id="7899633">!=</span>&nbsp;<span class="ident" id="7899636">nil</span>&nbsp;<span class="op" id="7899640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7899645">t</span><span class="op" id="7899646">.</span><span class="ident" id="7899647">Errorf</span><span class="op" id="7899653">(</span><span class="string" id="7899654">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7899695">,</span>&nbsp;<span class="ident" id="7899697">actual</span><span class="op" id="7899703">,</span>&nbsp;<span class="ident" id="7899705">roundtrip</span><span class="op" id="7899714">,</span>&nbsp;<span class="ident" id="7899716">err</span><span class="op" id="7899719">,</span>&nbsp;<span class="ident" id="7899721">tt</span><span class="op" id="7899723">.</span><span class="ident" id="7899724">in</span><span class="op" id="7899726">,</span>&nbsp;<span class="string" id="7899728">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7899740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899744">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7899747">}</span><br>
<span class="lineno"></span><span class="op" id="7899749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7899752">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7899790">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7899832">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7899885">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7899968">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7899973">type</span>&nbsp;<span class="ident" id="7899978">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7899994">struct</span>&nbsp;<span class="op" id="7900001">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7900004">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900013">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7900021">expected</span>&nbsp;<span class="builtintype" id="7900030">string</span><br>
<span class="lineno"></span><span class="op" id="7900037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7900040">var</span>&nbsp;<span class="ident" id="7900044">encodeQueryTests</span>&nbsp;<span class="op" id="7900061">=</span>&nbsp;<span class="op" id="7900063">[</span><span class="op" id="7900064">]</span><span class="ident" id="7900065">EncodeQueryTest</span><span class="op" id="7900080">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900083">{</span><span class="ident" id="7900084">nil</span><span class="op" id="7900087">,</span>&nbsp;<span class="string" id="7900089">&#34;&#34;</span><span class="op" id="7900091">}</span><span class="op" id="7900092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900095">{</span><span class="ident" id="7900096">Values</span><span class="op" id="7900102">{</span><span class="string" id="7900103">&#34;q&#34;</span><span class="op" id="7900106">:</span>&nbsp;<span class="op" id="7900108">{</span><span class="string" id="7900109">&#34;puppies&#34;</span><span class="op" id="7900118">}</span><span class="op" id="7900119">,</span>&nbsp;<span class="string" id="7900121">&#34;oe&#34;</span><span class="op" id="7900125">:</span>&nbsp;<span class="op" id="7900127">{</span><span class="string" id="7900128">&#34;utf8&#34;</span><span class="op" id="7900134">}</span><span class="op" id="7900135">}</span><span class="op" id="7900136">,</span>&nbsp;<span class="string" id="7900138">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7900157">}</span><span class="op" id="7900158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900161">{</span><span class="ident" id="7900162">Values</span><span class="op" id="7900168">{</span><span class="string" id="7900169">&#34;q&#34;</span><span class="op" id="7900172">:</span>&nbsp;<span class="op" id="7900174">{</span><span class="string" id="7900175">&#34;dogs&#34;</span><span class="op" id="7900181">,</span>&nbsp;<span class="string" id="7900183">&#34;&amp;&#34;</span><span class="op" id="7900186">,</span>&nbsp;<span class="string" id="7900188">&#34;7&#34;</span><span class="op" id="7900191">}</span><span class="op" id="7900192">}</span><span class="op" id="7900193">,</span>&nbsp;<span class="string" id="7900195">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7900213">}</span><span class="op" id="7900214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900217">{</span><span class="ident" id="7900218">Values</span><span class="op" id="7900224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7900228">&#34;a&#34;</span><span class="op" id="7900231">:</span>&nbsp;<span class="op" id="7900233">{</span><span class="string" id="7900234">&#34;a1&#34;</span><span class="op" id="7900238">,</span>&nbsp;<span class="string" id="7900240">&#34;a2&#34;</span><span class="op" id="7900244">,</span>&nbsp;<span class="string" id="7900246">&#34;a3&#34;</span><span class="op" id="7900250">}</span><span class="op" id="7900251">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7900255">&#34;b&#34;</span><span class="op" id="7900258">:</span>&nbsp;<span class="op" id="7900260">{</span><span class="string" id="7900261">&#34;b1&#34;</span><span class="op" id="7900265">,</span>&nbsp;<span class="string" id="7900267">&#34;b2&#34;</span><span class="op" id="7900271">,</span>&nbsp;<span class="string" id="7900273">&#34;b3&#34;</span><span class="op" id="7900277">}</span><span class="op" id="7900278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7900282">&#34;c&#34;</span><span class="op" id="7900285">:</span>&nbsp;<span class="op" id="7900287">{</span><span class="string" id="7900288">&#34;c1&#34;</span><span class="op" id="7900292">,</span>&nbsp;<span class="string" id="7900294">&#34;c2&#34;</span><span class="op" id="7900298">,</span>&nbsp;<span class="string" id="7900300">&#34;c3&#34;</span><span class="op" id="7900304">}</span><span class="op" id="7900305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900308">}</span><span class="op" id="7900309">,</span>&nbsp;<span class="string" id="7900311">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7900357">}</span><span class="op" id="7900358">,</span><br>
<span class="lineno"></span><span class="op" id="7900360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7900363">func</span>&nbsp;<span class="ident" id="7900368">TestEncodeQuery</span><span class="op" id="7900383">(</span><span class="ident" id="7900384">t</span>&nbsp;<span class="op" id="7900386">*</span><span class="ident" id="7900387">testing</span><span class="op" id="7900394">.</span><span class="ident" id="7900395">T</span><span class="op" id="7900396">)</span>&nbsp;<span class="op" id="7900398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7900401">for</span>&nbsp;<span class="ident" id="7900405">_</span><span class="op" id="7900406">,</span>&nbsp;<span class="ident" id="7900408">tt</span>&nbsp;<span class="op" id="7900411">:=</span>&nbsp;<span class="keyword" id="7900414">range</span>&nbsp;<span class="ident" id="7900420">encodeQueryTests</span>&nbsp;<span class="op" id="7900437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7900441">if</span>&nbsp;<span class="ident" id="7900444">q</span>&nbsp;<span class="op" id="7900446">:=</span>&nbsp;<span class="ident" id="7900449">tt</span><span class="op" id="7900451">.</span><span class="ident" id="7900452">m</span><span class="op" id="7900453">.</span><span class="ident" id="7900454">Encode</span><span class="op" id="7900460">(</span><span class="op" id="7900461">)</span><span class="op" id="7900462">;</span>&nbsp;<span class="ident" id="7900464">q</span>&nbsp;<span class="op" id="7900466">!=</span>&nbsp;<span class="ident" id="7900469">tt</span><span class="op" id="7900471">.</span><span class="ident" id="7900472">expected</span>&nbsp;<span class="op" id="7900481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7900486">t</span><span class="op" id="7900487">.</span><span class="ident" id="7900488">Errorf</span><span class="op" id="7900494">(</span><span class="string" id="7900495">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7900527">,</span>&nbsp;<span class="ident" id="7900529">tt</span><span class="op" id="7900531">.</span><span class="ident" id="7900532">m</span><span class="op" id="7900533">,</span>&nbsp;<span class="ident" id="7900535">q</span><span class="op" id="7900536">,</span>&nbsp;<span class="ident" id="7900538">tt</span><span class="op" id="7900540">.</span><span class="ident" id="7900541">expected</span><span class="op" id="7900549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900553">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900556">}</span><br>
<span class="lineno"></span><span class="op" id="7900558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7900561">var</span>&nbsp;<span class="ident" id="7900565">resolvePathTests</span>&nbsp;<span class="op" id="7900582">=</span>&nbsp;<span class="op" id="7900584">[</span><span class="op" id="7900585">]</span><span class="keyword" id="7900586">struct</span>&nbsp;<span class="op" id="7900593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7900596">base</span><span class="op" id="7900600">,</span>&nbsp;<span class="ident" id="7900602">ref</span><span class="op" id="7900605">,</span>&nbsp;<span class="ident" id="7900607">expected</span>&nbsp;<span class="builtintype" id="7900616">string</span><br>
<span class="lineno">570</span><span class="op" id="7900623">}</span><span class="op" id="7900624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900627">{</span><span class="string" id="7900628">&#34;a/b&#34;</span><span class="op" id="7900633">,</span>&nbsp;<span class="string" id="7900635">&#34;.&#34;</span><span class="op" id="7900638">,</span>&nbsp;<span class="string" id="7900640">&#34;/a/&#34;</span><span class="op" id="7900645">}</span><span class="op" id="7900646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900649">{</span><span class="string" id="7900650">&#34;a/b&#34;</span><span class="op" id="7900655">,</span>&nbsp;<span class="string" id="7900657">&#34;c&#34;</span><span class="op" id="7900660">,</span>&nbsp;<span class="string" id="7900662">&#34;/a/c&#34;</span><span class="op" id="7900668">}</span><span class="op" id="7900669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900672">{</span><span class="string" id="7900673">&#34;a/b&#34;</span><span class="op" id="7900678">,</span>&nbsp;<span class="string" id="7900680">&#34;..&#34;</span><span class="op" id="7900684">,</span>&nbsp;<span class="string" id="7900686">&#34;/&#34;</span><span class="op" id="7900689">}</span><span class="op" id="7900690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900693">{</span><span class="string" id="7900694">&#34;a/&#34;</span><span class="op" id="7900698">,</span>&nbsp;<span class="string" id="7900700">&#34;..&#34;</span><span class="op" id="7900704">,</span>&nbsp;<span class="string" id="7900706">&#34;/&#34;</span><span class="op" id="7900709">}</span><span class="op" id="7900710">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900713">{</span><span class="string" id="7900714">&#34;a/&#34;</span><span class="op" id="7900718">,</span>&nbsp;<span class="string" id="7900720">&#34;../..&#34;</span><span class="op" id="7900727">,</span>&nbsp;<span class="string" id="7900729">&#34;/&#34;</span><span class="op" id="7900732">}</span><span class="op" id="7900733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900736">{</span><span class="string" id="7900737">&#34;a/b/c&#34;</span><span class="op" id="7900744">,</span>&nbsp;<span class="string" id="7900746">&#34;..&#34;</span><span class="op" id="7900750">,</span>&nbsp;<span class="string" id="7900752">&#34;/a/&#34;</span><span class="op" id="7900757">}</span><span class="op" id="7900758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900761">{</span><span class="string" id="7900762">&#34;a/b/c&#34;</span><span class="op" id="7900769">,</span>&nbsp;<span class="string" id="7900771">&#34;../d&#34;</span><span class="op" id="7900777">,</span>&nbsp;<span class="string" id="7900779">&#34;/a/d&#34;</span><span class="op" id="7900785">}</span><span class="op" id="7900786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900789">{</span><span class="string" id="7900790">&#34;a/b/c&#34;</span><span class="op" id="7900797">,</span>&nbsp;<span class="string" id="7900799">&#34;.././d&#34;</span><span class="op" id="7900807">,</span>&nbsp;<span class="string" id="7900809">&#34;/a/d&#34;</span><span class="op" id="7900815">}</span><span class="op" id="7900816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900819">{</span><span class="string" id="7900820">&#34;a/b&#34;</span><span class="op" id="7900825">,</span>&nbsp;<span class="string" id="7900827">&#34;./..&#34;</span><span class="op" id="7900833">,</span>&nbsp;<span class="string" id="7900835">&#34;/&#34;</span><span class="op" id="7900838">}</span><span class="op" id="7900839">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900842">{</span><span class="string" id="7900843">&#34;a/./b&#34;</span><span class="op" id="7900850">,</span>&nbsp;<span class="string" id="7900852">&#34;.&#34;</span><span class="op" id="7900855">,</span>&nbsp;<span class="string" id="7900857">&#34;/a/&#34;</span><span class="op" id="7900862">}</span><span class="op" id="7900863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900866">{</span><span class="string" id="7900867">&#34;a/../&#34;</span><span class="op" id="7900874">,</span>&nbsp;<span class="string" id="7900876">&#34;.&#34;</span><span class="op" id="7900879">,</span>&nbsp;<span class="string" id="7900881">&#34;/&#34;</span><span class="op" id="7900884">}</span><span class="op" id="7900885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7900888">{</span><span class="string" id="7900889">&#34;a/.././b&#34;</span><span class="op" id="7900899">,</span>&nbsp;<span class="string" id="7900901">&#34;c&#34;</span><span class="op" id="7900904">,</span>&nbsp;<span class="string" id="7900906">&#34;/c&#34;</span><span class="op" id="7900910">}</span><span class="op" id="7900911">,</span><br>
<span class="lineno"></span><span class="op" id="7900913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7900916">func</span>&nbsp;<span class="ident" id="7900921">TestResolvePath</span><span class="op" id="7900936">(</span><span class="ident" id="7900937">t</span>&nbsp;<span class="op" id="7900939">*</span><span class="ident" id="7900940">testing</span><span class="op" id="7900947">.</span><span class="ident" id="7900948">T</span><span class="op" id="7900949">)</span>&nbsp;<span class="op" id="7900951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7900954">for</span>&nbsp;<span class="ident" id="7900958">_</span><span class="op" id="7900959">,</span>&nbsp;<span class="ident" id="7900961">test</span>&nbsp;<span class="op" id="7900966">:=</span>&nbsp;<span class="keyword" id="7900969">range</span>&nbsp;<span class="ident" id="7900975">resolvePathTests</span>&nbsp;<span class="op" id="7900992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7900996">got</span>&nbsp;<span class="op" id="7901000">:=</span>&nbsp;<span class="ident" id="7901003">resolvePath</span><span class="op" id="7901014">(</span><span class="ident" id="7901015">test</span><span class="op" id="7901019">.</span><span class="ident" id="7901020">base</span><span class="op" id="7901024">,</span>&nbsp;<span class="ident" id="7901026">test</span><span class="op" id="7901030">.</span><span class="ident" id="7901031">ref</span><span class="op" id="7901034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7901038">if</span>&nbsp;<span class="ident" id="7901041">got</span>&nbsp;<span class="op" id="7901045">!=</span>&nbsp;<span class="ident" id="7901048">test</span><span class="op" id="7901052">.</span><span class="ident" id="7901053">expected</span>&nbsp;<span class="op" id="7901062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7901067">t</span><span class="op" id="7901068">.</span><span class="ident" id="7901069">Errorf</span><span class="op" id="7901075">(</span><span class="string" id="7901076">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7901109">,</span>&nbsp;<span class="ident" id="7901111">test</span><span class="op" id="7901115">.</span><span class="ident" id="7901116">base</span><span class="op" id="7901120">,</span>&nbsp;<span class="ident" id="7901122">test</span><span class="op" id="7901126">.</span><span class="ident" id="7901127">ref</span><span class="op" id="7901130">,</span>&nbsp;<span class="ident" id="7901132">got</span><span class="op" id="7901135">,</span>&nbsp;<span class="ident" id="7901137">test</span><span class="op" id="7901141">.</span><span class="ident" id="7901142">expected</span><span class="op" id="7901150">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901157">}</span><br>
<span class="lineno"></span><span class="op" id="7901159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7901162">var</span>&nbsp;<span class="ident" id="7901166">resolveReferenceTests</span>&nbsp;<span class="op" id="7901188">=</span>&nbsp;<span class="op" id="7901190">[</span><span class="op" id="7901191">]</span><span class="keyword" id="7901192">struct</span>&nbsp;<span class="op" id="7901199">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7901202">base</span><span class="op" id="7901206">,</span>&nbsp;<span class="ident" id="7901208">rel</span><span class="op" id="7901211">,</span>&nbsp;<span class="ident" id="7901213">expected</span>&nbsp;<span class="builtintype" id="7901222">string</span><br>
<span class="lineno"></span><span class="op" id="7901229">}</span><span class="op" id="7901230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901233">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901261">{</span><span class="string" id="7901262">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7901282">,</span>&nbsp;<span class="string" id="7901284">&#34;https://bar.com/&#34;</span><span class="op" id="7901302">,</span>&nbsp;<span class="string" id="7901304">&#34;https://bar.com/&#34;</span><span class="op" id="7901322">}</span><span class="op" id="7901323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901326">{</span><span class="string" id="7901327">&#34;http://foo.com/&#34;</span><span class="op" id="7901344">,</span>&nbsp;<span class="string" id="7901346">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7901368">,</span>&nbsp;<span class="string" id="7901370">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7901392">}</span><span class="op" id="7901393">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901396">{</span><span class="string" id="7901397">&#34;http://foo.com/bar&#34;</span><span class="op" id="7901417">,</span>&nbsp;<span class="string" id="7901419">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7901443">,</span>&nbsp;<span class="string" id="7901445">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7901469">}</span><span class="op" id="7901470">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901474">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901503">{</span><span class="string" id="7901504">&#34;http://foo.com/bar&#34;</span><span class="op" id="7901524">,</span>&nbsp;<span class="string" id="7901526">&#34;/baz&#34;</span><span class="op" id="7901532">,</span>&nbsp;<span class="string" id="7901534">&#34;http://foo.com/baz&#34;</span><span class="op" id="7901554">}</span><span class="op" id="7901555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901558">{</span><span class="string" id="7901559">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7901585">,</span>&nbsp;<span class="string" id="7901587">&#34;/baz&#34;</span><span class="op" id="7901593">,</span>&nbsp;<span class="string" id="7901595">&#34;http://foo.com/baz&#34;</span><span class="op" id="7901615">}</span><span class="op" id="7901616">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901619">{</span><span class="string" id="7901620">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7901644">,</span>&nbsp;<span class="string" id="7901646">&#34;/baz?c=d&#34;</span><span class="op" id="7901656">,</span>&nbsp;<span class="string" id="7901658">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7901682">}</span><span class="op" id="7901683">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901687">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901707">{</span><span class="string" id="7901708">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7901733">,</span>&nbsp;<span class="string" id="7901735">&#34;//bar.com/quux&#34;</span><span class="op" id="7901751">,</span>&nbsp;<span class="string" id="7901753">&#34;https://bar.com/quux&#34;</span><span class="op" id="7901775">}</span><span class="op" id="7901776">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901780">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901811">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901837">{</span><span class="string" id="7901838">&#34;http://foo.com&#34;</span><span class="op" id="7901854">,</span>&nbsp;<span class="string" id="7901856">&#34;.&#34;</span><span class="op" id="7901859">,</span>&nbsp;<span class="string" id="7901861">&#34;http://foo.com/&#34;</span><span class="op" id="7901878">}</span><span class="op" id="7901879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901882">{</span><span class="string" id="7901883">&#34;http://foo.com/bar&#34;</span><span class="op" id="7901903">,</span>&nbsp;<span class="string" id="7901905">&#34;.&#34;</span><span class="op" id="7901908">,</span>&nbsp;<span class="string" id="7901910">&#34;http://foo.com/&#34;</span><span class="op" id="7901927">}</span><span class="op" id="7901928">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7901931">{</span><span class="string" id="7901932">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7901953">,</span>&nbsp;<span class="string" id="7901955">&#34;.&#34;</span><span class="op" id="7901958">,</span>&nbsp;<span class="string" id="7901960">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7901981">}</span><span class="op" id="7901982">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7901986">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902005">{</span><span class="string" id="7902006">&#34;http://foo.com&#34;</span><span class="op" id="7902022">,</span>&nbsp;<span class="string" id="7902024">&#34;bar&#34;</span><span class="op" id="7902029">,</span>&nbsp;<span class="string" id="7902031">&#34;http://foo.com/bar&#34;</span><span class="op" id="7902051">}</span><span class="op" id="7902052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902055">{</span><span class="string" id="7902056">&#34;http://foo.com/&#34;</span><span class="op" id="7902073">,</span>&nbsp;<span class="string" id="7902075">&#34;bar&#34;</span><span class="op" id="7902080">,</span>&nbsp;<span class="string" id="7902082">&#34;http://foo.com/bar&#34;</span><span class="op" id="7902102">}</span><span class="op" id="7902103">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902106">{</span><span class="string" id="7902107">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902131">,</span>&nbsp;<span class="string" id="7902133">&#34;quux&#34;</span><span class="op" id="7902139">,</span>&nbsp;<span class="string" id="7902141">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7902166">}</span><span class="op" id="7902167">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7902171">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902188">{</span><span class="string" id="7902189">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902213">,</span>&nbsp;<span class="string" id="7902215">&#34;../quux&#34;</span><span class="op" id="7902224">,</span>&nbsp;<span class="string" id="7902226">&#34;http://foo.com/quux&#34;</span><span class="op" id="7902247">}</span><span class="op" id="7902248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902251">{</span><span class="string" id="7902252">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902276">,</span>&nbsp;<span class="string" id="7902278">&#34;../../../../../quux&#34;</span><span class="op" id="7902299">,</span>&nbsp;<span class="string" id="7902301">&#34;http://foo.com/quux&#34;</span><span class="op" id="7902322">}</span><span class="op" id="7902323">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902326">{</span><span class="string" id="7902327">&#34;http://foo.com/bar&#34;</span><span class="op" id="7902347">,</span>&nbsp;<span class="string" id="7902349">&#34;..&#34;</span><span class="op" id="7902353">,</span>&nbsp;<span class="string" id="7902355">&#34;http://foo.com/&#34;</span><span class="op" id="7902372">}</span><span class="op" id="7902373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902376">{</span><span class="string" id="7902377">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902401">,</span>&nbsp;<span class="string" id="7902403">&#34;./..&#34;</span><span class="op" id="7902409">,</span>&nbsp;<span class="string" id="7902411">&#34;http://foo.com/&#34;</span><span class="op" id="7902428">}</span><span class="op" id="7902429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7902432">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902468">{</span><span class="string" id="7902469">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902493">,</span>&nbsp;<span class="string" id="7902495">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7902516">,</span>&nbsp;<span class="string" id="7902518">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7902548">}</span><span class="op" id="7902549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902552">{</span><span class="string" id="7902553">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902577">,</span>&nbsp;<span class="string" id="7902579">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7902602">,</span>&nbsp;<span class="string" id="7902604">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7902634">}</span><span class="op" id="7902635">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902638">{</span><span class="string" id="7902639">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902663">,</span>&nbsp;<span class="string" id="7902665">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7902690">,</span>&nbsp;<span class="string" id="7902692">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7902722">}</span><span class="op" id="7902723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902726">{</span><span class="string" id="7902727">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902751">,</span>&nbsp;<span class="string" id="7902753">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7902778">,</span>&nbsp;<span class="string" id="7902780">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7902810">}</span><span class="op" id="7902811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902814">{</span><span class="string" id="7902815">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902839">,</span>&nbsp;<span class="string" id="7902841">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7902878">,</span>&nbsp;<span class="string" id="7902880">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7902910">}</span><span class="op" id="7902911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7902914">{</span><span class="string" id="7902915">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7902939">,</span>&nbsp;<span class="string" id="7902941">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7902978">,</span>&nbsp;<span class="string" id="7902980">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7903010">}</span><span class="op" id="7903011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903014">{</span><span class="string" id="7903015">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7903039">,</span>&nbsp;<span class="string" id="7903041">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7903092">,</span>&nbsp;<span class="string" id="7903094">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7903124">}</span><span class="op" id="7903125">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903128">{</span><span class="string" id="7903129">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7903153">,</span>&nbsp;<span class="string" id="7903155">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7903197">,</span>&nbsp;<span class="string" id="7903199">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7903229">}</span><span class="op" id="7903230">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903234">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903295">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903348">{</span><span class="string" id="7903349">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7903389">,</span>&nbsp;<span class="string" id="7903391">&#34;../baz&#34;</span><span class="op" id="7903399">,</span>&nbsp;<span class="string" id="7903401">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7903425">}</span><span class="op" id="7903426">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903430">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903459">{</span><span class="string" id="7903460">&#34;http://foo.com/bar&#34;</span><span class="op" id="7903480">,</span>&nbsp;<span class="string" id="7903482">&#34;...&#34;</span><span class="op" id="7903487">,</span>&nbsp;<span class="string" id="7903489">&#34;http://foo.com/...&#34;</span><span class="op" id="7903509">}</span><span class="op" id="7903510">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903514">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903527">{</span><span class="string" id="7903528">&#34;http://foo.com/bar&#34;</span><span class="op" id="7903548">,</span>&nbsp;<span class="string" id="7903550">&#34;.#frag&#34;</span><span class="op" id="7903558">,</span>&nbsp;<span class="string" id="7903560">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7903582">}</span><span class="op" id="7903583">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903587">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7903617">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903670">{</span><span class="string" id="7903671">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903691">,</span>&nbsp;<span class="string" id="7903693">&#34;g:h&#34;</span><span class="op" id="7903698">,</span>&nbsp;<span class="string" id="7903700">&#34;g:h&#34;</span><span class="op" id="7903705">}</span><span class="op" id="7903706">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903709">{</span><span class="string" id="7903710">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903730">,</span>&nbsp;<span class="string" id="7903732">&#34;g&#34;</span><span class="op" id="7903735">,</span>&nbsp;<span class="string" id="7903737">&#34;http://a/b/c/g&#34;</span><span class="op" id="7903753">}</span><span class="op" id="7903754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903757">{</span><span class="string" id="7903758">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903778">,</span>&nbsp;<span class="string" id="7903780">&#34;./g&#34;</span><span class="op" id="7903785">,</span>&nbsp;<span class="string" id="7903787">&#34;http://a/b/c/g&#34;</span><span class="op" id="7903803">}</span><span class="op" id="7903804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903807">{</span><span class="string" id="7903808">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903828">,</span>&nbsp;<span class="string" id="7903830">&#34;g/&#34;</span><span class="op" id="7903834">,</span>&nbsp;<span class="string" id="7903836">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7903853">}</span><span class="op" id="7903854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903857">{</span><span class="string" id="7903858">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903878">,</span>&nbsp;<span class="string" id="7903880">&#34;/g&#34;</span><span class="op" id="7903884">,</span>&nbsp;<span class="string" id="7903886">&#34;http://a/g&#34;</span><span class="op" id="7903898">}</span><span class="op" id="7903899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903902">{</span><span class="string" id="7903903">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903923">,</span>&nbsp;<span class="string" id="7903925">&#34;//g&#34;</span><span class="op" id="7903930">,</span>&nbsp;<span class="string" id="7903932">&#34;http://g&#34;</span><span class="op" id="7903942">}</span><span class="op" id="7903943">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903946">{</span><span class="string" id="7903947">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7903967">,</span>&nbsp;<span class="string" id="7903969">&#34;?y&#34;</span><span class="op" id="7903973">,</span>&nbsp;<span class="string" id="7903975">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7903995">}</span><span class="op" id="7903996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7903999">{</span><span class="string" id="7904000">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904020">,</span>&nbsp;<span class="string" id="7904022">&#34;g?y&#34;</span><span class="op" id="7904027">,</span>&nbsp;<span class="string" id="7904029">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7904047">}</span><span class="op" id="7904048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904051">{</span><span class="string" id="7904052">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904072">,</span>&nbsp;<span class="string" id="7904074">&#34;#s&#34;</span><span class="op" id="7904078">,</span>&nbsp;<span class="string" id="7904080">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7904102">}</span><span class="op" id="7904103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904106">{</span><span class="string" id="7904107">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904127">,</span>&nbsp;<span class="string" id="7904129">&#34;g#s&#34;</span><span class="op" id="7904134">,</span>&nbsp;<span class="string" id="7904136">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7904154">}</span><span class="op" id="7904155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904158">{</span><span class="string" id="7904159">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904179">,</span>&nbsp;<span class="string" id="7904181">&#34;g?y#s&#34;</span><span class="op" id="7904188">,</span>&nbsp;<span class="string" id="7904190">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7904210">}</span><span class="op" id="7904211">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904214">{</span><span class="string" id="7904215">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904235">,</span>&nbsp;<span class="string" id="7904237">&#34;;x&#34;</span><span class="op" id="7904241">,</span>&nbsp;<span class="string" id="7904243">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7904260">}</span><span class="op" id="7904261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904264">{</span><span class="string" id="7904265">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904285">,</span>&nbsp;<span class="string" id="7904287">&#34;g;x&#34;</span><span class="op" id="7904292">,</span>&nbsp;<span class="string" id="7904294">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7904312">}</span><span class="op" id="7904313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904316">{</span><span class="string" id="7904317">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904337">,</span>&nbsp;<span class="string" id="7904339">&#34;g;x?y#s&#34;</span><span class="op" id="7904348">,</span>&nbsp;<span class="string" id="7904350">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7904372">}</span><span class="op" id="7904373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904376">{</span><span class="string" id="7904377">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904397">,</span>&nbsp;<span class="string" id="7904399">&#34;&#34;</span><span class="op" id="7904401">,</span>&nbsp;<span class="string" id="7904403">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904423">}</span><span class="op" id="7904424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904427">{</span><span class="string" id="7904428">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904448">,</span>&nbsp;<span class="string" id="7904450">&#34;.&#34;</span><span class="op" id="7904453">,</span>&nbsp;<span class="string" id="7904455">&#34;http://a/b/c/&#34;</span><span class="op" id="7904470">}</span><span class="op" id="7904471">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904474">{</span><span class="string" id="7904475">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904495">,</span>&nbsp;<span class="string" id="7904497">&#34;./&#34;</span><span class="op" id="7904501">,</span>&nbsp;<span class="string" id="7904503">&#34;http://a/b/c/&#34;</span><span class="op" id="7904518">}</span><span class="op" id="7904519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904522">{</span><span class="string" id="7904523">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904543">,</span>&nbsp;<span class="string" id="7904545">&#34;..&#34;</span><span class="op" id="7904549">,</span>&nbsp;<span class="string" id="7904551">&#34;http://a/b/&#34;</span><span class="op" id="7904564">}</span><span class="op" id="7904565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904568">{</span><span class="string" id="7904569">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904589">,</span>&nbsp;<span class="string" id="7904591">&#34;../&#34;</span><span class="op" id="7904596">,</span>&nbsp;<span class="string" id="7904598">&#34;http://a/b/&#34;</span><span class="op" id="7904611">}</span><span class="op" id="7904612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904615">{</span><span class="string" id="7904616">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904636">,</span>&nbsp;<span class="string" id="7904638">&#34;../g&#34;</span><span class="op" id="7904644">,</span>&nbsp;<span class="string" id="7904646">&#34;http://a/b/g&#34;</span><span class="op" id="7904660">}</span><span class="op" id="7904661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904664">{</span><span class="string" id="7904665">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904685">,</span>&nbsp;<span class="string" id="7904687">&#34;../..&#34;</span><span class="op" id="7904694">,</span>&nbsp;<span class="string" id="7904696">&#34;http://a/&#34;</span><span class="op" id="7904707">}</span><span class="op" id="7904708">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904711">{</span><span class="string" id="7904712">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904732">,</span>&nbsp;<span class="string" id="7904734">&#34;../../&#34;</span><span class="op" id="7904742">,</span>&nbsp;<span class="string" id="7904744">&#34;http://a/&#34;</span><span class="op" id="7904755">}</span><span class="op" id="7904756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904759">{</span><span class="string" id="7904760">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904780">,</span>&nbsp;<span class="string" id="7904782">&#34;../../g&#34;</span><span class="op" id="7904791">,</span>&nbsp;<span class="string" id="7904793">&#34;http://a/g&#34;</span><span class="op" id="7904805">}</span><span class="op" id="7904806">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7904810">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7904842">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904895">{</span><span class="string" id="7904896">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904916">,</span>&nbsp;<span class="string" id="7904918">&#34;../../../g&#34;</span><span class="op" id="7904930">,</span>&nbsp;<span class="string" id="7904932">&#34;http://a/g&#34;</span><span class="op" id="7904944">}</span><span class="op" id="7904945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7904948">{</span><span class="string" id="7904949">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7904969">,</span>&nbsp;<span class="string" id="7904971">&#34;../../../../g&#34;</span><span class="op" id="7904986">,</span>&nbsp;<span class="string" id="7904988">&#34;http://a/g&#34;</span><span class="op" id="7905000">}</span><span class="op" id="7905001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905004">{</span><span class="string" id="7905005">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905025">,</span>&nbsp;<span class="string" id="7905027">&#34;/./g&#34;</span><span class="op" id="7905033">,</span>&nbsp;<span class="string" id="7905035">&#34;http://a/g&#34;</span><span class="op" id="7905047">}</span><span class="op" id="7905048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905051">{</span><span class="string" id="7905052">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905072">,</span>&nbsp;<span class="string" id="7905074">&#34;/../g&#34;</span><span class="op" id="7905081">,</span>&nbsp;<span class="string" id="7905083">&#34;http://a/g&#34;</span><span class="op" id="7905095">}</span><span class="op" id="7905096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905099">{</span><span class="string" id="7905100">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905120">,</span>&nbsp;<span class="string" id="7905122">&#34;g.&#34;</span><span class="op" id="7905126">,</span>&nbsp;<span class="string" id="7905128">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7905145">}</span><span class="op" id="7905146">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905149">{</span><span class="string" id="7905150">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905170">,</span>&nbsp;<span class="string" id="7905172">&#34;.g&#34;</span><span class="op" id="7905176">,</span>&nbsp;<span class="string" id="7905178">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7905195">}</span><span class="op" id="7905196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905199">{</span><span class="string" id="7905200">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905220">,</span>&nbsp;<span class="string" id="7905222">&#34;g..&#34;</span><span class="op" id="7905227">,</span>&nbsp;<span class="string" id="7905229">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7905247">}</span><span class="op" id="7905248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905251">{</span><span class="string" id="7905252">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905272">,</span>&nbsp;<span class="string" id="7905274">&#34;..g&#34;</span><span class="op" id="7905279">,</span>&nbsp;<span class="string" id="7905281">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7905299">}</span><span class="op" id="7905300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905303">{</span><span class="string" id="7905304">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905324">,</span>&nbsp;<span class="string" id="7905326">&#34;./../g&#34;</span><span class="op" id="7905334">,</span>&nbsp;<span class="string" id="7905336">&#34;http://a/b/g&#34;</span><span class="op" id="7905350">}</span><span class="op" id="7905351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905354">{</span><span class="string" id="7905355">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905375">,</span>&nbsp;<span class="string" id="7905377">&#34;./g/.&#34;</span><span class="op" id="7905384">,</span>&nbsp;<span class="string" id="7905386">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7905403">}</span><span class="op" id="7905404">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905407">{</span><span class="string" id="7905408">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905428">,</span>&nbsp;<span class="string" id="7905430">&#34;g/./h&#34;</span><span class="op" id="7905437">,</span>&nbsp;<span class="string" id="7905439">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7905457">}</span><span class="op" id="7905458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905461">{</span><span class="string" id="7905462">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905482">,</span>&nbsp;<span class="string" id="7905484">&#34;g/../h&#34;</span><span class="op" id="7905492">,</span>&nbsp;<span class="string" id="7905494">&#34;http://a/b/c/h&#34;</span><span class="op" id="7905510">}</span><span class="op" id="7905511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905514">{</span><span class="string" id="7905515">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905535">,</span>&nbsp;<span class="string" id="7905537">&#34;g;x=1/./y&#34;</span><span class="op" id="7905548">,</span>&nbsp;<span class="string" id="7905550">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7905572">}</span><span class="op" id="7905573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905576">{</span><span class="string" id="7905577">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905597">,</span>&nbsp;<span class="string" id="7905599">&#34;g;x=1/../y&#34;</span><span class="op" id="7905611">,</span>&nbsp;<span class="string" id="7905613">&#34;http://a/b/c/y&#34;</span><span class="op" id="7905629">}</span><span class="op" id="7905630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905633">{</span><span class="string" id="7905634">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905654">,</span>&nbsp;<span class="string" id="7905656">&#34;g?y/./x&#34;</span><span class="op" id="7905665">,</span>&nbsp;<span class="string" id="7905667">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7905689">}</span><span class="op" id="7905690">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905693">{</span><span class="string" id="7905694">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905714">,</span>&nbsp;<span class="string" id="7905716">&#34;g?y/../x&#34;</span><span class="op" id="7905726">,</span>&nbsp;<span class="string" id="7905728">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7905751">}</span><span class="op" id="7905752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905755">{</span><span class="string" id="7905756">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905776">,</span>&nbsp;<span class="string" id="7905778">&#34;g#s/./x&#34;</span><span class="op" id="7905787">,</span>&nbsp;<span class="string" id="7905789">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7905811">}</span><span class="op" id="7905812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905815">{</span><span class="string" id="7905816">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7905836">,</span>&nbsp;<span class="string" id="7905838">&#34;g#s/../x&#34;</span><span class="op" id="7905848">,</span>&nbsp;<span class="string" id="7905850">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7905873">}</span><span class="op" id="7905874">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7905878">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905890">{</span><span class="string" id="7905891">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7905912">,</span>&nbsp;<span class="string" id="7905914">&#34;//g?q&#34;</span><span class="op" id="7905921">,</span>&nbsp;<span class="string" id="7905923">&#34;https://g?q&#34;</span><span class="op" id="7905936">}</span><span class="op" id="7905937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905940">{</span><span class="string" id="7905941">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7905962">,</span>&nbsp;<span class="string" id="7905964">&#34;//g#s&#34;</span><span class="op" id="7905971">,</span>&nbsp;<span class="string" id="7905973">&#34;https://g#s&#34;</span><span class="op" id="7905986">}</span><span class="op" id="7905987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7905990">{</span><span class="string" id="7905991">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7906012">,</span>&nbsp;<span class="string" id="7906014">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7906029">,</span>&nbsp;<span class="string" id="7906031">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7906052">}</span><span class="op" id="7906053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906056">{</span><span class="string" id="7906057">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7906078">,</span>&nbsp;<span class="string" id="7906080">&#34;?y&#34;</span><span class="op" id="7906084">,</span>&nbsp;<span class="string" id="7906086">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7906107">}</span><span class="op" id="7906108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906111">{</span><span class="string" id="7906112">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7906135">,</span>&nbsp;<span class="string" id="7906137">&#34;?y&#34;</span><span class="op" id="7906141">,</span>&nbsp;<span class="string" id="7906143">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7906164">}</span><span class="op" id="7906165">,</span><br>
<span class="lineno">700</span><span class="op" id="7906167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7906170">func</span>&nbsp;<span class="ident" id="7906175">TestResolveReference</span><span class="op" id="7906195">(</span><span class="ident" id="7906196">t</span>&nbsp;<span class="op" id="7906198">*</span><span class="ident" id="7906199">testing</span><span class="op" id="7906206">.</span><span class="ident" id="7906207">T</span><span class="op" id="7906208">)</span>&nbsp;<span class="op" id="7906210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906213">mustParse</span>&nbsp;<span class="op" id="7906223">:=</span>&nbsp;<span class="keyword" id="7906226">func</span><span class="op" id="7906230">(</span><span class="ident" id="7906231">url</span>&nbsp;<span class="builtintype" id="7906235">string</span><span class="op" id="7906241">)</span>&nbsp;<span class="op" id="7906243">*</span><span class="ident" id="7906244">URL</span>&nbsp;<span class="op" id="7906248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906252">u</span><span class="op" id="7906253">,</span>&nbsp;<span class="ident" id="7906255">err</span>&nbsp;<span class="op" id="7906259">:=</span>&nbsp;<span class="ident" id="7906262">Parse</span><span class="op" id="7906267">(</span><span class="ident" id="7906268">url</span><span class="op" id="7906271">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906275">if</span>&nbsp;<span class="ident" id="7906278">err</span>&nbsp;<span class="op" id="7906282">!=</span>&nbsp;<span class="ident" id="7906285">nil</span>&nbsp;<span class="op" id="7906289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906294">t</span><span class="op" id="7906295">.</span><span class="ident" id="7906296">Fatalf</span><span class="op" id="7906302">(</span><span class="string" id="7906303">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7906345">,</span>&nbsp;<span class="ident" id="7906347">url</span><span class="op" id="7906350">,</span>&nbsp;<span class="ident" id="7906352">err</span><span class="op" id="7906355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906363">return</span>&nbsp;<span class="ident" id="7906370">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906373">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906376">opaque</span>&nbsp;<span class="op" id="7906383">:=</span>&nbsp;<span class="op" id="7906386">&amp;</span><span class="ident" id="7906387">URL</span><span class="op" id="7906390">{</span><span class="ident" id="7906391">Scheme</span><span class="op" id="7906397">:</span>&nbsp;<span class="string" id="7906399">&#34;scheme&#34;</span><span class="op" id="7906407">,</span>&nbsp;<span class="ident" id="7906409">Opaque</span><span class="op" id="7906415">:</span>&nbsp;<span class="string" id="7906417">&#34;opaque&#34;</span><span class="op" id="7906425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906428">for</span>&nbsp;<span class="ident" id="7906432">_</span><span class="op" id="7906433">,</span>&nbsp;<span class="ident" id="7906435">test</span>&nbsp;<span class="op" id="7906440">:=</span>&nbsp;<span class="keyword" id="7906443">range</span>&nbsp;<span class="ident" id="7906449">resolveReferenceTests</span>&nbsp;<span class="op" id="7906471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906475">base</span>&nbsp;<span class="op" id="7906480">:=</span>&nbsp;<span class="ident" id="7906483">mustParse</span><span class="op" id="7906492">(</span><span class="ident" id="7906493">test</span><span class="op" id="7906497">.</span><span class="ident" id="7906498">base</span><span class="op" id="7906502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906506">rel</span>&nbsp;<span class="op" id="7906510">:=</span>&nbsp;<span class="ident" id="7906513">mustParse</span><span class="op" id="7906522">(</span><span class="ident" id="7906523">test</span><span class="op" id="7906527">.</span><span class="ident" id="7906528">rel</span><span class="op" id="7906531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906535">url</span>&nbsp;<span class="op" id="7906539">:=</span>&nbsp;<span class="ident" id="7906542">base</span><span class="op" id="7906546">.</span><span class="ident" id="7906547">ResolveReference</span><span class="op" id="7906563">(</span><span class="ident" id="7906564">rel</span><span class="op" id="7906567">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906571">if</span>&nbsp;<span class="ident" id="7906574">url</span><span class="op" id="7906577">.</span><span class="ident" id="7906578">String</span><span class="op" id="7906584">(</span><span class="op" id="7906585">)</span>&nbsp;<span class="op" id="7906587">!=</span>&nbsp;<span class="ident" id="7906590">test</span><span class="op" id="7906594">.</span><span class="ident" id="7906595">expected</span>&nbsp;<span class="op" id="7906604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906609">t</span><span class="op" id="7906610">.</span><span class="ident" id="7906611">Errorf</span><span class="op" id="7906617">(</span><span class="string" id="7906618">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7906662">,</span>&nbsp;<span class="ident" id="7906664">test</span><span class="op" id="7906668">.</span><span class="ident" id="7906669">base</span><span class="op" id="7906673">,</span>&nbsp;<span class="ident" id="7906675">test</span><span class="op" id="7906679">.</span><span class="ident" id="7906680">rel</span><span class="op" id="7906683">,</span>&nbsp;<span class="ident" id="7906685">test</span><span class="op" id="7906689">.</span><span class="ident" id="7906690">expected</span><span class="op" id="7906698">,</span>&nbsp;<span class="ident" id="7906700">url</span><span class="op" id="7906703">.</span><span class="ident" id="7906704">String</span><span class="op" id="7906710">(</span><span class="op" id="7906711">)</span><span class="op" id="7906712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7906720">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906765">if</span>&nbsp;<span class="ident" id="7906768">base</span>&nbsp;<span class="op" id="7906773">==</span>&nbsp;<span class="ident" id="7906776">url</span>&nbsp;<span class="op" id="7906780">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906785">t</span><span class="op" id="7906786">.</span><span class="ident" id="7906787">Errorf</span><span class="op" id="7906793">(</span><span class="string" id="7906794">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7906853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7906857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7906861">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906900">url</span><span class="op" id="7906903">,</span>&nbsp;<span class="ident" id="7906905">err</span>&nbsp;<span class="op" id="7906909">:=</span>&nbsp;<span class="ident" id="7906912">base</span><span class="op" id="7906916">.</span><span class="ident" id="7906917">Parse</span><span class="op" id="7906922">(</span><span class="ident" id="7906923">test</span><span class="op" id="7906927">.</span><span class="ident" id="7906928">rel</span><span class="op" id="7906931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7906935">if</span>&nbsp;<span class="ident" id="7906938">err</span>&nbsp;<span class="op" id="7906942">!=</span>&nbsp;<span class="ident" id="7906945">nil</span>&nbsp;<span class="op" id="7906949">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7906954">t</span><span class="op" id="7906955">.</span><span class="ident" id="7906956">Errorf</span><span class="op" id="7906962">(</span><span class="string" id="7906963">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7906993">,</span>&nbsp;<span class="ident" id="7906995">test</span><span class="op" id="7906999">.</span><span class="ident" id="7907000">base</span><span class="op" id="7907004">,</span>&nbsp;<span class="ident" id="7907006">test</span><span class="op" id="7907010">.</span><span class="ident" id="7907011">rel</span><span class="op" id="7907014">,</span>&nbsp;<span class="ident" id="7907016">err</span><span class="op" id="7907019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907023">}</span>&nbsp;<span class="keyword" id="7907025">else</span>&nbsp;<span class="keyword" id="7907030">if</span>&nbsp;<span class="ident" id="7907033">url</span><span class="op" id="7907036">.</span><span class="ident" id="7907037">String</span><span class="op" id="7907043">(</span><span class="op" id="7907044">)</span>&nbsp;<span class="op" id="7907046">!=</span>&nbsp;<span class="ident" id="7907049">test</span><span class="op" id="7907053">.</span><span class="ident" id="7907054">expected</span>&nbsp;<span class="op" id="7907063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907068">t</span><span class="op" id="7907069">.</span><span class="ident" id="7907070">Errorf</span><span class="op" id="7907076">(</span><span class="string" id="7907077">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7907110">,</span>&nbsp;<span class="ident" id="7907112">test</span><span class="op" id="7907116">.</span><span class="ident" id="7907117">base</span><span class="op" id="7907121">,</span>&nbsp;<span class="ident" id="7907123">test</span><span class="op" id="7907127">.</span><span class="ident" id="7907128">rel</span><span class="op" id="7907131">,</span>&nbsp;<span class="ident" id="7907133">test</span><span class="op" id="7907137">.</span><span class="ident" id="7907138">expected</span><span class="op" id="7907146">,</span>&nbsp;<span class="ident" id="7907148">url</span><span class="op" id="7907151">.</span><span class="ident" id="7907152">String</span><span class="op" id="7907158">(</span><span class="op" id="7907159">)</span><span class="op" id="7907160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907164">}</span>&nbsp;<span class="keyword" id="7907166">else</span>&nbsp;<span class="keyword" id="7907171">if</span>&nbsp;<span class="ident" id="7907174">base</span>&nbsp;<span class="op" id="7907179">==</span>&nbsp;<span class="ident" id="7907182">url</span>&nbsp;<span class="op" id="7907186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7907191">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907257">t</span><span class="op" id="7907258">.</span><span class="ident" id="7907259">Errorf</span><span class="op" id="7907265">(</span><span class="string" id="7907266">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7907314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7907322">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907357">url</span>&nbsp;<span class="op" id="7907361">=</span>&nbsp;<span class="ident" id="7907363">base</span><span class="op" id="7907367">.</span><span class="ident" id="7907368">ResolveReference</span><span class="op" id="7907384">(</span><span class="ident" id="7907385">opaque</span><span class="op" id="7907391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907395">if</span>&nbsp;<span class="op" id="7907398">*</span><span class="ident" id="7907399">url</span>&nbsp;<span class="op" id="7907403">!=</span>&nbsp;<span class="op" id="7907406">*</span><span class="ident" id="7907407">opaque</span>&nbsp;<span class="op" id="7907414">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907419">t</span><span class="op" id="7907420">.</span><span class="ident" id="7907421">Errorf</span><span class="op" id="7907427">(</span><span class="string" id="7907428">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7907494">,</span>&nbsp;<span class="ident" id="7907496">url</span><span class="op" id="7907499">,</span>&nbsp;<span class="ident" id="7907501">opaque</span><span class="op" id="7907507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7907515">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907573">url</span><span class="op" id="7907576">,</span>&nbsp;<span class="ident" id="7907578">err</span>&nbsp;<span class="op" id="7907582">=</span>&nbsp;<span class="ident" id="7907584">base</span><span class="op" id="7907588">.</span><span class="ident" id="7907589">Parse</span><span class="op" id="7907594">(</span><span class="string" id="7907595">&#34;scheme:opaque&#34;</span><span class="op" id="7907610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907614">if</span>&nbsp;<span class="ident" id="7907617">err</span>&nbsp;<span class="op" id="7907621">!=</span>&nbsp;<span class="ident" id="7907624">nil</span>&nbsp;<span class="op" id="7907628">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907633">t</span><span class="op" id="7907634">.</span><span class="ident" id="7907635">Errorf</span><span class="op" id="7907641">(</span><span class="string" id="7907642">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7907685">,</span>&nbsp;<span class="ident" id="7907687">test</span><span class="op" id="7907691">.</span><span class="ident" id="7907692">base</span><span class="op" id="7907696">,</span>&nbsp;<span class="ident" id="7907698">err</span><span class="op" id="7907701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907705">}</span>&nbsp;<span class="keyword" id="7907707">else</span>&nbsp;<span class="keyword" id="7907712">if</span>&nbsp;<span class="op" id="7907715">*</span><span class="ident" id="7907716">url</span>&nbsp;<span class="op" id="7907720">!=</span>&nbsp;<span class="op" id="7907723">*</span><span class="ident" id="7907724">opaque</span>&nbsp;<span class="op" id="7907731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907736">t</span><span class="op" id="7907737">.</span><span class="ident" id="7907738">Errorf</span><span class="op" id="7907744">(</span><span class="string" id="7907745">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7907800">,</span>&nbsp;<span class="ident" id="7907802">url</span><span class="op" id="7907805">,</span>&nbsp;<span class="ident" id="7907807">opaque</span><span class="op" id="7907813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907817">}</span>&nbsp;<span class="keyword" id="7907819">else</span>&nbsp;<span class="keyword" id="7907824">if</span>&nbsp;<span class="ident" id="7907827">base</span>&nbsp;<span class="op" id="7907832">==</span>&nbsp;<span class="ident" id="7907835">url</span>&nbsp;<span class="op" id="7907839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7907844">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907897">t</span><span class="op" id="7907898">.</span><span class="ident" id="7907899">Errorf</span><span class="op" id="7907905">(</span><span class="string" id="7907906">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7907954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907961">}</span><br>
<span class="lineno"></span><span class="op" id="7907963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7907966">func</span>&nbsp;<span class="ident" id="7907971">TestQueryValues</span><span class="op" id="7907986">(</span><span class="ident" id="7907987">t</span>&nbsp;<span class="op" id="7907989">*</span><span class="ident" id="7907990">testing</span><span class="op" id="7907997">.</span><span class="ident" id="7907998">T</span><span class="op" id="7907999">)</span>&nbsp;<span class="op" id="7908001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908004">u</span><span class="op" id="7908005">,</span>&nbsp;<span class="ident" id="7908007">_</span>&nbsp;<span class="op" id="7908009">:=</span>&nbsp;<span class="ident" id="7908012">Parse</span><span class="op" id="7908017">(</span><span class="string" id="7908018">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7908052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908055">v</span>&nbsp;<span class="op" id="7908057">:=</span>&nbsp;<span class="ident" id="7908060">u</span><span class="op" id="7908061">.</span><span class="ident" id="7908062">Query</span><span class="op" id="7908067">(</span><span class="op" id="7908068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908071">if</span>&nbsp;<span class="builtinfunc" id="7908074">len</span><span class="op" id="7908077">(</span><span class="ident" id="7908078">v</span><span class="op" id="7908079">)</span>&nbsp;<span class="op" id="7908081">!=</span>&nbsp;<span class="num" id="7908084">2</span>&nbsp;<span class="op" id="7908086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908090">t</span><span class="op" id="7908091">.</span><span class="ident" id="7908092">Errorf</span><span class="op" id="7908098">(</span><span class="string" id="7908099">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7908136">,</span>&nbsp;<span class="builtinfunc" id="7908138">len</span><span class="op" id="7908141">(</span><span class="ident" id="7908142">v</span><span class="op" id="7908143">)</span><span class="op" id="7908144">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908150">if</span>&nbsp;<span class="ident" id="7908153">g</span><span class="op" id="7908154">,</span>&nbsp;<span class="ident" id="7908156">e</span>&nbsp;<span class="op" id="7908158">:=</span>&nbsp;<span class="ident" id="7908161">v</span><span class="op" id="7908162">.</span><span class="ident" id="7908163">Get</span><span class="op" id="7908166">(</span><span class="string" id="7908167">&#34;foo&#34;</span><span class="op" id="7908172">)</span><span class="op" id="7908173">,</span>&nbsp;<span class="string" id="7908175">&#34;bar&#34;</span><span class="op" id="7908180">;</span>&nbsp;<span class="ident" id="7908182">g</span>&nbsp;<span class="op" id="7908184">!=</span>&nbsp;<span class="ident" id="7908187">e</span>&nbsp;<span class="op" id="7908189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908193">t</span><span class="op" id="7908194">.</span><span class="ident" id="7908195">Errorf</span><span class="op" id="7908201">(</span><span class="string" id="7908202">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7908226">,</span>&nbsp;<span class="ident" id="7908228">g</span><span class="op" id="7908229">,</span>&nbsp;<span class="ident" id="7908231">e</span><span class="op" id="7908232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7908238">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908258">if</span>&nbsp;<span class="ident" id="7908261">g</span><span class="op" id="7908262">,</span>&nbsp;<span class="ident" id="7908264">e</span>&nbsp;<span class="op" id="7908266">:=</span>&nbsp;<span class="ident" id="7908269">v</span><span class="op" id="7908270">.</span><span class="ident" id="7908271">Get</span><span class="op" id="7908274">(</span><span class="string" id="7908275">&#34;Foo&#34;</span><span class="op" id="7908280">)</span><span class="op" id="7908281">,</span>&nbsp;<span class="string" id="7908283">&#34;&#34;</span><span class="op" id="7908285">;</span>&nbsp;<span class="ident" id="7908287">g</span>&nbsp;<span class="op" id="7908289">!=</span>&nbsp;<span class="ident" id="7908292">e</span>&nbsp;<span class="op" id="7908294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908298">t</span><span class="op" id="7908299">.</span><span class="ident" id="7908300">Errorf</span><span class="op" id="7908306">(</span><span class="string" id="7908307">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7908331">,</span>&nbsp;<span class="ident" id="7908333">g</span><span class="op" id="7908334">,</span>&nbsp;<span class="ident" id="7908336">e</span><span class="op" id="7908337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908343">if</span>&nbsp;<span class="ident" id="7908346">g</span><span class="op" id="7908347">,</span>&nbsp;<span class="ident" id="7908349">e</span>&nbsp;<span class="op" id="7908351">:=</span>&nbsp;<span class="ident" id="7908354">v</span><span class="op" id="7908355">.</span><span class="ident" id="7908356">Get</span><span class="op" id="7908359">(</span><span class="string" id="7908360">&#34;bar&#34;</span><span class="op" id="7908365">)</span><span class="op" id="7908366">,</span>&nbsp;<span class="string" id="7908368">&#34;1&#34;</span><span class="op" id="7908371">;</span>&nbsp;<span class="ident" id="7908373">g</span>&nbsp;<span class="op" id="7908375">!=</span>&nbsp;<span class="ident" id="7908378">e</span>&nbsp;<span class="op" id="7908380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908384">t</span><span class="op" id="7908385">.</span><span class="ident" id="7908386">Errorf</span><span class="op" id="7908392">(</span><span class="string" id="7908393">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7908417">,</span>&nbsp;<span class="ident" id="7908419">g</span><span class="op" id="7908420">,</span>&nbsp;<span class="ident" id="7908422">e</span><span class="op" id="7908423">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908429">if</span>&nbsp;<span class="ident" id="7908432">g</span><span class="op" id="7908433">,</span>&nbsp;<span class="ident" id="7908435">e</span>&nbsp;<span class="op" id="7908437">:=</span>&nbsp;<span class="ident" id="7908440">v</span><span class="op" id="7908441">.</span><span class="ident" id="7908442">Get</span><span class="op" id="7908445">(</span><span class="string" id="7908446">&#34;baz&#34;</span><span class="op" id="7908451">)</span><span class="op" id="7908452">,</span>&nbsp;<span class="string" id="7908454">&#34;&#34;</span><span class="op" id="7908456">;</span>&nbsp;<span class="ident" id="7908458">g</span>&nbsp;<span class="op" id="7908460">!=</span>&nbsp;<span class="ident" id="7908463">e</span>&nbsp;<span class="op" id="7908465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908469">t</span><span class="op" id="7908470">.</span><span class="ident" id="7908471">Errorf</span><span class="op" id="7908477">(</span><span class="string" id="7908478">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7908502">,</span>&nbsp;<span class="ident" id="7908504">g</span><span class="op" id="7908505">,</span>&nbsp;<span class="ident" id="7908507">e</span><span class="op" id="7908508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908514">v</span><span class="op" id="7908515">.</span><span class="ident" id="7908516">Del</span><span class="op" id="7908519">(</span><span class="string" id="7908520">&#34;bar&#34;</span><span class="op" id="7908525">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908528">if</span>&nbsp;<span class="ident" id="7908531">g</span><span class="op" id="7908532">,</span>&nbsp;<span class="ident" id="7908534">e</span>&nbsp;<span class="op" id="7908536">:=</span>&nbsp;<span class="ident" id="7908539">v</span><span class="op" id="7908540">.</span><span class="ident" id="7908541">Get</span><span class="op" id="7908544">(</span><span class="string" id="7908545">&#34;bar&#34;</span><span class="op" id="7908550">)</span><span class="op" id="7908551">,</span>&nbsp;<span class="string" id="7908553">&#34;&#34;</span><span class="op" id="7908555">;</span>&nbsp;<span class="ident" id="7908557">g</span>&nbsp;<span class="op" id="7908559">!=</span>&nbsp;<span class="ident" id="7908562">e</span>&nbsp;<span class="op" id="7908564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908568">t</span><span class="op" id="7908569">.</span><span class="ident" id="7908570">Errorf</span><span class="op" id="7908576">(</span><span class="string" id="7908577">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7908608">,</span>&nbsp;<span class="ident" id="7908610">g</span><span class="op" id="7908611">,</span>&nbsp;<span class="ident" id="7908613">e</span><span class="op" id="7908614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908617">}</span><br>
<span class="lineno"></span><span class="op" id="7908619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7908622">type</span>&nbsp;<span class="ident" id="7908627">parseTest</span>&nbsp;<span class="keyword" id="7908637">struct</span>&nbsp;<span class="op" id="7908644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908647">query</span>&nbsp;<span class="builtintype" id="7908653">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908661">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7908667">Values</span><br>
<span class="lineno"></span><span class="op" id="7908674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7908677">var</span>&nbsp;<span class="ident" id="7908681">parseTests</span>&nbsp;<span class="op" id="7908692">=</span>&nbsp;<span class="op" id="7908694">[</span><span class="op" id="7908695">]</span><span class="ident" id="7908696">parseTest</span><span class="op" id="7908705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908712">query</span><span class="op" id="7908717">:</span>&nbsp;<span class="string" id="7908719">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7908728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908732">out</span><span class="op" id="7908735">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7908739">Values</span><span class="op" id="7908745">{</span><span class="string" id="7908746">&#34;a&#34;</span><span class="op" id="7908749">:</span>&nbsp;<span class="op" id="7908751">[</span><span class="op" id="7908752">]</span><span class="builtintype" id="7908753">string</span><span class="op" id="7908759">{</span><span class="string" id="7908760">&#34;1&#34;</span><span class="op" id="7908763">}</span><span class="op" id="7908764">,</span>&nbsp;<span class="string" id="7908766">&#34;b&#34;</span><span class="op" id="7908769">:</span>&nbsp;<span class="op" id="7908771">[</span><span class="op" id="7908772">]</span><span class="builtintype" id="7908773">string</span><span class="op" id="7908779">{</span><span class="string" id="7908780">&#34;2&#34;</span><span class="op" id="7908783">}</span><span class="op" id="7908784">}</span><span class="op" id="7908785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908788">}</span><span class="op" id="7908789">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908796">query</span><span class="op" id="7908801">:</span>&nbsp;<span class="string" id="7908803">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7908821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908825">out</span><span class="op" id="7908828">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7908832">Values</span><span class="op" id="7908838">{</span><span class="string" id="7908839">&#34;a&#34;</span><span class="op" id="7908842">:</span>&nbsp;<span class="op" id="7908844">[</span><span class="op" id="7908845">]</span><span class="builtintype" id="7908846">string</span><span class="op" id="7908852">{</span><span class="string" id="7908853">&#34;1&#34;</span><span class="op" id="7908856">,</span>&nbsp;<span class="string" id="7908858">&#34;2&#34;</span><span class="op" id="7908861">,</span>&nbsp;<span class="string" id="7908863">&#34;banana&#34;</span><span class="op" id="7908871">}</span><span class="op" id="7908872">}</span><span class="op" id="7908873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908876">}</span><span class="op" id="7908877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908880">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908884">query</span><span class="op" id="7908889">:</span>&nbsp;<span class="string" id="7908891">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7908916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908920">out</span><span class="op" id="7908923">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7908927">Values</span><span class="op" id="7908933">{</span><span class="string" id="7908934">&#34;ascii&#34;</span><span class="op" id="7908941">:</span>&nbsp;<span class="op" id="7908943">[</span><span class="op" id="7908944">]</span><span class="builtintype" id="7908945">string</span><span class="op" id="7908951">{</span><span class="string" id="7908952">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7908965">}</span><span class="op" id="7908966">}</span><span class="op" id="7908967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908970">}</span><span class="op" id="7908971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908978">query</span><span class="op" id="7908983">:</span>&nbsp;<span class="string" id="7908985">&#34;a=1;b=2&#34;</span><span class="op" id="7908994">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908998">out</span><span class="op" id="7909001">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7909005">Values</span><span class="op" id="7909011">{</span><span class="string" id="7909012">&#34;a&#34;</span><span class="op" id="7909015">:</span>&nbsp;<span class="op" id="7909017">[</span><span class="op" id="7909018">]</span><span class="builtintype" id="7909019">string</span><span class="op" id="7909025">{</span><span class="string" id="7909026">&#34;1&#34;</span><span class="op" id="7909029">}</span><span class="op" id="7909030">,</span>&nbsp;<span class="string" id="7909032">&#34;b&#34;</span><span class="op" id="7909035">:</span>&nbsp;<span class="op" id="7909037">[</span><span class="op" id="7909038">]</span><span class="builtintype" id="7909039">string</span><span class="op" id="7909045">{</span><span class="string" id="7909046">&#34;2&#34;</span><span class="op" id="7909049">}</span><span class="op" id="7909050">}</span><span class="op" id="7909051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909054">}</span><span class="op" id="7909055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909062">query</span><span class="op" id="7909067">:</span>&nbsp;<span class="string" id="7909069">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7909087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909091">out</span><span class="op" id="7909094">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7909098">Values</span><span class="op" id="7909104">{</span><span class="string" id="7909105">&#34;a&#34;</span><span class="op" id="7909108">:</span>&nbsp;<span class="op" id="7909110">[</span><span class="op" id="7909111">]</span><span class="builtintype" id="7909112">string</span><span class="op" id="7909118">{</span><span class="string" id="7909119">&#34;1&#34;</span><span class="op" id="7909122">,</span>&nbsp;<span class="string" id="7909124">&#34;2&#34;</span><span class="op" id="7909127">,</span>&nbsp;<span class="string" id="7909129">&#34;banana&#34;</span><span class="op" id="7909137">}</span><span class="op" id="7909138">}</span><span class="op" id="7909139">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909142">}</span><span class="op" id="7909143">,</span><br>
<span class="lineno"></span><span class="op" id="7909145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909148">func</span>&nbsp;<span class="ident" id="7909153">TestParseQuery</span><span class="op" id="7909167">(</span><span class="ident" id="7909168">t</span>&nbsp;<span class="op" id="7909170">*</span><span class="ident" id="7909171">testing</span><span class="op" id="7909178">.</span><span class="ident" id="7909179">T</span><span class="op" id="7909180">)</span>&nbsp;<span class="op" id="7909182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909185">for</span>&nbsp;<span class="ident" id="7909189">i</span><span class="op" id="7909190">,</span>&nbsp;<span class="ident" id="7909192">test</span>&nbsp;<span class="op" id="7909197">:=</span>&nbsp;<span class="keyword" id="7909200">range</span>&nbsp;<span class="ident" id="7909206">parseTests</span>&nbsp;<span class="op" id="7909217">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909221">form</span><span class="op" id="7909225">,</span>&nbsp;<span class="ident" id="7909227">err</span>&nbsp;<span class="op" id="7909231">:=</span>&nbsp;<span class="ident" id="7909234">ParseQuery</span><span class="op" id="7909244">(</span><span class="ident" id="7909245">test</span><span class="op" id="7909249">.</span><span class="ident" id="7909250">query</span><span class="op" id="7909255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909259">if</span>&nbsp;<span class="ident" id="7909262">err</span>&nbsp;<span class="op" id="7909266">!=</span>&nbsp;<span class="ident" id="7909269">nil</span>&nbsp;<span class="op" id="7909273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909278">t</span><span class="op" id="7909279">.</span><span class="ident" id="7909280">Errorf</span><span class="op" id="7909286">(</span><span class="string" id="7909287">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7909318">,</span>&nbsp;<span class="ident" id="7909320">i</span><span class="op" id="7909321">,</span>&nbsp;<span class="ident" id="7909323">err</span><span class="op" id="7909326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909331">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909342">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909346">if</span>&nbsp;<span class="builtinfunc" id="7909349">len</span><span class="op" id="7909352">(</span><span class="ident" id="7909353">form</span><span class="op" id="7909357">)</span>&nbsp;<span class="op" id="7909359">!=</span>&nbsp;<span class="builtinfunc" id="7909362">len</span><span class="op" id="7909365">(</span><span class="ident" id="7909366">test</span><span class="op" id="7909370">.</span><span class="ident" id="7909371">out</span><span class="op" id="7909374">)</span>&nbsp;<span class="op" id="7909376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909381">t</span><span class="op" id="7909382">.</span><span class="ident" id="7909383">Errorf</span><span class="op" id="7909389">(</span><span class="string" id="7909390">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7909424">,</span>&nbsp;<span class="ident" id="7909426">i</span><span class="op" id="7909427">,</span>&nbsp;<span class="builtinfunc" id="7909429">len</span><span class="op" id="7909432">(</span><span class="ident" id="7909433">form</span><span class="op" id="7909437">)</span><span class="op" id="7909438">,</span>&nbsp;<span class="builtinfunc" id="7909440">len</span><span class="op" id="7909443">(</span><span class="ident" id="7909444">test</span><span class="op" id="7909448">.</span><span class="ident" id="7909449">out</span><span class="op" id="7909452">)</span><span class="op" id="7909453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909461">for</span>&nbsp;<span class="ident" id="7909465">k</span><span class="op" id="7909466">,</span>&nbsp;<span class="ident" id="7909468">evs</span>&nbsp;<span class="op" id="7909472">:=</span>&nbsp;<span class="keyword" id="7909475">range</span>&nbsp;<span class="ident" id="7909481">test</span><span class="op" id="7909485">.</span><span class="ident" id="7909486">out</span>&nbsp;<span class="op" id="7909490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909495">vs</span><span class="op" id="7909497">,</span>&nbsp;<span class="ident" id="7909499">ok</span>&nbsp;<span class="op" id="7909502">:=</span>&nbsp;<span class="ident" id="7909505">form</span><span class="op" id="7909509">[</span><span class="ident" id="7909510">k</span><span class="op" id="7909511">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909516">if</span>&nbsp;<span class="op" id="7909519">!</span><span class="ident" id="7909520">ok</span>&nbsp;<span class="op" id="7909523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909529">t</span><span class="op" id="7909530">.</span><span class="ident" id="7909531">Errorf</span><span class="op" id="7909537">(</span><span class="string" id="7909538">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7909563">,</span>&nbsp;<span class="ident" id="7909565">i</span><span class="op" id="7909566">,</span>&nbsp;<span class="ident" id="7909568">k</span><span class="op" id="7909569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909592">if</span>&nbsp;<span class="builtinfunc" id="7909595">len</span><span class="op" id="7909598">(</span><span class="ident" id="7909599">vs</span><span class="op" id="7909601">)</span>&nbsp;<span class="op" id="7909603">!=</span>&nbsp;<span class="builtinfunc" id="7909606">len</span><span class="op" id="7909609">(</span><span class="ident" id="7909610">evs</span><span class="op" id="7909613">)</span>&nbsp;<span class="op" id="7909615">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909621">t</span><span class="op" id="7909622">.</span><span class="ident" id="7909623">Errorf</span><span class="op" id="7909629">(</span><span class="string" id="7909630">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7909668">,</span>&nbsp;<span class="ident" id="7909670">i</span><span class="op" id="7909671">,</span>&nbsp;<span class="ident" id="7909673">k</span><span class="op" id="7909674">,</span>&nbsp;<span class="builtinfunc" id="7909676">len</span><span class="op" id="7909679">(</span><span class="ident" id="7909680">vs</span><span class="op" id="7909682">)</span><span class="op" id="7909683">,</span>&nbsp;<span class="builtinfunc" id="7909685">len</span><span class="op" id="7909688">(</span><span class="ident" id="7909689">evs</span><span class="op" id="7909692">)</span><span class="op" id="7909693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909699">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909716">for</span>&nbsp;<span class="ident" id="7909720">j</span><span class="op" id="7909721">,</span>&nbsp;<span class="ident" id="7909723">ev</span>&nbsp;<span class="op" id="7909726">:=</span>&nbsp;<span class="keyword" id="7909729">range</span>&nbsp;<span class="ident" id="7909735">evs</span>&nbsp;<span class="op" id="7909739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909745">if</span>&nbsp;<span class="ident" id="7909748">v</span>&nbsp;<span class="op" id="7909750">:=</span>&nbsp;<span class="ident" id="7909753">vs</span><span class="op" id="7909755">[</span><span class="ident" id="7909756">j</span><span class="op" id="7909757">]</span><span class="op" id="7909758">;</span>&nbsp;<span class="ident" id="7909760">v</span>&nbsp;<span class="op" id="7909762">!=</span>&nbsp;<span class="ident" id="7909765">ev</span>&nbsp;<span class="op" id="7909768">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909775">t</span><span class="op" id="7909776">.</span><span class="ident" id="7909777">Errorf</span><span class="op" id="7909783">(</span><span class="string" id="7909784">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7909821">,</span>&nbsp;<span class="ident" id="7909823">i</span><span class="op" id="7909824">,</span>&nbsp;<span class="ident" id="7909826">k</span><span class="op" id="7909827">,</span>&nbsp;<span class="ident" id="7909829">j</span><span class="op" id="7909830">,</span>&nbsp;<span class="ident" id="7909832">v</span><span class="op" id="7909833">,</span>&nbsp;<span class="ident" id="7909835">ev</span><span class="op" id="7909837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909855">}</span><br>
<span class="lineno">830</span><span class="op" id="7909857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909860">type</span>&nbsp;<span class="ident" id="7909865">RequestURITest</span>&nbsp;<span class="keyword" id="7909880">struct</span>&nbsp;<span class="op" id="7909887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909890">url</span>&nbsp;<span class="op" id="7909894">*</span><span class="ident" id="7909895">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909900">out</span>&nbsp;<span class="builtintype" id="7909904">string</span><br>
<span class="lineno">835</span><span class="op" id="7909911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909914">var</span>&nbsp;<span class="ident" id="7909918">requritests</span>&nbsp;<span class="op" id="7909930">=</span>&nbsp;<span class="op" id="7909932">[</span><span class="op" id="7909933">]</span><span class="ident" id="7909934">RequestURITest</span><span class="op" id="7909948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909955">&amp;</span><span class="ident" id="7909956">URL</span><span class="op" id="7909959">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909964">Scheme</span><span class="op" id="7909970">:</span>&nbsp;<span class="string" id="7909972">&#34;http&#34;</span><span class="op" id="7909978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909983">Host</span><span class="op" id="7909987">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7909991">&#34;example.com&#34;</span><span class="op" id="7910004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910009">Path</span><span class="op" id="7910013">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910017">&#34;&#34;</span><span class="op" id="7910019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910023">}</span><span class="op" id="7910024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910028">&#34;/&#34;</span><span class="op" id="7910031">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910034">}</span><span class="op" id="7910035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910042">&amp;</span><span class="ident" id="7910043">URL</span><span class="op" id="7910046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910051">Scheme</span><span class="op" id="7910057">:</span>&nbsp;<span class="string" id="7910059">&#34;http&#34;</span><span class="op" id="7910065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910070">Host</span><span class="op" id="7910074">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910078">&#34;example.com&#34;</span><span class="op" id="7910091">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910096">Path</span><span class="op" id="7910100">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910104">&#34;/a&nbsp;b&#34;</span><span class="op" id="7910110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910114">}</span><span class="op" id="7910115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910119">&#34;/a%20b&#34;</span><span class="op" id="7910127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910130">}</span><span class="op" id="7910131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7910134">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910174">&amp;</span><span class="ident" id="7910175">URL</span><span class="op" id="7910178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910183">Scheme</span><span class="op" id="7910189">:</span>&nbsp;<span class="string" id="7910191">&#34;http&#34;</span><span class="op" id="7910197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910202">Host</span><span class="op" id="7910206">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910210">&#34;example.com&#34;</span><span class="op" id="7910223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910228">Opaque</span><span class="op" id="7910234">:</span>&nbsp;<span class="string" id="7910236">&#34;/%2F/%2F/&#34;</span><span class="op" id="7910247">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910251">}</span><span class="op" id="7910252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910256">&#34;/%2F/%2F/&#34;</span><span class="op" id="7910267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910270">}</span><span class="op" id="7910271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7910274">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910310">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910314">&amp;</span><span class="ident" id="7910315">URL</span><span class="op" id="7910318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910323">Scheme</span><span class="op" id="7910329">:</span>&nbsp;<span class="string" id="7910331">&#34;http&#34;</span><span class="op" id="7910337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910342">Host</span><span class="op" id="7910346">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910350">&#34;example.com&#34;</span><span class="op" id="7910363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910368">Opaque</span><span class="op" id="7910374">:</span>&nbsp;<span class="string" id="7910376">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7910406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910410">}</span><span class="op" id="7910411">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910415">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7910450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910453">}</span><span class="op" id="7910454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910461">&amp;</span><span class="ident" id="7910462">URL</span><span class="op" id="7910465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910470">Scheme</span><span class="op" id="7910476">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910480">&#34;http&#34;</span><span class="op" id="7910486">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910491">Host</span><span class="op" id="7910495">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7910501">&#34;example.com&#34;</span><span class="op" id="7910514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910519">Path</span><span class="op" id="7910523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7910529">&#34;/a&nbsp;b&#34;</span><span class="op" id="7910535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910540">RawQuery</span><span class="op" id="7910548">:</span>&nbsp;<span class="string" id="7910550">&#34;q=go+language&#34;</span><span class="op" id="7910565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910569">}</span><span class="op" id="7910570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910574">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7910596">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910599">}</span><span class="op" id="7910600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910607">&amp;</span><span class="ident" id="7910608">URL</span><span class="op" id="7910611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910616">Scheme</span><span class="op" id="7910622">:</span>&nbsp;<span class="string" id="7910624">&#34;myschema&#34;</span><span class="op" id="7910634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910639">Opaque</span><span class="op" id="7910645">:</span>&nbsp;<span class="string" id="7910647">&#34;opaque&#34;</span><span class="op" id="7910655">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910659">}</span><span class="op" id="7910660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910664">&#34;opaque&#34;</span><span class="op" id="7910672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910675">}</span><span class="op" id="7910676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910683">&amp;</span><span class="ident" id="7910684">URL</span><span class="op" id="7910687">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910692">Scheme</span><span class="op" id="7910698">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910702">&#34;myschema&#34;</span><span class="op" id="7910712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910717">Opaque</span><span class="op" id="7910723">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7910727">&#34;opaque&#34;</span><span class="op" id="7910735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910740">RawQuery</span><span class="op" id="7910748">:</span>&nbsp;<span class="string" id="7910750">&#34;q=go+language&#34;</span><span class="op" id="7910765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910769">}</span><span class="op" id="7910770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910774">&#34;opaque?q=go+language&#34;</span><span class="op" id="7910796">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910799">}</span><span class="op" id="7910800">,</span><br>
<span class="lineno"></span><span class="op" id="7910802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910805">func</span>&nbsp;<span class="ident" id="7910810">TestRequestURI</span><span class="op" id="7910824">(</span><span class="ident" id="7910825">t</span>&nbsp;<span class="op" id="7910827">*</span><span class="ident" id="7910828">testing</span><span class="op" id="7910835">.</span><span class="ident" id="7910836">T</span><span class="op" id="7910837">)</span>&nbsp;<span class="op" id="7910839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910842">for</span>&nbsp;<span class="ident" id="7910846">_</span><span class="op" id="7910847">,</span>&nbsp;<span class="ident" id="7910849">tt</span>&nbsp;<span class="op" id="7910852">:=</span>&nbsp;<span class="keyword" id="7910855">range</span>&nbsp;<span class="ident" id="7910861">requritests</span>&nbsp;<span class="op" id="7910873">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910877">s</span>&nbsp;<span class="op" id="7910879">:=</span>&nbsp;<span class="ident" id="7910882">tt</span><span class="op" id="7910884">.</span><span class="ident" id="7910885">url</span><span class="op" id="7910888">.</span><span class="ident" id="7910889">RequestURI</span><span class="op" id="7910899">(</span><span class="op" id="7910900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910904">if</span>&nbsp;<span class="ident" id="7910907">s</span>&nbsp;<span class="op" id="7910909">!=</span>&nbsp;<span class="ident" id="7910912">tt</span><span class="op" id="7910914">.</span><span class="ident" id="7910915">out</span>&nbsp;<span class="op" id="7910919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910924">t</span><span class="op" id="7910925">.</span><span class="ident" id="7910926">Errorf</span><span class="op" id="7910932">(</span><span class="string" id="7910933">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7910971">,</span>&nbsp;<span class="ident" id="7910973">tt</span><span class="op" id="7910975">.</span><span class="ident" id="7910976">url</span><span class="op" id="7910979">,</span>&nbsp;<span class="ident" id="7910981">s</span><span class="op" id="7910982">,</span>&nbsp;<span class="ident" id="7910984">tt</span><span class="op" id="7910986">.</span><span class="ident" id="7910987">out</span><span class="op" id="7910990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910997">}</span><br>
<span class="lineno">905</span><span class="op" id="7910999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911002">func</span>&nbsp;<span class="ident" id="7911007">TestParseFailure</span><span class="op" id="7911023">(</span><span class="ident" id="7911024">t</span>&nbsp;<span class="op" id="7911026">*</span><span class="ident" id="7911027">testing</span><span class="op" id="7911034">.</span><span class="ident" id="7911035">T</span><span class="op" id="7911036">)</span>&nbsp;<span class="op" id="7911038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911041">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911090">const</span>&nbsp;<span class="ident" id="7911096">url</span>&nbsp;<span class="op" id="7911100">=</span>&nbsp;<span class="string" id="7911102">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911113">_</span><span class="op" id="7911114">,</span>&nbsp;<span class="ident" id="7911116">err</span>&nbsp;<span class="op" id="7911120">:=</span>&nbsp;<span class="ident" id="7911123">ParseQuery</span><span class="op" id="7911133">(</span><span class="ident" id="7911134">url</span><span class="op" id="7911137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911140">errStr</span>&nbsp;<span class="op" id="7911147">:=</span>&nbsp;<span class="ident" id="7911150">fmt</span><span class="op" id="7911153">.</span><span class="ident" id="7911154">Sprint</span><span class="op" id="7911160">(</span><span class="ident" id="7911161">err</span><span class="op" id="7911164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911167">if</span>&nbsp;<span class="op" id="7911170">!</span><span class="ident" id="7911171">strings</span><span class="op" id="7911178">.</span><span class="ident" id="7911179">Contains</span><span class="op" id="7911187">(</span><span class="ident" id="7911188">errStr</span><span class="op" id="7911194">,</span>&nbsp;<span class="string" id="7911196">&#34;%gh&#34;</span><span class="op" id="7911201">)</span>&nbsp;<span class="op" id="7911203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911207">t</span><span class="op" id="7911208">.</span><span class="ident" id="7911209">Errorf</span><span class="op" id="7911215">(</span><span class="string" id="7911216">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7911281">,</span>&nbsp;<span class="ident" id="7911283">url</span><span class="op" id="7911286">,</span>&nbsp;<span class="ident" id="7911288">errStr</span><span class="op" id="7911294">,</span>&nbsp;<span class="string" id="7911296">&#34;%gh&#34;</span><span class="op" id="7911301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911304">}</span><br>
<span class="lineno">915</span><span class="op" id="7911306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911309">type</span>&nbsp;<span class="ident" id="7911314">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7911331">struct</span>&nbsp;<span class="op" id="7911338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911341">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7911348">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911354">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7911361">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911371">escape</span>&nbsp;<span class="builtintype" id="7911378">bool</span><br>
<span class="lineno"></span><span class="op" id="7911383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911386">var</span>&nbsp;<span class="ident" id="7911390">shouldEscapeTests</span>&nbsp;<span class="op" id="7911408">=</span>&nbsp;<span class="op" id="7911410">[</span><span class="op" id="7911411">]</span><span class="ident" id="7911412">shouldEscapeTest</span><span class="op" id="7911428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911431">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911465">{</span><span class="string" id="7911466">&#39;a&#39;</span><span class="op" id="7911469">,</span>&nbsp;<span class="ident" id="7911471">encodePath</span><span class="op" id="7911481">,</span>&nbsp;<span class="builtintype" id="7911483">false</span><span class="op" id="7911488">}</span><span class="op" id="7911489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911492">{</span><span class="string" id="7911493">&#39;a&#39;</span><span class="op" id="7911496">,</span>&nbsp;<span class="ident" id="7911498">encodeUserPassword</span><span class="op" id="7911516">,</span>&nbsp;<span class="builtintype" id="7911518">false</span><span class="op" id="7911523">}</span><span class="op" id="7911524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911527">{</span><span class="string" id="7911528">&#39;a&#39;</span><span class="op" id="7911531">,</span>&nbsp;<span class="ident" id="7911533">encodeQueryComponent</span><span class="op" id="7911553">,</span>&nbsp;<span class="builtintype" id="7911555">false</span><span class="op" id="7911560">}</span><span class="op" id="7911561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911564">{</span><span class="string" id="7911565">&#39;a&#39;</span><span class="op" id="7911568">,</span>&nbsp;<span class="ident" id="7911570">encodeFragment</span><span class="op" id="7911584">,</span>&nbsp;<span class="builtintype" id="7911586">false</span><span class="op" id="7911591">}</span><span class="op" id="7911592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911595">{</span><span class="string" id="7911596">&#39;z&#39;</span><span class="op" id="7911599">,</span>&nbsp;<span class="ident" id="7911601">encodePath</span><span class="op" id="7911611">,</span>&nbsp;<span class="builtintype" id="7911613">false</span><span class="op" id="7911618">}</span><span class="op" id="7911619">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911622">{</span><span class="string" id="7911623">&#39;A&#39;</span><span class="op" id="7911626">,</span>&nbsp;<span class="ident" id="7911628">encodePath</span><span class="op" id="7911638">,</span>&nbsp;<span class="builtintype" id="7911640">false</span><span class="op" id="7911645">}</span><span class="op" id="7911646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911649">{</span><span class="string" id="7911650">&#39;Z&#39;</span><span class="op" id="7911653">,</span>&nbsp;<span class="ident" id="7911655">encodePath</span><span class="op" id="7911665">,</span>&nbsp;<span class="builtintype" id="7911667">false</span><span class="op" id="7911672">}</span><span class="op" id="7911673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911676">{</span><span class="string" id="7911677">&#39;0&#39;</span><span class="op" id="7911680">,</span>&nbsp;<span class="ident" id="7911682">encodePath</span><span class="op" id="7911692">,</span>&nbsp;<span class="builtintype" id="7911694">false</span><span class="op" id="7911699">}</span><span class="op" id="7911700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911703">{</span><span class="string" id="7911704">&#39;9&#39;</span><span class="op" id="7911707">,</span>&nbsp;<span class="ident" id="7911709">encodePath</span><span class="op" id="7911719">,</span>&nbsp;<span class="builtintype" id="7911721">false</span><span class="op" id="7911726">}</span><span class="op" id="7911727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911730">{</span><span class="string" id="7911731">&#39;-&#39;</span><span class="op" id="7911734">,</span>&nbsp;<span class="ident" id="7911736">encodePath</span><span class="op" id="7911746">,</span>&nbsp;<span class="builtintype" id="7911748">false</span><span class="op" id="7911753">}</span><span class="op" id="7911754">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911757">{</span><span class="string" id="7911758">&#39;-&#39;</span><span class="op" id="7911761">,</span>&nbsp;<span class="ident" id="7911763">encodeUserPassword</span><span class="op" id="7911781">,</span>&nbsp;<span class="builtintype" id="7911783">false</span><span class="op" id="7911788">}</span><span class="op" id="7911789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911792">{</span><span class="string" id="7911793">&#39;-&#39;</span><span class="op" id="7911796">,</span>&nbsp;<span class="ident" id="7911798">encodeQueryComponent</span><span class="op" id="7911818">,</span>&nbsp;<span class="builtintype" id="7911820">false</span><span class="op" id="7911825">}</span><span class="op" id="7911826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911829">{</span><span class="string" id="7911830">&#39;-&#39;</span><span class="op" id="7911833">,</span>&nbsp;<span class="ident" id="7911835">encodeFragment</span><span class="op" id="7911849">,</span>&nbsp;<span class="builtintype" id="7911851">false</span><span class="op" id="7911856">}</span><span class="op" id="7911857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911860">{</span><span class="string" id="7911861">&#39;.&#39;</span><span class="op" id="7911864">,</span>&nbsp;<span class="ident" id="7911866">encodePath</span><span class="op" id="7911876">,</span>&nbsp;<span class="builtintype" id="7911878">false</span><span class="op" id="7911883">}</span><span class="op" id="7911884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911887">{</span><span class="string" id="7911888">&#39;_&#39;</span><span class="op" id="7911891">,</span>&nbsp;<span class="ident" id="7911893">encodePath</span><span class="op" id="7911903">,</span>&nbsp;<span class="builtintype" id="7911905">false</span><span class="op" id="7911910">}</span><span class="op" id="7911911">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911914">{</span><span class="string" id="7911915">&#39;~&#39;</span><span class="op" id="7911918">,</span>&nbsp;<span class="ident" id="7911920">encodePath</span><span class="op" id="7911930">,</span>&nbsp;<span class="builtintype" id="7911932">false</span><span class="op" id="7911937">}</span><span class="op" id="7911938">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7911942">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911973">{</span><span class="string" id="7911974">&#39;:&#39;</span><span class="op" id="7911977">,</span>&nbsp;<span class="ident" id="7911979">encodeUserPassword</span><span class="op" id="7911997">,</span>&nbsp;<span class="builtintype" id="7911999">true</span><span class="op" id="7912003">}</span><span class="op" id="7912004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912007">{</span><span class="string" id="7912008">&#39;/&#39;</span><span class="op" id="7912011">,</span>&nbsp;<span class="ident" id="7912013">encodeUserPassword</span><span class="op" id="7912031">,</span>&nbsp;<span class="builtintype" id="7912033">true</span><span class="op" id="7912037">}</span><span class="op" id="7912038">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912041">{</span><span class="string" id="7912042">&#39;?&#39;</span><span class="op" id="7912045">,</span>&nbsp;<span class="ident" id="7912047">encodeUserPassword</span><span class="op" id="7912065">,</span>&nbsp;<span class="builtintype" id="7912067">true</span><span class="op" id="7912071">}</span><span class="op" id="7912072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912075">{</span><span class="string" id="7912076">&#39;@&#39;</span><span class="op" id="7912079">,</span>&nbsp;<span class="ident" id="7912081">encodeUserPassword</span><span class="op" id="7912099">,</span>&nbsp;<span class="builtintype" id="7912101">true</span><span class="op" id="7912105">}</span><span class="op" id="7912106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912109">{</span><span class="string" id="7912110">&#39;$&#39;</span><span class="op" id="7912113">,</span>&nbsp;<span class="ident" id="7912115">encodeUserPassword</span><span class="op" id="7912133">,</span>&nbsp;<span class="builtintype" id="7912135">false</span><span class="op" id="7912140">}</span><span class="op" id="7912141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912144">{</span><span class="string" id="7912145">&#39;&amp;&#39;</span><span class="op" id="7912148">,</span>&nbsp;<span class="ident" id="7912150">encodeUserPassword</span><span class="op" id="7912168">,</span>&nbsp;<span class="builtintype" id="7912170">false</span><span class="op" id="7912175">}</span><span class="op" id="7912176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912179">{</span><span class="string" id="7912180">&#39;+&#39;</span><span class="op" id="7912183">,</span>&nbsp;<span class="ident" id="7912185">encodeUserPassword</span><span class="op" id="7912203">,</span>&nbsp;<span class="builtintype" id="7912205">false</span><span class="op" id="7912210">}</span><span class="op" id="7912211">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912214">{</span><span class="string" id="7912215">&#39;,&#39;</span><span class="op" id="7912218">,</span>&nbsp;<span class="ident" id="7912220">encodeUserPassword</span><span class="op" id="7912238">,</span>&nbsp;<span class="builtintype" id="7912240">false</span><span class="op" id="7912245">}</span><span class="op" id="7912246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912249">{</span><span class="string" id="7912250">&#39;;&#39;</span><span class="op" id="7912253">,</span>&nbsp;<span class="ident" id="7912255">encodeUserPassword</span><span class="op" id="7912273">,</span>&nbsp;<span class="builtintype" id="7912275">false</span><span class="op" id="7912280">}</span><span class="op" id="7912281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912284">{</span><span class="string" id="7912285">&#39;=&#39;</span><span class="op" id="7912288">,</span>&nbsp;<span class="ident" id="7912290">encodeUserPassword</span><span class="op" id="7912308">,</span>&nbsp;<span class="builtintype" id="7912310">false</span><span class="op" id="7912315">}</span><span class="op" id="7912316">,</span><br>
<span class="lineno"></span><span class="op" id="7912318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7912321">func</span>&nbsp;<span class="ident" id="7912326">TestShouldEscape</span><span class="op" id="7912342">(</span><span class="ident" id="7912343">t</span>&nbsp;<span class="op" id="7912345">*</span><span class="ident" id="7912346">testing</span><span class="op" id="7912353">.</span><span class="ident" id="7912354">T</span><span class="op" id="7912355">)</span>&nbsp;<span class="op" id="7912357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912360">for</span>&nbsp;<span class="ident" id="7912364">_</span><span class="op" id="7912365">,</span>&nbsp;<span class="ident" id="7912367">tt</span>&nbsp;<span class="op" id="7912370">:=</span>&nbsp;<span class="keyword" id="7912373">range</span>&nbsp;<span class="ident" id="7912379">shouldEscapeTests</span>&nbsp;<span class="op" id="7912397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912401">if</span>&nbsp;<span class="ident" id="7912404">shouldEscape</span><span class="op" id="7912416">(</span><span class="ident" id="7912417">tt</span><span class="op" id="7912419">.</span><span class="ident" id="7912420">in</span><span class="op" id="7912422">,</span>&nbsp;<span class="ident" id="7912424">tt</span><span class="op" id="7912426">.</span><span class="ident" id="7912427">mode</span><span class="op" id="7912431">)</span>&nbsp;<span class="op" id="7912433">!=</span>&nbsp;<span class="ident" id="7912436">tt</span><span class="op" id="7912438">.</span><span class="ident" id="7912439">escape</span>&nbsp;<span class="op" id="7912446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912451">t</span><span class="op" id="7912452">.</span><span class="ident" id="7912453">Errorf</span><span class="op" id="7912459">(</span><span class="string" id="7912460">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7912507">,</span>&nbsp;<span class="ident" id="7912509">tt</span><span class="op" id="7912511">.</span><span class="ident" id="7912512">in</span><span class="op" id="7912514">,</span>&nbsp;<span class="ident" id="7912516">tt</span><span class="op" id="7912518">.</span><span class="ident" id="7912519">mode</span><span class="op" id="7912523">,</span>&nbsp;<span class="op" id="7912525">!</span><span class="ident" id="7912526">tt</span><span class="op" id="7912528">.</span><span class="ident" id="7912529">escape</span><span class="op" id="7912535">,</span>&nbsp;<span class="ident" id="7912537">tt</span><span class="op" id="7912539">.</span><span class="ident" id="7912540">escape</span><span class="op" id="7912546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912550">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912553">}</span><br>
<span class="lineno"></span><span class="op" id="7912555">}</span>
</div>
</body>
</html>
