<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5685624">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5685680">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5685734">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5685785">//&nbsp;Package&nbsp;plan9obj&nbsp;implements&nbsp;access&nbsp;to&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5685853">package</span>&nbsp;<span class="ident" id="5685861">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5685871">import</span>&nbsp;<span class="op" id="5685878">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5685881">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5685900">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5685910">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5685917">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5685923">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5685928">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5685931">//&nbsp;A&nbsp;FileHeader&nbsp;represents&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="5685986">type</span>&nbsp;<span class="ident" id="5685991">FileHeader</span>&nbsp;<span class="keyword" id="5686002">struct</span>&nbsp;<span class="op" id="5686009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686012">Magic</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5686024">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686032">Bss</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5686044">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686052">Entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5686064">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686072">PtrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5686084">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686089">LoadAddress</span>&nbsp;<span class="ident" id="5686101">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686109">HdrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5686121">uint64</span><br>
<span class="lineno"></span><span class="op" id="5686128">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5686131">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5686179">type</span>&nbsp;<span class="ident" id="5686184">File</span>&nbsp;<span class="keyword" id="5686189">struct</span>&nbsp;<span class="op" id="5686196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686199">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686211">Sections</span>&nbsp;<span class="op" id="5686220">[</span><span class="op" id="5686221">]</span><span class="op" id="5686222">*</span><span class="ident" id="5686223">Section</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686232">closer</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5686241">io</span><span class="op" id="5686243">.</span><span class="ident" id="5686244">Closer</span><br>
<span class="lineno"></span><span class="op" id="5686251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5686254">//&nbsp;A&nbsp;SectionHeader&nbsp;represents&nbsp;a&nbsp;single&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="5686322">//&nbsp;This&nbsp;structure&nbsp;doesn&#39;t&nbsp;exist&nbsp;on-disk,&nbsp;but&nbsp;eases&nbsp;navigation</span><br>
<span class="lineno">35</span><span class="comment" id="5686384">//&nbsp;through&nbsp;the&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5686412">type</span>&nbsp;<span class="ident" id="5686417">SectionHeader</span>&nbsp;<span class="keyword" id="5686431">struct</span>&nbsp;<span class="op" id="5686438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686441">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5686448">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686456">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5686463">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686471">Offset</span>&nbsp;<span class="builtintype" id="5686478">uint32</span><br>
<span class="lineno">40</span><span class="op" id="5686485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5686488">//&nbsp;A&nbsp;Section&nbsp;represents&nbsp;a&nbsp;single&nbsp;section&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5686553">type</span>&nbsp;<span class="ident" id="5686558">Section</span>&nbsp;<span class="keyword" id="5686566">struct</span>&nbsp;<span class="op" id="5686573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686576">SectionHeader</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686592">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686630">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686670">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686705">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686753">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5686803">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686827">io</span><span class="op" id="5686829">.</span><span class="ident" id="5686830">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686840">sr</span>&nbsp;<span class="op" id="5686843">*</span><span class="ident" id="5686844">io</span><span class="op" id="5686846">.</span><span class="ident" id="5686847">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5686861">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="5686864">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5686932">func</span>&nbsp;<span class="op" id="5686937">(</span><span class="ident" id="5686938">s</span>&nbsp;<span class="op" id="5686940">*</span><span class="ident" id="5686941">Section</span><span class="op" id="5686948">)</span>&nbsp;<span class="ident" id="5686950">Data</span><span class="op" id="5686954">(</span><span class="op" id="5686955">)</span>&nbsp;<span class="op" id="5686957">(</span><span class="op" id="5686958">[</span><span class="op" id="5686959">]</span><span class="builtintype" id="5686960">byte</span><span class="op" id="5686964">,</span>&nbsp;<span class="builtintype" id="5686966">error</span><span class="op" id="5686971">)</span>&nbsp;<span class="op" id="5686973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686976">dat</span>&nbsp;<span class="op" id="5686980">:=</span>&nbsp;<span class="builtinfunc" id="5686983">make</span><span class="op" id="5686987">(</span><span class="op" id="5686988">[</span><span class="op" id="5686989">]</span><span class="builtintype" id="5686990">byte</span><span class="op" id="5686994">,</span>&nbsp;<span class="ident" id="5686996">s</span><span class="op" id="5686997">.</span><span class="ident" id="5686998">sr</span><span class="op" id="5687000">.</span><span class="ident" id="5687001">Size</span><span class="op" id="5687005">(</span><span class="op" id="5687006">)</span><span class="op" id="5687007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687010">n</span><span class="op" id="5687011">,</span>&nbsp;<span class="ident" id="5687013">err</span>&nbsp;<span class="op" id="5687017">:=</span>&nbsp;<span class="ident" id="5687020">s</span><span class="op" id="5687021">.</span><span class="ident" id="5687022">sr</span><span class="op" id="5687024">.</span><span class="ident" id="5687025">ReadAt</span><span class="op" id="5687031">(</span><span class="ident" id="5687032">dat</span><span class="op" id="5687035">,</span>&nbsp;<span class="num" id="5687037">0</span><span class="op" id="5687038">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687041">if</span>&nbsp;<span class="ident" id="5687044">n</span>&nbsp;<span class="op" id="5687046">==</span>&nbsp;<span class="builtinfunc" id="5687049">len</span><span class="op" id="5687052">(</span><span class="ident" id="5687053">dat</span><span class="op" id="5687056">)</span>&nbsp;<span class="op" id="5687058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687062">err</span>&nbsp;<span class="op" id="5687066">=</span>&nbsp;<span class="ident" id="5687068">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5687073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687076">return</span>&nbsp;<span class="ident" id="5687083">dat</span><span class="op" id="5687086">[</span><span class="num" id="5687087">0</span><span class="op" id="5687088">:</span><span class="ident" id="5687089">n</span><span class="op" id="5687090">]</span><span class="op" id="5687091">,</span>&nbsp;<span class="ident" id="5687093">err</span><br>
<span class="lineno"></span><span class="op" id="5687097">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="5687100">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5687167">func</span>&nbsp;<span class="op" id="5687172">(</span><span class="ident" id="5687173">s</span>&nbsp;<span class="op" id="5687175">*</span><span class="ident" id="5687176">Section</span><span class="op" id="5687183">)</span>&nbsp;<span class="ident" id="5687185">Open</span><span class="op" id="5687189">(</span><span class="op" id="5687190">)</span>&nbsp;<span class="ident" id="5687192">io</span><span class="op" id="5687194">.</span><span class="ident" id="5687195">ReadSeeker</span>&nbsp;<span class="op" id="5687206">{</span>&nbsp;<span class="keyword" id="5687208">return</span>&nbsp;<span class="ident" id="5687215">io</span><span class="op" id="5687217">.</span><span class="ident" id="5687218">NewSectionReader</span><span class="op" id="5687234">(</span><span class="ident" id="5687235">s</span><span class="op" id="5687236">.</span><span class="ident" id="5687237">sr</span><span class="op" id="5687239">,</span>&nbsp;<span class="num" id="5687241">0</span><span class="op" id="5687242">,</span>&nbsp;<span class="num" id="5687244">1</span><span class="op" id="5687245">&lt;&lt;</span><span class="num" id="5687247">63</span><span class="op" id="5687249">-</span><span class="num" id="5687250">1</span><span class="op" id="5687251">)</span>&nbsp;<span class="op" id="5687253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5687256">//&nbsp;A&nbsp;Symbol&nbsp;represents&nbsp;an&nbsp;entry&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;symbol&nbsp;table&nbsp;section.</span><br>
<span class="lineno">70</span><span class="keyword" id="5687328">type</span>&nbsp;<span class="ident" id="5687333">Sym</span>&nbsp;<span class="keyword" id="5687337">struct</span>&nbsp;<span class="op" id="5687344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687347">Value</span>&nbsp;<span class="ident" id="5687353">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687361">Type</span>&nbsp;&nbsp;<span class="builtintype" id="5687367">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687373">Name</span>&nbsp;&nbsp;<span class="builtintype" id="5687379">string</span><br>
<span class="lineno"></span><span class="op" id="5687386">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5687389">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5687420">//&nbsp;formatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5687483">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5687534">type</span>&nbsp;<span class="ident" id="5687539">formatError</span>&nbsp;<span class="keyword" id="5687551">struct</span>&nbsp;<span class="op" id="5687558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687561">off</span>&nbsp;<span class="builtintype" id="5687565">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687570">msg</span>&nbsp;<span class="builtintype" id="5687574">string</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687582">val</span>&nbsp;<span class="keyword" id="5687586">interface</span><span class="op" id="5687595">{</span><span class="op" id="5687596">}</span><br>
<span class="lineno"></span><span class="op" id="5687598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5687601">func</span>&nbsp;<span class="op" id="5687606">(</span><span class="ident" id="5687607">e</span>&nbsp;<span class="op" id="5687609">*</span><span class="ident" id="5687610">formatError</span><span class="op" id="5687621">)</span>&nbsp;<span class="ident" id="5687623">Error</span><span class="op" id="5687628">(</span><span class="op" id="5687629">)</span>&nbsp;<span class="builtintype" id="5687631">string</span>&nbsp;<span class="op" id="5687638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687641">msg</span>&nbsp;<span class="op" id="5687645">:=</span>&nbsp;<span class="ident" id="5687648">e</span><span class="op" id="5687649">.</span><span class="ident" id="5687650">msg</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687655">if</span>&nbsp;<span class="ident" id="5687658">e</span><span class="op" id="5687659">.</span><span class="ident" id="5687660">val</span>&nbsp;<span class="op" id="5687664">!=</span>&nbsp;<span class="ident" id="5687667">nil</span>&nbsp;<span class="op" id="5687671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687675">msg</span>&nbsp;<span class="op" id="5687679">+=</span>&nbsp;<span class="ident" id="5687682">fmt</span><span class="op" id="5687685">.</span><span class="ident" id="5687686">Sprintf</span><span class="op" id="5687693">(</span><span class="string" id="5687694">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5687701">,</span>&nbsp;<span class="ident" id="5687703">e</span><span class="op" id="5687704">.</span><span class="ident" id="5687705">val</span><span class="op" id="5687708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5687711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687714">msg</span>&nbsp;<span class="op" id="5687718">+=</span>&nbsp;<span class="ident" id="5687721">fmt</span><span class="op" id="5687724">.</span><span class="ident" id="5687725">Sprintf</span><span class="op" id="5687732">(</span><span class="string" id="5687733">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5687757">,</span>&nbsp;<span class="ident" id="5687759">e</span><span class="op" id="5687760">.</span><span class="ident" id="5687761">off</span><span class="op" id="5687764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687767">return</span>&nbsp;<span class="ident" id="5687774">msg</span><br>
<span class="lineno">95</span><span class="op" id="5687778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5687781">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5687874">func</span>&nbsp;<span class="ident" id="5687879">Open</span><span class="op" id="5687883">(</span><span class="ident" id="5687884">name</span>&nbsp;<span class="builtintype" id="5687889">string</span><span class="op" id="5687895">)</span>&nbsp;<span class="op" id="5687897">(</span><span class="op" id="5687898">*</span><span class="ident" id="5687899">File</span><span class="op" id="5687903">,</span>&nbsp;<span class="builtintype" id="5687905">error</span><span class="op" id="5687910">)</span>&nbsp;<span class="op" id="5687912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687915">f</span><span class="op" id="5687916">,</span>&nbsp;<span class="ident" id="5687918">err</span>&nbsp;<span class="op" id="5687922">:=</span>&nbsp;<span class="ident" id="5687925">os</span><span class="op" id="5687927">.</span><span class="ident" id="5687928">Open</span><span class="op" id="5687932">(</span><span class="ident" id="5687933">name</span><span class="op" id="5687937">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687940">if</span>&nbsp;<span class="ident" id="5687943">err</span>&nbsp;<span class="op" id="5687947">!=</span>&nbsp;<span class="ident" id="5687950">nil</span>&nbsp;<span class="op" id="5687954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687958">return</span>&nbsp;<span class="ident" id="5687965">nil</span><span class="op" id="5687968">,</span>&nbsp;<span class="ident" id="5687970">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5687975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687978">ff</span><span class="op" id="5687980">,</span>&nbsp;<span class="ident" id="5687982">err</span>&nbsp;<span class="op" id="5687986">:=</span>&nbsp;<span class="ident" id="5687989">NewFile</span><span class="op" id="5687996">(</span><span class="ident" id="5687997">f</span><span class="op" id="5687998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688001">if</span>&nbsp;<span class="ident" id="5688004">err</span>&nbsp;<span class="op" id="5688008">!=</span>&nbsp;<span class="ident" id="5688011">nil</span>&nbsp;<span class="op" id="5688015">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688019">f</span><span class="op" id="5688020">.</span><span class="ident" id="5688021">Close</span><span class="op" id="5688026">(</span><span class="op" id="5688027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688031">return</span>&nbsp;<span class="ident" id="5688038">nil</span><span class="op" id="5688041">,</span>&nbsp;<span class="ident" id="5688043">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688051">ff</span><span class="op" id="5688053">.</span><span class="ident" id="5688054">closer</span>&nbsp;<span class="op" id="5688061">=</span>&nbsp;<span class="ident" id="5688063">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688066">return</span>&nbsp;<span class="ident" id="5688073">ff</span><span class="op" id="5688075">,</span>&nbsp;<span class="ident" id="5688077">nil</span><br>
<span class="lineno">110</span><span class="op" id="5688081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5688084">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5688110">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5688177">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">115</span><span class="keyword" id="5688201">func</span>&nbsp;<span class="op" id="5688206">(</span><span class="ident" id="5688207">f</span>&nbsp;<span class="op" id="5688209">*</span><span class="ident" id="5688210">File</span><span class="op" id="5688214">)</span>&nbsp;<span class="ident" id="5688216">Close</span><span class="op" id="5688221">(</span><span class="op" id="5688222">)</span>&nbsp;<span class="builtintype" id="5688224">error</span>&nbsp;<span class="op" id="5688230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688233">var</span>&nbsp;<span class="ident" id="5688237">err</span>&nbsp;<span class="builtintype" id="5688241">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688248">if</span>&nbsp;<span class="ident" id="5688251">f</span><span class="op" id="5688252">.</span><span class="ident" id="5688253">closer</span>&nbsp;<span class="op" id="5688260">!=</span>&nbsp;<span class="ident" id="5688263">nil</span>&nbsp;<span class="op" id="5688267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688271">err</span>&nbsp;<span class="op" id="5688275">=</span>&nbsp;<span class="ident" id="5688277">f</span><span class="op" id="5688278">.</span><span class="ident" id="5688279">closer</span><span class="op" id="5688285">.</span><span class="ident" id="5688286">Close</span><span class="op" id="5688291">(</span><span class="op" id="5688292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688296">f</span><span class="op" id="5688297">.</span><span class="ident" id="5688298">closer</span>&nbsp;<span class="op" id="5688305">=</span>&nbsp;<span class="ident" id="5688307">nil</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688315">return</span>&nbsp;<span class="ident" id="5688322">err</span><br>
<span class="lineno"></span><span class="op" id="5688326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5688329">func</span>&nbsp;<span class="ident" id="5688334">parseMagic</span><span class="op" id="5688344">(</span><span class="ident" id="5688345">magic</span>&nbsp;<span class="op" id="5688351">[</span><span class="op" id="5688352">]</span><span class="builtintype" id="5688353">byte</span><span class="op" id="5688357">)</span>&nbsp;<span class="op" id="5688359">(</span><span class="builtintype" id="5688360">uint32</span><span class="op" id="5688366">,</span>&nbsp;<span class="builtintype" id="5688368">error</span><span class="op" id="5688373">)</span>&nbsp;<span class="op" id="5688375">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688378">m</span>&nbsp;<span class="op" id="5688380">:=</span>&nbsp;<span class="ident" id="5688383">binary</span><span class="op" id="5688389">.</span><span class="ident" id="5688390">BigEndian</span><span class="op" id="5688399">.</span><span class="ident" id="5688400">Uint32</span><span class="op" id="5688406">(</span><span class="ident" id="5688407">magic</span><span class="op" id="5688412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688415">switch</span>&nbsp;<span class="ident" id="5688422">m</span>&nbsp;<span class="op" id="5688424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688427">case</span>&nbsp;<span class="ident" id="5688432">Magic386</span><span class="op" id="5688440">,</span>&nbsp;<span class="ident" id="5688442">MagicAMD64</span><span class="op" id="5688452">,</span>&nbsp;<span class="ident" id="5688454">MagicARM</span><span class="op" id="5688462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688466">return</span>&nbsp;<span class="ident" id="5688473">m</span><span class="op" id="5688474">,</span>&nbsp;<span class="ident" id="5688476">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688481">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688484">return</span>&nbsp;<span class="num" id="5688491">0</span><span class="op" id="5688492">,</span>&nbsp;<span class="op" id="5688494">&amp;</span><span class="ident" id="5688495">formatError</span><span class="op" id="5688506">{</span><span class="num" id="5688507">0</span><span class="op" id="5688508">,</span>&nbsp;<span class="string" id="5688510">&#34;bad&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5688528">,</span>&nbsp;<span class="ident" id="5688530">magic</span><span class="op" id="5688535">}</span><br>
<span class="lineno"></span><span class="op" id="5688537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5688540">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno"></span><span class="comment" id="5688625">//&nbsp;The&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">135</span><span class="keyword" id="5688698">func</span>&nbsp;<span class="ident" id="5688703">NewFile</span><span class="op" id="5688710">(</span><span class="ident" id="5688711">r</span>&nbsp;<span class="ident" id="5688713">io</span><span class="op" id="5688715">.</span><span class="ident" id="5688716">ReaderAt</span><span class="op" id="5688724">)</span>&nbsp;<span class="op" id="5688726">(</span><span class="op" id="5688727">*</span><span class="ident" id="5688728">File</span><span class="op" id="5688732">,</span>&nbsp;<span class="builtintype" id="5688734">error</span><span class="op" id="5688739">)</span>&nbsp;<span class="op" id="5688741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688744">sr</span>&nbsp;<span class="op" id="5688747">:=</span>&nbsp;<span class="ident" id="5688750">io</span><span class="op" id="5688752">.</span><span class="ident" id="5688753">NewSectionReader</span><span class="op" id="5688769">(</span><span class="ident" id="5688770">r</span><span class="op" id="5688771">,</span>&nbsp;<span class="num" id="5688773">0</span><span class="op" id="5688774">,</span>&nbsp;<span class="num" id="5688776">1</span><span class="op" id="5688777">&lt;&lt;</span><span class="num" id="5688779">63</span><span class="op" id="5688781">-</span><span class="num" id="5688782">1</span><span class="op" id="5688783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5688786">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Plan&nbsp;9&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688819">var</span>&nbsp;<span class="ident" id="5688823">magic</span>&nbsp;<span class="op" id="5688829">[</span><span class="num" id="5688830">4</span><span class="op" id="5688831">]</span><span class="builtintype" id="5688832">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688838">if</span>&nbsp;<span class="ident" id="5688841">_</span><span class="op" id="5688842">,</span>&nbsp;<span class="ident" id="5688844">err</span>&nbsp;<span class="op" id="5688848">:=</span>&nbsp;<span class="ident" id="5688851">r</span><span class="op" id="5688852">.</span><span class="ident" id="5688853">ReadAt</span><span class="op" id="5688859">(</span><span class="ident" id="5688860">magic</span><span class="op" id="5688865">[</span><span class="op" id="5688866">:</span><span class="op" id="5688867">]</span><span class="op" id="5688868">,</span>&nbsp;<span class="num" id="5688870">0</span><span class="op" id="5688871">)</span><span class="op" id="5688872">;</span>&nbsp;<span class="ident" id="5688874">err</span>&nbsp;<span class="op" id="5688878">!=</span>&nbsp;<span class="ident" id="5688881">nil</span>&nbsp;<span class="op" id="5688885">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688889">return</span>&nbsp;<span class="ident" id="5688896">nil</span><span class="op" id="5688899">,</span>&nbsp;<span class="ident" id="5688901">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688909">_</span><span class="op" id="5688910">,</span>&nbsp;<span class="ident" id="5688912">err</span>&nbsp;<span class="op" id="5688916">:=</span>&nbsp;<span class="ident" id="5688919">parseMagic</span><span class="op" id="5688929">(</span><span class="ident" id="5688930">magic</span><span class="op" id="5688935">[</span><span class="op" id="5688936">:</span><span class="op" id="5688937">]</span><span class="op" id="5688938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688941">if</span>&nbsp;<span class="ident" id="5688944">err</span>&nbsp;<span class="op" id="5688948">!=</span>&nbsp;<span class="ident" id="5688951">nil</span>&nbsp;<span class="op" id="5688955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688959">return</span>&nbsp;<span class="ident" id="5688966">nil</span><span class="op" id="5688969">,</span>&nbsp;<span class="ident" id="5688971">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688980">ph</span>&nbsp;<span class="op" id="5688983">:=</span>&nbsp;<span class="builtinfunc" id="5688986">new</span><span class="op" id="5688989">(</span><span class="ident" id="5688990">prog</span><span class="op" id="5688994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688997">if</span>&nbsp;<span class="ident" id="5689000">err</span>&nbsp;<span class="op" id="5689004">:=</span>&nbsp;<span class="ident" id="5689007">binary</span><span class="op" id="5689013">.</span><span class="ident" id="5689014">Read</span><span class="op" id="5689018">(</span><span class="ident" id="5689019">sr</span><span class="op" id="5689021">,</span>&nbsp;<span class="ident" id="5689023">binary</span><span class="op" id="5689029">.</span><span class="ident" id="5689030">BigEndian</span><span class="op" id="5689039">,</span>&nbsp;<span class="ident" id="5689041">ph</span><span class="op" id="5689043">)</span><span class="op" id="5689044">;</span>&nbsp;<span class="ident" id="5689046">err</span>&nbsp;<span class="op" id="5689050">!=</span>&nbsp;<span class="ident" id="5689053">nil</span>&nbsp;<span class="op" id="5689057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689061">return</span>&nbsp;<span class="ident" id="5689068">nil</span><span class="op" id="5689071">,</span>&nbsp;<span class="ident" id="5689073">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689082">f</span>&nbsp;<span class="op" id="5689084">:=</span>&nbsp;<span class="op" id="5689087">&amp;</span><span class="ident" id="5689088">File</span><span class="op" id="5689092">{</span><span class="ident" id="5689093">FileHeader</span><span class="op" id="5689103">:</span>&nbsp;<span class="ident" id="5689105">FileHeader</span><span class="op" id="5689115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689119">Magic</span><span class="op" id="5689124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5689132">ph</span><span class="op" id="5689134">.</span><span class="ident" id="5689135">Magic</span><span class="op" id="5689140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689144">Bss</span><span class="op" id="5689147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5689157">ph</span><span class="op" id="5689159">.</span><span class="ident" id="5689160">Bss</span><span class="op" id="5689163">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689167">Entry</span><span class="op" id="5689172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5689180">uint64</span><span class="op" id="5689186">(</span><span class="ident" id="5689187">ph</span><span class="op" id="5689189">.</span><span class="ident" id="5689190">Entry</span><span class="op" id="5689195">)</span><span class="op" id="5689196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689200">PtrSize</span><span class="op" id="5689207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5689213">4</span><span class="op" id="5689214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689218">LoadAddress</span><span class="op" id="5689229">:</span>&nbsp;<span class="num" id="5689231">0x1000</span><span class="op" id="5689237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689241">HdrSize</span><span class="op" id="5689248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5689254">4</span>&nbsp;<span class="op" id="5689256">*</span>&nbsp;<span class="num" id="5689258">8</span><span class="op" id="5689259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689262">}</span><span class="op" id="5689263">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689267">if</span>&nbsp;<span class="ident" id="5689270">ph</span><span class="op" id="5689272">.</span><span class="ident" id="5689273">Magic</span><span class="op" id="5689278">&amp;</span><span class="ident" id="5689279">Magic64</span>&nbsp;<span class="op" id="5689287">!=</span>&nbsp;<span class="num" id="5689290">0</span>&nbsp;<span class="op" id="5689292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689296">if</span>&nbsp;<span class="ident" id="5689299">err</span>&nbsp;<span class="op" id="5689303">:=</span>&nbsp;<span class="ident" id="5689306">binary</span><span class="op" id="5689312">.</span><span class="ident" id="5689313">Read</span><span class="op" id="5689317">(</span><span class="ident" id="5689318">sr</span><span class="op" id="5689320">,</span>&nbsp;<span class="ident" id="5689322">binary</span><span class="op" id="5689328">.</span><span class="ident" id="5689329">BigEndian</span><span class="op" id="5689338">,</span>&nbsp;<span class="op" id="5689340">&amp;</span><span class="ident" id="5689341">f</span><span class="op" id="5689342">.</span><span class="ident" id="5689343">Entry</span><span class="op" id="5689348">)</span><span class="op" id="5689349">;</span>&nbsp;<span class="ident" id="5689351">err</span>&nbsp;<span class="op" id="5689355">!=</span>&nbsp;<span class="ident" id="5689358">nil</span>&nbsp;<span class="op" id="5689362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689367">return</span>&nbsp;<span class="ident" id="5689374">nil</span><span class="op" id="5689377">,</span>&nbsp;<span class="ident" id="5689379">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689385">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689389">f</span><span class="op" id="5689390">.</span><span class="ident" id="5689391">PtrSize</span>&nbsp;<span class="op" id="5689399">=</span>&nbsp;<span class="num" id="5689401">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689405">f</span><span class="op" id="5689406">.</span><span class="ident" id="5689407">LoadAddress</span>&nbsp;<span class="op" id="5689419">=</span>&nbsp;<span class="num" id="5689421">0x200000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689432">f</span><span class="op" id="5689433">.</span><span class="ident" id="5689434">HdrSize</span>&nbsp;<span class="op" id="5689442">+=</span>&nbsp;<span class="num" id="5689445">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689452">var</span>&nbsp;<span class="ident" id="5689456">sects</span>&nbsp;<span class="op" id="5689462">=</span>&nbsp;<span class="op" id="5689464">[</span><span class="op" id="5689465">]</span><span class="keyword" id="5689466">struct</span>&nbsp;<span class="op" id="5689473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689477">name</span>&nbsp;<span class="builtintype" id="5689482">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689491">size</span>&nbsp;<span class="builtintype" id="5689496">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689504">}</span><span class="op" id="5689505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689509">{</span><span class="string" id="5689510">&#34;text&#34;</span><span class="op" id="5689516">,</span>&nbsp;<span class="ident" id="5689518">ph</span><span class="op" id="5689520">.</span><span class="ident" id="5689521">Text</span><span class="op" id="5689525">}</span><span class="op" id="5689526">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689530">{</span><span class="string" id="5689531">&#34;data&#34;</span><span class="op" id="5689537">,</span>&nbsp;<span class="ident" id="5689539">ph</span><span class="op" id="5689541">.</span><span class="ident" id="5689542">Data</span><span class="op" id="5689546">}</span><span class="op" id="5689547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689551">{</span><span class="string" id="5689552">&#34;syms&#34;</span><span class="op" id="5689558">,</span>&nbsp;<span class="ident" id="5689560">ph</span><span class="op" id="5689562">.</span><span class="ident" id="5689563">Syms</span><span class="op" id="5689567">}</span><span class="op" id="5689568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689572">{</span><span class="string" id="5689573">&#34;spsz&#34;</span><span class="op" id="5689579">,</span>&nbsp;<span class="ident" id="5689581">ph</span><span class="op" id="5689583">.</span><span class="ident" id="5689584">Spsz</span><span class="op" id="5689588">}</span><span class="op" id="5689589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689593">{</span><span class="string" id="5689594">&#34;pcsz&#34;</span><span class="op" id="5689600">,</span>&nbsp;<span class="ident" id="5689602">ph</span><span class="op" id="5689604">.</span><span class="ident" id="5689605">Pcsz</span><span class="op" id="5689609">}</span><span class="op" id="5689610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689613">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689617">f</span><span class="op" id="5689618">.</span><span class="ident" id="5689619">Sections</span>&nbsp;<span class="op" id="5689628">=</span>&nbsp;<span class="builtinfunc" id="5689630">make</span><span class="op" id="5689634">(</span><span class="op" id="5689635">[</span><span class="op" id="5689636">]</span><span class="op" id="5689637">*</span><span class="ident" id="5689638">Section</span><span class="op" id="5689645">,</span>&nbsp;<span class="num" id="5689647">5</span><span class="op" id="5689648">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689652">off</span>&nbsp;<span class="op" id="5689656">:=</span>&nbsp;<span class="builtintype" id="5689659">uint32</span><span class="op" id="5689665">(</span><span class="ident" id="5689666">f</span><span class="op" id="5689667">.</span><span class="ident" id="5689668">HdrSize</span><span class="op" id="5689675">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689679">for</span>&nbsp;<span class="ident" id="5689683">i</span><span class="op" id="5689684">,</span>&nbsp;<span class="ident" id="5689686">sect</span>&nbsp;<span class="op" id="5689691">:=</span>&nbsp;<span class="keyword" id="5689694">range</span>&nbsp;<span class="ident" id="5689700">sects</span>&nbsp;<span class="op" id="5689706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689710">s</span>&nbsp;<span class="op" id="5689712">:=</span>&nbsp;<span class="builtinfunc" id="5689715">new</span><span class="op" id="5689718">(</span><span class="ident" id="5689719">Section</span><span class="op" id="5689726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689730">s</span><span class="op" id="5689731">.</span><span class="ident" id="5689732">SectionHeader</span>&nbsp;<span class="op" id="5689746">=</span>&nbsp;<span class="ident" id="5689748">SectionHeader</span><span class="op" id="5689761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689766">Name</span><span class="op" id="5689770">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5689774">sect</span><span class="op" id="5689778">.</span><span class="ident" id="5689779">name</span><span class="op" id="5689783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689788">Size</span><span class="op" id="5689792">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5689796">sect</span><span class="op" id="5689800">.</span><span class="ident" id="5689801">size</span><span class="op" id="5689805">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689810">Offset</span><span class="op" id="5689816">:</span>&nbsp;<span class="ident" id="5689818">off</span><span class="op" id="5689821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689829">off</span>&nbsp;<span class="op" id="5689833">+=</span>&nbsp;<span class="ident" id="5689836">sect</span><span class="op" id="5689840">.</span><span class="ident" id="5689841">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689848">s</span><span class="op" id="5689849">.</span><span class="ident" id="5689850">sr</span>&nbsp;<span class="op" id="5689853">=</span>&nbsp;<span class="ident" id="5689855">io</span><span class="op" id="5689857">.</span><span class="ident" id="5689858">NewSectionReader</span><span class="op" id="5689874">(</span><span class="ident" id="5689875">r</span><span class="op" id="5689876">,</span>&nbsp;<span class="ident" id="5689878">int64</span><span class="op" id="5689883">(</span><span class="ident" id="5689884">s</span><span class="op" id="5689885">.</span><span class="ident" id="5689886">Offset</span><span class="op" id="5689892">)</span><span class="op" id="5689893">,</span>&nbsp;<span class="ident" id="5689895">int64</span><span class="op" id="5689900">(</span><span class="ident" id="5689901">s</span><span class="op" id="5689902">.</span><span class="ident" id="5689903">Size</span><span class="op" id="5689907">)</span><span class="op" id="5689908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689912">s</span><span class="op" id="5689913">.</span><span class="ident" id="5689914">ReaderAt</span>&nbsp;<span class="op" id="5689923">=</span>&nbsp;<span class="ident" id="5689925">s</span><span class="op" id="5689926">.</span><span class="ident" id="5689927">sr</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689932">f</span><span class="op" id="5689933">.</span><span class="ident" id="5689934">Sections</span><span class="op" id="5689942">[</span><span class="ident" id="5689943">i</span><span class="op" id="5689944">]</span>&nbsp;<span class="op" id="5689946">=</span>&nbsp;<span class="ident" id="5689948">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689955">return</span>&nbsp;<span class="ident" id="5689962">f</span><span class="op" id="5689963">,</span>&nbsp;<span class="ident" id="5689965">nil</span><br>
<span class="lineno"></span><span class="op" id="5689969">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5689972">func</span>&nbsp;<span class="ident" id="5689977">walksymtab</span><span class="op" id="5689987">(</span><span class="ident" id="5689988">data</span>&nbsp;<span class="op" id="5689993">[</span><span class="op" id="5689994">]</span><span class="builtintype" id="5689995">byte</span><span class="op" id="5689999">,</span>&nbsp;<span class="ident" id="5690001">ptrsz</span>&nbsp;<span class="builtintype" id="5690007">int</span><span class="op" id="5690010">,</span>&nbsp;<span class="ident" id="5690012">fn</span>&nbsp;<span class="keyword" id="5690015">func</span><span class="op" id="5690019">(</span><span class="ident" id="5690020">sym</span><span class="op" id="5690023">)</span>&nbsp;<span class="builtintype" id="5690025">error</span><span class="op" id="5690030">)</span>&nbsp;<span class="builtintype" id="5690032">error</span>&nbsp;<span class="op" id="5690038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690041">var</span>&nbsp;<span class="ident" id="5690045">order</span>&nbsp;<span class="ident" id="5690051">binary</span><span class="op" id="5690057">.</span><span class="ident" id="5690058">ByteOrder</span>&nbsp;<span class="op" id="5690068">=</span>&nbsp;<span class="ident" id="5690070">binary</span><span class="op" id="5690076">.</span><span class="ident" id="5690077">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690088">var</span>&nbsp;<span class="ident" id="5690092">s</span>&nbsp;<span class="ident" id="5690094">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690099">p</span>&nbsp;<span class="op" id="5690101">:=</span>&nbsp;<span class="ident" id="5690104">data</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690110">for</span>&nbsp;<span class="builtinfunc" id="5690114">len</span><span class="op" id="5690117">(</span><span class="ident" id="5690118">p</span><span class="op" id="5690119">)</span>&nbsp;<span class="op" id="5690121">&gt;=</span>&nbsp;<span class="num" id="5690124">4</span>&nbsp;<span class="op" id="5690126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690130">//&nbsp;Symbol&nbsp;type,&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690155">if</span>&nbsp;<span class="builtinfunc" id="5690158">len</span><span class="op" id="5690161">(</span><span class="ident" id="5690162">p</span><span class="op" id="5690163">)</span>&nbsp;<span class="op" id="5690165">&lt;</span>&nbsp;<span class="ident" id="5690167">ptrsz</span>&nbsp;<span class="op" id="5690173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690178">return</span>&nbsp;<span class="op" id="5690185">&amp;</span><span class="ident" id="5690186">formatError</span><span class="op" id="5690197">{</span><span class="builtinfunc" id="5690198">len</span><span class="op" id="5690201">(</span><span class="ident" id="5690202">data</span><span class="op" id="5690206">)</span><span class="op" id="5690207">,</span>&nbsp;<span class="string" id="5690209">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5690225">,</span>&nbsp;<span class="ident" id="5690227">nil</span><span class="op" id="5690230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690234">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690238">//&nbsp;fixed-width&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690261">if</span>&nbsp;<span class="ident" id="5690264">ptrsz</span>&nbsp;<span class="op" id="5690270">==</span>&nbsp;<span class="num" id="5690273">8</span>&nbsp;<span class="op" id="5690275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690280">s</span><span class="op" id="5690281">.</span><span class="ident" id="5690282">value</span>&nbsp;<span class="op" id="5690288">=</span>&nbsp;<span class="ident" id="5690290">order</span><span class="op" id="5690295">.</span><span class="ident" id="5690296">Uint64</span><span class="op" id="5690302">(</span><span class="ident" id="5690303">p</span><span class="op" id="5690304">[</span><span class="num" id="5690305">0</span><span class="op" id="5690306">:</span><span class="num" id="5690307">8</span><span class="op" id="5690308">]</span><span class="op" id="5690309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690314">p</span>&nbsp;<span class="op" id="5690316">=</span>&nbsp;<span class="ident" id="5690318">p</span><span class="op" id="5690319">[</span><span class="num" id="5690320">8</span><span class="op" id="5690321">:</span><span class="op" id="5690322">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690326">}</span>&nbsp;<span class="keyword" id="5690328">else</span>&nbsp;<span class="op" id="5690333">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690338">s</span><span class="op" id="5690339">.</span><span class="ident" id="5690340">value</span>&nbsp;<span class="op" id="5690346">=</span>&nbsp;<span class="ident" id="5690348">uint64</span><span class="op" id="5690354">(</span><span class="ident" id="5690355">order</span><span class="op" id="5690360">.</span><span class="ident" id="5690361">Uint32</span><span class="op" id="5690367">(</span><span class="ident" id="5690368">p</span><span class="op" id="5690369">[</span><span class="num" id="5690370">0</span><span class="op" id="5690371">:</span><span class="num" id="5690372">4</span><span class="op" id="5690373">]</span><span class="op" id="5690374">)</span><span class="op" id="5690375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690380">p</span>&nbsp;<span class="op" id="5690382">=</span>&nbsp;<span class="ident" id="5690384">p</span><span class="op" id="5690385">[</span><span class="num" id="5690386">4</span><span class="op" id="5690387">:</span><span class="op" id="5690388">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690397">var</span>&nbsp;<span class="ident" id="5690401">typ</span>&nbsp;<span class="builtintype" id="5690405">byte</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690412">typ</span>&nbsp;<span class="op" id="5690416">=</span>&nbsp;<span class="ident" id="5690418">p</span><span class="op" id="5690419">[</span><span class="num" id="5690420">0</span><span class="op" id="5690421">]</span>&nbsp;<span class="op" id="5690423">&amp;</span>&nbsp;<span class="num" id="5690425">0x7F</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690432">s</span><span class="op" id="5690433">.</span><span class="ident" id="5690434">typ</span>&nbsp;<span class="op" id="5690438">=</span>&nbsp;<span class="ident" id="5690440">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690446">p</span>&nbsp;<span class="op" id="5690448">=</span>&nbsp;<span class="ident" id="5690450">p</span><span class="op" id="5690451">[</span><span class="num" id="5690452">1</span><span class="op" id="5690453">:</span><span class="op" id="5690454">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690459">//&nbsp;Name.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690470">var</span>&nbsp;<span class="ident" id="5690474">i</span>&nbsp;<span class="builtintype" id="5690476">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690482">var</span>&nbsp;<span class="ident" id="5690486">nnul</span>&nbsp;<span class="builtintype" id="5690491">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690497">for</span>&nbsp;<span class="ident" id="5690501">i</span>&nbsp;<span class="op" id="5690503">=</span>&nbsp;<span class="num" id="5690505">0</span><span class="op" id="5690506">;</span>&nbsp;<span class="ident" id="5690508">i</span>&nbsp;<span class="op" id="5690510">&lt;</span>&nbsp;<span class="builtinfunc" id="5690512">len</span><span class="op" id="5690515">(</span><span class="ident" id="5690516">p</span><span class="op" id="5690517">)</span><span class="op" id="5690518">;</span>&nbsp;<span class="ident" id="5690520">i</span><span class="op" id="5690521">++</span>&nbsp;<span class="op" id="5690524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690529">if</span>&nbsp;<span class="ident" id="5690532">p</span><span class="op" id="5690533">[</span><span class="ident" id="5690534">i</span><span class="op" id="5690535">]</span>&nbsp;<span class="op" id="5690537">==</span>&nbsp;<span class="num" id="5690540">0</span>&nbsp;<span class="op" id="5690542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690548">nnul</span>&nbsp;<span class="op" id="5690553">=</span>&nbsp;<span class="num" id="5690555">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690561">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690578">switch</span>&nbsp;<span class="ident" id="5690585">typ</span>&nbsp;<span class="op" id="5690589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690593">case</span>&nbsp;<span class="string" id="5690598">&#39;z&#39;</span><span class="op" id="5690601">,</span>&nbsp;<span class="string" id="5690603">&#39;Z&#39;</span><span class="op" id="5690606">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690611">p</span>&nbsp;<span class="op" id="5690613">=</span>&nbsp;<span class="ident" id="5690615">p</span><span class="op" id="5690616">[</span><span class="ident" id="5690617">i</span><span class="op" id="5690618">+</span><span class="ident" id="5690619">nnul</span><span class="op" id="5690623">:</span><span class="op" id="5690624">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690629">for</span>&nbsp;<span class="ident" id="5690633">i</span>&nbsp;<span class="op" id="5690635">=</span>&nbsp;<span class="num" id="5690637">0</span><span class="op" id="5690638">;</span>&nbsp;<span class="ident" id="5690640">i</span><span class="op" id="5690641">+</span><span class="num" id="5690642">2</span>&nbsp;<span class="op" id="5690644">&lt;=</span>&nbsp;<span class="builtinfunc" id="5690647">len</span><span class="op" id="5690650">(</span><span class="ident" id="5690651">p</span><span class="op" id="5690652">)</span><span class="op" id="5690653">;</span>&nbsp;<span class="ident" id="5690655">i</span>&nbsp;<span class="op" id="5690657">+=</span>&nbsp;<span class="num" id="5690660">2</span>&nbsp;<span class="op" id="5690662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690668">if</span>&nbsp;<span class="ident" id="5690671">p</span><span class="op" id="5690672">[</span><span class="ident" id="5690673">i</span><span class="op" id="5690674">]</span>&nbsp;<span class="op" id="5690676">==</span>&nbsp;<span class="num" id="5690679">0</span>&nbsp;<span class="op" id="5690681">&amp;&amp;</span>&nbsp;<span class="ident" id="5690684">p</span><span class="op" id="5690685">[</span><span class="ident" id="5690686">i</span><span class="op" id="5690687">+</span><span class="num" id="5690688">1</span><span class="op" id="5690689">]</span>&nbsp;<span class="op" id="5690691">==</span>&nbsp;<span class="num" id="5690694">0</span>&nbsp;<span class="op" id="5690696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690703">nnul</span>&nbsp;<span class="op" id="5690708">=</span>&nbsp;<span class="num" id="5690710">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690717">break</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690740">if</span>&nbsp;<span class="builtinfunc" id="5690743">len</span><span class="op" id="5690746">(</span><span class="ident" id="5690747">p</span><span class="op" id="5690748">)</span>&nbsp;<span class="op" id="5690750">&lt;</span>&nbsp;<span class="ident" id="5690752">i</span><span class="op" id="5690753">+</span><span class="ident" id="5690754">nnul</span>&nbsp;<span class="op" id="5690759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690764">return</span>&nbsp;<span class="op" id="5690771">&amp;</span><span class="ident" id="5690772">formatError</span><span class="op" id="5690783">{</span><span class="builtinfunc" id="5690784">len</span><span class="op" id="5690787">(</span><span class="ident" id="5690788">data</span><span class="op" id="5690792">)</span><span class="op" id="5690793">,</span>&nbsp;<span class="string" id="5690795">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5690811">,</span>&nbsp;<span class="ident" id="5690813">nil</span><span class="op" id="5690816">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690824">s</span><span class="op" id="5690825">.</span><span class="ident" id="5690826">name</span>&nbsp;<span class="op" id="5690831">=</span>&nbsp;<span class="ident" id="5690833">p</span><span class="op" id="5690834">[</span><span class="num" id="5690835">0</span><span class="op" id="5690836">:</span><span class="ident" id="5690837">i</span><span class="op" id="5690838">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690842">i</span>&nbsp;<span class="op" id="5690844">+=</span>&nbsp;<span class="ident" id="5690847">nnul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690854">p</span>&nbsp;<span class="op" id="5690856">=</span>&nbsp;<span class="ident" id="5690858">p</span><span class="op" id="5690859">[</span><span class="ident" id="5690860">i</span><span class="op" id="5690861">:</span><span class="op" id="5690862">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690867">fn</span><span class="op" id="5690869">(</span><span class="ident" id="5690870">s</span><span class="op" id="5690871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690877">return</span>&nbsp;<span class="ident" id="5690884">nil</span><br>
<span class="lineno"></span><span class="op" id="5690888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="5690891">//&nbsp;NewTable&nbsp;decodes&nbsp;the&nbsp;Go&nbsp;symbol&nbsp;table&nbsp;in&nbsp;data,</span><br>
<span class="lineno"></span><span class="comment" id="5690940">//&nbsp;returning&nbsp;an&nbsp;in-memory&nbsp;representation.</span><br>
<span class="lineno"></span><span class="keyword" id="5690982">func</span>&nbsp;<span class="ident" id="5690987">newTable</span><span class="op" id="5690995">(</span><span class="ident" id="5690996">symtab</span>&nbsp;<span class="op" id="5691003">[</span><span class="op" id="5691004">]</span><span class="builtintype" id="5691005">byte</span><span class="op" id="5691009">,</span>&nbsp;<span class="ident" id="5691011">ptrsz</span>&nbsp;<span class="builtintype" id="5691017">int</span><span class="op" id="5691020">)</span>&nbsp;<span class="op" id="5691022">(</span><span class="op" id="5691023">[</span><span class="op" id="5691024">]</span><span class="ident" id="5691025">Sym</span><span class="op" id="5691028">,</span>&nbsp;<span class="builtintype" id="5691030">error</span><span class="op" id="5691035">)</span>&nbsp;<span class="op" id="5691037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691040">var</span>&nbsp;<span class="ident" id="5691044">n</span>&nbsp;<span class="builtintype" id="5691046">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691051">err</span>&nbsp;<span class="op" id="5691055">:=</span>&nbsp;<span class="ident" id="5691058">walksymtab</span><span class="op" id="5691068">(</span><span class="ident" id="5691069">symtab</span><span class="op" id="5691075">,</span>&nbsp;<span class="ident" id="5691077">ptrsz</span><span class="op" id="5691082">,</span>&nbsp;<span class="keyword" id="5691084">func</span><span class="op" id="5691088">(</span><span class="ident" id="5691089">s</span>&nbsp;<span class="ident" id="5691091">sym</span><span class="op" id="5691094">)</span>&nbsp;<span class="builtintype" id="5691096">error</span>&nbsp;<span class="op" id="5691102">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691106">n</span><span class="op" id="5691107">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691112">return</span>&nbsp;<span class="ident" id="5691119">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691124">}</span><span class="op" id="5691125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691128">if</span>&nbsp;<span class="ident" id="5691131">err</span>&nbsp;<span class="op" id="5691135">!=</span>&nbsp;<span class="ident" id="5691138">nil</span>&nbsp;<span class="op" id="5691142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691146">return</span>&nbsp;<span class="ident" id="5691153">nil</span><span class="op" id="5691156">,</span>&nbsp;<span class="ident" id="5691158">err</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691167">fname</span>&nbsp;<span class="op" id="5691173">:=</span>&nbsp;<span class="builtinfunc" id="5691176">make</span><span class="op" id="5691180">(</span><span class="keyword" id="5691181">map</span><span class="op" id="5691184">[</span><span class="builtintype" id="5691185">uint16</span><span class="op" id="5691191">]</span><span class="builtintype" id="5691192">string</span><span class="op" id="5691198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691201">syms</span>&nbsp;<span class="op" id="5691206">:=</span>&nbsp;<span class="builtinfunc" id="5691209">make</span><span class="op" id="5691213">(</span><span class="op" id="5691214">[</span><span class="op" id="5691215">]</span><span class="ident" id="5691216">Sym</span><span class="op" id="5691219">,</span>&nbsp;<span class="num" id="5691221">0</span><span class="op" id="5691222">,</span>&nbsp;<span class="ident" id="5691224">n</span><span class="op" id="5691225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691228">err</span>&nbsp;<span class="op" id="5691232">=</span>&nbsp;<span class="ident" id="5691234">walksymtab</span><span class="op" id="5691244">(</span><span class="ident" id="5691245">symtab</span><span class="op" id="5691251">,</span>&nbsp;<span class="ident" id="5691253">ptrsz</span><span class="op" id="5691258">,</span>&nbsp;<span class="keyword" id="5691260">func</span><span class="op" id="5691264">(</span><span class="ident" id="5691265">s</span>&nbsp;<span class="ident" id="5691267">sym</span><span class="op" id="5691270">)</span>&nbsp;<span class="builtintype" id="5691272">error</span>&nbsp;<span class="op" id="5691278">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691282">n</span>&nbsp;<span class="op" id="5691284">:=</span>&nbsp;<span class="builtinfunc" id="5691287">len</span><span class="op" id="5691290">(</span><span class="ident" id="5691291">syms</span><span class="op" id="5691295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691299">syms</span>&nbsp;<span class="op" id="5691304">=</span>&nbsp;<span class="ident" id="5691306">syms</span><span class="op" id="5691310">[</span><span class="num" id="5691311">0</span>&nbsp;<span class="op" id="5691313">:</span>&nbsp;<span class="ident" id="5691315">n</span><span class="op" id="5691316">+</span><span class="num" id="5691317">1</span><span class="op" id="5691318">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691322">ts</span>&nbsp;<span class="op" id="5691325">:=</span>&nbsp;<span class="op" id="5691328">&amp;</span><span class="ident" id="5691329">syms</span><span class="op" id="5691333">[</span><span class="ident" id="5691334">n</span><span class="op" id="5691335">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691339">ts</span><span class="op" id="5691341">.</span><span class="ident" id="5691342">Type</span>&nbsp;<span class="op" id="5691347">=</span>&nbsp;<span class="builtintype" id="5691349">rune</span><span class="op" id="5691353">(</span><span class="ident" id="5691354">s</span><span class="op" id="5691355">.</span><span class="ident" id="5691356">typ</span><span class="op" id="5691359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691363">ts</span><span class="op" id="5691365">.</span><span class="ident" id="5691366">Value</span>&nbsp;<span class="op" id="5691372">=</span>&nbsp;<span class="ident" id="5691374">s</span><span class="op" id="5691375">.</span><span class="ident" id="5691376">value</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691384">switch</span>&nbsp;<span class="ident" id="5691391">s</span><span class="op" id="5691392">.</span><span class="ident" id="5691393">typ</span>&nbsp;<span class="op" id="5691397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691401">default</span><span class="op" id="5691408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691413">ts</span><span class="op" id="5691415">.</span><span class="ident" id="5691416">Name</span>&nbsp;<span class="op" id="5691421">=</span>&nbsp;<span class="builtintype" id="5691423">string</span><span class="op" id="5691429">(</span><span class="ident" id="5691430">s</span><span class="op" id="5691431">.</span><span class="ident" id="5691432">name</span><span class="op" id="5691436">[</span><span class="op" id="5691437">:</span><span class="op" id="5691438">]</span><span class="op" id="5691439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691443">case</span>&nbsp;<span class="string" id="5691448">&#39;z&#39;</span><span class="op" id="5691451">,</span>&nbsp;<span class="string" id="5691453">&#39;Z&#39;</span><span class="op" id="5691456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691461">for</span>&nbsp;<span class="ident" id="5691465">i</span>&nbsp;<span class="op" id="5691467">:=</span>&nbsp;<span class="num" id="5691470">0</span><span class="op" id="5691471">;</span>&nbsp;<span class="ident" id="5691473">i</span>&nbsp;<span class="op" id="5691475">&lt;</span>&nbsp;<span class="builtinfunc" id="5691477">len</span><span class="op" id="5691480">(</span><span class="ident" id="5691481">s</span><span class="op" id="5691482">.</span><span class="ident" id="5691483">name</span><span class="op" id="5691487">)</span><span class="op" id="5691488">;</span>&nbsp;<span class="ident" id="5691490">i</span>&nbsp;<span class="op" id="5691492">+=</span>&nbsp;<span class="num" id="5691495">2</span>&nbsp;<span class="op" id="5691497">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691503">eltIdx</span>&nbsp;<span class="op" id="5691510">:=</span>&nbsp;<span class="ident" id="5691513">binary</span><span class="op" id="5691519">.</span><span class="ident" id="5691520">BigEndian</span><span class="op" id="5691529">.</span><span class="ident" id="5691530">Uint16</span><span class="op" id="5691536">(</span><span class="ident" id="5691537">s</span><span class="op" id="5691538">.</span><span class="ident" id="5691539">name</span><span class="op" id="5691543">[</span><span class="ident" id="5691544">i</span>&nbsp;<span class="op" id="5691546">:</span>&nbsp;<span class="ident" id="5691548">i</span><span class="op" id="5691549">+</span><span class="num" id="5691550">2</span><span class="op" id="5691551">]</span><span class="op" id="5691552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691558">elt</span><span class="op" id="5691561">,</span>&nbsp;<span class="ident" id="5691563">ok</span>&nbsp;<span class="op" id="5691566">:=</span>&nbsp;<span class="ident" id="5691569">fname</span><span class="op" id="5691574">[</span><span class="ident" id="5691575">eltIdx</span><span class="op" id="5691581">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691587">if</span>&nbsp;<span class="op" id="5691590">!</span><span class="ident" id="5691591">ok</span>&nbsp;<span class="op" id="5691594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691601">return</span>&nbsp;<span class="op" id="5691608">&amp;</span><span class="ident" id="5691609">formatError</span><span class="op" id="5691620">{</span><span class="op" id="5691621">-</span><span class="num" id="5691622">1</span><span class="op" id="5691623">,</span>&nbsp;<span class="string" id="5691625">&#34;bad&nbsp;filename&nbsp;code&#34;</span><span class="op" id="5691644">,</span>&nbsp;<span class="ident" id="5691646">eltIdx</span><span class="op" id="5691652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691658">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691664">if</span>&nbsp;<span class="ident" id="5691667">n</span>&nbsp;<span class="op" id="5691669">:=</span>&nbsp;<span class="builtinfunc" id="5691672">len</span><span class="op" id="5691675">(</span><span class="ident" id="5691676">ts</span><span class="op" id="5691678">.</span><span class="ident" id="5691679">Name</span><span class="op" id="5691683">)</span><span class="op" id="5691684">;</span>&nbsp;<span class="ident" id="5691686">n</span>&nbsp;<span class="op" id="5691688">&gt;</span>&nbsp;<span class="num" id="5691690">0</span>&nbsp;<span class="op" id="5691692">&amp;&amp;</span>&nbsp;<span class="ident" id="5691695">ts</span><span class="op" id="5691697">.</span><span class="ident" id="5691698">Name</span><span class="op" id="5691702">[</span><span class="ident" id="5691703">n</span><span class="op" id="5691704">-</span><span class="num" id="5691705">1</span><span class="op" id="5691706">]</span>&nbsp;<span class="op" id="5691708">!=</span>&nbsp;<span class="string" id="5691711">&#39;/&#39;</span>&nbsp;<span class="op" id="5691715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691722">ts</span><span class="op" id="5691724">.</span><span class="ident" id="5691725">Name</span>&nbsp;<span class="op" id="5691730">+=</span>&nbsp;<span class="string" id="5691733">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691747">ts</span><span class="op" id="5691749">.</span><span class="ident" id="5691750">Name</span>&nbsp;<span class="op" id="5691755">+=</span>&nbsp;<span class="ident" id="5691758">elt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691765">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691773">switch</span>&nbsp;<span class="ident" id="5691780">s</span><span class="op" id="5691781">.</span><span class="ident" id="5691782">typ</span>&nbsp;<span class="op" id="5691786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691790">case</span>&nbsp;<span class="string" id="5691795">&#39;f&#39;</span><span class="op" id="5691798">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691803">fname</span><span class="op" id="5691808">[</span><span class="builtintype" id="5691809">uint16</span><span class="op" id="5691815">(</span><span class="ident" id="5691816">s</span><span class="op" id="5691817">.</span><span class="ident" id="5691818">value</span><span class="op" id="5691823">)</span><span class="op" id="5691824">]</span>&nbsp;<span class="op" id="5691826">=</span>&nbsp;<span class="ident" id="5691828">ts</span><span class="op" id="5691830">.</span><span class="ident" id="5691831">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691838">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691842">return</span>&nbsp;<span class="ident" id="5691849">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691854">}</span><span class="op" id="5691855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691858">if</span>&nbsp;<span class="ident" id="5691861">err</span>&nbsp;<span class="op" id="5691865">!=</span>&nbsp;<span class="ident" id="5691868">nil</span>&nbsp;<span class="op" id="5691872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691876">return</span>&nbsp;<span class="ident" id="5691883">nil</span><span class="op" id="5691886">,</span>&nbsp;<span class="ident" id="5691888">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691893">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691897">return</span>&nbsp;<span class="ident" id="5691904">syms</span><span class="op" id="5691908">,</span>&nbsp;<span class="ident" id="5691910">nil</span><br>
<span class="lineno"></span><span class="op" id="5691914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5691917">//&nbsp;Symbols&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;table&nbsp;for&nbsp;f.</span><br>
<span class="lineno">305</span><span class="keyword" id="5691960">func</span>&nbsp;<span class="op" id="5691965">(</span><span class="ident" id="5691966">f</span>&nbsp;<span class="op" id="5691968">*</span><span class="ident" id="5691969">File</span><span class="op" id="5691973">)</span>&nbsp;<span class="ident" id="5691975">Symbols</span><span class="op" id="5691982">(</span><span class="op" id="5691983">)</span>&nbsp;<span class="op" id="5691985">(</span><span class="op" id="5691986">[</span><span class="op" id="5691987">]</span><span class="ident" id="5691988">Sym</span><span class="op" id="5691991">,</span>&nbsp;<span class="builtintype" id="5691993">error</span><span class="op" id="5691998">)</span>&nbsp;<span class="op" id="5692000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692003">symtabSection</span>&nbsp;<span class="op" id="5692017">:=</span>&nbsp;<span class="ident" id="5692020">f</span><span class="op" id="5692021">.</span><span class="ident" id="5692022">Section</span><span class="op" id="5692029">(</span><span class="string" id="5692030">&#34;syms&#34;</span><span class="op" id="5692036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692039">if</span>&nbsp;<span class="ident" id="5692042">symtabSection</span>&nbsp;<span class="op" id="5692056">==</span>&nbsp;<span class="ident" id="5692059">nil</span>&nbsp;<span class="op" id="5692063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692067">return</span>&nbsp;<span class="ident" id="5692074">nil</span><span class="op" id="5692077">,</span>&nbsp;<span class="ident" id="5692079">errors</span><span class="op" id="5692085">.</span><span class="ident" id="5692086">New</span><span class="op" id="5692089">(</span><span class="string" id="5692090">&#34;no&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5692109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692112">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692116">symtab</span><span class="op" id="5692122">,</span>&nbsp;<span class="ident" id="5692124">err</span>&nbsp;<span class="op" id="5692128">:=</span>&nbsp;<span class="ident" id="5692131">symtabSection</span><span class="op" id="5692144">.</span><span class="ident" id="5692145">Data</span><span class="op" id="5692149">(</span><span class="op" id="5692150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692153">if</span>&nbsp;<span class="ident" id="5692156">err</span>&nbsp;<span class="op" id="5692160">!=</span>&nbsp;<span class="ident" id="5692163">nil</span>&nbsp;<span class="op" id="5692167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692171">return</span>&nbsp;<span class="ident" id="5692178">nil</span><span class="op" id="5692181">,</span>&nbsp;<span class="ident" id="5692183">errors</span><span class="op" id="5692189">.</span><span class="ident" id="5692190">New</span><span class="op" id="5692193">(</span><span class="string" id="5692194">&#34;cannot&nbsp;load&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5692222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692225">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692229">return</span>&nbsp;<span class="ident" id="5692236">newTable</span><span class="op" id="5692244">(</span><span class="ident" id="5692245">symtab</span><span class="op" id="5692251">,</span>&nbsp;<span class="ident" id="5692253">f</span><span class="op" id="5692254">.</span><span class="ident" id="5692255">PtrSize</span><span class="op" id="5692262">)</span><br>
<span class="lineno"></span><span class="op" id="5692264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5692267">//&nbsp;Section&nbsp;returns&nbsp;a&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno">320</span><span class="comment" id="5692335">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5692354">func</span>&nbsp;<span class="op" id="5692359">(</span><span class="ident" id="5692360">f</span>&nbsp;<span class="op" id="5692362">*</span><span class="ident" id="5692363">File</span><span class="op" id="5692367">)</span>&nbsp;<span class="ident" id="5692369">Section</span><span class="op" id="5692376">(</span><span class="ident" id="5692377">name</span>&nbsp;<span class="builtintype" id="5692382">string</span><span class="op" id="5692388">)</span>&nbsp;<span class="op" id="5692390">*</span><span class="ident" id="5692391">Section</span>&nbsp;<span class="op" id="5692399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692402">for</span>&nbsp;<span class="ident" id="5692406">_</span><span class="op" id="5692407">,</span>&nbsp;<span class="ident" id="5692409">s</span>&nbsp;<span class="op" id="5692411">:=</span>&nbsp;<span class="keyword" id="5692414">range</span>&nbsp;<span class="ident" id="5692420">f</span><span class="op" id="5692421">.</span><span class="ident" id="5692422">Sections</span>&nbsp;<span class="op" id="5692431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692435">if</span>&nbsp;<span class="ident" id="5692438">s</span><span class="op" id="5692439">.</span><span class="ident" id="5692440">Name</span>&nbsp;<span class="op" id="5692445">==</span>&nbsp;<span class="ident" id="5692448">name</span>&nbsp;<span class="op" id="5692453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692458">return</span>&nbsp;<span class="ident" id="5692465">s</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692475">return</span>&nbsp;<span class="ident" id="5692482">nil</span><br>
<span class="lineno"></span><span class="op" id="5692486">}</span>
</div>
</body>
</html>
