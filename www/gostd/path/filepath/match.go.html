<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3211876">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3211931">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3211985">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3212036">package</span>&nbsp;<span class="ident" id="3212044">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3212054">import</span>&nbsp;<span class="op" id="3212061">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212064">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212074">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212080">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212091">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212099">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3212110">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3212125">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3212128">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3212189">var</span>&nbsp;<span class="ident" id="3212193">ErrBadPattern</span>&nbsp;<span class="op" id="3212207">=</span>&nbsp;<span class="ident" id="3212209">errors</span><span class="op" id="3212215">.</span><span class="ident" id="3212216">New</span><span class="op" id="3212219">(</span><span class="string" id="3212220">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3212245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3212248">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3212315">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3212341">//</span><br>
<span class="lineno"></span><span class="comment" id="3212344">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3212356">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3212369">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3212378">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3212443">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3212502">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3212542">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3212594">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3212657">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3212693">//</span><br>
<span class="lineno"></span><span class="comment" id="3212696">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3212716">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3212774">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3212810">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3212864">//</span><br>
<span class="lineno"></span><span class="comment" id="3212867">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3212937">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3213004">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3213021">//</span><br>
<span class="lineno"></span><span class="comment" id="3213024">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3213089">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3213108">//</span><br>
<span class="lineno"></span><span class="keyword" id="3213111">func</span>&nbsp;<span class="ident" id="3213116">Match</span><span class="op" id="3213121">(</span><span class="ident" id="3213122">pattern</span><span class="op" id="3213129">,</span>&nbsp;<span class="ident" id="3213131">name</span>&nbsp;<span class="builtintype" id="3213136">string</span><span class="op" id="3213142">)</span>&nbsp;<span class="op" id="3213144">(</span><span class="ident" id="3213145">matched</span>&nbsp;<span class="builtintype" id="3213153">bool</span><span class="op" id="3213157">,</span>&nbsp;<span class="ident" id="3213159">err</span>&nbsp;<span class="builtintype" id="3213163">error</span><span class="op" id="3213168">)</span>&nbsp;<span class="op" id="3213170">{</span><br>
<span class="lineno">45</span><span class="ident" id="3213172">Pattern</span><span class="op" id="3213179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213182">for</span>&nbsp;<span class="builtinfunc" id="3213186">len</span><span class="op" id="3213189">(</span><span class="ident" id="3213190">pattern</span><span class="op" id="3213197">)</span>&nbsp;<span class="op" id="3213199">&gt;</span>&nbsp;<span class="num" id="3213201">0</span>&nbsp;<span class="op" id="3213203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213207">var</span>&nbsp;<span class="ident" id="3213211">star</span>&nbsp;<span class="builtintype" id="3213216">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213223">var</span>&nbsp;<span class="ident" id="3213227">chunk</span>&nbsp;<span class="builtintype" id="3213233">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213242">star</span><span class="op" id="3213246">,</span>&nbsp;<span class="ident" id="3213248">chunk</span><span class="op" id="3213253">,</span>&nbsp;<span class="ident" id="3213255">pattern</span>&nbsp;<span class="op" id="3213263">=</span>&nbsp;<span class="ident" id="3213265">scanChunk</span><span class="op" id="3213274">(</span><span class="ident" id="3213275">pattern</span><span class="op" id="3213282">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213286">if</span>&nbsp;<span class="ident" id="3213289">star</span>&nbsp;<span class="op" id="3213294">&amp;&amp;</span>&nbsp;<span class="ident" id="3213297">chunk</span>&nbsp;<span class="op" id="3213303">==</span>&nbsp;<span class="string" id="3213306">&#34;&#34;</span>&nbsp;<span class="op" id="3213309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213314">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213373">return</span>&nbsp;<span class="ident" id="3213380">strings</span><span class="op" id="3213387">.</span><span class="ident" id="3213388">Index</span><span class="op" id="3213393">(</span><span class="ident" id="3213394">name</span><span class="op" id="3213398">,</span>&nbsp;<span class="builtintype" id="3213400">string</span><span class="op" id="3213406">(</span><span class="ident" id="3213407">Separator</span><span class="op" id="3213416">)</span><span class="op" id="3213417">)</span>&nbsp;<span class="op" id="3213419">&lt;</span>&nbsp;<span class="num" id="3213421">0</span><span class="op" id="3213422">,</span>&nbsp;<span class="ident" id="3213424">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213434">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213475">t</span><span class="op" id="3213476">,</span>&nbsp;<span class="ident" id="3213478">ok</span><span class="op" id="3213480">,</span>&nbsp;<span class="ident" id="3213482">err</span>&nbsp;<span class="op" id="3213486">:=</span>&nbsp;<span class="ident" id="3213489">matchChunk</span><span class="op" id="3213499">(</span><span class="ident" id="3213500">chunk</span><span class="op" id="3213505">,</span>&nbsp;<span class="ident" id="3213507">name</span><span class="op" id="3213511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213515">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213580">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213650">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213670">if</span>&nbsp;<span class="ident" id="3213673">ok</span>&nbsp;<span class="op" id="3213676">&amp;&amp;</span>&nbsp;<span class="op" id="3213679">(</span><span class="builtinfunc" id="3213680">len</span><span class="op" id="3213683">(</span><span class="ident" id="3213684">t</span><span class="op" id="3213685">)</span>&nbsp;<span class="op" id="3213687">==</span>&nbsp;<span class="num" id="3213690">0</span>&nbsp;<span class="op" id="3213692">||</span>&nbsp;<span class="builtinfunc" id="3213695">len</span><span class="op" id="3213698">(</span><span class="ident" id="3213699">pattern</span><span class="op" id="3213706">)</span>&nbsp;<span class="op" id="3213708">&gt;</span>&nbsp;<span class="num" id="3213710">0</span><span class="op" id="3213711">)</span>&nbsp;<span class="op" id="3213713">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213718">name</span>&nbsp;<span class="op" id="3213723">=</span>&nbsp;<span class="ident" id="3213725">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213730">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213745">if</span>&nbsp;<span class="ident" id="3213748">err</span>&nbsp;<span class="op" id="3213752">!=</span>&nbsp;<span class="ident" id="3213755">nil</span>&nbsp;<span class="op" id="3213759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213764">return</span>&nbsp;<span class="builtintype" id="3213771">false</span><span class="op" id="3213776">,</span>&nbsp;<span class="ident" id="3213778">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213788">if</span>&nbsp;<span class="ident" id="3213791">star</span>&nbsp;<span class="op" id="3213796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213801">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213842">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213863">for</span>&nbsp;<span class="ident" id="3213867">i</span>&nbsp;<span class="op" id="3213869">:=</span>&nbsp;<span class="num" id="3213872">0</span><span class="op" id="3213873">;</span>&nbsp;<span class="ident" id="3213875">i</span>&nbsp;<span class="op" id="3213877">&lt;</span>&nbsp;<span class="builtinfunc" id="3213879">len</span><span class="op" id="3213882">(</span><span class="ident" id="3213883">name</span><span class="op" id="3213887">)</span>&nbsp;<span class="op" id="3213889">&amp;&amp;</span>&nbsp;<span class="ident" id="3213892">name</span><span class="op" id="3213896">[</span><span class="ident" id="3213897">i</span><span class="op" id="3213898">]</span>&nbsp;<span class="op" id="3213900">!=</span>&nbsp;<span class="ident" id="3213903">Separator</span><span class="op" id="3213912">;</span>&nbsp;<span class="ident" id="3213914">i</span><span class="op" id="3213915">++</span>&nbsp;<span class="op" id="3213918">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213924">t</span><span class="op" id="3213925">,</span>&nbsp;<span class="ident" id="3213927">ok</span><span class="op" id="3213929">,</span>&nbsp;<span class="ident" id="3213931">err</span>&nbsp;<span class="op" id="3213935">:=</span>&nbsp;<span class="ident" id="3213938">matchChunk</span><span class="op" id="3213948">(</span><span class="ident" id="3213949">chunk</span><span class="op" id="3213954">,</span>&nbsp;<span class="ident" id="3213956">name</span><span class="op" id="3213960">[</span><span class="ident" id="3213961">i</span><span class="op" id="3213962">+</span><span class="num" id="3213963">1</span><span class="op" id="3213964">:</span><span class="op" id="3213965">]</span><span class="op" id="3213966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213972">if</span>&nbsp;<span class="ident" id="3213975">ok</span>&nbsp;<span class="op" id="3213978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213985">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214050">if</span>&nbsp;<span class="builtinfunc" id="3214053">len</span><span class="op" id="3214056">(</span><span class="ident" id="3214057">pattern</span><span class="op" id="3214064">)</span>&nbsp;<span class="op" id="3214066">==</span>&nbsp;<span class="num" id="3214069">0</span>&nbsp;<span class="op" id="3214071">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3214074">len</span><span class="op" id="3214077">(</span><span class="ident" id="3214078">t</span><span class="op" id="3214079">)</span>&nbsp;<span class="op" id="3214081">&gt;</span>&nbsp;<span class="num" id="3214083">0</span>&nbsp;<span class="op" id="3214085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214093">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214114">name</span>&nbsp;<span class="op" id="3214119">=</span>&nbsp;<span class="ident" id="3214121">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214128">continue</span>&nbsp;<span class="ident" id="3214137">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214155">if</span>&nbsp;<span class="ident" id="3214158">err</span>&nbsp;<span class="op" id="3214162">!=</span>&nbsp;<span class="ident" id="3214165">nil</span>&nbsp;<span class="op" id="3214169">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214176">return</span>&nbsp;<span class="builtintype" id="3214183">false</span><span class="op" id="3214188">,</span>&nbsp;<span class="ident" id="3214190">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214211">return</span>&nbsp;<span class="builtintype" id="3214218">false</span><span class="op" id="3214223">,</span>&nbsp;<span class="ident" id="3214225">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214233">return</span>&nbsp;<span class="builtinfunc" id="3214240">len</span><span class="op" id="3214243">(</span><span class="ident" id="3214244">name</span><span class="op" id="3214248">)</span>&nbsp;<span class="op" id="3214250">==</span>&nbsp;<span class="num" id="3214253">0</span><span class="op" id="3214254">,</span>&nbsp;<span class="ident" id="3214256">nil</span><br>
<span class="lineno"></span><span class="op" id="3214260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3214263">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3214337">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3214369">func</span>&nbsp;<span class="ident" id="3214374">scanChunk</span><span class="op" id="3214383">(</span><span class="ident" id="3214384">pattern</span>&nbsp;<span class="builtintype" id="3214392">string</span><span class="op" id="3214398">)</span>&nbsp;<span class="op" id="3214400">(</span><span class="ident" id="3214401">star</span>&nbsp;<span class="builtintype" id="3214406">bool</span><span class="op" id="3214410">,</span>&nbsp;<span class="ident" id="3214412">chunk</span><span class="op" id="3214417">,</span>&nbsp;<span class="ident" id="3214419">rest</span>&nbsp;<span class="builtintype" id="3214424">string</span><span class="op" id="3214430">)</span>&nbsp;<span class="op" id="3214432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214435">for</span>&nbsp;<span class="builtinfunc" id="3214439">len</span><span class="op" id="3214442">(</span><span class="ident" id="3214443">pattern</span><span class="op" id="3214450">)</span>&nbsp;<span class="op" id="3214452">&gt;</span>&nbsp;<span class="num" id="3214454">0</span>&nbsp;<span class="op" id="3214456">&amp;&amp;</span>&nbsp;<span class="ident" id="3214459">pattern</span><span class="op" id="3214466">[</span><span class="num" id="3214467">0</span><span class="op" id="3214468">]</span>&nbsp;<span class="op" id="3214470">==</span>&nbsp;<span class="string" id="3214473">&#39;*&#39;</span>&nbsp;<span class="op" id="3214477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214481">pattern</span>&nbsp;<span class="op" id="3214489">=</span>&nbsp;<span class="ident" id="3214491">pattern</span><span class="op" id="3214498">[</span><span class="num" id="3214499">1</span><span class="op" id="3214500">:</span><span class="op" id="3214501">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214505">star</span>&nbsp;<span class="op" id="3214510">=</span>&nbsp;<span class="builtintype" id="3214512">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214521">inrange</span>&nbsp;<span class="op" id="3214529">:=</span>&nbsp;<span class="builtintype" id="3214532">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214539">var</span>&nbsp;<span class="ident" id="3214543">i</span>&nbsp;<span class="builtintype" id="3214545">int</span><br>
<span class="lineno"></span><span class="ident" id="3214549">Scan</span><span class="op" id="3214553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214556">for</span>&nbsp;<span class="ident" id="3214560">i</span>&nbsp;<span class="op" id="3214562">=</span>&nbsp;<span class="num" id="3214564">0</span><span class="op" id="3214565">;</span>&nbsp;<span class="ident" id="3214567">i</span>&nbsp;<span class="op" id="3214569">&lt;</span>&nbsp;<span class="builtinfunc" id="3214571">len</span><span class="op" id="3214574">(</span><span class="ident" id="3214575">pattern</span><span class="op" id="3214582">)</span><span class="op" id="3214583">;</span>&nbsp;<span class="ident" id="3214585">i</span><span class="op" id="3214586">++</span>&nbsp;<span class="op" id="3214589">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214593">switch</span>&nbsp;<span class="ident" id="3214600">pattern</span><span class="op" id="3214607">[</span><span class="ident" id="3214608">i</span><span class="op" id="3214609">]</span>&nbsp;<span class="op" id="3214611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214615">case</span>&nbsp;<span class="string" id="3214620">&#39;\\&#39;</span><span class="op" id="3214624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214629">if</span>&nbsp;<span class="ident" id="3214632">runtime</span><span class="op" id="3214639">.</span><span class="ident" id="3214640">GOOS</span>&nbsp;<span class="op" id="3214645">!=</span>&nbsp;<span class="string" id="3214648">&#34;windows&#34;</span>&nbsp;<span class="op" id="3214658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3214664">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214719">if</span>&nbsp;<span class="ident" id="3214722">i</span><span class="op" id="3214723">+</span><span class="num" id="3214724">1</span>&nbsp;<span class="op" id="3214726">&lt;</span>&nbsp;<span class="builtinfunc" id="3214728">len</span><span class="op" id="3214731">(</span><span class="ident" id="3214732">pattern</span><span class="op" id="3214739">)</span>&nbsp;<span class="op" id="3214741">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214748">i</span><span class="op" id="3214749">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214765">case</span>&nbsp;<span class="string" id="3214770">&#39;[&#39;</span><span class="op" id="3214773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214778">inrange</span>&nbsp;<span class="op" id="3214786">=</span>&nbsp;<span class="builtintype" id="3214788">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214795">case</span>&nbsp;<span class="string" id="3214800">&#39;]&#39;</span><span class="op" id="3214803">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214808">inrange</span>&nbsp;<span class="op" id="3214816">=</span>&nbsp;<span class="builtintype" id="3214818">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214826">case</span>&nbsp;<span class="string" id="3214831">&#39;*&#39;</span><span class="op" id="3214834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214839">if</span>&nbsp;<span class="op" id="3214842">!</span><span class="ident" id="3214843">inrange</span>&nbsp;<span class="op" id="3214851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214857">break</span>&nbsp;<span class="ident" id="3214863">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214881">return</span>&nbsp;<span class="ident" id="3214888">star</span><span class="op" id="3214892">,</span>&nbsp;<span class="ident" id="3214894">pattern</span><span class="op" id="3214901">[</span><span class="num" id="3214902">0</span><span class="op" id="3214903">:</span><span class="ident" id="3214904">i</span><span class="op" id="3214905">]</span><span class="op" id="3214906">,</span>&nbsp;<span class="ident" id="3214908">pattern</span><span class="op" id="3214915">[</span><span class="ident" id="3214916">i</span><span class="op" id="3214917">:</span><span class="op" id="3214918">]</span><br>
<span class="lineno"></span><span class="op" id="3214920">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3214923">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3214986">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3215045">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3215120">func</span>&nbsp;<span class="ident" id="3215125">matchChunk</span><span class="op" id="3215135">(</span><span class="ident" id="3215136">chunk</span><span class="op" id="3215141">,</span>&nbsp;<span class="ident" id="3215143">s</span>&nbsp;<span class="builtintype" id="3215145">string</span><span class="op" id="3215151">)</span>&nbsp;<span class="op" id="3215153">(</span><span class="ident" id="3215154">rest</span>&nbsp;<span class="builtintype" id="3215159">string</span><span class="op" id="3215165">,</span>&nbsp;<span class="ident" id="3215167">ok</span>&nbsp;<span class="builtintype" id="3215170">bool</span><span class="op" id="3215174">,</span>&nbsp;<span class="ident" id="3215176">err</span>&nbsp;<span class="builtintype" id="3215180">error</span><span class="op" id="3215185">)</span>&nbsp;<span class="op" id="3215187">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215190">for</span>&nbsp;<span class="builtinfunc" id="3215194">len</span><span class="op" id="3215197">(</span><span class="ident" id="3215198">chunk</span><span class="op" id="3215203">)</span>&nbsp;<span class="op" id="3215205">&gt;</span>&nbsp;<span class="num" id="3215207">0</span>&nbsp;<span class="op" id="3215209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215213">if</span>&nbsp;<span class="builtinfunc" id="3215216">len</span><span class="op" id="3215219">(</span><span class="ident" id="3215220">s</span><span class="op" id="3215221">)</span>&nbsp;<span class="op" id="3215223">==</span>&nbsp;<span class="num" id="3215226">0</span>&nbsp;<span class="op" id="3215228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215233">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3215242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215246">switch</span>&nbsp;<span class="ident" id="3215253">chunk</span><span class="op" id="3215258">[</span><span class="num" id="3215259">0</span><span class="op" id="3215260">]</span>&nbsp;<span class="op" id="3215262">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215266">case</span>&nbsp;<span class="string" id="3215271">&#39;[&#39;</span><span class="op" id="3215274">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3215279">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215301">r</span><span class="op" id="3215302">,</span>&nbsp;<span class="ident" id="3215304">n</span>&nbsp;<span class="op" id="3215306">:=</span>&nbsp;<span class="ident" id="3215309">utf8</span><span class="op" id="3215313">.</span><span class="ident" id="3215314">DecodeRuneInString</span><span class="op" id="3215332">(</span><span class="ident" id="3215333">s</span><span class="op" id="3215334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215339">s</span>&nbsp;<span class="op" id="3215341">=</span>&nbsp;<span class="ident" id="3215343">s</span><span class="op" id="3215344">[</span><span class="ident" id="3215345">n</span><span class="op" id="3215346">:</span><span class="op" id="3215347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215352">chunk</span>&nbsp;<span class="op" id="3215358">=</span>&nbsp;<span class="ident" id="3215360">chunk</span><span class="op" id="3215365">[</span><span class="num" id="3215366">1</span><span class="op" id="3215367">:</span><span class="op" id="3215368">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3215373">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3215434">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215480">if</span>&nbsp;<span class="builtinfunc" id="3215483">len</span><span class="op" id="3215486">(</span><span class="ident" id="3215487">chunk</span><span class="op" id="3215492">)</span>&nbsp;<span class="op" id="3215494">==</span>&nbsp;<span class="num" id="3215497">0</span>&nbsp;<span class="op" id="3215499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215505">err</span>&nbsp;<span class="op" id="3215509">=</span>&nbsp;<span class="ident" id="3215511">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215529">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3215539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3215544">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215567">negated</span>&nbsp;<span class="op" id="3215575">:=</span>&nbsp;<span class="ident" id="3215578">chunk</span><span class="op" id="3215583">[</span><span class="num" id="3215584">0</span><span class="op" id="3215585">]</span>&nbsp;<span class="op" id="3215587">==</span>&nbsp;<span class="string" id="3215590">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215597">if</span>&nbsp;<span class="ident" id="3215600">negated</span>&nbsp;<span class="op" id="3215608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215614">chunk</span>&nbsp;<span class="op" id="3215620">=</span>&nbsp;<span class="ident" id="3215622">chunk</span><span class="op" id="3215627">[</span><span class="num" id="3215628">1</span><span class="op" id="3215629">:</span><span class="op" id="3215630">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3215635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3215640">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215663">match</span>&nbsp;<span class="op" id="3215669">:=</span>&nbsp;<span class="builtintype" id="3215672">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215681">nrange</span>&nbsp;<span class="op" id="3215688">:=</span>&nbsp;<span class="num" id="3215691">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215696">for</span>&nbsp;<span class="op" id="3215700">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215706">if</span>&nbsp;<span class="builtinfunc" id="3215709">len</span><span class="op" id="3215712">(</span><span class="ident" id="3215713">chunk</span><span class="op" id="3215718">)</span>&nbsp;<span class="op" id="3215720">&gt;</span>&nbsp;<span class="num" id="3215722">0</span>&nbsp;<span class="op" id="3215724">&amp;&amp;</span>&nbsp;<span class="ident" id="3215727">chunk</span><span class="op" id="3215732">[</span><span class="num" id="3215733">0</span><span class="op" id="3215734">]</span>&nbsp;<span class="op" id="3215736">==</span>&nbsp;<span class="string" id="3215739">&#39;]&#39;</span>&nbsp;<span class="op" id="3215743">&amp;&amp;</span>&nbsp;<span class="ident" id="3215746">nrange</span>&nbsp;<span class="op" id="3215753">&gt;</span>&nbsp;<span class="num" id="3215755">0</span>&nbsp;<span class="op" id="3215757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215764">chunk</span>&nbsp;<span class="op" id="3215770">=</span>&nbsp;<span class="ident" id="3215772">chunk</span><span class="op" id="3215777">[</span><span class="num" id="3215778">1</span><span class="op" id="3215779">:</span><span class="op" id="3215780">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215787">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3215797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215803">var</span>&nbsp;<span class="ident" id="3215807">lo</span><span class="op" id="3215809">,</span>&nbsp;<span class="ident" id="3215811">hi</span>&nbsp;<span class="builtintype" id="3215814">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215823">if</span>&nbsp;<span class="ident" id="3215826">lo</span><span class="op" id="3215828">,</span>&nbsp;<span class="ident" id="3215830">chunk</span><span class="op" id="3215835">,</span>&nbsp;<span class="ident" id="3215837">err</span>&nbsp;<span class="op" id="3215841">=</span>&nbsp;<span class="ident" id="3215843">getEsc</span><span class="op" id="3215849">(</span><span class="ident" id="3215850">chunk</span><span class="op" id="3215855">)</span><span class="op" id="3215856">;</span>&nbsp;<span class="ident" id="3215858">err</span>&nbsp;<span class="op" id="3215862">!=</span>&nbsp;<span class="ident" id="3215865">nil</span>&nbsp;<span class="op" id="3215869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215876">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3215887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215893">hi</span>&nbsp;<span class="op" id="3215896">=</span>&nbsp;<span class="ident" id="3215898">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215905">if</span>&nbsp;<span class="ident" id="3215908">chunk</span><span class="op" id="3215913">[</span><span class="num" id="3215914">0</span><span class="op" id="3215915">]</span>&nbsp;<span class="op" id="3215917">==</span>&nbsp;<span class="string" id="3215920">&#39;-&#39;</span>&nbsp;<span class="op" id="3215924">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215931">if</span>&nbsp;<span class="ident" id="3215934">hi</span><span class="op" id="3215936">,</span>&nbsp;<span class="ident" id="3215938">chunk</span><span class="op" id="3215943">,</span>&nbsp;<span class="ident" id="3215945">err</span>&nbsp;<span class="op" id="3215949">=</span>&nbsp;<span class="ident" id="3215951">getEsc</span><span class="op" id="3215957">(</span><span class="ident" id="3215958">chunk</span><span class="op" id="3215963">[</span><span class="num" id="3215964">1</span><span class="op" id="3215965">:</span><span class="op" id="3215966">]</span><span class="op" id="3215967">)</span><span class="op" id="3215968">;</span>&nbsp;<span class="ident" id="3215970">err</span>&nbsp;<span class="op" id="3215974">!=</span>&nbsp;<span class="ident" id="3215977">nil</span>&nbsp;<span class="op" id="3215981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3215989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216013">if</span>&nbsp;<span class="ident" id="3216016">lo</span>&nbsp;<span class="op" id="3216019">&lt;=</span>&nbsp;<span class="ident" id="3216022">r</span>&nbsp;<span class="op" id="3216024">&amp;&amp;</span>&nbsp;<span class="ident" id="3216027">r</span>&nbsp;<span class="op" id="3216029">&lt;=</span>&nbsp;<span class="ident" id="3216032">hi</span>&nbsp;<span class="op" id="3216035">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216042">match</span>&nbsp;<span class="op" id="3216048">=</span>&nbsp;<span class="builtintype" id="3216050">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216065">nrange</span><span class="op" id="3216071">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216082">if</span>&nbsp;<span class="ident" id="3216085">match</span>&nbsp;<span class="op" id="3216091">==</span>&nbsp;<span class="ident" id="3216094">negated</span>&nbsp;<span class="op" id="3216102">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216108">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216123">case</span>&nbsp;<span class="string" id="3216128">&#39;?&#39;</span><span class="op" id="3216131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216136">if</span>&nbsp;<span class="ident" id="3216139">s</span><span class="op" id="3216140">[</span><span class="num" id="3216141">0</span><span class="op" id="3216142">]</span>&nbsp;<span class="op" id="3216144">==</span>&nbsp;<span class="ident" id="3216147">Separator</span>&nbsp;<span class="op" id="3216157">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216163">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216178">_</span><span class="op" id="3216179">,</span>&nbsp;<span class="ident" id="3216181">n</span>&nbsp;<span class="op" id="3216183">:=</span>&nbsp;<span class="ident" id="3216186">utf8</span><span class="op" id="3216190">.</span><span class="ident" id="3216191">DecodeRuneInString</span><span class="op" id="3216209">(</span><span class="ident" id="3216210">s</span><span class="op" id="3216211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216216">s</span>&nbsp;<span class="op" id="3216218">=</span>&nbsp;<span class="ident" id="3216220">s</span><span class="op" id="3216221">[</span><span class="ident" id="3216222">n</span><span class="op" id="3216223">:</span><span class="op" id="3216224">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216229">chunk</span>&nbsp;<span class="op" id="3216235">=</span>&nbsp;<span class="ident" id="3216237">chunk</span><span class="op" id="3216242">[</span><span class="num" id="3216243">1</span><span class="op" id="3216244">:</span><span class="op" id="3216245">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216250">case</span>&nbsp;<span class="string" id="3216255">&#39;\\&#39;</span><span class="op" id="3216259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216264">if</span>&nbsp;<span class="ident" id="3216267">runtime</span><span class="op" id="3216274">.</span><span class="ident" id="3216275">GOOS</span>&nbsp;<span class="op" id="3216280">!=</span>&nbsp;<span class="string" id="3216283">&#34;windows&#34;</span>&nbsp;<span class="op" id="3216293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216299">chunk</span>&nbsp;<span class="op" id="3216305">=</span>&nbsp;<span class="ident" id="3216307">chunk</span><span class="op" id="3216312">[</span><span class="num" id="3216313">1</span><span class="op" id="3216314">:</span><span class="op" id="3216315">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216321">if</span>&nbsp;<span class="builtinfunc" id="3216324">len</span><span class="op" id="3216327">(</span><span class="ident" id="3216328">chunk</span><span class="op" id="3216333">)</span>&nbsp;<span class="op" id="3216335">==</span>&nbsp;<span class="num" id="3216338">0</span>&nbsp;<span class="op" id="3216340">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216347">err</span>&nbsp;<span class="op" id="3216351">=</span>&nbsp;<span class="ident" id="3216353">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216372">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216393">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216408">default</span><span class="op" id="3216415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216420">if</span>&nbsp;<span class="ident" id="3216423">chunk</span><span class="op" id="3216428">[</span><span class="num" id="3216429">0</span><span class="op" id="3216430">]</span>&nbsp;<span class="op" id="3216432">!=</span>&nbsp;<span class="ident" id="3216435">s</span><span class="op" id="3216436">[</span><span class="num" id="3216437">0</span><span class="op" id="3216438">]</span>&nbsp;<span class="op" id="3216440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216446">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216456">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216461">s</span>&nbsp;<span class="op" id="3216463">=</span>&nbsp;<span class="ident" id="3216465">s</span><span class="op" id="3216466">[</span><span class="num" id="3216467">1</span><span class="op" id="3216468">:</span><span class="op" id="3216469">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216474">chunk</span>&nbsp;<span class="op" id="3216480">=</span>&nbsp;<span class="ident" id="3216482">chunk</span><span class="op" id="3216487">[</span><span class="num" id="3216488">1</span><span class="op" id="3216489">:</span><span class="op" id="3216490">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216500">return</span>&nbsp;<span class="ident" id="3216507">s</span><span class="op" id="3216508">,</span>&nbsp;<span class="builtintype" id="3216510">true</span><span class="op" id="3216514">,</span>&nbsp;<span class="ident" id="3216516">nil</span><br>
<span class="lineno">200</span><span class="op" id="3216520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3216523">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3216602">func</span>&nbsp;<span class="ident" id="3216607">getEsc</span><span class="op" id="3216613">(</span><span class="ident" id="3216614">chunk</span>&nbsp;<span class="builtintype" id="3216620">string</span><span class="op" id="3216626">)</span>&nbsp;<span class="op" id="3216628">(</span><span class="ident" id="3216629">r</span>&nbsp;<span class="builtintype" id="3216631">rune</span><span class="op" id="3216635">,</span>&nbsp;<span class="ident" id="3216637">nchunk</span>&nbsp;<span class="builtintype" id="3216644">string</span><span class="op" id="3216650">,</span>&nbsp;<span class="ident" id="3216652">err</span>&nbsp;<span class="builtintype" id="3216656">error</span><span class="op" id="3216661">)</span>&nbsp;<span class="op" id="3216663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216666">if</span>&nbsp;<span class="builtinfunc" id="3216669">len</span><span class="op" id="3216672">(</span><span class="ident" id="3216673">chunk</span><span class="op" id="3216678">)</span>&nbsp;<span class="op" id="3216680">==</span>&nbsp;<span class="num" id="3216683">0</span>&nbsp;<span class="op" id="3216685">||</span>&nbsp;<span class="ident" id="3216688">chunk</span><span class="op" id="3216693">[</span><span class="num" id="3216694">0</span><span class="op" id="3216695">]</span>&nbsp;<span class="op" id="3216697">==</span>&nbsp;<span class="string" id="3216700">&#39;-&#39;</span>&nbsp;<span class="op" id="3216704">||</span>&nbsp;<span class="ident" id="3216707">chunk</span><span class="op" id="3216712">[</span><span class="num" id="3216713">0</span><span class="op" id="3216714">]</span>&nbsp;<span class="op" id="3216716">==</span>&nbsp;<span class="string" id="3216719">&#39;]&#39;</span>&nbsp;<span class="op" id="3216723">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216727">err</span>&nbsp;<span class="op" id="3216731">=</span>&nbsp;<span class="ident" id="3216733">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216749">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216760">if</span>&nbsp;<span class="ident" id="3216763">chunk</span><span class="op" id="3216768">[</span><span class="num" id="3216769">0</span><span class="op" id="3216770">]</span>&nbsp;<span class="op" id="3216772">==</span>&nbsp;<span class="string" id="3216775">&#39;\\&#39;</span>&nbsp;<span class="op" id="3216780">&amp;&amp;</span>&nbsp;<span class="ident" id="3216783">runtime</span><span class="op" id="3216790">.</span><span class="ident" id="3216791">GOOS</span>&nbsp;<span class="op" id="3216796">!=</span>&nbsp;<span class="string" id="3216799">&#34;windows&#34;</span>&nbsp;<span class="op" id="3216809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216813">chunk</span>&nbsp;<span class="op" id="3216819">=</span>&nbsp;<span class="ident" id="3216821">chunk</span><span class="op" id="3216826">[</span><span class="num" id="3216827">1</span><span class="op" id="3216828">:</span><span class="op" id="3216829">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216833">if</span>&nbsp;<span class="builtinfunc" id="3216836">len</span><span class="op" id="3216839">(</span><span class="ident" id="3216840">chunk</span><span class="op" id="3216845">)</span>&nbsp;<span class="op" id="3216847">==</span>&nbsp;<span class="num" id="3216850">0</span>&nbsp;<span class="op" id="3216852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216857">err</span>&nbsp;<span class="op" id="3216861">=</span>&nbsp;<span class="ident" id="3216863">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216880">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216892">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216895">r</span><span class="op" id="3216896">,</span>&nbsp;<span class="ident" id="3216898">n</span>&nbsp;<span class="op" id="3216900">:=</span>&nbsp;<span class="ident" id="3216903">utf8</span><span class="op" id="3216907">.</span><span class="ident" id="3216908">DecodeRuneInString</span><span class="op" id="3216926">(</span><span class="ident" id="3216927">chunk</span><span class="op" id="3216932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216935">if</span>&nbsp;<span class="ident" id="3216938">r</span>&nbsp;<span class="op" id="3216940">==</span>&nbsp;<span class="ident" id="3216943">utf8</span><span class="op" id="3216947">.</span><span class="ident" id="3216948">RuneError</span>&nbsp;<span class="op" id="3216958">&amp;&amp;</span>&nbsp;<span class="ident" id="3216961">n</span>&nbsp;<span class="op" id="3216963">==</span>&nbsp;<span class="num" id="3216966">1</span>&nbsp;<span class="op" id="3216968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216972">err</span>&nbsp;<span class="op" id="3216976">=</span>&nbsp;<span class="ident" id="3216978">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216996">nchunk</span>&nbsp;<span class="op" id="3217003">=</span>&nbsp;<span class="ident" id="3217005">chunk</span><span class="op" id="3217010">[</span><span class="ident" id="3217011">n</span><span class="op" id="3217012">:</span><span class="op" id="3217013">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217016">if</span>&nbsp;<span class="builtinfunc" id="3217019">len</span><span class="op" id="3217022">(</span><span class="ident" id="3217023">nchunk</span><span class="op" id="3217029">)</span>&nbsp;<span class="op" id="3217031">==</span>&nbsp;<span class="num" id="3217034">0</span>&nbsp;<span class="op" id="3217036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217040">err</span>&nbsp;<span class="op" id="3217044">=</span>&nbsp;<span class="ident" id="3217046">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217064">return</span><br>
<span class="lineno"></span><span class="op" id="3217071">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3217074">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3217137">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3217205">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3217273">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3217323">//</span><br>
<span class="lineno"></span><span class="comment" id="3217326">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3217401">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3217468">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3217485">func</span>&nbsp;<span class="ident" id="3217490">Glob</span><span class="op" id="3217494">(</span><span class="ident" id="3217495">pattern</span>&nbsp;<span class="builtintype" id="3217503">string</span><span class="op" id="3217509">)</span>&nbsp;<span class="op" id="3217511">(</span><span class="ident" id="3217512">matches</span>&nbsp;<span class="op" id="3217520">[</span><span class="op" id="3217521">]</span><span class="builtintype" id="3217522">string</span><span class="op" id="3217528">,</span>&nbsp;<span class="ident" id="3217530">err</span>&nbsp;<span class="builtintype" id="3217534">error</span><span class="op" id="3217539">)</span>&nbsp;<span class="op" id="3217541">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217544">if</span>&nbsp;<span class="op" id="3217547">!</span><span class="ident" id="3217548">hasMeta</span><span class="op" id="3217555">(</span><span class="ident" id="3217556">pattern</span><span class="op" id="3217563">)</span>&nbsp;<span class="op" id="3217565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217569">if</span>&nbsp;<span class="ident" id="3217572">_</span><span class="op" id="3217573">,</span>&nbsp;<span class="ident" id="3217575">err</span>&nbsp;<span class="op" id="3217579">=</span>&nbsp;<span class="ident" id="3217581">os</span><span class="op" id="3217583">.</span><span class="ident" id="3217584">Lstat</span><span class="op" id="3217589">(</span><span class="ident" id="3217590">pattern</span><span class="op" id="3217597">)</span><span class="op" id="3217598">;</span>&nbsp;<span class="ident" id="3217600">err</span>&nbsp;<span class="op" id="3217604">!=</span>&nbsp;<span class="ident" id="3217607">nil</span>&nbsp;<span class="op" id="3217611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217616">return</span>&nbsp;<span class="ident" id="3217623">nil</span><span class="op" id="3217626">,</span>&nbsp;<span class="ident" id="3217628">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217638">return</span>&nbsp;<span class="op" id="3217645">[</span><span class="op" id="3217646">]</span><span class="builtintype" id="3217647">string</span><span class="op" id="3217653">{</span><span class="ident" id="3217654">pattern</span><span class="op" id="3217661">}</span><span class="op" id="3217662">,</span>&nbsp;<span class="ident" id="3217664">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217673">dir</span><span class="op" id="3217676">,</span>&nbsp;<span class="ident" id="3217678">file</span>&nbsp;<span class="op" id="3217683">:=</span>&nbsp;<span class="ident" id="3217686">Split</span><span class="op" id="3217691">(</span><span class="ident" id="3217692">pattern</span><span class="op" id="3217699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217702">switch</span>&nbsp;<span class="ident" id="3217709">dir</span>&nbsp;<span class="op" id="3217713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217716">case</span>&nbsp;<span class="string" id="3217721">&#34;&#34;</span><span class="op" id="3217723">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217727">dir</span>&nbsp;<span class="op" id="3217731">=</span>&nbsp;<span class="string" id="3217733">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217738">case</span>&nbsp;<span class="builtintype" id="3217743">string</span><span class="op" id="3217749">(</span><span class="ident" id="3217750">Separator</span><span class="op" id="3217759">)</span><span class="op" id="3217760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3217764">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217776">default</span><span class="op" id="3217783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217787">dir</span>&nbsp;<span class="op" id="3217791">=</span>&nbsp;<span class="ident" id="3217793">dir</span><span class="op" id="3217796">[</span><span class="num" id="3217797">0</span>&nbsp;<span class="op" id="3217799">:</span>&nbsp;<span class="builtinfunc" id="3217801">len</span><span class="op" id="3217804">(</span><span class="ident" id="3217805">dir</span><span class="op" id="3217808">)</span><span class="op" id="3217809">-</span><span class="num" id="3217810">1</span><span class="op" id="3217811">]</span>&nbsp;<span class="comment" id="3217813">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217849">if</span>&nbsp;<span class="op" id="3217852">!</span><span class="ident" id="3217853">hasMeta</span><span class="op" id="3217860">(</span><span class="ident" id="3217861">dir</span><span class="op" id="3217864">)</span>&nbsp;<span class="op" id="3217866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217870">return</span>&nbsp;<span class="ident" id="3217877">glob</span><span class="op" id="3217881">(</span><span class="ident" id="3217882">dir</span><span class="op" id="3217885">,</span>&nbsp;<span class="ident" id="3217887">file</span><span class="op" id="3217891">,</span>&nbsp;<span class="ident" id="3217893">nil</span><span class="op" id="3217896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217899">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217903">var</span>&nbsp;<span class="ident" id="3217907">m</span>&nbsp;<span class="op" id="3217909">[</span><span class="op" id="3217910">]</span><span class="builtintype" id="3217911">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217919">m</span><span class="op" id="3217920">,</span>&nbsp;<span class="ident" id="3217922">err</span>&nbsp;<span class="op" id="3217926">=</span>&nbsp;<span class="ident" id="3217928">Glob</span><span class="op" id="3217932">(</span><span class="ident" id="3217933">dir</span><span class="op" id="3217936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217939">if</span>&nbsp;<span class="ident" id="3217942">err</span>&nbsp;<span class="op" id="3217946">!=</span>&nbsp;<span class="ident" id="3217949">nil</span>&nbsp;<span class="op" id="3217953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217957">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217968">for</span>&nbsp;<span class="ident" id="3217972">_</span><span class="op" id="3217973">,</span>&nbsp;<span class="ident" id="3217975">d</span>&nbsp;<span class="op" id="3217977">:=</span>&nbsp;<span class="keyword" id="3217980">range</span>&nbsp;<span class="ident" id="3217986">m</span>&nbsp;<span class="op" id="3217988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217992">matches</span><span class="op" id="3217999">,</span>&nbsp;<span class="ident" id="3218001">err</span>&nbsp;<span class="op" id="3218005">=</span>&nbsp;<span class="ident" id="3218007">glob</span><span class="op" id="3218011">(</span><span class="ident" id="3218012">d</span><span class="op" id="3218013">,</span>&nbsp;<span class="ident" id="3218015">file</span><span class="op" id="3218019">,</span>&nbsp;<span class="ident" id="3218021">matches</span><span class="op" id="3218028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218032">if</span>&nbsp;<span class="ident" id="3218035">err</span>&nbsp;<span class="op" id="3218039">!=</span>&nbsp;<span class="ident" id="3218042">nil</span>&nbsp;<span class="op" id="3218046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218051">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218066">return</span><br>
<span class="lineno"></span><span class="op" id="3218073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3218076">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3218141">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3218200">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3218260">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3218295">func</span>&nbsp;<span class="ident" id="3218300">glob</span><span class="op" id="3218304">(</span><span class="ident" id="3218305">dir</span><span class="op" id="3218308">,</span>&nbsp;<span class="ident" id="3218310">pattern</span>&nbsp;<span class="builtintype" id="3218318">string</span><span class="op" id="3218324">,</span>&nbsp;<span class="ident" id="3218326">matches</span>&nbsp;<span class="op" id="3218334">[</span><span class="op" id="3218335">]</span><span class="builtintype" id="3218336">string</span><span class="op" id="3218342">)</span>&nbsp;<span class="op" id="3218344">(</span><span class="ident" id="3218345">m</span>&nbsp;<span class="op" id="3218347">[</span><span class="op" id="3218348">]</span><span class="builtintype" id="3218349">string</span><span class="op" id="3218355">,</span>&nbsp;<span class="ident" id="3218357">e</span>&nbsp;<span class="builtintype" id="3218359">error</span><span class="op" id="3218364">)</span>&nbsp;<span class="op" id="3218366">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218369">m</span>&nbsp;<span class="op" id="3218371">=</span>&nbsp;<span class="ident" id="3218373">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218382">fi</span><span class="op" id="3218384">,</span>&nbsp;<span class="ident" id="3218386">err</span>&nbsp;<span class="op" id="3218390">:=</span>&nbsp;<span class="ident" id="3218393">os</span><span class="op" id="3218395">.</span><span class="ident" id="3218396">Stat</span><span class="op" id="3218400">(</span><span class="ident" id="3218401">dir</span><span class="op" id="3218404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218407">if</span>&nbsp;<span class="ident" id="3218410">err</span>&nbsp;<span class="op" id="3218414">!=</span>&nbsp;<span class="ident" id="3218417">nil</span>&nbsp;<span class="op" id="3218421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218425">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218433">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218436">if</span>&nbsp;<span class="op" id="3218439">!</span><span class="ident" id="3218440">fi</span><span class="op" id="3218442">.</span><span class="ident" id="3218443">IsDir</span><span class="op" id="3218448">(</span><span class="op" id="3218449">)</span>&nbsp;<span class="op" id="3218451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218455">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218466">d</span><span class="op" id="3218467">,</span>&nbsp;<span class="ident" id="3218469">err</span>&nbsp;<span class="op" id="3218473">:=</span>&nbsp;<span class="ident" id="3218476">os</span><span class="op" id="3218478">.</span><span class="ident" id="3218479">Open</span><span class="op" id="3218483">(</span><span class="ident" id="3218484">dir</span><span class="op" id="3218487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218490">if</span>&nbsp;<span class="ident" id="3218493">err</span>&nbsp;<span class="op" id="3218497">!=</span>&nbsp;<span class="ident" id="3218500">nil</span>&nbsp;<span class="op" id="3218504">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218519">defer</span>&nbsp;<span class="ident" id="3218525">d</span><span class="op" id="3218526">.</span><span class="ident" id="3218527">Close</span><span class="op" id="3218532">(</span><span class="op" id="3218533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218537">names</span><span class="op" id="3218542">,</span>&nbsp;<span class="ident" id="3218544">_</span>&nbsp;<span class="op" id="3218546">:=</span>&nbsp;<span class="ident" id="3218549">d</span><span class="op" id="3218550">.</span><span class="ident" id="3218551">Readdirnames</span><span class="op" id="3218563">(</span><span class="op" id="3218564">-</span><span class="num" id="3218565">1</span><span class="op" id="3218566">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218569">sort</span><span class="op" id="3218573">.</span><span class="ident" id="3218574">Strings</span><span class="op" id="3218581">(</span><span class="ident" id="3218582">names</span><span class="op" id="3218587">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218591">for</span>&nbsp;<span class="ident" id="3218595">_</span><span class="op" id="3218596">,</span>&nbsp;<span class="ident" id="3218598">n</span>&nbsp;<span class="op" id="3218600">:=</span>&nbsp;<span class="keyword" id="3218603">range</span>&nbsp;<span class="ident" id="3218609">names</span>&nbsp;<span class="op" id="3218615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218619">matched</span><span class="op" id="3218626">,</span>&nbsp;<span class="ident" id="3218628">err</span>&nbsp;<span class="op" id="3218632">:=</span>&nbsp;<span class="ident" id="3218635">Match</span><span class="op" id="3218640">(</span><span class="ident" id="3218641">pattern</span><span class="op" id="3218648">,</span>&nbsp;<span class="ident" id="3218650">n</span><span class="op" id="3218651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218655">if</span>&nbsp;<span class="ident" id="3218658">err</span>&nbsp;<span class="op" id="3218662">!=</span>&nbsp;<span class="ident" id="3218665">nil</span>&nbsp;<span class="op" id="3218669">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218674">return</span>&nbsp;<span class="ident" id="3218681">m</span><span class="op" id="3218682">,</span>&nbsp;<span class="ident" id="3218684">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218694">if</span>&nbsp;<span class="ident" id="3218697">matched</span>&nbsp;<span class="op" id="3218705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218710">m</span>&nbsp;<span class="op" id="3218712">=</span>&nbsp;<span class="builtinfunc" id="3218714">append</span><span class="op" id="3218720">(</span><span class="ident" id="3218721">m</span><span class="op" id="3218722">,</span>&nbsp;<span class="ident" id="3218724">Join</span><span class="op" id="3218728">(</span><span class="ident" id="3218729">dir</span><span class="op" id="3218732">,</span>&nbsp;<span class="ident" id="3218734">n</span><span class="op" id="3218735">)</span><span class="op" id="3218736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218740">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218746">return</span><br>
<span class="lineno"></span><span class="op" id="3218753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3218756">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3218825">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3218849">func</span>&nbsp;<span class="ident" id="3218854">hasMeta</span><span class="op" id="3218861">(</span><span class="ident" id="3218862">path</span>&nbsp;<span class="builtintype" id="3218867">string</span><span class="op" id="3218873">)</span>&nbsp;<span class="builtintype" id="3218875">bool</span>&nbsp;<span class="op" id="3218880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218883">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218948">return</span>&nbsp;<span class="ident" id="3218955">strings</span><span class="op" id="3218962">.</span><span class="ident" id="3218963">IndexAny</span><span class="op" id="3218971">(</span><span class="ident" id="3218972">path</span><span class="op" id="3218976">,</span>&nbsp;<span class="string" id="3218978">&#34;*?[&#34;</span><span class="op" id="3218983">)</span>&nbsp;<span class="op" id="3218985">&gt;=</span>&nbsp;<span class="num" id="3218988">0</span><br>
<span class="lineno"></span><span class="op" id="3218990">}</span>
</div>
</body>
</html>
