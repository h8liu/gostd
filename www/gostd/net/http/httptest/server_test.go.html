<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httptest</h2>
<ul>
<li><a href="/gostd/net/http/httptest/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/httptest/recorder.go.html">recorder.go</a></li>
<li><a href="/gostd/net/http/httptest/recorder_test.go.html">recorder_test.go</a></li>
<li><a href="/gostd/net/http/httptest/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/httptest/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7083791">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7083846">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7083900">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7083951">package</span>&nbsp;<span class="ident" id="7083959">httptest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7083969">import</span>&nbsp;<span class="op" id="7083976">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083979">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083992">&#34;net/http&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7084004">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7084014">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7084017">func</span>&nbsp;<span class="ident" id="7084022">TestServer</span><span class="op" id="7084032">(</span><span class="ident" id="7084033">t</span>&nbsp;<span class="op" id="7084035">*</span><span class="ident" id="7084036">testing</span><span class="op" id="7084043">.</span><span class="ident" id="7084044">T</span><span class="op" id="7084045">)</span>&nbsp;<span class="op" id="7084047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084050">ts</span>&nbsp;<span class="op" id="7084053">:=</span>&nbsp;<span class="ident" id="7084056">NewServer</span><span class="op" id="7084065">(</span><span class="ident" id="7084066">http</span><span class="op" id="7084070">.</span><span class="ident" id="7084071">HandlerFunc</span><span class="op" id="7084082">(</span><span class="keyword" id="7084083">func</span><span class="op" id="7084087">(</span><span class="ident" id="7084088">w</span>&nbsp;<span class="ident" id="7084090">http</span><span class="op" id="7084094">.</span><span class="ident" id="7084095">ResponseWriter</span><span class="op" id="7084109">,</span>&nbsp;<span class="ident" id="7084111">r</span>&nbsp;<span class="op" id="7084113">*</span><span class="ident" id="7084114">http</span><span class="op" id="7084118">.</span><span class="ident" id="7084119">Request</span><span class="op" id="7084126">)</span>&nbsp;<span class="op" id="7084128">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084132">w</span><span class="op" id="7084133">.</span><span class="ident" id="7084134">Write</span><span class="op" id="7084139">(</span><span class="op" id="7084140">[</span><span class="op" id="7084141">]</span><span class="builtintype" id="7084142">byte</span><span class="op" id="7084146">(</span><span class="string" id="7084147">&#34;hello&#34;</span><span class="op" id="7084154">)</span><span class="op" id="7084155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084158">}</span><span class="op" id="7084159">)</span><span class="op" id="7084160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084163">defer</span>&nbsp;<span class="ident" id="7084169">ts</span><span class="op" id="7084171">.</span><span class="ident" id="7084172">Close</span><span class="op" id="7084177">(</span><span class="op" id="7084178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084181">res</span><span class="op" id="7084184">,</span>&nbsp;<span class="ident" id="7084186">err</span>&nbsp;<span class="op" id="7084190">:=</span>&nbsp;<span class="ident" id="7084193">http</span><span class="op" id="7084197">.</span><span class="ident" id="7084198">Get</span><span class="op" id="7084201">(</span><span class="ident" id="7084202">ts</span><span class="op" id="7084204">.</span><span class="ident" id="7084205">URL</span><span class="op" id="7084208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084211">if</span>&nbsp;<span class="ident" id="7084214">err</span>&nbsp;<span class="op" id="7084218">!=</span>&nbsp;<span class="ident" id="7084221">nil</span>&nbsp;<span class="op" id="7084225">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084229">t</span><span class="op" id="7084230">.</span><span class="ident" id="7084231">Fatal</span><span class="op" id="7084236">(</span><span class="ident" id="7084237">err</span><span class="op" id="7084240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084246">got</span><span class="op" id="7084249">,</span>&nbsp;<span class="ident" id="7084251">err</span>&nbsp;<span class="op" id="7084255">:=</span>&nbsp;<span class="ident" id="7084258">ioutil</span><span class="op" id="7084264">.</span><span class="ident" id="7084265">ReadAll</span><span class="op" id="7084272">(</span><span class="ident" id="7084273">res</span><span class="op" id="7084276">.</span><span class="ident" id="7084277">Body</span><span class="op" id="7084281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084284">if</span>&nbsp;<span class="ident" id="7084287">err</span>&nbsp;<span class="op" id="7084291">!=</span>&nbsp;<span class="ident" id="7084294">nil</span>&nbsp;<span class="op" id="7084298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084302">t</span><span class="op" id="7084303">.</span><span class="ident" id="7084304">Fatal</span><span class="op" id="7084309">(</span><span class="ident" id="7084310">err</span><span class="op" id="7084313">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084319">if</span>&nbsp;<span class="builtintype" id="7084322">string</span><span class="op" id="7084328">(</span><span class="ident" id="7084329">got</span><span class="op" id="7084332">)</span>&nbsp;<span class="op" id="7084334">!=</span>&nbsp;<span class="string" id="7084337">&#34;hello&#34;</span>&nbsp;<span class="op" id="7084345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084349">t</span><span class="op" id="7084350">.</span><span class="ident" id="7084351">Errorf</span><span class="op" id="7084357">(</span><span class="string" id="7084358">&#34;got&nbsp;%q,&nbsp;want&nbsp;hello&#34;</span><span class="op" id="7084378">,</span>&nbsp;<span class="builtintype" id="7084380">string</span><span class="op" id="7084386">(</span><span class="ident" id="7084387">got</span><span class="op" id="7084390">)</span><span class="op" id="7084391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084394">}</span><br>
<span class="lineno"></span><span class="op" id="7084396">}</span>
</div>
</body>
</html>
