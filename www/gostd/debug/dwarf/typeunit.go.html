<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5264685">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5264741">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5264795">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5264846">package</span>&nbsp;<span class="ident" id="5264854">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5264861">import</span>&nbsp;<span class="op" id="5264868">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5264871">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5264878">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5264888">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5264891">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5264962">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5265030">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5265096">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5265164">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5265204">type</span>&nbsp;<span class="ident" id="5265209">typeUnit</span>&nbsp;<span class="keyword" id="5265218">struct</span>&nbsp;<span class="op" id="5265225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265228">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265234">toff</span>&nbsp;&nbsp;<span class="ident" id="5265240">Offset</span>&nbsp;<span class="comment" id="5265247">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265289">name</span>&nbsp;&nbsp;<span class="builtintype" id="5265295">string</span>&nbsp;<span class="comment" id="5265302">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265335">cache</span>&nbsp;<span class="ident" id="5265341">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5265348">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5265381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5265384">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5265417">func</span>&nbsp;<span class="op" id="5265422">(</span><span class="ident" id="5265423">d</span>&nbsp;<span class="op" id="5265425">*</span><span class="ident" id="5265426">Data</span><span class="op" id="5265430">)</span>&nbsp;<span class="ident" id="5265432">parseTypes</span><span class="op" id="5265442">(</span><span class="ident" id="5265443">name</span>&nbsp;<span class="builtintype" id="5265448">string</span><span class="op" id="5265454">,</span>&nbsp;<span class="ident" id="5265456">types</span>&nbsp;<span class="op" id="5265462">[</span><span class="op" id="5265463">]</span><span class="builtintype" id="5265464">byte</span><span class="op" id="5265468">)</span>&nbsp;<span class="builtintype" id="5265470">error</span>&nbsp;<span class="op" id="5265476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265479">b</span>&nbsp;<span class="op" id="5265481">:=</span>&nbsp;<span class="ident" id="5265484">makeBuf</span><span class="op" id="5265491">(</span><span class="ident" id="5265492">d</span><span class="op" id="5265493">,</span>&nbsp;<span class="ident" id="5265495">unknownFormat</span><span class="op" id="5265508">{</span><span class="op" id="5265509">}</span><span class="op" id="5265510">,</span>&nbsp;<span class="ident" id="5265512">name</span><span class="op" id="5265516">,</span>&nbsp;<span class="num" id="5265518">0</span><span class="op" id="5265519">,</span>&nbsp;<span class="ident" id="5265521">types</span><span class="op" id="5265526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265529">for</span>&nbsp;<span class="builtinfunc" id="5265533">len</span><span class="op" id="5265536">(</span><span class="ident" id="5265537">b</span><span class="op" id="5265538">.</span><span class="ident" id="5265539">data</span><span class="op" id="5265543">)</span>&nbsp;<span class="op" id="5265545">&gt;</span>&nbsp;<span class="num" id="5265547">0</span>&nbsp;<span class="op" id="5265549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265553">base</span>&nbsp;<span class="op" id="5265558">:=</span>&nbsp;<span class="ident" id="5265561">b</span><span class="op" id="5265562">.</span><span class="ident" id="5265563">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265569">dwarf64</span>&nbsp;<span class="op" id="5265577">:=</span>&nbsp;<span class="builtintype" id="5265580">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265588">n</span>&nbsp;<span class="op" id="5265590">:=</span>&nbsp;<span class="ident" id="5265593">b</span><span class="op" id="5265594">.</span><span class="builtintype" id="5265595">uint32</span><span class="op" id="5265601">(</span><span class="op" id="5265602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265606">if</span>&nbsp;<span class="ident" id="5265609">n</span>&nbsp;<span class="op" id="5265611">==</span>&nbsp;<span class="num" id="5265614">0xffffffff</span>&nbsp;<span class="op" id="5265625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265630">n64</span>&nbsp;<span class="op" id="5265634">:=</span>&nbsp;<span class="ident" id="5265637">b</span><span class="op" id="5265638">.</span><span class="ident" id="5265639">uint64</span><span class="op" id="5265645">(</span><span class="op" id="5265646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265651">if</span>&nbsp;<span class="ident" id="5265654">n64</span>&nbsp;<span class="op" id="5265658">!=</span>&nbsp;<span class="ident" id="5265661">uint64</span><span class="op" id="5265667">(</span><span class="builtintype" id="5265668">uint32</span><span class="op" id="5265674">(</span><span class="ident" id="5265675">n64</span><span class="op" id="5265678">)</span><span class="op" id="5265679">)</span>&nbsp;<span class="op" id="5265681">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265687">b</span><span class="op" id="5265688">.</span><span class="builtintype" id="5265689">error</span><span class="op" id="5265694">(</span><span class="string" id="5265695">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5265722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265728">return</span>&nbsp;<span class="ident" id="5265735">b</span><span class="op" id="5265736">.</span><span class="ident" id="5265737">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265749">n</span>&nbsp;<span class="op" id="5265751">=</span>&nbsp;<span class="builtintype" id="5265753">uint32</span><span class="op" id="5265759">(</span><span class="ident" id="5265760">n64</span><span class="op" id="5265763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265768">dwarf64</span>&nbsp;<span class="op" id="5265776">=</span>&nbsp;<span class="builtintype" id="5265778">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265789">hdroff</span>&nbsp;<span class="op" id="5265796">:=</span>&nbsp;<span class="ident" id="5265799">b</span><span class="op" id="5265800">.</span><span class="ident" id="5265801">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265807">vers</span>&nbsp;<span class="op" id="5265812">:=</span>&nbsp;<span class="ident" id="5265815">b</span><span class="op" id="5265816">.</span><span class="builtintype" id="5265817">uint16</span><span class="op" id="5265823">(</span><span class="op" id="5265824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265828">if</span>&nbsp;<span class="ident" id="5265831">vers</span>&nbsp;<span class="op" id="5265836">!=</span>&nbsp;<span class="num" id="5265839">4</span>&nbsp;<span class="op" id="5265841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265846">b</span><span class="op" id="5265847">.</span><span class="builtintype" id="5265848">error</span><span class="op" id="5265853">(</span><span class="string" id="5265854">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5265883">+</span>&nbsp;<span class="ident" id="5265885">strconv</span><span class="op" id="5265892">.</span><span class="ident" id="5265893">Itoa</span><span class="op" id="5265897">(</span><span class="builtintype" id="5265898">int</span><span class="op" id="5265901">(</span><span class="ident" id="5265902">vers</span><span class="op" id="5265906">)</span><span class="op" id="5265907">)</span><span class="op" id="5265908">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265913">return</span>&nbsp;<span class="ident" id="5265920">b</span><span class="op" id="5265921">.</span><span class="ident" id="5265922">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265932">var</span>&nbsp;<span class="ident" id="5265936">ao</span>&nbsp;<span class="builtintype" id="5265939">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265948">if</span>&nbsp;<span class="op" id="5265951">!</span><span class="ident" id="5265952">dwarf64</span>&nbsp;<span class="op" id="5265960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265965">ao</span>&nbsp;<span class="op" id="5265968">=</span>&nbsp;<span class="ident" id="5265970">b</span><span class="op" id="5265971">.</span><span class="builtintype" id="5265972">uint32</span><span class="op" id="5265978">(</span><span class="op" id="5265979">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265983">}</span>&nbsp;<span class="keyword" id="5265985">else</span>&nbsp;<span class="op" id="5265990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265995">ao64</span>&nbsp;<span class="op" id="5266000">:=</span>&nbsp;<span class="ident" id="5266003">b</span><span class="op" id="5266004">.</span><span class="ident" id="5266005">uint64</span><span class="op" id="5266011">(</span><span class="op" id="5266012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266017">if</span>&nbsp;<span class="ident" id="5266020">ao64</span>&nbsp;<span class="op" id="5266025">!=</span>&nbsp;<span class="ident" id="5266028">uint64</span><span class="op" id="5266034">(</span><span class="builtintype" id="5266035">uint32</span><span class="op" id="5266041">(</span><span class="ident" id="5266042">ao64</span><span class="op" id="5266046">)</span><span class="op" id="5266047">)</span>&nbsp;<span class="op" id="5266049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266055">b</span><span class="op" id="5266056">.</span><span class="builtintype" id="5266057">error</span><span class="op" id="5266062">(</span><span class="string" id="5266063">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5266097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266103">return</span>&nbsp;<span class="ident" id="5266110">b</span><span class="op" id="5266111">.</span><span class="ident" id="5266112">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266124">ao</span>&nbsp;<span class="op" id="5266127">=</span>&nbsp;<span class="builtintype" id="5266129">uint32</span><span class="op" id="5266135">(</span><span class="ident" id="5266136">ao64</span><span class="op" id="5266140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266148">atable</span><span class="op" id="5266154">,</span>&nbsp;<span class="ident" id="5266156">err</span>&nbsp;<span class="op" id="5266160">:=</span>&nbsp;<span class="ident" id="5266163">d</span><span class="op" id="5266164">.</span><span class="ident" id="5266165">parseAbbrev</span><span class="op" id="5266176">(</span><span class="ident" id="5266177">ao</span><span class="op" id="5266179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266183">if</span>&nbsp;<span class="ident" id="5266186">err</span>&nbsp;<span class="op" id="5266190">!=</span>&nbsp;<span class="ident" id="5266193">nil</span>&nbsp;<span class="op" id="5266197">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266202">return</span>&nbsp;<span class="ident" id="5266209">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266219">asize</span>&nbsp;<span class="op" id="5266225">:=</span>&nbsp;<span class="ident" id="5266228">b</span><span class="op" id="5266229">.</span><span class="builtintype" id="5266230">uint8</span><span class="op" id="5266235">(</span><span class="op" id="5266236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266240">sig</span>&nbsp;<span class="op" id="5266244">:=</span>&nbsp;<span class="ident" id="5266247">b</span><span class="op" id="5266248">.</span><span class="ident" id="5266249">uint64</span><span class="op" id="5266255">(</span><span class="op" id="5266256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266261">var</span>&nbsp;<span class="ident" id="5266265">toff</span>&nbsp;<span class="builtintype" id="5266270">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266279">if</span>&nbsp;<span class="op" id="5266282">!</span><span class="ident" id="5266283">dwarf64</span>&nbsp;<span class="op" id="5266291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266296">toff</span>&nbsp;<span class="op" id="5266301">=</span>&nbsp;<span class="ident" id="5266303">b</span><span class="op" id="5266304">.</span><span class="builtintype" id="5266305">uint32</span><span class="op" id="5266311">(</span><span class="op" id="5266312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266316">}</span>&nbsp;<span class="keyword" id="5266318">else</span>&nbsp;<span class="op" id="5266323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266328">to64</span>&nbsp;<span class="op" id="5266333">:=</span>&nbsp;<span class="ident" id="5266336">b</span><span class="op" id="5266337">.</span><span class="ident" id="5266338">uint64</span><span class="op" id="5266344">(</span><span class="op" id="5266345">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266350">if</span>&nbsp;<span class="ident" id="5266353">to64</span>&nbsp;<span class="op" id="5266358">!=</span>&nbsp;<span class="ident" id="5266361">uint64</span><span class="op" id="5266367">(</span><span class="builtintype" id="5266368">uint32</span><span class="op" id="5266374">(</span><span class="ident" id="5266375">to64</span><span class="op" id="5266379">)</span><span class="op" id="5266380">)</span>&nbsp;<span class="op" id="5266382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266388">b</span><span class="op" id="5266389">.</span><span class="builtintype" id="5266390">error</span><span class="op" id="5266395">(</span><span class="string" id="5266396">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5266428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266434">return</span>&nbsp;<span class="ident" id="5266441">b</span><span class="op" id="5266442">.</span><span class="ident" id="5266443">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266455">toff</span>&nbsp;<span class="op" id="5266460">=</span>&nbsp;<span class="builtintype" id="5266462">uint32</span><span class="op" id="5266468">(</span><span class="ident" id="5266469">to64</span><span class="op" id="5266473">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266482">boff</span>&nbsp;<span class="op" id="5266487">:=</span>&nbsp;<span class="ident" id="5266490">b</span><span class="op" id="5266491">.</span><span class="ident" id="5266492">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266498">d</span><span class="op" id="5266499">.</span><span class="ident" id="5266500">typeSigs</span><span class="op" id="5266508">[</span><span class="ident" id="5266509">sig</span><span class="op" id="5266512">]</span>&nbsp;<span class="op" id="5266514">=</span>&nbsp;<span class="op" id="5266516">&amp;</span><span class="ident" id="5266517">typeUnit</span><span class="op" id="5266525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266530">unit</span><span class="op" id="5266534">:</span>&nbsp;<span class="ident" id="5266536">unit</span><span class="op" id="5266540">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266546">base</span><span class="op" id="5266550">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5266554">base</span><span class="op" id="5266558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266564">off</span><span class="op" id="5266567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266572">boff</span><span class="op" id="5266576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266582">data</span><span class="op" id="5266586">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5266590">b</span><span class="op" id="5266591">.</span><span class="ident" id="5266592">bytes</span><span class="op" id="5266597">(</span><span class="builtintype" id="5266598">int</span><span class="op" id="5266601">(</span><span class="ident" id="5266602">Offset</span><span class="op" id="5266608">(</span><span class="ident" id="5266609">n</span><span class="op" id="5266610">)</span>&nbsp;<span class="op" id="5266612">-</span>&nbsp;<span class="op" id="5266614">(</span><span class="ident" id="5266615">b</span><span class="op" id="5266616">.</span><span class="ident" id="5266617">off</span>&nbsp;<span class="op" id="5266621">-</span>&nbsp;<span class="ident" id="5266623">hdroff</span><span class="op" id="5266629">)</span><span class="op" id="5266630">)</span><span class="op" id="5266631">)</span><span class="op" id="5266632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266638">atable</span><span class="op" id="5266644">:</span>&nbsp;<span class="ident" id="5266646">atable</span><span class="op" id="5266652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266658">asize</span><span class="op" id="5266663">:</span>&nbsp;&nbsp;<span class="builtintype" id="5266666">int</span><span class="op" id="5266669">(</span><span class="ident" id="5266670">asize</span><span class="op" id="5266675">)</span><span class="op" id="5266676">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266682">vers</span><span class="op" id="5266686">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5266690">int</span><span class="op" id="5266693">(</span><span class="ident" id="5266694">vers</span><span class="op" id="5266698">)</span><span class="op" id="5266699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266705">is64</span><span class="op" id="5266709">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5266713">dwarf64</span><span class="op" id="5266720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266725">}</span><span class="op" id="5266726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266731">toff</span><span class="op" id="5266735">:</span>&nbsp;<span class="ident" id="5266737">Offset</span><span class="op" id="5266743">(</span><span class="ident" id="5266744">toff</span><span class="op" id="5266748">)</span><span class="op" id="5266749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266754">name</span><span class="op" id="5266758">:</span>&nbsp;<span class="ident" id="5266760">name</span><span class="op" id="5266764">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266772">if</span>&nbsp;<span class="ident" id="5266775">b</span><span class="op" id="5266776">.</span><span class="ident" id="5266777">err</span>&nbsp;<span class="op" id="5266781">!=</span>&nbsp;<span class="ident" id="5266784">nil</span>&nbsp;<span class="op" id="5266788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266793">return</span>&nbsp;<span class="ident" id="5266800">b</span><span class="op" id="5266801">.</span><span class="ident" id="5266802">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266811">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266814">return</span>&nbsp;<span class="ident" id="5266821">nil</span><br>
<span class="lineno"></span><span class="op" id="5266825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5266828">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5266869">func</span>&nbsp;<span class="op" id="5266874">(</span><span class="ident" id="5266875">d</span>&nbsp;<span class="op" id="5266877">*</span><span class="ident" id="5266878">Data</span><span class="op" id="5266882">)</span>&nbsp;<span class="ident" id="5266884">sigToType</span><span class="op" id="5266893">(</span><span class="ident" id="5266894">sig</span>&nbsp;<span class="ident" id="5266898">uint64</span><span class="op" id="5266904">)</span>&nbsp;<span class="op" id="5266906">(</span><span class="ident" id="5266907">Type</span><span class="op" id="5266911">,</span>&nbsp;<span class="builtintype" id="5266913">error</span><span class="op" id="5266918">)</span>&nbsp;<span class="op" id="5266920">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266923">tu</span>&nbsp;<span class="op" id="5266926">:=</span>&nbsp;<span class="ident" id="5266929">d</span><span class="op" id="5266930">.</span><span class="ident" id="5266931">typeSigs</span><span class="op" id="5266939">[</span><span class="ident" id="5266940">sig</span><span class="op" id="5266943">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266946">if</span>&nbsp;<span class="ident" id="5266949">tu</span>&nbsp;<span class="op" id="5266952">==</span>&nbsp;<span class="ident" id="5266955">nil</span>&nbsp;<span class="op" id="5266959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266963">return</span>&nbsp;<span class="ident" id="5266970">nil</span><span class="op" id="5266973">,</span>&nbsp;<span class="ident" id="5266975">fmt</span><span class="op" id="5266978">.</span><span class="ident" id="5266979">Errorf</span><span class="op" id="5266985">(</span><span class="string" id="5266986">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5267018">,</span>&nbsp;<span class="ident" id="5267020">sig</span><span class="op" id="5267023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267029">if</span>&nbsp;<span class="ident" id="5267032">tu</span><span class="op" id="5267034">.</span><span class="ident" id="5267035">cache</span>&nbsp;<span class="op" id="5267041">!=</span>&nbsp;<span class="ident" id="5267044">nil</span>&nbsp;<span class="op" id="5267048">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267052">return</span>&nbsp;<span class="ident" id="5267059">tu</span><span class="op" id="5267061">.</span><span class="ident" id="5267062">cache</span><span class="op" id="5267067">,</span>&nbsp;<span class="ident" id="5267069">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267078">b</span>&nbsp;<span class="op" id="5267080">:=</span>&nbsp;<span class="ident" id="5267083">makeBuf</span><span class="op" id="5267090">(</span><span class="ident" id="5267091">d</span><span class="op" id="5267092">,</span>&nbsp;<span class="ident" id="5267094">tu</span><span class="op" id="5267096">,</span>&nbsp;<span class="ident" id="5267098">tu</span><span class="op" id="5267100">.</span><span class="ident" id="5267101">name</span><span class="op" id="5267105">,</span>&nbsp;<span class="ident" id="5267107">tu</span><span class="op" id="5267109">.</span><span class="ident" id="5267110">off</span><span class="op" id="5267113">,</span>&nbsp;<span class="ident" id="5267115">tu</span><span class="op" id="5267117">.</span><span class="ident" id="5267118">data</span><span class="op" id="5267122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267125">r</span>&nbsp;<span class="op" id="5267127">:=</span>&nbsp;<span class="op" id="5267130">&amp;</span><span class="ident" id="5267131">typeUnitReader</span><span class="op" id="5267145">{</span><span class="ident" id="5267146">d</span><span class="op" id="5267147">:</span>&nbsp;<span class="ident" id="5267149">d</span><span class="op" id="5267150">,</span>&nbsp;<span class="ident" id="5267152">tu</span><span class="op" id="5267154">:</span>&nbsp;<span class="ident" id="5267156">tu</span><span class="op" id="5267158">,</span>&nbsp;<span class="ident" id="5267160">b</span><span class="op" id="5267161">:</span>&nbsp;<span class="ident" id="5267163">b</span><span class="op" id="5267164">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267167">t</span><span class="op" id="5267168">,</span>&nbsp;<span class="ident" id="5267170">err</span>&nbsp;<span class="op" id="5267174">:=</span>&nbsp;<span class="ident" id="5267177">d</span><span class="op" id="5267178">.</span><span class="ident" id="5267179">readType</span><span class="op" id="5267187">(</span><span class="ident" id="5267188">tu</span><span class="op" id="5267190">.</span><span class="ident" id="5267191">name</span><span class="op" id="5267195">,</span>&nbsp;<span class="ident" id="5267197">r</span><span class="op" id="5267198">,</span>&nbsp;<span class="ident" id="5267200">Offset</span><span class="op" id="5267206">(</span><span class="ident" id="5267207">tu</span><span class="op" id="5267209">.</span><span class="ident" id="5267210">toff</span><span class="op" id="5267214">)</span><span class="op" id="5267215">,</span>&nbsp;<span class="builtinfunc" id="5267217">make</span><span class="op" id="5267221">(</span><span class="keyword" id="5267222">map</span><span class="op" id="5267225">[</span><span class="ident" id="5267226">Offset</span><span class="op" id="5267232">]</span><span class="ident" id="5267233">Type</span><span class="op" id="5267237">)</span><span class="op" id="5267238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267241">if</span>&nbsp;<span class="ident" id="5267244">err</span>&nbsp;<span class="op" id="5267248">!=</span>&nbsp;<span class="ident" id="5267251">nil</span>&nbsp;<span class="op" id="5267255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267259">return</span>&nbsp;<span class="ident" id="5267266">nil</span><span class="op" id="5267269">,</span>&nbsp;<span class="ident" id="5267271">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267280">tu</span><span class="op" id="5267282">.</span><span class="ident" id="5267283">cache</span>&nbsp;<span class="op" id="5267289">=</span>&nbsp;<span class="ident" id="5267291">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267294">return</span>&nbsp;<span class="ident" id="5267301">t</span><span class="op" id="5267302">,</span>&nbsp;<span class="ident" id="5267304">nil</span><br>
<span class="lineno"></span><span class="op" id="5267308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5267311">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5267364">type</span>&nbsp;<span class="ident" id="5267369">typeUnitReader</span>&nbsp;<span class="keyword" id="5267384">struct</span>&nbsp;<span class="op" id="5267391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267394">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5267398">*</span><span class="ident" id="5267399">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267405">tu</span>&nbsp;&nbsp;<span class="op" id="5267409">*</span><span class="ident" id="5267410">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267420">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5267424">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267429">err</span>&nbsp;<span class="builtintype" id="5267433">error</span><br>
<span class="lineno">125</span><span class="op" id="5267439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5267442">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5267486">func</span>&nbsp;<span class="op" id="5267491">(</span><span class="ident" id="5267492">tur</span>&nbsp;<span class="op" id="5267496">*</span><span class="ident" id="5267497">typeUnitReader</span><span class="op" id="5267511">)</span>&nbsp;<span class="ident" id="5267513">Seek</span><span class="op" id="5267517">(</span><span class="ident" id="5267518">off</span>&nbsp;<span class="ident" id="5267522">Offset</span><span class="op" id="5267528">)</span>&nbsp;<span class="op" id="5267530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267533">tur</span><span class="op" id="5267536">.</span><span class="ident" id="5267537">err</span>&nbsp;<span class="op" id="5267541">=</span>&nbsp;<span class="ident" id="5267543">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267548">doff</span>&nbsp;<span class="op" id="5267553">:=</span>&nbsp;<span class="ident" id="5267556">off</span>&nbsp;<span class="op" id="5267560">-</span>&nbsp;<span class="ident" id="5267562">tur</span><span class="op" id="5267565">.</span><span class="ident" id="5267566">tu</span><span class="op" id="5267568">.</span><span class="ident" id="5267569">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267574">if</span>&nbsp;<span class="ident" id="5267577">doff</span>&nbsp;<span class="op" id="5267582">&lt;</span>&nbsp;<span class="num" id="5267584">0</span>&nbsp;<span class="op" id="5267586">||</span>&nbsp;<span class="ident" id="5267589">doff</span>&nbsp;<span class="op" id="5267594">&gt;=</span>&nbsp;<span class="ident" id="5267597">Offset</span><span class="op" id="5267603">(</span><span class="builtinfunc" id="5267604">len</span><span class="op" id="5267607">(</span><span class="ident" id="5267608">tur</span><span class="op" id="5267611">.</span><span class="ident" id="5267612">tu</span><span class="op" id="5267614">.</span><span class="ident" id="5267615">data</span><span class="op" id="5267619">)</span><span class="op" id="5267620">)</span>&nbsp;<span class="op" id="5267622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267626">tur</span><span class="op" id="5267629">.</span><span class="ident" id="5267630">err</span>&nbsp;<span class="op" id="5267634">=</span>&nbsp;<span class="ident" id="5267636">fmt</span><span class="op" id="5267639">.</span><span class="ident" id="5267640">Errorf</span><span class="op" id="5267646">(</span><span class="string" id="5267647">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5267683">,</span>&nbsp;<span class="ident" id="5267685">tur</span><span class="op" id="5267688">.</span><span class="ident" id="5267689">tu</span><span class="op" id="5267691">.</span><span class="ident" id="5267692">name</span><span class="op" id="5267696">,</span>&nbsp;<span class="ident" id="5267698">doff</span><span class="op" id="5267702">,</span>&nbsp;<span class="builtinfunc" id="5267704">len</span><span class="op" id="5267707">(</span><span class="ident" id="5267708">tur</span><span class="op" id="5267711">.</span><span class="ident" id="5267712">tu</span><span class="op" id="5267714">.</span><span class="ident" id="5267715">data</span><span class="op" id="5267719">)</span><span class="op" id="5267720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267724">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267732">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267735">tur</span><span class="op" id="5267738">.</span><span class="ident" id="5267739">b</span>&nbsp;<span class="op" id="5267741">=</span>&nbsp;<span class="ident" id="5267743">makeBuf</span><span class="op" id="5267750">(</span><span class="ident" id="5267751">tur</span><span class="op" id="5267754">.</span><span class="ident" id="5267755">d</span><span class="op" id="5267756">,</span>&nbsp;<span class="ident" id="5267758">tur</span><span class="op" id="5267761">.</span><span class="ident" id="5267762">tu</span><span class="op" id="5267764">,</span>&nbsp;<span class="ident" id="5267766">tur</span><span class="op" id="5267769">.</span><span class="ident" id="5267770">tu</span><span class="op" id="5267772">.</span><span class="ident" id="5267773">name</span><span class="op" id="5267777">,</span>&nbsp;<span class="ident" id="5267779">off</span><span class="op" id="5267782">,</span>&nbsp;<span class="ident" id="5267784">tur</span><span class="op" id="5267787">.</span><span class="ident" id="5267788">tu</span><span class="op" id="5267790">.</span><span class="ident" id="5267791">data</span><span class="op" id="5267795">[</span><span class="ident" id="5267796">doff</span><span class="op" id="5267800">:</span><span class="op" id="5267801">]</span><span class="op" id="5267802">)</span><br>
<span class="lineno"></span><span class="op" id="5267804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5267807">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5267856">func</span>&nbsp;<span class="op" id="5267861">(</span><span class="ident" id="5267862">tur</span>&nbsp;<span class="op" id="5267866">*</span><span class="ident" id="5267867">typeUnitReader</span><span class="op" id="5267881">)</span>&nbsp;<span class="ident" id="5267883">Next</span><span class="op" id="5267887">(</span><span class="op" id="5267888">)</span>&nbsp;<span class="op" id="5267890">(</span><span class="op" id="5267891">*</span><span class="ident" id="5267892">Entry</span><span class="op" id="5267897">,</span>&nbsp;<span class="builtintype" id="5267899">error</span><span class="op" id="5267904">)</span>&nbsp;<span class="op" id="5267906">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267909">if</span>&nbsp;<span class="ident" id="5267912">tur</span><span class="op" id="5267915">.</span><span class="ident" id="5267916">err</span>&nbsp;<span class="op" id="5267920">!=</span>&nbsp;<span class="ident" id="5267923">nil</span>&nbsp;<span class="op" id="5267927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267931">return</span>&nbsp;<span class="ident" id="5267938">nil</span><span class="op" id="5267941">,</span>&nbsp;<span class="ident" id="5267943">tur</span><span class="op" id="5267946">.</span><span class="ident" id="5267947">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267955">if</span>&nbsp;<span class="builtinfunc" id="5267958">len</span><span class="op" id="5267961">(</span><span class="ident" id="5267962">tur</span><span class="op" id="5267965">.</span><span class="ident" id="5267966">tu</span><span class="op" id="5267968">.</span><span class="ident" id="5267969">data</span><span class="op" id="5267973">)</span>&nbsp;<span class="op" id="5267975">==</span>&nbsp;<span class="num" id="5267978">0</span>&nbsp;<span class="op" id="5267980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267984">return</span>&nbsp;<span class="ident" id="5267991">nil</span><span class="op" id="5267994">,</span>&nbsp;<span class="ident" id="5267996">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268004">e</span>&nbsp;<span class="op" id="5268006">:=</span>&nbsp;<span class="ident" id="5268009">tur</span><span class="op" id="5268012">.</span><span class="ident" id="5268013">b</span><span class="op" id="5268014">.</span><span class="ident" id="5268015">entry</span><span class="op" id="5268020">(</span><span class="ident" id="5268021">tur</span><span class="op" id="5268024">.</span><span class="ident" id="5268025">tu</span><span class="op" id="5268027">.</span><span class="ident" id="5268028">atable</span><span class="op" id="5268034">,</span>&nbsp;<span class="ident" id="5268036">tur</span><span class="op" id="5268039">.</span><span class="ident" id="5268040">tu</span><span class="op" id="5268042">.</span><span class="ident" id="5268043">base</span><span class="op" id="5268047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268050">if</span>&nbsp;<span class="ident" id="5268053">tur</span><span class="op" id="5268056">.</span><span class="ident" id="5268057">b</span><span class="op" id="5268058">.</span><span class="ident" id="5268059">err</span>&nbsp;<span class="op" id="5268063">!=</span>&nbsp;<span class="ident" id="5268066">nil</span>&nbsp;<span class="op" id="5268070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268074">tur</span><span class="op" id="5268077">.</span><span class="ident" id="5268078">err</span>&nbsp;<span class="op" id="5268082">=</span>&nbsp;<span class="ident" id="5268084">tur</span><span class="op" id="5268087">.</span><span class="ident" id="5268088">b</span><span class="op" id="5268089">.</span><span class="ident" id="5268090">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268096">return</span>&nbsp;<span class="ident" id="5268103">nil</span><span class="op" id="5268106">,</span>&nbsp;<span class="ident" id="5268108">tur</span><span class="op" id="5268111">.</span><span class="ident" id="5268112">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268120">return</span>&nbsp;<span class="ident" id="5268127">e</span><span class="op" id="5268128">,</span>&nbsp;<span class="ident" id="5268130">nil</span><br>
<span class="lineno"></span><span class="op" id="5268134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5268137">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5268186">func</span>&nbsp;<span class="op" id="5268191">(</span><span class="ident" id="5268192">tur</span>&nbsp;<span class="op" id="5268196">*</span><span class="ident" id="5268197">typeUnitReader</span><span class="op" id="5268211">)</span>&nbsp;<span class="ident" id="5268213">clone</span><span class="op" id="5268218">(</span><span class="op" id="5268219">)</span>&nbsp;<span class="ident" id="5268221">typeReader</span>&nbsp;<span class="op" id="5268232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268235">return</span>&nbsp;<span class="op" id="5268242">&amp;</span><span class="ident" id="5268243">typeUnitReader</span><span class="op" id="5268257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268261">d</span><span class="op" id="5268262">:</span>&nbsp;&nbsp;<span class="ident" id="5268265">tur</span><span class="op" id="5268268">.</span><span class="ident" id="5268269">d</span><span class="op" id="5268270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268274">tu</span><span class="op" id="5268276">:</span>&nbsp;<span class="ident" id="5268278">tur</span><span class="op" id="5268281">.</span><span class="ident" id="5268282">tu</span><span class="op" id="5268284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268288">b</span><span class="op" id="5268289">:</span>&nbsp;&nbsp;<span class="ident" id="5268292">makeBuf</span><span class="op" id="5268299">(</span><span class="ident" id="5268300">tur</span><span class="op" id="5268303">.</span><span class="ident" id="5268304">d</span><span class="op" id="5268305">,</span>&nbsp;<span class="ident" id="5268307">tur</span><span class="op" id="5268310">.</span><span class="ident" id="5268311">tu</span><span class="op" id="5268313">,</span>&nbsp;<span class="ident" id="5268315">tur</span><span class="op" id="5268318">.</span><span class="ident" id="5268319">tu</span><span class="op" id="5268321">.</span><span class="ident" id="5268322">name</span><span class="op" id="5268326">,</span>&nbsp;<span class="ident" id="5268328">tur</span><span class="op" id="5268331">.</span><span class="ident" id="5268332">tu</span><span class="op" id="5268334">.</span><span class="ident" id="5268335">off</span><span class="op" id="5268338">,</span>&nbsp;<span class="ident" id="5268340">tur</span><span class="op" id="5268343">.</span><span class="ident" id="5268344">tu</span><span class="op" id="5268346">.</span><span class="ident" id="5268347">data</span><span class="op" id="5268351">)</span><span class="op" id="5268352">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268355">}</span><br>
<span class="lineno"></span><span class="op" id="5268357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5268360">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5268398">func</span>&nbsp;<span class="op" id="5268403">(</span><span class="ident" id="5268404">tur</span>&nbsp;<span class="op" id="5268408">*</span><span class="ident" id="5268409">typeUnitReader</span><span class="op" id="5268423">)</span>&nbsp;<span class="ident" id="5268425">offset</span><span class="op" id="5268431">(</span><span class="op" id="5268432">)</span>&nbsp;<span class="ident" id="5268434">Offset</span>&nbsp;<span class="op" id="5268441">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268444">return</span>&nbsp;<span class="ident" id="5268451">tur</span><span class="op" id="5268454">.</span><span class="ident" id="5268455">b</span><span class="op" id="5268456">.</span><span class="ident" id="5268457">off</span><br>
<span class="lineno"></span><span class="op" id="5268461">}</span>
</div>
</body>
</html>
