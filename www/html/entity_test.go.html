<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6774688">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6774743">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6774797">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6774848">package</span>&nbsp;<span class="ident" id="6774856">html</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774862">import</span>&nbsp;<span class="op" id="6774869">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6774872">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6774883">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6774898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774901">func</span>&nbsp;<span class="ident" id="6774906">TestEntityLength</span><span class="op" id="6774922">(</span><span class="ident" id="6774923">t</span>&nbsp;<span class="op" id="6774925">*</span><span class="ident" id="6774926"><a href="/html/entity_test.go.html#6774872">testing</a></span><span class="op" id="6774933">.</span><span class="ident" id="6774934">T</span><span class="op" id="6774935">)</span>&nbsp;<span class="op" id="6774937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6774940">//&nbsp;We&nbsp;verify&nbsp;that&nbsp;the&nbsp;length&nbsp;of&nbsp;UTF-8&nbsp;encoding&nbsp;of&nbsp;each&nbsp;value&nbsp;is&nbsp;&lt;=&nbsp;1&nbsp;+&nbsp;len(key).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775022">//&nbsp;The&nbsp;+1&nbsp;comes&nbsp;from&nbsp;the&nbsp;leading&nbsp;&#34;&amp;&#34;.&nbsp;This&nbsp;property&nbsp;implies&nbsp;that&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775102">//&nbsp;unescaped&nbsp;text&nbsp;is&nbsp;&lt;=&nbsp;the&nbsp;length&nbsp;of&nbsp;escaped&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775155">for</span>&nbsp;<span class="ident" id="6775159">k</span><span class="op" id="6775160">,</span>&nbsp;<span class="ident" id="6775162">v</span>&nbsp;<span class="op" id="6775164">:=</span>&nbsp;<span class="keyword" id="6775167">range</span>&nbsp;<span class="ident" id="6775173"><a href="/html/entity.go.html#4549112">entity</a></span>&nbsp;<span class="op" id="6775180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775184">if</span>&nbsp;<span class="num" id="6775187">1</span><span class="op" id="6775188">+</span><span class="builtinfunc" id="6775189">len</span><span class="op" id="6775192">(</span><span class="ident" id="6775193"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775194">)</span>&nbsp;<span class="op" id="6775196">&lt;</span>&nbsp;<span class="ident" id="6775198"><a href="/html/entity_test.go.html#6774883">utf8</a></span><span class="op" id="6775202">.</span><span class="ident" id="6775203">RuneLen</span><span class="op" id="6775210">(</span><span class="ident" id="6775211"><a href="/html/entity_test.go.html#6775162">v</a></span><span class="op" id="6775212">)</span>&nbsp;<span class="op" id="6775214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775219"><a href="/html/entity_test.go.html#6774923">t</a></span><span class="op" id="6775220">.</span><span class="ident" id="6775221">Error</span><span class="op" id="6775226">(</span><span class="string" id="6775227">&#34;escaped&nbsp;entity&nbsp;&amp;&#34;</span>&nbsp;<span class="op" id="6775246">+</span>&nbsp;<span class="ident" id="6775248"><a href="/html/entity_test.go.html#6775159">k</a></span>&nbsp;<span class="op" id="6775250">+</span>&nbsp;<span class="string" id="6775252">&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;its&nbsp;UTF-8&nbsp;encoding&nbsp;&#34;</span>&nbsp;<span class="op" id="6775291">+</span>&nbsp;<span class="builtintype" id="6775293">string</span><span class="op" id="6775299">(</span><span class="ident" id="6775300"><a href="/html/entity_test.go.html#6775162">v</a></span><span class="op" id="6775301">)</span><span class="op" id="6775302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775306">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775310">if</span>&nbsp;<span class="builtinfunc" id="6775313">len</span><span class="op" id="6775316">(</span><span class="ident" id="6775317"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775318">)</span>&nbsp;<span class="op" id="6775320">&gt;</span>&nbsp;<span class="ident" id="6775322"><a href="/html/entity.go.html#4548727">longestEntityWithoutSemicolon</a></span>&nbsp;<span class="op" id="6775352">&amp;&amp;</span>&nbsp;<span class="ident" id="6775355"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775356">[</span><span class="builtinfunc" id="6775357">len</span><span class="op" id="6775360">(</span><span class="ident" id="6775361"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775362">)</span><span class="op" id="6775363">-</span><span class="num" id="6775364">1</span><span class="op" id="6775365">]</span>&nbsp;<span class="op" id="6775367">!=</span>&nbsp;<span class="string" id="6775370">&#39;;&#39;</span>&nbsp;<span class="op" id="6775374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775379"><a href="/html/entity_test.go.html#6774923">t</a></span><span class="op" id="6775380">.</span><span class="ident" id="6775381">Errorf</span><span class="op" id="6775387">(</span><span class="string" id="6775388">&#34;entity&nbsp;name&nbsp;%s&nbsp;is&nbsp;%d&nbsp;characters,&nbsp;but&nbsp;longestEntityWithoutSemicolon=%d&#34;</span><span class="op" id="6775459">,</span>&nbsp;<span class="ident" id="6775461"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775462">,</span>&nbsp;<span class="builtinfunc" id="6775464">len</span><span class="op" id="6775467">(</span><span class="ident" id="6775468"><a href="/html/entity_test.go.html#6775159">k</a></span><span class="op" id="6775469">)</span><span class="op" id="6775470">,</span>&nbsp;<span class="ident" id="6775472"><a href="/html/entity.go.html#4548727">longestEntityWithoutSemicolon</a></span><span class="op" id="6775501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775511">for</span>&nbsp;<span class="ident" id="6775515">k</span><span class="op" id="6775516">,</span>&nbsp;<span class="ident" id="6775518">v</span>&nbsp;<span class="op" id="6775520">:=</span>&nbsp;<span class="keyword" id="6775523">range</span>&nbsp;<span class="ident" id="6775529"><a href="/html/entity.go.html#4643694">entity2</a></span>&nbsp;<span class="op" id="6775537">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775541">if</span>&nbsp;<span class="num" id="6775544">1</span><span class="op" id="6775545">+</span><span class="builtinfunc" id="6775546">len</span><span class="op" id="6775549">(</span><span class="ident" id="6775550"><a href="/html/entity_test.go.html#6775515">k</a></span><span class="op" id="6775551">)</span>&nbsp;<span class="op" id="6775553">&lt;</span>&nbsp;<span class="ident" id="6775555"><a href="/html/entity_test.go.html#6774883">utf8</a></span><span class="op" id="6775559">.</span><span class="ident" id="6775560">RuneLen</span><span class="op" id="6775567">(</span><span class="ident" id="6775568"><a href="/html/entity_test.go.html#6775518">v</a></span><span class="op" id="6775569">[</span><span class="num" id="6775570">0</span><span class="op" id="6775571">]</span><span class="op" id="6775572">)</span><span class="op" id="6775573">+</span><span class="ident" id="6775574"><a href="/html/entity_test.go.html#6774883">utf8</a></span><span class="op" id="6775578">.</span><span class="ident" id="6775579">RuneLen</span><span class="op" id="6775586">(</span><span class="ident" id="6775587"><a href="/html/entity_test.go.html#6775518">v</a></span><span class="op" id="6775588">[</span><span class="num" id="6775589">1</span><span class="op" id="6775590">]</span><span class="op" id="6775591">)</span>&nbsp;<span class="op" id="6775593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775598"><a href="/html/entity_test.go.html#6774923">t</a></span><span class="op" id="6775599">.</span><span class="ident" id="6775600">Error</span><span class="op" id="6775605">(</span><span class="string" id="6775606">&#34;escaped&nbsp;entity&nbsp;&amp;&#34;</span>&nbsp;<span class="op" id="6775625">+</span>&nbsp;<span class="ident" id="6775627"><a href="/html/entity_test.go.html#6775515">k</a></span>&nbsp;<span class="op" id="6775629">+</span>&nbsp;<span class="string" id="6775631">&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;its&nbsp;UTF-8&nbsp;encoding&nbsp;&#34;</span>&nbsp;<span class="op" id="6775670">+</span>&nbsp;<span class="builtintype" id="6775672">string</span><span class="op" id="6775678">(</span><span class="ident" id="6775679"><a href="/html/entity_test.go.html#6775518">v</a></span><span class="op" id="6775680">[</span><span class="num" id="6775681">0</span><span class="op" id="6775682">]</span><span class="op" id="6775683">)</span>&nbsp;<span class="op" id="6775685">+</span>&nbsp;<span class="builtintype" id="6775687">string</span><span class="op" id="6775693">(</span><span class="ident" id="6775694"><a href="/html/entity_test.go.html#6775518">v</a></span><span class="op" id="6775695">[</span><span class="num" id="6775696">1</span><span class="op" id="6775697">]</span><span class="op" id="6775698">)</span><span class="op" id="6775699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775706">}</span><br>
<span class="lineno"></span><span class="op" id="6775708">}</span>
</div>
</body>
</html>
