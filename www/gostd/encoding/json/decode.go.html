<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html" class="current">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5228117">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5228172">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5228226">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5228277">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="5228352">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5228383">package</span>&nbsp;<span class="ident" id="5228391">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5228397">import</span>&nbsp;<span class="op" id="5228404">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228407">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228416">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228428">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228447">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228457">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228464">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228475">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228486">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228497">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228508">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5228525">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5228540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5228543">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="5228607">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5228640">//</span><br>
<span class="lineno"></span><span class="comment" id="5228643">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5228695">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5228764">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="5228804">//</span><br>
<span class="lineno"></span><span class="comment" id="5228807">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5228880">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5228951">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="5229021">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="5229095">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="5229140">//</span><br>
<span class="lineno"></span><span class="comment" id="5229143">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="5229213">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="5229292">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="5229366">//</span><br>
<span class="lineno"></span><span class="comment" id="5229369">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5229415">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="5229472">//</span><br>
<span class="lineno"></span><span class="comment" id="5229475">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="5229502">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="5229531">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="5229559">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="5229593">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5229637">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="5229658">//</span><br>
<span class="lineno"></span><span class="comment" id="5229661">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="5229724">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5229784">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="5229852">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="5229916">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5229977">//</span><br>
<span class="lineno"></span><span class="comment" id="5229980">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="5230056">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="5230135">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="5230217">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5230256">//</span><br>
<span class="lineno"></span><span class="comment" id="5230259">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5230313">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5230376">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="5230433">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="5230454">//</span><br>
<span class="lineno"></span><span class="keyword" id="5230457">func</span>&nbsp;<span class="ident" id="5230462">Unmarshal</span><span class="op" id="5230471">(</span><span class="ident" id="5230472">data</span>&nbsp;<span class="op" id="5230477">[</span><span class="op" id="5230478">]</span><span class="builtintype" id="5230479">byte</span><span class="op" id="5230483">,</span>&nbsp;<span class="ident" id="5230485">v</span>&nbsp;<span class="keyword" id="5230487">interface</span><span class="op" id="5230496">{</span><span class="op" id="5230497">}</span><span class="op" id="5230498">)</span>&nbsp;<span class="builtintype" id="5230500">error</span>&nbsp;<span class="op" id="5230506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230509">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230540">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230585">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230629">var</span>&nbsp;<span class="ident" id="5230633">d</span>&nbsp;<span class="ident" id="5230635">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230648">err</span>&nbsp;<span class="op" id="5230652">:=</span>&nbsp;<span class="ident" id="5230655">checkValid</span><span class="op" id="5230665">(</span><span class="ident" id="5230666">data</span><span class="op" id="5230670">,</span>&nbsp;<span class="op" id="5230672">&amp;</span><span class="ident" id="5230673">d</span><span class="op" id="5230674">.</span><span class="ident" id="5230675">scan</span><span class="op" id="5230679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230682">if</span>&nbsp;<span class="ident" id="5230685">err</span>&nbsp;<span class="op" id="5230689">!=</span>&nbsp;<span class="ident" id="5230692">nil</span>&nbsp;<span class="op" id="5230696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230700">return</span>&nbsp;<span class="ident" id="5230707">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230716">d</span><span class="op" id="5230717">.</span><span class="ident" id="5230718">init</span><span class="op" id="5230722">(</span><span class="ident" id="5230723">data</span><span class="op" id="5230727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230730">return</span>&nbsp;<span class="ident" id="5230737">d</span><span class="op" id="5230738">.</span><span class="ident" id="5230739">unmarshal</span><span class="op" id="5230748">(</span><span class="ident" id="5230749">v</span><span class="op" id="5230750">)</span><br>
<span class="lineno"></span><span class="op" id="5230752">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5230755">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5230810">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5230866">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5230920">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="5230975">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="5231027">type</span>&nbsp;<span class="ident" id="5231032">Unmarshaler</span>&nbsp;<span class="keyword" id="5231044">interface</span>&nbsp;<span class="op" id="5231054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231057">UnmarshalJSON</span><span class="op" id="5231070">(</span><span class="op" id="5231071">[</span><span class="op" id="5231072">]</span><span class="builtintype" id="5231073">byte</span><span class="op" id="5231077">)</span>&nbsp;<span class="builtintype" id="5231079">error</span><br>
<span class="lineno"></span><span class="op" id="5231085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5231088">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="5231145">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5231199">type</span>&nbsp;<span class="ident" id="5231204">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="5231223">struct</span>&nbsp;<span class="op" id="5231230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231233">Value</span>&nbsp;<span class="builtintype" id="5231239">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5231252">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231313">Type</span>&nbsp;&nbsp;<span class="ident" id="5231319">reflect</span><span class="op" id="5231326">.</span><span class="ident" id="5231327">Type</span>&nbsp;<span class="comment" id="5231332">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="5231380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5231383">func</span>&nbsp;<span class="op" id="5231388">(</span><span class="ident" id="5231389">e</span>&nbsp;<span class="op" id="5231391">*</span><span class="ident" id="5231392">UnmarshalTypeError</span><span class="op" id="5231410">)</span>&nbsp;<span class="ident" id="5231412">Error</span><span class="op" id="5231417">(</span><span class="op" id="5231418">)</span>&nbsp;<span class="builtintype" id="5231420">string</span>&nbsp;<span class="op" id="5231427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231430">return</span>&nbsp;<span class="string" id="5231437">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="5231463">+</span>&nbsp;<span class="ident" id="5231465">e</span><span class="op" id="5231466">.</span><span class="ident" id="5231467">Value</span>&nbsp;<span class="op" id="5231473">+</span>&nbsp;<span class="string" id="5231475">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5231501">+</span>&nbsp;<span class="ident" id="5231503">e</span><span class="op" id="5231504">.</span><span class="ident" id="5231505">Type</span><span class="op" id="5231509">.</span><span class="ident" id="5231510">String</span><span class="op" id="5231516">(</span><span class="op" id="5231517">)</span><br>
<span class="lineno"></span><span class="op" id="5231519">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5231522">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5231581">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5231646">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="5231691">type</span>&nbsp;<span class="ident" id="5231696">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="5231716">struct</span>&nbsp;<span class="op" id="5231723">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231726">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5231732">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231740">Type</span>&nbsp;&nbsp;<span class="ident" id="5231746">reflect</span><span class="op" id="5231753">.</span><span class="ident" id="5231754">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231760">Field</span>&nbsp;<span class="ident" id="5231766">reflect</span><span class="op" id="5231773">.</span><span class="ident" id="5231774">StructField</span><br>
<span class="lineno"></span><span class="op" id="5231786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="5231789">func</span>&nbsp;<span class="op" id="5231794">(</span><span class="ident" id="5231795">e</span>&nbsp;<span class="op" id="5231797">*</span><span class="ident" id="5231798">UnmarshalFieldError</span><span class="op" id="5231817">)</span>&nbsp;<span class="ident" id="5231819">Error</span><span class="op" id="5231824">(</span><span class="op" id="5231825">)</span>&nbsp;<span class="builtintype" id="5231827">string</span>&nbsp;<span class="op" id="5231834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231837">return</span>&nbsp;<span class="string" id="5231844">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="5231881">+</span>&nbsp;<span class="ident" id="5231883">strconv</span><span class="op" id="5231890">.</span><span class="ident" id="5231891">Quote</span><span class="op" id="5231896">(</span><span class="ident" id="5231897">e</span><span class="op" id="5231898">.</span><span class="ident" id="5231899">Key</span><span class="op" id="5231902">)</span>&nbsp;<span class="op" id="5231904">+</span>&nbsp;<span class="string" id="5231906">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="5231932">+</span>&nbsp;<span class="ident" id="5231934">e</span><span class="op" id="5231935">.</span><span class="ident" id="5231936">Field</span><span class="op" id="5231941">.</span><span class="ident" id="5231942">Name</span>&nbsp;<span class="op" id="5231947">+</span>&nbsp;<span class="string" id="5231949">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5231961">+</span>&nbsp;<span class="ident" id="5231963">e</span><span class="op" id="5231964">.</span><span class="ident" id="5231965">Type</span><span class="op" id="5231969">.</span><span class="ident" id="5231970">String</span><span class="op" id="5231976">(</span><span class="op" id="5231977">)</span><br>
<span class="lineno"></span><span class="op" id="5231979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5231982">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="5232061">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="5232119">type</span>&nbsp;<span class="ident" id="5232124">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="5232146">struct</span>&nbsp;<span class="op" id="5232153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232156">Type</span>&nbsp;<span class="ident" id="5232161">reflect</span><span class="op" id="5232168">.</span><span class="ident" id="5232169">Type</span><br>
<span class="lineno"></span><span class="op" id="5232174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="5232177">func</span>&nbsp;<span class="op" id="5232182">(</span><span class="ident" id="5232183">e</span>&nbsp;<span class="op" id="5232185">*</span><span class="ident" id="5232186">InvalidUnmarshalError</span><span class="op" id="5232207">)</span>&nbsp;<span class="ident" id="5232209">Error</span><span class="op" id="5232214">(</span><span class="op" id="5232215">)</span>&nbsp;<span class="builtintype" id="5232217">string</span>&nbsp;<span class="op" id="5232224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232227">if</span>&nbsp;<span class="ident" id="5232230">e</span><span class="op" id="5232231">.</span><span class="ident" id="5232232">Type</span>&nbsp;<span class="op" id="5232237">==</span>&nbsp;<span class="ident" id="5232240">nil</span>&nbsp;<span class="op" id="5232244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232248">return</span>&nbsp;<span class="string" id="5232255">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232283">if</span>&nbsp;<span class="ident" id="5232286">e</span><span class="op" id="5232287">.</span><span class="ident" id="5232288">Type</span><span class="op" id="5232292">.</span><span class="ident" id="5232293">Kind</span><span class="op" id="5232297">(</span><span class="op" id="5232298">)</span>&nbsp;<span class="op" id="5232300">!=</span>&nbsp;<span class="ident" id="5232303">reflect</span><span class="op" id="5232310">.</span><span class="ident" id="5232311">Ptr</span>&nbsp;<span class="op" id="5232315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232319">return</span>&nbsp;<span class="string" id="5232326">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="5232357">+</span>&nbsp;<span class="ident" id="5232359">e</span><span class="op" id="5232360">.</span><span class="ident" id="5232361">Type</span><span class="op" id="5232365">.</span><span class="ident" id="5232366">String</span><span class="op" id="5232372">(</span><span class="op" id="5232373">)</span>&nbsp;<span class="op" id="5232375">+</span>&nbsp;<span class="string" id="5232377">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232385">return</span>&nbsp;<span class="string" id="5232392">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="5232415">+</span>&nbsp;<span class="ident" id="5232417">e</span><span class="op" id="5232418">.</span><span class="ident" id="5232419">Type</span><span class="op" id="5232423">.</span><span class="ident" id="5232424">String</span><span class="op" id="5232430">(</span><span class="op" id="5232431">)</span>&nbsp;<span class="op" id="5232433">+</span>&nbsp;<span class="string" id="5232435">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5232439">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="5232442">func</span>&nbsp;<span class="op" id="5232447">(</span><span class="ident" id="5232448">d</span>&nbsp;<span class="op" id="5232450">*</span><span class="ident" id="5232451">decodeState</span><span class="op" id="5232462">)</span>&nbsp;<span class="ident" id="5232464">unmarshal</span><span class="op" id="5232473">(</span><span class="ident" id="5232474">v</span>&nbsp;<span class="keyword" id="5232476">interface</span><span class="op" id="5232485">{</span><span class="op" id="5232486">}</span><span class="op" id="5232487">)</span>&nbsp;<span class="op" id="5232489">(</span><span class="ident" id="5232490">err</span>&nbsp;<span class="builtintype" id="5232494">error</span><span class="op" id="5232499">)</span>&nbsp;<span class="op" id="5232501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232504">defer</span>&nbsp;<span class="keyword" id="5232510">func</span><span class="op" id="5232514">(</span><span class="op" id="5232515">)</span>&nbsp;<span class="op" id="5232517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232521">if</span>&nbsp;<span class="ident" id="5232524">r</span>&nbsp;<span class="op" id="5232526">:=</span>&nbsp;<span class="builtinfunc" id="5232529">recover</span><span class="op" id="5232536">(</span><span class="op" id="5232537">)</span><span class="op" id="5232538">;</span>&nbsp;<span class="ident" id="5232540">r</span>&nbsp;<span class="op" id="5232542">!=</span>&nbsp;<span class="ident" id="5232545">nil</span>&nbsp;<span class="op" id="5232549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232554">if</span>&nbsp;<span class="ident" id="5232557">_</span><span class="op" id="5232558">,</span>&nbsp;<span class="ident" id="5232560">ok</span>&nbsp;<span class="op" id="5232563">:=</span>&nbsp;<span class="ident" id="5232566">r</span><span class="op" id="5232567">.</span><span class="op" id="5232568">(</span><span class="ident" id="5232569">runtime</span><span class="op" id="5232576">.</span><span class="ident" id="5232577">Error</span><span class="op" id="5232582">)</span><span class="op" id="5232583">;</span>&nbsp;<span class="ident" id="5232585">ok</span>&nbsp;<span class="op" id="5232588">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5232594">panic</span><span class="op" id="5232599">(</span><span class="ident" id="5232600">r</span><span class="op" id="5232601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232611">err</span>&nbsp;<span class="op" id="5232615">=</span>&nbsp;<span class="ident" id="5232617">r</span><span class="op" id="5232618">.</span><span class="op" id="5232619">(</span><span class="builtintype" id="5232620">error</span><span class="op" id="5232625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232632">}</span><span class="op" id="5232633">(</span><span class="op" id="5232634">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232638">rv</span>&nbsp;<span class="op" id="5232641">:=</span>&nbsp;<span class="ident" id="5232644">reflect</span><span class="op" id="5232651">.</span><span class="ident" id="5232652">ValueOf</span><span class="op" id="5232659">(</span><span class="ident" id="5232660">v</span><span class="op" id="5232661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232664">if</span>&nbsp;<span class="ident" id="5232667">rv</span><span class="op" id="5232669">.</span><span class="ident" id="5232670">Kind</span><span class="op" id="5232674">(</span><span class="op" id="5232675">)</span>&nbsp;<span class="op" id="5232677">!=</span>&nbsp;<span class="ident" id="5232680">reflect</span><span class="op" id="5232687">.</span><span class="ident" id="5232688">Ptr</span>&nbsp;<span class="op" id="5232692">||</span>&nbsp;<span class="ident" id="5232695">rv</span><span class="op" id="5232697">.</span><span class="ident" id="5232698">IsNil</span><span class="op" id="5232703">(</span><span class="op" id="5232704">)</span>&nbsp;<span class="op" id="5232706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232710">return</span>&nbsp;<span class="op" id="5232717">&amp;</span><span class="ident" id="5232718">InvalidUnmarshalError</span><span class="op" id="5232739">{</span><span class="ident" id="5232740">reflect</span><span class="op" id="5232747">.</span><span class="ident" id="5232748">TypeOf</span><span class="op" id="5232754">(</span><span class="ident" id="5232755">v</span><span class="op" id="5232756">)</span><span class="op" id="5232757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232760">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232764">d</span><span class="op" id="5232765">.</span><span class="ident" id="5232766">scan</span><span class="op" id="5232770">.</span><span class="ident" id="5232771">reset</span><span class="op" id="5232776">(</span><span class="op" id="5232777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232780">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232843">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232899">d</span><span class="op" id="5232900">.</span><span class="ident" id="5232901">value</span><span class="op" id="5232906">(</span><span class="ident" id="5232907">rv</span><span class="op" id="5232909">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232912">return</span>&nbsp;<span class="ident" id="5232919">d</span><span class="op" id="5232920">.</span><span class="ident" id="5232921">savedError</span><br>
<span class="lineno"></span><span class="op" id="5232932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5232935">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5232981">type</span>&nbsp;<span class="ident" id="5232986">Number</span>&nbsp;<span class="builtintype" id="5232993">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5233001">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="5233051">func</span>&nbsp;<span class="op" id="5233056">(</span><span class="ident" id="5233057">n</span>&nbsp;<span class="ident" id="5233059">Number</span><span class="op" id="5233065">)</span>&nbsp;<span class="ident" id="5233067">String</span><span class="op" id="5233073">(</span><span class="op" id="5233074">)</span>&nbsp;<span class="builtintype" id="5233076">string</span>&nbsp;<span class="op" id="5233083">{</span>&nbsp;<span class="keyword" id="5233085">return</span>&nbsp;<span class="builtintype" id="5233092">string</span><span class="op" id="5233098">(</span><span class="ident" id="5233099">n</span><span class="op" id="5233100">)</span>&nbsp;<span class="op" id="5233102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5233105">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="5233149">func</span>&nbsp;<span class="op" id="5233154">(</span><span class="ident" id="5233155">n</span>&nbsp;<span class="ident" id="5233157">Number</span><span class="op" id="5233163">)</span>&nbsp;<span class="ident" id="5233165">Float64</span><span class="op" id="5233172">(</span><span class="op" id="5233173">)</span>&nbsp;<span class="op" id="5233175">(</span><span class="builtintype" id="5233176">float64</span><span class="op" id="5233183">,</span>&nbsp;<span class="builtintype" id="5233185">error</span><span class="op" id="5233190">)</span>&nbsp;<span class="op" id="5233192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233195">return</span>&nbsp;<span class="ident" id="5233202">strconv</span><span class="op" id="5233209">.</span><span class="ident" id="5233210">ParseFloat</span><span class="op" id="5233220">(</span><span class="builtintype" id="5233221">string</span><span class="op" id="5233227">(</span><span class="ident" id="5233228">n</span><span class="op" id="5233229">)</span><span class="op" id="5233230">,</span>&nbsp;<span class="num" id="5233232">64</span><span class="op" id="5233234">)</span><br>
<span class="lineno"></span><span class="op" id="5233236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5233239">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="5233280">func</span>&nbsp;<span class="op" id="5233285">(</span><span class="ident" id="5233286">n</span>&nbsp;<span class="ident" id="5233288">Number</span><span class="op" id="5233294">)</span>&nbsp;<span class="ident" id="5233296">Int64</span><span class="op" id="5233301">(</span><span class="op" id="5233302">)</span>&nbsp;<span class="op" id="5233304">(</span><span class="ident" id="5233305">int64</span><span class="op" id="5233310">,</span>&nbsp;<span class="builtintype" id="5233312">error</span><span class="op" id="5233317">)</span>&nbsp;<span class="op" id="5233319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233322">return</span>&nbsp;<span class="ident" id="5233329">strconv</span><span class="op" id="5233336">.</span><span class="ident" id="5233337">ParseInt</span><span class="op" id="5233345">(</span><span class="builtintype" id="5233346">string</span><span class="op" id="5233352">(</span><span class="ident" id="5233353">n</span><span class="op" id="5233354">)</span><span class="op" id="5233355">,</span>&nbsp;<span class="num" id="5233357">10</span><span class="op" id="5233359">,</span>&nbsp;<span class="num" id="5233361">64</span><span class="op" id="5233363">)</span><br>
<span class="lineno"></span><span class="op" id="5233365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5233368">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="5233433">type</span>&nbsp;<span class="ident" id="5233438">decodeState</span>&nbsp;<span class="keyword" id="5233450">struct</span>&nbsp;<span class="op" id="5233457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233460">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5233471">[</span><span class="op" id="5233472">]</span><span class="builtintype" id="5233473">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233479">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5233490">int</span>&nbsp;<span class="comment" id="5233494">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233518">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5233529">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233538">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5233549">scanner</span>&nbsp;<span class="comment" id="5233557">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233584">savedError</span>&nbsp;<span class="builtintype" id="5233595">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233602">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="5233613">bool</span><br>
<span class="lineno"></span><span class="op" id="5233618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5233621">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="5233682">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="5233744">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="5233790">var</span>&nbsp;<span class="ident" id="5233794">errPhase</span>&nbsp;<span class="op" id="5233803">=</span>&nbsp;<span class="ident" id="5233805">errors</span><span class="op" id="5233811">.</span><span class="ident" id="5233812">New</span><span class="op" id="5233815">(</span><span class="string" id="5233816">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="5233869">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5233872">func</span>&nbsp;<span class="op" id="5233877">(</span><span class="ident" id="5233878">d</span>&nbsp;<span class="op" id="5233880">*</span><span class="ident" id="5233881">decodeState</span><span class="op" id="5233892">)</span>&nbsp;<span class="ident" id="5233894">init</span><span class="op" id="5233898">(</span><span class="ident" id="5233899">data</span>&nbsp;<span class="op" id="5233904">[</span><span class="op" id="5233905">]</span><span class="builtintype" id="5233906">byte</span><span class="op" id="5233910">)</span>&nbsp;<span class="op" id="5233912">*</span><span class="ident" id="5233913">decodeState</span>&nbsp;<span class="op" id="5233925">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233928">d</span><span class="op" id="5233929">.</span><span class="ident" id="5233930">data</span>&nbsp;<span class="op" id="5233935">=</span>&nbsp;<span class="ident" id="5233937">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233943">d</span><span class="op" id="5233944">.</span><span class="ident" id="5233945">off</span>&nbsp;<span class="op" id="5233949">=</span>&nbsp;<span class="num" id="5233951">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233954">d</span><span class="op" id="5233955">.</span><span class="ident" id="5233956">savedError</span>&nbsp;<span class="op" id="5233967">=</span>&nbsp;<span class="ident" id="5233969">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233974">return</span>&nbsp;<span class="ident" id="5233981">d</span><br>
<span class="lineno"></span><span class="op" id="5233983">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5233986">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5234038">func</span>&nbsp;<span class="op" id="5234043">(</span><span class="ident" id="5234044">d</span>&nbsp;<span class="op" id="5234046">*</span><span class="ident" id="5234047">decodeState</span><span class="op" id="5234058">)</span>&nbsp;<span class="builtintype" id="5234060">error</span><span class="op" id="5234065">(</span><span class="ident" id="5234066">err</span>&nbsp;<span class="builtintype" id="5234070">error</span><span class="op" id="5234075">)</span>&nbsp;<span class="op" id="5234077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5234080">panic</span><span class="op" id="5234085">(</span><span class="ident" id="5234086">err</span><span class="op" id="5234089">)</span><br>
<span class="lineno"></span><span class="op" id="5234091">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5234094">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="5234146">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="5234192">func</span>&nbsp;<span class="op" id="5234197">(</span><span class="ident" id="5234198">d</span>&nbsp;<span class="op" id="5234200">*</span><span class="ident" id="5234201">decodeState</span><span class="op" id="5234212">)</span>&nbsp;<span class="ident" id="5234214">saveError</span><span class="op" id="5234223">(</span><span class="ident" id="5234224">err</span>&nbsp;<span class="builtintype" id="5234228">error</span><span class="op" id="5234233">)</span>&nbsp;<span class="op" id="5234235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234238">if</span>&nbsp;<span class="ident" id="5234241">d</span><span class="op" id="5234242">.</span><span class="ident" id="5234243">savedError</span>&nbsp;<span class="op" id="5234254">==</span>&nbsp;<span class="ident" id="5234257">nil</span>&nbsp;<span class="op" id="5234261">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234265">d</span><span class="op" id="5234266">.</span><span class="ident" id="5234267">savedError</span>&nbsp;<span class="op" id="5234278">=</span>&nbsp;<span class="ident" id="5234280">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234285">}</span><br>
<span class="lineno"></span><span class="op" id="5234287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5234290">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="5234363">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5234431">func</span>&nbsp;<span class="op" id="5234436">(</span><span class="ident" id="5234437">d</span>&nbsp;<span class="op" id="5234439">*</span><span class="ident" id="5234440">decodeState</span><span class="op" id="5234451">)</span>&nbsp;<span class="ident" id="5234453">next</span><span class="op" id="5234457">(</span><span class="op" id="5234458">)</span>&nbsp;<span class="op" id="5234460">[</span><span class="op" id="5234461">]</span><span class="builtintype" id="5234462">byte</span>&nbsp;<span class="op" id="5234467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234470">c</span>&nbsp;<span class="op" id="5234472">:=</span>&nbsp;<span class="ident" id="5234475">d</span><span class="op" id="5234476">.</span><span class="ident" id="5234477">data</span><span class="op" id="5234481">[</span><span class="ident" id="5234482">d</span><span class="op" id="5234483">.</span><span class="ident" id="5234484">off</span><span class="op" id="5234487">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234490">item</span><span class="op" id="5234494">,</span>&nbsp;<span class="ident" id="5234496">rest</span><span class="op" id="5234500">,</span>&nbsp;<span class="ident" id="5234502">err</span>&nbsp;<span class="op" id="5234506">:=</span>&nbsp;<span class="ident" id="5234509">nextValue</span><span class="op" id="5234518">(</span><span class="ident" id="5234519">d</span><span class="op" id="5234520">.</span><span class="ident" id="5234521">data</span><span class="op" id="5234525">[</span><span class="ident" id="5234526">d</span><span class="op" id="5234527">.</span><span class="ident" id="5234528">off</span><span class="op" id="5234531">:</span><span class="op" id="5234532">]</span><span class="op" id="5234533">,</span>&nbsp;<span class="op" id="5234535">&amp;</span><span class="ident" id="5234536">d</span><span class="op" id="5234537">.</span><span class="ident" id="5234538">nextscan</span><span class="op" id="5234546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234549">if</span>&nbsp;<span class="ident" id="5234552">err</span>&nbsp;<span class="op" id="5234556">!=</span>&nbsp;<span class="ident" id="5234559">nil</span>&nbsp;<span class="op" id="5234563">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234567">d</span><span class="op" id="5234568">.</span><span class="builtintype" id="5234569">error</span><span class="op" id="5234574">(</span><span class="ident" id="5234575">err</span><span class="op" id="5234578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234584">d</span><span class="op" id="5234585">.</span><span class="ident" id="5234586">off</span>&nbsp;<span class="op" id="5234590">=</span>&nbsp;<span class="builtinfunc" id="5234592">len</span><span class="op" id="5234595">(</span><span class="ident" id="5234596">d</span><span class="op" id="5234597">.</span><span class="ident" id="5234598">data</span><span class="op" id="5234602">)</span>&nbsp;<span class="op" id="5234604">-</span>&nbsp;<span class="builtinfunc" id="5234606">len</span><span class="op" id="5234609">(</span><span class="ident" id="5234610">rest</span><span class="op" id="5234614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5234618">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5234669">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5234725">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234775">if</span>&nbsp;<span class="ident" id="5234778">c</span>&nbsp;<span class="op" id="5234780">==</span>&nbsp;<span class="string" id="5234783">&#39;{&#39;</span>&nbsp;<span class="op" id="5234787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234791">d</span><span class="op" id="5234792">.</span><span class="ident" id="5234793">scan</span><span class="op" id="5234797">.</span><span class="ident" id="5234798">step</span><span class="op" id="5234802">(</span><span class="op" id="5234803">&amp;</span><span class="ident" id="5234804">d</span><span class="op" id="5234805">.</span><span class="ident" id="5234806">scan</span><span class="op" id="5234810">,</span>&nbsp;<span class="string" id="5234812">&#39;}&#39;</span><span class="op" id="5234815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234818">}</span>&nbsp;<span class="keyword" id="5234820">else</span>&nbsp;<span class="op" id="5234825">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234829">d</span><span class="op" id="5234830">.</span><span class="ident" id="5234831">scan</span><span class="op" id="5234835">.</span><span class="ident" id="5234836">step</span><span class="op" id="5234840">(</span><span class="op" id="5234841">&amp;</span><span class="ident" id="5234842">d</span><span class="op" id="5234843">.</span><span class="ident" id="5234844">scan</span><span class="op" id="5234848">,</span>&nbsp;<span class="string" id="5234850">&#39;]&#39;</span><span class="op" id="5234853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234860">return</span>&nbsp;<span class="ident" id="5234867">item</span><br>
<span class="lineno"></span><span class="op" id="5234872">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5234875">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5234931">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="5234972">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="5235023">func</span>&nbsp;<span class="op" id="5235028">(</span><span class="ident" id="5235029">d</span>&nbsp;<span class="op" id="5235031">*</span><span class="ident" id="5235032">decodeState</span><span class="op" id="5235043">)</span>&nbsp;<span class="ident" id="5235045">scanWhile</span><span class="op" id="5235054">(</span><span class="ident" id="5235055">op</span>&nbsp;<span class="builtintype" id="5235058">int</span><span class="op" id="5235061">)</span>&nbsp;<span class="builtintype" id="5235063">int</span>&nbsp;<span class="op" id="5235067">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235070">var</span>&nbsp;<span class="ident" id="5235074">newOp</span>&nbsp;<span class="builtintype" id="5235080">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235085">for</span>&nbsp;<span class="op" id="5235089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235093">if</span>&nbsp;<span class="ident" id="5235096">d</span><span class="op" id="5235097">.</span><span class="ident" id="5235098">off</span>&nbsp;<span class="op" id="5235102">&gt;=</span>&nbsp;<span class="builtinfunc" id="5235105">len</span><span class="op" id="5235108">(</span><span class="ident" id="5235109">d</span><span class="op" id="5235110">.</span><span class="ident" id="5235111">data</span><span class="op" id="5235115">)</span>&nbsp;<span class="op" id="5235117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235122">newOp</span>&nbsp;<span class="op" id="5235128">=</span>&nbsp;<span class="ident" id="5235130">d</span><span class="op" id="5235131">.</span><span class="ident" id="5235132">scan</span><span class="op" id="5235136">.</span><span class="ident" id="5235137">eof</span><span class="op" id="5235140">(</span><span class="op" id="5235141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235146">d</span><span class="op" id="5235147">.</span><span class="ident" id="5235148">off</span>&nbsp;<span class="op" id="5235152">=</span>&nbsp;<span class="builtinfunc" id="5235154">len</span><span class="op" id="5235157">(</span><span class="ident" id="5235158">d</span><span class="op" id="5235159">.</span><span class="ident" id="5235160">data</span><span class="op" id="5235164">)</span>&nbsp;<span class="op" id="5235166">+</span>&nbsp;<span class="num" id="5235168">1</span>&nbsp;<span class="comment" id="5235170">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235205">}</span>&nbsp;<span class="keyword" id="5235207">else</span>&nbsp;<span class="op" id="5235212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235217">c</span>&nbsp;<span class="op" id="5235219">:=</span>&nbsp;<span class="builtintype" id="5235222">int</span><span class="op" id="5235225">(</span><span class="ident" id="5235226">d</span><span class="op" id="5235227">.</span><span class="ident" id="5235228">data</span><span class="op" id="5235232">[</span><span class="ident" id="5235233">d</span><span class="op" id="5235234">.</span><span class="ident" id="5235235">off</span><span class="op" id="5235238">]</span><span class="op" id="5235239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235244">d</span><span class="op" id="5235245">.</span><span class="ident" id="5235246">off</span><span class="op" id="5235249">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235255">newOp</span>&nbsp;<span class="op" id="5235261">=</span>&nbsp;<span class="ident" id="5235263">d</span><span class="op" id="5235264">.</span><span class="ident" id="5235265">scan</span><span class="op" id="5235269">.</span><span class="ident" id="5235270">step</span><span class="op" id="5235274">(</span><span class="op" id="5235275">&amp;</span><span class="ident" id="5235276">d</span><span class="op" id="5235277">.</span><span class="ident" id="5235278">scan</span><span class="op" id="5235282">,</span>&nbsp;<span class="ident" id="5235284">c</span><span class="op" id="5235285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235289">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235293">if</span>&nbsp;<span class="ident" id="5235296">newOp</span>&nbsp;<span class="op" id="5235302">!=</span>&nbsp;<span class="ident" id="5235305">op</span>&nbsp;<span class="op" id="5235308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235313">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235327">return</span>&nbsp;<span class="ident" id="5235334">newOp</span><br>
<span class="lineno">245</span><span class="op" id="5235340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5235343">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5235409">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5235462">func</span>&nbsp;<span class="op" id="5235467">(</span><span class="ident" id="5235468">d</span>&nbsp;<span class="op" id="5235470">*</span><span class="ident" id="5235471">decodeState</span><span class="op" id="5235482">)</span>&nbsp;<span class="ident" id="5235484">value</span><span class="op" id="5235489">(</span><span class="ident" id="5235490">v</span>&nbsp;<span class="ident" id="5235492">reflect</span><span class="op" id="5235499">.</span><span class="ident" id="5235500">Value</span><span class="op" id="5235505">)</span>&nbsp;<span class="op" id="5235507">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235510">if</span>&nbsp;<span class="op" id="5235513">!</span><span class="ident" id="5235514">v</span><span class="op" id="5235515">.</span><span class="ident" id="5235516">IsValid</span><span class="op" id="5235523">(</span><span class="op" id="5235524">)</span>&nbsp;<span class="op" id="5235526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235530">_</span><span class="op" id="5235531">,</span>&nbsp;<span class="ident" id="5235533">rest</span><span class="op" id="5235537">,</span>&nbsp;<span class="ident" id="5235539">err</span>&nbsp;<span class="op" id="5235543">:=</span>&nbsp;<span class="ident" id="5235546">nextValue</span><span class="op" id="5235555">(</span><span class="ident" id="5235556">d</span><span class="op" id="5235557">.</span><span class="ident" id="5235558">data</span><span class="op" id="5235562">[</span><span class="ident" id="5235563">d</span><span class="op" id="5235564">.</span><span class="ident" id="5235565">off</span><span class="op" id="5235568">:</span><span class="op" id="5235569">]</span><span class="op" id="5235570">,</span>&nbsp;<span class="op" id="5235572">&amp;</span><span class="ident" id="5235573">d</span><span class="op" id="5235574">.</span><span class="ident" id="5235575">nextscan</span><span class="op" id="5235583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235587">if</span>&nbsp;<span class="ident" id="5235590">err</span>&nbsp;<span class="op" id="5235594">!=</span>&nbsp;<span class="ident" id="5235597">nil</span>&nbsp;<span class="op" id="5235601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235606">d</span><span class="op" id="5235607">.</span><span class="builtintype" id="5235608">error</span><span class="op" id="5235613">(</span><span class="ident" id="5235614">err</span><span class="op" id="5235617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235621">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235625">d</span><span class="op" id="5235626">.</span><span class="ident" id="5235627">off</span>&nbsp;<span class="op" id="5235631">=</span>&nbsp;<span class="builtinfunc" id="5235633">len</span><span class="op" id="5235636">(</span><span class="ident" id="5235637">d</span><span class="op" id="5235638">.</span><span class="ident" id="5235639">data</span><span class="op" id="5235643">)</span>&nbsp;<span class="op" id="5235645">-</span>&nbsp;<span class="builtinfunc" id="5235647">len</span><span class="op" id="5235650">(</span><span class="ident" id="5235651">rest</span><span class="op" id="5235655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235660">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235721">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235783">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235837">if</span>&nbsp;<span class="ident" id="5235840">d</span><span class="op" id="5235841">.</span><span class="ident" id="5235842">scan</span><span class="op" id="5235846">.</span><span class="ident" id="5235847">redo</span>&nbsp;<span class="op" id="5235852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235857">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235871">d</span><span class="op" id="5235872">.</span><span class="ident" id="5235873">scan</span><span class="op" id="5235877">.</span><span class="ident" id="5235878">redo</span>&nbsp;<span class="op" id="5235883">=</span>&nbsp;<span class="builtintype" id="5235885">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235894">d</span><span class="op" id="5235895">.</span><span class="ident" id="5235896">scan</span><span class="op" id="5235900">.</span><span class="ident" id="5235901">step</span>&nbsp;<span class="op" id="5235906">=</span>&nbsp;<span class="ident" id="5235908">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235926">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235930">d</span><span class="op" id="5235931">.</span><span class="ident" id="5235932">scan</span><span class="op" id="5235936">.</span><span class="ident" id="5235937">step</span><span class="op" id="5235941">(</span><span class="op" id="5235942">&amp;</span><span class="ident" id="5235943">d</span><span class="op" id="5235944">.</span><span class="ident" id="5235945">scan</span><span class="op" id="5235949">,</span>&nbsp;<span class="string" id="5235951">&#39;&#34;&#39;</span><span class="op" id="5235954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235958">d</span><span class="op" id="5235959">.</span><span class="ident" id="5235960">scan</span><span class="op" id="5235964">.</span><span class="ident" id="5235965">step</span><span class="op" id="5235969">(</span><span class="op" id="5235970">&amp;</span><span class="ident" id="5235971">d</span><span class="op" id="5235972">.</span><span class="ident" id="5235973">scan</span><span class="op" id="5235977">,</span>&nbsp;<span class="string" id="5235979">&#39;&#34;&#39;</span><span class="op" id="5235982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235987">n</span>&nbsp;<span class="op" id="5235989">:=</span>&nbsp;<span class="builtinfunc" id="5235992">len</span><span class="op" id="5235995">(</span><span class="ident" id="5235996">d</span><span class="op" id="5235997">.</span><span class="ident" id="5235998">scan</span><span class="op" id="5236002">.</span><span class="ident" id="5236003">parseState</span><span class="op" id="5236013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236017">if</span>&nbsp;<span class="ident" id="5236020">n</span>&nbsp;<span class="op" id="5236022">&gt;</span>&nbsp;<span class="num" id="5236024">0</span>&nbsp;<span class="op" id="5236026">&amp;&amp;</span>&nbsp;<span class="ident" id="5236029">d</span><span class="op" id="5236030">.</span><span class="ident" id="5236031">scan</span><span class="op" id="5236035">.</span><span class="ident" id="5236036">parseState</span><span class="op" id="5236046">[</span><span class="ident" id="5236047">n</span><span class="op" id="5236048">-</span><span class="num" id="5236049">1</span><span class="op" id="5236050">]</span>&nbsp;<span class="op" id="5236052">==</span>&nbsp;<span class="ident" id="5236055">parseObjectKey</span>&nbsp;<span class="op" id="5236070">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5236075">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236141">d</span><span class="op" id="5236142">.</span><span class="ident" id="5236143">scan</span><span class="op" id="5236147">.</span><span class="ident" id="5236148">step</span><span class="op" id="5236152">(</span><span class="op" id="5236153">&amp;</span><span class="ident" id="5236154">d</span><span class="op" id="5236155">.</span><span class="ident" id="5236156">scan</span><span class="op" id="5236160">,</span>&nbsp;<span class="string" id="5236162">&#39;:&#39;</span><span class="op" id="5236165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236170">d</span><span class="op" id="5236171">.</span><span class="ident" id="5236172">scan</span><span class="op" id="5236176">.</span><span class="ident" id="5236177">step</span><span class="op" id="5236181">(</span><span class="op" id="5236182">&amp;</span><span class="ident" id="5236183">d</span><span class="op" id="5236184">.</span><span class="ident" id="5236185">scan</span><span class="op" id="5236189">,</span>&nbsp;<span class="string" id="5236191">&#39;&#34;&#39;</span><span class="op" id="5236194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236199">d</span><span class="op" id="5236200">.</span><span class="ident" id="5236201">scan</span><span class="op" id="5236205">.</span><span class="ident" id="5236206">step</span><span class="op" id="5236210">(</span><span class="op" id="5236211">&amp;</span><span class="ident" id="5236212">d</span><span class="op" id="5236213">.</span><span class="ident" id="5236214">scan</span><span class="op" id="5236218">,</span>&nbsp;<span class="string" id="5236220">&#39;&#34;&#39;</span><span class="op" id="5236223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236228">d</span><span class="op" id="5236229">.</span><span class="ident" id="5236230">scan</span><span class="op" id="5236234">.</span><span class="ident" id="5236235">step</span><span class="op" id="5236239">(</span><span class="op" id="5236240">&amp;</span><span class="ident" id="5236241">d</span><span class="op" id="5236242">.</span><span class="ident" id="5236243">scan</span><span class="op" id="5236247">,</span>&nbsp;<span class="string" id="5236249">&#39;}&#39;</span><span class="op" id="5236252">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236261">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236273">switch</span>&nbsp;<span class="ident" id="5236280">op</span>&nbsp;<span class="op" id="5236283">:=</span>&nbsp;<span class="ident" id="5236286">d</span><span class="op" id="5236287">.</span><span class="ident" id="5236288">scanWhile</span><span class="op" id="5236297">(</span><span class="ident" id="5236298">scanSkipSpace</span><span class="op" id="5236311">)</span><span class="op" id="5236312">;</span>&nbsp;<span class="ident" id="5236314">op</span>&nbsp;<span class="op" id="5236317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236320">default</span><span class="op" id="5236327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236331">d</span><span class="op" id="5236332">.</span><span class="builtintype" id="5236333">error</span><span class="op" id="5236338">(</span><span class="ident" id="5236339">errPhase</span><span class="op" id="5236347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236351">case</span>&nbsp;<span class="ident" id="5236356">scanBeginArray</span><span class="op" id="5236370">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236374">d</span><span class="op" id="5236375">.</span><span class="ident" id="5236376">array</span><span class="op" id="5236381">(</span><span class="ident" id="5236382">v</span><span class="op" id="5236383">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236387">case</span>&nbsp;<span class="ident" id="5236392">scanBeginObject</span><span class="op" id="5236407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236411">d</span><span class="op" id="5236412">.</span><span class="ident" id="5236413">object</span><span class="op" id="5236419">(</span><span class="ident" id="5236420">v</span><span class="op" id="5236421">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236425">case</span>&nbsp;<span class="ident" id="5236430">scanBeginLiteral</span><span class="op" id="5236446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236450">d</span><span class="op" id="5236451">.</span><span class="ident" id="5236452">literal</span><span class="op" id="5236459">(</span><span class="ident" id="5236460">v</span><span class="op" id="5236461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236464">}</span><br>
<span class="lineno"></span><span class="op" id="5236466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="5236469">type</span>&nbsp;<span class="ident" id="5236474">unquotedValue</span>&nbsp;<span class="keyword" id="5236488">struct</span><span class="op" id="5236494">{</span><span class="op" id="5236495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5236498">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5236541">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5236607">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="5236675">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5236715">func</span>&nbsp;<span class="op" id="5236720">(</span><span class="ident" id="5236721">d</span>&nbsp;<span class="op" id="5236723">*</span><span class="ident" id="5236724">decodeState</span><span class="op" id="5236735">)</span>&nbsp;<span class="ident" id="5236737">valueQuoted</span><span class="op" id="5236748">(</span><span class="op" id="5236749">)</span>&nbsp;<span class="keyword" id="5236751">interface</span><span class="op" id="5236760">{</span><span class="op" id="5236761">}</span>&nbsp;<span class="op" id="5236763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236766">switch</span>&nbsp;<span class="ident" id="5236773">op</span>&nbsp;<span class="op" id="5236776">:=</span>&nbsp;<span class="ident" id="5236779">d</span><span class="op" id="5236780">.</span><span class="ident" id="5236781">scanWhile</span><span class="op" id="5236790">(</span><span class="ident" id="5236791">scanSkipSpace</span><span class="op" id="5236804">)</span><span class="op" id="5236805">;</span>&nbsp;<span class="ident" id="5236807">op</span>&nbsp;<span class="op" id="5236810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236813">default</span><span class="op" id="5236820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236824">d</span><span class="op" id="5236825">.</span><span class="builtintype" id="5236826">error</span><span class="op" id="5236831">(</span><span class="ident" id="5236832">errPhase</span><span class="op" id="5236840">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236844">case</span>&nbsp;<span class="ident" id="5236849">scanBeginArray</span><span class="op" id="5236863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236867">d</span><span class="op" id="5236868">.</span><span class="ident" id="5236869">array</span><span class="op" id="5236874">(</span><span class="ident" id="5236875">reflect</span><span class="op" id="5236882">.</span><span class="ident" id="5236883">Value</span><span class="op" id="5236888">{</span><span class="op" id="5236889">}</span><span class="op" id="5236890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236894">case</span>&nbsp;<span class="ident" id="5236899">scanBeginObject</span><span class="op" id="5236914">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236918">d</span><span class="op" id="5236919">.</span><span class="ident" id="5236920">object</span><span class="op" id="5236926">(</span><span class="ident" id="5236927">reflect</span><span class="op" id="5236934">.</span><span class="ident" id="5236935">Value</span><span class="op" id="5236940">{</span><span class="op" id="5236941">}</span><span class="op" id="5236942">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236946">case</span>&nbsp;<span class="ident" id="5236951">scanBeginLiteral</span><span class="op" id="5236967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236971">switch</span>&nbsp;<span class="ident" id="5236978">v</span>&nbsp;<span class="op" id="5236980">:=</span>&nbsp;<span class="ident" id="5236983">d</span><span class="op" id="5236984">.</span><span class="ident" id="5236985">literalInterface</span><span class="op" id="5237001">(</span><span class="op" id="5237002">)</span><span class="op" id="5237003">.</span><span class="op" id="5237004">(</span><span class="keyword" id="5237005">type</span><span class="op" id="5237009">)</span>&nbsp;<span class="op" id="5237011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237015">case</span>&nbsp;<span class="ident" id="5237020">nil</span><span class="op" id="5237023">,</span>&nbsp;<span class="builtintype" id="5237025">string</span><span class="op" id="5237031">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237036">return</span>&nbsp;<span class="ident" id="5237043">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237053">return</span>&nbsp;<span class="ident" id="5237060">unquotedValue</span><span class="op" id="5237073">{</span><span class="op" id="5237074">}</span><br>
<span class="lineno"></span><span class="op" id="5237076">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5237079">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="5237135">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="5237170">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="5237239">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="5237327">func</span>&nbsp;<span class="op" id="5237332">(</span><span class="ident" id="5237333">d</span>&nbsp;<span class="op" id="5237335">*</span><span class="ident" id="5237336">decodeState</span><span class="op" id="5237347">)</span>&nbsp;<span class="ident" id="5237349">indirect</span><span class="op" id="5237357">(</span><span class="ident" id="5237358">v</span>&nbsp;<span class="ident" id="5237360">reflect</span><span class="op" id="5237367">.</span><span class="ident" id="5237368">Value</span><span class="op" id="5237373">,</span>&nbsp;<span class="ident" id="5237375">decodingNull</span>&nbsp;<span class="builtintype" id="5237388">bool</span><span class="op" id="5237392">)</span>&nbsp;<span class="op" id="5237394">(</span><span class="ident" id="5237395">Unmarshaler</span><span class="op" id="5237406">,</span>&nbsp;<span class="ident" id="5237408">encoding</span><span class="op" id="5237416">.</span><span class="ident" id="5237417">TextUnmarshaler</span><span class="op" id="5237432">,</span>&nbsp;<span class="ident" id="5237434">reflect</span><span class="op" id="5237441">.</span><span class="ident" id="5237442">Value</span><span class="op" id="5237447">)</span>&nbsp;<span class="op" id="5237449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237452">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237497">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237566">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237584">if</span>&nbsp;<span class="ident" id="5237587">v</span><span class="op" id="5237588">.</span><span class="ident" id="5237589">Kind</span><span class="op" id="5237593">(</span><span class="op" id="5237594">)</span>&nbsp;<span class="op" id="5237596">!=</span>&nbsp;<span class="ident" id="5237599">reflect</span><span class="op" id="5237606">.</span><span class="ident" id="5237607">Ptr</span>&nbsp;<span class="op" id="5237611">&amp;&amp;</span>&nbsp;<span class="ident" id="5237614">v</span><span class="op" id="5237615">.</span><span class="ident" id="5237616">Type</span><span class="op" id="5237620">(</span><span class="op" id="5237621">)</span><span class="op" id="5237622">.</span><span class="ident" id="5237623">Name</span><span class="op" id="5237627">(</span><span class="op" id="5237628">)</span>&nbsp;<span class="op" id="5237630">!=</span>&nbsp;<span class="string" id="5237633">&#34;&#34;</span>&nbsp;<span class="op" id="5237636">&amp;&amp;</span>&nbsp;<span class="ident" id="5237639">v</span><span class="op" id="5237640">.</span><span class="ident" id="5237641">CanAddr</span><span class="op" id="5237648">(</span><span class="op" id="5237649">)</span>&nbsp;<span class="op" id="5237651">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237655">v</span>&nbsp;<span class="op" id="5237657">=</span>&nbsp;<span class="ident" id="5237659">v</span><span class="op" id="5237660">.</span><span class="ident" id="5237661">Addr</span><span class="op" id="5237665">(</span><span class="op" id="5237666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237672">for</span>&nbsp;<span class="op" id="5237676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237680">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237743">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237770">if</span>&nbsp;<span class="ident" id="5237773">v</span><span class="op" id="5237774">.</span><span class="ident" id="5237775">Kind</span><span class="op" id="5237779">(</span><span class="op" id="5237780">)</span>&nbsp;<span class="op" id="5237782">==</span>&nbsp;<span class="ident" id="5237785">reflect</span><span class="op" id="5237792">.</span><span class="ident" id="5237793">Interface</span>&nbsp;<span class="op" id="5237803">&amp;&amp;</span>&nbsp;<span class="op" id="5237806">!</span><span class="ident" id="5237807">v</span><span class="op" id="5237808">.</span><span class="ident" id="5237809">IsNil</span><span class="op" id="5237814">(</span><span class="op" id="5237815">)</span>&nbsp;<span class="op" id="5237817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237822">e</span>&nbsp;<span class="op" id="5237824">:=</span>&nbsp;<span class="ident" id="5237827">v</span><span class="op" id="5237828">.</span><span class="ident" id="5237829">Elem</span><span class="op" id="5237833">(</span><span class="op" id="5237834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237839">if</span>&nbsp;<span class="ident" id="5237842">e</span><span class="op" id="5237843">.</span><span class="ident" id="5237844">Kind</span><span class="op" id="5237848">(</span><span class="op" id="5237849">)</span>&nbsp;<span class="op" id="5237851">==</span>&nbsp;<span class="ident" id="5237854">reflect</span><span class="op" id="5237861">.</span><span class="ident" id="5237862">Ptr</span>&nbsp;<span class="op" id="5237866">&amp;&amp;</span>&nbsp;<span class="op" id="5237869">!</span><span class="ident" id="5237870">e</span><span class="op" id="5237871">.</span><span class="ident" id="5237872">IsNil</span><span class="op" id="5237877">(</span><span class="op" id="5237878">)</span>&nbsp;<span class="op" id="5237880">&amp;&amp;</span>&nbsp;<span class="op" id="5237883">(</span><span class="op" id="5237884">!</span><span class="ident" id="5237885">decodingNull</span>&nbsp;<span class="op" id="5237898">||</span>&nbsp;<span class="ident" id="5237901">e</span><span class="op" id="5237902">.</span><span class="ident" id="5237903">Elem</span><span class="op" id="5237907">(</span><span class="op" id="5237908">)</span><span class="op" id="5237909">.</span><span class="ident" id="5237910">Kind</span><span class="op" id="5237914">(</span><span class="op" id="5237915">)</span>&nbsp;<span class="op" id="5237917">==</span>&nbsp;<span class="ident" id="5237920">reflect</span><span class="op" id="5237927">.</span><span class="ident" id="5237928">Ptr</span><span class="op" id="5237931">)</span>&nbsp;<span class="op" id="5237933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237939">v</span>&nbsp;<span class="op" id="5237941">=</span>&nbsp;<span class="ident" id="5237943">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237949">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237970">if</span>&nbsp;<span class="ident" id="5237973">v</span><span class="op" id="5237974">.</span><span class="ident" id="5237975">Kind</span><span class="op" id="5237979">(</span><span class="op" id="5237980">)</span>&nbsp;<span class="op" id="5237982">!=</span>&nbsp;<span class="ident" id="5237985">reflect</span><span class="op" id="5237992">.</span><span class="ident" id="5237993">Ptr</span>&nbsp;<span class="op" id="5237997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238002">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238015">if</span>&nbsp;<span class="ident" id="5238018">v</span><span class="op" id="5238019">.</span><span class="ident" id="5238020">Elem</span><span class="op" id="5238024">(</span><span class="op" id="5238025">)</span><span class="op" id="5238026">.</span><span class="ident" id="5238027">Kind</span><span class="op" id="5238031">(</span><span class="op" id="5238032">)</span>&nbsp;<span class="op" id="5238034">!=</span>&nbsp;<span class="ident" id="5238037">reflect</span><span class="op" id="5238044">.</span><span class="ident" id="5238045">Ptr</span>&nbsp;<span class="op" id="5238049">&amp;&amp;</span>&nbsp;<span class="ident" id="5238052">decodingNull</span>&nbsp;<span class="op" id="5238065">&amp;&amp;</span>&nbsp;<span class="ident" id="5238068">v</span><span class="op" id="5238069">.</span><span class="ident" id="5238070">CanSet</span><span class="op" id="5238076">(</span><span class="op" id="5238077">)</span>&nbsp;<span class="op" id="5238079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238084">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238092">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238096">if</span>&nbsp;<span class="ident" id="5238099">v</span><span class="op" id="5238100">.</span><span class="ident" id="5238101">IsNil</span><span class="op" id="5238106">(</span><span class="op" id="5238107">)</span>&nbsp;<span class="op" id="5238109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238114">v</span><span class="op" id="5238115">.</span><span class="ident" id="5238116">Set</span><span class="op" id="5238119">(</span><span class="ident" id="5238120">reflect</span><span class="op" id="5238127">.</span><span class="ident" id="5238128">New</span><span class="op" id="5238131">(</span><span class="ident" id="5238132">v</span><span class="op" id="5238133">.</span><span class="ident" id="5238134">Type</span><span class="op" id="5238138">(</span><span class="op" id="5238139">)</span><span class="op" id="5238140">.</span><span class="ident" id="5238141">Elem</span><span class="op" id="5238145">(</span><span class="op" id="5238146">)</span><span class="op" id="5238147">)</span><span class="op" id="5238148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238156">if</span>&nbsp;<span class="ident" id="5238159">v</span><span class="op" id="5238160">.</span><span class="ident" id="5238161">Type</span><span class="op" id="5238165">(</span><span class="op" id="5238166">)</span><span class="op" id="5238167">.</span><span class="ident" id="5238168">NumMethod</span><span class="op" id="5238177">(</span><span class="op" id="5238178">)</span>&nbsp;<span class="op" id="5238180">&gt;</span>&nbsp;<span class="num" id="5238182">0</span>&nbsp;<span class="op" id="5238184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238189">if</span>&nbsp;<span class="ident" id="5238192">u</span><span class="op" id="5238193">,</span>&nbsp;<span class="ident" id="5238195">ok</span>&nbsp;<span class="op" id="5238198">:=</span>&nbsp;<span class="ident" id="5238201">v</span><span class="op" id="5238202">.</span><span class="ident" id="5238203">Interface</span><span class="op" id="5238212">(</span><span class="op" id="5238213">)</span><span class="op" id="5238214">.</span><span class="op" id="5238215">(</span><span class="ident" id="5238216">Unmarshaler</span><span class="op" id="5238227">)</span><span class="op" id="5238228">;</span>&nbsp;<span class="ident" id="5238230">ok</span>&nbsp;<span class="op" id="5238233">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238239">return</span>&nbsp;<span class="ident" id="5238246">u</span><span class="op" id="5238247">,</span>&nbsp;<span class="ident" id="5238249">nil</span><span class="op" id="5238252">,</span>&nbsp;<span class="ident" id="5238254">reflect</span><span class="op" id="5238261">.</span><span class="ident" id="5238262">Value</span><span class="op" id="5238267">{</span><span class="op" id="5238268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238278">if</span>&nbsp;<span class="ident" id="5238281">u</span><span class="op" id="5238282">,</span>&nbsp;<span class="ident" id="5238284">ok</span>&nbsp;<span class="op" id="5238287">:=</span>&nbsp;<span class="ident" id="5238290">v</span><span class="op" id="5238291">.</span><span class="ident" id="5238292">Interface</span><span class="op" id="5238301">(</span><span class="op" id="5238302">)</span><span class="op" id="5238303">.</span><span class="op" id="5238304">(</span><span class="ident" id="5238305">encoding</span><span class="op" id="5238313">.</span><span class="ident" id="5238314">TextUnmarshaler</span><span class="op" id="5238329">)</span><span class="op" id="5238330">;</span>&nbsp;<span class="ident" id="5238332">ok</span>&nbsp;<span class="op" id="5238335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238341">return</span>&nbsp;<span class="ident" id="5238348">nil</span><span class="op" id="5238351">,</span>&nbsp;<span class="ident" id="5238353">u</span><span class="op" id="5238354">,</span>&nbsp;<span class="ident" id="5238356">reflect</span><span class="op" id="5238363">.</span><span class="ident" id="5238364">Value</span><span class="op" id="5238369">{</span><span class="op" id="5238370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238375">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238383">v</span>&nbsp;<span class="op" id="5238385">=</span>&nbsp;<span class="ident" id="5238387">v</span><span class="op" id="5238388">.</span><span class="ident" id="5238389">Elem</span><span class="op" id="5238393">(</span><span class="op" id="5238394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238400">return</span>&nbsp;<span class="ident" id="5238407">nil</span><span class="op" id="5238410">,</span>&nbsp;<span class="ident" id="5238412">nil</span><span class="op" id="5238415">,</span>&nbsp;<span class="ident" id="5238417">v</span><br>
<span class="lineno"></span><span class="op" id="5238419">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="5238422">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5238499">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5238559">func</span>&nbsp;<span class="op" id="5238564">(</span><span class="ident" id="5238565">d</span>&nbsp;<span class="op" id="5238567">*</span><span class="ident" id="5238568">decodeState</span><span class="op" id="5238579">)</span>&nbsp;<span class="ident" id="5238581">array</span><span class="op" id="5238586">(</span><span class="ident" id="5238587">v</span>&nbsp;<span class="ident" id="5238589">reflect</span><span class="op" id="5238596">.</span><span class="ident" id="5238597">Value</span><span class="op" id="5238602">)</span>&nbsp;<span class="op" id="5238604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238607">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238634">u</span><span class="op" id="5238635">,</span>&nbsp;<span class="ident" id="5238637">ut</span><span class="op" id="5238639">,</span>&nbsp;<span class="ident" id="5238641">pv</span>&nbsp;<span class="op" id="5238644">:=</span>&nbsp;<span class="ident" id="5238647">d</span><span class="op" id="5238648">.</span><span class="ident" id="5238649">indirect</span><span class="op" id="5238657">(</span><span class="ident" id="5238658">v</span><span class="op" id="5238659">,</span>&nbsp;<span class="builtintype" id="5238661">false</span><span class="op" id="5238666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238669">if</span>&nbsp;<span class="ident" id="5238672">u</span>&nbsp;<span class="op" id="5238674">!=</span>&nbsp;<span class="ident" id="5238677">nil</span>&nbsp;<span class="op" id="5238681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238685">d</span><span class="op" id="5238686">.</span><span class="ident" id="5238687">off</span><span class="op" id="5238690">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238695">err</span>&nbsp;<span class="op" id="5238699">:=</span>&nbsp;<span class="ident" id="5238702">u</span><span class="op" id="5238703">.</span><span class="ident" id="5238704">UnmarshalJSON</span><span class="op" id="5238717">(</span><span class="ident" id="5238718">d</span><span class="op" id="5238719">.</span><span class="ident" id="5238720">next</span><span class="op" id="5238724">(</span><span class="op" id="5238725">)</span><span class="op" id="5238726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238730">if</span>&nbsp;<span class="ident" id="5238733">err</span>&nbsp;<span class="op" id="5238737">!=</span>&nbsp;<span class="ident" id="5238740">nil</span>&nbsp;<span class="op" id="5238744">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238749">d</span><span class="op" id="5238750">.</span><span class="builtintype" id="5238751">error</span><span class="op" id="5238756">(</span><span class="ident" id="5238757">err</span><span class="op" id="5238760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238768">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238779">if</span>&nbsp;<span class="ident" id="5238782">ut</span>&nbsp;<span class="op" id="5238785">!=</span>&nbsp;<span class="ident" id="5238788">nil</span>&nbsp;<span class="op" id="5238792">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238796">d</span><span class="op" id="5238797">.</span><span class="ident" id="5238798">saveError</span><span class="op" id="5238807">(</span><span class="op" id="5238808">&amp;</span><span class="ident" id="5238809">UnmarshalTypeError</span><span class="op" id="5238827">{</span><span class="string" id="5238828">&#34;array&#34;</span><span class="op" id="5238835">,</span>&nbsp;<span class="ident" id="5238837">v</span><span class="op" id="5238838">.</span><span class="ident" id="5238839">Type</span><span class="op" id="5238843">(</span><span class="op" id="5238844">)</span><span class="op" id="5238845">}</span><span class="op" id="5238846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238850">d</span><span class="op" id="5238851">.</span><span class="ident" id="5238852">off</span><span class="op" id="5238855">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238860">d</span><span class="op" id="5238861">.</span><span class="ident" id="5238862">next</span><span class="op" id="5238866">(</span><span class="op" id="5238867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238871">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238879">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238883">v</span>&nbsp;<span class="op" id="5238885">=</span>&nbsp;<span class="ident" id="5238887">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238892">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238918">switch</span>&nbsp;<span class="ident" id="5238925">v</span><span class="op" id="5238926">.</span><span class="ident" id="5238927">Kind</span><span class="op" id="5238931">(</span><span class="op" id="5238932">)</span>&nbsp;<span class="op" id="5238934">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238937">case</span>&nbsp;<span class="ident" id="5238942">reflect</span><span class="op" id="5238949">.</span><span class="ident" id="5238950">Interface</span><span class="op" id="5238959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238963">if</span>&nbsp;<span class="ident" id="5238966">v</span><span class="op" id="5238967">.</span><span class="ident" id="5238968">NumMethod</span><span class="op" id="5238977">(</span><span class="op" id="5238978">)</span>&nbsp;<span class="op" id="5238980">==</span>&nbsp;<span class="num" id="5238983">0</span>&nbsp;<span class="op" id="5238985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238990">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239054">v</span><span class="op" id="5239055">.</span><span class="ident" id="5239056">Set</span><span class="op" id="5239059">(</span><span class="ident" id="5239060">reflect</span><span class="op" id="5239067">.</span><span class="ident" id="5239068">ValueOf</span><span class="op" id="5239075">(</span><span class="ident" id="5239076">d</span><span class="op" id="5239077">.</span><span class="ident" id="5239078">arrayInterface</span><span class="op" id="5239092">(</span><span class="op" id="5239093">)</span><span class="op" id="5239094">)</span><span class="op" id="5239095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239100">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239113">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239142">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239155">default</span><span class="op" id="5239162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239166">d</span><span class="op" id="5239167">.</span><span class="ident" id="5239168">saveError</span><span class="op" id="5239177">(</span><span class="op" id="5239178">&amp;</span><span class="ident" id="5239179">UnmarshalTypeError</span><span class="op" id="5239197">{</span><span class="string" id="5239198">&#34;array&#34;</span><span class="op" id="5239205">,</span>&nbsp;<span class="ident" id="5239207">v</span><span class="op" id="5239208">.</span><span class="ident" id="5239209">Type</span><span class="op" id="5239213">(</span><span class="op" id="5239214">)</span><span class="op" id="5239215">}</span><span class="op" id="5239216">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239220">d</span><span class="op" id="5239221">.</span><span class="ident" id="5239222">off</span><span class="op" id="5239225">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239230">d</span><span class="op" id="5239231">.</span><span class="ident" id="5239232">next</span><span class="op" id="5239236">(</span><span class="op" id="5239237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239241">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239249">case</span>&nbsp;<span class="ident" id="5239254">reflect</span><span class="op" id="5239261">.</span><span class="ident" id="5239262">Array</span><span class="op" id="5239267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239270">case</span>&nbsp;<span class="ident" id="5239275">reflect</span><span class="op" id="5239282">.</span><span class="ident" id="5239283">Slice</span><span class="op" id="5239288">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239292">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239303">i</span>&nbsp;<span class="op" id="5239305">:=</span>&nbsp;<span class="num" id="5239308">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239311">for</span>&nbsp;<span class="op" id="5239315">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239319">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239379">op</span>&nbsp;<span class="op" id="5239382">:=</span>&nbsp;<span class="ident" id="5239385">d</span><span class="op" id="5239386">.</span><span class="ident" id="5239387">scanWhile</span><span class="op" id="5239396">(</span><span class="ident" id="5239397">scanSkipSpace</span><span class="op" id="5239410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239414">if</span>&nbsp;<span class="ident" id="5239417">op</span>&nbsp;<span class="op" id="5239420">==</span>&nbsp;<span class="ident" id="5239423">scanEndArray</span>&nbsp;<span class="op" id="5239436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239441">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239449">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239454">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239510">d</span><span class="op" id="5239511">.</span><span class="ident" id="5239512">off</span><span class="op" id="5239515">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239520">d</span><span class="op" id="5239521">.</span><span class="ident" id="5239522">scan</span><span class="op" id="5239526">.</span><span class="ident" id="5239527">undo</span><span class="op" id="5239531">(</span><span class="ident" id="5239532">op</span><span class="op" id="5239534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239539">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239588">if</span>&nbsp;<span class="ident" id="5239591">v</span><span class="op" id="5239592">.</span><span class="ident" id="5239593">Kind</span><span class="op" id="5239597">(</span><span class="op" id="5239598">)</span>&nbsp;<span class="op" id="5239600">==</span>&nbsp;<span class="ident" id="5239603">reflect</span><span class="op" id="5239610">.</span><span class="ident" id="5239611">Slice</span>&nbsp;<span class="op" id="5239617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239622">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239652">if</span>&nbsp;<span class="ident" id="5239655">i</span>&nbsp;<span class="op" id="5239657">&gt;=</span>&nbsp;<span class="ident" id="5239660">v</span><span class="op" id="5239661">.</span><span class="ident" id="5239662">Cap</span><span class="op" id="5239665">(</span><span class="op" id="5239666">)</span>&nbsp;<span class="op" id="5239668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239674">newcap</span>&nbsp;<span class="op" id="5239681">:=</span>&nbsp;<span class="ident" id="5239684">v</span><span class="op" id="5239685">.</span><span class="ident" id="5239686">Cap</span><span class="op" id="5239689">(</span><span class="op" id="5239690">)</span>&nbsp;<span class="op" id="5239692">+</span>&nbsp;<span class="ident" id="5239694">v</span><span class="op" id="5239695">.</span><span class="ident" id="5239696">Cap</span><span class="op" id="5239699">(</span><span class="op" id="5239700">)</span><span class="op" id="5239701">/</span><span class="num" id="5239702">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239708">if</span>&nbsp;<span class="ident" id="5239711">newcap</span>&nbsp;<span class="op" id="5239718">&lt;</span>&nbsp;<span class="num" id="5239720">4</span>&nbsp;<span class="op" id="5239722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239729">newcap</span>&nbsp;<span class="op" id="5239736">=</span>&nbsp;<span class="num" id="5239738">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239750">newv</span>&nbsp;<span class="op" id="5239755">:=</span>&nbsp;<span class="ident" id="5239758">reflect</span><span class="op" id="5239765">.</span><span class="ident" id="5239766">MakeSlice</span><span class="op" id="5239775">(</span><span class="ident" id="5239776">v</span><span class="op" id="5239777">.</span><span class="ident" id="5239778">Type</span><span class="op" id="5239782">(</span><span class="op" id="5239783">)</span><span class="op" id="5239784">,</span>&nbsp;<span class="ident" id="5239786">v</span><span class="op" id="5239787">.</span><span class="ident" id="5239788">Len</span><span class="op" id="5239791">(</span><span class="op" id="5239792">)</span><span class="op" id="5239793">,</span>&nbsp;<span class="ident" id="5239795">newcap</span><span class="op" id="5239801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239807">reflect</span><span class="op" id="5239814">.</span><span class="ident" id="5239815">Copy</span><span class="op" id="5239819">(</span><span class="ident" id="5239820">newv</span><span class="op" id="5239824">,</span>&nbsp;<span class="ident" id="5239826">v</span><span class="op" id="5239827">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239833">v</span><span class="op" id="5239834">.</span><span class="ident" id="5239835">Set</span><span class="op" id="5239838">(</span><span class="ident" id="5239839">newv</span><span class="op" id="5239843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239853">if</span>&nbsp;<span class="ident" id="5239856">i</span>&nbsp;<span class="op" id="5239858">&gt;=</span>&nbsp;<span class="ident" id="5239861">v</span><span class="op" id="5239862">.</span><span class="ident" id="5239863">Len</span><span class="op" id="5239866">(</span><span class="op" id="5239867">)</span>&nbsp;<span class="op" id="5239869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239875">v</span><span class="op" id="5239876">.</span><span class="ident" id="5239877">SetLen</span><span class="op" id="5239883">(</span><span class="ident" id="5239884">i</span>&nbsp;<span class="op" id="5239886">+</span>&nbsp;<span class="num" id="5239888">1</span><span class="op" id="5239889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239894">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239903">if</span>&nbsp;<span class="ident" id="5239906">i</span>&nbsp;<span class="op" id="5239908">&lt;</span>&nbsp;<span class="ident" id="5239910">v</span><span class="op" id="5239911">.</span><span class="ident" id="5239912">Len</span><span class="op" id="5239915">(</span><span class="op" id="5239916">)</span>&nbsp;<span class="op" id="5239918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239923">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239950">d</span><span class="op" id="5239951">.</span><span class="ident" id="5239952">value</span><span class="op" id="5239957">(</span><span class="ident" id="5239958">v</span><span class="op" id="5239959">.</span><span class="ident" id="5239960">Index</span><span class="op" id="5239965">(</span><span class="ident" id="5239966">i</span><span class="op" id="5239967">)</span><span class="op" id="5239968">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239972">}</span>&nbsp;<span class="keyword" id="5239974">else</span>&nbsp;<span class="op" id="5239979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239984">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240020">d</span><span class="op" id="5240021">.</span><span class="ident" id="5240022">value</span><span class="op" id="5240027">(</span><span class="ident" id="5240028">reflect</span><span class="op" id="5240035">.</span><span class="ident" id="5240036">Value</span><span class="op" id="5240041">{</span><span class="op" id="5240042">}</span><span class="op" id="5240043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240051">i</span><span class="op" id="5240052">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240058">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240090">op</span>&nbsp;<span class="op" id="5240093">=</span>&nbsp;<span class="ident" id="5240095">d</span><span class="op" id="5240096">.</span><span class="ident" id="5240097">scanWhile</span><span class="op" id="5240106">(</span><span class="ident" id="5240107">scanSkipSpace</span><span class="op" id="5240120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240124">if</span>&nbsp;<span class="ident" id="5240127">op</span>&nbsp;<span class="op" id="5240130">==</span>&nbsp;<span class="ident" id="5240133">scanEndArray</span>&nbsp;<span class="op" id="5240146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240151">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240163">if</span>&nbsp;<span class="ident" id="5240166">op</span>&nbsp;<span class="op" id="5240169">!=</span>&nbsp;<span class="ident" id="5240172">scanArrayValue</span>&nbsp;<span class="op" id="5240187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240192">d</span><span class="op" id="5240193">.</span><span class="builtintype" id="5240194">error</span><span class="op" id="5240199">(</span><span class="ident" id="5240200">errPhase</span><span class="op" id="5240208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240215">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240219">if</span>&nbsp;<span class="ident" id="5240222">i</span>&nbsp;<span class="op" id="5240224">&lt;</span>&nbsp;<span class="ident" id="5240226">v</span><span class="op" id="5240227">.</span><span class="ident" id="5240228">Len</span><span class="op" id="5240231">(</span><span class="op" id="5240232">)</span>&nbsp;<span class="op" id="5240234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240238">if</span>&nbsp;<span class="ident" id="5240241">v</span><span class="op" id="5240242">.</span><span class="ident" id="5240243">Kind</span><span class="op" id="5240247">(</span><span class="op" id="5240248">)</span>&nbsp;<span class="op" id="5240250">==</span>&nbsp;<span class="ident" id="5240253">reflect</span><span class="op" id="5240260">.</span><span class="ident" id="5240261">Array</span>&nbsp;<span class="op" id="5240267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240272">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240301">z</span>&nbsp;<span class="op" id="5240303">:=</span>&nbsp;<span class="ident" id="5240306">reflect</span><span class="op" id="5240313">.</span><span class="ident" id="5240314">Zero</span><span class="op" id="5240318">(</span><span class="ident" id="5240319">v</span><span class="op" id="5240320">.</span><span class="ident" id="5240321">Type</span><span class="op" id="5240325">(</span><span class="op" id="5240326">)</span><span class="op" id="5240327">.</span><span class="ident" id="5240328">Elem</span><span class="op" id="5240332">(</span><span class="op" id="5240333">)</span><span class="op" id="5240334">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240339">for</span>&nbsp;<span class="op" id="5240343">;</span>&nbsp;<span class="ident" id="5240345">i</span>&nbsp;<span class="op" id="5240347">&lt;</span>&nbsp;<span class="ident" id="5240349">v</span><span class="op" id="5240350">.</span><span class="ident" id="5240351">Len</span><span class="op" id="5240354">(</span><span class="op" id="5240355">)</span><span class="op" id="5240356">;</span>&nbsp;<span class="ident" id="5240358">i</span><span class="op" id="5240359">++</span>&nbsp;<span class="op" id="5240362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240368">v</span><span class="op" id="5240369">.</span><span class="ident" id="5240370">Index</span><span class="op" id="5240375">(</span><span class="ident" id="5240376">i</span><span class="op" id="5240377">)</span><span class="op" id="5240378">.</span><span class="ident" id="5240379">Set</span><span class="op" id="5240382">(</span><span class="ident" id="5240383">z</span><span class="op" id="5240384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240393">}</span>&nbsp;<span class="keyword" id="5240395">else</span>&nbsp;<span class="op" id="5240400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240405">v</span><span class="op" id="5240406">.</span><span class="ident" id="5240407">SetLen</span><span class="op" id="5240413">(</span><span class="ident" id="5240414">i</span><span class="op" id="5240415">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240425">if</span>&nbsp;<span class="ident" id="5240428">i</span>&nbsp;<span class="op" id="5240430">==</span>&nbsp;<span class="num" id="5240433">0</span>&nbsp;<span class="op" id="5240435">&amp;&amp;</span>&nbsp;<span class="ident" id="5240438">v</span><span class="op" id="5240439">.</span><span class="ident" id="5240440">Kind</span><span class="op" id="5240444">(</span><span class="op" id="5240445">)</span>&nbsp;<span class="op" id="5240447">==</span>&nbsp;<span class="ident" id="5240450">reflect</span><span class="op" id="5240457">.</span><span class="ident" id="5240458">Slice</span>&nbsp;<span class="op" id="5240464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240468">v</span><span class="op" id="5240469">.</span><span class="ident" id="5240470">Set</span><span class="op" id="5240473">(</span><span class="ident" id="5240474">reflect</span><span class="op" id="5240481">.</span><span class="ident" id="5240482">MakeSlice</span><span class="op" id="5240491">(</span><span class="ident" id="5240492">v</span><span class="op" id="5240493">.</span><span class="ident" id="5240494">Type</span><span class="op" id="5240498">(</span><span class="op" id="5240499">)</span><span class="op" id="5240500">,</span>&nbsp;<span class="num" id="5240502">0</span><span class="op" id="5240503">,</span>&nbsp;<span class="num" id="5240505">0</span><span class="op" id="5240506">)</span><span class="op" id="5240507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240510">}</span><br>
<span class="lineno">470</span><span class="op" id="5240512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5240515">var</span>&nbsp;<span class="ident" id="5240519">nullLiteral</span>&nbsp;<span class="op" id="5240531">=</span>&nbsp;<span class="op" id="5240533">[</span><span class="op" id="5240534">]</span><span class="builtintype" id="5240535">byte</span><span class="op" id="5240539">(</span><span class="string" id="5240540">&#34;null&#34;</span><span class="op" id="5240546">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5240549">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="5240628">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5240689">func</span>&nbsp;<span class="op" id="5240694">(</span><span class="ident" id="5240695">d</span>&nbsp;<span class="op" id="5240697">*</span><span class="ident" id="5240698">decodeState</span><span class="op" id="5240709">)</span>&nbsp;<span class="ident" id="5240711">object</span><span class="op" id="5240717">(</span><span class="ident" id="5240718">v</span>&nbsp;<span class="ident" id="5240720">reflect</span><span class="op" id="5240727">.</span><span class="ident" id="5240728">Value</span><span class="op" id="5240733">)</span>&nbsp;<span class="op" id="5240735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240738">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240765">u</span><span class="op" id="5240766">,</span>&nbsp;<span class="ident" id="5240768">ut</span><span class="op" id="5240770">,</span>&nbsp;<span class="ident" id="5240772">pv</span>&nbsp;<span class="op" id="5240775">:=</span>&nbsp;<span class="ident" id="5240778">d</span><span class="op" id="5240779">.</span><span class="ident" id="5240780">indirect</span><span class="op" id="5240788">(</span><span class="ident" id="5240789">v</span><span class="op" id="5240790">,</span>&nbsp;<span class="builtintype" id="5240792">false</span><span class="op" id="5240797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240800">if</span>&nbsp;<span class="ident" id="5240803">u</span>&nbsp;<span class="op" id="5240805">!=</span>&nbsp;<span class="ident" id="5240808">nil</span>&nbsp;<span class="op" id="5240812">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240816">d</span><span class="op" id="5240817">.</span><span class="ident" id="5240818">off</span><span class="op" id="5240821">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240826">err</span>&nbsp;<span class="op" id="5240830">:=</span>&nbsp;<span class="ident" id="5240833">u</span><span class="op" id="5240834">.</span><span class="ident" id="5240835">UnmarshalJSON</span><span class="op" id="5240848">(</span><span class="ident" id="5240849">d</span><span class="op" id="5240850">.</span><span class="ident" id="5240851">next</span><span class="op" id="5240855">(</span><span class="op" id="5240856">)</span><span class="op" id="5240857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240861">if</span>&nbsp;<span class="ident" id="5240864">err</span>&nbsp;<span class="op" id="5240868">!=</span>&nbsp;<span class="ident" id="5240871">nil</span>&nbsp;<span class="op" id="5240875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240880">d</span><span class="op" id="5240881">.</span><span class="builtintype" id="5240882">error</span><span class="op" id="5240887">(</span><span class="ident" id="5240888">err</span><span class="op" id="5240891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240895">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240899">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240910">if</span>&nbsp;<span class="ident" id="5240913">ut</span>&nbsp;<span class="op" id="5240916">!=</span>&nbsp;<span class="ident" id="5240919">nil</span>&nbsp;<span class="op" id="5240923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240927">d</span><span class="op" id="5240928">.</span><span class="ident" id="5240929">saveError</span><span class="op" id="5240938">(</span><span class="op" id="5240939">&amp;</span><span class="ident" id="5240940">UnmarshalTypeError</span><span class="op" id="5240958">{</span><span class="string" id="5240959">&#34;object&#34;</span><span class="op" id="5240967">,</span>&nbsp;<span class="ident" id="5240969">v</span><span class="op" id="5240970">.</span><span class="ident" id="5240971">Type</span><span class="op" id="5240975">(</span><span class="op" id="5240976">)</span><span class="op" id="5240977">}</span><span class="op" id="5240978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240982">d</span><span class="op" id="5240983">.</span><span class="ident" id="5240984">off</span><span class="op" id="5240987">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240992">d</span><span class="op" id="5240993">.</span><span class="ident" id="5240994">next</span><span class="op" id="5240998">(</span><span class="op" id="5240999">)</span>&nbsp;<span class="comment" id="5241001">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241029">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241040">v</span>&nbsp;<span class="op" id="5241042">=</span>&nbsp;<span class="ident" id="5241044">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241049">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241111">if</span>&nbsp;<span class="ident" id="5241114">v</span><span class="op" id="5241115">.</span><span class="ident" id="5241116">Kind</span><span class="op" id="5241120">(</span><span class="op" id="5241121">)</span>&nbsp;<span class="op" id="5241123">==</span>&nbsp;<span class="ident" id="5241126">reflect</span><span class="op" id="5241133">.</span><span class="ident" id="5241134">Interface</span>&nbsp;<span class="op" id="5241144">&amp;&amp;</span>&nbsp;<span class="ident" id="5241147">v</span><span class="op" id="5241148">.</span><span class="ident" id="5241149">NumMethod</span><span class="op" id="5241158">(</span><span class="op" id="5241159">)</span>&nbsp;<span class="op" id="5241161">==</span>&nbsp;<span class="num" id="5241164">0</span>&nbsp;<span class="op" id="5241166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241170">v</span><span class="op" id="5241171">.</span><span class="ident" id="5241172">Set</span><span class="op" id="5241175">(</span><span class="ident" id="5241176">reflect</span><span class="op" id="5241183">.</span><span class="ident" id="5241184">ValueOf</span><span class="op" id="5241191">(</span><span class="ident" id="5241192">d</span><span class="op" id="5241193">.</span><span class="ident" id="5241194">objectInterface</span><span class="op" id="5241209">(</span><span class="op" id="5241210">)</span><span class="op" id="5241211">)</span><span class="op" id="5241212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241216">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241224">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241228">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241277">switch</span>&nbsp;<span class="ident" id="5241284">v</span><span class="op" id="5241285">.</span><span class="ident" id="5241286">Kind</span><span class="op" id="5241290">(</span><span class="op" id="5241291">)</span>&nbsp;<span class="op" id="5241293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241296">case</span>&nbsp;<span class="ident" id="5241301">reflect</span><span class="op" id="5241308">.</span><span class="ident" id="5241309">Map</span><span class="op" id="5241312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241316">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241347">t</span>&nbsp;<span class="op" id="5241349">:=</span>&nbsp;<span class="ident" id="5241352">v</span><span class="op" id="5241353">.</span><span class="ident" id="5241354">Type</span><span class="op" id="5241358">(</span><span class="op" id="5241359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241363">if</span>&nbsp;<span class="ident" id="5241366">t</span><span class="op" id="5241367">.</span><span class="ident" id="5241368">Key</span><span class="op" id="5241371">(</span><span class="op" id="5241372">)</span><span class="op" id="5241373">.</span><span class="ident" id="5241374">Kind</span><span class="op" id="5241378">(</span><span class="op" id="5241379">)</span>&nbsp;<span class="op" id="5241381">!=</span>&nbsp;<span class="ident" id="5241384">reflect</span><span class="op" id="5241391">.</span><span class="ident" id="5241392">String</span>&nbsp;<span class="op" id="5241399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241404">d</span><span class="op" id="5241405">.</span><span class="ident" id="5241406">saveError</span><span class="op" id="5241415">(</span><span class="op" id="5241416">&amp;</span><span class="ident" id="5241417">UnmarshalTypeError</span><span class="op" id="5241435">{</span><span class="string" id="5241436">&#34;object&#34;</span><span class="op" id="5241444">,</span>&nbsp;<span class="ident" id="5241446">v</span><span class="op" id="5241447">.</span><span class="ident" id="5241448">Type</span><span class="op" id="5241452">(</span><span class="op" id="5241453">)</span><span class="op" id="5241454">}</span><span class="op" id="5241455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241460">d</span><span class="op" id="5241461">.</span><span class="ident" id="5241462">off</span><span class="op" id="5241465">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241471">d</span><span class="op" id="5241472">.</span><span class="ident" id="5241473">next</span><span class="op" id="5241477">(</span><span class="op" id="5241478">)</span>&nbsp;<span class="comment" id="5241480">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241509">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241522">if</span>&nbsp;<span class="ident" id="5241525">v</span><span class="op" id="5241526">.</span><span class="ident" id="5241527">IsNil</span><span class="op" id="5241532">(</span><span class="op" id="5241533">)</span>&nbsp;<span class="op" id="5241535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241540">v</span><span class="op" id="5241541">.</span><span class="ident" id="5241542">Set</span><span class="op" id="5241545">(</span><span class="ident" id="5241546">reflect</span><span class="op" id="5241553">.</span><span class="ident" id="5241554">MakeMap</span><span class="op" id="5241561">(</span><span class="ident" id="5241562">t</span><span class="op" id="5241563">)</span><span class="op" id="5241564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241568">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241571">case</span>&nbsp;<span class="ident" id="5241576">reflect</span><span class="op" id="5241583">.</span><span class="ident" id="5241584">Struct</span><span class="op" id="5241590">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241594">default</span><span class="op" id="5241601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241605">d</span><span class="op" id="5241606">.</span><span class="ident" id="5241607">saveError</span><span class="op" id="5241616">(</span><span class="op" id="5241617">&amp;</span><span class="ident" id="5241618">UnmarshalTypeError</span><span class="op" id="5241636">{</span><span class="string" id="5241637">&#34;object&#34;</span><span class="op" id="5241645">,</span>&nbsp;<span class="ident" id="5241647">v</span><span class="op" id="5241648">.</span><span class="ident" id="5241649">Type</span><span class="op" id="5241653">(</span><span class="op" id="5241654">)</span><span class="op" id="5241655">}</span><span class="op" id="5241656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241660">d</span><span class="op" id="5241661">.</span><span class="ident" id="5241662">off</span><span class="op" id="5241665">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241670">d</span><span class="op" id="5241671">.</span><span class="ident" id="5241672">next</span><span class="op" id="5241676">(</span><span class="op" id="5241677">)</span>&nbsp;<span class="comment" id="5241679">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241707">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241719">var</span>&nbsp;<span class="ident" id="5241723">mapElem</span>&nbsp;<span class="ident" id="5241731">reflect</span><span class="op" id="5241738">.</span><span class="ident" id="5241739">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241747">for</span>&nbsp;<span class="op" id="5241751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241755">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241803">op</span>&nbsp;<span class="op" id="5241806">:=</span>&nbsp;<span class="ident" id="5241809">d</span><span class="op" id="5241810">.</span><span class="ident" id="5241811">scanWhile</span><span class="op" id="5241820">(</span><span class="ident" id="5241821">scanSkipSpace</span><span class="op" id="5241834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241838">if</span>&nbsp;<span class="ident" id="5241841">op</span>&nbsp;<span class="op" id="5241844">==</span>&nbsp;<span class="ident" id="5241847">scanEndObject</span>&nbsp;<span class="op" id="5241861">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241866">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241920">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241932">if</span>&nbsp;<span class="ident" id="5241935">op</span>&nbsp;<span class="op" id="5241938">!=</span>&nbsp;<span class="ident" id="5241941">scanBeginLiteral</span>&nbsp;<span class="op" id="5241958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241963">d</span><span class="op" id="5241964">.</span><span class="builtintype" id="5241965">error</span><span class="op" id="5241970">(</span><span class="ident" id="5241971">errPhase</span><span class="op" id="5241979">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241988">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242003">start</span>&nbsp;<span class="op" id="5242009">:=</span>&nbsp;<span class="ident" id="5242012">d</span><span class="op" id="5242013">.</span><span class="ident" id="5242014">off</span>&nbsp;<span class="op" id="5242018">-</span>&nbsp;<span class="num" id="5242020">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242024">op</span>&nbsp;<span class="op" id="5242027">=</span>&nbsp;<span class="ident" id="5242029">d</span><span class="op" id="5242030">.</span><span class="ident" id="5242031">scanWhile</span><span class="op" id="5242040">(</span><span class="ident" id="5242041">scanContinue</span><span class="op" id="5242053">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242057">item</span>&nbsp;<span class="op" id="5242062">:=</span>&nbsp;<span class="ident" id="5242065">d</span><span class="op" id="5242066">.</span><span class="ident" id="5242067">data</span><span class="op" id="5242071">[</span><span class="ident" id="5242072">start</span>&nbsp;<span class="op" id="5242078">:</span>&nbsp;<span class="ident" id="5242080">d</span><span class="op" id="5242081">.</span><span class="ident" id="5242082">off</span><span class="op" id="5242085">-</span><span class="num" id="5242086">1</span><span class="op" id="5242087">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242091">key</span><span class="op" id="5242094">,</span>&nbsp;<span class="ident" id="5242096">ok</span>&nbsp;<span class="op" id="5242099">:=</span>&nbsp;<span class="ident" id="5242102">unquoteBytes</span><span class="op" id="5242114">(</span><span class="ident" id="5242115">item</span><span class="op" id="5242119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242123">if</span>&nbsp;<span class="op" id="5242126">!</span><span class="ident" id="5242127">ok</span>&nbsp;<span class="op" id="5242130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242135">d</span><span class="op" id="5242136">.</span><span class="builtintype" id="5242137">error</span><span class="op" id="5242142">(</span><span class="ident" id="5242143">errPhase</span><span class="op" id="5242151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242155">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5242160">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242204">var</span>&nbsp;<span class="ident" id="5242208">subv</span>&nbsp;<span class="ident" id="5242213">reflect</span><span class="op" id="5242220">.</span><span class="ident" id="5242221">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242229">destring</span>&nbsp;<span class="op" id="5242238">:=</span>&nbsp;<span class="builtintype" id="5242241">false</span>&nbsp;<span class="comment" id="5242247">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242314">if</span>&nbsp;<span class="ident" id="5242317">v</span><span class="op" id="5242318">.</span><span class="ident" id="5242319">Kind</span><span class="op" id="5242323">(</span><span class="op" id="5242324">)</span>&nbsp;<span class="op" id="5242326">==</span>&nbsp;<span class="ident" id="5242329">reflect</span><span class="op" id="5242336">.</span><span class="ident" id="5242337">Map</span>&nbsp;<span class="op" id="5242341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242346">elemType</span>&nbsp;<span class="op" id="5242355">:=</span>&nbsp;<span class="ident" id="5242358">v</span><span class="op" id="5242359">.</span><span class="ident" id="5242360">Type</span><span class="op" id="5242364">(</span><span class="op" id="5242365">)</span><span class="op" id="5242366">.</span><span class="ident" id="5242367">Elem</span><span class="op" id="5242371">(</span><span class="op" id="5242372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242377">if</span>&nbsp;<span class="op" id="5242380">!</span><span class="ident" id="5242381">mapElem</span><span class="op" id="5242388">.</span><span class="ident" id="5242389">IsValid</span><span class="op" id="5242396">(</span><span class="op" id="5242397">)</span>&nbsp;<span class="op" id="5242399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242405">mapElem</span>&nbsp;<span class="op" id="5242413">=</span>&nbsp;<span class="ident" id="5242415">reflect</span><span class="op" id="5242422">.</span><span class="ident" id="5242423">New</span><span class="op" id="5242426">(</span><span class="ident" id="5242427">elemType</span><span class="op" id="5242435">)</span><span class="op" id="5242436">.</span><span class="ident" id="5242437">Elem</span><span class="op" id="5242441">(</span><span class="op" id="5242442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242447">}</span>&nbsp;<span class="keyword" id="5242449">else</span>&nbsp;<span class="op" id="5242454">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242460">mapElem</span><span class="op" id="5242467">.</span><span class="ident" id="5242468">Set</span><span class="op" id="5242471">(</span><span class="ident" id="5242472">reflect</span><span class="op" id="5242479">.</span><span class="ident" id="5242480">Zero</span><span class="op" id="5242484">(</span><span class="ident" id="5242485">elemType</span><span class="op" id="5242493">)</span><span class="op" id="5242494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242504">subv</span>&nbsp;<span class="op" id="5242509">=</span>&nbsp;<span class="ident" id="5242511">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242521">}</span>&nbsp;<span class="keyword" id="5242523">else</span>&nbsp;<span class="op" id="5242528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242533">var</span>&nbsp;<span class="ident" id="5242537">f</span>&nbsp;<span class="op" id="5242539">*</span><span class="ident" id="5242540">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242549">fields</span>&nbsp;<span class="op" id="5242556">:=</span>&nbsp;<span class="ident" id="5242559">cachedTypeFields</span><span class="op" id="5242575">(</span><span class="ident" id="5242576">v</span><span class="op" id="5242577">.</span><span class="ident" id="5242578">Type</span><span class="op" id="5242582">(</span><span class="op" id="5242583">)</span><span class="op" id="5242584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242589">for</span>&nbsp;<span class="ident" id="5242593">i</span>&nbsp;<span class="op" id="5242595">:=</span>&nbsp;<span class="keyword" id="5242598">range</span>&nbsp;<span class="ident" id="5242604">fields</span>&nbsp;<span class="op" id="5242611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242617">ff</span>&nbsp;<span class="op" id="5242620">:=</span>&nbsp;<span class="op" id="5242623">&amp;</span><span class="ident" id="5242624">fields</span><span class="op" id="5242630">[</span><span class="ident" id="5242631">i</span><span class="op" id="5242632">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242638">if</span>&nbsp;<span class="ident" id="5242641">bytes</span><span class="op" id="5242646">.</span><span class="ident" id="5242647">Equal</span><span class="op" id="5242652">(</span><span class="ident" id="5242653">ff</span><span class="op" id="5242655">.</span><span class="ident" id="5242656">nameBytes</span><span class="op" id="5242665">,</span>&nbsp;<span class="ident" id="5242667">key</span><span class="op" id="5242670">)</span>&nbsp;<span class="op" id="5242672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242679">f</span>&nbsp;<span class="op" id="5242681">=</span>&nbsp;<span class="ident" id="5242683">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242691">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242707">if</span>&nbsp;<span class="ident" id="5242710">f</span>&nbsp;<span class="op" id="5242712">==</span>&nbsp;<span class="ident" id="5242715">nil</span>&nbsp;<span class="op" id="5242719">&amp;&amp;</span>&nbsp;<span class="ident" id="5242722">ff</span><span class="op" id="5242724">.</span><span class="ident" id="5242725">equalFold</span><span class="op" id="5242734">(</span><span class="ident" id="5242735">ff</span><span class="op" id="5242737">.</span><span class="ident" id="5242738">nameBytes</span><span class="op" id="5242747">,</span>&nbsp;<span class="ident" id="5242749">key</span><span class="op" id="5242752">)</span>&nbsp;<span class="op" id="5242754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242761">f</span>&nbsp;<span class="op" id="5242763">=</span>&nbsp;<span class="ident" id="5242765">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242772">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242782">if</span>&nbsp;<span class="ident" id="5242785">f</span>&nbsp;<span class="op" id="5242787">!=</span>&nbsp;<span class="ident" id="5242790">nil</span>&nbsp;<span class="op" id="5242794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242800">subv</span>&nbsp;<span class="op" id="5242805">=</span>&nbsp;<span class="ident" id="5242807">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242813">destring</span>&nbsp;<span class="op" id="5242822">=</span>&nbsp;<span class="ident" id="5242824">f</span><span class="op" id="5242825">.</span><span class="ident" id="5242826">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242837">for</span>&nbsp;<span class="ident" id="5242841">_</span><span class="op" id="5242842">,</span>&nbsp;<span class="ident" id="5242844">i</span>&nbsp;<span class="op" id="5242846">:=</span>&nbsp;<span class="keyword" id="5242849">range</span>&nbsp;<span class="ident" id="5242855">f</span><span class="op" id="5242856">.</span><span class="ident" id="5242857">index</span>&nbsp;<span class="op" id="5242863">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242870">if</span>&nbsp;<span class="ident" id="5242873">subv</span><span class="op" id="5242877">.</span><span class="ident" id="5242878">Kind</span><span class="op" id="5242882">(</span><span class="op" id="5242883">)</span>&nbsp;<span class="op" id="5242885">==</span>&nbsp;<span class="ident" id="5242888">reflect</span><span class="op" id="5242895">.</span><span class="ident" id="5242896">Ptr</span>&nbsp;<span class="op" id="5242900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242908">if</span>&nbsp;<span class="ident" id="5242911">subv</span><span class="op" id="5242915">.</span><span class="ident" id="5242916">IsNil</span><span class="op" id="5242921">(</span><span class="op" id="5242922">)</span>&nbsp;<span class="op" id="5242924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242933">subv</span><span class="op" id="5242937">.</span><span class="ident" id="5242938">Set</span><span class="op" id="5242941">(</span><span class="ident" id="5242942">reflect</span><span class="op" id="5242949">.</span><span class="ident" id="5242950">New</span><span class="op" id="5242953">(</span><span class="ident" id="5242954">subv</span><span class="op" id="5242958">.</span><span class="ident" id="5242959">Type</span><span class="op" id="5242963">(</span><span class="op" id="5242964">)</span><span class="op" id="5242965">.</span><span class="ident" id="5242966">Elem</span><span class="op" id="5242970">(</span><span class="op" id="5242971">)</span><span class="op" id="5242972">)</span><span class="op" id="5242973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242989">subv</span>&nbsp;<span class="op" id="5242994">=</span>&nbsp;<span class="ident" id="5242996">subv</span><span class="op" id="5243000">.</span><span class="ident" id="5243001">Elem</span><span class="op" id="5243005">(</span><span class="op" id="5243006">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243020">subv</span>&nbsp;<span class="op" id="5243025">=</span>&nbsp;<span class="ident" id="5243027">subv</span><span class="op" id="5243031">.</span><span class="ident" id="5243032">Field</span><span class="op" id="5243037">(</span><span class="ident" id="5243038">i</span><span class="op" id="5243039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243054">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5243059">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243085">if</span>&nbsp;<span class="ident" id="5243088">op</span>&nbsp;<span class="op" id="5243091">==</span>&nbsp;<span class="ident" id="5243094">scanSkipSpace</span>&nbsp;<span class="op" id="5243108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243113">op</span>&nbsp;<span class="op" id="5243116">=</span>&nbsp;<span class="ident" id="5243118">d</span><span class="op" id="5243119">.</span><span class="ident" id="5243120">scanWhile</span><span class="op" id="5243129">(</span><span class="ident" id="5243130">scanSkipSpace</span><span class="op" id="5243143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243147">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243151">if</span>&nbsp;<span class="ident" id="5243154">op</span>&nbsp;<span class="op" id="5243157">!=</span>&nbsp;<span class="ident" id="5243160">scanObjectKey</span>&nbsp;<span class="op" id="5243174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243179">d</span><span class="op" id="5243180">.</span><span class="builtintype" id="5243181">error</span><span class="op" id="5243186">(</span><span class="ident" id="5243187">errPhase</span><span class="op" id="5243195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5243204">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243221">if</span>&nbsp;<span class="ident" id="5243224">destring</span>&nbsp;<span class="op" id="5243233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243238">switch</span>&nbsp;<span class="ident" id="5243245">qv</span>&nbsp;<span class="op" id="5243248">:=</span>&nbsp;<span class="ident" id="5243251">d</span><span class="op" id="5243252">.</span><span class="ident" id="5243253">valueQuoted</span><span class="op" id="5243264">(</span><span class="op" id="5243265">)</span><span class="op" id="5243266">.</span><span class="op" id="5243267">(</span><span class="keyword" id="5243268">type</span><span class="op" id="5243272">)</span>&nbsp;<span class="op" id="5243274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243279">case</span>&nbsp;<span class="ident" id="5243284">nil</span><span class="op" id="5243287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243293">d</span><span class="op" id="5243294">.</span><span class="ident" id="5243295">literalStore</span><span class="op" id="5243307">(</span><span class="ident" id="5243308">nullLiteral</span><span class="op" id="5243319">,</span>&nbsp;<span class="ident" id="5243321">subv</span><span class="op" id="5243325">,</span>&nbsp;<span class="builtintype" id="5243327">false</span><span class="op" id="5243332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243337">case</span>&nbsp;<span class="builtintype" id="5243342">string</span><span class="op" id="5243348">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243354">d</span><span class="op" id="5243355">.</span><span class="ident" id="5243356">literalStore</span><span class="op" id="5243368">(</span><span class="op" id="5243369">[</span><span class="op" id="5243370">]</span><span class="builtintype" id="5243371">byte</span><span class="op" id="5243375">(</span><span class="ident" id="5243376">qv</span><span class="op" id="5243378">)</span><span class="op" id="5243379">,</span>&nbsp;<span class="ident" id="5243381">subv</span><span class="op" id="5243385">,</span>&nbsp;<span class="builtintype" id="5243387">true</span><span class="op" id="5243391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243396">default</span><span class="op" id="5243403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243409">d</span><span class="op" id="5243410">.</span><span class="ident" id="5243411">saveError</span><span class="op" id="5243420">(</span><span class="ident" id="5243421">fmt</span><span class="op" id="5243424">.</span><span class="ident" id="5243425">Errorf</span><span class="op" id="5243431">(</span><span class="string" id="5243432">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5243517">,</span>&nbsp;<span class="ident" id="5243519">item</span><span class="op" id="5243523">,</span>&nbsp;<span class="ident" id="5243525">v</span><span class="op" id="5243526">.</span><span class="ident" id="5243527">Type</span><span class="op" id="5243531">(</span><span class="op" id="5243532">)</span><span class="op" id="5243533">)</span><span class="op" id="5243534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243543">}</span>&nbsp;<span class="keyword" id="5243545">else</span>&nbsp;<span class="op" id="5243550">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243555">d</span><span class="op" id="5243556">.</span><span class="ident" id="5243557">value</span><span class="op" id="5243562">(</span><span class="ident" id="5243563">subv</span><span class="op" id="5243567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5243576">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5243606">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243661">if</span>&nbsp;<span class="ident" id="5243664">v</span><span class="op" id="5243665">.</span><span class="ident" id="5243666">Kind</span><span class="op" id="5243670">(</span><span class="op" id="5243671">)</span>&nbsp;<span class="op" id="5243673">==</span>&nbsp;<span class="ident" id="5243676">reflect</span><span class="op" id="5243683">.</span><span class="ident" id="5243684">Map</span>&nbsp;<span class="op" id="5243688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243693">kv</span>&nbsp;<span class="op" id="5243696">:=</span>&nbsp;<span class="ident" id="5243699">reflect</span><span class="op" id="5243706">.</span><span class="ident" id="5243707">ValueOf</span><span class="op" id="5243714">(</span><span class="ident" id="5243715">key</span><span class="op" id="5243718">)</span><span class="op" id="5243719">.</span><span class="ident" id="5243720">Convert</span><span class="op" id="5243727">(</span><span class="ident" id="5243728">v</span><span class="op" id="5243729">.</span><span class="ident" id="5243730">Type</span><span class="op" id="5243734">(</span><span class="op" id="5243735">)</span><span class="op" id="5243736">.</span><span class="ident" id="5243737">Key</span><span class="op" id="5243740">(</span><span class="op" id="5243741">)</span><span class="op" id="5243742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243747">v</span><span class="op" id="5243748">.</span><span class="ident" id="5243749">SetMapIndex</span><span class="op" id="5243760">(</span><span class="ident" id="5243761">kv</span><span class="op" id="5243763">,</span>&nbsp;<span class="ident" id="5243765">subv</span><span class="op" id="5243769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5243778">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243810">op</span>&nbsp;<span class="op" id="5243813">=</span>&nbsp;<span class="ident" id="5243815">d</span><span class="op" id="5243816">.</span><span class="ident" id="5243817">scanWhile</span><span class="op" id="5243826">(</span><span class="ident" id="5243827">scanSkipSpace</span><span class="op" id="5243840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243844">if</span>&nbsp;<span class="ident" id="5243847">op</span>&nbsp;<span class="op" id="5243850">==</span>&nbsp;<span class="ident" id="5243853">scanEndObject</span>&nbsp;<span class="op" id="5243867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243872">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243880">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243884">if</span>&nbsp;<span class="ident" id="5243887">op</span>&nbsp;<span class="op" id="5243890">!=</span>&nbsp;<span class="ident" id="5243893">scanObjectValue</span>&nbsp;<span class="op" id="5243909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243914">d</span><span class="op" id="5243915">.</span><span class="builtintype" id="5243916">error</span><span class="op" id="5243921">(</span><span class="ident" id="5243922">errPhase</span><span class="op" id="5243930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243937">}</span><br>
<span class="lineno"></span><span class="op" id="5243939">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="5243942">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5244022">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="5244077">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="5244126">func</span>&nbsp;<span class="op" id="5244131">(</span><span class="ident" id="5244132">d</span>&nbsp;<span class="op" id="5244134">*</span><span class="ident" id="5244135">decodeState</span><span class="op" id="5244146">)</span>&nbsp;<span class="ident" id="5244148">literal</span><span class="op" id="5244155">(</span><span class="ident" id="5244156">v</span>&nbsp;<span class="ident" id="5244158">reflect</span><span class="op" id="5244165">.</span><span class="ident" id="5244166">Value</span><span class="op" id="5244171">)</span>&nbsp;<span class="op" id="5244173">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5244176">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244234">start</span>&nbsp;<span class="op" id="5244240">:=</span>&nbsp;<span class="ident" id="5244243">d</span><span class="op" id="5244244">.</span><span class="ident" id="5244245">off</span>&nbsp;<span class="op" id="5244249">-</span>&nbsp;<span class="num" id="5244251">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244254">op</span>&nbsp;<span class="op" id="5244257">:=</span>&nbsp;<span class="ident" id="5244260">d</span><span class="op" id="5244261">.</span><span class="ident" id="5244262">scanWhile</span><span class="op" id="5244271">(</span><span class="ident" id="5244272">scanContinue</span><span class="op" id="5244284">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5244288">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244329">d</span><span class="op" id="5244330">.</span><span class="ident" id="5244331">off</span><span class="op" id="5244334">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244338">d</span><span class="op" id="5244339">.</span><span class="ident" id="5244340">scan</span><span class="op" id="5244344">.</span><span class="ident" id="5244345">undo</span><span class="op" id="5244349">(</span><span class="ident" id="5244350">op</span><span class="op" id="5244352">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244356">d</span><span class="op" id="5244357">.</span><span class="ident" id="5244358">literalStore</span><span class="op" id="5244370">(</span><span class="ident" id="5244371">d</span><span class="op" id="5244372">.</span><span class="ident" id="5244373">data</span><span class="op" id="5244377">[</span><span class="ident" id="5244378">start</span><span class="op" id="5244383">:</span><span class="ident" id="5244384">d</span><span class="op" id="5244385">.</span><span class="ident" id="5244386">off</span><span class="op" id="5244389">]</span><span class="op" id="5244390">,</span>&nbsp;<span class="ident" id="5244392">v</span><span class="op" id="5244393">,</span>&nbsp;<span class="builtintype" id="5244395">false</span><span class="op" id="5244400">)</span><br>
<span class="lineno"></span><span class="op" id="5244402">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="5244405">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="5244477">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="5244521">func</span>&nbsp;<span class="op" id="5244526">(</span><span class="ident" id="5244527">d</span>&nbsp;<span class="op" id="5244529">*</span><span class="ident" id="5244530">decodeState</span><span class="op" id="5244541">)</span>&nbsp;<span class="ident" id="5244543">convertNumber</span><span class="op" id="5244556">(</span><span class="ident" id="5244557">s</span>&nbsp;<span class="builtintype" id="5244559">string</span><span class="op" id="5244565">)</span>&nbsp;<span class="op" id="5244567">(</span><span class="keyword" id="5244568">interface</span><span class="op" id="5244577">{</span><span class="op" id="5244578">}</span><span class="op" id="5244579">,</span>&nbsp;<span class="builtintype" id="5244581">error</span><span class="op" id="5244586">)</span>&nbsp;<span class="op" id="5244588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244591">if</span>&nbsp;<span class="ident" id="5244594">d</span><span class="op" id="5244595">.</span><span class="ident" id="5244596">useNumber</span>&nbsp;<span class="op" id="5244606">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244610">return</span>&nbsp;<span class="ident" id="5244617">Number</span><span class="op" id="5244623">(</span><span class="ident" id="5244624">s</span><span class="op" id="5244625">)</span><span class="op" id="5244626">,</span>&nbsp;<span class="ident" id="5244628">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244636">f</span><span class="op" id="5244637">,</span>&nbsp;<span class="ident" id="5244639">err</span>&nbsp;<span class="op" id="5244643">:=</span>&nbsp;<span class="ident" id="5244646">strconv</span><span class="op" id="5244653">.</span><span class="ident" id="5244654">ParseFloat</span><span class="op" id="5244664">(</span><span class="ident" id="5244665">s</span><span class="op" id="5244666">,</span>&nbsp;<span class="num" id="5244668">64</span><span class="op" id="5244670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244673">if</span>&nbsp;<span class="ident" id="5244676">err</span>&nbsp;<span class="op" id="5244680">!=</span>&nbsp;<span class="ident" id="5244683">nil</span>&nbsp;<span class="op" id="5244687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244691">return</span>&nbsp;<span class="ident" id="5244698">nil</span><span class="op" id="5244701">,</span>&nbsp;<span class="op" id="5244703">&amp;</span><span class="ident" id="5244704">UnmarshalTypeError</span><span class="op" id="5244722">{</span><span class="string" id="5244723">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5244733">+</span>&nbsp;<span class="ident" id="5244735">s</span><span class="op" id="5244736">,</span>&nbsp;<span class="ident" id="5244738">reflect</span><span class="op" id="5244745">.</span><span class="ident" id="5244746">TypeOf</span><span class="op" id="5244752">(</span><span class="num" id="5244753">0.0</span><span class="op" id="5244756">)</span><span class="op" id="5244757">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244763">return</span>&nbsp;<span class="ident" id="5244770">f</span><span class="op" id="5244771">,</span>&nbsp;<span class="ident" id="5244773">nil</span><br>
<span class="lineno"></span><span class="op" id="5244777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5244780">var</span>&nbsp;<span class="ident" id="5244784">numberType</span>&nbsp;<span class="op" id="5244795">=</span>&nbsp;<span class="ident" id="5244797">reflect</span><span class="op" id="5244804">.</span><span class="ident" id="5244805">TypeOf</span><span class="op" id="5244811">(</span><span class="ident" id="5244812">Number</span><span class="op" id="5244818">(</span><span class="string" id="5244819">&#34;&#34;</span><span class="op" id="5244821">)</span><span class="op" id="5244822">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="5244825">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5244882">//</span><br>
<span class="lineno"></span><span class="comment" id="5244885">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5244953">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="5245022">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="5245062">func</span>&nbsp;<span class="op" id="5245067">(</span><span class="ident" id="5245068">d</span>&nbsp;<span class="op" id="5245070">*</span><span class="ident" id="5245071">decodeState</span><span class="op" id="5245082">)</span>&nbsp;<span class="ident" id="5245084">literalStore</span><span class="op" id="5245096">(</span><span class="ident" id="5245097">item</span>&nbsp;<span class="op" id="5245102">[</span><span class="op" id="5245103">]</span><span class="builtintype" id="5245104">byte</span><span class="op" id="5245108">,</span>&nbsp;<span class="ident" id="5245110">v</span>&nbsp;<span class="ident" id="5245112">reflect</span><span class="op" id="5245119">.</span><span class="ident" id="5245120">Value</span><span class="op" id="5245125">,</span>&nbsp;<span class="ident" id="5245127">fromQuoted</span>&nbsp;<span class="builtintype" id="5245138">bool</span><span class="op" id="5245142">)</span>&nbsp;<span class="op" id="5245144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5245147">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245174">if</span>&nbsp;<span class="builtinfunc" id="5245177">len</span><span class="op" id="5245180">(</span><span class="ident" id="5245181">item</span><span class="op" id="5245185">)</span>&nbsp;<span class="op" id="5245187">==</span>&nbsp;<span class="num" id="5245190">0</span>&nbsp;<span class="op" id="5245192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5245196">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245219">d</span><span class="op" id="5245220">.</span><span class="ident" id="5245221">saveError</span><span class="op" id="5245230">(</span><span class="ident" id="5245231">fmt</span><span class="op" id="5245234">.</span><span class="ident" id="5245235">Errorf</span><span class="op" id="5245241">(</span><span class="string" id="5245242">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5245315">,</span>&nbsp;<span class="ident" id="5245317">item</span><span class="op" id="5245321">,</span>&nbsp;<span class="ident" id="5245323">v</span><span class="op" id="5245324">.</span><span class="ident" id="5245325">Type</span><span class="op" id="5245329">(</span><span class="op" id="5245330">)</span><span class="op" id="5245331">)</span><span class="op" id="5245332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245336">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245347">wantptr</span>&nbsp;<span class="op" id="5245355">:=</span>&nbsp;<span class="ident" id="5245358">item</span><span class="op" id="5245362">[</span><span class="num" id="5245363">0</span><span class="op" id="5245364">]</span>&nbsp;<span class="op" id="5245366">==</span>&nbsp;<span class="string" id="5245369">&#39;n&#39;</span>&nbsp;<span class="comment" id="5245373">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245382">u</span><span class="op" id="5245383">,</span>&nbsp;<span class="ident" id="5245385">ut</span><span class="op" id="5245387">,</span>&nbsp;<span class="ident" id="5245389">pv</span>&nbsp;<span class="op" id="5245392">:=</span>&nbsp;<span class="ident" id="5245395">d</span><span class="op" id="5245396">.</span><span class="ident" id="5245397">indirect</span><span class="op" id="5245405">(</span><span class="ident" id="5245406">v</span><span class="op" id="5245407">,</span>&nbsp;<span class="ident" id="5245409">wantptr</span><span class="op" id="5245416">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245419">if</span>&nbsp;<span class="ident" id="5245422">u</span>&nbsp;<span class="op" id="5245424">!=</span>&nbsp;<span class="ident" id="5245427">nil</span>&nbsp;<span class="op" id="5245431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245435">err</span>&nbsp;<span class="op" id="5245439">:=</span>&nbsp;<span class="ident" id="5245442">u</span><span class="op" id="5245443">.</span><span class="ident" id="5245444">UnmarshalJSON</span><span class="op" id="5245457">(</span><span class="ident" id="5245458">item</span><span class="op" id="5245462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245466">if</span>&nbsp;<span class="ident" id="5245469">err</span>&nbsp;<span class="op" id="5245473">!=</span>&nbsp;<span class="ident" id="5245476">nil</span>&nbsp;<span class="op" id="5245480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245485">d</span><span class="op" id="5245486">.</span><span class="builtintype" id="5245487">error</span><span class="op" id="5245492">(</span><span class="ident" id="5245493">err</span><span class="op" id="5245496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245500">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245504">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245515">if</span>&nbsp;<span class="ident" id="5245518">ut</span>&nbsp;<span class="op" id="5245521">!=</span>&nbsp;<span class="ident" id="5245524">nil</span>&nbsp;<span class="op" id="5245528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245532">if</span>&nbsp;<span class="ident" id="5245535">item</span><span class="op" id="5245539">[</span><span class="num" id="5245540">0</span><span class="op" id="5245541">]</span>&nbsp;<span class="op" id="5245543">!=</span>&nbsp;<span class="string" id="5245546">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5245550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245555">if</span>&nbsp;<span class="ident" id="5245558">fromQuoted</span>&nbsp;<span class="op" id="5245569">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245575">d</span><span class="op" id="5245576">.</span><span class="ident" id="5245577">saveError</span><span class="op" id="5245586">(</span><span class="ident" id="5245587">fmt</span><span class="op" id="5245590">.</span><span class="ident" id="5245591">Errorf</span><span class="op" id="5245597">(</span><span class="string" id="5245598">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5245671">,</span>&nbsp;<span class="ident" id="5245673">item</span><span class="op" id="5245677">,</span>&nbsp;<span class="ident" id="5245679">v</span><span class="op" id="5245680">.</span><span class="ident" id="5245681">Type</span><span class="op" id="5245685">(</span><span class="op" id="5245686">)</span><span class="op" id="5245687">)</span><span class="op" id="5245688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245693">}</span>&nbsp;<span class="keyword" id="5245695">else</span>&nbsp;<span class="op" id="5245700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245706">d</span><span class="op" id="5245707">.</span><span class="ident" id="5245708">saveError</span><span class="op" id="5245717">(</span><span class="op" id="5245718">&amp;</span><span class="ident" id="5245719">UnmarshalTypeError</span><span class="op" id="5245737">{</span><span class="string" id="5245738">&#34;string&#34;</span><span class="op" id="5245746">,</span>&nbsp;<span class="ident" id="5245748">v</span><span class="op" id="5245749">.</span><span class="ident" id="5245750">Type</span><span class="op" id="5245754">(</span><span class="op" id="5245755">)</span><span class="op" id="5245756">}</span><span class="op" id="5245757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245766">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245770">s</span><span class="op" id="5245771">,</span>&nbsp;<span class="ident" id="5245773">ok</span>&nbsp;<span class="op" id="5245776">:=</span>&nbsp;<span class="ident" id="5245779">unquoteBytes</span><span class="op" id="5245791">(</span><span class="ident" id="5245792">item</span><span class="op" id="5245796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245800">if</span>&nbsp;<span class="op" id="5245803">!</span><span class="ident" id="5245804">ok</span>&nbsp;<span class="op" id="5245807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245812">if</span>&nbsp;<span class="ident" id="5245815">fromQuoted</span>&nbsp;<span class="op" id="5245826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245832">d</span><span class="op" id="5245833">.</span><span class="builtintype" id="5245834">error</span><span class="op" id="5245839">(</span><span class="ident" id="5245840">fmt</span><span class="op" id="5245843">.</span><span class="ident" id="5245844">Errorf</span><span class="op" id="5245850">(</span><span class="string" id="5245851">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5245924">,</span>&nbsp;<span class="ident" id="5245926">item</span><span class="op" id="5245930">,</span>&nbsp;<span class="ident" id="5245932">v</span><span class="op" id="5245933">.</span><span class="ident" id="5245934">Type</span><span class="op" id="5245938">(</span><span class="op" id="5245939">)</span><span class="op" id="5245940">)</span><span class="op" id="5245941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245946">}</span>&nbsp;<span class="keyword" id="5245948">else</span>&nbsp;<span class="op" id="5245953">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245959">d</span><span class="op" id="5245960">.</span><span class="builtintype" id="5245961">error</span><span class="op" id="5245966">(</span><span class="ident" id="5245967">errPhase</span><span class="op" id="5245975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245988">err</span>&nbsp;<span class="op" id="5245992">:=</span>&nbsp;<span class="ident" id="5245995">ut</span><span class="op" id="5245997">.</span><span class="ident" id="5245998">UnmarshalText</span><span class="op" id="5246011">(</span><span class="ident" id="5246012">s</span><span class="op" id="5246013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246017">if</span>&nbsp;<span class="ident" id="5246020">err</span>&nbsp;<span class="op" id="5246024">!=</span>&nbsp;<span class="ident" id="5246027">nil</span>&nbsp;<span class="op" id="5246031">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246036">d</span><span class="op" id="5246037">.</span><span class="builtintype" id="5246038">error</span><span class="op" id="5246043">(</span><span class="ident" id="5246044">err</span><span class="op" id="5246047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246055">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246067">v</span>&nbsp;<span class="op" id="5246069">=</span>&nbsp;<span class="ident" id="5246071">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246076">switch</span>&nbsp;<span class="ident" id="5246083">c</span>&nbsp;<span class="op" id="5246085">:=</span>&nbsp;<span class="ident" id="5246088">item</span><span class="op" id="5246092">[</span><span class="num" id="5246093">0</span><span class="op" id="5246094">]</span><span class="op" id="5246095">;</span>&nbsp;<span class="ident" id="5246097">c</span>&nbsp;<span class="op" id="5246099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246102">case</span>&nbsp;<span class="string" id="5246107">&#39;n&#39;</span><span class="op" id="5246110">:</span>&nbsp;<span class="comment" id="5246112">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246122">switch</span>&nbsp;<span class="ident" id="5246129">v</span><span class="op" id="5246130">.</span><span class="ident" id="5246131">Kind</span><span class="op" id="5246135">(</span><span class="op" id="5246136">)</span>&nbsp;<span class="op" id="5246138">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246142">case</span>&nbsp;<span class="ident" id="5246147">reflect</span><span class="op" id="5246154">.</span><span class="ident" id="5246155">Interface</span><span class="op" id="5246164">,</span>&nbsp;<span class="ident" id="5246166">reflect</span><span class="op" id="5246173">.</span><span class="ident" id="5246174">Ptr</span><span class="op" id="5246177">,</span>&nbsp;<span class="ident" id="5246179">reflect</span><span class="op" id="5246186">.</span><span class="ident" id="5246187">Map</span><span class="op" id="5246190">,</span>&nbsp;<span class="ident" id="5246192">reflect</span><span class="op" id="5246199">.</span><span class="ident" id="5246200">Slice</span><span class="op" id="5246205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246210">v</span><span class="op" id="5246211">.</span><span class="ident" id="5246212">Set</span><span class="op" id="5246215">(</span><span class="ident" id="5246216">reflect</span><span class="op" id="5246223">.</span><span class="ident" id="5246224">Zero</span><span class="op" id="5246228">(</span><span class="ident" id="5246229">v</span><span class="op" id="5246230">.</span><span class="ident" id="5246231">Type</span><span class="op" id="5246235">(</span><span class="op" id="5246236">)</span><span class="op" id="5246237">)</span><span class="op" id="5246238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5246243">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246296">case</span>&nbsp;<span class="string" id="5246301">&#39;t&#39;</span><span class="op" id="5246304">,</span>&nbsp;<span class="string" id="5246306">&#39;f&#39;</span><span class="op" id="5246309">:</span>&nbsp;<span class="comment" id="5246311">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246328">value</span>&nbsp;<span class="op" id="5246334">:=</span>&nbsp;<span class="ident" id="5246337">c</span>&nbsp;<span class="op" id="5246339">==</span>&nbsp;<span class="string" id="5246342">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246348">switch</span>&nbsp;<span class="ident" id="5246355">v</span><span class="op" id="5246356">.</span><span class="ident" id="5246357">Kind</span><span class="op" id="5246361">(</span><span class="op" id="5246362">)</span>&nbsp;<span class="op" id="5246364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246368">default</span><span class="op" id="5246375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246380">if</span>&nbsp;<span class="ident" id="5246383">fromQuoted</span>&nbsp;<span class="op" id="5246394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246400">d</span><span class="op" id="5246401">.</span><span class="ident" id="5246402">saveError</span><span class="op" id="5246411">(</span><span class="ident" id="5246412">fmt</span><span class="op" id="5246415">.</span><span class="ident" id="5246416">Errorf</span><span class="op" id="5246422">(</span><span class="string" id="5246423">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5246496">,</span>&nbsp;<span class="ident" id="5246498">item</span><span class="op" id="5246502">,</span>&nbsp;<span class="ident" id="5246504">v</span><span class="op" id="5246505">.</span><span class="ident" id="5246506">Type</span><span class="op" id="5246510">(</span><span class="op" id="5246511">)</span><span class="op" id="5246512">)</span><span class="op" id="5246513">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246518">}</span>&nbsp;<span class="keyword" id="5246520">else</span>&nbsp;<span class="op" id="5246525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246531">d</span><span class="op" id="5246532">.</span><span class="ident" id="5246533">saveError</span><span class="op" id="5246542">(</span><span class="op" id="5246543">&amp;</span><span class="ident" id="5246544">UnmarshalTypeError</span><span class="op" id="5246562">{</span><span class="string" id="5246563">&#34;bool&#34;</span><span class="op" id="5246569">,</span>&nbsp;<span class="ident" id="5246571">v</span><span class="op" id="5246572">.</span><span class="ident" id="5246573">Type</span><span class="op" id="5246577">(</span><span class="op" id="5246578">)</span><span class="op" id="5246579">}</span><span class="op" id="5246580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246589">case</span>&nbsp;<span class="ident" id="5246594">reflect</span><span class="op" id="5246601">.</span><span class="ident" id="5246602">Bool</span><span class="op" id="5246606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246611">v</span><span class="op" id="5246612">.</span><span class="ident" id="5246613">SetBool</span><span class="op" id="5246620">(</span><span class="ident" id="5246621">value</span><span class="op" id="5246626">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246630">case</span>&nbsp;<span class="ident" id="5246635">reflect</span><span class="op" id="5246642">.</span><span class="ident" id="5246643">Interface</span><span class="op" id="5246652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246657">if</span>&nbsp;<span class="ident" id="5246660">v</span><span class="op" id="5246661">.</span><span class="ident" id="5246662">NumMethod</span><span class="op" id="5246671">(</span><span class="op" id="5246672">)</span>&nbsp;<span class="op" id="5246674">==</span>&nbsp;<span class="num" id="5246677">0</span>&nbsp;<span class="op" id="5246679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246685">v</span><span class="op" id="5246686">.</span><span class="ident" id="5246687">Set</span><span class="op" id="5246690">(</span><span class="ident" id="5246691">reflect</span><span class="op" id="5246698">.</span><span class="ident" id="5246699">ValueOf</span><span class="op" id="5246706">(</span><span class="ident" id="5246707">value</span><span class="op" id="5246712">)</span><span class="op" id="5246713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246718">}</span>&nbsp;<span class="keyword" id="5246720">else</span>&nbsp;<span class="op" id="5246725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246731">d</span><span class="op" id="5246732">.</span><span class="ident" id="5246733">saveError</span><span class="op" id="5246742">(</span><span class="op" id="5246743">&amp;</span><span class="ident" id="5246744">UnmarshalTypeError</span><span class="op" id="5246762">{</span><span class="string" id="5246763">&#34;bool&#34;</span><span class="op" id="5246769">,</span>&nbsp;<span class="ident" id="5246771">v</span><span class="op" id="5246772">.</span><span class="ident" id="5246773">Type</span><span class="op" id="5246777">(</span><span class="op" id="5246778">)</span><span class="op" id="5246779">}</span><span class="op" id="5246780">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246793">case</span>&nbsp;<span class="string" id="5246798">&#39;&#34;&#39;</span><span class="op" id="5246801">:</span>&nbsp;<span class="comment" id="5246803">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246815">s</span><span class="op" id="5246816">,</span>&nbsp;<span class="ident" id="5246818">ok</span>&nbsp;<span class="op" id="5246821">:=</span>&nbsp;<span class="ident" id="5246824">unquoteBytes</span><span class="op" id="5246836">(</span><span class="ident" id="5246837">item</span><span class="op" id="5246841">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246845">if</span>&nbsp;<span class="op" id="5246848">!</span><span class="ident" id="5246849">ok</span>&nbsp;<span class="op" id="5246852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246857">if</span>&nbsp;<span class="ident" id="5246860">fromQuoted</span>&nbsp;<span class="op" id="5246871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246877">d</span><span class="op" id="5246878">.</span><span class="builtintype" id="5246879">error</span><span class="op" id="5246884">(</span><span class="ident" id="5246885">fmt</span><span class="op" id="5246888">.</span><span class="ident" id="5246889">Errorf</span><span class="op" id="5246895">(</span><span class="string" id="5246896">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5246969">,</span>&nbsp;<span class="ident" id="5246971">item</span><span class="op" id="5246975">,</span>&nbsp;<span class="ident" id="5246977">v</span><span class="op" id="5246978">.</span><span class="ident" id="5246979">Type</span><span class="op" id="5246983">(</span><span class="op" id="5246984">)</span><span class="op" id="5246985">)</span><span class="op" id="5246986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246991">}</span>&nbsp;<span class="keyword" id="5246993">else</span>&nbsp;<span class="op" id="5246998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247004">d</span><span class="op" id="5247005">.</span><span class="builtintype" id="5247006">error</span><span class="op" id="5247011">(</span><span class="ident" id="5247012">errPhase</span><span class="op" id="5247020">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247033">switch</span>&nbsp;<span class="ident" id="5247040">v</span><span class="op" id="5247041">.</span><span class="ident" id="5247042">Kind</span><span class="op" id="5247046">(</span><span class="op" id="5247047">)</span>&nbsp;<span class="op" id="5247049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247053">default</span><span class="op" id="5247060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247065">d</span><span class="op" id="5247066">.</span><span class="ident" id="5247067">saveError</span><span class="op" id="5247076">(</span><span class="op" id="5247077">&amp;</span><span class="ident" id="5247078">UnmarshalTypeError</span><span class="op" id="5247096">{</span><span class="string" id="5247097">&#34;string&#34;</span><span class="op" id="5247105">,</span>&nbsp;<span class="ident" id="5247107">v</span><span class="op" id="5247108">.</span><span class="ident" id="5247109">Type</span><span class="op" id="5247113">(</span><span class="op" id="5247114">)</span><span class="op" id="5247115">}</span><span class="op" id="5247116">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247120">case</span>&nbsp;<span class="ident" id="5247125">reflect</span><span class="op" id="5247132">.</span><span class="ident" id="5247133">Slice</span><span class="op" id="5247138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247143">if</span>&nbsp;<span class="ident" id="5247146">v</span><span class="op" id="5247147">.</span><span class="ident" id="5247148">Type</span><span class="op" id="5247152">(</span><span class="op" id="5247153">)</span>&nbsp;<span class="op" id="5247155">!=</span>&nbsp;<span class="ident" id="5247158">byteSliceType</span>&nbsp;<span class="op" id="5247172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247178">d</span><span class="op" id="5247179">.</span><span class="ident" id="5247180">saveError</span><span class="op" id="5247189">(</span><span class="op" id="5247190">&amp;</span><span class="ident" id="5247191">UnmarshalTypeError</span><span class="op" id="5247209">{</span><span class="string" id="5247210">&#34;string&#34;</span><span class="op" id="5247218">,</span>&nbsp;<span class="ident" id="5247220">v</span><span class="op" id="5247221">.</span><span class="ident" id="5247222">Type</span><span class="op" id="5247226">(</span><span class="op" id="5247227">)</span><span class="op" id="5247228">}</span><span class="op" id="5247229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247235">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247244">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247249">b</span>&nbsp;<span class="op" id="5247251">:=</span>&nbsp;<span class="builtinfunc" id="5247254">make</span><span class="op" id="5247258">(</span><span class="op" id="5247259">[</span><span class="op" id="5247260">]</span><span class="builtintype" id="5247261">byte</span><span class="op" id="5247265">,</span>&nbsp;<span class="ident" id="5247267">base64</span><span class="op" id="5247273">.</span><span class="ident" id="5247274">StdEncoding</span><span class="op" id="5247285">.</span><span class="ident" id="5247286">DecodedLen</span><span class="op" id="5247296">(</span><span class="builtinfunc" id="5247297">len</span><span class="op" id="5247300">(</span><span class="ident" id="5247301">s</span><span class="op" id="5247302">)</span><span class="op" id="5247303">)</span><span class="op" id="5247304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247309">n</span><span class="op" id="5247310">,</span>&nbsp;<span class="ident" id="5247312">err</span>&nbsp;<span class="op" id="5247316">:=</span>&nbsp;<span class="ident" id="5247319">base64</span><span class="op" id="5247325">.</span><span class="ident" id="5247326">StdEncoding</span><span class="op" id="5247337">.</span><span class="ident" id="5247338">Decode</span><span class="op" id="5247344">(</span><span class="ident" id="5247345">b</span><span class="op" id="5247346">,</span>&nbsp;<span class="ident" id="5247348">s</span><span class="op" id="5247349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247354">if</span>&nbsp;<span class="ident" id="5247357">err</span>&nbsp;<span class="op" id="5247361">!=</span>&nbsp;<span class="ident" id="5247364">nil</span>&nbsp;<span class="op" id="5247368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247374">d</span><span class="op" id="5247375">.</span><span class="ident" id="5247376">saveError</span><span class="op" id="5247385">(</span><span class="ident" id="5247386">err</span><span class="op" id="5247389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247395">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247409">v</span><span class="op" id="5247410">.</span><span class="ident" id="5247411">Set</span><span class="op" id="5247414">(</span><span class="ident" id="5247415">reflect</span><span class="op" id="5247422">.</span><span class="ident" id="5247423">ValueOf</span><span class="op" id="5247430">(</span><span class="ident" id="5247431">b</span><span class="op" id="5247432">[</span><span class="num" id="5247433">0</span><span class="op" id="5247434">:</span><span class="ident" id="5247435">n</span><span class="op" id="5247436">]</span><span class="op" id="5247437">)</span><span class="op" id="5247438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247442">case</span>&nbsp;<span class="ident" id="5247447">reflect</span><span class="op" id="5247454">.</span><span class="ident" id="5247455">String</span><span class="op" id="5247461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247466">v</span><span class="op" id="5247467">.</span><span class="ident" id="5247468">SetString</span><span class="op" id="5247477">(</span><span class="builtintype" id="5247478">string</span><span class="op" id="5247484">(</span><span class="ident" id="5247485">s</span><span class="op" id="5247486">)</span><span class="op" id="5247487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247491">case</span>&nbsp;<span class="ident" id="5247496">reflect</span><span class="op" id="5247503">.</span><span class="ident" id="5247504">Interface</span><span class="op" id="5247513">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247518">if</span>&nbsp;<span class="ident" id="5247521">v</span><span class="op" id="5247522">.</span><span class="ident" id="5247523">NumMethod</span><span class="op" id="5247532">(</span><span class="op" id="5247533">)</span>&nbsp;<span class="op" id="5247535">==</span>&nbsp;<span class="num" id="5247538">0</span>&nbsp;<span class="op" id="5247540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247546">v</span><span class="op" id="5247547">.</span><span class="ident" id="5247548">Set</span><span class="op" id="5247551">(</span><span class="ident" id="5247552">reflect</span><span class="op" id="5247559">.</span><span class="ident" id="5247560">ValueOf</span><span class="op" id="5247567">(</span><span class="builtintype" id="5247568">string</span><span class="op" id="5247574">(</span><span class="ident" id="5247575">s</span><span class="op" id="5247576">)</span><span class="op" id="5247577">)</span><span class="op" id="5247578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247583">}</span>&nbsp;<span class="keyword" id="5247585">else</span>&nbsp;<span class="op" id="5247590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247596">d</span><span class="op" id="5247597">.</span><span class="ident" id="5247598">saveError</span><span class="op" id="5247607">(</span><span class="op" id="5247608">&amp;</span><span class="ident" id="5247609">UnmarshalTypeError</span><span class="op" id="5247627">{</span><span class="string" id="5247628">&#34;string&#34;</span><span class="op" id="5247636">,</span>&nbsp;<span class="ident" id="5247638">v</span><span class="op" id="5247639">.</span><span class="ident" id="5247640">Type</span><span class="op" id="5247644">(</span><span class="op" id="5247645">)</span><span class="op" id="5247646">}</span><span class="op" id="5247647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247652">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247660">default</span><span class="op" id="5247667">:</span>&nbsp;<span class="comment" id="5247669">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247681">if</span>&nbsp;<span class="ident" id="5247684">c</span>&nbsp;<span class="op" id="5247686">!=</span>&nbsp;<span class="string" id="5247689">&#39;-&#39;</span>&nbsp;<span class="op" id="5247693">&amp;&amp;</span>&nbsp;<span class="op" id="5247696">(</span><span class="ident" id="5247697">c</span>&nbsp;<span class="op" id="5247699">&lt;</span>&nbsp;<span class="string" id="5247701">&#39;0&#39;</span>&nbsp;<span class="op" id="5247705">||</span>&nbsp;<span class="ident" id="5247708">c</span>&nbsp;<span class="op" id="5247710">&gt;</span>&nbsp;<span class="string" id="5247712">&#39;9&#39;</span><span class="op" id="5247715">)</span>&nbsp;<span class="op" id="5247717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247722">if</span>&nbsp;<span class="ident" id="5247725">fromQuoted</span>&nbsp;<span class="op" id="5247736">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247742">d</span><span class="op" id="5247743">.</span><span class="builtintype" id="5247744">error</span><span class="op" id="5247749">(</span><span class="ident" id="5247750">fmt</span><span class="op" id="5247753">.</span><span class="ident" id="5247754">Errorf</span><span class="op" id="5247760">(</span><span class="string" id="5247761">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5247834">,</span>&nbsp;<span class="ident" id="5247836">item</span><span class="op" id="5247840">,</span>&nbsp;<span class="ident" id="5247842">v</span><span class="op" id="5247843">.</span><span class="ident" id="5247844">Type</span><span class="op" id="5247848">(</span><span class="op" id="5247849">)</span><span class="op" id="5247850">)</span><span class="op" id="5247851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247856">}</span>&nbsp;<span class="keyword" id="5247858">else</span>&nbsp;<span class="op" id="5247863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247869">d</span><span class="op" id="5247870">.</span><span class="builtintype" id="5247871">error</span><span class="op" id="5247876">(</span><span class="ident" id="5247877">errPhase</span><span class="op" id="5247885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247894">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247898">s</span>&nbsp;<span class="op" id="5247900">:=</span>&nbsp;<span class="builtintype" id="5247903">string</span><span class="op" id="5247909">(</span><span class="ident" id="5247910">item</span><span class="op" id="5247914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247918">switch</span>&nbsp;<span class="ident" id="5247925">v</span><span class="op" id="5247926">.</span><span class="ident" id="5247927">Kind</span><span class="op" id="5247931">(</span><span class="op" id="5247932">)</span>&nbsp;<span class="op" id="5247934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247938">default</span><span class="op" id="5247945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247950">if</span>&nbsp;<span class="ident" id="5247953">v</span><span class="op" id="5247954">.</span><span class="ident" id="5247955">Kind</span><span class="op" id="5247959">(</span><span class="op" id="5247960">)</span>&nbsp;<span class="op" id="5247962">==</span>&nbsp;<span class="ident" id="5247965">reflect</span><span class="op" id="5247972">.</span><span class="ident" id="5247973">String</span>&nbsp;<span class="op" id="5247980">&amp;&amp;</span>&nbsp;<span class="ident" id="5247983">v</span><span class="op" id="5247984">.</span><span class="ident" id="5247985">Type</span><span class="op" id="5247989">(</span><span class="op" id="5247990">)</span>&nbsp;<span class="op" id="5247992">==</span>&nbsp;<span class="ident" id="5247995">numberType</span>&nbsp;<span class="op" id="5248006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248012">v</span><span class="op" id="5248013">.</span><span class="ident" id="5248014">SetString</span><span class="op" id="5248023">(</span><span class="ident" id="5248024">s</span><span class="op" id="5248025">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248031">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248045">if</span>&nbsp;<span class="ident" id="5248048">fromQuoted</span>&nbsp;<span class="op" id="5248059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248065">d</span><span class="op" id="5248066">.</span><span class="builtintype" id="5248067">error</span><span class="op" id="5248072">(</span><span class="ident" id="5248073">fmt</span><span class="op" id="5248076">.</span><span class="ident" id="5248077">Errorf</span><span class="op" id="5248083">(</span><span class="string" id="5248084">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5248157">,</span>&nbsp;<span class="ident" id="5248159">item</span><span class="op" id="5248163">,</span>&nbsp;<span class="ident" id="5248165">v</span><span class="op" id="5248166">.</span><span class="ident" id="5248167">Type</span><span class="op" id="5248171">(</span><span class="op" id="5248172">)</span><span class="op" id="5248173">)</span><span class="op" id="5248174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248179">}</span>&nbsp;<span class="keyword" id="5248181">else</span>&nbsp;<span class="op" id="5248186">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248192">d</span><span class="op" id="5248193">.</span><span class="builtintype" id="5248194">error</span><span class="op" id="5248199">(</span><span class="op" id="5248200">&amp;</span><span class="ident" id="5248201">UnmarshalTypeError</span><span class="op" id="5248219">{</span><span class="string" id="5248220">&#34;number&#34;</span><span class="op" id="5248228">,</span>&nbsp;<span class="ident" id="5248230">v</span><span class="op" id="5248231">.</span><span class="ident" id="5248232">Type</span><span class="op" id="5248236">(</span><span class="op" id="5248237">)</span><span class="op" id="5248238">}</span><span class="op" id="5248239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248248">case</span>&nbsp;<span class="ident" id="5248253">reflect</span><span class="op" id="5248260">.</span><span class="ident" id="5248261">Interface</span><span class="op" id="5248270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248275">n</span><span class="op" id="5248276">,</span>&nbsp;<span class="ident" id="5248278">err</span>&nbsp;<span class="op" id="5248282">:=</span>&nbsp;<span class="ident" id="5248285">d</span><span class="op" id="5248286">.</span><span class="ident" id="5248287">convertNumber</span><span class="op" id="5248300">(</span><span class="ident" id="5248301">s</span><span class="op" id="5248302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248307">if</span>&nbsp;<span class="ident" id="5248310">err</span>&nbsp;<span class="op" id="5248314">!=</span>&nbsp;<span class="ident" id="5248317">nil</span>&nbsp;<span class="op" id="5248321">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248327">d</span><span class="op" id="5248328">.</span><span class="ident" id="5248329">saveError</span><span class="op" id="5248338">(</span><span class="ident" id="5248339">err</span><span class="op" id="5248342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248348">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248362">if</span>&nbsp;<span class="ident" id="5248365">v</span><span class="op" id="5248366">.</span><span class="ident" id="5248367">NumMethod</span><span class="op" id="5248376">(</span><span class="op" id="5248377">)</span>&nbsp;<span class="op" id="5248379">!=</span>&nbsp;<span class="num" id="5248382">0</span>&nbsp;<span class="op" id="5248384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248390">d</span><span class="op" id="5248391">.</span><span class="ident" id="5248392">saveError</span><span class="op" id="5248401">(</span><span class="op" id="5248402">&amp;</span><span class="ident" id="5248403">UnmarshalTypeError</span><span class="op" id="5248421">{</span><span class="string" id="5248422">&#34;number&#34;</span><span class="op" id="5248430">,</span>&nbsp;<span class="ident" id="5248432">v</span><span class="op" id="5248433">.</span><span class="ident" id="5248434">Type</span><span class="op" id="5248438">(</span><span class="op" id="5248439">)</span><span class="op" id="5248440">}</span><span class="op" id="5248441">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248447">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248461">v</span><span class="op" id="5248462">.</span><span class="ident" id="5248463">Set</span><span class="op" id="5248466">(</span><span class="ident" id="5248467">reflect</span><span class="op" id="5248474">.</span><span class="ident" id="5248475">ValueOf</span><span class="op" id="5248482">(</span><span class="ident" id="5248483">n</span><span class="op" id="5248484">)</span><span class="op" id="5248485">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248490">case</span>&nbsp;<span class="ident" id="5248495">reflect</span><span class="op" id="5248502">.</span><span class="ident" id="5248503">Int</span><span class="op" id="5248506">,</span>&nbsp;<span class="ident" id="5248508">reflect</span><span class="op" id="5248515">.</span><span class="ident" id="5248516">Int8</span><span class="op" id="5248520">,</span>&nbsp;<span class="ident" id="5248522">reflect</span><span class="op" id="5248529">.</span><span class="ident" id="5248530">Int16</span><span class="op" id="5248535">,</span>&nbsp;<span class="ident" id="5248537">reflect</span><span class="op" id="5248544">.</span><span class="ident" id="5248545">Int32</span><span class="op" id="5248550">,</span>&nbsp;<span class="ident" id="5248552">reflect</span><span class="op" id="5248559">.</span><span class="ident" id="5248560">Int64</span><span class="op" id="5248565">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248570">n</span><span class="op" id="5248571">,</span>&nbsp;<span class="ident" id="5248573">err</span>&nbsp;<span class="op" id="5248577">:=</span>&nbsp;<span class="ident" id="5248580">strconv</span><span class="op" id="5248587">.</span><span class="ident" id="5248588">ParseInt</span><span class="op" id="5248596">(</span><span class="ident" id="5248597">s</span><span class="op" id="5248598">,</span>&nbsp;<span class="num" id="5248600">10</span><span class="op" id="5248602">,</span>&nbsp;<span class="num" id="5248604">64</span><span class="op" id="5248606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248611">if</span>&nbsp;<span class="ident" id="5248614">err</span>&nbsp;<span class="op" id="5248618">!=</span>&nbsp;<span class="ident" id="5248621">nil</span>&nbsp;<span class="op" id="5248625">||</span>&nbsp;<span class="ident" id="5248628">v</span><span class="op" id="5248629">.</span><span class="ident" id="5248630">OverflowInt</span><span class="op" id="5248641">(</span><span class="ident" id="5248642">n</span><span class="op" id="5248643">)</span>&nbsp;<span class="op" id="5248645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248651">d</span><span class="op" id="5248652">.</span><span class="ident" id="5248653">saveError</span><span class="op" id="5248662">(</span><span class="op" id="5248663">&amp;</span><span class="ident" id="5248664">UnmarshalTypeError</span><span class="op" id="5248682">{</span><span class="string" id="5248683">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5248693">+</span>&nbsp;<span class="ident" id="5248695">s</span><span class="op" id="5248696">,</span>&nbsp;<span class="ident" id="5248698">v</span><span class="op" id="5248699">.</span><span class="ident" id="5248700">Type</span><span class="op" id="5248704">(</span><span class="op" id="5248705">)</span><span class="op" id="5248706">}</span><span class="op" id="5248707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248713">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248722">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248727">v</span><span class="op" id="5248728">.</span><span class="ident" id="5248729">SetInt</span><span class="op" id="5248735">(</span><span class="ident" id="5248736">n</span><span class="op" id="5248737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248742">case</span>&nbsp;<span class="ident" id="5248747">reflect</span><span class="op" id="5248754">.</span><span class="ident" id="5248755">Uint</span><span class="op" id="5248759">,</span>&nbsp;<span class="ident" id="5248761">reflect</span><span class="op" id="5248768">.</span><span class="ident" id="5248769">Uint8</span><span class="op" id="5248774">,</span>&nbsp;<span class="ident" id="5248776">reflect</span><span class="op" id="5248783">.</span><span class="ident" id="5248784">Uint16</span><span class="op" id="5248790">,</span>&nbsp;<span class="ident" id="5248792">reflect</span><span class="op" id="5248799">.</span><span class="ident" id="5248800">Uint32</span><span class="op" id="5248806">,</span>&nbsp;<span class="ident" id="5248808">reflect</span><span class="op" id="5248815">.</span><span class="ident" id="5248816">Uint64</span><span class="op" id="5248822">,</span>&nbsp;<span class="ident" id="5248824">reflect</span><span class="op" id="5248831">.</span><span class="ident" id="5248832">Uintptr</span><span class="op" id="5248839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248844">n</span><span class="op" id="5248845">,</span>&nbsp;<span class="ident" id="5248847">err</span>&nbsp;<span class="op" id="5248851">:=</span>&nbsp;<span class="ident" id="5248854">strconv</span><span class="op" id="5248861">.</span><span class="ident" id="5248862">ParseUint</span><span class="op" id="5248871">(</span><span class="ident" id="5248872">s</span><span class="op" id="5248873">,</span>&nbsp;<span class="num" id="5248875">10</span><span class="op" id="5248877">,</span>&nbsp;<span class="num" id="5248879">64</span><span class="op" id="5248881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248886">if</span>&nbsp;<span class="ident" id="5248889">err</span>&nbsp;<span class="op" id="5248893">!=</span>&nbsp;<span class="ident" id="5248896">nil</span>&nbsp;<span class="op" id="5248900">||</span>&nbsp;<span class="ident" id="5248903">v</span><span class="op" id="5248904">.</span><span class="ident" id="5248905">OverflowUint</span><span class="op" id="5248917">(</span><span class="ident" id="5248918">n</span><span class="op" id="5248919">)</span>&nbsp;<span class="op" id="5248921">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248927">d</span><span class="op" id="5248928">.</span><span class="ident" id="5248929">saveError</span><span class="op" id="5248938">(</span><span class="op" id="5248939">&amp;</span><span class="ident" id="5248940">UnmarshalTypeError</span><span class="op" id="5248958">{</span><span class="string" id="5248959">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5248969">+</span>&nbsp;<span class="ident" id="5248971">s</span><span class="op" id="5248972">,</span>&nbsp;<span class="ident" id="5248974">v</span><span class="op" id="5248975">.</span><span class="ident" id="5248976">Type</span><span class="op" id="5248980">(</span><span class="op" id="5248981">)</span><span class="op" id="5248982">}</span><span class="op" id="5248983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248989">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249003">v</span><span class="op" id="5249004">.</span><span class="ident" id="5249005">SetUint</span><span class="op" id="5249012">(</span><span class="ident" id="5249013">n</span><span class="op" id="5249014">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249019">case</span>&nbsp;<span class="ident" id="5249024">reflect</span><span class="op" id="5249031">.</span><span class="ident" id="5249032">Float32</span><span class="op" id="5249039">,</span>&nbsp;<span class="ident" id="5249041">reflect</span><span class="op" id="5249048">.</span><span class="ident" id="5249049">Float64</span><span class="op" id="5249056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249061">n</span><span class="op" id="5249062">,</span>&nbsp;<span class="ident" id="5249064">err</span>&nbsp;<span class="op" id="5249068">:=</span>&nbsp;<span class="ident" id="5249071">strconv</span><span class="op" id="5249078">.</span><span class="ident" id="5249079">ParseFloat</span><span class="op" id="5249089">(</span><span class="ident" id="5249090">s</span><span class="op" id="5249091">,</span>&nbsp;<span class="ident" id="5249093">v</span><span class="op" id="5249094">.</span><span class="ident" id="5249095">Type</span><span class="op" id="5249099">(</span><span class="op" id="5249100">)</span><span class="op" id="5249101">.</span><span class="ident" id="5249102">Bits</span><span class="op" id="5249106">(</span><span class="op" id="5249107">)</span><span class="op" id="5249108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249113">if</span>&nbsp;<span class="ident" id="5249116">err</span>&nbsp;<span class="op" id="5249120">!=</span>&nbsp;<span class="ident" id="5249123">nil</span>&nbsp;<span class="op" id="5249127">||</span>&nbsp;<span class="ident" id="5249130">v</span><span class="op" id="5249131">.</span><span class="ident" id="5249132">OverflowFloat</span><span class="op" id="5249145">(</span><span class="ident" id="5249146">n</span><span class="op" id="5249147">)</span>&nbsp;<span class="op" id="5249149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249155">d</span><span class="op" id="5249156">.</span><span class="ident" id="5249157">saveError</span><span class="op" id="5249166">(</span><span class="op" id="5249167">&amp;</span><span class="ident" id="5249168">UnmarshalTypeError</span><span class="op" id="5249186">{</span><span class="string" id="5249187">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5249197">+</span>&nbsp;<span class="ident" id="5249199">s</span><span class="op" id="5249200">,</span>&nbsp;<span class="ident" id="5249202">v</span><span class="op" id="5249203">.</span><span class="ident" id="5249204">Type</span><span class="op" id="5249208">(</span><span class="op" id="5249209">)</span><span class="op" id="5249210">}</span><span class="op" id="5249211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249217">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249231">v</span><span class="op" id="5249232">.</span><span class="ident" id="5249233">SetFloat</span><span class="op" id="5249241">(</span><span class="ident" id="5249242">n</span><span class="op" id="5249243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249250">}</span><br>
<span class="lineno"></span><span class="op" id="5249252">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="5249255">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="5249314">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5249374">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="5249439">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="5249495">func</span>&nbsp;<span class="op" id="5249500">(</span><span class="ident" id="5249501">d</span>&nbsp;<span class="op" id="5249503">*</span><span class="ident" id="5249504">decodeState</span><span class="op" id="5249515">)</span>&nbsp;<span class="ident" id="5249517">valueInterface</span><span class="op" id="5249531">(</span><span class="op" id="5249532">)</span>&nbsp;<span class="keyword" id="5249534">interface</span><span class="op" id="5249543">{</span><span class="op" id="5249544">}</span>&nbsp;<span class="op" id="5249546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249549">switch</span>&nbsp;<span class="ident" id="5249556">d</span><span class="op" id="5249557">.</span><span class="ident" id="5249558">scanWhile</span><span class="op" id="5249567">(</span><span class="ident" id="5249568">scanSkipSpace</span><span class="op" id="5249581">)</span>&nbsp;<span class="op" id="5249583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249586">default</span><span class="op" id="5249593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249597">d</span><span class="op" id="5249598">.</span><span class="builtintype" id="5249599">error</span><span class="op" id="5249604">(</span><span class="ident" id="5249605">errPhase</span><span class="op" id="5249613">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5249617">panic</span><span class="op" id="5249622">(</span><span class="string" id="5249623">&#34;unreachable&#34;</span><span class="op" id="5249636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249639">case</span>&nbsp;<span class="ident" id="5249644">scanBeginArray</span><span class="op" id="5249658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249662">return</span>&nbsp;<span class="ident" id="5249669">d</span><span class="op" id="5249670">.</span><span class="ident" id="5249671">arrayInterface</span><span class="op" id="5249685">(</span><span class="op" id="5249686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249689">case</span>&nbsp;<span class="ident" id="5249694">scanBeginObject</span><span class="op" id="5249709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249713">return</span>&nbsp;<span class="ident" id="5249720">d</span><span class="op" id="5249721">.</span><span class="ident" id="5249722">objectInterface</span><span class="op" id="5249737">(</span><span class="op" id="5249738">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249741">case</span>&nbsp;<span class="ident" id="5249746">scanBeginLiteral</span><span class="op" id="5249762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249766">return</span>&nbsp;<span class="ident" id="5249773">d</span><span class="op" id="5249774">.</span><span class="ident" id="5249775">literalInterface</span><span class="op" id="5249791">(</span><span class="op" id="5249792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249795">}</span><br>
<span class="lineno"></span><span class="op" id="5249797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="5249800">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5249859">func</span>&nbsp;<span class="op" id="5249864">(</span><span class="ident" id="5249865">d</span>&nbsp;<span class="op" id="5249867">*</span><span class="ident" id="5249868">decodeState</span><span class="op" id="5249879">)</span>&nbsp;<span class="ident" id="5249881">arrayInterface</span><span class="op" id="5249895">(</span><span class="op" id="5249896">)</span>&nbsp;<span class="op" id="5249898">[</span><span class="op" id="5249899">]</span><span class="keyword" id="5249900">interface</span><span class="op" id="5249909">{</span><span class="op" id="5249910">}</span>&nbsp;<span class="op" id="5249912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249915">var</span>&nbsp;<span class="ident" id="5249919">v</span>&nbsp;<span class="op" id="5249921">=</span>&nbsp;<span class="builtinfunc" id="5249923">make</span><span class="op" id="5249927">(</span><span class="op" id="5249928">[</span><span class="op" id="5249929">]</span><span class="keyword" id="5249930">interface</span><span class="op" id="5249939">{</span><span class="op" id="5249940">}</span><span class="op" id="5249941">,</span>&nbsp;<span class="num" id="5249943">0</span><span class="op" id="5249944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249947">for</span>&nbsp;<span class="op" id="5249951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5249955">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250015">op</span>&nbsp;<span class="op" id="5250018">:=</span>&nbsp;<span class="ident" id="5250021">d</span><span class="op" id="5250022">.</span><span class="ident" id="5250023">scanWhile</span><span class="op" id="5250032">(</span><span class="ident" id="5250033">scanSkipSpace</span><span class="op" id="5250046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250050">if</span>&nbsp;<span class="ident" id="5250053">op</span>&nbsp;<span class="op" id="5250056">==</span>&nbsp;<span class="ident" id="5250059">scanEndArray</span>&nbsp;<span class="op" id="5250072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250077">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250090">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250146">d</span><span class="op" id="5250147">.</span><span class="ident" id="5250148">off</span><span class="op" id="5250151">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250156">d</span><span class="op" id="5250157">.</span><span class="ident" id="5250158">scan</span><span class="op" id="5250162">.</span><span class="ident" id="5250163">undo</span><span class="op" id="5250167">(</span><span class="ident" id="5250168">op</span><span class="op" id="5250170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250175">v</span>&nbsp;<span class="op" id="5250177">=</span>&nbsp;<span class="builtinfunc" id="5250179">append</span><span class="op" id="5250185">(</span><span class="ident" id="5250186">v</span><span class="op" id="5250187">,</span>&nbsp;<span class="ident" id="5250189">d</span><span class="op" id="5250190">.</span><span class="ident" id="5250191">valueInterface</span><span class="op" id="5250205">(</span><span class="op" id="5250206">)</span><span class="op" id="5250207">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250212">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250244">op</span>&nbsp;<span class="op" id="5250247">=</span>&nbsp;<span class="ident" id="5250249">d</span><span class="op" id="5250250">.</span><span class="ident" id="5250251">scanWhile</span><span class="op" id="5250260">(</span><span class="ident" id="5250261">scanSkipSpace</span><span class="op" id="5250274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250278">if</span>&nbsp;<span class="ident" id="5250281">op</span>&nbsp;<span class="op" id="5250284">==</span>&nbsp;<span class="ident" id="5250287">scanEndArray</span>&nbsp;<span class="op" id="5250300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250305">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250317">if</span>&nbsp;<span class="ident" id="5250320">op</span>&nbsp;<span class="op" id="5250323">!=</span>&nbsp;<span class="ident" id="5250326">scanArrayValue</span>&nbsp;<span class="op" id="5250341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250346">d</span><span class="op" id="5250347">.</span><span class="builtintype" id="5250348">error</span><span class="op" id="5250353">(</span><span class="ident" id="5250354">errPhase</span><span class="op" id="5250362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250369">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250372">return</span>&nbsp;<span class="ident" id="5250379">v</span><br>
<span class="lineno"></span><span class="op" id="5250381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5250384">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5250454">func</span>&nbsp;<span class="op" id="5250459">(</span><span class="ident" id="5250460">d</span>&nbsp;<span class="op" id="5250462">*</span><span class="ident" id="5250463">decodeState</span><span class="op" id="5250474">)</span>&nbsp;<span class="ident" id="5250476">objectInterface</span><span class="op" id="5250491">(</span><span class="op" id="5250492">)</span>&nbsp;<span class="keyword" id="5250494">map</span><span class="op" id="5250497">[</span><span class="builtintype" id="5250498">string</span><span class="op" id="5250504">]</span><span class="keyword" id="5250505">interface</span><span class="op" id="5250514">{</span><span class="op" id="5250515">}</span>&nbsp;<span class="op" id="5250517">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250520">m</span>&nbsp;<span class="op" id="5250522">:=</span>&nbsp;<span class="builtinfunc" id="5250525">make</span><span class="op" id="5250529">(</span><span class="keyword" id="5250530">map</span><span class="op" id="5250533">[</span><span class="builtintype" id="5250534">string</span><span class="op" id="5250540">]</span><span class="keyword" id="5250541">interface</span><span class="op" id="5250550">{</span><span class="op" id="5250551">}</span><span class="op" id="5250552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250555">for</span>&nbsp;<span class="op" id="5250559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250563">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250611">op</span>&nbsp;<span class="op" id="5250614">:=</span>&nbsp;<span class="ident" id="5250617">d</span><span class="op" id="5250618">.</span><span class="ident" id="5250619">scanWhile</span><span class="op" id="5250628">(</span><span class="ident" id="5250629">scanSkipSpace</span><span class="op" id="5250642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250646">if</span>&nbsp;<span class="ident" id="5250649">op</span>&nbsp;<span class="op" id="5250652">==</span>&nbsp;<span class="ident" id="5250655">scanEndObject</span>&nbsp;<span class="op" id="5250669">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250674">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250728">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250740">if</span>&nbsp;<span class="ident" id="5250743">op</span>&nbsp;<span class="op" id="5250746">!=</span>&nbsp;<span class="ident" id="5250749">scanBeginLiteral</span>&nbsp;<span class="op" id="5250766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250771">d</span><span class="op" id="5250772">.</span><span class="builtintype" id="5250773">error</span><span class="op" id="5250778">(</span><span class="ident" id="5250779">errPhase</span><span class="op" id="5250787">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250796">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250818">start</span>&nbsp;<span class="op" id="5250824">:=</span>&nbsp;<span class="ident" id="5250827">d</span><span class="op" id="5250828">.</span><span class="ident" id="5250829">off</span>&nbsp;<span class="op" id="5250833">-</span>&nbsp;<span class="num" id="5250835">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250839">op</span>&nbsp;<span class="op" id="5250842">=</span>&nbsp;<span class="ident" id="5250844">d</span><span class="op" id="5250845">.</span><span class="ident" id="5250846">scanWhile</span><span class="op" id="5250855">(</span><span class="ident" id="5250856">scanContinue</span><span class="op" id="5250868">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250872">item</span>&nbsp;<span class="op" id="5250877">:=</span>&nbsp;<span class="ident" id="5250880">d</span><span class="op" id="5250881">.</span><span class="ident" id="5250882">data</span><span class="op" id="5250886">[</span><span class="ident" id="5250887">start</span>&nbsp;<span class="op" id="5250893">:</span>&nbsp;<span class="ident" id="5250895">d</span><span class="op" id="5250896">.</span><span class="ident" id="5250897">off</span><span class="op" id="5250900">-</span><span class="num" id="5250901">1</span><span class="op" id="5250902">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250906">key</span><span class="op" id="5250909">,</span>&nbsp;<span class="ident" id="5250911">ok</span>&nbsp;<span class="op" id="5250914">:=</span>&nbsp;<span class="ident" id="5250917">unquote</span><span class="op" id="5250924">(</span><span class="ident" id="5250925">item</span><span class="op" id="5250929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250933">if</span>&nbsp;<span class="op" id="5250936">!</span><span class="ident" id="5250937">ok</span>&nbsp;<span class="op" id="5250940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250945">d</span><span class="op" id="5250946">.</span><span class="builtintype" id="5250947">error</span><span class="op" id="5250952">(</span><span class="ident" id="5250953">errPhase</span><span class="op" id="5250961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250965">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250970">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250996">if</span>&nbsp;<span class="ident" id="5250999">op</span>&nbsp;<span class="op" id="5251002">==</span>&nbsp;<span class="ident" id="5251005">scanSkipSpace</span>&nbsp;<span class="op" id="5251019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251024">op</span>&nbsp;<span class="op" id="5251027">=</span>&nbsp;<span class="ident" id="5251029">d</span><span class="op" id="5251030">.</span><span class="ident" id="5251031">scanWhile</span><span class="op" id="5251040">(</span><span class="ident" id="5251041">scanSkipSpace</span><span class="op" id="5251054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251058">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251062">if</span>&nbsp;<span class="ident" id="5251065">op</span>&nbsp;<span class="op" id="5251068">!=</span>&nbsp;<span class="ident" id="5251071">scanObjectKey</span>&nbsp;<span class="op" id="5251085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251090">d</span><span class="op" id="5251091">.</span><span class="builtintype" id="5251092">error</span><span class="op" id="5251097">(</span><span class="ident" id="5251098">errPhase</span><span class="op" id="5251106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5251115">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251132">m</span><span class="op" id="5251133">[</span><span class="ident" id="5251134">key</span><span class="op" id="5251137">]</span>&nbsp;<span class="op" id="5251139">=</span>&nbsp;<span class="ident" id="5251141">d</span><span class="op" id="5251142">.</span><span class="ident" id="5251143">valueInterface</span><span class="op" id="5251157">(</span><span class="op" id="5251158">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5251163">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251195">op</span>&nbsp;<span class="op" id="5251198">=</span>&nbsp;<span class="ident" id="5251200">d</span><span class="op" id="5251201">.</span><span class="ident" id="5251202">scanWhile</span><span class="op" id="5251211">(</span><span class="ident" id="5251212">scanSkipSpace</span><span class="op" id="5251225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251229">if</span>&nbsp;<span class="ident" id="5251232">op</span>&nbsp;<span class="op" id="5251235">==</span>&nbsp;<span class="ident" id="5251238">scanEndObject</span>&nbsp;<span class="op" id="5251252">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251257">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251269">if</span>&nbsp;<span class="ident" id="5251272">op</span>&nbsp;<span class="op" id="5251275">!=</span>&nbsp;<span class="ident" id="5251278">scanObjectValue</span>&nbsp;<span class="op" id="5251294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251299">d</span><span class="op" id="5251300">.</span><span class="builtintype" id="5251301">error</span><span class="op" id="5251306">(</span><span class="ident" id="5251307">errPhase</span><span class="op" id="5251315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251319">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251325">return</span>&nbsp;<span class="ident" id="5251332">m</span><br>
<span class="lineno"></span><span class="op" id="5251334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5251337">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="5251405">func</span>&nbsp;<span class="op" id="5251410">(</span><span class="ident" id="5251411">d</span>&nbsp;<span class="op" id="5251413">*</span><span class="ident" id="5251414">decodeState</span><span class="op" id="5251425">)</span>&nbsp;<span class="ident" id="5251427">literalInterface</span><span class="op" id="5251443">(</span><span class="op" id="5251444">)</span>&nbsp;<span class="keyword" id="5251446">interface</span><span class="op" id="5251455">{</span><span class="op" id="5251456">}</span>&nbsp;<span class="op" id="5251458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5251461">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251519">start</span>&nbsp;<span class="op" id="5251525">:=</span>&nbsp;<span class="ident" id="5251528">d</span><span class="op" id="5251529">.</span><span class="ident" id="5251530">off</span>&nbsp;<span class="op" id="5251534">-</span>&nbsp;<span class="num" id="5251536">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251539">op</span>&nbsp;<span class="op" id="5251542">:=</span>&nbsp;<span class="ident" id="5251545">d</span><span class="op" id="5251546">.</span><span class="ident" id="5251547">scanWhile</span><span class="op" id="5251556">(</span><span class="ident" id="5251557">scanContinue</span><span class="op" id="5251569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5251573">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251614">d</span><span class="op" id="5251615">.</span><span class="ident" id="5251616">off</span><span class="op" id="5251619">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251623">d</span><span class="op" id="5251624">.</span><span class="ident" id="5251625">scan</span><span class="op" id="5251629">.</span><span class="ident" id="5251630">undo</span><span class="op" id="5251634">(</span><span class="ident" id="5251635">op</span><span class="op" id="5251637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251640">item</span>&nbsp;<span class="op" id="5251645">:=</span>&nbsp;<span class="ident" id="5251648">d</span><span class="op" id="5251649">.</span><span class="ident" id="5251650">data</span><span class="op" id="5251654">[</span><span class="ident" id="5251655">start</span><span class="op" id="5251660">:</span><span class="ident" id="5251661">d</span><span class="op" id="5251662">.</span><span class="ident" id="5251663">off</span><span class="op" id="5251666">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251670">switch</span>&nbsp;<span class="ident" id="5251677">c</span>&nbsp;<span class="op" id="5251679">:=</span>&nbsp;<span class="ident" id="5251682">item</span><span class="op" id="5251686">[</span><span class="num" id="5251687">0</span><span class="op" id="5251688">]</span><span class="op" id="5251689">;</span>&nbsp;<span class="ident" id="5251691">c</span>&nbsp;<span class="op" id="5251693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251696">case</span>&nbsp;<span class="string" id="5251701">&#39;n&#39;</span><span class="op" id="5251704">:</span>&nbsp;<span class="comment" id="5251706">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251716">return</span>&nbsp;<span class="ident" id="5251723">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251729">case</span>&nbsp;<span class="string" id="5251734">&#39;t&#39;</span><span class="op" id="5251737">,</span>&nbsp;<span class="string" id="5251739">&#39;f&#39;</span><span class="op" id="5251742">:</span>&nbsp;<span class="comment" id="5251744">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251761">return</span>&nbsp;<span class="ident" id="5251768">c</span>&nbsp;<span class="op" id="5251770">==</span>&nbsp;<span class="string" id="5251773">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251779">case</span>&nbsp;<span class="string" id="5251784">&#39;&#34;&#39;</span><span class="op" id="5251787">:</span>&nbsp;<span class="comment" id="5251789">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251801">s</span><span class="op" id="5251802">,</span>&nbsp;<span class="ident" id="5251804">ok</span>&nbsp;<span class="op" id="5251807">:=</span>&nbsp;<span class="ident" id="5251810">unquote</span><span class="op" id="5251817">(</span><span class="ident" id="5251818">item</span><span class="op" id="5251822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251826">if</span>&nbsp;<span class="op" id="5251829">!</span><span class="ident" id="5251830">ok</span>&nbsp;<span class="op" id="5251833">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251838">d</span><span class="op" id="5251839">.</span><span class="builtintype" id="5251840">error</span><span class="op" id="5251845">(</span><span class="ident" id="5251846">errPhase</span><span class="op" id="5251854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251862">return</span>&nbsp;<span class="ident" id="5251869">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251873">default</span><span class="op" id="5251880">:</span>&nbsp;<span class="comment" id="5251882">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251894">if</span>&nbsp;<span class="ident" id="5251897">c</span>&nbsp;<span class="op" id="5251899">!=</span>&nbsp;<span class="string" id="5251902">&#39;-&#39;</span>&nbsp;<span class="op" id="5251906">&amp;&amp;</span>&nbsp;<span class="op" id="5251909">(</span><span class="ident" id="5251910">c</span>&nbsp;<span class="op" id="5251912">&lt;</span>&nbsp;<span class="string" id="5251914">&#39;0&#39;</span>&nbsp;<span class="op" id="5251918">||</span>&nbsp;<span class="ident" id="5251921">c</span>&nbsp;<span class="op" id="5251923">&gt;</span>&nbsp;<span class="string" id="5251925">&#39;9&#39;</span><span class="op" id="5251928">)</span>&nbsp;<span class="op" id="5251930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251935">d</span><span class="op" id="5251936">.</span><span class="builtintype" id="5251937">error</span><span class="op" id="5251942">(</span><span class="ident" id="5251943">errPhase</span><span class="op" id="5251951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251959">n</span><span class="op" id="5251960">,</span>&nbsp;<span class="ident" id="5251962">err</span>&nbsp;<span class="op" id="5251966">:=</span>&nbsp;<span class="ident" id="5251969">d</span><span class="op" id="5251970">.</span><span class="ident" id="5251971">convertNumber</span><span class="op" id="5251984">(</span><span class="builtintype" id="5251985">string</span><span class="op" id="5251991">(</span><span class="ident" id="5251992">item</span><span class="op" id="5251996">)</span><span class="op" id="5251997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252001">if</span>&nbsp;<span class="ident" id="5252004">err</span>&nbsp;<span class="op" id="5252008">!=</span>&nbsp;<span class="ident" id="5252011">nil</span>&nbsp;<span class="op" id="5252015">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252020">d</span><span class="op" id="5252021">.</span><span class="ident" id="5252022">saveError</span><span class="op" id="5252031">(</span><span class="ident" id="5252032">err</span><span class="op" id="5252035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252043">return</span>&nbsp;<span class="ident" id="5252050">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252053">}</span><br>
<span class="lineno"></span><span class="op" id="5252055">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="5252058">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5252132">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="5252153">func</span>&nbsp;<span class="ident" id="5252158">getu4</span><span class="op" id="5252163">(</span><span class="ident" id="5252164">s</span>&nbsp;<span class="op" id="5252166">[</span><span class="op" id="5252167">]</span><span class="builtintype" id="5252168">byte</span><span class="op" id="5252172">)</span>&nbsp;<span class="builtintype" id="5252174">rune</span>&nbsp;<span class="op" id="5252179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252182">if</span>&nbsp;<span class="builtinfunc" id="5252185">len</span><span class="op" id="5252188">(</span><span class="ident" id="5252189">s</span><span class="op" id="5252190">)</span>&nbsp;<span class="op" id="5252192">&lt;</span>&nbsp;<span class="num" id="5252194">6</span>&nbsp;<span class="op" id="5252196">||</span>&nbsp;<span class="ident" id="5252199">s</span><span class="op" id="5252200">[</span><span class="num" id="5252201">0</span><span class="op" id="5252202">]</span>&nbsp;<span class="op" id="5252204">!=</span>&nbsp;<span class="string" id="5252207">&#39;\\&#39;</span>&nbsp;<span class="op" id="5252212">||</span>&nbsp;<span class="ident" id="5252215">s</span><span class="op" id="5252216">[</span><span class="num" id="5252217">1</span><span class="op" id="5252218">]</span>&nbsp;<span class="op" id="5252220">!=</span>&nbsp;<span class="string" id="5252223">&#39;u&#39;</span>&nbsp;<span class="op" id="5252227">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252231">return</span>&nbsp;<span class="op" id="5252238">-</span><span class="num" id="5252239">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252245">r</span><span class="op" id="5252246">,</span>&nbsp;<span class="ident" id="5252248">err</span>&nbsp;<span class="op" id="5252252">:=</span>&nbsp;<span class="ident" id="5252255">strconv</span><span class="op" id="5252262">.</span><span class="ident" id="5252263">ParseUint</span><span class="op" id="5252272">(</span><span class="builtintype" id="5252273">string</span><span class="op" id="5252279">(</span><span class="ident" id="5252280">s</span><span class="op" id="5252281">[</span><span class="num" id="5252282">2</span><span class="op" id="5252283">:</span><span class="num" id="5252284">6</span><span class="op" id="5252285">]</span><span class="op" id="5252286">)</span><span class="op" id="5252287">,</span>&nbsp;<span class="num" id="5252289">16</span><span class="op" id="5252291">,</span>&nbsp;<span class="num" id="5252293">64</span><span class="op" id="5252295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252298">if</span>&nbsp;<span class="ident" id="5252301">err</span>&nbsp;<span class="op" id="5252305">!=</span>&nbsp;<span class="ident" id="5252308">nil</span>&nbsp;<span class="op" id="5252312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252316">return</span>&nbsp;<span class="op" id="5252323">-</span><span class="num" id="5252324">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252330">return</span>&nbsp;<span class="builtintype" id="5252337">rune</span><span class="op" id="5252341">(</span><span class="ident" id="5252342">r</span><span class="op" id="5252343">)</span><br>
<span class="lineno"></span><span class="op" id="5252345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5252348">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="5252424">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="5252495">func</span>&nbsp;<span class="ident" id="5252500">unquote</span><span class="op" id="5252507">(</span><span class="ident" id="5252508">s</span>&nbsp;<span class="op" id="5252510">[</span><span class="op" id="5252511">]</span><span class="builtintype" id="5252512">byte</span><span class="op" id="5252516">)</span>&nbsp;<span class="op" id="5252518">(</span><span class="ident" id="5252519">t</span>&nbsp;<span class="builtintype" id="5252521">string</span><span class="op" id="5252527">,</span>&nbsp;<span class="ident" id="5252529">ok</span>&nbsp;<span class="builtintype" id="5252532">bool</span><span class="op" id="5252536">)</span>&nbsp;<span class="op" id="5252538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252541">s</span><span class="op" id="5252542">,</span>&nbsp;<span class="ident" id="5252544">ok</span>&nbsp;<span class="op" id="5252547">=</span>&nbsp;<span class="ident" id="5252549">unquoteBytes</span><span class="op" id="5252561">(</span><span class="ident" id="5252562">s</span><span class="op" id="5252563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252566">t</span>&nbsp;<span class="op" id="5252568">=</span>&nbsp;<span class="builtintype" id="5252570">string</span><span class="op" id="5252576">(</span><span class="ident" id="5252577">s</span><span class="op" id="5252578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252581">return</span><br>
<span class="lineno">970</span><span class="op" id="5252588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5252591">func</span>&nbsp;<span class="ident" id="5252596">unquoteBytes</span><span class="op" id="5252608">(</span><span class="ident" id="5252609">s</span>&nbsp;<span class="op" id="5252611">[</span><span class="op" id="5252612">]</span><span class="builtintype" id="5252613">byte</span><span class="op" id="5252617">)</span>&nbsp;<span class="op" id="5252619">(</span><span class="ident" id="5252620">t</span>&nbsp;<span class="op" id="5252622">[</span><span class="op" id="5252623">]</span><span class="builtintype" id="5252624">byte</span><span class="op" id="5252628">,</span>&nbsp;<span class="ident" id="5252630">ok</span>&nbsp;<span class="builtintype" id="5252633">bool</span><span class="op" id="5252637">)</span>&nbsp;<span class="op" id="5252639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252642">if</span>&nbsp;<span class="builtinfunc" id="5252645">len</span><span class="op" id="5252648">(</span><span class="ident" id="5252649">s</span><span class="op" id="5252650">)</span>&nbsp;<span class="op" id="5252652">&lt;</span>&nbsp;<span class="num" id="5252654">2</span>&nbsp;<span class="op" id="5252656">||</span>&nbsp;<span class="ident" id="5252659">s</span><span class="op" id="5252660">[</span><span class="num" id="5252661">0</span><span class="op" id="5252662">]</span>&nbsp;<span class="op" id="5252664">!=</span>&nbsp;<span class="string" id="5252667">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5252671">||</span>&nbsp;<span class="ident" id="5252674">s</span><span class="op" id="5252675">[</span><span class="builtinfunc" id="5252676">len</span><span class="op" id="5252679">(</span><span class="ident" id="5252680">s</span><span class="op" id="5252681">)</span><span class="op" id="5252682">-</span><span class="num" id="5252683">1</span><span class="op" id="5252684">]</span>&nbsp;<span class="op" id="5252686">!=</span>&nbsp;<span class="string" id="5252689">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5252693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252697">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252708">s</span>&nbsp;<span class="op" id="5252710">=</span>&nbsp;<span class="ident" id="5252712">s</span><span class="op" id="5252713">[</span><span class="num" id="5252714">1</span>&nbsp;<span class="op" id="5252716">:</span>&nbsp;<span class="builtinfunc" id="5252718">len</span><span class="op" id="5252721">(</span><span class="ident" id="5252722">s</span><span class="op" id="5252723">)</span><span class="op" id="5252724">-</span><span class="num" id="5252725">1</span><span class="op" id="5252726">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252730">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252783">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252841">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252861">r</span>&nbsp;<span class="op" id="5252863">:=</span>&nbsp;<span class="num" id="5252866">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252869">for</span>&nbsp;<span class="ident" id="5252873">r</span>&nbsp;<span class="op" id="5252875">&lt;</span>&nbsp;<span class="builtinfunc" id="5252877">len</span><span class="op" id="5252880">(</span><span class="ident" id="5252881">s</span><span class="op" id="5252882">)</span>&nbsp;<span class="op" id="5252884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252888">c</span>&nbsp;<span class="op" id="5252890">:=</span>&nbsp;<span class="ident" id="5252893">s</span><span class="op" id="5252894">[</span><span class="ident" id="5252895">r</span><span class="op" id="5252896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252900">if</span>&nbsp;<span class="ident" id="5252903">c</span>&nbsp;<span class="op" id="5252905">==</span>&nbsp;<span class="string" id="5252908">&#39;\\&#39;</span>&nbsp;<span class="op" id="5252913">||</span>&nbsp;<span class="ident" id="5252916">c</span>&nbsp;<span class="op" id="5252918">==</span>&nbsp;<span class="string" id="5252921">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5252925">||</span>&nbsp;<span class="ident" id="5252928">c</span>&nbsp;<span class="op" id="5252930">&lt;</span>&nbsp;<span class="string" id="5252932">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5252936">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252941">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252953">if</span>&nbsp;<span class="ident" id="5252956">c</span>&nbsp;<span class="op" id="5252958">&lt;</span>&nbsp;<span class="ident" id="5252960">utf8</span><span class="op" id="5252964">.</span><span class="ident" id="5252965">RuneSelf</span>&nbsp;<span class="op" id="5252974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5252979">r</span><span class="op" id="5252980">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252986">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253001">rr</span><span class="op" id="5253003">,</span>&nbsp;<span class="ident" id="5253005">size</span>&nbsp;<span class="op" id="5253010">:=</span>&nbsp;<span class="ident" id="5253013">utf8</span><span class="op" id="5253017">.</span><span class="ident" id="5253018">DecodeRune</span><span class="op" id="5253028">(</span><span class="ident" id="5253029">s</span><span class="op" id="5253030">[</span><span class="ident" id="5253031">r</span><span class="op" id="5253032">:</span><span class="op" id="5253033">]</span><span class="op" id="5253034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253038">if</span>&nbsp;<span class="ident" id="5253041">rr</span>&nbsp;<span class="op" id="5253044">==</span>&nbsp;<span class="ident" id="5253047">utf8</span><span class="op" id="5253051">.</span><span class="ident" id="5253052">RuneError</span>&nbsp;<span class="op" id="5253062">&amp;&amp;</span>&nbsp;<span class="ident" id="5253065">size</span>&nbsp;<span class="op" id="5253070">==</span>&nbsp;<span class="num" id="5253073">1</span>&nbsp;<span class="op" id="5253075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253080">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253088">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253092">r</span>&nbsp;<span class="op" id="5253094">+=</span>&nbsp;<span class="ident" id="5253097">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253106">if</span>&nbsp;<span class="ident" id="5253109">r</span>&nbsp;<span class="op" id="5253111">==</span>&nbsp;<span class="builtinfunc" id="5253114">len</span><span class="op" id="5253117">(</span><span class="ident" id="5253118">s</span><span class="op" id="5253119">)</span>&nbsp;<span class="op" id="5253121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253125">return</span>&nbsp;<span class="ident" id="5253132">s</span><span class="op" id="5253133">,</span>&nbsp;<span class="builtintype" id="5253135">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253141">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253145">b</span>&nbsp;<span class="op" id="5253147">:=</span>&nbsp;<span class="builtinfunc" id="5253150">make</span><span class="op" id="5253154">(</span><span class="op" id="5253155">[</span><span class="op" id="5253156">]</span><span class="builtintype" id="5253157">byte</span><span class="op" id="5253161">,</span>&nbsp;<span class="builtinfunc" id="5253163">len</span><span class="op" id="5253166">(</span><span class="ident" id="5253167">s</span><span class="op" id="5253168">)</span><span class="op" id="5253169">+</span><span class="num" id="5253170">2</span><span class="op" id="5253171">*</span><span class="ident" id="5253172">utf8</span><span class="op" id="5253176">.</span><span class="ident" id="5253177">UTFMax</span><span class="op" id="5253183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253186">w</span>&nbsp;<span class="op" id="5253188">:=</span>&nbsp;<span class="builtinfunc" id="5253191">copy</span><span class="op" id="5253195">(</span><span class="ident" id="5253196">b</span><span class="op" id="5253197">,</span>&nbsp;<span class="ident" id="5253199">s</span><span class="op" id="5253200">[</span><span class="num" id="5253201">0</span><span class="op" id="5253202">:</span><span class="ident" id="5253203">r</span><span class="op" id="5253204">]</span><span class="op" id="5253205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253208">for</span>&nbsp;<span class="ident" id="5253212">r</span>&nbsp;<span class="op" id="5253214">&lt;</span>&nbsp;<span class="builtinfunc" id="5253216">len</span><span class="op" id="5253219">(</span><span class="ident" id="5253220">s</span><span class="op" id="5253221">)</span>&nbsp;<span class="op" id="5253223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253227">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253278">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253324">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253350">if</span>&nbsp;<span class="ident" id="5253353">w</span>&nbsp;<span class="op" id="5253355">&gt;=</span>&nbsp;<span class="builtinfunc" id="5253358">len</span><span class="op" id="5253361">(</span><span class="ident" id="5253362">b</span><span class="op" id="5253363">)</span><span class="op" id="5253364">-</span><span class="num" id="5253365">2</span><span class="op" id="5253366">*</span><span class="ident" id="5253367">utf8</span><span class="op" id="5253371">.</span><span class="ident" id="5253372">UTFMax</span>&nbsp;<span class="op" id="5253379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253384">nb</span>&nbsp;<span class="op" id="5253387">:=</span>&nbsp;<span class="builtinfunc" id="5253390">make</span><span class="op" id="5253394">(</span><span class="op" id="5253395">[</span><span class="op" id="5253396">]</span><span class="builtintype" id="5253397">byte</span><span class="op" id="5253401">,</span>&nbsp;<span class="op" id="5253403">(</span><span class="builtinfunc" id="5253404">len</span><span class="op" id="5253407">(</span><span class="ident" id="5253408">b</span><span class="op" id="5253409">)</span><span class="op" id="5253410">+</span><span class="ident" id="5253411">utf8</span><span class="op" id="5253415">.</span><span class="ident" id="5253416">UTFMax</span><span class="op" id="5253422">)</span><span class="op" id="5253423">*</span><span class="num" id="5253424">2</span><span class="op" id="5253425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5253430">copy</span><span class="op" id="5253434">(</span><span class="ident" id="5253435">nb</span><span class="op" id="5253437">,</span>&nbsp;<span class="ident" id="5253439">b</span><span class="op" id="5253440">[</span><span class="num" id="5253441">0</span><span class="op" id="5253442">:</span><span class="ident" id="5253443">w</span><span class="op" id="5253444">]</span><span class="op" id="5253445">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253450">b</span>&nbsp;<span class="op" id="5253452">=</span>&nbsp;<span class="ident" id="5253454">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253463">switch</span>&nbsp;<span class="ident" id="5253470">c</span>&nbsp;<span class="op" id="5253472">:=</span>&nbsp;<span class="ident" id="5253475">s</span><span class="op" id="5253476">[</span><span class="ident" id="5253477">r</span><span class="op" id="5253478">]</span><span class="op" id="5253479">;</span>&nbsp;<span class="op" id="5253481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253485">case</span>&nbsp;<span class="ident" id="5253490">c</span>&nbsp;<span class="op" id="5253492">==</span>&nbsp;<span class="string" id="5253495">&#39;\\&#39;</span><span class="op" id="5253499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253504">r</span><span class="op" id="5253505">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253511">if</span>&nbsp;<span class="ident" id="5253514">r</span>&nbsp;<span class="op" id="5253516">&gt;=</span>&nbsp;<span class="builtinfunc" id="5253519">len</span><span class="op" id="5253522">(</span><span class="ident" id="5253523">s</span><span class="op" id="5253524">)</span>&nbsp;<span class="op" id="5253526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253532">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253547">switch</span>&nbsp;<span class="ident" id="5253554">s</span><span class="op" id="5253555">[</span><span class="ident" id="5253556">r</span><span class="op" id="5253557">]</span>&nbsp;<span class="op" id="5253559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253564">default</span><span class="op" id="5253571">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253577">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253587">case</span>&nbsp;<span class="string" id="5253592">&#39;&#34;&#39;</span><span class="op" id="5253595">,</span>&nbsp;<span class="string" id="5253597">&#39;\\&#39;</span><span class="op" id="5253601">,</span>&nbsp;<span class="string" id="5253603">&#39;/&#39;</span><span class="op" id="5253606">,</span>&nbsp;<span class="string" id="5253608">&#39;\&#39;&#39;</span><span class="op" id="5253612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253618">b</span><span class="op" id="5253619">[</span><span class="ident" id="5253620">w</span><span class="op" id="5253621">]</span>&nbsp;<span class="op" id="5253623">=</span>&nbsp;<span class="ident" id="5253625">s</span><span class="op" id="5253626">[</span><span class="ident" id="5253627">r</span><span class="op" id="5253628">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253634">r</span><span class="op" id="5253635">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253642">w</span><span class="op" id="5253643">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253649">case</span>&nbsp;<span class="string" id="5253654">&#39;b&#39;</span><span class="op" id="5253657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253663">b</span><span class="op" id="5253664">[</span><span class="ident" id="5253665">w</span><span class="op" id="5253666">]</span>&nbsp;<span class="op" id="5253668">=</span>&nbsp;<span class="string" id="5253670">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253679">r</span><span class="op" id="5253680">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253687">w</span><span class="op" id="5253688">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253694">case</span>&nbsp;<span class="string" id="5253699">&#39;f&#39;</span><span class="op" id="5253702">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253708">b</span><span class="op" id="5253709">[</span><span class="ident" id="5253710">w</span><span class="op" id="5253711">]</span>&nbsp;<span class="op" id="5253713">=</span>&nbsp;<span class="string" id="5253715">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253724">r</span><span class="op" id="5253725">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253732">w</span><span class="op" id="5253733">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253739">case</span>&nbsp;<span class="string" id="5253744">&#39;n&#39;</span><span class="op" id="5253747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253753">b</span><span class="op" id="5253754">[</span><span class="ident" id="5253755">w</span><span class="op" id="5253756">]</span>&nbsp;<span class="op" id="5253758">=</span>&nbsp;<span class="string" id="5253760">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253769">r</span><span class="op" id="5253770">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253777">w</span><span class="op" id="5253778">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253784">case</span>&nbsp;<span class="string" id="5253789">&#39;r&#39;</span><span class="op" id="5253792">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253798">b</span><span class="op" id="5253799">[</span><span class="ident" id="5253800">w</span><span class="op" id="5253801">]</span>&nbsp;<span class="op" id="5253803">=</span>&nbsp;<span class="string" id="5253805">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253814">r</span><span class="op" id="5253815">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253822">w</span><span class="op" id="5253823">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253829">case</span>&nbsp;<span class="string" id="5253834">&#39;t&#39;</span><span class="op" id="5253837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253843">b</span><span class="op" id="5253844">[</span><span class="ident" id="5253845">w</span><span class="op" id="5253846">]</span>&nbsp;<span class="op" id="5253848">=</span>&nbsp;<span class="string" id="5253850">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253859">r</span><span class="op" id="5253860">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253867">w</span><span class="op" id="5253868">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253874">case</span>&nbsp;<span class="string" id="5253879">&#39;u&#39;</span><span class="op" id="5253882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253888">r</span><span class="op" id="5253889">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253896">rr</span>&nbsp;<span class="op" id="5253899">:=</span>&nbsp;<span class="ident" id="5253902">getu4</span><span class="op" id="5253907">(</span><span class="ident" id="5253908">s</span><span class="op" id="5253909">[</span><span class="ident" id="5253910">r</span><span class="op" id="5253911">:</span><span class="op" id="5253912">]</span><span class="op" id="5253913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253919">if</span>&nbsp;<span class="ident" id="5253922">rr</span>&nbsp;<span class="op" id="5253925">&lt;</span>&nbsp;<span class="num" id="5253927">0</span>&nbsp;<span class="op" id="5253929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253936">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253953">r</span>&nbsp;<span class="op" id="5253955">+=</span>&nbsp;<span class="num" id="5253958">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253964">if</span>&nbsp;<span class="ident" id="5253967">utf16</span><span class="op" id="5253972">.</span><span class="ident" id="5253973">IsSurrogate</span><span class="op" id="5253984">(</span><span class="ident" id="5253985">rr</span><span class="op" id="5253987">)</span>&nbsp;<span class="op" id="5253989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253996">rr1</span>&nbsp;<span class="op" id="5254000">:=</span>&nbsp;<span class="ident" id="5254003">getu4</span><span class="op" id="5254008">(</span><span class="ident" id="5254009">s</span><span class="op" id="5254010">[</span><span class="ident" id="5254011">r</span><span class="op" id="5254012">:</span><span class="op" id="5254013">]</span><span class="op" id="5254014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254021">if</span>&nbsp;<span class="ident" id="5254024">dec</span>&nbsp;<span class="op" id="5254028">:=</span>&nbsp;<span class="ident" id="5254031">utf16</span><span class="op" id="5254036">.</span><span class="ident" id="5254037">DecodeRune</span><span class="op" id="5254047">(</span><span class="ident" id="5254048">rr</span><span class="op" id="5254050">,</span>&nbsp;<span class="ident" id="5254052">rr1</span><span class="op" id="5254055">)</span><span class="op" id="5254056">;</span>&nbsp;<span class="ident" id="5254058">dec</span>&nbsp;<span class="op" id="5254062">!=</span>&nbsp;<span class="ident" id="5254065">unicode</span><span class="op" id="5254072">.</span><span class="ident" id="5254073">ReplacementChar</span>&nbsp;<span class="op" id="5254089">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254097">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254129">r</span>&nbsp;<span class="op" id="5254131">+=</span>&nbsp;<span class="num" id="5254134">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254142">w</span>&nbsp;<span class="op" id="5254144">+=</span>&nbsp;<span class="ident" id="5254147">utf8</span><span class="op" id="5254151">.</span><span class="ident" id="5254152">EncodeRune</span><span class="op" id="5254162">(</span><span class="ident" id="5254163">b</span><span class="op" id="5254164">[</span><span class="ident" id="5254165">w</span><span class="op" id="5254166">:</span><span class="op" id="5254167">]</span><span class="op" id="5254168">,</span>&nbsp;<span class="ident" id="5254170">dec</span><span class="op" id="5254173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254181">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254192">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254199">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254257">rr</span>&nbsp;<span class="op" id="5254260">=</span>&nbsp;<span class="ident" id="5254262">unicode</span><span class="op" id="5254269">.</span><span class="ident" id="5254270">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254296">w</span>&nbsp;<span class="op" id="5254298">+=</span>&nbsp;<span class="ident" id="5254301">utf8</span><span class="op" id="5254305">.</span><span class="ident" id="5254306">EncodeRune</span><span class="op" id="5254316">(</span><span class="ident" id="5254317">b</span><span class="op" id="5254318">[</span><span class="ident" id="5254319">w</span><span class="op" id="5254320">:</span><span class="op" id="5254321">]</span><span class="op" id="5254322">,</span>&nbsp;<span class="ident" id="5254324">rr</span><span class="op" id="5254326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254331">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254336">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254380">case</span>&nbsp;<span class="ident" id="5254385">c</span>&nbsp;<span class="op" id="5254387">==</span>&nbsp;<span class="string" id="5254390">&#39;&#34;&#39;</span><span class="op" id="5254393">,</span>&nbsp;<span class="ident" id="5254395">c</span>&nbsp;<span class="op" id="5254397">&lt;</span>&nbsp;<span class="string" id="5254399">&#39;&nbsp;&#39;</span><span class="op" id="5254402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254407">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254417">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254428">case</span>&nbsp;<span class="ident" id="5254433">c</span>&nbsp;<span class="op" id="5254435">&lt;</span>&nbsp;<span class="ident" id="5254437">utf8</span><span class="op" id="5254441">.</span><span class="ident" id="5254442">RuneSelf</span><span class="op" id="5254450">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254455">b</span><span class="op" id="5254456">[</span><span class="ident" id="5254457">w</span><span class="op" id="5254458">]</span>&nbsp;<span class="op" id="5254460">=</span>&nbsp;<span class="ident" id="5254462">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254467">r</span><span class="op" id="5254468">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254474">w</span><span class="op" id="5254475">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254481">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254515">default</span><span class="op" id="5254522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254527">rr</span><span class="op" id="5254529">,</span>&nbsp;<span class="ident" id="5254531">size</span>&nbsp;<span class="op" id="5254536">:=</span>&nbsp;<span class="ident" id="5254539">utf8</span><span class="op" id="5254543">.</span><span class="ident" id="5254544">DecodeRune</span><span class="op" id="5254554">(</span><span class="ident" id="5254555">s</span><span class="op" id="5254556">[</span><span class="ident" id="5254557">r</span><span class="op" id="5254558">:</span><span class="op" id="5254559">]</span><span class="op" id="5254560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254565">r</span>&nbsp;<span class="op" id="5254567">+=</span>&nbsp;<span class="ident" id="5254570">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254578">w</span>&nbsp;<span class="op" id="5254580">+=</span>&nbsp;<span class="ident" id="5254583">utf8</span><span class="op" id="5254587">.</span><span class="ident" id="5254588">EncodeRune</span><span class="op" id="5254598">(</span><span class="ident" id="5254599">b</span><span class="op" id="5254600">[</span><span class="ident" id="5254601">w</span><span class="op" id="5254602">:</span><span class="op" id="5254603">]</span><span class="op" id="5254604">,</span>&nbsp;<span class="ident" id="5254606">rr</span><span class="op" id="5254608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254618">return</span>&nbsp;<span class="ident" id="5254625">b</span><span class="op" id="5254626">[</span><span class="num" id="5254627">0</span><span class="op" id="5254628">:</span><span class="ident" id="5254629">w</span><span class="op" id="5254630">]</span><span class="op" id="5254631">,</span>&nbsp;<span class="builtintype" id="5254633">true</span><br>
<span class="lineno"></span><span class="op" id="5254638">}</span>
</div>
</body>
</html>
