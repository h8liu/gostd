<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3376802">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3376858">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3376912">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3376963">package</span>&nbsp;<span class="ident" id="3376971">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3376976">//&nbsp;IPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;an&nbsp;IP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="3377029">type</span>&nbsp;<span class="ident" id="3377034">IPAddr</span>&nbsp;<span class="keyword" id="3377041">struct</span>&nbsp;<span class="op" id="3377048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377051">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3377056">IP</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377060">Zone</span>&nbsp;<span class="builtintype" id="3377065">string</span>&nbsp;<span class="comment" id="3377072">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="3377103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3377106">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;ip&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3377159">func</span>&nbsp;<span class="op" id="3377164">(</span><span class="ident" id="3377165">a</span>&nbsp;<span class="op" id="3377167">*</span><span class="ident" id="3377168">IPAddr</span><span class="op" id="3377174">)</span>&nbsp;<span class="ident" id="3377176">Network</span><span class="op" id="3377183">(</span><span class="op" id="3377184">)</span>&nbsp;<span class="builtintype" id="3377186">string</span>&nbsp;<span class="op" id="3377193">{</span>&nbsp;<span class="keyword" id="3377195">return</span>&nbsp;<span class="string" id="3377202">&#34;ip&#34;</span>&nbsp;<span class="op" id="3377207">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3377210">func</span>&nbsp;<span class="op" id="3377215">(</span><span class="ident" id="3377216">a</span>&nbsp;<span class="op" id="3377218">*</span><span class="ident" id="3377219">IPAddr</span><span class="op" id="3377225">)</span>&nbsp;<span class="ident" id="3377227">String</span><span class="op" id="3377233">(</span><span class="op" id="3377234">)</span>&nbsp;<span class="builtintype" id="3377236">string</span>&nbsp;<span class="op" id="3377243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377246">if</span>&nbsp;<span class="ident" id="3377249">a</span>&nbsp;<span class="op" id="3377251">==</span>&nbsp;<span class="ident" id="3377254">nil</span>&nbsp;<span class="op" id="3377258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377262">return</span>&nbsp;<span class="string" id="3377269">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377278">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377281">if</span>&nbsp;<span class="ident" id="3377284">a</span><span class="op" id="3377285">.</span><span class="ident" id="3377286">Zone</span>&nbsp;<span class="op" id="3377291">!=</span>&nbsp;<span class="string" id="3377294">&#34;&#34;</span>&nbsp;<span class="op" id="3377297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377301">return</span>&nbsp;<span class="ident" id="3377308">a</span><span class="op" id="3377309">.</span><span class="ident" id="3377310">IP</span><span class="op" id="3377312">.</span><span class="ident" id="3377313">String</span><span class="op" id="3377319">(</span><span class="op" id="3377320">)</span>&nbsp;<span class="op" id="3377322">+</span>&nbsp;<span class="string" id="3377324">&#34;%&#34;</span>&nbsp;<span class="op" id="3377328">+</span>&nbsp;<span class="ident" id="3377330">a</span><span class="op" id="3377331">.</span><span class="ident" id="3377332">Zone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377341">return</span>&nbsp;<span class="ident" id="3377348">a</span><span class="op" id="3377349">.</span><span class="ident" id="3377350">IP</span><span class="op" id="3377352">.</span><span class="ident" id="3377353">String</span><span class="op" id="3377359">(</span><span class="op" id="3377360">)</span><br>
<span class="lineno"></span><span class="op" id="3377362">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3377365">func</span>&nbsp;<span class="op" id="3377370">(</span><span class="ident" id="3377371">a</span>&nbsp;<span class="op" id="3377373">*</span><span class="ident" id="3377374">IPAddr</span><span class="op" id="3377380">)</span>&nbsp;<span class="ident" id="3377382">toAddr</span><span class="op" id="3377388">(</span><span class="op" id="3377389">)</span>&nbsp;<span class="ident" id="3377391">Addr</span>&nbsp;<span class="op" id="3377396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377399">if</span>&nbsp;<span class="ident" id="3377402">a</span>&nbsp;<span class="op" id="3377404">==</span>&nbsp;<span class="ident" id="3377407">nil</span>&nbsp;<span class="op" id="3377411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377415">return</span>&nbsp;<span class="ident" id="3377422">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377427">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377430">return</span>&nbsp;<span class="ident" id="3377437">a</span><br>
<span class="lineno"></span><span class="op" id="3377439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3377442">//&nbsp;ResolveIPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;an&nbsp;IP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3377510">//&nbsp;&#34;ipv6-host%zone&#34;&nbsp;and&nbsp;resolves&nbsp;the&nbsp;domain&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno">35</span><span class="comment" id="3377579">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;&nbsp;or&nbsp;&#34;ip6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3377618">func</span>&nbsp;<span class="ident" id="3377623">ResolveIPAddr</span><span class="op" id="3377636">(</span><span class="ident" id="3377637">net</span><span class="op" id="3377640">,</span>&nbsp;<span class="ident" id="3377642">addr</span>&nbsp;<span class="builtintype" id="3377647">string</span><span class="op" id="3377653">)</span>&nbsp;<span class="op" id="3377655">(</span><span class="op" id="3377656">*</span><span class="ident" id="3377657">IPAddr</span><span class="op" id="3377663">,</span>&nbsp;<span class="builtintype" id="3377665">error</span><span class="op" id="3377670">)</span>&nbsp;<span class="op" id="3377672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377675">if</span>&nbsp;<span class="ident" id="3377678">net</span>&nbsp;<span class="op" id="3377682">==</span>&nbsp;<span class="string" id="3377685">&#34;&#34;</span>&nbsp;<span class="op" id="3377688">{</span>&nbsp;<span class="comment" id="3377690">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377744">net</span>&nbsp;<span class="op" id="3377748">=</span>&nbsp;<span class="string" id="3377750">&#34;ip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377756">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377759">afnet</span><span class="op" id="3377764">,</span>&nbsp;<span class="ident" id="3377766">_</span><span class="op" id="3377767">,</span>&nbsp;<span class="ident" id="3377769">err</span>&nbsp;<span class="op" id="3377773">:=</span>&nbsp;<span class="ident" id="3377776">parseNetwork</span><span class="op" id="3377788">(</span><span class="ident" id="3377789">net</span><span class="op" id="3377792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377795">if</span>&nbsp;<span class="ident" id="3377798">err</span>&nbsp;<span class="op" id="3377802">!=</span>&nbsp;<span class="ident" id="3377805">nil</span>&nbsp;<span class="op" id="3377809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377813">return</span>&nbsp;<span class="ident" id="3377820">nil</span><span class="op" id="3377823">,</span>&nbsp;<span class="ident" id="3377825">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377833">switch</span>&nbsp;<span class="ident" id="3377840">afnet</span>&nbsp;<span class="op" id="3377846">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377849">case</span>&nbsp;<span class="string" id="3377854">&#34;ip&#34;</span><span class="op" id="3377858">,</span>&nbsp;<span class="string" id="3377860">&#34;ip4&#34;</span><span class="op" id="3377865">,</span>&nbsp;<span class="string" id="3377867">&#34;ip6&#34;</span><span class="op" id="3377872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377875">default</span><span class="op" id="3377882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377886">return</span>&nbsp;<span class="ident" id="3377893">nil</span><span class="op" id="3377896">,</span>&nbsp;<span class="ident" id="3377898">UnknownNetworkError</span><span class="op" id="3377917">(</span><span class="ident" id="3377918">net</span><span class="op" id="3377921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377927">a</span><span class="op" id="3377928">,</span>&nbsp;<span class="ident" id="3377930">err</span>&nbsp;<span class="op" id="3377934">:=</span>&nbsp;<span class="ident" id="3377937">resolveInternetAddr</span><span class="op" id="3377956">(</span><span class="ident" id="3377957">afnet</span><span class="op" id="3377962">,</span>&nbsp;<span class="ident" id="3377964">addr</span><span class="op" id="3377968">,</span>&nbsp;<span class="ident" id="3377970">noDeadline</span><span class="op" id="3377980">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377983">if</span>&nbsp;<span class="ident" id="3377986">err</span>&nbsp;<span class="op" id="3377990">!=</span>&nbsp;<span class="ident" id="3377993">nil</span>&nbsp;<span class="op" id="3377997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378001">return</span>&nbsp;<span class="ident" id="3378008">nil</span><span class="op" id="3378011">,</span>&nbsp;<span class="ident" id="3378013">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3378018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378021">return</span>&nbsp;<span class="ident" id="3378028">a</span><span class="op" id="3378029">.</span><span class="ident" id="3378030">toAddr</span><span class="op" id="3378036">(</span><span class="op" id="3378037">)</span><span class="op" id="3378038">.</span><span class="op" id="3378039">(</span><span class="op" id="3378040">*</span><span class="ident" id="3378041">IPAddr</span><span class="op" id="3378047">)</span><span class="op" id="3378048">,</span>&nbsp;<span class="ident" id="3378050">nil</span><br>
<span class="lineno"></span><span class="op" id="3378054">}</span>
</div>
</body>
</html>
