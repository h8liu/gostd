<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7796263">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7796319">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7796373">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7796424">package</span>&nbsp;<span class="ident" id="7796432">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796438">import</span>&nbsp;<span class="op" id="7796445">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796448">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796457">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796466">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796473">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796479">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796490">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796501">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796512">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7796522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796525">type</span>&nbsp;<span class="ident" id="7796530">reqTest</span>&nbsp;<span class="keyword" id="7796538">struct</span>&nbsp;<span class="op" id="7796545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796548">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7796556">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796564">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7796572">*</span><span class="ident" id="7796573">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796582">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7796590">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796598">Trailer</span>&nbsp;<span class="ident" id="7796606">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796614">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7796622">string</span><br>
<span class="lineno"></span><span class="op" id="7796629">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7796632">var</span>&nbsp;<span class="ident" id="7796636">noError</span>&nbsp;<span class="op" id="7796644">=</span>&nbsp;<span class="string" id="7796646">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7796649">var</span>&nbsp;<span class="ident" id="7796653">noBody</span>&nbsp;<span class="op" id="7796660">=</span>&nbsp;<span class="string" id="7796662">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7796665">var</span>&nbsp;<span class="ident" id="7796669">noTrailer</span>&nbsp;<span class="ident" id="7796679">Header</span>&nbsp;<span class="op" id="7796686">=</span>&nbsp;<span class="ident" id="7796688">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7796693">var</span>&nbsp;<span class="ident" id="7796697">reqTests</span>&nbsp;<span class="op" id="7796706">=</span>&nbsp;<span class="op" id="7796708">[</span><span class="op" id="7796709">]</span><span class="ident" id="7796710">reqTest</span><span class="op" id="7796717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7796720">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796788">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7796834">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796839">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7796870">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796875">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7796898">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796903">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7796981">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7796986">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7797024">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797029">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7797065">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797070">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7797123">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797128">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7797150">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797155">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="7797179">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797184">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7797223">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797228">&#34;abcdef\n???&#34;</span><span class="op" id="7797241">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797246">&amp;</span><span class="ident" id="7797247">Request</span><span class="op" id="7797254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797259">Method</span><span class="op" id="7797265">:</span>&nbsp;<span class="string" id="7797267">&#34;GET&#34;</span><span class="op" id="7797272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797277">URL</span><span class="op" id="7797280">:</span>&nbsp;<span class="op" id="7797282">&amp;</span><span class="ident" id="7797283">url</span><span class="op" id="7797286">.</span><span class="ident" id="7797287">URL</span><span class="op" id="7797290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797296">Scheme</span><span class="op" id="7797302">:</span>&nbsp;<span class="string" id="7797304">&#34;http&#34;</span><span class="op" id="7797310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797316">Host</span><span class="op" id="7797320">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7797324">&#34;www.techcrunch.com&#34;</span><span class="op" id="7797344">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797350">Path</span><span class="op" id="7797354">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7797358">&#34;/&#34;</span><span class="op" id="7797361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797366">}</span><span class="op" id="7797367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797372">Proto</span><span class="op" id="7797377">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7797384">&#34;HTTP/1.1&#34;</span><span class="op" id="7797394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797399">ProtoMajor</span><span class="op" id="7797409">:</span>&nbsp;<span class="num" id="7797411">1</span><span class="op" id="7797412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797417">ProtoMinor</span><span class="op" id="7797427">:</span>&nbsp;<span class="num" id="7797429">1</span><span class="op" id="7797430">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797435">Header</span><span class="op" id="7797441">:</span>&nbsp;<span class="ident" id="7797443">Header</span><span class="op" id="7797449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797455">&#34;Accept&#34;</span><span class="op" id="7797463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7797475">{</span><span class="string" id="7797476">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7797541">}</span><span class="op" id="7797542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797548">&#34;Accept-Language&#34;</span><span class="op" id="7797565">:</span>&nbsp;&nbsp;<span class="op" id="7797568">{</span><span class="string" id="7797569">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7797585">}</span><span class="op" id="7797586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797592">&#34;Accept-Encoding&#34;</span><span class="op" id="7797609">:</span>&nbsp;&nbsp;<span class="op" id="7797612">{</span><span class="string" id="7797613">&#34;gzip,deflate&#34;</span><span class="op" id="7797627">}</span><span class="op" id="7797628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797634">&#34;Accept-Charset&#34;</span><span class="op" id="7797650">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7797654">{</span><span class="string" id="7797655">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7797687">}</span><span class="op" id="7797688">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797694">&#34;Keep-Alive&#34;</span><span class="op" id="7797706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7797714">{</span><span class="string" id="7797715">&#34;300&#34;</span><span class="op" id="7797720">}</span><span class="op" id="7797721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797727">&#34;Proxy-Connection&#34;</span><span class="op" id="7797745">:</span>&nbsp;<span class="op" id="7797747">{</span><span class="string" id="7797748">&#34;keep-alive&#34;</span><span class="op" id="7797760">}</span><span class="op" id="7797761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797767">&#34;Content-Length&#34;</span><span class="op" id="7797783">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7797787">{</span><span class="string" id="7797788">&#34;7&#34;</span><span class="op" id="7797791">}</span><span class="op" id="7797792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797798">&#34;User-Agent&#34;</span><span class="op" id="7797810">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7797818">{</span><span class="string" id="7797819">&#34;Fake&#34;</span><span class="op" id="7797825">}</span><span class="op" id="7797826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797831">}</span><span class="op" id="7797832">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797837">Close</span><span class="op" id="7797842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7797852">false</span><span class="op" id="7797857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797862">ContentLength</span><span class="op" id="7797875">:</span>&nbsp;<span class="num" id="7797877">7</span><span class="op" id="7797878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797883">Host</span><span class="op" id="7797887">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7797898">&#34;www.techcrunch.com&#34;</span><span class="op" id="7797918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797923">RequestURI</span><span class="op" id="7797933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7797938">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="7797966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797970">}</span><span class="op" id="7797971">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7797976">&#34;abcdef\n&#34;</span><span class="op" id="7797986">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797991">noTrailer</span><span class="op" id="7798000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798004">noError</span><span class="op" id="7798011">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798014">}</span><span class="op" id="7798015">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798019">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798070">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7798091">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798096">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="7798119">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798124">&amp;</span><span class="ident" id="7798125">Request</span><span class="op" id="7798132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798137">Method</span><span class="op" id="7798143">:</span>&nbsp;<span class="string" id="7798145">&#34;GET&#34;</span><span class="op" id="7798150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798155">URL</span><span class="op" id="7798158">:</span>&nbsp;<span class="op" id="7798160">&amp;</span><span class="ident" id="7798161">url</span><span class="op" id="7798164">.</span><span class="ident" id="7798165">URL</span><span class="op" id="7798168">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798174">Path</span><span class="op" id="7798178">:</span>&nbsp;<span class="string" id="7798180">&#34;/&#34;</span><span class="op" id="7798183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798188">}</span><span class="op" id="7798189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798194">Proto</span><span class="op" id="7798199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798209">&#34;HTTP/1.1&#34;</span><span class="op" id="7798219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798224">ProtoMajor</span><span class="op" id="7798234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7798239">1</span><span class="op" id="7798240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798245">ProtoMinor</span><span class="op" id="7798255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7798260">1</span><span class="op" id="7798261">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798266">Header</span><span class="op" id="7798272">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7798281">Header</span><span class="op" id="7798287">{</span><span class="op" id="7798288">}</span><span class="op" id="7798289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798294">Close</span><span class="op" id="7798299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7798309">false</span><span class="op" id="7798314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798319">ContentLength</span><span class="op" id="7798332">:</span>&nbsp;<span class="num" id="7798334">0</span><span class="op" id="7798335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798340">Host</span><span class="op" id="7798344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798355">&#34;foo.com&#34;</span><span class="op" id="7798364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798369">RequestURI</span><span class="op" id="7798379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798384">&#34;/&#34;</span><span class="op" id="7798387">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798391">}</span><span class="op" id="7798392">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798397">noBody</span><span class="op" id="7798403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798407">noTrailer</span><span class="op" id="7798416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798420">noError</span><span class="op" id="7798427">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798430">}</span><span class="op" id="7798431">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798435">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798490">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798540">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798544">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7798595">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798600">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7798620">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798625">&amp;</span><span class="ident" id="7798626">Request</span><span class="op" id="7798633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798638">Method</span><span class="op" id="7798644">:</span>&nbsp;<span class="string" id="7798646">&#34;GET&#34;</span><span class="op" id="7798651">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798656">URL</span><span class="op" id="7798659">:</span>&nbsp;<span class="op" id="7798661">&amp;</span><span class="ident" id="7798662">url</span><span class="op" id="7798665">.</span><span class="ident" id="7798666">URL</span><span class="op" id="7798669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798675">Path</span><span class="op" id="7798679">:</span>&nbsp;<span class="string" id="7798681">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7798714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798719">}</span><span class="op" id="7798720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798725">Proto</span><span class="op" id="7798730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798740">&#34;HTTP/1.1&#34;</span><span class="op" id="7798750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798755">ProtoMajor</span><span class="op" id="7798765">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7798770">1</span><span class="op" id="7798771">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798776">ProtoMinor</span><span class="op" id="7798786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7798791">1</span><span class="op" id="7798792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798797">Header</span><span class="op" id="7798803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7798812">Header</span><span class="op" id="7798818">{</span><span class="op" id="7798819">}</span><span class="op" id="7798820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798825">Close</span><span class="op" id="7798830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7798840">false</span><span class="op" id="7798845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798850">ContentLength</span><span class="op" id="7798863">:</span>&nbsp;<span class="num" id="7798865">0</span><span class="op" id="7798866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798871">Host</span><span class="op" id="7798875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798886">&#34;test&#34;</span><span class="op" id="7798892">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798897">RequestURI</span><span class="op" id="7798907">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7798912">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7798945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798949">}</span><span class="op" id="7798950">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798955">noBody</span><span class="op" id="7798961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798965">noTrailer</span><span class="op" id="7798974">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798978">noError</span><span class="op" id="7798985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798988">}</span><span class="op" id="7798989">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798993">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799065">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799069">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7799111">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799116">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7799136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799140">nil</span><span class="op" id="7799143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799147">noBody</span><span class="op" id="7799153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799157">noTrailer</span><span class="op" id="7799166">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799170">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="7799225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799228">}</span><span class="op" id="7799229">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799233">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799256">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799260">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7799280">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799285">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7799305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799309">nil</span><span class="op" id="7799312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799316">noBody</span><span class="op" id="7799322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799326">noTrailer</span><span class="op" id="7799335">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799339">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="7799358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799361">}</span><span class="op" id="7799362">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799366">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799403">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799407">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7799429">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799434">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7799454">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799459">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7799496">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799501">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="7799516">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799521">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="7799536">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799541">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7799549">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799554">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="7799587">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799592">&#34;\r\n&#34;</span><span class="op" id="7799598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799602">&amp;</span><span class="ident" id="7799603">Request</span><span class="op" id="7799610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799615">Method</span><span class="op" id="7799621">:</span>&nbsp;<span class="string" id="7799623">&#34;POST&#34;</span><span class="op" id="7799629">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799634">URL</span><span class="op" id="7799637">:</span>&nbsp;<span class="op" id="7799639">&amp;</span><span class="ident" id="7799640">url</span><span class="op" id="7799643">.</span><span class="ident" id="7799644">URL</span><span class="op" id="7799647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799653">Path</span><span class="op" id="7799657">:</span>&nbsp;<span class="string" id="7799659">&#34;/&#34;</span><span class="op" id="7799662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799667">}</span><span class="op" id="7799668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799673">TransferEncoding</span><span class="op" id="7799689">:</span>&nbsp;<span class="op" id="7799691">[</span><span class="op" id="7799692">]</span><span class="builtintype" id="7799693">string</span><span class="op" id="7799699">{</span><span class="string" id="7799700">&#34;chunked&#34;</span><span class="op" id="7799709">}</span><span class="op" id="7799710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799715">Proto</span><span class="op" id="7799720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7799733">&#34;HTTP/1.1&#34;</span><span class="op" id="7799743">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799748">ProtoMajor</span><span class="op" id="7799758">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7799766">1</span><span class="op" id="7799767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799772">ProtoMinor</span><span class="op" id="7799782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7799790">1</span><span class="op" id="7799791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799796">Header</span><span class="op" id="7799802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7799814">Header</span><span class="op" id="7799820">{</span><span class="op" id="7799821">}</span><span class="op" id="7799822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799827">ContentLength</span><span class="op" id="7799840">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7799845">-</span><span class="num" id="7799846">1</span><span class="op" id="7799847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799852">Host</span><span class="op" id="7799856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7799870">&#34;foo.com&#34;</span><span class="op" id="7799879">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799884">RequestURI</span><span class="op" id="7799894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7799902">&#34;/&#34;</span><span class="op" id="7799905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799909">}</span><span class="op" id="7799910">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799915">&#34;foobar&#34;</span><span class="op" id="7799923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799927">Header</span><span class="op" id="7799933">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7799938">&#34;Trailer-Key&#34;</span><span class="op" id="7799951">:</span>&nbsp;<span class="op" id="7799953">{</span><span class="string" id="7799954">&#34;Trailer-Value&#34;</span><span class="op" id="7799969">}</span><span class="op" id="7799970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799974">}</span><span class="op" id="7799975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799979">noError</span><span class="op" id="7799986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799989">}</span><span class="op" id="7799990">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799994">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7800036">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7800081">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800086">&amp;</span><span class="ident" id="7800087">Request</span><span class="op" id="7800094">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800099">Method</span><span class="op" id="7800105">:</span>&nbsp;<span class="string" id="7800107">&#34;CONNECT&#34;</span><span class="op" id="7800116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800121">URL</span><span class="op" id="7800124">:</span>&nbsp;<span class="op" id="7800126">&amp;</span><span class="ident" id="7800127">url</span><span class="op" id="7800130">.</span><span class="ident" id="7800131">URL</span><span class="op" id="7800134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800140">Host</span><span class="op" id="7800144">:</span>&nbsp;<span class="string" id="7800146">&#34;www.google.com:443&#34;</span><span class="op" id="7800166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800171">}</span><span class="op" id="7800172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800177">Proto</span><span class="op" id="7800182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800192">&#34;HTTP/1.1&#34;</span><span class="op" id="7800202">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800207">ProtoMajor</span><span class="op" id="7800217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7800222">1</span><span class="op" id="7800223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800228">ProtoMinor</span><span class="op" id="7800238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7800243">1</span><span class="op" id="7800244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800249">Header</span><span class="op" id="7800255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7800264">Header</span><span class="op" id="7800270">{</span><span class="op" id="7800271">}</span><span class="op" id="7800272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800277">Close</span><span class="op" id="7800282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7800292">false</span><span class="op" id="7800297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800302">ContentLength</span><span class="op" id="7800315">:</span>&nbsp;<span class="num" id="7800317">0</span><span class="op" id="7800318">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800323">Host</span><span class="op" id="7800327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800338">&#34;www.google.com:443&#34;</span><span class="op" id="7800358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800363">RequestURI</span><span class="op" id="7800373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800378">&#34;www.google.com:443&#34;</span><span class="op" id="7800398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800402">}</span><span class="op" id="7800403">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800408">noBody</span><span class="op" id="7800414">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800418">noTrailer</span><span class="op" id="7800427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800431">noError</span><span class="op" id="7800438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800441">}</span><span class="op" id="7800442">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7800446">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7800487">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7800528">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800533">&amp;</span><span class="ident" id="7800534">Request</span><span class="op" id="7800541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800546">Method</span><span class="op" id="7800552">:</span>&nbsp;<span class="string" id="7800554">&#34;CONNECT&#34;</span><span class="op" id="7800563">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800568">URL</span><span class="op" id="7800571">:</span>&nbsp;<span class="op" id="7800573">&amp;</span><span class="ident" id="7800574">url</span><span class="op" id="7800577">.</span><span class="ident" id="7800578">URL</span><span class="op" id="7800581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800587">Host</span><span class="op" id="7800591">:</span>&nbsp;<span class="string" id="7800593">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7800609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800614">}</span><span class="op" id="7800615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800620">Proto</span><span class="op" id="7800625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800635">&#34;HTTP/1.1&#34;</span><span class="op" id="7800645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800650">ProtoMajor</span><span class="op" id="7800660">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7800665">1</span><span class="op" id="7800666">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800671">ProtoMinor</span><span class="op" id="7800681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7800686">1</span><span class="op" id="7800687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800692">Header</span><span class="op" id="7800698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7800707">Header</span><span class="op" id="7800713">{</span><span class="op" id="7800714">}</span><span class="op" id="7800715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800720">Close</span><span class="op" id="7800725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7800735">false</span><span class="op" id="7800740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800745">ContentLength</span><span class="op" id="7800758">:</span>&nbsp;<span class="num" id="7800760">0</span><span class="op" id="7800761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800766">Host</span><span class="op" id="7800770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800781">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7800797">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800802">RequestURI</span><span class="op" id="7800812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7800817">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7800833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800837">}</span><span class="op" id="7800838">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800843">noBody</span><span class="op" id="7800849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800853">noTrailer</span><span class="op" id="7800862">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800866">noError</span><span class="op" id="7800873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800876">}</span><span class="op" id="7800877">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7800881">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800910">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7800914">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7800949">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800954">&amp;</span><span class="ident" id="7800955">Request</span><span class="op" id="7800962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800967">Method</span><span class="op" id="7800973">:</span>&nbsp;<span class="string" id="7800975">&#34;CONNECT&#34;</span><span class="op" id="7800984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800989">URL</span><span class="op" id="7800992">:</span>&nbsp;<span class="op" id="7800994">&amp;</span><span class="ident" id="7800995">url</span><span class="op" id="7800998">.</span><span class="ident" id="7800999">URL</span><span class="op" id="7801002">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801008">Path</span><span class="op" id="7801012">:</span>&nbsp;<span class="string" id="7801014">&#34;/_goRPC_&#34;</span><span class="op" id="7801024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801029">}</span><span class="op" id="7801030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801035">Proto</span><span class="op" id="7801040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801050">&#34;HTTP/1.1&#34;</span><span class="op" id="7801060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801065">ProtoMajor</span><span class="op" id="7801075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7801080">1</span><span class="op" id="7801081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801086">ProtoMinor</span><span class="op" id="7801096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7801101">1</span><span class="op" id="7801102">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801107">Header</span><span class="op" id="7801113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7801122">Header</span><span class="op" id="7801128">{</span><span class="op" id="7801129">}</span><span class="op" id="7801130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801135">Close</span><span class="op" id="7801140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7801150">false</span><span class="op" id="7801155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801160">ContentLength</span><span class="op" id="7801173">:</span>&nbsp;<span class="num" id="7801175">0</span><span class="op" id="7801176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801181">Host</span><span class="op" id="7801185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801196">&#34;&#34;</span><span class="op" id="7801198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801203">RequestURI</span><span class="op" id="7801213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801218">&#34;/_goRPC_&#34;</span><span class="op" id="7801228">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801232">}</span><span class="op" id="7801233">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801238">noBody</span><span class="op" id="7801244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801248">noTrailer</span><span class="op" id="7801257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801261">noError</span><span class="op" id="7801268">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801271">}</span><span class="op" id="7801272">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7801276">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7801327">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7801369">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801373">&amp;</span><span class="ident" id="7801374">Request</span><span class="op" id="7801381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801386">Method</span><span class="op" id="7801392">:</span>&nbsp;<span class="string" id="7801394">&#34;NOTIFY&#34;</span><span class="op" id="7801402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801407">URL</span><span class="op" id="7801410">:</span>&nbsp;<span class="op" id="7801412">&amp;</span><span class="ident" id="7801413">url</span><span class="op" id="7801416">.</span><span class="ident" id="7801417">URL</span><span class="op" id="7801420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801426">Path</span><span class="op" id="7801430">:</span>&nbsp;<span class="string" id="7801432">&#34;*&#34;</span><span class="op" id="7801435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801440">}</span><span class="op" id="7801441">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801446">Proto</span><span class="op" id="7801451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801458">&#34;HTTP/1.1&#34;</span><span class="op" id="7801468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801473">ProtoMajor</span><span class="op" id="7801483">:</span>&nbsp;<span class="num" id="7801485">1</span><span class="op" id="7801486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801491">ProtoMinor</span><span class="op" id="7801501">:</span>&nbsp;<span class="num" id="7801503">1</span><span class="op" id="7801504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801509">Header</span><span class="op" id="7801515">:</span>&nbsp;<span class="ident" id="7801517">Header</span><span class="op" id="7801523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7801529">&#34;Server&#34;</span><span class="op" id="7801537">:</span>&nbsp;<span class="op" id="7801539">[</span><span class="op" id="7801540">]</span><span class="builtintype" id="7801541">string</span><span class="op" id="7801547">{</span><span class="string" id="7801548">&#34;foo&#34;</span><span class="op" id="7801553">}</span><span class="op" id="7801554">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801559">}</span><span class="op" id="7801560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801565">Close</span><span class="op" id="7801570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7801580">false</span><span class="op" id="7801585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801590">ContentLength</span><span class="op" id="7801603">:</span>&nbsp;<span class="num" id="7801605">0</span><span class="op" id="7801606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801611">RequestURI</span><span class="op" id="7801621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801626">&#34;*&#34;</span><span class="op" id="7801629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801633">}</span><span class="op" id="7801634">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801639">noBody</span><span class="op" id="7801645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801649">noTrailer</span><span class="op" id="7801658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801662">noError</span><span class="op" id="7801669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801672">}</span><span class="op" id="7801673">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7801677">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7801735">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7801778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801782">&amp;</span><span class="ident" id="7801783">Request</span><span class="op" id="7801790">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801795">Method</span><span class="op" id="7801801">:</span>&nbsp;<span class="string" id="7801803">&#34;OPTIONS&#34;</span><span class="op" id="7801812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801817">URL</span><span class="op" id="7801820">:</span>&nbsp;<span class="op" id="7801822">&amp;</span><span class="ident" id="7801823">url</span><span class="op" id="7801826">.</span><span class="ident" id="7801827">URL</span><span class="op" id="7801830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801836">Path</span><span class="op" id="7801840">:</span>&nbsp;<span class="string" id="7801842">&#34;*&#34;</span><span class="op" id="7801845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801850">}</span><span class="op" id="7801851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801856">Proto</span><span class="op" id="7801861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7801868">&#34;HTTP/1.1&#34;</span><span class="op" id="7801878">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801883">ProtoMajor</span><span class="op" id="7801893">:</span>&nbsp;<span class="num" id="7801895">1</span><span class="op" id="7801896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801901">ProtoMinor</span><span class="op" id="7801911">:</span>&nbsp;<span class="num" id="7801913">1</span><span class="op" id="7801914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801919">Header</span><span class="op" id="7801925">:</span>&nbsp;<span class="ident" id="7801927">Header</span><span class="op" id="7801933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7801939">&#34;Server&#34;</span><span class="op" id="7801947">:</span>&nbsp;<span class="op" id="7801949">[</span><span class="op" id="7801950">]</span><span class="builtintype" id="7801951">string</span><span class="op" id="7801957">{</span><span class="string" id="7801958">&#34;foo&#34;</span><span class="op" id="7801963">}</span><span class="op" id="7801964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801969">}</span><span class="op" id="7801970">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801975">Close</span><span class="op" id="7801980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7801990">false</span><span class="op" id="7801995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802000">ContentLength</span><span class="op" id="7802013">:</span>&nbsp;<span class="num" id="7802015">0</span><span class="op" id="7802016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802021">RequestURI</span><span class="op" id="7802031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802036">&#34;*&#34;</span><span class="op" id="7802039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802043">}</span><span class="op" id="7802044">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802049">noBody</span><span class="op" id="7802055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802059">noTrailer</span><span class="op" id="7802068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802072">noError</span><span class="op" id="7802079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802082">}</span><span class="op" id="7802083">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7802087">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802136">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="7802204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802208">&amp;</span><span class="ident" id="7802209">Request</span><span class="op" id="7802216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802221">Method</span><span class="op" id="7802227">:</span>&nbsp;<span class="string" id="7802229">&#34;GET&#34;</span><span class="op" id="7802234">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802239">URL</span><span class="op" id="7802242">:</span>&nbsp;<span class="op" id="7802244">&amp;</span><span class="ident" id="7802245">url</span><span class="op" id="7802248">.</span><span class="ident" id="7802249">URL</span><span class="op" id="7802252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802258">Path</span><span class="op" id="7802262">:</span>&nbsp;<span class="string" id="7802264">&#34;/&#34;</span><span class="op" id="7802267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802272">}</span><span class="op" id="7802273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802278">Header</span><span class="op" id="7802284">:</span>&nbsp;<span class="ident" id="7802286">Header</span><span class="op" id="7802292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7802298">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7802340">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7802380">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802398">&#34;Connection&#34;</span><span class="op" id="7802410">:</span>&nbsp;<span class="op" id="7802412">[</span><span class="op" id="7802413">]</span><span class="builtintype" id="7802414">string</span><span class="op" id="7802420">{</span><span class="string" id="7802421">&#34;close&#34;</span><span class="op" id="7802428">}</span><span class="op" id="7802429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802434">}</span><span class="op" id="7802435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802440">Host</span><span class="op" id="7802444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802452">&#34;issue8261.com&#34;</span><span class="op" id="7802467">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802472">Proto</span><span class="op" id="7802477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802484">&#34;HTTP/1.1&#34;</span><span class="op" id="7802494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802499">ProtoMajor</span><span class="op" id="7802509">:</span>&nbsp;<span class="num" id="7802511">1</span><span class="op" id="7802512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802517">ProtoMinor</span><span class="op" id="7802527">:</span>&nbsp;<span class="num" id="7802529">1</span><span class="op" id="7802530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802535">Close</span><span class="op" id="7802540">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7802547">true</span><span class="op" id="7802551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802556">RequestURI</span><span class="op" id="7802566">:</span>&nbsp;<span class="string" id="7802568">&#34;/&#34;</span><span class="op" id="7802571">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802575">}</span><span class="op" id="7802576">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802581">noBody</span><span class="op" id="7802587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802591">noTrailer</span><span class="op" id="7802600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802604">noError</span><span class="op" id="7802611">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802614">}</span><span class="op" id="7802615">,</span><br>
<span class="lineno"></span><span class="op" id="7802617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802620">func</span>&nbsp;<span class="ident" id="7802625">TestReadRequest</span><span class="op" id="7802640">(</span><span class="ident" id="7802641">t</span>&nbsp;<span class="op" id="7802643">*</span><span class="ident" id="7802644">testing</span><span class="op" id="7802651">.</span><span class="ident" id="7802652">T</span><span class="op" id="7802653">)</span>&nbsp;<span class="op" id="7802655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802658">for</span>&nbsp;<span class="ident" id="7802662">i</span>&nbsp;<span class="op" id="7802664">:=</span>&nbsp;<span class="keyword" id="7802667">range</span>&nbsp;<span class="ident" id="7802673">reqTests</span>&nbsp;<span class="op" id="7802682">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802686">tt</span>&nbsp;<span class="op" id="7802689">:=</span>&nbsp;<span class="op" id="7802692">&amp;</span><span class="ident" id="7802693">reqTests</span><span class="op" id="7802701">[</span><span class="ident" id="7802702">i</span><span class="op" id="7802703">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802707">req</span><span class="op" id="7802710">,</span>&nbsp;<span class="ident" id="7802712">err</span>&nbsp;<span class="op" id="7802716">:=</span>&nbsp;<span class="ident" id="7802719">ReadRequest</span><span class="op" id="7802730">(</span><span class="ident" id="7802731">bufio</span><span class="op" id="7802736">.</span><span class="ident" id="7802737">NewReader</span><span class="op" id="7802746">(</span><span class="ident" id="7802747">strings</span><span class="op" id="7802754">.</span><span class="ident" id="7802755">NewReader</span><span class="op" id="7802764">(</span><span class="ident" id="7802765">tt</span><span class="op" id="7802767">.</span><span class="ident" id="7802768">Raw</span><span class="op" id="7802771">)</span><span class="op" id="7802772">)</span><span class="op" id="7802773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802777">if</span>&nbsp;<span class="ident" id="7802780">err</span>&nbsp;<span class="op" id="7802784">!=</span>&nbsp;<span class="ident" id="7802787">nil</span>&nbsp;<span class="op" id="7802791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802796">if</span>&nbsp;<span class="ident" id="7802799">err</span><span class="op" id="7802802">.</span><span class="ident" id="7802803">Error</span><span class="op" id="7802808">(</span><span class="op" id="7802809">)</span>&nbsp;<span class="op" id="7802811">!=</span>&nbsp;<span class="ident" id="7802814">tt</span><span class="op" id="7802816">.</span><span class="ident" id="7802817">Error</span>&nbsp;<span class="op" id="7802823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802829">t</span><span class="op" id="7802830">.</span><span class="ident" id="7802831">Errorf</span><span class="op" id="7802837">(</span><span class="string" id="7802838">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7802868">,</span>&nbsp;<span class="ident" id="7802870">i</span><span class="op" id="7802871">,</span>&nbsp;<span class="ident" id="7802873">err</span><span class="op" id="7802876">.</span><span class="ident" id="7802877">Error</span><span class="op" id="7802882">(</span><span class="op" id="7802883">)</span><span class="op" id="7802884">,</span>&nbsp;<span class="ident" id="7802886">tt</span><span class="op" id="7802888">.</span><span class="ident" id="7802889">Error</span><span class="op" id="7802894">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802904">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802919">rbody</span>&nbsp;<span class="op" id="7802925">:=</span>&nbsp;<span class="ident" id="7802928">req</span><span class="op" id="7802931">.</span><span class="ident" id="7802932">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802939">req</span><span class="op" id="7802942">.</span><span class="ident" id="7802943">Body</span>&nbsp;<span class="op" id="7802948">=</span>&nbsp;<span class="ident" id="7802950">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802956">testName</span>&nbsp;<span class="op" id="7802965">:=</span>&nbsp;<span class="ident" id="7802968">fmt</span><span class="op" id="7802971">.</span><span class="ident" id="7802972">Sprintf</span><span class="op" id="7802979">(</span><span class="string" id="7802980">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="7802994">,</span>&nbsp;<span class="ident" id="7802996">i</span><span class="op" id="7802997">,</span>&nbsp;<span class="ident" id="7802999">tt</span><span class="op" id="7803001">.</span><span class="ident" id="7803002">Raw</span><span class="op" id="7803005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803009">diff</span><span class="op" id="7803013">(</span><span class="ident" id="7803014">t</span><span class="op" id="7803015">,</span>&nbsp;<span class="ident" id="7803017">testName</span><span class="op" id="7803025">,</span>&nbsp;<span class="ident" id="7803027">req</span><span class="op" id="7803030">,</span>&nbsp;<span class="ident" id="7803032">tt</span><span class="op" id="7803034">.</span><span class="ident" id="7803035">Req</span><span class="op" id="7803038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803042">var</span>&nbsp;<span class="ident" id="7803046">bout</span>&nbsp;<span class="ident" id="7803051">bytes</span><span class="op" id="7803056">.</span><span class="ident" id="7803057">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803066">if</span>&nbsp;<span class="ident" id="7803069">rbody</span>&nbsp;<span class="op" id="7803075">!=</span>&nbsp;<span class="ident" id="7803078">nil</span>&nbsp;<span class="op" id="7803082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803087">_</span><span class="op" id="7803088">,</span>&nbsp;<span class="ident" id="7803090">err</span>&nbsp;<span class="op" id="7803094">:=</span>&nbsp;<span class="ident" id="7803097">io</span><span class="op" id="7803099">.</span><span class="ident" id="7803100">Copy</span><span class="op" id="7803104">(</span><span class="op" id="7803105">&amp;</span><span class="ident" id="7803106">bout</span><span class="op" id="7803110">,</span>&nbsp;<span class="ident" id="7803112">rbody</span><span class="op" id="7803117">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803122">if</span>&nbsp;<span class="ident" id="7803125">err</span>&nbsp;<span class="op" id="7803129">!=</span>&nbsp;<span class="ident" id="7803132">nil</span>&nbsp;<span class="op" id="7803136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803142">t</span><span class="op" id="7803143">.</span><span class="ident" id="7803144">Fatalf</span><span class="op" id="7803150">(</span><span class="string" id="7803151">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7803173">,</span>&nbsp;<span class="ident" id="7803175">testName</span><span class="op" id="7803183">,</span>&nbsp;<span class="ident" id="7803185">err</span><span class="op" id="7803188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803198">rbody</span><span class="op" id="7803203">.</span><span class="ident" id="7803204">Close</span><span class="op" id="7803209">(</span><span class="op" id="7803210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803214">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803218">body</span>&nbsp;<span class="op" id="7803223">:=</span>&nbsp;<span class="ident" id="7803226">bout</span><span class="op" id="7803230">.</span><span class="ident" id="7803231">String</span><span class="op" id="7803237">(</span><span class="op" id="7803238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803242">if</span>&nbsp;<span class="ident" id="7803245">body</span>&nbsp;<span class="op" id="7803250">!=</span>&nbsp;<span class="ident" id="7803253">tt</span><span class="op" id="7803255">.</span><span class="ident" id="7803256">Body</span>&nbsp;<span class="op" id="7803261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803266">t</span><span class="op" id="7803267">.</span><span class="ident" id="7803268">Errorf</span><span class="op" id="7803274">(</span><span class="string" id="7803275">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7803298">,</span>&nbsp;<span class="ident" id="7803300">testName</span><span class="op" id="7803308">,</span>&nbsp;<span class="ident" id="7803310">body</span><span class="op" id="7803314">,</span>&nbsp;<span class="ident" id="7803316">tt</span><span class="op" id="7803318">.</span><span class="ident" id="7803319">Body</span><span class="op" id="7803323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803331">if</span>&nbsp;<span class="op" id="7803334">!</span><span class="ident" id="7803335">reflect</span><span class="op" id="7803342">.</span><span class="ident" id="7803343">DeepEqual</span><span class="op" id="7803352">(</span><span class="ident" id="7803353">tt</span><span class="op" id="7803355">.</span><span class="ident" id="7803356">Trailer</span><span class="op" id="7803363">,</span>&nbsp;<span class="ident" id="7803365">req</span><span class="op" id="7803368">.</span><span class="ident" id="7803369">Trailer</span><span class="op" id="7803376">)</span>&nbsp;<span class="op" id="7803378">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803383">t</span><span class="op" id="7803384">.</span><span class="ident" id="7803385">Errorf</span><span class="op" id="7803391">(</span><span class="string" id="7803392">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7803434">,</span>&nbsp;<span class="ident" id="7803436">testName</span><span class="op" id="7803444">,</span>&nbsp;<span class="ident" id="7803446">req</span><span class="op" id="7803449">.</span><span class="ident" id="7803450">Trailer</span><span class="op" id="7803457">,</span>&nbsp;<span class="ident" id="7803459">tt</span><span class="op" id="7803461">.</span><span class="ident" id="7803462">Trailer</span><span class="op" id="7803469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803476">}</span><br>
<span class="lineno"></span><span class="op" id="7803478">}</span>
</div>
</body>
</html>
