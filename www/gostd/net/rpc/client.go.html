<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html" class="current">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5261273">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5261328">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5261382">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5261433">package</span>&nbsp;<span class="ident" id="5261441">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5261446">import</span>&nbsp;<span class="op" id="5261453">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261456">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261465">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261481">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261491">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261497">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261504">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261511">&#34;net/http&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5261523">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5261530">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5261533">//&nbsp;ServerError&nbsp;represents&nbsp;an&nbsp;error&nbsp;that&nbsp;has&nbsp;been&nbsp;returned&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5261596">//&nbsp;the&nbsp;remote&nbsp;side&nbsp;of&nbsp;the&nbsp;RPC&nbsp;connection.</span><br>
<span class="lineno">20</span><span class="keyword" id="5261638">type</span>&nbsp;<span class="ident" id="5261643">ServerError</span>&nbsp;<span class="builtintype" id="5261655">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5261663">func</span>&nbsp;<span class="op" id="5261668">(</span><span class="ident" id="5261669">e</span>&nbsp;<span class="ident" id="5261671"><a href="/gostd/net/rpc/client.go.html#5261643">ServerError</a></span><span class="op" id="5261682">)</span>&nbsp;<span class="ident" id="5261684">Error</span><span class="op" id="5261689">(</span><span class="op" id="5261690">)</span>&nbsp;<span class="builtintype" id="5261692">string</span>&nbsp;<span class="op" id="5261699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5261702">return</span>&nbsp;<span class="builtintype" id="5261709">string</span><span class="op" id="5261715">(</span><span class="ident" id="5261716"><a href="/gostd/net/rpc/client.go.html#5261669">e</a></span><span class="op" id="5261717">)</span><br>
<span class="lineno"></span><span class="op" id="5261719">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5261722">var</span>&nbsp;<span class="ident" id="5261726">ErrShutdown</span>&nbsp;<span class="op" id="5261738">=</span>&nbsp;<span class="ident" id="5261740"><a href="/gostd/net/rpc/client.go.html#5261481">errors</a></span><span class="op" id="5261746">.</span><span class="ident" id="5261747"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5261750">(</span><span class="string" id="5261751">&#34;connection&nbsp;is&nbsp;shut&nbsp;down&#34;</span><span class="op" id="5261776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5261779">//&nbsp;Call&nbsp;represents&nbsp;an&nbsp;active&nbsp;RPC.</span><br>
<span class="lineno"></span><span class="keyword" id="5261813">type</span>&nbsp;<span class="ident" id="5261818">Call</span>&nbsp;<span class="keyword" id="5261823">struct</span>&nbsp;<span class="op" id="5261830">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5261833">ServiceMethod</span>&nbsp;<span class="builtintype" id="5261847">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5261859">//&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;service&nbsp;and&nbsp;method&nbsp;to&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5261907">Args</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5261921">interface</span><span class="op" id="5261930">{</span><span class="op" id="5261931">}</span>&nbsp;<span class="comment" id="5261933">//&nbsp;The&nbsp;argument&nbsp;to&nbsp;the&nbsp;function&nbsp;(*struct).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5261977">Reply</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5261991">interface</span><span class="op" id="5262000">{</span><span class="op" id="5262001">}</span>&nbsp;<span class="comment" id="5262003">//&nbsp;The&nbsp;reply&nbsp;from&nbsp;the&nbsp;function&nbsp;(*struct).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262046">Error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5262060">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5262072">//&nbsp;After&nbsp;completion,&nbsp;the&nbsp;error&nbsp;status.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262112">Done</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5262126">chan</span>&nbsp;<span class="op" id="5262131">*</span><span class="ident" id="5262132"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span>&nbsp;&nbsp;<span class="comment" id="5262138">//&nbsp;Strobes&nbsp;when&nbsp;call&nbsp;is&nbsp;complete.</span><br>
<span class="lineno">35</span><span class="op" id="5262172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5262175">//&nbsp;Client&nbsp;represents&nbsp;an&nbsp;RPC&nbsp;Client.</span><br>
<span class="lineno"></span><span class="comment" id="5262211">//&nbsp;There&nbsp;may&nbsp;be&nbsp;multiple&nbsp;outstanding&nbsp;Calls&nbsp;associated</span><br>
<span class="lineno"></span><span class="comment" id="5262265">//&nbsp;with&nbsp;a&nbsp;single&nbsp;Client,&nbsp;and&nbsp;a&nbsp;Client&nbsp;may&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno">40</span><span class="comment" id="5262318">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="5262357">type</span>&nbsp;<span class="ident" id="5262362">Client</span>&nbsp;<span class="keyword" id="5262369">struct</span>&nbsp;<span class="op" id="5262376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262379">codec</span>&nbsp;<span class="ident" id="5262385"><a href="/gostd/net/rpc/client.go.html#5263101">ClientCodec</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262399">reqMutex</span>&nbsp;<span class="ident" id="5262408"><a href="/gostd/net/rpc/client.go.html#5261523">sync</a></span><span class="op" id="5262412">.</span><span class="ident" id="5262413"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;<span class="comment" id="5262419">//&nbsp;protects&nbsp;following</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262442">request</span>&nbsp;&nbsp;<span class="ident" id="5262451"><a href="/gostd/net/rpc/server.go.html#5277366">Request</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262461">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262470"><a href="/gostd/net/rpc/client.go.html#5261523">sync</a></span><span class="op" id="5262474">.</span><span class="ident" id="5262475"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;<span class="comment" id="5262481">//&nbsp;protects&nbsp;following</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262504">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5262513">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262521">pending</span>&nbsp;&nbsp;<span class="keyword" id="5262530">map</span><span class="op" id="5262533">[</span><span class="builtintype" id="5262534">uint64</span><span class="op" id="5262540">]</span><span class="op" id="5262541">*</span><span class="ident" id="5262542"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262548">closing</span>&nbsp;&nbsp;<span class="builtintype" id="5262557">bool</span>&nbsp;<span class="comment" id="5262562">//&nbsp;user&nbsp;has&nbsp;called&nbsp;Close</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5262588">shutdown</span>&nbsp;<span class="builtintype" id="5262597">bool</span>&nbsp;<span class="comment" id="5262602">//&nbsp;server&nbsp;has&nbsp;told&nbsp;us&nbsp;to&nbsp;stop</span><br>
<span class="lineno"></span><span class="op" id="5262632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5262635">//&nbsp;A&nbsp;ClientCodec&nbsp;implements&nbsp;writing&nbsp;of&nbsp;RPC&nbsp;requests&nbsp;and</span><br>
<span class="lineno">55</span><span class="comment" id="5262691">//&nbsp;reading&nbsp;of&nbsp;RPC&nbsp;responses&nbsp;for&nbsp;the&nbsp;client&nbsp;side&nbsp;of&nbsp;an&nbsp;RPC&nbsp;session.</span><br>
<span class="lineno"></span><span class="comment" id="5262758">//&nbsp;The&nbsp;client&nbsp;calls&nbsp;WriteRequest&nbsp;to&nbsp;write&nbsp;a&nbsp;request&nbsp;to&nbsp;the&nbsp;connection</span><br>
<span class="lineno"></span><span class="comment" id="5262828">//&nbsp;and&nbsp;calls&nbsp;ReadResponseHeader&nbsp;and&nbsp;ReadResponseBody&nbsp;in&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="5262890">//&nbsp;to&nbsp;read&nbsp;responses.&nbsp;&nbsp;The&nbsp;client&nbsp;calls&nbsp;Close&nbsp;when&nbsp;finished&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5262959">//&nbsp;connection.&nbsp;ReadResponseBody&nbsp;may&nbsp;be&nbsp;called&nbsp;with&nbsp;a&nbsp;nil</span><br>
<span class="lineno">60</span><span class="comment" id="5263016">//&nbsp;argument&nbsp;to&nbsp;force&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;response&nbsp;to&nbsp;be&nbsp;read&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5263082">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="keyword" id="5263096">type</span>&nbsp;<span class="ident" id="5263101">ClientCodec</span>&nbsp;<span class="keyword" id="5263113">interface</span>&nbsp;<span class="op" id="5263123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5263126">//&nbsp;WriteRequest&nbsp;must&nbsp;be&nbsp;safe&nbsp;for&nbsp;concurrent&nbsp;use&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263199">WriteRequest</span><span class="op" id="5263211">(</span><span class="op" id="5263212">*</span><span class="ident" id="5263213"><a href="/gostd/net/rpc/server.go.html#5277366">Request</a></span><span class="op" id="5263220">,</span>&nbsp;<span class="keyword" id="5263222">interface</span><span class="op" id="5263231">{</span><span class="op" id="5263232">}</span><span class="op" id="5263233">)</span>&nbsp;<span class="builtintype" id="5263235">error</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263242">ReadResponseHeader</span><span class="op" id="5263260">(</span><span class="op" id="5263261">*</span><span class="ident" id="5263262"><a href="/gostd/net/rpc/server.go.html#5277724">Response</a></span><span class="op" id="5263270">)</span>&nbsp;<span class="builtintype" id="5263272">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263279">ReadResponseBody</span><span class="op" id="5263295">(</span><span class="keyword" id="5263296">interface</span><span class="op" id="5263305">{</span><span class="op" id="5263306">}</span><span class="op" id="5263307">)</span>&nbsp;<span class="builtintype" id="5263309">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263317">Close</span><span class="op" id="5263322">(</span><span class="op" id="5263323">)</span>&nbsp;<span class="builtintype" id="5263325">error</span><br>
<span class="lineno"></span><span class="op" id="5263331">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="5263334">func</span>&nbsp;<span class="op" id="5263339">(</span><span class="ident" id="5263340">client</span>&nbsp;<span class="op" id="5263347">*</span><span class="ident" id="5263348"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5263354">)</span>&nbsp;<span class="ident" id="5263356">send</span><span class="op" id="5263360">(</span><span class="ident" id="5263361">call</span>&nbsp;<span class="op" id="5263366">*</span><span class="ident" id="5263367"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5263371">)</span>&nbsp;<span class="op" id="5263373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263376"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263382">.</span><span class="ident" id="5263383"><a href="/gostd/net/rpc/client.go.html#5262399">reqMutex</a></span><span class="op" id="5263391">.</span><span class="ident" id="5263392"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5263396">(</span><span class="op" id="5263397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5263400">defer</span>&nbsp;<span class="ident" id="5263406"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263412">.</span><span class="ident" id="5263413"><a href="/gostd/net/rpc/client.go.html#5262399">reqMutex</a></span><span class="op" id="5263421">.</span><span class="ident" id="5263422"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5263428">(</span><span class="op" id="5263429">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5263433">//&nbsp;Register&nbsp;this&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263457"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263463">.</span><span class="ident" id="5263464"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5263469">.</span><span class="ident" id="5263470"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5263474">(</span><span class="op" id="5263475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5263478">if</span>&nbsp;<span class="ident" id="5263481"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263487">.</span><span class="ident" id="5263488"><a href="/gostd/net/rpc/client.go.html#5262588">shutdown</a></span>&nbsp;<span class="op" id="5263497">||</span>&nbsp;<span class="ident" id="5263500"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263506">.</span><span class="ident" id="5263507"><a href="/gostd/net/rpc/client.go.html#5262548">closing</a></span>&nbsp;<span class="op" id="5263515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263519"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5263523">.</span><span class="ident" id="5263524"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span>&nbsp;<span class="op" id="5263530">=</span>&nbsp;<span class="ident" id="5263532"><a href="/gostd/net/rpc/client.go.html#5261726">ErrShutdown</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263546"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263552">.</span><span class="ident" id="5263553"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5263558">.</span><span class="ident" id="5263559"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5263565">(</span><span class="op" id="5263566">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263570"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5263574">.</span><span class="ident" id="5263575"><a href="/gostd/net/rpc/client.go.html#5265809">done</a></span><span class="op" id="5263579">(</span><span class="op" id="5263580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5263584">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5263592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263595">seq</span>&nbsp;<span class="op" id="5263599">:=</span>&nbsp;<span class="ident" id="5263602"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263608">.</span><span class="ident" id="5263609"><a href="/gostd/net/rpc/client.go.html#5262504">seq</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263614"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263620">.</span><span class="ident" id="5263621"><a href="/gostd/net/rpc/client.go.html#5262504">seq</a></span><span class="op" id="5263624">++</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263628"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263634">.</span><span class="ident" id="5263635"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5263642">[</span><span class="ident" id="5263643"><a href="/gostd/net/rpc/client.go.html#5263595">seq</a></span><span class="op" id="5263646">]</span>&nbsp;<span class="op" id="5263648">=</span>&nbsp;<span class="ident" id="5263650"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263656"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263662">.</span><span class="ident" id="5263663"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5263668">.</span><span class="ident" id="5263669"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5263675">(</span><span class="op" id="5263676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5263680">//&nbsp;Encode&nbsp;and&nbsp;send&nbsp;the&nbsp;request.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263713"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263719">.</span><span class="ident" id="5263720"><a href="/gostd/net/rpc/client.go.html#5262442">request</a></span><span class="op" id="5263727">.</span><span class="ident" id="5263728"><a href="/gostd/net/rpc/server.go.html#5277436">Seq</a></span>&nbsp;<span class="op" id="5263732">=</span>&nbsp;<span class="ident" id="5263734"><a href="/gostd/net/rpc/client.go.html#5263595">seq</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263739"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263745">.</span><span class="ident" id="5263746"><a href="/gostd/net/rpc/client.go.html#5262442">request</a></span><span class="op" id="5263753">.</span><span class="ident" id="5263754"><a href="/gostd/net/rpc/server.go.html#5277384">ServiceMethod</a></span>&nbsp;<span class="op" id="5263768">=</span>&nbsp;<span class="ident" id="5263770"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5263774">.</span><span class="ident" id="5263775"><a href="/gostd/net/rpc/client.go.html#5261833">ServiceMethod</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263790">err</span>&nbsp;<span class="op" id="5263794">:=</span>&nbsp;<span class="ident" id="5263797"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263803">.</span><span class="ident" id="5263804"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5263809">.</span><span class="ident" id="5263810"><a href="/gostd/net/rpc/client.go.html#5263199">WriteRequest</a></span><span class="op" id="5263822">(</span><span class="op" id="5263823">&amp;</span><span class="ident" id="5263824"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263830">.</span><span class="ident" id="5263831"><a href="/gostd/net/rpc/client.go.html#5262442">request</a></span><span class="op" id="5263838">,</span>&nbsp;<span class="ident" id="5263840"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5263844">.</span><span class="ident" id="5263845"><a href="/gostd/net/rpc/client.go.html#5261907">Args</a></span><span class="op" id="5263849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5263852">if</span>&nbsp;<span class="ident" id="5263855"><a href="/gostd/net/rpc/client.go.html#5263790">err</a></span>&nbsp;<span class="op" id="5263859">!=</span>&nbsp;<span class="builtintype" id="5263862">nil</span>&nbsp;<span class="op" id="5263866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263870"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263876">.</span><span class="ident" id="5263877"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5263882">.</span><span class="ident" id="5263883"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5263887">(</span><span class="op" id="5263888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263892"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span>&nbsp;<span class="op" id="5263897">=</span>&nbsp;<span class="ident" id="5263899"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263905">.</span><span class="ident" id="5263906"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5263913">[</span><span class="ident" id="5263914"><a href="/gostd/net/rpc/client.go.html#5263595">seq</a></span><span class="op" id="5263917">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5263921">delete</span><span class="op" id="5263927">(</span><span class="ident" id="5263928"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263934">.</span><span class="ident" id="5263935"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5263942">,</span>&nbsp;<span class="ident" id="5263944"><a href="/gostd/net/rpc/client.go.html#5263595">seq</a></span><span class="op" id="5263947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263951"><a href="/gostd/net/rpc/client.go.html#5263340">client</a></span><span class="op" id="5263957">.</span><span class="ident" id="5263958"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5263963">.</span><span class="ident" id="5263964"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5263970">(</span><span class="op" id="5263971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5263975">if</span>&nbsp;<span class="ident" id="5263978"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span>&nbsp;<span class="op" id="5263983">!=</span>&nbsp;<span class="builtintype" id="5263986">nil</span>&nbsp;<span class="op" id="5263990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5263995"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5263999">.</span><span class="ident" id="5264000"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span>&nbsp;<span class="op" id="5264006">=</span>&nbsp;<span class="ident" id="5264008"><a href="/gostd/net/rpc/client.go.html#5263790">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264015"><a href="/gostd/net/rpc/client.go.html#5263361">call</a></span><span class="op" id="5264019">.</span><span class="ident" id="5264020"><a href="/gostd/net/rpc/client.go.html#5265809">done</a></span><span class="op" id="5264024">(</span><span class="op" id="5264025">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5264029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5264032">}</span><br>
<span class="lineno"></span><span class="op" id="5264034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5264037">func</span>&nbsp;<span class="op" id="5264042">(</span><span class="ident" id="5264043">client</span>&nbsp;<span class="op" id="5264050">*</span><span class="ident" id="5264051"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5264057">)</span>&nbsp;<span class="ident" id="5264059">input</span><span class="op" id="5264064">(</span><span class="op" id="5264065">)</span>&nbsp;<span class="op" id="5264067">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264070">var</span>&nbsp;<span class="ident" id="5264074">err</span>&nbsp;<span class="builtintype" id="5264078">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264085">var</span>&nbsp;<span class="ident" id="5264089">response</span>&nbsp;<span class="ident" id="5264098"><a href="/gostd/net/rpc/server.go.html#5277724">Response</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264108">for</span>&nbsp;<span class="ident" id="5264112"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264116">==</span>&nbsp;<span class="builtintype" id="5264119">nil</span>&nbsp;<span class="op" id="5264123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264127"><a href="/gostd/net/rpc/client.go.html#5264089">response</a></span>&nbsp;<span class="op" id="5264136">=</span>&nbsp;<span class="ident" id="5264138"><a href="/gostd/net/rpc/server.go.html#5277724">Response</a></span><span class="op" id="5264146">{</span><span class="op" id="5264147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264151"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264155">=</span>&nbsp;<span class="ident" id="5264157"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264163">.</span><span class="ident" id="5264164"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5264169">.</span><span class="ident" id="5264170"><a href="/gostd/net/rpc/client.go.html#5263242">ReadResponseHeader</a></span><span class="op" id="5264188">(</span><span class="op" id="5264189">&amp;</span><span class="ident" id="5264190"><a href="/gostd/net/rpc/client.go.html#5264089">response</a></span><span class="op" id="5264198">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264202">if</span>&nbsp;<span class="ident" id="5264205"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264209">!=</span>&nbsp;<span class="builtintype" id="5264212">nil</span>&nbsp;<span class="op" id="5264216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264221">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5264229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264233">seq</span>&nbsp;<span class="op" id="5264237">:=</span>&nbsp;<span class="ident" id="5264240"><a href="/gostd/net/rpc/client.go.html#5264089">response</a></span><span class="op" id="5264248">.</span><span class="ident" id="5264249"><a href="/gostd/net/rpc/server.go.html#5277798">Seq</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264255"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264261">.</span><span class="ident" id="5264262"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5264267">.</span><span class="ident" id="5264268"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5264272">(</span><span class="op" id="5264273">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264277">call</span>&nbsp;<span class="op" id="5264282">:=</span>&nbsp;<span class="ident" id="5264285"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264291">.</span><span class="ident" id="5264292"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5264299">[</span><span class="ident" id="5264300"><a href="/gostd/net/rpc/client.go.html#5264233">seq</a></span><span class="op" id="5264303">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5264307">delete</span><span class="op" id="5264313">(</span><span class="ident" id="5264314"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264320">.</span><span class="ident" id="5264321"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5264328">,</span>&nbsp;<span class="ident" id="5264330"><a href="/gostd/net/rpc/client.go.html#5264233">seq</a></span><span class="op" id="5264333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264337"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264343">.</span><span class="ident" id="5264344"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5264349">.</span><span class="ident" id="5264350"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5264356">(</span><span class="op" id="5264357">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264362">switch</span>&nbsp;<span class="op" id="5264369">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264373">case</span>&nbsp;<span class="ident" id="5264378"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span>&nbsp;<span class="op" id="5264383">==</span>&nbsp;<span class="builtintype" id="5264386">nil</span><span class="op" id="5264389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264394">//&nbsp;We&#39;ve&nbsp;got&nbsp;no&nbsp;pending&nbsp;call.&nbsp;That&nbsp;usually&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264451">//&nbsp;WriteRequest&nbsp;partially&nbsp;failed,&nbsp;and&nbsp;call&nbsp;was&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264509">//&nbsp;removed;&nbsp;response&nbsp;is&nbsp;a&nbsp;server&nbsp;telling&nbsp;us&nbsp;about&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264565">//&nbsp;error&nbsp;reading&nbsp;request&nbsp;body.&nbsp;We&nbsp;should&nbsp;still&nbsp;attempt</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264623">//&nbsp;to&nbsp;read&nbsp;error&nbsp;body,&nbsp;but&nbsp;there&#39;s&nbsp;no&nbsp;one&nbsp;to&nbsp;give&nbsp;it&nbsp;to.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264683"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264687">=</span>&nbsp;<span class="ident" id="5264689"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5264695">.</span><span class="ident" id="5264696"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5264701">.</span><span class="ident" id="5264702"><a href="/gostd/net/rpc/client.go.html#5263279">ReadResponseBody</a></span><span class="op" id="5264718">(</span><span class="builtintype" id="5264719">nil</span><span class="op" id="5264722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264727">if</span>&nbsp;<span class="ident" id="5264730"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264734">!=</span>&nbsp;<span class="builtintype" id="5264737">nil</span>&nbsp;<span class="op" id="5264741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264747"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5264751">=</span>&nbsp;<span class="ident" id="5264753"><a href="/gostd/net/rpc/client.go.html#5261481">errors</a></span><span class="op" id="5264759">.</span><span class="ident" id="5264760"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5264763">(</span><span class="string" id="5264764">&#34;reading&nbsp;error&nbsp;body:&nbsp;&#34;</span>&nbsp;<span class="op" id="5264787">+</span>&nbsp;<span class="ident" id="5264789"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span><span class="op" id="5264792">.</span><span class="ident" id="5264793">Error</span><span class="op" id="5264798">(</span><span class="op" id="5264799">)</span><span class="op" id="5264800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5264805">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5264809">case</span>&nbsp;<span class="ident" id="5264814"><a href="/gostd/net/rpc/client.go.html#5264089">response</a></span><span class="op" id="5264822">.</span><span class="ident" id="5264823"><a href="/gostd/net/rpc/server.go.html#5277853">Error</a></span>&nbsp;<span class="op" id="5264829">!=</span>&nbsp;<span class="string" id="5264832">&#34;&#34;</span><span class="op" id="5264834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264839">//&nbsp;We&#39;ve&nbsp;got&nbsp;an&nbsp;error&nbsp;response.&nbsp;Give&nbsp;this&nbsp;to&nbsp;the&nbsp;request;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264900">//&nbsp;any&nbsp;subsequent&nbsp;requests&nbsp;will&nbsp;get&nbsp;the&nbsp;ReadResponseBody</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5264960">//&nbsp;error&nbsp;if&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5264989"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span><span class="op" id="5264993">.</span><span class="ident" id="5264994"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span>&nbsp;<span class="op" id="5265000">=</span>&nbsp;<span class="ident" id="5265002"><a href="/gostd/net/rpc/client.go.html#5261643">ServerError</a></span><span class="op" id="5265013">(</span><span class="ident" id="5265014"><a href="/gostd/net/rpc/client.go.html#5264089">response</a></span><span class="op" id="5265022">.</span><span class="ident" id="5265023"><a href="/gostd/net/rpc/server.go.html#5277853">Error</a></span><span class="op" id="5265028">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265033"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265037">=</span>&nbsp;<span class="ident" id="5265039"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265045">.</span><span class="ident" id="5265046"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5265051">.</span><span class="ident" id="5265052"><a href="/gostd/net/rpc/client.go.html#5263279">ReadResponseBody</a></span><span class="op" id="5265068">(</span><span class="builtintype" id="5265069">nil</span><span class="op" id="5265072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265077">if</span>&nbsp;<span class="ident" id="5265080"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265084">!=</span>&nbsp;<span class="builtintype" id="5265087">nil</span>&nbsp;<span class="op" id="5265091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265097"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265101">=</span>&nbsp;<span class="ident" id="5265103"><a href="/gostd/net/rpc/client.go.html#5261481">errors</a></span><span class="op" id="5265109">.</span><span class="ident" id="5265110"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5265113">(</span><span class="string" id="5265114">&#34;reading&nbsp;error&nbsp;body:&nbsp;&#34;</span>&nbsp;<span class="op" id="5265137">+</span>&nbsp;<span class="ident" id="5265139"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span><span class="op" id="5265142">.</span><span class="ident" id="5265143">Error</span><span class="op" id="5265148">(</span><span class="op" id="5265149">)</span><span class="op" id="5265150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265160"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span><span class="op" id="5265164">.</span><span class="ident" id="5265165"><a href="/gostd/net/rpc/client.go.html#5265809">done</a></span><span class="op" id="5265169">(</span><span class="op" id="5265170">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265174">default</span><span class="op" id="5265181">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265186"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265190">=</span>&nbsp;<span class="ident" id="5265192"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265198">.</span><span class="ident" id="5265199"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5265204">.</span><span class="ident" id="5265205"><a href="/gostd/net/rpc/client.go.html#5263279">ReadResponseBody</a></span><span class="op" id="5265221">(</span><span class="ident" id="5265222"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span><span class="op" id="5265226">.</span><span class="ident" id="5265227"><a href="/gostd/net/rpc/client.go.html#5261977">Reply</a></span><span class="op" id="5265232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265237">if</span>&nbsp;<span class="ident" id="5265240"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265244">!=</span>&nbsp;<span class="builtintype" id="5265247">nil</span>&nbsp;<span class="op" id="5265251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265257"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span><span class="op" id="5265261">.</span><span class="ident" id="5265262"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span>&nbsp;<span class="op" id="5265268">=</span>&nbsp;<span class="ident" id="5265270"><a href="/gostd/net/rpc/client.go.html#5261481">errors</a></span><span class="op" id="5265276">.</span><span class="ident" id="5265277"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5265280">(</span><span class="string" id="5265281">&#34;reading&nbsp;body&nbsp;&#34;</span>&nbsp;<span class="op" id="5265297">+</span>&nbsp;<span class="ident" id="5265299"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span><span class="op" id="5265302">.</span><span class="ident" id="5265303">Error</span><span class="op" id="5265308">(</span><span class="op" id="5265309">)</span><span class="op" id="5265310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265315">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265320"><a href="/gostd/net/rpc/client.go.html#5264277">call</a></span><span class="op" id="5265324">.</span><span class="ident" id="5265325"><a href="/gostd/net/rpc/client.go.html#5265809">done</a></span><span class="op" id="5265329">(</span><span class="op" id="5265330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5265340">//&nbsp;Terminate&nbsp;pending&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265369"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265375">.</span><span class="ident" id="5265376"><a href="/gostd/net/rpc/client.go.html#5262399">reqMutex</a></span><span class="op" id="5265384">.</span><span class="ident" id="5265385"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5265389">(</span><span class="op" id="5265390">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265393"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265399">.</span><span class="ident" id="5265400"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5265405">.</span><span class="ident" id="5265406"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5265410">(</span><span class="op" id="5265411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265414"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265420">.</span><span class="ident" id="5265421"><a href="/gostd/net/rpc/client.go.html#5262588">shutdown</a></span>&nbsp;<span class="op" id="5265430">=</span>&nbsp;<span class="builtintype" id="5265432">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265438">closing</span>&nbsp;<span class="op" id="5265446">:=</span>&nbsp;<span class="ident" id="5265449"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265455">.</span><span class="ident" id="5265456"><a href="/gostd/net/rpc/client.go.html#5262548">closing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265465">if</span>&nbsp;<span class="ident" id="5265468"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265472">==</span>&nbsp;<span class="ident" id="5265475"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5265477">.</span><span class="ident" id="5265478"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5265482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265486">if</span>&nbsp;<span class="ident" id="5265489"><a href="/gostd/net/rpc/client.go.html#5265438">closing</a></span>&nbsp;<span class="op" id="5265497">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265502"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265506">=</span>&nbsp;<span class="ident" id="5265508"><a href="/gostd/net/rpc/client.go.html#5261726">ErrShutdown</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265522">}</span>&nbsp;<span class="keyword" id="5265524">else</span>&nbsp;<span class="op" id="5265529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265534"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265538">=</span>&nbsp;<span class="ident" id="5265540"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5265542">.</span><span class="ident" id="5265543"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265565">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265568">for</span>&nbsp;<span class="ident" id="5265572">_</span><span class="op" id="5265573">,</span>&nbsp;<span class="ident" id="5265575">call</span>&nbsp;<span class="op" id="5265580">:=</span>&nbsp;<span class="keyword" id="5265583">range</span>&nbsp;<span class="ident" id="5265589"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265595">.</span><span class="ident" id="5265596"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span>&nbsp;<span class="op" id="5265604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265608"><a href="/gostd/net/rpc/client.go.html#5265575">call</a></span><span class="op" id="5265612">.</span><span class="ident" id="5265613"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span>&nbsp;<span class="op" id="5265619">=</span>&nbsp;<span class="ident" id="5265621"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265627"><a href="/gostd/net/rpc/client.go.html#5265575">call</a></span><span class="op" id="5265631">.</span><span class="ident" id="5265632"><a href="/gostd/net/rpc/client.go.html#5265809">done</a></span><span class="op" id="5265636">(</span><span class="op" id="5265637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265643"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265649">.</span><span class="ident" id="5265650"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5265655">.</span><span class="ident" id="5265656"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5265662">(</span><span class="op" id="5265663">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265666"><a href="/gostd/net/rpc/client.go.html#5264043">client</a></span><span class="op" id="5265672">.</span><span class="ident" id="5265673"><a href="/gostd/net/rpc/client.go.html#5262399">reqMutex</a></span><span class="op" id="5265681">.</span><span class="ident" id="5265682"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5265688">(</span><span class="op" id="5265689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265692">if</span>&nbsp;<span class="ident" id="5265695"><a href="/gostd/net/rpc/debug.go.html#5270990">debugLog</a></span>&nbsp;<span class="op" id="5265704">&amp;&amp;</span>&nbsp;<span class="ident" id="5265707"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span>&nbsp;<span class="op" id="5265711">!=</span>&nbsp;<span class="ident" id="5265714"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5265716">.</span><span class="ident" id="5265717"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5265721">&amp;&amp;</span>&nbsp;<span class="op" id="5265724">!</span><span class="ident" id="5265725"><a href="/gostd/net/rpc/client.go.html#5265438">closing</a></span>&nbsp;<span class="op" id="5265733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265737"><a href="/gostd/net/rpc/client.go.html#5261497">log</a></span><span class="op" id="5265740">.</span><span class="ident" id="5265741"><a href="/gostd/log/log.go.html#4078868">Println</a></span><span class="op" id="5265748">(</span><span class="string" id="5265749">&#34;rpc:&nbsp;client&nbsp;protocol&nbsp;error:&#34;</span><span class="op" id="5265778">,</span>&nbsp;<span class="ident" id="5265780"><a href="/gostd/net/rpc/client.go.html#5264074">err</a></span><span class="op" id="5265783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265786">}</span><br>
<span class="lineno"></span><span class="op" id="5265788">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="5265791">func</span>&nbsp;<span class="op" id="5265796">(</span><span class="ident" id="5265797">call</span>&nbsp;<span class="op" id="5265802">*</span><span class="ident" id="5265803"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5265807">)</span>&nbsp;<span class="ident" id="5265809">done</span><span class="op" id="5265813">(</span><span class="op" id="5265814">)</span>&nbsp;<span class="op" id="5265816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265819">select</span>&nbsp;<span class="op" id="5265826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265829">case</span>&nbsp;<span class="ident" id="5265834"><a href="/gostd/net/rpc/client.go.html#5265797">call</a></span><span class="op" id="5265838">.</span><span class="ident" id="5265839"><a href="/gostd/net/rpc/client.go.html#5262112">Done</a></span>&nbsp;<span class="op" id="5265844">&lt;-</span>&nbsp;<span class="ident" id="5265847"><a href="/gostd/net/rpc/client.go.html#5265797">call</a></span><span class="op" id="5265851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5265855">//&nbsp;ok</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265862">default</span><span class="op" id="5265869">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5265873">//&nbsp;We&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;block&nbsp;here.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;make</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5265950">//&nbsp;sure&nbsp;the&nbsp;channel&nbsp;has&nbsp;enough&nbsp;buffer&nbsp;space.&nbsp;See&nbsp;comment&nbsp;in&nbsp;Go().</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5266018">if</span>&nbsp;<span class="ident" id="5266021"><a href="/gostd/net/rpc/debug.go.html#5270990">debugLog</a></span>&nbsp;<span class="op" id="5266030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266035"><a href="/gostd/net/rpc/client.go.html#5261497">log</a></span><span class="op" id="5266038">.</span><span class="ident" id="5266039"><a href="/gostd/log/log.go.html#4078868">Println</a></span><span class="op" id="5266046">(</span><span class="string" id="5266047">&#34;rpc:&nbsp;discarding&nbsp;Call&nbsp;reply&nbsp;due&nbsp;to&nbsp;insufficient&nbsp;Done&nbsp;chan&nbsp;capacity&#34;</span><span class="op" id="5266114">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5266118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5266121">}</span><br>
<span class="lineno"></span><span class="op" id="5266123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5266126">//&nbsp;NewClient&nbsp;returns&nbsp;a&nbsp;new&nbsp;Client&nbsp;to&nbsp;handle&nbsp;requests&nbsp;to&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="5266186">//&nbsp;set&nbsp;of&nbsp;services&nbsp;at&nbsp;the&nbsp;other&nbsp;end&nbsp;of&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="5266241">//&nbsp;It&nbsp;adds&nbsp;a&nbsp;buffer&nbsp;to&nbsp;the&nbsp;write&nbsp;side&nbsp;of&nbsp;the&nbsp;connection&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="5266300">//&nbsp;the&nbsp;header&nbsp;and&nbsp;payload&nbsp;are&nbsp;sent&nbsp;as&nbsp;a&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5266346">func</span>&nbsp;<span class="ident" id="5266351">NewClient</span><span class="op" id="5266360">(</span><span class="ident" id="5266361">conn</span>&nbsp;<span class="ident" id="5266366"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5266368">.</span><span class="ident" id="5266369"><a href="/gostd/io/io.go.html#1423677">ReadWriteCloser</a></span><span class="op" id="5266384">)</span>&nbsp;<span class="op" id="5266386">*</span><span class="ident" id="5266387"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span>&nbsp;<span class="op" id="5266394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266397">encBuf</span>&nbsp;<span class="op" id="5266404">:=</span>&nbsp;<span class="ident" id="5266407"><a href="/gostd/net/rpc/client.go.html#5261456">bufio</a></span><span class="op" id="5266412">.</span><span class="ident" id="5266413"><a href="/gostd/bufio/bufio.go.html#1367149">NewWriter</a></span><span class="op" id="5266422">(</span><span class="ident" id="5266423"><a href="/gostd/net/rpc/client.go.html#5266361">conn</a></span><span class="op" id="5266427">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266430">client</span>&nbsp;<span class="op" id="5266437">:=</span>&nbsp;<span class="op" id="5266440">&amp;</span><span class="ident" id="5266441"><a href="/gostd/net/rpc/client.go.html#5266838">gobClientCodec</a></span><span class="op" id="5266455">{</span><span class="ident" id="5266456"><a href="/gostd/net/rpc/client.go.html#5266361">conn</a></span><span class="op" id="5266460">,</span>&nbsp;<span class="ident" id="5266462"><a href="/gostd/net/rpc/client.go.html#5261465">gob</a></span><span class="op" id="5266465">.</span><span class="ident" id="5266466"><a href="/gostd/encoding/gob/decoder.go.html#5347520">NewDecoder</a></span><span class="op" id="5266476">(</span><span class="ident" id="5266477"><a href="/gostd/net/rpc/client.go.html#5266361">conn</a></span><span class="op" id="5266481">)</span><span class="op" id="5266482">,</span>&nbsp;<span class="ident" id="5266484"><a href="/gostd/net/rpc/client.go.html#5261465">gob</a></span><span class="op" id="5266487">.</span><span class="ident" id="5266488"><a href="/gostd/encoding/gob/encoder.go.html#5399935">NewEncoder</a></span><span class="op" id="5266498">(</span><span class="ident" id="5266499"><a href="/gostd/net/rpc/client.go.html#5266397">encBuf</a></span><span class="op" id="5266505">)</span><span class="op" id="5266506">,</span>&nbsp;<span class="ident" id="5266508"><a href="/gostd/net/rpc/client.go.html#5266397">encBuf</a></span><span class="op" id="5266514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5266517">return</span>&nbsp;<span class="ident" id="5266524"><a href="/gostd/net/rpc/client.go.html#5266672">NewClientWithCodec</a></span><span class="op" id="5266542">(</span><span class="ident" id="5266543"><a href="/gostd/net/rpc/client.go.html#5266430">client</a></span><span class="op" id="5266549">)</span><br>
<span class="lineno"></span><span class="op" id="5266551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5266554">//&nbsp;NewClientWithCodec&nbsp;is&nbsp;like&nbsp;NewClient&nbsp;but&nbsp;uses&nbsp;the&nbsp;specified</span><br>
<span class="lineno">195</span><span class="comment" id="5266617">//&nbsp;codec&nbsp;to&nbsp;encode&nbsp;requests&nbsp;and&nbsp;decode&nbsp;responses.</span><br>
<span class="lineno"></span><span class="keyword" id="5266667">func</span>&nbsp;<span class="ident" id="5266672">NewClientWithCodec</span><span class="op" id="5266690">(</span><span class="ident" id="5266691">codec</span>&nbsp;<span class="ident" id="5266697"><a href="/gostd/net/rpc/client.go.html#5263101">ClientCodec</a></span><span class="op" id="5266708">)</span>&nbsp;<span class="op" id="5266710">*</span><span class="ident" id="5266711"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span>&nbsp;<span class="op" id="5266718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266721">client</span>&nbsp;<span class="op" id="5266728">:=</span>&nbsp;<span class="op" id="5266731">&amp;</span><span class="ident" id="5266732"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5266738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266742"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5266747">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5266751"><a href="/gostd/net/rpc/client.go.html#5266691">codec</a></span><span class="op" id="5266756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266760"><a href="/gostd/net/rpc/client.go.html#5262521">pending</a></span><span class="op" id="5266767">:</span>&nbsp;<span class="builtinfunc" id="5266769">make</span><span class="op" id="5266773">(</span><span class="keyword" id="5266774">map</span><span class="op" id="5266777">[</span><span class="builtintype" id="5266778">uint64</span><span class="op" id="5266784">]</span><span class="op" id="5266785">*</span><span class="ident" id="5266786"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5266790">)</span><span class="op" id="5266791">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5266794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5266797">go</span>&nbsp;<span class="ident" id="5266800"><a href="/gostd/net/rpc/client.go.html#5266721">client</a></span><span class="op" id="5266806">.</span><span class="ident" id="5266807"><a href="/gostd/net/rpc/client.go.html#5264059">input</a></span><span class="op" id="5266812">(</span><span class="op" id="5266813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5266816">return</span>&nbsp;<span class="ident" id="5266823"><a href="/gostd/net/rpc/client.go.html#5266721">client</a></span><br>
<span class="lineno"></span><span class="op" id="5266830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="5266833">type</span>&nbsp;<span class="ident" id="5266838">gobClientCodec</span>&nbsp;<span class="keyword" id="5266853">struct</span>&nbsp;<span class="op" id="5266860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266863">rwc</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266870"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5266872">.</span><span class="ident" id="5266873"><a href="/gostd/io/io.go.html#1423677">ReadWriteCloser</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266890">dec</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5266897">*</span><span class="ident" id="5266898"><a href="/gostd/net/rpc/client.go.html#5261465">gob</a></span><span class="op" id="5266901">.</span><span class="ident" id="5266902"><a href="/gostd/encoding/gob/decoder.go.html#5346580">Decoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266911">enc</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5266918">*</span><span class="ident" id="5266919"><a href="/gostd/net/rpc/client.go.html#5261465">gob</a></span><span class="op" id="5266922">.</span><span class="ident" id="5266923"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5266932">encBuf</span>&nbsp;<span class="op" id="5266939">*</span><span class="ident" id="5266940"><a href="/gostd/net/rpc/client.go.html#5261456">bufio</a></span><span class="op" id="5266945">.</span><span class="ident" id="5266946"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><br>
<span class="lineno">210</span><span class="op" id="5266953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5266956">func</span>&nbsp;<span class="op" id="5266961">(</span><span class="ident" id="5266962">c</span>&nbsp;<span class="op" id="5266964">*</span><span class="ident" id="5266965"><a href="/gostd/net/rpc/client.go.html#5266838">gobClientCodec</a></span><span class="op" id="5266979">)</span>&nbsp;<span class="ident" id="5266981">WriteRequest</span><span class="op" id="5266993">(</span><span class="ident" id="5266994">r</span>&nbsp;<span class="op" id="5266996">*</span><span class="ident" id="5266997"><a href="/gostd/net/rpc/server.go.html#5277366">Request</a></span><span class="op" id="5267004">,</span>&nbsp;<span class="ident" id="5267006">body</span>&nbsp;<span class="keyword" id="5267011">interface</span><span class="op" id="5267020">{</span><span class="op" id="5267021">}</span><span class="op" id="5267022">)</span>&nbsp;<span class="op" id="5267024">(</span><span class="ident" id="5267025">err</span>&nbsp;<span class="builtintype" id="5267029">error</span><span class="op" id="5267034">)</span>&nbsp;<span class="op" id="5267036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267039">if</span>&nbsp;<span class="ident" id="5267042"><a href="/gostd/net/rpc/client.go.html#5267025">err</a></span>&nbsp;<span class="op" id="5267046">=</span>&nbsp;<span class="ident" id="5267048"><a href="/gostd/net/rpc/client.go.html#5266962">c</a></span><span class="op" id="5267049">.</span><span class="ident" id="5267050"><a href="/gostd/net/rpc/client.go.html#5266911">enc</a></span><span class="op" id="5267053">.</span><span class="ident" id="5267054"><a href="/gostd/encoding/gob/encoder.go.html#5403967">Encode</a></span><span class="op" id="5267060">(</span><span class="ident" id="5267061"><a href="/gostd/net/rpc/client.go.html#5266994">r</a></span><span class="op" id="5267062">)</span><span class="op" id="5267063">;</span>&nbsp;<span class="ident" id="5267065"><a href="/gostd/net/rpc/client.go.html#5267025">err</a></span>&nbsp;<span class="op" id="5267069">!=</span>&nbsp;<span class="builtintype" id="5267072">nil</span>&nbsp;<span class="op" id="5267076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267080">return</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5267088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267091">if</span>&nbsp;<span class="ident" id="5267094"><a href="/gostd/net/rpc/client.go.html#5267025">err</a></span>&nbsp;<span class="op" id="5267098">=</span>&nbsp;<span class="ident" id="5267100"><a href="/gostd/net/rpc/client.go.html#5266962">c</a></span><span class="op" id="5267101">.</span><span class="ident" id="5267102"><a href="/gostd/net/rpc/client.go.html#5266911">enc</a></span><span class="op" id="5267105">.</span><span class="ident" id="5267106"><a href="/gostd/encoding/gob/encoder.go.html#5403967">Encode</a></span><span class="op" id="5267112">(</span><span class="ident" id="5267113"><a href="/gostd/net/rpc/client.go.html#5267006">body</a></span><span class="op" id="5267117">)</span><span class="op" id="5267118">;</span>&nbsp;<span class="ident" id="5267120"><a href="/gostd/net/rpc/client.go.html#5267025">err</a></span>&nbsp;<span class="op" id="5267124">!=</span>&nbsp;<span class="builtintype" id="5267127">nil</span>&nbsp;<span class="op" id="5267131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267135">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5267143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267146">return</span>&nbsp;<span class="ident" id="5267153"><a href="/gostd/net/rpc/client.go.html#5266962">c</a></span><span class="op" id="5267154">.</span><span class="ident" id="5267155"><a href="/gostd/net/rpc/client.go.html#5266932">encBuf</a></span><span class="op" id="5267161">.</span><span class="ident" id="5267162"><a href="/gostd/bufio/bufio.go.html#1367486">Flush</a></span><span class="op" id="5267167">(</span><span class="op" id="5267168">)</span><br>
<span class="lineno">220</span><span class="op" id="5267170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5267173">func</span>&nbsp;<span class="op" id="5267178">(</span><span class="ident" id="5267179">c</span>&nbsp;<span class="op" id="5267181">*</span><span class="ident" id="5267182"><a href="/gostd/net/rpc/client.go.html#5266838">gobClientCodec</a></span><span class="op" id="5267196">)</span>&nbsp;<span class="ident" id="5267198">ReadResponseHeader</span><span class="op" id="5267216">(</span><span class="ident" id="5267217">r</span>&nbsp;<span class="op" id="5267219">*</span><span class="ident" id="5267220"><a href="/gostd/net/rpc/server.go.html#5277724">Response</a></span><span class="op" id="5267228">)</span>&nbsp;<span class="builtintype" id="5267230">error</span>&nbsp;<span class="op" id="5267236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267239">return</span>&nbsp;<span class="ident" id="5267246"><a href="/gostd/net/rpc/client.go.html#5267179">c</a></span><span class="op" id="5267247">.</span><span class="ident" id="5267248"><a href="/gostd/net/rpc/client.go.html#5266890">dec</a></span><span class="op" id="5267251">.</span><span class="ident" id="5267252"><a href="/gostd/encoding/gob/decoder.go.html#5351182">Decode</a></span><span class="op" id="5267258">(</span><span class="ident" id="5267259"><a href="/gostd/net/rpc/client.go.html#5267217">r</a></span><span class="op" id="5267260">)</span><br>
<span class="lineno"></span><span class="op" id="5267262">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="keyword" id="5267265">func</span>&nbsp;<span class="op" id="5267270">(</span><span class="ident" id="5267271">c</span>&nbsp;<span class="op" id="5267273">*</span><span class="ident" id="5267274"><a href="/gostd/net/rpc/client.go.html#5266838">gobClientCodec</a></span><span class="op" id="5267288">)</span>&nbsp;<span class="ident" id="5267290">ReadResponseBody</span><span class="op" id="5267306">(</span><span class="ident" id="5267307">body</span>&nbsp;<span class="keyword" id="5267312">interface</span><span class="op" id="5267321">{</span><span class="op" id="5267322">}</span><span class="op" id="5267323">)</span>&nbsp;<span class="builtintype" id="5267325">error</span>&nbsp;<span class="op" id="5267331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267334">return</span>&nbsp;<span class="ident" id="5267341"><a href="/gostd/net/rpc/client.go.html#5267271">c</a></span><span class="op" id="5267342">.</span><span class="ident" id="5267343"><a href="/gostd/net/rpc/client.go.html#5266890">dec</a></span><span class="op" id="5267346">.</span><span class="ident" id="5267347"><a href="/gostd/encoding/gob/decoder.go.html#5351182">Decode</a></span><span class="op" id="5267353">(</span><span class="ident" id="5267354"><a href="/gostd/net/rpc/client.go.html#5267307">body</a></span><span class="op" id="5267358">)</span><br>
<span class="lineno"></span><span class="op" id="5267360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="5267363">func</span>&nbsp;<span class="op" id="5267368">(</span><span class="ident" id="5267369">c</span>&nbsp;<span class="op" id="5267371">*</span><span class="ident" id="5267372"><a href="/gostd/net/rpc/client.go.html#5266838">gobClientCodec</a></span><span class="op" id="5267386">)</span>&nbsp;<span class="ident" id="5267388">Close</span><span class="op" id="5267393">(</span><span class="op" id="5267394">)</span>&nbsp;<span class="builtintype" id="5267396">error</span>&nbsp;<span class="op" id="5267402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267405">return</span>&nbsp;<span class="ident" id="5267412"><a href="/gostd/net/rpc/client.go.html#5267369">c</a></span><span class="op" id="5267413">.</span><span class="ident" id="5267414"><a href="/gostd/net/rpc/client.go.html#5266863">rwc</a></span><span class="op" id="5267417">.</span><span class="ident" id="5267418"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5267423">(</span><span class="op" id="5267424">)</span><br>
<span class="lineno"></span><span class="op" id="5267426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5267429">//&nbsp;DialHTTP&nbsp;connects&nbsp;to&nbsp;an&nbsp;HTTP&nbsp;RPC&nbsp;server&nbsp;at&nbsp;the&nbsp;specified&nbsp;network&nbsp;address</span><br>
<span class="lineno">235</span><span class="comment" id="5267505">//&nbsp;listening&nbsp;on&nbsp;the&nbsp;default&nbsp;HTTP&nbsp;RPC&nbsp;path.</span><br>
<span class="lineno"></span><span class="keyword" id="5267548">func</span>&nbsp;<span class="ident" id="5267553">DialHTTP</span><span class="op" id="5267561">(</span><span class="ident" id="5267562">network</span><span class="op" id="5267569">,</span>&nbsp;<span class="ident" id="5267571">address</span>&nbsp;<span class="builtintype" id="5267579">string</span><span class="op" id="5267585">)</span>&nbsp;<span class="op" id="5267587">(</span><span class="op" id="5267588">*</span><span class="ident" id="5267589"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5267595">,</span>&nbsp;<span class="builtintype" id="5267597">error</span><span class="op" id="5267602">)</span>&nbsp;<span class="op" id="5267604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267607">return</span>&nbsp;<span class="ident" id="5267614"><a href="/gostd/net/rpc/client.go.html#5267762">DialHTTPPath</a></span><span class="op" id="5267626">(</span><span class="ident" id="5267627"><a href="/gostd/net/rpc/client.go.html#5267562">network</a></span><span class="op" id="5267634">,</span>&nbsp;<span class="ident" id="5267636"><a href="/gostd/net/rpc/client.go.html#5267571">address</a></span><span class="op" id="5267643">,</span>&nbsp;<span class="ident" id="5267645"><a href="/gostd/net/rpc/server.go.html#5276527">DefaultRPCPath</a></span><span class="op" id="5267659">)</span><br>
<span class="lineno"></span><span class="op" id="5267661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="comment" id="5267664">//&nbsp;DialHTTPPath&nbsp;connects&nbsp;to&nbsp;an&nbsp;HTTP&nbsp;RPC&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="5267711">//&nbsp;at&nbsp;the&nbsp;specified&nbsp;network&nbsp;address&nbsp;and&nbsp;path.</span><br>
<span class="lineno"></span><span class="keyword" id="5267757">func</span>&nbsp;<span class="ident" id="5267762">DialHTTPPath</span><span class="op" id="5267774">(</span><span class="ident" id="5267775">network</span><span class="op" id="5267782">,</span>&nbsp;<span class="ident" id="5267784">address</span><span class="op" id="5267791">,</span>&nbsp;<span class="ident" id="5267793">path</span>&nbsp;<span class="builtintype" id="5267798">string</span><span class="op" id="5267804">)</span>&nbsp;<span class="op" id="5267806">(</span><span class="op" id="5267807">*</span><span class="ident" id="5267808"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5267814">,</span>&nbsp;<span class="builtintype" id="5267816">error</span><span class="op" id="5267821">)</span>&nbsp;<span class="op" id="5267823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267826">var</span>&nbsp;<span class="ident" id="5267830">err</span>&nbsp;<span class="builtintype" id="5267834">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5267841">conn</span><span class="op" id="5267845">,</span>&nbsp;<span class="ident" id="5267847"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5267851">:=</span>&nbsp;<span class="ident" id="5267854"><a href="/gostd/net/rpc/client.go.html#5261504">net</a></span><span class="op" id="5267857">.</span><span class="ident" id="5267858"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="5267862">(</span><span class="ident" id="5267863"><a href="/gostd/net/rpc/client.go.html#5267775">network</a></span><span class="op" id="5267870">,</span>&nbsp;<span class="ident" id="5267872"><a href="/gostd/net/rpc/client.go.html#5267784">address</a></span><span class="op" id="5267879">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267882">if</span>&nbsp;<span class="ident" id="5267885"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5267889">!=</span>&nbsp;<span class="builtintype" id="5267892">nil</span>&nbsp;<span class="op" id="5267896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5267900">return</span>&nbsp;<span class="builtintype" id="5267907">nil</span><span class="op" id="5267910">,</span>&nbsp;<span class="ident" id="5267912"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5267917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5267920"><a href="/gostd/net/rpc/client.go.html#5261491">io</a></span><span class="op" id="5267922">.</span><span class="ident" id="5267923"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="5267934">(</span><span class="ident" id="5267935"><a href="/gostd/net/rpc/client.go.html#5267841">conn</a></span><span class="op" id="5267939">,</span>&nbsp;<span class="string" id="5267941">&#34;CONNECT&nbsp;&#34;</span><span class="op" id="5267951">+</span><span class="ident" id="5267952"><a href="/gostd/net/rpc/client.go.html#5267793">path</a></span><span class="op" id="5267956">+</span><span class="string" id="5267957">&#34;&nbsp;HTTP/1.0\n\n&#34;</span><span class="op" id="5267972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5267976">//&nbsp;Require&nbsp;successful&nbsp;HTTP&nbsp;response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5268013">//&nbsp;before&nbsp;switching&nbsp;to&nbsp;RPC&nbsp;protocol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268051">resp</span><span class="op" id="5268055">,</span>&nbsp;<span class="ident" id="5268057"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5268061">:=</span>&nbsp;<span class="ident" id="5268064"><a href="/gostd/net/rpc/client.go.html#5261511">http</a></span><span class="op" id="5268068">.</span><span class="ident" id="5268069"><a href="/gostd/net/http/response.go.html#4164712">ReadResponse</a></span><span class="op" id="5268081">(</span><span class="ident" id="5268082"><a href="/gostd/net/rpc/client.go.html#5261456">bufio</a></span><span class="op" id="5268087">.</span><span class="ident" id="5268088"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="5268097">(</span><span class="ident" id="5268098"><a href="/gostd/net/rpc/client.go.html#5267841">conn</a></span><span class="op" id="5268102">)</span><span class="op" id="5268103">,</span>&nbsp;<span class="op" id="5268105">&amp;</span><span class="ident" id="5268106"><a href="/gostd/net/rpc/client.go.html#5261511">http</a></span><span class="op" id="5268110">.</span><span class="ident" id="5268111"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="5268118">{</span><span class="ident" id="5268119"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="5268125">:</span>&nbsp;<span class="string" id="5268127">&#34;CONNECT&#34;</span><span class="op" id="5268136">}</span><span class="op" id="5268137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268140">if</span>&nbsp;<span class="ident" id="5268143"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5268147">==</span>&nbsp;<span class="builtintype" id="5268150">nil</span>&nbsp;<span class="op" id="5268154">&amp;&amp;</span>&nbsp;<span class="ident" id="5268157"><a href="/gostd/net/rpc/client.go.html#5268051">resp</a></span><span class="op" id="5268161">.</span><span class="ident" id="5268162"><a href="/gostd/net/http/response.go.html#4161528">Status</a></span>&nbsp;<span class="op" id="5268169">==</span>&nbsp;<span class="ident" id="5268172"><a href="/gostd/net/rpc/server.go.html#5292612">connected</a></span>&nbsp;<span class="op" id="5268182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268186">return</span>&nbsp;<span class="ident" id="5268193"><a href="/gostd/net/rpc/client.go.html#5266351">NewClient</a></span><span class="op" id="5268202">(</span><span class="ident" id="5268203"><a href="/gostd/net/rpc/client.go.html#5267841">conn</a></span><span class="op" id="5268207">)</span><span class="op" id="5268208">,</span>&nbsp;<span class="builtintype" id="5268210">nil</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5268215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268218">if</span>&nbsp;<span class="ident" id="5268221"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5268225">==</span>&nbsp;<span class="builtintype" id="5268228">nil</span>&nbsp;<span class="op" id="5268232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268236"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span>&nbsp;<span class="op" id="5268240">=</span>&nbsp;<span class="ident" id="5268242"><a href="/gostd/net/rpc/client.go.html#5261481">errors</a></span><span class="op" id="5268248">.</span><span class="ident" id="5268249"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5268252">(</span><span class="string" id="5268253">&#34;unexpected&nbsp;HTTP&nbsp;response:&nbsp;&#34;</span>&nbsp;<span class="op" id="5268282">+</span>&nbsp;<span class="ident" id="5268284"><a href="/gostd/net/rpc/client.go.html#5268051">resp</a></span><span class="op" id="5268288">.</span><span class="ident" id="5268289"><a href="/gostd/net/http/response.go.html#4161528">Status</a></span><span class="op" id="5268295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5268298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268301"><a href="/gostd/net/rpc/client.go.html#5267841">conn</a></span><span class="op" id="5268305">.</span><span class="ident" id="5268306"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="5268311">(</span><span class="op" id="5268312">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268315">return</span>&nbsp;<span class="builtintype" id="5268322">nil</span><span class="op" id="5268325">,</span>&nbsp;<span class="op" id="5268327">&amp;</span><span class="ident" id="5268328"><a href="/gostd/net/rpc/client.go.html#5261504">net</a></span><span class="op" id="5268331">.</span><span class="ident" id="5268332"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="5268339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268343"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="5268345">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5268349">&#34;dial-http&#34;</span><span class="op" id="5268360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268364"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="5268367">:</span>&nbsp;&nbsp;<span class="ident" id="5268370"><a href="/gostd/net/rpc/client.go.html#5267775">network</a></span>&nbsp;<span class="op" id="5268378">+</span>&nbsp;<span class="string" id="5268380">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="5268384">+</span>&nbsp;<span class="ident" id="5268386"><a href="/gostd/net/rpc/client.go.html#5267784">address</a></span><span class="op" id="5268393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268397"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="5268401">:</span>&nbsp;<span class="builtintype" id="5268403">nil</span><span class="op" id="5268406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268410"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="5268413">:</span>&nbsp;&nbsp;<span class="ident" id="5268416"><a href="/gostd/net/rpc/client.go.html#5267830">err</a></span><span class="op" id="5268419">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5268422">}</span><br>
<span class="lineno"></span><span class="op" id="5268424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5268427">//&nbsp;Dial&nbsp;connects&nbsp;to&nbsp;an&nbsp;RPC&nbsp;server&nbsp;at&nbsp;the&nbsp;specified&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5268495">func</span>&nbsp;<span class="ident" id="5268500">Dial</span><span class="op" id="5268504">(</span><span class="ident" id="5268505">network</span><span class="op" id="5268512">,</span>&nbsp;<span class="ident" id="5268514">address</span>&nbsp;<span class="builtintype" id="5268522">string</span><span class="op" id="5268528">)</span>&nbsp;<span class="op" id="5268530">(</span><span class="op" id="5268531">*</span><span class="ident" id="5268532"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5268538">,</span>&nbsp;<span class="builtintype" id="5268540">error</span><span class="op" id="5268545">)</span>&nbsp;<span class="op" id="5268547">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268550">conn</span><span class="op" id="5268554">,</span>&nbsp;<span class="ident" id="5268556">err</span>&nbsp;<span class="op" id="5268560">:=</span>&nbsp;<span class="ident" id="5268563"><a href="/gostd/net/rpc/client.go.html#5261504">net</a></span><span class="op" id="5268566">.</span><span class="ident" id="5268567"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="5268571">(</span><span class="ident" id="5268572"><a href="/gostd/net/rpc/client.go.html#5268505">network</a></span><span class="op" id="5268579">,</span>&nbsp;<span class="ident" id="5268581"><a href="/gostd/net/rpc/client.go.html#5268514">address</a></span><span class="op" id="5268588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268591">if</span>&nbsp;<span class="ident" id="5268594"><a href="/gostd/net/rpc/client.go.html#5268556">err</a></span>&nbsp;<span class="op" id="5268598">!=</span>&nbsp;<span class="builtintype" id="5268601">nil</span>&nbsp;<span class="op" id="5268605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268609">return</span>&nbsp;<span class="builtintype" id="5268616">nil</span><span class="op" id="5268619">,</span>&nbsp;<span class="ident" id="5268621"><a href="/gostd/net/rpc/client.go.html#5268556">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5268626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268629">return</span>&nbsp;<span class="ident" id="5268636"><a href="/gostd/net/rpc/client.go.html#5266351">NewClient</a></span><span class="op" id="5268645">(</span><span class="ident" id="5268646"><a href="/gostd/net/rpc/client.go.html#5268550">conn</a></span><span class="op" id="5268650">)</span><span class="op" id="5268651">,</span>&nbsp;<span class="builtintype" id="5268653">nil</span><br>
<span class="lineno">275</span><span class="op" id="5268657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5268660">func</span>&nbsp;<span class="op" id="5268665">(</span><span class="ident" id="5268666">client</span>&nbsp;<span class="op" id="5268673">*</span><span class="ident" id="5268674"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5268680">)</span>&nbsp;<span class="ident" id="5268682">Close</span><span class="op" id="5268687">(</span><span class="op" id="5268688">)</span>&nbsp;<span class="builtintype" id="5268690">error</span>&nbsp;<span class="op" id="5268696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268699"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268705">.</span><span class="ident" id="5268706"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5268711">.</span><span class="ident" id="5268712"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5268716">(</span><span class="op" id="5268717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268720">if</span>&nbsp;<span class="ident" id="5268723"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268729">.</span><span class="ident" id="5268730"><a href="/gostd/net/rpc/client.go.html#5262548">closing</a></span>&nbsp;<span class="op" id="5268738">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268742"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268748">.</span><span class="ident" id="5268749"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5268754">.</span><span class="ident" id="5268755"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5268761">(</span><span class="op" id="5268762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268766">return</span>&nbsp;<span class="ident" id="5268773"><a href="/gostd/net/rpc/client.go.html#5261726">ErrShutdown</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5268786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268789"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268795">.</span><span class="ident" id="5268796"><a href="/gostd/net/rpc/client.go.html#5262548">closing</a></span>&nbsp;<span class="op" id="5268804">=</span>&nbsp;<span class="builtintype" id="5268806">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5268812"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268818">.</span><span class="ident" id="5268819"><a href="/gostd/net/rpc/client.go.html#5262461">mutex</a></span><span class="op" id="5268824">.</span><span class="ident" id="5268825"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5268831">(</span><span class="op" id="5268832">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5268835">return</span>&nbsp;<span class="ident" id="5268842"><a href="/gostd/net/rpc/client.go.html#5268666">client</a></span><span class="op" id="5268848">.</span><span class="ident" id="5268849"><a href="/gostd/net/rpc/client.go.html#5262379">codec</a></span><span class="op" id="5268854">.</span><span class="ident" id="5268855"><a href="/gostd/net/rpc/client.go.html#5263317">Close</a></span><span class="op" id="5268860">(</span><span class="op" id="5268861">)</span><br>
<span class="lineno"></span><span class="op" id="5268863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5268866">//&nbsp;Go&nbsp;invokes&nbsp;the&nbsp;function&nbsp;asynchronously.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;Call&nbsp;structure&nbsp;representing</span><br>
<span class="lineno"></span><span class="comment" id="5268953">//&nbsp;the&nbsp;invocation.&nbsp;&nbsp;The&nbsp;done&nbsp;channel&nbsp;will&nbsp;signal&nbsp;when&nbsp;the&nbsp;call&nbsp;is&nbsp;complete&nbsp;by&nbsp;returning</span><br>
<span class="lineno">290</span><span class="comment" id="5269041">//&nbsp;the&nbsp;same&nbsp;Call&nbsp;object.&nbsp;&nbsp;If&nbsp;done&nbsp;is&nbsp;nil,&nbsp;Go&nbsp;will&nbsp;allocate&nbsp;a&nbsp;new&nbsp;channel.</span><br>
<span class="lineno"></span><span class="comment" id="5269115">//&nbsp;If&nbsp;non-nil,&nbsp;done&nbsp;must&nbsp;be&nbsp;buffered&nbsp;or&nbsp;Go&nbsp;will&nbsp;deliberately&nbsp;crash.</span><br>
<span class="lineno"></span><span class="keyword" id="5269183">func</span>&nbsp;<span class="op" id="5269188">(</span><span class="ident" id="5269189">client</span>&nbsp;<span class="op" id="5269196">*</span><span class="ident" id="5269197"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5269203">)</span>&nbsp;<span class="ident" id="5269205">Go</span><span class="op" id="5269207">(</span><span class="ident" id="5269208">serviceMethod</span>&nbsp;<span class="builtintype" id="5269222">string</span><span class="op" id="5269228">,</span>&nbsp;<span class="ident" id="5269230">args</span>&nbsp;<span class="keyword" id="5269235">interface</span><span class="op" id="5269244">{</span><span class="op" id="5269245">}</span><span class="op" id="5269246">,</span>&nbsp;<span class="ident" id="5269248">reply</span>&nbsp;<span class="keyword" id="5269254">interface</span><span class="op" id="5269263">{</span><span class="op" id="5269264">}</span><span class="op" id="5269265">,</span>&nbsp;<span class="ident" id="5269267">done</span>&nbsp;<span class="keyword" id="5269272">chan</span>&nbsp;<span class="op" id="5269277">*</span><span class="ident" id="5269278"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5269282">)</span>&nbsp;<span class="op" id="5269284">*</span><span class="ident" id="5269285"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span>&nbsp;<span class="op" id="5269290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269293">call</span>&nbsp;<span class="op" id="5269298">:=</span>&nbsp;<span class="builtinfunc" id="5269301">new</span><span class="op" id="5269304">(</span><span class="ident" id="5269305"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5269309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269312"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><span class="op" id="5269316">.</span><span class="ident" id="5269317"><a href="/gostd/net/rpc/client.go.html#5261833">ServiceMethod</a></span>&nbsp;<span class="op" id="5269331">=</span>&nbsp;<span class="ident" id="5269333"><a href="/gostd/net/rpc/client.go.html#5269208">serviceMethod</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269348"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><span class="op" id="5269352">.</span><span class="ident" id="5269353"><a href="/gostd/net/rpc/client.go.html#5261907">Args</a></span>&nbsp;<span class="op" id="5269358">=</span>&nbsp;<span class="ident" id="5269360"><a href="/gostd/net/rpc/client.go.html#5269230">args</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269366"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><span class="op" id="5269370">.</span><span class="ident" id="5269371"><a href="/gostd/net/rpc/client.go.html#5261977">Reply</a></span>&nbsp;<span class="op" id="5269377">=</span>&nbsp;<span class="ident" id="5269379"><a href="/gostd/net/rpc/client.go.html#5269248">reply</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5269386">if</span>&nbsp;<span class="ident" id="5269389"><a href="/gostd/net/rpc/client.go.html#5269267">done</a></span>&nbsp;<span class="op" id="5269394">==</span>&nbsp;<span class="builtintype" id="5269397">nil</span>&nbsp;<span class="op" id="5269401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269405"><a href="/gostd/net/rpc/client.go.html#5269267">done</a></span>&nbsp;<span class="op" id="5269410">=</span>&nbsp;<span class="builtinfunc" id="5269412">make</span><span class="op" id="5269416">(</span><span class="keyword" id="5269417">chan</span>&nbsp;<span class="op" id="5269422">*</span><span class="ident" id="5269423"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5269427">,</span>&nbsp;<span class="num" id="5269429">10</span><span class="op" id="5269431">)</span>&nbsp;<span class="comment" id="5269433">//&nbsp;buffered.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5269447">}</span>&nbsp;<span class="keyword" id="5269449">else</span>&nbsp;<span class="op" id="5269454">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5269458">//&nbsp;If&nbsp;caller&nbsp;passes&nbsp;done&nbsp;!=&nbsp;nil,&nbsp;it&nbsp;must&nbsp;arrange&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5269514">//&nbsp;done&nbsp;has&nbsp;enough&nbsp;buffer&nbsp;for&nbsp;the&nbsp;number&nbsp;of&nbsp;simultaneous</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5269573">//&nbsp;RPCs&nbsp;that&nbsp;will&nbsp;be&nbsp;using&nbsp;that&nbsp;channel.&nbsp;&nbsp;If&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5269632">//&nbsp;is&nbsp;totally&nbsp;unbuffered,&nbsp;it&#39;s&nbsp;best&nbsp;not&nbsp;to&nbsp;run&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5269689">if</span>&nbsp;<span class="builtinfunc" id="5269692">cap</span><span class="op" id="5269695">(</span><span class="ident" id="5269696"><a href="/gostd/net/rpc/client.go.html#5269267">done</a></span><span class="op" id="5269700">)</span>&nbsp;<span class="op" id="5269702">==</span>&nbsp;<span class="num" id="5269705">0</span>&nbsp;<span class="op" id="5269707">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269712"><a href="/gostd/net/rpc/client.go.html#5261497">log</a></span><span class="op" id="5269715">.</span><span class="ident" id="5269716"><a href="/gostd/log/log.go.html#4079480">Panic</a></span><span class="op" id="5269721">(</span><span class="string" id="5269722">&#34;rpc:&nbsp;done&nbsp;channel&nbsp;is&nbsp;unbuffered&#34;</span><span class="op" id="5269755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5269759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5269762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269765"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><span class="op" id="5269769">.</span><span class="ident" id="5269770"><a href="/gostd/net/rpc/client.go.html#5262112">Done</a></span>&nbsp;<span class="op" id="5269775">=</span>&nbsp;<span class="ident" id="5269777"><a href="/gostd/net/rpc/client.go.html#5269267">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5269783"><a href="/gostd/net/rpc/client.go.html#5269189">client</a></span><span class="op" id="5269789">.</span><span class="ident" id="5269790"><a href="/gostd/net/rpc/client.go.html#5263356">send</a></span><span class="op" id="5269794">(</span><span class="ident" id="5269795"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><span class="op" id="5269799">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5269802">return</span>&nbsp;<span class="ident" id="5269809"><a href="/gostd/net/rpc/client.go.html#5269293">call</a></span><br>
<span class="lineno"></span><span class="op" id="5269814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5269817">//&nbsp;Call&nbsp;invokes&nbsp;the&nbsp;named&nbsp;function,&nbsp;waits&nbsp;for&nbsp;it&nbsp;to&nbsp;complete,&nbsp;and&nbsp;returns&nbsp;its&nbsp;error&nbsp;status.</span><br>
<span class="lineno"></span><span class="keyword" id="5269909">func</span>&nbsp;<span class="op" id="5269914">(</span><span class="ident" id="5269915">client</span>&nbsp;<span class="op" id="5269922">*</span><span class="ident" id="5269923"><a href="/gostd/net/rpc/client.go.html#5262362">Client</a></span><span class="op" id="5269929">)</span>&nbsp;<span class="ident" id="5269931">Call</span><span class="op" id="5269935">(</span><span class="ident" id="5269936">serviceMethod</span>&nbsp;<span class="builtintype" id="5269950">string</span><span class="op" id="5269956">,</span>&nbsp;<span class="ident" id="5269958">args</span>&nbsp;<span class="keyword" id="5269963">interface</span><span class="op" id="5269972">{</span><span class="op" id="5269973">}</span><span class="op" id="5269974">,</span>&nbsp;<span class="ident" id="5269976">reply</span>&nbsp;<span class="keyword" id="5269982">interface</span><span class="op" id="5269991">{</span><span class="op" id="5269992">}</span><span class="op" id="5269993">)</span>&nbsp;<span class="builtintype" id="5269995">error</span>&nbsp;<span class="op" id="5270001">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5270004">call</span>&nbsp;<span class="op" id="5270009">:=</span>&nbsp;<span class="op" id="5270012">&lt;-</span><span class="ident" id="5270014"><a href="/gostd/net/rpc/client.go.html#5269915">client</a></span><span class="op" id="5270020">.</span><span class="ident" id="5270021"><a href="/gostd/net/rpc/client.go.html#5269205">Go</a></span><span class="op" id="5270023">(</span><span class="ident" id="5270024"><a href="/gostd/net/rpc/client.go.html#5269936">serviceMethod</a></span><span class="op" id="5270037">,</span>&nbsp;<span class="ident" id="5270039"><a href="/gostd/net/rpc/client.go.html#5269958">args</a></span><span class="op" id="5270043">,</span>&nbsp;<span class="ident" id="5270045"><a href="/gostd/net/rpc/client.go.html#5269976">reply</a></span><span class="op" id="5270050">,</span>&nbsp;<span class="builtinfunc" id="5270052">make</span><span class="op" id="5270056">(</span><span class="keyword" id="5270057">chan</span>&nbsp;<span class="op" id="5270062">*</span><span class="ident" id="5270063"><a href="/gostd/net/rpc/client.go.html#5261818">Call</a></span><span class="op" id="5270067">,</span>&nbsp;<span class="num" id="5270069">1</span><span class="op" id="5270070">)</span><span class="op" id="5270071">)</span><span class="op" id="5270072">.</span><span class="ident" id="5270073"><a href="/gostd/net/rpc/client.go.html#5262112">Done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5270079">return</span>&nbsp;<span class="ident" id="5270086"><a href="/gostd/net/rpc/client.go.html#5270004">call</a></span><span class="op" id="5270090">.</span><span class="ident" id="5270091"><a href="/gostd/net/rpc/client.go.html#5262046">Error</a></span><br>
<span class="lineno"></span><span class="op" id="5270097">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
