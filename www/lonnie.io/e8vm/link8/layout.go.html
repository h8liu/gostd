<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5368089">package</span>&nbsp;<span class="ident" id="5368097">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5368104">import</span>&nbsp;<span class="op" id="5368111">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5368114">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5368122">&#34;lonnie.io/e8vm/arch8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5368145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5368148">func</span>&nbsp;<span class="ident" id="5368153">layout</span><span class="op" id="5368159">(</span><span class="ident" id="5368160">used</span>&nbsp;<span class="op" id="5368165">[</span><span class="op" id="5368166">]</span><span class="ident" id="5368167"><a href="/lonnie.io/e8vm/link8/pkg_sym.go.html#5374361">pkgSym</a></span><span class="op" id="5368173">)</span>&nbsp;<span class="op" id="5368175">(</span><span class="ident" id="5368176">funcs</span><span class="op" id="5368181">,</span>&nbsp;<span class="ident" id="5368183">vars</span>&nbsp;<span class="op" id="5368188">[</span><span class="op" id="5368189">]</span><span class="ident" id="5368190"><a href="/lonnie.io/e8vm/link8/pkg_sym.go.html#5374361">pkgSym</a></span><span class="op" id="5368196">,</span>&nbsp;<span class="ident" id="5368198">e</span>&nbsp;<span class="builtintype" id="5368200">error</span><span class="op" id="5368205">)</span>&nbsp;<span class="op" id="5368207">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5368210">//&nbsp;code</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368219">pt</span>&nbsp;<span class="op" id="5368222">:=</span>&nbsp;<span class="builtintype" id="5368225">uint32</span><span class="op" id="5368231">(</span><span class="ident" id="5368232"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368122">arch8</a></span><span class="op" id="5368237">.</span><span class="ident" id="5368238">InitPC</span><span class="op" id="5368244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368247">codeMax</span>&nbsp;<span class="op" id="5368255">:=</span>&nbsp;<span class="builtintype" id="5368258">uint32</span><span class="op" id="5368264">(</span><span class="num" id="5368265">0xffffffff</span><span class="op" id="5368275">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368279">for</span>&nbsp;<span class="ident" id="5368283">_</span><span class="op" id="5368284">,</span>&nbsp;<span class="ident" id="5368286">ps</span>&nbsp;<span class="op" id="5368289">:=</span>&nbsp;<span class="keyword" id="5368292">range</span>&nbsp;<span class="ident" id="5368298"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368160">used</a></span>&nbsp;<span class="op" id="5368303">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368307">typ</span>&nbsp;<span class="op" id="5368311">:=</span>&nbsp;<span class="ident" id="5368314"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368286">ps</a></span><span class="op" id="5368316">.</span><span class="ident" id="5368317">Type</span><span class="op" id="5368321">(</span><span class="op" id="5368322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368326">switch</span>&nbsp;<span class="ident" id="5368333"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368307">typ</a></span>&nbsp;<span class="op" id="5368337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368341">case</span>&nbsp;<span class="ident" id="5368346"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374825">SymFunc</a></span><span class="op" id="5368353">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368358"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368176">funcs</a></span>&nbsp;<span class="op" id="5368364">=</span>&nbsp;<span class="builtinfunc" id="5368366">append</span><span class="op" id="5368372">(</span><span class="ident" id="5368373"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368176">funcs</a></span><span class="op" id="5368378">,</span>&nbsp;<span class="ident" id="5368380"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368286">ps</a></span><span class="op" id="5368382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368388">f</span>&nbsp;<span class="op" id="5368390">:=</span>&nbsp;<span class="ident" id="5368393"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368286">ps</a></span><span class="op" id="5368395">.</span><span class="ident" id="5368396">Func</span><span class="op" id="5368400">(</span><span class="op" id="5368401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368406"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368388">f</a></span><span class="op" id="5368407">.</span><span class="ident" id="5368408">addr</span>&nbsp;<span class="op" id="5368413">=</span>&nbsp;<span class="ident" id="5368415"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368421">size</span>&nbsp;<span class="op" id="5368426">:=</span>&nbsp;<span class="ident" id="5368429"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368388">f</a></span><span class="op" id="5368430">.</span><span class="ident" id="5368431">Size</span><span class="op" id="5368435">(</span><span class="op" id="5368436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368441">if</span>&nbsp;<span class="ident" id="5368444"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368421">size</a></span>&nbsp;<span class="op" id="5368449">&gt;</span>&nbsp;<span class="ident" id="5368451"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368247">codeMax</a></span><span class="op" id="5368458">-</span><span class="ident" id="5368459"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span>&nbsp;<span class="op" id="5368462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368468">return</span>&nbsp;<span class="ident" id="5368475">nil</span><span class="op" id="5368478">,</span>&nbsp;<span class="ident" id="5368480">nil</span><span class="op" id="5368483">,</span>&nbsp;<span class="ident" id="5368485"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368114">fmt</a></span><span class="op" id="5368488">.</span><span class="ident" id="5368489">Errorf</span><span class="op" id="5368495">(</span><span class="string" id="5368496">&#34;code&nbsp;section&nbsp;too&nbsp;large&#34;</span><span class="op" id="5368520">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368530"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span>&nbsp;<span class="op" id="5368533">+=</span>&nbsp;<span class="ident" id="5368536"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368421">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368543">case</span>&nbsp;<span class="ident" id="5368548"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374841">SymVar</a></span><span class="op" id="5368554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368559"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368183">vars</a></span>&nbsp;<span class="op" id="5368564">=</span>&nbsp;<span class="builtinfunc" id="5368566">append</span><span class="op" id="5368572">(</span><span class="ident" id="5368573"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368183">vars</a></span><span class="op" id="5368577">,</span>&nbsp;<span class="ident" id="5368579"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368286">ps</a></span><span class="op" id="5368581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368585">default</span><span class="op" id="5368592">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5368597">panic</span><span class="op" id="5368602">(</span><span class="string" id="5368603">&#34;bug&#34;</span><span class="op" id="5368608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368619">dataMax</span>&nbsp;<span class="op" id="5368627">:=</span>&nbsp;<span class="builtintype" id="5368630">uint32</span><span class="op" id="5368636">(</span><span class="num" id="5368637">0xffffffff</span><span class="op" id="5368647">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368651">for</span>&nbsp;<span class="ident" id="5368655">_</span><span class="op" id="5368656">,</span>&nbsp;<span class="ident" id="5368658">ps</span>&nbsp;<span class="op" id="5368661">:=</span>&nbsp;<span class="keyword" id="5368664">range</span>&nbsp;<span class="ident" id="5368670"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368183">vars</a></span>&nbsp;<span class="op" id="5368675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368679">if</span>&nbsp;<span class="ident" id="5368682"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368658">ps</a></span><span class="op" id="5368684">.</span><span class="ident" id="5368685">Type</span><span class="op" id="5368689">(</span><span class="op" id="5368690">)</span>&nbsp;<span class="op" id="5368692">!=</span>&nbsp;<span class="ident" id="5368695"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374841">SymVar</a></span>&nbsp;<span class="op" id="5368702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5368707">panic</span><span class="op" id="5368712">(</span><span class="string" id="5368713">&#34;bug&#34;</span><span class="op" id="5368718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368722">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368727">v</span>&nbsp;<span class="op" id="5368729">:=</span>&nbsp;<span class="ident" id="5368732"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368658">ps</a></span><span class="op" id="5368734">.</span><span class="ident" id="5368735">Var</span><span class="op" id="5368738">(</span><span class="op" id="5368739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368744">if</span>&nbsp;<span class="ident" id="5368747"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368748">.</span><span class="ident" id="5368749">align</span>&nbsp;<span class="op" id="5368755">&gt;</span>&nbsp;<span class="num" id="5368757">1</span>&nbsp;<span class="op" id="5368759">&amp;&amp;</span>&nbsp;<span class="ident" id="5368762"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span><span class="op" id="5368764">%</span><span class="ident" id="5368765"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368766">.</span><span class="ident" id="5368767">align</span>&nbsp;<span class="op" id="5368773">!=</span>&nbsp;<span class="num" id="5368776">0</span>&nbsp;<span class="op" id="5368778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368783"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368784">.</span><span class="ident" id="5368785">prePad</span>&nbsp;<span class="op" id="5368792">=</span>&nbsp;<span class="ident" id="5368794"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368795">.</span><span class="ident" id="5368796">align</span>&nbsp;<span class="op" id="5368802">-</span>&nbsp;<span class="ident" id="5368804"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span><span class="op" id="5368806">%</span><span class="ident" id="5368807"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368808">.</span><span class="ident" id="5368809">align</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368818"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span>&nbsp;<span class="op" id="5368821">+=</span>&nbsp;<span class="ident" id="5368824"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368825">.</span><span class="ident" id="5368826">prePad</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368839">if</span>&nbsp;<span class="ident" id="5368842"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368843">.</span><span class="ident" id="5368844">align</span>&nbsp;<span class="op" id="5368850">&gt;</span>&nbsp;<span class="num" id="5368852">1</span>&nbsp;<span class="op" id="5368854">&amp;&amp;</span>&nbsp;<span class="ident" id="5368857"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span><span class="op" id="5368859">%</span><span class="ident" id="5368860"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368861">.</span><span class="ident" id="5368862">align</span>&nbsp;<span class="op" id="5368868">!=</span>&nbsp;<span class="num" id="5368871">0</span>&nbsp;<span class="op" id="5368873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5368878">panic</span><span class="op" id="5368883">(</span><span class="string" id="5368884">&#34;bug&#34;</span><span class="op" id="5368889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368893">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368898"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368899">.</span><span class="ident" id="5368900">addr</span>&nbsp;<span class="op" id="5368905">=</span>&nbsp;<span class="ident" id="5368907"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368912">size</span>&nbsp;<span class="op" id="5368917">:=</span>&nbsp;<span class="ident" id="5368920"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368727">v</a></span><span class="op" id="5368921">.</span><span class="ident" id="5368922">Size</span><span class="op" id="5368926">(</span><span class="op" id="5368927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368931">if</span>&nbsp;<span class="ident" id="5368934"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368912">size</a></span>&nbsp;<span class="op" id="5368939">&gt;</span>&nbsp;<span class="ident" id="5368941"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368619">dataMax</a></span><span class="op" id="5368948">-</span><span class="ident" id="5368949"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span>&nbsp;<span class="op" id="5368952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368957">return</span>&nbsp;<span class="ident" id="5368964">nil</span><span class="op" id="5368967">,</span>&nbsp;<span class="ident" id="5368969">nil</span><span class="op" id="5368972">,</span>&nbsp;<span class="ident" id="5368974"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368114">fmt</a></span><span class="op" id="5368977">.</span><span class="ident" id="5368978">Errorf</span><span class="op" id="5368984">(</span><span class="string" id="5368985">&#34;binary&nbsp;too&nbsp;large&#34;</span><span class="op" id="5369003">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369012"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368219">pt</a></span>&nbsp;<span class="op" id="5369015">+=</span>&nbsp;<span class="ident" id="5369018"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368912">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369028">return</span><br>
<span class="lineno"></span><span class="op" id="5369035">}</span>
</div>
</body>
</html>
