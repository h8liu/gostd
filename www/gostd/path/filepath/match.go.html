<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2861522">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2861577">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2861631">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2861682">package</span>&nbsp;<span class="ident" id="2861690">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2861700">import</span>&nbsp;<span class="op" id="2861707">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861710">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861720">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861726">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861737">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861745">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2861756">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2861771">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2861774">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2861835">var</span>&nbsp;<span class="ident" id="2861839">ErrBadPattern</span>&nbsp;<span class="op" id="2861853">=</span>&nbsp;<span class="ident" id="2861855">errors</span><span class="op" id="2861861">.</span><span class="ident" id="2861862">New</span><span class="op" id="2861865">(</span><span class="string" id="2861866">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="2861891">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2861894">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="2861961">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="2861987">//</span><br>
<span class="lineno"></span><span class="comment" id="2861990">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="2862002">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2862015">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="2862024">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="2862089">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2862148">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2862188">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="2862240">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="2862303">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2862339">//</span><br>
<span class="lineno"></span><span class="comment" id="2862342">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="2862362">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2862420">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="2862456">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="2862510">//</span><br>
<span class="lineno"></span><span class="comment" id="2862513">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="2862583">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2862650">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="2862667">//</span><br>
<span class="lineno"></span><span class="comment" id="2862670">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2862735">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="2862754">//</span><br>
<span class="lineno"></span><span class="keyword" id="2862757">func</span>&nbsp;<span class="ident" id="2862762">Match</span><span class="op" id="2862767">(</span><span class="ident" id="2862768">pattern</span><span class="op" id="2862775">,</span>&nbsp;<span class="ident" id="2862777">name</span>&nbsp;<span class="builtintype" id="2862782">string</span><span class="op" id="2862788">)</span>&nbsp;<span class="op" id="2862790">(</span><span class="ident" id="2862791">matched</span>&nbsp;<span class="builtintype" id="2862799">bool</span><span class="op" id="2862803">,</span>&nbsp;<span class="ident" id="2862805">err</span>&nbsp;<span class="builtintype" id="2862809">error</span><span class="op" id="2862814">)</span>&nbsp;<span class="op" id="2862816">{</span><br>
<span class="lineno">45</span><span class="ident" id="2862818">Pattern</span><span class="op" id="2862825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862828">for</span>&nbsp;<span class="builtinfunc" id="2862832">len</span><span class="op" id="2862835">(</span><span class="ident" id="2862836">pattern</span><span class="op" id="2862843">)</span>&nbsp;<span class="op" id="2862845">&gt;</span>&nbsp;<span class="num" id="2862847">0</span>&nbsp;<span class="op" id="2862849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862853">var</span>&nbsp;<span class="ident" id="2862857">star</span>&nbsp;<span class="builtintype" id="2862862">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862869">var</span>&nbsp;<span class="ident" id="2862873">chunk</span>&nbsp;<span class="builtintype" id="2862879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2862888">star</span><span class="op" id="2862892">,</span>&nbsp;<span class="ident" id="2862894">chunk</span><span class="op" id="2862899">,</span>&nbsp;<span class="ident" id="2862901">pattern</span>&nbsp;<span class="op" id="2862909">=</span>&nbsp;<span class="ident" id="2862911">scanChunk</span><span class="op" id="2862920">(</span><span class="ident" id="2862921">pattern</span><span class="op" id="2862928">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862932">if</span>&nbsp;<span class="ident" id="2862935">star</span>&nbsp;<span class="op" id="2862940">&amp;&amp;</span>&nbsp;<span class="ident" id="2862943">chunk</span>&nbsp;<span class="op" id="2862949">==</span>&nbsp;<span class="string" id="2862952">&#34;&#34;</span>&nbsp;<span class="op" id="2862955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2862960">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863019">return</span>&nbsp;<span class="ident" id="2863026">strings</span><span class="op" id="2863033">.</span><span class="ident" id="2863034">Index</span><span class="op" id="2863039">(</span><span class="ident" id="2863040">name</span><span class="op" id="2863044">,</span>&nbsp;<span class="builtintype" id="2863046">string</span><span class="op" id="2863052">(</span><span class="ident" id="2863053">Separator</span><span class="op" id="2863062">)</span><span class="op" id="2863063">)</span>&nbsp;<span class="op" id="2863065">&lt;</span>&nbsp;<span class="num" id="2863067">0</span><span class="op" id="2863068">,</span>&nbsp;<span class="ident" id="2863070">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863080">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863121">t</span><span class="op" id="2863122">,</span>&nbsp;<span class="ident" id="2863124">ok</span><span class="op" id="2863126">,</span>&nbsp;<span class="ident" id="2863128">err</span>&nbsp;<span class="op" id="2863132">:=</span>&nbsp;<span class="ident" id="2863135">matchChunk</span><span class="op" id="2863145">(</span><span class="ident" id="2863146">chunk</span><span class="op" id="2863151">,</span>&nbsp;<span class="ident" id="2863153">name</span><span class="op" id="2863157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863161">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863226">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863296">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863316">if</span>&nbsp;<span class="ident" id="2863319">ok</span>&nbsp;<span class="op" id="2863322">&amp;&amp;</span>&nbsp;<span class="op" id="2863325">(</span><span class="builtinfunc" id="2863326">len</span><span class="op" id="2863329">(</span><span class="ident" id="2863330">t</span><span class="op" id="2863331">)</span>&nbsp;<span class="op" id="2863333">==</span>&nbsp;<span class="num" id="2863336">0</span>&nbsp;<span class="op" id="2863338">||</span>&nbsp;<span class="builtinfunc" id="2863341">len</span><span class="op" id="2863344">(</span><span class="ident" id="2863345">pattern</span><span class="op" id="2863352">)</span>&nbsp;<span class="op" id="2863354">&gt;</span>&nbsp;<span class="num" id="2863356">0</span><span class="op" id="2863357">)</span>&nbsp;<span class="op" id="2863359">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863364">name</span>&nbsp;<span class="op" id="2863369">=</span>&nbsp;<span class="ident" id="2863371">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863376">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863391">if</span>&nbsp;<span class="ident" id="2863394">err</span>&nbsp;<span class="op" id="2863398">!=</span>&nbsp;<span class="ident" id="2863401">nil</span>&nbsp;<span class="op" id="2863405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863410">return</span>&nbsp;<span class="builtintype" id="2863417">false</span><span class="op" id="2863422">,</span>&nbsp;<span class="ident" id="2863424">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863434">if</span>&nbsp;<span class="ident" id="2863437">star</span>&nbsp;<span class="op" id="2863442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863447">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863488">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863509">for</span>&nbsp;<span class="ident" id="2863513">i</span>&nbsp;<span class="op" id="2863515">:=</span>&nbsp;<span class="num" id="2863518">0</span><span class="op" id="2863519">;</span>&nbsp;<span class="ident" id="2863521">i</span>&nbsp;<span class="op" id="2863523">&lt;</span>&nbsp;<span class="builtinfunc" id="2863525">len</span><span class="op" id="2863528">(</span><span class="ident" id="2863529">name</span><span class="op" id="2863533">)</span>&nbsp;<span class="op" id="2863535">&amp;&amp;</span>&nbsp;<span class="ident" id="2863538">name</span><span class="op" id="2863542">[</span><span class="ident" id="2863543">i</span><span class="op" id="2863544">]</span>&nbsp;<span class="op" id="2863546">!=</span>&nbsp;<span class="ident" id="2863549">Separator</span><span class="op" id="2863558">;</span>&nbsp;<span class="ident" id="2863560">i</span><span class="op" id="2863561">++</span>&nbsp;<span class="op" id="2863564">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863570">t</span><span class="op" id="2863571">,</span>&nbsp;<span class="ident" id="2863573">ok</span><span class="op" id="2863575">,</span>&nbsp;<span class="ident" id="2863577">err</span>&nbsp;<span class="op" id="2863581">:=</span>&nbsp;<span class="ident" id="2863584">matchChunk</span><span class="op" id="2863594">(</span><span class="ident" id="2863595">chunk</span><span class="op" id="2863600">,</span>&nbsp;<span class="ident" id="2863602">name</span><span class="op" id="2863606">[</span><span class="ident" id="2863607">i</span><span class="op" id="2863608">+</span><span class="num" id="2863609">1</span><span class="op" id="2863610">:</span><span class="op" id="2863611">]</span><span class="op" id="2863612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863618">if</span>&nbsp;<span class="ident" id="2863621">ok</span>&nbsp;<span class="op" id="2863624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2863631">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863696">if</span>&nbsp;<span class="builtinfunc" id="2863699">len</span><span class="op" id="2863702">(</span><span class="ident" id="2863703">pattern</span><span class="op" id="2863710">)</span>&nbsp;<span class="op" id="2863712">==</span>&nbsp;<span class="num" id="2863715">0</span>&nbsp;<span class="op" id="2863717">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2863720">len</span><span class="op" id="2863723">(</span><span class="ident" id="2863724">t</span><span class="op" id="2863725">)</span>&nbsp;<span class="op" id="2863727">&gt;</span>&nbsp;<span class="num" id="2863729">0</span>&nbsp;<span class="op" id="2863731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863739">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863760">name</span>&nbsp;<span class="op" id="2863765">=</span>&nbsp;<span class="ident" id="2863767">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863774">continue</span>&nbsp;<span class="ident" id="2863783">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863801">if</span>&nbsp;<span class="ident" id="2863804">err</span>&nbsp;<span class="op" id="2863808">!=</span>&nbsp;<span class="ident" id="2863811">nil</span>&nbsp;<span class="op" id="2863815">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863822">return</span>&nbsp;<span class="builtintype" id="2863829">false</span><span class="op" id="2863834">,</span>&nbsp;<span class="ident" id="2863836">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863857">return</span>&nbsp;<span class="builtintype" id="2863864">false</span><span class="op" id="2863869">,</span>&nbsp;<span class="ident" id="2863871">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2863876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863879">return</span>&nbsp;<span class="builtinfunc" id="2863886">len</span><span class="op" id="2863889">(</span><span class="ident" id="2863890">name</span><span class="op" id="2863894">)</span>&nbsp;<span class="op" id="2863896">==</span>&nbsp;<span class="num" id="2863899">0</span><span class="op" id="2863900">,</span>&nbsp;<span class="ident" id="2863902">nil</span><br>
<span class="lineno"></span><span class="op" id="2863906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2863909">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="2863983">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="2864015">func</span>&nbsp;<span class="ident" id="2864020">scanChunk</span><span class="op" id="2864029">(</span><span class="ident" id="2864030">pattern</span>&nbsp;<span class="builtintype" id="2864038">string</span><span class="op" id="2864044">)</span>&nbsp;<span class="op" id="2864046">(</span><span class="ident" id="2864047">star</span>&nbsp;<span class="builtintype" id="2864052">bool</span><span class="op" id="2864056">,</span>&nbsp;<span class="ident" id="2864058">chunk</span><span class="op" id="2864063">,</span>&nbsp;<span class="ident" id="2864065">rest</span>&nbsp;<span class="builtintype" id="2864070">string</span><span class="op" id="2864076">)</span>&nbsp;<span class="op" id="2864078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864081">for</span>&nbsp;<span class="builtinfunc" id="2864085">len</span><span class="op" id="2864088">(</span><span class="ident" id="2864089">pattern</span><span class="op" id="2864096">)</span>&nbsp;<span class="op" id="2864098">&gt;</span>&nbsp;<span class="num" id="2864100">0</span>&nbsp;<span class="op" id="2864102">&amp;&amp;</span>&nbsp;<span class="ident" id="2864105">pattern</span><span class="op" id="2864112">[</span><span class="num" id="2864113">0</span><span class="op" id="2864114">]</span>&nbsp;<span class="op" id="2864116">==</span>&nbsp;<span class="string" id="2864119">&#39;*&#39;</span>&nbsp;<span class="op" id="2864123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864127">pattern</span>&nbsp;<span class="op" id="2864135">=</span>&nbsp;<span class="ident" id="2864137">pattern</span><span class="op" id="2864144">[</span><span class="num" id="2864145">1</span><span class="op" id="2864146">:</span><span class="op" id="2864147">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864151">star</span>&nbsp;<span class="op" id="2864156">=</span>&nbsp;<span class="builtintype" id="2864158">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864167">inrange</span>&nbsp;<span class="op" id="2864175">:=</span>&nbsp;<span class="builtintype" id="2864178">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864185">var</span>&nbsp;<span class="ident" id="2864189">i</span>&nbsp;<span class="builtintype" id="2864191">int</span><br>
<span class="lineno"></span><span class="ident" id="2864195">Scan</span><span class="op" id="2864199">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864202">for</span>&nbsp;<span class="ident" id="2864206">i</span>&nbsp;<span class="op" id="2864208">=</span>&nbsp;<span class="num" id="2864210">0</span><span class="op" id="2864211">;</span>&nbsp;<span class="ident" id="2864213">i</span>&nbsp;<span class="op" id="2864215">&lt;</span>&nbsp;<span class="builtinfunc" id="2864217">len</span><span class="op" id="2864220">(</span><span class="ident" id="2864221">pattern</span><span class="op" id="2864228">)</span><span class="op" id="2864229">;</span>&nbsp;<span class="ident" id="2864231">i</span><span class="op" id="2864232">++</span>&nbsp;<span class="op" id="2864235">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864239">switch</span>&nbsp;<span class="ident" id="2864246">pattern</span><span class="op" id="2864253">[</span><span class="ident" id="2864254">i</span><span class="op" id="2864255">]</span>&nbsp;<span class="op" id="2864257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864261">case</span>&nbsp;<span class="string" id="2864266">&#39;\\&#39;</span><span class="op" id="2864270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864275">if</span>&nbsp;<span class="ident" id="2864278">runtime</span><span class="op" id="2864285">.</span><span class="ident" id="2864286">GOOS</span>&nbsp;<span class="op" id="2864291">!=</span>&nbsp;<span class="string" id="2864294">&#34;windows&#34;</span>&nbsp;<span class="op" id="2864304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2864310">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864365">if</span>&nbsp;<span class="ident" id="2864368">i</span><span class="op" id="2864369">+</span><span class="num" id="2864370">1</span>&nbsp;<span class="op" id="2864372">&lt;</span>&nbsp;<span class="builtinfunc" id="2864374">len</span><span class="op" id="2864377">(</span><span class="ident" id="2864378">pattern</span><span class="op" id="2864385">)</span>&nbsp;<span class="op" id="2864387">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864394">i</span><span class="op" id="2864395">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864411">case</span>&nbsp;<span class="string" id="2864416">&#39;[&#39;</span><span class="op" id="2864419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864424">inrange</span>&nbsp;<span class="op" id="2864432">=</span>&nbsp;<span class="builtintype" id="2864434">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864441">case</span>&nbsp;<span class="string" id="2864446">&#39;]&#39;</span><span class="op" id="2864449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864454">inrange</span>&nbsp;<span class="op" id="2864462">=</span>&nbsp;<span class="builtintype" id="2864464">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864472">case</span>&nbsp;<span class="string" id="2864477">&#39;*&#39;</span><span class="op" id="2864480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864485">if</span>&nbsp;<span class="op" id="2864488">!</span><span class="ident" id="2864489">inrange</span>&nbsp;<span class="op" id="2864497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864503">break</span>&nbsp;<span class="ident" id="2864509">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864527">return</span>&nbsp;<span class="ident" id="2864534">star</span><span class="op" id="2864538">,</span>&nbsp;<span class="ident" id="2864540">pattern</span><span class="op" id="2864547">[</span><span class="num" id="2864548">0</span><span class="op" id="2864549">:</span><span class="ident" id="2864550">i</span><span class="op" id="2864551">]</span><span class="op" id="2864552">,</span>&nbsp;<span class="ident" id="2864554">pattern</span><span class="op" id="2864561">[</span><span class="ident" id="2864562">i</span><span class="op" id="2864563">:</span><span class="op" id="2864564">]</span><br>
<span class="lineno"></span><span class="op" id="2864566">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2864569">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2864632">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="2864691">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="2864766">func</span>&nbsp;<span class="ident" id="2864771">matchChunk</span><span class="op" id="2864781">(</span><span class="ident" id="2864782">chunk</span><span class="op" id="2864787">,</span>&nbsp;<span class="ident" id="2864789">s</span>&nbsp;<span class="builtintype" id="2864791">string</span><span class="op" id="2864797">)</span>&nbsp;<span class="op" id="2864799">(</span><span class="ident" id="2864800">rest</span>&nbsp;<span class="builtintype" id="2864805">string</span><span class="op" id="2864811">,</span>&nbsp;<span class="ident" id="2864813">ok</span>&nbsp;<span class="builtintype" id="2864816">bool</span><span class="op" id="2864820">,</span>&nbsp;<span class="ident" id="2864822">err</span>&nbsp;<span class="builtintype" id="2864826">error</span><span class="op" id="2864831">)</span>&nbsp;<span class="op" id="2864833">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864836">for</span>&nbsp;<span class="builtinfunc" id="2864840">len</span><span class="op" id="2864843">(</span><span class="ident" id="2864844">chunk</span><span class="op" id="2864849">)</span>&nbsp;<span class="op" id="2864851">&gt;</span>&nbsp;<span class="num" id="2864853">0</span>&nbsp;<span class="op" id="2864855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864859">if</span>&nbsp;<span class="builtinfunc" id="2864862">len</span><span class="op" id="2864865">(</span><span class="ident" id="2864866">s</span><span class="op" id="2864867">)</span>&nbsp;<span class="op" id="2864869">==</span>&nbsp;<span class="num" id="2864872">0</span>&nbsp;<span class="op" id="2864874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864879">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864892">switch</span>&nbsp;<span class="ident" id="2864899">chunk</span><span class="op" id="2864904">[</span><span class="num" id="2864905">0</span><span class="op" id="2864906">]</span>&nbsp;<span class="op" id="2864908">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864912">case</span>&nbsp;<span class="string" id="2864917">&#39;[&#39;</span><span class="op" id="2864920">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2864925">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864947">r</span><span class="op" id="2864948">,</span>&nbsp;<span class="ident" id="2864950">n</span>&nbsp;<span class="op" id="2864952">:=</span>&nbsp;<span class="ident" id="2864955">utf8</span><span class="op" id="2864959">.</span><span class="ident" id="2864960">DecodeRuneInString</span><span class="op" id="2864978">(</span><span class="ident" id="2864979">s</span><span class="op" id="2864980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864985">s</span>&nbsp;<span class="op" id="2864987">=</span>&nbsp;<span class="ident" id="2864989">s</span><span class="op" id="2864990">[</span><span class="ident" id="2864991">n</span><span class="op" id="2864992">:</span><span class="op" id="2864993">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864998">chunk</span>&nbsp;<span class="op" id="2865004">=</span>&nbsp;<span class="ident" id="2865006">chunk</span><span class="op" id="2865011">[</span><span class="num" id="2865012">1</span><span class="op" id="2865013">:</span><span class="op" id="2865014">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865019">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865080">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865126">if</span>&nbsp;<span class="builtinfunc" id="2865129">len</span><span class="op" id="2865132">(</span><span class="ident" id="2865133">chunk</span><span class="op" id="2865138">)</span>&nbsp;<span class="op" id="2865140">==</span>&nbsp;<span class="num" id="2865143">0</span>&nbsp;<span class="op" id="2865145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865151">err</span>&nbsp;<span class="op" id="2865155">=</span>&nbsp;<span class="ident" id="2865157">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865175">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865190">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865213">negated</span>&nbsp;<span class="op" id="2865221">:=</span>&nbsp;<span class="ident" id="2865224">chunk</span><span class="op" id="2865229">[</span><span class="num" id="2865230">0</span><span class="op" id="2865231">]</span>&nbsp;<span class="op" id="2865233">==</span>&nbsp;<span class="string" id="2865236">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865243">if</span>&nbsp;<span class="ident" id="2865246">negated</span>&nbsp;<span class="op" id="2865254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865260">chunk</span>&nbsp;<span class="op" id="2865266">=</span>&nbsp;<span class="ident" id="2865268">chunk</span><span class="op" id="2865273">[</span><span class="num" id="2865274">1</span><span class="op" id="2865275">:</span><span class="op" id="2865276">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865286">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865309">match</span>&nbsp;<span class="op" id="2865315">:=</span>&nbsp;<span class="builtintype" id="2865318">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865327">nrange</span>&nbsp;<span class="op" id="2865334">:=</span>&nbsp;<span class="num" id="2865337">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865342">for</span>&nbsp;<span class="op" id="2865346">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865352">if</span>&nbsp;<span class="builtinfunc" id="2865355">len</span><span class="op" id="2865358">(</span><span class="ident" id="2865359">chunk</span><span class="op" id="2865364">)</span>&nbsp;<span class="op" id="2865366">&gt;</span>&nbsp;<span class="num" id="2865368">0</span>&nbsp;<span class="op" id="2865370">&amp;&amp;</span>&nbsp;<span class="ident" id="2865373">chunk</span><span class="op" id="2865378">[</span><span class="num" id="2865379">0</span><span class="op" id="2865380">]</span>&nbsp;<span class="op" id="2865382">==</span>&nbsp;<span class="string" id="2865385">&#39;]&#39;</span>&nbsp;<span class="op" id="2865389">&amp;&amp;</span>&nbsp;<span class="ident" id="2865392">nrange</span>&nbsp;<span class="op" id="2865399">&gt;</span>&nbsp;<span class="num" id="2865401">0</span>&nbsp;<span class="op" id="2865403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865410">chunk</span>&nbsp;<span class="op" id="2865416">=</span>&nbsp;<span class="ident" id="2865418">chunk</span><span class="op" id="2865423">[</span><span class="num" id="2865424">1</span><span class="op" id="2865425">:</span><span class="op" id="2865426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865433">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865449">var</span>&nbsp;<span class="ident" id="2865453">lo</span><span class="op" id="2865455">,</span>&nbsp;<span class="ident" id="2865457">hi</span>&nbsp;<span class="builtintype" id="2865460">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865469">if</span>&nbsp;<span class="ident" id="2865472">lo</span><span class="op" id="2865474">,</span>&nbsp;<span class="ident" id="2865476">chunk</span><span class="op" id="2865481">,</span>&nbsp;<span class="ident" id="2865483">err</span>&nbsp;<span class="op" id="2865487">=</span>&nbsp;<span class="ident" id="2865489">getEsc</span><span class="op" id="2865495">(</span><span class="ident" id="2865496">chunk</span><span class="op" id="2865501">)</span><span class="op" id="2865502">;</span>&nbsp;<span class="ident" id="2865504">err</span>&nbsp;<span class="op" id="2865508">!=</span>&nbsp;<span class="ident" id="2865511">nil</span>&nbsp;<span class="op" id="2865515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865522">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865539">hi</span>&nbsp;<span class="op" id="2865542">=</span>&nbsp;<span class="ident" id="2865544">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865551">if</span>&nbsp;<span class="ident" id="2865554">chunk</span><span class="op" id="2865559">[</span><span class="num" id="2865560">0</span><span class="op" id="2865561">]</span>&nbsp;<span class="op" id="2865563">==</span>&nbsp;<span class="string" id="2865566">&#39;-&#39;</span>&nbsp;<span class="op" id="2865570">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865577">if</span>&nbsp;<span class="ident" id="2865580">hi</span><span class="op" id="2865582">,</span>&nbsp;<span class="ident" id="2865584">chunk</span><span class="op" id="2865589">,</span>&nbsp;<span class="ident" id="2865591">err</span>&nbsp;<span class="op" id="2865595">=</span>&nbsp;<span class="ident" id="2865597">getEsc</span><span class="op" id="2865603">(</span><span class="ident" id="2865604">chunk</span><span class="op" id="2865609">[</span><span class="num" id="2865610">1</span><span class="op" id="2865611">:</span><span class="op" id="2865612">]</span><span class="op" id="2865613">)</span><span class="op" id="2865614">;</span>&nbsp;<span class="ident" id="2865616">err</span>&nbsp;<span class="op" id="2865620">!=</span>&nbsp;<span class="ident" id="2865623">nil</span>&nbsp;<span class="op" id="2865627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865635">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865659">if</span>&nbsp;<span class="ident" id="2865662">lo</span>&nbsp;<span class="op" id="2865665">&lt;=</span>&nbsp;<span class="ident" id="2865668">r</span>&nbsp;<span class="op" id="2865670">&amp;&amp;</span>&nbsp;<span class="ident" id="2865673">r</span>&nbsp;<span class="op" id="2865675">&lt;=</span>&nbsp;<span class="ident" id="2865678">hi</span>&nbsp;<span class="op" id="2865681">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865688">match</span>&nbsp;<span class="op" id="2865694">=</span>&nbsp;<span class="builtintype" id="2865696">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865711">nrange</span><span class="op" id="2865717">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865728">if</span>&nbsp;<span class="ident" id="2865731">match</span>&nbsp;<span class="op" id="2865737">==</span>&nbsp;<span class="ident" id="2865740">negated</span>&nbsp;<span class="op" id="2865748">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865754">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865769">case</span>&nbsp;<span class="string" id="2865774">&#39;?&#39;</span><span class="op" id="2865777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865782">if</span>&nbsp;<span class="ident" id="2865785">s</span><span class="op" id="2865786">[</span><span class="num" id="2865787">0</span><span class="op" id="2865788">]</span>&nbsp;<span class="op" id="2865790">==</span>&nbsp;<span class="ident" id="2865793">Separator</span>&nbsp;<span class="op" id="2865803">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865809">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865824">_</span><span class="op" id="2865825">,</span>&nbsp;<span class="ident" id="2865827">n</span>&nbsp;<span class="op" id="2865829">:=</span>&nbsp;<span class="ident" id="2865832">utf8</span><span class="op" id="2865836">.</span><span class="ident" id="2865837">DecodeRuneInString</span><span class="op" id="2865855">(</span><span class="ident" id="2865856">s</span><span class="op" id="2865857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865862">s</span>&nbsp;<span class="op" id="2865864">=</span>&nbsp;<span class="ident" id="2865866">s</span><span class="op" id="2865867">[</span><span class="ident" id="2865868">n</span><span class="op" id="2865869">:</span><span class="op" id="2865870">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865875">chunk</span>&nbsp;<span class="op" id="2865881">=</span>&nbsp;<span class="ident" id="2865883">chunk</span><span class="op" id="2865888">[</span><span class="num" id="2865889">1</span><span class="op" id="2865890">:</span><span class="op" id="2865891">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865896">case</span>&nbsp;<span class="string" id="2865901">&#39;\\&#39;</span><span class="op" id="2865905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865910">if</span>&nbsp;<span class="ident" id="2865913">runtime</span><span class="op" id="2865920">.</span><span class="ident" id="2865921">GOOS</span>&nbsp;<span class="op" id="2865926">!=</span>&nbsp;<span class="string" id="2865929">&#34;windows&#34;</span>&nbsp;<span class="op" id="2865939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865945">chunk</span>&nbsp;<span class="op" id="2865951">=</span>&nbsp;<span class="ident" id="2865953">chunk</span><span class="op" id="2865958">[</span><span class="num" id="2865959">1</span><span class="op" id="2865960">:</span><span class="op" id="2865961">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865967">if</span>&nbsp;<span class="builtinfunc" id="2865970">len</span><span class="op" id="2865973">(</span><span class="ident" id="2865974">chunk</span><span class="op" id="2865979">)</span>&nbsp;<span class="op" id="2865981">==</span>&nbsp;<span class="num" id="2865984">0</span>&nbsp;<span class="op" id="2865986">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865993">err</span>&nbsp;<span class="op" id="2865997">=</span>&nbsp;<span class="ident" id="2865999">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866018">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866039">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866054">default</span><span class="op" id="2866061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866066">if</span>&nbsp;<span class="ident" id="2866069">chunk</span><span class="op" id="2866074">[</span><span class="num" id="2866075">0</span><span class="op" id="2866076">]</span>&nbsp;<span class="op" id="2866078">!=</span>&nbsp;<span class="ident" id="2866081">s</span><span class="op" id="2866082">[</span><span class="num" id="2866083">0</span><span class="op" id="2866084">]</span>&nbsp;<span class="op" id="2866086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866092">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866102">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866107">s</span>&nbsp;<span class="op" id="2866109">=</span>&nbsp;<span class="ident" id="2866111">s</span><span class="op" id="2866112">[</span><span class="num" id="2866113">1</span><span class="op" id="2866114">:</span><span class="op" id="2866115">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866120">chunk</span>&nbsp;<span class="op" id="2866126">=</span>&nbsp;<span class="ident" id="2866128">chunk</span><span class="op" id="2866133">[</span><span class="num" id="2866134">1</span><span class="op" id="2866135">:</span><span class="op" id="2866136">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866146">return</span>&nbsp;<span class="ident" id="2866153">s</span><span class="op" id="2866154">,</span>&nbsp;<span class="builtintype" id="2866156">true</span><span class="op" id="2866160">,</span>&nbsp;<span class="ident" id="2866162">nil</span><br>
<span class="lineno">200</span><span class="op" id="2866166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2866169">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="2866248">func</span>&nbsp;<span class="ident" id="2866253">getEsc</span><span class="op" id="2866259">(</span><span class="ident" id="2866260">chunk</span>&nbsp;<span class="builtintype" id="2866266">string</span><span class="op" id="2866272">)</span>&nbsp;<span class="op" id="2866274">(</span><span class="ident" id="2866275">r</span>&nbsp;<span class="builtintype" id="2866277">rune</span><span class="op" id="2866281">,</span>&nbsp;<span class="ident" id="2866283">nchunk</span>&nbsp;<span class="builtintype" id="2866290">string</span><span class="op" id="2866296">,</span>&nbsp;<span class="ident" id="2866298">err</span>&nbsp;<span class="builtintype" id="2866302">error</span><span class="op" id="2866307">)</span>&nbsp;<span class="op" id="2866309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866312">if</span>&nbsp;<span class="builtinfunc" id="2866315">len</span><span class="op" id="2866318">(</span><span class="ident" id="2866319">chunk</span><span class="op" id="2866324">)</span>&nbsp;<span class="op" id="2866326">==</span>&nbsp;<span class="num" id="2866329">0</span>&nbsp;<span class="op" id="2866331">||</span>&nbsp;<span class="ident" id="2866334">chunk</span><span class="op" id="2866339">[</span><span class="num" id="2866340">0</span><span class="op" id="2866341">]</span>&nbsp;<span class="op" id="2866343">==</span>&nbsp;<span class="string" id="2866346">&#39;-&#39;</span>&nbsp;<span class="op" id="2866350">||</span>&nbsp;<span class="ident" id="2866353">chunk</span><span class="op" id="2866358">[</span><span class="num" id="2866359">0</span><span class="op" id="2866360">]</span>&nbsp;<span class="op" id="2866362">==</span>&nbsp;<span class="string" id="2866365">&#39;]&#39;</span>&nbsp;<span class="op" id="2866369">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866373">err</span>&nbsp;<span class="op" id="2866377">=</span>&nbsp;<span class="ident" id="2866379">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866395">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866406">if</span>&nbsp;<span class="ident" id="2866409">chunk</span><span class="op" id="2866414">[</span><span class="num" id="2866415">0</span><span class="op" id="2866416">]</span>&nbsp;<span class="op" id="2866418">==</span>&nbsp;<span class="string" id="2866421">&#39;\\&#39;</span>&nbsp;<span class="op" id="2866426">&amp;&amp;</span>&nbsp;<span class="ident" id="2866429">runtime</span><span class="op" id="2866436">.</span><span class="ident" id="2866437">GOOS</span>&nbsp;<span class="op" id="2866442">!=</span>&nbsp;<span class="string" id="2866445">&#34;windows&#34;</span>&nbsp;<span class="op" id="2866455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866459">chunk</span>&nbsp;<span class="op" id="2866465">=</span>&nbsp;<span class="ident" id="2866467">chunk</span><span class="op" id="2866472">[</span><span class="num" id="2866473">1</span><span class="op" id="2866474">:</span><span class="op" id="2866475">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866479">if</span>&nbsp;<span class="builtinfunc" id="2866482">len</span><span class="op" id="2866485">(</span><span class="ident" id="2866486">chunk</span><span class="op" id="2866491">)</span>&nbsp;<span class="op" id="2866493">==</span>&nbsp;<span class="num" id="2866496">0</span>&nbsp;<span class="op" id="2866498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866503">err</span>&nbsp;<span class="op" id="2866507">=</span>&nbsp;<span class="ident" id="2866509">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866526">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866538">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866541">r</span><span class="op" id="2866542">,</span>&nbsp;<span class="ident" id="2866544">n</span>&nbsp;<span class="op" id="2866546">:=</span>&nbsp;<span class="ident" id="2866549">utf8</span><span class="op" id="2866553">.</span><span class="ident" id="2866554">DecodeRuneInString</span><span class="op" id="2866572">(</span><span class="ident" id="2866573">chunk</span><span class="op" id="2866578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866581">if</span>&nbsp;<span class="ident" id="2866584">r</span>&nbsp;<span class="op" id="2866586">==</span>&nbsp;<span class="ident" id="2866589">utf8</span><span class="op" id="2866593">.</span><span class="ident" id="2866594">RuneError</span>&nbsp;<span class="op" id="2866604">&amp;&amp;</span>&nbsp;<span class="ident" id="2866607">n</span>&nbsp;<span class="op" id="2866609">==</span>&nbsp;<span class="num" id="2866612">1</span>&nbsp;<span class="op" id="2866614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866618">err</span>&nbsp;<span class="op" id="2866622">=</span>&nbsp;<span class="ident" id="2866624">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866642">nchunk</span>&nbsp;<span class="op" id="2866649">=</span>&nbsp;<span class="ident" id="2866651">chunk</span><span class="op" id="2866656">[</span><span class="ident" id="2866657">n</span><span class="op" id="2866658">:</span><span class="op" id="2866659">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866662">if</span>&nbsp;<span class="builtinfunc" id="2866665">len</span><span class="op" id="2866668">(</span><span class="ident" id="2866669">nchunk</span><span class="op" id="2866675">)</span>&nbsp;<span class="op" id="2866677">==</span>&nbsp;<span class="num" id="2866680">0</span>&nbsp;<span class="op" id="2866682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866686">err</span>&nbsp;<span class="op" id="2866690">=</span>&nbsp;<span class="ident" id="2866692">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866710">return</span><br>
<span class="lineno"></span><span class="op" id="2866717">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2866720">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="2866783">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2866851">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2866919">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="2866969">//</span><br>
<span class="lineno"></span><span class="comment" id="2866972">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="2867047">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2867114">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2867131">func</span>&nbsp;<span class="ident" id="2867136">Glob</span><span class="op" id="2867140">(</span><span class="ident" id="2867141">pattern</span>&nbsp;<span class="builtintype" id="2867149">string</span><span class="op" id="2867155">)</span>&nbsp;<span class="op" id="2867157">(</span><span class="ident" id="2867158">matches</span>&nbsp;<span class="op" id="2867166">[</span><span class="op" id="2867167">]</span><span class="builtintype" id="2867168">string</span><span class="op" id="2867174">,</span>&nbsp;<span class="ident" id="2867176">err</span>&nbsp;<span class="builtintype" id="2867180">error</span><span class="op" id="2867185">)</span>&nbsp;<span class="op" id="2867187">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867190">if</span>&nbsp;<span class="op" id="2867193">!</span><span class="ident" id="2867194">hasMeta</span><span class="op" id="2867201">(</span><span class="ident" id="2867202">pattern</span><span class="op" id="2867209">)</span>&nbsp;<span class="op" id="2867211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867215">if</span>&nbsp;<span class="ident" id="2867218">_</span><span class="op" id="2867219">,</span>&nbsp;<span class="ident" id="2867221">err</span>&nbsp;<span class="op" id="2867225">=</span>&nbsp;<span class="ident" id="2867227">os</span><span class="op" id="2867229">.</span><span class="ident" id="2867230">Lstat</span><span class="op" id="2867235">(</span><span class="ident" id="2867236">pattern</span><span class="op" id="2867243">)</span><span class="op" id="2867244">;</span>&nbsp;<span class="ident" id="2867246">err</span>&nbsp;<span class="op" id="2867250">!=</span>&nbsp;<span class="ident" id="2867253">nil</span>&nbsp;<span class="op" id="2867257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867262">return</span>&nbsp;<span class="ident" id="2867269">nil</span><span class="op" id="2867272">,</span>&nbsp;<span class="ident" id="2867274">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867284">return</span>&nbsp;<span class="op" id="2867291">[</span><span class="op" id="2867292">]</span><span class="builtintype" id="2867293">string</span><span class="op" id="2867299">{</span><span class="ident" id="2867300">pattern</span><span class="op" id="2867307">}</span><span class="op" id="2867308">,</span>&nbsp;<span class="ident" id="2867310">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867319">dir</span><span class="op" id="2867322">,</span>&nbsp;<span class="ident" id="2867324">file</span>&nbsp;<span class="op" id="2867329">:=</span>&nbsp;<span class="ident" id="2867332">Split</span><span class="op" id="2867337">(</span><span class="ident" id="2867338">pattern</span><span class="op" id="2867345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867348">switch</span>&nbsp;<span class="ident" id="2867355">dir</span>&nbsp;<span class="op" id="2867359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867362">case</span>&nbsp;<span class="string" id="2867367">&#34;&#34;</span><span class="op" id="2867369">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867373">dir</span>&nbsp;<span class="op" id="2867377">=</span>&nbsp;<span class="string" id="2867379">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867384">case</span>&nbsp;<span class="builtintype" id="2867389">string</span><span class="op" id="2867395">(</span><span class="ident" id="2867396">Separator</span><span class="op" id="2867405">)</span><span class="op" id="2867406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2867410">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867422">default</span><span class="op" id="2867429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867433">dir</span>&nbsp;<span class="op" id="2867437">=</span>&nbsp;<span class="ident" id="2867439">dir</span><span class="op" id="2867442">[</span><span class="num" id="2867443">0</span>&nbsp;<span class="op" id="2867445">:</span>&nbsp;<span class="builtinfunc" id="2867447">len</span><span class="op" id="2867450">(</span><span class="ident" id="2867451">dir</span><span class="op" id="2867454">)</span><span class="op" id="2867455">-</span><span class="num" id="2867456">1</span><span class="op" id="2867457">]</span>&nbsp;<span class="comment" id="2867459">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867495">if</span>&nbsp;<span class="op" id="2867498">!</span><span class="ident" id="2867499">hasMeta</span><span class="op" id="2867506">(</span><span class="ident" id="2867507">dir</span><span class="op" id="2867510">)</span>&nbsp;<span class="op" id="2867512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867516">return</span>&nbsp;<span class="ident" id="2867523">glob</span><span class="op" id="2867527">(</span><span class="ident" id="2867528">dir</span><span class="op" id="2867531">,</span>&nbsp;<span class="ident" id="2867533">file</span><span class="op" id="2867537">,</span>&nbsp;<span class="ident" id="2867539">nil</span><span class="op" id="2867542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867545">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867549">var</span>&nbsp;<span class="ident" id="2867553">m</span>&nbsp;<span class="op" id="2867555">[</span><span class="op" id="2867556">]</span><span class="builtintype" id="2867557">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867565">m</span><span class="op" id="2867566">,</span>&nbsp;<span class="ident" id="2867568">err</span>&nbsp;<span class="op" id="2867572">=</span>&nbsp;<span class="ident" id="2867574">Glob</span><span class="op" id="2867578">(</span><span class="ident" id="2867579">dir</span><span class="op" id="2867582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867585">if</span>&nbsp;<span class="ident" id="2867588">err</span>&nbsp;<span class="op" id="2867592">!=</span>&nbsp;<span class="ident" id="2867595">nil</span>&nbsp;<span class="op" id="2867599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867603">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867614">for</span>&nbsp;<span class="ident" id="2867618">_</span><span class="op" id="2867619">,</span>&nbsp;<span class="ident" id="2867621">d</span>&nbsp;<span class="op" id="2867623">:=</span>&nbsp;<span class="keyword" id="2867626">range</span>&nbsp;<span class="ident" id="2867632">m</span>&nbsp;<span class="op" id="2867634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867638">matches</span><span class="op" id="2867645">,</span>&nbsp;<span class="ident" id="2867647">err</span>&nbsp;<span class="op" id="2867651">=</span>&nbsp;<span class="ident" id="2867653">glob</span><span class="op" id="2867657">(</span><span class="ident" id="2867658">d</span><span class="op" id="2867659">,</span>&nbsp;<span class="ident" id="2867661">file</span><span class="op" id="2867665">,</span>&nbsp;<span class="ident" id="2867667">matches</span><span class="op" id="2867674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867678">if</span>&nbsp;<span class="ident" id="2867681">err</span>&nbsp;<span class="op" id="2867685">!=</span>&nbsp;<span class="ident" id="2867688">nil</span>&nbsp;<span class="op" id="2867692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867697">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867712">return</span><br>
<span class="lineno"></span><span class="op" id="2867719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="2867722">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2867787">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2867846">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="2867906">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2867941">func</span>&nbsp;<span class="ident" id="2867946">glob</span><span class="op" id="2867950">(</span><span class="ident" id="2867951">dir</span><span class="op" id="2867954">,</span>&nbsp;<span class="ident" id="2867956">pattern</span>&nbsp;<span class="builtintype" id="2867964">string</span><span class="op" id="2867970">,</span>&nbsp;<span class="ident" id="2867972">matches</span>&nbsp;<span class="op" id="2867980">[</span><span class="op" id="2867981">]</span><span class="builtintype" id="2867982">string</span><span class="op" id="2867988">)</span>&nbsp;<span class="op" id="2867990">(</span><span class="ident" id="2867991">m</span>&nbsp;<span class="op" id="2867993">[</span><span class="op" id="2867994">]</span><span class="builtintype" id="2867995">string</span><span class="op" id="2868001">,</span>&nbsp;<span class="ident" id="2868003">e</span>&nbsp;<span class="builtintype" id="2868005">error</span><span class="op" id="2868010">)</span>&nbsp;<span class="op" id="2868012">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868015">m</span>&nbsp;<span class="op" id="2868017">=</span>&nbsp;<span class="ident" id="2868019">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868028">fi</span><span class="op" id="2868030">,</span>&nbsp;<span class="ident" id="2868032">err</span>&nbsp;<span class="op" id="2868036">:=</span>&nbsp;<span class="ident" id="2868039">os</span><span class="op" id="2868041">.</span><span class="ident" id="2868042">Stat</span><span class="op" id="2868046">(</span><span class="ident" id="2868047">dir</span><span class="op" id="2868050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868053">if</span>&nbsp;<span class="ident" id="2868056">err</span>&nbsp;<span class="op" id="2868060">!=</span>&nbsp;<span class="ident" id="2868063">nil</span>&nbsp;<span class="op" id="2868067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868071">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868079">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868082">if</span>&nbsp;<span class="op" id="2868085">!</span><span class="ident" id="2868086">fi</span><span class="op" id="2868088">.</span><span class="ident" id="2868089">IsDir</span><span class="op" id="2868094">(</span><span class="op" id="2868095">)</span>&nbsp;<span class="op" id="2868097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868101">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868112">d</span><span class="op" id="2868113">,</span>&nbsp;<span class="ident" id="2868115">err</span>&nbsp;<span class="op" id="2868119">:=</span>&nbsp;<span class="ident" id="2868122">os</span><span class="op" id="2868124">.</span><span class="ident" id="2868125">Open</span><span class="op" id="2868129">(</span><span class="ident" id="2868130">dir</span><span class="op" id="2868133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868136">if</span>&nbsp;<span class="ident" id="2868139">err</span>&nbsp;<span class="op" id="2868143">!=</span>&nbsp;<span class="ident" id="2868146">nil</span>&nbsp;<span class="op" id="2868150">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868154">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868165">defer</span>&nbsp;<span class="ident" id="2868171">d</span><span class="op" id="2868172">.</span><span class="ident" id="2868173">Close</span><span class="op" id="2868178">(</span><span class="op" id="2868179">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868183">names</span><span class="op" id="2868188">,</span>&nbsp;<span class="ident" id="2868190">_</span>&nbsp;<span class="op" id="2868192">:=</span>&nbsp;<span class="ident" id="2868195">d</span><span class="op" id="2868196">.</span><span class="ident" id="2868197">Readdirnames</span><span class="op" id="2868209">(</span><span class="op" id="2868210">-</span><span class="num" id="2868211">1</span><span class="op" id="2868212">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868215">sort</span><span class="op" id="2868219">.</span><span class="ident" id="2868220">Strings</span><span class="op" id="2868227">(</span><span class="ident" id="2868228">names</span><span class="op" id="2868233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868237">for</span>&nbsp;<span class="ident" id="2868241">_</span><span class="op" id="2868242">,</span>&nbsp;<span class="ident" id="2868244">n</span>&nbsp;<span class="op" id="2868246">:=</span>&nbsp;<span class="keyword" id="2868249">range</span>&nbsp;<span class="ident" id="2868255">names</span>&nbsp;<span class="op" id="2868261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868265">matched</span><span class="op" id="2868272">,</span>&nbsp;<span class="ident" id="2868274">err</span>&nbsp;<span class="op" id="2868278">:=</span>&nbsp;<span class="ident" id="2868281">Match</span><span class="op" id="2868286">(</span><span class="ident" id="2868287">pattern</span><span class="op" id="2868294">,</span>&nbsp;<span class="ident" id="2868296">n</span><span class="op" id="2868297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868301">if</span>&nbsp;<span class="ident" id="2868304">err</span>&nbsp;<span class="op" id="2868308">!=</span>&nbsp;<span class="ident" id="2868311">nil</span>&nbsp;<span class="op" id="2868315">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868320">return</span>&nbsp;<span class="ident" id="2868327">m</span><span class="op" id="2868328">,</span>&nbsp;<span class="ident" id="2868330">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868340">if</span>&nbsp;<span class="ident" id="2868343">matched</span>&nbsp;<span class="op" id="2868351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868356">m</span>&nbsp;<span class="op" id="2868358">=</span>&nbsp;<span class="builtinfunc" id="2868360">append</span><span class="op" id="2868366">(</span><span class="ident" id="2868367">m</span><span class="op" id="2868368">,</span>&nbsp;<span class="ident" id="2868370">Join</span><span class="op" id="2868374">(</span><span class="ident" id="2868375">dir</span><span class="op" id="2868378">,</span>&nbsp;<span class="ident" id="2868380">n</span><span class="op" id="2868381">)</span><span class="op" id="2868382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868386">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868392">return</span><br>
<span class="lineno"></span><span class="op" id="2868399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2868402">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="2868471">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="2868495">func</span>&nbsp;<span class="ident" id="2868500">hasMeta</span><span class="op" id="2868507">(</span><span class="ident" id="2868508">path</span>&nbsp;<span class="builtintype" id="2868513">string</span><span class="op" id="2868519">)</span>&nbsp;<span class="builtintype" id="2868521">bool</span>&nbsp;<span class="op" id="2868526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868529">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868594">return</span>&nbsp;<span class="ident" id="2868601">strings</span><span class="op" id="2868608">.</span><span class="ident" id="2868609">IndexAny</span><span class="op" id="2868617">(</span><span class="ident" id="2868618">path</span><span class="op" id="2868622">,</span>&nbsp;<span class="string" id="2868624">&#34;*?[&#34;</span><span class="op" id="2868629">)</span>&nbsp;<span class="op" id="2868631">&gt;=</span>&nbsp;<span class="num" id="2868634">0</span><br>
<span class="lineno"></span><span class="op" id="2868636">}</span>
</div>
</body>
</html>
