<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6761287">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6761342">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6761396">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6761447">package</span>&nbsp;<span class="ident" id="6761455">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6761460">import</span>&nbsp;<span class="op" id="6761467">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761470">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761478">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761484">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761490">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761501">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6761512">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6761519">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6761522">func</span>&nbsp;<span class="ident" id="6761527">skipServerTest</span><span class="op" id="6761541">(</span><span class="ident" id="6761542">net</span><span class="op" id="6761545">,</span>&nbsp;<span class="ident" id="6761547">unixsotype</span><span class="op" id="6761557">,</span>&nbsp;<span class="ident" id="6761559">addr</span>&nbsp;<span class="builtintype" id="6761564">string</span><span class="op" id="6761570">,</span>&nbsp;<span class="ident" id="6761572">ipv6</span><span class="op" id="6761576">,</span>&nbsp;<span class="ident" id="6761578">ipv4map</span><span class="op" id="6761585">,</span>&nbsp;<span class="ident" id="6761587">linuxOnly</span>&nbsp;<span class="builtintype" id="6761597">bool</span><span class="op" id="6761601">)</span>&nbsp;<span class="builtintype" id="6761603">bool</span>&nbsp;<span class="op" id="6761608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761611">switch</span>&nbsp;<span class="ident" id="6761618">runtime</span><span class="op" id="6761625">.</span><span class="ident" id="6761626">GOOS</span>&nbsp;<span class="op" id="6761631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761634">case</span>&nbsp;<span class="string" id="6761639">&#34;linux&#34;</span><span class="op" id="6761646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761649">case</span>&nbsp;<span class="string" id="6761654">&#34;nacl&#34;</span><span class="op" id="6761660">,</span>&nbsp;<span class="string" id="6761662">&#34;plan9&#34;</span><span class="op" id="6761669">,</span>&nbsp;<span class="string" id="6761671">&#34;windows&#34;</span><span class="op" id="6761680">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6761684">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761745">if</span>&nbsp;<span class="ident" id="6761748">net</span>&nbsp;<span class="op" id="6761752">==</span>&nbsp;<span class="ident" id="6761755">unixsotype</span>&nbsp;<span class="op" id="6761766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761771">return</span>&nbsp;<span class="builtintype" id="6761778">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761788">default</span><span class="op" id="6761795">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761799">if</span>&nbsp;<span class="ident" id="6761802">net</span>&nbsp;<span class="op" id="6761806">==</span>&nbsp;<span class="ident" id="6761809">unixsotype</span>&nbsp;<span class="op" id="6761820">&amp;&amp;</span>&nbsp;<span class="ident" id="6761823">linuxOnly</span>&nbsp;<span class="op" id="6761833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761838">return</span>&nbsp;<span class="builtintype" id="6761845">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761858">switch</span>&nbsp;<span class="ident" id="6761865">addr</span>&nbsp;<span class="op" id="6761870">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761873">case</span>&nbsp;<span class="string" id="6761878">&#34;&#34;</span><span class="op" id="6761880">,</span>&nbsp;<span class="string" id="6761882">&#34;0.0.0.0&#34;</span><span class="op" id="6761891">,</span>&nbsp;<span class="string" id="6761893">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6761911">,</span>&nbsp;<span class="string" id="6761913">&#34;[::]&#34;</span><span class="op" id="6761919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761923">if</span>&nbsp;<span class="ident" id="6761926">testing</span><span class="op" id="6761933">.</span><span class="ident" id="6761934">Short</span><span class="op" id="6761939">(</span><span class="op" id="6761940">)</span>&nbsp;<span class="op" id="6761942">||</span>&nbsp;<span class="op" id="6761945">!</span><span class="op" id="6761946">*</span><span class="ident" id="6761947">testExternal</span>&nbsp;<span class="op" id="6761960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761965">return</span>&nbsp;<span class="builtintype" id="6761972">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761982">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6761985">if</span>&nbsp;<span class="ident" id="6761988">ipv6</span>&nbsp;<span class="op" id="6761993">&amp;&amp;</span>&nbsp;<span class="op" id="6761996">!</span><span class="ident" id="6761997">supportsIPv6</span>&nbsp;<span class="op" id="6762010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6762014">return</span>&nbsp;<span class="builtintype" id="6762021">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6762030">if</span>&nbsp;<span class="ident" id="6762033">ipv4map</span>&nbsp;<span class="op" id="6762041">&amp;&amp;</span>&nbsp;<span class="op" id="6762044">!</span><span class="ident" id="6762045">supportsIPv4map</span>&nbsp;<span class="op" id="6762061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6762065">return</span>&nbsp;<span class="builtintype" id="6762072">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6762081">return</span>&nbsp;<span class="builtintype" id="6762088">false</span><br>
<span class="lineno"></span><span class="op" id="6762094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6762097">var</span>&nbsp;<span class="ident" id="6762101">streamConnServerTests</span>&nbsp;<span class="op" id="6762123">=</span>&nbsp;<span class="op" id="6762125">[</span><span class="op" id="6762126">]</span><span class="keyword" id="6762127">struct</span>&nbsp;<span class="op" id="6762134">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762137">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762147">string</span>&nbsp;<span class="comment" id="6762154">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762170">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762180">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762188">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762198">string</span>&nbsp;<span class="comment" id="6762205">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762221">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762231">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762239">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762249">bool</span>&nbsp;<span class="comment" id="6762254">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762295">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762305">bool</span>&nbsp;<span class="comment" id="6762310">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762356">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6762366">bool</span>&nbsp;<span class="comment" id="6762371">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6762396">linuxOnly</span>&nbsp;<span class="builtintype" id="6762406">bool</span>&nbsp;<span class="comment" id="6762411">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6762465">}</span><span class="op" id="6762466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762469">{</span><span class="ident" id="6762470">snet</span><span class="op" id="6762474">:</span>&nbsp;<span class="string" id="6762476">&#34;tcp&#34;</span><span class="op" id="6762481">,</span>&nbsp;<span class="ident" id="6762483">saddr</span><span class="op" id="6762488">:</span>&nbsp;<span class="string" id="6762490">&#34;&#34;</span><span class="op" id="6762492">,</span>&nbsp;<span class="ident" id="6762494">cnet</span><span class="op" id="6762498">:</span>&nbsp;<span class="string" id="6762500">&#34;tcp&#34;</span><span class="op" id="6762505">,</span>&nbsp;<span class="ident" id="6762507">caddr</span><span class="op" id="6762512">:</span>&nbsp;<span class="string" id="6762514">&#34;127.0.0.1&#34;</span><span class="op" id="6762525">}</span><span class="op" id="6762526">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762529">{</span><span class="ident" id="6762530">snet</span><span class="op" id="6762534">:</span>&nbsp;<span class="string" id="6762536">&#34;tcp&#34;</span><span class="op" id="6762541">,</span>&nbsp;<span class="ident" id="6762543">saddr</span><span class="op" id="6762548">:</span>&nbsp;<span class="string" id="6762550">&#34;0.0.0.0&#34;</span><span class="op" id="6762559">,</span>&nbsp;<span class="ident" id="6762561">cnet</span><span class="op" id="6762565">:</span>&nbsp;<span class="string" id="6762567">&#34;tcp&#34;</span><span class="op" id="6762572">,</span>&nbsp;<span class="ident" id="6762574">caddr</span><span class="op" id="6762579">:</span>&nbsp;<span class="string" id="6762581">&#34;127.0.0.1&#34;</span><span class="op" id="6762592">}</span><span class="op" id="6762593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762596">{</span><span class="ident" id="6762597">snet</span><span class="op" id="6762601">:</span>&nbsp;<span class="string" id="6762603">&#34;tcp&#34;</span><span class="op" id="6762608">,</span>&nbsp;<span class="ident" id="6762610">saddr</span><span class="op" id="6762615">:</span>&nbsp;<span class="string" id="6762617">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6762635">,</span>&nbsp;<span class="ident" id="6762637">cnet</span><span class="op" id="6762641">:</span>&nbsp;<span class="string" id="6762643">&#34;tcp&#34;</span><span class="op" id="6762648">,</span>&nbsp;<span class="ident" id="6762650">caddr</span><span class="op" id="6762655">:</span>&nbsp;<span class="string" id="6762657">&#34;127.0.0.1&#34;</span><span class="op" id="6762668">}</span><span class="op" id="6762669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762672">{</span><span class="ident" id="6762673">snet</span><span class="op" id="6762677">:</span>&nbsp;<span class="string" id="6762679">&#34;tcp&#34;</span><span class="op" id="6762684">,</span>&nbsp;<span class="ident" id="6762686">saddr</span><span class="op" id="6762691">:</span>&nbsp;<span class="string" id="6762693">&#34;[::]&#34;</span><span class="op" id="6762699">,</span>&nbsp;<span class="ident" id="6762701">cnet</span><span class="op" id="6762705">:</span>&nbsp;<span class="string" id="6762707">&#34;tcp&#34;</span><span class="op" id="6762712">,</span>&nbsp;<span class="ident" id="6762714">caddr</span><span class="op" id="6762719">:</span>&nbsp;<span class="string" id="6762721">&#34;[::1]&#34;</span><span class="op" id="6762728">,</span>&nbsp;<span class="ident" id="6762730">ipv6</span><span class="op" id="6762734">:</span>&nbsp;<span class="builtintype" id="6762736">true</span><span class="op" id="6762740">}</span><span class="op" id="6762741">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762745">{</span><span class="ident" id="6762746">snet</span><span class="op" id="6762750">:</span>&nbsp;<span class="string" id="6762752">&#34;tcp&#34;</span><span class="op" id="6762757">,</span>&nbsp;<span class="ident" id="6762759">saddr</span><span class="op" id="6762764">:</span>&nbsp;<span class="string" id="6762766">&#34;&#34;</span><span class="op" id="6762768">,</span>&nbsp;<span class="ident" id="6762770">cnet</span><span class="op" id="6762774">:</span>&nbsp;<span class="string" id="6762776">&#34;tcp&#34;</span><span class="op" id="6762781">,</span>&nbsp;<span class="ident" id="6762783">caddr</span><span class="op" id="6762788">:</span>&nbsp;<span class="string" id="6762790">&#34;[::1]&#34;</span><span class="op" id="6762797">,</span>&nbsp;<span class="ident" id="6762799">ipv4map</span><span class="op" id="6762806">:</span>&nbsp;<span class="builtintype" id="6762808">true</span><span class="op" id="6762812">}</span><span class="op" id="6762813">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762816">{</span><span class="ident" id="6762817">snet</span><span class="op" id="6762821">:</span>&nbsp;<span class="string" id="6762823">&#34;tcp&#34;</span><span class="op" id="6762828">,</span>&nbsp;<span class="ident" id="6762830">saddr</span><span class="op" id="6762835">:</span>&nbsp;<span class="string" id="6762837">&#34;0.0.0.0&#34;</span><span class="op" id="6762846">,</span>&nbsp;<span class="ident" id="6762848">cnet</span><span class="op" id="6762852">:</span>&nbsp;<span class="string" id="6762854">&#34;tcp&#34;</span><span class="op" id="6762859">,</span>&nbsp;<span class="ident" id="6762861">caddr</span><span class="op" id="6762866">:</span>&nbsp;<span class="string" id="6762868">&#34;[::1]&#34;</span><span class="op" id="6762875">,</span>&nbsp;<span class="ident" id="6762877">ipv4map</span><span class="op" id="6762884">:</span>&nbsp;<span class="builtintype" id="6762886">true</span><span class="op" id="6762890">}</span><span class="op" id="6762891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762894">{</span><span class="ident" id="6762895">snet</span><span class="op" id="6762899">:</span>&nbsp;<span class="string" id="6762901">&#34;tcp&#34;</span><span class="op" id="6762906">,</span>&nbsp;<span class="ident" id="6762908">saddr</span><span class="op" id="6762913">:</span>&nbsp;<span class="string" id="6762915">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6762933">,</span>&nbsp;<span class="ident" id="6762935">cnet</span><span class="op" id="6762939">:</span>&nbsp;<span class="string" id="6762941">&#34;tcp&#34;</span><span class="op" id="6762946">,</span>&nbsp;<span class="ident" id="6762948">caddr</span><span class="op" id="6762953">:</span>&nbsp;<span class="string" id="6762955">&#34;[::1]&#34;</span><span class="op" id="6762962">,</span>&nbsp;<span class="ident" id="6762964">ipv4map</span><span class="op" id="6762971">:</span>&nbsp;<span class="builtintype" id="6762973">true</span><span class="op" id="6762977">}</span><span class="op" id="6762978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6762981">{</span><span class="ident" id="6762982">snet</span><span class="op" id="6762986">:</span>&nbsp;<span class="string" id="6762988">&#34;tcp&#34;</span><span class="op" id="6762993">,</span>&nbsp;<span class="ident" id="6762995">saddr</span><span class="op" id="6763000">:</span>&nbsp;<span class="string" id="6763002">&#34;[::]&#34;</span><span class="op" id="6763008">,</span>&nbsp;<span class="ident" id="6763010">cnet</span><span class="op" id="6763014">:</span>&nbsp;<span class="string" id="6763016">&#34;tcp&#34;</span><span class="op" id="6763021">,</span>&nbsp;<span class="ident" id="6763023">caddr</span><span class="op" id="6763028">:</span>&nbsp;<span class="string" id="6763030">&#34;127.0.0.1&#34;</span><span class="op" id="6763041">,</span>&nbsp;<span class="ident" id="6763043">ipv4map</span><span class="op" id="6763050">:</span>&nbsp;<span class="builtintype" id="6763052">true</span><span class="op" id="6763056">}</span><span class="op" id="6763057">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763061">{</span><span class="ident" id="6763062">snet</span><span class="op" id="6763066">:</span>&nbsp;<span class="string" id="6763068">&#34;tcp&#34;</span><span class="op" id="6763073">,</span>&nbsp;<span class="ident" id="6763075">saddr</span><span class="op" id="6763080">:</span>&nbsp;<span class="string" id="6763082">&#34;&#34;</span><span class="op" id="6763084">,</span>&nbsp;<span class="ident" id="6763086">cnet</span><span class="op" id="6763090">:</span>&nbsp;<span class="string" id="6763092">&#34;tcp4&#34;</span><span class="op" id="6763098">,</span>&nbsp;<span class="ident" id="6763100">caddr</span><span class="op" id="6763105">:</span>&nbsp;<span class="string" id="6763107">&#34;127.0.0.1&#34;</span><span class="op" id="6763118">}</span><span class="op" id="6763119">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763122">{</span><span class="ident" id="6763123">snet</span><span class="op" id="6763127">:</span>&nbsp;<span class="string" id="6763129">&#34;tcp&#34;</span><span class="op" id="6763134">,</span>&nbsp;<span class="ident" id="6763136">saddr</span><span class="op" id="6763141">:</span>&nbsp;<span class="string" id="6763143">&#34;0.0.0.0&#34;</span><span class="op" id="6763152">,</span>&nbsp;<span class="ident" id="6763154">cnet</span><span class="op" id="6763158">:</span>&nbsp;<span class="string" id="6763160">&#34;tcp4&#34;</span><span class="op" id="6763166">,</span>&nbsp;<span class="ident" id="6763168">caddr</span><span class="op" id="6763173">:</span>&nbsp;<span class="string" id="6763175">&#34;127.0.0.1&#34;</span><span class="op" id="6763186">}</span><span class="op" id="6763187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763190">{</span><span class="ident" id="6763191">snet</span><span class="op" id="6763195">:</span>&nbsp;<span class="string" id="6763197">&#34;tcp&#34;</span><span class="op" id="6763202">,</span>&nbsp;<span class="ident" id="6763204">saddr</span><span class="op" id="6763209">:</span>&nbsp;<span class="string" id="6763211">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6763229">,</span>&nbsp;<span class="ident" id="6763231">cnet</span><span class="op" id="6763235">:</span>&nbsp;<span class="string" id="6763237">&#34;tcp4&#34;</span><span class="op" id="6763243">,</span>&nbsp;<span class="ident" id="6763245">caddr</span><span class="op" id="6763250">:</span>&nbsp;<span class="string" id="6763252">&#34;127.0.0.1&#34;</span><span class="op" id="6763263">}</span><span class="op" id="6763264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763267">{</span><span class="ident" id="6763268">snet</span><span class="op" id="6763272">:</span>&nbsp;<span class="string" id="6763274">&#34;tcp&#34;</span><span class="op" id="6763279">,</span>&nbsp;<span class="ident" id="6763281">saddr</span><span class="op" id="6763286">:</span>&nbsp;<span class="string" id="6763288">&#34;[::]&#34;</span><span class="op" id="6763294">,</span>&nbsp;<span class="ident" id="6763296">cnet</span><span class="op" id="6763300">:</span>&nbsp;<span class="string" id="6763302">&#34;tcp6&#34;</span><span class="op" id="6763308">,</span>&nbsp;<span class="ident" id="6763310">caddr</span><span class="op" id="6763315">:</span>&nbsp;<span class="string" id="6763317">&#34;[::1]&#34;</span><span class="op" id="6763324">,</span>&nbsp;<span class="ident" id="6763326">ipv6</span><span class="op" id="6763330">:</span>&nbsp;<span class="builtintype" id="6763332">true</span><span class="op" id="6763336">}</span><span class="op" id="6763337">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763341">{</span><span class="ident" id="6763342">snet</span><span class="op" id="6763346">:</span>&nbsp;<span class="string" id="6763348">&#34;tcp&#34;</span><span class="op" id="6763353">,</span>&nbsp;<span class="ident" id="6763355">saddr</span><span class="op" id="6763360">:</span>&nbsp;<span class="string" id="6763362">&#34;&#34;</span><span class="op" id="6763364">,</span>&nbsp;<span class="ident" id="6763366">cnet</span><span class="op" id="6763370">:</span>&nbsp;<span class="string" id="6763372">&#34;tcp6&#34;</span><span class="op" id="6763378">,</span>&nbsp;<span class="ident" id="6763380">caddr</span><span class="op" id="6763385">:</span>&nbsp;<span class="string" id="6763387">&#34;[::1]&#34;</span><span class="op" id="6763394">,</span>&nbsp;<span class="ident" id="6763396">ipv4map</span><span class="op" id="6763403">:</span>&nbsp;<span class="builtintype" id="6763405">true</span><span class="op" id="6763409">}</span><span class="op" id="6763410">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763413">{</span><span class="ident" id="6763414">snet</span><span class="op" id="6763418">:</span>&nbsp;<span class="string" id="6763420">&#34;tcp&#34;</span><span class="op" id="6763425">,</span>&nbsp;<span class="ident" id="6763427">saddr</span><span class="op" id="6763432">:</span>&nbsp;<span class="string" id="6763434">&#34;0.0.0.0&#34;</span><span class="op" id="6763443">,</span>&nbsp;<span class="ident" id="6763445">cnet</span><span class="op" id="6763449">:</span>&nbsp;<span class="string" id="6763451">&#34;tcp6&#34;</span><span class="op" id="6763457">,</span>&nbsp;<span class="ident" id="6763459">caddr</span><span class="op" id="6763464">:</span>&nbsp;<span class="string" id="6763466">&#34;[::1]&#34;</span><span class="op" id="6763473">,</span>&nbsp;<span class="ident" id="6763475">ipv4map</span><span class="op" id="6763482">:</span>&nbsp;<span class="builtintype" id="6763484">true</span><span class="op" id="6763488">}</span><span class="op" id="6763489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763492">{</span><span class="ident" id="6763493">snet</span><span class="op" id="6763497">:</span>&nbsp;<span class="string" id="6763499">&#34;tcp&#34;</span><span class="op" id="6763504">,</span>&nbsp;<span class="ident" id="6763506">saddr</span><span class="op" id="6763511">:</span>&nbsp;<span class="string" id="6763513">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6763531">,</span>&nbsp;<span class="ident" id="6763533">cnet</span><span class="op" id="6763537">:</span>&nbsp;<span class="string" id="6763539">&#34;tcp6&#34;</span><span class="op" id="6763545">,</span>&nbsp;<span class="ident" id="6763547">caddr</span><span class="op" id="6763552">:</span>&nbsp;<span class="string" id="6763554">&#34;[::1]&#34;</span><span class="op" id="6763561">,</span>&nbsp;<span class="ident" id="6763563">ipv4map</span><span class="op" id="6763570">:</span>&nbsp;<span class="builtintype" id="6763572">true</span><span class="op" id="6763576">}</span><span class="op" id="6763577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763580">{</span><span class="ident" id="6763581">snet</span><span class="op" id="6763585">:</span>&nbsp;<span class="string" id="6763587">&#34;tcp&#34;</span><span class="op" id="6763592">,</span>&nbsp;<span class="ident" id="6763594">saddr</span><span class="op" id="6763599">:</span>&nbsp;<span class="string" id="6763601">&#34;[::]&#34;</span><span class="op" id="6763607">,</span>&nbsp;<span class="ident" id="6763609">cnet</span><span class="op" id="6763613">:</span>&nbsp;<span class="string" id="6763615">&#34;tcp4&#34;</span><span class="op" id="6763621">,</span>&nbsp;<span class="ident" id="6763623">caddr</span><span class="op" id="6763628">:</span>&nbsp;<span class="string" id="6763630">&#34;127.0.0.1&#34;</span><span class="op" id="6763641">,</span>&nbsp;<span class="ident" id="6763643">ipv4map</span><span class="op" id="6763650">:</span>&nbsp;<span class="builtintype" id="6763652">true</span><span class="op" id="6763656">}</span><span class="op" id="6763657">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763661">{</span><span class="ident" id="6763662">snet</span><span class="op" id="6763666">:</span>&nbsp;<span class="string" id="6763668">&#34;tcp&#34;</span><span class="op" id="6763673">,</span>&nbsp;<span class="ident" id="6763675">saddr</span><span class="op" id="6763680">:</span>&nbsp;<span class="string" id="6763682">&#34;127.0.0.1&#34;</span><span class="op" id="6763693">,</span>&nbsp;<span class="ident" id="6763695">cnet</span><span class="op" id="6763699">:</span>&nbsp;<span class="string" id="6763701">&#34;tcp&#34;</span><span class="op" id="6763706">,</span>&nbsp;<span class="ident" id="6763708">caddr</span><span class="op" id="6763713">:</span>&nbsp;<span class="string" id="6763715">&#34;127.0.0.1&#34;</span><span class="op" id="6763726">}</span><span class="op" id="6763727">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763730">{</span><span class="ident" id="6763731">snet</span><span class="op" id="6763735">:</span>&nbsp;<span class="string" id="6763737">&#34;tcp&#34;</span><span class="op" id="6763742">,</span>&nbsp;<span class="ident" id="6763744">saddr</span><span class="op" id="6763749">:</span>&nbsp;<span class="string" id="6763751">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6763771">,</span>&nbsp;<span class="ident" id="6763773">cnet</span><span class="op" id="6763777">:</span>&nbsp;<span class="string" id="6763779">&#34;tcp&#34;</span><span class="op" id="6763784">,</span>&nbsp;<span class="ident" id="6763786">caddr</span><span class="op" id="6763791">:</span>&nbsp;<span class="string" id="6763793">&#34;127.0.0.1&#34;</span><span class="op" id="6763804">}</span><span class="op" id="6763805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763808">{</span><span class="ident" id="6763809">snet</span><span class="op" id="6763813">:</span>&nbsp;<span class="string" id="6763815">&#34;tcp&#34;</span><span class="op" id="6763820">,</span>&nbsp;<span class="ident" id="6763822">saddr</span><span class="op" id="6763827">:</span>&nbsp;<span class="string" id="6763829">&#34;[::1]&#34;</span><span class="op" id="6763836">,</span>&nbsp;<span class="ident" id="6763838">cnet</span><span class="op" id="6763842">:</span>&nbsp;<span class="string" id="6763844">&#34;tcp&#34;</span><span class="op" id="6763849">,</span>&nbsp;<span class="ident" id="6763851">caddr</span><span class="op" id="6763856">:</span>&nbsp;<span class="string" id="6763858">&#34;[::1]&#34;</span><span class="op" id="6763865">,</span>&nbsp;<span class="ident" id="6763867">ipv6</span><span class="op" id="6763871">:</span>&nbsp;<span class="builtintype" id="6763873">true</span><span class="op" id="6763877">}</span><span class="op" id="6763878">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763882">{</span><span class="ident" id="6763883">snet</span><span class="op" id="6763887">:</span>&nbsp;<span class="string" id="6763889">&#34;tcp4&#34;</span><span class="op" id="6763895">,</span>&nbsp;<span class="ident" id="6763897">saddr</span><span class="op" id="6763902">:</span>&nbsp;<span class="string" id="6763904">&#34;&#34;</span><span class="op" id="6763906">,</span>&nbsp;<span class="ident" id="6763908">cnet</span><span class="op" id="6763912">:</span>&nbsp;<span class="string" id="6763914">&#34;tcp4&#34;</span><span class="op" id="6763920">,</span>&nbsp;<span class="ident" id="6763922">caddr</span><span class="op" id="6763927">:</span>&nbsp;<span class="string" id="6763929">&#34;127.0.0.1&#34;</span><span class="op" id="6763940">}</span><span class="op" id="6763941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6763944">{</span><span class="ident" id="6763945">snet</span><span class="op" id="6763949">:</span>&nbsp;<span class="string" id="6763951">&#34;tcp4&#34;</span><span class="op" id="6763957">,</span>&nbsp;<span class="ident" id="6763959">saddr</span><span class="op" id="6763964">:</span>&nbsp;<span class="string" id="6763966">&#34;0.0.0.0&#34;</span><span class="op" id="6763975">,</span>&nbsp;<span class="ident" id="6763977">cnet</span><span class="op" id="6763981">:</span>&nbsp;<span class="string" id="6763983">&#34;tcp4&#34;</span><span class="op" id="6763989">,</span>&nbsp;<span class="ident" id="6763991">caddr</span><span class="op" id="6763996">:</span>&nbsp;<span class="string" id="6763998">&#34;127.0.0.1&#34;</span><span class="op" id="6764009">}</span><span class="op" id="6764010">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764013">{</span><span class="ident" id="6764014">snet</span><span class="op" id="6764018">:</span>&nbsp;<span class="string" id="6764020">&#34;tcp4&#34;</span><span class="op" id="6764026">,</span>&nbsp;<span class="ident" id="6764028">saddr</span><span class="op" id="6764033">:</span>&nbsp;<span class="string" id="6764035">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6764053">,</span>&nbsp;<span class="ident" id="6764055">cnet</span><span class="op" id="6764059">:</span>&nbsp;<span class="string" id="6764061">&#34;tcp4&#34;</span><span class="op" id="6764067">,</span>&nbsp;<span class="ident" id="6764069">caddr</span><span class="op" id="6764074">:</span>&nbsp;<span class="string" id="6764076">&#34;127.0.0.1&#34;</span><span class="op" id="6764087">}</span><span class="op" id="6764088">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764092">{</span><span class="ident" id="6764093">snet</span><span class="op" id="6764097">:</span>&nbsp;<span class="string" id="6764099">&#34;tcp4&#34;</span><span class="op" id="6764105">,</span>&nbsp;<span class="ident" id="6764107">saddr</span><span class="op" id="6764112">:</span>&nbsp;<span class="string" id="6764114">&#34;127.0.0.1&#34;</span><span class="op" id="6764125">,</span>&nbsp;<span class="ident" id="6764127">cnet</span><span class="op" id="6764131">:</span>&nbsp;<span class="string" id="6764133">&#34;tcp4&#34;</span><span class="op" id="6764139">,</span>&nbsp;<span class="ident" id="6764141">caddr</span><span class="op" id="6764146">:</span>&nbsp;<span class="string" id="6764148">&#34;127.0.0.1&#34;</span><span class="op" id="6764159">}</span><span class="op" id="6764160">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764164">{</span><span class="ident" id="6764165">snet</span><span class="op" id="6764169">:</span>&nbsp;<span class="string" id="6764171">&#34;tcp6&#34;</span><span class="op" id="6764177">,</span>&nbsp;<span class="ident" id="6764179">saddr</span><span class="op" id="6764184">:</span>&nbsp;<span class="string" id="6764186">&#34;&#34;</span><span class="op" id="6764188">,</span>&nbsp;<span class="ident" id="6764190">cnet</span><span class="op" id="6764194">:</span>&nbsp;<span class="string" id="6764196">&#34;tcp6&#34;</span><span class="op" id="6764202">,</span>&nbsp;<span class="ident" id="6764204">caddr</span><span class="op" id="6764209">:</span>&nbsp;<span class="string" id="6764211">&#34;[::1]&#34;</span><span class="op" id="6764218">,</span>&nbsp;<span class="ident" id="6764220">ipv6</span><span class="op" id="6764224">:</span>&nbsp;<span class="builtintype" id="6764226">true</span><span class="op" id="6764230">}</span><span class="op" id="6764231">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764234">{</span><span class="ident" id="6764235">snet</span><span class="op" id="6764239">:</span>&nbsp;<span class="string" id="6764241">&#34;tcp6&#34;</span><span class="op" id="6764247">,</span>&nbsp;<span class="ident" id="6764249">saddr</span><span class="op" id="6764254">:</span>&nbsp;<span class="string" id="6764256">&#34;[::]&#34;</span><span class="op" id="6764262">,</span>&nbsp;<span class="ident" id="6764264">cnet</span><span class="op" id="6764268">:</span>&nbsp;<span class="string" id="6764270">&#34;tcp6&#34;</span><span class="op" id="6764276">,</span>&nbsp;<span class="ident" id="6764278">caddr</span><span class="op" id="6764283">:</span>&nbsp;<span class="string" id="6764285">&#34;[::1]&#34;</span><span class="op" id="6764292">,</span>&nbsp;<span class="ident" id="6764294">ipv6</span><span class="op" id="6764298">:</span>&nbsp;<span class="builtintype" id="6764300">true</span><span class="op" id="6764304">}</span><span class="op" id="6764305">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764309">{</span><span class="ident" id="6764310">snet</span><span class="op" id="6764314">:</span>&nbsp;<span class="string" id="6764316">&#34;tcp6&#34;</span><span class="op" id="6764322">,</span>&nbsp;<span class="ident" id="6764324">saddr</span><span class="op" id="6764329">:</span>&nbsp;<span class="string" id="6764331">&#34;[::1]&#34;</span><span class="op" id="6764338">,</span>&nbsp;<span class="ident" id="6764340">cnet</span><span class="op" id="6764344">:</span>&nbsp;<span class="string" id="6764346">&#34;tcp6&#34;</span><span class="op" id="6764352">,</span>&nbsp;<span class="ident" id="6764354">caddr</span><span class="op" id="6764359">:</span>&nbsp;<span class="string" id="6764361">&#34;[::1]&#34;</span><span class="op" id="6764368">,</span>&nbsp;<span class="ident" id="6764370">ipv6</span><span class="op" id="6764374">:</span>&nbsp;<span class="builtintype" id="6764376">true</span><span class="op" id="6764380">}</span><span class="op" id="6764381">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764385">{</span><span class="ident" id="6764386">snet</span><span class="op" id="6764390">:</span>&nbsp;<span class="string" id="6764392">&#34;unix&#34;</span><span class="op" id="6764398">,</span>&nbsp;<span class="ident" id="6764400">saddr</span><span class="op" id="6764405">:</span>&nbsp;<span class="ident" id="6764407">testUnixAddr</span><span class="op" id="6764419">(</span><span class="op" id="6764420">)</span><span class="op" id="6764421">,</span>&nbsp;<span class="ident" id="6764423">cnet</span><span class="op" id="6764427">:</span>&nbsp;<span class="string" id="6764429">&#34;unix&#34;</span><span class="op" id="6764435">,</span>&nbsp;<span class="ident" id="6764437">caddr</span><span class="op" id="6764442">:</span>&nbsp;<span class="ident" id="6764444">testUnixAddr</span><span class="op" id="6764456">(</span><span class="op" id="6764457">)</span><span class="op" id="6764458">}</span><span class="op" id="6764459">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764462">{</span><span class="ident" id="6764463">snet</span><span class="op" id="6764467">:</span>&nbsp;<span class="string" id="6764469">&#34;unix&#34;</span><span class="op" id="6764475">,</span>&nbsp;<span class="ident" id="6764477">saddr</span><span class="op" id="6764482">:</span>&nbsp;<span class="string" id="6764484">&#34;@gotest2/net&#34;</span><span class="op" id="6764498">,</span>&nbsp;<span class="ident" id="6764500">cnet</span><span class="op" id="6764504">:</span>&nbsp;<span class="string" id="6764506">&#34;unix&#34;</span><span class="op" id="6764512">,</span>&nbsp;<span class="ident" id="6764514">caddr</span><span class="op" id="6764519">:</span>&nbsp;<span class="string" id="6764521">&#34;@gotest2/net.local&#34;</span><span class="op" id="6764541">,</span>&nbsp;<span class="ident" id="6764543">linuxOnly</span><span class="op" id="6764552">:</span>&nbsp;<span class="builtintype" id="6764554">true</span><span class="op" id="6764558">}</span><span class="op" id="6764559">,</span><br>
<span class="lineno"></span><span class="op" id="6764561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764564">func</span>&nbsp;<span class="ident" id="6764569">TestStreamConnServer</span><span class="op" id="6764589">(</span><span class="ident" id="6764590">t</span>&nbsp;<span class="op" id="6764592">*</span><span class="ident" id="6764593">testing</span><span class="op" id="6764600">.</span><span class="ident" id="6764601">T</span><span class="op" id="6764602">)</span>&nbsp;<span class="op" id="6764604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764607">for</span>&nbsp;<span class="ident" id="6764611">_</span><span class="op" id="6764612">,</span>&nbsp;<span class="ident" id="6764614">tt</span>&nbsp;<span class="op" id="6764617">:=</span>&nbsp;<span class="keyword" id="6764620">range</span>&nbsp;<span class="ident" id="6764626">streamConnServerTests</span>&nbsp;<span class="op" id="6764648">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764652">if</span>&nbsp;<span class="ident" id="6764655">skipServerTest</span><span class="op" id="6764669">(</span><span class="ident" id="6764670">tt</span><span class="op" id="6764672">.</span><span class="ident" id="6764673">snet</span><span class="op" id="6764677">,</span>&nbsp;<span class="string" id="6764679">&#34;unix&#34;</span><span class="op" id="6764685">,</span>&nbsp;<span class="ident" id="6764687">tt</span><span class="op" id="6764689">.</span><span class="ident" id="6764690">saddr</span><span class="op" id="6764695">,</span>&nbsp;<span class="ident" id="6764697">tt</span><span class="op" id="6764699">.</span><span class="ident" id="6764700">ipv6</span><span class="op" id="6764704">,</span>&nbsp;<span class="ident" id="6764706">tt</span><span class="op" id="6764708">.</span><span class="ident" id="6764709">ipv4map</span><span class="op" id="6764716">,</span>&nbsp;<span class="ident" id="6764718">tt</span><span class="op" id="6764720">.</span><span class="ident" id="6764721">linuxOnly</span><span class="op" id="6764730">)</span>&nbsp;<span class="op" id="6764732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764737">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6764753">listening</span>&nbsp;<span class="op" id="6764763">:=</span>&nbsp;<span class="builtinfunc" id="6764766">make</span><span class="op" id="6764770">(</span><span class="keyword" id="6764771">chan</span>&nbsp;<span class="builtintype" id="6764776">string</span><span class="op" id="6764782">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6764786">done</span>&nbsp;<span class="op" id="6764791">:=</span>&nbsp;<span class="builtinfunc" id="6764794">make</span><span class="op" id="6764798">(</span><span class="keyword" id="6764799">chan</span>&nbsp;<span class="builtintype" id="6764804">int</span><span class="op" id="6764807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764811">switch</span>&nbsp;<span class="ident" id="6764818">tt</span><span class="op" id="6764820">.</span><span class="ident" id="6764821">snet</span>&nbsp;<span class="op" id="6764826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764830">case</span>&nbsp;<span class="string" id="6764835">&#34;tcp&#34;</span><span class="op" id="6764840">,</span>&nbsp;<span class="string" id="6764842">&#34;tcp4&#34;</span><span class="op" id="6764848">,</span>&nbsp;<span class="string" id="6764850">&#34;tcp6&#34;</span><span class="op" id="6764856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6764861">tt</span><span class="op" id="6764863">.</span><span class="ident" id="6764864">saddr</span>&nbsp;<span class="op" id="6764870">+=</span>&nbsp;<span class="string" id="6764873">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764880">case</span>&nbsp;<span class="string" id="6764885">&#34;unix&#34;</span><span class="op" id="6764891">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6764896">os</span><span class="op" id="6764898">.</span><span class="ident" id="6764899">Remove</span><span class="op" id="6764905">(</span><span class="ident" id="6764906">tt</span><span class="op" id="6764908">.</span><span class="ident" id="6764909">saddr</span><span class="op" id="6764914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6764919">os</span><span class="op" id="6764921">.</span><span class="ident" id="6764922">Remove</span><span class="op" id="6764928">(</span><span class="ident" id="6764929">tt</span><span class="op" id="6764931">.</span><span class="ident" id="6764932">caddr</span><span class="op" id="6764937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6764941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6764946">go</span>&nbsp;<span class="ident" id="6764949">runStreamConnServer</span><span class="op" id="6764968">(</span><span class="ident" id="6764969">t</span><span class="op" id="6764970">,</span>&nbsp;<span class="ident" id="6764972">tt</span><span class="op" id="6764974">.</span><span class="ident" id="6764975">snet</span><span class="op" id="6764979">,</span>&nbsp;<span class="ident" id="6764981">tt</span><span class="op" id="6764983">.</span><span class="ident" id="6764984">saddr</span><span class="op" id="6764989">,</span>&nbsp;<span class="ident" id="6764991">listening</span><span class="op" id="6765000">,</span>&nbsp;<span class="ident" id="6765002">done</span><span class="op" id="6765006">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765010">taddr</span>&nbsp;<span class="op" id="6765016">:=</span>&nbsp;<span class="op" id="6765019">&lt;-</span><span class="ident" id="6765021">listening</span>&nbsp;<span class="comment" id="6765031">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765062">switch</span>&nbsp;<span class="ident" id="6765069">tt</span><span class="op" id="6765071">.</span><span class="ident" id="6765072">cnet</span>&nbsp;<span class="op" id="6765077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765081">case</span>&nbsp;<span class="string" id="6765086">&#34;tcp&#34;</span><span class="op" id="6765091">,</span>&nbsp;<span class="string" id="6765093">&#34;tcp4&#34;</span><span class="op" id="6765099">,</span>&nbsp;<span class="string" id="6765101">&#34;tcp6&#34;</span><span class="op" id="6765107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765112">_</span><span class="op" id="6765113">,</span>&nbsp;<span class="ident" id="6765115">port</span><span class="op" id="6765119">,</span>&nbsp;<span class="ident" id="6765121">err</span>&nbsp;<span class="op" id="6765125">:=</span>&nbsp;<span class="ident" id="6765128">SplitHostPort</span><span class="op" id="6765141">(</span><span class="ident" id="6765142">taddr</span><span class="op" id="6765147">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765152">if</span>&nbsp;<span class="ident" id="6765155">err</span>&nbsp;<span class="op" id="6765159">!=</span>&nbsp;<span class="builtintype" id="6765162">nil</span>&nbsp;<span class="op" id="6765166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765172">t</span><span class="op" id="6765173">.</span><span class="ident" id="6765174">Fatalf</span><span class="op" id="6765180">(</span><span class="string" id="6765181">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6765211">,</span>&nbsp;<span class="ident" id="6765213">taddr</span><span class="op" id="6765218">,</span>&nbsp;<span class="ident" id="6765220">err</span><span class="op" id="6765223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765233">taddr</span>&nbsp;<span class="op" id="6765239">=</span>&nbsp;<span class="ident" id="6765241">tt</span><span class="op" id="6765243">.</span><span class="ident" id="6765244">caddr</span>&nbsp;<span class="op" id="6765250">+</span>&nbsp;<span class="string" id="6765252">&#34;:&#34;</span>&nbsp;<span class="op" id="6765256">+</span>&nbsp;<span class="ident" id="6765258">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765265">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765270">runStreamConnClient</span><span class="op" id="6765289">(</span><span class="ident" id="6765290">t</span><span class="op" id="6765291">,</span>&nbsp;<span class="ident" id="6765293">tt</span><span class="op" id="6765295">.</span><span class="ident" id="6765296">cnet</span><span class="op" id="6765300">,</span>&nbsp;<span class="ident" id="6765302">taddr</span><span class="op" id="6765307">,</span>&nbsp;<span class="ident" id="6765309">tt</span><span class="op" id="6765311">.</span><span class="ident" id="6765312">empty</span><span class="op" id="6765317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765321">&lt;-</span><span class="ident" id="6765323">done</span>&nbsp;<span class="comment" id="6765328">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765359">switch</span>&nbsp;<span class="ident" id="6765366">tt</span><span class="op" id="6765368">.</span><span class="ident" id="6765369">snet</span>&nbsp;<span class="op" id="6765374">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765378">case</span>&nbsp;<span class="string" id="6765383">&#34;unix&#34;</span><span class="op" id="6765389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765394">os</span><span class="op" id="6765396">.</span><span class="ident" id="6765397">Remove</span><span class="op" id="6765403">(</span><span class="ident" id="6765404">tt</span><span class="op" id="6765406">.</span><span class="ident" id="6765407">saddr</span><span class="op" id="6765412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765417">os</span><span class="op" id="6765419">.</span><span class="ident" id="6765420">Remove</span><span class="op" id="6765426">(</span><span class="ident" id="6765427">tt</span><span class="op" id="6765429">.</span><span class="ident" id="6765430">caddr</span><span class="op" id="6765435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765442">}</span><br>
<span class="lineno">130</span><span class="op" id="6765444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6765447">var</span>&nbsp;<span class="ident" id="6765451">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6765476">=</span>&nbsp;<span class="op" id="6765478">[</span><span class="op" id="6765479">]</span><span class="keyword" id="6765480">struct</span>&nbsp;<span class="op" id="6765487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765490">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6765500">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765508">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6765518">string</span>&nbsp;<span class="comment" id="6765525">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765544">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6765554">string</span>&nbsp;<span class="comment" id="6765561">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765580">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6765590">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6765597">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6765622">linuxOnly</span>&nbsp;<span class="builtintype" id="6765632">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6765639">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6765693">}</span><span class="op" id="6765694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765697">{</span><span class="ident" id="6765698">net</span><span class="op" id="6765701">:</span>&nbsp;<span class="string" id="6765703">&#34;unixpacket&#34;</span><span class="op" id="6765715">,</span>&nbsp;<span class="ident" id="6765717">saddr</span><span class="op" id="6765722">:</span>&nbsp;<span class="ident" id="6765724">testUnixAddr</span><span class="op" id="6765736">(</span><span class="op" id="6765737">)</span><span class="op" id="6765738">,</span>&nbsp;<span class="ident" id="6765740">caddr</span><span class="op" id="6765745">:</span>&nbsp;<span class="ident" id="6765747">testUnixAddr</span><span class="op" id="6765759">(</span><span class="op" id="6765760">)</span><span class="op" id="6765761">}</span><span class="op" id="6765762">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6765765">{</span><span class="ident" id="6765766">net</span><span class="op" id="6765769">:</span>&nbsp;<span class="string" id="6765771">&#34;unixpacket&#34;</span><span class="op" id="6765783">,</span>&nbsp;<span class="ident" id="6765785">saddr</span><span class="op" id="6765790">:</span>&nbsp;<span class="string" id="6765792">&#34;@gotest4/net&#34;</span><span class="op" id="6765806">,</span>&nbsp;<span class="ident" id="6765808">caddr</span><span class="op" id="6765813">:</span>&nbsp;<span class="string" id="6765815">&#34;@gotest4/net.local&#34;</span><span class="op" id="6765835">,</span>&nbsp;<span class="ident" id="6765837">linuxOnly</span><span class="op" id="6765846">:</span>&nbsp;<span class="builtintype" id="6765848">true</span><span class="op" id="6765852">}</span><span class="op" id="6765853">,</span><br>
<span class="lineno"></span><span class="op" id="6765855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6765858">func</span>&nbsp;<span class="ident" id="6765863">TestSeqpacketConnServer</span><span class="op" id="6765886">(</span><span class="ident" id="6765887">t</span>&nbsp;<span class="op" id="6765889">*</span><span class="ident" id="6765890">testing</span><span class="op" id="6765897">.</span><span class="ident" id="6765898">T</span><span class="op" id="6765899">)</span>&nbsp;<span class="op" id="6765901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765904">switch</span>&nbsp;<span class="ident" id="6765911">runtime</span><span class="op" id="6765918">.</span><span class="ident" id="6765919">GOOS</span>&nbsp;<span class="op" id="6765924">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765927">case</span>&nbsp;<span class="string" id="6765932">&#34;darwin&#34;</span><span class="op" id="6765940">,</span>&nbsp;<span class="string" id="6765942">&#34;nacl&#34;</span><span class="op" id="6765948">,</span>&nbsp;<span class="string" id="6765950">&#34;openbsd&#34;</span><span class="op" id="6765959">,</span>&nbsp;<span class="string" id="6765961">&#34;plan9&#34;</span><span class="op" id="6765968">,</span>&nbsp;<span class="string" id="6765970">&#34;windows&#34;</span><span class="op" id="6765979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765983">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6765996">case</span>&nbsp;<span class="string" id="6766001">&#34;freebsd&#34;</span><span class="op" id="6766010">:</span>&nbsp;<span class="comment" id="6766012">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766054">t</span><span class="op" id="6766055">.</span><span class="ident" id="6766056">Skipf</span><span class="op" id="6766061">(</span><span class="string" id="6766062">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6766083">,</span>&nbsp;<span class="ident" id="6766085">runtime</span><span class="op" id="6766092">.</span><span class="ident" id="6766093">GOOS</span><span class="op" id="6766097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766100">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766104">for</span>&nbsp;<span class="ident" id="6766108">_</span><span class="op" id="6766109">,</span>&nbsp;<span class="ident" id="6766111">tt</span>&nbsp;<span class="op" id="6766114">:=</span>&nbsp;<span class="keyword" id="6766117">range</span>&nbsp;<span class="ident" id="6766123">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6766148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766152">if</span>&nbsp;<span class="ident" id="6766155">runtime</span><span class="op" id="6766162">.</span><span class="ident" id="6766163">GOOS</span>&nbsp;<span class="op" id="6766168">!=</span>&nbsp;<span class="string" id="6766171">&#34;linux&#34;</span>&nbsp;<span class="op" id="6766179">&amp;&amp;</span>&nbsp;<span class="ident" id="6766182">tt</span><span class="op" id="6766184">.</span><span class="ident" id="6766185">linuxOnly</span>&nbsp;<span class="op" id="6766195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766200">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766211">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766215">listening</span>&nbsp;<span class="op" id="6766225">:=</span>&nbsp;<span class="builtinfunc" id="6766228">make</span><span class="op" id="6766232">(</span><span class="keyword" id="6766233">chan</span>&nbsp;<span class="builtintype" id="6766238">string</span><span class="op" id="6766244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766248">done</span>&nbsp;<span class="op" id="6766253">:=</span>&nbsp;<span class="builtinfunc" id="6766256">make</span><span class="op" id="6766260">(</span><span class="keyword" id="6766261">chan</span>&nbsp;<span class="builtintype" id="6766266">int</span><span class="op" id="6766269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766273">switch</span>&nbsp;<span class="ident" id="6766280">tt</span><span class="op" id="6766282">.</span><span class="ident" id="6766283">net</span>&nbsp;<span class="op" id="6766287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766291">case</span>&nbsp;<span class="string" id="6766296">&#34;unixpacket&#34;</span><span class="op" id="6766308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766313">os</span><span class="op" id="6766315">.</span><span class="ident" id="6766316">Remove</span><span class="op" id="6766322">(</span><span class="ident" id="6766323">tt</span><span class="op" id="6766325">.</span><span class="ident" id="6766326">saddr</span><span class="op" id="6766331">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766336">os</span><span class="op" id="6766338">.</span><span class="ident" id="6766339">Remove</span><span class="op" id="6766345">(</span><span class="ident" id="6766346">tt</span><span class="op" id="6766348">.</span><span class="ident" id="6766349">caddr</span><span class="op" id="6766354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766363">go</span>&nbsp;<span class="ident" id="6766366">runStreamConnServer</span><span class="op" id="6766385">(</span><span class="ident" id="6766386">t</span><span class="op" id="6766387">,</span>&nbsp;<span class="ident" id="6766389">tt</span><span class="op" id="6766391">.</span><span class="ident" id="6766392">net</span><span class="op" id="6766395">,</span>&nbsp;<span class="ident" id="6766397">tt</span><span class="op" id="6766399">.</span><span class="ident" id="6766400">saddr</span><span class="op" id="6766405">,</span>&nbsp;<span class="ident" id="6766407">listening</span><span class="op" id="6766416">,</span>&nbsp;<span class="ident" id="6766418">done</span><span class="op" id="6766422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766426">taddr</span>&nbsp;<span class="op" id="6766432">:=</span>&nbsp;<span class="op" id="6766435">&lt;-</span><span class="ident" id="6766437">listening</span>&nbsp;<span class="comment" id="6766447">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766478">runStreamConnClient</span><span class="op" id="6766497">(</span><span class="ident" id="6766498">t</span><span class="op" id="6766499">,</span>&nbsp;<span class="ident" id="6766501">tt</span><span class="op" id="6766503">.</span><span class="ident" id="6766504">net</span><span class="op" id="6766507">,</span>&nbsp;<span class="ident" id="6766509">taddr</span><span class="op" id="6766514">,</span>&nbsp;<span class="ident" id="6766516">tt</span><span class="op" id="6766518">.</span><span class="ident" id="6766519">empty</span><span class="op" id="6766524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766528">&lt;-</span><span class="ident" id="6766530">done</span>&nbsp;<span class="comment" id="6766535">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766566">switch</span>&nbsp;<span class="ident" id="6766573">tt</span><span class="op" id="6766575">.</span><span class="ident" id="6766576">net</span>&nbsp;<span class="op" id="6766580">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766584">case</span>&nbsp;<span class="string" id="6766589">&#34;unixpacket&#34;</span><span class="op" id="6766601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766606">os</span><span class="op" id="6766608">.</span><span class="ident" id="6766609">Remove</span><span class="op" id="6766615">(</span><span class="ident" id="6766616">tt</span><span class="op" id="6766618">.</span><span class="ident" id="6766619">saddr</span><span class="op" id="6766624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766629">os</span><span class="op" id="6766631">.</span><span class="ident" id="6766632">Remove</span><span class="op" id="6766638">(</span><span class="ident" id="6766639">tt</span><span class="op" id="6766641">.</span><span class="ident" id="6766642">caddr</span><span class="op" id="6766647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766654">}</span><br>
<span class="lineno">175</span><span class="op" id="6766656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6766659">func</span>&nbsp;<span class="ident" id="6766664">runStreamConnServer</span><span class="op" id="6766683">(</span><span class="ident" id="6766684">t</span>&nbsp;<span class="op" id="6766686">*</span><span class="ident" id="6766687">testing</span><span class="op" id="6766694">.</span><span class="ident" id="6766695">T</span><span class="op" id="6766696">,</span>&nbsp;<span class="ident" id="6766698">net</span><span class="op" id="6766701">,</span>&nbsp;<span class="ident" id="6766703">laddr</span>&nbsp;<span class="builtintype" id="6766709">string</span><span class="op" id="6766715">,</span>&nbsp;<span class="ident" id="6766717">listening</span>&nbsp;<span class="keyword" id="6766727">chan</span><span class="op" id="6766731">&lt;-</span>&nbsp;<span class="builtintype" id="6766734">string</span><span class="op" id="6766740">,</span>&nbsp;<span class="ident" id="6766742">done</span>&nbsp;<span class="keyword" id="6766747">chan</span><span class="op" id="6766751">&lt;-</span>&nbsp;<span class="builtintype" id="6766754">int</span><span class="op" id="6766757">)</span>&nbsp;<span class="op" id="6766759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766762">defer</span>&nbsp;<span class="builtinfunc" id="6766768">close</span><span class="op" id="6766773">(</span><span class="ident" id="6766774">done</span><span class="op" id="6766778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766781">l</span><span class="op" id="6766782">,</span>&nbsp;<span class="ident" id="6766784">err</span>&nbsp;<span class="op" id="6766788">:=</span>&nbsp;<span class="ident" id="6766791">Listen</span><span class="op" id="6766797">(</span><span class="ident" id="6766798">net</span><span class="op" id="6766801">,</span>&nbsp;<span class="ident" id="6766803">laddr</span><span class="op" id="6766808">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766811">if</span>&nbsp;<span class="ident" id="6766814">err</span>&nbsp;<span class="op" id="6766818">!=</span>&nbsp;<span class="builtintype" id="6766821">nil</span>&nbsp;<span class="op" id="6766825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766829">t</span><span class="op" id="6766830">.</span><span class="ident" id="6766831">Errorf</span><span class="op" id="6766837">(</span><span class="string" id="6766838">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6766865">,</span>&nbsp;<span class="ident" id="6766867">net</span><span class="op" id="6766870">,</span>&nbsp;<span class="ident" id="6766872">laddr</span><span class="op" id="6766877">,</span>&nbsp;<span class="ident" id="6766879">err</span><span class="op" id="6766882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766886">listening</span>&nbsp;<span class="op" id="6766896">&lt;-</span>&nbsp;<span class="string" id="6766899">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766909">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6766917">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6766920">defer</span>&nbsp;<span class="ident" id="6766926">l</span><span class="op" id="6766927">.</span><span class="ident" id="6766928">Close</span><span class="op" id="6766933">(</span><span class="op" id="6766934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766937">listening</span>&nbsp;<span class="op" id="6766947">&lt;-</span>&nbsp;<span class="ident" id="6766950">l</span><span class="op" id="6766951">.</span><span class="ident" id="6766952">Addr</span><span class="op" id="6766956">(</span><span class="op" id="6766957">)</span><span class="op" id="6766958">.</span><span class="ident" id="6766959">String</span><span class="op" id="6766965">(</span><span class="op" id="6766966">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6766970">echo</span>&nbsp;<span class="op" id="6766975">:=</span>&nbsp;<span class="keyword" id="6766978">func</span><span class="op" id="6766982">(</span><span class="ident" id="6766983">rw</span>&nbsp;<span class="ident" id="6766986">io</span><span class="op" id="6766988">.</span><span class="ident" id="6766989">ReadWriter</span><span class="op" id="6766999">,</span>&nbsp;<span class="ident" id="6767001">done</span>&nbsp;<span class="keyword" id="6767006">chan</span><span class="op" id="6767010">&lt;-</span>&nbsp;<span class="builtintype" id="6767013">int</span><span class="op" id="6767016">)</span>&nbsp;<span class="op" id="6767018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767022">buf</span>&nbsp;<span class="op" id="6767026">:=</span>&nbsp;<span class="builtinfunc" id="6767029">make</span><span class="op" id="6767033">(</span><span class="op" id="6767034">[</span><span class="op" id="6767035">]</span><span class="builtintype" id="6767036">byte</span><span class="op" id="6767040">,</span>&nbsp;<span class="num" id="6767042">1024</span><span class="op" id="6767046">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767050">for</span>&nbsp;<span class="op" id="6767054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767059">n</span><span class="op" id="6767060">,</span>&nbsp;<span class="ident" id="6767062">err</span>&nbsp;<span class="op" id="6767066">:=</span>&nbsp;<span class="ident" id="6767069">rw</span><span class="op" id="6767071">.</span><span class="ident" id="6767072">Read</span><span class="op" id="6767076">(</span><span class="ident" id="6767077">buf</span><span class="op" id="6767080">[</span><span class="num" id="6767081">0</span><span class="op" id="6767082">:</span><span class="op" id="6767083">]</span><span class="op" id="6767084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767089">if</span>&nbsp;<span class="ident" id="6767092">err</span>&nbsp;<span class="op" id="6767096">!=</span>&nbsp;<span class="builtintype" id="6767099">nil</span>&nbsp;<span class="op" id="6767103">||</span>&nbsp;<span class="ident" id="6767106">n</span>&nbsp;<span class="op" id="6767108">==</span>&nbsp;<span class="num" id="6767111">0</span>&nbsp;<span class="op" id="6767113">||</span>&nbsp;<span class="builtintype" id="6767116">string</span><span class="op" id="6767122">(</span><span class="ident" id="6767123">buf</span><span class="op" id="6767126">[</span><span class="op" id="6767127">:</span><span class="ident" id="6767128">n</span><span class="op" id="6767129">]</span><span class="op" id="6767130">)</span>&nbsp;<span class="op" id="6767132">==</span>&nbsp;<span class="string" id="6767135">&#34;END&#34;</span>&nbsp;<span class="op" id="6767141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767147">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767156">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767161">rw</span><span class="op" id="6767163">.</span><span class="ident" id="6767164">Write</span><span class="op" id="6767169">(</span><span class="ident" id="6767170">buf</span><span class="op" id="6767173">[</span><span class="num" id="6767174">0</span><span class="op" id="6767175">:</span><span class="ident" id="6767176">n</span><span class="op" id="6767177">]</span><span class="op" id="6767178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6767186">close</span><span class="op" id="6767191">(</span><span class="ident" id="6767192">done</span><span class="op" id="6767196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6767202">run</span><span class="op" id="6767205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767208">for</span>&nbsp;<span class="op" id="6767212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767216">c</span><span class="op" id="6767217">,</span>&nbsp;<span class="ident" id="6767219">err</span>&nbsp;<span class="op" id="6767223">:=</span>&nbsp;<span class="ident" id="6767226">l</span><span class="op" id="6767227">.</span><span class="ident" id="6767228">Accept</span><span class="op" id="6767234">(</span><span class="op" id="6767235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767239">if</span>&nbsp;<span class="ident" id="6767242">err</span>&nbsp;<span class="op" id="6767246">!=</span>&nbsp;<span class="builtintype" id="6767249">nil</span>&nbsp;<span class="op" id="6767253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767258">t</span><span class="op" id="6767259">.</span><span class="ident" id="6767260">Logf</span><span class="op" id="6767264">(</span><span class="string" id="6767265">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6767284">,</span>&nbsp;<span class="ident" id="6767286">err</span><span class="op" id="6767289">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767294">continue</span>&nbsp;<span class="ident" id="6767303">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767313">echodone</span>&nbsp;<span class="op" id="6767322">:=</span>&nbsp;<span class="builtinfunc" id="6767325">make</span><span class="op" id="6767329">(</span><span class="keyword" id="6767330">chan</span>&nbsp;<span class="builtintype" id="6767335">int</span><span class="op" id="6767338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767342">go</span>&nbsp;<span class="ident" id="6767345">echo</span><span class="op" id="6767349">(</span><span class="ident" id="6767350">c</span><span class="op" id="6767351">,</span>&nbsp;<span class="ident" id="6767353">echodone</span><span class="op" id="6767361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767365">&lt;-</span><span class="ident" id="6767367">echodone</span>&nbsp;<span class="comment" id="6767376">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767404">c</span><span class="op" id="6767405">.</span><span class="ident" id="6767406">Close</span><span class="op" id="6767411">(</span><span class="op" id="6767412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767416">break</span>&nbsp;<span class="ident" id="6767422">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767427">}</span><br>
<span class="lineno"></span><span class="op" id="6767429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6767432">func</span>&nbsp;<span class="ident" id="6767437">runStreamConnClient</span><span class="op" id="6767456">(</span><span class="ident" id="6767457">t</span>&nbsp;<span class="op" id="6767459">*</span><span class="ident" id="6767460">testing</span><span class="op" id="6767467">.</span><span class="ident" id="6767468">T</span><span class="op" id="6767469">,</span>&nbsp;<span class="ident" id="6767471">net</span><span class="op" id="6767474">,</span>&nbsp;<span class="ident" id="6767476">taddr</span>&nbsp;<span class="builtintype" id="6767482">string</span><span class="op" id="6767488">,</span>&nbsp;<span class="ident" id="6767490">isEmpty</span>&nbsp;<span class="builtintype" id="6767498">bool</span><span class="op" id="6767502">)</span>&nbsp;<span class="op" id="6767504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767507">c</span><span class="op" id="6767508">,</span>&nbsp;<span class="ident" id="6767510">err</span>&nbsp;<span class="op" id="6767514">:=</span>&nbsp;<span class="ident" id="6767517">Dial</span><span class="op" id="6767521">(</span><span class="ident" id="6767522">net</span><span class="op" id="6767525">,</span>&nbsp;<span class="ident" id="6767527">taddr</span><span class="op" id="6767532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767535">if</span>&nbsp;<span class="ident" id="6767538">err</span>&nbsp;<span class="op" id="6767542">!=</span>&nbsp;<span class="builtintype" id="6767545">nil</span>&nbsp;<span class="op" id="6767549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767553">t</span><span class="op" id="6767554">.</span><span class="ident" id="6767555">Fatalf</span><span class="op" id="6767561">(</span><span class="string" id="6767562">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6767587">,</span>&nbsp;<span class="ident" id="6767589">net</span><span class="op" id="6767592">,</span>&nbsp;<span class="ident" id="6767594">taddr</span><span class="op" id="6767599">,</span>&nbsp;<span class="ident" id="6767601">err</span><span class="op" id="6767604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767607">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767610">defer</span>&nbsp;<span class="ident" id="6767616">c</span><span class="op" id="6767617">.</span><span class="ident" id="6767618">Close</span><span class="op" id="6767623">(</span><span class="op" id="6767624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767627">c</span><span class="op" id="6767628">.</span><span class="ident" id="6767629">SetReadDeadline</span><span class="op" id="6767644">(</span><span class="ident" id="6767645">time</span><span class="op" id="6767649">.</span><span class="ident" id="6767650">Now</span><span class="op" id="6767653">(</span><span class="op" id="6767654">)</span><span class="op" id="6767655">.</span><span class="ident" id="6767656">Add</span><span class="op" id="6767659">(</span><span class="num" id="6767660">1</span>&nbsp;<span class="op" id="6767662">*</span>&nbsp;<span class="ident" id="6767664">time</span><span class="op" id="6767668">.</span><span class="ident" id="6767669">Second</span><span class="op" id="6767675">)</span><span class="op" id="6767676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767680">var</span>&nbsp;<span class="ident" id="6767684">wb</span>&nbsp;<span class="op" id="6767687">[</span><span class="op" id="6767688">]</span><span class="builtintype" id="6767689">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767695">if</span>&nbsp;<span class="op" id="6767698">!</span><span class="ident" id="6767699">isEmpty</span>&nbsp;<span class="op" id="6767707">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767711">wb</span>&nbsp;<span class="op" id="6767714">=</span>&nbsp;<span class="op" id="6767716">[</span><span class="op" id="6767717">]</span><span class="builtintype" id="6767718">byte</span><span class="op" id="6767722">(</span><span class="string" id="6767723">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6767751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767757">if</span>&nbsp;<span class="ident" id="6767760">n</span><span class="op" id="6767761">,</span>&nbsp;<span class="ident" id="6767763">err</span>&nbsp;<span class="op" id="6767767">:=</span>&nbsp;<span class="ident" id="6767770">c</span><span class="op" id="6767771">.</span><span class="ident" id="6767772">Write</span><span class="op" id="6767777">(</span><span class="ident" id="6767778">wb</span><span class="op" id="6767780">)</span><span class="op" id="6767781">;</span>&nbsp;<span class="ident" id="6767783">err</span>&nbsp;<span class="op" id="6767787">!=</span>&nbsp;<span class="builtintype" id="6767790">nil</span>&nbsp;<span class="op" id="6767794">||</span>&nbsp;<span class="ident" id="6767797">n</span>&nbsp;<span class="op" id="6767799">!=</span>&nbsp;<span class="builtinfunc" id="6767802">len</span><span class="op" id="6767805">(</span><span class="ident" id="6767806">wb</span><span class="op" id="6767808">)</span>&nbsp;<span class="op" id="6767810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767814">t</span><span class="op" id="6767815">.</span><span class="ident" id="6767816">Fatalf</span><span class="op" id="6767822">(</span><span class="string" id="6767823">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6767861">,</span>&nbsp;<span class="ident" id="6767863">n</span><span class="op" id="6767864">,</span>&nbsp;<span class="ident" id="6767866">err</span><span class="op" id="6767869">,</span>&nbsp;<span class="builtinfunc" id="6767871">len</span><span class="op" id="6767874">(</span><span class="ident" id="6767875">wb</span><span class="op" id="6767877">)</span><span class="op" id="6767878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6767881">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767885">rb</span>&nbsp;<span class="op" id="6767888">:=</span>&nbsp;<span class="builtinfunc" id="6767891">make</span><span class="op" id="6767895">(</span><span class="op" id="6767896">[</span><span class="op" id="6767897">]</span><span class="builtintype" id="6767898">byte</span><span class="op" id="6767902">,</span>&nbsp;<span class="num" id="6767904">1024</span><span class="op" id="6767908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6767911">if</span>&nbsp;<span class="ident" id="6767914">n</span><span class="op" id="6767915">,</span>&nbsp;<span class="ident" id="6767917">err</span>&nbsp;<span class="op" id="6767921">:=</span>&nbsp;<span class="ident" id="6767924">c</span><span class="op" id="6767925">.</span><span class="ident" id="6767926">Read</span><span class="op" id="6767930">(</span><span class="ident" id="6767931">rb</span><span class="op" id="6767933">[</span><span class="num" id="6767934">0</span><span class="op" id="6767935">:</span><span class="op" id="6767936">]</span><span class="op" id="6767937">)</span><span class="op" id="6767938">;</span>&nbsp;<span class="ident" id="6767940">err</span>&nbsp;<span class="op" id="6767944">!=</span>&nbsp;<span class="builtintype" id="6767947">nil</span>&nbsp;<span class="op" id="6767951">||</span>&nbsp;<span class="ident" id="6767954">n</span>&nbsp;<span class="op" id="6767956">!=</span>&nbsp;<span class="builtinfunc" id="6767959">len</span><span class="op" id="6767962">(</span><span class="ident" id="6767963">wb</span><span class="op" id="6767965">)</span>&nbsp;<span class="op" id="6767967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6767971">t</span><span class="op" id="6767972">.</span><span class="ident" id="6767973">Fatalf</span><span class="op" id="6767979">(</span><span class="string" id="6767980">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6768017">,</span>&nbsp;<span class="ident" id="6768019">n</span><span class="op" id="6768020">,</span>&nbsp;<span class="ident" id="6768022">err</span><span class="op" id="6768025">,</span>&nbsp;<span class="builtinfunc" id="6768027">len</span><span class="op" id="6768030">(</span><span class="ident" id="6768031">wb</span><span class="op" id="6768033">)</span><span class="op" id="6768034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6768037">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6768041">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6768082">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6768134">switch</span>&nbsp;<span class="ident" id="6768141">net</span>&nbsp;<span class="op" id="6768145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6768148">case</span>&nbsp;<span class="string" id="6768153">&#34;unixpacket&#34;</span><span class="op" id="6768165">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768169">c</span><span class="op" id="6768170">.</span><span class="ident" id="6768171">Write</span><span class="op" id="6768176">(</span><span class="op" id="6768177">[</span><span class="op" id="6768178">]</span><span class="builtintype" id="6768179">byte</span><span class="op" id="6768183">(</span><span class="string" id="6768184">&#34;END&#34;</span><span class="op" id="6768189">)</span><span class="op" id="6768190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6768193">}</span><br>
<span class="lineno"></span><span class="op" id="6768195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6768198">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6768241">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6768292">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6768344">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6768374">var</span>&nbsp;<span class="ident" id="6768378">testDatagram</span>&nbsp;<span class="op" id="6768391">=</span>&nbsp;<span class="ident" id="6768393">flag</span><span class="op" id="6768397">.</span><span class="ident" id="6768398">Bool</span><span class="op" id="6768402">(</span><span class="string" id="6768403">&#34;datagram&#34;</span><span class="op" id="6768413">,</span>&nbsp;<span class="builtintype" id="6768415">false</span><span class="op" id="6768420">,</span>&nbsp;<span class="string" id="6768422">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6768456">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6768459">var</span>&nbsp;<span class="ident" id="6768463">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6768493">=</span>&nbsp;<span class="op" id="6768495">[</span><span class="op" id="6768496">]</span><span class="keyword" id="6768497">struct</span>&nbsp;<span class="op" id="6768504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768507">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768517">string</span>&nbsp;<span class="comment" id="6768524">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768540">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768550">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768558">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768568">string</span>&nbsp;<span class="comment" id="6768575">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768591">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768601">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768609">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768619">bool</span>&nbsp;<span class="comment" id="6768624">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768665">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768675">bool</span>&nbsp;<span class="comment" id="6768680">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768726">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768736">bool</span>&nbsp;<span class="comment" id="6768741">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768772">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6768782">bool</span>&nbsp;<span class="comment" id="6768787">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6768812">linuxOnly</span>&nbsp;<span class="builtintype" id="6768822">bool</span>&nbsp;<span class="comment" id="6768827">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6768881">}</span><span class="op" id="6768882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6768885">{</span><span class="ident" id="6768886">snet</span><span class="op" id="6768890">:</span>&nbsp;<span class="string" id="6768892">&#34;udp&#34;</span><span class="op" id="6768897">,</span>&nbsp;<span class="ident" id="6768899">saddr</span><span class="op" id="6768904">:</span>&nbsp;<span class="string" id="6768906">&#34;&#34;</span><span class="op" id="6768908">,</span>&nbsp;<span class="ident" id="6768910">cnet</span><span class="op" id="6768914">:</span>&nbsp;<span class="string" id="6768916">&#34;udp&#34;</span><span class="op" id="6768921">,</span>&nbsp;<span class="ident" id="6768923">caddr</span><span class="op" id="6768928">:</span>&nbsp;<span class="string" id="6768930">&#34;127.0.0.1&#34;</span><span class="op" id="6768941">}</span><span class="op" id="6768942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6768945">{</span><span class="ident" id="6768946">snet</span><span class="op" id="6768950">:</span>&nbsp;<span class="string" id="6768952">&#34;udp&#34;</span><span class="op" id="6768957">,</span>&nbsp;<span class="ident" id="6768959">saddr</span><span class="op" id="6768964">:</span>&nbsp;<span class="string" id="6768966">&#34;0.0.0.0&#34;</span><span class="op" id="6768975">,</span>&nbsp;<span class="ident" id="6768977">cnet</span><span class="op" id="6768981">:</span>&nbsp;<span class="string" id="6768983">&#34;udp&#34;</span><span class="op" id="6768988">,</span>&nbsp;<span class="ident" id="6768990">caddr</span><span class="op" id="6768995">:</span>&nbsp;<span class="string" id="6768997">&#34;127.0.0.1&#34;</span><span class="op" id="6769008">}</span><span class="op" id="6769009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769012">{</span><span class="ident" id="6769013">snet</span><span class="op" id="6769017">:</span>&nbsp;<span class="string" id="6769019">&#34;udp&#34;</span><span class="op" id="6769024">,</span>&nbsp;<span class="ident" id="6769026">saddr</span><span class="op" id="6769031">:</span>&nbsp;<span class="string" id="6769033">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6769051">,</span>&nbsp;<span class="ident" id="6769053">cnet</span><span class="op" id="6769057">:</span>&nbsp;<span class="string" id="6769059">&#34;udp&#34;</span><span class="op" id="6769064">,</span>&nbsp;<span class="ident" id="6769066">caddr</span><span class="op" id="6769071">:</span>&nbsp;<span class="string" id="6769073">&#34;127.0.0.1&#34;</span><span class="op" id="6769084">}</span><span class="op" id="6769085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769088">{</span><span class="ident" id="6769089">snet</span><span class="op" id="6769093">:</span>&nbsp;<span class="string" id="6769095">&#34;udp&#34;</span><span class="op" id="6769100">,</span>&nbsp;<span class="ident" id="6769102">saddr</span><span class="op" id="6769107">:</span>&nbsp;<span class="string" id="6769109">&#34;[::]&#34;</span><span class="op" id="6769115">,</span>&nbsp;<span class="ident" id="6769117">cnet</span><span class="op" id="6769121">:</span>&nbsp;<span class="string" id="6769123">&#34;udp&#34;</span><span class="op" id="6769128">,</span>&nbsp;<span class="ident" id="6769130">caddr</span><span class="op" id="6769135">:</span>&nbsp;<span class="string" id="6769137">&#34;[::1]&#34;</span><span class="op" id="6769144">,</span>&nbsp;<span class="ident" id="6769146">ipv6</span><span class="op" id="6769150">:</span>&nbsp;<span class="builtintype" id="6769152">true</span><span class="op" id="6769156">}</span><span class="op" id="6769157">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769161">{</span><span class="ident" id="6769162">snet</span><span class="op" id="6769166">:</span>&nbsp;<span class="string" id="6769168">&#34;udp&#34;</span><span class="op" id="6769173">,</span>&nbsp;<span class="ident" id="6769175">saddr</span><span class="op" id="6769180">:</span>&nbsp;<span class="string" id="6769182">&#34;&#34;</span><span class="op" id="6769184">,</span>&nbsp;<span class="ident" id="6769186">cnet</span><span class="op" id="6769190">:</span>&nbsp;<span class="string" id="6769192">&#34;udp&#34;</span><span class="op" id="6769197">,</span>&nbsp;<span class="ident" id="6769199">caddr</span><span class="op" id="6769204">:</span>&nbsp;<span class="string" id="6769206">&#34;[::1]&#34;</span><span class="op" id="6769213">,</span>&nbsp;<span class="ident" id="6769215">ipv4map</span><span class="op" id="6769222">:</span>&nbsp;<span class="builtintype" id="6769224">true</span><span class="op" id="6769228">}</span><span class="op" id="6769229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769232">{</span><span class="ident" id="6769233">snet</span><span class="op" id="6769237">:</span>&nbsp;<span class="string" id="6769239">&#34;udp&#34;</span><span class="op" id="6769244">,</span>&nbsp;<span class="ident" id="6769246">saddr</span><span class="op" id="6769251">:</span>&nbsp;<span class="string" id="6769253">&#34;0.0.0.0&#34;</span><span class="op" id="6769262">,</span>&nbsp;<span class="ident" id="6769264">cnet</span><span class="op" id="6769268">:</span>&nbsp;<span class="string" id="6769270">&#34;udp&#34;</span><span class="op" id="6769275">,</span>&nbsp;<span class="ident" id="6769277">caddr</span><span class="op" id="6769282">:</span>&nbsp;<span class="string" id="6769284">&#34;[::1]&#34;</span><span class="op" id="6769291">,</span>&nbsp;<span class="ident" id="6769293">ipv4map</span><span class="op" id="6769300">:</span>&nbsp;<span class="builtintype" id="6769302">true</span><span class="op" id="6769306">}</span><span class="op" id="6769307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769310">{</span><span class="ident" id="6769311">snet</span><span class="op" id="6769315">:</span>&nbsp;<span class="string" id="6769317">&#34;udp&#34;</span><span class="op" id="6769322">,</span>&nbsp;<span class="ident" id="6769324">saddr</span><span class="op" id="6769329">:</span>&nbsp;<span class="string" id="6769331">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6769349">,</span>&nbsp;<span class="ident" id="6769351">cnet</span><span class="op" id="6769355">:</span>&nbsp;<span class="string" id="6769357">&#34;udp&#34;</span><span class="op" id="6769362">,</span>&nbsp;<span class="ident" id="6769364">caddr</span><span class="op" id="6769369">:</span>&nbsp;<span class="string" id="6769371">&#34;[::1]&#34;</span><span class="op" id="6769378">,</span>&nbsp;<span class="ident" id="6769380">ipv4map</span><span class="op" id="6769387">:</span>&nbsp;<span class="builtintype" id="6769389">true</span><span class="op" id="6769393">}</span><span class="op" id="6769394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769397">{</span><span class="ident" id="6769398">snet</span><span class="op" id="6769402">:</span>&nbsp;<span class="string" id="6769404">&#34;udp&#34;</span><span class="op" id="6769409">,</span>&nbsp;<span class="ident" id="6769411">saddr</span><span class="op" id="6769416">:</span>&nbsp;<span class="string" id="6769418">&#34;[::]&#34;</span><span class="op" id="6769424">,</span>&nbsp;<span class="ident" id="6769426">cnet</span><span class="op" id="6769430">:</span>&nbsp;<span class="string" id="6769432">&#34;udp&#34;</span><span class="op" id="6769437">,</span>&nbsp;<span class="ident" id="6769439">caddr</span><span class="op" id="6769444">:</span>&nbsp;<span class="string" id="6769446">&#34;127.0.0.1&#34;</span><span class="op" id="6769457">,</span>&nbsp;<span class="ident" id="6769459">ipv4map</span><span class="op" id="6769466">:</span>&nbsp;<span class="builtintype" id="6769468">true</span><span class="op" id="6769472">}</span><span class="op" id="6769473">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769477">{</span><span class="ident" id="6769478">snet</span><span class="op" id="6769482">:</span>&nbsp;<span class="string" id="6769484">&#34;udp&#34;</span><span class="op" id="6769489">,</span>&nbsp;<span class="ident" id="6769491">saddr</span><span class="op" id="6769496">:</span>&nbsp;<span class="string" id="6769498">&#34;&#34;</span><span class="op" id="6769500">,</span>&nbsp;<span class="ident" id="6769502">cnet</span><span class="op" id="6769506">:</span>&nbsp;<span class="string" id="6769508">&#34;udp4&#34;</span><span class="op" id="6769514">,</span>&nbsp;<span class="ident" id="6769516">caddr</span><span class="op" id="6769521">:</span>&nbsp;<span class="string" id="6769523">&#34;127.0.0.1&#34;</span><span class="op" id="6769534">}</span><span class="op" id="6769535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769538">{</span><span class="ident" id="6769539">snet</span><span class="op" id="6769543">:</span>&nbsp;<span class="string" id="6769545">&#34;udp&#34;</span><span class="op" id="6769550">,</span>&nbsp;<span class="ident" id="6769552">saddr</span><span class="op" id="6769557">:</span>&nbsp;<span class="string" id="6769559">&#34;0.0.0.0&#34;</span><span class="op" id="6769568">,</span>&nbsp;<span class="ident" id="6769570">cnet</span><span class="op" id="6769574">:</span>&nbsp;<span class="string" id="6769576">&#34;udp4&#34;</span><span class="op" id="6769582">,</span>&nbsp;<span class="ident" id="6769584">caddr</span><span class="op" id="6769589">:</span>&nbsp;<span class="string" id="6769591">&#34;127.0.0.1&#34;</span><span class="op" id="6769602">}</span><span class="op" id="6769603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769606">{</span><span class="ident" id="6769607">snet</span><span class="op" id="6769611">:</span>&nbsp;<span class="string" id="6769613">&#34;udp&#34;</span><span class="op" id="6769618">,</span>&nbsp;<span class="ident" id="6769620">saddr</span><span class="op" id="6769625">:</span>&nbsp;<span class="string" id="6769627">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6769645">,</span>&nbsp;<span class="ident" id="6769647">cnet</span><span class="op" id="6769651">:</span>&nbsp;<span class="string" id="6769653">&#34;udp4&#34;</span><span class="op" id="6769659">,</span>&nbsp;<span class="ident" id="6769661">caddr</span><span class="op" id="6769666">:</span>&nbsp;<span class="string" id="6769668">&#34;127.0.0.1&#34;</span><span class="op" id="6769679">}</span><span class="op" id="6769680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769683">{</span><span class="ident" id="6769684">snet</span><span class="op" id="6769688">:</span>&nbsp;<span class="string" id="6769690">&#34;udp&#34;</span><span class="op" id="6769695">,</span>&nbsp;<span class="ident" id="6769697">saddr</span><span class="op" id="6769702">:</span>&nbsp;<span class="string" id="6769704">&#34;[::]&#34;</span><span class="op" id="6769710">,</span>&nbsp;<span class="ident" id="6769712">cnet</span><span class="op" id="6769716">:</span>&nbsp;<span class="string" id="6769718">&#34;udp6&#34;</span><span class="op" id="6769724">,</span>&nbsp;<span class="ident" id="6769726">caddr</span><span class="op" id="6769731">:</span>&nbsp;<span class="string" id="6769733">&#34;[::1]&#34;</span><span class="op" id="6769740">,</span>&nbsp;<span class="ident" id="6769742">ipv6</span><span class="op" id="6769746">:</span>&nbsp;<span class="builtintype" id="6769748">true</span><span class="op" id="6769752">}</span><span class="op" id="6769753">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769757">{</span><span class="ident" id="6769758">snet</span><span class="op" id="6769762">:</span>&nbsp;<span class="string" id="6769764">&#34;udp&#34;</span><span class="op" id="6769769">,</span>&nbsp;<span class="ident" id="6769771">saddr</span><span class="op" id="6769776">:</span>&nbsp;<span class="string" id="6769778">&#34;&#34;</span><span class="op" id="6769780">,</span>&nbsp;<span class="ident" id="6769782">cnet</span><span class="op" id="6769786">:</span>&nbsp;<span class="string" id="6769788">&#34;udp6&#34;</span><span class="op" id="6769794">,</span>&nbsp;<span class="ident" id="6769796">caddr</span><span class="op" id="6769801">:</span>&nbsp;<span class="string" id="6769803">&#34;[::1]&#34;</span><span class="op" id="6769810">,</span>&nbsp;<span class="ident" id="6769812">ipv4map</span><span class="op" id="6769819">:</span>&nbsp;<span class="builtintype" id="6769821">true</span><span class="op" id="6769825">}</span><span class="op" id="6769826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769829">{</span><span class="ident" id="6769830">snet</span><span class="op" id="6769834">:</span>&nbsp;<span class="string" id="6769836">&#34;udp&#34;</span><span class="op" id="6769841">,</span>&nbsp;<span class="ident" id="6769843">saddr</span><span class="op" id="6769848">:</span>&nbsp;<span class="string" id="6769850">&#34;0.0.0.0&#34;</span><span class="op" id="6769859">,</span>&nbsp;<span class="ident" id="6769861">cnet</span><span class="op" id="6769865">:</span>&nbsp;<span class="string" id="6769867">&#34;udp6&#34;</span><span class="op" id="6769873">,</span>&nbsp;<span class="ident" id="6769875">caddr</span><span class="op" id="6769880">:</span>&nbsp;<span class="string" id="6769882">&#34;[::1]&#34;</span><span class="op" id="6769889">,</span>&nbsp;<span class="ident" id="6769891">ipv4map</span><span class="op" id="6769898">:</span>&nbsp;<span class="builtintype" id="6769900">true</span><span class="op" id="6769904">}</span><span class="op" id="6769905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769908">{</span><span class="ident" id="6769909">snet</span><span class="op" id="6769913">:</span>&nbsp;<span class="string" id="6769915">&#34;udp&#34;</span><span class="op" id="6769920">,</span>&nbsp;<span class="ident" id="6769922">saddr</span><span class="op" id="6769927">:</span>&nbsp;<span class="string" id="6769929">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6769947">,</span>&nbsp;<span class="ident" id="6769949">cnet</span><span class="op" id="6769953">:</span>&nbsp;<span class="string" id="6769955">&#34;udp6&#34;</span><span class="op" id="6769961">,</span>&nbsp;<span class="ident" id="6769963">caddr</span><span class="op" id="6769968">:</span>&nbsp;<span class="string" id="6769970">&#34;[::1]&#34;</span><span class="op" id="6769977">,</span>&nbsp;<span class="ident" id="6769979">ipv4map</span><span class="op" id="6769986">:</span>&nbsp;<span class="builtintype" id="6769988">true</span><span class="op" id="6769992">}</span><span class="op" id="6769993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6769996">{</span><span class="ident" id="6769997">snet</span><span class="op" id="6770001">:</span>&nbsp;<span class="string" id="6770003">&#34;udp&#34;</span><span class="op" id="6770008">,</span>&nbsp;<span class="ident" id="6770010">saddr</span><span class="op" id="6770015">:</span>&nbsp;<span class="string" id="6770017">&#34;[::]&#34;</span><span class="op" id="6770023">,</span>&nbsp;<span class="ident" id="6770025">cnet</span><span class="op" id="6770029">:</span>&nbsp;<span class="string" id="6770031">&#34;udp4&#34;</span><span class="op" id="6770037">,</span>&nbsp;<span class="ident" id="6770039">caddr</span><span class="op" id="6770044">:</span>&nbsp;<span class="string" id="6770046">&#34;127.0.0.1&#34;</span><span class="op" id="6770057">,</span>&nbsp;<span class="ident" id="6770059">ipv4map</span><span class="op" id="6770066">:</span>&nbsp;<span class="builtintype" id="6770068">true</span><span class="op" id="6770072">}</span><span class="op" id="6770073">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770077">{</span><span class="ident" id="6770078">snet</span><span class="op" id="6770082">:</span>&nbsp;<span class="string" id="6770084">&#34;udp&#34;</span><span class="op" id="6770089">,</span>&nbsp;<span class="ident" id="6770091">saddr</span><span class="op" id="6770096">:</span>&nbsp;<span class="string" id="6770098">&#34;127.0.0.1&#34;</span><span class="op" id="6770109">,</span>&nbsp;<span class="ident" id="6770111">cnet</span><span class="op" id="6770115">:</span>&nbsp;<span class="string" id="6770117">&#34;udp&#34;</span><span class="op" id="6770122">,</span>&nbsp;<span class="ident" id="6770124">caddr</span><span class="op" id="6770129">:</span>&nbsp;<span class="string" id="6770131">&#34;127.0.0.1&#34;</span><span class="op" id="6770142">}</span><span class="op" id="6770143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770146">{</span><span class="ident" id="6770147">snet</span><span class="op" id="6770151">:</span>&nbsp;<span class="string" id="6770153">&#34;udp&#34;</span><span class="op" id="6770158">,</span>&nbsp;<span class="ident" id="6770160">saddr</span><span class="op" id="6770165">:</span>&nbsp;<span class="string" id="6770167">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6770187">,</span>&nbsp;<span class="ident" id="6770189">cnet</span><span class="op" id="6770193">:</span>&nbsp;<span class="string" id="6770195">&#34;udp&#34;</span><span class="op" id="6770200">,</span>&nbsp;<span class="ident" id="6770202">caddr</span><span class="op" id="6770207">:</span>&nbsp;<span class="string" id="6770209">&#34;127.0.0.1&#34;</span><span class="op" id="6770220">}</span><span class="op" id="6770221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770224">{</span><span class="ident" id="6770225">snet</span><span class="op" id="6770229">:</span>&nbsp;<span class="string" id="6770231">&#34;udp&#34;</span><span class="op" id="6770236">,</span>&nbsp;<span class="ident" id="6770238">saddr</span><span class="op" id="6770243">:</span>&nbsp;<span class="string" id="6770245">&#34;[::1]&#34;</span><span class="op" id="6770252">,</span>&nbsp;<span class="ident" id="6770254">cnet</span><span class="op" id="6770258">:</span>&nbsp;<span class="string" id="6770260">&#34;udp&#34;</span><span class="op" id="6770265">,</span>&nbsp;<span class="ident" id="6770267">caddr</span><span class="op" id="6770272">:</span>&nbsp;<span class="string" id="6770274">&#34;[::1]&#34;</span><span class="op" id="6770281">,</span>&nbsp;<span class="ident" id="6770283">ipv6</span><span class="op" id="6770287">:</span>&nbsp;<span class="builtintype" id="6770289">true</span><span class="op" id="6770293">}</span><span class="op" id="6770294">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770298">{</span><span class="ident" id="6770299">snet</span><span class="op" id="6770303">:</span>&nbsp;<span class="string" id="6770305">&#34;udp4&#34;</span><span class="op" id="6770311">,</span>&nbsp;<span class="ident" id="6770313">saddr</span><span class="op" id="6770318">:</span>&nbsp;<span class="string" id="6770320">&#34;&#34;</span><span class="op" id="6770322">,</span>&nbsp;<span class="ident" id="6770324">cnet</span><span class="op" id="6770328">:</span>&nbsp;<span class="string" id="6770330">&#34;udp4&#34;</span><span class="op" id="6770336">,</span>&nbsp;<span class="ident" id="6770338">caddr</span><span class="op" id="6770343">:</span>&nbsp;<span class="string" id="6770345">&#34;127.0.0.1&#34;</span><span class="op" id="6770356">}</span><span class="op" id="6770357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770360">{</span><span class="ident" id="6770361">snet</span><span class="op" id="6770365">:</span>&nbsp;<span class="string" id="6770367">&#34;udp4&#34;</span><span class="op" id="6770373">,</span>&nbsp;<span class="ident" id="6770375">saddr</span><span class="op" id="6770380">:</span>&nbsp;<span class="string" id="6770382">&#34;0.0.0.0&#34;</span><span class="op" id="6770391">,</span>&nbsp;<span class="ident" id="6770393">cnet</span><span class="op" id="6770397">:</span>&nbsp;<span class="string" id="6770399">&#34;udp4&#34;</span><span class="op" id="6770405">,</span>&nbsp;<span class="ident" id="6770407">caddr</span><span class="op" id="6770412">:</span>&nbsp;<span class="string" id="6770414">&#34;127.0.0.1&#34;</span><span class="op" id="6770425">}</span><span class="op" id="6770426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770429">{</span><span class="ident" id="6770430">snet</span><span class="op" id="6770434">:</span>&nbsp;<span class="string" id="6770436">&#34;udp4&#34;</span><span class="op" id="6770442">,</span>&nbsp;<span class="ident" id="6770444">saddr</span><span class="op" id="6770449">:</span>&nbsp;<span class="string" id="6770451">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6770469">,</span>&nbsp;<span class="ident" id="6770471">cnet</span><span class="op" id="6770475">:</span>&nbsp;<span class="string" id="6770477">&#34;udp4&#34;</span><span class="op" id="6770483">,</span>&nbsp;<span class="ident" id="6770485">caddr</span><span class="op" id="6770490">:</span>&nbsp;<span class="string" id="6770492">&#34;127.0.0.1&#34;</span><span class="op" id="6770503">}</span><span class="op" id="6770504">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770508">{</span><span class="ident" id="6770509">snet</span><span class="op" id="6770513">:</span>&nbsp;<span class="string" id="6770515">&#34;udp4&#34;</span><span class="op" id="6770521">,</span>&nbsp;<span class="ident" id="6770523">saddr</span><span class="op" id="6770528">:</span>&nbsp;<span class="string" id="6770530">&#34;127.0.0.1&#34;</span><span class="op" id="6770541">,</span>&nbsp;<span class="ident" id="6770543">cnet</span><span class="op" id="6770547">:</span>&nbsp;<span class="string" id="6770549">&#34;udp4&#34;</span><span class="op" id="6770555">,</span>&nbsp;<span class="ident" id="6770557">caddr</span><span class="op" id="6770562">:</span>&nbsp;<span class="string" id="6770564">&#34;127.0.0.1&#34;</span><span class="op" id="6770575">}</span><span class="op" id="6770576">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770580">{</span><span class="ident" id="6770581">snet</span><span class="op" id="6770585">:</span>&nbsp;<span class="string" id="6770587">&#34;udp6&#34;</span><span class="op" id="6770593">,</span>&nbsp;<span class="ident" id="6770595">saddr</span><span class="op" id="6770600">:</span>&nbsp;<span class="string" id="6770602">&#34;&#34;</span><span class="op" id="6770604">,</span>&nbsp;<span class="ident" id="6770606">cnet</span><span class="op" id="6770610">:</span>&nbsp;<span class="string" id="6770612">&#34;udp6&#34;</span><span class="op" id="6770618">,</span>&nbsp;<span class="ident" id="6770620">caddr</span><span class="op" id="6770625">:</span>&nbsp;<span class="string" id="6770627">&#34;[::1]&#34;</span><span class="op" id="6770634">,</span>&nbsp;<span class="ident" id="6770636">ipv6</span><span class="op" id="6770640">:</span>&nbsp;<span class="builtintype" id="6770642">true</span><span class="op" id="6770646">}</span><span class="op" id="6770647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770650">{</span><span class="ident" id="6770651">snet</span><span class="op" id="6770655">:</span>&nbsp;<span class="string" id="6770657">&#34;udp6&#34;</span><span class="op" id="6770663">,</span>&nbsp;<span class="ident" id="6770665">saddr</span><span class="op" id="6770670">:</span>&nbsp;<span class="string" id="6770672">&#34;[::]&#34;</span><span class="op" id="6770678">,</span>&nbsp;<span class="ident" id="6770680">cnet</span><span class="op" id="6770684">:</span>&nbsp;<span class="string" id="6770686">&#34;udp6&#34;</span><span class="op" id="6770692">,</span>&nbsp;<span class="ident" id="6770694">caddr</span><span class="op" id="6770699">:</span>&nbsp;<span class="string" id="6770701">&#34;[::1]&#34;</span><span class="op" id="6770708">,</span>&nbsp;<span class="ident" id="6770710">ipv6</span><span class="op" id="6770714">:</span>&nbsp;<span class="builtintype" id="6770716">true</span><span class="op" id="6770720">}</span><span class="op" id="6770721">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770725">{</span><span class="ident" id="6770726">snet</span><span class="op" id="6770730">:</span>&nbsp;<span class="string" id="6770732">&#34;udp6&#34;</span><span class="op" id="6770738">,</span>&nbsp;<span class="ident" id="6770740">saddr</span><span class="op" id="6770745">:</span>&nbsp;<span class="string" id="6770747">&#34;[::1]&#34;</span><span class="op" id="6770754">,</span>&nbsp;<span class="ident" id="6770756">cnet</span><span class="op" id="6770760">:</span>&nbsp;<span class="string" id="6770762">&#34;udp6&#34;</span><span class="op" id="6770768">,</span>&nbsp;<span class="ident" id="6770770">caddr</span><span class="op" id="6770775">:</span>&nbsp;<span class="string" id="6770777">&#34;[::1]&#34;</span><span class="op" id="6770784">,</span>&nbsp;<span class="ident" id="6770786">ipv6</span><span class="op" id="6770790">:</span>&nbsp;<span class="builtintype" id="6770792">true</span><span class="op" id="6770796">}</span><span class="op" id="6770797">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770801">{</span><span class="ident" id="6770802">snet</span><span class="op" id="6770806">:</span>&nbsp;<span class="string" id="6770808">&#34;udp&#34;</span><span class="op" id="6770813">,</span>&nbsp;<span class="ident" id="6770815">saddr</span><span class="op" id="6770820">:</span>&nbsp;<span class="string" id="6770822">&#34;127.0.0.1&#34;</span><span class="op" id="6770833">,</span>&nbsp;<span class="ident" id="6770835">cnet</span><span class="op" id="6770839">:</span>&nbsp;<span class="string" id="6770841">&#34;udp&#34;</span><span class="op" id="6770846">,</span>&nbsp;<span class="ident" id="6770848">caddr</span><span class="op" id="6770853">:</span>&nbsp;<span class="string" id="6770855">&#34;127.0.0.1&#34;</span><span class="op" id="6770866">,</span>&nbsp;<span class="ident" id="6770868">dial</span><span class="op" id="6770872">:</span>&nbsp;<span class="builtintype" id="6770874">true</span><span class="op" id="6770878">}</span><span class="op" id="6770879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770882">{</span><span class="ident" id="6770883">snet</span><span class="op" id="6770887">:</span>&nbsp;<span class="string" id="6770889">&#34;udp&#34;</span><span class="op" id="6770894">,</span>&nbsp;<span class="ident" id="6770896">saddr</span><span class="op" id="6770901">:</span>&nbsp;<span class="string" id="6770903">&#34;127.0.0.1&#34;</span><span class="op" id="6770914">,</span>&nbsp;<span class="ident" id="6770916">cnet</span><span class="op" id="6770920">:</span>&nbsp;<span class="string" id="6770922">&#34;udp&#34;</span><span class="op" id="6770927">,</span>&nbsp;<span class="ident" id="6770929">caddr</span><span class="op" id="6770934">:</span>&nbsp;<span class="string" id="6770936">&#34;127.0.0.1&#34;</span><span class="op" id="6770947">,</span>&nbsp;<span class="ident" id="6770949">empty</span><span class="op" id="6770954">:</span>&nbsp;<span class="builtintype" id="6770956">true</span><span class="op" id="6770960">}</span><span class="op" id="6770961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6770964">{</span><span class="ident" id="6770965">snet</span><span class="op" id="6770969">:</span>&nbsp;<span class="string" id="6770971">&#34;udp&#34;</span><span class="op" id="6770976">,</span>&nbsp;<span class="ident" id="6770978">saddr</span><span class="op" id="6770983">:</span>&nbsp;<span class="string" id="6770985">&#34;127.0.0.1&#34;</span><span class="op" id="6770996">,</span>&nbsp;<span class="ident" id="6770998">cnet</span><span class="op" id="6771002">:</span>&nbsp;<span class="string" id="6771004">&#34;udp&#34;</span><span class="op" id="6771009">,</span>&nbsp;<span class="ident" id="6771011">caddr</span><span class="op" id="6771016">:</span>&nbsp;<span class="string" id="6771018">&#34;127.0.0.1&#34;</span><span class="op" id="6771029">,</span>&nbsp;<span class="ident" id="6771031">dial</span><span class="op" id="6771035">:</span>&nbsp;<span class="builtintype" id="6771037">true</span><span class="op" id="6771041">,</span>&nbsp;<span class="ident" id="6771043">empty</span><span class="op" id="6771048">:</span>&nbsp;<span class="builtintype" id="6771050">true</span><span class="op" id="6771054">}</span><span class="op" id="6771055">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771059">{</span><span class="ident" id="6771060">snet</span><span class="op" id="6771064">:</span>&nbsp;<span class="string" id="6771066">&#34;udp&#34;</span><span class="op" id="6771071">,</span>&nbsp;<span class="ident" id="6771073">saddr</span><span class="op" id="6771078">:</span>&nbsp;<span class="string" id="6771080">&#34;[::1]&#34;</span><span class="op" id="6771087">,</span>&nbsp;<span class="ident" id="6771089">cnet</span><span class="op" id="6771093">:</span>&nbsp;<span class="string" id="6771095">&#34;udp&#34;</span><span class="op" id="6771100">,</span>&nbsp;<span class="ident" id="6771102">caddr</span><span class="op" id="6771107">:</span>&nbsp;<span class="string" id="6771109">&#34;[::1]&#34;</span><span class="op" id="6771116">,</span>&nbsp;<span class="ident" id="6771118">ipv6</span><span class="op" id="6771122">:</span>&nbsp;<span class="builtintype" id="6771124">true</span><span class="op" id="6771128">,</span>&nbsp;<span class="ident" id="6771130">dial</span><span class="op" id="6771134">:</span>&nbsp;<span class="builtintype" id="6771136">true</span><span class="op" id="6771140">}</span><span class="op" id="6771141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771144">{</span><span class="ident" id="6771145">snet</span><span class="op" id="6771149">:</span>&nbsp;<span class="string" id="6771151">&#34;udp&#34;</span><span class="op" id="6771156">,</span>&nbsp;<span class="ident" id="6771158">saddr</span><span class="op" id="6771163">:</span>&nbsp;<span class="string" id="6771165">&#34;[::1]&#34;</span><span class="op" id="6771172">,</span>&nbsp;<span class="ident" id="6771174">cnet</span><span class="op" id="6771178">:</span>&nbsp;<span class="string" id="6771180">&#34;udp&#34;</span><span class="op" id="6771185">,</span>&nbsp;<span class="ident" id="6771187">caddr</span><span class="op" id="6771192">:</span>&nbsp;<span class="string" id="6771194">&#34;[::1]&#34;</span><span class="op" id="6771201">,</span>&nbsp;<span class="ident" id="6771203">ipv6</span><span class="op" id="6771207">:</span>&nbsp;<span class="builtintype" id="6771209">true</span><span class="op" id="6771213">,</span>&nbsp;<span class="ident" id="6771215">empty</span><span class="op" id="6771220">:</span>&nbsp;<span class="builtintype" id="6771222">true</span><span class="op" id="6771226">}</span><span class="op" id="6771227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771230">{</span><span class="ident" id="6771231">snet</span><span class="op" id="6771235">:</span>&nbsp;<span class="string" id="6771237">&#34;udp&#34;</span><span class="op" id="6771242">,</span>&nbsp;<span class="ident" id="6771244">saddr</span><span class="op" id="6771249">:</span>&nbsp;<span class="string" id="6771251">&#34;[::1]&#34;</span><span class="op" id="6771258">,</span>&nbsp;<span class="ident" id="6771260">cnet</span><span class="op" id="6771264">:</span>&nbsp;<span class="string" id="6771266">&#34;udp&#34;</span><span class="op" id="6771271">,</span>&nbsp;<span class="ident" id="6771273">caddr</span><span class="op" id="6771278">:</span>&nbsp;<span class="string" id="6771280">&#34;[::1]&#34;</span><span class="op" id="6771287">,</span>&nbsp;<span class="ident" id="6771289">ipv6</span><span class="op" id="6771293">:</span>&nbsp;<span class="builtintype" id="6771295">true</span><span class="op" id="6771299">,</span>&nbsp;<span class="ident" id="6771301">dial</span><span class="op" id="6771305">:</span>&nbsp;<span class="builtintype" id="6771307">true</span><span class="op" id="6771311">,</span>&nbsp;<span class="ident" id="6771313">empty</span><span class="op" id="6771318">:</span>&nbsp;<span class="builtintype" id="6771320">true</span><span class="op" id="6771324">}</span><span class="op" id="6771325">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771329">{</span><span class="ident" id="6771330">snet</span><span class="op" id="6771334">:</span>&nbsp;<span class="string" id="6771336">&#34;unixgram&#34;</span><span class="op" id="6771346">,</span>&nbsp;<span class="ident" id="6771348">saddr</span><span class="op" id="6771353">:</span>&nbsp;<span class="ident" id="6771355">testUnixAddr</span><span class="op" id="6771367">(</span><span class="op" id="6771368">)</span><span class="op" id="6771369">,</span>&nbsp;<span class="ident" id="6771371">cnet</span><span class="op" id="6771375">:</span>&nbsp;<span class="string" id="6771377">&#34;unixgram&#34;</span><span class="op" id="6771387">,</span>&nbsp;<span class="ident" id="6771389">caddr</span><span class="op" id="6771394">:</span>&nbsp;<span class="ident" id="6771396">testUnixAddr</span><span class="op" id="6771408">(</span><span class="op" id="6771409">)</span><span class="op" id="6771410">}</span><span class="op" id="6771411">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771414">{</span><span class="ident" id="6771415">snet</span><span class="op" id="6771419">:</span>&nbsp;<span class="string" id="6771421">&#34;unixgram&#34;</span><span class="op" id="6771431">,</span>&nbsp;<span class="ident" id="6771433">saddr</span><span class="op" id="6771438">:</span>&nbsp;<span class="ident" id="6771440">testUnixAddr</span><span class="op" id="6771452">(</span><span class="op" id="6771453">)</span><span class="op" id="6771454">,</span>&nbsp;<span class="ident" id="6771456">cnet</span><span class="op" id="6771460">:</span>&nbsp;<span class="string" id="6771462">&#34;unixgram&#34;</span><span class="op" id="6771472">,</span>&nbsp;<span class="ident" id="6771474">caddr</span><span class="op" id="6771479">:</span>&nbsp;<span class="ident" id="6771481">testUnixAddr</span><span class="op" id="6771493">(</span><span class="op" id="6771494">)</span><span class="op" id="6771495">,</span>&nbsp;<span class="ident" id="6771497">dial</span><span class="op" id="6771501">:</span>&nbsp;<span class="builtintype" id="6771503">true</span><span class="op" id="6771507">}</span><span class="op" id="6771508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771511">{</span><span class="ident" id="6771512">snet</span><span class="op" id="6771516">:</span>&nbsp;<span class="string" id="6771518">&#34;unixgram&#34;</span><span class="op" id="6771528">,</span>&nbsp;<span class="ident" id="6771530">saddr</span><span class="op" id="6771535">:</span>&nbsp;<span class="ident" id="6771537">testUnixAddr</span><span class="op" id="6771549">(</span><span class="op" id="6771550">)</span><span class="op" id="6771551">,</span>&nbsp;<span class="ident" id="6771553">cnet</span><span class="op" id="6771557">:</span>&nbsp;<span class="string" id="6771559">&#34;unixgram&#34;</span><span class="op" id="6771569">,</span>&nbsp;<span class="ident" id="6771571">caddr</span><span class="op" id="6771576">:</span>&nbsp;<span class="ident" id="6771578">testUnixAddr</span><span class="op" id="6771590">(</span><span class="op" id="6771591">)</span><span class="op" id="6771592">,</span>&nbsp;<span class="ident" id="6771594">empty</span><span class="op" id="6771599">:</span>&nbsp;<span class="builtintype" id="6771601">true</span><span class="op" id="6771605">}</span><span class="op" id="6771606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771609">{</span><span class="ident" id="6771610">snet</span><span class="op" id="6771614">:</span>&nbsp;<span class="string" id="6771616">&#34;unixgram&#34;</span><span class="op" id="6771626">,</span>&nbsp;<span class="ident" id="6771628">saddr</span><span class="op" id="6771633">:</span>&nbsp;<span class="ident" id="6771635">testUnixAddr</span><span class="op" id="6771647">(</span><span class="op" id="6771648">)</span><span class="op" id="6771649">,</span>&nbsp;<span class="ident" id="6771651">cnet</span><span class="op" id="6771655">:</span>&nbsp;<span class="string" id="6771657">&#34;unixgram&#34;</span><span class="op" id="6771667">,</span>&nbsp;<span class="ident" id="6771669">caddr</span><span class="op" id="6771674">:</span>&nbsp;<span class="ident" id="6771676">testUnixAddr</span><span class="op" id="6771688">(</span><span class="op" id="6771689">)</span><span class="op" id="6771690">,</span>&nbsp;<span class="ident" id="6771692">dial</span><span class="op" id="6771696">:</span>&nbsp;<span class="builtintype" id="6771698">true</span><span class="op" id="6771702">,</span>&nbsp;<span class="ident" id="6771704">empty</span><span class="op" id="6771709">:</span>&nbsp;<span class="builtintype" id="6771711">true</span><span class="op" id="6771715">}</span><span class="op" id="6771716">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771720">{</span><span class="ident" id="6771721">snet</span><span class="op" id="6771725">:</span>&nbsp;<span class="string" id="6771727">&#34;unixgram&#34;</span><span class="op" id="6771737">,</span>&nbsp;<span class="ident" id="6771739">saddr</span><span class="op" id="6771744">:</span>&nbsp;<span class="string" id="6771746">&#34;@gotest6/net&#34;</span><span class="op" id="6771760">,</span>&nbsp;<span class="ident" id="6771762">cnet</span><span class="op" id="6771766">:</span>&nbsp;<span class="string" id="6771768">&#34;unixgram&#34;</span><span class="op" id="6771778">,</span>&nbsp;<span class="ident" id="6771780">caddr</span><span class="op" id="6771785">:</span>&nbsp;<span class="string" id="6771787">&#34;@gotest6/net.local&#34;</span><span class="op" id="6771807">,</span>&nbsp;<span class="ident" id="6771809">linuxOnly</span><span class="op" id="6771818">:</span>&nbsp;<span class="builtintype" id="6771820">true</span><span class="op" id="6771824">}</span><span class="op" id="6771825">,</span><br>
<span class="lineno">310</span><span class="op" id="6771827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771830">func</span>&nbsp;<span class="ident" id="6771835">TestDatagramPacketConnServer</span><span class="op" id="6771863">(</span><span class="ident" id="6771864">t</span>&nbsp;<span class="op" id="6771866">*</span><span class="ident" id="6771867">testing</span><span class="op" id="6771874">.</span><span class="ident" id="6771875">T</span><span class="op" id="6771876">)</span>&nbsp;<span class="op" id="6771878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6771881">if</span>&nbsp;<span class="op" id="6771884">!</span><span class="op" id="6771885">*</span><span class="ident" id="6771886">testDatagram</span>&nbsp;<span class="op" id="6771899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6771903">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6771911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6771915">for</span>&nbsp;<span class="ident" id="6771919">_</span><span class="op" id="6771920">,</span>&nbsp;<span class="ident" id="6771922">tt</span>&nbsp;<span class="op" id="6771925">:=</span>&nbsp;<span class="keyword" id="6771928">range</span>&nbsp;<span class="ident" id="6771934">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6771964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6771968">if</span>&nbsp;<span class="ident" id="6771971">skipServerTest</span><span class="op" id="6771985">(</span><span class="ident" id="6771986">tt</span><span class="op" id="6771988">.</span><span class="ident" id="6771989">snet</span><span class="op" id="6771993">,</span>&nbsp;<span class="string" id="6771995">&#34;unixgram&#34;</span><span class="op" id="6772005">,</span>&nbsp;<span class="ident" id="6772007">tt</span><span class="op" id="6772009">.</span><span class="ident" id="6772010">saddr</span><span class="op" id="6772015">,</span>&nbsp;<span class="ident" id="6772017">tt</span><span class="op" id="6772019">.</span><span class="ident" id="6772020">ipv6</span><span class="op" id="6772024">,</span>&nbsp;<span class="ident" id="6772026">tt</span><span class="op" id="6772028">.</span><span class="ident" id="6772029">ipv4map</span><span class="op" id="6772036">,</span>&nbsp;<span class="ident" id="6772038">tt</span><span class="op" id="6772040">.</span><span class="ident" id="6772041">linuxOnly</span><span class="op" id="6772050">)</span>&nbsp;<span class="op" id="6772052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772057">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772073">listening</span>&nbsp;<span class="op" id="6772083">:=</span>&nbsp;<span class="builtinfunc" id="6772086">make</span><span class="op" id="6772090">(</span><span class="keyword" id="6772091">chan</span>&nbsp;<span class="builtintype" id="6772096">string</span><span class="op" id="6772102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772106">done</span>&nbsp;<span class="op" id="6772111">:=</span>&nbsp;<span class="builtinfunc" id="6772114">make</span><span class="op" id="6772118">(</span><span class="keyword" id="6772119">chan</span>&nbsp;<span class="builtintype" id="6772124">int</span><span class="op" id="6772127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772131">switch</span>&nbsp;<span class="ident" id="6772138">tt</span><span class="op" id="6772140">.</span><span class="ident" id="6772141">snet</span>&nbsp;<span class="op" id="6772146">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772150">case</span>&nbsp;<span class="string" id="6772155">&#34;udp&#34;</span><span class="op" id="6772160">,</span>&nbsp;<span class="string" id="6772162">&#34;udp4&#34;</span><span class="op" id="6772168">,</span>&nbsp;<span class="string" id="6772170">&#34;udp6&#34;</span><span class="op" id="6772176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772181">tt</span><span class="op" id="6772183">.</span><span class="ident" id="6772184">saddr</span>&nbsp;<span class="op" id="6772190">+=</span>&nbsp;<span class="string" id="6772193">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772200">case</span>&nbsp;<span class="string" id="6772205">&#34;unixgram&#34;</span><span class="op" id="6772215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772220">os</span><span class="op" id="6772222">.</span><span class="ident" id="6772223">Remove</span><span class="op" id="6772229">(</span><span class="ident" id="6772230">tt</span><span class="op" id="6772232">.</span><span class="ident" id="6772233">saddr</span><span class="op" id="6772238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772243">os</span><span class="op" id="6772245">.</span><span class="ident" id="6772246">Remove</span><span class="op" id="6772252">(</span><span class="ident" id="6772253">tt</span><span class="op" id="6772255">.</span><span class="ident" id="6772256">caddr</span><span class="op" id="6772261">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772270">go</span>&nbsp;<span class="ident" id="6772273">runDatagramPacketConnServer</span><span class="op" id="6772300">(</span><span class="ident" id="6772301">t</span><span class="op" id="6772302">,</span>&nbsp;<span class="ident" id="6772304">tt</span><span class="op" id="6772306">.</span><span class="ident" id="6772307">snet</span><span class="op" id="6772311">,</span>&nbsp;<span class="ident" id="6772313">tt</span><span class="op" id="6772315">.</span><span class="ident" id="6772316">saddr</span><span class="op" id="6772321">,</span>&nbsp;<span class="ident" id="6772323">listening</span><span class="op" id="6772332">,</span>&nbsp;<span class="ident" id="6772334">done</span><span class="op" id="6772338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772342">taddr</span>&nbsp;<span class="op" id="6772348">:=</span>&nbsp;<span class="op" id="6772351">&lt;-</span><span class="ident" id="6772353">listening</span>&nbsp;<span class="comment" id="6772363">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772394">switch</span>&nbsp;<span class="ident" id="6772401">tt</span><span class="op" id="6772403">.</span><span class="ident" id="6772404">cnet</span>&nbsp;<span class="op" id="6772409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772413">case</span>&nbsp;<span class="string" id="6772418">&#34;udp&#34;</span><span class="op" id="6772423">,</span>&nbsp;<span class="string" id="6772425">&#34;udp4&#34;</span><span class="op" id="6772431">,</span>&nbsp;<span class="string" id="6772433">&#34;udp6&#34;</span><span class="op" id="6772439">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772444">_</span><span class="op" id="6772445">,</span>&nbsp;<span class="ident" id="6772447">port</span><span class="op" id="6772451">,</span>&nbsp;<span class="ident" id="6772453">err</span>&nbsp;<span class="op" id="6772457">:=</span>&nbsp;<span class="ident" id="6772460">SplitHostPort</span><span class="op" id="6772473">(</span><span class="ident" id="6772474">taddr</span><span class="op" id="6772479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772484">if</span>&nbsp;<span class="ident" id="6772487">err</span>&nbsp;<span class="op" id="6772491">!=</span>&nbsp;<span class="builtintype" id="6772494">nil</span>&nbsp;<span class="op" id="6772498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772504">t</span><span class="op" id="6772505">.</span><span class="ident" id="6772506">Fatalf</span><span class="op" id="6772512">(</span><span class="string" id="6772513">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6772543">,</span>&nbsp;<span class="ident" id="6772545">taddr</span><span class="op" id="6772550">,</span>&nbsp;<span class="ident" id="6772552">err</span><span class="op" id="6772555">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772565">taddr</span>&nbsp;<span class="op" id="6772571">=</span>&nbsp;<span class="ident" id="6772573">tt</span><span class="op" id="6772575">.</span><span class="ident" id="6772576">caddr</span>&nbsp;<span class="op" id="6772582">+</span>&nbsp;<span class="string" id="6772584">&#34;:&#34;</span>&nbsp;<span class="op" id="6772588">+</span>&nbsp;<span class="ident" id="6772590">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772598">tt</span><span class="op" id="6772600">.</span><span class="ident" id="6772601">caddr</span>&nbsp;<span class="op" id="6772607">+=</span>&nbsp;<span class="string" id="6772610">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772621">if</span>&nbsp;<span class="ident" id="6772624">tt</span><span class="op" id="6772626">.</span><span class="ident" id="6772627">dial</span>&nbsp;<span class="op" id="6772632">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772637">runDatagramConnClient</span><span class="op" id="6772658">(</span><span class="ident" id="6772659">t</span><span class="op" id="6772660">,</span>&nbsp;<span class="ident" id="6772662">tt</span><span class="op" id="6772664">.</span><span class="ident" id="6772665">cnet</span><span class="op" id="6772669">,</span>&nbsp;<span class="ident" id="6772671">tt</span><span class="op" id="6772673">.</span><span class="ident" id="6772674">caddr</span><span class="op" id="6772679">,</span>&nbsp;<span class="ident" id="6772681">taddr</span><span class="op" id="6772686">,</span>&nbsp;<span class="ident" id="6772688">tt</span><span class="op" id="6772690">.</span><span class="ident" id="6772691">empty</span><span class="op" id="6772696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772700">}</span>&nbsp;<span class="keyword" id="6772702">else</span>&nbsp;<span class="op" id="6772707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772712">runDatagramPacketConnClient</span><span class="op" id="6772739">(</span><span class="ident" id="6772740">t</span><span class="op" id="6772741">,</span>&nbsp;<span class="ident" id="6772743">tt</span><span class="op" id="6772745">.</span><span class="ident" id="6772746">cnet</span><span class="op" id="6772750">,</span>&nbsp;<span class="ident" id="6772752">tt</span><span class="op" id="6772754">.</span><span class="ident" id="6772755">caddr</span><span class="op" id="6772760">,</span>&nbsp;<span class="ident" id="6772762">taddr</span><span class="op" id="6772767">,</span>&nbsp;<span class="ident" id="6772769">tt</span><span class="op" id="6772771">.</span><span class="ident" id="6772772">empty</span><span class="op" id="6772777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772785">&lt;-</span><span class="ident" id="6772787">done</span>&nbsp;<span class="comment" id="6772792">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772817">&lt;-</span><span class="ident" id="6772819">done</span>&nbsp;<span class="comment" id="6772824">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772855">switch</span>&nbsp;<span class="ident" id="6772862">tt</span><span class="op" id="6772864">.</span><span class="ident" id="6772865">snet</span>&nbsp;<span class="op" id="6772870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6772874">case</span>&nbsp;<span class="string" id="6772879">&#34;unixgram&#34;</span><span class="op" id="6772889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772894">os</span><span class="op" id="6772896">.</span><span class="ident" id="6772897">Remove</span><span class="op" id="6772903">(</span><span class="ident" id="6772904">tt</span><span class="op" id="6772906">.</span><span class="ident" id="6772907">saddr</span><span class="op" id="6772912">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6772917">os</span><span class="op" id="6772919">.</span><span class="ident" id="6772920">Remove</span><span class="op" id="6772926">(</span><span class="ident" id="6772927">tt</span><span class="op" id="6772929">.</span><span class="ident" id="6772930">caddr</span><span class="op" id="6772935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6772942">}</span><br>
<span class="lineno"></span><span class="op" id="6772944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6772947">func</span>&nbsp;<span class="ident" id="6772952">runDatagramPacketConnServer</span><span class="op" id="6772979">(</span><span class="ident" id="6772980">t</span>&nbsp;<span class="op" id="6772982">*</span><span class="ident" id="6772983">testing</span><span class="op" id="6772990">.</span><span class="ident" id="6772991">T</span><span class="op" id="6772992">,</span>&nbsp;<span class="ident" id="6772994">net</span><span class="op" id="6772997">,</span>&nbsp;<span class="ident" id="6772999">laddr</span>&nbsp;<span class="builtintype" id="6773005">string</span><span class="op" id="6773011">,</span>&nbsp;<span class="ident" id="6773013">listening</span>&nbsp;<span class="keyword" id="6773023">chan</span><span class="op" id="6773027">&lt;-</span>&nbsp;<span class="builtintype" id="6773030">string</span><span class="op" id="6773036">,</span>&nbsp;<span class="ident" id="6773038">done</span>&nbsp;<span class="keyword" id="6773043">chan</span><span class="op" id="6773047">&lt;-</span>&nbsp;<span class="builtintype" id="6773050">int</span><span class="op" id="6773053">)</span>&nbsp;<span class="op" id="6773055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773058">c</span><span class="op" id="6773059">,</span>&nbsp;<span class="ident" id="6773061">err</span>&nbsp;<span class="op" id="6773065">:=</span>&nbsp;<span class="ident" id="6773068">ListenPacket</span><span class="op" id="6773080">(</span><span class="ident" id="6773081">net</span><span class="op" id="6773084">,</span>&nbsp;<span class="ident" id="6773086">laddr</span><span class="op" id="6773091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773094">if</span>&nbsp;<span class="ident" id="6773097">err</span>&nbsp;<span class="op" id="6773101">!=</span>&nbsp;<span class="builtintype" id="6773104">nil</span>&nbsp;<span class="op" id="6773108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773112">t</span><span class="op" id="6773113">.</span><span class="ident" id="6773114">Errorf</span><span class="op" id="6773120">(</span><span class="string" id="6773121">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6773154">,</span>&nbsp;<span class="ident" id="6773156">net</span><span class="op" id="6773159">,</span>&nbsp;<span class="ident" id="6773161">laddr</span><span class="op" id="6773166">,</span>&nbsp;<span class="ident" id="6773168">err</span><span class="op" id="6773171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773175">listening</span>&nbsp;<span class="op" id="6773185">&lt;-</span>&nbsp;<span class="string" id="6773188">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773198">done</span>&nbsp;<span class="op" id="6773203">&lt;-</span>&nbsp;<span class="num" id="6773206">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773210">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773221">defer</span>&nbsp;<span class="ident" id="6773227">c</span><span class="op" id="6773228">.</span><span class="ident" id="6773229">Close</span><span class="op" id="6773234">(</span><span class="op" id="6773235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773238">listening</span>&nbsp;<span class="op" id="6773248">&lt;-</span>&nbsp;<span class="ident" id="6773251">c</span><span class="op" id="6773252">.</span><span class="ident" id="6773253">LocalAddr</span><span class="op" id="6773262">(</span><span class="op" id="6773263">)</span><span class="op" id="6773264">.</span><span class="ident" id="6773265">String</span><span class="op" id="6773271">(</span><span class="op" id="6773272">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773276">buf</span>&nbsp;<span class="op" id="6773280">:=</span>&nbsp;<span class="builtinfunc" id="6773283">make</span><span class="op" id="6773287">(</span><span class="op" id="6773288">[</span><span class="op" id="6773289">]</span><span class="builtintype" id="6773290">byte</span><span class="op" id="6773294">,</span>&nbsp;<span class="num" id="6773296">1024</span><span class="op" id="6773300">)</span><br>
<span class="lineno"></span><span class="ident" id="6773302">run</span><span class="op" id="6773305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773308">for</span>&nbsp;<span class="op" id="6773312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773316">c</span><span class="op" id="6773317">.</span><span class="ident" id="6773318">SetReadDeadline</span><span class="op" id="6773333">(</span><span class="ident" id="6773334">time</span><span class="op" id="6773338">.</span><span class="ident" id="6773339">Now</span><span class="op" id="6773342">(</span><span class="op" id="6773343">)</span><span class="op" id="6773344">.</span><span class="ident" id="6773345">Add</span><span class="op" id="6773348">(</span><span class="num" id="6773349">10</span>&nbsp;<span class="op" id="6773352">*</span>&nbsp;<span class="ident" id="6773354">time</span><span class="op" id="6773358">.</span><span class="ident" id="6773359">Millisecond</span><span class="op" id="6773370">)</span><span class="op" id="6773371">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773375">n</span><span class="op" id="6773376">,</span>&nbsp;<span class="ident" id="6773378">ra</span><span class="op" id="6773380">,</span>&nbsp;<span class="ident" id="6773382">err</span>&nbsp;<span class="op" id="6773386">:=</span>&nbsp;<span class="ident" id="6773389">c</span><span class="op" id="6773390">.</span><span class="ident" id="6773391">ReadFrom</span><span class="op" id="6773399">(</span><span class="ident" id="6773400">buf</span><span class="op" id="6773403">[</span><span class="num" id="6773404">0</span><span class="op" id="6773405">:</span><span class="op" id="6773406">]</span><span class="op" id="6773407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773411">if</span>&nbsp;<span class="ident" id="6773414">nerr</span><span class="op" id="6773418">,</span>&nbsp;<span class="ident" id="6773420">ok</span>&nbsp;<span class="op" id="6773423">:=</span>&nbsp;<span class="ident" id="6773426">err</span><span class="op" id="6773429">.</span><span class="op" id="6773430">(</span><span class="ident" id="6773431">Error</span><span class="op" id="6773436">)</span><span class="op" id="6773437">;</span>&nbsp;<span class="ident" id="6773439">ok</span>&nbsp;<span class="op" id="6773442">&amp;&amp;</span>&nbsp;<span class="ident" id="6773445">nerr</span><span class="op" id="6773449">.</span><span class="ident" id="6773450">Timeout</span><span class="op" id="6773457">(</span><span class="op" id="6773458">)</span>&nbsp;<span class="op" id="6773460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773465">select</span>&nbsp;<span class="op" id="6773472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773477">case</span>&nbsp;<span class="ident" id="6773482">done</span>&nbsp;<span class="op" id="6773487">&lt;-</span>&nbsp;<span class="num" id="6773490">1</span><span class="op" id="6773491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773497">break</span>&nbsp;<span class="ident" id="6773503">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773510">default</span><span class="op" id="6773517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773523">continue</span>&nbsp;<span class="ident" id="6773532">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773547">if</span>&nbsp;<span class="ident" id="6773550">err</span>&nbsp;<span class="op" id="6773554">!=</span>&nbsp;<span class="builtintype" id="6773557">nil</span>&nbsp;<span class="op" id="6773561">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773566">break</span>&nbsp;<span class="ident" id="6773572">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773582">if</span>&nbsp;<span class="ident" id="6773585">_</span><span class="op" id="6773586">,</span>&nbsp;<span class="ident" id="6773588">err</span>&nbsp;<span class="op" id="6773592">=</span>&nbsp;<span class="ident" id="6773594">c</span><span class="op" id="6773595">.</span><span class="ident" id="6773596">WriteTo</span><span class="op" id="6773603">(</span><span class="ident" id="6773604">buf</span><span class="op" id="6773607">[</span><span class="num" id="6773608">0</span><span class="op" id="6773609">:</span><span class="ident" id="6773610">n</span><span class="op" id="6773611">]</span><span class="op" id="6773612">,</span>&nbsp;<span class="ident" id="6773614">ra</span><span class="op" id="6773616">)</span><span class="op" id="6773617">;</span>&nbsp;<span class="ident" id="6773619">err</span>&nbsp;<span class="op" id="6773623">!=</span>&nbsp;<span class="builtintype" id="6773626">nil</span>&nbsp;<span class="op" id="6773630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773635">t</span><span class="op" id="6773636">.</span><span class="ident" id="6773637">Errorf</span><span class="op" id="6773643">(</span><span class="string" id="6773644">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6773668">,</span>&nbsp;<span class="ident" id="6773670">ra</span><span class="op" id="6773672">,</span>&nbsp;<span class="ident" id="6773674">err</span><span class="op" id="6773677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773682">break</span>&nbsp;<span class="ident" id="6773688">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773700">done</span>&nbsp;<span class="op" id="6773705">&lt;-</span>&nbsp;<span class="num" id="6773708">1</span><br>
<span class="lineno"></span><span class="op" id="6773710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6773713">func</span>&nbsp;<span class="ident" id="6773718">runDatagramConnClient</span><span class="op" id="6773739">(</span><span class="ident" id="6773740">t</span>&nbsp;<span class="op" id="6773742">*</span><span class="ident" id="6773743">testing</span><span class="op" id="6773750">.</span><span class="ident" id="6773751">T</span><span class="op" id="6773752">,</span>&nbsp;<span class="ident" id="6773754">net</span><span class="op" id="6773757">,</span>&nbsp;<span class="ident" id="6773759">laddr</span><span class="op" id="6773764">,</span>&nbsp;<span class="ident" id="6773766">taddr</span>&nbsp;<span class="builtintype" id="6773772">string</span><span class="op" id="6773778">,</span>&nbsp;<span class="ident" id="6773780">isEmpty</span>&nbsp;<span class="builtintype" id="6773788">bool</span><span class="op" id="6773792">)</span>&nbsp;<span class="op" id="6773794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773797">var</span>&nbsp;<span class="ident" id="6773801">c</span>&nbsp;<span class="ident" id="6773803">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773809">var</span>&nbsp;<span class="ident" id="6773813">err</span>&nbsp;<span class="builtintype" id="6773817">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773824">switch</span>&nbsp;<span class="ident" id="6773831">net</span>&nbsp;<span class="op" id="6773835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773838">case</span>&nbsp;<span class="string" id="6773843">&#34;udp&#34;</span><span class="op" id="6773848">,</span>&nbsp;<span class="string" id="6773850">&#34;udp4&#34;</span><span class="op" id="6773856">,</span>&nbsp;<span class="string" id="6773858">&#34;udp6&#34;</span><span class="op" id="6773864">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773868">c</span><span class="op" id="6773869">,</span>&nbsp;<span class="ident" id="6773871">err</span>&nbsp;<span class="op" id="6773875">=</span>&nbsp;<span class="ident" id="6773877">Dial</span><span class="op" id="6773881">(</span><span class="ident" id="6773882">net</span><span class="op" id="6773885">,</span>&nbsp;<span class="ident" id="6773887">taddr</span><span class="op" id="6773892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773896">if</span>&nbsp;<span class="ident" id="6773899">err</span>&nbsp;<span class="op" id="6773903">!=</span>&nbsp;<span class="builtintype" id="6773906">nil</span>&nbsp;<span class="op" id="6773910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773915">t</span><span class="op" id="6773916">.</span><span class="ident" id="6773917">Fatalf</span><span class="op" id="6773923">(</span><span class="string" id="6773924">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6773949">,</span>&nbsp;<span class="ident" id="6773951">net</span><span class="op" id="6773954">,</span>&nbsp;<span class="ident" id="6773956">taddr</span><span class="op" id="6773961">,</span>&nbsp;<span class="ident" id="6773963">err</span><span class="op" id="6773966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6773970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6773973">case</span>&nbsp;<span class="string" id="6773978">&#34;unixgram&#34;</span><span class="op" id="6773988">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6773992">c</span><span class="op" id="6773993">,</span>&nbsp;<span class="ident" id="6773995">err</span>&nbsp;<span class="op" id="6773999">=</span>&nbsp;<span class="ident" id="6774001">DialUnix</span><span class="op" id="6774009">(</span><span class="ident" id="6774010">net</span><span class="op" id="6774013">,</span>&nbsp;<span class="op" id="6774015">&amp;</span><span class="ident" id="6774016">UnixAddr</span><span class="op" id="6774024">{</span><span class="ident" id="6774025">Name</span><span class="op" id="6774029">:</span>&nbsp;<span class="ident" id="6774031">laddr</span><span class="op" id="6774036">,</span>&nbsp;<span class="ident" id="6774038">Net</span><span class="op" id="6774041">:</span>&nbsp;<span class="ident" id="6774043">net</span><span class="op" id="6774046">}</span><span class="op" id="6774047">,</span>&nbsp;<span class="op" id="6774049">&amp;</span><span class="ident" id="6774050">UnixAddr</span><span class="op" id="6774058">{</span><span class="ident" id="6774059">Name</span><span class="op" id="6774063">:</span>&nbsp;<span class="ident" id="6774065">taddr</span><span class="op" id="6774070">,</span>&nbsp;<span class="ident" id="6774072">Net</span><span class="op" id="6774075">:</span>&nbsp;<span class="ident" id="6774077">net</span><span class="op" id="6774080">}</span><span class="op" id="6774081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774085">if</span>&nbsp;<span class="ident" id="6774088">err</span>&nbsp;<span class="op" id="6774092">!=</span>&nbsp;<span class="builtintype" id="6774095">nil</span>&nbsp;<span class="op" id="6774099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774104">t</span><span class="op" id="6774105">.</span><span class="ident" id="6774106">Fatalf</span><span class="op" id="6774112">(</span><span class="string" id="6774113">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6774148">,</span>&nbsp;<span class="ident" id="6774150">net</span><span class="op" id="6774153">,</span>&nbsp;<span class="ident" id="6774155">laddr</span><span class="op" id="6774160">,</span>&nbsp;<span class="ident" id="6774162">taddr</span><span class="op" id="6774167">,</span>&nbsp;<span class="ident" id="6774169">err</span><span class="op" id="6774172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774179">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774182">defer</span>&nbsp;<span class="ident" id="6774188">c</span><span class="op" id="6774189">.</span><span class="ident" id="6774190">Close</span><span class="op" id="6774195">(</span><span class="op" id="6774196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774199">c</span><span class="op" id="6774200">.</span><span class="ident" id="6774201">SetReadDeadline</span><span class="op" id="6774216">(</span><span class="ident" id="6774217">time</span><span class="op" id="6774221">.</span><span class="ident" id="6774222">Now</span><span class="op" id="6774225">(</span><span class="op" id="6774226">)</span><span class="op" id="6774227">.</span><span class="ident" id="6774228">Add</span><span class="op" id="6774231">(</span><span class="num" id="6774232">1</span>&nbsp;<span class="op" id="6774234">*</span>&nbsp;<span class="ident" id="6774236">time</span><span class="op" id="6774240">.</span><span class="ident" id="6774241">Second</span><span class="op" id="6774247">)</span><span class="op" id="6774248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774252">var</span>&nbsp;<span class="ident" id="6774256">wb</span>&nbsp;<span class="op" id="6774259">[</span><span class="op" id="6774260">]</span><span class="builtintype" id="6774261">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774267">if</span>&nbsp;<span class="op" id="6774270">!</span><span class="ident" id="6774271">isEmpty</span>&nbsp;<span class="op" id="6774279">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774283">wb</span>&nbsp;<span class="op" id="6774286">=</span>&nbsp;<span class="op" id="6774288">[</span><span class="op" id="6774289">]</span><span class="builtintype" id="6774290">byte</span><span class="op" id="6774294">(</span><span class="string" id="6774295">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6774325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774331">if</span>&nbsp;<span class="ident" id="6774334">n</span><span class="op" id="6774335">,</span>&nbsp;<span class="ident" id="6774337">err</span>&nbsp;<span class="op" id="6774341">:=</span>&nbsp;<span class="ident" id="6774344">c</span><span class="op" id="6774345">.</span><span class="ident" id="6774346">Write</span><span class="op" id="6774351">(</span><span class="ident" id="6774352">wb</span><span class="op" id="6774354">[</span><span class="num" id="6774355">0</span><span class="op" id="6774356">:</span><span class="op" id="6774357">]</span><span class="op" id="6774358">)</span><span class="op" id="6774359">;</span>&nbsp;<span class="ident" id="6774361">err</span>&nbsp;<span class="op" id="6774365">!=</span>&nbsp;<span class="builtintype" id="6774368">nil</span>&nbsp;<span class="op" id="6774372">||</span>&nbsp;<span class="ident" id="6774375">n</span>&nbsp;<span class="op" id="6774377">!=</span>&nbsp;<span class="builtinfunc" id="6774380">len</span><span class="op" id="6774383">(</span><span class="ident" id="6774384">wb</span><span class="op" id="6774386">)</span>&nbsp;<span class="op" id="6774388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774392">t</span><span class="op" id="6774393">.</span><span class="ident" id="6774394">Fatalf</span><span class="op" id="6774400">(</span><span class="string" id="6774401">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6774439">,</span>&nbsp;<span class="ident" id="6774441">n</span><span class="op" id="6774442">,</span>&nbsp;<span class="ident" id="6774444">err</span><span class="op" id="6774447">,</span>&nbsp;<span class="builtinfunc" id="6774449">len</span><span class="op" id="6774452">(</span><span class="ident" id="6774453">wb</span><span class="op" id="6774455">)</span><span class="op" id="6774456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774459">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774463">rb</span>&nbsp;<span class="op" id="6774466">:=</span>&nbsp;<span class="builtinfunc" id="6774469">make</span><span class="op" id="6774473">(</span><span class="op" id="6774474">[</span><span class="op" id="6774475">]</span><span class="builtintype" id="6774476">byte</span><span class="op" id="6774480">,</span>&nbsp;<span class="num" id="6774482">1024</span><span class="op" id="6774486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774489">if</span>&nbsp;<span class="ident" id="6774492">n</span><span class="op" id="6774493">,</span>&nbsp;<span class="ident" id="6774495">err</span>&nbsp;<span class="op" id="6774499">:=</span>&nbsp;<span class="ident" id="6774502">c</span><span class="op" id="6774503">.</span><span class="ident" id="6774504">Read</span><span class="op" id="6774508">(</span><span class="ident" id="6774509">rb</span><span class="op" id="6774511">[</span><span class="num" id="6774512">0</span><span class="op" id="6774513">:</span><span class="op" id="6774514">]</span><span class="op" id="6774515">)</span><span class="op" id="6774516">;</span>&nbsp;<span class="ident" id="6774518">err</span>&nbsp;<span class="op" id="6774522">!=</span>&nbsp;<span class="builtintype" id="6774525">nil</span>&nbsp;<span class="op" id="6774529">||</span>&nbsp;<span class="ident" id="6774532">n</span>&nbsp;<span class="op" id="6774534">!=</span>&nbsp;<span class="builtinfunc" id="6774537">len</span><span class="op" id="6774540">(</span><span class="ident" id="6774541">wb</span><span class="op" id="6774543">)</span>&nbsp;<span class="op" id="6774545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774549">t</span><span class="op" id="6774550">.</span><span class="ident" id="6774551">Fatalf</span><span class="op" id="6774557">(</span><span class="string" id="6774558">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6774595">,</span>&nbsp;<span class="ident" id="6774597">n</span><span class="op" id="6774598">,</span>&nbsp;<span class="ident" id="6774600">err</span><span class="op" id="6774603">,</span>&nbsp;<span class="builtinfunc" id="6774605">len</span><span class="op" id="6774608">(</span><span class="ident" id="6774609">wb</span><span class="op" id="6774611">)</span><span class="op" id="6774612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774615">}</span><br>
<span class="lineno">425</span><span class="op" id="6774617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774620">func</span>&nbsp;<span class="ident" id="6774625">runDatagramPacketConnClient</span><span class="op" id="6774652">(</span><span class="ident" id="6774653">t</span>&nbsp;<span class="op" id="6774655">*</span><span class="ident" id="6774656">testing</span><span class="op" id="6774663">.</span><span class="ident" id="6774664">T</span><span class="op" id="6774665">,</span>&nbsp;<span class="ident" id="6774667">net</span><span class="op" id="6774670">,</span>&nbsp;<span class="ident" id="6774672">laddr</span><span class="op" id="6774677">,</span>&nbsp;<span class="ident" id="6774679">taddr</span>&nbsp;<span class="builtintype" id="6774685">string</span><span class="op" id="6774691">,</span>&nbsp;<span class="ident" id="6774693">isEmpty</span>&nbsp;<span class="builtintype" id="6774701">bool</span><span class="op" id="6774705">)</span>&nbsp;<span class="op" id="6774707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774710">var</span>&nbsp;<span class="ident" id="6774714">ra</span>&nbsp;<span class="ident" id="6774717">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774723">var</span>&nbsp;<span class="ident" id="6774727">err</span>&nbsp;<span class="builtintype" id="6774731">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774738">switch</span>&nbsp;<span class="ident" id="6774745">net</span>&nbsp;<span class="op" id="6774749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774752">case</span>&nbsp;<span class="string" id="6774757">&#34;udp&#34;</span><span class="op" id="6774762">,</span>&nbsp;<span class="string" id="6774764">&#34;udp4&#34;</span><span class="op" id="6774770">,</span>&nbsp;<span class="string" id="6774772">&#34;udp6&#34;</span><span class="op" id="6774778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774782">ra</span><span class="op" id="6774784">,</span>&nbsp;<span class="ident" id="6774786">err</span>&nbsp;<span class="op" id="6774790">=</span>&nbsp;<span class="ident" id="6774792">ResolveUDPAddr</span><span class="op" id="6774806">(</span><span class="ident" id="6774807">net</span><span class="op" id="6774810">,</span>&nbsp;<span class="ident" id="6774812">taddr</span><span class="op" id="6774817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774821">if</span>&nbsp;<span class="ident" id="6774824">err</span>&nbsp;<span class="op" id="6774828">!=</span>&nbsp;<span class="builtintype" id="6774831">nil</span>&nbsp;<span class="op" id="6774835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774840">t</span><span class="op" id="6774841">.</span><span class="ident" id="6774842">Fatalf</span><span class="op" id="6774848">(</span><span class="string" id="6774849">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6774884">,</span>&nbsp;<span class="ident" id="6774886">net</span><span class="op" id="6774889">,</span>&nbsp;<span class="ident" id="6774891">taddr</span><span class="op" id="6774896">,</span>&nbsp;<span class="ident" id="6774898">err</span><span class="op" id="6774901">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6774905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774908">case</span>&nbsp;<span class="string" id="6774913">&#34;unixgram&#34;</span><span class="op" id="6774923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774927">ra</span><span class="op" id="6774929">,</span>&nbsp;<span class="ident" id="6774931">err</span>&nbsp;<span class="op" id="6774935">=</span>&nbsp;<span class="ident" id="6774937">ResolveUnixAddr</span><span class="op" id="6774952">(</span><span class="ident" id="6774953">net</span><span class="op" id="6774956">,</span>&nbsp;<span class="ident" id="6774958">taddr</span><span class="op" id="6774963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6774967">if</span>&nbsp;<span class="ident" id="6774970">err</span>&nbsp;<span class="op" id="6774974">!=</span>&nbsp;<span class="builtintype" id="6774977">nil</span>&nbsp;<span class="op" id="6774981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6774986">t</span><span class="op" id="6774987">.</span><span class="ident" id="6774988">Fatalf</span><span class="op" id="6774994">(</span><span class="string" id="6774995">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6775031">,</span>&nbsp;<span class="ident" id="6775033">net</span><span class="op" id="6775036">,</span>&nbsp;<span class="ident" id="6775038">taddr</span><span class="op" id="6775043">,</span>&nbsp;<span class="ident" id="6775045">err</span><span class="op" id="6775048">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775058">c</span><span class="op" id="6775059">,</span>&nbsp;<span class="ident" id="6775061">err</span>&nbsp;<span class="op" id="6775065">:=</span>&nbsp;<span class="ident" id="6775068">ListenPacket</span><span class="op" id="6775080">(</span><span class="ident" id="6775081">net</span><span class="op" id="6775084">,</span>&nbsp;<span class="ident" id="6775086">laddr</span><span class="op" id="6775091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775094">if</span>&nbsp;<span class="ident" id="6775097">err</span>&nbsp;<span class="op" id="6775101">!=</span>&nbsp;<span class="builtintype" id="6775104">nil</span>&nbsp;<span class="op" id="6775108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775112">t</span><span class="op" id="6775113">.</span><span class="ident" id="6775114">Fatalf</span><span class="op" id="6775120">(</span><span class="string" id="6775121">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6775153">,</span>&nbsp;<span class="ident" id="6775155">net</span><span class="op" id="6775158">,</span>&nbsp;<span class="ident" id="6775160">laddr</span><span class="op" id="6775165">,</span>&nbsp;<span class="ident" id="6775167">err</span><span class="op" id="6775170">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775176">defer</span>&nbsp;<span class="ident" id="6775182">c</span><span class="op" id="6775183">.</span><span class="ident" id="6775184">Close</span><span class="op" id="6775189">(</span><span class="op" id="6775190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775193">c</span><span class="op" id="6775194">.</span><span class="ident" id="6775195">SetReadDeadline</span><span class="op" id="6775210">(</span><span class="ident" id="6775211">time</span><span class="op" id="6775215">.</span><span class="ident" id="6775216">Now</span><span class="op" id="6775219">(</span><span class="op" id="6775220">)</span><span class="op" id="6775221">.</span><span class="ident" id="6775222">Add</span><span class="op" id="6775225">(</span><span class="num" id="6775226">1</span>&nbsp;<span class="op" id="6775228">*</span>&nbsp;<span class="ident" id="6775230">time</span><span class="op" id="6775234">.</span><span class="ident" id="6775235">Second</span><span class="op" id="6775241">)</span><span class="op" id="6775242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775246">var</span>&nbsp;<span class="ident" id="6775250">wb</span>&nbsp;<span class="op" id="6775253">[</span><span class="op" id="6775254">]</span><span class="builtintype" id="6775255">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775261">if</span>&nbsp;<span class="op" id="6775264">!</span><span class="ident" id="6775265">isEmpty</span>&nbsp;<span class="op" id="6775273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775277">wb</span>&nbsp;<span class="op" id="6775280">=</span>&nbsp;<span class="op" id="6775282">[</span><span class="op" id="6775283">]</span><span class="builtintype" id="6775284">byte</span><span class="op" id="6775288">(</span><span class="string" id="6775289">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6775333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775339">if</span>&nbsp;<span class="ident" id="6775342">n</span><span class="op" id="6775343">,</span>&nbsp;<span class="ident" id="6775345">err</span>&nbsp;<span class="op" id="6775349">:=</span>&nbsp;<span class="ident" id="6775352">c</span><span class="op" id="6775353">.</span><span class="ident" id="6775354">WriteTo</span><span class="op" id="6775361">(</span><span class="ident" id="6775362">wb</span><span class="op" id="6775364">[</span><span class="num" id="6775365">0</span><span class="op" id="6775366">:</span><span class="op" id="6775367">]</span><span class="op" id="6775368">,</span>&nbsp;<span class="ident" id="6775370">ra</span><span class="op" id="6775372">)</span><span class="op" id="6775373">;</span>&nbsp;<span class="ident" id="6775375">err</span>&nbsp;<span class="op" id="6775379">!=</span>&nbsp;<span class="builtintype" id="6775382">nil</span>&nbsp;<span class="op" id="6775386">||</span>&nbsp;<span class="ident" id="6775389">n</span>&nbsp;<span class="op" id="6775391">!=</span>&nbsp;<span class="builtinfunc" id="6775394">len</span><span class="op" id="6775397">(</span><span class="ident" id="6775398">wb</span><span class="op" id="6775400">)</span>&nbsp;<span class="op" id="6775402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775406">t</span><span class="op" id="6775407">.</span><span class="ident" id="6775408">Fatalf</span><span class="op" id="6775414">(</span><span class="string" id="6775415">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6775459">,</span>&nbsp;<span class="ident" id="6775461">ra</span><span class="op" id="6775463">,</span>&nbsp;<span class="ident" id="6775465">n</span><span class="op" id="6775466">,</span>&nbsp;<span class="ident" id="6775468">err</span><span class="op" id="6775471">,</span>&nbsp;<span class="builtinfunc" id="6775473">len</span><span class="op" id="6775476">(</span><span class="ident" id="6775477">wb</span><span class="op" id="6775479">)</span><span class="op" id="6775480">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775487">rb</span>&nbsp;<span class="op" id="6775490">:=</span>&nbsp;<span class="builtinfunc" id="6775493">make</span><span class="op" id="6775497">(</span><span class="op" id="6775498">[</span><span class="op" id="6775499">]</span><span class="builtintype" id="6775500">byte</span><span class="op" id="6775504">,</span>&nbsp;<span class="num" id="6775506">1024</span><span class="op" id="6775510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6775513">if</span>&nbsp;<span class="ident" id="6775516">n</span><span class="op" id="6775517">,</span>&nbsp;<span class="ident" id="6775519">_</span><span class="op" id="6775520">,</span>&nbsp;<span class="ident" id="6775522">err</span>&nbsp;<span class="op" id="6775526">:=</span>&nbsp;<span class="ident" id="6775529">c</span><span class="op" id="6775530">.</span><span class="ident" id="6775531">ReadFrom</span><span class="op" id="6775539">(</span><span class="ident" id="6775540">rb</span><span class="op" id="6775542">[</span><span class="num" id="6775543">0</span><span class="op" id="6775544">:</span><span class="op" id="6775545">]</span><span class="op" id="6775546">)</span><span class="op" id="6775547">;</span>&nbsp;<span class="ident" id="6775549">err</span>&nbsp;<span class="op" id="6775553">!=</span>&nbsp;<span class="builtintype" id="6775556">nil</span>&nbsp;<span class="op" id="6775560">||</span>&nbsp;<span class="ident" id="6775563">n</span>&nbsp;<span class="op" id="6775565">!=</span>&nbsp;<span class="builtinfunc" id="6775568">len</span><span class="op" id="6775571">(</span><span class="ident" id="6775572">wb</span><span class="op" id="6775574">)</span>&nbsp;<span class="op" id="6775576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6775580">t</span><span class="op" id="6775581">.</span><span class="ident" id="6775582">Fatalf</span><span class="op" id="6775588">(</span><span class="string" id="6775589">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6775630">,</span>&nbsp;<span class="ident" id="6775632">n</span><span class="op" id="6775633">,</span>&nbsp;<span class="ident" id="6775635">err</span><span class="op" id="6775638">,</span>&nbsp;<span class="builtinfunc" id="6775640">len</span><span class="op" id="6775643">(</span><span class="ident" id="6775644">wb</span><span class="op" id="6775646">)</span><span class="op" id="6775647">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6775650">}</span><br>
<span class="lineno"></span><span class="op" id="6775652">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
