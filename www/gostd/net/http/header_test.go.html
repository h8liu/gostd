<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7303831">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7303887">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7303941">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7303992">package</span>&nbsp;<span class="ident" id="7304000">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304006">import</span>&nbsp;<span class="op" id="7304013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304016">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304025">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304036">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304047">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7304054">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304057">var</span>&nbsp;<span class="ident" id="7304061">headerWriteTests</span>&nbsp;<span class="op" id="7304078">=</span>&nbsp;<span class="op" id="7304080">[</span><span class="op" id="7304081">]</span><span class="keyword" id="7304082">struct</span>&nbsp;<span class="op" id="7304089">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304092">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304101">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304109">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7304118">map</span><span class="op" id="7304121">[</span><span class="builtintype" id="7304122">string</span><span class="op" id="7304128">]</span><span class="builtintype" id="7304129">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304135">expected</span>&nbsp;<span class="builtintype" id="7304144">string</span><br>
<span class="lineno"></span><span class="op" id="7304151">}</span><span class="op" id="7304152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304155">{</span><span class="ident" id="7304156">Header</span><span class="op" id="7304162">{</span><span class="op" id="7304163">}</span><span class="op" id="7304164">,</span>&nbsp;<span class="ident" id="7304166">nil</span><span class="op" id="7304169">,</span>&nbsp;<span class="string" id="7304171">&#34;&#34;</span><span class="op" id="7304173">}</span><span class="op" id="7304174">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304181">Header</span><span class="op" id="7304187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304192">&#34;Content-Type&#34;</span><span class="op" id="7304206">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7304210">{</span><span class="string" id="7304211">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7304237">}</span><span class="op" id="7304238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304243">&#34;Content-Length&#34;</span><span class="op" id="7304259">:</span>&nbsp;<span class="op" id="7304261">{</span><span class="string" id="7304262">&#34;0&#34;</span><span class="op" id="7304265">}</span><span class="op" id="7304266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304270">}</span><span class="op" id="7304271">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304275">nil</span><span class="op" id="7304278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304282">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7304347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304350">}</span><span class="op" id="7304351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304358">Header</span><span class="op" id="7304364">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304369">&#34;Content-Length&#34;</span><span class="op" id="7304385">:</span>&nbsp;<span class="op" id="7304387">{</span><span class="string" id="7304388">&#34;0&#34;</span><span class="op" id="7304391">,</span>&nbsp;<span class="string" id="7304393">&#34;1&#34;</span><span class="op" id="7304396">,</span>&nbsp;<span class="string" id="7304398">&#34;2&#34;</span><span class="op" id="7304401">}</span><span class="op" id="7304402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304406">}</span><span class="op" id="7304407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304411">nil</span><span class="op" id="7304414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304418">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7304483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304486">}</span><span class="op" id="7304487">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304494">Header</span><span class="op" id="7304500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304505">&#34;Expires&#34;</span><span class="op" id="7304514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304525">{</span><span class="string" id="7304526">&#34;-1&#34;</span><span class="op" id="7304530">}</span><span class="op" id="7304531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304536">&#34;Content-Length&#34;</span><span class="op" id="7304552">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7304556">{</span><span class="string" id="7304557">&#34;0&#34;</span><span class="op" id="7304560">}</span><span class="op" id="7304561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304566">&#34;Content-Encoding&#34;</span><span class="op" id="7304584">:</span>&nbsp;<span class="op" id="7304586">{</span><span class="string" id="7304587">&#34;gzip&#34;</span><span class="op" id="7304593">}</span><span class="op" id="7304594">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304598">}</span><span class="op" id="7304599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7304603">map</span><span class="op" id="7304606">[</span><span class="builtintype" id="7304607">string</span><span class="op" id="7304613">]</span><span class="builtintype" id="7304614">bool</span><span class="op" id="7304618">{</span><span class="string" id="7304619">&#34;Content-Length&#34;</span><span class="op" id="7304635">:</span>&nbsp;<span class="builtintype" id="7304637">true</span><span class="op" id="7304641">}</span><span class="op" id="7304642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304646">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7304689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304692">}</span><span class="op" id="7304693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304696">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304700">Header</span><span class="op" id="7304706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304711">&#34;Expires&#34;</span><span class="op" id="7304720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304731">{</span><span class="string" id="7304732">&#34;-1&#34;</span><span class="op" id="7304736">}</span><span class="op" id="7304737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304742">&#34;Content-Length&#34;</span><span class="op" id="7304758">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7304762">{</span><span class="string" id="7304763">&#34;0&#34;</span><span class="op" id="7304766">,</span>&nbsp;<span class="string" id="7304768">&#34;1&#34;</span><span class="op" id="7304771">,</span>&nbsp;<span class="string" id="7304773">&#34;2&#34;</span><span class="op" id="7304776">}</span><span class="op" id="7304777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304782">&#34;Content-Encoding&#34;</span><span class="op" id="7304800">:</span>&nbsp;<span class="op" id="7304802">{</span><span class="string" id="7304803">&#34;gzip&#34;</span><span class="op" id="7304809">}</span><span class="op" id="7304810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304814">}</span><span class="op" id="7304815">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7304819">map</span><span class="op" id="7304822">[</span><span class="builtintype" id="7304823">string</span><span class="op" id="7304829">]</span><span class="builtintype" id="7304830">bool</span><span class="op" id="7304834">{</span><span class="string" id="7304835">&#34;Content-Length&#34;</span><span class="op" id="7304851">:</span>&nbsp;<span class="builtintype" id="7304853">true</span><span class="op" id="7304857">}</span><span class="op" id="7304858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304862">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7304905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304908">}</span><span class="op" id="7304909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304916">Header</span><span class="op" id="7304922">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304927">&#34;Expires&#34;</span><span class="op" id="7304936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304947">{</span><span class="string" id="7304948">&#34;-1&#34;</span><span class="op" id="7304952">}</span><span class="op" id="7304953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304958">&#34;Content-Length&#34;</span><span class="op" id="7304974">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7304978">{</span><span class="string" id="7304979">&#34;0&#34;</span><span class="op" id="7304982">}</span><span class="op" id="7304983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7304988">&#34;Content-Encoding&#34;</span><span class="op" id="7305006">:</span>&nbsp;<span class="op" id="7305008">{</span><span class="string" id="7305009">&#34;gzip&#34;</span><span class="op" id="7305015">}</span><span class="op" id="7305016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305020">}</span><span class="op" id="7305021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7305025">map</span><span class="op" id="7305028">[</span><span class="builtintype" id="7305029">string</span><span class="op" id="7305035">]</span><span class="builtintype" id="7305036">bool</span><span class="op" id="7305040">{</span><span class="string" id="7305041">&#34;Content-Length&#34;</span><span class="op" id="7305057">:</span>&nbsp;<span class="builtintype" id="7305059">true</span><span class="op" id="7305063">,</span>&nbsp;<span class="string" id="7305065">&#34;Expires&#34;</span><span class="op" id="7305074">:</span>&nbsp;<span class="builtintype" id="7305076">true</span><span class="op" id="7305080">,</span>&nbsp;<span class="string" id="7305082">&#34;Content-Encoding&#34;</span><span class="op" id="7305100">:</span>&nbsp;<span class="builtintype" id="7305102">true</span><span class="op" id="7305106">}</span><span class="op" id="7305107">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305111">&#34;&#34;</span><span class="op" id="7305113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305116">}</span><span class="op" id="7305117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305124">Header</span><span class="op" id="7305130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305135">&#34;Nil&#34;</span><span class="op" id="7305140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305151">nil</span><span class="op" id="7305154">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305159">&#34;Empty&#34;</span><span class="op" id="7305166">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305175">{</span><span class="op" id="7305176">}</span><span class="op" id="7305177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305182">&#34;Blank&#34;</span><span class="op" id="7305189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305198">{</span><span class="string" id="7305199">&#34;&#34;</span><span class="op" id="7305201">}</span><span class="op" id="7305202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305207">&#34;Double-Blank&#34;</span><span class="op" id="7305221">:</span>&nbsp;<span class="op" id="7305223">{</span><span class="string" id="7305224">&#34;&#34;</span><span class="op" id="7305226">,</span>&nbsp;<span class="string" id="7305228">&#34;&#34;</span><span class="op" id="7305230">}</span><span class="op" id="7305231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305235">}</span><span class="op" id="7305236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305240">nil</span><span class="op" id="7305243">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305247">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7305296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305299">}</span><span class="op" id="7305300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7305303">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305377">Header</span><span class="op" id="7305383">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305388">&#34;k1&#34;</span><span class="op" id="7305392">:</span>&nbsp;<span class="op" id="7305394">{</span><span class="string" id="7305395">&#34;1a&#34;</span><span class="op" id="7305399">,</span>&nbsp;<span class="string" id="7305401">&#34;1b&#34;</span><span class="op" id="7305405">}</span><span class="op" id="7305406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305411">&#34;k2&#34;</span><span class="op" id="7305415">:</span>&nbsp;<span class="op" id="7305417">{</span><span class="string" id="7305418">&#34;2a&#34;</span><span class="op" id="7305422">,</span>&nbsp;<span class="string" id="7305424">&#34;2b&#34;</span><span class="op" id="7305428">}</span><span class="op" id="7305429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305434">&#34;k3&#34;</span><span class="op" id="7305438">:</span>&nbsp;<span class="op" id="7305440">{</span><span class="string" id="7305441">&#34;3a&#34;</span><span class="op" id="7305445">,</span>&nbsp;<span class="string" id="7305447">&#34;3b&#34;</span><span class="op" id="7305451">}</span><span class="op" id="7305452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305457">&#34;k4&#34;</span><span class="op" id="7305461">:</span>&nbsp;<span class="op" id="7305463">{</span><span class="string" id="7305464">&#34;4a&#34;</span><span class="op" id="7305468">,</span>&nbsp;<span class="string" id="7305470">&#34;4b&#34;</span><span class="op" id="7305474">}</span><span class="op" id="7305475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305480">&#34;k5&#34;</span><span class="op" id="7305484">:</span>&nbsp;<span class="op" id="7305486">{</span><span class="string" id="7305487">&#34;5a&#34;</span><span class="op" id="7305491">,</span>&nbsp;<span class="string" id="7305493">&#34;5b&#34;</span><span class="op" id="7305497">}</span><span class="op" id="7305498">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305503">&#34;k6&#34;</span><span class="op" id="7305507">:</span>&nbsp;<span class="op" id="7305509">{</span><span class="string" id="7305510">&#34;6a&#34;</span><span class="op" id="7305514">,</span>&nbsp;<span class="string" id="7305516">&#34;6b&#34;</span><span class="op" id="7305520">}</span><span class="op" id="7305521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305526">&#34;k7&#34;</span><span class="op" id="7305530">:</span>&nbsp;<span class="op" id="7305532">{</span><span class="string" id="7305533">&#34;7a&#34;</span><span class="op" id="7305537">,</span>&nbsp;<span class="string" id="7305539">&#34;7b&#34;</span><span class="op" id="7305543">}</span><span class="op" id="7305544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305549">&#34;k8&#34;</span><span class="op" id="7305553">:</span>&nbsp;<span class="op" id="7305555">{</span><span class="string" id="7305556">&#34;8a&#34;</span><span class="op" id="7305560">,</span>&nbsp;<span class="string" id="7305562">&#34;8b&#34;</span><span class="op" id="7305566">}</span><span class="op" id="7305567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305572">&#34;k9&#34;</span><span class="op" id="7305576">:</span>&nbsp;<span class="op" id="7305578">{</span><span class="string" id="7305579">&#34;9a&#34;</span><span class="op" id="7305583">,</span>&nbsp;<span class="string" id="7305585">&#34;9b&#34;</span><span class="op" id="7305589">}</span><span class="op" id="7305590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305594">}</span><span class="op" id="7305595">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7305599">map</span><span class="op" id="7305602">[</span><span class="builtintype" id="7305603">string</span><span class="op" id="7305609">]</span><span class="builtintype" id="7305610">bool</span><span class="op" id="7305614">{</span><span class="string" id="7305615">&#34;k5&#34;</span><span class="op" id="7305619">:</span>&nbsp;<span class="builtintype" id="7305621">true</span><span class="op" id="7305625">}</span><span class="op" id="7305626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305630">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7305693">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305698">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7305741">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305746">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7305808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305811">}</span><span class="op" id="7305812">,</span><br>
<span class="lineno">90</span><span class="op" id="7305814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7305817">func</span>&nbsp;<span class="ident" id="7305822">TestHeaderWrite</span><span class="op" id="7305837">(</span><span class="ident" id="7305838">t</span>&nbsp;<span class="op" id="7305840">*</span><span class="ident" id="7305841">testing</span><span class="op" id="7305848">.</span><span class="ident" id="7305849">T</span><span class="op" id="7305850">)</span>&nbsp;<span class="op" id="7305852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7305855">var</span>&nbsp;<span class="ident" id="7305859">buf</span>&nbsp;<span class="ident" id="7305863">bytes</span><span class="op" id="7305868">.</span><span class="ident" id="7305869">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7305877">for</span>&nbsp;<span class="ident" id="7305881">i</span><span class="op" id="7305882">,</span>&nbsp;<span class="ident" id="7305884">test</span>&nbsp;<span class="op" id="7305889">:=</span>&nbsp;<span class="keyword" id="7305892">range</span>&nbsp;<span class="ident" id="7305898">headerWriteTests</span>&nbsp;<span class="op" id="7305915">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305919">test</span><span class="op" id="7305923">.</span><span class="ident" id="7305924">h</span><span class="op" id="7305925">.</span><span class="ident" id="7305926">WriteSubset</span><span class="op" id="7305937">(</span><span class="op" id="7305938">&amp;</span><span class="ident" id="7305939">buf</span><span class="op" id="7305942">,</span>&nbsp;<span class="ident" id="7305944">test</span><span class="op" id="7305948">.</span><span class="ident" id="7305949">exclude</span><span class="op" id="7305956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7305960">if</span>&nbsp;<span class="ident" id="7305963">buf</span><span class="op" id="7305966">.</span><span class="ident" id="7305967">String</span><span class="op" id="7305973">(</span><span class="op" id="7305974">)</span>&nbsp;<span class="op" id="7305976">!=</span>&nbsp;<span class="ident" id="7305979">test</span><span class="op" id="7305983">.</span><span class="ident" id="7305984">expected</span>&nbsp;<span class="op" id="7305993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305998">t</span><span class="op" id="7305999">.</span><span class="ident" id="7306000">Errorf</span><span class="op" id="7306006">(</span><span class="string" id="7306007">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7306033">,</span>&nbsp;<span class="ident" id="7306035">i</span><span class="op" id="7306036">,</span>&nbsp;<span class="ident" id="7306038">buf</span><span class="op" id="7306041">.</span><span class="ident" id="7306042">String</span><span class="op" id="7306048">(</span><span class="op" id="7306049">)</span><span class="op" id="7306050">,</span>&nbsp;<span class="ident" id="7306052">test</span><span class="op" id="7306056">.</span><span class="ident" id="7306057">expected</span><span class="op" id="7306065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306073">buf</span><span class="op" id="7306076">.</span><span class="ident" id="7306077">Reset</span><span class="op" id="7306082">(</span><span class="op" id="7306083">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306086">}</span><br>
<span class="lineno"></span><span class="op" id="7306088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7306091">var</span>&nbsp;<span class="ident" id="7306095">parseTimeTests</span>&nbsp;<span class="op" id="7306110">=</span>&nbsp;<span class="op" id="7306112">[</span><span class="op" id="7306113">]</span><span class="keyword" id="7306114">struct</span>&nbsp;<span class="op" id="7306121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306124">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7306128">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306136">err</span>&nbsp;<span class="builtintype" id="7306140">bool</span><br>
<span class="lineno"></span><span class="op" id="7306145">}</span><span class="op" id="7306146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306149">{</span><span class="ident" id="7306150">Header</span><span class="op" id="7306156">{</span><span class="string" id="7306157">&#34;Date&#34;</span><span class="op" id="7306163">:</span>&nbsp;<span class="op" id="7306165">{</span><span class="string" id="7306166">&#34;&#34;</span><span class="op" id="7306168">}</span><span class="op" id="7306169">}</span><span class="op" id="7306170">,</span>&nbsp;<span class="builtintype" id="7306172">true</span><span class="op" id="7306176">}</span><span class="op" id="7306177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306180">{</span><span class="ident" id="7306181">Header</span><span class="op" id="7306187">{</span><span class="string" id="7306188">&#34;Date&#34;</span><span class="op" id="7306194">:</span>&nbsp;<span class="op" id="7306196">{</span><span class="string" id="7306197">&#34;invalid&#34;</span><span class="op" id="7306206">}</span><span class="op" id="7306207">}</span><span class="op" id="7306208">,</span>&nbsp;<span class="builtintype" id="7306210">true</span><span class="op" id="7306214">}</span><span class="op" id="7306215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306218">{</span><span class="ident" id="7306219">Header</span><span class="op" id="7306225">{</span><span class="string" id="7306226">&#34;Date&#34;</span><span class="op" id="7306232">:</span>&nbsp;<span class="op" id="7306234">{</span><span class="string" id="7306235">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7306262">}</span><span class="op" id="7306263">}</span><span class="op" id="7306264">,</span>&nbsp;<span class="builtintype" id="7306266">true</span><span class="op" id="7306270">}</span><span class="op" id="7306271">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306274">{</span><span class="ident" id="7306275">Header</span><span class="op" id="7306281">{</span><span class="string" id="7306282">&#34;Date&#34;</span><span class="op" id="7306288">:</span>&nbsp;<span class="op" id="7306290">{</span><span class="string" id="7306291">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7306322">}</span><span class="op" id="7306323">}</span><span class="op" id="7306324">,</span>&nbsp;<span class="builtintype" id="7306326">false</span><span class="op" id="7306331">}</span><span class="op" id="7306332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306335">{</span><span class="ident" id="7306336">Header</span><span class="op" id="7306342">{</span><span class="string" id="7306343">&#34;Date&#34;</span><span class="op" id="7306349">:</span>&nbsp;<span class="op" id="7306351">{</span><span class="string" id="7306352">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7306384">}</span><span class="op" id="7306385">}</span><span class="op" id="7306386">,</span>&nbsp;<span class="builtintype" id="7306388">false</span><span class="op" id="7306393">}</span><span class="op" id="7306394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306397">{</span><span class="ident" id="7306398">Header</span><span class="op" id="7306404">{</span><span class="string" id="7306405">&#34;Date&#34;</span><span class="op" id="7306411">:</span>&nbsp;<span class="op" id="7306413">{</span><span class="string" id="7306414">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7306440">}</span><span class="op" id="7306441">}</span><span class="op" id="7306442">,</span>&nbsp;<span class="builtintype" id="7306444">false</span><span class="op" id="7306449">}</span><span class="op" id="7306450">,</span><br>
<span class="lineno"></span><span class="op" id="7306452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7306455">func</span>&nbsp;<span class="ident" id="7306460">TestParseTime</span><span class="op" id="7306473">(</span><span class="ident" id="7306474">t</span>&nbsp;<span class="op" id="7306476">*</span><span class="ident" id="7306477">testing</span><span class="op" id="7306484">.</span><span class="ident" id="7306485">T</span><span class="op" id="7306486">)</span>&nbsp;<span class="op" id="7306488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306491">expect</span>&nbsp;<span class="op" id="7306498">:=</span>&nbsp;<span class="ident" id="7306501">time</span><span class="op" id="7306505">.</span><span class="ident" id="7306506">Date</span><span class="op" id="7306510">(</span><span class="num" id="7306511">1994</span><span class="op" id="7306515">,</span>&nbsp;<span class="num" id="7306517">11</span><span class="op" id="7306519">,</span>&nbsp;<span class="num" id="7306521">6</span><span class="op" id="7306522">,</span>&nbsp;<span class="num" id="7306524">8</span><span class="op" id="7306525">,</span>&nbsp;<span class="num" id="7306527">49</span><span class="op" id="7306529">,</span>&nbsp;<span class="num" id="7306531">37</span><span class="op" id="7306533">,</span>&nbsp;<span class="num" id="7306535">0</span><span class="op" id="7306536">,</span>&nbsp;<span class="ident" id="7306538">time</span><span class="op" id="7306542">.</span><span class="ident" id="7306543">UTC</span><span class="op" id="7306546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306549">for</span>&nbsp;<span class="ident" id="7306553">i</span><span class="op" id="7306554">,</span>&nbsp;<span class="ident" id="7306556">test</span>&nbsp;<span class="op" id="7306561">:=</span>&nbsp;<span class="keyword" id="7306564">range</span>&nbsp;<span class="ident" id="7306570">parseTimeTests</span>&nbsp;<span class="op" id="7306585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306589">d</span><span class="op" id="7306590">,</span>&nbsp;<span class="ident" id="7306592">err</span>&nbsp;<span class="op" id="7306596">:=</span>&nbsp;<span class="ident" id="7306599">ParseTime</span><span class="op" id="7306608">(</span><span class="ident" id="7306609">test</span><span class="op" id="7306613">.</span><span class="ident" id="7306614">h</span><span class="op" id="7306615">.</span><span class="ident" id="7306616">Get</span><span class="op" id="7306619">(</span><span class="string" id="7306620">&#34;Date&#34;</span><span class="op" id="7306626">)</span><span class="op" id="7306627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306631">if</span>&nbsp;<span class="ident" id="7306634">err</span>&nbsp;<span class="op" id="7306638">!=</span>&nbsp;<span class="ident" id="7306641">nil</span>&nbsp;<span class="op" id="7306645">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306650">if</span>&nbsp;<span class="op" id="7306653">!</span><span class="ident" id="7306654">test</span><span class="op" id="7306658">.</span><span class="ident" id="7306659">err</span>&nbsp;<span class="op" id="7306663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306669">t</span><span class="op" id="7306670">.</span><span class="ident" id="7306671">Errorf</span><span class="op" id="7306677">(</span><span class="string" id="7306678">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7306698">,</span>&nbsp;<span class="ident" id="7306700">i</span><span class="op" id="7306701">,</span>&nbsp;<span class="ident" id="7306703">err</span><span class="op" id="7306706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306716">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306727">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306731">if</span>&nbsp;<span class="ident" id="7306734">test</span><span class="op" id="7306738">.</span><span class="ident" id="7306739">err</span>&nbsp;<span class="op" id="7306743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306748">t</span><span class="op" id="7306749">.</span><span class="ident" id="7306750">Errorf</span><span class="op" id="7306756">(</span><span class="string" id="7306757">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7306777">,</span>&nbsp;<span class="ident" id="7306779">i</span><span class="op" id="7306780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306785">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306800">if</span>&nbsp;<span class="op" id="7306803">!</span><span class="ident" id="7306804">expect</span><span class="op" id="7306810">.</span><span class="ident" id="7306811">Equal</span><span class="op" id="7306816">(</span><span class="ident" id="7306817">d</span><span class="op" id="7306818">)</span>&nbsp;<span class="op" id="7306820">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306825">t</span><span class="op" id="7306826">.</span><span class="ident" id="7306827">Errorf</span><span class="op" id="7306833">(</span><span class="string" id="7306834">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7306860">,</span>&nbsp;<span class="ident" id="7306862">i</span><span class="op" id="7306863">,</span>&nbsp;<span class="ident" id="7306865">d</span><span class="op" id="7306866">,</span>&nbsp;<span class="ident" id="7306868">expect</span><span class="op" id="7306874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306881">}</span><br>
<span class="lineno"></span><span class="op" id="7306883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7306886">type</span>&nbsp;<span class="ident" id="7306891">hasTokenTest</span>&nbsp;<span class="keyword" id="7306904">struct</span>&nbsp;<span class="op" id="7306911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306914">header</span>&nbsp;<span class="builtintype" id="7306921">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306929">token</span>&nbsp;&nbsp;<span class="builtintype" id="7306936">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306944">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7306951">bool</span><br>
<span class="lineno"></span><span class="op" id="7306956">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7306959">var</span>&nbsp;<span class="ident" id="7306963">hasTokenTests</span>&nbsp;<span class="op" id="7306977">=</span>&nbsp;<span class="op" id="7306979">[</span><span class="op" id="7306980">]</span><span class="ident" id="7306981">hasTokenTest</span><span class="op" id="7306993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306996">{</span><span class="string" id="7306997">&#34;&#34;</span><span class="op" id="7306999">,</span>&nbsp;<span class="string" id="7307001">&#34;&#34;</span><span class="op" id="7307003">,</span>&nbsp;<span class="builtintype" id="7307005">false</span><span class="op" id="7307010">}</span><span class="op" id="7307011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307014">{</span><span class="string" id="7307015">&#34;&#34;</span><span class="op" id="7307017">,</span>&nbsp;<span class="string" id="7307019">&#34;foo&#34;</span><span class="op" id="7307024">,</span>&nbsp;<span class="builtintype" id="7307026">false</span><span class="op" id="7307031">}</span><span class="op" id="7307032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307035">{</span><span class="string" id="7307036">&#34;foo&#34;</span><span class="op" id="7307041">,</span>&nbsp;<span class="string" id="7307043">&#34;foo&#34;</span><span class="op" id="7307048">,</span>&nbsp;<span class="builtintype" id="7307050">true</span><span class="op" id="7307054">}</span><span class="op" id="7307055">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307058">{</span><span class="string" id="7307059">&#34;foo&nbsp;&#34;</span><span class="op" id="7307065">,</span>&nbsp;<span class="string" id="7307067">&#34;foo&#34;</span><span class="op" id="7307072">,</span>&nbsp;<span class="builtintype" id="7307074">true</span><span class="op" id="7307078">}</span><span class="op" id="7307079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307082">{</span><span class="string" id="7307083">&#34;&nbsp;foo&#34;</span><span class="op" id="7307089">,</span>&nbsp;<span class="string" id="7307091">&#34;foo&#34;</span><span class="op" id="7307096">,</span>&nbsp;<span class="builtintype" id="7307098">true</span><span class="op" id="7307102">}</span><span class="op" id="7307103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307106">{</span><span class="string" id="7307107">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7307114">,</span>&nbsp;<span class="string" id="7307116">&#34;foo&#34;</span><span class="op" id="7307121">,</span>&nbsp;<span class="builtintype" id="7307123">true</span><span class="op" id="7307127">}</span><span class="op" id="7307128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307131">{</span><span class="string" id="7307132">&#34;foo,bar&#34;</span><span class="op" id="7307141">,</span>&nbsp;<span class="string" id="7307143">&#34;foo&#34;</span><span class="op" id="7307148">,</span>&nbsp;<span class="builtintype" id="7307150">true</span><span class="op" id="7307154">}</span><span class="op" id="7307155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307158">{</span><span class="string" id="7307159">&#34;bar,foo&#34;</span><span class="op" id="7307168">,</span>&nbsp;<span class="string" id="7307170">&#34;foo&#34;</span><span class="op" id="7307175">,</span>&nbsp;<span class="builtintype" id="7307177">true</span><span class="op" id="7307181">}</span><span class="op" id="7307182">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307185">{</span><span class="string" id="7307186">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7307196">,</span>&nbsp;<span class="string" id="7307198">&#34;foo&#34;</span><span class="op" id="7307203">,</span>&nbsp;<span class="builtintype" id="7307205">true</span><span class="op" id="7307209">}</span><span class="op" id="7307210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307213">{</span><span class="string" id="7307214">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7307228">,</span>&nbsp;<span class="string" id="7307230">&#34;foo&#34;</span><span class="op" id="7307235">,</span>&nbsp;<span class="builtintype" id="7307237">true</span><span class="op" id="7307241">}</span><span class="op" id="7307242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307245">{</span><span class="string" id="7307246">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7307260">,</span>&nbsp;<span class="string" id="7307262">&#34;foo&#34;</span><span class="op" id="7307267">,</span>&nbsp;<span class="builtintype" id="7307269">true</span><span class="op" id="7307273">}</span><span class="op" id="7307274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307277">{</span><span class="string" id="7307278">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7307292">,</span>&nbsp;<span class="string" id="7307294">&#34;foo&#34;</span><span class="op" id="7307299">,</span>&nbsp;<span class="builtintype" id="7307301">true</span><span class="op" id="7307305">}</span><span class="op" id="7307306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307309">{</span><span class="string" id="7307310">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7307325">,</span>&nbsp;<span class="string" id="7307327">&#34;foo&#34;</span><span class="op" id="7307332">,</span>&nbsp;<span class="builtintype" id="7307334">true</span><span class="op" id="7307338">}</span><span class="op" id="7307339">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307342">{</span><span class="string" id="7307343">&#34;FOO&#34;</span><span class="op" id="7307348">,</span>&nbsp;<span class="string" id="7307350">&#34;foo&#34;</span><span class="op" id="7307355">,</span>&nbsp;<span class="builtintype" id="7307357">true</span><span class="op" id="7307361">}</span><span class="op" id="7307362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307365">{</span><span class="string" id="7307366">&#34;FOO&nbsp;&#34;</span><span class="op" id="7307372">,</span>&nbsp;<span class="string" id="7307374">&#34;foo&#34;</span><span class="op" id="7307379">,</span>&nbsp;<span class="builtintype" id="7307381">true</span><span class="op" id="7307385">}</span><span class="op" id="7307386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307389">{</span><span class="string" id="7307390">&#34;&nbsp;FOO&#34;</span><span class="op" id="7307396">,</span>&nbsp;<span class="string" id="7307398">&#34;foo&#34;</span><span class="op" id="7307403">,</span>&nbsp;<span class="builtintype" id="7307405">true</span><span class="op" id="7307409">}</span><span class="op" id="7307410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307413">{</span><span class="string" id="7307414">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7307421">,</span>&nbsp;<span class="string" id="7307423">&#34;foo&#34;</span><span class="op" id="7307428">,</span>&nbsp;<span class="builtintype" id="7307430">true</span><span class="op" id="7307434">}</span><span class="op" id="7307435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307438">{</span><span class="string" id="7307439">&#34;FOO,BAR&#34;</span><span class="op" id="7307448">,</span>&nbsp;<span class="string" id="7307450">&#34;foo&#34;</span><span class="op" id="7307455">,</span>&nbsp;<span class="builtintype" id="7307457">true</span><span class="op" id="7307461">}</span><span class="op" id="7307462">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307465">{</span><span class="string" id="7307466">&#34;BAR,FOO&#34;</span><span class="op" id="7307475">,</span>&nbsp;<span class="string" id="7307477">&#34;foo&#34;</span><span class="op" id="7307482">,</span>&nbsp;<span class="builtintype" id="7307484">true</span><span class="op" id="7307488">}</span><span class="op" id="7307489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307492">{</span><span class="string" id="7307493">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7307503">,</span>&nbsp;<span class="string" id="7307505">&#34;foo&#34;</span><span class="op" id="7307510">,</span>&nbsp;<span class="builtintype" id="7307512">true</span><span class="op" id="7307516">}</span><span class="op" id="7307517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307520">{</span><span class="string" id="7307521">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7307535">,</span>&nbsp;<span class="string" id="7307537">&#34;foo&#34;</span><span class="op" id="7307542">,</span>&nbsp;<span class="builtintype" id="7307544">true</span><span class="op" id="7307548">}</span><span class="op" id="7307549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307552">{</span><span class="string" id="7307553">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7307567">,</span>&nbsp;<span class="string" id="7307569">&#34;foo&#34;</span><span class="op" id="7307574">,</span>&nbsp;<span class="builtintype" id="7307576">true</span><span class="op" id="7307580">}</span><span class="op" id="7307581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307584">{</span><span class="string" id="7307585">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7307599">,</span>&nbsp;<span class="string" id="7307601">&#34;foo&#34;</span><span class="op" id="7307606">,</span>&nbsp;<span class="builtintype" id="7307608">true</span><span class="op" id="7307612">}</span><span class="op" id="7307613">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307616">{</span><span class="string" id="7307617">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7307632">,</span>&nbsp;<span class="string" id="7307634">&#34;foo&#34;</span><span class="op" id="7307639">,</span>&nbsp;<span class="builtintype" id="7307641">true</span><span class="op" id="7307645">}</span><span class="op" id="7307646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307649">{</span><span class="string" id="7307650">&#34;foobar&#34;</span><span class="op" id="7307658">,</span>&nbsp;<span class="string" id="7307660">&#34;foo&#34;</span><span class="op" id="7307665">,</span>&nbsp;<span class="builtintype" id="7307667">false</span><span class="op" id="7307672">}</span><span class="op" id="7307673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307676">{</span><span class="string" id="7307677">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7307686">,</span>&nbsp;<span class="string" id="7307688">&#34;foo&#34;</span><span class="op" id="7307693">,</span>&nbsp;<span class="builtintype" id="7307695">false</span><span class="op" id="7307700">}</span><span class="op" id="7307701">,</span><br>
<span class="lineno"></span><span class="op" id="7307703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7307706">func</span>&nbsp;<span class="ident" id="7307711">TestHasToken</span><span class="op" id="7307723">(</span><span class="ident" id="7307724">t</span>&nbsp;<span class="op" id="7307726">*</span><span class="ident" id="7307727">testing</span><span class="op" id="7307734">.</span><span class="ident" id="7307735">T</span><span class="op" id="7307736">)</span>&nbsp;<span class="op" id="7307738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307741">for</span>&nbsp;<span class="ident" id="7307745">_</span><span class="op" id="7307746">,</span>&nbsp;<span class="ident" id="7307748">tt</span>&nbsp;<span class="op" id="7307751">:=</span>&nbsp;<span class="keyword" id="7307754">range</span>&nbsp;<span class="ident" id="7307760">hasTokenTests</span>&nbsp;<span class="op" id="7307774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307778">if</span>&nbsp;<span class="ident" id="7307781">hasToken</span><span class="op" id="7307789">(</span><span class="ident" id="7307790">tt</span><span class="op" id="7307792">.</span><span class="ident" id="7307793">header</span><span class="op" id="7307799">,</span>&nbsp;<span class="ident" id="7307801">tt</span><span class="op" id="7307803">.</span><span class="ident" id="7307804">token</span><span class="op" id="7307809">)</span>&nbsp;<span class="op" id="7307811">!=</span>&nbsp;<span class="ident" id="7307814">tt</span><span class="op" id="7307816">.</span><span class="ident" id="7307817">want</span>&nbsp;<span class="op" id="7307822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307827">t</span><span class="op" id="7307828">.</span><span class="ident" id="7307829">Errorf</span><span class="op" id="7307835">(</span><span class="string" id="7307836">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7307868">,</span>&nbsp;<span class="ident" id="7307870">tt</span><span class="op" id="7307872">.</span><span class="ident" id="7307873">header</span><span class="op" id="7307879">,</span>&nbsp;<span class="ident" id="7307881">tt</span><span class="op" id="7307883">.</span><span class="ident" id="7307884">token</span><span class="op" id="7307889">,</span>&nbsp;<span class="op" id="7307891">!</span><span class="ident" id="7307892">tt</span><span class="op" id="7307894">.</span><span class="ident" id="7307895">want</span><span class="op" id="7307899">,</span>&nbsp;<span class="ident" id="7307901">tt</span><span class="op" id="7307903">.</span><span class="ident" id="7307904">want</span><span class="op" id="7307908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307912">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307915">}</span><br>
<span class="lineno"></span><span class="op" id="7307917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7307920">var</span>&nbsp;<span class="ident" id="7307924">testHeader</span>&nbsp;<span class="op" id="7307935">=</span>&nbsp;<span class="ident" id="7307937">Header</span><span class="op" id="7307943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7307946">&#34;Content-Length&#34;</span><span class="op" id="7307962">:</span>&nbsp;<span class="op" id="7307964">{</span><span class="string" id="7307965">&#34;123&#34;</span><span class="op" id="7307970">}</span><span class="op" id="7307971">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7307974">&#34;Content-Type&#34;</span><span class="op" id="7307988">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7307992">{</span><span class="string" id="7307993">&#34;text/plain&#34;</span><span class="op" id="7308005">}</span><span class="op" id="7308006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7308009">&#34;Date&#34;</span><span class="op" id="7308015">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308027">{</span><span class="string" id="7308028">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7308054">}</span><span class="op" id="7308055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7308058">&#34;Server&#34;</span><span class="op" id="7308066">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308076">{</span><span class="ident" id="7308077">DefaultUserAgent</span><span class="op" id="7308093">}</span><span class="op" id="7308094">,</span><br>
<span class="lineno"></span><span class="op" id="7308096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7308099">var</span>&nbsp;<span class="ident" id="7308103">buf</span>&nbsp;<span class="ident" id="7308107">bytes</span><span class="op" id="7308112">.</span><span class="ident" id="7308113">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7308121">func</span>&nbsp;<span class="ident" id="7308126">BenchmarkHeaderWriteSubset</span><span class="op" id="7308152">(</span><span class="ident" id="7308153">b</span>&nbsp;<span class="op" id="7308155">*</span><span class="ident" id="7308156">testing</span><span class="op" id="7308163">.</span><span class="ident" id="7308164">B</span><span class="op" id="7308165">)</span>&nbsp;<span class="op" id="7308167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308170">b</span><span class="op" id="7308171">.</span><span class="ident" id="7308172">ReportAllocs</span><span class="op" id="7308184">(</span><span class="op" id="7308185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308188">for</span>&nbsp;<span class="ident" id="7308192">i</span>&nbsp;<span class="op" id="7308194">:=</span>&nbsp;<span class="num" id="7308197">0</span><span class="op" id="7308198">;</span>&nbsp;<span class="ident" id="7308200">i</span>&nbsp;<span class="op" id="7308202">&lt;</span>&nbsp;<span class="ident" id="7308204">b</span><span class="op" id="7308205">.</span><span class="ident" id="7308206">N</span><span class="op" id="7308207">;</span>&nbsp;<span class="ident" id="7308209">i</span><span class="op" id="7308210">++</span>&nbsp;<span class="op" id="7308213">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308217">buf</span><span class="op" id="7308220">.</span><span class="ident" id="7308221">Reset</span><span class="op" id="7308226">(</span><span class="op" id="7308227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308231">testHeader</span><span class="op" id="7308241">.</span><span class="ident" id="7308242">WriteSubset</span><span class="op" id="7308253">(</span><span class="op" id="7308254">&amp;</span><span class="ident" id="7308255">buf</span><span class="op" id="7308258">,</span>&nbsp;<span class="ident" id="7308260">nil</span><span class="op" id="7308263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308266">}</span><br>
<span class="lineno"></span><span class="op" id="7308268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7308271">func</span>&nbsp;<span class="ident" id="7308276">TestHeaderWriteSubsetAllocs</span><span class="op" id="7308303">(</span><span class="ident" id="7308304">t</span>&nbsp;<span class="op" id="7308306">*</span><span class="ident" id="7308307">testing</span><span class="op" id="7308314">.</span><span class="ident" id="7308315">T</span><span class="op" id="7308316">)</span>&nbsp;<span class="op" id="7308318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308321">if</span>&nbsp;<span class="ident" id="7308324">testing</span><span class="op" id="7308331">.</span><span class="ident" id="7308332">Short</span><span class="op" id="7308337">(</span><span class="op" id="7308338">)</span>&nbsp;<span class="op" id="7308340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308344">t</span><span class="op" id="7308345">.</span><span class="ident" id="7308346">Skip</span><span class="op" id="7308350">(</span><span class="string" id="7308351">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7308386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308392">if</span>&nbsp;<span class="ident" id="7308395">raceEnabled</span>&nbsp;<span class="op" id="7308407">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308411">t</span><span class="op" id="7308412">.</span><span class="ident" id="7308413">Skip</span><span class="op" id="7308417">(</span><span class="string" id="7308418">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7308453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308459">if</span>&nbsp;<span class="ident" id="7308462">runtime</span><span class="op" id="7308469">.</span><span class="ident" id="7308470">GOMAXPROCS</span><span class="op" id="7308480">(</span><span class="num" id="7308481">0</span><span class="op" id="7308482">)</span>&nbsp;<span class="op" id="7308484">&gt;</span>&nbsp;<span class="num" id="7308486">1</span>&nbsp;<span class="op" id="7308488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308492">t</span><span class="op" id="7308493">.</span><span class="ident" id="7308494">Skip</span><span class="op" id="7308498">(</span><span class="string" id="7308499">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7308523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308526">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308529">n</span>&nbsp;<span class="op" id="7308531">:=</span>&nbsp;<span class="ident" id="7308534">testing</span><span class="op" id="7308541">.</span><span class="ident" id="7308542">AllocsPerRun</span><span class="op" id="7308554">(</span><span class="num" id="7308555">100</span><span class="op" id="7308558">,</span>&nbsp;<span class="keyword" id="7308560">func</span><span class="op" id="7308564">(</span><span class="op" id="7308565">)</span>&nbsp;<span class="op" id="7308567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308571">buf</span><span class="op" id="7308574">.</span><span class="ident" id="7308575">Reset</span><span class="op" id="7308580">(</span><span class="op" id="7308581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308585">testHeader</span><span class="op" id="7308595">.</span><span class="ident" id="7308596">WriteSubset</span><span class="op" id="7308607">(</span><span class="op" id="7308608">&amp;</span><span class="ident" id="7308609">buf</span><span class="op" id="7308612">,</span>&nbsp;<span class="ident" id="7308614">nil</span><span class="op" id="7308617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308620">}</span><span class="op" id="7308621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308624">if</span>&nbsp;<span class="ident" id="7308627">n</span>&nbsp;<span class="op" id="7308629">&gt;</span>&nbsp;<span class="num" id="7308631">0</span>&nbsp;<span class="op" id="7308633">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308637">t</span><span class="op" id="7308638">.</span><span class="ident" id="7308639">Errorf</span><span class="op" id="7308645">(</span><span class="string" id="7308646">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7308667">,</span>&nbsp;<span class="ident" id="7308669">n</span><span class="op" id="7308670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308673">}</span><br>
<span class="lineno"></span><span class="op" id="7308675">}</span>
</div>
</body>
</html>
