<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7843855">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7843910">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7843964">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7844015">package</span>&nbsp;<span class="ident" id="7844023">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7844028">import</span>&nbsp;<span class="op" id="7844035">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7844038">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7844045">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7844051">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7844062">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7844072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7844075">var</span>&nbsp;<span class="ident" id="7844079">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="7844106">=</span>&nbsp;<span class="op" id="7844108">[</span><span class="op" id="7844109">]</span><span class="keyword" id="7844110">struct</span>&nbsp;<span class="op" id="7844117">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844120">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7844126">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844134">gaddr</span>&nbsp;<span class="op" id="7844140">*</span><span class="ident" id="7844141">UDPAddr</span>&nbsp;<span class="comment" id="7844149">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="7844165">}</span><span class="op" id="7844166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844169">{</span><span class="string" id="7844170">&#34;udp&#34;</span><span class="op" id="7844175">,</span>&nbsp;<span class="op" id="7844177">&amp;</span><span class="ident" id="7844178">UDPAddr</span><span class="op" id="7844185">{</span><span class="ident" id="7844186">IP</span><span class="op" id="7844188">:</span>&nbsp;<span class="ident" id="7844190">IPv4</span><span class="op" id="7844194">(</span><span class="num" id="7844195">224</span><span class="op" id="7844198">,</span>&nbsp;<span class="num" id="7844200">0</span><span class="op" id="7844201">,</span>&nbsp;<span class="num" id="7844203">0</span><span class="op" id="7844204">,</span>&nbsp;<span class="num" id="7844206">254</span><span class="op" id="7844209">)</span><span class="op" id="7844210">,</span>&nbsp;<span class="ident" id="7844212">Port</span><span class="op" id="7844216">:</span>&nbsp;<span class="num" id="7844218">12345</span><span class="op" id="7844223">}</span><span class="op" id="7844224">}</span><span class="op" id="7844225">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844229">{</span><span class="string" id="7844230">&#34;udp4&#34;</span><span class="op" id="7844236">,</span>&nbsp;<span class="op" id="7844238">&amp;</span><span class="ident" id="7844239">UDPAddr</span><span class="op" id="7844246">{</span><span class="ident" id="7844247">IP</span><span class="op" id="7844249">:</span>&nbsp;<span class="ident" id="7844251">IPv4</span><span class="op" id="7844255">(</span><span class="num" id="7844256">224</span><span class="op" id="7844259">,</span>&nbsp;<span class="num" id="7844261">0</span><span class="op" id="7844262">,</span>&nbsp;<span class="num" id="7844264">0</span><span class="op" id="7844265">,</span>&nbsp;<span class="num" id="7844267">254</span><span class="op" id="7844270">)</span><span class="op" id="7844271">,</span>&nbsp;<span class="ident" id="7844273">Port</span><span class="op" id="7844277">:</span>&nbsp;<span class="num" id="7844279">12345</span><span class="op" id="7844284">}</span><span class="op" id="7844285">}</span><span class="op" id="7844286">,</span><br>
<span class="lineno"></span><span class="op" id="7844288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7844291">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="7844361">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="7844432">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="7844441">func</span>&nbsp;<span class="ident" id="7844446">TestIPv4MulticastListener</span><span class="op" id="7844471">(</span><span class="ident" id="7844472">t</span>&nbsp;<span class="op" id="7844474">*</span><span class="ident" id="7844475">testing</span><span class="op" id="7844482">.</span><span class="ident" id="7844483">T</span><span class="op" id="7844484">)</span>&nbsp;<span class="op" id="7844486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844489">switch</span>&nbsp;<span class="ident" id="7844496">runtime</span><span class="op" id="7844503">.</span><span class="ident" id="7844504">GOOS</span>&nbsp;<span class="op" id="7844509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844512">case</span>&nbsp;<span class="string" id="7844517">&#34;android&#34;</span><span class="op" id="7844526">,</span>&nbsp;<span class="string" id="7844528">&#34;nacl&#34;</span><span class="op" id="7844534">,</span>&nbsp;<span class="string" id="7844536">&#34;plan9&#34;</span><span class="op" id="7844543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844547">t</span><span class="op" id="7844548">.</span><span class="ident" id="7844549">Skipf</span><span class="op" id="7844554">(</span><span class="string" id="7844555">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7844576">,</span>&nbsp;<span class="ident" id="7844578">runtime</span><span class="op" id="7844585">.</span><span class="ident" id="7844586">GOOS</span><span class="op" id="7844590">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844593">case</span>&nbsp;<span class="string" id="7844598">&#34;solaris&#34;</span><span class="op" id="7844607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844611">t</span><span class="op" id="7844612">.</span><span class="ident" id="7844613">Skipf</span><span class="op" id="7844618">(</span><span class="string" id="7844619">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="7844661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844668">closer</span>&nbsp;<span class="op" id="7844675">:=</span>&nbsp;<span class="keyword" id="7844678">func</span><span class="op" id="7844682">(</span><span class="ident" id="7844683">cs</span>&nbsp;<span class="op" id="7844686">[</span><span class="op" id="7844687">]</span><span class="op" id="7844688">*</span><span class="ident" id="7844689">UDPConn</span><span class="op" id="7844696">)</span>&nbsp;<span class="op" id="7844698">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844702">for</span>&nbsp;<span class="ident" id="7844706">_</span><span class="op" id="7844707">,</span>&nbsp;<span class="ident" id="7844709">c</span>&nbsp;<span class="op" id="7844711">:=</span>&nbsp;<span class="keyword" id="7844714">range</span>&nbsp;<span class="ident" id="7844720">cs</span>&nbsp;<span class="op" id="7844723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844728">if</span>&nbsp;<span class="ident" id="7844731">c</span>&nbsp;<span class="op" id="7844733">!=</span>&nbsp;<span class="ident" id="7844736">nil</span>&nbsp;<span class="op" id="7844740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844746">c</span><span class="op" id="7844747">.</span><span class="ident" id="7844748">Close</span><span class="op" id="7844753">(</span><span class="op" id="7844754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844763">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844770">for</span>&nbsp;<span class="ident" id="7844774">_</span><span class="op" id="7844775">,</span>&nbsp;<span class="ident" id="7844777">ifi</span>&nbsp;<span class="op" id="7844781">:=</span>&nbsp;<span class="keyword" id="7844784">range</span>&nbsp;<span class="op" id="7844790">[</span><span class="op" id="7844791">]</span><span class="op" id="7844792">*</span><span class="ident" id="7844793">Interface</span><span class="op" id="7844802">{</span><span class="ident" id="7844803">loopbackInterface</span><span class="op" id="7844820">(</span><span class="op" id="7844821">)</span><span class="op" id="7844822">,</span>&nbsp;<span class="ident" id="7844824">nil</span><span class="op" id="7844827">}</span>&nbsp;<span class="op" id="7844829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844833">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844889">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844942">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844992">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845044">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845062">if</span>&nbsp;<span class="ident" id="7845065">ifi</span>&nbsp;<span class="op" id="7845069">==</span>&nbsp;<span class="ident" id="7845072">nil</span>&nbsp;<span class="op" id="7845076">&amp;&amp;</span>&nbsp;<span class="op" id="7845079">!</span><span class="op" id="7845080">*</span><span class="ident" id="7845081">testExternal</span>&nbsp;<span class="op" id="7845094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845099">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845114">for</span>&nbsp;<span class="ident" id="7845118">_</span><span class="op" id="7845119">,</span>&nbsp;<span class="ident" id="7845121">tt</span>&nbsp;<span class="op" id="7845124">:=</span>&nbsp;<span class="keyword" id="7845127">range</span>&nbsp;<span class="ident" id="7845133">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="7845160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845165">var</span>&nbsp;<span class="ident" id="7845169">err</span>&nbsp;<span class="builtintype" id="7845173">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845182">cs</span>&nbsp;<span class="op" id="7845185">:=</span>&nbsp;<span class="builtinfunc" id="7845188">make</span><span class="op" id="7845192">(</span><span class="op" id="7845193">[</span><span class="op" id="7845194">]</span><span class="op" id="7845195">*</span><span class="ident" id="7845196">UDPConn</span><span class="op" id="7845203">,</span>&nbsp;<span class="num" id="7845205">2</span><span class="op" id="7845206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845211">if</span>&nbsp;<span class="ident" id="7845214">cs</span><span class="op" id="7845216">[</span><span class="num" id="7845217">0</span><span class="op" id="7845218">]</span><span class="op" id="7845219">,</span>&nbsp;<span class="ident" id="7845221">err</span>&nbsp;<span class="op" id="7845225">=</span>&nbsp;<span class="ident" id="7845227">ListenMulticastUDP</span><span class="op" id="7845245">(</span><span class="ident" id="7845246">tt</span><span class="op" id="7845248">.</span><span class="ident" id="7845249">net</span><span class="op" id="7845252">,</span>&nbsp;<span class="ident" id="7845254">ifi</span><span class="op" id="7845257">,</span>&nbsp;<span class="ident" id="7845259">tt</span><span class="op" id="7845261">.</span><span class="ident" id="7845262">gaddr</span><span class="op" id="7845267">)</span><span class="op" id="7845268">;</span>&nbsp;<span class="ident" id="7845270">err</span>&nbsp;<span class="op" id="7845274">!=</span>&nbsp;<span class="ident" id="7845277">nil</span>&nbsp;<span class="op" id="7845281">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845287">t</span><span class="op" id="7845288">.</span><span class="ident" id="7845289">Fatalf</span><span class="op" id="7845295">(</span><span class="string" id="7845296">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7845339">,</span>&nbsp;<span class="ident" id="7845341">ifi</span><span class="op" id="7845344">,</span>&nbsp;<span class="ident" id="7845346">err</span><span class="op" id="7845349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845359">if</span>&nbsp;<span class="ident" id="7845362">err</span>&nbsp;<span class="op" id="7845366">:=</span>&nbsp;<span class="ident" id="7845369">checkMulticastListener</span><span class="op" id="7845391">(</span><span class="ident" id="7845392">cs</span><span class="op" id="7845394">[</span><span class="num" id="7845395">0</span><span class="op" id="7845396">]</span><span class="op" id="7845397">,</span>&nbsp;<span class="ident" id="7845399">tt</span><span class="op" id="7845401">.</span><span class="ident" id="7845402">gaddr</span><span class="op" id="7845407">.</span><span class="ident" id="7845408">IP</span><span class="op" id="7845410">)</span><span class="op" id="7845411">;</span>&nbsp;<span class="ident" id="7845413">err</span>&nbsp;<span class="op" id="7845417">!=</span>&nbsp;<span class="ident" id="7845420">nil</span>&nbsp;<span class="op" id="7845424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845430">closer</span><span class="op" id="7845436">(</span><span class="ident" id="7845437">cs</span><span class="op" id="7845439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845445">t</span><span class="op" id="7845446">.</span><span class="ident" id="7845447">Fatal</span><span class="op" id="7845452">(</span><span class="ident" id="7845453">err</span><span class="op" id="7845456">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845466">if</span>&nbsp;<span class="ident" id="7845469">cs</span><span class="op" id="7845471">[</span><span class="num" id="7845472">1</span><span class="op" id="7845473">]</span><span class="op" id="7845474">,</span>&nbsp;<span class="ident" id="7845476">err</span>&nbsp;<span class="op" id="7845480">=</span>&nbsp;<span class="ident" id="7845482">ListenMulticastUDP</span><span class="op" id="7845500">(</span><span class="ident" id="7845501">tt</span><span class="op" id="7845503">.</span><span class="ident" id="7845504">net</span><span class="op" id="7845507">,</span>&nbsp;<span class="ident" id="7845509">ifi</span><span class="op" id="7845512">,</span>&nbsp;<span class="ident" id="7845514">tt</span><span class="op" id="7845516">.</span><span class="ident" id="7845517">gaddr</span><span class="op" id="7845522">)</span><span class="op" id="7845523">;</span>&nbsp;<span class="ident" id="7845525">err</span>&nbsp;<span class="op" id="7845529">!=</span>&nbsp;<span class="ident" id="7845532">nil</span>&nbsp;<span class="op" id="7845536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845542">closer</span><span class="op" id="7845548">(</span><span class="ident" id="7845549">cs</span><span class="op" id="7845551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845557">t</span><span class="op" id="7845558">.</span><span class="ident" id="7845559">Fatalf</span><span class="op" id="7845565">(</span><span class="string" id="7845566">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7845610">,</span>&nbsp;<span class="ident" id="7845612">ifi</span><span class="op" id="7845615">,</span>&nbsp;<span class="ident" id="7845617">err</span><span class="op" id="7845620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845625">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845630">if</span>&nbsp;<span class="ident" id="7845633">err</span>&nbsp;<span class="op" id="7845637">:=</span>&nbsp;<span class="ident" id="7845640">checkMulticastListener</span><span class="op" id="7845662">(</span><span class="ident" id="7845663">cs</span><span class="op" id="7845665">[</span><span class="num" id="7845666">1</span><span class="op" id="7845667">]</span><span class="op" id="7845668">,</span>&nbsp;<span class="ident" id="7845670">tt</span><span class="op" id="7845672">.</span><span class="ident" id="7845673">gaddr</span><span class="op" id="7845678">.</span><span class="ident" id="7845679">IP</span><span class="op" id="7845681">)</span><span class="op" id="7845682">;</span>&nbsp;<span class="ident" id="7845684">err</span>&nbsp;<span class="op" id="7845688">!=</span>&nbsp;<span class="ident" id="7845691">nil</span>&nbsp;<span class="op" id="7845695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845701">closer</span><span class="op" id="7845707">(</span><span class="ident" id="7845708">cs</span><span class="op" id="7845710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845716">t</span><span class="op" id="7845717">.</span><span class="ident" id="7845718">Fatal</span><span class="op" id="7845723">(</span><span class="ident" id="7845724">err</span><span class="op" id="7845727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845737">closer</span><span class="op" id="7845743">(</span><span class="ident" id="7845744">cs</span><span class="op" id="7845746">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845753">}</span><br>
<span class="lineno"></span><span class="op" id="7845755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7845758">var</span>&nbsp;<span class="ident" id="7845762">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="7845789">=</span>&nbsp;<span class="op" id="7845791">[</span><span class="op" id="7845792">]</span><span class="keyword" id="7845793">struct</span>&nbsp;<span class="op" id="7845800">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845803">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7845809">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845817">gaddr</span>&nbsp;<span class="op" id="7845823">*</span><span class="ident" id="7845824">UDPAddr</span>&nbsp;<span class="comment" id="7845832">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="7845848">}</span><span class="op" id="7845849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845852">{</span><span class="string" id="7845853">&#34;udp&#34;</span><span class="op" id="7845858">,</span>&nbsp;<span class="op" id="7845860">&amp;</span><span class="ident" id="7845861">UDPAddr</span><span class="op" id="7845868">{</span><span class="ident" id="7845869">IP</span><span class="op" id="7845871">:</span>&nbsp;<span class="ident" id="7845873">ParseIP</span><span class="op" id="7845880">(</span><span class="string" id="7845881">&#34;ff01::114&#34;</span><span class="op" id="7845892">)</span><span class="op" id="7845893">,</span>&nbsp;<span class="ident" id="7845895">Port</span><span class="op" id="7845899">:</span>&nbsp;<span class="num" id="7845901">12345</span><span class="op" id="7845906">}</span><span class="op" id="7845907">}</span><span class="op" id="7845908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845911">{</span><span class="string" id="7845912">&#34;udp&#34;</span><span class="op" id="7845917">,</span>&nbsp;<span class="op" id="7845919">&amp;</span><span class="ident" id="7845920">UDPAddr</span><span class="op" id="7845927">{</span><span class="ident" id="7845928">IP</span><span class="op" id="7845930">:</span>&nbsp;<span class="ident" id="7845932">ParseIP</span><span class="op" id="7845939">(</span><span class="string" id="7845940">&#34;ff02::114&#34;</span><span class="op" id="7845951">)</span><span class="op" id="7845952">,</span>&nbsp;<span class="ident" id="7845954">Port</span><span class="op" id="7845958">:</span>&nbsp;<span class="num" id="7845960">12345</span><span class="op" id="7845965">}</span><span class="op" id="7845966">}</span><span class="op" id="7845967">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845970">{</span><span class="string" id="7845971">&#34;udp&#34;</span><span class="op" id="7845976">,</span>&nbsp;<span class="op" id="7845978">&amp;</span><span class="ident" id="7845979">UDPAddr</span><span class="op" id="7845986">{</span><span class="ident" id="7845987">IP</span><span class="op" id="7845989">:</span>&nbsp;<span class="ident" id="7845991">ParseIP</span><span class="op" id="7845998">(</span><span class="string" id="7845999">&#34;ff04::114&#34;</span><span class="op" id="7846010">)</span><span class="op" id="7846011">,</span>&nbsp;<span class="ident" id="7846013">Port</span><span class="op" id="7846017">:</span>&nbsp;<span class="num" id="7846019">12345</span><span class="op" id="7846024">}</span><span class="op" id="7846025">}</span><span class="op" id="7846026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846029">{</span><span class="string" id="7846030">&#34;udp&#34;</span><span class="op" id="7846035">,</span>&nbsp;<span class="op" id="7846037">&amp;</span><span class="ident" id="7846038">UDPAddr</span><span class="op" id="7846045">{</span><span class="ident" id="7846046">IP</span><span class="op" id="7846048">:</span>&nbsp;<span class="ident" id="7846050">ParseIP</span><span class="op" id="7846057">(</span><span class="string" id="7846058">&#34;ff05::114&#34;</span><span class="op" id="7846069">)</span><span class="op" id="7846070">,</span>&nbsp;<span class="ident" id="7846072">Port</span><span class="op" id="7846076">:</span>&nbsp;<span class="num" id="7846078">12345</span><span class="op" id="7846083">}</span><span class="op" id="7846084">}</span><span class="op" id="7846085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846088">{</span><span class="string" id="7846089">&#34;udp&#34;</span><span class="op" id="7846094">,</span>&nbsp;<span class="op" id="7846096">&amp;</span><span class="ident" id="7846097">UDPAddr</span><span class="op" id="7846104">{</span><span class="ident" id="7846105">IP</span><span class="op" id="7846107">:</span>&nbsp;<span class="ident" id="7846109">ParseIP</span><span class="op" id="7846116">(</span><span class="string" id="7846117">&#34;ff08::114&#34;</span><span class="op" id="7846128">)</span><span class="op" id="7846129">,</span>&nbsp;<span class="ident" id="7846131">Port</span><span class="op" id="7846135">:</span>&nbsp;<span class="num" id="7846137">12345</span><span class="op" id="7846142">}</span><span class="op" id="7846143">}</span><span class="op" id="7846144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846147">{</span><span class="string" id="7846148">&#34;udp&#34;</span><span class="op" id="7846153">,</span>&nbsp;<span class="op" id="7846155">&amp;</span><span class="ident" id="7846156">UDPAddr</span><span class="op" id="7846163">{</span><span class="ident" id="7846164">IP</span><span class="op" id="7846166">:</span>&nbsp;<span class="ident" id="7846168">ParseIP</span><span class="op" id="7846175">(</span><span class="string" id="7846176">&#34;ff0e::114&#34;</span><span class="op" id="7846187">)</span><span class="op" id="7846188">,</span>&nbsp;<span class="ident" id="7846190">Port</span><span class="op" id="7846194">:</span>&nbsp;<span class="num" id="7846196">12345</span><span class="op" id="7846201">}</span><span class="op" id="7846202">}</span><span class="op" id="7846203">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846207">{</span><span class="string" id="7846208">&#34;udp6&#34;</span><span class="op" id="7846214">,</span>&nbsp;<span class="op" id="7846216">&amp;</span><span class="ident" id="7846217">UDPAddr</span><span class="op" id="7846224">{</span><span class="ident" id="7846225">IP</span><span class="op" id="7846227">:</span>&nbsp;<span class="ident" id="7846229">ParseIP</span><span class="op" id="7846236">(</span><span class="string" id="7846237">&#34;ff01::114&#34;</span><span class="op" id="7846248">)</span><span class="op" id="7846249">,</span>&nbsp;<span class="ident" id="7846251">Port</span><span class="op" id="7846255">:</span>&nbsp;<span class="num" id="7846257">12345</span><span class="op" id="7846262">}</span><span class="op" id="7846263">}</span><span class="op" id="7846264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846267">{</span><span class="string" id="7846268">&#34;udp6&#34;</span><span class="op" id="7846274">,</span>&nbsp;<span class="op" id="7846276">&amp;</span><span class="ident" id="7846277">UDPAddr</span><span class="op" id="7846284">{</span><span class="ident" id="7846285">IP</span><span class="op" id="7846287">:</span>&nbsp;<span class="ident" id="7846289">ParseIP</span><span class="op" id="7846296">(</span><span class="string" id="7846297">&#34;ff02::114&#34;</span><span class="op" id="7846308">)</span><span class="op" id="7846309">,</span>&nbsp;<span class="ident" id="7846311">Port</span><span class="op" id="7846315">:</span>&nbsp;<span class="num" id="7846317">12345</span><span class="op" id="7846322">}</span><span class="op" id="7846323">}</span><span class="op" id="7846324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846327">{</span><span class="string" id="7846328">&#34;udp6&#34;</span><span class="op" id="7846334">,</span>&nbsp;<span class="op" id="7846336">&amp;</span><span class="ident" id="7846337">UDPAddr</span><span class="op" id="7846344">{</span><span class="ident" id="7846345">IP</span><span class="op" id="7846347">:</span>&nbsp;<span class="ident" id="7846349">ParseIP</span><span class="op" id="7846356">(</span><span class="string" id="7846357">&#34;ff04::114&#34;</span><span class="op" id="7846368">)</span><span class="op" id="7846369">,</span>&nbsp;<span class="ident" id="7846371">Port</span><span class="op" id="7846375">:</span>&nbsp;<span class="num" id="7846377">12345</span><span class="op" id="7846382">}</span><span class="op" id="7846383">}</span><span class="op" id="7846384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846387">{</span><span class="string" id="7846388">&#34;udp6&#34;</span><span class="op" id="7846394">,</span>&nbsp;<span class="op" id="7846396">&amp;</span><span class="ident" id="7846397">UDPAddr</span><span class="op" id="7846404">{</span><span class="ident" id="7846405">IP</span><span class="op" id="7846407">:</span>&nbsp;<span class="ident" id="7846409">ParseIP</span><span class="op" id="7846416">(</span><span class="string" id="7846417">&#34;ff05::114&#34;</span><span class="op" id="7846428">)</span><span class="op" id="7846429">,</span>&nbsp;<span class="ident" id="7846431">Port</span><span class="op" id="7846435">:</span>&nbsp;<span class="num" id="7846437">12345</span><span class="op" id="7846442">}</span><span class="op" id="7846443">}</span><span class="op" id="7846444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846447">{</span><span class="string" id="7846448">&#34;udp6&#34;</span><span class="op" id="7846454">,</span>&nbsp;<span class="op" id="7846456">&amp;</span><span class="ident" id="7846457">UDPAddr</span><span class="op" id="7846464">{</span><span class="ident" id="7846465">IP</span><span class="op" id="7846467">:</span>&nbsp;<span class="ident" id="7846469">ParseIP</span><span class="op" id="7846476">(</span><span class="string" id="7846477">&#34;ff08::114&#34;</span><span class="op" id="7846488">)</span><span class="op" id="7846489">,</span>&nbsp;<span class="ident" id="7846491">Port</span><span class="op" id="7846495">:</span>&nbsp;<span class="num" id="7846497">12345</span><span class="op" id="7846502">}</span><span class="op" id="7846503">}</span><span class="op" id="7846504">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846507">{</span><span class="string" id="7846508">&#34;udp6&#34;</span><span class="op" id="7846514">,</span>&nbsp;<span class="op" id="7846516">&amp;</span><span class="ident" id="7846517">UDPAddr</span><span class="op" id="7846524">{</span><span class="ident" id="7846525">IP</span><span class="op" id="7846527">:</span>&nbsp;<span class="ident" id="7846529">ParseIP</span><span class="op" id="7846536">(</span><span class="string" id="7846537">&#34;ff0e::114&#34;</span><span class="op" id="7846548">)</span><span class="op" id="7846549">,</span>&nbsp;<span class="ident" id="7846551">Port</span><span class="op" id="7846555">:</span>&nbsp;<span class="num" id="7846557">12345</span><span class="op" id="7846562">}</span><span class="op" id="7846563">}</span><span class="op" id="7846564">,</span><br>
<span class="lineno"></span><span class="op" id="7846566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7846569">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="7846639">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="7846710">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="7846719">func</span>&nbsp;<span class="ident" id="7846724">TestIPv6MulticastListener</span><span class="op" id="7846749">(</span><span class="ident" id="7846750">t</span>&nbsp;<span class="op" id="7846752">*</span><span class="ident" id="7846753">testing</span><span class="op" id="7846760">.</span><span class="ident" id="7846761">T</span><span class="op" id="7846762">)</span>&nbsp;<span class="op" id="7846764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846767">switch</span>&nbsp;<span class="ident" id="7846774">runtime</span><span class="op" id="7846781">.</span><span class="ident" id="7846782">GOOS</span>&nbsp;<span class="op" id="7846787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846790">case</span>&nbsp;<span class="string" id="7846795">&#34;plan9&#34;</span><span class="op" id="7846802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846806">t</span><span class="op" id="7846807">.</span><span class="ident" id="7846808">Skipf</span><span class="op" id="7846813">(</span><span class="string" id="7846814">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7846835">,</span>&nbsp;<span class="ident" id="7846837">runtime</span><span class="op" id="7846844">.</span><span class="ident" id="7846845">GOOS</span><span class="op" id="7846849">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846852">case</span>&nbsp;<span class="string" id="7846857">&#34;solaris&#34;</span><span class="op" id="7846866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846870">t</span><span class="op" id="7846871">.</span><span class="ident" id="7846872">Skipf</span><span class="op" id="7846877">(</span><span class="string" id="7846878">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="7846920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846926">if</span>&nbsp;<span class="op" id="7846929">!</span><span class="ident" id="7846930">supportsIPv6</span>&nbsp;<span class="op" id="7846943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846947">t</span><span class="op" id="7846948">.</span><span class="ident" id="7846949">Skip</span><span class="op" id="7846953">(</span><span class="string" id="7846954">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="7846977">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846983">if</span>&nbsp;<span class="ident" id="7846986">os</span><span class="op" id="7846988">.</span><span class="ident" id="7846989">Getuid</span><span class="op" id="7846995">(</span><span class="op" id="7846996">)</span>&nbsp;<span class="op" id="7846998">!=</span>&nbsp;<span class="num" id="7847001">0</span>&nbsp;<span class="op" id="7847003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847007">t</span><span class="op" id="7847008">.</span><span class="ident" id="7847009">Skip</span><span class="op" id="7847013">(</span><span class="string" id="7847014">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="7847043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847050">closer</span>&nbsp;<span class="op" id="7847057">:=</span>&nbsp;<span class="keyword" id="7847060">func</span><span class="op" id="7847064">(</span><span class="ident" id="7847065">cs</span>&nbsp;<span class="op" id="7847068">[</span><span class="op" id="7847069">]</span><span class="op" id="7847070">*</span><span class="ident" id="7847071">UDPConn</span><span class="op" id="7847078">)</span>&nbsp;<span class="op" id="7847080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847084">for</span>&nbsp;<span class="ident" id="7847088">_</span><span class="op" id="7847089">,</span>&nbsp;<span class="ident" id="7847091">c</span>&nbsp;<span class="op" id="7847093">:=</span>&nbsp;<span class="keyword" id="7847096">range</span>&nbsp;<span class="ident" id="7847102">cs</span>&nbsp;<span class="op" id="7847105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847110">if</span>&nbsp;<span class="ident" id="7847113">c</span>&nbsp;<span class="op" id="7847115">!=</span>&nbsp;<span class="ident" id="7847118">nil</span>&nbsp;<span class="op" id="7847122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847128">c</span><span class="op" id="7847129">.</span><span class="ident" id="7847130">Close</span><span class="op" id="7847135">(</span><span class="op" id="7847136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847141">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847152">for</span>&nbsp;<span class="ident" id="7847156">_</span><span class="op" id="7847157">,</span>&nbsp;<span class="ident" id="7847159">ifi</span>&nbsp;<span class="op" id="7847163">:=</span>&nbsp;<span class="keyword" id="7847166">range</span>&nbsp;<span class="op" id="7847172">[</span><span class="op" id="7847173">]</span><span class="op" id="7847174">*</span><span class="ident" id="7847175">Interface</span><span class="op" id="7847184">{</span><span class="ident" id="7847185">loopbackInterface</span><span class="op" id="7847202">(</span><span class="op" id="7847203">)</span><span class="op" id="7847204">,</span>&nbsp;<span class="ident" id="7847206">nil</span><span class="op" id="7847209">}</span>&nbsp;<span class="op" id="7847211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847215">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847271">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847324">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847374">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847426">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847444">if</span>&nbsp;<span class="ident" id="7847447">ifi</span>&nbsp;<span class="op" id="7847451">==</span>&nbsp;<span class="ident" id="7847454">nil</span>&nbsp;<span class="op" id="7847458">&amp;&amp;</span>&nbsp;<span class="op" id="7847461">(</span><span class="op" id="7847462">!</span><span class="op" id="7847463">*</span><span class="ident" id="7847464">testExternal</span>&nbsp;<span class="op" id="7847477">||</span>&nbsp;<span class="op" id="7847480">!</span><span class="op" id="7847481">*</span><span class="ident" id="7847482">testIPv6</span><span class="op" id="7847490">)</span>&nbsp;<span class="op" id="7847492">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847497">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847512">for</span>&nbsp;<span class="ident" id="7847516">_</span><span class="op" id="7847517">,</span>&nbsp;<span class="ident" id="7847519">tt</span>&nbsp;<span class="op" id="7847522">:=</span>&nbsp;<span class="keyword" id="7847525">range</span>&nbsp;<span class="ident" id="7847531">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="7847558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847563">var</span>&nbsp;<span class="ident" id="7847567">err</span>&nbsp;<span class="builtintype" id="7847571">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847580">cs</span>&nbsp;<span class="op" id="7847583">:=</span>&nbsp;<span class="builtinfunc" id="7847586">make</span><span class="op" id="7847590">(</span><span class="op" id="7847591">[</span><span class="op" id="7847592">]</span><span class="op" id="7847593">*</span><span class="ident" id="7847594">UDPConn</span><span class="op" id="7847601">,</span>&nbsp;<span class="num" id="7847603">2</span><span class="op" id="7847604">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847609">if</span>&nbsp;<span class="ident" id="7847612">cs</span><span class="op" id="7847614">[</span><span class="num" id="7847615">0</span><span class="op" id="7847616">]</span><span class="op" id="7847617">,</span>&nbsp;<span class="ident" id="7847619">err</span>&nbsp;<span class="op" id="7847623">=</span>&nbsp;<span class="ident" id="7847625">ListenMulticastUDP</span><span class="op" id="7847643">(</span><span class="ident" id="7847644">tt</span><span class="op" id="7847646">.</span><span class="ident" id="7847647">net</span><span class="op" id="7847650">,</span>&nbsp;<span class="ident" id="7847652">ifi</span><span class="op" id="7847655">,</span>&nbsp;<span class="ident" id="7847657">tt</span><span class="op" id="7847659">.</span><span class="ident" id="7847660">gaddr</span><span class="op" id="7847665">)</span><span class="op" id="7847666">;</span>&nbsp;<span class="ident" id="7847668">err</span>&nbsp;<span class="op" id="7847672">!=</span>&nbsp;<span class="ident" id="7847675">nil</span>&nbsp;<span class="op" id="7847679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847685">t</span><span class="op" id="7847686">.</span><span class="ident" id="7847687">Fatalf</span><span class="op" id="7847693">(</span><span class="string" id="7847694">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7847737">,</span>&nbsp;<span class="ident" id="7847739">ifi</span><span class="op" id="7847742">,</span>&nbsp;<span class="ident" id="7847744">err</span><span class="op" id="7847747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847757">if</span>&nbsp;<span class="ident" id="7847760">err</span>&nbsp;<span class="op" id="7847764">:=</span>&nbsp;<span class="ident" id="7847767">checkMulticastListener</span><span class="op" id="7847789">(</span><span class="ident" id="7847790">cs</span><span class="op" id="7847792">[</span><span class="num" id="7847793">0</span><span class="op" id="7847794">]</span><span class="op" id="7847795">,</span>&nbsp;<span class="ident" id="7847797">tt</span><span class="op" id="7847799">.</span><span class="ident" id="7847800">gaddr</span><span class="op" id="7847805">.</span><span class="ident" id="7847806">IP</span><span class="op" id="7847808">)</span><span class="op" id="7847809">;</span>&nbsp;<span class="ident" id="7847811">err</span>&nbsp;<span class="op" id="7847815">!=</span>&nbsp;<span class="ident" id="7847818">nil</span>&nbsp;<span class="op" id="7847822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847828">closer</span><span class="op" id="7847834">(</span><span class="ident" id="7847835">cs</span><span class="op" id="7847837">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847843">t</span><span class="op" id="7847844">.</span><span class="ident" id="7847845">Fatal</span><span class="op" id="7847850">(</span><span class="ident" id="7847851">err</span><span class="op" id="7847854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847864">if</span>&nbsp;<span class="ident" id="7847867">cs</span><span class="op" id="7847869">[</span><span class="num" id="7847870">1</span><span class="op" id="7847871">]</span><span class="op" id="7847872">,</span>&nbsp;<span class="ident" id="7847874">err</span>&nbsp;<span class="op" id="7847878">=</span>&nbsp;<span class="ident" id="7847880">ListenMulticastUDP</span><span class="op" id="7847898">(</span><span class="ident" id="7847899">tt</span><span class="op" id="7847901">.</span><span class="ident" id="7847902">net</span><span class="op" id="7847905">,</span>&nbsp;<span class="ident" id="7847907">ifi</span><span class="op" id="7847910">,</span>&nbsp;<span class="ident" id="7847912">tt</span><span class="op" id="7847914">.</span><span class="ident" id="7847915">gaddr</span><span class="op" id="7847920">)</span><span class="op" id="7847921">;</span>&nbsp;<span class="ident" id="7847923">err</span>&nbsp;<span class="op" id="7847927">!=</span>&nbsp;<span class="ident" id="7847930">nil</span>&nbsp;<span class="op" id="7847934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847940">closer</span><span class="op" id="7847946">(</span><span class="ident" id="7847947">cs</span><span class="op" id="7847949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847955">t</span><span class="op" id="7847956">.</span><span class="ident" id="7847957">Fatalf</span><span class="op" id="7847963">(</span><span class="string" id="7847964">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7848008">,</span>&nbsp;<span class="ident" id="7848010">ifi</span><span class="op" id="7848013">,</span>&nbsp;<span class="ident" id="7848015">err</span><span class="op" id="7848018">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848028">if</span>&nbsp;<span class="ident" id="7848031">err</span>&nbsp;<span class="op" id="7848035">:=</span>&nbsp;<span class="ident" id="7848038">checkMulticastListener</span><span class="op" id="7848060">(</span><span class="ident" id="7848061">cs</span><span class="op" id="7848063">[</span><span class="num" id="7848064">1</span><span class="op" id="7848065">]</span><span class="op" id="7848066">,</span>&nbsp;<span class="ident" id="7848068">tt</span><span class="op" id="7848070">.</span><span class="ident" id="7848071">gaddr</span><span class="op" id="7848076">.</span><span class="ident" id="7848077">IP</span><span class="op" id="7848079">)</span><span class="op" id="7848080">;</span>&nbsp;<span class="ident" id="7848082">err</span>&nbsp;<span class="op" id="7848086">!=</span>&nbsp;<span class="ident" id="7848089">nil</span>&nbsp;<span class="op" id="7848093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848099">closer</span><span class="op" id="7848105">(</span><span class="ident" id="7848106">cs</span><span class="op" id="7848108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848114">t</span><span class="op" id="7848115">.</span><span class="ident" id="7848116">Fatal</span><span class="op" id="7848121">(</span><span class="ident" id="7848122">err</span><span class="op" id="7848125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848130">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848135">closer</span><span class="op" id="7848141">(</span><span class="ident" id="7848142">cs</span><span class="op" id="7848144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848151">}</span><br>
<span class="lineno"></span><span class="op" id="7848153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7848156">func</span>&nbsp;<span class="ident" id="7848161">checkMulticastListener</span><span class="op" id="7848183">(</span><span class="ident" id="7848184">c</span>&nbsp;<span class="op" id="7848186">*</span><span class="ident" id="7848187">UDPConn</span><span class="op" id="7848194">,</span>&nbsp;<span class="ident" id="7848196">ip</span>&nbsp;<span class="ident" id="7848199">IP</span><span class="op" id="7848201">)</span>&nbsp;<span class="builtintype" id="7848203">error</span>&nbsp;<span class="op" id="7848209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848212">if</span>&nbsp;<span class="ident" id="7848215">ok</span><span class="op" id="7848217">,</span>&nbsp;<span class="ident" id="7848219">err</span>&nbsp;<span class="op" id="7848223">:=</span>&nbsp;<span class="ident" id="7848226">multicastRIBContains</span><span class="op" id="7848246">(</span><span class="ident" id="7848247">ip</span><span class="op" id="7848249">)</span><span class="op" id="7848250">;</span>&nbsp;<span class="ident" id="7848252">err</span>&nbsp;<span class="op" id="7848256">!=</span>&nbsp;<span class="ident" id="7848259">nil</span>&nbsp;<span class="op" id="7848263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848267">return</span>&nbsp;<span class="ident" id="7848274">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848279">}</span>&nbsp;<span class="keyword" id="7848281">else</span>&nbsp;<span class="keyword" id="7848286">if</span>&nbsp;<span class="op" id="7848289">!</span><span class="ident" id="7848290">ok</span>&nbsp;<span class="op" id="7848293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848297">return</span>&nbsp;<span class="ident" id="7848304">fmt</span><span class="op" id="7848307">.</span><span class="ident" id="7848308">Errorf</span><span class="op" id="7848314">(</span><span class="string" id="7848315">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="7848346">,</span>&nbsp;<span class="ident" id="7848348">ip</span><span class="op" id="7848350">.</span><span class="ident" id="7848351">String</span><span class="op" id="7848357">(</span><span class="op" id="7848358">)</span><span class="op" id="7848359">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848365">la</span>&nbsp;<span class="op" id="7848368">:=</span>&nbsp;<span class="ident" id="7848371">c</span><span class="op" id="7848372">.</span><span class="ident" id="7848373">LocalAddr</span><span class="op" id="7848382">(</span><span class="op" id="7848383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848386">if</span>&nbsp;<span class="ident" id="7848389">la</span><span class="op" id="7848391">,</span>&nbsp;<span class="ident" id="7848393">ok</span>&nbsp;<span class="op" id="7848396">:=</span>&nbsp;<span class="ident" id="7848399">la</span><span class="op" id="7848401">.</span><span class="op" id="7848402">(</span><span class="op" id="7848403">*</span><span class="ident" id="7848404">UDPAddr</span><span class="op" id="7848411">)</span><span class="op" id="7848412">;</span>&nbsp;<span class="op" id="7848414">!</span><span class="ident" id="7848415">ok</span>&nbsp;<span class="op" id="7848418">||</span>&nbsp;<span class="ident" id="7848421">la</span><span class="op" id="7848423">.</span><span class="ident" id="7848424">Port</span>&nbsp;<span class="op" id="7848429">==</span>&nbsp;<span class="num" id="7848432">0</span>&nbsp;<span class="op" id="7848434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848438">return</span>&nbsp;<span class="ident" id="7848445">fmt</span><span class="op" id="7848448">.</span><span class="ident" id="7848449">Errorf</span><span class="op" id="7848455">(</span><span class="string" id="7848456">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="7848517">,</span>&nbsp;<span class="ident" id="7848519">la</span><span class="op" id="7848521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848524">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848527">return</span>&nbsp;<span class="ident" id="7848534">nil</span><br>
<span class="lineno"></span><span class="op" id="7848538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7848541">func</span>&nbsp;<span class="ident" id="7848546">multicastRIBContains</span><span class="op" id="7848566">(</span><span class="ident" id="7848567">ip</span>&nbsp;<span class="ident" id="7848570">IP</span><span class="op" id="7848572">)</span>&nbsp;<span class="op" id="7848574">(</span><span class="builtintype" id="7848575">bool</span><span class="op" id="7848579">,</span>&nbsp;<span class="builtintype" id="7848581">error</span><span class="op" id="7848586">)</span>&nbsp;<span class="op" id="7848588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848591">switch</span>&nbsp;<span class="ident" id="7848598">runtime</span><span class="op" id="7848605">.</span><span class="ident" id="7848606">GOOS</span>&nbsp;<span class="op" id="7848611">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848614">case</span>&nbsp;<span class="string" id="7848619">&#34;dragonfly&#34;</span><span class="op" id="7848630">,</span>&nbsp;<span class="string" id="7848632">&#34;netbsd&#34;</span><span class="op" id="7848640">,</span>&nbsp;<span class="string" id="7848642">&#34;openbsd&#34;</span><span class="op" id="7848651">,</span>&nbsp;<span class="string" id="7848653">&#34;plan9&#34;</span><span class="op" id="7848660">,</span>&nbsp;<span class="string" id="7848662">&#34;solaris&#34;</span><span class="op" id="7848671">,</span>&nbsp;<span class="string" id="7848673">&#34;windows&#34;</span><span class="op" id="7848682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848686">return</span>&nbsp;<span class="builtintype" id="7848693">true</span><span class="op" id="7848697">,</span>&nbsp;<span class="ident" id="7848699">nil</span>&nbsp;<span class="comment" id="7848703">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848727">case</span>&nbsp;<span class="string" id="7848732">&#34;linux&#34;</span><span class="op" id="7848739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848743">if</span>&nbsp;<span class="ident" id="7848746">runtime</span><span class="op" id="7848753">.</span><span class="ident" id="7848754">GOARCH</span>&nbsp;<span class="op" id="7848761">==</span>&nbsp;<span class="string" id="7848764">&#34;arm&#34;</span>&nbsp;<span class="op" id="7848770">||</span>&nbsp;<span class="ident" id="7848773">runtime</span><span class="op" id="7848780">.</span><span class="ident" id="7848781">GOARCH</span>&nbsp;<span class="op" id="7848788">==</span>&nbsp;<span class="string" id="7848791">&#34;alpha&#34;</span>&nbsp;<span class="op" id="7848799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848804">return</span>&nbsp;<span class="builtintype" id="7848811">true</span><span class="op" id="7848815">,</span>&nbsp;<span class="ident" id="7848817">nil</span>&nbsp;<span class="comment" id="7848821">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848852">ift</span><span class="op" id="7848855">,</span>&nbsp;<span class="ident" id="7848857">err</span>&nbsp;<span class="op" id="7848861">:=</span>&nbsp;<span class="ident" id="7848864">Interfaces</span><span class="op" id="7848874">(</span><span class="op" id="7848875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848878">if</span>&nbsp;<span class="ident" id="7848881">err</span>&nbsp;<span class="op" id="7848885">!=</span>&nbsp;<span class="ident" id="7848888">nil</span>&nbsp;<span class="op" id="7848892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848896">return</span>&nbsp;<span class="builtintype" id="7848903">false</span><span class="op" id="7848908">,</span>&nbsp;<span class="ident" id="7848910">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7848915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848918">for</span>&nbsp;<span class="ident" id="7848922">_</span><span class="op" id="7848923">,</span>&nbsp;<span class="ident" id="7848925">ifi</span>&nbsp;<span class="op" id="7848929">:=</span>&nbsp;<span class="keyword" id="7848932">range</span>&nbsp;<span class="ident" id="7848938">ift</span>&nbsp;<span class="op" id="7848942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7848946">ifmat</span><span class="op" id="7848951">,</span>&nbsp;<span class="ident" id="7848953">err</span>&nbsp;<span class="op" id="7848957">:=</span>&nbsp;<span class="ident" id="7848960">ifi</span><span class="op" id="7848963">.</span><span class="ident" id="7848964">MulticastAddrs</span><span class="op" id="7848978">(</span><span class="op" id="7848979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7848983">if</span>&nbsp;<span class="ident" id="7848986">err</span>&nbsp;<span class="op" id="7848990">!=</span>&nbsp;<span class="ident" id="7848993">nil</span>&nbsp;<span class="op" id="7848997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849002">return</span>&nbsp;<span class="builtintype" id="7849009">false</span><span class="op" id="7849014">,</span>&nbsp;<span class="ident" id="7849016">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849026">for</span>&nbsp;<span class="ident" id="7849030">_</span><span class="op" id="7849031">,</span>&nbsp;<span class="ident" id="7849033">ifma</span>&nbsp;<span class="op" id="7849038">:=</span>&nbsp;<span class="keyword" id="7849041">range</span>&nbsp;<span class="ident" id="7849047">ifmat</span>&nbsp;<span class="op" id="7849053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849058">if</span>&nbsp;<span class="ident" id="7849061">ifma</span><span class="op" id="7849065">.</span><span class="op" id="7849066">(</span><span class="op" id="7849067">*</span><span class="ident" id="7849068">IPAddr</span><span class="op" id="7849074">)</span><span class="op" id="7849075">.</span><span class="ident" id="7849076">IP</span><span class="op" id="7849078">.</span><span class="ident" id="7849079">Equal</span><span class="op" id="7849084">(</span><span class="ident" id="7849085">ip</span><span class="op" id="7849087">)</span>&nbsp;<span class="op" id="7849089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849095">return</span>&nbsp;<span class="builtintype" id="7849102">true</span><span class="op" id="7849106">,</span>&nbsp;<span class="ident" id="7849108">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849115">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849125">return</span>&nbsp;<span class="builtintype" id="7849132">false</span><span class="op" id="7849137">,</span>&nbsp;<span class="ident" id="7849139">nil</span><br>
<span class="lineno"></span><span class="op" id="7849143">}</span>
</div>
</body>
</html>
