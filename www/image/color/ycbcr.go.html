<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3290803">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3290858">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3290912">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3290963">package</span>&nbsp;<span class="ident" id="3290971">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3290978">//&nbsp;RGBToYCbCr&nbsp;converts&nbsp;an&nbsp;RGB&nbsp;triple&nbsp;to&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="3291035">func</span>&nbsp;<span class="ident" id="3291040">RGBToYCbCr</span><span class="op" id="3291050">(</span><span class="ident" id="3291051">r</span><span class="op" id="3291052">,</span>&nbsp;<span class="ident" id="3291054">g</span><span class="op" id="3291055">,</span>&nbsp;<span class="ident" id="3291057">b</span>&nbsp;<span class="builtintype" id="3291059">uint8</span><span class="op" id="3291064">)</span>&nbsp;<span class="op" id="3291066">(</span><span class="builtintype" id="3291067">uint8</span><span class="op" id="3291072">,</span>&nbsp;<span class="builtintype" id="3291074">uint8</span><span class="op" id="3291079">,</span>&nbsp;<span class="builtintype" id="3291081">uint8</span><span class="op" id="3291086">)</span>&nbsp;<span class="op" id="3291088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291091">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291124">//&nbsp;&nbsp;&nbsp;&nbspY&#39;&nbsp;=&nbsp;&nbsp;0.2990*R&nbsp;+&nbsp;0.5870*G&nbsp;+&nbsp;0.1140*B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291165">//&nbsp;&nbsp;&nbsp;&nbspCb&nbsp;=&nbsp;-0.1687*R&nbsp;-&nbsp;0.3313*G&nbsp;+&nbsp;0.5000*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291212">//&nbsp;&nbsp;&nbsp;&nbspCr&nbsp;=&nbsp;&nbsp;0.5000*R&nbsp;-&nbsp;0.4187*G&nbsp;-&nbsp;0.0813*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291259">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291326">r1</span>&nbsp;<span class="op" id="3291329">:=</span>&nbsp;<span class="builtintype" id="3291332">int</span><span class="op" id="3291335">(</span><span class="ident" id="3291336"><a href="/image/color/ycbcr.go.html#3291051">r</a></span><span class="op" id="3291337">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291340">g1</span>&nbsp;<span class="op" id="3291343">:=</span>&nbsp;<span class="builtintype" id="3291346">int</span><span class="op" id="3291349">(</span><span class="ident" id="3291350"><a href="/image/color/ycbcr.go.html#3291054">g</a></span><span class="op" id="3291351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291354">b1</span>&nbsp;<span class="op" id="3291357">:=</span>&nbsp;<span class="builtintype" id="3291360">int</span><span class="op" id="3291363">(</span><span class="ident" id="3291364"><a href="/image/color/ycbcr.go.html#3291057">b</a></span><span class="op" id="3291365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291368">yy</span>&nbsp;<span class="op" id="3291371">:=</span>&nbsp;<span class="op" id="3291374">(</span><span class="num" id="3291375">19595</span><span class="op" id="3291380">*</span><span class="ident" id="3291381"><a href="/image/color/ycbcr.go.html#3291326">r1</a></span>&nbsp;<span class="op" id="3291384">+</span>&nbsp;<span class="num" id="3291386">38470</span><span class="op" id="3291391">*</span><span class="ident" id="3291392"><a href="/image/color/ycbcr.go.html#3291340">g1</a></span>&nbsp;<span class="op" id="3291395">+</span>&nbsp;<span class="num" id="3291397">7471</span><span class="op" id="3291401">*</span><span class="ident" id="3291402"><a href="/image/color/ycbcr.go.html#3291354">b1</a></span>&nbsp;<span class="op" id="3291405">+</span>&nbsp;<span class="num" id="3291407">1</span><span class="op" id="3291408">&lt;&lt;</span><span class="num" id="3291410">15</span><span class="op" id="3291412">)</span>&nbsp;<span class="op" id="3291414">&gt;&gt;</span>&nbsp;<span class="num" id="3291417">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291421">cb</span>&nbsp;<span class="op" id="3291424">:=</span>&nbsp;<span class="op" id="3291427">(</span><span class="op" id="3291428">-</span><span class="num" id="3291429">11056</span><span class="op" id="3291434">*</span><span class="ident" id="3291435"><a href="/image/color/ycbcr.go.html#3291326">r1</a></span>&nbsp;<span class="op" id="3291438">-</span>&nbsp;<span class="num" id="3291440">21712</span><span class="op" id="3291445">*</span><span class="ident" id="3291446"><a href="/image/color/ycbcr.go.html#3291340">g1</a></span>&nbsp;<span class="op" id="3291449">+</span>&nbsp;<span class="num" id="3291451">32768</span><span class="op" id="3291456">*</span><span class="ident" id="3291457"><a href="/image/color/ycbcr.go.html#3291354">b1</a></span>&nbsp;<span class="op" id="3291460">+</span>&nbsp;<span class="num" id="3291462">257</span><span class="op" id="3291465">&lt;&lt;</span><span class="num" id="3291467">15</span><span class="op" id="3291469">)</span>&nbsp;<span class="op" id="3291471">&gt;&gt;</span>&nbsp;<span class="num" id="3291474">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291478">cr</span>&nbsp;<span class="op" id="3291481">:=</span>&nbsp;<span class="op" id="3291484">(</span><span class="num" id="3291485">32768</span><span class="op" id="3291490">*</span><span class="ident" id="3291491"><a href="/image/color/ycbcr.go.html#3291326">r1</a></span>&nbsp;<span class="op" id="3291494">-</span>&nbsp;<span class="num" id="3291496">27440</span><span class="op" id="3291501">*</span><span class="ident" id="3291502"><a href="/image/color/ycbcr.go.html#3291340">g1</a></span>&nbsp;<span class="op" id="3291505">-</span>&nbsp;<span class="num" id="3291507">5328</span><span class="op" id="3291511">*</span><span class="ident" id="3291512"><a href="/image/color/ycbcr.go.html#3291354">b1</a></span>&nbsp;<span class="op" id="3291515">+</span>&nbsp;<span class="num" id="3291517">257</span><span class="op" id="3291520">&lt;&lt;</span><span class="num" id="3291522">15</span><span class="op" id="3291524">)</span>&nbsp;<span class="op" id="3291526">&gt;&gt;</span>&nbsp;<span class="num" id="3291529">16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3291533">if</span>&nbsp;<span class="ident" id="3291536"><a href="/image/color/ycbcr.go.html#3291368">yy</a></span>&nbsp;<span class="op" id="3291539">&lt;</span>&nbsp;<span class="num" id="3291541">0</span>&nbsp;<span class="op" id="3291543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291547"><a href="/image/color/ycbcr.go.html#3291368">yy</a></span>&nbsp;<span class="op" id="3291550">=</span>&nbsp;<span class="num" id="3291552">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291555">}</span>&nbsp;<span class="keyword" id="3291557">else</span>&nbsp;<span class="keyword" id="3291562">if</span>&nbsp;<span class="ident" id="3291565"><a href="/image/color/ycbcr.go.html#3291368">yy</a></span>&nbsp;<span class="op" id="3291568">&gt;</span>&nbsp;<span class="num" id="3291570">255</span>&nbsp;<span class="op" id="3291574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291578"><a href="/image/color/ycbcr.go.html#3291368">yy</a></span>&nbsp;<span class="op" id="3291581">=</span>&nbsp;<span class="num" id="3291583">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291588">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3291591">if</span>&nbsp;<span class="ident" id="3291594"><a href="/image/color/ycbcr.go.html#3291421">cb</a></span>&nbsp;<span class="op" id="3291597">&lt;</span>&nbsp;<span class="num" id="3291599">0</span>&nbsp;<span class="op" id="3291601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291605"><a href="/image/color/ycbcr.go.html#3291421">cb</a></span>&nbsp;<span class="op" id="3291608">=</span>&nbsp;<span class="num" id="3291610">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291613">}</span>&nbsp;<span class="keyword" id="3291615">else</span>&nbsp;<span class="keyword" id="3291620">if</span>&nbsp;<span class="ident" id="3291623"><a href="/image/color/ycbcr.go.html#3291421">cb</a></span>&nbsp;<span class="op" id="3291626">&gt;</span>&nbsp;<span class="num" id="3291628">255</span>&nbsp;<span class="op" id="3291632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291636"><a href="/image/color/ycbcr.go.html#3291421">cb</a></span>&nbsp;<span class="op" id="3291639">=</span>&nbsp;<span class="num" id="3291641">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291646">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3291649">if</span>&nbsp;<span class="ident" id="3291652"><a href="/image/color/ycbcr.go.html#3291478">cr</a></span>&nbsp;<span class="op" id="3291655">&lt;</span>&nbsp;<span class="num" id="3291657">0</span>&nbsp;<span class="op" id="3291659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291663"><a href="/image/color/ycbcr.go.html#3291478">cr</a></span>&nbsp;<span class="op" id="3291666">=</span>&nbsp;<span class="num" id="3291668">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291671">}</span>&nbsp;<span class="keyword" id="3291673">else</span>&nbsp;<span class="keyword" id="3291678">if</span>&nbsp;<span class="ident" id="3291681"><a href="/image/color/ycbcr.go.html#3291478">cr</a></span>&nbsp;<span class="op" id="3291684">&gt;</span>&nbsp;<span class="num" id="3291686">255</span>&nbsp;<span class="op" id="3291690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3291694"><a href="/image/color/ycbcr.go.html#3291478">cr</a></span>&nbsp;<span class="op" id="3291697">=</span>&nbsp;<span class="num" id="3291699">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3291704">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3291707">return</span>&nbsp;<span class="builtintype" id="3291714">uint8</span><span class="op" id="3291719">(</span><span class="ident" id="3291720"><a href="/image/color/ycbcr.go.html#3291368">yy</a></span><span class="op" id="3291722">)</span><span class="op" id="3291723">,</span>&nbsp;<span class="builtintype" id="3291725">uint8</span><span class="op" id="3291730">(</span><span class="ident" id="3291731"><a href="/image/color/ycbcr.go.html#3291421">cb</a></span><span class="op" id="3291733">)</span><span class="op" id="3291734">,</span>&nbsp;<span class="builtintype" id="3291736">uint8</span><span class="op" id="3291741">(</span><span class="ident" id="3291742"><a href="/image/color/ycbcr.go.html#3291478">cr</a></span><span class="op" id="3291744">)</span><br>
<span class="lineno"></span><span class="op" id="3291746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291749">//&nbsp;YCbCrToRGB&nbsp;converts&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple&nbsp;to&nbsp;an&nbsp;RGB&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="3291806">func</span>&nbsp;<span class="ident" id="3291811">YCbCrToRGB</span><span class="op" id="3291821">(</span><span class="ident" id="3291822">y</span><span class="op" id="3291823">,</span>&nbsp;<span class="ident" id="3291825">cb</span><span class="op" id="3291827">,</span>&nbsp;<span class="ident" id="3291829">cr</span>&nbsp;<span class="builtintype" id="3291832">uint8</span><span class="op" id="3291837">)</span>&nbsp;<span class="op" id="3291839">(</span><span class="builtintype" id="3291840">uint8</span><span class="op" id="3291845">,</span>&nbsp;<span class="builtintype" id="3291847">uint8</span><span class="op" id="3291852">,</span>&nbsp;<span class="builtintype" id="3291854">uint8</span><span class="op" id="3291859">)</span>&nbsp;<span class="op" id="3291861">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291864">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291897">//&nbsp;&nbsp;&nbsp;&nbspR&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.40200*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291927">//&nbsp;&nbsp;&nbsp;&nbspG&nbsp;=&nbsp;Y&#39;&nbsp;-&nbsp;0.34414*(Cb-128)&nbsp;-&nbsp;0.71414*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3291976">//&nbsp;&nbsp;&nbsp;&nbspB&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.77200*(Cb-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3292006">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292073">yy1</span>&nbsp;<span class="op" id="3292077">:=</span>&nbsp;<span class="builtintype" id="3292080">int</span><span class="op" id="3292083">(</span><span class="ident" id="3292084"><a href="/image/color/ycbcr.go.html#3291822">y</a></span><span class="op" id="3292085">)</span><span class="op" id="3292086">&lt;&lt;</span><span class="num" id="3292088">16</span>&nbsp;<span class="op" id="3292091">+</span>&nbsp;<span class="num" id="3292093">1</span><span class="op" id="3292094">&lt;&lt;</span><span class="num" id="3292096">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292100">cb1</span>&nbsp;<span class="op" id="3292104">:=</span>&nbsp;<span class="builtintype" id="3292107">int</span><span class="op" id="3292110">(</span><span class="ident" id="3292111"><a href="/image/color/ycbcr.go.html#3291825">cb</a></span><span class="op" id="3292113">)</span>&nbsp;<span class="op" id="3292115">-</span>&nbsp;<span class="num" id="3292117">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292122">cr1</span>&nbsp;<span class="op" id="3292126">:=</span>&nbsp;<span class="builtintype" id="3292129">int</span><span class="op" id="3292132">(</span><span class="ident" id="3292133"><a href="/image/color/ycbcr.go.html#3291829">cr</a></span><span class="op" id="3292135">)</span>&nbsp;<span class="op" id="3292137">-</span>&nbsp;<span class="num" id="3292139">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292144">r</span>&nbsp;<span class="op" id="3292146">:=</span>&nbsp;<span class="op" id="3292149">(</span><span class="ident" id="3292150"><a href="/image/color/ycbcr.go.html#3292073">yy1</a></span>&nbsp;<span class="op" id="3292154">+</span>&nbsp;<span class="num" id="3292156">91881</span><span class="op" id="3292161">*</span><span class="ident" id="3292162"><a href="/image/color/ycbcr.go.html#3292122">cr1</a></span><span class="op" id="3292165">)</span>&nbsp;<span class="op" id="3292167">&gt;&gt;</span>&nbsp;<span class="num" id="3292170">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292174">g</span>&nbsp;<span class="op" id="3292176">:=</span>&nbsp;<span class="op" id="3292179">(</span><span class="ident" id="3292180"><a href="/image/color/ycbcr.go.html#3292073">yy1</a></span>&nbsp;<span class="op" id="3292184">-</span>&nbsp;<span class="num" id="3292186">22554</span><span class="op" id="3292191">*</span><span class="ident" id="3292192"><a href="/image/color/ycbcr.go.html#3292100">cb1</a></span>&nbsp;<span class="op" id="3292196">-</span>&nbsp;<span class="num" id="3292198">46802</span><span class="op" id="3292203">*</span><span class="ident" id="3292204"><a href="/image/color/ycbcr.go.html#3292122">cr1</a></span><span class="op" id="3292207">)</span>&nbsp;<span class="op" id="3292209">&gt;&gt;</span>&nbsp;<span class="num" id="3292212">16</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292216">b</span>&nbsp;<span class="op" id="3292218">:=</span>&nbsp;<span class="op" id="3292221">(</span><span class="ident" id="3292222"><a href="/image/color/ycbcr.go.html#3292073">yy1</a></span>&nbsp;<span class="op" id="3292226">+</span>&nbsp;<span class="num" id="3292228">116130</span><span class="op" id="3292234">*</span><span class="ident" id="3292235"><a href="/image/color/ycbcr.go.html#3292100">cb1</a></span><span class="op" id="3292238">)</span>&nbsp;<span class="op" id="3292240">&gt;&gt;</span>&nbsp;<span class="num" id="3292243">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3292247">if</span>&nbsp;<span class="ident" id="3292250"><a href="/image/color/ycbcr.go.html#3292144">r</a></span>&nbsp;<span class="op" id="3292252">&lt;</span>&nbsp;<span class="num" id="3292254">0</span>&nbsp;<span class="op" id="3292256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292260"><a href="/image/color/ycbcr.go.html#3292144">r</a></span>&nbsp;<span class="op" id="3292262">=</span>&nbsp;<span class="num" id="3292264">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292267">}</span>&nbsp;<span class="keyword" id="3292269">else</span>&nbsp;<span class="keyword" id="3292274">if</span>&nbsp;<span class="ident" id="3292277"><a href="/image/color/ycbcr.go.html#3292144">r</a></span>&nbsp;<span class="op" id="3292279">&gt;</span>&nbsp;<span class="num" id="3292281">255</span>&nbsp;<span class="op" id="3292285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292289"><a href="/image/color/ycbcr.go.html#3292144">r</a></span>&nbsp;<span class="op" id="3292291">=</span>&nbsp;<span class="num" id="3292293">255</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3292301">if</span>&nbsp;<span class="ident" id="3292304"><a href="/image/color/ycbcr.go.html#3292174">g</a></span>&nbsp;<span class="op" id="3292306">&lt;</span>&nbsp;<span class="num" id="3292308">0</span>&nbsp;<span class="op" id="3292310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292314"><a href="/image/color/ycbcr.go.html#3292174">g</a></span>&nbsp;<span class="op" id="3292316">=</span>&nbsp;<span class="num" id="3292318">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292321">}</span>&nbsp;<span class="keyword" id="3292323">else</span>&nbsp;<span class="keyword" id="3292328">if</span>&nbsp;<span class="ident" id="3292331"><a href="/image/color/ycbcr.go.html#3292174">g</a></span>&nbsp;<span class="op" id="3292333">&gt;</span>&nbsp;<span class="num" id="3292335">255</span>&nbsp;<span class="op" id="3292339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292343"><a href="/image/color/ycbcr.go.html#3292174">g</a></span>&nbsp;<span class="op" id="3292345">=</span>&nbsp;<span class="num" id="3292347">255</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3292355">if</span>&nbsp;<span class="ident" id="3292358"><a href="/image/color/ycbcr.go.html#3292216">b</a></span>&nbsp;<span class="op" id="3292360">&lt;</span>&nbsp;<span class="num" id="3292362">0</span>&nbsp;<span class="op" id="3292364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292368"><a href="/image/color/ycbcr.go.html#3292216">b</a></span>&nbsp;<span class="op" id="3292370">=</span>&nbsp;<span class="num" id="3292372">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292375">}</span>&nbsp;<span class="keyword" id="3292377">else</span>&nbsp;<span class="keyword" id="3292382">if</span>&nbsp;<span class="ident" id="3292385"><a href="/image/color/ycbcr.go.html#3292216">b</a></span>&nbsp;<span class="op" id="3292387">&gt;</span>&nbsp;<span class="num" id="3292389">255</span>&nbsp;<span class="op" id="3292393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292397"><a href="/image/color/ycbcr.go.html#3292216">b</a></span>&nbsp;<span class="op" id="3292399">=</span>&nbsp;<span class="num" id="3292401">255</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3292406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3292409">return</span>&nbsp;<span class="builtintype" id="3292416">uint8</span><span class="op" id="3292421">(</span><span class="ident" id="3292422"><a href="/image/color/ycbcr.go.html#3292144">r</a></span><span class="op" id="3292423">)</span><span class="op" id="3292424">,</span>&nbsp;<span class="builtintype" id="3292426">uint8</span><span class="op" id="3292431">(</span><span class="ident" id="3292432"><a href="/image/color/ycbcr.go.html#3292174">g</a></span><span class="op" id="3292433">)</span><span class="op" id="3292434">,</span>&nbsp;<span class="builtintype" id="3292436">uint8</span><span class="op" id="3292441">(</span><span class="ident" id="3292442"><a href="/image/color/ycbcr.go.html#3292216">b</a></span><span class="op" id="3292443">)</span><br>
<span class="lineno"></span><span class="op" id="3292445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3292448">//&nbsp;YCbCr&nbsp;represents&nbsp;a&nbsp;fully&nbsp;opaque&nbsp;24-bit&nbsp;Y&#39;CbCr&nbsp;color,&nbsp;having&nbsp;8&nbsp;bits&nbsp;each&nbsp;for</span><br>
<span class="lineno">70</span><span class="comment" id="3292527">//&nbsp;one&nbsp;luma&nbsp;and&nbsp;two&nbsp;chroma&nbsp;components.</span><br>
<span class="lineno"></span><span class="comment" id="3292566">//</span><br>
<span class="lineno"></span><span class="comment" id="3292569">//&nbsp;JPEG,&nbsp;VP8,&nbsp;the&nbsp;MPEG&nbsp;family&nbsp;and&nbsp;other&nbsp;codecs&nbsp;use&nbsp;this&nbsp;color&nbsp;model.&nbsp;Such</span><br>
<span class="lineno"></span><span class="comment" id="3292643">//&nbsp;codecs&nbsp;often&nbsp;use&nbsp;the&nbsp;terms&nbsp;YUV&nbsp;and&nbsp;Y&#39;CbCr&nbsp;interchangeably,&nbsp;but&nbsp;strictly</span><br>
<span class="lineno"></span><span class="comment" id="3292718">//&nbsp;speaking,&nbsp;the&nbsp;term&nbsp;YUV&nbsp;applies&nbsp;only&nbsp;to&nbsp;analog&nbsp;video&nbsp;signals,&nbsp;and&nbsp;Y&#39;&nbsp;(luma)</span><br>
<span class="lineno">75</span><span class="comment" id="3292796">//&nbsp;is&nbsp;Y&nbsp;(luminance)&nbsp;after&nbsp;applying&nbsp;gamma&nbsp;correction.</span><br>
<span class="lineno"></span><span class="comment" id="3292849">//</span><br>
<span class="lineno"></span><span class="comment" id="3292852">//&nbsp;Conversion&nbsp;between&nbsp;RGB&nbsp;and&nbsp;Y&#39;CbCr&nbsp;is&nbsp;lossy&nbsp;and&nbsp;there&nbsp;are&nbsp;multiple,&nbsp;slightly</span><br>
<span class="lineno"></span><span class="comment" id="3292931">//&nbsp;different&nbsp;formulae&nbsp;for&nbsp;converting&nbsp;between&nbsp;the&nbsp;two.&nbsp;This&nbsp;package&nbsp;follows</span><br>
<span class="lineno"></span><span class="comment" id="3293006">//&nbsp;the&nbsp;JFIF&nbsp;specification&nbsp;at&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf.</span><br>
<span class="lineno">80</span><span class="keyword" id="3293078">type</span>&nbsp;<span class="ident" id="3293083">YCbCr</span>&nbsp;<span class="keyword" id="3293089">struct</span>&nbsp;<span class="op" id="3293096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293099">Y</span><span class="op" id="3293100">,</span>&nbsp;<span class="ident" id="3293102">Cb</span><span class="op" id="3293104">,</span>&nbsp;<span class="ident" id="3293106">Cr</span>&nbsp;<span class="builtintype" id="3293109">uint8</span><br>
<span class="lineno"></span><span class="op" id="3293115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3293118">func</span>&nbsp;<span class="op" id="3293123">(</span><span class="ident" id="3293124">c</span>&nbsp;<span class="ident" id="3293126"><a href="/image/color/ycbcr.go.html#3293083">YCbCr</a></span><span class="op" id="3293131">)</span>&nbsp;<span class="ident" id="3293133">RGBA</span><span class="op" id="3293137">(</span><span class="op" id="3293138">)</span>&nbsp;<span class="op" id="3293140">(</span><span class="builtintype" id="3293141">uint32</span><span class="op" id="3293147">,</span>&nbsp;<span class="builtintype" id="3293149">uint32</span><span class="op" id="3293155">,</span>&nbsp;<span class="builtintype" id="3293157">uint32</span><span class="op" id="3293163">,</span>&nbsp;<span class="builtintype" id="3293165">uint32</span><span class="op" id="3293171">)</span>&nbsp;<span class="op" id="3293173">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293176">r</span><span class="op" id="3293177">,</span>&nbsp;<span class="ident" id="3293179">g</span><span class="op" id="3293180">,</span>&nbsp;<span class="ident" id="3293182">b</span>&nbsp;<span class="op" id="3293184">:=</span>&nbsp;<span class="ident" id="3293187"><a href="/image/color/ycbcr.go.html#3291811">YCbCrToRGB</a></span><span class="op" id="3293197">(</span><span class="ident" id="3293198"><a href="/image/color/ycbcr.go.html#3293124">c</a></span><span class="op" id="3293199">.</span><span class="ident" id="3293200">Y</span><span class="op" id="3293201">,</span>&nbsp;<span class="ident" id="3293203"><a href="/image/color/ycbcr.go.html#3293124">c</a></span><span class="op" id="3293204">.</span><span class="ident" id="3293205">Cb</span><span class="op" id="3293207">,</span>&nbsp;<span class="ident" id="3293209"><a href="/image/color/ycbcr.go.html#3293124">c</a></span><span class="op" id="3293210">.</span><span class="ident" id="3293211">Cr</span><span class="op" id="3293213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293216">return</span>&nbsp;<span class="builtintype" id="3293223">uint32</span><span class="op" id="3293229">(</span><span class="ident" id="3293230"><a href="/image/color/ycbcr.go.html#3293176">r</a></span><span class="op" id="3293231">)</span>&nbsp;<span class="op" id="3293233">*</span>&nbsp;<span class="num" id="3293235">0x101</span><span class="op" id="3293240">,</span>&nbsp;<span class="builtintype" id="3293242">uint32</span><span class="op" id="3293248">(</span><span class="ident" id="3293249"><a href="/image/color/ycbcr.go.html#3293179">g</a></span><span class="op" id="3293250">)</span>&nbsp;<span class="op" id="3293252">*</span>&nbsp;<span class="num" id="3293254">0x101</span><span class="op" id="3293259">,</span>&nbsp;<span class="builtintype" id="3293261">uint32</span><span class="op" id="3293267">(</span><span class="ident" id="3293268"><a href="/image/color/ycbcr.go.html#3293182">b</a></span><span class="op" id="3293269">)</span>&nbsp;<span class="op" id="3293271">*</span>&nbsp;<span class="num" id="3293273">0x101</span><span class="op" id="3293278">,</span>&nbsp;<span class="num" id="3293280">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3293287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3293290">//&nbsp;YCbCrModel&nbsp;is&nbsp;the&nbsp;Model&nbsp;for&nbsp;Y&#39;CbCr&nbsp;colors.</span><br>
<span class="lineno">90</span><span class="keyword" id="3293336">var</span>&nbsp;<span class="ident" id="3293340">YCbCrModel</span>&nbsp;<span class="ident" id="3293351"><a href="/image/color/color.go.html#3286902">Model</a></span>&nbsp;<span class="op" id="3293357">=</span>&nbsp;<span class="ident" id="3293359"><a href="/image/color/color.go.html#3287025">ModelFunc</a></span><span class="op" id="3293368">(</span><span class="ident" id="3293369"><a href="/image/color/ycbcr.go.html#3293387">yCbCrModel</a></span><span class="op" id="3293379">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3293382">func</span>&nbsp;<span class="ident" id="3293387">yCbCrModel</span><span class="op" id="3293397">(</span><span class="ident" id="3293398">c</span>&nbsp;<span class="ident" id="3293400"><a href="/image/color/color.go.html#3284481">Color</a></span><span class="op" id="3293405">)</span>&nbsp;<span class="ident" id="3293407"><a href="/image/color/color.go.html#3284481">Color</a></span>&nbsp;<span class="op" id="3293413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293416">if</span>&nbsp;<span class="ident" id="3293419">_</span><span class="op" id="3293420">,</span>&nbsp;<span class="ident" id="3293422">ok</span>&nbsp;<span class="op" id="3293425">:=</span>&nbsp;<span class="ident" id="3293428"><a href="/image/color/ycbcr.go.html#3293398">c</a></span><span class="op" id="3293429">.</span><span class="op" id="3293430">(</span><span class="ident" id="3293431"><a href="/image/color/ycbcr.go.html#3293083">YCbCr</a></span><span class="op" id="3293436">)</span><span class="op" id="3293437">;</span>&nbsp;<span class="ident" id="3293439"><a href="/image/color/ycbcr.go.html#3293422">ok</a></span>&nbsp;<span class="op" id="3293442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293446">return</span>&nbsp;<span class="ident" id="3293453"><a href="/image/color/ycbcr.go.html#3293398">c</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293459">r</span><span class="op" id="3293460">,</span>&nbsp;<span class="ident" id="3293462">g</span><span class="op" id="3293463">,</span>&nbsp;<span class="ident" id="3293465">b</span><span class="op" id="3293466">,</span>&nbsp;<span class="ident" id="3293468">_</span>&nbsp;<span class="op" id="3293470">:=</span>&nbsp;<span class="ident" id="3293473"><a href="/image/color/ycbcr.go.html#3293398">c</a></span><span class="op" id="3293474">.</span><span class="ident" id="3293475">RGBA</span><span class="op" id="3293479">(</span><span class="op" id="3293480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293483">y</span><span class="op" id="3293484">,</span>&nbsp;<span class="ident" id="3293486">u</span><span class="op" id="3293487">,</span>&nbsp;<span class="ident" id="3293489">v</span>&nbsp;<span class="op" id="3293491">:=</span>&nbsp;<span class="ident" id="3293494"><a href="/image/color/ycbcr.go.html#3291040">RGBToYCbCr</a></span><span class="op" id="3293504">(</span><span class="builtintype" id="3293505">uint8</span><span class="op" id="3293510">(</span><span class="ident" id="3293511"><a href="/image/color/ycbcr.go.html#3293459">r</a></span><span class="op" id="3293512">&gt;&gt;</span><span class="num" id="3293514">8</span><span class="op" id="3293515">)</span><span class="op" id="3293516">,</span>&nbsp;<span class="builtintype" id="3293518">uint8</span><span class="op" id="3293523">(</span><span class="ident" id="3293524"><a href="/image/color/ycbcr.go.html#3293462">g</a></span><span class="op" id="3293525">&gt;&gt;</span><span class="num" id="3293527">8</span><span class="op" id="3293528">)</span><span class="op" id="3293529">,</span>&nbsp;<span class="builtintype" id="3293531">uint8</span><span class="op" id="3293536">(</span><span class="ident" id="3293537"><a href="/image/color/ycbcr.go.html#3293465">b</a></span><span class="op" id="3293538">&gt;&gt;</span><span class="num" id="3293540">8</span><span class="op" id="3293541">)</span><span class="op" id="3293542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293545">return</span>&nbsp;<span class="ident" id="3293552"><a href="/image/color/ycbcr.go.html#3293083">YCbCr</a></span><span class="op" id="3293557">{</span><span class="ident" id="3293558"><a href="/image/color/ycbcr.go.html#3293483">y</a></span><span class="op" id="3293559">,</span>&nbsp;<span class="ident" id="3293561"><a href="/image/color/ycbcr.go.html#3293486">u</a></span><span class="op" id="3293562">,</span>&nbsp;<span class="ident" id="3293564"><a href="/image/color/ycbcr.go.html#3293489">v</a></span><span class="op" id="3293565">}</span><br>
<span class="lineno"></span><span class="op" id="3293567">}</span>
</div>
</body>
</html>
