<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4509898">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4509953">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4510007">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4510058">//&nbsp;Parse&nbsp;nodes.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4510075">package</span>&nbsp;<span class="ident" id="4510083">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4510090">import</span>&nbsp;<span class="op" id="4510097">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4510100">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4510109">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4510116">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4510127">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4510137">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="4510140">var</span>&nbsp;<span class="ident" id="4510144">textFormat</span>&nbsp;<span class="op" id="4510155">=</span>&nbsp;<span class="string" id="4510157">&#34;%s&#34;</span>&nbsp;<span class="comment" id="4510162">//&nbsp;Changed&nbsp;to&nbsp;&#34;%q&#34;&nbsp;in&nbsp;tests&nbsp;for&nbsp;better&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4510218">//&nbsp;A&nbsp;Node&nbsp;is&nbsp;an&nbsp;element&nbsp;in&nbsp;the&nbsp;parse&nbsp;tree.&nbsp;The&nbsp;interface&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span><span class="comment" id="4510287">//&nbsp;The&nbsp;interface&nbsp;contains&nbsp;an&nbsp;unexported&nbsp;method&nbsp;so&nbsp;that&nbsp;only</span><br>
<span class="lineno">20</span><span class="comment" id="4510347">//&nbsp;types&nbsp;local&nbsp;to&nbsp;this&nbsp;package&nbsp;can&nbsp;satisfy&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="4510394">type</span>&nbsp;<span class="ident" id="4510399">Node</span>&nbsp;<span class="keyword" id="4510404">interface</span>&nbsp;<span class="op" id="4510414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4510417">Type</span><span class="op" id="4510421">(</span><span class="op" id="4510422">)</span>&nbsp;<span class="ident" id="4510424"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4510434">String</span><span class="op" id="4510440">(</span><span class="op" id="4510441">)</span>&nbsp;<span class="builtintype" id="4510443">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4510451">//&nbsp;Copy&nbsp;does&nbsp;a&nbsp;deep&nbsp;copy&nbsp;of&nbsp;the&nbsp;Node&nbsp;and&nbsp;all&nbsp;its&nbsp;components.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4510513">//&nbsp;To&nbsp;avoid&nbsp;type&nbsp;assertions,&nbsp;some&nbsp;XxxNodes&nbsp;also&nbsp;have&nbsp;specialized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4510579">//&nbsp;CopyXxx&nbsp;methods&nbsp;that&nbsp;return&nbsp;*XxxNode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4510621">Copy</span><span class="op" id="4510625">(</span><span class="op" id="4510626">)</span>&nbsp;<span class="ident" id="4510628"><a href="/text/template/parse/node.go.html#4510399">Node</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4510634">Position</span><span class="op" id="4510642">(</span><span class="op" id="4510643">)</span>&nbsp;<span class="ident" id="4510645"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span>&nbsp;<span class="comment" id="4510649">//&nbsp;byte&nbsp;position&nbsp;of&nbsp;start&nbsp;of&nbsp;node&nbsp;in&nbsp;full&nbsp;original&nbsp;input&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4510714">//&nbsp;tree&nbsp;returns&nbsp;the&nbsp;containing&nbsp;*Tree.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4510753">//&nbsp;It&nbsp;is&nbsp;unexported&nbsp;so&nbsp;all&nbsp;implementations&nbsp;of&nbsp;Node&nbsp;are&nbsp;in&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4510826">tree</span><span class="op" id="4510830">(</span><span class="op" id="4510831">)</span>&nbsp;<span class="op" id="4510833">*</span><span class="ident" id="4510834"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="4510839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4510842">//&nbsp;NodeType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;a&nbsp;parse&nbsp;tree&nbsp;node.</span><br>
<span class="lineno">35</span><span class="keyword" id="4510896">type</span>&nbsp;<span class="ident" id="4510901">NodeType</span>&nbsp;<span class="builtintype" id="4510910">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4510915">//&nbsp;Pos&nbsp;represents&nbsp;a&nbsp;byte&nbsp;position&nbsp;in&nbsp;the&nbsp;original&nbsp;input&nbsp;text&nbsp;from&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="4510987">//&nbsp;this&nbsp;template&nbsp;was&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="4511016">type</span>&nbsp;<span class="ident" id="4511021">Pos</span>&nbsp;<span class="builtintype" id="4511025">int</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4511030">func</span>&nbsp;<span class="op" id="4511035">(</span><span class="ident" id="4511036">p</span>&nbsp;<span class="ident" id="4511038"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4511041">)</span>&nbsp;<span class="ident" id="4511043">Position</span><span class="op" id="4511051">(</span><span class="op" id="4511052">)</span>&nbsp;<span class="ident" id="4511054"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span>&nbsp;<span class="op" id="4511058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4511061">return</span>&nbsp;<span class="ident" id="4511068"><a href="/text/template/parse/node.go.html#4511036">p</a></span><br>
<span class="lineno"></span><span class="op" id="4511070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="4511073">//&nbsp;Type&nbsp;returns&nbsp;itself&nbsp;and&nbsp;provides&nbsp;an&nbsp;easy&nbsp;default&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="4511140">//&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;Node.&nbsp;Embedded&nbsp;in&nbsp;all&nbsp;non-trivial&nbsp;Nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="4511203">func</span>&nbsp;<span class="op" id="4511208">(</span><span class="ident" id="4511209">t</span>&nbsp;<span class="ident" id="4511211"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><span class="op" id="4511219">)</span>&nbsp;<span class="ident" id="4511221">Type</span><span class="op" id="4511225">(</span><span class="op" id="4511226">)</span>&nbsp;<span class="ident" id="4511228"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span>&nbsp;<span class="op" id="4511237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4511240">return</span>&nbsp;<span class="ident" id="4511247"><a href="/text/template/parse/node.go.html#4511209">t</a></span><br>
<span class="lineno"></span><span class="op" id="4511249">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4511252">const</span>&nbsp;<span class="op" id="4511258">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511261">NodeText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4511276"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span>&nbsp;<span class="op" id="4511285">=</span>&nbsp;<span class="ident" id="4511287">iota</span>&nbsp;<span class="comment" id="4511292">//&nbsp;Plain&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511308">NodeAction</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511339">//&nbsp;A&nbsp;non-control&nbsp;action&nbsp;such&nbsp;as&nbsp;a&nbsp;field&nbsp;evaluation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511392">NodeBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511423">//&nbsp;A&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511447">NodeChain</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511478">//&nbsp;A&nbsp;sequence&nbsp;of&nbsp;field&nbsp;accesses.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511512">NodeCommand</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511543">//&nbsp;An&nbsp;element&nbsp;of&nbsp;a&nbsp;pipeline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511573">NodeDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511604">//&nbsp;The&nbsp;cursor,&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511625">nodeElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511656">//&nbsp;An&nbsp;else&nbsp;action.&nbsp;Not&nbsp;added&nbsp;to&nbsp;tree.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511695">nodeEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511726">//&nbsp;An&nbsp;end&nbsp;action.&nbsp;Not&nbsp;added&nbsp;to&nbsp;tree.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511764">NodeField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511795">//&nbsp;A&nbsp;field&nbsp;or&nbsp;method&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511823">NodeIdentifier</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511854">//&nbsp;An&nbsp;identifier;&nbsp;always&nbsp;a&nbsp;function&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511897">NodeIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511928">//&nbsp;An&nbsp;if&nbsp;action.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511946">NodeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4511977">//&nbsp;A&nbsp;list&nbsp;of&nbsp;Nodes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4511998">NodeNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512029">//&nbsp;An&nbsp;untyped&nbsp;nil&nbsp;constant.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512058">NodeNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512089">//&nbsp;A&nbsp;numerical&nbsp;constant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512115">NodePipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512146">//&nbsp;A&nbsp;pipeline&nbsp;of&nbsp;commands.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512174">NodeRange</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512205">//&nbsp;A&nbsp;range&nbsp;action.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512225">NodeString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512256">//&nbsp;A&nbsp;string&nbsp;constant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512279">NodeTemplate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512310">//&nbsp;A&nbsp;template&nbsp;invocation&nbsp;action.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512344">NodeVariable</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512375">//&nbsp;A&nbsp;$&nbsp;variable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512393">NodeWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4512424">//&nbsp;A&nbsp;with&nbsp;action.</span><br>
<span class="lineno"></span><span class="op" id="4512442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4512445">//&nbsp;Nodes.</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4512456">//&nbsp;ListNode&nbsp;holds&nbsp;a&nbsp;sequence&nbsp;of&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="4512495">type</span>&nbsp;<span class="ident" id="4512500">ListNode</span>&nbsp;<span class="keyword" id="4512509">struct</span>&nbsp;<span class="op" id="4512516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512519"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512529"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512534">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4512540">*</span><span class="ident" id="4512541"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512547">Nodes</span>&nbsp;<span class="op" id="4512553">[</span><span class="op" id="4512554">]</span><span class="ident" id="4512555"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="comment" id="4512560">//&nbsp;The&nbsp;element&nbsp;nodes&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="4512599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4512602">func</span>&nbsp;<span class="op" id="4512607">(</span><span class="ident" id="4512608">t</span>&nbsp;<span class="op" id="4512610">*</span><span class="ident" id="4512611"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4512615">)</span>&nbsp;<span class="ident" id="4512617">newList</span><span class="op" id="4512624">(</span><span class="ident" id="4512625">pos</span>&nbsp;<span class="ident" id="4512629"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4512632">)</span>&nbsp;<span class="op" id="4512634">*</span><span class="ident" id="4512635"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span>&nbsp;<span class="op" id="4512644">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4512647">return</span>&nbsp;<span class="op" id="4512654">&amp;</span><span class="ident" id="4512655"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4512663">{</span><span class="ident" id="4512664">tr</span><span class="op" id="4512666">:</span>&nbsp;<span class="ident" id="4512668"><a href="/text/template/parse/node.go.html#4512608">t</a></span><span class="op" id="4512669">,</span>&nbsp;<span class="ident" id="4512671">NodeType</span><span class="op" id="4512679">:</span>&nbsp;<span class="ident" id="4512681"><a href="/text/template/parse/node.go.html#4511946">NodeList</a></span><span class="op" id="4512689">,</span>&nbsp;<span class="ident" id="4512691">Pos</span><span class="op" id="4512694">:</span>&nbsp;<span class="ident" id="4512696"><a href="/text/template/parse/node.go.html#4512625">pos</a></span><span class="op" id="4512699">}</span><br>
<span class="lineno"></span><span class="op" id="4512701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4512704">func</span>&nbsp;<span class="op" id="4512709">(</span><span class="ident" id="4512710">l</span>&nbsp;<span class="op" id="4512712">*</span><span class="ident" id="4512713"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4512721">)</span>&nbsp;<span class="builtinfunc" id="4512723">append</span><span class="op" id="4512729">(</span><span class="ident" id="4512730">n</span>&nbsp;<span class="ident" id="4512732"><a href="/text/template/parse/node.go.html#4510399">Node</a></span><span class="op" id="4512736">)</span>&nbsp;<span class="op" id="4512738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512741"><a href="/text/template/parse/node.go.html#4512710">l</a></span><span class="op" id="4512742">.</span><span class="ident" id="4512743">Nodes</span>&nbsp;<span class="op" id="4512749">=</span>&nbsp;<span class="builtinfunc" id="4512751">append</span><span class="op" id="4512757">(</span><span class="ident" id="4512758"><a href="/text/template/parse/node.go.html#4512710">l</a></span><span class="op" id="4512759">.</span><span class="ident" id="4512760">Nodes</span><span class="op" id="4512765">,</span>&nbsp;<span class="ident" id="4512767"><a href="/text/template/parse/node.go.html#4512730">n</a></span><span class="op" id="4512768">)</span><br>
<span class="lineno">90</span><span class="op" id="4512770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4512773">func</span>&nbsp;<span class="op" id="4512778">(</span><span class="ident" id="4512779">l</span>&nbsp;<span class="op" id="4512781">*</span><span class="ident" id="4512782"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4512790">)</span>&nbsp;<span class="ident" id="4512792">tree</span><span class="op" id="4512796">(</span><span class="op" id="4512797">)</span>&nbsp;<span class="op" id="4512799">*</span><span class="ident" id="4512800"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4512805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4512808">return</span>&nbsp;<span class="ident" id="4512815"><a href="/text/template/parse/node.go.html#4512779">l</a></span><span class="op" id="4512816">.</span><span class="ident" id="4512817">tr</span><br>
<span class="lineno"></span><span class="op" id="4512820">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="4512823">func</span>&nbsp;<span class="op" id="4512828">(</span><span class="ident" id="4512829">l</span>&nbsp;<span class="op" id="4512831">*</span><span class="ident" id="4512832"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4512840">)</span>&nbsp;<span class="ident" id="4512842">String</span><span class="op" id="4512848">(</span><span class="op" id="4512849">)</span>&nbsp;<span class="builtintype" id="4512851">string</span>&nbsp;<span class="op" id="4512858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512861">b</span>&nbsp;<span class="op" id="4512863">:=</span>&nbsp;<span class="builtinfunc" id="4512866">new</span><span class="op" id="4512869">(</span><span class="ident" id="4512870"><a href="/text/template/parse/node.go.html#4510100">bytes</a></span><span class="op" id="4512875">.</span><span class="ident" id="4512876">Buffer</span><span class="op" id="4512882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4512885">for</span>&nbsp;<span class="ident" id="4512889">_</span><span class="op" id="4512890">,</span>&nbsp;<span class="ident" id="4512892">n</span>&nbsp;<span class="op" id="4512894">:=</span>&nbsp;<span class="keyword" id="4512897">range</span>&nbsp;<span class="ident" id="4512903"><a href="/text/template/parse/node.go.html#4512829">l</a></span><span class="op" id="4512904">.</span><span class="ident" id="4512905">Nodes</span>&nbsp;<span class="op" id="4512911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4512915"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4512918">.</span><span class="ident" id="4512919">Fprint</span><span class="op" id="4512925">(</span><span class="ident" id="4512926"><a href="/text/template/parse/node.go.html#4512861">b</a></span><span class="op" id="4512927">,</span>&nbsp;<span class="ident" id="4512929"><a href="/text/template/parse/node.go.html#4512892">n</a></span><span class="op" id="4512930">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4512933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4512936">return</span>&nbsp;<span class="ident" id="4512943"><a href="/text/template/parse/node.go.html#4512861">b</a></span><span class="op" id="4512944">.</span><span class="ident" id="4512945">String</span><span class="op" id="4512951">(</span><span class="op" id="4512952">)</span><br>
<span class="lineno"></span><span class="op" id="4512954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4512957">func</span>&nbsp;<span class="op" id="4512962">(</span><span class="ident" id="4512963">l</span>&nbsp;<span class="op" id="4512965">*</span><span class="ident" id="4512966"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4512974">)</span>&nbsp;<span class="ident" id="4512976">CopyList</span><span class="op" id="4512984">(</span><span class="op" id="4512985">)</span>&nbsp;<span class="op" id="4512987">*</span><span class="ident" id="4512988"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span>&nbsp;<span class="op" id="4512997">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513000">if</span>&nbsp;<span class="ident" id="4513003"><a href="/text/template/parse/node.go.html#4512963">l</a></span>&nbsp;<span class="op" id="4513005">==</span>&nbsp;<span class="ident" id="4513008">nil</span>&nbsp;<span class="op" id="4513012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513016">return</span>&nbsp;<span class="ident" id="4513023"><a href="/text/template/parse/node.go.html#4512963">l</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4513026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513029">n</span>&nbsp;<span class="op" id="4513031">:=</span>&nbsp;<span class="ident" id="4513034"><a href="/text/template/parse/node.go.html#4512963">l</a></span><span class="op" id="4513035">.</span><span class="ident" id="4513036">tr</span><span class="op" id="4513038">.</span><span class="ident" id="4513039">newList</span><span class="op" id="4513046">(</span><span class="ident" id="4513047"><a href="/text/template/parse/node.go.html#4512963">l</a></span><span class="op" id="4513048">.</span><span class="ident" id="4513049">Pos</span><span class="op" id="4513052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513055">for</span>&nbsp;<span class="ident" id="4513059">_</span><span class="op" id="4513060">,</span>&nbsp;<span class="ident" id="4513062">elem</span>&nbsp;<span class="op" id="4513067">:=</span>&nbsp;<span class="keyword" id="4513070">range</span>&nbsp;<span class="ident" id="4513076"><a href="/text/template/parse/node.go.html#4512963">l</a></span><span class="op" id="4513077">.</span><span class="ident" id="4513078">Nodes</span>&nbsp;<span class="op" id="4513084">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513088"><a href="/text/template/parse/node.go.html#4513029">n</a></span><span class="op" id="4513089">.</span><span class="builtinfunc" id="4513090">append</span><span class="op" id="4513096">(</span><span class="ident" id="4513097"><a href="/text/template/parse/node.go.html#4513062">elem</a></span><span class="op" id="4513101">.</span><span class="ident" id="4513102">Copy</span><span class="op" id="4513106">(</span><span class="op" id="4513107">)</span><span class="op" id="4513108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4513111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513114">return</span>&nbsp;<span class="ident" id="4513121"><a href="/text/template/parse/node.go.html#4513029">n</a></span><br>
<span class="lineno"></span><span class="op" id="4513123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="4513126">func</span>&nbsp;<span class="op" id="4513131">(</span><span class="ident" id="4513132">l</span>&nbsp;<span class="op" id="4513134">*</span><span class="ident" id="4513135"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4513143">)</span>&nbsp;<span class="ident" id="4513145">Copy</span><span class="op" id="4513149">(</span><span class="op" id="4513150">)</span>&nbsp;<span class="ident" id="4513152"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4513157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513160">return</span>&nbsp;<span class="ident" id="4513167"><a href="/text/template/parse/node.go.html#4513132">l</a></span><span class="op" id="4513168">.</span><span class="ident" id="4513169">CopyList</span><span class="op" id="4513177">(</span><span class="op" id="4513178">)</span><br>
<span class="lineno"></span><span class="op" id="4513180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4513183">//&nbsp;TextNode&nbsp;holds&nbsp;plain&nbsp;text.</span><br>
<span class="lineno">120</span><span class="keyword" id="4513213">type</span>&nbsp;<span class="ident" id="4513218">TextNode</span>&nbsp;<span class="keyword" id="4513227">struct</span>&nbsp;<span class="op" id="4513234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513237"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513247"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513252">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4513257">*</span><span class="ident" id="4513258"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513264">Text</span>&nbsp;<span class="op" id="4513269">[</span><span class="op" id="4513270">]</span><span class="builtintype" id="4513271">byte</span>&nbsp;<span class="comment" id="4513276">//&nbsp;The&nbsp;text;&nbsp;may&nbsp;span&nbsp;newlines.</span><br>
<span class="lineno">125</span><span class="op" id="4513308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4513311">func</span>&nbsp;<span class="op" id="4513316">(</span><span class="ident" id="4513317">t</span>&nbsp;<span class="op" id="4513319">*</span><span class="ident" id="4513320"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4513324">)</span>&nbsp;<span class="ident" id="4513326">newText</span><span class="op" id="4513333">(</span><span class="ident" id="4513334">pos</span>&nbsp;<span class="ident" id="4513338"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4513341">,</span>&nbsp;<span class="ident" id="4513343">text</span>&nbsp;<span class="builtintype" id="4513348">string</span><span class="op" id="4513354">)</span>&nbsp;<span class="op" id="4513356">*</span><span class="ident" id="4513357"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span>&nbsp;<span class="op" id="4513366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513369">return</span>&nbsp;<span class="op" id="4513376">&amp;</span><span class="ident" id="4513377"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span><span class="op" id="4513385">{</span><span class="ident" id="4513386">tr</span><span class="op" id="4513388">:</span>&nbsp;<span class="ident" id="4513390"><a href="/text/template/parse/node.go.html#4513317">t</a></span><span class="op" id="4513391">,</span>&nbsp;<span class="ident" id="4513393">NodeType</span><span class="op" id="4513401">:</span>&nbsp;<span class="ident" id="4513403"><a href="/text/template/parse/node.go.html#4511261">NodeText</a></span><span class="op" id="4513411">,</span>&nbsp;<span class="ident" id="4513413">Pos</span><span class="op" id="4513416">:</span>&nbsp;<span class="ident" id="4513418"><a href="/text/template/parse/node.go.html#4513334">pos</a></span><span class="op" id="4513421">,</span>&nbsp;<span class="ident" id="4513423">Text</span><span class="op" id="4513427">:</span>&nbsp;<span class="op" id="4513429">[</span><span class="op" id="4513430">]</span><span class="builtintype" id="4513431">byte</span><span class="op" id="4513435">(</span><span class="ident" id="4513436"><a href="/text/template/parse/node.go.html#4513343">text</a></span><span class="op" id="4513440">)</span><span class="op" id="4513441">}</span><br>
<span class="lineno"></span><span class="op" id="4513443">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="4513446">func</span>&nbsp;<span class="op" id="4513451">(</span><span class="ident" id="4513452">t</span>&nbsp;<span class="op" id="4513454">*</span><span class="ident" id="4513455"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span><span class="op" id="4513463">)</span>&nbsp;<span class="ident" id="4513465">String</span><span class="op" id="4513471">(</span><span class="op" id="4513472">)</span>&nbsp;<span class="builtintype" id="4513474">string</span>&nbsp;<span class="op" id="4513481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513484">return</span>&nbsp;<span class="ident" id="4513491"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4513494">.</span><span class="ident" id="4513495">Sprintf</span><span class="op" id="4513502">(</span><span class="ident" id="4513503"><a href="/text/template/parse/node.go.html#4510144">textFormat</a></span><span class="op" id="4513513">,</span>&nbsp;<span class="ident" id="4513515"><a href="/text/template/parse/node.go.html#4513452">t</a></span><span class="op" id="4513516">.</span><span class="ident" id="4513517">Text</span><span class="op" id="4513521">)</span><br>
<span class="lineno"></span><span class="op" id="4513523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="4513526">func</span>&nbsp;<span class="op" id="4513531">(</span><span class="ident" id="4513532">t</span>&nbsp;<span class="op" id="4513534">*</span><span class="ident" id="4513535"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span><span class="op" id="4513543">)</span>&nbsp;<span class="ident" id="4513545">tree</span><span class="op" id="4513549">(</span><span class="op" id="4513550">)</span>&nbsp;<span class="op" id="4513552">*</span><span class="ident" id="4513553"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4513558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513561">return</span>&nbsp;<span class="ident" id="4513568"><a href="/text/template/parse/node.go.html#4513532">t</a></span><span class="op" id="4513569">.</span><span class="ident" id="4513570">tr</span><br>
<span class="lineno"></span><span class="op" id="4513573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4513576">func</span>&nbsp;<span class="op" id="4513581">(</span><span class="ident" id="4513582">t</span>&nbsp;<span class="op" id="4513584">*</span><span class="ident" id="4513585"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span><span class="op" id="4513593">)</span>&nbsp;<span class="ident" id="4513595">Copy</span><span class="op" id="4513599">(</span><span class="op" id="4513600">)</span>&nbsp;<span class="ident" id="4513602"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4513607">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4513610">return</span>&nbsp;<span class="op" id="4513617">&amp;</span><span class="ident" id="4513618"><a href="/text/template/parse/node.go.html#4513218">TextNode</a></span><span class="op" id="4513626">{</span><span class="ident" id="4513627">tr</span><span class="op" id="4513629">:</span>&nbsp;<span class="ident" id="4513631"><a href="/text/template/parse/node.go.html#4513582">t</a></span><span class="op" id="4513632">.</span><span class="ident" id="4513633">tr</span><span class="op" id="4513635">,</span>&nbsp;<span class="ident" id="4513637">NodeType</span><span class="op" id="4513645">:</span>&nbsp;<span class="ident" id="4513647"><a href="/text/template/parse/node.go.html#4511261">NodeText</a></span><span class="op" id="4513655">,</span>&nbsp;<span class="ident" id="4513657">Pos</span><span class="op" id="4513660">:</span>&nbsp;<span class="ident" id="4513662"><a href="/text/template/parse/node.go.html#4513582">t</a></span><span class="op" id="4513663">.</span><span class="ident" id="4513664">Pos</span><span class="op" id="4513667">,</span>&nbsp;<span class="ident" id="4513669">Text</span><span class="op" id="4513673">:</span>&nbsp;<span class="builtinfunc" id="4513675">append</span><span class="op" id="4513681">(</span><span class="op" id="4513682">[</span><span class="op" id="4513683">]</span><span class="builtintype" id="4513684">byte</span><span class="op" id="4513688">{</span><span class="op" id="4513689">}</span><span class="op" id="4513690">,</span>&nbsp;<span class="ident" id="4513692"><a href="/text/template/parse/node.go.html#4513582">t</a></span><span class="op" id="4513693">.</span><span class="ident" id="4513694">Text</span><span class="op" id="4513698">...</span><span class="op" id="4513701">)</span><span class="op" id="4513702">}</span><br>
<span class="lineno"></span><span class="op" id="4513704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4513707">//&nbsp;PipeNode&nbsp;holds&nbsp;a&nbsp;pipeline&nbsp;with&nbsp;optional&nbsp;declaration</span><br>
<span class="lineno"></span><span class="keyword" id="4513762">type</span>&nbsp;<span class="ident" id="4513767">PipeNode</span>&nbsp;<span class="keyword" id="4513776">struct</span>&nbsp;<span class="op" id="4513783">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513786"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513796"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513801">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4513806">*</span><span class="ident" id="4513807"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513813">Line</span>&nbsp;<span class="builtintype" id="4513818">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4513834">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513904">Decl</span>&nbsp;<span class="op" id="4513909">[</span><span class="op" id="4513910">]</span><span class="op" id="4513911">*</span><span class="ident" id="4513912"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span>&nbsp;<span class="comment" id="4513925">//&nbsp;Variable&nbsp;declarations&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4513969">Cmds</span>&nbsp;<span class="op" id="4513974">[</span><span class="op" id="4513975">]</span><span class="op" id="4513976">*</span><span class="ident" id="4513977"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span>&nbsp;&nbsp;<span class="comment" id="4513990">//&nbsp;The&nbsp;commands&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="4514024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4514027">func</span>&nbsp;<span class="op" id="4514032">(</span><span class="ident" id="4514033">t</span>&nbsp;<span class="op" id="4514035">*</span><span class="ident" id="4514036"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4514040">)</span>&nbsp;<span class="ident" id="4514042">newPipeline</span><span class="op" id="4514053">(</span><span class="ident" id="4514054">pos</span>&nbsp;<span class="ident" id="4514058"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4514061">,</span>&nbsp;<span class="ident" id="4514063">line</span>&nbsp;<span class="builtintype" id="4514068">int</span><span class="op" id="4514071">,</span>&nbsp;<span class="ident" id="4514073">decl</span>&nbsp;<span class="op" id="4514078">[</span><span class="op" id="4514079">]</span><span class="op" id="4514080">*</span><span class="ident" id="4514081"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4514093">)</span>&nbsp;<span class="op" id="4514095">*</span><span class="ident" id="4514096"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span>&nbsp;<span class="op" id="4514105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514108">return</span>&nbsp;<span class="op" id="4514115">&amp;</span><span class="ident" id="4514116"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514124">{</span><span class="ident" id="4514125">tr</span><span class="op" id="4514127">:</span>&nbsp;<span class="ident" id="4514129"><a href="/text/template/parse/node.go.html#4514033">t</a></span><span class="op" id="4514130">,</span>&nbsp;<span class="ident" id="4514132">NodeType</span><span class="op" id="4514140">:</span>&nbsp;<span class="ident" id="4514142"><a href="/text/template/parse/node.go.html#4512115">NodePipe</a></span><span class="op" id="4514150">,</span>&nbsp;<span class="ident" id="4514152">Pos</span><span class="op" id="4514155">:</span>&nbsp;<span class="ident" id="4514157"><a href="/text/template/parse/node.go.html#4514054">pos</a></span><span class="op" id="4514160">,</span>&nbsp;<span class="ident" id="4514162">Line</span><span class="op" id="4514166">:</span>&nbsp;<span class="ident" id="4514168"><a href="/text/template/parse/node.go.html#4514063">line</a></span><span class="op" id="4514172">,</span>&nbsp;<span class="ident" id="4514174">Decl</span><span class="op" id="4514178">:</span>&nbsp;<span class="ident" id="4514180"><a href="/text/template/parse/node.go.html#4514073">decl</a></span><span class="op" id="4514184">}</span><br>
<span class="lineno">155</span><span class="op" id="4514186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4514189">func</span>&nbsp;<span class="op" id="4514194">(</span><span class="ident" id="4514195">p</span>&nbsp;<span class="op" id="4514197">*</span><span class="ident" id="4514198"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514206">)</span>&nbsp;<span class="builtinfunc" id="4514208">append</span><span class="op" id="4514214">(</span><span class="ident" id="4514215">command</span>&nbsp;<span class="op" id="4514223">*</span><span class="ident" id="4514224"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4514235">)</span>&nbsp;<span class="op" id="4514237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514240"><a href="/text/template/parse/node.go.html#4514195">p</a></span><span class="op" id="4514241">.</span><span class="ident" id="4514242">Cmds</span>&nbsp;<span class="op" id="4514247">=</span>&nbsp;<span class="builtinfunc" id="4514249">append</span><span class="op" id="4514255">(</span><span class="ident" id="4514256"><a href="/text/template/parse/node.go.html#4514195">p</a></span><span class="op" id="4514257">.</span><span class="ident" id="4514258">Cmds</span><span class="op" id="4514262">,</span>&nbsp;<span class="ident" id="4514264"><a href="/text/template/parse/node.go.html#4514215">command</a></span><span class="op" id="4514271">)</span><br>
<span class="lineno"></span><span class="op" id="4514273">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="4514276">func</span>&nbsp;<span class="op" id="4514281">(</span><span class="ident" id="4514282">p</span>&nbsp;<span class="op" id="4514284">*</span><span class="ident" id="4514285"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514293">)</span>&nbsp;<span class="ident" id="4514295">String</span><span class="op" id="4514301">(</span><span class="op" id="4514302">)</span>&nbsp;<span class="builtintype" id="4514304">string</span>&nbsp;<span class="op" id="4514311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514314">s</span>&nbsp;<span class="op" id="4514316">:=</span>&nbsp;<span class="string" id="4514319">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514323">if</span>&nbsp;<span class="builtinfunc" id="4514326">len</span><span class="op" id="4514329">(</span><span class="ident" id="4514330"><a href="/text/template/parse/node.go.html#4514282">p</a></span><span class="op" id="4514331">.</span><span class="ident" id="4514332">Decl</span><span class="op" id="4514336">)</span>&nbsp;<span class="op" id="4514338">&gt;</span>&nbsp;<span class="num" id="4514340">0</span>&nbsp;<span class="op" id="4514342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514346">for</span>&nbsp;<span class="ident" id="4514350">i</span><span class="op" id="4514351">,</span>&nbsp;<span class="ident" id="4514353">v</span>&nbsp;<span class="op" id="4514355">:=</span>&nbsp;<span class="keyword" id="4514358">range</span>&nbsp;<span class="ident" id="4514364"><a href="/text/template/parse/node.go.html#4514282">p</a></span><span class="op" id="4514365">.</span><span class="ident" id="4514366">Decl</span>&nbsp;<span class="op" id="4514371">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514376">if</span>&nbsp;<span class="ident" id="4514379"><a href="/text/template/parse/node.go.html#4514350">i</a></span>&nbsp;<span class="op" id="4514381">&gt;</span>&nbsp;<span class="num" id="4514383">0</span>&nbsp;<span class="op" id="4514385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514391"><a href="/text/template/parse/node.go.html#4514314">s</a></span>&nbsp;<span class="op" id="4514393">+=</span>&nbsp;<span class="string" id="4514396">&#34;,&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514409"><a href="/text/template/parse/node.go.html#4514314">s</a></span>&nbsp;<span class="op" id="4514411">+=</span>&nbsp;<span class="ident" id="4514414"><a href="/text/template/parse/node.go.html#4514353">v</a></span><span class="op" id="4514415">.</span><span class="ident" id="4514416">String</span><span class="op" id="4514422">(</span><span class="op" id="4514423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514427">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514431"><a href="/text/template/parse/node.go.html#4514314">s</a></span>&nbsp;<span class="op" id="4514433">+=</span>&nbsp;<span class="string" id="4514436">&#34;&nbsp;:=&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514447">for</span>&nbsp;<span class="ident" id="4514451">i</span><span class="op" id="4514452">,</span>&nbsp;<span class="ident" id="4514454">c</span>&nbsp;<span class="op" id="4514456">:=</span>&nbsp;<span class="keyword" id="4514459">range</span>&nbsp;<span class="ident" id="4514465"><a href="/text/template/parse/node.go.html#4514282">p</a></span><span class="op" id="4514466">.</span><span class="ident" id="4514467">Cmds</span>&nbsp;<span class="op" id="4514472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514476">if</span>&nbsp;<span class="ident" id="4514479"><a href="/text/template/parse/node.go.html#4514451">i</a></span>&nbsp;<span class="op" id="4514481">&gt;</span>&nbsp;<span class="num" id="4514483">0</span>&nbsp;<span class="op" id="4514485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514490"><a href="/text/template/parse/node.go.html#4514314">s</a></span>&nbsp;<span class="op" id="4514492">+=</span>&nbsp;<span class="string" id="4514495">&#34;&nbsp;|&nbsp;&#34;</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514507"><a href="/text/template/parse/node.go.html#4514314">s</a></span>&nbsp;<span class="op" id="4514509">+=</span>&nbsp;<span class="ident" id="4514512"><a href="/text/template/parse/node.go.html#4514454">c</a></span><span class="op" id="4514513">.</span><span class="ident" id="4514514">String</span><span class="op" id="4514520">(</span><span class="op" id="4514521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514527">return</span>&nbsp;<span class="ident" id="4514534"><a href="/text/template/parse/node.go.html#4514314">s</a></span><br>
<span class="lineno"></span><span class="op" id="4514536">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="4514539">func</span>&nbsp;<span class="op" id="4514544">(</span><span class="ident" id="4514545">p</span>&nbsp;<span class="op" id="4514547">*</span><span class="ident" id="4514548"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514556">)</span>&nbsp;<span class="ident" id="4514558">tree</span><span class="op" id="4514562">(</span><span class="op" id="4514563">)</span>&nbsp;<span class="op" id="4514565">*</span><span class="ident" id="4514566"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4514571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514574">return</span>&nbsp;<span class="ident" id="4514581"><a href="/text/template/parse/node.go.html#4514545">p</a></span><span class="op" id="4514582">.</span><span class="ident" id="4514583">tr</span><br>
<span class="lineno"></span><span class="op" id="4514586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="4514589">func</span>&nbsp;<span class="op" id="4514594">(</span><span class="ident" id="4514595">p</span>&nbsp;<span class="op" id="4514597">*</span><span class="ident" id="4514598"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514606">)</span>&nbsp;<span class="ident" id="4514608">CopyPipe</span><span class="op" id="4514616">(</span><span class="op" id="4514617">)</span>&nbsp;<span class="op" id="4514619">*</span><span class="ident" id="4514620"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span>&nbsp;<span class="op" id="4514629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514632">if</span>&nbsp;<span class="ident" id="4514635"><a href="/text/template/parse/node.go.html#4514595">p</a></span>&nbsp;<span class="op" id="4514637">==</span>&nbsp;<span class="ident" id="4514640">nil</span>&nbsp;<span class="op" id="4514644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514648">return</span>&nbsp;<span class="ident" id="4514655"><a href="/text/template/parse/node.go.html#4514595">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514661">var</span>&nbsp;<span class="ident" id="4514665">decl</span>&nbsp;<span class="op" id="4514670">[</span><span class="op" id="4514671">]</span><span class="op" id="4514672">*</span><span class="ident" id="4514673"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514687">for</span>&nbsp;<span class="ident" id="4514691">_</span><span class="op" id="4514692">,</span>&nbsp;<span class="ident" id="4514694">d</span>&nbsp;<span class="op" id="4514696">:=</span>&nbsp;<span class="keyword" id="4514699">range</span>&nbsp;<span class="ident" id="4514705"><a href="/text/template/parse/node.go.html#4514595">p</a></span><span class="op" id="4514706">.</span><span class="ident" id="4514707">Decl</span>&nbsp;<span class="op" id="4514712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514716"><a href="/text/template/parse/node.go.html#4514665">decl</a></span>&nbsp;<span class="op" id="4514721">=</span>&nbsp;<span class="builtinfunc" id="4514723">append</span><span class="op" id="4514729">(</span><span class="ident" id="4514730"><a href="/text/template/parse/node.go.html#4514665">decl</a></span><span class="op" id="4514734">,</span>&nbsp;<span class="ident" id="4514736"><a href="/text/template/parse/node.go.html#4514694">d</a></span><span class="op" id="4514737">.</span><span class="ident" id="4514738">Copy</span><span class="op" id="4514742">(</span><span class="op" id="4514743">)</span><span class="op" id="4514744">.</span><span class="op" id="4514745">(</span><span class="op" id="4514746">*</span><span class="ident" id="4514747"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4514759">)</span><span class="op" id="4514760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514766">n</span>&nbsp;<span class="op" id="4514768">:=</span>&nbsp;<span class="ident" id="4514771"><a href="/text/template/parse/node.go.html#4514595">p</a></span><span class="op" id="4514772">.</span><span class="ident" id="4514773">tr</span><span class="op" id="4514775">.</span><span class="ident" id="4514776">newPipeline</span><span class="op" id="4514787">(</span><span class="ident" id="4514788"><a href="/text/template/parse/node.go.html#4514595">p</a></span><span class="op" id="4514789">.</span><span class="ident" id="4514790">Pos</span><span class="op" id="4514793">,</span>&nbsp;<span class="ident" id="4514795"><a href="/text/template/parse/node.go.html#4514595">p</a></span><span class="op" id="4514796">.</span><span class="ident" id="4514797">Line</span><span class="op" id="4514801">,</span>&nbsp;<span class="ident" id="4514803"><a href="/text/template/parse/node.go.html#4514665">decl</a></span><span class="op" id="4514807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514810">for</span>&nbsp;<span class="ident" id="4514814">_</span><span class="op" id="4514815">,</span>&nbsp;<span class="ident" id="4514817">c</span>&nbsp;<span class="op" id="4514819">:=</span>&nbsp;<span class="keyword" id="4514822">range</span>&nbsp;<span class="ident" id="4514828"><a href="/text/template/parse/node.go.html#4514595">p</a></span><span class="op" id="4514829">.</span><span class="ident" id="4514830">Cmds</span>&nbsp;<span class="op" id="4514835">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4514839"><a href="/text/template/parse/node.go.html#4514766">n</a></span><span class="op" id="4514840">.</span><span class="builtinfunc" id="4514841">append</span><span class="op" id="4514847">(</span><span class="ident" id="4514848"><a href="/text/template/parse/node.go.html#4514817">c</a></span><span class="op" id="4514849">.</span><span class="ident" id="4514850">Copy</span><span class="op" id="4514854">(</span><span class="op" id="4514855">)</span><span class="op" id="4514856">.</span><span class="op" id="4514857">(</span><span class="op" id="4514858">*</span><span class="ident" id="4514859"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4514870">)</span><span class="op" id="4514871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4514874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514877">return</span>&nbsp;<span class="ident" id="4514884"><a href="/text/template/parse/node.go.html#4514766">n</a></span><br>
<span class="lineno"></span><span class="op" id="4514886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="4514889">func</span>&nbsp;<span class="op" id="4514894">(</span><span class="ident" id="4514895">p</span>&nbsp;<span class="op" id="4514897">*</span><span class="ident" id="4514898"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4514906">)</span>&nbsp;<span class="ident" id="4514908">Copy</span><span class="op" id="4514912">(</span><span class="op" id="4514913">)</span>&nbsp;<span class="ident" id="4514915"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4514920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4514923">return</span>&nbsp;<span class="ident" id="4514930"><a href="/text/template/parse/node.go.html#4514895">p</a></span><span class="op" id="4514931">.</span><span class="ident" id="4514932">CopyPipe</span><span class="op" id="4514940">(</span><span class="op" id="4514941">)</span><br>
<span class="lineno"></span><span class="op" id="4514943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4514946">//&nbsp;ActionNode&nbsp;holds&nbsp;an&nbsp;action&nbsp;(something&nbsp;bounded&nbsp;by&nbsp;delimiters).</span><br>
<span class="lineno">205</span><span class="comment" id="4515011">//&nbsp;Control&nbsp;actions&nbsp;have&nbsp;their&nbsp;own&nbsp;nodes;&nbsp;ActionNode&nbsp;represents&nbsp;simple</span><br>
<span class="lineno"></span><span class="comment" id="4515081">//&nbsp;ones&nbsp;such&nbsp;as&nbsp;field&nbsp;evaluations&nbsp;and&nbsp;parenthesized&nbsp;pipelines.</span><br>
<span class="lineno"></span><span class="keyword" id="4515144">type</span>&nbsp;<span class="ident" id="4515149">ActionNode</span>&nbsp;<span class="keyword" id="4515160">struct</span>&nbsp;<span class="op" id="4515167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515170"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515180"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515185">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4515190">*</span><span class="ident" id="4515191"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515197">Line</span>&nbsp;<span class="builtintype" id="4515202">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4515212">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515282">Pipe</span>&nbsp;<span class="op" id="4515287">*</span><span class="ident" id="4515288"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span>&nbsp;<span class="comment" id="4515297">//&nbsp;The&nbsp;pipeline&nbsp;in&nbsp;the&nbsp;action.</span><br>
<span class="lineno"></span><span class="op" id="4515328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="4515331">func</span>&nbsp;<span class="op" id="4515336">(</span><span class="ident" id="4515337">t</span>&nbsp;<span class="op" id="4515339">*</span><span class="ident" id="4515340"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4515344">)</span>&nbsp;<span class="ident" id="4515346">newAction</span><span class="op" id="4515355">(</span><span class="ident" id="4515356">pos</span>&nbsp;<span class="ident" id="4515360"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4515363">,</span>&nbsp;<span class="ident" id="4515365">line</span>&nbsp;<span class="builtintype" id="4515370">int</span><span class="op" id="4515373">,</span>&nbsp;<span class="ident" id="4515375">pipe</span>&nbsp;<span class="op" id="4515380">*</span><span class="ident" id="4515381"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4515389">)</span>&nbsp;<span class="op" id="4515391">*</span><span class="ident" id="4515392"><a href="/text/template/parse/node.go.html#4515149">ActionNode</a></span>&nbsp;<span class="op" id="4515403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4515406">return</span>&nbsp;<span class="op" id="4515413">&amp;</span><span class="ident" id="4515414"><a href="/text/template/parse/node.go.html#4515149">ActionNode</a></span><span class="op" id="4515424">{</span><span class="ident" id="4515425">tr</span><span class="op" id="4515427">:</span>&nbsp;<span class="ident" id="4515429"><a href="/text/template/parse/node.go.html#4515337">t</a></span><span class="op" id="4515430">,</span>&nbsp;<span class="ident" id="4515432">NodeType</span><span class="op" id="4515440">:</span>&nbsp;<span class="ident" id="4515442"><a href="/text/template/parse/node.go.html#4511308">NodeAction</a></span><span class="op" id="4515452">,</span>&nbsp;<span class="ident" id="4515454">Pos</span><span class="op" id="4515457">:</span>&nbsp;<span class="ident" id="4515459"><a href="/text/template/parse/node.go.html#4515356">pos</a></span><span class="op" id="4515462">,</span>&nbsp;<span class="ident" id="4515464">Line</span><span class="op" id="4515468">:</span>&nbsp;<span class="ident" id="4515470"><a href="/text/template/parse/node.go.html#4515365">line</a></span><span class="op" id="4515474">,</span>&nbsp;<span class="ident" id="4515476">Pipe</span><span class="op" id="4515480">:</span>&nbsp;<span class="ident" id="4515482"><a href="/text/template/parse/node.go.html#4515375">pipe</a></span><span class="op" id="4515486">}</span><br>
<span class="lineno"></span><span class="op" id="4515488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4515491">func</span>&nbsp;<span class="op" id="4515496">(</span><span class="ident" id="4515497">a</span>&nbsp;<span class="op" id="4515499">*</span><span class="ident" id="4515500"><a href="/text/template/parse/node.go.html#4515149">ActionNode</a></span><span class="op" id="4515510">)</span>&nbsp;<span class="ident" id="4515512">String</span><span class="op" id="4515518">(</span><span class="op" id="4515519">)</span>&nbsp;<span class="builtintype" id="4515521">string</span>&nbsp;<span class="op" id="4515528">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4515531">return</span>&nbsp;<span class="ident" id="4515538"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4515541">.</span><span class="ident" id="4515542">Sprintf</span><span class="op" id="4515549">(</span><span class="string" id="4515550">&#34;{{%s}}&#34;</span><span class="op" id="4515558">,</span>&nbsp;<span class="ident" id="4515560"><a href="/text/template/parse/node.go.html#4515497">a</a></span><span class="op" id="4515561">.</span><span class="ident" id="4515562">Pipe</span><span class="op" id="4515566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="4515569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4515572">func</span>&nbsp;<span class="op" id="4515577">(</span><span class="ident" id="4515578">a</span>&nbsp;<span class="op" id="4515580">*</span><span class="ident" id="4515581"><a href="/text/template/parse/node.go.html#4515149">ActionNode</a></span><span class="op" id="4515591">)</span>&nbsp;<span class="ident" id="4515593">tree</span><span class="op" id="4515597">(</span><span class="op" id="4515598">)</span>&nbsp;<span class="op" id="4515600">*</span><span class="ident" id="4515601"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4515606">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4515609">return</span>&nbsp;<span class="ident" id="4515616"><a href="/text/template/parse/node.go.html#4515578">a</a></span><span class="op" id="4515617">.</span><span class="ident" id="4515618">tr</span><br>
<span class="lineno"></span><span class="op" id="4515621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4515624">func</span>&nbsp;<span class="op" id="4515629">(</span><span class="ident" id="4515630">a</span>&nbsp;<span class="op" id="4515632">*</span><span class="ident" id="4515633"><a href="/text/template/parse/node.go.html#4515149">ActionNode</a></span><span class="op" id="4515643">)</span>&nbsp;<span class="ident" id="4515645">Copy</span><span class="op" id="4515649">(</span><span class="op" id="4515650">)</span>&nbsp;<span class="ident" id="4515652"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4515657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4515660">return</span>&nbsp;<span class="ident" id="4515667"><a href="/text/template/parse/node.go.html#4515630">a</a></span><span class="op" id="4515668">.</span><span class="ident" id="4515669">tr</span><span class="op" id="4515671">.</span><span class="ident" id="4515672">newAction</span><span class="op" id="4515681">(</span><span class="ident" id="4515682"><a href="/text/template/parse/node.go.html#4515630">a</a></span><span class="op" id="4515683">.</span><span class="ident" id="4515684">Pos</span><span class="op" id="4515687">,</span>&nbsp;<span class="ident" id="4515689"><a href="/text/template/parse/node.go.html#4515630">a</a></span><span class="op" id="4515690">.</span><span class="ident" id="4515691">Line</span><span class="op" id="4515695">,</span>&nbsp;<span class="ident" id="4515697"><a href="/text/template/parse/node.go.html#4515630">a</a></span><span class="op" id="4515698">.</span><span class="ident" id="4515699">Pipe</span><span class="op" id="4515703">.</span><span class="ident" id="4515704">CopyPipe</span><span class="op" id="4515712">(</span><span class="op" id="4515713">)</span><span class="op" id="4515714">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="op" id="4515717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4515720">//&nbsp;CommandNode&nbsp;holds&nbsp;a&nbsp;command&nbsp;(a&nbsp;pipeline&nbsp;inside&nbsp;an&nbsp;evaluating&nbsp;action).</span><br>
<span class="lineno"></span><span class="keyword" id="4515793">type</span>&nbsp;<span class="ident" id="4515798">CommandNode</span>&nbsp;<span class="keyword" id="4515810">struct</span>&nbsp;<span class="op" id="4515817">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515820"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515830"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515835">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4515840">*</span><span class="ident" id="4515841"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4515847">Args</span>&nbsp;<span class="op" id="4515852">[</span><span class="op" id="4515853">]</span><span class="ident" id="4515854"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="comment" id="4515859">//&nbsp;Arguments&nbsp;in&nbsp;lexical&nbsp;order:&nbsp;Identifier,&nbsp;field,&nbsp;or&nbsp;constant.</span><br>
<span class="lineno"></span><span class="op" id="4515922">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="4515925">func</span>&nbsp;<span class="op" id="4515930">(</span><span class="ident" id="4515931">t</span>&nbsp;<span class="op" id="4515933">*</span><span class="ident" id="4515934"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4515938">)</span>&nbsp;<span class="ident" id="4515940">newCommand</span><span class="op" id="4515950">(</span><span class="ident" id="4515951">pos</span>&nbsp;<span class="ident" id="4515955"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4515958">)</span>&nbsp;<span class="op" id="4515960">*</span><span class="ident" id="4515961"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span>&nbsp;<span class="op" id="4515973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4515976">return</span>&nbsp;<span class="op" id="4515983">&amp;</span><span class="ident" id="4515984"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4515995">{</span><span class="ident" id="4515996">tr</span><span class="op" id="4515998">:</span>&nbsp;<span class="ident" id="4516000"><a href="/text/template/parse/node.go.html#4515931">t</a></span><span class="op" id="4516001">,</span>&nbsp;<span class="ident" id="4516003">NodeType</span><span class="op" id="4516011">:</span>&nbsp;<span class="ident" id="4516013"><a href="/text/template/parse/node.go.html#4511512">NodeCommand</a></span><span class="op" id="4516024">,</span>&nbsp;<span class="ident" id="4516026">Pos</span><span class="op" id="4516029">:</span>&nbsp;<span class="ident" id="4516031"><a href="/text/template/parse/node.go.html#4515951">pos</a></span><span class="op" id="4516034">}</span><br>
<span class="lineno"></span><span class="op" id="4516036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="4516039">func</span>&nbsp;<span class="op" id="4516044">(</span><span class="ident" id="4516045">c</span>&nbsp;<span class="op" id="4516047">*</span><span class="ident" id="4516048"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4516059">)</span>&nbsp;<span class="builtinfunc" id="4516061">append</span><span class="op" id="4516067">(</span><span class="ident" id="4516068">arg</span>&nbsp;<span class="ident" id="4516072"><a href="/text/template/parse/node.go.html#4510399">Node</a></span><span class="op" id="4516076">)</span>&nbsp;<span class="op" id="4516078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516081"><a href="/text/template/parse/node.go.html#4516045">c</a></span><span class="op" id="4516082">.</span><span class="ident" id="4516083">Args</span>&nbsp;<span class="op" id="4516088">=</span>&nbsp;<span class="builtinfunc" id="4516090">append</span><span class="op" id="4516096">(</span><span class="ident" id="4516097"><a href="/text/template/parse/node.go.html#4516045">c</a></span><span class="op" id="4516098">.</span><span class="ident" id="4516099">Args</span><span class="op" id="4516103">,</span>&nbsp;<span class="ident" id="4516105"><a href="/text/template/parse/node.go.html#4516068">arg</a></span><span class="op" id="4516108">)</span><br>
<span class="lineno"></span><span class="op" id="4516110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4516113">func</span>&nbsp;<span class="op" id="4516118">(</span><span class="ident" id="4516119">c</span>&nbsp;<span class="op" id="4516121">*</span><span class="ident" id="4516122"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4516133">)</span>&nbsp;<span class="ident" id="4516135">String</span><span class="op" id="4516141">(</span><span class="op" id="4516142">)</span>&nbsp;<span class="builtintype" id="4516144">string</span>&nbsp;<span class="op" id="4516151">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516154">s</span>&nbsp;<span class="op" id="4516156">:=</span>&nbsp;<span class="string" id="4516159">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516163">for</span>&nbsp;<span class="ident" id="4516167">i</span><span class="op" id="4516168">,</span>&nbsp;<span class="ident" id="4516170">arg</span>&nbsp;<span class="op" id="4516174">:=</span>&nbsp;<span class="keyword" id="4516177">range</span>&nbsp;<span class="ident" id="4516183"><a href="/text/template/parse/node.go.html#4516119">c</a></span><span class="op" id="4516184">.</span><span class="ident" id="4516185">Args</span>&nbsp;<span class="op" id="4516190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516194">if</span>&nbsp;<span class="ident" id="4516197"><a href="/text/template/parse/node.go.html#4516167">i</a></span>&nbsp;<span class="op" id="4516199">&gt;</span>&nbsp;<span class="num" id="4516201">0</span>&nbsp;<span class="op" id="4516203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516208"><a href="/text/template/parse/node.go.html#4516154">s</a></span>&nbsp;<span class="op" id="4516210">+=</span>&nbsp;<span class="string" id="4516213">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4516219">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516223">if</span>&nbsp;<span class="ident" id="4516226">arg</span><span class="op" id="4516229">,</span>&nbsp;<span class="ident" id="4516231">ok</span>&nbsp;<span class="op" id="4516234">:=</span>&nbsp;<span class="ident" id="4516237"><a href="/text/template/parse/node.go.html#4516170">arg</a></span><span class="op" id="4516240">.</span><span class="op" id="4516241">(</span><span class="op" id="4516242">*</span><span class="ident" id="4516243"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4516251">)</span><span class="op" id="4516252">;</span>&nbsp;<span class="ident" id="4516254"><a href="/text/template/parse/node.go.html#4516231">ok</a></span>&nbsp;<span class="op" id="4516257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516262"><a href="/text/template/parse/node.go.html#4516154">s</a></span>&nbsp;<span class="op" id="4516264">+=</span>&nbsp;<span class="string" id="4516267">&#34;(&#34;</span>&nbsp;<span class="op" id="4516271">+</span>&nbsp;<span class="ident" id="4516273"><a href="/text/template/parse/node.go.html#4516226">arg</a></span><span class="op" id="4516276">.</span><span class="ident" id="4516277">String</span><span class="op" id="4516283">(</span><span class="op" id="4516284">)</span>&nbsp;<span class="op" id="4516286">+</span>&nbsp;<span class="string" id="4516288">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516295">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4516306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516310"><a href="/text/template/parse/node.go.html#4516154">s</a></span>&nbsp;<span class="op" id="4516312">+=</span>&nbsp;<span class="ident" id="4516315"><a href="/text/template/parse/node.go.html#4516170">arg</a></span><span class="op" id="4516318">.</span><span class="ident" id="4516319">String</span><span class="op" id="4516325">(</span><span class="op" id="4516326">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4516329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516332">return</span>&nbsp;<span class="ident" id="4516339"><a href="/text/template/parse/node.go.html#4516154">s</a></span><br>
<span class="lineno"></span><span class="op" id="4516341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4516344">func</span>&nbsp;<span class="op" id="4516349">(</span><span class="ident" id="4516350">c</span>&nbsp;<span class="op" id="4516352">*</span><span class="ident" id="4516353"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4516364">)</span>&nbsp;<span class="ident" id="4516366">tree</span><span class="op" id="4516370">(</span><span class="op" id="4516371">)</span>&nbsp;<span class="op" id="4516373">*</span><span class="ident" id="4516374"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4516379">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516382">return</span>&nbsp;<span class="ident" id="4516389"><a href="/text/template/parse/node.go.html#4516350">c</a></span><span class="op" id="4516390">.</span><span class="ident" id="4516391">tr</span><br>
<span class="lineno"></span><span class="op" id="4516394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4516397">func</span>&nbsp;<span class="op" id="4516402">(</span><span class="ident" id="4516403">c</span>&nbsp;<span class="op" id="4516405">*</span><span class="ident" id="4516406"><a href="/text/template/parse/node.go.html#4515798">CommandNode</a></span><span class="op" id="4516417">)</span>&nbsp;<span class="ident" id="4516419">Copy</span><span class="op" id="4516423">(</span><span class="op" id="4516424">)</span>&nbsp;<span class="ident" id="4516426"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4516431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516434">if</span>&nbsp;<span class="ident" id="4516437"><a href="/text/template/parse/node.go.html#4516403">c</a></span>&nbsp;<span class="op" id="4516439">==</span>&nbsp;<span class="ident" id="4516442">nil</span>&nbsp;<span class="op" id="4516446">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516450">return</span>&nbsp;<span class="ident" id="4516457"><a href="/text/template/parse/node.go.html#4516403">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4516460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516463">n</span>&nbsp;<span class="op" id="4516465">:=</span>&nbsp;<span class="ident" id="4516468"><a href="/text/template/parse/node.go.html#4516403">c</a></span><span class="op" id="4516469">.</span><span class="ident" id="4516470">tr</span><span class="op" id="4516472">.</span><span class="ident" id="4516473">newCommand</span><span class="op" id="4516483">(</span><span class="ident" id="4516484"><a href="/text/template/parse/node.go.html#4516403">c</a></span><span class="op" id="4516485">.</span><span class="ident" id="4516486">Pos</span><span class="op" id="4516489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516492">for</span>&nbsp;<span class="ident" id="4516496">_</span><span class="op" id="4516497">,</span>&nbsp;<span class="ident" id="4516499">c</span>&nbsp;<span class="op" id="4516501">:=</span>&nbsp;<span class="keyword" id="4516504">range</span>&nbsp;<span class="ident" id="4516510"><a href="/text/template/parse/node.go.html#4516403">c</a></span><span class="op" id="4516511">.</span><span class="ident" id="4516512">Args</span>&nbsp;<span class="op" id="4516517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516521"><a href="/text/template/parse/node.go.html#4516463">n</a></span><span class="op" id="4516522">.</span><span class="builtinfunc" id="4516523">append</span><span class="op" id="4516529">(</span><span class="ident" id="4516530"><a href="/text/template/parse/node.go.html#4516499">c</a></span><span class="op" id="4516531">.</span><span class="ident" id="4516532">Copy</span><span class="op" id="4516536">(</span><span class="op" id="4516537">)</span><span class="op" id="4516538">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4516541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516544">return</span>&nbsp;<span class="ident" id="4516551"><a href="/text/template/parse/node.go.html#4516463">n</a></span><br>
<span class="lineno"></span><span class="op" id="4516553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4516556">//&nbsp;IdentifierNode&nbsp;holds&nbsp;an&nbsp;identifier.</span><br>
<span class="lineno">280</span><span class="keyword" id="4516595">type</span>&nbsp;<span class="ident" id="4516600">IdentifierNode</span>&nbsp;<span class="keyword" id="4516615">struct</span>&nbsp;<span class="op" id="4516622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516625"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516635"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516640">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4516646">*</span><span class="ident" id="4516647"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4516653">Ident</span>&nbsp;<span class="builtintype" id="4516659">string</span>&nbsp;<span class="comment" id="4516666">//&nbsp;The&nbsp;identifier&#39;s&nbsp;name.</span><br>
<span class="lineno">285</span><span class="op" id="4516692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4516695">//&nbsp;NewIdentifier&nbsp;returns&nbsp;a&nbsp;new&nbsp;IdentifierNode&nbsp;with&nbsp;the&nbsp;given&nbsp;identifier&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="4516773">func</span>&nbsp;<span class="ident" id="4516778">NewIdentifier</span><span class="op" id="4516791">(</span><span class="ident" id="4516792">ident</span>&nbsp;<span class="builtintype" id="4516798">string</span><span class="op" id="4516804">)</span>&nbsp;<span class="op" id="4516806">*</span><span class="ident" id="4516807"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span>&nbsp;<span class="op" id="4516822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4516825">return</span>&nbsp;<span class="op" id="4516832">&amp;</span><span class="ident" id="4516833"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4516847">{</span><span class="ident" id="4516848">NodeType</span><span class="op" id="4516856">:</span>&nbsp;<span class="ident" id="4516858"><a href="/text/template/parse/node.go.html#4511823">NodeIdentifier</a></span><span class="op" id="4516872">,</span>&nbsp;<span class="ident" id="4516874">Ident</span><span class="op" id="4516879">:</span>&nbsp;<span class="ident" id="4516881"><a href="/text/template/parse/node.go.html#4516792">ident</a></span><span class="op" id="4516886">}</span><br>
<span class="lineno">290</span><span class="op" id="4516888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4516891">//&nbsp;SetPos&nbsp;sets&nbsp;the&nbsp;position.&nbsp;NewIdentifier&nbsp;is&nbsp;a&nbsp;public&nbsp;method&nbsp;so&nbsp;we&nbsp;can&#39;t&nbsp;modify&nbsp;its&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="4516987">//&nbsp;Chained&nbsp;for&nbsp;convenience.</span><br>
<span class="lineno"></span><span class="comment" id="4517015">//&nbsp;TODO:&nbsp;fix&nbsp;one&nbsp;day?</span><br>
<span class="lineno">295</span><span class="keyword" id="4517037">func</span>&nbsp;<span class="op" id="4517042">(</span><span class="ident" id="4517043">i</span>&nbsp;<span class="op" id="4517045">*</span><span class="ident" id="4517046"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4517060">)</span>&nbsp;<span class="ident" id="4517062">SetPos</span><span class="op" id="4517068">(</span><span class="ident" id="4517069">pos</span>&nbsp;<span class="ident" id="4517073"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4517076">)</span>&nbsp;<span class="op" id="4517078">*</span><span class="ident" id="4517079"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span>&nbsp;<span class="op" id="4517094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517097"><a href="/text/template/parse/node.go.html#4517043">i</a></span><span class="op" id="4517098">.</span><span class="ident" id="4517099">Pos</span>&nbsp;<span class="op" id="4517103">=</span>&nbsp;<span class="ident" id="4517105"><a href="/text/template/parse/node.go.html#4517069">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517110">return</span>&nbsp;<span class="ident" id="4517117"><a href="/text/template/parse/node.go.html#4517043">i</a></span><br>
<span class="lineno"></span><span class="op" id="4517119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="4517122">//&nbsp;SetTree&nbsp;sets&nbsp;the&nbsp;parent&nbsp;tree&nbsp;for&nbsp;the&nbsp;node.&nbsp;NewIdentifier&nbsp;is&nbsp;a&nbsp;public&nbsp;method&nbsp;so&nbsp;we&nbsp;can&#39;t&nbsp;modify&nbsp;its&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="4517235">//&nbsp;Chained&nbsp;for&nbsp;convenience.</span><br>
<span class="lineno"></span><span class="comment" id="4517263">//&nbsp;TODO:&nbsp;fix&nbsp;one&nbsp;day?</span><br>
<span class="lineno"></span><span class="keyword" id="4517285">func</span>&nbsp;<span class="op" id="4517290">(</span><span class="ident" id="4517291">i</span>&nbsp;<span class="op" id="4517293">*</span><span class="ident" id="4517294"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4517308">)</span>&nbsp;<span class="ident" id="4517310">SetTree</span><span class="op" id="4517317">(</span><span class="ident" id="4517318">t</span>&nbsp;<span class="op" id="4517320">*</span><span class="ident" id="4517321"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4517325">)</span>&nbsp;<span class="op" id="4517327">*</span><span class="ident" id="4517328"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span>&nbsp;<span class="op" id="4517343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517346"><a href="/text/template/parse/node.go.html#4517291">i</a></span><span class="op" id="4517347">.</span><span class="ident" id="4517348">tr</span>&nbsp;<span class="op" id="4517351">=</span>&nbsp;<span class="ident" id="4517353"><a href="/text/template/parse/node.go.html#4517318">t</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517356">return</span>&nbsp;<span class="ident" id="4517363"><a href="/text/template/parse/node.go.html#4517291">i</a></span><br>
<span class="lineno"></span><span class="op" id="4517365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4517368">func</span>&nbsp;<span class="op" id="4517373">(</span><span class="ident" id="4517374">i</span>&nbsp;<span class="op" id="4517376">*</span><span class="ident" id="4517377"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4517391">)</span>&nbsp;<span class="ident" id="4517393">String</span><span class="op" id="4517399">(</span><span class="op" id="4517400">)</span>&nbsp;<span class="builtintype" id="4517402">string</span>&nbsp;<span class="op" id="4517409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517412">return</span>&nbsp;<span class="ident" id="4517419"><a href="/text/template/parse/node.go.html#4517374">i</a></span><span class="op" id="4517420">.</span><span class="ident" id="4517421">Ident</span><br>
<span class="lineno">310</span><span class="op" id="4517427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4517430">func</span>&nbsp;<span class="op" id="4517435">(</span><span class="ident" id="4517436">i</span>&nbsp;<span class="op" id="4517438">*</span><span class="ident" id="4517439"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4517453">)</span>&nbsp;<span class="ident" id="4517455">tree</span><span class="op" id="4517459">(</span><span class="op" id="4517460">)</span>&nbsp;<span class="op" id="4517462">*</span><span class="ident" id="4517463"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4517468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517471">return</span>&nbsp;<span class="ident" id="4517478"><a href="/text/template/parse/node.go.html#4517436">i</a></span><span class="op" id="4517479">.</span><span class="ident" id="4517480">tr</span><br>
<span class="lineno"></span><span class="op" id="4517483">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="4517486">func</span>&nbsp;<span class="op" id="4517491">(</span><span class="ident" id="4517492">i</span>&nbsp;<span class="op" id="4517494">*</span><span class="ident" id="4517495"><a href="/text/template/parse/node.go.html#4516600">IdentifierNode</a></span><span class="op" id="4517509">)</span>&nbsp;<span class="ident" id="4517511">Copy</span><span class="op" id="4517515">(</span><span class="op" id="4517516">)</span>&nbsp;<span class="ident" id="4517518"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4517523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517526">return</span>&nbsp;<span class="ident" id="4517533"><a href="/text/template/parse/node.go.html#4516778">NewIdentifier</a></span><span class="op" id="4517546">(</span><span class="ident" id="4517547"><a href="/text/template/parse/node.go.html#4517492">i</a></span><span class="op" id="4517548">.</span><span class="ident" id="4517549">Ident</span><span class="op" id="4517554">)</span><span class="op" id="4517555">.</span><span class="ident" id="4517556">SetTree</span><span class="op" id="4517563">(</span><span class="ident" id="4517564"><a href="/text/template/parse/node.go.html#4517492">i</a></span><span class="op" id="4517565">.</span><span class="ident" id="4517566">tr</span><span class="op" id="4517568">)</span><span class="op" id="4517569">.</span><span class="ident" id="4517570">SetPos</span><span class="op" id="4517576">(</span><span class="ident" id="4517577"><a href="/text/template/parse/node.go.html#4517492">i</a></span><span class="op" id="4517578">.</span><span class="ident" id="4517579">Pos</span><span class="op" id="4517582">)</span><br>
<span class="lineno"></span><span class="op" id="4517584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="4517587">//&nbsp;VariableNode&nbsp;holds&nbsp;a&nbsp;list&nbsp;of&nbsp;variable&nbsp;names,&nbsp;possibly&nbsp;with&nbsp;chained&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="4517663">//&nbsp;accesses.&nbsp;The&nbsp;dollar&nbsp;sign&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;(first)&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="4517721">type</span>&nbsp;<span class="ident" id="4517726">VariableNode</span>&nbsp;<span class="keyword" id="4517739">struct</span>&nbsp;<span class="op" id="4517746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517749"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517759"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517764">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4517770">*</span><span class="ident" id="4517771"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4517777">Ident</span>&nbsp;<span class="op" id="4517783">[</span><span class="op" id="4517784">]</span><span class="builtintype" id="4517785">string</span>&nbsp;<span class="comment" id="4517792">//&nbsp;Variable&nbsp;name&nbsp;and&nbsp;fields&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="4517838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4517841">func</span>&nbsp;<span class="op" id="4517846">(</span><span class="ident" id="4517847">t</span>&nbsp;<span class="op" id="4517849">*</span><span class="ident" id="4517850"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4517854">)</span>&nbsp;<span class="ident" id="4517856">newVariable</span><span class="op" id="4517867">(</span><span class="ident" id="4517868">pos</span>&nbsp;<span class="ident" id="4517872"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4517875">,</span>&nbsp;<span class="ident" id="4517877">ident</span>&nbsp;<span class="builtintype" id="4517883">string</span><span class="op" id="4517889">)</span>&nbsp;<span class="op" id="4517891">*</span><span class="ident" id="4517892"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span>&nbsp;<span class="op" id="4517905">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4517908">return</span>&nbsp;<span class="op" id="4517915">&amp;</span><span class="ident" id="4517916"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4517928">{</span><span class="ident" id="4517929">tr</span><span class="op" id="4517931">:</span>&nbsp;<span class="ident" id="4517933"><a href="/text/template/parse/node.go.html#4517847">t</a></span><span class="op" id="4517934">,</span>&nbsp;<span class="ident" id="4517936">NodeType</span><span class="op" id="4517944">:</span>&nbsp;<span class="ident" id="4517946"><a href="/text/template/parse/node.go.html#4512344">NodeVariable</a></span><span class="op" id="4517958">,</span>&nbsp;<span class="ident" id="4517960">Pos</span><span class="op" id="4517963">:</span>&nbsp;<span class="ident" id="4517965"><a href="/text/template/parse/node.go.html#4517868">pos</a></span><span class="op" id="4517968">,</span>&nbsp;<span class="ident" id="4517970">Ident</span><span class="op" id="4517975">:</span>&nbsp;<span class="ident" id="4517977"><a href="/text/template/parse/node.go.html#4510127">strings</a></span><span class="op" id="4517984">.</span><span class="ident" id="4517985">Split</span><span class="op" id="4517990">(</span><span class="ident" id="4517991"><a href="/text/template/parse/node.go.html#4517877">ident</a></span><span class="op" id="4517996">,</span>&nbsp;<span class="string" id="4517998">&#34;.&#34;</span><span class="op" id="4518001">)</span><span class="op" id="4518002">}</span><br>
<span class="lineno"></span><span class="op" id="4518004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518007">func</span>&nbsp;<span class="op" id="4518012">(</span><span class="ident" id="4518013">v</span>&nbsp;<span class="op" id="4518015">*</span><span class="ident" id="4518016"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4518028">)</span>&nbsp;<span class="ident" id="4518030">String</span><span class="op" id="4518036">(</span><span class="op" id="4518037">)</span>&nbsp;<span class="builtintype" id="4518039">string</span>&nbsp;<span class="op" id="4518046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518049">s</span>&nbsp;<span class="op" id="4518051">:=</span>&nbsp;<span class="string" id="4518054">&#34;&#34;</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518058">for</span>&nbsp;<span class="ident" id="4518062">i</span><span class="op" id="4518063">,</span>&nbsp;<span class="ident" id="4518065">id</span>&nbsp;<span class="op" id="4518068">:=</span>&nbsp;<span class="keyword" id="4518071">range</span>&nbsp;<span class="ident" id="4518077"><a href="/text/template/parse/node.go.html#4518013">v</a></span><span class="op" id="4518078">.</span><span class="ident" id="4518079">Ident</span>&nbsp;<span class="op" id="4518085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518089">if</span>&nbsp;<span class="ident" id="4518092"><a href="/text/template/parse/node.go.html#4518062">i</a></span>&nbsp;<span class="op" id="4518094">&gt;</span>&nbsp;<span class="num" id="4518096">0</span>&nbsp;<span class="op" id="4518098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518103"><a href="/text/template/parse/node.go.html#4518049">s</a></span>&nbsp;<span class="op" id="4518105">+=</span>&nbsp;<span class="string" id="4518108">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4518114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518118"><a href="/text/template/parse/node.go.html#4518049">s</a></span>&nbsp;<span class="op" id="4518120">+=</span>&nbsp;<span class="ident" id="4518123"><a href="/text/template/parse/node.go.html#4518065">id</a></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4518127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518130">return</span>&nbsp;<span class="ident" id="4518137"><a href="/text/template/parse/node.go.html#4518049">s</a></span><br>
<span class="lineno"></span><span class="op" id="4518139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518142">func</span>&nbsp;<span class="op" id="4518147">(</span><span class="ident" id="4518148">v</span>&nbsp;<span class="op" id="4518150">*</span><span class="ident" id="4518151"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4518163">)</span>&nbsp;<span class="ident" id="4518165">tree</span><span class="op" id="4518169">(</span><span class="op" id="4518170">)</span>&nbsp;<span class="op" id="4518172">*</span><span class="ident" id="4518173"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4518178">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518181">return</span>&nbsp;<span class="ident" id="4518188"><a href="/text/template/parse/node.go.html#4518148">v</a></span><span class="op" id="4518189">.</span><span class="ident" id="4518190">tr</span><br>
<span class="lineno"></span><span class="op" id="4518193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518196">func</span>&nbsp;<span class="op" id="4518201">(</span><span class="ident" id="4518202">v</span>&nbsp;<span class="op" id="4518204">*</span><span class="ident" id="4518205"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4518217">)</span>&nbsp;<span class="ident" id="4518219">Copy</span><span class="op" id="4518223">(</span><span class="op" id="4518224">)</span>&nbsp;<span class="ident" id="4518226"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4518231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518234">return</span>&nbsp;<span class="op" id="4518241">&amp;</span><span class="ident" id="4518242"><a href="/text/template/parse/node.go.html#4517726">VariableNode</a></span><span class="op" id="4518254">{</span><span class="ident" id="4518255">tr</span><span class="op" id="4518257">:</span>&nbsp;<span class="ident" id="4518259"><a href="/text/template/parse/node.go.html#4518202">v</a></span><span class="op" id="4518260">.</span><span class="ident" id="4518261">tr</span><span class="op" id="4518263">,</span>&nbsp;<span class="ident" id="4518265">NodeType</span><span class="op" id="4518273">:</span>&nbsp;<span class="ident" id="4518275"><a href="/text/template/parse/node.go.html#4512344">NodeVariable</a></span><span class="op" id="4518287">,</span>&nbsp;<span class="ident" id="4518289">Pos</span><span class="op" id="4518292">:</span>&nbsp;<span class="ident" id="4518294"><a href="/text/template/parse/node.go.html#4518202">v</a></span><span class="op" id="4518295">.</span><span class="ident" id="4518296">Pos</span><span class="op" id="4518299">,</span>&nbsp;<span class="ident" id="4518301">Ident</span><span class="op" id="4518306">:</span>&nbsp;<span class="builtinfunc" id="4518308">append</span><span class="op" id="4518314">(</span><span class="op" id="4518315">[</span><span class="op" id="4518316">]</span><span class="builtintype" id="4518317">string</span><span class="op" id="4518323">{</span><span class="op" id="4518324">}</span><span class="op" id="4518325">,</span>&nbsp;<span class="ident" id="4518327"><a href="/text/template/parse/node.go.html#4518202">v</a></span><span class="op" id="4518328">.</span><span class="ident" id="4518329">Ident</span><span class="op" id="4518334">...</span><span class="op" id="4518337">)</span><span class="op" id="4518338">}</span><br>
<span class="lineno">350</span><span class="op" id="4518340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4518343">//&nbsp;DotNode&nbsp;holds&nbsp;the&nbsp;special&nbsp;identifier&nbsp;&#39;.&#39;.</span><br>
<span class="lineno"></span><span class="keyword" id="4518388">type</span>&nbsp;<span class="ident" id="4518393">DotNode</span>&nbsp;<span class="keyword" id="4518401">struct</span>&nbsp;<span class="op" id="4518408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518411"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518421"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4518426">tr</span>&nbsp;<span class="op" id="4518429">*</span><span class="ident" id="4518430"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="4518435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518438">func</span>&nbsp;<span class="op" id="4518443">(</span><span class="ident" id="4518444">t</span>&nbsp;<span class="op" id="4518446">*</span><span class="ident" id="4518447"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4518451">)</span>&nbsp;<span class="ident" id="4518453">newDot</span><span class="op" id="4518459">(</span><span class="ident" id="4518460">pos</span>&nbsp;<span class="ident" id="4518464"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4518467">)</span>&nbsp;<span class="op" id="4518469">*</span><span class="ident" id="4518470"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span>&nbsp;<span class="op" id="4518478">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518481">return</span>&nbsp;<span class="op" id="4518488">&amp;</span><span class="ident" id="4518489"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span><span class="op" id="4518496">{</span><span class="ident" id="4518497">tr</span><span class="op" id="4518499">:</span>&nbsp;<span class="ident" id="4518501"><a href="/text/template/parse/node.go.html#4518444">t</a></span><span class="op" id="4518502">,</span>&nbsp;<span class="ident" id="4518504">NodeType</span><span class="op" id="4518512">:</span>&nbsp;<span class="ident" id="4518514"><a href="/text/template/parse/node.go.html#4511573">NodeDot</a></span><span class="op" id="4518521">,</span>&nbsp;<span class="ident" id="4518523">Pos</span><span class="op" id="4518526">:</span>&nbsp;<span class="ident" id="4518528"><a href="/text/template/parse/node.go.html#4518460">pos</a></span><span class="op" id="4518531">}</span><br>
<span class="lineno"></span><span class="op" id="4518533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518536">func</span>&nbsp;<span class="op" id="4518541">(</span><span class="ident" id="4518542">d</span>&nbsp;<span class="op" id="4518544">*</span><span class="ident" id="4518545"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span><span class="op" id="4518552">)</span>&nbsp;<span class="ident" id="4518554">Type</span><span class="op" id="4518558">(</span><span class="op" id="4518559">)</span>&nbsp;<span class="ident" id="4518561"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span>&nbsp;<span class="op" id="4518570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4518573">//&nbsp;Override&nbsp;method&nbsp;on&nbsp;embedded&nbsp;NodeType&nbsp;for&nbsp;API&nbsp;compatibility.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4518637">//&nbsp;TODO:&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem;&nbsp;could&nbsp;change&nbsp;API&nbsp;without&nbsp;effect&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4518705">//&nbsp;api&nbsp;tool&nbsp;complains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518729">return</span>&nbsp;<span class="ident" id="4518736"><a href="/text/template/parse/node.go.html#4511573">NodeDot</a></span><br>
<span class="lineno"></span><span class="op" id="4518744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="4518747">func</span>&nbsp;<span class="op" id="4518752">(</span><span class="ident" id="4518753">d</span>&nbsp;<span class="op" id="4518755">*</span><span class="ident" id="4518756"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span><span class="op" id="4518763">)</span>&nbsp;<span class="ident" id="4518765">String</span><span class="op" id="4518771">(</span><span class="op" id="4518772">)</span>&nbsp;<span class="builtintype" id="4518774">string</span>&nbsp;<span class="op" id="4518781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518784">return</span>&nbsp;<span class="string" id="4518791">&#34;.&#34;</span><br>
<span class="lineno"></span><span class="op" id="4518795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518798">func</span>&nbsp;<span class="op" id="4518803">(</span><span class="ident" id="4518804">d</span>&nbsp;<span class="op" id="4518806">*</span><span class="ident" id="4518807"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span><span class="op" id="4518814">)</span>&nbsp;<span class="ident" id="4518816">tree</span><span class="op" id="4518820">(</span><span class="op" id="4518821">)</span>&nbsp;<span class="op" id="4518823">*</span><span class="ident" id="4518824"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4518829">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518832">return</span>&nbsp;<span class="ident" id="4518839"><a href="/text/template/parse/node.go.html#4518804">d</a></span><span class="op" id="4518840">.</span><span class="ident" id="4518841">tr</span><br>
<span class="lineno"></span><span class="op" id="4518844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4518847">func</span>&nbsp;<span class="op" id="4518852">(</span><span class="ident" id="4518853">d</span>&nbsp;<span class="op" id="4518855">*</span><span class="ident" id="4518856"><a href="/text/template/parse/node.go.html#4518393">DotNode</a></span><span class="op" id="4518863">)</span>&nbsp;<span class="ident" id="4518865">Copy</span><span class="op" id="4518869">(</span><span class="op" id="4518870">)</span>&nbsp;<span class="ident" id="4518872"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4518877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4518880">return</span>&nbsp;<span class="ident" id="4518887"><a href="/text/template/parse/node.go.html#4518853">d</a></span><span class="op" id="4518888">.</span><span class="ident" id="4518889">tr</span><span class="op" id="4518891">.</span><span class="ident" id="4518892">newDot</span><span class="op" id="4518898">(</span><span class="ident" id="4518899"><a href="/text/template/parse/node.go.html#4518853">d</a></span><span class="op" id="4518900">.</span><span class="ident" id="4518901">Pos</span><span class="op" id="4518904">)</span><br>
<span class="lineno">380</span><span class="op" id="4518906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4518909">//&nbsp;NilNode&nbsp;holds&nbsp;the&nbsp;special&nbsp;identifier&nbsp;&#39;nil&#39;&nbsp;representing&nbsp;an&nbsp;untyped&nbsp;nil&nbsp;constant.</span><br>
<span class="lineno"></span><span class="keyword" id="4518993">type</span>&nbsp;<span class="ident" id="4518998">NilNode</span>&nbsp;<span class="keyword" id="4519006">struct</span>&nbsp;<span class="op" id="4519013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519016"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519026"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519031">tr</span>&nbsp;<span class="op" id="4519034">*</span><span class="ident" id="4519035"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="4519040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4519043">func</span>&nbsp;<span class="op" id="4519048">(</span><span class="ident" id="4519049">t</span>&nbsp;<span class="op" id="4519051">*</span><span class="ident" id="4519052"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4519056">)</span>&nbsp;<span class="ident" id="4519058">newNil</span><span class="op" id="4519064">(</span><span class="ident" id="4519065">pos</span>&nbsp;<span class="ident" id="4519069"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4519072">)</span>&nbsp;<span class="op" id="4519074">*</span><span class="ident" id="4519075"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span>&nbsp;<span class="op" id="4519083">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519086">return</span>&nbsp;<span class="op" id="4519093">&amp;</span><span class="ident" id="4519094"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span><span class="op" id="4519101">{</span><span class="ident" id="4519102">tr</span><span class="op" id="4519104">:</span>&nbsp;<span class="ident" id="4519106"><a href="/text/template/parse/node.go.html#4519049">t</a></span><span class="op" id="4519107">,</span>&nbsp;<span class="ident" id="4519109">NodeType</span><span class="op" id="4519117">:</span>&nbsp;<span class="ident" id="4519119"><a href="/text/template/parse/node.go.html#4511998">NodeNil</a></span><span class="op" id="4519126">,</span>&nbsp;<span class="ident" id="4519128">Pos</span><span class="op" id="4519131">:</span>&nbsp;<span class="ident" id="4519133"><a href="/text/template/parse/node.go.html#4519065">pos</a></span><span class="op" id="4519136">}</span><br>
<span class="lineno"></span><span class="op" id="4519138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4519141">func</span>&nbsp;<span class="op" id="4519146">(</span><span class="ident" id="4519147">n</span>&nbsp;<span class="op" id="4519149">*</span><span class="ident" id="4519150"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span><span class="op" id="4519157">)</span>&nbsp;<span class="ident" id="4519159">Type</span><span class="op" id="4519163">(</span><span class="op" id="4519164">)</span>&nbsp;<span class="ident" id="4519166"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span>&nbsp;<span class="op" id="4519175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4519178">//&nbsp;Override&nbsp;method&nbsp;on&nbsp;embedded&nbsp;NodeType&nbsp;for&nbsp;API&nbsp;compatibility.</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4519242">//&nbsp;TODO:&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem;&nbsp;could&nbsp;change&nbsp;API&nbsp;without&nbsp;effect&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4519310">//&nbsp;api&nbsp;tool&nbsp;complains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519334">return</span>&nbsp;<span class="ident" id="4519341"><a href="/text/template/parse/node.go.html#4511998">NodeNil</a></span><br>
<span class="lineno"></span><span class="op" id="4519349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="keyword" id="4519352">func</span>&nbsp;<span class="op" id="4519357">(</span><span class="ident" id="4519358">n</span>&nbsp;<span class="op" id="4519360">*</span><span class="ident" id="4519361"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span><span class="op" id="4519368">)</span>&nbsp;<span class="ident" id="4519370">String</span><span class="op" id="4519376">(</span><span class="op" id="4519377">)</span>&nbsp;<span class="builtintype" id="4519379">string</span>&nbsp;<span class="op" id="4519386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519389">return</span>&nbsp;<span class="string" id="4519396">&#34;nil&#34;</span><br>
<span class="lineno"></span><span class="op" id="4519402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4519405">func</span>&nbsp;<span class="op" id="4519410">(</span><span class="ident" id="4519411">n</span>&nbsp;<span class="op" id="4519413">*</span><span class="ident" id="4519414"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span><span class="op" id="4519421">)</span>&nbsp;<span class="ident" id="4519423">tree</span><span class="op" id="4519427">(</span><span class="op" id="4519428">)</span>&nbsp;<span class="op" id="4519430">*</span><span class="ident" id="4519431"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4519436">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519439">return</span>&nbsp;<span class="ident" id="4519446"><a href="/text/template/parse/node.go.html#4519411">n</a></span><span class="op" id="4519447">.</span><span class="ident" id="4519448">tr</span><br>
<span class="lineno"></span><span class="op" id="4519451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4519454">func</span>&nbsp;<span class="op" id="4519459">(</span><span class="ident" id="4519460">n</span>&nbsp;<span class="op" id="4519462">*</span><span class="ident" id="4519463"><a href="/text/template/parse/node.go.html#4518998">NilNode</a></span><span class="op" id="4519470">)</span>&nbsp;<span class="ident" id="4519472">Copy</span><span class="op" id="4519476">(</span><span class="op" id="4519477">)</span>&nbsp;<span class="ident" id="4519479"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4519484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519487">return</span>&nbsp;<span class="ident" id="4519494"><a href="/text/template/parse/node.go.html#4519460">n</a></span><span class="op" id="4519495">.</span><span class="ident" id="4519496">tr</span><span class="op" id="4519498">.</span><span class="ident" id="4519499">newNil</span><span class="op" id="4519505">(</span><span class="ident" id="4519506"><a href="/text/template/parse/node.go.html#4519460">n</a></span><span class="op" id="4519507">.</span><span class="ident" id="4519508">Pos</span><span class="op" id="4519511">)</span><br>
<span class="lineno">410</span><span class="op" id="4519513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4519516">//&nbsp;FieldNode&nbsp;holds&nbsp;a&nbsp;field&nbsp;(identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="4519575">//&nbsp;The&nbsp;names&nbsp;may&nbsp;be&nbsp;chained&nbsp;(&#39;.x.y&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="4519613">//&nbsp;The&nbsp;period&nbsp;is&nbsp;dropped&nbsp;from&nbsp;each&nbsp;ident.</span><br>
<span class="lineno">415</span><span class="keyword" id="4519655">type</span>&nbsp;<span class="ident" id="4519660">FieldNode</span>&nbsp;<span class="keyword" id="4519670">struct</span>&nbsp;<span class="op" id="4519677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519680"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519690"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519695">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4519701">*</span><span class="ident" id="4519702"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519708">Ident</span>&nbsp;<span class="op" id="4519714">[</span><span class="op" id="4519715">]</span><span class="builtintype" id="4519716">string</span>&nbsp;<span class="comment" id="4519723">//&nbsp;The&nbsp;identifiers&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno">420</span><span class="op" id="4519760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4519763">func</span>&nbsp;<span class="op" id="4519768">(</span><span class="ident" id="4519769">t</span>&nbsp;<span class="op" id="4519771">*</span><span class="ident" id="4519772"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4519776">)</span>&nbsp;<span class="ident" id="4519778">newField</span><span class="op" id="4519786">(</span><span class="ident" id="4519787">pos</span>&nbsp;<span class="ident" id="4519791"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4519794">,</span>&nbsp;<span class="ident" id="4519796">ident</span>&nbsp;<span class="builtintype" id="4519802">string</span><span class="op" id="4519808">)</span>&nbsp;<span class="op" id="4519810">*</span><span class="ident" id="4519811"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span>&nbsp;<span class="op" id="4519821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4519824">return</span>&nbsp;<span class="op" id="4519831">&amp;</span><span class="ident" id="4519832"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span><span class="op" id="4519841">{</span><span class="ident" id="4519842">tr</span><span class="op" id="4519844">:</span>&nbsp;<span class="ident" id="4519846"><a href="/text/template/parse/node.go.html#4519769">t</a></span><span class="op" id="4519847">,</span>&nbsp;<span class="ident" id="4519849">NodeType</span><span class="op" id="4519857">:</span>&nbsp;<span class="ident" id="4519859"><a href="/text/template/parse/node.go.html#4511764">NodeField</a></span><span class="op" id="4519868">,</span>&nbsp;<span class="ident" id="4519870">Pos</span><span class="op" id="4519873">:</span>&nbsp;<span class="ident" id="4519875"><a href="/text/template/parse/node.go.html#4519787">pos</a></span><span class="op" id="4519878">,</span>&nbsp;<span class="ident" id="4519880">Ident</span><span class="op" id="4519885">:</span>&nbsp;<span class="ident" id="4519887"><a href="/text/template/parse/node.go.html#4510127">strings</a></span><span class="op" id="4519894">.</span><span class="ident" id="4519895">Split</span><span class="op" id="4519900">(</span><span class="ident" id="4519901"><a href="/text/template/parse/node.go.html#4519796">ident</a></span><span class="op" id="4519906">[</span><span class="num" id="4519907">1</span><span class="op" id="4519908">:</span><span class="op" id="4519909">]</span><span class="op" id="4519910">,</span>&nbsp;<span class="string" id="4519912">&#34;.&#34;</span><span class="op" id="4519915">)</span><span class="op" id="4519916">}</span>&nbsp;<span class="comment" id="4519918">//&nbsp;[1:]&nbsp;to&nbsp;drop&nbsp;leading&nbsp;period</span><br>
<span class="lineno"></span><span class="op" id="4519949">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span><span class="keyword" id="4519952">func</span>&nbsp;<span class="op" id="4519957">(</span><span class="ident" id="4519958">f</span>&nbsp;<span class="op" id="4519960">*</span><span class="ident" id="4519961"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span><span class="op" id="4519970">)</span>&nbsp;<span class="ident" id="4519972">String</span><span class="op" id="4519978">(</span><span class="op" id="4519979">)</span>&nbsp;<span class="builtintype" id="4519981">string</span>&nbsp;<span class="op" id="4519988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4519991">s</span>&nbsp;<span class="op" id="4519993">:=</span>&nbsp;<span class="string" id="4519996">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520000">for</span>&nbsp;<span class="ident" id="4520004">_</span><span class="op" id="4520005">,</span>&nbsp;<span class="ident" id="4520007">id</span>&nbsp;<span class="op" id="4520010">:=</span>&nbsp;<span class="keyword" id="4520013">range</span>&nbsp;<span class="ident" id="4520019"><a href="/text/template/parse/node.go.html#4519958">f</a></span><span class="op" id="4520020">.</span><span class="ident" id="4520021">Ident</span>&nbsp;<span class="op" id="4520027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520031"><a href="/text/template/parse/node.go.html#4519991">s</a></span>&nbsp;<span class="op" id="4520033">+=</span>&nbsp;<span class="string" id="4520036">&#34;.&#34;</span>&nbsp;<span class="op" id="4520040">+</span>&nbsp;<span class="ident" id="4520042"><a href="/text/template/parse/node.go.html#4520007">id</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4520046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520049">return</span>&nbsp;<span class="ident" id="4520056"><a href="/text/template/parse/node.go.html#4519991">s</a></span><br>
<span class="lineno"></span><span class="op" id="4520058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4520061">func</span>&nbsp;<span class="op" id="4520066">(</span><span class="ident" id="4520067">f</span>&nbsp;<span class="op" id="4520069">*</span><span class="ident" id="4520070"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span><span class="op" id="4520079">)</span>&nbsp;<span class="ident" id="4520081">tree</span><span class="op" id="4520085">(</span><span class="op" id="4520086">)</span>&nbsp;<span class="op" id="4520088">*</span><span class="ident" id="4520089"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4520094">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520097">return</span>&nbsp;<span class="ident" id="4520104"><a href="/text/template/parse/node.go.html#4520067">f</a></span><span class="op" id="4520105">.</span><span class="ident" id="4520106">tr</span><br>
<span class="lineno"></span><span class="op" id="4520109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4520112">func</span>&nbsp;<span class="op" id="4520117">(</span><span class="ident" id="4520118">f</span>&nbsp;<span class="op" id="4520120">*</span><span class="ident" id="4520121"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span><span class="op" id="4520130">)</span>&nbsp;<span class="ident" id="4520132">Copy</span><span class="op" id="4520136">(</span><span class="op" id="4520137">)</span>&nbsp;<span class="ident" id="4520139"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4520144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520147">return</span>&nbsp;<span class="op" id="4520154">&amp;</span><span class="ident" id="4520155"><a href="/text/template/parse/node.go.html#4519660">FieldNode</a></span><span class="op" id="4520164">{</span><span class="ident" id="4520165">tr</span><span class="op" id="4520167">:</span>&nbsp;<span class="ident" id="4520169"><a href="/text/template/parse/node.go.html#4520118">f</a></span><span class="op" id="4520170">.</span><span class="ident" id="4520171">tr</span><span class="op" id="4520173">,</span>&nbsp;<span class="ident" id="4520175">NodeType</span><span class="op" id="4520183">:</span>&nbsp;<span class="ident" id="4520185"><a href="/text/template/parse/node.go.html#4511764">NodeField</a></span><span class="op" id="4520194">,</span>&nbsp;<span class="ident" id="4520196">Pos</span><span class="op" id="4520199">:</span>&nbsp;<span class="ident" id="4520201"><a href="/text/template/parse/node.go.html#4520118">f</a></span><span class="op" id="4520202">.</span><span class="ident" id="4520203">Pos</span><span class="op" id="4520206">,</span>&nbsp;<span class="ident" id="4520208">Ident</span><span class="op" id="4520213">:</span>&nbsp;<span class="builtinfunc" id="4520215">append</span><span class="op" id="4520221">(</span><span class="op" id="4520222">[</span><span class="op" id="4520223">]</span><span class="builtintype" id="4520224">string</span><span class="op" id="4520230">{</span><span class="op" id="4520231">}</span><span class="op" id="4520232">,</span>&nbsp;<span class="ident" id="4520234"><a href="/text/template/parse/node.go.html#4520118">f</a></span><span class="op" id="4520235">.</span><span class="ident" id="4520236">Ident</span><span class="op" id="4520241">...</span><span class="op" id="4520244">)</span><span class="op" id="4520245">}</span><br>
<span class="lineno">440</span><span class="op" id="4520247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4520250">//&nbsp;ChainNode&nbsp;holds&nbsp;a&nbsp;term&nbsp;followed&nbsp;by&nbsp;a&nbsp;chain&nbsp;of&nbsp;field&nbsp;accesses&nbsp;(identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="4520346">//&nbsp;The&nbsp;names&nbsp;may&nbsp;be&nbsp;chained&nbsp;(&#39;.x.y&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="4520384">//&nbsp;The&nbsp;periods&nbsp;are&nbsp;dropped&nbsp;from&nbsp;each&nbsp;ident.</span><br>
<span class="lineno">445</span><span class="keyword" id="4520428">type</span>&nbsp;<span class="ident" id="4520433">ChainNode</span>&nbsp;<span class="keyword" id="4520443">struct</span>&nbsp;<span class="op" id="4520450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520453"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520463"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520468">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4520474">*</span><span class="ident" id="4520475"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520481">Node</span>&nbsp;&nbsp;<span class="ident" id="4520487"><a href="/text/template/parse/node.go.html#4510399">Node</a></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520493">Field</span>&nbsp;<span class="op" id="4520499">[</span><span class="op" id="4520500">]</span><span class="builtintype" id="4520501">string</span>&nbsp;<span class="comment" id="4520508">//&nbsp;The&nbsp;identifiers&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="4520545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4520548">func</span>&nbsp;<span class="op" id="4520553">(</span><span class="ident" id="4520554">t</span>&nbsp;<span class="op" id="4520556">*</span><span class="ident" id="4520557"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4520561">)</span>&nbsp;<span class="ident" id="4520563">newChain</span><span class="op" id="4520571">(</span><span class="ident" id="4520572">pos</span>&nbsp;<span class="ident" id="4520576"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4520579">,</span>&nbsp;<span class="ident" id="4520581">node</span>&nbsp;<span class="ident" id="4520586"><a href="/text/template/parse/node.go.html#4510399">Node</a></span><span class="op" id="4520590">)</span>&nbsp;<span class="op" id="4520592">*</span><span class="ident" id="4520593"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span>&nbsp;<span class="op" id="4520603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520606">return</span>&nbsp;<span class="op" id="4520613">&amp;</span><span class="ident" id="4520614"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4520623">{</span><span class="ident" id="4520624">tr</span><span class="op" id="4520626">:</span>&nbsp;<span class="ident" id="4520628"><a href="/text/template/parse/node.go.html#4520554">t</a></span><span class="op" id="4520629">,</span>&nbsp;<span class="ident" id="4520631">NodeType</span><span class="op" id="4520639">:</span>&nbsp;<span class="ident" id="4520641"><a href="/text/template/parse/node.go.html#4511447">NodeChain</a></span><span class="op" id="4520650">,</span>&nbsp;<span class="ident" id="4520652">Pos</span><span class="op" id="4520655">:</span>&nbsp;<span class="ident" id="4520657"><a href="/text/template/parse/node.go.html#4520572">pos</a></span><span class="op" id="4520660">,</span>&nbsp;<span class="ident" id="4520662">Node</span><span class="op" id="4520666">:</span>&nbsp;<span class="ident" id="4520668"><a href="/text/template/parse/node.go.html#4520581">node</a></span><span class="op" id="4520672">}</span><br>
<span class="lineno">455</span><span class="op" id="4520674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4520677">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;named&nbsp;field&nbsp;(which&nbsp;should&nbsp;start&nbsp;with&nbsp;a&nbsp;period)&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;chain.</span><br>
<span class="lineno"></span><span class="keyword" id="4520765">func</span>&nbsp;<span class="op" id="4520770">(</span><span class="ident" id="4520771">c</span>&nbsp;<span class="op" id="4520773">*</span><span class="ident" id="4520774"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4520783">)</span>&nbsp;<span class="ident" id="4520785">Add</span><span class="op" id="4520788">(</span><span class="ident" id="4520789">field</span>&nbsp;<span class="builtintype" id="4520795">string</span><span class="op" id="4520801">)</span>&nbsp;<span class="op" id="4520803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520806">if</span>&nbsp;<span class="builtinfunc" id="4520809">len</span><span class="op" id="4520812">(</span><span class="ident" id="4520813"><a href="/text/template/parse/node.go.html#4520789">field</a></span><span class="op" id="4520818">)</span>&nbsp;<span class="op" id="4520820">==</span>&nbsp;<span class="num" id="4520823">0</span>&nbsp;<span class="op" id="4520825">||</span>&nbsp;<span class="ident" id="4520828"><a href="/text/template/parse/node.go.html#4520789">field</a></span><span class="op" id="4520833">[</span><span class="num" id="4520834">0</span><span class="op" id="4520835">]</span>&nbsp;<span class="op" id="4520837">!=</span>&nbsp;<span class="string" id="4520840">&#39;.&#39;</span>&nbsp;<span class="op" id="4520844">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4520848">panic</span><span class="op" id="4520853">(</span><span class="string" id="4520854">&#34;no&nbsp;dot&nbsp;in&nbsp;field&#34;</span><span class="op" id="4520871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4520874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520877"><a href="/text/template/parse/node.go.html#4520789">field</a></span>&nbsp;<span class="op" id="4520883">=</span>&nbsp;<span class="ident" id="4520885"><a href="/text/template/parse/node.go.html#4520789">field</a></span><span class="op" id="4520890">[</span><span class="num" id="4520891">1</span><span class="op" id="4520892">:</span><span class="op" id="4520893">]</span>&nbsp;<span class="comment" id="4520895">//&nbsp;Remove&nbsp;leading&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4520919">if</span>&nbsp;<span class="ident" id="4520922"><a href="/text/template/parse/node.go.html#4520789">field</a></span>&nbsp;<span class="op" id="4520928">==</span>&nbsp;<span class="string" id="4520931">&#34;&#34;</span>&nbsp;<span class="op" id="4520934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4520938">panic</span><span class="op" id="4520943">(</span><span class="string" id="4520944">&#34;empty&nbsp;field&#34;</span><span class="op" id="4520957">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4520960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4520963"><a href="/text/template/parse/node.go.html#4520771">c</a></span><span class="op" id="4520964">.</span><span class="ident" id="4520965">Field</span>&nbsp;<span class="op" id="4520971">=</span>&nbsp;<span class="builtinfunc" id="4520973">append</span><span class="op" id="4520979">(</span><span class="ident" id="4520980"><a href="/text/template/parse/node.go.html#4520771">c</a></span><span class="op" id="4520981">.</span><span class="ident" id="4520982">Field</span><span class="op" id="4520987">,</span>&nbsp;<span class="ident" id="4520989"><a href="/text/template/parse/node.go.html#4520789">field</a></span><span class="op" id="4520994">)</span><br>
<span class="lineno"></span><span class="op" id="4520996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4520999">func</span>&nbsp;<span class="op" id="4521004">(</span><span class="ident" id="4521005">c</span>&nbsp;<span class="op" id="4521007">*</span><span class="ident" id="4521008"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4521017">)</span>&nbsp;<span class="ident" id="4521019">String</span><span class="op" id="4521025">(</span><span class="op" id="4521026">)</span>&nbsp;<span class="builtintype" id="4521028">string</span>&nbsp;<span class="op" id="4521035">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521038">s</span>&nbsp;<span class="op" id="4521040">:=</span>&nbsp;<span class="ident" id="4521043"><a href="/text/template/parse/node.go.html#4521005">c</a></span><span class="op" id="4521044">.</span><span class="ident" id="4521045">Node</span><span class="op" id="4521049">.</span><span class="ident" id="4521050">String</span><span class="op" id="4521056">(</span><span class="op" id="4521057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521060">if</span>&nbsp;<span class="ident" id="4521063">_</span><span class="op" id="4521064">,</span>&nbsp;<span class="ident" id="4521066">ok</span>&nbsp;<span class="op" id="4521069">:=</span>&nbsp;<span class="ident" id="4521072"><a href="/text/template/parse/node.go.html#4521005">c</a></span><span class="op" id="4521073">.</span><span class="ident" id="4521074">Node</span><span class="op" id="4521078">.</span><span class="op" id="4521079">(</span><span class="op" id="4521080">*</span><span class="ident" id="4521081"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4521089">)</span><span class="op" id="4521090">;</span>&nbsp;<span class="ident" id="4521092"><a href="/text/template/parse/node.go.html#4521066">ok</a></span>&nbsp;<span class="op" id="4521095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521099"><a href="/text/template/parse/node.go.html#4521038">s</a></span>&nbsp;<span class="op" id="4521101">=</span>&nbsp;<span class="string" id="4521103">&#34;(&#34;</span>&nbsp;<span class="op" id="4521107">+</span>&nbsp;<span class="ident" id="4521109"><a href="/text/template/parse/node.go.html#4521038">s</a></span>&nbsp;<span class="op" id="4521111">+</span>&nbsp;<span class="string" id="4521113">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4521118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521121">for</span>&nbsp;<span class="ident" id="4521125">_</span><span class="op" id="4521126">,</span>&nbsp;<span class="ident" id="4521128">field</span>&nbsp;<span class="op" id="4521134">:=</span>&nbsp;<span class="keyword" id="4521137">range</span>&nbsp;<span class="ident" id="4521143"><a href="/text/template/parse/node.go.html#4521005">c</a></span><span class="op" id="4521144">.</span><span class="ident" id="4521145">Field</span>&nbsp;<span class="op" id="4521151">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521155"><a href="/text/template/parse/node.go.html#4521038">s</a></span>&nbsp;<span class="op" id="4521157">+=</span>&nbsp;<span class="string" id="4521160">&#34;.&#34;</span>&nbsp;<span class="op" id="4521164">+</span>&nbsp;<span class="ident" id="4521166"><a href="/text/template/parse/node.go.html#4521128">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4521173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521176">return</span>&nbsp;<span class="ident" id="4521183"><a href="/text/template/parse/node.go.html#4521038">s</a></span><br>
<span class="lineno"></span><span class="op" id="4521185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="4521188">func</span>&nbsp;<span class="op" id="4521193">(</span><span class="ident" id="4521194">c</span>&nbsp;<span class="op" id="4521196">*</span><span class="ident" id="4521197"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4521206">)</span>&nbsp;<span class="ident" id="4521208">tree</span><span class="op" id="4521212">(</span><span class="op" id="4521213">)</span>&nbsp;<span class="op" id="4521215">*</span><span class="ident" id="4521216"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4521221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521224">return</span>&nbsp;<span class="ident" id="4521231"><a href="/text/template/parse/node.go.html#4521194">c</a></span><span class="op" id="4521232">.</span><span class="ident" id="4521233">tr</span><br>
<span class="lineno"></span><span class="op" id="4521236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4521239">func</span>&nbsp;<span class="op" id="4521244">(</span><span class="ident" id="4521245">c</span>&nbsp;<span class="op" id="4521247">*</span><span class="ident" id="4521248"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4521257">)</span>&nbsp;<span class="ident" id="4521259">Copy</span><span class="op" id="4521263">(</span><span class="op" id="4521264">)</span>&nbsp;<span class="ident" id="4521266"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4521271">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521274">return</span>&nbsp;<span class="op" id="4521281">&amp;</span><span class="ident" id="4521282"><a href="/text/template/parse/node.go.html#4520433">ChainNode</a></span><span class="op" id="4521291">{</span><span class="ident" id="4521292">tr</span><span class="op" id="4521294">:</span>&nbsp;<span class="ident" id="4521296"><a href="/text/template/parse/node.go.html#4521245">c</a></span><span class="op" id="4521297">.</span><span class="ident" id="4521298">tr</span><span class="op" id="4521300">,</span>&nbsp;<span class="ident" id="4521302">NodeType</span><span class="op" id="4521310">:</span>&nbsp;<span class="ident" id="4521312"><a href="/text/template/parse/node.go.html#4511447">NodeChain</a></span><span class="op" id="4521321">,</span>&nbsp;<span class="ident" id="4521323">Pos</span><span class="op" id="4521326">:</span>&nbsp;<span class="ident" id="4521328"><a href="/text/template/parse/node.go.html#4521245">c</a></span><span class="op" id="4521329">.</span><span class="ident" id="4521330">Pos</span><span class="op" id="4521333">,</span>&nbsp;<span class="ident" id="4521335">Node</span><span class="op" id="4521339">:</span>&nbsp;<span class="ident" id="4521341"><a href="/text/template/parse/node.go.html#4521245">c</a></span><span class="op" id="4521342">.</span><span class="ident" id="4521343">Node</span><span class="op" id="4521347">,</span>&nbsp;<span class="ident" id="4521349">Field</span><span class="op" id="4521354">:</span>&nbsp;<span class="builtinfunc" id="4521356">append</span><span class="op" id="4521362">(</span><span class="op" id="4521363">[</span><span class="op" id="4521364">]</span><span class="builtintype" id="4521365">string</span><span class="op" id="4521371">{</span><span class="op" id="4521372">}</span><span class="op" id="4521373">,</span>&nbsp;<span class="ident" id="4521375"><a href="/text/template/parse/node.go.html#4521245">c</a></span><span class="op" id="4521376">.</span><span class="ident" id="4521377">Field</span><span class="op" id="4521382">...</span><span class="op" id="4521385">)</span><span class="op" id="4521386">}</span><br>
<span class="lineno"></span><span class="op" id="4521388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4521391">//&nbsp;BoolNode&nbsp;holds&nbsp;a&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno"></span><span class="keyword" id="4521429">type</span>&nbsp;<span class="ident" id="4521434">BoolNode</span>&nbsp;<span class="keyword" id="4521443">struct</span>&nbsp;<span class="op" id="4521450">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521453"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521463"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521468">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4521473">*</span><span class="ident" id="4521474"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4521480">True</span>&nbsp;<span class="builtintype" id="4521485">bool</span>&nbsp;<span class="comment" id="4521490">//&nbsp;The&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno"></span><span class="op" id="4521528">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="4521531">func</span>&nbsp;<span class="op" id="4521536">(</span><span class="ident" id="4521537">t</span>&nbsp;<span class="op" id="4521539">*</span><span class="ident" id="4521540"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4521544">)</span>&nbsp;<span class="ident" id="4521546">newBool</span><span class="op" id="4521553">(</span><span class="ident" id="4521554">pos</span>&nbsp;<span class="ident" id="4521558"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4521561">,</span>&nbsp;<span class="builtintype" id="4521563">true</span>&nbsp;<span class="builtintype" id="4521568">bool</span><span class="op" id="4521572">)</span>&nbsp;<span class="op" id="4521574">*</span><span class="ident" id="4521575"><a href="/text/template/parse/node.go.html#4521434">BoolNode</a></span>&nbsp;<span class="op" id="4521584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521587">return</span>&nbsp;<span class="op" id="4521594">&amp;</span><span class="ident" id="4521595"><a href="/text/template/parse/node.go.html#4521434">BoolNode</a></span><span class="op" id="4521603">{</span><span class="ident" id="4521604">tr</span><span class="op" id="4521606">:</span>&nbsp;<span class="ident" id="4521608"><a href="/text/template/parse/node.go.html#4521537">t</a></span><span class="op" id="4521609">,</span>&nbsp;<span class="ident" id="4521611">NodeType</span><span class="op" id="4521619">:</span>&nbsp;<span class="ident" id="4521621"><a href="/text/template/parse/node.go.html#4511392">NodeBool</a></span><span class="op" id="4521629">,</span>&nbsp;<span class="ident" id="4521631">Pos</span><span class="op" id="4521634">:</span>&nbsp;<span class="ident" id="4521636"><a href="/text/template/parse/node.go.html#4521554">pos</a></span><span class="op" id="4521639">,</span>&nbsp;<span class="ident" id="4521641">True</span><span class="op" id="4521645">:</span>&nbsp;<span class="builtintype" id="4521647"><a href="/text/template/parse/node.go.html#4521563">true</a></span><span class="op" id="4521651">}</span><br>
<span class="lineno"></span><span class="op" id="4521653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="4521656">func</span>&nbsp;<span class="op" id="4521661">(</span><span class="ident" id="4521662">b</span>&nbsp;<span class="op" id="4521664">*</span><span class="ident" id="4521665"><a href="/text/template/parse/node.go.html#4521434">BoolNode</a></span><span class="op" id="4521673">)</span>&nbsp;<span class="ident" id="4521675">String</span><span class="op" id="4521681">(</span><span class="op" id="4521682">)</span>&nbsp;<span class="builtintype" id="4521684">string</span>&nbsp;<span class="op" id="4521691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521694">if</span>&nbsp;<span class="ident" id="4521697"><a href="/text/template/parse/node.go.html#4521662">b</a></span><span class="op" id="4521698">.</span><span class="ident" id="4521699">True</span>&nbsp;<span class="op" id="4521704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521708">return</span>&nbsp;<span class="string" id="4521715">&#34;true&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4521723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521726">return</span>&nbsp;<span class="string" id="4521733">&#34;false&#34;</span><br>
<span class="lineno">505</span><span class="op" id="4521741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4521744">func</span>&nbsp;<span class="op" id="4521749">(</span><span class="ident" id="4521750">b</span>&nbsp;<span class="op" id="4521752">*</span><span class="ident" id="4521753"><a href="/text/template/parse/node.go.html#4521434">BoolNode</a></span><span class="op" id="4521761">)</span>&nbsp;<span class="ident" id="4521763">tree</span><span class="op" id="4521767">(</span><span class="op" id="4521768">)</span>&nbsp;<span class="op" id="4521770">*</span><span class="ident" id="4521771"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4521776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521779">return</span>&nbsp;<span class="ident" id="4521786"><a href="/text/template/parse/node.go.html#4521750">b</a></span><span class="op" id="4521787">.</span><span class="ident" id="4521788">tr</span><br>
<span class="lineno"></span><span class="op" id="4521791">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span><span class="keyword" id="4521794">func</span>&nbsp;<span class="op" id="4521799">(</span><span class="ident" id="4521800">b</span>&nbsp;<span class="op" id="4521802">*</span><span class="ident" id="4521803"><a href="/text/template/parse/node.go.html#4521434">BoolNode</a></span><span class="op" id="4521811">)</span>&nbsp;<span class="ident" id="4521813">Copy</span><span class="op" id="4521817">(</span><span class="op" id="4521818">)</span>&nbsp;<span class="ident" id="4521820"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4521825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4521828">return</span>&nbsp;<span class="ident" id="4521835"><a href="/text/template/parse/node.go.html#4521800">b</a></span><span class="op" id="4521836">.</span><span class="ident" id="4521837">tr</span><span class="op" id="4521839">.</span><span class="ident" id="4521840">newBool</span><span class="op" id="4521847">(</span><span class="ident" id="4521848"><a href="/text/template/parse/node.go.html#4521800">b</a></span><span class="op" id="4521849">.</span><span class="ident" id="4521850">Pos</span><span class="op" id="4521853">,</span>&nbsp;<span class="ident" id="4521855"><a href="/text/template/parse/node.go.html#4521800">b</a></span><span class="op" id="4521856">.</span><span class="ident" id="4521857">True</span><span class="op" id="4521861">)</span><br>
<span class="lineno"></span><span class="op" id="4521863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="4521866">//&nbsp;NumberNode&nbsp;holds&nbsp;a&nbsp;number:&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;integer,&nbsp;float,&nbsp;or&nbsp;complex.</span><br>
<span class="lineno"></span><span class="comment" id="4521943">//&nbsp;The&nbsp;value&nbsp;is&nbsp;parsed&nbsp;and&nbsp;stored&nbsp;under&nbsp;all&nbsp;the&nbsp;types&nbsp;that&nbsp;can&nbsp;represent&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4522027">//&nbsp;This&nbsp;simulates&nbsp;in&nbsp;a&nbsp;small&nbsp;amount&nbsp;of&nbsp;code&nbsp;the&nbsp;behavior&nbsp;of&nbsp;Go&#39;s&nbsp;ideal&nbsp;constants.</span><br>
<span class="lineno"></span><span class="keyword" id="4522109">type</span>&nbsp;<span class="ident" id="4522114">NumberNode</span>&nbsp;<span class="keyword" id="4522125">struct</span>&nbsp;<span class="op" id="4522132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522135"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522145"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522150">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4522161">*</span><span class="ident" id="4522162"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522168">IsInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4522179">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522190">//&nbsp;Number&nbsp;has&nbsp;an&nbsp;integral&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522224">IsUint</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4522235">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522246">//&nbsp;Number&nbsp;has&nbsp;an&nbsp;unsigned&nbsp;integral&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522289">IsFloat</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4522300">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522311">//&nbsp;Number&nbsp;has&nbsp;a&nbsp;floating-point&nbsp;value.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522350">IsComplex</span>&nbsp;&nbsp;<span class="builtintype" id="4522361">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522372">//&nbsp;Number&nbsp;is&nbsp;complex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522395">Int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4522406">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522417">//&nbsp;The&nbsp;signed&nbsp;integer&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522447">Uint64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4522458">uint64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522469">//&nbsp;The&nbsp;unsigned&nbsp;integer&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522501">Float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4522512">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522523">//&nbsp;The&nbsp;floating-point&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522553">Complex128</span>&nbsp;<span class="builtintype" id="4522564">complex128</span>&nbsp;<span class="comment" id="4522575">//&nbsp;The&nbsp;complex&nbsp;value.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522598">Text</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4522609">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4522620">//&nbsp;The&nbsp;original&nbsp;textual&nbsp;representation&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="op" id="4522675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4522678">func</span>&nbsp;<span class="op" id="4522683">(</span><span class="ident" id="4522684">t</span>&nbsp;<span class="op" id="4522686">*</span><span class="ident" id="4522687"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4522691">)</span>&nbsp;<span class="ident" id="4522693">newNumber</span><span class="op" id="4522702">(</span><span class="ident" id="4522703">pos</span>&nbsp;<span class="ident" id="4522707"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4522710">,</span>&nbsp;<span class="ident" id="4522712">text</span>&nbsp;<span class="builtintype" id="4522717">string</span><span class="op" id="4522723">,</span>&nbsp;<span class="ident" id="4522725">typ</span>&nbsp;<span class="ident" id="4522729"><a href="/text/template/parse/lex.go.html#4496858">itemType</a></span><span class="op" id="4522737">)</span>&nbsp;<span class="op" id="4522739">(</span><span class="op" id="4522740">*</span><span class="ident" id="4522741"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4522751">,</span>&nbsp;<span class="builtintype" id="4522753">error</span><span class="op" id="4522758">)</span>&nbsp;<span class="op" id="4522760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522763">n</span>&nbsp;<span class="op" id="4522765">:=</span>&nbsp;<span class="op" id="4522768">&amp;</span><span class="ident" id="4522769"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4522779">{</span><span class="ident" id="4522780">tr</span><span class="op" id="4522782">:</span>&nbsp;<span class="ident" id="4522784"><a href="/text/template/parse/node.go.html#4522684">t</a></span><span class="op" id="4522785">,</span>&nbsp;<span class="ident" id="4522787">NodeType</span><span class="op" id="4522795">:</span>&nbsp;<span class="ident" id="4522797"><a href="/text/template/parse/node.go.html#4512058">NodeNumber</a></span><span class="op" id="4522807">,</span>&nbsp;<span class="ident" id="4522809">Pos</span><span class="op" id="4522812">:</span>&nbsp;<span class="ident" id="4522814"><a href="/text/template/parse/node.go.html#4522703">pos</a></span><span class="op" id="4522817">,</span>&nbsp;<span class="ident" id="4522819">Text</span><span class="op" id="4522823">:</span>&nbsp;<span class="ident" id="4522825"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4522829">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522832">switch</span>&nbsp;<span class="ident" id="4522839"><a href="/text/template/parse/node.go.html#4522725">typ</a></span>&nbsp;<span class="op" id="4522843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522846">case</span>&nbsp;<span class="ident" id="4522851"><a href="/text/template/parse/lex.go.html#4497099">itemCharConstant</a></span><span class="op" id="4522867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="4522871">rune</span><span class="op" id="4522875">,</span>&nbsp;<span class="ident" id="4522877">_</span><span class="op" id="4522878">,</span>&nbsp;<span class="ident" id="4522880">tail</span><span class="op" id="4522884">,</span>&nbsp;<span class="ident" id="4522886">err</span>&nbsp;<span class="op" id="4522890">:=</span>&nbsp;<span class="ident" id="4522893"><a href="/text/template/parse/node.go.html#4510116">strconv</a></span><span class="op" id="4522900">.</span><span class="ident" id="4522901">UnquoteChar</span><span class="op" id="4522912">(</span><span class="ident" id="4522913"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4522917">[</span><span class="num" id="4522918">1</span><span class="op" id="4522919">:</span><span class="op" id="4522920">]</span><span class="op" id="4522921">,</span>&nbsp;<span class="ident" id="4522923"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4522927">[</span><span class="num" id="4522928">0</span><span class="op" id="4522929">]</span><span class="op" id="4522930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522934">if</span>&nbsp;<span class="ident" id="4522937"><a href="/text/template/parse/node.go.html#4522886">err</a></span>&nbsp;<span class="op" id="4522941">!=</span>&nbsp;<span class="ident" id="4522944">nil</span>&nbsp;<span class="op" id="4522948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522953">return</span>&nbsp;<span class="ident" id="4522960">nil</span><span class="op" id="4522963">,</span>&nbsp;<span class="ident" id="4522965"><a href="/text/template/parse/node.go.html#4522886">err</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4522971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522975">if</span>&nbsp;<span class="ident" id="4522978"><a href="/text/template/parse/node.go.html#4522880">tail</a></span>&nbsp;<span class="op" id="4522983">!=</span>&nbsp;<span class="string" id="4522986">&#34;&#39;&#34;</span>&nbsp;<span class="op" id="4522990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4522995">return</span>&nbsp;<span class="ident" id="4523002">nil</span><span class="op" id="4523005">,</span>&nbsp;<span class="ident" id="4523007"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4523010">.</span><span class="ident" id="4523011">Errorf</span><span class="op" id="4523017">(</span><span class="string" id="4523018">&#34;malformed&nbsp;character&nbsp;constant:&nbsp;%s&#34;</span><span class="op" id="4523052">,</span>&nbsp;<span class="ident" id="4523054"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523066"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523067">.</span><span class="ident" id="4523068">Int64</span>&nbsp;<span class="op" id="4523074">=</span>&nbsp;<span class="ident" id="4523076">int64</span><span class="op" id="4523081">(</span><span class="builtintype" id="4523082"><a href="/text/template/parse/node.go.html#4522871">rune</a></span><span class="op" id="4523086">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523090"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523091">.</span><span class="ident" id="4523092">IsInt</span>&nbsp;<span class="op" id="4523098">=</span>&nbsp;<span class="builtintype" id="4523100">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523107"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523108">.</span><span class="ident" id="4523109">Uint64</span>&nbsp;<span class="op" id="4523116">=</span>&nbsp;<span class="ident" id="4523118">uint64</span><span class="op" id="4523124">(</span><span class="builtintype" id="4523125"><a href="/text/template/parse/node.go.html#4522871">rune</a></span><span class="op" id="4523129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523133"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523134">.</span><span class="ident" id="4523135">IsUint</span>&nbsp;<span class="op" id="4523142">=</span>&nbsp;<span class="builtintype" id="4523144">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523151"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523152">.</span><span class="ident" id="4523153">Float64</span>&nbsp;<span class="op" id="4523161">=</span>&nbsp;<span class="builtintype" id="4523163">float64</span><span class="op" id="4523170">(</span><span class="builtintype" id="4523171"><a href="/text/template/parse/node.go.html#4522871">rune</a></span><span class="op" id="4523175">)</span>&nbsp;<span class="comment" id="4523177">//&nbsp;odd&nbsp;but&nbsp;those&nbsp;are&nbsp;the&nbsp;rules.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523211"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523212">.</span><span class="ident" id="4523213">IsFloat</span>&nbsp;<span class="op" id="4523221">=</span>&nbsp;<span class="builtintype" id="4523223">true</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523230">return</span>&nbsp;<span class="ident" id="4523237"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523238">,</span>&nbsp;<span class="ident" id="4523240">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523245">case</span>&nbsp;<span class="ident" id="4523250"><a href="/text/template/parse/lex.go.html#4497155">itemComplex</a></span><span class="op" id="4523261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4523265">//&nbsp;fmt.Sscan&nbsp;can&nbsp;parse&nbsp;the&nbsp;pair,&nbsp;so&nbsp;let&nbsp;it&nbsp;do&nbsp;the&nbsp;work.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523323">if</span>&nbsp;<span class="ident" id="4523326">_</span><span class="op" id="4523327">,</span>&nbsp;<span class="ident" id="4523329">err</span>&nbsp;<span class="op" id="4523333">:=</span>&nbsp;<span class="ident" id="4523336"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4523339">.</span><span class="ident" id="4523340">Sscan</span><span class="op" id="4523345">(</span><span class="ident" id="4523346"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523350">,</span>&nbsp;<span class="op" id="4523352">&amp;</span><span class="ident" id="4523353"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523354">.</span><span class="ident" id="4523355">Complex128</span><span class="op" id="4523365">)</span><span class="op" id="4523366">;</span>&nbsp;<span class="ident" id="4523368"><a href="/text/template/parse/node.go.html#4523329">err</a></span>&nbsp;<span class="op" id="4523372">!=</span>&nbsp;<span class="ident" id="4523375">nil</span>&nbsp;<span class="op" id="4523379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523384">return</span>&nbsp;<span class="ident" id="4523391">nil</span><span class="op" id="4523394">,</span>&nbsp;<span class="ident" id="4523396"><a href="/text/template/parse/node.go.html#4523329">err</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523406"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523407">.</span><span class="ident" id="4523408">IsComplex</span>&nbsp;<span class="op" id="4523418">=</span>&nbsp;<span class="builtintype" id="4523420">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523427"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523428">.</span><span class="ident" id="4523429">simplifyComplex</span><span class="op" id="4523444">(</span><span class="op" id="4523445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523449">return</span>&nbsp;<span class="ident" id="4523456"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523457">,</span>&nbsp;<span class="ident" id="4523459">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523464">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4523467">//&nbsp;Imaginary&nbsp;constants&nbsp;can&nbsp;only&nbsp;be&nbsp;complex&nbsp;unless&nbsp;they&nbsp;are&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523533">if</span>&nbsp;<span class="builtinfunc" id="4523536">len</span><span class="op" id="4523539">(</span><span class="ident" id="4523540"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523544">)</span>&nbsp;<span class="op" id="4523546">&gt;</span>&nbsp;<span class="num" id="4523548">0</span>&nbsp;<span class="op" id="4523550">&amp;&amp;</span>&nbsp;<span class="ident" id="4523553"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523557">[</span><span class="builtinfunc" id="4523558">len</span><span class="op" id="4523561">(</span><span class="ident" id="4523562"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523566">)</span><span class="op" id="4523567">-</span><span class="num" id="4523568">1</span><span class="op" id="4523569">]</span>&nbsp;<span class="op" id="4523571">==</span>&nbsp;<span class="string" id="4523574">&#39;i&#39;</span>&nbsp;<span class="op" id="4523578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523582">f</span><span class="op" id="4523583">,</span>&nbsp;<span class="ident" id="4523585">err</span>&nbsp;<span class="op" id="4523589">:=</span>&nbsp;<span class="ident" id="4523592"><a href="/text/template/parse/node.go.html#4510116">strconv</a></span><span class="op" id="4523599">.</span><span class="ident" id="4523600">ParseFloat</span><span class="op" id="4523610">(</span><span class="ident" id="4523611"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523615">[</span><span class="op" id="4523616">:</span><span class="builtinfunc" id="4523617">len</span><span class="op" id="4523620">(</span><span class="ident" id="4523621"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523625">)</span><span class="op" id="4523626">-</span><span class="num" id="4523627">1</span><span class="op" id="4523628">]</span><span class="op" id="4523629">,</span>&nbsp;<span class="num" id="4523631">64</span><span class="op" id="4523633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523637">if</span>&nbsp;<span class="ident" id="4523640"><a href="/text/template/parse/node.go.html#4523585">err</a></span>&nbsp;<span class="op" id="4523644">==</span>&nbsp;<span class="ident" id="4523647">nil</span>&nbsp;<span class="op" id="4523651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523656"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523657">.</span><span class="ident" id="4523658">IsComplex</span>&nbsp;<span class="op" id="4523668">=</span>&nbsp;<span class="builtintype" id="4523670">true</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523678"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523679">.</span><span class="ident" id="4523680">Complex128</span>&nbsp;<span class="op" id="4523691">=</span>&nbsp;<span class="builtinfunc" id="4523693">complex</span><span class="op" id="4523700">(</span><span class="num" id="4523701">0</span><span class="op" id="4523702">,</span>&nbsp;<span class="ident" id="4523704"><a href="/text/template/parse/node.go.html#4523582">f</a></span><span class="op" id="4523705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523710"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523711">.</span><span class="ident" id="4523712">simplifyComplex</span><span class="op" id="4523727">(</span><span class="op" id="4523728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523733">return</span>&nbsp;<span class="ident" id="4523740"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523741">,</span>&nbsp;<span class="ident" id="4523743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523752">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4523755">//&nbsp;Do&nbsp;integer&nbsp;test&nbsp;first&nbsp;so&nbsp;we&nbsp;get&nbsp;0x123&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523802">u</span><span class="op" id="4523803">,</span>&nbsp;<span class="ident" id="4523805">err</span>&nbsp;<span class="op" id="4523809">:=</span>&nbsp;<span class="ident" id="4523812"><a href="/text/template/parse/node.go.html#4510116">strconv</a></span><span class="op" id="4523819">.</span><span class="ident" id="4523820">ParseUint</span><span class="op" id="4523829">(</span><span class="ident" id="4523830"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523834">,</span>&nbsp;<span class="num" id="4523836">0</span><span class="op" id="4523837">,</span>&nbsp;<span class="num" id="4523839">64</span><span class="op" id="4523841">)</span>&nbsp;<span class="comment" id="4523843">//&nbsp;will&nbsp;fail&nbsp;for&nbsp;-0;&nbsp;fixed&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523878">if</span>&nbsp;<span class="ident" id="4523881"><a href="/text/template/parse/node.go.html#4523805">err</a></span>&nbsp;<span class="op" id="4523885">==</span>&nbsp;<span class="ident" id="4523888">nil</span>&nbsp;<span class="op" id="4523892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523896"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523897">.</span><span class="ident" id="4523898">IsUint</span>&nbsp;<span class="op" id="4523905">=</span>&nbsp;<span class="builtintype" id="4523907">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523914"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523915">.</span><span class="ident" id="4523916">Uint64</span>&nbsp;<span class="op" id="4523923">=</span>&nbsp;<span class="ident" id="4523925"><a href="/text/template/parse/node.go.html#4523802">u</a></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523931">i</span><span class="op" id="4523932">,</span>&nbsp;<span class="ident" id="4523934"><a href="/text/template/parse/node.go.html#4523805">err</a></span>&nbsp;<span class="op" id="4523938">:=</span>&nbsp;<span class="ident" id="4523941"><a href="/text/template/parse/node.go.html#4510116">strconv</a></span><span class="op" id="4523948">.</span><span class="ident" id="4523949">ParseInt</span><span class="op" id="4523957">(</span><span class="ident" id="4523958"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4523962">,</span>&nbsp;<span class="num" id="4523964">0</span><span class="op" id="4523965">,</span>&nbsp;<span class="num" id="4523967">64</span><span class="op" id="4523969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523972">if</span>&nbsp;<span class="ident" id="4523975"><a href="/text/template/parse/node.go.html#4523805">err</a></span>&nbsp;<span class="op" id="4523979">==</span>&nbsp;<span class="ident" id="4523982">nil</span>&nbsp;<span class="op" id="4523986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523990"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4523991">.</span><span class="ident" id="4523992">IsInt</span>&nbsp;<span class="op" id="4523998">=</span>&nbsp;<span class="builtintype" id="4524000">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524007"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524008">.</span><span class="ident" id="4524009">Int64</span>&nbsp;<span class="op" id="4524015">=</span>&nbsp;<span class="ident" id="4524017"><a href="/text/template/parse/node.go.html#4523931">i</a></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524021">if</span>&nbsp;<span class="ident" id="4524024"><a href="/text/template/parse/node.go.html#4523931">i</a></span>&nbsp;<span class="op" id="4524026">==</span>&nbsp;<span class="num" id="4524029">0</span>&nbsp;<span class="op" id="4524031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524036"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524037">.</span><span class="ident" id="4524038">IsUint</span>&nbsp;<span class="op" id="4524045">=</span>&nbsp;<span class="builtintype" id="4524047">true</span>&nbsp;<span class="comment" id="4524052">//&nbsp;in&nbsp;case&nbsp;of&nbsp;-0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524073"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524074">.</span><span class="ident" id="4524075">Uint64</span>&nbsp;<span class="op" id="4524082">=</span>&nbsp;<span class="ident" id="4524084"><a href="/text/template/parse/node.go.html#4523802">u</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524091">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4524094">//&nbsp;If&nbsp;an&nbsp;integer&nbsp;extraction&nbsp;succeeded,&nbsp;promote&nbsp;the&nbsp;float.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524153">if</span>&nbsp;<span class="ident" id="4524156"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524157">.</span><span class="ident" id="4524158">IsInt</span>&nbsp;<span class="op" id="4524164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524168"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524169">.</span><span class="ident" id="4524170">IsFloat</span>&nbsp;<span class="op" id="4524178">=</span>&nbsp;<span class="builtintype" id="4524180">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524187"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524188">.</span><span class="ident" id="4524189">Float64</span>&nbsp;<span class="op" id="4524197">=</span>&nbsp;<span class="builtintype" id="4524199">float64</span><span class="op" id="4524206">(</span><span class="ident" id="4524207"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524208">.</span><span class="ident" id="4524209">Int64</span><span class="op" id="4524214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524217">}</span>&nbsp;<span class="keyword" id="4524219">else</span>&nbsp;<span class="keyword" id="4524224">if</span>&nbsp;<span class="ident" id="4524227"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524228">.</span><span class="ident" id="4524229">IsUint</span>&nbsp;<span class="op" id="4524236">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524240"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524241">.</span><span class="ident" id="4524242">IsFloat</span>&nbsp;<span class="op" id="4524250">=</span>&nbsp;<span class="builtintype" id="4524252">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524259"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524260">.</span><span class="ident" id="4524261">Float64</span>&nbsp;<span class="op" id="4524269">=</span>&nbsp;<span class="builtintype" id="4524271">float64</span><span class="op" id="4524278">(</span><span class="ident" id="4524279"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524280">.</span><span class="ident" id="4524281">Uint64</span><span class="op" id="4524287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524290">}</span>&nbsp;<span class="keyword" id="4524292">else</span>&nbsp;<span class="op" id="4524297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524301">f</span><span class="op" id="4524302">,</span>&nbsp;<span class="ident" id="4524304">err</span>&nbsp;<span class="op" id="4524308">:=</span>&nbsp;<span class="ident" id="4524311"><a href="/text/template/parse/node.go.html#4510116">strconv</a></span><span class="op" id="4524318">.</span><span class="ident" id="4524319">ParseFloat</span><span class="op" id="4524329">(</span><span class="ident" id="4524330"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4524334">,</span>&nbsp;<span class="num" id="4524336">64</span><span class="op" id="4524338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524342">if</span>&nbsp;<span class="ident" id="4524345"><a href="/text/template/parse/node.go.html#4524304">err</a></span>&nbsp;<span class="op" id="4524349">==</span>&nbsp;<span class="ident" id="4524352">nil</span>&nbsp;<span class="op" id="4524356">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524361"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524362">.</span><span class="ident" id="4524363">IsFloat</span>&nbsp;<span class="op" id="4524371">=</span>&nbsp;<span class="builtintype" id="4524373">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524381"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524382">.</span><span class="ident" id="4524383">Float64</span>&nbsp;<span class="op" id="4524391">=</span>&nbsp;<span class="ident" id="4524393"><a href="/text/template/parse/node.go.html#4524301">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4524398">//&nbsp;If&nbsp;a&nbsp;floating-point&nbsp;extraction&nbsp;succeeded,&nbsp;extract&nbsp;the&nbsp;int&nbsp;if&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524473">if</span>&nbsp;<span class="op" id="4524476">!</span><span class="ident" id="4524477"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524478">.</span><span class="ident" id="4524479">IsInt</span>&nbsp;<span class="op" id="4524485">&amp;&amp;</span>&nbsp;<span class="builtintype" id="4524488">float64</span><span class="op" id="4524495">(</span><span class="ident" id="4524496">int64</span><span class="op" id="4524501">(</span><span class="ident" id="4524502"><a href="/text/template/parse/node.go.html#4524301">f</a></span><span class="op" id="4524503">)</span><span class="op" id="4524504">)</span>&nbsp;<span class="op" id="4524506">==</span>&nbsp;<span class="ident" id="4524509"><a href="/text/template/parse/node.go.html#4524301">f</a></span>&nbsp;<span class="op" id="4524511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524517"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524518">.</span><span class="ident" id="4524519">IsInt</span>&nbsp;<span class="op" id="4524525">=</span>&nbsp;<span class="builtintype" id="4524527">true</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524536"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524537">.</span><span class="ident" id="4524538">Int64</span>&nbsp;<span class="op" id="4524544">=</span>&nbsp;<span class="ident" id="4524546">int64</span><span class="op" id="4524551">(</span><span class="ident" id="4524552"><a href="/text/template/parse/node.go.html#4524301">f</a></span><span class="op" id="4524553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524563">if</span>&nbsp;<span class="op" id="4524566">!</span><span class="ident" id="4524567"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524568">.</span><span class="ident" id="4524569">IsUint</span>&nbsp;<span class="op" id="4524576">&amp;&amp;</span>&nbsp;<span class="builtintype" id="4524579">float64</span><span class="op" id="4524586">(</span><span class="ident" id="4524587">uint64</span><span class="op" id="4524593">(</span><span class="ident" id="4524594"><a href="/text/template/parse/node.go.html#4524301">f</a></span><span class="op" id="4524595">)</span><span class="op" id="4524596">)</span>&nbsp;<span class="op" id="4524598">==</span>&nbsp;<span class="ident" id="4524601"><a href="/text/template/parse/node.go.html#4524301">f</a></span>&nbsp;<span class="op" id="4524603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524609"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524610">.</span><span class="ident" id="4524611">IsUint</span>&nbsp;<span class="op" id="4524618">=</span>&nbsp;<span class="builtintype" id="4524620">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524629"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524630">.</span><span class="ident" id="4524631">Uint64</span>&nbsp;<span class="op" id="4524638">=</span>&nbsp;<span class="ident" id="4524640">uint64</span><span class="op" id="4524646">(</span><span class="ident" id="4524647"><a href="/text/template/parse/node.go.html#4524301">f</a></span><span class="op" id="4524648">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524663">if</span>&nbsp;<span class="op" id="4524666">!</span><span class="ident" id="4524667"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524668">.</span><span class="ident" id="4524669">IsInt</span>&nbsp;<span class="op" id="4524675">&amp;&amp;</span>&nbsp;<span class="op" id="4524678">!</span><span class="ident" id="4524679"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524680">.</span><span class="ident" id="4524681">IsUint</span>&nbsp;<span class="op" id="4524688">&amp;&amp;</span>&nbsp;<span class="op" id="4524691">!</span><span class="ident" id="4524692"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524693">.</span><span class="ident" id="4524694">IsFloat</span>&nbsp;<span class="op" id="4524702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524706">return</span>&nbsp;<span class="ident" id="4524713">nil</span><span class="op" id="4524716">,</span>&nbsp;<span class="ident" id="4524718"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4524721">.</span><span class="ident" id="4524722">Errorf</span><span class="op" id="4524728">(</span><span class="string" id="4524729">&#34;illegal&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4524756">,</span>&nbsp;<span class="ident" id="4524758"><a href="/text/template/parse/node.go.html#4522712">text</a></span><span class="op" id="4524762">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524768">return</span>&nbsp;<span class="ident" id="4524775"><a href="/text/template/parse/node.go.html#4522763">n</a></span><span class="op" id="4524776">,</span>&nbsp;<span class="ident" id="4524778">nil</span><br>
<span class="lineno"></span><span class="op" id="4524782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4524785">//&nbsp;simplifyComplex&nbsp;pulls&nbsp;out&nbsp;any&nbsp;other&nbsp;types&nbsp;that&nbsp;are&nbsp;represented&nbsp;by&nbsp;the&nbsp;complex&nbsp;number.</span><br>
<span class="lineno">615</span><span class="comment" id="4524874">//&nbsp;These&nbsp;all&nbsp;require&nbsp;that&nbsp;the&nbsp;imaginary&nbsp;part&nbsp;be&nbsp;zero.</span><br>
<span class="lineno"></span><span class="keyword" id="4524928">func</span>&nbsp;<span class="op" id="4524933">(</span><span class="ident" id="4524934">n</span>&nbsp;<span class="op" id="4524936">*</span><span class="ident" id="4524937"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4524947">)</span>&nbsp;<span class="ident" id="4524949">simplifyComplex</span><span class="op" id="4524964">(</span><span class="op" id="4524965">)</span>&nbsp;<span class="op" id="4524967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524970"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4524971">.</span><span class="ident" id="4524972">IsFloat</span>&nbsp;<span class="op" id="4524980">=</span>&nbsp;<span class="builtinfunc" id="4524982">imag</span><span class="op" id="4524986">(</span><span class="ident" id="4524987"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4524988">.</span><span class="ident" id="4524989">Complex128</span><span class="op" id="4524999">)</span>&nbsp;<span class="op" id="4525001">==</span>&nbsp;<span class="num" id="4525004">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525007">if</span>&nbsp;<span class="ident" id="4525010"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525011">.</span><span class="ident" id="4525012">IsFloat</span>&nbsp;<span class="op" id="4525020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525024"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525025">.</span><span class="ident" id="4525026">Float64</span>&nbsp;<span class="op" id="4525034">=</span>&nbsp;<span class="builtinfunc" id="4525036">real</span><span class="op" id="4525040">(</span><span class="ident" id="4525041"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525042">.</span><span class="ident" id="4525043">Complex128</span><span class="op" id="4525053">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525057"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525058">.</span><span class="ident" id="4525059">IsInt</span>&nbsp;<span class="op" id="4525065">=</span>&nbsp;<span class="builtintype" id="4525067">float64</span><span class="op" id="4525074">(</span><span class="ident" id="4525075">int64</span><span class="op" id="4525080">(</span><span class="ident" id="4525081"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525082">.</span><span class="ident" id="4525083">Float64</span><span class="op" id="4525090">)</span><span class="op" id="4525091">)</span>&nbsp;<span class="op" id="4525093">==</span>&nbsp;<span class="ident" id="4525096"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525097">.</span><span class="ident" id="4525098">Float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525108">if</span>&nbsp;<span class="ident" id="4525111"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525112">.</span><span class="ident" id="4525113">IsInt</span>&nbsp;<span class="op" id="4525119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525124"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525125">.</span><span class="ident" id="4525126">Int64</span>&nbsp;<span class="op" id="4525132">=</span>&nbsp;<span class="ident" id="4525134">int64</span><span class="op" id="4525139">(</span><span class="ident" id="4525140"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525141">.</span><span class="ident" id="4525142">Float64</span><span class="op" id="4525149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4525153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525157"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525158">.</span><span class="ident" id="4525159">IsUint</span>&nbsp;<span class="op" id="4525166">=</span>&nbsp;<span class="builtintype" id="4525168">float64</span><span class="op" id="4525175">(</span><span class="ident" id="4525176">uint64</span><span class="op" id="4525182">(</span><span class="ident" id="4525183"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525184">.</span><span class="ident" id="4525185">Float64</span><span class="op" id="4525192">)</span><span class="op" id="4525193">)</span>&nbsp;<span class="op" id="4525195">==</span>&nbsp;<span class="ident" id="4525198"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525199">.</span><span class="ident" id="4525200">Float64</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525210">if</span>&nbsp;<span class="ident" id="4525213"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525214">.</span><span class="ident" id="4525215">IsUint</span>&nbsp;<span class="op" id="4525222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525227"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525228">.</span><span class="ident" id="4525229">Uint64</span>&nbsp;<span class="op" id="4525236">=</span>&nbsp;<span class="ident" id="4525238">uint64</span><span class="op" id="4525244">(</span><span class="ident" id="4525245"><a href="/text/template/parse/node.go.html#4524934">n</a></span><span class="op" id="4525246">.</span><span class="ident" id="4525247">Float64</span><span class="op" id="4525254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4525258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4525261">}</span><br>
<span class="lineno"></span><span class="op" id="4525263">}</span><br>
<span class="lineno">630</span><br>
<span class="lineno"></span><span class="keyword" id="4525266">func</span>&nbsp;<span class="op" id="4525271">(</span><span class="ident" id="4525272">n</span>&nbsp;<span class="op" id="4525274">*</span><span class="ident" id="4525275"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4525285">)</span>&nbsp;<span class="ident" id="4525287">String</span><span class="op" id="4525293">(</span><span class="op" id="4525294">)</span>&nbsp;<span class="builtintype" id="4525296">string</span>&nbsp;<span class="op" id="4525303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525306">return</span>&nbsp;<span class="ident" id="4525313"><a href="/text/template/parse/node.go.html#4525272">n</a></span><span class="op" id="4525314">.</span><span class="ident" id="4525315">Text</span><br>
<span class="lineno"></span><span class="op" id="4525320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span><span class="keyword" id="4525323">func</span>&nbsp;<span class="op" id="4525328">(</span><span class="ident" id="4525329">n</span>&nbsp;<span class="op" id="4525331">*</span><span class="ident" id="4525332"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4525342">)</span>&nbsp;<span class="ident" id="4525344">tree</span><span class="op" id="4525348">(</span><span class="op" id="4525349">)</span>&nbsp;<span class="op" id="4525351">*</span><span class="ident" id="4525352"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4525357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525360">return</span>&nbsp;<span class="ident" id="4525367"><a href="/text/template/parse/node.go.html#4525329">n</a></span><span class="op" id="4525368">.</span><span class="ident" id="4525369">tr</span><br>
<span class="lineno"></span><span class="op" id="4525372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4525375">func</span>&nbsp;<span class="op" id="4525380">(</span><span class="ident" id="4525381">n</span>&nbsp;<span class="op" id="4525383">*</span><span class="ident" id="4525384"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4525394">)</span>&nbsp;<span class="ident" id="4525396">Copy</span><span class="op" id="4525400">(</span><span class="op" id="4525401">)</span>&nbsp;<span class="ident" id="4525403"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4525408">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525411">nn</span>&nbsp;<span class="op" id="4525414">:=</span>&nbsp;<span class="builtinfunc" id="4525417">new</span><span class="op" id="4525420">(</span><span class="ident" id="4525421"><a href="/text/template/parse/node.go.html#4522114">NumberNode</a></span><span class="op" id="4525431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4525434">*</span><span class="ident" id="4525435"><a href="/text/template/parse/node.go.html#4525411">nn</a></span>&nbsp;<span class="op" id="4525438">=</span>&nbsp;<span class="op" id="4525440">*</span><span class="ident" id="4525441"><a href="/text/template/parse/node.go.html#4525381">n</a></span>&nbsp;<span class="comment" id="4525443">//&nbsp;Easy,&nbsp;fast,&nbsp;correct.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525468">return</span>&nbsp;<span class="ident" id="4525475"><a href="/text/template/parse/node.go.html#4525411">nn</a></span><br>
<span class="lineno"></span><span class="op" id="4525478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="4525481">//&nbsp;StringNode&nbsp;holds&nbsp;a&nbsp;string&nbsp;constant.&nbsp;The&nbsp;value&nbsp;has&nbsp;been&nbsp;&#34;unquoted&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4525551">type</span>&nbsp;<span class="ident" id="4525556">StringNode</span>&nbsp;<span class="keyword" id="4525567">struct</span>&nbsp;<span class="op" id="4525574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525577"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525587"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525592">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525599">*</span><span class="ident" id="4525600"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525606">Quoted</span>&nbsp;<span class="builtintype" id="4525613">string</span>&nbsp;<span class="comment" id="4525620">//&nbsp;The&nbsp;original&nbsp;text&nbsp;of&nbsp;the&nbsp;string,&nbsp;with&nbsp;quotes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525670">Text</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4525677">string</span>&nbsp;<span class="comment" id="4525684">//&nbsp;The&nbsp;string,&nbsp;after&nbsp;quote&nbsp;processing.</span><br>
<span class="lineno"></span><span class="op" id="4525723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4525726">func</span>&nbsp;<span class="op" id="4525731">(</span><span class="ident" id="4525732">t</span>&nbsp;<span class="op" id="4525734">*</span><span class="ident" id="4525735"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4525739">)</span>&nbsp;<span class="ident" id="4525741">newString</span><span class="op" id="4525750">(</span><span class="ident" id="4525751">pos</span>&nbsp;<span class="ident" id="4525755"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4525758">,</span>&nbsp;<span class="ident" id="4525760">orig</span><span class="op" id="4525764">,</span>&nbsp;<span class="ident" id="4525766">text</span>&nbsp;<span class="builtintype" id="4525771">string</span><span class="op" id="4525777">)</span>&nbsp;<span class="op" id="4525779">*</span><span class="ident" id="4525780"><a href="/text/template/parse/node.go.html#4525556">StringNode</a></span>&nbsp;<span class="op" id="4525791">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525794">return</span>&nbsp;<span class="op" id="4525801">&amp;</span><span class="ident" id="4525802"><a href="/text/template/parse/node.go.html#4525556">StringNode</a></span><span class="op" id="4525812">{</span><span class="ident" id="4525813">tr</span><span class="op" id="4525815">:</span>&nbsp;<span class="ident" id="4525817"><a href="/text/template/parse/node.go.html#4525732">t</a></span><span class="op" id="4525818">,</span>&nbsp;<span class="ident" id="4525820">NodeType</span><span class="op" id="4525828">:</span>&nbsp;<span class="ident" id="4525830"><a href="/text/template/parse/node.go.html#4512225">NodeString</a></span><span class="op" id="4525840">,</span>&nbsp;<span class="ident" id="4525842">Pos</span><span class="op" id="4525845">:</span>&nbsp;<span class="ident" id="4525847"><a href="/text/template/parse/node.go.html#4525751">pos</a></span><span class="op" id="4525850">,</span>&nbsp;<span class="ident" id="4525852">Quoted</span><span class="op" id="4525858">:</span>&nbsp;<span class="ident" id="4525860"><a href="/text/template/parse/node.go.html#4525760">orig</a></span><span class="op" id="4525864">,</span>&nbsp;<span class="ident" id="4525866">Text</span><span class="op" id="4525870">:</span>&nbsp;<span class="ident" id="4525872"><a href="/text/template/parse/node.go.html#4525766">text</a></span><span class="op" id="4525876">}</span><br>
<span class="lineno"></span><span class="op" id="4525878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4525881">func</span>&nbsp;<span class="op" id="4525886">(</span><span class="ident" id="4525887">s</span>&nbsp;<span class="op" id="4525889">*</span><span class="ident" id="4525890"><a href="/text/template/parse/node.go.html#4525556">StringNode</a></span><span class="op" id="4525900">)</span>&nbsp;<span class="ident" id="4525902">String</span><span class="op" id="4525908">(</span><span class="op" id="4525909">)</span>&nbsp;<span class="builtintype" id="4525911">string</span>&nbsp;<span class="op" id="4525918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525921">return</span>&nbsp;<span class="ident" id="4525928"><a href="/text/template/parse/node.go.html#4525887">s</a></span><span class="op" id="4525929">.</span><span class="ident" id="4525930">Quoted</span><br>
<span class="lineno">660</span><span class="op" id="4525937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4525940">func</span>&nbsp;<span class="op" id="4525945">(</span><span class="ident" id="4525946">s</span>&nbsp;<span class="op" id="4525948">*</span><span class="ident" id="4525949"><a href="/text/template/parse/node.go.html#4525556">StringNode</a></span><span class="op" id="4525959">)</span>&nbsp;<span class="ident" id="4525961">tree</span><span class="op" id="4525965">(</span><span class="op" id="4525966">)</span>&nbsp;<span class="op" id="4525968">*</span><span class="ident" id="4525969"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4525974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525977">return</span>&nbsp;<span class="ident" id="4525984"><a href="/text/template/parse/node.go.html#4525946">s</a></span><span class="op" id="4525985">.</span><span class="ident" id="4525986">tr</span><br>
<span class="lineno"></span><span class="op" id="4525989">}</span><br>
<span class="lineno">665</span><br>
<span class="lineno"></span><span class="keyword" id="4525992">func</span>&nbsp;<span class="op" id="4525997">(</span><span class="ident" id="4525998">s</span>&nbsp;<span class="op" id="4526000">*</span><span class="ident" id="4526001"><a href="/text/template/parse/node.go.html#4525556">StringNode</a></span><span class="op" id="4526011">)</span>&nbsp;<span class="ident" id="4526013">Copy</span><span class="op" id="4526017">(</span><span class="op" id="4526018">)</span>&nbsp;<span class="ident" id="4526020"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4526025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526028">return</span>&nbsp;<span class="ident" id="4526035"><a href="/text/template/parse/node.go.html#4525998">s</a></span><span class="op" id="4526036">.</span><span class="ident" id="4526037">tr</span><span class="op" id="4526039">.</span><span class="ident" id="4526040">newString</span><span class="op" id="4526049">(</span><span class="ident" id="4526050"><a href="/text/template/parse/node.go.html#4525998">s</a></span><span class="op" id="4526051">.</span><span class="ident" id="4526052">Pos</span><span class="op" id="4526055">,</span>&nbsp;<span class="ident" id="4526057"><a href="/text/template/parse/node.go.html#4525998">s</a></span><span class="op" id="4526058">.</span><span class="ident" id="4526059">Quoted</span><span class="op" id="4526065">,</span>&nbsp;<span class="ident" id="4526067"><a href="/text/template/parse/node.go.html#4525998">s</a></span><span class="op" id="4526068">.</span><span class="ident" id="4526069">Text</span><span class="op" id="4526073">)</span><br>
<span class="lineno"></span><span class="op" id="4526075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">670</span><span class="comment" id="4526078">//&nbsp;endNode&nbsp;represents&nbsp;an&nbsp;{{end}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="comment" id="4526119">//&nbsp;It&nbsp;does&nbsp;not&nbsp;appear&nbsp;in&nbsp;the&nbsp;final&nbsp;parse&nbsp;tree.</span><br>
<span class="lineno"></span><span class="keyword" id="4526166">type</span>&nbsp;<span class="ident" id="4526171">endNode</span>&nbsp;<span class="keyword" id="4526179">struct</span>&nbsp;<span class="op" id="4526186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526189"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526199"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526204">tr</span>&nbsp;<span class="op" id="4526207">*</span><span class="ident" id="4526208"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="4526213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526216">func</span>&nbsp;<span class="op" id="4526221">(</span><span class="ident" id="4526222">t</span>&nbsp;<span class="op" id="4526224">*</span><span class="ident" id="4526225"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4526229">)</span>&nbsp;<span class="ident" id="4526231">newEnd</span><span class="op" id="4526237">(</span><span class="ident" id="4526238">pos</span>&nbsp;<span class="ident" id="4526242"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4526245">)</span>&nbsp;<span class="op" id="4526247">*</span><span class="ident" id="4526248"><a href="/text/template/parse/node.go.html#4526171">endNode</a></span>&nbsp;<span class="op" id="4526256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526259">return</span>&nbsp;<span class="op" id="4526266">&amp;</span><span class="ident" id="4526267"><a href="/text/template/parse/node.go.html#4526171">endNode</a></span><span class="op" id="4526274">{</span><span class="ident" id="4526275">tr</span><span class="op" id="4526277">:</span>&nbsp;<span class="ident" id="4526279"><a href="/text/template/parse/node.go.html#4526222">t</a></span><span class="op" id="4526280">,</span>&nbsp;<span class="ident" id="4526282">NodeType</span><span class="op" id="4526290">:</span>&nbsp;<span class="ident" id="4526292"><a href="/text/template/parse/node.go.html#4511695">nodeEnd</a></span><span class="op" id="4526299">,</span>&nbsp;<span class="ident" id="4526301">Pos</span><span class="op" id="4526304">:</span>&nbsp;<span class="ident" id="4526306"><a href="/text/template/parse/node.go.html#4526238">pos</a></span><span class="op" id="4526309">}</span><br>
<span class="lineno">680</span><span class="op" id="4526311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526314">func</span>&nbsp;<span class="op" id="4526319">(</span><span class="ident" id="4526320">e</span>&nbsp;<span class="op" id="4526322">*</span><span class="ident" id="4526323"><a href="/text/template/parse/node.go.html#4526171">endNode</a></span><span class="op" id="4526330">)</span>&nbsp;<span class="ident" id="4526332">String</span><span class="op" id="4526338">(</span><span class="op" id="4526339">)</span>&nbsp;<span class="builtintype" id="4526341">string</span>&nbsp;<span class="op" id="4526348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526351">return</span>&nbsp;<span class="string" id="4526358">&#34;{{end}}&#34;</span><br>
<span class="lineno"></span><span class="op" id="4526368">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="keyword" id="4526371">func</span>&nbsp;<span class="op" id="4526376">(</span><span class="ident" id="4526377">e</span>&nbsp;<span class="op" id="4526379">*</span><span class="ident" id="4526380"><a href="/text/template/parse/node.go.html#4526171">endNode</a></span><span class="op" id="4526387">)</span>&nbsp;<span class="ident" id="4526389">tree</span><span class="op" id="4526393">(</span><span class="op" id="4526394">)</span>&nbsp;<span class="op" id="4526396">*</span><span class="ident" id="4526397"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4526402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526405">return</span>&nbsp;<span class="ident" id="4526412"><a href="/text/template/parse/node.go.html#4526377">e</a></span><span class="op" id="4526413">.</span><span class="ident" id="4526414">tr</span><br>
<span class="lineno"></span><span class="op" id="4526417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="4526420">func</span>&nbsp;<span class="op" id="4526425">(</span><span class="ident" id="4526426">e</span>&nbsp;<span class="op" id="4526428">*</span><span class="ident" id="4526429"><a href="/text/template/parse/node.go.html#4526171">endNode</a></span><span class="op" id="4526436">)</span>&nbsp;<span class="ident" id="4526438">Copy</span><span class="op" id="4526442">(</span><span class="op" id="4526443">)</span>&nbsp;<span class="ident" id="4526445"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4526450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526453">return</span>&nbsp;<span class="ident" id="4526460"><a href="/text/template/parse/node.go.html#4526426">e</a></span><span class="op" id="4526461">.</span><span class="ident" id="4526462">tr</span><span class="op" id="4526464">.</span><span class="ident" id="4526465">newEnd</span><span class="op" id="4526471">(</span><span class="ident" id="4526472"><a href="/text/template/parse/node.go.html#4526426">e</a></span><span class="op" id="4526473">.</span><span class="ident" id="4526474">Pos</span><span class="op" id="4526477">)</span><br>
<span class="lineno"></span><span class="op" id="4526479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4526482">//&nbsp;elseNode&nbsp;represents&nbsp;an&nbsp;{{else}}&nbsp;action.&nbsp;Does&nbsp;not&nbsp;appear&nbsp;in&nbsp;the&nbsp;final&nbsp;tree.</span><br>
<span class="lineno">695</span><span class="keyword" id="4526560">type</span>&nbsp;<span class="ident" id="4526565">elseNode</span>&nbsp;<span class="keyword" id="4526574">struct</span>&nbsp;<span class="op" id="4526581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526584"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526594"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526599">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4526604">*</span><span class="ident" id="4526605"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526611">Line</span>&nbsp;<span class="builtintype" id="4526616">int</span>&nbsp;<span class="comment" id="4526620">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno">700</span><span class="op" id="4526689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526692">func</span>&nbsp;<span class="op" id="4526697">(</span><span class="ident" id="4526698">t</span>&nbsp;<span class="op" id="4526700">*</span><span class="ident" id="4526701"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4526705">)</span>&nbsp;<span class="ident" id="4526707">newElse</span><span class="op" id="4526714">(</span><span class="ident" id="4526715">pos</span>&nbsp;<span class="ident" id="4526719"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4526722">,</span>&nbsp;<span class="ident" id="4526724">line</span>&nbsp;<span class="builtintype" id="4526729">int</span><span class="op" id="4526732">)</span>&nbsp;<span class="op" id="4526734">*</span><span class="ident" id="4526735"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span>&nbsp;<span class="op" id="4526744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526747">return</span>&nbsp;<span class="op" id="4526754">&amp;</span><span class="ident" id="4526755"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span><span class="op" id="4526763">{</span><span class="ident" id="4526764">tr</span><span class="op" id="4526766">:</span>&nbsp;<span class="ident" id="4526768"><a href="/text/template/parse/node.go.html#4526698">t</a></span><span class="op" id="4526769">,</span>&nbsp;<span class="ident" id="4526771">NodeType</span><span class="op" id="4526779">:</span>&nbsp;<span class="ident" id="4526781"><a href="/text/template/parse/node.go.html#4511625">nodeElse</a></span><span class="op" id="4526789">,</span>&nbsp;<span class="ident" id="4526791">Pos</span><span class="op" id="4526794">:</span>&nbsp;<span class="ident" id="4526796"><a href="/text/template/parse/node.go.html#4526715">pos</a></span><span class="op" id="4526799">,</span>&nbsp;<span class="ident" id="4526801">Line</span><span class="op" id="4526805">:</span>&nbsp;<span class="ident" id="4526807"><a href="/text/template/parse/node.go.html#4526724">line</a></span><span class="op" id="4526811">}</span><br>
<span class="lineno"></span><span class="op" id="4526813">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="keyword" id="4526816">func</span>&nbsp;<span class="op" id="4526821">(</span><span class="ident" id="4526822">e</span>&nbsp;<span class="op" id="4526824">*</span><span class="ident" id="4526825"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span><span class="op" id="4526833">)</span>&nbsp;<span class="ident" id="4526835">Type</span><span class="op" id="4526839">(</span><span class="op" id="4526840">)</span>&nbsp;<span class="ident" id="4526842"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span>&nbsp;<span class="op" id="4526851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526854">return</span>&nbsp;<span class="ident" id="4526861"><a href="/text/template/parse/node.go.html#4511625">nodeElse</a></span><br>
<span class="lineno"></span><span class="op" id="4526870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span><span class="keyword" id="4526873">func</span>&nbsp;<span class="op" id="4526878">(</span><span class="ident" id="4526879">e</span>&nbsp;<span class="op" id="4526881">*</span><span class="ident" id="4526882"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span><span class="op" id="4526890">)</span>&nbsp;<span class="ident" id="4526892">String</span><span class="op" id="4526898">(</span><span class="op" id="4526899">)</span>&nbsp;<span class="builtintype" id="4526901">string</span>&nbsp;<span class="op" id="4526908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526911">return</span>&nbsp;<span class="string" id="4526918">&#34;{{else}}&#34;</span><br>
<span class="lineno"></span><span class="op" id="4526929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526932">func</span>&nbsp;<span class="op" id="4526937">(</span><span class="ident" id="4526938">e</span>&nbsp;<span class="op" id="4526940">*</span><span class="ident" id="4526941"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span><span class="op" id="4526949">)</span>&nbsp;<span class="ident" id="4526951">tree</span><span class="op" id="4526955">(</span><span class="op" id="4526956">)</span>&nbsp;<span class="op" id="4526958">*</span><span class="ident" id="4526959"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4526964">{</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526967">return</span>&nbsp;<span class="ident" id="4526974"><a href="/text/template/parse/node.go.html#4526938">e</a></span><span class="op" id="4526975">.</span><span class="ident" id="4526976">tr</span><br>
<span class="lineno"></span><span class="op" id="4526979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526982">func</span>&nbsp;<span class="op" id="4526987">(</span><span class="ident" id="4526988">e</span>&nbsp;<span class="op" id="4526990">*</span><span class="ident" id="4526991"><a href="/text/template/parse/node.go.html#4526565">elseNode</a></span><span class="op" id="4526999">)</span>&nbsp;<span class="ident" id="4527001">Copy</span><span class="op" id="4527005">(</span><span class="op" id="4527006">)</span>&nbsp;<span class="ident" id="4527008"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4527013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527016">return</span>&nbsp;<span class="ident" id="4527023"><a href="/text/template/parse/node.go.html#4526988">e</a></span><span class="op" id="4527024">.</span><span class="ident" id="4527025">tr</span><span class="op" id="4527027">.</span><span class="ident" id="4527028">newElse</span><span class="op" id="4527035">(</span><span class="ident" id="4527036"><a href="/text/template/parse/node.go.html#4526988">e</a></span><span class="op" id="4527037">.</span><span class="ident" id="4527038">Pos</span><span class="op" id="4527041">,</span>&nbsp;<span class="ident" id="4527043"><a href="/text/template/parse/node.go.html#4526988">e</a></span><span class="op" id="4527044">.</span><span class="ident" id="4527045">Line</span><span class="op" id="4527049">)</span><br>
<span class="lineno">720</span><span class="op" id="4527051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4527054">//&nbsp;BranchNode&nbsp;is&nbsp;the&nbsp;common&nbsp;representation&nbsp;of&nbsp;if,&nbsp;range,&nbsp;and&nbsp;with.</span><br>
<span class="lineno"></span><span class="keyword" id="4527121">type</span>&nbsp;<span class="ident" id="4527126">BranchNode</span>&nbsp;<span class="keyword" id="4527137">struct</span>&nbsp;<span class="op" id="4527144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527147"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527157"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527162">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527171">*</span><span class="ident" id="4527172"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527178">Line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4527187">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4527197">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527267">Pipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527276">*</span><span class="ident" id="4527277"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span>&nbsp;<span class="comment" id="4527286">//&nbsp;The&nbsp;pipeline&nbsp;to&nbsp;be&nbsp;evaluated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527320">List</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527329">*</span><span class="ident" id="4527330"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span>&nbsp;<span class="comment" id="4527339">//&nbsp;What&nbsp;to&nbsp;execute&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;non-empty.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527386">ElseList</span>&nbsp;<span class="op" id="4527395">*</span><span class="ident" id="4527396"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span>&nbsp;<span class="comment" id="4527405">//&nbsp;What&nbsp;to&nbsp;execute&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;empty&nbsp;(nil&nbsp;if&nbsp;absent).</span><br>
<span class="lineno"></span><span class="op" id="4527463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4527466">func</span>&nbsp;<span class="op" id="4527471">(</span><span class="ident" id="4527472">b</span>&nbsp;<span class="op" id="4527474">*</span><span class="ident" id="4527475"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4527485">)</span>&nbsp;<span class="ident" id="4527487">String</span><span class="op" id="4527493">(</span><span class="op" id="4527494">)</span>&nbsp;<span class="builtintype" id="4527496">string</span>&nbsp;<span class="op" id="4527503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527506">name</span>&nbsp;<span class="op" id="4527511">:=</span>&nbsp;<span class="string" id="4527514">&#34;&#34;</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527518">switch</span>&nbsp;<span class="ident" id="4527525"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527526">.</span><span class="ident" id="4527527">NodeType</span>&nbsp;<span class="op" id="4527536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527539">case</span>&nbsp;<span class="ident" id="4527544"><a href="/text/template/parse/node.go.html#4511897">NodeIf</a></span><span class="op" id="4527550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527554"><a href="/text/template/parse/node.go.html#4527506">name</a></span>&nbsp;<span class="op" id="4527559">=</span>&nbsp;<span class="string" id="4527561">&#34;if&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527567">case</span>&nbsp;<span class="ident" id="4527572"><a href="/text/template/parse/node.go.html#4512174">NodeRange</a></span><span class="op" id="4527581">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527585"><a href="/text/template/parse/node.go.html#4527506">name</a></span>&nbsp;<span class="op" id="4527590">=</span>&nbsp;<span class="string" id="4527592">&#34;range&#34;</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527601">case</span>&nbsp;<span class="ident" id="4527606"><a href="/text/template/parse/node.go.html#4512393">NodeWith</a></span><span class="op" id="4527614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527618"><a href="/text/template/parse/node.go.html#4527506">name</a></span>&nbsp;<span class="op" id="4527623">=</span>&nbsp;<span class="string" id="4527625">&#34;with&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527633">default</span><span class="op" id="4527640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4527644">panic</span><span class="op" id="4527649">(</span><span class="string" id="4527650">&#34;unknown&nbsp;branch&nbsp;type&#34;</span><span class="op" id="4527671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4527674">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527677">if</span>&nbsp;<span class="ident" id="4527680"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527681">.</span><span class="ident" id="4527682">ElseList</span>&nbsp;<span class="op" id="4527691">!=</span>&nbsp;<span class="ident" id="4527694">nil</span>&nbsp;<span class="op" id="4527698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527702">return</span>&nbsp;<span class="ident" id="4527709"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4527712">.</span><span class="ident" id="4527713">Sprintf</span><span class="op" id="4527720">(</span><span class="string" id="4527721">&#34;{{%s&nbsp;%s}}%s{{else}}%s{{end}}&#34;</span><span class="op" id="4527751">,</span>&nbsp;<span class="ident" id="4527753"><a href="/text/template/parse/node.go.html#4527506">name</a></span><span class="op" id="4527757">,</span>&nbsp;<span class="ident" id="4527759"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527760">.</span><span class="ident" id="4527761">Pipe</span><span class="op" id="4527765">,</span>&nbsp;<span class="ident" id="4527767"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527768">.</span><span class="ident" id="4527769">List</span><span class="op" id="4527773">,</span>&nbsp;<span class="ident" id="4527775"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527776">.</span><span class="ident" id="4527777">ElseList</span><span class="op" id="4527785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4527788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527791">return</span>&nbsp;<span class="ident" id="4527798"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4527801">.</span><span class="ident" id="4527802">Sprintf</span><span class="op" id="4527809">(</span><span class="string" id="4527810">&#34;{{%s&nbsp;%s}}%s{{end}}&#34;</span><span class="op" id="4527830">,</span>&nbsp;<span class="ident" id="4527832"><a href="/text/template/parse/node.go.html#4527506">name</a></span><span class="op" id="4527836">,</span>&nbsp;<span class="ident" id="4527838"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527839">.</span><span class="ident" id="4527840">Pipe</span><span class="op" id="4527844">,</span>&nbsp;<span class="ident" id="4527846"><a href="/text/template/parse/node.go.html#4527472">b</a></span><span class="op" id="4527847">.</span><span class="ident" id="4527848">List</span><span class="op" id="4527852">)</span><br>
<span class="lineno"></span><span class="op" id="4527854">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="keyword" id="4527857">func</span>&nbsp;<span class="op" id="4527862">(</span><span class="ident" id="4527863">b</span>&nbsp;<span class="op" id="4527865">*</span><span class="ident" id="4527866"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4527876">)</span>&nbsp;<span class="ident" id="4527878">tree</span><span class="op" id="4527882">(</span><span class="op" id="4527883">)</span>&nbsp;<span class="op" id="4527885">*</span><span class="ident" id="4527886"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4527891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527894">return</span>&nbsp;<span class="ident" id="4527901"><a href="/text/template/parse/node.go.html#4527863">b</a></span><span class="op" id="4527902">.</span><span class="ident" id="4527903">tr</span><br>
<span class="lineno"></span><span class="op" id="4527906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="keyword" id="4527909">func</span>&nbsp;<span class="op" id="4527914">(</span><span class="ident" id="4527915">b</span>&nbsp;<span class="op" id="4527917">*</span><span class="ident" id="4527918"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4527928">)</span>&nbsp;<span class="ident" id="4527930">Copy</span><span class="op" id="4527934">(</span><span class="op" id="4527935">)</span>&nbsp;<span class="ident" id="4527937"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4527942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527945">switch</span>&nbsp;<span class="ident" id="4527952"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4527953">.</span><span class="ident" id="4527954">NodeType</span>&nbsp;<span class="op" id="4527963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527966">case</span>&nbsp;<span class="ident" id="4527971"><a href="/text/template/parse/node.go.html#4511897">NodeIf</a></span><span class="op" id="4527977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527981">return</span>&nbsp;<span class="ident" id="4527988"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4527989">.</span><span class="ident" id="4527990">tr</span><span class="op" id="4527992">.</span><span class="ident" id="4527993">newIf</span><span class="op" id="4527998">(</span><span class="ident" id="4527999"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528000">.</span><span class="ident" id="4528001">Pos</span><span class="op" id="4528004">,</span>&nbsp;<span class="ident" id="4528006"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528007">.</span><span class="ident" id="4528008">Line</span><span class="op" id="4528012">,</span>&nbsp;<span class="ident" id="4528014"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528015">.</span><span class="ident" id="4528016">Pipe</span><span class="op" id="4528020">,</span>&nbsp;<span class="ident" id="4528022"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528023">.</span><span class="ident" id="4528024">List</span><span class="op" id="4528028">,</span>&nbsp;<span class="ident" id="4528030"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528031">.</span><span class="ident" id="4528032">ElseList</span><span class="op" id="4528040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528043">case</span>&nbsp;<span class="ident" id="4528048"><a href="/text/template/parse/node.go.html#4512174">NodeRange</a></span><span class="op" id="4528057">:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528061">return</span>&nbsp;<span class="ident" id="4528068"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528069">.</span><span class="ident" id="4528070">tr</span><span class="op" id="4528072">.</span><span class="ident" id="4528073">newRange</span><span class="op" id="4528081">(</span><span class="ident" id="4528082"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528083">.</span><span class="ident" id="4528084">Pos</span><span class="op" id="4528087">,</span>&nbsp;<span class="ident" id="4528089"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528090">.</span><span class="ident" id="4528091">Line</span><span class="op" id="4528095">,</span>&nbsp;<span class="ident" id="4528097"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528098">.</span><span class="ident" id="4528099">Pipe</span><span class="op" id="4528103">,</span>&nbsp;<span class="ident" id="4528105"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528106">.</span><span class="ident" id="4528107">List</span><span class="op" id="4528111">,</span>&nbsp;<span class="ident" id="4528113"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528114">.</span><span class="ident" id="4528115">ElseList</span><span class="op" id="4528123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528126">case</span>&nbsp;<span class="ident" id="4528131"><a href="/text/template/parse/node.go.html#4512393">NodeWith</a></span><span class="op" id="4528139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528143">return</span>&nbsp;<span class="ident" id="4528150"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528151">.</span><span class="ident" id="4528152">tr</span><span class="op" id="4528154">.</span><span class="ident" id="4528155">newWith</span><span class="op" id="4528162">(</span><span class="ident" id="4528163"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528164">.</span><span class="ident" id="4528165">Pos</span><span class="op" id="4528168">,</span>&nbsp;<span class="ident" id="4528170"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528171">.</span><span class="ident" id="4528172">Line</span><span class="op" id="4528176">,</span>&nbsp;<span class="ident" id="4528178"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528179">.</span><span class="ident" id="4528180">Pipe</span><span class="op" id="4528184">,</span>&nbsp;<span class="ident" id="4528186"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528187">.</span><span class="ident" id="4528188">List</span><span class="op" id="4528192">,</span>&nbsp;<span class="ident" id="4528194"><a href="/text/template/parse/node.go.html#4527915">b</a></span><span class="op" id="4528195">.</span><span class="ident" id="4528196">ElseList</span><span class="op" id="4528204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528207">default</span><span class="op" id="4528214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4528218">panic</span><span class="op" id="4528223">(</span><span class="string" id="4528224">&#34;unknown&nbsp;branch&nbsp;type&#34;</span><span class="op" id="4528245">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4528248">}</span><br>
<span class="lineno"></span><span class="op" id="4528250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4528253">//&nbsp;IfNode&nbsp;represents&nbsp;an&nbsp;{{if}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="4528309">type</span>&nbsp;<span class="ident" id="4528314">IfNode</span>&nbsp;<span class="keyword" id="4528321">struct</span>&nbsp;<span class="op" id="4528328">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4528331"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="4528342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528345">func</span>&nbsp;<span class="op" id="4528350">(</span><span class="ident" id="4528351">t</span>&nbsp;<span class="op" id="4528353">*</span><span class="ident" id="4528354"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4528358">)</span>&nbsp;<span class="ident" id="4528360">newIf</span><span class="op" id="4528365">(</span><span class="ident" id="4528366">pos</span>&nbsp;<span class="ident" id="4528370"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4528373">,</span>&nbsp;<span class="ident" id="4528375">line</span>&nbsp;<span class="builtintype" id="4528380">int</span><span class="op" id="4528383">,</span>&nbsp;<span class="ident" id="4528385">pipe</span>&nbsp;<span class="op" id="4528390">*</span><span class="ident" id="4528391"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4528399">,</span>&nbsp;<span class="ident" id="4528401">list</span><span class="op" id="4528405">,</span>&nbsp;<span class="ident" id="4528407">elseList</span>&nbsp;<span class="op" id="4528416">*</span><span class="ident" id="4528417"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4528425">)</span>&nbsp;<span class="op" id="4528427">*</span><span class="ident" id="4528428"><a href="/text/template/parse/node.go.html#4528314">IfNode</a></span>&nbsp;<span class="op" id="4528435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528438">return</span>&nbsp;<span class="op" id="4528445">&amp;</span><span class="ident" id="4528446"><a href="/text/template/parse/node.go.html#4528314">IfNode</a></span><span class="op" id="4528452">{</span><span class="ident" id="4528453"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4528463">{</span><span class="ident" id="4528464">tr</span><span class="op" id="4528466">:</span>&nbsp;<span class="ident" id="4528468"><a href="/text/template/parse/node.go.html#4528351">t</a></span><span class="op" id="4528469">,</span>&nbsp;<span class="ident" id="4528471">NodeType</span><span class="op" id="4528479">:</span>&nbsp;<span class="ident" id="4528481"><a href="/text/template/parse/node.go.html#4511897">NodeIf</a></span><span class="op" id="4528487">,</span>&nbsp;<span class="ident" id="4528489">Pos</span><span class="op" id="4528492">:</span>&nbsp;<span class="ident" id="4528494"><a href="/text/template/parse/node.go.html#4528366">pos</a></span><span class="op" id="4528497">,</span>&nbsp;<span class="ident" id="4528499">Line</span><span class="op" id="4528503">:</span>&nbsp;<span class="ident" id="4528505"><a href="/text/template/parse/node.go.html#4528375">line</a></span><span class="op" id="4528509">,</span>&nbsp;<span class="ident" id="4528511">Pipe</span><span class="op" id="4528515">:</span>&nbsp;<span class="ident" id="4528517"><a href="/text/template/parse/node.go.html#4528385">pipe</a></span><span class="op" id="4528521">,</span>&nbsp;<span class="ident" id="4528523">List</span><span class="op" id="4528527">:</span>&nbsp;<span class="ident" id="4528529"><a href="/text/template/parse/node.go.html#4528401">list</a></span><span class="op" id="4528533">,</span>&nbsp;<span class="ident" id="4528535">ElseList</span><span class="op" id="4528543">:</span>&nbsp;<span class="ident" id="4528545"><a href="/text/template/parse/node.go.html#4528407">elseList</a></span><span class="op" id="4528553">}</span><span class="op" id="4528554">}</span><br>
<span class="lineno">775</span><span class="op" id="4528556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528559">func</span>&nbsp;<span class="op" id="4528564">(</span><span class="ident" id="4528565">i</span>&nbsp;<span class="op" id="4528567">*</span><span class="ident" id="4528568"><a href="/text/template/parse/node.go.html#4528314">IfNode</a></span><span class="op" id="4528574">)</span>&nbsp;<span class="ident" id="4528576">Copy</span><span class="op" id="4528580">(</span><span class="op" id="4528581">)</span>&nbsp;<span class="ident" id="4528583"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4528588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528591">return</span>&nbsp;<span class="ident" id="4528598"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528599">.</span><span class="ident" id="4528600">tr</span><span class="op" id="4528602">.</span><span class="ident" id="4528603">newIf</span><span class="op" id="4528608">(</span><span class="ident" id="4528609"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528610">.</span><span class="ident" id="4528611">Pos</span><span class="op" id="4528614">,</span>&nbsp;<span class="ident" id="4528616"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528617">.</span><span class="ident" id="4528618">Line</span><span class="op" id="4528622">,</span>&nbsp;<span class="ident" id="4528624"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528625">.</span><span class="ident" id="4528626">Pipe</span><span class="op" id="4528630">.</span><span class="ident" id="4528631">CopyPipe</span><span class="op" id="4528639">(</span><span class="op" id="4528640">)</span><span class="op" id="4528641">,</span>&nbsp;<span class="ident" id="4528643"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528644">.</span><span class="ident" id="4528645">List</span><span class="op" id="4528649">.</span><span class="ident" id="4528650">CopyList</span><span class="op" id="4528658">(</span><span class="op" id="4528659">)</span><span class="op" id="4528660">,</span>&nbsp;<span class="ident" id="4528662"><a href="/text/template/parse/node.go.html#4528565">i</a></span><span class="op" id="4528663">.</span><span class="ident" id="4528664">ElseList</span><span class="op" id="4528672">.</span><span class="ident" id="4528673">CopyList</span><span class="op" id="4528681">(</span><span class="op" id="4528682">)</span><span class="op" id="4528683">)</span><br>
<span class="lineno"></span><span class="op" id="4528685">}</span><br>
<span class="lineno">780</span><br>
<span class="lineno"></span><span class="comment" id="4528688">//&nbsp;RangeNode&nbsp;represents&nbsp;a&nbsp;{{range}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="4528749">type</span>&nbsp;<span class="ident" id="4528754">RangeNode</span>&nbsp;<span class="keyword" id="4528764">struct</span>&nbsp;<span class="op" id="4528771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4528774"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="4528785">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="4528788">func</span>&nbsp;<span class="op" id="4528793">(</span><span class="ident" id="4528794">t</span>&nbsp;<span class="op" id="4528796">*</span><span class="ident" id="4528797"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4528801">)</span>&nbsp;<span class="ident" id="4528803">newRange</span><span class="op" id="4528811">(</span><span class="ident" id="4528812">pos</span>&nbsp;<span class="ident" id="4528816"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4528819">,</span>&nbsp;<span class="ident" id="4528821">line</span>&nbsp;<span class="builtintype" id="4528826">int</span><span class="op" id="4528829">,</span>&nbsp;<span class="ident" id="4528831">pipe</span>&nbsp;<span class="op" id="4528836">*</span><span class="ident" id="4528837"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4528845">,</span>&nbsp;<span class="ident" id="4528847">list</span><span class="op" id="4528851">,</span>&nbsp;<span class="ident" id="4528853">elseList</span>&nbsp;<span class="op" id="4528862">*</span><span class="ident" id="4528863"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4528871">)</span>&nbsp;<span class="op" id="4528873">*</span><span class="ident" id="4528874"><a href="/text/template/parse/node.go.html#4528754">RangeNode</a></span>&nbsp;<span class="op" id="4528884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528887">return</span>&nbsp;<span class="op" id="4528894">&amp;</span><span class="ident" id="4528895"><a href="/text/template/parse/node.go.html#4528754">RangeNode</a></span><span class="op" id="4528904">{</span><span class="ident" id="4528905"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4528915">{</span><span class="ident" id="4528916">tr</span><span class="op" id="4528918">:</span>&nbsp;<span class="ident" id="4528920"><a href="/text/template/parse/node.go.html#4528794">t</a></span><span class="op" id="4528921">,</span>&nbsp;<span class="ident" id="4528923">NodeType</span><span class="op" id="4528931">:</span>&nbsp;<span class="ident" id="4528933"><a href="/text/template/parse/node.go.html#4512174">NodeRange</a></span><span class="op" id="4528942">,</span>&nbsp;<span class="ident" id="4528944">Pos</span><span class="op" id="4528947">:</span>&nbsp;<span class="ident" id="4528949"><a href="/text/template/parse/node.go.html#4528812">pos</a></span><span class="op" id="4528952">,</span>&nbsp;<span class="ident" id="4528954">Line</span><span class="op" id="4528958">:</span>&nbsp;<span class="ident" id="4528960"><a href="/text/template/parse/node.go.html#4528821">line</a></span><span class="op" id="4528964">,</span>&nbsp;<span class="ident" id="4528966">Pipe</span><span class="op" id="4528970">:</span>&nbsp;<span class="ident" id="4528972"><a href="/text/template/parse/node.go.html#4528831">pipe</a></span><span class="op" id="4528976">,</span>&nbsp;<span class="ident" id="4528978">List</span><span class="op" id="4528982">:</span>&nbsp;<span class="ident" id="4528984"><a href="/text/template/parse/node.go.html#4528847">list</a></span><span class="op" id="4528988">,</span>&nbsp;<span class="ident" id="4528990">ElseList</span><span class="op" id="4528998">:</span>&nbsp;<span class="ident" id="4529000"><a href="/text/template/parse/node.go.html#4528853">elseList</a></span><span class="op" id="4529008">}</span><span class="op" id="4529009">}</span><br>
<span class="lineno"></span><span class="op" id="4529011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="4529014">func</span>&nbsp;<span class="op" id="4529019">(</span><span class="ident" id="4529020">r</span>&nbsp;<span class="op" id="4529022">*</span><span class="ident" id="4529023"><a href="/text/template/parse/node.go.html#4528754">RangeNode</a></span><span class="op" id="4529032">)</span>&nbsp;<span class="ident" id="4529034">Copy</span><span class="op" id="4529038">(</span><span class="op" id="4529039">)</span>&nbsp;<span class="ident" id="4529041"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4529046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4529049">return</span>&nbsp;<span class="ident" id="4529056"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529057">.</span><span class="ident" id="4529058">tr</span><span class="op" id="4529060">.</span><span class="ident" id="4529061">newRange</span><span class="op" id="4529069">(</span><span class="ident" id="4529070"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529071">.</span><span class="ident" id="4529072">Pos</span><span class="op" id="4529075">,</span>&nbsp;<span class="ident" id="4529077"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529078">.</span><span class="ident" id="4529079">Line</span><span class="op" id="4529083">,</span>&nbsp;<span class="ident" id="4529085"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529086">.</span><span class="ident" id="4529087">Pipe</span><span class="op" id="4529091">.</span><span class="ident" id="4529092">CopyPipe</span><span class="op" id="4529100">(</span><span class="op" id="4529101">)</span><span class="op" id="4529102">,</span>&nbsp;<span class="ident" id="4529104"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529105">.</span><span class="ident" id="4529106">List</span><span class="op" id="4529110">.</span><span class="ident" id="4529111">CopyList</span><span class="op" id="4529119">(</span><span class="op" id="4529120">)</span><span class="op" id="4529121">,</span>&nbsp;<span class="ident" id="4529123"><a href="/text/template/parse/node.go.html#4529020">r</a></span><span class="op" id="4529124">.</span><span class="ident" id="4529125">ElseList</span><span class="op" id="4529133">.</span><span class="ident" id="4529134">CopyList</span><span class="op" id="4529142">(</span><span class="op" id="4529143">)</span><span class="op" id="4529144">)</span><br>
<span class="lineno"></span><span class="op" id="4529146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4529149">//&nbsp;WithNode&nbsp;represents&nbsp;a&nbsp;{{with}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno">795</span><span class="keyword" id="4529208">type</span>&nbsp;<span class="ident" id="4529213">WithNode</span>&nbsp;<span class="keyword" id="4529222">struct</span>&nbsp;<span class="op" id="4529229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529232"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="4529243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4529246">func</span>&nbsp;<span class="op" id="4529251">(</span><span class="ident" id="4529252">t</span>&nbsp;<span class="op" id="4529254">*</span><span class="ident" id="4529255"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4529259">)</span>&nbsp;<span class="ident" id="4529261">newWith</span><span class="op" id="4529268">(</span><span class="ident" id="4529269">pos</span>&nbsp;<span class="ident" id="4529273"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4529276">,</span>&nbsp;<span class="ident" id="4529278">line</span>&nbsp;<span class="builtintype" id="4529283">int</span><span class="op" id="4529286">,</span>&nbsp;<span class="ident" id="4529288">pipe</span>&nbsp;<span class="op" id="4529293">*</span><span class="ident" id="4529294"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4529302">,</span>&nbsp;<span class="ident" id="4529304">list</span><span class="op" id="4529308">,</span>&nbsp;<span class="ident" id="4529310">elseList</span>&nbsp;<span class="op" id="4529319">*</span><span class="ident" id="4529320"><a href="/text/template/parse/node.go.html#4512500">ListNode</a></span><span class="op" id="4529328">)</span>&nbsp;<span class="op" id="4529330">*</span><span class="ident" id="4529331"><a href="/text/template/parse/node.go.html#4529213">WithNode</a></span>&nbsp;<span class="op" id="4529340">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4529343">return</span>&nbsp;<span class="op" id="4529350">&amp;</span><span class="ident" id="4529351"><a href="/text/template/parse/node.go.html#4529213">WithNode</a></span><span class="op" id="4529359">{</span><span class="ident" id="4529360"><a href="/text/template/parse/node.go.html#4527126">BranchNode</a></span><span class="op" id="4529370">{</span><span class="ident" id="4529371">tr</span><span class="op" id="4529373">:</span>&nbsp;<span class="ident" id="4529375"><a href="/text/template/parse/node.go.html#4529252">t</a></span><span class="op" id="4529376">,</span>&nbsp;<span class="ident" id="4529378">NodeType</span><span class="op" id="4529386">:</span>&nbsp;<span class="ident" id="4529388"><a href="/text/template/parse/node.go.html#4512393">NodeWith</a></span><span class="op" id="4529396">,</span>&nbsp;<span class="ident" id="4529398">Pos</span><span class="op" id="4529401">:</span>&nbsp;<span class="ident" id="4529403"><a href="/text/template/parse/node.go.html#4529269">pos</a></span><span class="op" id="4529406">,</span>&nbsp;<span class="ident" id="4529408">Line</span><span class="op" id="4529412">:</span>&nbsp;<span class="ident" id="4529414"><a href="/text/template/parse/node.go.html#4529278">line</a></span><span class="op" id="4529418">,</span>&nbsp;<span class="ident" id="4529420">Pipe</span><span class="op" id="4529424">:</span>&nbsp;<span class="ident" id="4529426"><a href="/text/template/parse/node.go.html#4529288">pipe</a></span><span class="op" id="4529430">,</span>&nbsp;<span class="ident" id="4529432">List</span><span class="op" id="4529436">:</span>&nbsp;<span class="ident" id="4529438"><a href="/text/template/parse/node.go.html#4529304">list</a></span><span class="op" id="4529442">,</span>&nbsp;<span class="ident" id="4529444">ElseList</span><span class="op" id="4529452">:</span>&nbsp;<span class="ident" id="4529454"><a href="/text/template/parse/node.go.html#4529310">elseList</a></span><span class="op" id="4529462">}</span><span class="op" id="4529463">}</span><br>
<span class="lineno"></span><span class="op" id="4529465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4529468">func</span>&nbsp;<span class="op" id="4529473">(</span><span class="ident" id="4529474">w</span>&nbsp;<span class="op" id="4529476">*</span><span class="ident" id="4529477"><a href="/text/template/parse/node.go.html#4529213">WithNode</a></span><span class="op" id="4529485">)</span>&nbsp;<span class="ident" id="4529487">Copy</span><span class="op" id="4529491">(</span><span class="op" id="4529492">)</span>&nbsp;<span class="ident" id="4529494"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4529499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4529502">return</span>&nbsp;<span class="ident" id="4529509"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529510">.</span><span class="ident" id="4529511">tr</span><span class="op" id="4529513">.</span><span class="ident" id="4529514">newWith</span><span class="op" id="4529521">(</span><span class="ident" id="4529522"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529523">.</span><span class="ident" id="4529524">Pos</span><span class="op" id="4529527">,</span>&nbsp;<span class="ident" id="4529529"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529530">.</span><span class="ident" id="4529531">Line</span><span class="op" id="4529535">,</span>&nbsp;<span class="ident" id="4529537"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529538">.</span><span class="ident" id="4529539">Pipe</span><span class="op" id="4529543">.</span><span class="ident" id="4529544">CopyPipe</span><span class="op" id="4529552">(</span><span class="op" id="4529553">)</span><span class="op" id="4529554">,</span>&nbsp;<span class="ident" id="4529556"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529557">.</span><span class="ident" id="4529558">List</span><span class="op" id="4529562">.</span><span class="ident" id="4529563">CopyList</span><span class="op" id="4529571">(</span><span class="op" id="4529572">)</span><span class="op" id="4529573">,</span>&nbsp;<span class="ident" id="4529575"><a href="/text/template/parse/node.go.html#4529474">w</a></span><span class="op" id="4529576">.</span><span class="ident" id="4529577">ElseList</span><span class="op" id="4529585">.</span><span class="ident" id="4529586">CopyList</span><span class="op" id="4529594">(</span><span class="op" id="4529595">)</span><span class="op" id="4529596">)</span><br>
<span class="lineno">805</span><span class="op" id="4529598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4529601">//&nbsp;TemplateNode&nbsp;represents&nbsp;a&nbsp;{{template}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="keyword" id="4529651">type</span>&nbsp;<span class="ident" id="4529656">TemplateNode</span>&nbsp;<span class="keyword" id="4529669">struct</span>&nbsp;<span class="op" id="4529676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529679"><a href="/text/template/parse/node.go.html#4510901">NodeType</a></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529689"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529694">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4529699">*</span><span class="ident" id="4529700"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529706">Line</span>&nbsp;<span class="builtintype" id="4529711">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4529721">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529791">Name</span>&nbsp;<span class="builtintype" id="4529796">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4529806">//&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;template&nbsp;(unquoted).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4529847">Pipe</span>&nbsp;<span class="op" id="4529852">*</span><span class="ident" id="4529853"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span>&nbsp;<span class="comment" id="4529862">//&nbsp;The&nbsp;command&nbsp;to&nbsp;evaluate&nbsp;as&nbsp;dot&nbsp;for&nbsp;the&nbsp;template.</span><br>
<span class="lineno">815</span><span class="op" id="4529914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4529917">func</span>&nbsp;<span class="op" id="4529922">(</span><span class="ident" id="4529923">t</span>&nbsp;<span class="op" id="4529925">*</span><span class="ident" id="4529926"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span><span class="op" id="4529930">)</span>&nbsp;<span class="ident" id="4529932">newTemplate</span><span class="op" id="4529943">(</span><span class="ident" id="4529944">pos</span>&nbsp;<span class="ident" id="4529948"><a href="/text/template/parse/node.go.html#4511021">Pos</a></span><span class="op" id="4529951">,</span>&nbsp;<span class="ident" id="4529953">line</span>&nbsp;<span class="builtintype" id="4529958">int</span><span class="op" id="4529961">,</span>&nbsp;<span class="ident" id="4529963">name</span>&nbsp;<span class="builtintype" id="4529968">string</span><span class="op" id="4529974">,</span>&nbsp;<span class="ident" id="4529976">pipe</span>&nbsp;<span class="op" id="4529981">*</span><span class="ident" id="4529982"><a href="/text/template/parse/node.go.html#4513767">PipeNode</a></span><span class="op" id="4529990">)</span>&nbsp;<span class="op" id="4529992">*</span><span class="ident" id="4529993"><a href="/text/template/parse/node.go.html#4529656">TemplateNode</a></span>&nbsp;<span class="op" id="4530006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530009">return</span>&nbsp;<span class="op" id="4530016">&amp;</span><span class="ident" id="4530017"><a href="/text/template/parse/node.go.html#4529656">TemplateNode</a></span><span class="op" id="4530029">{</span><span class="ident" id="4530030">tr</span><span class="op" id="4530032">:</span>&nbsp;<span class="ident" id="4530034"><a href="/text/template/parse/node.go.html#4529923">t</a></span><span class="op" id="4530035">,</span>&nbsp;<span class="ident" id="4530037">NodeType</span><span class="op" id="4530045">:</span>&nbsp;<span class="ident" id="4530047"><a href="/text/template/parse/node.go.html#4512279">NodeTemplate</a></span><span class="op" id="4530059">,</span>&nbsp;<span class="ident" id="4530061">Pos</span><span class="op" id="4530064">:</span>&nbsp;<span class="ident" id="4530066"><a href="/text/template/parse/node.go.html#4529944">pos</a></span><span class="op" id="4530069">,</span>&nbsp;<span class="ident" id="4530071">Line</span><span class="op" id="4530075">:</span>&nbsp;<span class="ident" id="4530077"><a href="/text/template/parse/node.go.html#4529953">line</a></span><span class="op" id="4530081">,</span>&nbsp;<span class="ident" id="4530083">Name</span><span class="op" id="4530087">:</span>&nbsp;<span class="ident" id="4530089"><a href="/text/template/parse/node.go.html#4529963">name</a></span><span class="op" id="4530093">,</span>&nbsp;<span class="ident" id="4530095">Pipe</span><span class="op" id="4530099">:</span>&nbsp;<span class="ident" id="4530101"><a href="/text/template/parse/node.go.html#4529976">pipe</a></span><span class="op" id="4530105">}</span><br>
<span class="lineno"></span><span class="op" id="4530107">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="keyword" id="4530110">func</span>&nbsp;<span class="op" id="4530115">(</span><span class="ident" id="4530116">t</span>&nbsp;<span class="op" id="4530118">*</span><span class="ident" id="4530119"><a href="/text/template/parse/node.go.html#4529656">TemplateNode</a></span><span class="op" id="4530131">)</span>&nbsp;<span class="ident" id="4530133">String</span><span class="op" id="4530139">(</span><span class="op" id="4530140">)</span>&nbsp;<span class="builtintype" id="4530142">string</span>&nbsp;<span class="op" id="4530149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530152">if</span>&nbsp;<span class="ident" id="4530155"><a href="/text/template/parse/node.go.html#4530116">t</a></span><span class="op" id="4530156">.</span><span class="ident" id="4530157">Pipe</span>&nbsp;<span class="op" id="4530162">==</span>&nbsp;<span class="ident" id="4530165">nil</span>&nbsp;<span class="op" id="4530169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530173">return</span>&nbsp;<span class="ident" id="4530180"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4530183">.</span><span class="ident" id="4530184">Sprintf</span><span class="op" id="4530191">(</span><span class="string" id="4530192">&#34;{{template&nbsp;%q}}&#34;</span><span class="op" id="4530209">,</span>&nbsp;<span class="ident" id="4530211"><a href="/text/template/parse/node.go.html#4530116">t</a></span><span class="op" id="4530212">.</span><span class="ident" id="4530213">Name</span><span class="op" id="4530217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4530220">}</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530223">return</span>&nbsp;<span class="ident" id="4530230"><a href="/text/template/parse/node.go.html#4510109">fmt</a></span><span class="op" id="4530233">.</span><span class="ident" id="4530234">Sprintf</span><span class="op" id="4530241">(</span><span class="string" id="4530242">&#34;{{template&nbsp;%q&nbsp;%s}}&#34;</span><span class="op" id="4530262">,</span>&nbsp;<span class="ident" id="4530264"><a href="/text/template/parse/node.go.html#4530116">t</a></span><span class="op" id="4530265">.</span><span class="ident" id="4530266">Name</span><span class="op" id="4530270">,</span>&nbsp;<span class="ident" id="4530272"><a href="/text/template/parse/node.go.html#4530116">t</a></span><span class="op" id="4530273">.</span><span class="ident" id="4530274">Pipe</span><span class="op" id="4530278">)</span><br>
<span class="lineno"></span><span class="op" id="4530280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4530283">func</span>&nbsp;<span class="op" id="4530288">(</span><span class="ident" id="4530289">t</span>&nbsp;<span class="op" id="4530291">*</span><span class="ident" id="4530292"><a href="/text/template/parse/node.go.html#4529656">TemplateNode</a></span><span class="op" id="4530304">)</span>&nbsp;<span class="ident" id="4530306">tree</span><span class="op" id="4530310">(</span><span class="op" id="4530311">)</span>&nbsp;<span class="op" id="4530313">*</span><span class="ident" id="4530314"><a href="/text/template/parse/parse.go.html#4531006">Tree</a></span>&nbsp;<span class="op" id="4530319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530322">return</span>&nbsp;<span class="ident" id="4530329"><a href="/text/template/parse/node.go.html#4530289">t</a></span><span class="op" id="4530330">.</span><span class="ident" id="4530331">tr</span><br>
<span class="lineno">830</span><span class="op" id="4530334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4530337">func</span>&nbsp;<span class="op" id="4530342">(</span><span class="ident" id="4530343">t</span>&nbsp;<span class="op" id="4530345">*</span><span class="ident" id="4530346"><a href="/text/template/parse/node.go.html#4529656">TemplateNode</a></span><span class="op" id="4530358">)</span>&nbsp;<span class="ident" id="4530360">Copy</span><span class="op" id="4530364">(</span><span class="op" id="4530365">)</span>&nbsp;<span class="ident" id="4530367"><a href="/text/template/parse/node.go.html#4510399">Node</a></span>&nbsp;<span class="op" id="4530372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4530375">return</span>&nbsp;<span class="ident" id="4530382"><a href="/text/template/parse/node.go.html#4530343">t</a></span><span class="op" id="4530383">.</span><span class="ident" id="4530384">tr</span><span class="op" id="4530386">.</span><span class="ident" id="4530387">newTemplate</span><span class="op" id="4530398">(</span><span class="ident" id="4530399"><a href="/text/template/parse/node.go.html#4530343">t</a></span><span class="op" id="4530400">.</span><span class="ident" id="4530401">Pos</span><span class="op" id="4530404">,</span>&nbsp;<span class="ident" id="4530406"><a href="/text/template/parse/node.go.html#4530343">t</a></span><span class="op" id="4530407">.</span><span class="ident" id="4530408">Line</span><span class="op" id="4530412">,</span>&nbsp;<span class="ident" id="4530414"><a href="/text/template/parse/node.go.html#4530343">t</a></span><span class="op" id="4530415">.</span><span class="ident" id="4530416">Name</span><span class="op" id="4530420">,</span>&nbsp;<span class="ident" id="4530422"><a href="/text/template/parse/node.go.html#4530343">t</a></span><span class="op" id="4530423">.</span><span class="ident" id="4530424">Pipe</span><span class="op" id="4530428">.</span><span class="ident" id="4530429">CopyPipe</span><span class="op" id="4530437">(</span><span class="op" id="4530438">)</span><span class="op" id="4530439">)</span><br>
<span class="lineno"></span><span class="op" id="4530441">}</span>
</div>
</body>
</html>
