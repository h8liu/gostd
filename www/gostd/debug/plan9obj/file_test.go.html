<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html" class="current">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7185962">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7186018">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7186072">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7186123">package</span>&nbsp;<span class="ident" id="7186131">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186141">import</span>&nbsp;<span class="op" id="7186148">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7186151">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7186162">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7186172">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186175">type</span>&nbsp;<span class="ident" id="7186180">fileTest</span>&nbsp;<span class="keyword" id="7186189">struct</span>&nbsp;<span class="op" id="7186196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186199">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7186208">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186216">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186225">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186237">sections</span>&nbsp;<span class="op" id="7186246">[</span><span class="op" id="7186247">]</span><span class="op" id="7186248">*</span><span class="ident" id="7186249">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="7186263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186266">var</span>&nbsp;<span class="ident" id="7186270">fileTests</span>&nbsp;<span class="op" id="7186280">=</span>&nbsp;<span class="op" id="7186282">[</span><span class="op" id="7186283">]</span><span class="ident" id="7186284">fileTest</span><span class="op" id="7186292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186295">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7186299">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="7186324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186328">FileHeader</span><span class="op" id="7186338">{</span><span class="ident" id="7186339">Magic386</span><span class="op" id="7186347">,</span>&nbsp;<span class="num" id="7186349">0x324</span><span class="op" id="7186354">,</span>&nbsp;<span class="num" id="7186356">0x14</span><span class="op" id="7186360">,</span>&nbsp;<span class="num" id="7186362">4</span><span class="op" id="7186363">,</span>&nbsp;<span class="num" id="7186365">0x1000</span><span class="op" id="7186371">,</span>&nbsp;<span class="num" id="7186373">32</span><span class="op" id="7186375">}</span><span class="op" id="7186376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186380">[</span><span class="op" id="7186381">]</span><span class="op" id="7186382">*</span><span class="ident" id="7186383">SectionHeader</span><span class="op" id="7186396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186401">{</span><span class="string" id="7186402">&#34;text&#34;</span><span class="op" id="7186408">,</span>&nbsp;<span class="num" id="7186410">0x4c5f</span><span class="op" id="7186416">,</span>&nbsp;<span class="num" id="7186418">0x20</span><span class="op" id="7186422">}</span><span class="op" id="7186423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186428">{</span><span class="string" id="7186429">&#34;data&#34;</span><span class="op" id="7186435">,</span>&nbsp;<span class="num" id="7186437">0x94c</span><span class="op" id="7186442">,</span>&nbsp;<span class="num" id="7186444">0x4c7f</span><span class="op" id="7186450">}</span><span class="op" id="7186451">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186456">{</span><span class="string" id="7186457">&#34;syms&#34;</span><span class="op" id="7186463">,</span>&nbsp;<span class="num" id="7186465">0x2c2b</span><span class="op" id="7186471">,</span>&nbsp;<span class="num" id="7186473">0x55cb</span><span class="op" id="7186479">}</span><span class="op" id="7186480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186485">{</span><span class="string" id="7186486">&#34;spsz&#34;</span><span class="op" id="7186492">,</span>&nbsp;<span class="num" id="7186494">0x0</span><span class="op" id="7186497">,</span>&nbsp;<span class="num" id="7186499">0x81f6</span><span class="op" id="7186505">}</span><span class="op" id="7186506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186511">{</span><span class="string" id="7186512">&#34;pcsz&#34;</span><span class="op" id="7186518">,</span>&nbsp;<span class="num" id="7186520">0xf7a</span><span class="op" id="7186525">,</span>&nbsp;<span class="num" id="7186527">0x81f6</span><span class="op" id="7186533">}</span><span class="op" id="7186534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186538">}</span><span class="op" id="7186539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186542">}</span><span class="op" id="7186543">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7186550">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="7186577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186581">FileHeader</span><span class="op" id="7186591">{</span><span class="ident" id="7186592">MagicAMD64</span><span class="op" id="7186602">,</span>&nbsp;<span class="num" id="7186604">0x618</span><span class="op" id="7186609">,</span>&nbsp;<span class="num" id="7186611">0x13</span><span class="op" id="7186615">,</span>&nbsp;<span class="num" id="7186617">8</span><span class="op" id="7186618">,</span>&nbsp;<span class="num" id="7186620">0x200000</span><span class="op" id="7186628">,</span>&nbsp;<span class="num" id="7186630">40</span><span class="op" id="7186632">}</span><span class="op" id="7186633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186637">[</span><span class="op" id="7186638">]</span><span class="op" id="7186639">*</span><span class="ident" id="7186640">SectionHeader</span><span class="op" id="7186653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186658">{</span><span class="string" id="7186659">&#34;text&#34;</span><span class="op" id="7186665">,</span>&nbsp;<span class="num" id="7186667">0x4213</span><span class="op" id="7186673">,</span>&nbsp;<span class="num" id="7186675">0x28</span><span class="op" id="7186679">}</span><span class="op" id="7186680">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186685">{</span><span class="string" id="7186686">&#34;data&#34;</span><span class="op" id="7186692">,</span>&nbsp;<span class="num" id="7186694">0xa80</span><span class="op" id="7186699">,</span>&nbsp;<span class="num" id="7186701">0x423b</span><span class="op" id="7186707">}</span><span class="op" id="7186708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186713">{</span><span class="string" id="7186714">&#34;syms&#34;</span><span class="op" id="7186720">,</span>&nbsp;<span class="num" id="7186722">0x2c8c</span><span class="op" id="7186728">,</span>&nbsp;<span class="num" id="7186730">0x4cbb</span><span class="op" id="7186736">}</span><span class="op" id="7186737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186742">{</span><span class="string" id="7186743">&#34;spsz&#34;</span><span class="op" id="7186749">,</span>&nbsp;<span class="num" id="7186751">0x0</span><span class="op" id="7186754">,</span>&nbsp;<span class="num" id="7186756">0x7947</span><span class="op" id="7186762">}</span><span class="op" id="7186763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186768">{</span><span class="string" id="7186769">&#34;pcsz&#34;</span><span class="op" id="7186775">,</span>&nbsp;<span class="num" id="7186777">0xca0</span><span class="op" id="7186782">,</span>&nbsp;<span class="num" id="7186784">0x7947</span><span class="op" id="7186790">}</span><span class="op" id="7186791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186795">}</span><span class="op" id="7186796">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186799">}</span><span class="op" id="7186800">,</span><br>
<span class="lineno"></span><span class="op" id="7186802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186805">func</span>&nbsp;<span class="ident" id="7186810">TestOpen</span><span class="op" id="7186818">(</span><span class="ident" id="7186819">t</span>&nbsp;<span class="op" id="7186821">*</span><span class="ident" id="7186822">testing</span><span class="op" id="7186829">.</span><span class="ident" id="7186830">T</span><span class="op" id="7186831">)</span>&nbsp;<span class="op" id="7186833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7186836">for</span>&nbsp;<span class="ident" id="7186840">i</span>&nbsp;<span class="op" id="7186842">:=</span>&nbsp;<span class="keyword" id="7186845">range</span>&nbsp;<span class="ident" id="7186851">fileTests</span>&nbsp;<span class="op" id="7186861">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186865">tt</span>&nbsp;<span class="op" id="7186868">:=</span>&nbsp;<span class="op" id="7186871">&amp;</span><span class="ident" id="7186872">fileTests</span><span class="op" id="7186881">[</span><span class="ident" id="7186882">i</span><span class="op" id="7186883">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186888">f</span><span class="op" id="7186889">,</span>&nbsp;<span class="ident" id="7186891">err</span>&nbsp;<span class="op" id="7186895">:=</span>&nbsp;<span class="ident" id="7186898">Open</span><span class="op" id="7186902">(</span><span class="ident" id="7186903">tt</span><span class="op" id="7186905">.</span><span class="ident" id="7186906">file</span><span class="op" id="7186910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7186914">if</span>&nbsp;<span class="ident" id="7186917">err</span>&nbsp;<span class="op" id="7186921">!=</span>&nbsp;<span class="ident" id="7186924">nil</span>&nbsp;<span class="op" id="7186928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186933">t</span><span class="op" id="7186934">.</span><span class="ident" id="7186935">Error</span><span class="op" id="7186940">(</span><span class="ident" id="7186941">err</span><span class="op" id="7186944">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7186949">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7186964">if</span>&nbsp;<span class="op" id="7186967">!</span><span class="ident" id="7186968">reflect</span><span class="op" id="7186975">.</span><span class="ident" id="7186976">DeepEqual</span><span class="op" id="7186985">(</span><span class="ident" id="7186986">f</span><span class="op" id="7186987">.</span><span class="ident" id="7186988">FileHeader</span><span class="op" id="7186998">,</span>&nbsp;<span class="ident" id="7187000">tt</span><span class="op" id="7187002">.</span><span class="ident" id="7187003">hdr</span><span class="op" id="7187006">)</span>&nbsp;<span class="op" id="7187008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187013">t</span><span class="op" id="7187014">.</span><span class="ident" id="7187015">Errorf</span><span class="op" id="7187021">(</span><span class="string" id="7187022">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7187058">,</span>&nbsp;<span class="ident" id="7187060">tt</span><span class="op" id="7187062">.</span><span class="ident" id="7187063">file</span><span class="op" id="7187067">,</span>&nbsp;<span class="ident" id="7187069">f</span><span class="op" id="7187070">.</span><span class="ident" id="7187071">FileHeader</span><span class="op" id="7187081">,</span>&nbsp;<span class="ident" id="7187083">tt</span><span class="op" id="7187085">.</span><span class="ident" id="7187086">hdr</span><span class="op" id="7187089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187094">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187110">for</span>&nbsp;<span class="ident" id="7187114">i</span><span class="op" id="7187115">,</span>&nbsp;<span class="ident" id="7187117">sh</span>&nbsp;<span class="op" id="7187120">:=</span>&nbsp;<span class="keyword" id="7187123">range</span>&nbsp;<span class="ident" id="7187129">f</span><span class="op" id="7187130">.</span><span class="ident" id="7187131">Sections</span>&nbsp;<span class="op" id="7187140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187145">if</span>&nbsp;<span class="ident" id="7187148">i</span>&nbsp;<span class="op" id="7187150">&gt;=</span>&nbsp;<span class="builtinfunc" id="7187153">len</span><span class="op" id="7187156">(</span><span class="ident" id="7187157">tt</span><span class="op" id="7187159">.</span><span class="ident" id="7187160">sections</span><span class="op" id="7187168">)</span>&nbsp;<span class="op" id="7187170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187176">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187190">have</span>&nbsp;<span class="op" id="7187195">:=</span>&nbsp;<span class="op" id="7187198">&amp;</span><span class="ident" id="7187199">sh</span><span class="op" id="7187201">.</span><span class="ident" id="7187202">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187219">want</span>&nbsp;<span class="op" id="7187224">:=</span>&nbsp;<span class="ident" id="7187227">tt</span><span class="op" id="7187229">.</span><span class="ident" id="7187230">sections</span><span class="op" id="7187238">[</span><span class="ident" id="7187239">i</span><span class="op" id="7187240">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187245">if</span>&nbsp;<span class="op" id="7187248">!</span><span class="ident" id="7187249">reflect</span><span class="op" id="7187256">.</span><span class="ident" id="7187257">DeepEqual</span><span class="op" id="7187266">(</span><span class="ident" id="7187267">have</span><span class="op" id="7187271">,</span>&nbsp;<span class="ident" id="7187273">want</span><span class="op" id="7187277">)</span>&nbsp;<span class="op" id="7187279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187285">t</span><span class="op" id="7187286">.</span><span class="ident" id="7187287">Errorf</span><span class="op" id="7187293">(</span><span class="string" id="7187294">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7187342">,</span>&nbsp;<span class="ident" id="7187344">tt</span><span class="op" id="7187346">.</span><span class="ident" id="7187347">file</span><span class="op" id="7187351">,</span>&nbsp;<span class="ident" id="7187353">i</span><span class="op" id="7187354">,</span>&nbsp;<span class="ident" id="7187356">have</span><span class="op" id="7187360">,</span>&nbsp;<span class="ident" id="7187362">want</span><span class="op" id="7187366">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187379">tn</span>&nbsp;<span class="op" id="7187382">:=</span>&nbsp;<span class="builtinfunc" id="7187385">len</span><span class="op" id="7187388">(</span><span class="ident" id="7187389">tt</span><span class="op" id="7187391">.</span><span class="ident" id="7187392">sections</span><span class="op" id="7187400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187404">fn</span>&nbsp;<span class="op" id="7187407">:=</span>&nbsp;<span class="builtinfunc" id="7187410">len</span><span class="op" id="7187413">(</span><span class="ident" id="7187414">f</span><span class="op" id="7187415">.</span><span class="ident" id="7187416">Sections</span><span class="op" id="7187424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187428">if</span>&nbsp;<span class="ident" id="7187431">tn</span>&nbsp;<span class="op" id="7187434">!=</span>&nbsp;<span class="ident" id="7187437">fn</span>&nbsp;<span class="op" id="7187440">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187445">t</span><span class="op" id="7187446">.</span><span class="ident" id="7187447">Errorf</span><span class="op" id="7187453">(</span><span class="string" id="7187454">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7187492">,</span>&nbsp;<span class="ident" id="7187494">tt</span><span class="op" id="7187496">.</span><span class="ident" id="7187497">file</span><span class="op" id="7187501">,</span>&nbsp;<span class="ident" id="7187503">fn</span><span class="op" id="7187505">,</span>&nbsp;<span class="ident" id="7187507">tn</span><span class="op" id="7187509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187516">}</span><br>
<span class="lineno"></span><span class="op" id="7187518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7187521">func</span>&nbsp;<span class="ident" id="7187526">TestOpenFailure</span><span class="op" id="7187541">(</span><span class="ident" id="7187542">t</span>&nbsp;<span class="op" id="7187544">*</span><span class="ident" id="7187545">testing</span><span class="op" id="7187552">.</span><span class="ident" id="7187553">T</span><span class="op" id="7187554">)</span>&nbsp;<span class="op" id="7187556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187559">filename</span>&nbsp;<span class="op" id="7187568">:=</span>&nbsp;<span class="string" id="7187571">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7187584">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187612">_</span><span class="op" id="7187613">,</span>&nbsp;<span class="ident" id="7187615">err</span>&nbsp;<span class="op" id="7187619">:=</span>&nbsp;<span class="ident" id="7187622">Open</span><span class="op" id="7187626">(</span><span class="ident" id="7187627">filename</span><span class="op" id="7187635">)</span>&nbsp;<span class="comment" id="7187637">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7187653">if</span>&nbsp;<span class="ident" id="7187656">err</span>&nbsp;<span class="op" id="7187660">==</span>&nbsp;<span class="ident" id="7187663">nil</span>&nbsp;<span class="op" id="7187667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187671">t</span><span class="op" id="7187672">.</span><span class="ident" id="7187673">Errorf</span><span class="op" id="7187679">(</span><span class="string" id="7187680">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="7187713">,</span>&nbsp;<span class="ident" id="7187715">filename</span><span class="op" id="7187723">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187726">}</span><br>
<span class="lineno"></span><span class="op" id="7187728">}</span>
</div>
</body>
</html>
