<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html" class="current">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3597067">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3597122">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3597176">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3597227">package</span>&nbsp;<span class="ident" id="3597235">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3597243">import</span>&nbsp;<span class="op" id="3597250">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3597253">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3597264">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3597273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3597276">const</span>&nbsp;<span class="ident" id="3597282">wordSize</span>&nbsp;<span class="op" id="3597291">=</span>&nbsp;<span class="builtintype" id="3597293">int</span><span class="op" id="3597296">(</span><span class="ident" id="3597297">unsafe</span><span class="op" id="3597303">.</span><span class="ident" id="3597304">Sizeof</span><span class="op" id="3597310">(</span><span class="builtintype" id="3597311">uintptr</span><span class="op" id="3597318">(</span><span class="num" id="3597319">0</span><span class="op" id="3597320">)</span><span class="op" id="3597321">)</span><span class="op" id="3597322">)</span><br>
<span class="lineno"></span><span class="keyword" id="3597324">const</span>&nbsp;<span class="ident" id="3597330">supportsUnaligned</span>&nbsp;<span class="op" id="3597348">=</span>&nbsp;<span class="ident" id="3597350">runtime</span><span class="op" id="3597357">.</span><span class="ident" id="3597358">GOARCH</span>&nbsp;<span class="op" id="3597365">==</span>&nbsp;<span class="string" id="3597368">&#34;386&#34;</span>&nbsp;<span class="op" id="3597374">||</span>&nbsp;<span class="ident" id="3597377">runtime</span><span class="op" id="3597384">.</span><span class="ident" id="3597385">GOARCH</span>&nbsp;<span class="op" id="3597392">==</span>&nbsp;<span class="string" id="3597395">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3597404">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3597470">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3597504">func</span>&nbsp;<span class="ident" id="3597509">fastXORBytes</span><span class="op" id="3597521">(</span><span class="ident" id="3597522">dst</span><span class="op" id="3597525">,</span>&nbsp;<span class="ident" id="3597527">a</span><span class="op" id="3597528">,</span>&nbsp;<span class="ident" id="3597530">b</span>&nbsp;<span class="op" id="3597532">[</span><span class="op" id="3597533">]</span><span class="builtintype" id="3597534">byte</span><span class="op" id="3597538">)</span>&nbsp;<span class="builtintype" id="3597540">int</span>&nbsp;<span class="op" id="3597544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597547">n</span>&nbsp;<span class="op" id="3597549">:=</span>&nbsp;<span class="builtinfunc" id="3597552">len</span><span class="op" id="3597555">(</span><span class="ident" id="3597556">a</span><span class="op" id="3597557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597560">if</span>&nbsp;<span class="builtinfunc" id="3597563">len</span><span class="op" id="3597566">(</span><span class="ident" id="3597567">b</span><span class="op" id="3597568">)</span>&nbsp;<span class="op" id="3597570">&lt;</span>&nbsp;<span class="ident" id="3597572">n</span>&nbsp;<span class="op" id="3597574">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597578">n</span>&nbsp;<span class="op" id="3597580">=</span>&nbsp;<span class="builtinfunc" id="3597582">len</span><span class="op" id="3597585">(</span><span class="ident" id="3597586">b</span><span class="op" id="3597587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597594">w</span>&nbsp;<span class="op" id="3597596">:=</span>&nbsp;<span class="ident" id="3597599">n</span>&nbsp;<span class="op" id="3597601">/</span>&nbsp;<span class="ident" id="3597603">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597613">if</span>&nbsp;<span class="ident" id="3597616">w</span>&nbsp;<span class="op" id="3597618">&gt;</span>&nbsp;<span class="num" id="3597620">0</span>&nbsp;<span class="op" id="3597622">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597626">dw</span>&nbsp;<span class="op" id="3597629">:=</span>&nbsp;<span class="op" id="3597632">*</span><span class="op" id="3597633">(</span><span class="op" id="3597634">*</span><span class="op" id="3597635">[</span><span class="op" id="3597636">]</span><span class="builtintype" id="3597637">uintptr</span><span class="op" id="3597644">)</span><span class="op" id="3597645">(</span><span class="ident" id="3597646">unsafe</span><span class="op" id="3597652">.</span><span class="ident" id="3597653">Pointer</span><span class="op" id="3597660">(</span><span class="op" id="3597661">&amp;</span><span class="ident" id="3597662">dst</span><span class="op" id="3597665">)</span><span class="op" id="3597666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597670">aw</span>&nbsp;<span class="op" id="3597673">:=</span>&nbsp;<span class="op" id="3597676">*</span><span class="op" id="3597677">(</span><span class="op" id="3597678">*</span><span class="op" id="3597679">[</span><span class="op" id="3597680">]</span><span class="builtintype" id="3597681">uintptr</span><span class="op" id="3597688">)</span><span class="op" id="3597689">(</span><span class="ident" id="3597690">unsafe</span><span class="op" id="3597696">.</span><span class="ident" id="3597697">Pointer</span><span class="op" id="3597704">(</span><span class="op" id="3597705">&amp;</span><span class="ident" id="3597706">a</span><span class="op" id="3597707">)</span><span class="op" id="3597708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597712">bw</span>&nbsp;<span class="op" id="3597715">:=</span>&nbsp;<span class="op" id="3597718">*</span><span class="op" id="3597719">(</span><span class="op" id="3597720">*</span><span class="op" id="3597721">[</span><span class="op" id="3597722">]</span><span class="builtintype" id="3597723">uintptr</span><span class="op" id="3597730">)</span><span class="op" id="3597731">(</span><span class="ident" id="3597732">unsafe</span><span class="op" id="3597738">.</span><span class="ident" id="3597739">Pointer</span><span class="op" id="3597746">(</span><span class="op" id="3597747">&amp;</span><span class="ident" id="3597748">b</span><span class="op" id="3597749">)</span><span class="op" id="3597750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597754">for</span>&nbsp;<span class="ident" id="3597758">i</span>&nbsp;<span class="op" id="3597760">:=</span>&nbsp;<span class="num" id="3597763">0</span><span class="op" id="3597764">;</span>&nbsp;<span class="ident" id="3597766">i</span>&nbsp;<span class="op" id="3597768">&lt;</span>&nbsp;<span class="ident" id="3597770">w</span><span class="op" id="3597771">;</span>&nbsp;<span class="ident" id="3597773">i</span><span class="op" id="3597774">++</span>&nbsp;<span class="op" id="3597777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597782">dw</span><span class="op" id="3597784">[</span><span class="ident" id="3597785">i</span><span class="op" id="3597786">]</span>&nbsp;<span class="op" id="3597788">=</span>&nbsp;<span class="ident" id="3597790">aw</span><span class="op" id="3597792">[</span><span class="ident" id="3597793">i</span><span class="op" id="3597794">]</span>&nbsp;<span class="op" id="3597796">^</span>&nbsp;<span class="ident" id="3597798">bw</span><span class="op" id="3597800">[</span><span class="ident" id="3597801">i</span><span class="op" id="3597802">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597813">for</span>&nbsp;<span class="ident" id="3597817">i</span>&nbsp;<span class="op" id="3597819">:=</span>&nbsp;<span class="op" id="3597822">(</span><span class="ident" id="3597823">n</span>&nbsp;<span class="op" id="3597825">-</span>&nbsp;<span class="ident" id="3597827">n</span><span class="op" id="3597828">%</span><span class="ident" id="3597829">wordSize</span><span class="op" id="3597837">)</span><span class="op" id="3597838">;</span>&nbsp;<span class="ident" id="3597840">i</span>&nbsp;<span class="op" id="3597842">&lt;</span>&nbsp;<span class="ident" id="3597844">n</span><span class="op" id="3597845">;</span>&nbsp;<span class="ident" id="3597847">i</span><span class="op" id="3597848">++</span>&nbsp;<span class="op" id="3597851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597855">dst</span><span class="op" id="3597858">[</span><span class="ident" id="3597859">i</span><span class="op" id="3597860">]</span>&nbsp;<span class="op" id="3597862">=</span>&nbsp;<span class="ident" id="3597864">a</span><span class="op" id="3597865">[</span><span class="ident" id="3597866">i</span><span class="op" id="3597867">]</span>&nbsp;<span class="op" id="3597869">^</span>&nbsp;<span class="ident" id="3597871">b</span><span class="op" id="3597872">[</span><span class="ident" id="3597873">i</span><span class="op" id="3597874">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597881">return</span>&nbsp;<span class="ident" id="3597888">n</span><br>
<span class="lineno"></span><span class="op" id="3597890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3597893">func</span>&nbsp;<span class="ident" id="3597898">safeXORBytes</span><span class="op" id="3597910">(</span><span class="ident" id="3597911">dst</span><span class="op" id="3597914">,</span>&nbsp;<span class="ident" id="3597916">a</span><span class="op" id="3597917">,</span>&nbsp;<span class="ident" id="3597919">b</span>&nbsp;<span class="op" id="3597921">[</span><span class="op" id="3597922">]</span><span class="builtintype" id="3597923">byte</span><span class="op" id="3597927">)</span>&nbsp;<span class="builtintype" id="3597929">int</span>&nbsp;<span class="op" id="3597933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597936">n</span>&nbsp;<span class="op" id="3597938">:=</span>&nbsp;<span class="builtinfunc" id="3597941">len</span><span class="op" id="3597944">(</span><span class="ident" id="3597945">a</span><span class="op" id="3597946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597949">if</span>&nbsp;<span class="builtinfunc" id="3597952">len</span><span class="op" id="3597955">(</span><span class="ident" id="3597956">b</span><span class="op" id="3597957">)</span>&nbsp;<span class="op" id="3597959">&lt;</span>&nbsp;<span class="ident" id="3597961">n</span>&nbsp;<span class="op" id="3597963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597967">n</span>&nbsp;<span class="op" id="3597969">=</span>&nbsp;<span class="builtinfunc" id="3597971">len</span><span class="op" id="3597974">(</span><span class="ident" id="3597975">b</span><span class="op" id="3597976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597979">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597982">for</span>&nbsp;<span class="ident" id="3597986">i</span>&nbsp;<span class="op" id="3597988">:=</span>&nbsp;<span class="num" id="3597991">0</span><span class="op" id="3597992">;</span>&nbsp;<span class="ident" id="3597994">i</span>&nbsp;<span class="op" id="3597996">&lt;</span>&nbsp;<span class="ident" id="3597998">n</span><span class="op" id="3597999">;</span>&nbsp;<span class="ident" id="3598001">i</span><span class="op" id="3598002">++</span>&nbsp;<span class="op" id="3598005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598009">dst</span><span class="op" id="3598012">[</span><span class="ident" id="3598013">i</span><span class="op" id="3598014">]</span>&nbsp;<span class="op" id="3598016">=</span>&nbsp;<span class="ident" id="3598018">a</span><span class="op" id="3598019">[</span><span class="ident" id="3598020">i</span><span class="op" id="3598021">]</span>&nbsp;<span class="op" id="3598023">^</span>&nbsp;<span class="ident" id="3598025">b</span><span class="op" id="3598026">[</span><span class="ident" id="3598027">i</span><span class="op" id="3598028">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3598031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598034">return</span>&nbsp;<span class="ident" id="3598041">n</span><br>
<span class="lineno"></span><span class="op" id="3598043">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3598046">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3598127">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3598172">func</span>&nbsp;<span class="ident" id="3598177">xorBytes</span><span class="op" id="3598185">(</span><span class="ident" id="3598186">dst</span><span class="op" id="3598189">,</span>&nbsp;<span class="ident" id="3598191">a</span><span class="op" id="3598192">,</span>&nbsp;<span class="ident" id="3598194">b</span>&nbsp;<span class="op" id="3598196">[</span><span class="op" id="3598197">]</span><span class="builtintype" id="3598198">byte</span><span class="op" id="3598202">)</span>&nbsp;<span class="builtintype" id="3598204">int</span>&nbsp;<span class="op" id="3598208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598211">if</span>&nbsp;<span class="ident" id="3598214">supportsUnaligned</span>&nbsp;<span class="op" id="3598232">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598236">return</span>&nbsp;<span class="ident" id="3598243">fastXORBytes</span><span class="op" id="3598255">(</span><span class="ident" id="3598256">dst</span><span class="op" id="3598259">,</span>&nbsp;<span class="ident" id="3598261">a</span><span class="op" id="3598262">,</span>&nbsp;<span class="ident" id="3598264">b</span><span class="op" id="3598265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3598268">}</span>&nbsp;<span class="keyword" id="3598270">else</span>&nbsp;<span class="op" id="3598275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3598279">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3598335">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3598389">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3598444">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3598489">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598507">return</span>&nbsp;<span class="ident" id="3598514">safeXORBytes</span><span class="op" id="3598526">(</span><span class="ident" id="3598527">dst</span><span class="op" id="3598530">,</span>&nbsp;<span class="ident" id="3598532">a</span><span class="op" id="3598533">,</span>&nbsp;<span class="ident" id="3598535">b</span><span class="op" id="3598536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3598539">}</span><br>
<span class="lineno"></span><span class="op" id="3598541">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3598544">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3598620">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3598672">func</span>&nbsp;<span class="ident" id="3598677">fastXORWords</span><span class="op" id="3598689">(</span><span class="ident" id="3598690">dst</span><span class="op" id="3598693">,</span>&nbsp;<span class="ident" id="3598695">a</span><span class="op" id="3598696">,</span>&nbsp;<span class="ident" id="3598698">b</span>&nbsp;<span class="op" id="3598700">[</span><span class="op" id="3598701">]</span><span class="builtintype" id="3598702">byte</span><span class="op" id="3598706">)</span>&nbsp;<span class="op" id="3598708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598711">dw</span>&nbsp;<span class="op" id="3598714">:=</span>&nbsp;<span class="op" id="3598717">*</span><span class="op" id="3598718">(</span><span class="op" id="3598719">*</span><span class="op" id="3598720">[</span><span class="op" id="3598721">]</span><span class="builtintype" id="3598722">uintptr</span><span class="op" id="3598729">)</span><span class="op" id="3598730">(</span><span class="ident" id="3598731">unsafe</span><span class="op" id="3598737">.</span><span class="ident" id="3598738">Pointer</span><span class="op" id="3598745">(</span><span class="op" id="3598746">&amp;</span><span class="ident" id="3598747">dst</span><span class="op" id="3598750">)</span><span class="op" id="3598751">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598754">aw</span>&nbsp;<span class="op" id="3598757">:=</span>&nbsp;<span class="op" id="3598760">*</span><span class="op" id="3598761">(</span><span class="op" id="3598762">*</span><span class="op" id="3598763">[</span><span class="op" id="3598764">]</span><span class="builtintype" id="3598765">uintptr</span><span class="op" id="3598772">)</span><span class="op" id="3598773">(</span><span class="ident" id="3598774">unsafe</span><span class="op" id="3598780">.</span><span class="ident" id="3598781">Pointer</span><span class="op" id="3598788">(</span><span class="op" id="3598789">&amp;</span><span class="ident" id="3598790">a</span><span class="op" id="3598791">)</span><span class="op" id="3598792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598795">bw</span>&nbsp;<span class="op" id="3598798">:=</span>&nbsp;<span class="op" id="3598801">*</span><span class="op" id="3598802">(</span><span class="op" id="3598803">*</span><span class="op" id="3598804">[</span><span class="op" id="3598805">]</span><span class="builtintype" id="3598806">uintptr</span><span class="op" id="3598813">)</span><span class="op" id="3598814">(</span><span class="ident" id="3598815">unsafe</span><span class="op" id="3598821">.</span><span class="ident" id="3598822">Pointer</span><span class="op" id="3598829">(</span><span class="op" id="3598830">&amp;</span><span class="ident" id="3598831">b</span><span class="op" id="3598832">)</span><span class="op" id="3598833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598836">n</span>&nbsp;<span class="op" id="3598838">:=</span>&nbsp;<span class="builtinfunc" id="3598841">len</span><span class="op" id="3598844">(</span><span class="ident" id="3598845">b</span><span class="op" id="3598846">)</span>&nbsp;<span class="op" id="3598848">/</span>&nbsp;<span class="ident" id="3598850">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598860">for</span>&nbsp;<span class="ident" id="3598864">i</span>&nbsp;<span class="op" id="3598866">:=</span>&nbsp;<span class="num" id="3598869">0</span><span class="op" id="3598870">;</span>&nbsp;<span class="ident" id="3598872">i</span>&nbsp;<span class="op" id="3598874">&lt;</span>&nbsp;<span class="ident" id="3598876">n</span><span class="op" id="3598877">;</span>&nbsp;<span class="ident" id="3598879">i</span><span class="op" id="3598880">++</span>&nbsp;<span class="op" id="3598883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598887">dw</span><span class="op" id="3598889">[</span><span class="ident" id="3598890">i</span><span class="op" id="3598891">]</span>&nbsp;<span class="op" id="3598893">=</span>&nbsp;<span class="ident" id="3598895">aw</span><span class="op" id="3598897">[</span><span class="ident" id="3598898">i</span><span class="op" id="3598899">]</span>&nbsp;<span class="op" id="3598901">^</span>&nbsp;<span class="ident" id="3598903">bw</span><span class="op" id="3598905">[</span><span class="ident" id="3598906">i</span><span class="op" id="3598907">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3598910">}</span><br>
<span class="lineno"></span><span class="op" id="3598912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3598915">func</span>&nbsp;<span class="ident" id="3598920">xorWords</span><span class="op" id="3598928">(</span><span class="ident" id="3598929">dst</span><span class="op" id="3598932">,</span>&nbsp;<span class="ident" id="3598934">a</span><span class="op" id="3598935">,</span>&nbsp;<span class="ident" id="3598937">b</span>&nbsp;<span class="op" id="3598939">[</span><span class="op" id="3598940">]</span><span class="builtintype" id="3598941">byte</span><span class="op" id="3598945">)</span>&nbsp;<span class="op" id="3598947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3598950">if</span>&nbsp;<span class="ident" id="3598953">supportsUnaligned</span>&nbsp;<span class="op" id="3598971">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3598975">fastXORWords</span><span class="op" id="3598987">(</span><span class="ident" id="3598988">dst</span><span class="op" id="3598991">,</span>&nbsp;<span class="ident" id="3598993">a</span><span class="op" id="3598994">,</span>&nbsp;<span class="ident" id="3598996">b</span><span class="op" id="3598997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3599000">}</span>&nbsp;<span class="keyword" id="3599002">else</span>&nbsp;<span class="op" id="3599007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3599011">safeXORBytes</span><span class="op" id="3599023">(</span><span class="ident" id="3599024">dst</span><span class="op" id="3599027">,</span>&nbsp;<span class="ident" id="3599029">a</span><span class="op" id="3599030">,</span>&nbsp;<span class="ident" id="3599032">b</span><span class="op" id="3599033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3599036">}</span><br>
<span class="lineno"></span><span class="op" id="3599038">}</span>
</div>
</body>
</html>
