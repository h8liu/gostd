<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1498775">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1498831">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1498885">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1498936">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1499009">package</span>&nbsp;<span class="ident" id="1499017">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1499022">import</span>&nbsp;<span class="op" id="1499029">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1499032">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1499038">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="1499048">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1499051">//&nbsp;Boolean&nbsp;to&nbsp;int.</span><br>
<span class="lineno">15</span><span class="keyword" id="1499070">func</span>&nbsp;<span class="ident" id="1499075">boolint</span><span class="op" id="1499082">(</span><span class="ident" id="1499083">b</span>&nbsp;<span class="builtintype" id="1499085">bool</span><span class="op" id="1499089">)</span>&nbsp;<span class="builtintype" id="1499091">int</span>&nbsp;<span class="op" id="1499095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499098">if</span>&nbsp;<span class="ident" id="1499101"><a href="/net/sockopt_posix.go.html#1499083">b</a></span>&nbsp;<span class="op" id="1499103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499107">return</span>&nbsp;<span class="num" id="1499114">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499120">return</span>&nbsp;<span class="num" id="1499127">0</span><br>
<span class="lineno">20</span><span class="op" id="1499129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1499132">func</span>&nbsp;<span class="ident" id="1499137">ipv4AddrToInterface</span><span class="op" id="1499156">(</span><span class="ident" id="1499157">ip</span>&nbsp;<span class="ident" id="1499160"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="1499162">)</span>&nbsp;<span class="op" id="1499164">(</span><span class="op" id="1499165">*</span><span class="ident" id="1499166"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1499175">,</span>&nbsp;<span class="builtintype" id="1499177">error</span><span class="op" id="1499182">)</span>&nbsp;<span class="op" id="1499184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499187">ift</span><span class="op" id="1499190">,</span>&nbsp;<span class="ident" id="1499192">err</span>&nbsp;<span class="op" id="1499196">:=</span>&nbsp;<span class="ident" id="1499199"><a href="/net/interface.go.html#1407961">Interfaces</a></span><span class="op" id="1499209">(</span><span class="op" id="1499210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499213">if</span>&nbsp;<span class="ident" id="1499216"><a href="/net/sockopt_posix.go.html#1499192">err</a></span>&nbsp;<span class="op" id="1499220">!=</span>&nbsp;<span class="ident" id="1499223">nil</span>&nbsp;<span class="op" id="1499227">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499231">return</span>&nbsp;<span class="ident" id="1499238">nil</span><span class="op" id="1499241">,</span>&nbsp;<span class="ident" id="1499243"><a href="/net/sockopt_posix.go.html#1499192">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499251">for</span>&nbsp;<span class="ident" id="1499255">_</span><span class="op" id="1499256">,</span>&nbsp;<span class="ident" id="1499258">ifi</span>&nbsp;<span class="op" id="1499262">:=</span>&nbsp;<span class="keyword" id="1499265">range</span>&nbsp;<span class="ident" id="1499271"><a href="/net/sockopt_posix.go.html#1499187">ift</a></span>&nbsp;<span class="op" id="1499275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499279">ifat</span><span class="op" id="1499283">,</span>&nbsp;<span class="ident" id="1499285">err</span>&nbsp;<span class="op" id="1499289">:=</span>&nbsp;<span class="ident" id="1499292"><a href="/net/sockopt_posix.go.html#1499258">ifi</a></span><span class="op" id="1499295">.</span><span class="ident" id="1499296">Addrs</span><span class="op" id="1499301">(</span><span class="op" id="1499302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499306">if</span>&nbsp;<span class="ident" id="1499309"><a href="/net/sockopt_posix.go.html#1499285">err</a></span>&nbsp;<span class="op" id="1499313">!=</span>&nbsp;<span class="ident" id="1499316">nil</span>&nbsp;<span class="op" id="1499320">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499325">return</span>&nbsp;<span class="ident" id="1499332">nil</span><span class="op" id="1499335">,</span>&nbsp;<span class="ident" id="1499337"><a href="/net/sockopt_posix.go.html#1499285">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499347">for</span>&nbsp;<span class="ident" id="1499351">_</span><span class="op" id="1499352">,</span>&nbsp;<span class="ident" id="1499354">ifa</span>&nbsp;<span class="op" id="1499358">:=</span>&nbsp;<span class="keyword" id="1499361">range</span>&nbsp;<span class="ident" id="1499367"><a href="/net/sockopt_posix.go.html#1499279">ifat</a></span>&nbsp;<span class="op" id="1499372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499377">switch</span>&nbsp;<span class="ident" id="1499384">v</span>&nbsp;<span class="op" id="1499386">:=</span>&nbsp;<span class="ident" id="1499389"><a href="/net/sockopt_posix.go.html#1499354">ifa</a></span><span class="op" id="1499392">.</span><span class="op" id="1499393">(</span><span class="keyword" id="1499394">type</span><span class="op" id="1499398">)</span>&nbsp;<span class="op" id="1499400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499405">case</span>&nbsp;<span class="op" id="1499410">*</span><span class="ident" id="1499411"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1499417">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499423">if</span>&nbsp;<span class="ident" id="1499426"><a href="/net/sockopt_posix.go.html#1499157">ip</a></span><span class="op" id="1499428">.</span><span class="ident" id="1499429">Equal</span><span class="op" id="1499434">(</span><span class="ident" id="1499435"><a href="/net/sockopt_posix.go.html#1499384">v</a></span><span class="op" id="1499436">.</span><span class="ident" id="1499437">IP</span><span class="op" id="1499439">)</span>&nbsp;<span class="op" id="1499441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499448">return</span>&nbsp;<span class="op" id="1499455">&amp;</span><span class="ident" id="1499456"><a href="/net/sockopt_posix.go.html#1499258">ifi</a></span><span class="op" id="1499459">,</span>&nbsp;<span class="ident" id="1499461">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499474">case</span>&nbsp;<span class="op" id="1499479">*</span><span class="ident" id="1499480"><a href="/net/ip.go.html#1417295">IPNet</a></span><span class="op" id="1499485">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499491">if</span>&nbsp;<span class="ident" id="1499494"><a href="/net/sockopt_posix.go.html#1499157">ip</a></span><span class="op" id="1499496">.</span><span class="ident" id="1499497">Equal</span><span class="op" id="1499502">(</span><span class="ident" id="1499503"><a href="/net/sockopt_posix.go.html#1499384">v</a></span><span class="op" id="1499504">.</span><span class="ident" id="1499505">IP</span><span class="op" id="1499507">)</span>&nbsp;<span class="op" id="1499509">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499516">return</span>&nbsp;<span class="op" id="1499523">&amp;</span><span class="ident" id="1499524"><a href="/net/sockopt_posix.go.html#1499258">ifi</a></span><span class="op" id="1499527">,</span>&nbsp;<span class="ident" id="1499529">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499549">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499552">if</span>&nbsp;<span class="ident" id="1499555"><a href="/net/sockopt_posix.go.html#1499157">ip</a></span><span class="op" id="1499557">.</span><span class="ident" id="1499558">Equal</span><span class="op" id="1499563">(</span><span class="ident" id="1499564"><a href="/net/ip.go.html#1418575">IPv4zero</a></span><span class="op" id="1499572">)</span>&nbsp;<span class="op" id="1499574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499578">return</span>&nbsp;<span class="ident" id="1499585">nil</span><span class="op" id="1499588">,</span>&nbsp;<span class="ident" id="1499590">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499598">return</span>&nbsp;<span class="ident" id="1499605">nil</span><span class="op" id="1499608">,</span>&nbsp;<span class="ident" id="1499610"><a href="/net/interface.go.html#1406082">errNoSuchInterface</a></span><br>
<span class="lineno"></span><span class="op" id="1499629">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="1499632">func</span>&nbsp;<span class="ident" id="1499637">interfaceToIPv4Addr</span><span class="op" id="1499656">(</span><span class="ident" id="1499657">ifi</span>&nbsp;<span class="op" id="1499661">*</span><span class="ident" id="1499662"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1499671">)</span>&nbsp;<span class="op" id="1499673">(</span><span class="ident" id="1499674"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="1499676">,</span>&nbsp;<span class="builtintype" id="1499678">error</span><span class="op" id="1499683">)</span>&nbsp;<span class="op" id="1499685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499688">if</span>&nbsp;<span class="ident" id="1499691"><a href="/net/sockopt_posix.go.html#1499657">ifi</a></span>&nbsp;<span class="op" id="1499695">==</span>&nbsp;<span class="ident" id="1499698">nil</span>&nbsp;<span class="op" id="1499702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499706">return</span>&nbsp;<span class="ident" id="1499713"><a href="/net/ip.go.html#1418575">IPv4zero</a></span><span class="op" id="1499721">,</span>&nbsp;<span class="ident" id="1499723">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499728">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499731">ifat</span><span class="op" id="1499735">,</span>&nbsp;<span class="ident" id="1499737">err</span>&nbsp;<span class="op" id="1499741">:=</span>&nbsp;<span class="ident" id="1499744"><a href="/net/sockopt_posix.go.html#1499657">ifi</a></span><span class="op" id="1499747">.</span><span class="ident" id="1499748">Addrs</span><span class="op" id="1499753">(</span><span class="op" id="1499754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499757">if</span>&nbsp;<span class="ident" id="1499760"><a href="/net/sockopt_posix.go.html#1499737">err</a></span>&nbsp;<span class="op" id="1499764">!=</span>&nbsp;<span class="ident" id="1499767">nil</span>&nbsp;<span class="op" id="1499771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499775">return</span>&nbsp;<span class="ident" id="1499782">nil</span><span class="op" id="1499785">,</span>&nbsp;<span class="ident" id="1499787"><a href="/net/sockopt_posix.go.html#1499737">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499795">for</span>&nbsp;<span class="ident" id="1499799">_</span><span class="op" id="1499800">,</span>&nbsp;<span class="ident" id="1499802">ifa</span>&nbsp;<span class="op" id="1499806">:=</span>&nbsp;<span class="keyword" id="1499809">range</span>&nbsp;<span class="ident" id="1499815"><a href="/net/sockopt_posix.go.html#1499731">ifat</a></span>&nbsp;<span class="op" id="1499820">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499824">switch</span>&nbsp;<span class="ident" id="1499831">v</span>&nbsp;<span class="op" id="1499833">:=</span>&nbsp;<span class="ident" id="1499836"><a href="/net/sockopt_posix.go.html#1499802">ifa</a></span><span class="op" id="1499839">.</span><span class="op" id="1499840">(</span><span class="keyword" id="1499841">type</span><span class="op" id="1499845">)</span>&nbsp;<span class="op" id="1499847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499851">case</span>&nbsp;<span class="op" id="1499856">*</span><span class="ident" id="1499857"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1499863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499868">if</span>&nbsp;<span class="ident" id="1499871"><a href="/net/sockopt_posix.go.html#1499831">v</a></span><span class="op" id="1499872">.</span><span class="ident" id="1499873">IP</span><span class="op" id="1499875">.</span><span class="ident" id="1499876">To4</span><span class="op" id="1499879">(</span><span class="op" id="1499880">)</span>&nbsp;<span class="op" id="1499882">!=</span>&nbsp;<span class="ident" id="1499885">nil</span>&nbsp;<span class="op" id="1499889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499895">return</span>&nbsp;<span class="ident" id="1499902"><a href="/net/sockopt_posix.go.html#1499831">v</a></span><span class="op" id="1499903">.</span><span class="ident" id="1499904">IP</span><span class="op" id="1499906">,</span>&nbsp;<span class="ident" id="1499908">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499915">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499919">case</span>&nbsp;<span class="op" id="1499924">*</span><span class="ident" id="1499925"><a href="/net/ip.go.html#1417295">IPNet</a></span><span class="op" id="1499930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499935">if</span>&nbsp;<span class="ident" id="1499938"><a href="/net/sockopt_posix.go.html#1499831">v</a></span><span class="op" id="1499939">.</span><span class="ident" id="1499940">IP</span><span class="op" id="1499942">.</span><span class="ident" id="1499943">To4</span><span class="op" id="1499946">(</span><span class="op" id="1499947">)</span>&nbsp;<span class="op" id="1499949">!=</span>&nbsp;<span class="ident" id="1499952">nil</span>&nbsp;<span class="op" id="1499956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499962">return</span>&nbsp;<span class="ident" id="1499969"><a href="/net/sockopt_posix.go.html#1499831">v</a></span><span class="op" id="1499970">.</span><span class="ident" id="1499971">IP</span><span class="op" id="1499973">,</span>&nbsp;<span class="ident" id="1499975">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499986">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499992">return</span>&nbsp;<span class="ident" id="1499999">nil</span><span class="op" id="1500002">,</span>&nbsp;<span class="ident" id="1500004"><a href="/net/interface.go.html#1406082">errNoSuchInterface</a></span><br>
<span class="lineno"></span><span class="op" id="1500023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1500026">func</span>&nbsp;<span class="ident" id="1500031">setIPv4MreqToInterface</span><span class="op" id="1500053">(</span><span class="ident" id="1500054">mreq</span>&nbsp;<span class="op" id="1500059">*</span><span class="ident" id="1500060"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1500067">.</span><span class="ident" id="1500068">IPMreq</span><span class="op" id="1500074">,</span>&nbsp;<span class="ident" id="1500076">ifi</span>&nbsp;<span class="op" id="1500080">*</span><span class="ident" id="1500081"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1500090">)</span>&nbsp;<span class="builtintype" id="1500092">error</span>&nbsp;<span class="op" id="1500098">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500101">if</span>&nbsp;<span class="ident" id="1500104"><a href="/net/sockopt_posix.go.html#1500076">ifi</a></span>&nbsp;<span class="op" id="1500108">==</span>&nbsp;<span class="ident" id="1500111">nil</span>&nbsp;<span class="op" id="1500115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500119">return</span>&nbsp;<span class="ident" id="1500126">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500134">ifat</span><span class="op" id="1500138">,</span>&nbsp;<span class="ident" id="1500140">err</span>&nbsp;<span class="op" id="1500144">:=</span>&nbsp;<span class="ident" id="1500147"><a href="/net/sockopt_posix.go.html#1500076">ifi</a></span><span class="op" id="1500150">.</span><span class="ident" id="1500151">Addrs</span><span class="op" id="1500156">(</span><span class="op" id="1500157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500160">if</span>&nbsp;<span class="ident" id="1500163"><a href="/net/sockopt_posix.go.html#1500140">err</a></span>&nbsp;<span class="op" id="1500167">!=</span>&nbsp;<span class="ident" id="1500170">nil</span>&nbsp;<span class="op" id="1500174">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500178">return</span>&nbsp;<span class="ident" id="1500185"><a href="/net/sockopt_posix.go.html#1500140">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500193">for</span>&nbsp;<span class="ident" id="1500197">_</span><span class="op" id="1500198">,</span>&nbsp;<span class="ident" id="1500200">ifa</span>&nbsp;<span class="op" id="1500204">:=</span>&nbsp;<span class="keyword" id="1500207">range</span>&nbsp;<span class="ident" id="1500213"><a href="/net/sockopt_posix.go.html#1500134">ifat</a></span>&nbsp;<span class="op" id="1500218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500222">switch</span>&nbsp;<span class="ident" id="1500229">v</span>&nbsp;<span class="op" id="1500231">:=</span>&nbsp;<span class="ident" id="1500234"><a href="/net/sockopt_posix.go.html#1500200">ifa</a></span><span class="op" id="1500237">.</span><span class="op" id="1500238">(</span><span class="keyword" id="1500239">type</span><span class="op" id="1500243">)</span>&nbsp;<span class="op" id="1500245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500249">case</span>&nbsp;<span class="op" id="1500254">*</span><span class="ident" id="1500255"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1500261">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500266">if</span>&nbsp;<span class="ident" id="1500269">a</span>&nbsp;<span class="op" id="1500271">:=</span>&nbsp;<span class="ident" id="1500274"><a href="/net/sockopt_posix.go.html#1500229">v</a></span><span class="op" id="1500275">.</span><span class="ident" id="1500276">IP</span><span class="op" id="1500278">.</span><span class="ident" id="1500279">To4</span><span class="op" id="1500282">(</span><span class="op" id="1500283">)</span><span class="op" id="1500284">;</span>&nbsp;<span class="ident" id="1500286"><a href="/net/sockopt_posix.go.html#1500269">a</a></span>&nbsp;<span class="op" id="1500288">!=</span>&nbsp;<span class="ident" id="1500291">nil</span>&nbsp;<span class="op" id="1500295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1500301">copy</span><span class="op" id="1500305">(</span><span class="ident" id="1500306"><a href="/net/sockopt_posix.go.html#1500054">mreq</a></span><span class="op" id="1500310">.</span><span class="ident" id="1500311">Interface</span><span class="op" id="1500320">[</span><span class="op" id="1500321">:</span><span class="op" id="1500322">]</span><span class="op" id="1500323">,</span>&nbsp;<span class="ident" id="1500325"><a href="/net/sockopt_posix.go.html#1500269">a</a></span><span class="op" id="1500326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500332">goto</span>&nbsp;<span class="ident" id="1500337">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500349">case</span>&nbsp;<span class="op" id="1500354">*</span><span class="ident" id="1500355"><a href="/net/ip.go.html#1417295">IPNet</a></span><span class="op" id="1500360">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500365">if</span>&nbsp;<span class="ident" id="1500368">a</span>&nbsp;<span class="op" id="1500370">:=</span>&nbsp;<span class="ident" id="1500373"><a href="/net/sockopt_posix.go.html#1500229">v</a></span><span class="op" id="1500374">.</span><span class="ident" id="1500375">IP</span><span class="op" id="1500377">.</span><span class="ident" id="1500378">To4</span><span class="op" id="1500381">(</span><span class="op" id="1500382">)</span><span class="op" id="1500383">;</span>&nbsp;<span class="ident" id="1500385"><a href="/net/sockopt_posix.go.html#1500368">a</a></span>&nbsp;<span class="op" id="1500387">!=</span>&nbsp;<span class="ident" id="1500390">nil</span>&nbsp;<span class="op" id="1500394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1500400">copy</span><span class="op" id="1500404">(</span><span class="ident" id="1500405"><a href="/net/sockopt_posix.go.html#1500054">mreq</a></span><span class="op" id="1500409">.</span><span class="ident" id="1500410">Interface</span><span class="op" id="1500419">[</span><span class="op" id="1500420">:</span><span class="op" id="1500421">]</span><span class="op" id="1500422">,</span>&nbsp;<span class="ident" id="1500424"><a href="/net/sockopt_posix.go.html#1500368">a</a></span><span class="op" id="1500425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500431">goto</span>&nbsp;<span class="ident" id="1500436">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500448">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500451">}</span><br>
<span class="lineno"></span><span class="ident" id="1500453">done</span><span class="op" id="1500457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500460">if</span>&nbsp;<span class="ident" id="1500463"><a href="/net/ip.go.html#1425143">bytesEqual</a></span><span class="op" id="1500473">(</span><span class="ident" id="1500474"><a href="/net/sockopt_posix.go.html#1500054">mreq</a></span><span class="op" id="1500478">.</span><span class="ident" id="1500479">Multiaddr</span><span class="op" id="1500488">[</span><span class="op" id="1500489">:</span><span class="op" id="1500490">]</span><span class="op" id="1500491">,</span>&nbsp;<span class="ident" id="1500493"><a href="/net/ip.go.html#1418575">IPv4zero</a></span><span class="op" id="1500501">.</span><span class="ident" id="1500502">To4</span><span class="op" id="1500505">(</span><span class="op" id="1500506">)</span><span class="op" id="1500507">)</span>&nbsp;<span class="op" id="1500509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500513">return</span>&nbsp;<span class="ident" id="1500520"><a href="/net/interface.go.html#1406153">errNoSuchMulticastInterface</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500549">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500552">return</span>&nbsp;<span class="ident" id="1500559">nil</span><br>
<span class="lineno"></span><span class="op" id="1500563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1500566">func</span>&nbsp;<span class="ident" id="1500571">setReadBuffer</span><span class="op" id="1500584">(</span><span class="ident" id="1500585">fd</span>&nbsp;<span class="op" id="1500588">*</span><span class="ident" id="1500589"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1500594">,</span>&nbsp;<span class="ident" id="1500596">bytes</span>&nbsp;<span class="builtintype" id="1500602">int</span><span class="op" id="1500605">)</span>&nbsp;<span class="builtintype" id="1500607">error</span>&nbsp;<span class="op" id="1500613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500616">if</span>&nbsp;<span class="ident" id="1500619">err</span>&nbsp;<span class="op" id="1500623">:=</span>&nbsp;<span class="ident" id="1500626"><a href="/net/sockopt_posix.go.html#1500585">fd</a></span><span class="op" id="1500628">.</span><span class="ident" id="1500629">incref</span><span class="op" id="1500635">(</span><span class="op" id="1500636">)</span><span class="op" id="1500637">;</span>&nbsp;<span class="ident" id="1500639"><a href="/net/sockopt_posix.go.html#1500619">err</a></span>&nbsp;<span class="op" id="1500643">!=</span>&nbsp;<span class="ident" id="1500646">nil</span>&nbsp;<span class="op" id="1500650">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500654">return</span>&nbsp;<span class="ident" id="1500661"><a href="/net/sockopt_posix.go.html#1500619">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500669">defer</span>&nbsp;<span class="ident" id="1500675"><a href="/net/sockopt_posix.go.html#1500585">fd</a></span><span class="op" id="1500677">.</span><span class="ident" id="1500678">decref</span><span class="op" id="1500684">(</span><span class="op" id="1500685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500688">return</span>&nbsp;<span class="ident" id="1500695"><a href="/net/sockopt_posix.go.html#1499032">os</a></span><span class="op" id="1500697">.</span><span class="ident" id="1500698">NewSyscallError</span><span class="op" id="1500713">(</span><span class="string" id="1500714">&#34;setsockopt&#34;</span><span class="op" id="1500726">,</span>&nbsp;<span class="ident" id="1500728"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1500735">.</span><span class="ident" id="1500736">SetsockoptInt</span><span class="op" id="1500749">(</span><span class="ident" id="1500750"><a href="/net/sockopt_posix.go.html#1500585">fd</a></span><span class="op" id="1500752">.</span><span class="ident" id="1500753">sysfd</span><span class="op" id="1500758">,</span>&nbsp;<span class="ident" id="1500760"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1500767">.</span><span class="ident" id="1500768">SOL_SOCKET</span><span class="op" id="1500778">,</span>&nbsp;<span class="ident" id="1500780"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1500787">.</span><span class="ident" id="1500788">SO_RCVBUF</span><span class="op" id="1500797">,</span>&nbsp;<span class="ident" id="1500799"><a href="/net/sockopt_posix.go.html#1500596">bytes</a></span><span class="op" id="1500804">)</span><span class="op" id="1500805">)</span><br>
<span class="lineno"></span><span class="op" id="1500807">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="1500810">func</span>&nbsp;<span class="ident" id="1500815">setWriteBuffer</span><span class="op" id="1500829">(</span><span class="ident" id="1500830">fd</span>&nbsp;<span class="op" id="1500833">*</span><span class="ident" id="1500834"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1500839">,</span>&nbsp;<span class="ident" id="1500841">bytes</span>&nbsp;<span class="builtintype" id="1500847">int</span><span class="op" id="1500850">)</span>&nbsp;<span class="builtintype" id="1500852">error</span>&nbsp;<span class="op" id="1500858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500861">if</span>&nbsp;<span class="ident" id="1500864">err</span>&nbsp;<span class="op" id="1500868">:=</span>&nbsp;<span class="ident" id="1500871"><a href="/net/sockopt_posix.go.html#1500830">fd</a></span><span class="op" id="1500873">.</span><span class="ident" id="1500874">incref</span><span class="op" id="1500880">(</span><span class="op" id="1500881">)</span><span class="op" id="1500882">;</span>&nbsp;<span class="ident" id="1500884"><a href="/net/sockopt_posix.go.html#1500864">err</a></span>&nbsp;<span class="op" id="1500888">!=</span>&nbsp;<span class="ident" id="1500891">nil</span>&nbsp;<span class="op" id="1500895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500899">return</span>&nbsp;<span class="ident" id="1500906"><a href="/net/sockopt_posix.go.html#1500864">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500911">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500914">defer</span>&nbsp;<span class="ident" id="1500920"><a href="/net/sockopt_posix.go.html#1500830">fd</a></span><span class="op" id="1500922">.</span><span class="ident" id="1500923">decref</span><span class="op" id="1500929">(</span><span class="op" id="1500930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500933">return</span>&nbsp;<span class="ident" id="1500940"><a href="/net/sockopt_posix.go.html#1499032">os</a></span><span class="op" id="1500942">.</span><span class="ident" id="1500943">NewSyscallError</span><span class="op" id="1500958">(</span><span class="string" id="1500959">&#34;setsockopt&#34;</span><span class="op" id="1500971">,</span>&nbsp;<span class="ident" id="1500973"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1500980">.</span><span class="ident" id="1500981">SetsockoptInt</span><span class="op" id="1500994">(</span><span class="ident" id="1500995"><a href="/net/sockopt_posix.go.html#1500830">fd</a></span><span class="op" id="1500997">.</span><span class="ident" id="1500998">sysfd</span><span class="op" id="1501003">,</span>&nbsp;<span class="ident" id="1501005"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501012">.</span><span class="ident" id="1501013">SOL_SOCKET</span><span class="op" id="1501023">,</span>&nbsp;<span class="ident" id="1501025"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501032">.</span><span class="ident" id="1501033">SO_SNDBUF</span><span class="op" id="1501042">,</span>&nbsp;<span class="ident" id="1501044"><a href="/net/sockopt_posix.go.html#1500841">bytes</a></span><span class="op" id="1501049">)</span><span class="op" id="1501050">)</span><br>
<span class="lineno"></span><span class="op" id="1501052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1501055">func</span>&nbsp;<span class="ident" id="1501060">setKeepAlive</span><span class="op" id="1501072">(</span><span class="ident" id="1501073">fd</span>&nbsp;<span class="op" id="1501076">*</span><span class="ident" id="1501077"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1501082">,</span>&nbsp;<span class="ident" id="1501084">keepalive</span>&nbsp;<span class="builtintype" id="1501094">bool</span><span class="op" id="1501098">)</span>&nbsp;<span class="builtintype" id="1501100">error</span>&nbsp;<span class="op" id="1501106">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501109">if</span>&nbsp;<span class="ident" id="1501112">err</span>&nbsp;<span class="op" id="1501116">:=</span>&nbsp;<span class="ident" id="1501119"><a href="/net/sockopt_posix.go.html#1501073">fd</a></span><span class="op" id="1501121">.</span><span class="ident" id="1501122">incref</span><span class="op" id="1501128">(</span><span class="op" id="1501129">)</span><span class="op" id="1501130">;</span>&nbsp;<span class="ident" id="1501132"><a href="/net/sockopt_posix.go.html#1501112">err</a></span>&nbsp;<span class="op" id="1501136">!=</span>&nbsp;<span class="ident" id="1501139">nil</span>&nbsp;<span class="op" id="1501143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501147">return</span>&nbsp;<span class="ident" id="1501154"><a href="/net/sockopt_posix.go.html#1501112">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501162">defer</span>&nbsp;<span class="ident" id="1501168"><a href="/net/sockopt_posix.go.html#1501073">fd</a></span><span class="op" id="1501170">.</span><span class="ident" id="1501171">decref</span><span class="op" id="1501177">(</span><span class="op" id="1501178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501181">return</span>&nbsp;<span class="ident" id="1501188"><a href="/net/sockopt_posix.go.html#1499032">os</a></span><span class="op" id="1501190">.</span><span class="ident" id="1501191">NewSyscallError</span><span class="op" id="1501206">(</span><span class="string" id="1501207">&#34;setsockopt&#34;</span><span class="op" id="1501219">,</span>&nbsp;<span class="ident" id="1501221"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501228">.</span><span class="ident" id="1501229">SetsockoptInt</span><span class="op" id="1501242">(</span><span class="ident" id="1501243"><a href="/net/sockopt_posix.go.html#1501073">fd</a></span><span class="op" id="1501245">.</span><span class="ident" id="1501246">sysfd</span><span class="op" id="1501251">,</span>&nbsp;<span class="ident" id="1501253"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501260">.</span><span class="ident" id="1501261">SOL_SOCKET</span><span class="op" id="1501271">,</span>&nbsp;<span class="ident" id="1501273"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501280">.</span><span class="ident" id="1501281">SO_KEEPALIVE</span><span class="op" id="1501293">,</span>&nbsp;<span class="ident" id="1501295"><a href="/net/sockopt_posix.go.html#1499075">boolint</a></span><span class="op" id="1501302">(</span><span class="ident" id="1501303"><a href="/net/sockopt_posix.go.html#1501084">keepalive</a></span><span class="op" id="1501312">)</span><span class="op" id="1501313">)</span><span class="op" id="1501314">)</span><br>
<span class="lineno">125</span><span class="op" id="1501316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1501319">func</span>&nbsp;<span class="ident" id="1501324">setLinger</span><span class="op" id="1501333">(</span><span class="ident" id="1501334">fd</span>&nbsp;<span class="op" id="1501337">*</span><span class="ident" id="1501338"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1501343">,</span>&nbsp;<span class="ident" id="1501345">sec</span>&nbsp;<span class="builtintype" id="1501349">int</span><span class="op" id="1501352">)</span>&nbsp;<span class="builtintype" id="1501354">error</span>&nbsp;<span class="op" id="1501360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501363">var</span>&nbsp;<span class="ident" id="1501367">l</span>&nbsp;<span class="ident" id="1501369"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501376">.</span><span class="ident" id="1501377">Linger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501385">if</span>&nbsp;<span class="ident" id="1501388"><a href="/net/sockopt_posix.go.html#1501345">sec</a></span>&nbsp;<span class="op" id="1501392">&gt;=</span>&nbsp;<span class="num" id="1501395">0</span>&nbsp;<span class="op" id="1501397">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501401"><a href="/net/sockopt_posix.go.html#1501367">l</a></span><span class="op" id="1501402">.</span><span class="ident" id="1501403">Onoff</span>&nbsp;<span class="op" id="1501409">=</span>&nbsp;<span class="num" id="1501411">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501415"><a href="/net/sockopt_posix.go.html#1501367">l</a></span><span class="op" id="1501416">.</span><span class="ident" id="1501417">Linger</span>&nbsp;<span class="op" id="1501424">=</span>&nbsp;<span class="builtintype" id="1501426">int32</span><span class="op" id="1501431">(</span><span class="ident" id="1501432"><a href="/net/sockopt_posix.go.html#1501345">sec</a></span><span class="op" id="1501435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501438">}</span>&nbsp;<span class="keyword" id="1501440">else</span>&nbsp;<span class="op" id="1501445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501449"><a href="/net/sockopt_posix.go.html#1501367">l</a></span><span class="op" id="1501450">.</span><span class="ident" id="1501451">Onoff</span>&nbsp;<span class="op" id="1501457">=</span>&nbsp;<span class="num" id="1501459">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501463"><a href="/net/sockopt_posix.go.html#1501367">l</a></span><span class="op" id="1501464">.</span><span class="ident" id="1501465">Linger</span>&nbsp;<span class="op" id="1501472">=</span>&nbsp;<span class="num" id="1501474">0</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501480">if</span>&nbsp;<span class="ident" id="1501483">err</span>&nbsp;<span class="op" id="1501487">:=</span>&nbsp;<span class="ident" id="1501490"><a href="/net/sockopt_posix.go.html#1501334">fd</a></span><span class="op" id="1501492">.</span><span class="ident" id="1501493">incref</span><span class="op" id="1501499">(</span><span class="op" id="1501500">)</span><span class="op" id="1501501">;</span>&nbsp;<span class="ident" id="1501503"><a href="/net/sockopt_posix.go.html#1501483">err</a></span>&nbsp;<span class="op" id="1501507">!=</span>&nbsp;<span class="ident" id="1501510">nil</span>&nbsp;<span class="op" id="1501514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501518">return</span>&nbsp;<span class="ident" id="1501525"><a href="/net/sockopt_posix.go.html#1501483">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501533">defer</span>&nbsp;<span class="ident" id="1501539"><a href="/net/sockopt_posix.go.html#1501334">fd</a></span><span class="op" id="1501541">.</span><span class="ident" id="1501542">decref</span><span class="op" id="1501548">(</span><span class="op" id="1501549">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501552">return</span>&nbsp;<span class="ident" id="1501559"><a href="/net/sockopt_posix.go.html#1499032">os</a></span><span class="op" id="1501561">.</span><span class="ident" id="1501562">NewSyscallError</span><span class="op" id="1501577">(</span><span class="string" id="1501578">&#34;setsockopt&#34;</span><span class="op" id="1501590">,</span>&nbsp;<span class="ident" id="1501592"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501599">.</span><span class="ident" id="1501600">SetsockoptLinger</span><span class="op" id="1501616">(</span><span class="ident" id="1501617"><a href="/net/sockopt_posix.go.html#1501334">fd</a></span><span class="op" id="1501619">.</span><span class="ident" id="1501620">sysfd</span><span class="op" id="1501625">,</span>&nbsp;<span class="ident" id="1501627"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501634">.</span><span class="ident" id="1501635">SOL_SOCKET</span><span class="op" id="1501645">,</span>&nbsp;<span class="ident" id="1501647"><a href="/net/sockopt_posix.go.html#1499038">syscall</a></span><span class="op" id="1501654">.</span><span class="ident" id="1501655">SO_LINGER</span><span class="op" id="1501664">,</span>&nbsp;<span class="op" id="1501666">&amp;</span><span class="ident" id="1501667"><a href="/net/sockopt_posix.go.html#1501367">l</a></span><span class="op" id="1501668">)</span><span class="op" id="1501669">)</span><br>
<span class="lineno"></span><span class="op" id="1501671">}</span>
</div>
</body>
</html>
