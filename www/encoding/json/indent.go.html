<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3695509">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3695565">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3695619">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3695670">package</span>&nbsp;<span class="ident" id="3695678">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3695684">import</span>&nbsp;<span class="string" id="3695691">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3695700">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="3695752">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="3695794">func</span>&nbsp;<span class="ident" id="3695799">Compact</span><span class="op" id="3695806">(</span><span class="ident" id="3695807">dst</span>&nbsp;<span class="op" id="3695811">*</span><span class="ident" id="3695812"><a href="/encoding/json/indent.go.html#3695691">bytes</a></span><span class="op" id="3695817">.</span><span class="ident" id="3695818">Buffer</span><span class="op" id="3695824">,</span>&nbsp;<span class="ident" id="3695826">src</span>&nbsp;<span class="op" id="3695830">[</span><span class="op" id="3695831">]</span><span class="builtintype" id="3695832">byte</span><span class="op" id="3695836">)</span>&nbsp;<span class="builtintype" id="3695838">error</span>&nbsp;<span class="op" id="3695844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695847">return</span>&nbsp;<span class="ident" id="3695854"><a href="/encoding/json/indent.go.html#3695887">compact</a></span><span class="op" id="3695861">(</span><span class="ident" id="3695862"><a href="/encoding/json/indent.go.html#3695807">dst</a></span><span class="op" id="3695865">,</span>&nbsp;<span class="ident" id="3695867"><a href="/encoding/json/indent.go.html#3695826">src</a></span><span class="op" id="3695870">,</span>&nbsp;<span class="ident" id="3695872">false</span><span class="op" id="3695877">)</span><br>
<span class="lineno"></span><span class="op" id="3695879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3695882">func</span>&nbsp;<span class="ident" id="3695887">compact</span><span class="op" id="3695894">(</span><span class="ident" id="3695895">dst</span>&nbsp;<span class="op" id="3695899">*</span><span class="ident" id="3695900"><a href="/encoding/json/indent.go.html#3695691">bytes</a></span><span class="op" id="3695905">.</span><span class="ident" id="3695906">Buffer</span><span class="op" id="3695912">,</span>&nbsp;<span class="ident" id="3695914">src</span>&nbsp;<span class="op" id="3695918">[</span><span class="op" id="3695919">]</span><span class="builtintype" id="3695920">byte</span><span class="op" id="3695924">,</span>&nbsp;<span class="ident" id="3695926">escape</span>&nbsp;<span class="builtintype" id="3695933">bool</span><span class="op" id="3695937">)</span>&nbsp;<span class="builtintype" id="3695939">error</span>&nbsp;<span class="op" id="3695945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695948">origLen</span>&nbsp;<span class="op" id="3695956">:=</span>&nbsp;<span class="ident" id="3695959"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3695962">.</span><span class="ident" id="3695963">Len</span><span class="op" id="3695966">(</span><span class="op" id="3695967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695970">var</span>&nbsp;<span class="ident" id="3695974">scan</span>&nbsp;<span class="ident" id="3695979"><a href="/encoding/json/scanner.go.html#3701130">scanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695988"><a href="/encoding/json/indent.go.html#3695974">scan</a></span><span class="op" id="3695992">.</span><span class="ident" id="3695993">reset</span><span class="op" id="3695998">(</span><span class="op" id="3695999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696002">start</span>&nbsp;<span class="op" id="3696008">:=</span>&nbsp;<span class="num" id="3696011">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696014">for</span>&nbsp;<span class="ident" id="3696018">i</span><span class="op" id="3696019">,</span>&nbsp;<span class="ident" id="3696021">c</span>&nbsp;<span class="op" id="3696023">:=</span>&nbsp;<span class="keyword" id="3696026">range</span>&nbsp;<span class="ident" id="3696032"><a href="/encoding/json/indent.go.html#3695914">src</a></span>&nbsp;<span class="op" id="3696036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696040">if</span>&nbsp;<span class="ident" id="3696043"><a href="/encoding/json/indent.go.html#3695926">escape</a></span>&nbsp;<span class="op" id="3696050">&amp;&amp;</span>&nbsp;<span class="op" id="3696053">(</span><span class="ident" id="3696054"><a href="/encoding/json/indent.go.html#3696021">c</a></span>&nbsp;<span class="op" id="3696056">==</span>&nbsp;<span class="string" id="3696059">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="3696063">||</span>&nbsp;<span class="ident" id="3696066"><a href="/encoding/json/indent.go.html#3696021">c</a></span>&nbsp;<span class="op" id="3696068">==</span>&nbsp;<span class="string" id="3696071">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3696075">||</span>&nbsp;<span class="ident" id="3696078"><a href="/encoding/json/indent.go.html#3696021">c</a></span>&nbsp;<span class="op" id="3696080">==</span>&nbsp;<span class="string" id="3696083">&#39;&amp;&#39;</span><span class="op" id="3696086">)</span>&nbsp;<span class="op" id="3696088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696093">if</span>&nbsp;<span class="ident" id="3696096"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696102">&lt;</span>&nbsp;<span class="ident" id="3696104"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696112"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696115">.</span><span class="ident" id="3696116">Write</span><span class="op" id="3696121">(</span><span class="ident" id="3696122"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696125">[</span><span class="ident" id="3696126"><a href="/encoding/json/indent.go.html#3696002">start</a></span><span class="op" id="3696131">:</span><span class="ident" id="3696132"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696133">]</span><span class="op" id="3696134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696139">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696144"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696147">.</span><span class="ident" id="3696148">WriteString</span><span class="op" id="3696159">(</span><span class="string" id="3696160">`\u00`</span><span class="op" id="3696166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696171"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696174">.</span><span class="ident" id="3696175">WriteByte</span><span class="op" id="3696184">(</span><span class="ident" id="3696185"><a href="/encoding/json/encode.go.html#3669482">hex</a></span><span class="op" id="3696188">[</span><span class="ident" id="3696189"><a href="/encoding/json/indent.go.html#3696021">c</a></span><span class="op" id="3696190">&gt;&gt;</span><span class="num" id="3696192">4</span><span class="op" id="3696193">]</span><span class="op" id="3696194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696199"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696202">.</span><span class="ident" id="3696203">WriteByte</span><span class="op" id="3696212">(</span><span class="ident" id="3696213"><a href="/encoding/json/encode.go.html#3669482">hex</a></span><span class="op" id="3696216">[</span><span class="ident" id="3696217"><a href="/encoding/json/indent.go.html#3696021">c</a></span><span class="op" id="3696218">&amp;</span><span class="num" id="3696219">0xF</span><span class="op" id="3696222">]</span><span class="op" id="3696223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696228"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696234">=</span>&nbsp;<span class="ident" id="3696236"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696238">+</span>&nbsp;<span class="num" id="3696240">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696244">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696248">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696304">if</span>&nbsp;<span class="ident" id="3696307"><a href="/encoding/json/indent.go.html#3696021">c</a></span>&nbsp;<span class="op" id="3696309">==</span>&nbsp;<span class="num" id="3696312">0xE2</span>&nbsp;<span class="op" id="3696317">&amp;&amp;</span>&nbsp;<span class="ident" id="3696320"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696321">+</span><span class="num" id="3696322">2</span>&nbsp;<span class="op" id="3696324">&lt;</span>&nbsp;<span class="builtinfunc" id="3696326">len</span><span class="op" id="3696329">(</span><span class="ident" id="3696330"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696333">)</span>&nbsp;<span class="op" id="3696335">&amp;&amp;</span>&nbsp;<span class="ident" id="3696338"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696341">[</span><span class="ident" id="3696342"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696343">+</span><span class="num" id="3696344">1</span><span class="op" id="3696345">]</span>&nbsp;<span class="op" id="3696347">==</span>&nbsp;<span class="num" id="3696350">0x80</span>&nbsp;<span class="op" id="3696355">&amp;&amp;</span>&nbsp;<span class="ident" id="3696358"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696361">[</span><span class="ident" id="3696362"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696363">+</span><span class="num" id="3696364">2</span><span class="op" id="3696365">]</span><span class="op" id="3696366">&amp;^</span><span class="num" id="3696368">1</span>&nbsp;<span class="op" id="3696370">==</span>&nbsp;<span class="num" id="3696373">0xA8</span>&nbsp;<span class="op" id="3696378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696383">if</span>&nbsp;<span class="ident" id="3696386"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696392">&lt;</span>&nbsp;<span class="ident" id="3696394"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696402"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696405">.</span><span class="ident" id="3696406">Write</span><span class="op" id="3696411">(</span><span class="ident" id="3696412"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696415">[</span><span class="ident" id="3696416"><a href="/encoding/json/indent.go.html#3696002">start</a></span><span class="op" id="3696421">:</span><span class="ident" id="3696422"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696423">]</span><span class="op" id="3696424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696429">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696434"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696437">.</span><span class="ident" id="3696438">WriteString</span><span class="op" id="3696449">(</span><span class="string" id="3696450">`\u202`</span><span class="op" id="3696457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696462"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696465">.</span><span class="ident" id="3696466">WriteByte</span><span class="op" id="3696475">(</span><span class="ident" id="3696476"><a href="/encoding/json/encode.go.html#3669482">hex</a></span><span class="op" id="3696479">[</span><span class="ident" id="3696480"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696483">[</span><span class="ident" id="3696484"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696485">+</span><span class="num" id="3696486">2</span><span class="op" id="3696487">]</span><span class="op" id="3696488">&amp;</span><span class="num" id="3696489">0xF</span><span class="op" id="3696492">]</span><span class="op" id="3696493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696498"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696504">=</span>&nbsp;<span class="ident" id="3696506"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696508">+</span>&nbsp;<span class="num" id="3696510">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696518">v</span>&nbsp;<span class="op" id="3696520">:=</span>&nbsp;<span class="ident" id="3696523"><a href="/encoding/json/indent.go.html#3695974">scan</a></span><span class="op" id="3696527">.</span><span class="ident" id="3696528">step</span><span class="op" id="3696532">(</span><span class="op" id="3696533">&amp;</span><span class="ident" id="3696534"><a href="/encoding/json/indent.go.html#3695974">scan</a></span><span class="op" id="3696538">,</span>&nbsp;<span class="builtintype" id="3696540">int</span><span class="op" id="3696543">(</span><span class="ident" id="3696544"><a href="/encoding/json/indent.go.html#3696021">c</a></span><span class="op" id="3696545">)</span><span class="op" id="3696546">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696550">if</span>&nbsp;<span class="ident" id="3696553"><a href="/encoding/json/indent.go.html#3696518">v</a></span>&nbsp;<span class="op" id="3696555">&gt;=</span>&nbsp;<span class="ident" id="3696558"><a href="/encoding/json/scanner.go.html#3702735">scanSkipSpace</a></span>&nbsp;<span class="op" id="3696572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696577">if</span>&nbsp;<span class="ident" id="3696580"><a href="/encoding/json/indent.go.html#3696518">v</a></span>&nbsp;<span class="op" id="3696582">==</span>&nbsp;<span class="ident" id="3696585"><a href="/encoding/json/scanner.go.html#3702919">scanError</a></span>&nbsp;<span class="op" id="3696595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696601">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696615">if</span>&nbsp;<span class="ident" id="3696618"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696624">&lt;</span>&nbsp;<span class="ident" id="3696626"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696628">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696634"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696637">.</span><span class="ident" id="3696638">Write</span><span class="op" id="3696643">(</span><span class="ident" id="3696644"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696647">[</span><span class="ident" id="3696648"><a href="/encoding/json/indent.go.html#3696002">start</a></span><span class="op" id="3696653">:</span><span class="ident" id="3696654"><a href="/encoding/json/indent.go.html#3696018">i</a></span><span class="op" id="3696655">]</span><span class="op" id="3696656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696666"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696672">=</span>&nbsp;<span class="ident" id="3696674"><a href="/encoding/json/indent.go.html#3696018">i</a></span>&nbsp;<span class="op" id="3696676">+</span>&nbsp;<span class="num" id="3696678">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696685">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696688">if</span>&nbsp;<span class="ident" id="3696691"><a href="/encoding/json/indent.go.html#3695974">scan</a></span><span class="op" id="3696695">.</span><span class="ident" id="3696696">eof</span><span class="op" id="3696699">(</span><span class="op" id="3696700">)</span>&nbsp;<span class="op" id="3696702">==</span>&nbsp;<span class="ident" id="3696705"><a href="/encoding/json/scanner.go.html#3702919">scanError</a></span>&nbsp;<span class="op" id="3696715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696719"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696722">.</span><span class="ident" id="3696723">Truncate</span><span class="op" id="3696731">(</span><span class="ident" id="3696732"><a href="/encoding/json/indent.go.html#3695948">origLen</a></span><span class="op" id="3696739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696743">return</span>&nbsp;<span class="ident" id="3696750"><a href="/encoding/json/indent.go.html#3695974">scan</a></span><span class="op" id="3696754">.</span><span class="ident" id="3696755">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696763">if</span>&nbsp;<span class="ident" id="3696766"><a href="/encoding/json/indent.go.html#3696002">start</a></span>&nbsp;<span class="op" id="3696772">&lt;</span>&nbsp;<span class="builtinfunc" id="3696774">len</span><span class="op" id="3696777">(</span><span class="ident" id="3696778"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696781">)</span>&nbsp;<span class="op" id="3696783">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696787"><a href="/encoding/json/indent.go.html#3695895">dst</a></span><span class="op" id="3696790">.</span><span class="ident" id="3696791">Write</span><span class="op" id="3696796">(</span><span class="ident" id="3696797"><a href="/encoding/json/indent.go.html#3695914">src</a></span><span class="op" id="3696800">[</span><span class="ident" id="3696801"><a href="/encoding/json/indent.go.html#3696002">start</a></span><span class="op" id="3696806">:</span><span class="op" id="3696807">]</span><span class="op" id="3696808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696814">return</span>&nbsp;<span class="ident" id="3696821">nil</span><br>
<span class="lineno"></span><span class="op" id="3696825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3696828">func</span>&nbsp;<span class="ident" id="3696833">newline</span><span class="op" id="3696840">(</span><span class="ident" id="3696841">dst</span>&nbsp;<span class="op" id="3696845">*</span><span class="ident" id="3696846"><a href="/encoding/json/indent.go.html#3695691">bytes</a></span><span class="op" id="3696851">.</span><span class="ident" id="3696852">Buffer</span><span class="op" id="3696858">,</span>&nbsp;<span class="ident" id="3696860">prefix</span><span class="op" id="3696866">,</span>&nbsp;<span class="ident" id="3696868">indent</span>&nbsp;<span class="builtintype" id="3696875">string</span><span class="op" id="3696881">,</span>&nbsp;<span class="ident" id="3696883">depth</span>&nbsp;<span class="builtintype" id="3696889">int</span><span class="op" id="3696892">)</span>&nbsp;<span class="op" id="3696894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696897"><a href="/encoding/json/indent.go.html#3696841">dst</a></span><span class="op" id="3696900">.</span><span class="ident" id="3696901">WriteByte</span><span class="op" id="3696910">(</span><span class="string" id="3696911">&#39;\n&#39;</span><span class="op" id="3696915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696918"><a href="/encoding/json/indent.go.html#3696841">dst</a></span><span class="op" id="3696921">.</span><span class="ident" id="3696922">WriteString</span><span class="op" id="3696933">(</span><span class="ident" id="3696934"><a href="/encoding/json/indent.go.html#3696860">prefix</a></span><span class="op" id="3696940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696943">for</span>&nbsp;<span class="ident" id="3696947">i</span>&nbsp;<span class="op" id="3696949">:=</span>&nbsp;<span class="num" id="3696952">0</span><span class="op" id="3696953">;</span>&nbsp;<span class="ident" id="3696955"><a href="/encoding/json/indent.go.html#3696947">i</a></span>&nbsp;<span class="op" id="3696957">&lt;</span>&nbsp;<span class="ident" id="3696959"><a href="/encoding/json/indent.go.html#3696883">depth</a></span><span class="op" id="3696964">;</span>&nbsp;<span class="ident" id="3696966"><a href="/encoding/json/indent.go.html#3696947">i</a></span><span class="op" id="3696967">++</span>&nbsp;<span class="op" id="3696970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696974"><a href="/encoding/json/indent.go.html#3696841">dst</a></span><span class="op" id="3696977">.</span><span class="ident" id="3696978">WriteString</span><span class="op" id="3696989">(</span><span class="ident" id="3696990"><a href="/encoding/json/indent.go.html#3696868">indent</a></span><span class="op" id="3696996">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696999">}</span><br>
<span class="lineno"></span><span class="op" id="3697001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3697004">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3697071">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="3697130">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3697193">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="3697251">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="3697314">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3697374">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="3697427">func</span>&nbsp;<span class="ident" id="3697432">Indent</span><span class="op" id="3697438">(</span><span class="ident" id="3697439">dst</span>&nbsp;<span class="op" id="3697443">*</span><span class="ident" id="3697444"><a href="/encoding/json/indent.go.html#3695691">bytes</a></span><span class="op" id="3697449">.</span><span class="ident" id="3697450">Buffer</span><span class="op" id="3697456">,</span>&nbsp;<span class="ident" id="3697458">src</span>&nbsp;<span class="op" id="3697462">[</span><span class="op" id="3697463">]</span><span class="builtintype" id="3697464">byte</span><span class="op" id="3697468">,</span>&nbsp;<span class="ident" id="3697470">prefix</span><span class="op" id="3697476">,</span>&nbsp;<span class="ident" id="3697478">indent</span>&nbsp;<span class="builtintype" id="3697485">string</span><span class="op" id="3697491">)</span>&nbsp;<span class="builtintype" id="3697493">error</span>&nbsp;<span class="op" id="3697499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697502">origLen</span>&nbsp;<span class="op" id="3697510">:=</span>&nbsp;<span class="ident" id="3697513"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3697516">.</span><span class="ident" id="3697517">Len</span><span class="op" id="3697520">(</span><span class="op" id="3697521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697524">var</span>&nbsp;<span class="ident" id="3697528">scan</span>&nbsp;<span class="ident" id="3697533"><a href="/encoding/json/scanner.go.html#3701130">scanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697542"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3697546">.</span><span class="ident" id="3697547">reset</span><span class="op" id="3697552">(</span><span class="op" id="3697553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697556">needIndent</span>&nbsp;<span class="op" id="3697567">:=</span>&nbsp;<span class="ident" id="3697570">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697577">depth</span>&nbsp;<span class="op" id="3697583">:=</span>&nbsp;<span class="num" id="3697586">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697589">for</span>&nbsp;<span class="ident" id="3697593">_</span><span class="op" id="3697594">,</span>&nbsp;<span class="ident" id="3697596">c</span>&nbsp;<span class="op" id="3697598">:=</span>&nbsp;<span class="keyword" id="3697601">range</span>&nbsp;<span class="ident" id="3697607"><a href="/encoding/json/indent.go.html#3697458">src</a></span>&nbsp;<span class="op" id="3697611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697615"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3697619">.</span><span class="ident" id="3697620">bytes</span><span class="op" id="3697625">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697630">v</span>&nbsp;<span class="op" id="3697632">:=</span>&nbsp;<span class="ident" id="3697635"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3697639">.</span><span class="ident" id="3697640">step</span><span class="op" id="3697644">(</span><span class="op" id="3697645">&amp;</span><span class="ident" id="3697646"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3697650">,</span>&nbsp;<span class="builtintype" id="3697652">int</span><span class="op" id="3697655">(</span><span class="ident" id="3697656"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3697657">)</span><span class="op" id="3697658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697662">if</span>&nbsp;<span class="ident" id="3697665"><a href="/encoding/json/indent.go.html#3697630">v</a></span>&nbsp;<span class="op" id="3697667">==</span>&nbsp;<span class="ident" id="3697670"><a href="/encoding/json/scanner.go.html#3702735">scanSkipSpace</a></span>&nbsp;<span class="op" id="3697684">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697689">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697704">if</span>&nbsp;<span class="ident" id="3697707"><a href="/encoding/json/indent.go.html#3697630">v</a></span>&nbsp;<span class="op" id="3697709">==</span>&nbsp;<span class="ident" id="3697712"><a href="/encoding/json/scanner.go.html#3702919">scanError</a></span>&nbsp;<span class="op" id="3697722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697727">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697735">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697739">if</span>&nbsp;<span class="ident" id="3697742"><a href="/encoding/json/indent.go.html#3697556">needIndent</a></span>&nbsp;<span class="op" id="3697753">&amp;&amp;</span>&nbsp;<span class="ident" id="3697756"><a href="/encoding/json/indent.go.html#3697630">v</a></span>&nbsp;<span class="op" id="3697758">!=</span>&nbsp;<span class="ident" id="3697761"><a href="/encoding/json/scanner.go.html#3702489">scanEndObject</a></span>&nbsp;<span class="op" id="3697775">&amp;&amp;</span>&nbsp;<span class="ident" id="3697778"><a href="/encoding/json/indent.go.html#3697630">v</a></span>&nbsp;<span class="op" id="3697780">!=</span>&nbsp;<span class="ident" id="3697783"><a href="/encoding/json/scanner.go.html#3702660">scanEndArray</a></span>&nbsp;<span class="op" id="3697796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697801"><a href="/encoding/json/indent.go.html#3697556">needIndent</a></span>&nbsp;<span class="op" id="3697812">=</span>&nbsp;<span class="ident" id="3697814">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697823"><a href="/encoding/json/indent.go.html#3697577">depth</a></span><span class="op" id="3697828">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697834"><a href="/encoding/json/indent.go.html#3696833">newline</a></span><span class="op" id="3697841">(</span><span class="ident" id="3697842"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3697845">,</span>&nbsp;<span class="ident" id="3697847"><a href="/encoding/json/indent.go.html#3697470">prefix</a></span><span class="op" id="3697853">,</span>&nbsp;<span class="ident" id="3697855"><a href="/encoding/json/indent.go.html#3697478">indent</a></span><span class="op" id="3697861">,</span>&nbsp;<span class="ident" id="3697863"><a href="/encoding/json/indent.go.html#3697577">depth</a></span><span class="op" id="3697868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697872">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3697877">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3697920">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697977">if</span>&nbsp;<span class="ident" id="3697980"><a href="/encoding/json/indent.go.html#3697630">v</a></span>&nbsp;<span class="op" id="3697982">==</span>&nbsp;<span class="ident" id="3697985"><a href="/encoding/json/scanner.go.html#3702204">scanContinue</a></span>&nbsp;<span class="op" id="3697998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698003"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698006">.</span><span class="ident" id="3698007">WriteByte</span><span class="op" id="3698016">(</span><span class="ident" id="3698017"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698018">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698023">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698039">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698081">switch</span>&nbsp;<span class="ident" id="3698088"><a href="/encoding/json/indent.go.html#3697596">c</a></span>&nbsp;<span class="op" id="3698090">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698094">case</span>&nbsp;<span class="string" id="3698099">&#39;{&#39;</span><span class="op" id="3698102">,</span>&nbsp;<span class="string" id="3698104">&#39;[&#39;</span><span class="op" id="3698107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698112">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698190"><a href="/encoding/json/indent.go.html#3697556">needIndent</a></span>&nbsp;<span class="op" id="3698201">=</span>&nbsp;<span class="ident" id="3698203">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698211"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698214">.</span><span class="ident" id="3698215">WriteByte</span><span class="op" id="3698224">(</span><span class="ident" id="3698225"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698231">case</span>&nbsp;<span class="string" id="3698236">&#39;,&#39;</span><span class="op" id="3698239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698244"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698247">.</span><span class="ident" id="3698248">WriteByte</span><span class="op" id="3698257">(</span><span class="ident" id="3698258"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698264"><a href="/encoding/json/indent.go.html#3696833">newline</a></span><span class="op" id="3698271">(</span><span class="ident" id="3698272"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698275">,</span>&nbsp;<span class="ident" id="3698277"><a href="/encoding/json/indent.go.html#3697470">prefix</a></span><span class="op" id="3698283">,</span>&nbsp;<span class="ident" id="3698285"><a href="/encoding/json/indent.go.html#3697478">indent</a></span><span class="op" id="3698291">,</span>&nbsp;<span class="ident" id="3698293"><a href="/encoding/json/indent.go.html#3697577">depth</a></span><span class="op" id="3698298">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698303">case</span>&nbsp;<span class="string" id="3698308">&#39;:&#39;</span><span class="op" id="3698311">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698316"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698319">.</span><span class="ident" id="3698320">WriteByte</span><span class="op" id="3698329">(</span><span class="ident" id="3698330"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698336"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698339">.</span><span class="ident" id="3698340">WriteByte</span><span class="op" id="3698349">(</span><span class="string" id="3698350">&#39;&nbsp;&#39;</span><span class="op" id="3698353">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698358">case</span>&nbsp;<span class="string" id="3698363">&#39;}&#39;</span><span class="op" id="3698366">,</span>&nbsp;<span class="string" id="3698368">&#39;]&#39;</span><span class="op" id="3698371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698376">if</span>&nbsp;<span class="ident" id="3698379"><a href="/encoding/json/indent.go.html#3697556">needIndent</a></span>&nbsp;<span class="op" id="3698390">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698396">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698441"><a href="/encoding/json/indent.go.html#3697556">needIndent</a></span>&nbsp;<span class="op" id="3698452">=</span>&nbsp;<span class="ident" id="3698454">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698463">}</span>&nbsp;<span class="keyword" id="3698465">else</span>&nbsp;<span class="op" id="3698470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698476"><a href="/encoding/json/indent.go.html#3697577">depth</a></span><span class="op" id="3698481">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698488"><a href="/encoding/json/indent.go.html#3696833">newline</a></span><span class="op" id="3698495">(</span><span class="ident" id="3698496"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698499">,</span>&nbsp;<span class="ident" id="3698501"><a href="/encoding/json/indent.go.html#3697470">prefix</a></span><span class="op" id="3698507">,</span>&nbsp;<span class="ident" id="3698509"><a href="/encoding/json/indent.go.html#3697478">indent</a></span><span class="op" id="3698515">,</span>&nbsp;<span class="ident" id="3698517"><a href="/encoding/json/indent.go.html#3697577">depth</a></span><span class="op" id="3698522">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698532"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698535">.</span><span class="ident" id="3698536">WriteByte</span><span class="op" id="3698545">(</span><span class="ident" id="3698546"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698547">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698552">default</span><span class="op" id="3698559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698564"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698567">.</span><span class="ident" id="3698568">WriteByte</span><span class="op" id="3698577">(</span><span class="ident" id="3698578"><a href="/encoding/json/indent.go.html#3697596">c</a></span><span class="op" id="3698579">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698589">if</span>&nbsp;<span class="ident" id="3698592"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3698596">.</span><span class="ident" id="3698597">eof</span><span class="op" id="3698600">(</span><span class="op" id="3698601">)</span>&nbsp;<span class="op" id="3698603">==</span>&nbsp;<span class="ident" id="3698606"><a href="/encoding/json/scanner.go.html#3702919">scanError</a></span>&nbsp;<span class="op" id="3698616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698620"><a href="/encoding/json/indent.go.html#3697439">dst</a></span><span class="op" id="3698623">.</span><span class="ident" id="3698624">Truncate</span><span class="op" id="3698632">(</span><span class="ident" id="3698633"><a href="/encoding/json/indent.go.html#3697502">origLen</a></span><span class="op" id="3698640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698644">return</span>&nbsp;<span class="ident" id="3698651"><a href="/encoding/json/indent.go.html#3697528">scan</a></span><span class="op" id="3698655">.</span><span class="ident" id="3698656">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698664">return</span>&nbsp;<span class="ident" id="3698671">nil</span><br>
<span class="lineno"></span><span class="op" id="3698675">}</span>
</div>
</body>
</html>
