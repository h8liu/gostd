<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8091664">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8091719">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8091773">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8091824">package</span>&nbsp;<span class="ident" id="8091832">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8091837">import</span>&nbsp;<span class="op" id="8091844">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091847">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091855">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091861">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091867">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091878">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8091889">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8091896">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8091899">func</span>&nbsp;<span class="ident" id="8091904">skipServerTest</span><span class="op" id="8091918">(</span><span class="ident" id="8091919">net</span><span class="op" id="8091922">,</span>&nbsp;<span class="ident" id="8091924">unixsotype</span><span class="op" id="8091934">,</span>&nbsp;<span class="ident" id="8091936">addr</span>&nbsp;<span class="builtintype" id="8091941">string</span><span class="op" id="8091947">,</span>&nbsp;<span class="ident" id="8091949">ipv6</span><span class="op" id="8091953">,</span>&nbsp;<span class="ident" id="8091955">ipv4map</span><span class="op" id="8091962">,</span>&nbsp;<span class="ident" id="8091964">linuxOnly</span>&nbsp;<span class="builtintype" id="8091974">bool</span><span class="op" id="8091978">)</span>&nbsp;<span class="builtintype" id="8091980">bool</span>&nbsp;<span class="op" id="8091985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8091988">switch</span>&nbsp;<span class="ident" id="8091995">runtime</span><span class="op" id="8092002">.</span><span class="ident" id="8092003">GOOS</span>&nbsp;<span class="op" id="8092008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092011">case</span>&nbsp;<span class="string" id="8092016">&#34;linux&#34;</span><span class="op" id="8092023">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092026">case</span>&nbsp;<span class="string" id="8092031">&#34;nacl&#34;</span><span class="op" id="8092037">,</span>&nbsp;<span class="string" id="8092039">&#34;plan9&#34;</span><span class="op" id="8092046">,</span>&nbsp;<span class="string" id="8092048">&#34;windows&#34;</span><span class="op" id="8092057">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8092061">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092122">if</span>&nbsp;<span class="ident" id="8092125">net</span>&nbsp;<span class="op" id="8092129">==</span>&nbsp;<span class="ident" id="8092132">unixsotype</span>&nbsp;<span class="op" id="8092143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092148">return</span>&nbsp;<span class="builtintype" id="8092155">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092165">default</span><span class="op" id="8092172">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092176">if</span>&nbsp;<span class="ident" id="8092179">net</span>&nbsp;<span class="op" id="8092183">==</span>&nbsp;<span class="ident" id="8092186">unixsotype</span>&nbsp;<span class="op" id="8092197">&amp;&amp;</span>&nbsp;<span class="ident" id="8092200">linuxOnly</span>&nbsp;<span class="op" id="8092210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092215">return</span>&nbsp;<span class="builtintype" id="8092222">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092235">switch</span>&nbsp;<span class="ident" id="8092242">addr</span>&nbsp;<span class="op" id="8092247">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092250">case</span>&nbsp;<span class="string" id="8092255">&#34;&#34;</span><span class="op" id="8092257">,</span>&nbsp;<span class="string" id="8092259">&#34;0.0.0.0&#34;</span><span class="op" id="8092268">,</span>&nbsp;<span class="string" id="8092270">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8092288">,</span>&nbsp;<span class="string" id="8092290">&#34;[::]&#34;</span><span class="op" id="8092296">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092300">if</span>&nbsp;<span class="ident" id="8092303">testing</span><span class="op" id="8092310">.</span><span class="ident" id="8092311">Short</span><span class="op" id="8092316">(</span><span class="op" id="8092317">)</span>&nbsp;<span class="op" id="8092319">||</span>&nbsp;<span class="op" id="8092322">!</span><span class="op" id="8092323">*</span><span class="ident" id="8092324">testExternal</span>&nbsp;<span class="op" id="8092337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092342">return</span>&nbsp;<span class="builtintype" id="8092349">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092359">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092362">if</span>&nbsp;<span class="ident" id="8092365">ipv6</span>&nbsp;<span class="op" id="8092370">&amp;&amp;</span>&nbsp;<span class="op" id="8092373">!</span><span class="ident" id="8092374">supportsIPv6</span>&nbsp;<span class="op" id="8092387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092391">return</span>&nbsp;<span class="builtintype" id="8092398">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092407">if</span>&nbsp;<span class="ident" id="8092410">ipv4map</span>&nbsp;<span class="op" id="8092418">&amp;&amp;</span>&nbsp;<span class="op" id="8092421">!</span><span class="ident" id="8092422">supportsIPv4map</span>&nbsp;<span class="op" id="8092438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092442">return</span>&nbsp;<span class="builtintype" id="8092449">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8092458">return</span>&nbsp;<span class="builtintype" id="8092465">false</span><br>
<span class="lineno"></span><span class="op" id="8092471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8092474">var</span>&nbsp;<span class="ident" id="8092478">streamConnServerTests</span>&nbsp;<span class="op" id="8092500">=</span>&nbsp;<span class="op" id="8092502">[</span><span class="op" id="8092503">]</span><span class="keyword" id="8092504">struct</span>&nbsp;<span class="op" id="8092511">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092514">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092524">string</span>&nbsp;<span class="comment" id="8092531">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092547">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092557">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092565">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092575">string</span>&nbsp;<span class="comment" id="8092582">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092598">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092608">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092616">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092626">bool</span>&nbsp;<span class="comment" id="8092631">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092672">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092682">bool</span>&nbsp;<span class="comment" id="8092687">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092733">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092743">bool</span>&nbsp;<span class="comment" id="8092748">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8092773">linuxOnly</span>&nbsp;<span class="builtintype" id="8092783">bool</span>&nbsp;<span class="comment" id="8092788">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8092842">}</span><span class="op" id="8092843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092846">{</span><span class="ident" id="8092847">snet</span><span class="op" id="8092851">:</span>&nbsp;<span class="string" id="8092853">&#34;tcp&#34;</span><span class="op" id="8092858">,</span>&nbsp;<span class="ident" id="8092860">saddr</span><span class="op" id="8092865">:</span>&nbsp;<span class="string" id="8092867">&#34;&#34;</span><span class="op" id="8092869">,</span>&nbsp;<span class="ident" id="8092871">cnet</span><span class="op" id="8092875">:</span>&nbsp;<span class="string" id="8092877">&#34;tcp&#34;</span><span class="op" id="8092882">,</span>&nbsp;<span class="ident" id="8092884">caddr</span><span class="op" id="8092889">:</span>&nbsp;<span class="string" id="8092891">&#34;127.0.0.1&#34;</span><span class="op" id="8092902">}</span><span class="op" id="8092903">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092906">{</span><span class="ident" id="8092907">snet</span><span class="op" id="8092911">:</span>&nbsp;<span class="string" id="8092913">&#34;tcp&#34;</span><span class="op" id="8092918">,</span>&nbsp;<span class="ident" id="8092920">saddr</span><span class="op" id="8092925">:</span>&nbsp;<span class="string" id="8092927">&#34;0.0.0.0&#34;</span><span class="op" id="8092936">,</span>&nbsp;<span class="ident" id="8092938">cnet</span><span class="op" id="8092942">:</span>&nbsp;<span class="string" id="8092944">&#34;tcp&#34;</span><span class="op" id="8092949">,</span>&nbsp;<span class="ident" id="8092951">caddr</span><span class="op" id="8092956">:</span>&nbsp;<span class="string" id="8092958">&#34;127.0.0.1&#34;</span><span class="op" id="8092969">}</span><span class="op" id="8092970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8092973">{</span><span class="ident" id="8092974">snet</span><span class="op" id="8092978">:</span>&nbsp;<span class="string" id="8092980">&#34;tcp&#34;</span><span class="op" id="8092985">,</span>&nbsp;<span class="ident" id="8092987">saddr</span><span class="op" id="8092992">:</span>&nbsp;<span class="string" id="8092994">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8093012">,</span>&nbsp;<span class="ident" id="8093014">cnet</span><span class="op" id="8093018">:</span>&nbsp;<span class="string" id="8093020">&#34;tcp&#34;</span><span class="op" id="8093025">,</span>&nbsp;<span class="ident" id="8093027">caddr</span><span class="op" id="8093032">:</span>&nbsp;<span class="string" id="8093034">&#34;127.0.0.1&#34;</span><span class="op" id="8093045">}</span><span class="op" id="8093046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093049">{</span><span class="ident" id="8093050">snet</span><span class="op" id="8093054">:</span>&nbsp;<span class="string" id="8093056">&#34;tcp&#34;</span><span class="op" id="8093061">,</span>&nbsp;<span class="ident" id="8093063">saddr</span><span class="op" id="8093068">:</span>&nbsp;<span class="string" id="8093070">&#34;[::]&#34;</span><span class="op" id="8093076">,</span>&nbsp;<span class="ident" id="8093078">cnet</span><span class="op" id="8093082">:</span>&nbsp;<span class="string" id="8093084">&#34;tcp&#34;</span><span class="op" id="8093089">,</span>&nbsp;<span class="ident" id="8093091">caddr</span><span class="op" id="8093096">:</span>&nbsp;<span class="string" id="8093098">&#34;[::1]&#34;</span><span class="op" id="8093105">,</span>&nbsp;<span class="ident" id="8093107">ipv6</span><span class="op" id="8093111">:</span>&nbsp;<span class="builtintype" id="8093113">true</span><span class="op" id="8093117">}</span><span class="op" id="8093118">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093122">{</span><span class="ident" id="8093123">snet</span><span class="op" id="8093127">:</span>&nbsp;<span class="string" id="8093129">&#34;tcp&#34;</span><span class="op" id="8093134">,</span>&nbsp;<span class="ident" id="8093136">saddr</span><span class="op" id="8093141">:</span>&nbsp;<span class="string" id="8093143">&#34;&#34;</span><span class="op" id="8093145">,</span>&nbsp;<span class="ident" id="8093147">cnet</span><span class="op" id="8093151">:</span>&nbsp;<span class="string" id="8093153">&#34;tcp&#34;</span><span class="op" id="8093158">,</span>&nbsp;<span class="ident" id="8093160">caddr</span><span class="op" id="8093165">:</span>&nbsp;<span class="string" id="8093167">&#34;[::1]&#34;</span><span class="op" id="8093174">,</span>&nbsp;<span class="ident" id="8093176">ipv4map</span><span class="op" id="8093183">:</span>&nbsp;<span class="builtintype" id="8093185">true</span><span class="op" id="8093189">}</span><span class="op" id="8093190">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093193">{</span><span class="ident" id="8093194">snet</span><span class="op" id="8093198">:</span>&nbsp;<span class="string" id="8093200">&#34;tcp&#34;</span><span class="op" id="8093205">,</span>&nbsp;<span class="ident" id="8093207">saddr</span><span class="op" id="8093212">:</span>&nbsp;<span class="string" id="8093214">&#34;0.0.0.0&#34;</span><span class="op" id="8093223">,</span>&nbsp;<span class="ident" id="8093225">cnet</span><span class="op" id="8093229">:</span>&nbsp;<span class="string" id="8093231">&#34;tcp&#34;</span><span class="op" id="8093236">,</span>&nbsp;<span class="ident" id="8093238">caddr</span><span class="op" id="8093243">:</span>&nbsp;<span class="string" id="8093245">&#34;[::1]&#34;</span><span class="op" id="8093252">,</span>&nbsp;<span class="ident" id="8093254">ipv4map</span><span class="op" id="8093261">:</span>&nbsp;<span class="builtintype" id="8093263">true</span><span class="op" id="8093267">}</span><span class="op" id="8093268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093271">{</span><span class="ident" id="8093272">snet</span><span class="op" id="8093276">:</span>&nbsp;<span class="string" id="8093278">&#34;tcp&#34;</span><span class="op" id="8093283">,</span>&nbsp;<span class="ident" id="8093285">saddr</span><span class="op" id="8093290">:</span>&nbsp;<span class="string" id="8093292">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8093310">,</span>&nbsp;<span class="ident" id="8093312">cnet</span><span class="op" id="8093316">:</span>&nbsp;<span class="string" id="8093318">&#34;tcp&#34;</span><span class="op" id="8093323">,</span>&nbsp;<span class="ident" id="8093325">caddr</span><span class="op" id="8093330">:</span>&nbsp;<span class="string" id="8093332">&#34;[::1]&#34;</span><span class="op" id="8093339">,</span>&nbsp;<span class="ident" id="8093341">ipv4map</span><span class="op" id="8093348">:</span>&nbsp;<span class="builtintype" id="8093350">true</span><span class="op" id="8093354">}</span><span class="op" id="8093355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093358">{</span><span class="ident" id="8093359">snet</span><span class="op" id="8093363">:</span>&nbsp;<span class="string" id="8093365">&#34;tcp&#34;</span><span class="op" id="8093370">,</span>&nbsp;<span class="ident" id="8093372">saddr</span><span class="op" id="8093377">:</span>&nbsp;<span class="string" id="8093379">&#34;[::]&#34;</span><span class="op" id="8093385">,</span>&nbsp;<span class="ident" id="8093387">cnet</span><span class="op" id="8093391">:</span>&nbsp;<span class="string" id="8093393">&#34;tcp&#34;</span><span class="op" id="8093398">,</span>&nbsp;<span class="ident" id="8093400">caddr</span><span class="op" id="8093405">:</span>&nbsp;<span class="string" id="8093407">&#34;127.0.0.1&#34;</span><span class="op" id="8093418">,</span>&nbsp;<span class="ident" id="8093420">ipv4map</span><span class="op" id="8093427">:</span>&nbsp;<span class="builtintype" id="8093429">true</span><span class="op" id="8093433">}</span><span class="op" id="8093434">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093438">{</span><span class="ident" id="8093439">snet</span><span class="op" id="8093443">:</span>&nbsp;<span class="string" id="8093445">&#34;tcp&#34;</span><span class="op" id="8093450">,</span>&nbsp;<span class="ident" id="8093452">saddr</span><span class="op" id="8093457">:</span>&nbsp;<span class="string" id="8093459">&#34;&#34;</span><span class="op" id="8093461">,</span>&nbsp;<span class="ident" id="8093463">cnet</span><span class="op" id="8093467">:</span>&nbsp;<span class="string" id="8093469">&#34;tcp4&#34;</span><span class="op" id="8093475">,</span>&nbsp;<span class="ident" id="8093477">caddr</span><span class="op" id="8093482">:</span>&nbsp;<span class="string" id="8093484">&#34;127.0.0.1&#34;</span><span class="op" id="8093495">}</span><span class="op" id="8093496">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093499">{</span><span class="ident" id="8093500">snet</span><span class="op" id="8093504">:</span>&nbsp;<span class="string" id="8093506">&#34;tcp&#34;</span><span class="op" id="8093511">,</span>&nbsp;<span class="ident" id="8093513">saddr</span><span class="op" id="8093518">:</span>&nbsp;<span class="string" id="8093520">&#34;0.0.0.0&#34;</span><span class="op" id="8093529">,</span>&nbsp;<span class="ident" id="8093531">cnet</span><span class="op" id="8093535">:</span>&nbsp;<span class="string" id="8093537">&#34;tcp4&#34;</span><span class="op" id="8093543">,</span>&nbsp;<span class="ident" id="8093545">caddr</span><span class="op" id="8093550">:</span>&nbsp;<span class="string" id="8093552">&#34;127.0.0.1&#34;</span><span class="op" id="8093563">}</span><span class="op" id="8093564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093567">{</span><span class="ident" id="8093568">snet</span><span class="op" id="8093572">:</span>&nbsp;<span class="string" id="8093574">&#34;tcp&#34;</span><span class="op" id="8093579">,</span>&nbsp;<span class="ident" id="8093581">saddr</span><span class="op" id="8093586">:</span>&nbsp;<span class="string" id="8093588">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8093606">,</span>&nbsp;<span class="ident" id="8093608">cnet</span><span class="op" id="8093612">:</span>&nbsp;<span class="string" id="8093614">&#34;tcp4&#34;</span><span class="op" id="8093620">,</span>&nbsp;<span class="ident" id="8093622">caddr</span><span class="op" id="8093627">:</span>&nbsp;<span class="string" id="8093629">&#34;127.0.0.1&#34;</span><span class="op" id="8093640">}</span><span class="op" id="8093641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093644">{</span><span class="ident" id="8093645">snet</span><span class="op" id="8093649">:</span>&nbsp;<span class="string" id="8093651">&#34;tcp&#34;</span><span class="op" id="8093656">,</span>&nbsp;<span class="ident" id="8093658">saddr</span><span class="op" id="8093663">:</span>&nbsp;<span class="string" id="8093665">&#34;[::]&#34;</span><span class="op" id="8093671">,</span>&nbsp;<span class="ident" id="8093673">cnet</span><span class="op" id="8093677">:</span>&nbsp;<span class="string" id="8093679">&#34;tcp6&#34;</span><span class="op" id="8093685">,</span>&nbsp;<span class="ident" id="8093687">caddr</span><span class="op" id="8093692">:</span>&nbsp;<span class="string" id="8093694">&#34;[::1]&#34;</span><span class="op" id="8093701">,</span>&nbsp;<span class="ident" id="8093703">ipv6</span><span class="op" id="8093707">:</span>&nbsp;<span class="builtintype" id="8093709">true</span><span class="op" id="8093713">}</span><span class="op" id="8093714">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093718">{</span><span class="ident" id="8093719">snet</span><span class="op" id="8093723">:</span>&nbsp;<span class="string" id="8093725">&#34;tcp&#34;</span><span class="op" id="8093730">,</span>&nbsp;<span class="ident" id="8093732">saddr</span><span class="op" id="8093737">:</span>&nbsp;<span class="string" id="8093739">&#34;&#34;</span><span class="op" id="8093741">,</span>&nbsp;<span class="ident" id="8093743">cnet</span><span class="op" id="8093747">:</span>&nbsp;<span class="string" id="8093749">&#34;tcp6&#34;</span><span class="op" id="8093755">,</span>&nbsp;<span class="ident" id="8093757">caddr</span><span class="op" id="8093762">:</span>&nbsp;<span class="string" id="8093764">&#34;[::1]&#34;</span><span class="op" id="8093771">,</span>&nbsp;<span class="ident" id="8093773">ipv4map</span><span class="op" id="8093780">:</span>&nbsp;<span class="builtintype" id="8093782">true</span><span class="op" id="8093786">}</span><span class="op" id="8093787">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093790">{</span><span class="ident" id="8093791">snet</span><span class="op" id="8093795">:</span>&nbsp;<span class="string" id="8093797">&#34;tcp&#34;</span><span class="op" id="8093802">,</span>&nbsp;<span class="ident" id="8093804">saddr</span><span class="op" id="8093809">:</span>&nbsp;<span class="string" id="8093811">&#34;0.0.0.0&#34;</span><span class="op" id="8093820">,</span>&nbsp;<span class="ident" id="8093822">cnet</span><span class="op" id="8093826">:</span>&nbsp;<span class="string" id="8093828">&#34;tcp6&#34;</span><span class="op" id="8093834">,</span>&nbsp;<span class="ident" id="8093836">caddr</span><span class="op" id="8093841">:</span>&nbsp;<span class="string" id="8093843">&#34;[::1]&#34;</span><span class="op" id="8093850">,</span>&nbsp;<span class="ident" id="8093852">ipv4map</span><span class="op" id="8093859">:</span>&nbsp;<span class="builtintype" id="8093861">true</span><span class="op" id="8093865">}</span><span class="op" id="8093866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093869">{</span><span class="ident" id="8093870">snet</span><span class="op" id="8093874">:</span>&nbsp;<span class="string" id="8093876">&#34;tcp&#34;</span><span class="op" id="8093881">,</span>&nbsp;<span class="ident" id="8093883">saddr</span><span class="op" id="8093888">:</span>&nbsp;<span class="string" id="8093890">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8093908">,</span>&nbsp;<span class="ident" id="8093910">cnet</span><span class="op" id="8093914">:</span>&nbsp;<span class="string" id="8093916">&#34;tcp6&#34;</span><span class="op" id="8093922">,</span>&nbsp;<span class="ident" id="8093924">caddr</span><span class="op" id="8093929">:</span>&nbsp;<span class="string" id="8093931">&#34;[::1]&#34;</span><span class="op" id="8093938">,</span>&nbsp;<span class="ident" id="8093940">ipv4map</span><span class="op" id="8093947">:</span>&nbsp;<span class="builtintype" id="8093949">true</span><span class="op" id="8093953">}</span><span class="op" id="8093954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8093957">{</span><span class="ident" id="8093958">snet</span><span class="op" id="8093962">:</span>&nbsp;<span class="string" id="8093964">&#34;tcp&#34;</span><span class="op" id="8093969">,</span>&nbsp;<span class="ident" id="8093971">saddr</span><span class="op" id="8093976">:</span>&nbsp;<span class="string" id="8093978">&#34;[::]&#34;</span><span class="op" id="8093984">,</span>&nbsp;<span class="ident" id="8093986">cnet</span><span class="op" id="8093990">:</span>&nbsp;<span class="string" id="8093992">&#34;tcp4&#34;</span><span class="op" id="8093998">,</span>&nbsp;<span class="ident" id="8094000">caddr</span><span class="op" id="8094005">:</span>&nbsp;<span class="string" id="8094007">&#34;127.0.0.1&#34;</span><span class="op" id="8094018">,</span>&nbsp;<span class="ident" id="8094020">ipv4map</span><span class="op" id="8094027">:</span>&nbsp;<span class="builtintype" id="8094029">true</span><span class="op" id="8094033">}</span><span class="op" id="8094034">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094038">{</span><span class="ident" id="8094039">snet</span><span class="op" id="8094043">:</span>&nbsp;<span class="string" id="8094045">&#34;tcp&#34;</span><span class="op" id="8094050">,</span>&nbsp;<span class="ident" id="8094052">saddr</span><span class="op" id="8094057">:</span>&nbsp;<span class="string" id="8094059">&#34;127.0.0.1&#34;</span><span class="op" id="8094070">,</span>&nbsp;<span class="ident" id="8094072">cnet</span><span class="op" id="8094076">:</span>&nbsp;<span class="string" id="8094078">&#34;tcp&#34;</span><span class="op" id="8094083">,</span>&nbsp;<span class="ident" id="8094085">caddr</span><span class="op" id="8094090">:</span>&nbsp;<span class="string" id="8094092">&#34;127.0.0.1&#34;</span><span class="op" id="8094103">}</span><span class="op" id="8094104">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094107">{</span><span class="ident" id="8094108">snet</span><span class="op" id="8094112">:</span>&nbsp;<span class="string" id="8094114">&#34;tcp&#34;</span><span class="op" id="8094119">,</span>&nbsp;<span class="ident" id="8094121">saddr</span><span class="op" id="8094126">:</span>&nbsp;<span class="string" id="8094128">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8094148">,</span>&nbsp;<span class="ident" id="8094150">cnet</span><span class="op" id="8094154">:</span>&nbsp;<span class="string" id="8094156">&#34;tcp&#34;</span><span class="op" id="8094161">,</span>&nbsp;<span class="ident" id="8094163">caddr</span><span class="op" id="8094168">:</span>&nbsp;<span class="string" id="8094170">&#34;127.0.0.1&#34;</span><span class="op" id="8094181">}</span><span class="op" id="8094182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094185">{</span><span class="ident" id="8094186">snet</span><span class="op" id="8094190">:</span>&nbsp;<span class="string" id="8094192">&#34;tcp&#34;</span><span class="op" id="8094197">,</span>&nbsp;<span class="ident" id="8094199">saddr</span><span class="op" id="8094204">:</span>&nbsp;<span class="string" id="8094206">&#34;[::1]&#34;</span><span class="op" id="8094213">,</span>&nbsp;<span class="ident" id="8094215">cnet</span><span class="op" id="8094219">:</span>&nbsp;<span class="string" id="8094221">&#34;tcp&#34;</span><span class="op" id="8094226">,</span>&nbsp;<span class="ident" id="8094228">caddr</span><span class="op" id="8094233">:</span>&nbsp;<span class="string" id="8094235">&#34;[::1]&#34;</span><span class="op" id="8094242">,</span>&nbsp;<span class="ident" id="8094244">ipv6</span><span class="op" id="8094248">:</span>&nbsp;<span class="builtintype" id="8094250">true</span><span class="op" id="8094254">}</span><span class="op" id="8094255">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094259">{</span><span class="ident" id="8094260">snet</span><span class="op" id="8094264">:</span>&nbsp;<span class="string" id="8094266">&#34;tcp4&#34;</span><span class="op" id="8094272">,</span>&nbsp;<span class="ident" id="8094274">saddr</span><span class="op" id="8094279">:</span>&nbsp;<span class="string" id="8094281">&#34;&#34;</span><span class="op" id="8094283">,</span>&nbsp;<span class="ident" id="8094285">cnet</span><span class="op" id="8094289">:</span>&nbsp;<span class="string" id="8094291">&#34;tcp4&#34;</span><span class="op" id="8094297">,</span>&nbsp;<span class="ident" id="8094299">caddr</span><span class="op" id="8094304">:</span>&nbsp;<span class="string" id="8094306">&#34;127.0.0.1&#34;</span><span class="op" id="8094317">}</span><span class="op" id="8094318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094321">{</span><span class="ident" id="8094322">snet</span><span class="op" id="8094326">:</span>&nbsp;<span class="string" id="8094328">&#34;tcp4&#34;</span><span class="op" id="8094334">,</span>&nbsp;<span class="ident" id="8094336">saddr</span><span class="op" id="8094341">:</span>&nbsp;<span class="string" id="8094343">&#34;0.0.0.0&#34;</span><span class="op" id="8094352">,</span>&nbsp;<span class="ident" id="8094354">cnet</span><span class="op" id="8094358">:</span>&nbsp;<span class="string" id="8094360">&#34;tcp4&#34;</span><span class="op" id="8094366">,</span>&nbsp;<span class="ident" id="8094368">caddr</span><span class="op" id="8094373">:</span>&nbsp;<span class="string" id="8094375">&#34;127.0.0.1&#34;</span><span class="op" id="8094386">}</span><span class="op" id="8094387">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094390">{</span><span class="ident" id="8094391">snet</span><span class="op" id="8094395">:</span>&nbsp;<span class="string" id="8094397">&#34;tcp4&#34;</span><span class="op" id="8094403">,</span>&nbsp;<span class="ident" id="8094405">saddr</span><span class="op" id="8094410">:</span>&nbsp;<span class="string" id="8094412">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8094430">,</span>&nbsp;<span class="ident" id="8094432">cnet</span><span class="op" id="8094436">:</span>&nbsp;<span class="string" id="8094438">&#34;tcp4&#34;</span><span class="op" id="8094444">,</span>&nbsp;<span class="ident" id="8094446">caddr</span><span class="op" id="8094451">:</span>&nbsp;<span class="string" id="8094453">&#34;127.0.0.1&#34;</span><span class="op" id="8094464">}</span><span class="op" id="8094465">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094469">{</span><span class="ident" id="8094470">snet</span><span class="op" id="8094474">:</span>&nbsp;<span class="string" id="8094476">&#34;tcp4&#34;</span><span class="op" id="8094482">,</span>&nbsp;<span class="ident" id="8094484">saddr</span><span class="op" id="8094489">:</span>&nbsp;<span class="string" id="8094491">&#34;127.0.0.1&#34;</span><span class="op" id="8094502">,</span>&nbsp;<span class="ident" id="8094504">cnet</span><span class="op" id="8094508">:</span>&nbsp;<span class="string" id="8094510">&#34;tcp4&#34;</span><span class="op" id="8094516">,</span>&nbsp;<span class="ident" id="8094518">caddr</span><span class="op" id="8094523">:</span>&nbsp;<span class="string" id="8094525">&#34;127.0.0.1&#34;</span><span class="op" id="8094536">}</span><span class="op" id="8094537">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094541">{</span><span class="ident" id="8094542">snet</span><span class="op" id="8094546">:</span>&nbsp;<span class="string" id="8094548">&#34;tcp6&#34;</span><span class="op" id="8094554">,</span>&nbsp;<span class="ident" id="8094556">saddr</span><span class="op" id="8094561">:</span>&nbsp;<span class="string" id="8094563">&#34;&#34;</span><span class="op" id="8094565">,</span>&nbsp;<span class="ident" id="8094567">cnet</span><span class="op" id="8094571">:</span>&nbsp;<span class="string" id="8094573">&#34;tcp6&#34;</span><span class="op" id="8094579">,</span>&nbsp;<span class="ident" id="8094581">caddr</span><span class="op" id="8094586">:</span>&nbsp;<span class="string" id="8094588">&#34;[::1]&#34;</span><span class="op" id="8094595">,</span>&nbsp;<span class="ident" id="8094597">ipv6</span><span class="op" id="8094601">:</span>&nbsp;<span class="builtintype" id="8094603">true</span><span class="op" id="8094607">}</span><span class="op" id="8094608">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094611">{</span><span class="ident" id="8094612">snet</span><span class="op" id="8094616">:</span>&nbsp;<span class="string" id="8094618">&#34;tcp6&#34;</span><span class="op" id="8094624">,</span>&nbsp;<span class="ident" id="8094626">saddr</span><span class="op" id="8094631">:</span>&nbsp;<span class="string" id="8094633">&#34;[::]&#34;</span><span class="op" id="8094639">,</span>&nbsp;<span class="ident" id="8094641">cnet</span><span class="op" id="8094645">:</span>&nbsp;<span class="string" id="8094647">&#34;tcp6&#34;</span><span class="op" id="8094653">,</span>&nbsp;<span class="ident" id="8094655">caddr</span><span class="op" id="8094660">:</span>&nbsp;<span class="string" id="8094662">&#34;[::1]&#34;</span><span class="op" id="8094669">,</span>&nbsp;<span class="ident" id="8094671">ipv6</span><span class="op" id="8094675">:</span>&nbsp;<span class="builtintype" id="8094677">true</span><span class="op" id="8094681">}</span><span class="op" id="8094682">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094686">{</span><span class="ident" id="8094687">snet</span><span class="op" id="8094691">:</span>&nbsp;<span class="string" id="8094693">&#34;tcp6&#34;</span><span class="op" id="8094699">,</span>&nbsp;<span class="ident" id="8094701">saddr</span><span class="op" id="8094706">:</span>&nbsp;<span class="string" id="8094708">&#34;[::1]&#34;</span><span class="op" id="8094715">,</span>&nbsp;<span class="ident" id="8094717">cnet</span><span class="op" id="8094721">:</span>&nbsp;<span class="string" id="8094723">&#34;tcp6&#34;</span><span class="op" id="8094729">,</span>&nbsp;<span class="ident" id="8094731">caddr</span><span class="op" id="8094736">:</span>&nbsp;<span class="string" id="8094738">&#34;[::1]&#34;</span><span class="op" id="8094745">,</span>&nbsp;<span class="ident" id="8094747">ipv6</span><span class="op" id="8094751">:</span>&nbsp;<span class="builtintype" id="8094753">true</span><span class="op" id="8094757">}</span><span class="op" id="8094758">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094762">{</span><span class="ident" id="8094763">snet</span><span class="op" id="8094767">:</span>&nbsp;<span class="string" id="8094769">&#34;unix&#34;</span><span class="op" id="8094775">,</span>&nbsp;<span class="ident" id="8094777">saddr</span><span class="op" id="8094782">:</span>&nbsp;<span class="ident" id="8094784">testUnixAddr</span><span class="op" id="8094796">(</span><span class="op" id="8094797">)</span><span class="op" id="8094798">,</span>&nbsp;<span class="ident" id="8094800">cnet</span><span class="op" id="8094804">:</span>&nbsp;<span class="string" id="8094806">&#34;unix&#34;</span><span class="op" id="8094812">,</span>&nbsp;<span class="ident" id="8094814">caddr</span><span class="op" id="8094819">:</span>&nbsp;<span class="ident" id="8094821">testUnixAddr</span><span class="op" id="8094833">(</span><span class="op" id="8094834">)</span><span class="op" id="8094835">}</span><span class="op" id="8094836">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8094839">{</span><span class="ident" id="8094840">snet</span><span class="op" id="8094844">:</span>&nbsp;<span class="string" id="8094846">&#34;unix&#34;</span><span class="op" id="8094852">,</span>&nbsp;<span class="ident" id="8094854">saddr</span><span class="op" id="8094859">:</span>&nbsp;<span class="string" id="8094861">&#34;@gotest2/net&#34;</span><span class="op" id="8094875">,</span>&nbsp;<span class="ident" id="8094877">cnet</span><span class="op" id="8094881">:</span>&nbsp;<span class="string" id="8094883">&#34;unix&#34;</span><span class="op" id="8094889">,</span>&nbsp;<span class="ident" id="8094891">caddr</span><span class="op" id="8094896">:</span>&nbsp;<span class="string" id="8094898">&#34;@gotest2/net.local&#34;</span><span class="op" id="8094918">,</span>&nbsp;<span class="ident" id="8094920">linuxOnly</span><span class="op" id="8094929">:</span>&nbsp;<span class="builtintype" id="8094931">true</span><span class="op" id="8094935">}</span><span class="op" id="8094936">,</span><br>
<span class="lineno"></span><span class="op" id="8094938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094941">func</span>&nbsp;<span class="ident" id="8094946">TestStreamConnServer</span><span class="op" id="8094966">(</span><span class="ident" id="8094967">t</span>&nbsp;<span class="op" id="8094969">*</span><span class="ident" id="8094970">testing</span><span class="op" id="8094977">.</span><span class="ident" id="8094978">T</span><span class="op" id="8094979">)</span>&nbsp;<span class="op" id="8094981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8094984">for</span>&nbsp;<span class="ident" id="8094988">_</span><span class="op" id="8094989">,</span>&nbsp;<span class="ident" id="8094991">tt</span>&nbsp;<span class="op" id="8094994">:=</span>&nbsp;<span class="keyword" id="8094997">range</span>&nbsp;<span class="ident" id="8095003">streamConnServerTests</span>&nbsp;<span class="op" id="8095025">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095029">if</span>&nbsp;<span class="ident" id="8095032">skipServerTest</span><span class="op" id="8095046">(</span><span class="ident" id="8095047">tt</span><span class="op" id="8095049">.</span><span class="ident" id="8095050">snet</span><span class="op" id="8095054">,</span>&nbsp;<span class="string" id="8095056">&#34;unix&#34;</span><span class="op" id="8095062">,</span>&nbsp;<span class="ident" id="8095064">tt</span><span class="op" id="8095066">.</span><span class="ident" id="8095067">saddr</span><span class="op" id="8095072">,</span>&nbsp;<span class="ident" id="8095074">tt</span><span class="op" id="8095076">.</span><span class="ident" id="8095077">ipv6</span><span class="op" id="8095081">,</span>&nbsp;<span class="ident" id="8095083">tt</span><span class="op" id="8095085">.</span><span class="ident" id="8095086">ipv4map</span><span class="op" id="8095093">,</span>&nbsp;<span class="ident" id="8095095">tt</span><span class="op" id="8095097">.</span><span class="ident" id="8095098">linuxOnly</span><span class="op" id="8095107">)</span>&nbsp;<span class="op" id="8095109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095114">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095130">listening</span>&nbsp;<span class="op" id="8095140">:=</span>&nbsp;<span class="builtinfunc" id="8095143">make</span><span class="op" id="8095147">(</span><span class="keyword" id="8095148">chan</span>&nbsp;<span class="builtintype" id="8095153">string</span><span class="op" id="8095159">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095163">done</span>&nbsp;<span class="op" id="8095168">:=</span>&nbsp;<span class="builtinfunc" id="8095171">make</span><span class="op" id="8095175">(</span><span class="keyword" id="8095176">chan</span>&nbsp;<span class="builtintype" id="8095181">int</span><span class="op" id="8095184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095188">switch</span>&nbsp;<span class="ident" id="8095195">tt</span><span class="op" id="8095197">.</span><span class="ident" id="8095198">snet</span>&nbsp;<span class="op" id="8095203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095207">case</span>&nbsp;<span class="string" id="8095212">&#34;tcp&#34;</span><span class="op" id="8095217">,</span>&nbsp;<span class="string" id="8095219">&#34;tcp4&#34;</span><span class="op" id="8095225">,</span>&nbsp;<span class="string" id="8095227">&#34;tcp6&#34;</span><span class="op" id="8095233">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095238">tt</span><span class="op" id="8095240">.</span><span class="ident" id="8095241">saddr</span>&nbsp;<span class="op" id="8095247">+=</span>&nbsp;<span class="string" id="8095250">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095257">case</span>&nbsp;<span class="string" id="8095262">&#34;unix&#34;</span><span class="op" id="8095268">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095273">os</span><span class="op" id="8095275">.</span><span class="ident" id="8095276">Remove</span><span class="op" id="8095282">(</span><span class="ident" id="8095283">tt</span><span class="op" id="8095285">.</span><span class="ident" id="8095286">saddr</span><span class="op" id="8095291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095296">os</span><span class="op" id="8095298">.</span><span class="ident" id="8095299">Remove</span><span class="op" id="8095305">(</span><span class="ident" id="8095306">tt</span><span class="op" id="8095308">.</span><span class="ident" id="8095309">caddr</span><span class="op" id="8095314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095323">go</span>&nbsp;<span class="ident" id="8095326">runStreamConnServer</span><span class="op" id="8095345">(</span><span class="ident" id="8095346">t</span><span class="op" id="8095347">,</span>&nbsp;<span class="ident" id="8095349">tt</span><span class="op" id="8095351">.</span><span class="ident" id="8095352">snet</span><span class="op" id="8095356">,</span>&nbsp;<span class="ident" id="8095358">tt</span><span class="op" id="8095360">.</span><span class="ident" id="8095361">saddr</span><span class="op" id="8095366">,</span>&nbsp;<span class="ident" id="8095368">listening</span><span class="op" id="8095377">,</span>&nbsp;<span class="ident" id="8095379">done</span><span class="op" id="8095383">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095387">taddr</span>&nbsp;<span class="op" id="8095393">:=</span>&nbsp;<span class="op" id="8095396">&lt;-</span><span class="ident" id="8095398">listening</span>&nbsp;<span class="comment" id="8095408">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095439">switch</span>&nbsp;<span class="ident" id="8095446">tt</span><span class="op" id="8095448">.</span><span class="ident" id="8095449">cnet</span>&nbsp;<span class="op" id="8095454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095458">case</span>&nbsp;<span class="string" id="8095463">&#34;tcp&#34;</span><span class="op" id="8095468">,</span>&nbsp;<span class="string" id="8095470">&#34;tcp4&#34;</span><span class="op" id="8095476">,</span>&nbsp;<span class="string" id="8095478">&#34;tcp6&#34;</span><span class="op" id="8095484">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095489">_</span><span class="op" id="8095490">,</span>&nbsp;<span class="ident" id="8095492">port</span><span class="op" id="8095496">,</span>&nbsp;<span class="ident" id="8095498">err</span>&nbsp;<span class="op" id="8095502">:=</span>&nbsp;<span class="ident" id="8095505">SplitHostPort</span><span class="op" id="8095518">(</span><span class="ident" id="8095519">taddr</span><span class="op" id="8095524">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095529">if</span>&nbsp;<span class="ident" id="8095532">err</span>&nbsp;<span class="op" id="8095536">!=</span>&nbsp;<span class="ident" id="8095539">nil</span>&nbsp;<span class="op" id="8095543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095549">t</span><span class="op" id="8095550">.</span><span class="ident" id="8095551">Fatalf</span><span class="op" id="8095557">(</span><span class="string" id="8095558">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8095588">,</span>&nbsp;<span class="ident" id="8095590">taddr</span><span class="op" id="8095595">,</span>&nbsp;<span class="ident" id="8095597">err</span><span class="op" id="8095600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095610">taddr</span>&nbsp;<span class="op" id="8095616">=</span>&nbsp;<span class="ident" id="8095618">tt</span><span class="op" id="8095620">.</span><span class="ident" id="8095621">caddr</span>&nbsp;<span class="op" id="8095627">+</span>&nbsp;<span class="string" id="8095629">&#34;:&#34;</span>&nbsp;<span class="op" id="8095633">+</span>&nbsp;<span class="ident" id="8095635">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095642">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095647">runStreamConnClient</span><span class="op" id="8095666">(</span><span class="ident" id="8095667">t</span><span class="op" id="8095668">,</span>&nbsp;<span class="ident" id="8095670">tt</span><span class="op" id="8095672">.</span><span class="ident" id="8095673">cnet</span><span class="op" id="8095677">,</span>&nbsp;<span class="ident" id="8095679">taddr</span><span class="op" id="8095684">,</span>&nbsp;<span class="ident" id="8095686">tt</span><span class="op" id="8095688">.</span><span class="ident" id="8095689">empty</span><span class="op" id="8095694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095698">&lt;-</span><span class="ident" id="8095700">done</span>&nbsp;<span class="comment" id="8095705">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095736">switch</span>&nbsp;<span class="ident" id="8095743">tt</span><span class="op" id="8095745">.</span><span class="ident" id="8095746">snet</span>&nbsp;<span class="op" id="8095751">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8095755">case</span>&nbsp;<span class="string" id="8095760">&#34;unix&#34;</span><span class="op" id="8095766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095771">os</span><span class="op" id="8095773">.</span><span class="ident" id="8095774">Remove</span><span class="op" id="8095780">(</span><span class="ident" id="8095781">tt</span><span class="op" id="8095783">.</span><span class="ident" id="8095784">saddr</span><span class="op" id="8095789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095794">os</span><span class="op" id="8095796">.</span><span class="ident" id="8095797">Remove</span><span class="op" id="8095803">(</span><span class="ident" id="8095804">tt</span><span class="op" id="8095806">.</span><span class="ident" id="8095807">caddr</span><span class="op" id="8095812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8095819">}</span><br>
<span class="lineno">130</span><span class="op" id="8095821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095824">var</span>&nbsp;<span class="ident" id="8095828">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8095853">=</span>&nbsp;<span class="op" id="8095855">[</span><span class="op" id="8095856">]</span><span class="keyword" id="8095857">struct</span>&nbsp;<span class="op" id="8095864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095867">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8095877">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095885">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8095895">string</span>&nbsp;<span class="comment" id="8095902">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095921">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8095931">string</span>&nbsp;<span class="comment" id="8095938">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095957">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8095967">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8095974">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8095999">linuxOnly</span>&nbsp;<span class="builtintype" id="8096009">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8096016">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8096070">}</span><span class="op" id="8096071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096074">{</span><span class="ident" id="8096075">net</span><span class="op" id="8096078">:</span>&nbsp;<span class="string" id="8096080">&#34;unixpacket&#34;</span><span class="op" id="8096092">,</span>&nbsp;<span class="ident" id="8096094">saddr</span><span class="op" id="8096099">:</span>&nbsp;<span class="ident" id="8096101">testUnixAddr</span><span class="op" id="8096113">(</span><span class="op" id="8096114">)</span><span class="op" id="8096115">,</span>&nbsp;<span class="ident" id="8096117">caddr</span><span class="op" id="8096122">:</span>&nbsp;<span class="ident" id="8096124">testUnixAddr</span><span class="op" id="8096136">(</span><span class="op" id="8096137">)</span><span class="op" id="8096138">}</span><span class="op" id="8096139">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096142">{</span><span class="ident" id="8096143">net</span><span class="op" id="8096146">:</span>&nbsp;<span class="string" id="8096148">&#34;unixpacket&#34;</span><span class="op" id="8096160">,</span>&nbsp;<span class="ident" id="8096162">saddr</span><span class="op" id="8096167">:</span>&nbsp;<span class="string" id="8096169">&#34;@gotest4/net&#34;</span><span class="op" id="8096183">,</span>&nbsp;<span class="ident" id="8096185">caddr</span><span class="op" id="8096190">:</span>&nbsp;<span class="string" id="8096192">&#34;@gotest4/net.local&#34;</span><span class="op" id="8096212">,</span>&nbsp;<span class="ident" id="8096214">linuxOnly</span><span class="op" id="8096223">:</span>&nbsp;<span class="builtintype" id="8096225">true</span><span class="op" id="8096229">}</span><span class="op" id="8096230">,</span><br>
<span class="lineno"></span><span class="op" id="8096232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096235">func</span>&nbsp;<span class="ident" id="8096240">TestSeqpacketConnServer</span><span class="op" id="8096263">(</span><span class="ident" id="8096264">t</span>&nbsp;<span class="op" id="8096266">*</span><span class="ident" id="8096267">testing</span><span class="op" id="8096274">.</span><span class="ident" id="8096275">T</span><span class="op" id="8096276">)</span>&nbsp;<span class="op" id="8096278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096281">switch</span>&nbsp;<span class="ident" id="8096288">runtime</span><span class="op" id="8096295">.</span><span class="ident" id="8096296">GOOS</span>&nbsp;<span class="op" id="8096301">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096304">case</span>&nbsp;<span class="string" id="8096309">&#34;darwin&#34;</span><span class="op" id="8096317">,</span>&nbsp;<span class="string" id="8096319">&#34;nacl&#34;</span><span class="op" id="8096325">,</span>&nbsp;<span class="string" id="8096327">&#34;openbsd&#34;</span><span class="op" id="8096336">,</span>&nbsp;<span class="string" id="8096338">&#34;plan9&#34;</span><span class="op" id="8096345">,</span>&nbsp;<span class="string" id="8096347">&#34;windows&#34;</span><span class="op" id="8096356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096360">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096373">case</span>&nbsp;<span class="string" id="8096378">&#34;freebsd&#34;</span><span class="op" id="8096387">:</span>&nbsp;<span class="comment" id="8096389">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096431">t</span><span class="op" id="8096432">.</span><span class="ident" id="8096433">Skipf</span><span class="op" id="8096438">(</span><span class="string" id="8096439">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8096460">,</span>&nbsp;<span class="ident" id="8096462">runtime</span><span class="op" id="8096469">.</span><span class="ident" id="8096470">GOOS</span><span class="op" id="8096474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096477">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096481">for</span>&nbsp;<span class="ident" id="8096485">_</span><span class="op" id="8096486">,</span>&nbsp;<span class="ident" id="8096488">tt</span>&nbsp;<span class="op" id="8096491">:=</span>&nbsp;<span class="keyword" id="8096494">range</span>&nbsp;<span class="ident" id="8096500">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8096525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096529">if</span>&nbsp;<span class="ident" id="8096532">runtime</span><span class="op" id="8096539">.</span><span class="ident" id="8096540">GOOS</span>&nbsp;<span class="op" id="8096545">!=</span>&nbsp;<span class="string" id="8096548">&#34;linux&#34;</span>&nbsp;<span class="op" id="8096556">&amp;&amp;</span>&nbsp;<span class="ident" id="8096559">tt</span><span class="op" id="8096561">.</span><span class="ident" id="8096562">linuxOnly</span>&nbsp;<span class="op" id="8096572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096577">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096588">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096592">listening</span>&nbsp;<span class="op" id="8096602">:=</span>&nbsp;<span class="builtinfunc" id="8096605">make</span><span class="op" id="8096609">(</span><span class="keyword" id="8096610">chan</span>&nbsp;<span class="builtintype" id="8096615">string</span><span class="op" id="8096621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096625">done</span>&nbsp;<span class="op" id="8096630">:=</span>&nbsp;<span class="builtinfunc" id="8096633">make</span><span class="op" id="8096637">(</span><span class="keyword" id="8096638">chan</span>&nbsp;<span class="builtintype" id="8096643">int</span><span class="op" id="8096646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096650">switch</span>&nbsp;<span class="ident" id="8096657">tt</span><span class="op" id="8096659">.</span><span class="ident" id="8096660">net</span>&nbsp;<span class="op" id="8096664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096668">case</span>&nbsp;<span class="string" id="8096673">&#34;unixpacket&#34;</span><span class="op" id="8096685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096690">os</span><span class="op" id="8096692">.</span><span class="ident" id="8096693">Remove</span><span class="op" id="8096699">(</span><span class="ident" id="8096700">tt</span><span class="op" id="8096702">.</span><span class="ident" id="8096703">saddr</span><span class="op" id="8096708">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096713">os</span><span class="op" id="8096715">.</span><span class="ident" id="8096716">Remove</span><span class="op" id="8096722">(</span><span class="ident" id="8096723">tt</span><span class="op" id="8096725">.</span><span class="ident" id="8096726">caddr</span><span class="op" id="8096731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096740">go</span>&nbsp;<span class="ident" id="8096743">runStreamConnServer</span><span class="op" id="8096762">(</span><span class="ident" id="8096763">t</span><span class="op" id="8096764">,</span>&nbsp;<span class="ident" id="8096766">tt</span><span class="op" id="8096768">.</span><span class="ident" id="8096769">net</span><span class="op" id="8096772">,</span>&nbsp;<span class="ident" id="8096774">tt</span><span class="op" id="8096776">.</span><span class="ident" id="8096777">saddr</span><span class="op" id="8096782">,</span>&nbsp;<span class="ident" id="8096784">listening</span><span class="op" id="8096793">,</span>&nbsp;<span class="ident" id="8096795">done</span><span class="op" id="8096799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096803">taddr</span>&nbsp;<span class="op" id="8096809">:=</span>&nbsp;<span class="op" id="8096812">&lt;-</span><span class="ident" id="8096814">listening</span>&nbsp;<span class="comment" id="8096824">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096855">runStreamConnClient</span><span class="op" id="8096874">(</span><span class="ident" id="8096875">t</span><span class="op" id="8096876">,</span>&nbsp;<span class="ident" id="8096878">tt</span><span class="op" id="8096880">.</span><span class="ident" id="8096881">net</span><span class="op" id="8096884">,</span>&nbsp;<span class="ident" id="8096886">taddr</span><span class="op" id="8096891">,</span>&nbsp;<span class="ident" id="8096893">tt</span><span class="op" id="8096895">.</span><span class="ident" id="8096896">empty</span><span class="op" id="8096901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8096905">&lt;-</span><span class="ident" id="8096907">done</span>&nbsp;<span class="comment" id="8096912">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096943">switch</span>&nbsp;<span class="ident" id="8096950">tt</span><span class="op" id="8096952">.</span><span class="ident" id="8096953">net</span>&nbsp;<span class="op" id="8096957">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8096961">case</span>&nbsp;<span class="string" id="8096966">&#34;unixpacket&#34;</span><span class="op" id="8096978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8096983">os</span><span class="op" id="8096985">.</span><span class="ident" id="8096986">Remove</span><span class="op" id="8096992">(</span><span class="ident" id="8096993">tt</span><span class="op" id="8096995">.</span><span class="ident" id="8096996">saddr</span><span class="op" id="8097001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097006">os</span><span class="op" id="8097008">.</span><span class="ident" id="8097009">Remove</span><span class="op" id="8097015">(</span><span class="ident" id="8097016">tt</span><span class="op" id="8097018">.</span><span class="ident" id="8097019">caddr</span><span class="op" id="8097024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097031">}</span><br>
<span class="lineno">175</span><span class="op" id="8097033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097036">func</span>&nbsp;<span class="ident" id="8097041">runStreamConnServer</span><span class="op" id="8097060">(</span><span class="ident" id="8097061">t</span>&nbsp;<span class="op" id="8097063">*</span><span class="ident" id="8097064">testing</span><span class="op" id="8097071">.</span><span class="ident" id="8097072">T</span><span class="op" id="8097073">,</span>&nbsp;<span class="ident" id="8097075">net</span><span class="op" id="8097078">,</span>&nbsp;<span class="ident" id="8097080">laddr</span>&nbsp;<span class="builtintype" id="8097086">string</span><span class="op" id="8097092">,</span>&nbsp;<span class="ident" id="8097094">listening</span>&nbsp;<span class="keyword" id="8097104">chan</span><span class="op" id="8097108">&lt;-</span>&nbsp;<span class="builtintype" id="8097111">string</span><span class="op" id="8097117">,</span>&nbsp;<span class="ident" id="8097119">done</span>&nbsp;<span class="keyword" id="8097124">chan</span><span class="op" id="8097128">&lt;-</span>&nbsp;<span class="builtintype" id="8097131">int</span><span class="op" id="8097134">)</span>&nbsp;<span class="op" id="8097136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097139">defer</span>&nbsp;<span class="builtinfunc" id="8097145">close</span><span class="op" id="8097150">(</span><span class="ident" id="8097151">done</span><span class="op" id="8097155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097158">l</span><span class="op" id="8097159">,</span>&nbsp;<span class="ident" id="8097161">err</span>&nbsp;<span class="op" id="8097165">:=</span>&nbsp;<span class="ident" id="8097168">Listen</span><span class="op" id="8097174">(</span><span class="ident" id="8097175">net</span><span class="op" id="8097178">,</span>&nbsp;<span class="ident" id="8097180">laddr</span><span class="op" id="8097185">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097188">if</span>&nbsp;<span class="ident" id="8097191">err</span>&nbsp;<span class="op" id="8097195">!=</span>&nbsp;<span class="ident" id="8097198">nil</span>&nbsp;<span class="op" id="8097202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097206">t</span><span class="op" id="8097207">.</span><span class="ident" id="8097208">Errorf</span><span class="op" id="8097214">(</span><span class="string" id="8097215">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8097242">,</span>&nbsp;<span class="ident" id="8097244">net</span><span class="op" id="8097247">,</span>&nbsp;<span class="ident" id="8097249">laddr</span><span class="op" id="8097254">,</span>&nbsp;<span class="ident" id="8097256">err</span><span class="op" id="8097259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097263">listening</span>&nbsp;<span class="op" id="8097273">&lt;-</span>&nbsp;<span class="string" id="8097276">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097286">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097294">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097297">defer</span>&nbsp;<span class="ident" id="8097303">l</span><span class="op" id="8097304">.</span><span class="ident" id="8097305">Close</span><span class="op" id="8097310">(</span><span class="op" id="8097311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097314">listening</span>&nbsp;<span class="op" id="8097324">&lt;-</span>&nbsp;<span class="ident" id="8097327">l</span><span class="op" id="8097328">.</span><span class="ident" id="8097329">Addr</span><span class="op" id="8097333">(</span><span class="op" id="8097334">)</span><span class="op" id="8097335">.</span><span class="ident" id="8097336">String</span><span class="op" id="8097342">(</span><span class="op" id="8097343">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097347">echo</span>&nbsp;<span class="op" id="8097352">:=</span>&nbsp;<span class="keyword" id="8097355">func</span><span class="op" id="8097359">(</span><span class="ident" id="8097360">rw</span>&nbsp;<span class="ident" id="8097363">io</span><span class="op" id="8097365">.</span><span class="ident" id="8097366">ReadWriter</span><span class="op" id="8097376">,</span>&nbsp;<span class="ident" id="8097378">done</span>&nbsp;<span class="keyword" id="8097383">chan</span><span class="op" id="8097387">&lt;-</span>&nbsp;<span class="builtintype" id="8097390">int</span><span class="op" id="8097393">)</span>&nbsp;<span class="op" id="8097395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097399">buf</span>&nbsp;<span class="op" id="8097403">:=</span>&nbsp;<span class="builtinfunc" id="8097406">make</span><span class="op" id="8097410">(</span><span class="op" id="8097411">[</span><span class="op" id="8097412">]</span><span class="builtintype" id="8097413">byte</span><span class="op" id="8097417">,</span>&nbsp;<span class="num" id="8097419">1024</span><span class="op" id="8097423">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097427">for</span>&nbsp;<span class="op" id="8097431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097436">n</span><span class="op" id="8097437">,</span>&nbsp;<span class="ident" id="8097439">err</span>&nbsp;<span class="op" id="8097443">:=</span>&nbsp;<span class="ident" id="8097446">rw</span><span class="op" id="8097448">.</span><span class="ident" id="8097449">Read</span><span class="op" id="8097453">(</span><span class="ident" id="8097454">buf</span><span class="op" id="8097457">[</span><span class="num" id="8097458">0</span><span class="op" id="8097459">:</span><span class="op" id="8097460">]</span><span class="op" id="8097461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097466">if</span>&nbsp;<span class="ident" id="8097469">err</span>&nbsp;<span class="op" id="8097473">!=</span>&nbsp;<span class="ident" id="8097476">nil</span>&nbsp;<span class="op" id="8097480">||</span>&nbsp;<span class="ident" id="8097483">n</span>&nbsp;<span class="op" id="8097485">==</span>&nbsp;<span class="num" id="8097488">0</span>&nbsp;<span class="op" id="8097490">||</span>&nbsp;<span class="builtintype" id="8097493">string</span><span class="op" id="8097499">(</span><span class="ident" id="8097500">buf</span><span class="op" id="8097503">[</span><span class="op" id="8097504">:</span><span class="ident" id="8097505">n</span><span class="op" id="8097506">]</span><span class="op" id="8097507">)</span>&nbsp;<span class="op" id="8097509">==</span>&nbsp;<span class="string" id="8097512">&#34;END&#34;</span>&nbsp;<span class="op" id="8097518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097524">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097533">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097538">rw</span><span class="op" id="8097540">.</span><span class="ident" id="8097541">Write</span><span class="op" id="8097546">(</span><span class="ident" id="8097547">buf</span><span class="op" id="8097550">[</span><span class="num" id="8097551">0</span><span class="op" id="8097552">:</span><span class="ident" id="8097553">n</span><span class="op" id="8097554">]</span><span class="op" id="8097555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8097563">close</span><span class="op" id="8097568">(</span><span class="ident" id="8097569">done</span><span class="op" id="8097573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="8097579">run</span><span class="op" id="8097582">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097585">for</span>&nbsp;<span class="op" id="8097589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097593">c</span><span class="op" id="8097594">,</span>&nbsp;<span class="ident" id="8097596">err</span>&nbsp;<span class="op" id="8097600">:=</span>&nbsp;<span class="ident" id="8097603">l</span><span class="op" id="8097604">.</span><span class="ident" id="8097605">Accept</span><span class="op" id="8097611">(</span><span class="op" id="8097612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097616">if</span>&nbsp;<span class="ident" id="8097619">err</span>&nbsp;<span class="op" id="8097623">!=</span>&nbsp;<span class="ident" id="8097626">nil</span>&nbsp;<span class="op" id="8097630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097635">t</span><span class="op" id="8097636">.</span><span class="ident" id="8097637">Logf</span><span class="op" id="8097641">(</span><span class="string" id="8097642">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8097661">,</span>&nbsp;<span class="ident" id="8097663">err</span><span class="op" id="8097666">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097671">continue</span>&nbsp;<span class="ident" id="8097680">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097690">echodone</span>&nbsp;<span class="op" id="8097699">:=</span>&nbsp;<span class="builtinfunc" id="8097702">make</span><span class="op" id="8097706">(</span><span class="keyword" id="8097707">chan</span>&nbsp;<span class="builtintype" id="8097712">int</span><span class="op" id="8097715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097719">go</span>&nbsp;<span class="ident" id="8097722">echo</span><span class="op" id="8097726">(</span><span class="ident" id="8097727">c</span><span class="op" id="8097728">,</span>&nbsp;<span class="ident" id="8097730">echodone</span><span class="op" id="8097738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097742">&lt;-</span><span class="ident" id="8097744">echodone</span>&nbsp;<span class="comment" id="8097753">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097781">c</span><span class="op" id="8097782">.</span><span class="ident" id="8097783">Close</span><span class="op" id="8097788">(</span><span class="op" id="8097789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097793">break</span>&nbsp;<span class="ident" id="8097799">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097804">}</span><br>
<span class="lineno"></span><span class="op" id="8097806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8097809">func</span>&nbsp;<span class="ident" id="8097814">runStreamConnClient</span><span class="op" id="8097833">(</span><span class="ident" id="8097834">t</span>&nbsp;<span class="op" id="8097836">*</span><span class="ident" id="8097837">testing</span><span class="op" id="8097844">.</span><span class="ident" id="8097845">T</span><span class="op" id="8097846">,</span>&nbsp;<span class="ident" id="8097848">net</span><span class="op" id="8097851">,</span>&nbsp;<span class="ident" id="8097853">taddr</span>&nbsp;<span class="builtintype" id="8097859">string</span><span class="op" id="8097865">,</span>&nbsp;<span class="ident" id="8097867">isEmpty</span>&nbsp;<span class="builtintype" id="8097875">bool</span><span class="op" id="8097879">)</span>&nbsp;<span class="op" id="8097881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097884">c</span><span class="op" id="8097885">,</span>&nbsp;<span class="ident" id="8097887">err</span>&nbsp;<span class="op" id="8097891">:=</span>&nbsp;<span class="ident" id="8097894">Dial</span><span class="op" id="8097898">(</span><span class="ident" id="8097899">net</span><span class="op" id="8097902">,</span>&nbsp;<span class="ident" id="8097904">taddr</span><span class="op" id="8097909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097912">if</span>&nbsp;<span class="ident" id="8097915">err</span>&nbsp;<span class="op" id="8097919">!=</span>&nbsp;<span class="ident" id="8097922">nil</span>&nbsp;<span class="op" id="8097926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8097930">t</span><span class="op" id="8097931">.</span><span class="ident" id="8097932">Fatalf</span><span class="op" id="8097938">(</span><span class="string" id="8097939">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8097964">,</span>&nbsp;<span class="ident" id="8097966">net</span><span class="op" id="8097969">,</span>&nbsp;<span class="ident" id="8097971">taddr</span><span class="op" id="8097976">,</span>&nbsp;<span class="ident" id="8097978">err</span><span class="op" id="8097981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8097984">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8097987">defer</span>&nbsp;<span class="ident" id="8097993">c</span><span class="op" id="8097994">.</span><span class="ident" id="8097995">Close</span><span class="op" id="8098000">(</span><span class="op" id="8098001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098004">c</span><span class="op" id="8098005">.</span><span class="ident" id="8098006">SetReadDeadline</span><span class="op" id="8098021">(</span><span class="ident" id="8098022">time</span><span class="op" id="8098026">.</span><span class="ident" id="8098027">Now</span><span class="op" id="8098030">(</span><span class="op" id="8098031">)</span><span class="op" id="8098032">.</span><span class="ident" id="8098033">Add</span><span class="op" id="8098036">(</span><span class="num" id="8098037">1</span>&nbsp;<span class="op" id="8098039">*</span>&nbsp;<span class="ident" id="8098041">time</span><span class="op" id="8098045">.</span><span class="ident" id="8098046">Second</span><span class="op" id="8098052">)</span><span class="op" id="8098053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098057">var</span>&nbsp;<span class="ident" id="8098061">wb</span>&nbsp;<span class="op" id="8098064">[</span><span class="op" id="8098065">]</span><span class="builtintype" id="8098066">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098072">if</span>&nbsp;<span class="op" id="8098075">!</span><span class="ident" id="8098076">isEmpty</span>&nbsp;<span class="op" id="8098084">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098088">wb</span>&nbsp;<span class="op" id="8098091">=</span>&nbsp;<span class="op" id="8098093">[</span><span class="op" id="8098094">]</span><span class="builtintype" id="8098095">byte</span><span class="op" id="8098099">(</span><span class="string" id="8098100">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8098128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8098131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098134">if</span>&nbsp;<span class="ident" id="8098137">n</span><span class="op" id="8098138">,</span>&nbsp;<span class="ident" id="8098140">err</span>&nbsp;<span class="op" id="8098144">:=</span>&nbsp;<span class="ident" id="8098147">c</span><span class="op" id="8098148">.</span><span class="ident" id="8098149">Write</span><span class="op" id="8098154">(</span><span class="ident" id="8098155">wb</span><span class="op" id="8098157">)</span><span class="op" id="8098158">;</span>&nbsp;<span class="ident" id="8098160">err</span>&nbsp;<span class="op" id="8098164">!=</span>&nbsp;<span class="ident" id="8098167">nil</span>&nbsp;<span class="op" id="8098171">||</span>&nbsp;<span class="ident" id="8098174">n</span>&nbsp;<span class="op" id="8098176">!=</span>&nbsp;<span class="builtinfunc" id="8098179">len</span><span class="op" id="8098182">(</span><span class="ident" id="8098183">wb</span><span class="op" id="8098185">)</span>&nbsp;<span class="op" id="8098187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098191">t</span><span class="op" id="8098192">.</span><span class="ident" id="8098193">Fatalf</span><span class="op" id="8098199">(</span><span class="string" id="8098200">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8098238">,</span>&nbsp;<span class="ident" id="8098240">n</span><span class="op" id="8098241">,</span>&nbsp;<span class="ident" id="8098243">err</span><span class="op" id="8098246">,</span>&nbsp;<span class="builtinfunc" id="8098248">len</span><span class="op" id="8098251">(</span><span class="ident" id="8098252">wb</span><span class="op" id="8098254">)</span><span class="op" id="8098255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8098258">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098262">rb</span>&nbsp;<span class="op" id="8098265">:=</span>&nbsp;<span class="builtinfunc" id="8098268">make</span><span class="op" id="8098272">(</span><span class="op" id="8098273">[</span><span class="op" id="8098274">]</span><span class="builtintype" id="8098275">byte</span><span class="op" id="8098279">,</span>&nbsp;<span class="num" id="8098281">1024</span><span class="op" id="8098285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098288">if</span>&nbsp;<span class="ident" id="8098291">n</span><span class="op" id="8098292">,</span>&nbsp;<span class="ident" id="8098294">err</span>&nbsp;<span class="op" id="8098298">:=</span>&nbsp;<span class="ident" id="8098301">c</span><span class="op" id="8098302">.</span><span class="ident" id="8098303">Read</span><span class="op" id="8098307">(</span><span class="ident" id="8098308">rb</span><span class="op" id="8098310">[</span><span class="num" id="8098311">0</span><span class="op" id="8098312">:</span><span class="op" id="8098313">]</span><span class="op" id="8098314">)</span><span class="op" id="8098315">;</span>&nbsp;<span class="ident" id="8098317">err</span>&nbsp;<span class="op" id="8098321">!=</span>&nbsp;<span class="ident" id="8098324">nil</span>&nbsp;<span class="op" id="8098328">||</span>&nbsp;<span class="ident" id="8098331">n</span>&nbsp;<span class="op" id="8098333">!=</span>&nbsp;<span class="builtinfunc" id="8098336">len</span><span class="op" id="8098339">(</span><span class="ident" id="8098340">wb</span><span class="op" id="8098342">)</span>&nbsp;<span class="op" id="8098344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098348">t</span><span class="op" id="8098349">.</span><span class="ident" id="8098350">Fatalf</span><span class="op" id="8098356">(</span><span class="string" id="8098357">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8098394">,</span>&nbsp;<span class="ident" id="8098396">n</span><span class="op" id="8098397">,</span>&nbsp;<span class="ident" id="8098399">err</span><span class="op" id="8098402">,</span>&nbsp;<span class="builtinfunc" id="8098404">len</span><span class="op" id="8098407">(</span><span class="ident" id="8098408">wb</span><span class="op" id="8098410">)</span><span class="op" id="8098411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8098414">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8098418">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8098459">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098511">switch</span>&nbsp;<span class="ident" id="8098518">net</span>&nbsp;<span class="op" id="8098522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098525">case</span>&nbsp;<span class="string" id="8098530">&#34;unixpacket&#34;</span><span class="op" id="8098542">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098546">c</span><span class="op" id="8098547">.</span><span class="ident" id="8098548">Write</span><span class="op" id="8098553">(</span><span class="op" id="8098554">[</span><span class="op" id="8098555">]</span><span class="builtintype" id="8098556">byte</span><span class="op" id="8098560">(</span><span class="string" id="8098561">&#34;END&#34;</span><span class="op" id="8098566">)</span><span class="op" id="8098567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8098570">}</span><br>
<span class="lineno"></span><span class="op" id="8098572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8098575">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="8098618">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="8098669">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="8098721">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="8098751">var</span>&nbsp;<span class="ident" id="8098755">testDatagram</span>&nbsp;<span class="op" id="8098768">=</span>&nbsp;<span class="ident" id="8098770">flag</span><span class="op" id="8098774">.</span><span class="ident" id="8098775">Bool</span><span class="op" id="8098779">(</span><span class="string" id="8098780">&#34;datagram&#34;</span><span class="op" id="8098790">,</span>&nbsp;<span class="builtintype" id="8098792">false</span><span class="op" id="8098797">,</span>&nbsp;<span class="string" id="8098799">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="8098833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8098836">var</span>&nbsp;<span class="ident" id="8098840">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8098870">=</span>&nbsp;<span class="op" id="8098872">[</span><span class="op" id="8098873">]</span><span class="keyword" id="8098874">struct</span>&nbsp;<span class="op" id="8098881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098884">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8098894">string</span>&nbsp;<span class="comment" id="8098901">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098917">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8098927">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098935">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8098945">string</span>&nbsp;<span class="comment" id="8098952">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098968">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8098978">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098986">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8098996">bool</span>&nbsp;<span class="comment" id="8099001">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099042">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8099052">bool</span>&nbsp;<span class="comment" id="8099057">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099103">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8099113">bool</span>&nbsp;<span class="comment" id="8099118">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099149">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8099159">bool</span>&nbsp;<span class="comment" id="8099164">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099189">linuxOnly</span>&nbsp;<span class="builtintype" id="8099199">bool</span>&nbsp;<span class="comment" id="8099204">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="8099258">}</span><span class="op" id="8099259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099262">{</span><span class="ident" id="8099263">snet</span><span class="op" id="8099267">:</span>&nbsp;<span class="string" id="8099269">&#34;udp&#34;</span><span class="op" id="8099274">,</span>&nbsp;<span class="ident" id="8099276">saddr</span><span class="op" id="8099281">:</span>&nbsp;<span class="string" id="8099283">&#34;&#34;</span><span class="op" id="8099285">,</span>&nbsp;<span class="ident" id="8099287">cnet</span><span class="op" id="8099291">:</span>&nbsp;<span class="string" id="8099293">&#34;udp&#34;</span><span class="op" id="8099298">,</span>&nbsp;<span class="ident" id="8099300">caddr</span><span class="op" id="8099305">:</span>&nbsp;<span class="string" id="8099307">&#34;127.0.0.1&#34;</span><span class="op" id="8099318">}</span><span class="op" id="8099319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099322">{</span><span class="ident" id="8099323">snet</span><span class="op" id="8099327">:</span>&nbsp;<span class="string" id="8099329">&#34;udp&#34;</span><span class="op" id="8099334">,</span>&nbsp;<span class="ident" id="8099336">saddr</span><span class="op" id="8099341">:</span>&nbsp;<span class="string" id="8099343">&#34;0.0.0.0&#34;</span><span class="op" id="8099352">,</span>&nbsp;<span class="ident" id="8099354">cnet</span><span class="op" id="8099358">:</span>&nbsp;<span class="string" id="8099360">&#34;udp&#34;</span><span class="op" id="8099365">,</span>&nbsp;<span class="ident" id="8099367">caddr</span><span class="op" id="8099372">:</span>&nbsp;<span class="string" id="8099374">&#34;127.0.0.1&#34;</span><span class="op" id="8099385">}</span><span class="op" id="8099386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099389">{</span><span class="ident" id="8099390">snet</span><span class="op" id="8099394">:</span>&nbsp;<span class="string" id="8099396">&#34;udp&#34;</span><span class="op" id="8099401">,</span>&nbsp;<span class="ident" id="8099403">saddr</span><span class="op" id="8099408">:</span>&nbsp;<span class="string" id="8099410">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8099428">,</span>&nbsp;<span class="ident" id="8099430">cnet</span><span class="op" id="8099434">:</span>&nbsp;<span class="string" id="8099436">&#34;udp&#34;</span><span class="op" id="8099441">,</span>&nbsp;<span class="ident" id="8099443">caddr</span><span class="op" id="8099448">:</span>&nbsp;<span class="string" id="8099450">&#34;127.0.0.1&#34;</span><span class="op" id="8099461">}</span><span class="op" id="8099462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099465">{</span><span class="ident" id="8099466">snet</span><span class="op" id="8099470">:</span>&nbsp;<span class="string" id="8099472">&#34;udp&#34;</span><span class="op" id="8099477">,</span>&nbsp;<span class="ident" id="8099479">saddr</span><span class="op" id="8099484">:</span>&nbsp;<span class="string" id="8099486">&#34;[::]&#34;</span><span class="op" id="8099492">,</span>&nbsp;<span class="ident" id="8099494">cnet</span><span class="op" id="8099498">:</span>&nbsp;<span class="string" id="8099500">&#34;udp&#34;</span><span class="op" id="8099505">,</span>&nbsp;<span class="ident" id="8099507">caddr</span><span class="op" id="8099512">:</span>&nbsp;<span class="string" id="8099514">&#34;[::1]&#34;</span><span class="op" id="8099521">,</span>&nbsp;<span class="ident" id="8099523">ipv6</span><span class="op" id="8099527">:</span>&nbsp;<span class="builtintype" id="8099529">true</span><span class="op" id="8099533">}</span><span class="op" id="8099534">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099538">{</span><span class="ident" id="8099539">snet</span><span class="op" id="8099543">:</span>&nbsp;<span class="string" id="8099545">&#34;udp&#34;</span><span class="op" id="8099550">,</span>&nbsp;<span class="ident" id="8099552">saddr</span><span class="op" id="8099557">:</span>&nbsp;<span class="string" id="8099559">&#34;&#34;</span><span class="op" id="8099561">,</span>&nbsp;<span class="ident" id="8099563">cnet</span><span class="op" id="8099567">:</span>&nbsp;<span class="string" id="8099569">&#34;udp&#34;</span><span class="op" id="8099574">,</span>&nbsp;<span class="ident" id="8099576">caddr</span><span class="op" id="8099581">:</span>&nbsp;<span class="string" id="8099583">&#34;[::1]&#34;</span><span class="op" id="8099590">,</span>&nbsp;<span class="ident" id="8099592">ipv4map</span><span class="op" id="8099599">:</span>&nbsp;<span class="builtintype" id="8099601">true</span><span class="op" id="8099605">}</span><span class="op" id="8099606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099609">{</span><span class="ident" id="8099610">snet</span><span class="op" id="8099614">:</span>&nbsp;<span class="string" id="8099616">&#34;udp&#34;</span><span class="op" id="8099621">,</span>&nbsp;<span class="ident" id="8099623">saddr</span><span class="op" id="8099628">:</span>&nbsp;<span class="string" id="8099630">&#34;0.0.0.0&#34;</span><span class="op" id="8099639">,</span>&nbsp;<span class="ident" id="8099641">cnet</span><span class="op" id="8099645">:</span>&nbsp;<span class="string" id="8099647">&#34;udp&#34;</span><span class="op" id="8099652">,</span>&nbsp;<span class="ident" id="8099654">caddr</span><span class="op" id="8099659">:</span>&nbsp;<span class="string" id="8099661">&#34;[::1]&#34;</span><span class="op" id="8099668">,</span>&nbsp;<span class="ident" id="8099670">ipv4map</span><span class="op" id="8099677">:</span>&nbsp;<span class="builtintype" id="8099679">true</span><span class="op" id="8099683">}</span><span class="op" id="8099684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099687">{</span><span class="ident" id="8099688">snet</span><span class="op" id="8099692">:</span>&nbsp;<span class="string" id="8099694">&#34;udp&#34;</span><span class="op" id="8099699">,</span>&nbsp;<span class="ident" id="8099701">saddr</span><span class="op" id="8099706">:</span>&nbsp;<span class="string" id="8099708">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8099726">,</span>&nbsp;<span class="ident" id="8099728">cnet</span><span class="op" id="8099732">:</span>&nbsp;<span class="string" id="8099734">&#34;udp&#34;</span><span class="op" id="8099739">,</span>&nbsp;<span class="ident" id="8099741">caddr</span><span class="op" id="8099746">:</span>&nbsp;<span class="string" id="8099748">&#34;[::1]&#34;</span><span class="op" id="8099755">,</span>&nbsp;<span class="ident" id="8099757">ipv4map</span><span class="op" id="8099764">:</span>&nbsp;<span class="builtintype" id="8099766">true</span><span class="op" id="8099770">}</span><span class="op" id="8099771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099774">{</span><span class="ident" id="8099775">snet</span><span class="op" id="8099779">:</span>&nbsp;<span class="string" id="8099781">&#34;udp&#34;</span><span class="op" id="8099786">,</span>&nbsp;<span class="ident" id="8099788">saddr</span><span class="op" id="8099793">:</span>&nbsp;<span class="string" id="8099795">&#34;[::]&#34;</span><span class="op" id="8099801">,</span>&nbsp;<span class="ident" id="8099803">cnet</span><span class="op" id="8099807">:</span>&nbsp;<span class="string" id="8099809">&#34;udp&#34;</span><span class="op" id="8099814">,</span>&nbsp;<span class="ident" id="8099816">caddr</span><span class="op" id="8099821">:</span>&nbsp;<span class="string" id="8099823">&#34;127.0.0.1&#34;</span><span class="op" id="8099834">,</span>&nbsp;<span class="ident" id="8099836">ipv4map</span><span class="op" id="8099843">:</span>&nbsp;<span class="builtintype" id="8099845">true</span><span class="op" id="8099849">}</span><span class="op" id="8099850">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099854">{</span><span class="ident" id="8099855">snet</span><span class="op" id="8099859">:</span>&nbsp;<span class="string" id="8099861">&#34;udp&#34;</span><span class="op" id="8099866">,</span>&nbsp;<span class="ident" id="8099868">saddr</span><span class="op" id="8099873">:</span>&nbsp;<span class="string" id="8099875">&#34;&#34;</span><span class="op" id="8099877">,</span>&nbsp;<span class="ident" id="8099879">cnet</span><span class="op" id="8099883">:</span>&nbsp;<span class="string" id="8099885">&#34;udp4&#34;</span><span class="op" id="8099891">,</span>&nbsp;<span class="ident" id="8099893">caddr</span><span class="op" id="8099898">:</span>&nbsp;<span class="string" id="8099900">&#34;127.0.0.1&#34;</span><span class="op" id="8099911">}</span><span class="op" id="8099912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099915">{</span><span class="ident" id="8099916">snet</span><span class="op" id="8099920">:</span>&nbsp;<span class="string" id="8099922">&#34;udp&#34;</span><span class="op" id="8099927">,</span>&nbsp;<span class="ident" id="8099929">saddr</span><span class="op" id="8099934">:</span>&nbsp;<span class="string" id="8099936">&#34;0.0.0.0&#34;</span><span class="op" id="8099945">,</span>&nbsp;<span class="ident" id="8099947">cnet</span><span class="op" id="8099951">:</span>&nbsp;<span class="string" id="8099953">&#34;udp4&#34;</span><span class="op" id="8099959">,</span>&nbsp;<span class="ident" id="8099961">caddr</span><span class="op" id="8099966">:</span>&nbsp;<span class="string" id="8099968">&#34;127.0.0.1&#34;</span><span class="op" id="8099979">}</span><span class="op" id="8099980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099983">{</span><span class="ident" id="8099984">snet</span><span class="op" id="8099988">:</span>&nbsp;<span class="string" id="8099990">&#34;udp&#34;</span><span class="op" id="8099995">,</span>&nbsp;<span class="ident" id="8099997">saddr</span><span class="op" id="8100002">:</span>&nbsp;<span class="string" id="8100004">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8100022">,</span>&nbsp;<span class="ident" id="8100024">cnet</span><span class="op" id="8100028">:</span>&nbsp;<span class="string" id="8100030">&#34;udp4&#34;</span><span class="op" id="8100036">,</span>&nbsp;<span class="ident" id="8100038">caddr</span><span class="op" id="8100043">:</span>&nbsp;<span class="string" id="8100045">&#34;127.0.0.1&#34;</span><span class="op" id="8100056">}</span><span class="op" id="8100057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100060">{</span><span class="ident" id="8100061">snet</span><span class="op" id="8100065">:</span>&nbsp;<span class="string" id="8100067">&#34;udp&#34;</span><span class="op" id="8100072">,</span>&nbsp;<span class="ident" id="8100074">saddr</span><span class="op" id="8100079">:</span>&nbsp;<span class="string" id="8100081">&#34;[::]&#34;</span><span class="op" id="8100087">,</span>&nbsp;<span class="ident" id="8100089">cnet</span><span class="op" id="8100093">:</span>&nbsp;<span class="string" id="8100095">&#34;udp6&#34;</span><span class="op" id="8100101">,</span>&nbsp;<span class="ident" id="8100103">caddr</span><span class="op" id="8100108">:</span>&nbsp;<span class="string" id="8100110">&#34;[::1]&#34;</span><span class="op" id="8100117">,</span>&nbsp;<span class="ident" id="8100119">ipv6</span><span class="op" id="8100123">:</span>&nbsp;<span class="builtintype" id="8100125">true</span><span class="op" id="8100129">}</span><span class="op" id="8100130">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100134">{</span><span class="ident" id="8100135">snet</span><span class="op" id="8100139">:</span>&nbsp;<span class="string" id="8100141">&#34;udp&#34;</span><span class="op" id="8100146">,</span>&nbsp;<span class="ident" id="8100148">saddr</span><span class="op" id="8100153">:</span>&nbsp;<span class="string" id="8100155">&#34;&#34;</span><span class="op" id="8100157">,</span>&nbsp;<span class="ident" id="8100159">cnet</span><span class="op" id="8100163">:</span>&nbsp;<span class="string" id="8100165">&#34;udp6&#34;</span><span class="op" id="8100171">,</span>&nbsp;<span class="ident" id="8100173">caddr</span><span class="op" id="8100178">:</span>&nbsp;<span class="string" id="8100180">&#34;[::1]&#34;</span><span class="op" id="8100187">,</span>&nbsp;<span class="ident" id="8100189">ipv4map</span><span class="op" id="8100196">:</span>&nbsp;<span class="builtintype" id="8100198">true</span><span class="op" id="8100202">}</span><span class="op" id="8100203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100206">{</span><span class="ident" id="8100207">snet</span><span class="op" id="8100211">:</span>&nbsp;<span class="string" id="8100213">&#34;udp&#34;</span><span class="op" id="8100218">,</span>&nbsp;<span class="ident" id="8100220">saddr</span><span class="op" id="8100225">:</span>&nbsp;<span class="string" id="8100227">&#34;0.0.0.0&#34;</span><span class="op" id="8100236">,</span>&nbsp;<span class="ident" id="8100238">cnet</span><span class="op" id="8100242">:</span>&nbsp;<span class="string" id="8100244">&#34;udp6&#34;</span><span class="op" id="8100250">,</span>&nbsp;<span class="ident" id="8100252">caddr</span><span class="op" id="8100257">:</span>&nbsp;<span class="string" id="8100259">&#34;[::1]&#34;</span><span class="op" id="8100266">,</span>&nbsp;<span class="ident" id="8100268">ipv4map</span><span class="op" id="8100275">:</span>&nbsp;<span class="builtintype" id="8100277">true</span><span class="op" id="8100281">}</span><span class="op" id="8100282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100285">{</span><span class="ident" id="8100286">snet</span><span class="op" id="8100290">:</span>&nbsp;<span class="string" id="8100292">&#34;udp&#34;</span><span class="op" id="8100297">,</span>&nbsp;<span class="ident" id="8100299">saddr</span><span class="op" id="8100304">:</span>&nbsp;<span class="string" id="8100306">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8100324">,</span>&nbsp;<span class="ident" id="8100326">cnet</span><span class="op" id="8100330">:</span>&nbsp;<span class="string" id="8100332">&#34;udp6&#34;</span><span class="op" id="8100338">,</span>&nbsp;<span class="ident" id="8100340">caddr</span><span class="op" id="8100345">:</span>&nbsp;<span class="string" id="8100347">&#34;[::1]&#34;</span><span class="op" id="8100354">,</span>&nbsp;<span class="ident" id="8100356">ipv4map</span><span class="op" id="8100363">:</span>&nbsp;<span class="builtintype" id="8100365">true</span><span class="op" id="8100369">}</span><span class="op" id="8100370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100373">{</span><span class="ident" id="8100374">snet</span><span class="op" id="8100378">:</span>&nbsp;<span class="string" id="8100380">&#34;udp&#34;</span><span class="op" id="8100385">,</span>&nbsp;<span class="ident" id="8100387">saddr</span><span class="op" id="8100392">:</span>&nbsp;<span class="string" id="8100394">&#34;[::]&#34;</span><span class="op" id="8100400">,</span>&nbsp;<span class="ident" id="8100402">cnet</span><span class="op" id="8100406">:</span>&nbsp;<span class="string" id="8100408">&#34;udp4&#34;</span><span class="op" id="8100414">,</span>&nbsp;<span class="ident" id="8100416">caddr</span><span class="op" id="8100421">:</span>&nbsp;<span class="string" id="8100423">&#34;127.0.0.1&#34;</span><span class="op" id="8100434">,</span>&nbsp;<span class="ident" id="8100436">ipv4map</span><span class="op" id="8100443">:</span>&nbsp;<span class="builtintype" id="8100445">true</span><span class="op" id="8100449">}</span><span class="op" id="8100450">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100454">{</span><span class="ident" id="8100455">snet</span><span class="op" id="8100459">:</span>&nbsp;<span class="string" id="8100461">&#34;udp&#34;</span><span class="op" id="8100466">,</span>&nbsp;<span class="ident" id="8100468">saddr</span><span class="op" id="8100473">:</span>&nbsp;<span class="string" id="8100475">&#34;127.0.0.1&#34;</span><span class="op" id="8100486">,</span>&nbsp;<span class="ident" id="8100488">cnet</span><span class="op" id="8100492">:</span>&nbsp;<span class="string" id="8100494">&#34;udp&#34;</span><span class="op" id="8100499">,</span>&nbsp;<span class="ident" id="8100501">caddr</span><span class="op" id="8100506">:</span>&nbsp;<span class="string" id="8100508">&#34;127.0.0.1&#34;</span><span class="op" id="8100519">}</span><span class="op" id="8100520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100523">{</span><span class="ident" id="8100524">snet</span><span class="op" id="8100528">:</span>&nbsp;<span class="string" id="8100530">&#34;udp&#34;</span><span class="op" id="8100535">,</span>&nbsp;<span class="ident" id="8100537">saddr</span><span class="op" id="8100542">:</span>&nbsp;<span class="string" id="8100544">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8100564">,</span>&nbsp;<span class="ident" id="8100566">cnet</span><span class="op" id="8100570">:</span>&nbsp;<span class="string" id="8100572">&#34;udp&#34;</span><span class="op" id="8100577">,</span>&nbsp;<span class="ident" id="8100579">caddr</span><span class="op" id="8100584">:</span>&nbsp;<span class="string" id="8100586">&#34;127.0.0.1&#34;</span><span class="op" id="8100597">}</span><span class="op" id="8100598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100601">{</span><span class="ident" id="8100602">snet</span><span class="op" id="8100606">:</span>&nbsp;<span class="string" id="8100608">&#34;udp&#34;</span><span class="op" id="8100613">,</span>&nbsp;<span class="ident" id="8100615">saddr</span><span class="op" id="8100620">:</span>&nbsp;<span class="string" id="8100622">&#34;[::1]&#34;</span><span class="op" id="8100629">,</span>&nbsp;<span class="ident" id="8100631">cnet</span><span class="op" id="8100635">:</span>&nbsp;<span class="string" id="8100637">&#34;udp&#34;</span><span class="op" id="8100642">,</span>&nbsp;<span class="ident" id="8100644">caddr</span><span class="op" id="8100649">:</span>&nbsp;<span class="string" id="8100651">&#34;[::1]&#34;</span><span class="op" id="8100658">,</span>&nbsp;<span class="ident" id="8100660">ipv6</span><span class="op" id="8100664">:</span>&nbsp;<span class="builtintype" id="8100666">true</span><span class="op" id="8100670">}</span><span class="op" id="8100671">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100675">{</span><span class="ident" id="8100676">snet</span><span class="op" id="8100680">:</span>&nbsp;<span class="string" id="8100682">&#34;udp4&#34;</span><span class="op" id="8100688">,</span>&nbsp;<span class="ident" id="8100690">saddr</span><span class="op" id="8100695">:</span>&nbsp;<span class="string" id="8100697">&#34;&#34;</span><span class="op" id="8100699">,</span>&nbsp;<span class="ident" id="8100701">cnet</span><span class="op" id="8100705">:</span>&nbsp;<span class="string" id="8100707">&#34;udp4&#34;</span><span class="op" id="8100713">,</span>&nbsp;<span class="ident" id="8100715">caddr</span><span class="op" id="8100720">:</span>&nbsp;<span class="string" id="8100722">&#34;127.0.0.1&#34;</span><span class="op" id="8100733">}</span><span class="op" id="8100734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100737">{</span><span class="ident" id="8100738">snet</span><span class="op" id="8100742">:</span>&nbsp;<span class="string" id="8100744">&#34;udp4&#34;</span><span class="op" id="8100750">,</span>&nbsp;<span class="ident" id="8100752">saddr</span><span class="op" id="8100757">:</span>&nbsp;<span class="string" id="8100759">&#34;0.0.0.0&#34;</span><span class="op" id="8100768">,</span>&nbsp;<span class="ident" id="8100770">cnet</span><span class="op" id="8100774">:</span>&nbsp;<span class="string" id="8100776">&#34;udp4&#34;</span><span class="op" id="8100782">,</span>&nbsp;<span class="ident" id="8100784">caddr</span><span class="op" id="8100789">:</span>&nbsp;<span class="string" id="8100791">&#34;127.0.0.1&#34;</span><span class="op" id="8100802">}</span><span class="op" id="8100803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100806">{</span><span class="ident" id="8100807">snet</span><span class="op" id="8100811">:</span>&nbsp;<span class="string" id="8100813">&#34;udp4&#34;</span><span class="op" id="8100819">,</span>&nbsp;<span class="ident" id="8100821">saddr</span><span class="op" id="8100826">:</span>&nbsp;<span class="string" id="8100828">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8100846">,</span>&nbsp;<span class="ident" id="8100848">cnet</span><span class="op" id="8100852">:</span>&nbsp;<span class="string" id="8100854">&#34;udp4&#34;</span><span class="op" id="8100860">,</span>&nbsp;<span class="ident" id="8100862">caddr</span><span class="op" id="8100867">:</span>&nbsp;<span class="string" id="8100869">&#34;127.0.0.1&#34;</span><span class="op" id="8100880">}</span><span class="op" id="8100881">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100885">{</span><span class="ident" id="8100886">snet</span><span class="op" id="8100890">:</span>&nbsp;<span class="string" id="8100892">&#34;udp4&#34;</span><span class="op" id="8100898">,</span>&nbsp;<span class="ident" id="8100900">saddr</span><span class="op" id="8100905">:</span>&nbsp;<span class="string" id="8100907">&#34;127.0.0.1&#34;</span><span class="op" id="8100918">,</span>&nbsp;<span class="ident" id="8100920">cnet</span><span class="op" id="8100924">:</span>&nbsp;<span class="string" id="8100926">&#34;udp4&#34;</span><span class="op" id="8100932">,</span>&nbsp;<span class="ident" id="8100934">caddr</span><span class="op" id="8100939">:</span>&nbsp;<span class="string" id="8100941">&#34;127.0.0.1&#34;</span><span class="op" id="8100952">}</span><span class="op" id="8100953">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100957">{</span><span class="ident" id="8100958">snet</span><span class="op" id="8100962">:</span>&nbsp;<span class="string" id="8100964">&#34;udp6&#34;</span><span class="op" id="8100970">,</span>&nbsp;<span class="ident" id="8100972">saddr</span><span class="op" id="8100977">:</span>&nbsp;<span class="string" id="8100979">&#34;&#34;</span><span class="op" id="8100981">,</span>&nbsp;<span class="ident" id="8100983">cnet</span><span class="op" id="8100987">:</span>&nbsp;<span class="string" id="8100989">&#34;udp6&#34;</span><span class="op" id="8100995">,</span>&nbsp;<span class="ident" id="8100997">caddr</span><span class="op" id="8101002">:</span>&nbsp;<span class="string" id="8101004">&#34;[::1]&#34;</span><span class="op" id="8101011">,</span>&nbsp;<span class="ident" id="8101013">ipv6</span><span class="op" id="8101017">:</span>&nbsp;<span class="builtintype" id="8101019">true</span><span class="op" id="8101023">}</span><span class="op" id="8101024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101027">{</span><span class="ident" id="8101028">snet</span><span class="op" id="8101032">:</span>&nbsp;<span class="string" id="8101034">&#34;udp6&#34;</span><span class="op" id="8101040">,</span>&nbsp;<span class="ident" id="8101042">saddr</span><span class="op" id="8101047">:</span>&nbsp;<span class="string" id="8101049">&#34;[::]&#34;</span><span class="op" id="8101055">,</span>&nbsp;<span class="ident" id="8101057">cnet</span><span class="op" id="8101061">:</span>&nbsp;<span class="string" id="8101063">&#34;udp6&#34;</span><span class="op" id="8101069">,</span>&nbsp;<span class="ident" id="8101071">caddr</span><span class="op" id="8101076">:</span>&nbsp;<span class="string" id="8101078">&#34;[::1]&#34;</span><span class="op" id="8101085">,</span>&nbsp;<span class="ident" id="8101087">ipv6</span><span class="op" id="8101091">:</span>&nbsp;<span class="builtintype" id="8101093">true</span><span class="op" id="8101097">}</span><span class="op" id="8101098">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101102">{</span><span class="ident" id="8101103">snet</span><span class="op" id="8101107">:</span>&nbsp;<span class="string" id="8101109">&#34;udp6&#34;</span><span class="op" id="8101115">,</span>&nbsp;<span class="ident" id="8101117">saddr</span><span class="op" id="8101122">:</span>&nbsp;<span class="string" id="8101124">&#34;[::1]&#34;</span><span class="op" id="8101131">,</span>&nbsp;<span class="ident" id="8101133">cnet</span><span class="op" id="8101137">:</span>&nbsp;<span class="string" id="8101139">&#34;udp6&#34;</span><span class="op" id="8101145">,</span>&nbsp;<span class="ident" id="8101147">caddr</span><span class="op" id="8101152">:</span>&nbsp;<span class="string" id="8101154">&#34;[::1]&#34;</span><span class="op" id="8101161">,</span>&nbsp;<span class="ident" id="8101163">ipv6</span><span class="op" id="8101167">:</span>&nbsp;<span class="builtintype" id="8101169">true</span><span class="op" id="8101173">}</span><span class="op" id="8101174">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101178">{</span><span class="ident" id="8101179">snet</span><span class="op" id="8101183">:</span>&nbsp;<span class="string" id="8101185">&#34;udp&#34;</span><span class="op" id="8101190">,</span>&nbsp;<span class="ident" id="8101192">saddr</span><span class="op" id="8101197">:</span>&nbsp;<span class="string" id="8101199">&#34;127.0.0.1&#34;</span><span class="op" id="8101210">,</span>&nbsp;<span class="ident" id="8101212">cnet</span><span class="op" id="8101216">:</span>&nbsp;<span class="string" id="8101218">&#34;udp&#34;</span><span class="op" id="8101223">,</span>&nbsp;<span class="ident" id="8101225">caddr</span><span class="op" id="8101230">:</span>&nbsp;<span class="string" id="8101232">&#34;127.0.0.1&#34;</span><span class="op" id="8101243">,</span>&nbsp;<span class="ident" id="8101245">dial</span><span class="op" id="8101249">:</span>&nbsp;<span class="builtintype" id="8101251">true</span><span class="op" id="8101255">}</span><span class="op" id="8101256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101259">{</span><span class="ident" id="8101260">snet</span><span class="op" id="8101264">:</span>&nbsp;<span class="string" id="8101266">&#34;udp&#34;</span><span class="op" id="8101271">,</span>&nbsp;<span class="ident" id="8101273">saddr</span><span class="op" id="8101278">:</span>&nbsp;<span class="string" id="8101280">&#34;127.0.0.1&#34;</span><span class="op" id="8101291">,</span>&nbsp;<span class="ident" id="8101293">cnet</span><span class="op" id="8101297">:</span>&nbsp;<span class="string" id="8101299">&#34;udp&#34;</span><span class="op" id="8101304">,</span>&nbsp;<span class="ident" id="8101306">caddr</span><span class="op" id="8101311">:</span>&nbsp;<span class="string" id="8101313">&#34;127.0.0.1&#34;</span><span class="op" id="8101324">,</span>&nbsp;<span class="ident" id="8101326">empty</span><span class="op" id="8101331">:</span>&nbsp;<span class="builtintype" id="8101333">true</span><span class="op" id="8101337">}</span><span class="op" id="8101338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101341">{</span><span class="ident" id="8101342">snet</span><span class="op" id="8101346">:</span>&nbsp;<span class="string" id="8101348">&#34;udp&#34;</span><span class="op" id="8101353">,</span>&nbsp;<span class="ident" id="8101355">saddr</span><span class="op" id="8101360">:</span>&nbsp;<span class="string" id="8101362">&#34;127.0.0.1&#34;</span><span class="op" id="8101373">,</span>&nbsp;<span class="ident" id="8101375">cnet</span><span class="op" id="8101379">:</span>&nbsp;<span class="string" id="8101381">&#34;udp&#34;</span><span class="op" id="8101386">,</span>&nbsp;<span class="ident" id="8101388">caddr</span><span class="op" id="8101393">:</span>&nbsp;<span class="string" id="8101395">&#34;127.0.0.1&#34;</span><span class="op" id="8101406">,</span>&nbsp;<span class="ident" id="8101408">dial</span><span class="op" id="8101412">:</span>&nbsp;<span class="builtintype" id="8101414">true</span><span class="op" id="8101418">,</span>&nbsp;<span class="ident" id="8101420">empty</span><span class="op" id="8101425">:</span>&nbsp;<span class="builtintype" id="8101427">true</span><span class="op" id="8101431">}</span><span class="op" id="8101432">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101436">{</span><span class="ident" id="8101437">snet</span><span class="op" id="8101441">:</span>&nbsp;<span class="string" id="8101443">&#34;udp&#34;</span><span class="op" id="8101448">,</span>&nbsp;<span class="ident" id="8101450">saddr</span><span class="op" id="8101455">:</span>&nbsp;<span class="string" id="8101457">&#34;[::1]&#34;</span><span class="op" id="8101464">,</span>&nbsp;<span class="ident" id="8101466">cnet</span><span class="op" id="8101470">:</span>&nbsp;<span class="string" id="8101472">&#34;udp&#34;</span><span class="op" id="8101477">,</span>&nbsp;<span class="ident" id="8101479">caddr</span><span class="op" id="8101484">:</span>&nbsp;<span class="string" id="8101486">&#34;[::1]&#34;</span><span class="op" id="8101493">,</span>&nbsp;<span class="ident" id="8101495">ipv6</span><span class="op" id="8101499">:</span>&nbsp;<span class="builtintype" id="8101501">true</span><span class="op" id="8101505">,</span>&nbsp;<span class="ident" id="8101507">dial</span><span class="op" id="8101511">:</span>&nbsp;<span class="builtintype" id="8101513">true</span><span class="op" id="8101517">}</span><span class="op" id="8101518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101521">{</span><span class="ident" id="8101522">snet</span><span class="op" id="8101526">:</span>&nbsp;<span class="string" id="8101528">&#34;udp&#34;</span><span class="op" id="8101533">,</span>&nbsp;<span class="ident" id="8101535">saddr</span><span class="op" id="8101540">:</span>&nbsp;<span class="string" id="8101542">&#34;[::1]&#34;</span><span class="op" id="8101549">,</span>&nbsp;<span class="ident" id="8101551">cnet</span><span class="op" id="8101555">:</span>&nbsp;<span class="string" id="8101557">&#34;udp&#34;</span><span class="op" id="8101562">,</span>&nbsp;<span class="ident" id="8101564">caddr</span><span class="op" id="8101569">:</span>&nbsp;<span class="string" id="8101571">&#34;[::1]&#34;</span><span class="op" id="8101578">,</span>&nbsp;<span class="ident" id="8101580">ipv6</span><span class="op" id="8101584">:</span>&nbsp;<span class="builtintype" id="8101586">true</span><span class="op" id="8101590">,</span>&nbsp;<span class="ident" id="8101592">empty</span><span class="op" id="8101597">:</span>&nbsp;<span class="builtintype" id="8101599">true</span><span class="op" id="8101603">}</span><span class="op" id="8101604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101607">{</span><span class="ident" id="8101608">snet</span><span class="op" id="8101612">:</span>&nbsp;<span class="string" id="8101614">&#34;udp&#34;</span><span class="op" id="8101619">,</span>&nbsp;<span class="ident" id="8101621">saddr</span><span class="op" id="8101626">:</span>&nbsp;<span class="string" id="8101628">&#34;[::1]&#34;</span><span class="op" id="8101635">,</span>&nbsp;<span class="ident" id="8101637">cnet</span><span class="op" id="8101641">:</span>&nbsp;<span class="string" id="8101643">&#34;udp&#34;</span><span class="op" id="8101648">,</span>&nbsp;<span class="ident" id="8101650">caddr</span><span class="op" id="8101655">:</span>&nbsp;<span class="string" id="8101657">&#34;[::1]&#34;</span><span class="op" id="8101664">,</span>&nbsp;<span class="ident" id="8101666">ipv6</span><span class="op" id="8101670">:</span>&nbsp;<span class="builtintype" id="8101672">true</span><span class="op" id="8101676">,</span>&nbsp;<span class="ident" id="8101678">dial</span><span class="op" id="8101682">:</span>&nbsp;<span class="builtintype" id="8101684">true</span><span class="op" id="8101688">,</span>&nbsp;<span class="ident" id="8101690">empty</span><span class="op" id="8101695">:</span>&nbsp;<span class="builtintype" id="8101697">true</span><span class="op" id="8101701">}</span><span class="op" id="8101702">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101706">{</span><span class="ident" id="8101707">snet</span><span class="op" id="8101711">:</span>&nbsp;<span class="string" id="8101713">&#34;unixgram&#34;</span><span class="op" id="8101723">,</span>&nbsp;<span class="ident" id="8101725">saddr</span><span class="op" id="8101730">:</span>&nbsp;<span class="ident" id="8101732">testUnixAddr</span><span class="op" id="8101744">(</span><span class="op" id="8101745">)</span><span class="op" id="8101746">,</span>&nbsp;<span class="ident" id="8101748">cnet</span><span class="op" id="8101752">:</span>&nbsp;<span class="string" id="8101754">&#34;unixgram&#34;</span><span class="op" id="8101764">,</span>&nbsp;<span class="ident" id="8101766">caddr</span><span class="op" id="8101771">:</span>&nbsp;<span class="ident" id="8101773">testUnixAddr</span><span class="op" id="8101785">(</span><span class="op" id="8101786">)</span><span class="op" id="8101787">}</span><span class="op" id="8101788">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101791">{</span><span class="ident" id="8101792">snet</span><span class="op" id="8101796">:</span>&nbsp;<span class="string" id="8101798">&#34;unixgram&#34;</span><span class="op" id="8101808">,</span>&nbsp;<span class="ident" id="8101810">saddr</span><span class="op" id="8101815">:</span>&nbsp;<span class="ident" id="8101817">testUnixAddr</span><span class="op" id="8101829">(</span><span class="op" id="8101830">)</span><span class="op" id="8101831">,</span>&nbsp;<span class="ident" id="8101833">cnet</span><span class="op" id="8101837">:</span>&nbsp;<span class="string" id="8101839">&#34;unixgram&#34;</span><span class="op" id="8101849">,</span>&nbsp;<span class="ident" id="8101851">caddr</span><span class="op" id="8101856">:</span>&nbsp;<span class="ident" id="8101858">testUnixAddr</span><span class="op" id="8101870">(</span><span class="op" id="8101871">)</span><span class="op" id="8101872">,</span>&nbsp;<span class="ident" id="8101874">dial</span><span class="op" id="8101878">:</span>&nbsp;<span class="builtintype" id="8101880">true</span><span class="op" id="8101884">}</span><span class="op" id="8101885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101888">{</span><span class="ident" id="8101889">snet</span><span class="op" id="8101893">:</span>&nbsp;<span class="string" id="8101895">&#34;unixgram&#34;</span><span class="op" id="8101905">,</span>&nbsp;<span class="ident" id="8101907">saddr</span><span class="op" id="8101912">:</span>&nbsp;<span class="ident" id="8101914">testUnixAddr</span><span class="op" id="8101926">(</span><span class="op" id="8101927">)</span><span class="op" id="8101928">,</span>&nbsp;<span class="ident" id="8101930">cnet</span><span class="op" id="8101934">:</span>&nbsp;<span class="string" id="8101936">&#34;unixgram&#34;</span><span class="op" id="8101946">,</span>&nbsp;<span class="ident" id="8101948">caddr</span><span class="op" id="8101953">:</span>&nbsp;<span class="ident" id="8101955">testUnixAddr</span><span class="op" id="8101967">(</span><span class="op" id="8101968">)</span><span class="op" id="8101969">,</span>&nbsp;<span class="ident" id="8101971">empty</span><span class="op" id="8101976">:</span>&nbsp;<span class="builtintype" id="8101978">true</span><span class="op" id="8101982">}</span><span class="op" id="8101983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101986">{</span><span class="ident" id="8101987">snet</span><span class="op" id="8101991">:</span>&nbsp;<span class="string" id="8101993">&#34;unixgram&#34;</span><span class="op" id="8102003">,</span>&nbsp;<span class="ident" id="8102005">saddr</span><span class="op" id="8102010">:</span>&nbsp;<span class="ident" id="8102012">testUnixAddr</span><span class="op" id="8102024">(</span><span class="op" id="8102025">)</span><span class="op" id="8102026">,</span>&nbsp;<span class="ident" id="8102028">cnet</span><span class="op" id="8102032">:</span>&nbsp;<span class="string" id="8102034">&#34;unixgram&#34;</span><span class="op" id="8102044">,</span>&nbsp;<span class="ident" id="8102046">caddr</span><span class="op" id="8102051">:</span>&nbsp;<span class="ident" id="8102053">testUnixAddr</span><span class="op" id="8102065">(</span><span class="op" id="8102066">)</span><span class="op" id="8102067">,</span>&nbsp;<span class="ident" id="8102069">dial</span><span class="op" id="8102073">:</span>&nbsp;<span class="builtintype" id="8102075">true</span><span class="op" id="8102079">,</span>&nbsp;<span class="ident" id="8102081">empty</span><span class="op" id="8102086">:</span>&nbsp;<span class="builtintype" id="8102088">true</span><span class="op" id="8102092">}</span><span class="op" id="8102093">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102097">{</span><span class="ident" id="8102098">snet</span><span class="op" id="8102102">:</span>&nbsp;<span class="string" id="8102104">&#34;unixgram&#34;</span><span class="op" id="8102114">,</span>&nbsp;<span class="ident" id="8102116">saddr</span><span class="op" id="8102121">:</span>&nbsp;<span class="string" id="8102123">&#34;@gotest6/net&#34;</span><span class="op" id="8102137">,</span>&nbsp;<span class="ident" id="8102139">cnet</span><span class="op" id="8102143">:</span>&nbsp;<span class="string" id="8102145">&#34;unixgram&#34;</span><span class="op" id="8102155">,</span>&nbsp;<span class="ident" id="8102157">caddr</span><span class="op" id="8102162">:</span>&nbsp;<span class="string" id="8102164">&#34;@gotest6/net.local&#34;</span><span class="op" id="8102184">,</span>&nbsp;<span class="ident" id="8102186">linuxOnly</span><span class="op" id="8102195">:</span>&nbsp;<span class="builtintype" id="8102197">true</span><span class="op" id="8102201">}</span><span class="op" id="8102202">,</span><br>
<span class="lineno">310</span><span class="op" id="8102204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8102207">func</span>&nbsp;<span class="ident" id="8102212">TestDatagramPacketConnServer</span><span class="op" id="8102240">(</span><span class="ident" id="8102241">t</span>&nbsp;<span class="op" id="8102243">*</span><span class="ident" id="8102244">testing</span><span class="op" id="8102251">.</span><span class="ident" id="8102252">T</span><span class="op" id="8102253">)</span>&nbsp;<span class="op" id="8102255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102258">if</span>&nbsp;<span class="op" id="8102261">!</span><span class="op" id="8102262">*</span><span class="ident" id="8102263">testDatagram</span>&nbsp;<span class="op" id="8102276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102280">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102292">for</span>&nbsp;<span class="ident" id="8102296">_</span><span class="op" id="8102297">,</span>&nbsp;<span class="ident" id="8102299">tt</span>&nbsp;<span class="op" id="8102302">:=</span>&nbsp;<span class="keyword" id="8102305">range</span>&nbsp;<span class="ident" id="8102311">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8102341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102345">if</span>&nbsp;<span class="ident" id="8102348">skipServerTest</span><span class="op" id="8102362">(</span><span class="ident" id="8102363">tt</span><span class="op" id="8102365">.</span><span class="ident" id="8102366">snet</span><span class="op" id="8102370">,</span>&nbsp;<span class="string" id="8102372">&#34;unixgram&#34;</span><span class="op" id="8102382">,</span>&nbsp;<span class="ident" id="8102384">tt</span><span class="op" id="8102386">.</span><span class="ident" id="8102387">saddr</span><span class="op" id="8102392">,</span>&nbsp;<span class="ident" id="8102394">tt</span><span class="op" id="8102396">.</span><span class="ident" id="8102397">ipv6</span><span class="op" id="8102401">,</span>&nbsp;<span class="ident" id="8102403">tt</span><span class="op" id="8102405">.</span><span class="ident" id="8102406">ipv4map</span><span class="op" id="8102413">,</span>&nbsp;<span class="ident" id="8102415">tt</span><span class="op" id="8102417">.</span><span class="ident" id="8102418">linuxOnly</span><span class="op" id="8102427">)</span>&nbsp;<span class="op" id="8102429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102434">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102450">listening</span>&nbsp;<span class="op" id="8102460">:=</span>&nbsp;<span class="builtinfunc" id="8102463">make</span><span class="op" id="8102467">(</span><span class="keyword" id="8102468">chan</span>&nbsp;<span class="builtintype" id="8102473">string</span><span class="op" id="8102479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102483">done</span>&nbsp;<span class="op" id="8102488">:=</span>&nbsp;<span class="builtinfunc" id="8102491">make</span><span class="op" id="8102495">(</span><span class="keyword" id="8102496">chan</span>&nbsp;<span class="builtintype" id="8102501">int</span><span class="op" id="8102504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102508">switch</span>&nbsp;<span class="ident" id="8102515">tt</span><span class="op" id="8102517">.</span><span class="ident" id="8102518">snet</span>&nbsp;<span class="op" id="8102523">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102527">case</span>&nbsp;<span class="string" id="8102532">&#34;udp&#34;</span><span class="op" id="8102537">,</span>&nbsp;<span class="string" id="8102539">&#34;udp4&#34;</span><span class="op" id="8102545">,</span>&nbsp;<span class="string" id="8102547">&#34;udp6&#34;</span><span class="op" id="8102553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102558">tt</span><span class="op" id="8102560">.</span><span class="ident" id="8102561">saddr</span>&nbsp;<span class="op" id="8102567">+=</span>&nbsp;<span class="string" id="8102570">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102577">case</span>&nbsp;<span class="string" id="8102582">&#34;unixgram&#34;</span><span class="op" id="8102592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102597">os</span><span class="op" id="8102599">.</span><span class="ident" id="8102600">Remove</span><span class="op" id="8102606">(</span><span class="ident" id="8102607">tt</span><span class="op" id="8102609">.</span><span class="ident" id="8102610">saddr</span><span class="op" id="8102615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102620">os</span><span class="op" id="8102622">.</span><span class="ident" id="8102623">Remove</span><span class="op" id="8102629">(</span><span class="ident" id="8102630">tt</span><span class="op" id="8102632">.</span><span class="ident" id="8102633">caddr</span><span class="op" id="8102638">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102647">go</span>&nbsp;<span class="ident" id="8102650">runDatagramPacketConnServer</span><span class="op" id="8102677">(</span><span class="ident" id="8102678">t</span><span class="op" id="8102679">,</span>&nbsp;<span class="ident" id="8102681">tt</span><span class="op" id="8102683">.</span><span class="ident" id="8102684">snet</span><span class="op" id="8102688">,</span>&nbsp;<span class="ident" id="8102690">tt</span><span class="op" id="8102692">.</span><span class="ident" id="8102693">saddr</span><span class="op" id="8102698">,</span>&nbsp;<span class="ident" id="8102700">listening</span><span class="op" id="8102709">,</span>&nbsp;<span class="ident" id="8102711">done</span><span class="op" id="8102715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102719">taddr</span>&nbsp;<span class="op" id="8102725">:=</span>&nbsp;<span class="op" id="8102728">&lt;-</span><span class="ident" id="8102730">listening</span>&nbsp;<span class="comment" id="8102740">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102771">switch</span>&nbsp;<span class="ident" id="8102778">tt</span><span class="op" id="8102780">.</span><span class="ident" id="8102781">cnet</span>&nbsp;<span class="op" id="8102786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102790">case</span>&nbsp;<span class="string" id="8102795">&#34;udp&#34;</span><span class="op" id="8102800">,</span>&nbsp;<span class="string" id="8102802">&#34;udp4&#34;</span><span class="op" id="8102808">,</span>&nbsp;<span class="string" id="8102810">&#34;udp6&#34;</span><span class="op" id="8102816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102821">_</span><span class="op" id="8102822">,</span>&nbsp;<span class="ident" id="8102824">port</span><span class="op" id="8102828">,</span>&nbsp;<span class="ident" id="8102830">err</span>&nbsp;<span class="op" id="8102834">:=</span>&nbsp;<span class="ident" id="8102837">SplitHostPort</span><span class="op" id="8102850">(</span><span class="ident" id="8102851">taddr</span><span class="op" id="8102856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102861">if</span>&nbsp;<span class="ident" id="8102864">err</span>&nbsp;<span class="op" id="8102868">!=</span>&nbsp;<span class="ident" id="8102871">nil</span>&nbsp;<span class="op" id="8102875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102881">t</span><span class="op" id="8102882">.</span><span class="ident" id="8102883">Fatalf</span><span class="op" id="8102889">(</span><span class="string" id="8102890">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8102920">,</span>&nbsp;<span class="ident" id="8102922">taddr</span><span class="op" id="8102927">,</span>&nbsp;<span class="ident" id="8102929">err</span><span class="op" id="8102932">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102942">taddr</span>&nbsp;<span class="op" id="8102948">=</span>&nbsp;<span class="ident" id="8102950">tt</span><span class="op" id="8102952">.</span><span class="ident" id="8102953">caddr</span>&nbsp;<span class="op" id="8102959">+</span>&nbsp;<span class="string" id="8102961">&#34;:&#34;</span>&nbsp;<span class="op" id="8102965">+</span>&nbsp;<span class="ident" id="8102967">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8102975">tt</span><span class="op" id="8102977">.</span><span class="ident" id="8102978">caddr</span>&nbsp;<span class="op" id="8102984">+=</span>&nbsp;<span class="string" id="8102987">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8102998">if</span>&nbsp;<span class="ident" id="8103001">tt</span><span class="op" id="8103003">.</span><span class="ident" id="8103004">dial</span>&nbsp;<span class="op" id="8103009">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103014">runDatagramConnClient</span><span class="op" id="8103035">(</span><span class="ident" id="8103036">t</span><span class="op" id="8103037">,</span>&nbsp;<span class="ident" id="8103039">tt</span><span class="op" id="8103041">.</span><span class="ident" id="8103042">cnet</span><span class="op" id="8103046">,</span>&nbsp;<span class="ident" id="8103048">tt</span><span class="op" id="8103050">.</span><span class="ident" id="8103051">caddr</span><span class="op" id="8103056">,</span>&nbsp;<span class="ident" id="8103058">taddr</span><span class="op" id="8103063">,</span>&nbsp;<span class="ident" id="8103065">tt</span><span class="op" id="8103067">.</span><span class="ident" id="8103068">empty</span><span class="op" id="8103073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103077">}</span>&nbsp;<span class="keyword" id="8103079">else</span>&nbsp;<span class="op" id="8103084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103089">runDatagramPacketConnClient</span><span class="op" id="8103116">(</span><span class="ident" id="8103117">t</span><span class="op" id="8103118">,</span>&nbsp;<span class="ident" id="8103120">tt</span><span class="op" id="8103122">.</span><span class="ident" id="8103123">cnet</span><span class="op" id="8103127">,</span>&nbsp;<span class="ident" id="8103129">tt</span><span class="op" id="8103131">.</span><span class="ident" id="8103132">caddr</span><span class="op" id="8103137">,</span>&nbsp;<span class="ident" id="8103139">taddr</span><span class="op" id="8103144">,</span>&nbsp;<span class="ident" id="8103146">tt</span><span class="op" id="8103148">.</span><span class="ident" id="8103149">empty</span><span class="op" id="8103154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103162">&lt;-</span><span class="ident" id="8103164">done</span>&nbsp;<span class="comment" id="8103169">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103194">&lt;-</span><span class="ident" id="8103196">done</span>&nbsp;<span class="comment" id="8103201">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103232">switch</span>&nbsp;<span class="ident" id="8103239">tt</span><span class="op" id="8103241">.</span><span class="ident" id="8103242">snet</span>&nbsp;<span class="op" id="8103247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103251">case</span>&nbsp;<span class="string" id="8103256">&#34;unixgram&#34;</span><span class="op" id="8103266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103271">os</span><span class="op" id="8103273">.</span><span class="ident" id="8103274">Remove</span><span class="op" id="8103280">(</span><span class="ident" id="8103281">tt</span><span class="op" id="8103283">.</span><span class="ident" id="8103284">saddr</span><span class="op" id="8103289">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103294">os</span><span class="op" id="8103296">.</span><span class="ident" id="8103297">Remove</span><span class="op" id="8103303">(</span><span class="ident" id="8103304">tt</span><span class="op" id="8103306">.</span><span class="ident" id="8103307">caddr</span><span class="op" id="8103312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103319">}</span><br>
<span class="lineno"></span><span class="op" id="8103321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="8103324">func</span>&nbsp;<span class="ident" id="8103329">runDatagramPacketConnServer</span><span class="op" id="8103356">(</span><span class="ident" id="8103357">t</span>&nbsp;<span class="op" id="8103359">*</span><span class="ident" id="8103360">testing</span><span class="op" id="8103367">.</span><span class="ident" id="8103368">T</span><span class="op" id="8103369">,</span>&nbsp;<span class="ident" id="8103371">net</span><span class="op" id="8103374">,</span>&nbsp;<span class="ident" id="8103376">laddr</span>&nbsp;<span class="builtintype" id="8103382">string</span><span class="op" id="8103388">,</span>&nbsp;<span class="ident" id="8103390">listening</span>&nbsp;<span class="keyword" id="8103400">chan</span><span class="op" id="8103404">&lt;-</span>&nbsp;<span class="builtintype" id="8103407">string</span><span class="op" id="8103413">,</span>&nbsp;<span class="ident" id="8103415">done</span>&nbsp;<span class="keyword" id="8103420">chan</span><span class="op" id="8103424">&lt;-</span>&nbsp;<span class="builtintype" id="8103427">int</span><span class="op" id="8103430">)</span>&nbsp;<span class="op" id="8103432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103435">c</span><span class="op" id="8103436">,</span>&nbsp;<span class="ident" id="8103438">err</span>&nbsp;<span class="op" id="8103442">:=</span>&nbsp;<span class="ident" id="8103445">ListenPacket</span><span class="op" id="8103457">(</span><span class="ident" id="8103458">net</span><span class="op" id="8103461">,</span>&nbsp;<span class="ident" id="8103463">laddr</span><span class="op" id="8103468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103471">if</span>&nbsp;<span class="ident" id="8103474">err</span>&nbsp;<span class="op" id="8103478">!=</span>&nbsp;<span class="ident" id="8103481">nil</span>&nbsp;<span class="op" id="8103485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103489">t</span><span class="op" id="8103490">.</span><span class="ident" id="8103491">Errorf</span><span class="op" id="8103497">(</span><span class="string" id="8103498">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8103531">,</span>&nbsp;<span class="ident" id="8103533">net</span><span class="op" id="8103536">,</span>&nbsp;<span class="ident" id="8103538">laddr</span><span class="op" id="8103543">,</span>&nbsp;<span class="ident" id="8103545">err</span><span class="op" id="8103548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103552">listening</span>&nbsp;<span class="op" id="8103562">&lt;-</span>&nbsp;<span class="string" id="8103565">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103575">done</span>&nbsp;<span class="op" id="8103580">&lt;-</span>&nbsp;<span class="num" id="8103583">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103587">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103598">defer</span>&nbsp;<span class="ident" id="8103604">c</span><span class="op" id="8103605">.</span><span class="ident" id="8103606">Close</span><span class="op" id="8103611">(</span><span class="op" id="8103612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103615">listening</span>&nbsp;<span class="op" id="8103625">&lt;-</span>&nbsp;<span class="ident" id="8103628">c</span><span class="op" id="8103629">.</span><span class="ident" id="8103630">LocalAddr</span><span class="op" id="8103639">(</span><span class="op" id="8103640">)</span><span class="op" id="8103641">.</span><span class="ident" id="8103642">String</span><span class="op" id="8103648">(</span><span class="op" id="8103649">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103653">buf</span>&nbsp;<span class="op" id="8103657">:=</span>&nbsp;<span class="builtinfunc" id="8103660">make</span><span class="op" id="8103664">(</span><span class="op" id="8103665">[</span><span class="op" id="8103666">]</span><span class="builtintype" id="8103667">byte</span><span class="op" id="8103671">,</span>&nbsp;<span class="num" id="8103673">1024</span><span class="op" id="8103677">)</span><br>
<span class="lineno"></span><span class="ident" id="8103679">run</span><span class="op" id="8103682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103685">for</span>&nbsp;<span class="op" id="8103689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103693">c</span><span class="op" id="8103694">.</span><span class="ident" id="8103695">SetReadDeadline</span><span class="op" id="8103710">(</span><span class="ident" id="8103711">time</span><span class="op" id="8103715">.</span><span class="ident" id="8103716">Now</span><span class="op" id="8103719">(</span><span class="op" id="8103720">)</span><span class="op" id="8103721">.</span><span class="ident" id="8103722">Add</span><span class="op" id="8103725">(</span><span class="num" id="8103726">10</span>&nbsp;<span class="op" id="8103729">*</span>&nbsp;<span class="ident" id="8103731">time</span><span class="op" id="8103735">.</span><span class="ident" id="8103736">Millisecond</span><span class="op" id="8103747">)</span><span class="op" id="8103748">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8103752">n</span><span class="op" id="8103753">,</span>&nbsp;<span class="ident" id="8103755">ra</span><span class="op" id="8103757">,</span>&nbsp;<span class="ident" id="8103759">err</span>&nbsp;<span class="op" id="8103763">:=</span>&nbsp;<span class="ident" id="8103766">c</span><span class="op" id="8103767">.</span><span class="ident" id="8103768">ReadFrom</span><span class="op" id="8103776">(</span><span class="ident" id="8103777">buf</span><span class="op" id="8103780">[</span><span class="num" id="8103781">0</span><span class="op" id="8103782">:</span><span class="op" id="8103783">]</span><span class="op" id="8103784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103788">if</span>&nbsp;<span class="ident" id="8103791">nerr</span><span class="op" id="8103795">,</span>&nbsp;<span class="ident" id="8103797">ok</span>&nbsp;<span class="op" id="8103800">:=</span>&nbsp;<span class="ident" id="8103803">err</span><span class="op" id="8103806">.</span><span class="op" id="8103807">(</span><span class="ident" id="8103808">Error</span><span class="op" id="8103813">)</span><span class="op" id="8103814">;</span>&nbsp;<span class="ident" id="8103816">ok</span>&nbsp;<span class="op" id="8103819">&amp;&amp;</span>&nbsp;<span class="ident" id="8103822">nerr</span><span class="op" id="8103826">.</span><span class="ident" id="8103827">Timeout</span><span class="op" id="8103834">(</span><span class="op" id="8103835">)</span>&nbsp;<span class="op" id="8103837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103842">select</span>&nbsp;<span class="op" id="8103849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103854">case</span>&nbsp;<span class="ident" id="8103859">done</span>&nbsp;<span class="op" id="8103864">&lt;-</span>&nbsp;<span class="num" id="8103867">1</span><span class="op" id="8103868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103874">break</span>&nbsp;<span class="ident" id="8103880">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103887">default</span><span class="op" id="8103894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103900">continue</span>&nbsp;<span class="ident" id="8103909">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103924">if</span>&nbsp;<span class="ident" id="8103927">err</span>&nbsp;<span class="op" id="8103931">!=</span>&nbsp;<span class="ident" id="8103934">nil</span>&nbsp;<span class="op" id="8103938">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103943">break</span>&nbsp;<span class="ident" id="8103949">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8103959">if</span>&nbsp;<span class="ident" id="8103962">_</span><span class="op" id="8103963">,</span>&nbsp;<span class="ident" id="8103965">err</span>&nbsp;<span class="op" id="8103969">=</span>&nbsp;<span class="ident" id="8103971">c</span><span class="op" id="8103972">.</span><span class="ident" id="8103973">WriteTo</span><span class="op" id="8103980">(</span><span class="ident" id="8103981">buf</span><span class="op" id="8103984">[</span><span class="num" id="8103985">0</span><span class="op" id="8103986">:</span><span class="ident" id="8103987">n</span><span class="op" id="8103988">]</span><span class="op" id="8103989">,</span>&nbsp;<span class="ident" id="8103991">ra</span><span class="op" id="8103993">)</span><span class="op" id="8103994">;</span>&nbsp;<span class="ident" id="8103996">err</span>&nbsp;<span class="op" id="8104000">!=</span>&nbsp;<span class="ident" id="8104003">nil</span>&nbsp;<span class="op" id="8104007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104012">t</span><span class="op" id="8104013">.</span><span class="ident" id="8104014">Errorf</span><span class="op" id="8104020">(</span><span class="string" id="8104021">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8104045">,</span>&nbsp;<span class="ident" id="8104047">ra</span><span class="op" id="8104049">,</span>&nbsp;<span class="ident" id="8104051">err</span><span class="op" id="8104054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104059">break</span>&nbsp;<span class="ident" id="8104065">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104077">done</span>&nbsp;<span class="op" id="8104082">&lt;-</span>&nbsp;<span class="num" id="8104085">1</span><br>
<span class="lineno"></span><span class="op" id="8104087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="8104090">func</span>&nbsp;<span class="ident" id="8104095">runDatagramConnClient</span><span class="op" id="8104116">(</span><span class="ident" id="8104117">t</span>&nbsp;<span class="op" id="8104119">*</span><span class="ident" id="8104120">testing</span><span class="op" id="8104127">.</span><span class="ident" id="8104128">T</span><span class="op" id="8104129">,</span>&nbsp;<span class="ident" id="8104131">net</span><span class="op" id="8104134">,</span>&nbsp;<span class="ident" id="8104136">laddr</span><span class="op" id="8104141">,</span>&nbsp;<span class="ident" id="8104143">taddr</span>&nbsp;<span class="builtintype" id="8104149">string</span><span class="op" id="8104155">,</span>&nbsp;<span class="ident" id="8104157">isEmpty</span>&nbsp;<span class="builtintype" id="8104165">bool</span><span class="op" id="8104169">)</span>&nbsp;<span class="op" id="8104171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104174">var</span>&nbsp;<span class="ident" id="8104178">c</span>&nbsp;<span class="ident" id="8104180">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104186">var</span>&nbsp;<span class="ident" id="8104190">err</span>&nbsp;<span class="builtintype" id="8104194">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104201">switch</span>&nbsp;<span class="ident" id="8104208">net</span>&nbsp;<span class="op" id="8104212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104215">case</span>&nbsp;<span class="string" id="8104220">&#34;udp&#34;</span><span class="op" id="8104225">,</span>&nbsp;<span class="string" id="8104227">&#34;udp4&#34;</span><span class="op" id="8104233">,</span>&nbsp;<span class="string" id="8104235">&#34;udp6&#34;</span><span class="op" id="8104241">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104245">c</span><span class="op" id="8104246">,</span>&nbsp;<span class="ident" id="8104248">err</span>&nbsp;<span class="op" id="8104252">=</span>&nbsp;<span class="ident" id="8104254">Dial</span><span class="op" id="8104258">(</span><span class="ident" id="8104259">net</span><span class="op" id="8104262">,</span>&nbsp;<span class="ident" id="8104264">taddr</span><span class="op" id="8104269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104273">if</span>&nbsp;<span class="ident" id="8104276">err</span>&nbsp;<span class="op" id="8104280">!=</span>&nbsp;<span class="ident" id="8104283">nil</span>&nbsp;<span class="op" id="8104287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104292">t</span><span class="op" id="8104293">.</span><span class="ident" id="8104294">Fatalf</span><span class="op" id="8104300">(</span><span class="string" id="8104301">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8104326">,</span>&nbsp;<span class="ident" id="8104328">net</span><span class="op" id="8104331">,</span>&nbsp;<span class="ident" id="8104333">taddr</span><span class="op" id="8104338">,</span>&nbsp;<span class="ident" id="8104340">err</span><span class="op" id="8104343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104350">case</span>&nbsp;<span class="string" id="8104355">&#34;unixgram&#34;</span><span class="op" id="8104365">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104369">c</span><span class="op" id="8104370">,</span>&nbsp;<span class="ident" id="8104372">err</span>&nbsp;<span class="op" id="8104376">=</span>&nbsp;<span class="ident" id="8104378">DialUnix</span><span class="op" id="8104386">(</span><span class="ident" id="8104387">net</span><span class="op" id="8104390">,</span>&nbsp;<span class="op" id="8104392">&amp;</span><span class="ident" id="8104393">UnixAddr</span><span class="op" id="8104401">{</span><span class="ident" id="8104402">Name</span><span class="op" id="8104406">:</span>&nbsp;<span class="ident" id="8104408">laddr</span><span class="op" id="8104413">,</span>&nbsp;<span class="ident" id="8104415">Net</span><span class="op" id="8104418">:</span>&nbsp;<span class="ident" id="8104420">net</span><span class="op" id="8104423">}</span><span class="op" id="8104424">,</span>&nbsp;<span class="op" id="8104426">&amp;</span><span class="ident" id="8104427">UnixAddr</span><span class="op" id="8104435">{</span><span class="ident" id="8104436">Name</span><span class="op" id="8104440">:</span>&nbsp;<span class="ident" id="8104442">taddr</span><span class="op" id="8104447">,</span>&nbsp;<span class="ident" id="8104449">Net</span><span class="op" id="8104452">:</span>&nbsp;<span class="ident" id="8104454">net</span><span class="op" id="8104457">}</span><span class="op" id="8104458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104462">if</span>&nbsp;<span class="ident" id="8104465">err</span>&nbsp;<span class="op" id="8104469">!=</span>&nbsp;<span class="ident" id="8104472">nil</span>&nbsp;<span class="op" id="8104476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104481">t</span><span class="op" id="8104482">.</span><span class="ident" id="8104483">Fatalf</span><span class="op" id="8104489">(</span><span class="string" id="8104490">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8104525">,</span>&nbsp;<span class="ident" id="8104527">net</span><span class="op" id="8104530">,</span>&nbsp;<span class="ident" id="8104532">laddr</span><span class="op" id="8104537">,</span>&nbsp;<span class="ident" id="8104539">taddr</span><span class="op" id="8104544">,</span>&nbsp;<span class="ident" id="8104546">err</span><span class="op" id="8104549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104556">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104559">defer</span>&nbsp;<span class="ident" id="8104565">c</span><span class="op" id="8104566">.</span><span class="ident" id="8104567">Close</span><span class="op" id="8104572">(</span><span class="op" id="8104573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104576">c</span><span class="op" id="8104577">.</span><span class="ident" id="8104578">SetReadDeadline</span><span class="op" id="8104593">(</span><span class="ident" id="8104594">time</span><span class="op" id="8104598">.</span><span class="ident" id="8104599">Now</span><span class="op" id="8104602">(</span><span class="op" id="8104603">)</span><span class="op" id="8104604">.</span><span class="ident" id="8104605">Add</span><span class="op" id="8104608">(</span><span class="num" id="8104609">1</span>&nbsp;<span class="op" id="8104611">*</span>&nbsp;<span class="ident" id="8104613">time</span><span class="op" id="8104617">.</span><span class="ident" id="8104618">Second</span><span class="op" id="8104624">)</span><span class="op" id="8104625">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104629">var</span>&nbsp;<span class="ident" id="8104633">wb</span>&nbsp;<span class="op" id="8104636">[</span><span class="op" id="8104637">]</span><span class="builtintype" id="8104638">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104644">if</span>&nbsp;<span class="op" id="8104647">!</span><span class="ident" id="8104648">isEmpty</span>&nbsp;<span class="op" id="8104656">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104660">wb</span>&nbsp;<span class="op" id="8104663">=</span>&nbsp;<span class="op" id="8104665">[</span><span class="op" id="8104666">]</span><span class="builtintype" id="8104667">byte</span><span class="op" id="8104671">(</span><span class="string" id="8104672">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8104702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104708">if</span>&nbsp;<span class="ident" id="8104711">n</span><span class="op" id="8104712">,</span>&nbsp;<span class="ident" id="8104714">err</span>&nbsp;<span class="op" id="8104718">:=</span>&nbsp;<span class="ident" id="8104721">c</span><span class="op" id="8104722">.</span><span class="ident" id="8104723">Write</span><span class="op" id="8104728">(</span><span class="ident" id="8104729">wb</span><span class="op" id="8104731">[</span><span class="num" id="8104732">0</span><span class="op" id="8104733">:</span><span class="op" id="8104734">]</span><span class="op" id="8104735">)</span><span class="op" id="8104736">;</span>&nbsp;<span class="ident" id="8104738">err</span>&nbsp;<span class="op" id="8104742">!=</span>&nbsp;<span class="ident" id="8104745">nil</span>&nbsp;<span class="op" id="8104749">||</span>&nbsp;<span class="ident" id="8104752">n</span>&nbsp;<span class="op" id="8104754">!=</span>&nbsp;<span class="builtinfunc" id="8104757">len</span><span class="op" id="8104760">(</span><span class="ident" id="8104761">wb</span><span class="op" id="8104763">)</span>&nbsp;<span class="op" id="8104765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104769">t</span><span class="op" id="8104770">.</span><span class="ident" id="8104771">Fatalf</span><span class="op" id="8104777">(</span><span class="string" id="8104778">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8104816">,</span>&nbsp;<span class="ident" id="8104818">n</span><span class="op" id="8104819">,</span>&nbsp;<span class="ident" id="8104821">err</span><span class="op" id="8104824">,</span>&nbsp;<span class="builtinfunc" id="8104826">len</span><span class="op" id="8104829">(</span><span class="ident" id="8104830">wb</span><span class="op" id="8104832">)</span><span class="op" id="8104833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104836">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104840">rb</span>&nbsp;<span class="op" id="8104843">:=</span>&nbsp;<span class="builtinfunc" id="8104846">make</span><span class="op" id="8104850">(</span><span class="op" id="8104851">[</span><span class="op" id="8104852">]</span><span class="builtintype" id="8104853">byte</span><span class="op" id="8104857">,</span>&nbsp;<span class="num" id="8104859">1024</span><span class="op" id="8104863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104866">if</span>&nbsp;<span class="ident" id="8104869">n</span><span class="op" id="8104870">,</span>&nbsp;<span class="ident" id="8104872">err</span>&nbsp;<span class="op" id="8104876">:=</span>&nbsp;<span class="ident" id="8104879">c</span><span class="op" id="8104880">.</span><span class="ident" id="8104881">Read</span><span class="op" id="8104885">(</span><span class="ident" id="8104886">rb</span><span class="op" id="8104888">[</span><span class="num" id="8104889">0</span><span class="op" id="8104890">:</span><span class="op" id="8104891">]</span><span class="op" id="8104892">)</span><span class="op" id="8104893">;</span>&nbsp;<span class="ident" id="8104895">err</span>&nbsp;<span class="op" id="8104899">!=</span>&nbsp;<span class="ident" id="8104902">nil</span>&nbsp;<span class="op" id="8104906">||</span>&nbsp;<span class="ident" id="8104909">n</span>&nbsp;<span class="op" id="8104911">!=</span>&nbsp;<span class="builtinfunc" id="8104914">len</span><span class="op" id="8104917">(</span><span class="ident" id="8104918">wb</span><span class="op" id="8104920">)</span>&nbsp;<span class="op" id="8104922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104926">t</span><span class="op" id="8104927">.</span><span class="ident" id="8104928">Fatalf</span><span class="op" id="8104934">(</span><span class="string" id="8104935">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8104972">,</span>&nbsp;<span class="ident" id="8104974">n</span><span class="op" id="8104975">,</span>&nbsp;<span class="ident" id="8104977">err</span><span class="op" id="8104980">,</span>&nbsp;<span class="builtinfunc" id="8104982">len</span><span class="op" id="8104985">(</span><span class="ident" id="8104986">wb</span><span class="op" id="8104988">)</span><span class="op" id="8104989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104992">}</span><br>
<span class="lineno">425</span><span class="op" id="8104994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104997">func</span>&nbsp;<span class="ident" id="8105002">runDatagramPacketConnClient</span><span class="op" id="8105029">(</span><span class="ident" id="8105030">t</span>&nbsp;<span class="op" id="8105032">*</span><span class="ident" id="8105033">testing</span><span class="op" id="8105040">.</span><span class="ident" id="8105041">T</span><span class="op" id="8105042">,</span>&nbsp;<span class="ident" id="8105044">net</span><span class="op" id="8105047">,</span>&nbsp;<span class="ident" id="8105049">laddr</span><span class="op" id="8105054">,</span>&nbsp;<span class="ident" id="8105056">taddr</span>&nbsp;<span class="builtintype" id="8105062">string</span><span class="op" id="8105068">,</span>&nbsp;<span class="ident" id="8105070">isEmpty</span>&nbsp;<span class="builtintype" id="8105078">bool</span><span class="op" id="8105082">)</span>&nbsp;<span class="op" id="8105084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105087">var</span>&nbsp;<span class="ident" id="8105091">ra</span>&nbsp;<span class="ident" id="8105094">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105100">var</span>&nbsp;<span class="ident" id="8105104">err</span>&nbsp;<span class="builtintype" id="8105108">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105115">switch</span>&nbsp;<span class="ident" id="8105122">net</span>&nbsp;<span class="op" id="8105126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105129">case</span>&nbsp;<span class="string" id="8105134">&#34;udp&#34;</span><span class="op" id="8105139">,</span>&nbsp;<span class="string" id="8105141">&#34;udp4&#34;</span><span class="op" id="8105147">,</span>&nbsp;<span class="string" id="8105149">&#34;udp6&#34;</span><span class="op" id="8105155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105159">ra</span><span class="op" id="8105161">,</span>&nbsp;<span class="ident" id="8105163">err</span>&nbsp;<span class="op" id="8105167">=</span>&nbsp;<span class="ident" id="8105169">ResolveUDPAddr</span><span class="op" id="8105183">(</span><span class="ident" id="8105184">net</span><span class="op" id="8105187">,</span>&nbsp;<span class="ident" id="8105189">taddr</span><span class="op" id="8105194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105198">if</span>&nbsp;<span class="ident" id="8105201">err</span>&nbsp;<span class="op" id="8105205">!=</span>&nbsp;<span class="ident" id="8105208">nil</span>&nbsp;<span class="op" id="8105212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105217">t</span><span class="op" id="8105218">.</span><span class="ident" id="8105219">Fatalf</span><span class="op" id="8105225">(</span><span class="string" id="8105226">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8105261">,</span>&nbsp;<span class="ident" id="8105263">net</span><span class="op" id="8105266">,</span>&nbsp;<span class="ident" id="8105268">taddr</span><span class="op" id="8105273">,</span>&nbsp;<span class="ident" id="8105275">err</span><span class="op" id="8105278">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105285">case</span>&nbsp;<span class="string" id="8105290">&#34;unixgram&#34;</span><span class="op" id="8105300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105304">ra</span><span class="op" id="8105306">,</span>&nbsp;<span class="ident" id="8105308">err</span>&nbsp;<span class="op" id="8105312">=</span>&nbsp;<span class="ident" id="8105314">ResolveUnixAddr</span><span class="op" id="8105329">(</span><span class="ident" id="8105330">net</span><span class="op" id="8105333">,</span>&nbsp;<span class="ident" id="8105335">taddr</span><span class="op" id="8105340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105344">if</span>&nbsp;<span class="ident" id="8105347">err</span>&nbsp;<span class="op" id="8105351">!=</span>&nbsp;<span class="ident" id="8105354">nil</span>&nbsp;<span class="op" id="8105358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105363">t</span><span class="op" id="8105364">.</span><span class="ident" id="8105365">Fatalf</span><span class="op" id="8105371">(</span><span class="string" id="8105372">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8105408">,</span>&nbsp;<span class="ident" id="8105410">net</span><span class="op" id="8105413">,</span>&nbsp;<span class="ident" id="8105415">taddr</span><span class="op" id="8105420">,</span>&nbsp;<span class="ident" id="8105422">err</span><span class="op" id="8105425">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105435">c</span><span class="op" id="8105436">,</span>&nbsp;<span class="ident" id="8105438">err</span>&nbsp;<span class="op" id="8105442">:=</span>&nbsp;<span class="ident" id="8105445">ListenPacket</span><span class="op" id="8105457">(</span><span class="ident" id="8105458">net</span><span class="op" id="8105461">,</span>&nbsp;<span class="ident" id="8105463">laddr</span><span class="op" id="8105468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105471">if</span>&nbsp;<span class="ident" id="8105474">err</span>&nbsp;<span class="op" id="8105478">!=</span>&nbsp;<span class="ident" id="8105481">nil</span>&nbsp;<span class="op" id="8105485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105489">t</span><span class="op" id="8105490">.</span><span class="ident" id="8105491">Fatalf</span><span class="op" id="8105497">(</span><span class="string" id="8105498">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="8105530">,</span>&nbsp;<span class="ident" id="8105532">net</span><span class="op" id="8105535">,</span>&nbsp;<span class="ident" id="8105537">laddr</span><span class="op" id="8105542">,</span>&nbsp;<span class="ident" id="8105544">err</span><span class="op" id="8105547">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105553">defer</span>&nbsp;<span class="ident" id="8105559">c</span><span class="op" id="8105560">.</span><span class="ident" id="8105561">Close</span><span class="op" id="8105566">(</span><span class="op" id="8105567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105570">c</span><span class="op" id="8105571">.</span><span class="ident" id="8105572">SetReadDeadline</span><span class="op" id="8105587">(</span><span class="ident" id="8105588">time</span><span class="op" id="8105592">.</span><span class="ident" id="8105593">Now</span><span class="op" id="8105596">(</span><span class="op" id="8105597">)</span><span class="op" id="8105598">.</span><span class="ident" id="8105599">Add</span><span class="op" id="8105602">(</span><span class="num" id="8105603">1</span>&nbsp;<span class="op" id="8105605">*</span>&nbsp;<span class="ident" id="8105607">time</span><span class="op" id="8105611">.</span><span class="ident" id="8105612">Second</span><span class="op" id="8105618">)</span><span class="op" id="8105619">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105623">var</span>&nbsp;<span class="ident" id="8105627">wb</span>&nbsp;<span class="op" id="8105630">[</span><span class="op" id="8105631">]</span><span class="builtintype" id="8105632">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105638">if</span>&nbsp;<span class="op" id="8105641">!</span><span class="ident" id="8105642">isEmpty</span>&nbsp;<span class="op" id="8105650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105654">wb</span>&nbsp;<span class="op" id="8105657">=</span>&nbsp;<span class="op" id="8105659">[</span><span class="op" id="8105660">]</span><span class="builtintype" id="8105661">byte</span><span class="op" id="8105665">(</span><span class="string" id="8105666">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="8105710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105716">if</span>&nbsp;<span class="ident" id="8105719">n</span><span class="op" id="8105720">,</span>&nbsp;<span class="ident" id="8105722">err</span>&nbsp;<span class="op" id="8105726">:=</span>&nbsp;<span class="ident" id="8105729">c</span><span class="op" id="8105730">.</span><span class="ident" id="8105731">WriteTo</span><span class="op" id="8105738">(</span><span class="ident" id="8105739">wb</span><span class="op" id="8105741">[</span><span class="num" id="8105742">0</span><span class="op" id="8105743">:</span><span class="op" id="8105744">]</span><span class="op" id="8105745">,</span>&nbsp;<span class="ident" id="8105747">ra</span><span class="op" id="8105749">)</span><span class="op" id="8105750">;</span>&nbsp;<span class="ident" id="8105752">err</span>&nbsp;<span class="op" id="8105756">!=</span>&nbsp;<span class="ident" id="8105759">nil</span>&nbsp;<span class="op" id="8105763">||</span>&nbsp;<span class="ident" id="8105766">n</span>&nbsp;<span class="op" id="8105768">!=</span>&nbsp;<span class="builtinfunc" id="8105771">len</span><span class="op" id="8105774">(</span><span class="ident" id="8105775">wb</span><span class="op" id="8105777">)</span>&nbsp;<span class="op" id="8105779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105783">t</span><span class="op" id="8105784">.</span><span class="ident" id="8105785">Fatalf</span><span class="op" id="8105791">(</span><span class="string" id="8105792">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8105836">,</span>&nbsp;<span class="ident" id="8105838">ra</span><span class="op" id="8105840">,</span>&nbsp;<span class="ident" id="8105842">n</span><span class="op" id="8105843">,</span>&nbsp;<span class="ident" id="8105845">err</span><span class="op" id="8105848">,</span>&nbsp;<span class="builtinfunc" id="8105850">len</span><span class="op" id="8105853">(</span><span class="ident" id="8105854">wb</span><span class="op" id="8105856">)</span><span class="op" id="8105857">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105864">rb</span>&nbsp;<span class="op" id="8105867">:=</span>&nbsp;<span class="builtinfunc" id="8105870">make</span><span class="op" id="8105874">(</span><span class="op" id="8105875">[</span><span class="op" id="8105876">]</span><span class="builtintype" id="8105877">byte</span><span class="op" id="8105881">,</span>&nbsp;<span class="num" id="8105883">1024</span><span class="op" id="8105887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105890">if</span>&nbsp;<span class="ident" id="8105893">n</span><span class="op" id="8105894">,</span>&nbsp;<span class="ident" id="8105896">_</span><span class="op" id="8105897">,</span>&nbsp;<span class="ident" id="8105899">err</span>&nbsp;<span class="op" id="8105903">:=</span>&nbsp;<span class="ident" id="8105906">c</span><span class="op" id="8105907">.</span><span class="ident" id="8105908">ReadFrom</span><span class="op" id="8105916">(</span><span class="ident" id="8105917">rb</span><span class="op" id="8105919">[</span><span class="num" id="8105920">0</span><span class="op" id="8105921">:</span><span class="op" id="8105922">]</span><span class="op" id="8105923">)</span><span class="op" id="8105924">;</span>&nbsp;<span class="ident" id="8105926">err</span>&nbsp;<span class="op" id="8105930">!=</span>&nbsp;<span class="ident" id="8105933">nil</span>&nbsp;<span class="op" id="8105937">||</span>&nbsp;<span class="ident" id="8105940">n</span>&nbsp;<span class="op" id="8105942">!=</span>&nbsp;<span class="builtinfunc" id="8105945">len</span><span class="op" id="8105948">(</span><span class="ident" id="8105949">wb</span><span class="op" id="8105951">)</span>&nbsp;<span class="op" id="8105953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105957">t</span><span class="op" id="8105958">.</span><span class="ident" id="8105959">Fatalf</span><span class="op" id="8105965">(</span><span class="string" id="8105966">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8106007">,</span>&nbsp;<span class="ident" id="8106009">n</span><span class="op" id="8106010">,</span>&nbsp;<span class="ident" id="8106012">err</span><span class="op" id="8106015">,</span>&nbsp;<span class="builtinfunc" id="8106017">len</span><span class="op" id="8106020">(</span><span class="ident" id="8106021">wb</span><span class="op" id="8106023">)</span><span class="op" id="8106024">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8106027">}</span><br>
<span class="lineno"></span><span class="op" id="8106029">}</span>
</div>
</body>
</html>
