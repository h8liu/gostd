<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4081555">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4081610">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4081664">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4081715">package</span>&nbsp;<span class="ident" id="4081723">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4081731">import</span>&nbsp;<span class="op" id="4081738">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4081741">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4081752">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4081761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4081764">const</span>&nbsp;<span class="ident" id="4081770">wordSize</span>&nbsp;<span class="op" id="4081779">=</span>&nbsp;<span class="builtintype" id="4081781">int</span><span class="op" id="4081784">(</span><span class="ident" id="4081785"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4081791">.</span><span class="ident" id="4081792">Sizeof</span><span class="op" id="4081798">(</span><span class="builtintype" id="4081799">uintptr</span><span class="op" id="4081806">(</span><span class="num" id="4081807">0</span><span class="op" id="4081808">)</span><span class="op" id="4081809">)</span><span class="op" id="4081810">)</span><br>
<span class="lineno"></span><span class="keyword" id="4081812">const</span>&nbsp;<span class="ident" id="4081818">supportsUnaligned</span>&nbsp;<span class="op" id="4081836">=</span>&nbsp;<span class="ident" id="4081838"><a href="/crypto/cipher/xor.go.html#4081741">runtime</a></span><span class="op" id="4081845">.</span><span class="ident" id="4081846">GOARCH</span>&nbsp;<span class="op" id="4081853">==</span>&nbsp;<span class="string" id="4081856">&#34;386&#34;</span>&nbsp;<span class="op" id="4081862">||</span>&nbsp;<span class="ident" id="4081865"><a href="/crypto/cipher/xor.go.html#4081741">runtime</a></span><span class="op" id="4081872">.</span><span class="ident" id="4081873">GOARCH</span>&nbsp;<span class="op" id="4081880">==</span>&nbsp;<span class="string" id="4081883">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4081892">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4081958">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="4081992">func</span>&nbsp;<span class="ident" id="4081997">fastXORBytes</span><span class="op" id="4082009">(</span><span class="ident" id="4082010">dst</span><span class="op" id="4082013">,</span>&nbsp;<span class="ident" id="4082015">a</span><span class="op" id="4082016">,</span>&nbsp;<span class="ident" id="4082018">b</span>&nbsp;<span class="op" id="4082020">[</span><span class="op" id="4082021">]</span><span class="builtintype" id="4082022">byte</span><span class="op" id="4082026">)</span>&nbsp;<span class="builtintype" id="4082028">int</span>&nbsp;<span class="op" id="4082032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082035">n</span>&nbsp;<span class="op" id="4082037">:=</span>&nbsp;<span class="builtinfunc" id="4082040">len</span><span class="op" id="4082043">(</span><span class="ident" id="4082044"><a href="/crypto/cipher/xor.go.html#4082015">a</a></span><span class="op" id="4082045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082048">if</span>&nbsp;<span class="builtinfunc" id="4082051">len</span><span class="op" id="4082054">(</span><span class="ident" id="4082055"><a href="/crypto/cipher/xor.go.html#4082018">b</a></span><span class="op" id="4082056">)</span>&nbsp;<span class="op" id="4082058">&lt;</span>&nbsp;<span class="ident" id="4082060"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span>&nbsp;<span class="op" id="4082062">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082066"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span>&nbsp;<span class="op" id="4082068">=</span>&nbsp;<span class="builtinfunc" id="4082070">len</span><span class="op" id="4082073">(</span><span class="ident" id="4082074"><a href="/crypto/cipher/xor.go.html#4082018">b</a></span><span class="op" id="4082075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082082">w</span>&nbsp;<span class="op" id="4082084">:=</span>&nbsp;<span class="ident" id="4082087"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span>&nbsp;<span class="op" id="4082089">/</span>&nbsp;<span class="ident" id="4082091"><a href="/crypto/cipher/xor.go.html#4081770">wordSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082101">if</span>&nbsp;<span class="ident" id="4082104"><a href="/crypto/cipher/xor.go.html#4082082">w</a></span>&nbsp;<span class="op" id="4082106">&gt;</span>&nbsp;<span class="num" id="4082108">0</span>&nbsp;<span class="op" id="4082110">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082114">dw</span>&nbsp;<span class="op" id="4082117">:=</span>&nbsp;<span class="op" id="4082120">*</span><span class="op" id="4082121">(</span><span class="op" id="4082122">*</span><span class="op" id="4082123">[</span><span class="op" id="4082124">]</span><span class="builtintype" id="4082125">uintptr</span><span class="op" id="4082132">)</span><span class="op" id="4082133">(</span><span class="ident" id="4082134"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4082140">.</span><span class="ident" id="4082141">Pointer</span><span class="op" id="4082148">(</span><span class="op" id="4082149">&amp;</span><span class="ident" id="4082150"><a href="/crypto/cipher/xor.go.html#4082010">dst</a></span><span class="op" id="4082153">)</span><span class="op" id="4082154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082158">aw</span>&nbsp;<span class="op" id="4082161">:=</span>&nbsp;<span class="op" id="4082164">*</span><span class="op" id="4082165">(</span><span class="op" id="4082166">*</span><span class="op" id="4082167">[</span><span class="op" id="4082168">]</span><span class="builtintype" id="4082169">uintptr</span><span class="op" id="4082176">)</span><span class="op" id="4082177">(</span><span class="ident" id="4082178"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4082184">.</span><span class="ident" id="4082185">Pointer</span><span class="op" id="4082192">(</span><span class="op" id="4082193">&amp;</span><span class="ident" id="4082194"><a href="/crypto/cipher/xor.go.html#4082015">a</a></span><span class="op" id="4082195">)</span><span class="op" id="4082196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082200">bw</span>&nbsp;<span class="op" id="4082203">:=</span>&nbsp;<span class="op" id="4082206">*</span><span class="op" id="4082207">(</span><span class="op" id="4082208">*</span><span class="op" id="4082209">[</span><span class="op" id="4082210">]</span><span class="builtintype" id="4082211">uintptr</span><span class="op" id="4082218">)</span><span class="op" id="4082219">(</span><span class="ident" id="4082220"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4082226">.</span><span class="ident" id="4082227">Pointer</span><span class="op" id="4082234">(</span><span class="op" id="4082235">&amp;</span><span class="ident" id="4082236"><a href="/crypto/cipher/xor.go.html#4082018">b</a></span><span class="op" id="4082237">)</span><span class="op" id="4082238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082242">for</span>&nbsp;<span class="ident" id="4082246">i</span>&nbsp;<span class="op" id="4082248">:=</span>&nbsp;<span class="num" id="4082251">0</span><span class="op" id="4082252">;</span>&nbsp;<span class="ident" id="4082254"><a href="/crypto/cipher/xor.go.html#4082246">i</a></span>&nbsp;<span class="op" id="4082256">&lt;</span>&nbsp;<span class="ident" id="4082258"><a href="/crypto/cipher/xor.go.html#4082082">w</a></span><span class="op" id="4082259">;</span>&nbsp;<span class="ident" id="4082261"><a href="/crypto/cipher/xor.go.html#4082246">i</a></span><span class="op" id="4082262">++</span>&nbsp;<span class="op" id="4082265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082270"><a href="/crypto/cipher/xor.go.html#4082114">dw</a></span><span class="op" id="4082272">[</span><span class="ident" id="4082273"><a href="/crypto/cipher/xor.go.html#4082246">i</a></span><span class="op" id="4082274">]</span>&nbsp;<span class="op" id="4082276">=</span>&nbsp;<span class="ident" id="4082278"><a href="/crypto/cipher/xor.go.html#4082158">aw</a></span><span class="op" id="4082280">[</span><span class="ident" id="4082281"><a href="/crypto/cipher/xor.go.html#4082246">i</a></span><span class="op" id="4082282">]</span>&nbsp;<span class="op" id="4082284">^</span>&nbsp;<span class="ident" id="4082286"><a href="/crypto/cipher/xor.go.html#4082200">bw</a></span><span class="op" id="4082288">[</span><span class="ident" id="4082289"><a href="/crypto/cipher/xor.go.html#4082246">i</a></span><span class="op" id="4082290">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082301">for</span>&nbsp;<span class="ident" id="4082305">i</span>&nbsp;<span class="op" id="4082307">:=</span>&nbsp;<span class="op" id="4082310">(</span><span class="ident" id="4082311"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span>&nbsp;<span class="op" id="4082313">-</span>&nbsp;<span class="ident" id="4082315"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span><span class="op" id="4082316">%</span><span class="ident" id="4082317"><a href="/crypto/cipher/xor.go.html#4081770">wordSize</a></span><span class="op" id="4082325">)</span><span class="op" id="4082326">;</span>&nbsp;<span class="ident" id="4082328"><a href="/crypto/cipher/xor.go.html#4082305">i</a></span>&nbsp;<span class="op" id="4082330">&lt;</span>&nbsp;<span class="ident" id="4082332"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span><span class="op" id="4082333">;</span>&nbsp;<span class="ident" id="4082335"><a href="/crypto/cipher/xor.go.html#4082305">i</a></span><span class="op" id="4082336">++</span>&nbsp;<span class="op" id="4082339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082343"><a href="/crypto/cipher/xor.go.html#4082010">dst</a></span><span class="op" id="4082346">[</span><span class="ident" id="4082347"><a href="/crypto/cipher/xor.go.html#4082305">i</a></span><span class="op" id="4082348">]</span>&nbsp;<span class="op" id="4082350">=</span>&nbsp;<span class="ident" id="4082352"><a href="/crypto/cipher/xor.go.html#4082015">a</a></span><span class="op" id="4082353">[</span><span class="ident" id="4082354"><a href="/crypto/cipher/xor.go.html#4082305">i</a></span><span class="op" id="4082355">]</span>&nbsp;<span class="op" id="4082357">^</span>&nbsp;<span class="ident" id="4082359"><a href="/crypto/cipher/xor.go.html#4082018">b</a></span><span class="op" id="4082360">[</span><span class="ident" id="4082361"><a href="/crypto/cipher/xor.go.html#4082305">i</a></span><span class="op" id="4082362">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082369">return</span>&nbsp;<span class="ident" id="4082376"><a href="/crypto/cipher/xor.go.html#4082035">n</a></span><br>
<span class="lineno"></span><span class="op" id="4082378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="4082381">func</span>&nbsp;<span class="ident" id="4082386">safeXORBytes</span><span class="op" id="4082398">(</span><span class="ident" id="4082399">dst</span><span class="op" id="4082402">,</span>&nbsp;<span class="ident" id="4082404">a</span><span class="op" id="4082405">,</span>&nbsp;<span class="ident" id="4082407">b</span>&nbsp;<span class="op" id="4082409">[</span><span class="op" id="4082410">]</span><span class="builtintype" id="4082411">byte</span><span class="op" id="4082415">)</span>&nbsp;<span class="builtintype" id="4082417">int</span>&nbsp;<span class="op" id="4082421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082424">n</span>&nbsp;<span class="op" id="4082426">:=</span>&nbsp;<span class="builtinfunc" id="4082429">len</span><span class="op" id="4082432">(</span><span class="ident" id="4082433"><a href="/crypto/cipher/xor.go.html#4082404">a</a></span><span class="op" id="4082434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082437">if</span>&nbsp;<span class="builtinfunc" id="4082440">len</span><span class="op" id="4082443">(</span><span class="ident" id="4082444"><a href="/crypto/cipher/xor.go.html#4082407">b</a></span><span class="op" id="4082445">)</span>&nbsp;<span class="op" id="4082447">&lt;</span>&nbsp;<span class="ident" id="4082449"><a href="/crypto/cipher/xor.go.html#4082424">n</a></span>&nbsp;<span class="op" id="4082451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082455"><a href="/crypto/cipher/xor.go.html#4082424">n</a></span>&nbsp;<span class="op" id="4082457">=</span>&nbsp;<span class="builtinfunc" id="4082459">len</span><span class="op" id="4082462">(</span><span class="ident" id="4082463"><a href="/crypto/cipher/xor.go.html#4082407">b</a></span><span class="op" id="4082464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082467">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082470">for</span>&nbsp;<span class="ident" id="4082474">i</span>&nbsp;<span class="op" id="4082476">:=</span>&nbsp;<span class="num" id="4082479">0</span><span class="op" id="4082480">;</span>&nbsp;<span class="ident" id="4082482"><a href="/crypto/cipher/xor.go.html#4082474">i</a></span>&nbsp;<span class="op" id="4082484">&lt;</span>&nbsp;<span class="ident" id="4082486"><a href="/crypto/cipher/xor.go.html#4082424">n</a></span><span class="op" id="4082487">;</span>&nbsp;<span class="ident" id="4082489"><a href="/crypto/cipher/xor.go.html#4082474">i</a></span><span class="op" id="4082490">++</span>&nbsp;<span class="op" id="4082493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4082497"><a href="/crypto/cipher/xor.go.html#4082399">dst</a></span><span class="op" id="4082500">[</span><span class="ident" id="4082501"><a href="/crypto/cipher/xor.go.html#4082474">i</a></span><span class="op" id="4082502">]</span>&nbsp;<span class="op" id="4082504">=</span>&nbsp;<span class="ident" id="4082506"><a href="/crypto/cipher/xor.go.html#4082404">a</a></span><span class="op" id="4082507">[</span><span class="ident" id="4082508"><a href="/crypto/cipher/xor.go.html#4082474">i</a></span><span class="op" id="4082509">]</span>&nbsp;<span class="op" id="4082511">^</span>&nbsp;<span class="ident" id="4082513"><a href="/crypto/cipher/xor.go.html#4082407">b</a></span><span class="op" id="4082514">[</span><span class="ident" id="4082515"><a href="/crypto/cipher/xor.go.html#4082474">i</a></span><span class="op" id="4082516">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082522">return</span>&nbsp;<span class="ident" id="4082529"><a href="/crypto/cipher/xor.go.html#4082424">n</a></span><br>
<span class="lineno"></span><span class="op" id="4082531">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4082534">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="4082615">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="4082660">func</span>&nbsp;<span class="ident" id="4082665">xorBytes</span><span class="op" id="4082673">(</span><span class="ident" id="4082674">dst</span><span class="op" id="4082677">,</span>&nbsp;<span class="ident" id="4082679">a</span><span class="op" id="4082680">,</span>&nbsp;<span class="ident" id="4082682">b</span>&nbsp;<span class="op" id="4082684">[</span><span class="op" id="4082685">]</span><span class="builtintype" id="4082686">byte</span><span class="op" id="4082690">)</span>&nbsp;<span class="builtintype" id="4082692">int</span>&nbsp;<span class="op" id="4082696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082699">if</span>&nbsp;<span class="ident" id="4082702"><a href="/crypto/cipher/xor.go.html#4081818">supportsUnaligned</a></span>&nbsp;<span class="op" id="4082720">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082724">return</span>&nbsp;<span class="ident" id="4082731"><a href="/crypto/cipher/xor.go.html#4081997">fastXORBytes</a></span><span class="op" id="4082743">(</span><span class="ident" id="4082744"><a href="/crypto/cipher/xor.go.html#4082674">dst</a></span><span class="op" id="4082747">,</span>&nbsp;<span class="ident" id="4082749"><a href="/crypto/cipher/xor.go.html#4082679">a</a></span><span class="op" id="4082750">,</span>&nbsp;<span class="ident" id="4082752"><a href="/crypto/cipher/xor.go.html#4082682">b</a></span><span class="op" id="4082753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4082756">}</span>&nbsp;<span class="keyword" id="4082758">else</span>&nbsp;<span class="op" id="4082763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4082767">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4082823">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4082877">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4082932">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4082977">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4082995">return</span>&nbsp;<span class="ident" id="4083002"><a href="/crypto/cipher/xor.go.html#4082386">safeXORBytes</a></span><span class="op" id="4083014">(</span><span class="ident" id="4083015"><a href="/crypto/cipher/xor.go.html#4082674">dst</a></span><span class="op" id="4083018">,</span>&nbsp;<span class="ident" id="4083020"><a href="/crypto/cipher/xor.go.html#4082679">a</a></span><span class="op" id="4083021">,</span>&nbsp;<span class="ident" id="4083023"><a href="/crypto/cipher/xor.go.html#4082682">b</a></span><span class="op" id="4083024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4083027">}</span><br>
<span class="lineno"></span><span class="op" id="4083029">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4083032">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="4083108">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="4083160">func</span>&nbsp;<span class="ident" id="4083165">fastXORWords</span><span class="op" id="4083177">(</span><span class="ident" id="4083178">dst</span><span class="op" id="4083181">,</span>&nbsp;<span class="ident" id="4083183">a</span><span class="op" id="4083184">,</span>&nbsp;<span class="ident" id="4083186">b</span>&nbsp;<span class="op" id="4083188">[</span><span class="op" id="4083189">]</span><span class="builtintype" id="4083190">byte</span><span class="op" id="4083194">)</span>&nbsp;<span class="op" id="4083196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083199">dw</span>&nbsp;<span class="op" id="4083202">:=</span>&nbsp;<span class="op" id="4083205">*</span><span class="op" id="4083206">(</span><span class="op" id="4083207">*</span><span class="op" id="4083208">[</span><span class="op" id="4083209">]</span><span class="builtintype" id="4083210">uintptr</span><span class="op" id="4083217">)</span><span class="op" id="4083218">(</span><span class="ident" id="4083219"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4083225">.</span><span class="ident" id="4083226">Pointer</span><span class="op" id="4083233">(</span><span class="op" id="4083234">&amp;</span><span class="ident" id="4083235"><a href="/crypto/cipher/xor.go.html#4083178">dst</a></span><span class="op" id="4083238">)</span><span class="op" id="4083239">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083242">aw</span>&nbsp;<span class="op" id="4083245">:=</span>&nbsp;<span class="op" id="4083248">*</span><span class="op" id="4083249">(</span><span class="op" id="4083250">*</span><span class="op" id="4083251">[</span><span class="op" id="4083252">]</span><span class="builtintype" id="4083253">uintptr</span><span class="op" id="4083260">)</span><span class="op" id="4083261">(</span><span class="ident" id="4083262"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4083268">.</span><span class="ident" id="4083269">Pointer</span><span class="op" id="4083276">(</span><span class="op" id="4083277">&amp;</span><span class="ident" id="4083278"><a href="/crypto/cipher/xor.go.html#4083183">a</a></span><span class="op" id="4083279">)</span><span class="op" id="4083280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083283">bw</span>&nbsp;<span class="op" id="4083286">:=</span>&nbsp;<span class="op" id="4083289">*</span><span class="op" id="4083290">(</span><span class="op" id="4083291">*</span><span class="op" id="4083292">[</span><span class="op" id="4083293">]</span><span class="builtintype" id="4083294">uintptr</span><span class="op" id="4083301">)</span><span class="op" id="4083302">(</span><span class="ident" id="4083303"><a href="/crypto/cipher/xor.go.html#4081752">unsafe</a></span><span class="op" id="4083309">.</span><span class="ident" id="4083310">Pointer</span><span class="op" id="4083317">(</span><span class="op" id="4083318">&amp;</span><span class="ident" id="4083319"><a href="/crypto/cipher/xor.go.html#4083186">b</a></span><span class="op" id="4083320">)</span><span class="op" id="4083321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083324">n</span>&nbsp;<span class="op" id="4083326">:=</span>&nbsp;<span class="builtinfunc" id="4083329">len</span><span class="op" id="4083332">(</span><span class="ident" id="4083333"><a href="/crypto/cipher/xor.go.html#4083186">b</a></span><span class="op" id="4083334">)</span>&nbsp;<span class="op" id="4083336">/</span>&nbsp;<span class="ident" id="4083338"><a href="/crypto/cipher/xor.go.html#4081770">wordSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4083348">for</span>&nbsp;<span class="ident" id="4083352">i</span>&nbsp;<span class="op" id="4083354">:=</span>&nbsp;<span class="num" id="4083357">0</span><span class="op" id="4083358">;</span>&nbsp;<span class="ident" id="4083360"><a href="/crypto/cipher/xor.go.html#4083352">i</a></span>&nbsp;<span class="op" id="4083362">&lt;</span>&nbsp;<span class="ident" id="4083364"><a href="/crypto/cipher/xor.go.html#4083324">n</a></span><span class="op" id="4083365">;</span>&nbsp;<span class="ident" id="4083367"><a href="/crypto/cipher/xor.go.html#4083352">i</a></span><span class="op" id="4083368">++</span>&nbsp;<span class="op" id="4083371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083375"><a href="/crypto/cipher/xor.go.html#4083199">dw</a></span><span class="op" id="4083377">[</span><span class="ident" id="4083378"><a href="/crypto/cipher/xor.go.html#4083352">i</a></span><span class="op" id="4083379">]</span>&nbsp;<span class="op" id="4083381">=</span>&nbsp;<span class="ident" id="4083383"><a href="/crypto/cipher/xor.go.html#4083242">aw</a></span><span class="op" id="4083385">[</span><span class="ident" id="4083386"><a href="/crypto/cipher/xor.go.html#4083352">i</a></span><span class="op" id="4083387">]</span>&nbsp;<span class="op" id="4083389">^</span>&nbsp;<span class="ident" id="4083391"><a href="/crypto/cipher/xor.go.html#4083283">bw</a></span><span class="op" id="4083393">[</span><span class="ident" id="4083394"><a href="/crypto/cipher/xor.go.html#4083352">i</a></span><span class="op" id="4083395">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4083398">}</span><br>
<span class="lineno"></span><span class="op" id="4083400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4083403">func</span>&nbsp;<span class="ident" id="4083408">xorWords</span><span class="op" id="4083416">(</span><span class="ident" id="4083417">dst</span><span class="op" id="4083420">,</span>&nbsp;<span class="ident" id="4083422">a</span><span class="op" id="4083423">,</span>&nbsp;<span class="ident" id="4083425">b</span>&nbsp;<span class="op" id="4083427">[</span><span class="op" id="4083428">]</span><span class="builtintype" id="4083429">byte</span><span class="op" id="4083433">)</span>&nbsp;<span class="op" id="4083435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4083438">if</span>&nbsp;<span class="ident" id="4083441"><a href="/crypto/cipher/xor.go.html#4081818">supportsUnaligned</a></span>&nbsp;<span class="op" id="4083459">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083463"><a href="/crypto/cipher/xor.go.html#4083165">fastXORWords</a></span><span class="op" id="4083475">(</span><span class="ident" id="4083476"><a href="/crypto/cipher/xor.go.html#4083417">dst</a></span><span class="op" id="4083479">,</span>&nbsp;<span class="ident" id="4083481"><a href="/crypto/cipher/xor.go.html#4083422">a</a></span><span class="op" id="4083482">,</span>&nbsp;<span class="ident" id="4083484"><a href="/crypto/cipher/xor.go.html#4083425">b</a></span><span class="op" id="4083485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4083488">}</span>&nbsp;<span class="keyword" id="4083490">else</span>&nbsp;<span class="op" id="4083495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4083499"><a href="/crypto/cipher/xor.go.html#4082386">safeXORBytes</a></span><span class="op" id="4083511">(</span><span class="ident" id="4083512"><a href="/crypto/cipher/xor.go.html#4083417">dst</a></span><span class="op" id="4083515">,</span>&nbsp;<span class="ident" id="4083517"><a href="/crypto/cipher/xor.go.html#4083422">a</a></span><span class="op" id="4083518">,</span>&nbsp;<span class="ident" id="4083520"><a href="/crypto/cipher/xor.go.html#4083425">b</a></span><span class="op" id="4083521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4083524">}</span><br>
<span class="lineno"></span><span class="op" id="4083526">}</span>
</div>
</body>
</html>
