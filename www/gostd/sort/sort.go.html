<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html" class="current">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2801249">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2801304">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2801358">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2801409">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2801481">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2801497">package</span>&nbsp;<span class="ident" id="2801505">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2801511">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2801583">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2801656">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2801721">type</span>&nbsp;<span class="ident" id="2801726">Interface</span>&nbsp;<span class="keyword" id="2801736">interface</span>&nbsp;<span class="op" id="2801746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2801749">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2801802">Len</span><span class="op" id="2801805">(</span><span class="op" id="2801806">)</span>&nbsp;<span class="builtintype" id="2801808">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2801813">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2801855">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2801912">Less</span><span class="op" id="2801916">(</span><span class="ident" id="2801917">i</span><span class="op" id="2801918">,</span>&nbsp;<span class="ident" id="2801920">j</span>&nbsp;<span class="builtintype" id="2801922">int</span><span class="op" id="2801925">)</span>&nbsp;<span class="builtintype" id="2801927">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2801933">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2801983">Swap</span><span class="op" id="2801987">(</span><span class="ident" id="2801988">i</span><span class="op" id="2801989">,</span>&nbsp;<span class="ident" id="2801991">j</span>&nbsp;<span class="builtintype" id="2801993">int</span><span class="op" id="2801996">)</span><br>
<span class="lineno">20</span><span class="op" id="2801998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2802001">func</span>&nbsp;<span class="ident" id="2802006">min</span><span class="op" id="2802009">(</span><span class="ident" id="2802010">a</span><span class="op" id="2802011">,</span>&nbsp;<span class="ident" id="2802013">b</span>&nbsp;<span class="builtintype" id="2802015">int</span><span class="op" id="2802018">)</span>&nbsp;<span class="builtintype" id="2802020">int</span>&nbsp;<span class="op" id="2802024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802027">if</span>&nbsp;<span class="ident" id="2802030">a</span>&nbsp;<span class="op" id="2802032">&lt;</span>&nbsp;<span class="ident" id="2802034">b</span>&nbsp;<span class="op" id="2802036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802040">return</span>&nbsp;<span class="ident" id="2802047">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802053">return</span>&nbsp;<span class="ident" id="2802060">b</span><br>
<span class="lineno"></span><span class="op" id="2802062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2802065">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2802083">func</span>&nbsp;<span class="ident" id="2802088">insertionSort</span><span class="op" id="2802101">(</span><span class="ident" id="2802102">data</span>&nbsp;<span class="ident" id="2802107">Interface</span><span class="op" id="2802116">,</span>&nbsp;<span class="ident" id="2802118">a</span><span class="op" id="2802119">,</span>&nbsp;<span class="ident" id="2802121">b</span>&nbsp;<span class="builtintype" id="2802123">int</span><span class="op" id="2802126">)</span>&nbsp;<span class="op" id="2802128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802131">for</span>&nbsp;<span class="ident" id="2802135">i</span>&nbsp;<span class="op" id="2802137">:=</span>&nbsp;<span class="ident" id="2802140">a</span>&nbsp;<span class="op" id="2802142">+</span>&nbsp;<span class="num" id="2802144">1</span><span class="op" id="2802145">;</span>&nbsp;<span class="ident" id="2802147">i</span>&nbsp;<span class="op" id="2802149">&lt;</span>&nbsp;<span class="ident" id="2802151">b</span><span class="op" id="2802152">;</span>&nbsp;<span class="ident" id="2802154">i</span><span class="op" id="2802155">++</span>&nbsp;<span class="op" id="2802158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802162">for</span>&nbsp;<span class="ident" id="2802166">j</span>&nbsp;<span class="op" id="2802168">:=</span>&nbsp;<span class="ident" id="2802171">i</span><span class="op" id="2802172">;</span>&nbsp;<span class="ident" id="2802174">j</span>&nbsp;<span class="op" id="2802176">&gt;</span>&nbsp;<span class="ident" id="2802178">a</span>&nbsp;<span class="op" id="2802180">&amp;&amp;</span>&nbsp;<span class="ident" id="2802183">data</span><span class="op" id="2802187">.</span><span class="ident" id="2802188">Less</span><span class="op" id="2802192">(</span><span class="ident" id="2802193">j</span><span class="op" id="2802194">,</span>&nbsp;<span class="ident" id="2802196">j</span><span class="op" id="2802197">-</span><span class="num" id="2802198">1</span><span class="op" id="2802199">)</span><span class="op" id="2802200">;</span>&nbsp;<span class="ident" id="2802202">j</span><span class="op" id="2802203">--</span>&nbsp;<span class="op" id="2802206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802211">data</span><span class="op" id="2802215">.</span><span class="ident" id="2802216">Swap</span><span class="op" id="2802220">(</span><span class="ident" id="2802221">j</span><span class="op" id="2802222">,</span>&nbsp;<span class="ident" id="2802224">j</span><span class="op" id="2802225">-</span><span class="num" id="2802226">1</span><span class="op" id="2802227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802231">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802234">}</span><br>
<span class="lineno"></span><span class="op" id="2802236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2802239">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2802297">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2802367">func</span>&nbsp;<span class="ident" id="2802372">siftDown</span><span class="op" id="2802380">(</span><span class="ident" id="2802381">data</span>&nbsp;<span class="ident" id="2802386">Interface</span><span class="op" id="2802395">,</span>&nbsp;<span class="ident" id="2802397">lo</span><span class="op" id="2802399">,</span>&nbsp;<span class="ident" id="2802401">hi</span><span class="op" id="2802403">,</span>&nbsp;<span class="ident" id="2802405">first</span>&nbsp;<span class="builtintype" id="2802411">int</span><span class="op" id="2802414">)</span>&nbsp;<span class="op" id="2802416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802419">root</span>&nbsp;<span class="op" id="2802424">:=</span>&nbsp;<span class="ident" id="2802427">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802431">for</span>&nbsp;<span class="op" id="2802435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802439">child</span>&nbsp;<span class="op" id="2802445">:=</span>&nbsp;<span class="num" id="2802448">2</span><span class="op" id="2802449">*</span><span class="ident" id="2802450">root</span>&nbsp;<span class="op" id="2802455">+</span>&nbsp;<span class="num" id="2802457">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802461">if</span>&nbsp;<span class="ident" id="2802464">child</span>&nbsp;<span class="op" id="2802470">&gt;=</span>&nbsp;<span class="ident" id="2802473">hi</span>&nbsp;<span class="op" id="2802476">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802481">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802493">if</span>&nbsp;<span class="ident" id="2802496">child</span><span class="op" id="2802501">+</span><span class="num" id="2802502">1</span>&nbsp;<span class="op" id="2802504">&lt;</span>&nbsp;<span class="ident" id="2802506">hi</span>&nbsp;<span class="op" id="2802509">&amp;&amp;</span>&nbsp;<span class="ident" id="2802512">data</span><span class="op" id="2802516">.</span><span class="ident" id="2802517">Less</span><span class="op" id="2802521">(</span><span class="ident" id="2802522">first</span><span class="op" id="2802527">+</span><span class="ident" id="2802528">child</span><span class="op" id="2802533">,</span>&nbsp;<span class="ident" id="2802535">first</span><span class="op" id="2802540">+</span><span class="ident" id="2802541">child</span><span class="op" id="2802546">+</span><span class="num" id="2802547">1</span><span class="op" id="2802548">)</span>&nbsp;<span class="op" id="2802550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802555">child</span><span class="op" id="2802560">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802565">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802569">if</span>&nbsp;<span class="op" id="2802572">!</span><span class="ident" id="2802573">data</span><span class="op" id="2802577">.</span><span class="ident" id="2802578">Less</span><span class="op" id="2802582">(</span><span class="ident" id="2802583">first</span><span class="op" id="2802588">+</span><span class="ident" id="2802589">root</span><span class="op" id="2802593">,</span>&nbsp;<span class="ident" id="2802595">first</span><span class="op" id="2802600">+</span><span class="ident" id="2802601">child</span><span class="op" id="2802606">)</span>&nbsp;<span class="op" id="2802608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802613">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802626">data</span><span class="op" id="2802630">.</span><span class="ident" id="2802631">Swap</span><span class="op" id="2802635">(</span><span class="ident" id="2802636">first</span><span class="op" id="2802641">+</span><span class="ident" id="2802642">root</span><span class="op" id="2802646">,</span>&nbsp;<span class="ident" id="2802648">first</span><span class="op" id="2802653">+</span><span class="ident" id="2802654">child</span><span class="op" id="2802659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802663">root</span>&nbsp;<span class="op" id="2802668">=</span>&nbsp;<span class="ident" id="2802670">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802677">}</span><br>
<span class="lineno"></span><span class="op" id="2802679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2802682">func</span>&nbsp;<span class="ident" id="2802687">heapSort</span><span class="op" id="2802695">(</span><span class="ident" id="2802696">data</span>&nbsp;<span class="ident" id="2802701">Interface</span><span class="op" id="2802710">,</span>&nbsp;<span class="ident" id="2802712">a</span><span class="op" id="2802713">,</span>&nbsp;<span class="ident" id="2802715">b</span>&nbsp;<span class="builtintype" id="2802717">int</span><span class="op" id="2802720">)</span>&nbsp;<span class="op" id="2802722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802725">first</span>&nbsp;<span class="op" id="2802731">:=</span>&nbsp;<span class="ident" id="2802734">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802737">lo</span>&nbsp;<span class="op" id="2802740">:=</span>&nbsp;<span class="num" id="2802743">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802746">hi</span>&nbsp;<span class="op" id="2802749">:=</span>&nbsp;<span class="ident" id="2802752">b</span>&nbsp;<span class="op" id="2802754">-</span>&nbsp;<span class="ident" id="2802756">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2802760">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802805">for</span>&nbsp;<span class="ident" id="2802809">i</span>&nbsp;<span class="op" id="2802811">:=</span>&nbsp;<span class="op" id="2802814">(</span><span class="ident" id="2802815">hi</span>&nbsp;<span class="op" id="2802818">-</span>&nbsp;<span class="num" id="2802820">1</span><span class="op" id="2802821">)</span>&nbsp;<span class="op" id="2802823">/</span>&nbsp;<span class="num" id="2802825">2</span><span class="op" id="2802826">;</span>&nbsp;<span class="ident" id="2802828">i</span>&nbsp;<span class="op" id="2802830">&gt;=</span>&nbsp;<span class="num" id="2802833">0</span><span class="op" id="2802834">;</span>&nbsp;<span class="ident" id="2802836">i</span><span class="op" id="2802837">--</span>&nbsp;<span class="op" id="2802840">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802844">siftDown</span><span class="op" id="2802852">(</span><span class="ident" id="2802853">data</span><span class="op" id="2802857">,</span>&nbsp;<span class="ident" id="2802859">i</span><span class="op" id="2802860">,</span>&nbsp;<span class="ident" id="2802862">hi</span><span class="op" id="2802864">,</span>&nbsp;<span class="ident" id="2802866">first</span><span class="op" id="2802871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2802874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2802878">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2802929">for</span>&nbsp;<span class="ident" id="2802933">i</span>&nbsp;<span class="op" id="2802935">:=</span>&nbsp;<span class="ident" id="2802938">hi</span>&nbsp;<span class="op" id="2802941">-</span>&nbsp;<span class="num" id="2802943">1</span><span class="op" id="2802944">;</span>&nbsp;<span class="ident" id="2802946">i</span>&nbsp;<span class="op" id="2802948">&gt;=</span>&nbsp;<span class="num" id="2802951">0</span><span class="op" id="2802952">;</span>&nbsp;<span class="ident" id="2802954">i</span><span class="op" id="2802955">--</span>&nbsp;<span class="op" id="2802958">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802962">data</span><span class="op" id="2802966">.</span><span class="ident" id="2802967">Swap</span><span class="op" id="2802971">(</span><span class="ident" id="2802972">first</span><span class="op" id="2802977">,</span>&nbsp;<span class="ident" id="2802979">first</span><span class="op" id="2802984">+</span><span class="ident" id="2802985">i</span><span class="op" id="2802986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2802990">siftDown</span><span class="op" id="2802998">(</span><span class="ident" id="2802999">data</span><span class="op" id="2803003">,</span>&nbsp;<span class="ident" id="2803005">lo</span><span class="op" id="2803007">,</span>&nbsp;<span class="ident" id="2803009">i</span><span class="op" id="2803010">,</span>&nbsp;<span class="ident" id="2803012">first</span><span class="op" id="2803017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803020">}</span><br>
<span class="lineno"></span><span class="op" id="2803022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2803025">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2803070">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2803127">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2803221">func</span>&nbsp;<span class="ident" id="2803226">medianOfThree</span><span class="op" id="2803239">(</span><span class="ident" id="2803240">data</span>&nbsp;<span class="ident" id="2803245">Interface</span><span class="op" id="2803254">,</span>&nbsp;<span class="ident" id="2803256">a</span><span class="op" id="2803257">,</span>&nbsp;<span class="ident" id="2803259">b</span><span class="op" id="2803260">,</span>&nbsp;<span class="ident" id="2803262">c</span>&nbsp;<span class="builtintype" id="2803264">int</span><span class="op" id="2803267">)</span>&nbsp;<span class="op" id="2803269">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803272">m0</span>&nbsp;<span class="op" id="2803275">:=</span>&nbsp;<span class="ident" id="2803278">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803281">m1</span>&nbsp;<span class="op" id="2803284">:=</span>&nbsp;<span class="ident" id="2803287">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803290">m2</span>&nbsp;<span class="op" id="2803293">:=</span>&nbsp;<span class="ident" id="2803296">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2803299">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2803329">if</span>&nbsp;<span class="ident" id="2803332">data</span><span class="op" id="2803336">.</span><span class="ident" id="2803337">Less</span><span class="op" id="2803341">(</span><span class="ident" id="2803342">m1</span><span class="op" id="2803344">,</span>&nbsp;<span class="ident" id="2803346">m0</span><span class="op" id="2803348">)</span>&nbsp;<span class="op" id="2803350">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803354">data</span><span class="op" id="2803358">.</span><span class="ident" id="2803359">Swap</span><span class="op" id="2803363">(</span><span class="ident" id="2803364">m1</span><span class="op" id="2803366">,</span>&nbsp;<span class="ident" id="2803368">m0</span><span class="op" id="2803370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2803376">if</span>&nbsp;<span class="ident" id="2803379">data</span><span class="op" id="2803383">.</span><span class="ident" id="2803384">Less</span><span class="op" id="2803388">(</span><span class="ident" id="2803389">m2</span><span class="op" id="2803391">,</span>&nbsp;<span class="ident" id="2803393">m1</span><span class="op" id="2803395">)</span>&nbsp;<span class="op" id="2803397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803401">data</span><span class="op" id="2803405">.</span><span class="ident" id="2803406">Swap</span><span class="op" id="2803410">(</span><span class="ident" id="2803411">m2</span><span class="op" id="2803413">,</span>&nbsp;<span class="ident" id="2803415">m1</span><span class="op" id="2803417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803420">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2803423">if</span>&nbsp;<span class="ident" id="2803426">data</span><span class="op" id="2803430">.</span><span class="ident" id="2803431">Less</span><span class="op" id="2803435">(</span><span class="ident" id="2803436">m1</span><span class="op" id="2803438">,</span>&nbsp;<span class="ident" id="2803440">m0</span><span class="op" id="2803442">)</span>&nbsp;<span class="op" id="2803444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803448">data</span><span class="op" id="2803452">.</span><span class="ident" id="2803453">Swap</span><span class="op" id="2803457">(</span><span class="ident" id="2803458">m1</span><span class="op" id="2803460">,</span>&nbsp;<span class="ident" id="2803462">m0</span><span class="op" id="2803464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2803470">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2803510">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2803513">func</span>&nbsp;<span class="ident" id="2803518">swapRange</span><span class="op" id="2803527">(</span><span class="ident" id="2803528">data</span>&nbsp;<span class="ident" id="2803533">Interface</span><span class="op" id="2803542">,</span>&nbsp;<span class="ident" id="2803544">a</span><span class="op" id="2803545">,</span>&nbsp;<span class="ident" id="2803547">b</span><span class="op" id="2803548">,</span>&nbsp;<span class="ident" id="2803550">n</span>&nbsp;<span class="builtintype" id="2803552">int</span><span class="op" id="2803555">)</span>&nbsp;<span class="op" id="2803557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2803560">for</span>&nbsp;<span class="ident" id="2803564">i</span>&nbsp;<span class="op" id="2803566">:=</span>&nbsp;<span class="num" id="2803569">0</span><span class="op" id="2803570">;</span>&nbsp;<span class="ident" id="2803572">i</span>&nbsp;<span class="op" id="2803574">&lt;</span>&nbsp;<span class="ident" id="2803576">n</span><span class="op" id="2803577">;</span>&nbsp;<span class="ident" id="2803579">i</span><span class="op" id="2803580">++</span>&nbsp;<span class="op" id="2803583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803587">data</span><span class="op" id="2803591">.</span><span class="ident" id="2803592">Swap</span><span class="op" id="2803596">(</span><span class="ident" id="2803597">a</span><span class="op" id="2803598">+</span><span class="ident" id="2803599">i</span><span class="op" id="2803600">,</span>&nbsp;<span class="ident" id="2803602">b</span><span class="op" id="2803603">+</span><span class="ident" id="2803604">i</span><span class="op" id="2803605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803608">}</span><br>
<span class="lineno">100</span><span class="op" id="2803610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2803613">func</span>&nbsp;<span class="ident" id="2803618">doPivot</span><span class="op" id="2803625">(</span><span class="ident" id="2803626">data</span>&nbsp;<span class="ident" id="2803631">Interface</span><span class="op" id="2803640">,</span>&nbsp;<span class="ident" id="2803642">lo</span><span class="op" id="2803644">,</span>&nbsp;<span class="ident" id="2803646">hi</span>&nbsp;<span class="builtintype" id="2803649">int</span><span class="op" id="2803652">)</span>&nbsp;<span class="op" id="2803654">(</span><span class="ident" id="2803655">midlo</span><span class="op" id="2803660">,</span>&nbsp;<span class="ident" id="2803662">midhi</span>&nbsp;<span class="builtintype" id="2803668">int</span><span class="op" id="2803671">)</span>&nbsp;<span class="op" id="2803673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803676">m</span>&nbsp;<span class="op" id="2803678">:=</span>&nbsp;<span class="ident" id="2803681">lo</span>&nbsp;<span class="op" id="2803684">+</span>&nbsp;<span class="op" id="2803686">(</span><span class="ident" id="2803687">hi</span><span class="op" id="2803689">-</span><span class="ident" id="2803690">lo</span><span class="op" id="2803692">)</span><span class="op" id="2803693">/</span><span class="num" id="2803694">2</span>&nbsp;<span class="comment" id="2803696">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2803745">if</span>&nbsp;<span class="ident" id="2803748">hi</span><span class="op" id="2803750">-</span><span class="ident" id="2803751">lo</span>&nbsp;<span class="op" id="2803754">&gt;</span>&nbsp;<span class="num" id="2803756">40</span>&nbsp;<span class="op" id="2803759">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2803763">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803823">s</span>&nbsp;<span class="op" id="2803825">:=</span>&nbsp;<span class="op" id="2803828">(</span><span class="ident" id="2803829">hi</span>&nbsp;<span class="op" id="2803832">-</span>&nbsp;<span class="ident" id="2803834">lo</span><span class="op" id="2803836">)</span>&nbsp;<span class="op" id="2803838">/</span>&nbsp;<span class="num" id="2803840">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803844">medianOfThree</span><span class="op" id="2803857">(</span><span class="ident" id="2803858">data</span><span class="op" id="2803862">,</span>&nbsp;<span class="ident" id="2803864">lo</span><span class="op" id="2803866">,</span>&nbsp;<span class="ident" id="2803868">lo</span><span class="op" id="2803870">+</span><span class="ident" id="2803871">s</span><span class="op" id="2803872">,</span>&nbsp;<span class="ident" id="2803874">lo</span><span class="op" id="2803876">+</span><span class="num" id="2803877">2</span><span class="op" id="2803878">*</span><span class="ident" id="2803879">s</span><span class="op" id="2803880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803884">medianOfThree</span><span class="op" id="2803897">(</span><span class="ident" id="2803898">data</span><span class="op" id="2803902">,</span>&nbsp;<span class="ident" id="2803904">m</span><span class="op" id="2803905">,</span>&nbsp;<span class="ident" id="2803907">m</span><span class="op" id="2803908">-</span><span class="ident" id="2803909">s</span><span class="op" id="2803910">,</span>&nbsp;<span class="ident" id="2803912">m</span><span class="op" id="2803913">+</span><span class="ident" id="2803914">s</span><span class="op" id="2803915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803919">medianOfThree</span><span class="op" id="2803932">(</span><span class="ident" id="2803933">data</span><span class="op" id="2803937">,</span>&nbsp;<span class="ident" id="2803939">hi</span><span class="op" id="2803941">-</span><span class="num" id="2803942">1</span><span class="op" id="2803943">,</span>&nbsp;<span class="ident" id="2803945">hi</span><span class="op" id="2803947">-</span><span class="num" id="2803948">1</span><span class="op" id="2803949">-</span><span class="ident" id="2803950">s</span><span class="op" id="2803951">,</span>&nbsp;<span class="ident" id="2803953">hi</span><span class="op" id="2803955">-</span><span class="num" id="2803956">1</span><span class="op" id="2803957">-</span><span class="num" id="2803958">2</span><span class="op" id="2803959">*</span><span class="ident" id="2803960">s</span><span class="op" id="2803961">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2803964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2803967">medianOfThree</span><span class="op" id="2803980">(</span><span class="ident" id="2803981">data</span><span class="op" id="2803985">,</span>&nbsp;<span class="ident" id="2803987">lo</span><span class="op" id="2803989">,</span>&nbsp;<span class="ident" id="2803991">m</span><span class="op" id="2803992">,</span>&nbsp;<span class="ident" id="2803994">hi</span><span class="op" id="2803996">-</span><span class="num" id="2803997">1</span><span class="op" id="2803998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804002">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804022">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804067">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804097">//&nbsp;&nbsp;&nbsp;&nbsp;data[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804126">//&nbsp;&nbsp;&nbsp;&nbsp;data[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804161">//&nbsp;&nbsp;&nbsp;&nbsp;data[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804190">//&nbsp;&nbsp;&nbsp;&nbsp;data[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804220">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804224">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804276">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804310">pivot</span>&nbsp;<span class="op" id="2804316">:=</span>&nbsp;<span class="ident" id="2804319">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804323">a</span><span class="op" id="2804324">,</span>&nbsp;<span class="ident" id="2804326">b</span><span class="op" id="2804327">,</span>&nbsp;<span class="ident" id="2804329">c</span><span class="op" id="2804330">,</span>&nbsp;<span class="ident" id="2804332">d</span>&nbsp;<span class="op" id="2804334">:=</span>&nbsp;<span class="ident" id="2804337">lo</span><span class="op" id="2804339">+</span><span class="num" id="2804340">1</span><span class="op" id="2804341">,</span>&nbsp;<span class="ident" id="2804343">lo</span><span class="op" id="2804345">+</span><span class="num" id="2804346">1</span><span class="op" id="2804347">,</span>&nbsp;<span class="ident" id="2804349">hi</span><span class="op" id="2804351">,</span>&nbsp;<span class="ident" id="2804353">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804357">for</span>&nbsp;<span class="op" id="2804361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804365">for</span>&nbsp;<span class="ident" id="2804369">b</span>&nbsp;<span class="op" id="2804371">&lt;</span>&nbsp;<span class="ident" id="2804373">c</span>&nbsp;<span class="op" id="2804375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804380">if</span>&nbsp;<span class="ident" id="2804383">data</span><span class="op" id="2804387">.</span><span class="ident" id="2804388">Less</span><span class="op" id="2804392">(</span><span class="ident" id="2804393">b</span><span class="op" id="2804394">,</span>&nbsp;<span class="ident" id="2804396">pivot</span><span class="op" id="2804401">)</span>&nbsp;<span class="op" id="2804403">{</span>&nbsp;<span class="comment" id="2804405">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804428">b</span><span class="op" id="2804429">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804435">}</span>&nbsp;<span class="keyword" id="2804437">else</span>&nbsp;<span class="keyword" id="2804442">if</span>&nbsp;<span class="op" id="2804445">!</span><span class="ident" id="2804446">data</span><span class="op" id="2804450">.</span><span class="ident" id="2804451">Less</span><span class="op" id="2804455">(</span><span class="ident" id="2804456">pivot</span><span class="op" id="2804461">,</span>&nbsp;<span class="ident" id="2804463">b</span><span class="op" id="2804464">)</span>&nbsp;<span class="op" id="2804466">{</span>&nbsp;<span class="comment" id="2804468">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804491">data</span><span class="op" id="2804495">.</span><span class="ident" id="2804496">Swap</span><span class="op" id="2804500">(</span><span class="ident" id="2804501">a</span><span class="op" id="2804502">,</span>&nbsp;<span class="ident" id="2804504">b</span><span class="op" id="2804505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804511">a</span><span class="op" id="2804512">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804519">b</span><span class="op" id="2804520">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804526">}</span>&nbsp;<span class="keyword" id="2804528">else</span>&nbsp;<span class="op" id="2804533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804539">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804556">for</span>&nbsp;<span class="ident" id="2804560">b</span>&nbsp;<span class="op" id="2804562">&lt;</span>&nbsp;<span class="ident" id="2804564">c</span>&nbsp;<span class="op" id="2804566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804571">if</span>&nbsp;<span class="ident" id="2804574">data</span><span class="op" id="2804578">.</span><span class="ident" id="2804579">Less</span><span class="op" id="2804583">(</span><span class="ident" id="2804584">pivot</span><span class="op" id="2804589">,</span>&nbsp;<span class="ident" id="2804591">c</span><span class="op" id="2804592">-</span><span class="num" id="2804593">1</span><span class="op" id="2804594">)</span>&nbsp;<span class="op" id="2804596">{</span>&nbsp;<span class="comment" id="2804598">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804623">c</span><span class="op" id="2804624">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804630">}</span>&nbsp;<span class="keyword" id="2804632">else</span>&nbsp;<span class="keyword" id="2804637">if</span>&nbsp;<span class="op" id="2804640">!</span><span class="ident" id="2804641">data</span><span class="op" id="2804645">.</span><span class="ident" id="2804646">Less</span><span class="op" id="2804650">(</span><span class="ident" id="2804651">c</span><span class="op" id="2804652">-</span><span class="num" id="2804653">1</span><span class="op" id="2804654">,</span>&nbsp;<span class="ident" id="2804656">pivot</span><span class="op" id="2804661">)</span>&nbsp;<span class="op" id="2804663">{</span>&nbsp;<span class="comment" id="2804665">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804690">data</span><span class="op" id="2804694">.</span><span class="ident" id="2804695">Swap</span><span class="op" id="2804699">(</span><span class="ident" id="2804700">c</span><span class="op" id="2804701">-</span><span class="num" id="2804702">1</span><span class="op" id="2804703">,</span>&nbsp;<span class="ident" id="2804705">d</span><span class="op" id="2804706">-</span><span class="num" id="2804707">1</span><span class="op" id="2804708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804714">c</span><span class="op" id="2804715">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804722">d</span><span class="op" id="2804723">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804729">}</span>&nbsp;<span class="keyword" id="2804731">else</span>&nbsp;<span class="op" id="2804736">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804742">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804759">if</span>&nbsp;<span class="ident" id="2804762">b</span>&nbsp;<span class="op" id="2804764">&gt;=</span>&nbsp;<span class="ident" id="2804767">c</span>&nbsp;<span class="op" id="2804769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804774">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2804786">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804826">data</span><span class="op" id="2804830">.</span><span class="ident" id="2804831">Swap</span><span class="op" id="2804835">(</span><span class="ident" id="2804836">b</span><span class="op" id="2804837">,</span>&nbsp;<span class="ident" id="2804839">c</span><span class="op" id="2804840">-</span><span class="num" id="2804841">1</span><span class="op" id="2804842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804846">b</span><span class="op" id="2804847">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804852">c</span><span class="op" id="2804853">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2804857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804861">n</span>&nbsp;<span class="op" id="2804863">:=</span>&nbsp;<span class="ident" id="2804866">min</span><span class="op" id="2804869">(</span><span class="ident" id="2804870">b</span><span class="op" id="2804871">-</span><span class="ident" id="2804872">a</span><span class="op" id="2804873">,</span>&nbsp;<span class="ident" id="2804875">a</span><span class="op" id="2804876">-</span><span class="ident" id="2804877">lo</span><span class="op" id="2804879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804882">swapRange</span><span class="op" id="2804891">(</span><span class="ident" id="2804892">data</span><span class="op" id="2804896">,</span>&nbsp;<span class="ident" id="2804898">lo</span><span class="op" id="2804900">,</span>&nbsp;<span class="ident" id="2804902">b</span><span class="op" id="2804903">-</span><span class="ident" id="2804904">n</span><span class="op" id="2804905">,</span>&nbsp;<span class="ident" id="2804907">n</span><span class="op" id="2804908">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804912">n</span>&nbsp;<span class="op" id="2804914">=</span>&nbsp;<span class="ident" id="2804916">min</span><span class="op" id="2804919">(</span><span class="ident" id="2804920">hi</span><span class="op" id="2804922">-</span><span class="ident" id="2804923">d</span><span class="op" id="2804924">,</span>&nbsp;<span class="ident" id="2804926">d</span><span class="op" id="2804927">-</span><span class="ident" id="2804928">c</span><span class="op" id="2804929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2804932">swapRange</span><span class="op" id="2804941">(</span><span class="ident" id="2804942">data</span><span class="op" id="2804946">,</span>&nbsp;<span class="ident" id="2804948">c</span><span class="op" id="2804949">,</span>&nbsp;<span class="ident" id="2804951">hi</span><span class="op" id="2804953">-</span><span class="ident" id="2804954">n</span><span class="op" id="2804955">,</span>&nbsp;<span class="ident" id="2804957">n</span><span class="op" id="2804958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2804962">return</span>&nbsp;<span class="ident" id="2804969">lo</span>&nbsp;<span class="op" id="2804972">+</span>&nbsp;<span class="ident" id="2804974">b</span>&nbsp;<span class="op" id="2804976">-</span>&nbsp;<span class="ident" id="2804978">a</span><span class="op" id="2804979">,</span>&nbsp;<span class="ident" id="2804981">hi</span>&nbsp;<span class="op" id="2804984">-</span>&nbsp;<span class="op" id="2804986">(</span><span class="ident" id="2804987">d</span>&nbsp;<span class="op" id="2804989">-</span>&nbsp;<span class="ident" id="2804991">c</span><span class="op" id="2804992">)</span><br>
<span class="lineno"></span><span class="op" id="2804994">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2804997">func</span>&nbsp;<span class="ident" id="2805002">quickSort</span><span class="op" id="2805011">(</span><span class="ident" id="2805012">data</span>&nbsp;<span class="ident" id="2805017">Interface</span><span class="op" id="2805026">,</span>&nbsp;<span class="ident" id="2805028">a</span><span class="op" id="2805029">,</span>&nbsp;<span class="ident" id="2805031">b</span><span class="op" id="2805032">,</span>&nbsp;<span class="ident" id="2805034">maxDepth</span>&nbsp;<span class="builtintype" id="2805043">int</span><span class="op" id="2805046">)</span>&nbsp;<span class="op" id="2805048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805051">for</span>&nbsp;<span class="ident" id="2805055">b</span><span class="op" id="2805056">-</span><span class="ident" id="2805057">a</span>&nbsp;<span class="op" id="2805059">&gt;</span>&nbsp;<span class="num" id="2805061">7</span>&nbsp;<span class="op" id="2805063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805067">if</span>&nbsp;<span class="ident" id="2805070">maxDepth</span>&nbsp;<span class="op" id="2805079">==</span>&nbsp;<span class="num" id="2805082">0</span>&nbsp;<span class="op" id="2805084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805089">heapSort</span><span class="op" id="2805097">(</span><span class="ident" id="2805098">data</span><span class="op" id="2805102">,</span>&nbsp;<span class="ident" id="2805104">a</span><span class="op" id="2805105">,</span>&nbsp;<span class="ident" id="2805107">b</span><span class="op" id="2805108">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805113">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805126">maxDepth</span><span class="op" id="2805134">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805139">mlo</span><span class="op" id="2805142">,</span>&nbsp;<span class="ident" id="2805144">mhi</span>&nbsp;<span class="op" id="2805148">:=</span>&nbsp;<span class="ident" id="2805151">doPivot</span><span class="op" id="2805158">(</span><span class="ident" id="2805159">data</span><span class="op" id="2805163">,</span>&nbsp;<span class="ident" id="2805165">a</span><span class="op" id="2805166">,</span>&nbsp;<span class="ident" id="2805168">b</span><span class="op" id="2805169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2805173">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2805233">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805272">if</span>&nbsp;<span class="ident" id="2805275">mlo</span><span class="op" id="2805278">-</span><span class="ident" id="2805279">a</span>&nbsp;<span class="op" id="2805281">&lt;</span>&nbsp;<span class="ident" id="2805283">b</span><span class="op" id="2805284">-</span><span class="ident" id="2805285">mhi</span>&nbsp;<span class="op" id="2805289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805294">quickSort</span><span class="op" id="2805303">(</span><span class="ident" id="2805304">data</span><span class="op" id="2805308">,</span>&nbsp;<span class="ident" id="2805310">a</span><span class="op" id="2805311">,</span>&nbsp;<span class="ident" id="2805313">mlo</span><span class="op" id="2805316">,</span>&nbsp;<span class="ident" id="2805318">maxDepth</span><span class="op" id="2805326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805331">a</span>&nbsp;<span class="op" id="2805333">=</span>&nbsp;<span class="ident" id="2805335">mhi</span>&nbsp;<span class="comment" id="2805339">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805374">}</span>&nbsp;<span class="keyword" id="2805376">else</span>&nbsp;<span class="op" id="2805381">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805386">quickSort</span><span class="op" id="2805395">(</span><span class="ident" id="2805396">data</span><span class="op" id="2805400">,</span>&nbsp;<span class="ident" id="2805402">mhi</span><span class="op" id="2805405">,</span>&nbsp;<span class="ident" id="2805407">b</span><span class="op" id="2805408">,</span>&nbsp;<span class="ident" id="2805410">maxDepth</span><span class="op" id="2805418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805423">b</span>&nbsp;<span class="op" id="2805425">=</span>&nbsp;<span class="ident" id="2805427">mlo</span>&nbsp;<span class="comment" id="2805431">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805472">if</span>&nbsp;<span class="ident" id="2805475">b</span><span class="op" id="2805476">-</span><span class="ident" id="2805477">a</span>&nbsp;<span class="op" id="2805479">&gt;</span>&nbsp;<span class="num" id="2805481">1</span>&nbsp;<span class="op" id="2805483">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805487">insertionSort</span><span class="op" id="2805500">(</span><span class="ident" id="2805501">data</span><span class="op" id="2805505">,</span>&nbsp;<span class="ident" id="2805507">a</span><span class="op" id="2805508">,</span>&nbsp;<span class="ident" id="2805510">b</span><span class="op" id="2805511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805514">}</span><br>
<span class="lineno"></span><span class="op" id="2805516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2805519">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2805539">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2805613">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2805682">func</span>&nbsp;<span class="ident" id="2805687">Sort</span><span class="op" id="2805691">(</span><span class="ident" id="2805692">data</span>&nbsp;<span class="ident" id="2805697">Interface</span><span class="op" id="2805706">)</span>&nbsp;<span class="op" id="2805708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2805711">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805774">n</span>&nbsp;<span class="op" id="2805776">:=</span>&nbsp;<span class="ident" id="2805779">data</span><span class="op" id="2805783">.</span><span class="ident" id="2805784">Len</span><span class="op" id="2805787">(</span><span class="op" id="2805788">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805791">maxDepth</span>&nbsp;<span class="op" id="2805800">:=</span>&nbsp;<span class="num" id="2805803">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2805806">for</span>&nbsp;<span class="ident" id="2805810">i</span>&nbsp;<span class="op" id="2805812">:=</span>&nbsp;<span class="ident" id="2805815">n</span><span class="op" id="2805816">;</span>&nbsp;<span class="ident" id="2805818">i</span>&nbsp;<span class="op" id="2805820">&gt;</span>&nbsp;<span class="num" id="2805822">0</span><span class="op" id="2805823">;</span>&nbsp;<span class="ident" id="2805825">i</span>&nbsp;<span class="op" id="2805827">&gt;&gt;=</span>&nbsp;<span class="num" id="2805831">1</span>&nbsp;<span class="op" id="2805833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805837">maxDepth</span><span class="op" id="2805845">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2805849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805852">maxDepth</span>&nbsp;<span class="op" id="2805861">*=</span>&nbsp;<span class="num" id="2805864">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2805867">quickSort</span><span class="op" id="2805876">(</span><span class="ident" id="2805877">data</span><span class="op" id="2805881">,</span>&nbsp;<span class="num" id="2805883">0</span><span class="op" id="2805884">,</span>&nbsp;<span class="ident" id="2805886">n</span><span class="op" id="2805887">,</span>&nbsp;<span class="ident" id="2805889">maxDepth</span><span class="op" id="2805897">)</span><br>
<span class="lineno"></span><span class="op" id="2805899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2805902">type</span>&nbsp;<span class="ident" id="2805907">reverse</span>&nbsp;<span class="keyword" id="2805915">struct</span>&nbsp;<span class="op" id="2805922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2805925">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2805991">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2806029">Interface</span><br>
<span class="lineno"></span><span class="op" id="2806039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806042">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2806117">func</span>&nbsp;<span class="op" id="2806122">(</span><span class="ident" id="2806123">r</span>&nbsp;<span class="ident" id="2806125">reverse</span><span class="op" id="2806132">)</span>&nbsp;<span class="ident" id="2806134">Less</span><span class="op" id="2806138">(</span><span class="ident" id="2806139">i</span><span class="op" id="2806140">,</span>&nbsp;<span class="ident" id="2806142">j</span>&nbsp;<span class="builtintype" id="2806144">int</span><span class="op" id="2806147">)</span>&nbsp;<span class="builtintype" id="2806149">bool</span>&nbsp;<span class="op" id="2806154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806157">return</span>&nbsp;<span class="ident" id="2806164">r</span><span class="op" id="2806165">.</span><span class="ident" id="2806166">Interface</span><span class="op" id="2806175">.</span><span class="ident" id="2806176">Less</span><span class="op" id="2806180">(</span><span class="ident" id="2806181">j</span><span class="op" id="2806182">,</span>&nbsp;<span class="ident" id="2806184">i</span><span class="op" id="2806185">)</span><br>
<span class="lineno"></span><span class="op" id="2806187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806190">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2806237">func</span>&nbsp;<span class="ident" id="2806242">Reverse</span><span class="op" id="2806249">(</span><span class="ident" id="2806250">data</span>&nbsp;<span class="ident" id="2806255">Interface</span><span class="op" id="2806264">)</span>&nbsp;<span class="ident" id="2806266">Interface</span>&nbsp;<span class="op" id="2806276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806279">return</span>&nbsp;<span class="op" id="2806286">&amp;</span><span class="ident" id="2806287">reverse</span><span class="op" id="2806294">{</span><span class="ident" id="2806295">data</span><span class="op" id="2806299">}</span><br>
<span class="lineno"></span><span class="op" id="2806301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806304">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2806348">func</span>&nbsp;<span class="ident" id="2806353">IsSorted</span><span class="op" id="2806361">(</span><span class="ident" id="2806362">data</span>&nbsp;<span class="ident" id="2806367">Interface</span><span class="op" id="2806376">)</span>&nbsp;<span class="builtintype" id="2806378">bool</span>&nbsp;<span class="op" id="2806383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2806386">n</span>&nbsp;<span class="op" id="2806388">:=</span>&nbsp;<span class="ident" id="2806391">data</span><span class="op" id="2806395">.</span><span class="ident" id="2806396">Len</span><span class="op" id="2806399">(</span><span class="op" id="2806400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806403">for</span>&nbsp;<span class="ident" id="2806407">i</span>&nbsp;<span class="op" id="2806409">:=</span>&nbsp;<span class="ident" id="2806412">n</span>&nbsp;<span class="op" id="2806414">-</span>&nbsp;<span class="num" id="2806416">1</span><span class="op" id="2806417">;</span>&nbsp;<span class="ident" id="2806419">i</span>&nbsp;<span class="op" id="2806421">&gt;</span>&nbsp;<span class="num" id="2806423">0</span><span class="op" id="2806424">;</span>&nbsp;<span class="ident" id="2806426">i</span><span class="op" id="2806427">--</span>&nbsp;<span class="op" id="2806430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806434">if</span>&nbsp;<span class="ident" id="2806437">data</span><span class="op" id="2806441">.</span><span class="ident" id="2806442">Less</span><span class="op" id="2806446">(</span><span class="ident" id="2806447">i</span><span class="op" id="2806448">,</span>&nbsp;<span class="ident" id="2806450">i</span><span class="op" id="2806451">-</span><span class="num" id="2806452">1</span><span class="op" id="2806453">)</span>&nbsp;<span class="op" id="2806455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806460">return</span>&nbsp;<span class="builtintype" id="2806467">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2806475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2806478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2806481">return</span>&nbsp;<span class="builtintype" id="2806488">true</span><br>
<span class="lineno"></span><span class="op" id="2806493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2806496">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806535">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2806620">type</span>&nbsp;<span class="ident" id="2806625">IntSlice</span>&nbsp;<span class="op" id="2806634">[</span><span class="op" id="2806635">]</span><span class="builtintype" id="2806636">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2806641">func</span>&nbsp;<span class="op" id="2806646">(</span><span class="ident" id="2806647">p</span>&nbsp;<span class="ident" id="2806649">IntSlice</span><span class="op" id="2806657">)</span>&nbsp;<span class="ident" id="2806659">Len</span><span class="op" id="2806662">(</span><span class="op" id="2806663">)</span>&nbsp;<span class="builtintype" id="2806665">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2806679">{</span>&nbsp;<span class="keyword" id="2806681">return</span>&nbsp;<span class="builtinfunc" id="2806688">len</span><span class="op" id="2806691">(</span><span class="ident" id="2806692">p</span><span class="op" id="2806693">)</span>&nbsp;<span class="op" id="2806695">}</span><br>
<span class="lineno"></span><span class="keyword" id="2806697">func</span>&nbsp;<span class="op" id="2806702">(</span><span class="ident" id="2806703">p</span>&nbsp;<span class="ident" id="2806705">IntSlice</span><span class="op" id="2806713">)</span>&nbsp;<span class="ident" id="2806715">Less</span><span class="op" id="2806719">(</span><span class="ident" id="2806720">i</span><span class="op" id="2806721">,</span>&nbsp;<span class="ident" id="2806723">j</span>&nbsp;<span class="builtintype" id="2806725">int</span><span class="op" id="2806728">)</span>&nbsp;<span class="builtintype" id="2806730">bool</span>&nbsp;<span class="op" id="2806735">{</span>&nbsp;<span class="keyword" id="2806737">return</span>&nbsp;<span class="ident" id="2806744">p</span><span class="op" id="2806745">[</span><span class="ident" id="2806746">i</span><span class="op" id="2806747">]</span>&nbsp;<span class="op" id="2806749">&lt;</span>&nbsp;<span class="ident" id="2806751">p</span><span class="op" id="2806752">[</span><span class="ident" id="2806753">j</span><span class="op" id="2806754">]</span>&nbsp;<span class="op" id="2806756">}</span><br>
<span class="lineno"></span><span class="keyword" id="2806758">func</span>&nbsp;<span class="op" id="2806763">(</span><span class="ident" id="2806764">p</span>&nbsp;<span class="ident" id="2806766">IntSlice</span><span class="op" id="2806774">)</span>&nbsp;<span class="ident" id="2806776">Swap</span><span class="op" id="2806780">(</span><span class="ident" id="2806781">i</span><span class="op" id="2806782">,</span>&nbsp;<span class="ident" id="2806784">j</span>&nbsp;<span class="builtintype" id="2806786">int</span><span class="op" id="2806789">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2806796">{</span>&nbsp;<span class="ident" id="2806798">p</span><span class="op" id="2806799">[</span><span class="ident" id="2806800">i</span><span class="op" id="2806801">]</span><span class="op" id="2806802">,</span>&nbsp;<span class="ident" id="2806804">p</span><span class="op" id="2806805">[</span><span class="ident" id="2806806">j</span><span class="op" id="2806807">]</span>&nbsp;<span class="op" id="2806809">=</span>&nbsp;<span class="ident" id="2806811">p</span><span class="op" id="2806812">[</span><span class="ident" id="2806813">j</span><span class="op" id="2806814">]</span><span class="op" id="2806815">,</span>&nbsp;<span class="ident" id="2806817">p</span><span class="op" id="2806818">[</span><span class="ident" id="2806819">i</span><span class="op" id="2806820">]</span>&nbsp;<span class="op" id="2806822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806825">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2806858">func</span>&nbsp;<span class="op" id="2806863">(</span><span class="ident" id="2806864">p</span>&nbsp;<span class="ident" id="2806866">IntSlice</span><span class="op" id="2806874">)</span>&nbsp;<span class="ident" id="2806876">Sort</span><span class="op" id="2806880">(</span><span class="op" id="2806881">)</span>&nbsp;<span class="op" id="2806883">{</span>&nbsp;<span class="ident" id="2806885">Sort</span><span class="op" id="2806889">(</span><span class="ident" id="2806890">p</span><span class="op" id="2806891">)</span>&nbsp;<span class="op" id="2806893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2806896">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2806989">type</span>&nbsp;<span class="ident" id="2806994">Float64Slice</span>&nbsp;<span class="op" id="2807007">[</span><span class="op" id="2807008">]</span><span class="builtintype" id="2807009">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2807018">func</span>&nbsp;<span class="op" id="2807023">(</span><span class="ident" id="2807024">p</span>&nbsp;<span class="ident" id="2807026">Float64Slice</span><span class="op" id="2807038">)</span>&nbsp;<span class="ident" id="2807040">Len</span><span class="op" id="2807043">(</span><span class="op" id="2807044">)</span>&nbsp;<span class="builtintype" id="2807046">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2807060">{</span>&nbsp;<span class="keyword" id="2807062">return</span>&nbsp;<span class="builtinfunc" id="2807069">len</span><span class="op" id="2807072">(</span><span class="ident" id="2807073">p</span><span class="op" id="2807074">)</span>&nbsp;<span class="op" id="2807076">}</span><br>
<span class="lineno"></span><span class="keyword" id="2807078">func</span>&nbsp;<span class="op" id="2807083">(</span><span class="ident" id="2807084">p</span>&nbsp;<span class="ident" id="2807086">Float64Slice</span><span class="op" id="2807098">)</span>&nbsp;<span class="ident" id="2807100">Less</span><span class="op" id="2807104">(</span><span class="ident" id="2807105">i</span><span class="op" id="2807106">,</span>&nbsp;<span class="ident" id="2807108">j</span>&nbsp;<span class="builtintype" id="2807110">int</span><span class="op" id="2807113">)</span>&nbsp;<span class="builtintype" id="2807115">bool</span>&nbsp;<span class="op" id="2807120">{</span>&nbsp;<span class="keyword" id="2807122">return</span>&nbsp;<span class="ident" id="2807129">p</span><span class="op" id="2807130">[</span><span class="ident" id="2807131">i</span><span class="op" id="2807132">]</span>&nbsp;<span class="op" id="2807134">&lt;</span>&nbsp;<span class="ident" id="2807136">p</span><span class="op" id="2807137">[</span><span class="ident" id="2807138">j</span><span class="op" id="2807139">]</span>&nbsp;<span class="op" id="2807141">||</span>&nbsp;<span class="ident" id="2807144">isNaN</span><span class="op" id="2807149">(</span><span class="ident" id="2807150">p</span><span class="op" id="2807151">[</span><span class="ident" id="2807152">i</span><span class="op" id="2807153">]</span><span class="op" id="2807154">)</span>&nbsp;<span class="op" id="2807156">&amp;&amp;</span>&nbsp;<span class="op" id="2807159">!</span><span class="ident" id="2807160">isNaN</span><span class="op" id="2807165">(</span><span class="ident" id="2807166">p</span><span class="op" id="2807167">[</span><span class="ident" id="2807168">j</span><span class="op" id="2807169">]</span><span class="op" id="2807170">)</span>&nbsp;<span class="op" id="2807172">}</span><br>
<span class="lineno"></span><span class="keyword" id="2807174">func</span>&nbsp;<span class="op" id="2807179">(</span><span class="ident" id="2807180">p</span>&nbsp;<span class="ident" id="2807182">Float64Slice</span><span class="op" id="2807194">)</span>&nbsp;<span class="ident" id="2807196">Swap</span><span class="op" id="2807200">(</span><span class="ident" id="2807201">i</span><span class="op" id="2807202">,</span>&nbsp;<span class="ident" id="2807204">j</span>&nbsp;<span class="builtintype" id="2807206">int</span><span class="op" id="2807209">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2807216">{</span>&nbsp;<span class="ident" id="2807218">p</span><span class="op" id="2807219">[</span><span class="ident" id="2807220">i</span><span class="op" id="2807221">]</span><span class="op" id="2807222">,</span>&nbsp;<span class="ident" id="2807224">p</span><span class="op" id="2807225">[</span><span class="ident" id="2807226">j</span><span class="op" id="2807227">]</span>&nbsp;<span class="op" id="2807229">=</span>&nbsp;<span class="ident" id="2807231">p</span><span class="op" id="2807232">[</span><span class="ident" id="2807233">j</span><span class="op" id="2807234">]</span><span class="op" id="2807235">,</span>&nbsp;<span class="ident" id="2807237">p</span><span class="op" id="2807238">[</span><span class="ident" id="2807239">i</span><span class="op" id="2807240">]</span>&nbsp;<span class="op" id="2807242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807245">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2807321">func</span>&nbsp;<span class="ident" id="2807326">isNaN</span><span class="op" id="2807331">(</span><span class="ident" id="2807332">f</span>&nbsp;<span class="builtintype" id="2807334">float64</span><span class="op" id="2807341">)</span>&nbsp;<span class="builtintype" id="2807343">bool</span>&nbsp;<span class="op" id="2807348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2807351">return</span>&nbsp;<span class="ident" id="2807358">f</span>&nbsp;<span class="op" id="2807360">!=</span>&nbsp;<span class="ident" id="2807363">f</span><br>
<span class="lineno"></span><span class="op" id="2807365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807368">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2807401">func</span>&nbsp;<span class="op" id="2807406">(</span><span class="ident" id="2807407">p</span>&nbsp;<span class="ident" id="2807409">Float64Slice</span><span class="op" id="2807421">)</span>&nbsp;<span class="ident" id="2807423">Sort</span><span class="op" id="2807427">(</span><span class="op" id="2807428">)</span>&nbsp;<span class="op" id="2807430">{</span>&nbsp;<span class="ident" id="2807432">Sort</span><span class="op" id="2807436">(</span><span class="ident" id="2807437">p</span><span class="op" id="2807438">)</span>&nbsp;<span class="op" id="2807440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807443">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2807534">type</span>&nbsp;<span class="ident" id="2807539">StringSlice</span>&nbsp;<span class="op" id="2807551">[</span><span class="op" id="2807552">]</span><span class="builtintype" id="2807553">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2807561">func</span>&nbsp;<span class="op" id="2807566">(</span><span class="ident" id="2807567">p</span>&nbsp;<span class="ident" id="2807569">StringSlice</span><span class="op" id="2807580">)</span>&nbsp;<span class="ident" id="2807582">Len</span><span class="op" id="2807585">(</span><span class="op" id="2807586">)</span>&nbsp;<span class="builtintype" id="2807588">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2807602">{</span>&nbsp;<span class="keyword" id="2807604">return</span>&nbsp;<span class="builtinfunc" id="2807611">len</span><span class="op" id="2807614">(</span><span class="ident" id="2807615">p</span><span class="op" id="2807616">)</span>&nbsp;<span class="op" id="2807618">}</span><br>
<span class="lineno"></span><span class="keyword" id="2807620">func</span>&nbsp;<span class="op" id="2807625">(</span><span class="ident" id="2807626">p</span>&nbsp;<span class="ident" id="2807628">StringSlice</span><span class="op" id="2807639">)</span>&nbsp;<span class="ident" id="2807641">Less</span><span class="op" id="2807645">(</span><span class="ident" id="2807646">i</span><span class="op" id="2807647">,</span>&nbsp;<span class="ident" id="2807649">j</span>&nbsp;<span class="builtintype" id="2807651">int</span><span class="op" id="2807654">)</span>&nbsp;<span class="builtintype" id="2807656">bool</span>&nbsp;<span class="op" id="2807661">{</span>&nbsp;<span class="keyword" id="2807663">return</span>&nbsp;<span class="ident" id="2807670">p</span><span class="op" id="2807671">[</span><span class="ident" id="2807672">i</span><span class="op" id="2807673">]</span>&nbsp;<span class="op" id="2807675">&lt;</span>&nbsp;<span class="ident" id="2807677">p</span><span class="op" id="2807678">[</span><span class="ident" id="2807679">j</span><span class="op" id="2807680">]</span>&nbsp;<span class="op" id="2807682">}</span><br>
<span class="lineno"></span><span class="keyword" id="2807684">func</span>&nbsp;<span class="op" id="2807689">(</span><span class="ident" id="2807690">p</span>&nbsp;<span class="ident" id="2807692">StringSlice</span><span class="op" id="2807703">)</span>&nbsp;<span class="ident" id="2807705">Swap</span><span class="op" id="2807709">(</span><span class="ident" id="2807710">i</span><span class="op" id="2807711">,</span>&nbsp;<span class="ident" id="2807713">j</span>&nbsp;<span class="builtintype" id="2807715">int</span><span class="op" id="2807718">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2807725">{</span>&nbsp;<span class="ident" id="2807727">p</span><span class="op" id="2807728">[</span><span class="ident" id="2807729">i</span><span class="op" id="2807730">]</span><span class="op" id="2807731">,</span>&nbsp;<span class="ident" id="2807733">p</span><span class="op" id="2807734">[</span><span class="ident" id="2807735">j</span><span class="op" id="2807736">]</span>&nbsp;<span class="op" id="2807738">=</span>&nbsp;<span class="ident" id="2807740">p</span><span class="op" id="2807741">[</span><span class="ident" id="2807742">j</span><span class="op" id="2807743">]</span><span class="op" id="2807744">,</span>&nbsp;<span class="ident" id="2807746">p</span><span class="op" id="2807747">[</span><span class="ident" id="2807748">i</span><span class="op" id="2807749">]</span>&nbsp;<span class="op" id="2807751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807754">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2807787">func</span>&nbsp;<span class="op" id="2807792">(</span><span class="ident" id="2807793">p</span>&nbsp;<span class="ident" id="2807795">StringSlice</span><span class="op" id="2807806">)</span>&nbsp;<span class="ident" id="2807808">Sort</span><span class="op" id="2807812">(</span><span class="op" id="2807813">)</span>&nbsp;<span class="op" id="2807815">{</span>&nbsp;<span class="ident" id="2807817">Sort</span><span class="op" id="2807821">(</span><span class="ident" id="2807822">p</span><span class="op" id="2807823">)</span>&nbsp;<span class="op" id="2807825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807828">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807870">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2807921">func</span>&nbsp;<span class="ident" id="2807926">Ints</span><span class="op" id="2807930">(</span><span class="ident" id="2807931">a</span>&nbsp;<span class="op" id="2807933">[</span><span class="op" id="2807934">]</span><span class="builtintype" id="2807935">int</span><span class="op" id="2807938">)</span>&nbsp;<span class="op" id="2807940">{</span>&nbsp;<span class="ident" id="2807942">Sort</span><span class="op" id="2807946">(</span><span class="ident" id="2807947">IntSlice</span><span class="op" id="2807955">(</span><span class="ident" id="2807956">a</span><span class="op" id="2807957">)</span><span class="op" id="2807958">)</span>&nbsp;<span class="op" id="2807960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807963">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2808022">func</span>&nbsp;<span class="ident" id="2808027">Float64s</span><span class="op" id="2808035">(</span><span class="ident" id="2808036">a</span>&nbsp;<span class="op" id="2808038">[</span><span class="op" id="2808039">]</span><span class="builtintype" id="2808040">float64</span><span class="op" id="2808047">)</span>&nbsp;<span class="op" id="2808049">{</span>&nbsp;<span class="ident" id="2808051">Sort</span><span class="op" id="2808055">(</span><span class="ident" id="2808056">Float64Slice</span><span class="op" id="2808068">(</span><span class="ident" id="2808069">a</span><span class="op" id="2808070">)</span><span class="op" id="2808071">)</span>&nbsp;<span class="op" id="2808073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2808076">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2808133">func</span>&nbsp;<span class="ident" id="2808138">Strings</span><span class="op" id="2808145">(</span><span class="ident" id="2808146">a</span>&nbsp;<span class="op" id="2808148">[</span><span class="op" id="2808149">]</span><span class="builtintype" id="2808150">string</span><span class="op" id="2808156">)</span>&nbsp;<span class="op" id="2808158">{</span>&nbsp;<span class="ident" id="2808160">Sort</span><span class="op" id="2808164">(</span><span class="ident" id="2808165">StringSlice</span><span class="op" id="2808176">(</span><span class="ident" id="2808177">a</span><span class="op" id="2808178">)</span><span class="op" id="2808179">)</span>&nbsp;<span class="op" id="2808181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2808184">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2808262">func</span>&nbsp;<span class="ident" id="2808267">IntsAreSorted</span><span class="op" id="2808280">(</span><span class="ident" id="2808281">a</span>&nbsp;<span class="op" id="2808283">[</span><span class="op" id="2808284">]</span><span class="builtintype" id="2808285">int</span><span class="op" id="2808288">)</span>&nbsp;<span class="builtintype" id="2808290">bool</span>&nbsp;<span class="op" id="2808295">{</span>&nbsp;<span class="keyword" id="2808297">return</span>&nbsp;<span class="ident" id="2808304">IsSorted</span><span class="op" id="2808312">(</span><span class="ident" id="2808313">IntSlice</span><span class="op" id="2808321">(</span><span class="ident" id="2808322">a</span><span class="op" id="2808323">)</span><span class="op" id="2808324">)</span>&nbsp;<span class="op" id="2808326">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2808329">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2808415">func</span>&nbsp;<span class="ident" id="2808420">Float64sAreSorted</span><span class="op" id="2808437">(</span><span class="ident" id="2808438">a</span>&nbsp;<span class="op" id="2808440">[</span><span class="op" id="2808441">]</span><span class="builtintype" id="2808442">float64</span><span class="op" id="2808449">)</span>&nbsp;<span class="builtintype" id="2808451">bool</span>&nbsp;<span class="op" id="2808456">{</span>&nbsp;<span class="keyword" id="2808458">return</span>&nbsp;<span class="ident" id="2808465">IsSorted</span><span class="op" id="2808473">(</span><span class="ident" id="2808474">Float64Slice</span><span class="op" id="2808486">(</span><span class="ident" id="2808487">a</span><span class="op" id="2808488">)</span><span class="op" id="2808489">)</span>&nbsp;<span class="op" id="2808491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2808494">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2808578">func</span>&nbsp;<span class="ident" id="2808583">StringsAreSorted</span><span class="op" id="2808599">(</span><span class="ident" id="2808600">a</span>&nbsp;<span class="op" id="2808602">[</span><span class="op" id="2808603">]</span><span class="builtintype" id="2808604">string</span><span class="op" id="2808610">)</span>&nbsp;<span class="builtintype" id="2808612">bool</span>&nbsp;<span class="op" id="2808617">{</span>&nbsp;<span class="keyword" id="2808619">return</span>&nbsp;<span class="ident" id="2808626">IsSorted</span><span class="op" id="2808634">(</span><span class="ident" id="2808635">StringSlice</span><span class="op" id="2808646">(</span><span class="ident" id="2808647">a</span><span class="op" id="2808648">)</span><span class="op" id="2808649">)</span>&nbsp;<span class="op" id="2808651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2808654">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2808682">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2808758">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2808833">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2808896">//</span><br>
<span class="lineno"></span><span class="comment" id="2808899">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2808941">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2809013">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2809031">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2809085">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2809162">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2809234">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2809306">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2809361">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2809434">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2809485">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2809561">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2809635">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2809701">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2809778">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2809857">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2809935">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2810009">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2810057">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2810131">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2810180">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2810253">//</span><br>
<span class="lineno">315</span><span class="comment" id="2810256">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2810326">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2810382">func</span>&nbsp;<span class="ident" id="2810387">Stable</span><span class="op" id="2810393">(</span><span class="ident" id="2810394">data</span>&nbsp;<span class="ident" id="2810399">Interface</span><span class="op" id="2810408">)</span>&nbsp;<span class="op" id="2810410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810413">n</span>&nbsp;<span class="op" id="2810415">:=</span>&nbsp;<span class="ident" id="2810418">data</span><span class="op" id="2810422">.</span><span class="ident" id="2810423">Len</span><span class="op" id="2810426">(</span><span class="op" id="2810427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810430">blockSize</span>&nbsp;<span class="op" id="2810440">:=</span>&nbsp;<span class="num" id="2810443">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810447">a</span><span class="op" id="2810448">,</span>&nbsp;<span class="ident" id="2810450">b</span>&nbsp;<span class="op" id="2810452">:=</span>&nbsp;<span class="num" id="2810455">0</span><span class="op" id="2810456">,</span>&nbsp;<span class="ident" id="2810458">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810469">for</span>&nbsp;<span class="ident" id="2810473">b</span>&nbsp;<span class="op" id="2810475">&lt;=</span>&nbsp;<span class="ident" id="2810478">n</span>&nbsp;<span class="op" id="2810480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810484">insertionSort</span><span class="op" id="2810497">(</span><span class="ident" id="2810498">data</span><span class="op" id="2810502">,</span>&nbsp;<span class="ident" id="2810504">a</span><span class="op" id="2810505">,</span>&nbsp;<span class="ident" id="2810507">b</span><span class="op" id="2810508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810512">a</span>&nbsp;<span class="op" id="2810514">=</span>&nbsp;<span class="ident" id="2810516">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810520">b</span>&nbsp;<span class="op" id="2810522">+=</span>&nbsp;<span class="ident" id="2810525">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810539">insertionSort</span><span class="op" id="2810552">(</span><span class="ident" id="2810553">data</span><span class="op" id="2810557">,</span>&nbsp;<span class="ident" id="2810559">a</span><span class="op" id="2810560">,</span>&nbsp;<span class="ident" id="2810562">n</span><span class="op" id="2810563">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810567">for</span>&nbsp;<span class="ident" id="2810571">blockSize</span>&nbsp;<span class="op" id="2810581">&lt;</span>&nbsp;<span class="ident" id="2810583">n</span>&nbsp;<span class="op" id="2810585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810589">a</span><span class="op" id="2810590">,</span>&nbsp;<span class="ident" id="2810592">b</span>&nbsp;<span class="op" id="2810594">=</span>&nbsp;<span class="num" id="2810596">0</span><span class="op" id="2810597">,</span>&nbsp;<span class="num" id="2810599">2</span><span class="op" id="2810600">*</span><span class="ident" id="2810601">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810613">for</span>&nbsp;<span class="ident" id="2810617">b</span>&nbsp;<span class="op" id="2810619">&lt;=</span>&nbsp;<span class="ident" id="2810622">n</span>&nbsp;<span class="op" id="2810624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810629">symMerge</span><span class="op" id="2810637">(</span><span class="ident" id="2810638">data</span><span class="op" id="2810642">,</span>&nbsp;<span class="ident" id="2810644">a</span><span class="op" id="2810645">,</span>&nbsp;<span class="ident" id="2810647">a</span><span class="op" id="2810648">+</span><span class="ident" id="2810649">blockSize</span><span class="op" id="2810658">,</span>&nbsp;<span class="ident" id="2810660">b</span><span class="op" id="2810661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810666">a</span>&nbsp;<span class="op" id="2810668">=</span>&nbsp;<span class="ident" id="2810670">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810675">b</span>&nbsp;<span class="op" id="2810677">+=</span>&nbsp;<span class="num" id="2810680">2</span>&nbsp;<span class="op" id="2810682">*</span>&nbsp;<span class="ident" id="2810684">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810696">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810700">symMerge</span><span class="op" id="2810708">(</span><span class="ident" id="2810709">data</span><span class="op" id="2810713">,</span>&nbsp;<span class="ident" id="2810715">a</span><span class="op" id="2810716">,</span>&nbsp;<span class="ident" id="2810718">a</span><span class="op" id="2810719">+</span><span class="ident" id="2810720">blockSize</span><span class="op" id="2810729">,</span>&nbsp;<span class="ident" id="2810731">n</span><span class="op" id="2810732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810736">blockSize</span>&nbsp;<span class="op" id="2810746">*=</span>&nbsp;<span class="num" id="2810749">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810752">}</span><br>
<span class="lineno"></span><span class="op" id="2810754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2810757">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2810834">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2810911">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2810986">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2811061">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2811113">//</span><br>
<span class="lineno"></span><span class="comment" id="2811116">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2811157">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2811208">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2811269">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2811328">//</span><br>
<span class="lineno"></span><span class="comment" id="2811331">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2811406">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2811486">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2811563">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2811606">func</span>&nbsp;<span class="ident" id="2811611">symMerge</span><span class="op" id="2811619">(</span><span class="ident" id="2811620">data</span>&nbsp;<span class="ident" id="2811625">Interface</span><span class="op" id="2811634">,</span>&nbsp;<span class="ident" id="2811636">a</span><span class="op" id="2811637">,</span>&nbsp;<span class="ident" id="2811639">m</span><span class="op" id="2811640">,</span>&nbsp;<span class="ident" id="2811642">b</span>&nbsp;<span class="builtintype" id="2811644">int</span><span class="op" id="2811647">)</span>&nbsp;<span class="op" id="2811649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811652">if</span>&nbsp;<span class="ident" id="2811655">a</span>&nbsp;<span class="op" id="2811657">&gt;=</span>&nbsp;<span class="ident" id="2811660">m</span>&nbsp;<span class="op" id="2811662">||</span>&nbsp;<span class="ident" id="2811665">m</span>&nbsp;<span class="op" id="2811667">&gt;=</span>&nbsp;<span class="ident" id="2811670">b</span>&nbsp;<span class="op" id="2811672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811676">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2811684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811688">mid</span>&nbsp;<span class="op" id="2811692">:=</span>&nbsp;<span class="ident" id="2811695">a</span>&nbsp;<span class="op" id="2811697">+</span>&nbsp;<span class="op" id="2811699">(</span><span class="ident" id="2811700">b</span><span class="op" id="2811701">-</span><span class="ident" id="2811702">a</span><span class="op" id="2811703">)</span><span class="op" id="2811704">/</span><span class="num" id="2811705">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811708">n</span>&nbsp;<span class="op" id="2811710">:=</span>&nbsp;<span class="ident" id="2811713">mid</span>&nbsp;<span class="op" id="2811717">+</span>&nbsp;<span class="ident" id="2811719">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811722">start</span>&nbsp;<span class="op" id="2811728">:=</span>&nbsp;<span class="num" id="2811731">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811734">if</span>&nbsp;<span class="ident" id="2811737">m</span>&nbsp;<span class="op" id="2811739">&gt;</span>&nbsp;<span class="ident" id="2811741">mid</span>&nbsp;<span class="op" id="2811745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811749">start</span>&nbsp;<span class="op" id="2811755">=</span>&nbsp;<span class="ident" id="2811757">n</span>&nbsp;<span class="op" id="2811759">-</span>&nbsp;<span class="ident" id="2811761">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811765">r</span><span class="op" id="2811766">,</span>&nbsp;<span class="ident" id="2811768">p</span>&nbsp;<span class="op" id="2811770">:=</span>&nbsp;<span class="ident" id="2811773">mid</span><span class="op" id="2811776">,</span>&nbsp;<span class="ident" id="2811778">n</span><span class="op" id="2811779">-</span><span class="num" id="2811780">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811784">for</span>&nbsp;<span class="ident" id="2811788">start</span>&nbsp;<span class="op" id="2811794">&lt;</span>&nbsp;<span class="ident" id="2811796">r</span>&nbsp;<span class="op" id="2811798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811803">c</span>&nbsp;<span class="op" id="2811805">:=</span>&nbsp;<span class="ident" id="2811808">start</span>&nbsp;<span class="op" id="2811814">+</span>&nbsp;<span class="op" id="2811816">(</span><span class="ident" id="2811817">r</span><span class="op" id="2811818">-</span><span class="ident" id="2811819">start</span><span class="op" id="2811824">)</span><span class="op" id="2811825">/</span><span class="num" id="2811826">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811831">if</span>&nbsp;<span class="op" id="2811834">!</span><span class="ident" id="2811835">data</span><span class="op" id="2811839">.</span><span class="ident" id="2811840">Less</span><span class="op" id="2811844">(</span><span class="ident" id="2811845">p</span><span class="op" id="2811846">-</span><span class="ident" id="2811847">c</span><span class="op" id="2811848">,</span>&nbsp;<span class="ident" id="2811850">c</span><span class="op" id="2811851">)</span>&nbsp;<span class="op" id="2811853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811859">start</span>&nbsp;<span class="op" id="2811865">=</span>&nbsp;<span class="ident" id="2811867">c</span>&nbsp;<span class="op" id="2811869">+</span>&nbsp;<span class="num" id="2811871">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2811876">}</span>&nbsp;<span class="keyword" id="2811878">else</span>&nbsp;<span class="op" id="2811883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811889">r</span>&nbsp;<span class="op" id="2811891">=</span>&nbsp;<span class="ident" id="2811893">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2811898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2811902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2811905">}</span>&nbsp;<span class="keyword" id="2811907">else</span>&nbsp;<span class="op" id="2811912">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811916">start</span>&nbsp;<span class="op" id="2811922">=</span>&nbsp;<span class="ident" id="2811924">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811928">r</span><span class="op" id="2811929">,</span>&nbsp;<span class="ident" id="2811931">p</span>&nbsp;<span class="op" id="2811933">:=</span>&nbsp;<span class="ident" id="2811936">m</span><span class="op" id="2811937">,</span>&nbsp;<span class="ident" id="2811939">n</span><span class="op" id="2811940">-</span><span class="num" id="2811941">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811945">for</span>&nbsp;<span class="ident" id="2811949">start</span>&nbsp;<span class="op" id="2811955">&lt;</span>&nbsp;<span class="ident" id="2811957">r</span>&nbsp;<span class="op" id="2811959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2811964">c</span>&nbsp;<span class="op" id="2811966">:=</span>&nbsp;<span class="ident" id="2811969">start</span>&nbsp;<span class="op" id="2811975">+</span>&nbsp;<span class="op" id="2811977">(</span><span class="ident" id="2811978">r</span><span class="op" id="2811979">-</span><span class="ident" id="2811980">start</span><span class="op" id="2811985">)</span><span class="op" id="2811986">/</span><span class="num" id="2811987">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2811992">if</span>&nbsp;<span class="op" id="2811995">!</span><span class="ident" id="2811996">data</span><span class="op" id="2812000">.</span><span class="ident" id="2812001">Less</span><span class="op" id="2812005">(</span><span class="ident" id="2812006">p</span><span class="op" id="2812007">-</span><span class="ident" id="2812008">c</span><span class="op" id="2812009">,</span>&nbsp;<span class="ident" id="2812011">c</span><span class="op" id="2812012">)</span>&nbsp;<span class="op" id="2812014">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812020">start</span>&nbsp;<span class="op" id="2812026">=</span>&nbsp;<span class="ident" id="2812028">c</span>&nbsp;<span class="op" id="2812030">+</span>&nbsp;<span class="num" id="2812032">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812037">}</span>&nbsp;<span class="keyword" id="2812039">else</span>&nbsp;<span class="op" id="2812044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812050">r</span>&nbsp;<span class="op" id="2812052">=</span>&nbsp;<span class="ident" id="2812054">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812063">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812069">end</span>&nbsp;<span class="op" id="2812073">:=</span>&nbsp;<span class="ident" id="2812076">n</span>&nbsp;<span class="op" id="2812078">-</span>&nbsp;<span class="ident" id="2812080">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812087">rotate</span><span class="op" id="2812093">(</span><span class="ident" id="2812094">data</span><span class="op" id="2812098">,</span>&nbsp;<span class="ident" id="2812100">start</span><span class="op" id="2812105">,</span>&nbsp;<span class="ident" id="2812107">m</span><span class="op" id="2812108">,</span>&nbsp;<span class="ident" id="2812110">end</span><span class="op" id="2812113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812116">symMerge</span><span class="op" id="2812124">(</span><span class="ident" id="2812125">data</span><span class="op" id="2812129">,</span>&nbsp;<span class="ident" id="2812131">a</span><span class="op" id="2812132">,</span>&nbsp;<span class="ident" id="2812134">start</span><span class="op" id="2812139">,</span>&nbsp;<span class="ident" id="2812141">mid</span><span class="op" id="2812144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812147">symMerge</span><span class="op" id="2812155">(</span><span class="ident" id="2812156">data</span><span class="op" id="2812160">,</span>&nbsp;<span class="ident" id="2812162">mid</span><span class="op" id="2812165">,</span>&nbsp;<span class="ident" id="2812167">end</span><span class="op" id="2812170">,</span>&nbsp;<span class="ident" id="2812172">b</span><span class="op" id="2812173">)</span><br>
<span class="lineno">390</span><span class="op" id="2812175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2812178">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2812253">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2812308">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2812364">func</span>&nbsp;<span class="ident" id="2812369">rotate</span><span class="op" id="2812375">(</span><span class="ident" id="2812376">data</span>&nbsp;<span class="ident" id="2812381">Interface</span><span class="op" id="2812390">,</span>&nbsp;<span class="ident" id="2812392">a</span><span class="op" id="2812393">,</span>&nbsp;<span class="ident" id="2812395">m</span><span class="op" id="2812396">,</span>&nbsp;<span class="ident" id="2812398">b</span>&nbsp;<span class="builtintype" id="2812400">int</span><span class="op" id="2812403">)</span>&nbsp;<span class="op" id="2812405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812408">i</span>&nbsp;<span class="op" id="2812410">:=</span>&nbsp;<span class="ident" id="2812413">m</span>&nbsp;<span class="op" id="2812415">-</span>&nbsp;<span class="ident" id="2812417">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812420">if</span>&nbsp;<span class="ident" id="2812423">i</span>&nbsp;<span class="op" id="2812425">==</span>&nbsp;<span class="num" id="2812428">0</span>&nbsp;<span class="op" id="2812430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812434">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812442">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812445">j</span>&nbsp;<span class="op" id="2812447">:=</span>&nbsp;<span class="ident" id="2812450">b</span>&nbsp;<span class="op" id="2812452">-</span>&nbsp;<span class="ident" id="2812454">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812457">if</span>&nbsp;<span class="ident" id="2812460">j</span>&nbsp;<span class="op" id="2812462">==</span>&nbsp;<span class="num" id="2812465">0</span>&nbsp;<span class="op" id="2812467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812471">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812483">if</span>&nbsp;<span class="ident" id="2812486">i</span>&nbsp;<span class="op" id="2812488">==</span>&nbsp;<span class="ident" id="2812491">j</span>&nbsp;<span class="op" id="2812493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812497">swapRange</span><span class="op" id="2812506">(</span><span class="ident" id="2812507">data</span><span class="op" id="2812511">,</span>&nbsp;<span class="ident" id="2812513">a</span><span class="op" id="2812514">,</span>&nbsp;<span class="ident" id="2812516">m</span><span class="op" id="2812517">,</span>&nbsp;<span class="ident" id="2812519">i</span><span class="op" id="2812520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812524">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812536">p</span>&nbsp;<span class="op" id="2812538">:=</span>&nbsp;<span class="ident" id="2812541">a</span>&nbsp;<span class="op" id="2812543">+</span>&nbsp;<span class="ident" id="2812545">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812548">for</span>&nbsp;<span class="ident" id="2812552">i</span>&nbsp;<span class="op" id="2812554">!=</span>&nbsp;<span class="ident" id="2812557">j</span>&nbsp;<span class="op" id="2812559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2812563">if</span>&nbsp;<span class="ident" id="2812566">i</span>&nbsp;<span class="op" id="2812568">&gt;</span>&nbsp;<span class="ident" id="2812570">j</span>&nbsp;<span class="op" id="2812572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812577">swapRange</span><span class="op" id="2812586">(</span><span class="ident" id="2812587">data</span><span class="op" id="2812591">,</span>&nbsp;<span class="ident" id="2812593">p</span><span class="op" id="2812594">-</span><span class="ident" id="2812595">i</span><span class="op" id="2812596">,</span>&nbsp;<span class="ident" id="2812598">p</span><span class="op" id="2812599">,</span>&nbsp;<span class="ident" id="2812601">j</span><span class="op" id="2812602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812607">i</span>&nbsp;<span class="op" id="2812609">-=</span>&nbsp;<span class="ident" id="2812612">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812616">}</span>&nbsp;<span class="keyword" id="2812618">else</span>&nbsp;<span class="op" id="2812623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812628">swapRange</span><span class="op" id="2812637">(</span><span class="ident" id="2812638">data</span><span class="op" id="2812642">,</span>&nbsp;<span class="ident" id="2812644">p</span><span class="op" id="2812645">-</span><span class="ident" id="2812646">i</span><span class="op" id="2812647">,</span>&nbsp;<span class="ident" id="2812649">p</span><span class="op" id="2812650">+</span><span class="ident" id="2812651">j</span><span class="op" id="2812652">-</span><span class="ident" id="2812653">i</span><span class="op" id="2812654">,</span>&nbsp;<span class="ident" id="2812656">i</span><span class="op" id="2812657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812662">j</span>&nbsp;<span class="op" id="2812664">-=</span>&nbsp;<span class="ident" id="2812667">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2812674">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2812677">swapRange</span><span class="op" id="2812686">(</span><span class="ident" id="2812687">data</span><span class="op" id="2812691">,</span>&nbsp;<span class="ident" id="2812693">p</span><span class="op" id="2812694">-</span><span class="ident" id="2812695">i</span><span class="op" id="2812696">,</span>&nbsp;<span class="ident" id="2812698">p</span><span class="op" id="2812699">,</span>&nbsp;<span class="ident" id="2812701">i</span><span class="op" id="2812702">)</span><br>
<span class="lineno"></span><span class="op" id="2812704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2812707">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
