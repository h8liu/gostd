<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8238285">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8238340">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8238394">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8238445">package</span>&nbsp;<span class="ident" id="8238453">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8238461">import</span>&nbsp;<span class="op" id="8238468">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8238471">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8238480">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8238497">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8238518">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8238529">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8238539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8238542">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="8238587">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="8238614">func</span>&nbsp;<span class="ident" id="8238619">RemoveAll</span><span class="op" id="8238628">(</span><span class="op" id="8238629">)</span>&nbsp;<span class="op" id="8238631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238634">mutex</span><span class="op" id="8238639">.</span><span class="ident" id="8238640">Lock</span><span class="op" id="8238644">(</span><span class="op" id="8238645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238648">defer</span>&nbsp;<span class="ident" id="8238654">mutex</span><span class="op" id="8238659">.</span><span class="ident" id="8238660">Unlock</span><span class="op" id="8238666">(</span><span class="op" id="8238667">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238670">vars</span>&nbsp;<span class="op" id="8238675">=</span>&nbsp;<span class="builtinfunc" id="8238677">make</span><span class="op" id="8238681">(</span><span class="keyword" id="8238682">map</span><span class="op" id="8238685">[</span><span class="builtintype" id="8238686">string</span><span class="op" id="8238692">]</span><span class="ident" id="8238693">Var</span><span class="op" id="8238696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238699">varKeys</span>&nbsp;<span class="op" id="8238707">=</span>&nbsp;<span class="ident" id="8238709">nil</span><br>
<span class="lineno"></span><span class="op" id="8238713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8238716">func</span>&nbsp;<span class="ident" id="8238721">TestInt</span><span class="op" id="8238728">(</span><span class="ident" id="8238729">t</span>&nbsp;<span class="op" id="8238731">*</span><span class="ident" id="8238732">testing</span><span class="op" id="8238739">.</span><span class="ident" id="8238740">T</span><span class="op" id="8238741">)</span>&nbsp;<span class="op" id="8238743">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238746">RemoveAll</span><span class="op" id="8238755">(</span><span class="op" id="8238756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238759">reqs</span>&nbsp;<span class="op" id="8238764">:=</span>&nbsp;<span class="ident" id="8238767">NewInt</span><span class="op" id="8238773">(</span><span class="string" id="8238774">&#34;requests&#34;</span><span class="op" id="8238784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238787">if</span>&nbsp;<span class="ident" id="8238790">reqs</span><span class="op" id="8238794">.</span><span class="ident" id="8238795">i</span>&nbsp;<span class="op" id="8238797">!=</span>&nbsp;<span class="num" id="8238800">0</span>&nbsp;<span class="op" id="8238802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238806">t</span><span class="op" id="8238807">.</span><span class="ident" id="8238808">Errorf</span><span class="op" id="8238814">(</span><span class="string" id="8238815">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8238836">,</span>&nbsp;<span class="ident" id="8238838">reqs</span><span class="op" id="8238842">.</span><span class="ident" id="8238843">i</span><span class="op" id="8238844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238847">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238850">if</span>&nbsp;<span class="ident" id="8238853">reqs</span>&nbsp;<span class="op" id="8238858">!=</span>&nbsp;<span class="ident" id="8238861">Get</span><span class="op" id="8238864">(</span><span class="string" id="8238865">&#34;requests&#34;</span><span class="op" id="8238875">)</span><span class="op" id="8238876">.</span><span class="op" id="8238877">(</span><span class="op" id="8238878">*</span><span class="ident" id="8238879">Int</span><span class="op" id="8238882">)</span>&nbsp;<span class="op" id="8238884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238888">t</span><span class="op" id="8238889">.</span><span class="ident" id="8238890">Errorf</span><span class="op" id="8238896">(</span><span class="string" id="8238897">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8238912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238919">reqs</span><span class="op" id="8238923">.</span><span class="ident" id="8238924">Add</span><span class="op" id="8238927">(</span><span class="num" id="8238928">1</span><span class="op" id="8238929">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238932">reqs</span><span class="op" id="8238936">.</span><span class="ident" id="8238937">Add</span><span class="op" id="8238940">(</span><span class="num" id="8238941">3</span><span class="op" id="8238942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238945">if</span>&nbsp;<span class="ident" id="8238948">reqs</span><span class="op" id="8238952">.</span><span class="ident" id="8238953">i</span>&nbsp;<span class="op" id="8238955">!=</span>&nbsp;<span class="num" id="8238958">4</span>&nbsp;<span class="op" id="8238960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238964">t</span><span class="op" id="8238965">.</span><span class="ident" id="8238966">Errorf</span><span class="op" id="8238972">(</span><span class="string" id="8238973">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8238994">,</span>&nbsp;<span class="ident" id="8238996">reqs</span><span class="op" id="8239000">.</span><span class="ident" id="8239001">i</span><span class="op" id="8239002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239009">if</span>&nbsp;<span class="ident" id="8239012">s</span>&nbsp;<span class="op" id="8239014">:=</span>&nbsp;<span class="ident" id="8239017">reqs</span><span class="op" id="8239021">.</span><span class="ident" id="8239022">String</span><span class="op" id="8239028">(</span><span class="op" id="8239029">)</span><span class="op" id="8239030">;</span>&nbsp;<span class="ident" id="8239032">s</span>&nbsp;<span class="op" id="8239034">!=</span>&nbsp;<span class="string" id="8239037">&#34;4&#34;</span>&nbsp;<span class="op" id="8239041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239045">t</span><span class="op" id="8239046">.</span><span class="ident" id="8239047">Errorf</span><span class="op" id="8239053">(</span><span class="string" id="8239054">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="8239086">,</span>&nbsp;<span class="ident" id="8239088">s</span><span class="op" id="8239089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239096">reqs</span><span class="op" id="8239100">.</span><span class="ident" id="8239101">Set</span><span class="op" id="8239104">(</span><span class="op" id="8239105">-</span><span class="num" id="8239106">2</span><span class="op" id="8239107">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239110">if</span>&nbsp;<span class="ident" id="8239113">reqs</span><span class="op" id="8239117">.</span><span class="ident" id="8239118">i</span>&nbsp;<span class="op" id="8239120">!=</span>&nbsp;<span class="op" id="8239123">-</span><span class="num" id="8239124">2</span>&nbsp;<span class="op" id="8239126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239130">t</span><span class="op" id="8239131">.</span><span class="ident" id="8239132">Errorf</span><span class="op" id="8239138">(</span><span class="string" id="8239139">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="8239161">,</span>&nbsp;<span class="ident" id="8239163">reqs</span><span class="op" id="8239167">.</span><span class="ident" id="8239168">i</span><span class="op" id="8239169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239172">}</span><br>
<span class="lineno"></span><span class="op" id="8239174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8239177">func</span>&nbsp;<span class="ident" id="8239182">TestFloat</span><span class="op" id="8239191">(</span><span class="ident" id="8239192">t</span>&nbsp;<span class="op" id="8239194">*</span><span class="ident" id="8239195">testing</span><span class="op" id="8239202">.</span><span class="ident" id="8239203">T</span><span class="op" id="8239204">)</span>&nbsp;<span class="op" id="8239206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239209">RemoveAll</span><span class="op" id="8239218">(</span><span class="op" id="8239219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239222">reqs</span>&nbsp;<span class="op" id="8239227">:=</span>&nbsp;<span class="ident" id="8239230">NewFloat</span><span class="op" id="8239238">(</span><span class="string" id="8239239">&#34;requests-float&#34;</span><span class="op" id="8239255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239258">if</span>&nbsp;<span class="ident" id="8239261">reqs</span><span class="op" id="8239265">.</span><span class="ident" id="8239266">f</span>&nbsp;<span class="op" id="8239268">!=</span>&nbsp;<span class="num" id="8239271">0.0</span>&nbsp;<span class="op" id="8239275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239279">t</span><span class="op" id="8239280">.</span><span class="ident" id="8239281">Errorf</span><span class="op" id="8239287">(</span><span class="string" id="8239288">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8239309">,</span>&nbsp;<span class="ident" id="8239311">reqs</span><span class="op" id="8239315">.</span><span class="ident" id="8239316">f</span><span class="op" id="8239317">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239323">if</span>&nbsp;<span class="ident" id="8239326">reqs</span>&nbsp;<span class="op" id="8239331">!=</span>&nbsp;<span class="ident" id="8239334">Get</span><span class="op" id="8239337">(</span><span class="string" id="8239338">&#34;requests-float&#34;</span><span class="op" id="8239354">)</span><span class="op" id="8239355">.</span><span class="op" id="8239356">(</span><span class="op" id="8239357">*</span><span class="ident" id="8239358">Float</span><span class="op" id="8239363">)</span>&nbsp;<span class="op" id="8239365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239369">t</span><span class="op" id="8239370">.</span><span class="ident" id="8239371">Errorf</span><span class="op" id="8239377">(</span><span class="string" id="8239378">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8239393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239400">reqs</span><span class="op" id="8239404">.</span><span class="ident" id="8239405">Add</span><span class="op" id="8239408">(</span><span class="num" id="8239409">1.5</span><span class="op" id="8239412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239415">reqs</span><span class="op" id="8239419">.</span><span class="ident" id="8239420">Add</span><span class="op" id="8239423">(</span><span class="num" id="8239424">1.25</span><span class="op" id="8239428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239431">if</span>&nbsp;<span class="ident" id="8239434">reqs</span><span class="op" id="8239438">.</span><span class="ident" id="8239439">f</span>&nbsp;<span class="op" id="8239441">!=</span>&nbsp;<span class="num" id="8239444">2.75</span>&nbsp;<span class="op" id="8239449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239453">t</span><span class="op" id="8239454">.</span><span class="ident" id="8239455">Errorf</span><span class="op" id="8239461">(</span><span class="string" id="8239462">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="8239486">,</span>&nbsp;<span class="ident" id="8239488">reqs</span><span class="op" id="8239492">.</span><span class="ident" id="8239493">f</span><span class="op" id="8239494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239497">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239501">if</span>&nbsp;<span class="ident" id="8239504">s</span>&nbsp;<span class="op" id="8239506">:=</span>&nbsp;<span class="ident" id="8239509">reqs</span><span class="op" id="8239513">.</span><span class="ident" id="8239514">String</span><span class="op" id="8239520">(</span><span class="op" id="8239521">)</span><span class="op" id="8239522">;</span>&nbsp;<span class="ident" id="8239524">s</span>&nbsp;<span class="op" id="8239526">!=</span>&nbsp;<span class="string" id="8239529">&#34;2.75&#34;</span>&nbsp;<span class="op" id="8239536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239540">t</span><span class="op" id="8239541">.</span><span class="ident" id="8239542">Errorf</span><span class="op" id="8239548">(</span><span class="string" id="8239549">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="8239584">,</span>&nbsp;<span class="ident" id="8239586">s</span><span class="op" id="8239587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239594">reqs</span><span class="op" id="8239598">.</span><span class="ident" id="8239599">Add</span><span class="op" id="8239602">(</span><span class="op" id="8239603">-</span><span class="num" id="8239604">2</span><span class="op" id="8239605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239608">if</span>&nbsp;<span class="ident" id="8239611">reqs</span><span class="op" id="8239615">.</span><span class="ident" id="8239616">f</span>&nbsp;<span class="op" id="8239618">!=</span>&nbsp;<span class="num" id="8239621">0.75</span>&nbsp;<span class="op" id="8239626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239630">t</span><span class="op" id="8239631">.</span><span class="ident" id="8239632">Errorf</span><span class="op" id="8239638">(</span><span class="string" id="8239639">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="8239663">,</span>&nbsp;<span class="ident" id="8239665">reqs</span><span class="op" id="8239669">.</span><span class="ident" id="8239670">f</span><span class="op" id="8239671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239674">}</span><br>
<span class="lineno"></span><span class="op" id="8239676">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8239679">func</span>&nbsp;<span class="ident" id="8239684">TestString</span><span class="op" id="8239694">(</span><span class="ident" id="8239695">t</span>&nbsp;<span class="op" id="8239697">*</span><span class="ident" id="8239698">testing</span><span class="op" id="8239705">.</span><span class="ident" id="8239706">T</span><span class="op" id="8239707">)</span>&nbsp;<span class="op" id="8239709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239712">RemoveAll</span><span class="op" id="8239721">(</span><span class="op" id="8239722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239725">name</span>&nbsp;<span class="op" id="8239730">:=</span>&nbsp;<span class="ident" id="8239733">NewString</span><span class="op" id="8239742">(</span><span class="string" id="8239743">&#34;my-name&#34;</span><span class="op" id="8239752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239755">if</span>&nbsp;<span class="ident" id="8239758">name</span><span class="op" id="8239762">.</span><span class="ident" id="8239763">s</span>&nbsp;<span class="op" id="8239765">!=</span>&nbsp;<span class="string" id="8239768">&#34;&#34;</span>&nbsp;<span class="op" id="8239771">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239775">t</span><span class="op" id="8239776">.</span><span class="ident" id="8239777">Errorf</span><span class="op" id="8239783">(</span><span class="string" id="8239784">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="8239808">,</span>&nbsp;<span class="ident" id="8239810">name</span><span class="op" id="8239814">.</span><span class="ident" id="8239815">s</span><span class="op" id="8239816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239823">name</span><span class="op" id="8239827">.</span><span class="ident" id="8239828">Set</span><span class="op" id="8239831">(</span><span class="string" id="8239832">&#34;Mike&#34;</span><span class="op" id="8239838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239841">if</span>&nbsp;<span class="ident" id="8239844">name</span><span class="op" id="8239848">.</span><span class="ident" id="8239849">s</span>&nbsp;<span class="op" id="8239851">!=</span>&nbsp;<span class="string" id="8239854">&#34;Mike&#34;</span>&nbsp;<span class="op" id="8239861">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239865">t</span><span class="op" id="8239866">.</span><span class="ident" id="8239867">Errorf</span><span class="op" id="8239873">(</span><span class="string" id="8239874">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="8239902">,</span>&nbsp;<span class="ident" id="8239904">name</span><span class="op" id="8239908">.</span><span class="ident" id="8239909">s</span><span class="op" id="8239910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8239917">if</span>&nbsp;<span class="ident" id="8239920">s</span>&nbsp;<span class="op" id="8239922">:=</span>&nbsp;<span class="ident" id="8239925">name</span><span class="op" id="8239929">.</span><span class="ident" id="8239930">String</span><span class="op" id="8239936">(</span><span class="op" id="8239937">)</span><span class="op" id="8239938">;</span>&nbsp;<span class="ident" id="8239940">s</span>&nbsp;<span class="op" id="8239942">!=</span>&nbsp;<span class="string" id="8239945">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="8239956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239960">t</span><span class="op" id="8239961">.</span><span class="ident" id="8239962">Errorf</span><span class="op" id="8239968">(</span><span class="string" id="8239969">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="8240008">,</span>&nbsp;<span class="ident" id="8240010">s</span><span class="op" id="8240011">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240014">}</span><br>
<span class="lineno"></span><span class="op" id="8240016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8240019">func</span>&nbsp;<span class="ident" id="8240024">TestMapCounter</span><span class="op" id="8240038">(</span><span class="ident" id="8240039">t</span>&nbsp;<span class="op" id="8240041">*</span><span class="ident" id="8240042">testing</span><span class="op" id="8240049">.</span><span class="ident" id="8240050">T</span><span class="op" id="8240051">)</span>&nbsp;<span class="op" id="8240053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240056">RemoveAll</span><span class="op" id="8240065">(</span><span class="op" id="8240066">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240069">colors</span>&nbsp;<span class="op" id="8240076">:=</span>&nbsp;<span class="ident" id="8240079">NewMap</span><span class="op" id="8240085">(</span><span class="string" id="8240086">&#34;bike-shed-colors&#34;</span><span class="op" id="8240104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240108">colors</span><span class="op" id="8240114">.</span><span class="ident" id="8240115">Add</span><span class="op" id="8240118">(</span><span class="string" id="8240119">&#34;red&#34;</span><span class="op" id="8240124">,</span>&nbsp;<span class="num" id="8240126">1</span><span class="op" id="8240127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240130">colors</span><span class="op" id="8240136">.</span><span class="ident" id="8240137">Add</span><span class="op" id="8240140">(</span><span class="string" id="8240141">&#34;red&#34;</span><span class="op" id="8240146">,</span>&nbsp;<span class="num" id="8240148">2</span><span class="op" id="8240149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240152">colors</span><span class="op" id="8240158">.</span><span class="ident" id="8240159">Add</span><span class="op" id="8240162">(</span><span class="string" id="8240163">&#34;blue&#34;</span><span class="op" id="8240169">,</span>&nbsp;<span class="num" id="8240171">4</span><span class="op" id="8240172">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240175">colors</span><span class="op" id="8240181">.</span><span class="ident" id="8240182">AddFloat</span><span class="op" id="8240190">(</span><span class="string" id="8240191">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8240207">,</span>&nbsp;<span class="num" id="8240209">4.125</span><span class="op" id="8240214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240217">if</span>&nbsp;<span class="ident" id="8240220">x</span>&nbsp;<span class="op" id="8240222">:=</span>&nbsp;<span class="ident" id="8240225">colors</span><span class="op" id="8240231">.</span><span class="ident" id="8240232">m</span><span class="op" id="8240233">[</span><span class="string" id="8240234">&#34;red&#34;</span><span class="op" id="8240239">]</span><span class="op" id="8240240">.</span><span class="op" id="8240241">(</span><span class="op" id="8240242">*</span><span class="ident" id="8240243">Int</span><span class="op" id="8240246">)</span><span class="op" id="8240247">.</span><span class="ident" id="8240248">i</span><span class="op" id="8240249">;</span>&nbsp;<span class="ident" id="8240251">x</span>&nbsp;<span class="op" id="8240253">!=</span>&nbsp;<span class="num" id="8240256">3</span>&nbsp;<span class="op" id="8240258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240262">t</span><span class="op" id="8240263">.</span><span class="ident" id="8240264">Errorf</span><span class="op" id="8240270">(</span><span class="string" id="8240271">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8240303">,</span>&nbsp;<span class="ident" id="8240305">x</span><span class="op" id="8240306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240312">if</span>&nbsp;<span class="ident" id="8240315">x</span>&nbsp;<span class="op" id="8240317">:=</span>&nbsp;<span class="ident" id="8240320">colors</span><span class="op" id="8240326">.</span><span class="ident" id="8240327">m</span><span class="op" id="8240328">[</span><span class="string" id="8240329">&#34;blue&#34;</span><span class="op" id="8240335">]</span><span class="op" id="8240336">.</span><span class="op" id="8240337">(</span><span class="op" id="8240338">*</span><span class="ident" id="8240339">Int</span><span class="op" id="8240342">)</span><span class="op" id="8240343">.</span><span class="ident" id="8240344">i</span><span class="op" id="8240345">;</span>&nbsp;<span class="ident" id="8240347">x</span>&nbsp;<span class="op" id="8240349">!=</span>&nbsp;<span class="num" id="8240352">4</span>&nbsp;<span class="op" id="8240354">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240358">t</span><span class="op" id="8240359">.</span><span class="ident" id="8240360">Errorf</span><span class="op" id="8240366">(</span><span class="string" id="8240367">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8240400">,</span>&nbsp;<span class="ident" id="8240402">x</span><span class="op" id="8240403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240409">if</span>&nbsp;<span class="ident" id="8240412">x</span>&nbsp;<span class="op" id="8240414">:=</span>&nbsp;<span class="ident" id="8240417">colors</span><span class="op" id="8240423">.</span><span class="ident" id="8240424">m</span><span class="op" id="8240425">[</span><span class="string" id="8240426">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8240442">]</span><span class="op" id="8240443">.</span><span class="op" id="8240444">(</span><span class="op" id="8240445">*</span><span class="ident" id="8240446">Float</span><span class="op" id="8240451">)</span><span class="op" id="8240452">.</span><span class="ident" id="8240453">f</span><span class="op" id="8240454">;</span>&nbsp;<span class="ident" id="8240456">x</span>&nbsp;<span class="op" id="8240458">!=</span>&nbsp;<span class="num" id="8240461">4.125</span>&nbsp;<span class="op" id="8240467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240471">t</span><span class="op" id="8240472">.</span><span class="ident" id="8240473">Errorf</span><span class="op" id="8240479">(</span><span class="string" id="8240480">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="8240525">,</span>&nbsp;<span class="ident" id="8240527">x</span><span class="op" id="8240528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240531">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8240535">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8240588">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240637">s</span>&nbsp;<span class="op" id="8240639">:=</span>&nbsp;<span class="ident" id="8240642">colors</span><span class="op" id="8240648">.</span><span class="ident" id="8240649">String</span><span class="op" id="8240655">(</span><span class="op" id="8240656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240659">var</span>&nbsp;<span class="ident" id="8240663">j</span>&nbsp;<span class="keyword" id="8240665">interface</span><span class="op" id="8240674">{</span><span class="op" id="8240675">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240678">err</span>&nbsp;<span class="op" id="8240682">:=</span>&nbsp;<span class="ident" id="8240685">json</span><span class="op" id="8240689">.</span><span class="ident" id="8240690">Unmarshal</span><span class="op" id="8240699">(</span><span class="op" id="8240700">[</span><span class="op" id="8240701">]</span><span class="builtintype" id="8240702">byte</span><span class="op" id="8240706">(</span><span class="ident" id="8240707">s</span><span class="op" id="8240708">)</span><span class="op" id="8240709">,</span>&nbsp;<span class="op" id="8240711">&amp;</span><span class="ident" id="8240712">j</span><span class="op" id="8240713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240716">if</span>&nbsp;<span class="ident" id="8240719">err</span>&nbsp;<span class="op" id="8240723">!=</span>&nbsp;<span class="ident" id="8240726">nil</span>&nbsp;<span class="op" id="8240730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240734">t</span><span class="op" id="8240735">.</span><span class="ident" id="8240736">Errorf</span><span class="op" id="8240742">(</span><span class="string" id="8240743">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="8240781">,</span>&nbsp;<span class="ident" id="8240783">err</span><span class="op" id="8240786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240792">m</span><span class="op" id="8240793">,</span>&nbsp;<span class="ident" id="8240795">ok</span>&nbsp;<span class="op" id="8240798">:=</span>&nbsp;<span class="ident" id="8240801">j</span><span class="op" id="8240802">.</span><span class="op" id="8240803">(</span><span class="keyword" id="8240804">map</span><span class="op" id="8240807">[</span><span class="builtintype" id="8240808">string</span><span class="op" id="8240814">]</span><span class="keyword" id="8240815">interface</span><span class="op" id="8240824">{</span><span class="op" id="8240825">}</span><span class="op" id="8240826">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240829">if</span>&nbsp;<span class="op" id="8240832">!</span><span class="ident" id="8240833">ok</span>&nbsp;<span class="op" id="8240836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240840">t</span><span class="op" id="8240841">.</span><span class="ident" id="8240842">Error</span><span class="op" id="8240847">(</span><span class="string" id="8240848">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="8240887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240893">red</span>&nbsp;<span class="op" id="8240897">:=</span>&nbsp;<span class="ident" id="8240900">m</span><span class="op" id="8240901">[</span><span class="string" id="8240902">&#34;red&#34;</span><span class="op" id="8240907">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240910">x</span><span class="op" id="8240911">,</span>&nbsp;<span class="ident" id="8240913">ok</span>&nbsp;<span class="op" id="8240916">:=</span>&nbsp;<span class="ident" id="8240919">red</span><span class="op" id="8240922">.</span><span class="op" id="8240923">(</span><span class="builtintype" id="8240924">float64</span><span class="op" id="8240931">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240934">if</span>&nbsp;<span class="op" id="8240937">!</span><span class="ident" id="8240938">ok</span>&nbsp;<span class="op" id="8240941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8240945">t</span><span class="op" id="8240946">.</span><span class="ident" id="8240947">Error</span><span class="op" id="8240952">(</span><span class="string" id="8240953">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="8240982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8240988">if</span>&nbsp;<span class="ident" id="8240991">x</span>&nbsp;<span class="op" id="8240993">!=</span>&nbsp;<span class="num" id="8240996">3</span>&nbsp;<span class="op" id="8240998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241002">t</span><span class="op" id="8241003">.</span><span class="ident" id="8241004">Errorf</span><span class="op" id="8241010">(</span><span class="string" id="8241011">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8241029">,</span>&nbsp;<span class="ident" id="8241031">x</span><span class="op" id="8241032">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241035">}</span><br>
<span class="lineno"></span><span class="op" id="8241037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241040">func</span>&nbsp;<span class="ident" id="8241045">TestFunc</span><span class="op" id="8241053">(</span><span class="ident" id="8241054">t</span>&nbsp;<span class="op" id="8241056">*</span><span class="ident" id="8241057">testing</span><span class="op" id="8241064">.</span><span class="ident" id="8241065">T</span><span class="op" id="8241066">)</span>&nbsp;<span class="op" id="8241068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241071">RemoveAll</span><span class="op" id="8241080">(</span><span class="op" id="8241081">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8241084">var</span>&nbsp;<span class="ident" id="8241088">x</span>&nbsp;<span class="keyword" id="8241090">interface</span><span class="op" id="8241099">{</span><span class="op" id="8241100">}</span>&nbsp;<span class="op" id="8241102">=</span>&nbsp;<span class="op" id="8241104">[</span><span class="op" id="8241105">]</span><span class="builtintype" id="8241106">string</span><span class="op" id="8241112">{</span><span class="string" id="8241113">&#34;a&#34;</span><span class="op" id="8241116">,</span>&nbsp;<span class="string" id="8241118">&#34;b&#34;</span><span class="op" id="8241121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241124">f</span>&nbsp;<span class="op" id="8241126">:=</span>&nbsp;<span class="ident" id="8241129">Func</span><span class="op" id="8241133">(</span><span class="keyword" id="8241134">func</span><span class="op" id="8241138">(</span><span class="op" id="8241139">)</span>&nbsp;<span class="keyword" id="8241141">interface</span><span class="op" id="8241150">{</span><span class="op" id="8241151">}</span>&nbsp;<span class="op" id="8241153">{</span>&nbsp;<span class="keyword" id="8241155">return</span>&nbsp;<span class="ident" id="8241162">x</span>&nbsp;<span class="op" id="8241164">}</span><span class="op" id="8241165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8241168">if</span>&nbsp;<span class="ident" id="8241171">s</span><span class="op" id="8241172">,</span>&nbsp;<span class="ident" id="8241174">exp</span>&nbsp;<span class="op" id="8241178">:=</span>&nbsp;<span class="ident" id="8241181">f</span><span class="op" id="8241182">.</span><span class="ident" id="8241183">String</span><span class="op" id="8241189">(</span><span class="op" id="8241190">)</span><span class="op" id="8241191">,</span>&nbsp;<span class="string" id="8241193">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="8241204">;</span>&nbsp;<span class="ident" id="8241206">s</span>&nbsp;<span class="op" id="8241208">!=</span>&nbsp;<span class="ident" id="8241211">exp</span>&nbsp;<span class="op" id="8241215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241219">t</span><span class="op" id="8241220">.</span><span class="ident" id="8241221">Errorf</span><span class="op" id="8241227">(</span><span class="string" id="8241228">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8241254">,</span>&nbsp;<span class="ident" id="8241256">s</span><span class="op" id="8241257">,</span>&nbsp;<span class="ident" id="8241259">exp</span><span class="op" id="8241262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241265">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241269">x</span>&nbsp;<span class="op" id="8241271">=</span>&nbsp;<span class="num" id="8241273">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8241277">if</span>&nbsp;<span class="ident" id="8241280">s</span><span class="op" id="8241281">,</span>&nbsp;<span class="ident" id="8241283">exp</span>&nbsp;<span class="op" id="8241287">:=</span>&nbsp;<span class="ident" id="8241290">f</span><span class="op" id="8241291">.</span><span class="ident" id="8241292">String</span><span class="op" id="8241298">(</span><span class="op" id="8241299">)</span><span class="op" id="8241300">,</span>&nbsp;<span class="string" id="8241302">`17`</span><span class="op" id="8241306">;</span>&nbsp;<span class="ident" id="8241308">s</span>&nbsp;<span class="op" id="8241310">!=</span>&nbsp;<span class="ident" id="8241313">exp</span>&nbsp;<span class="op" id="8241317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241321">t</span><span class="op" id="8241322">.</span><span class="ident" id="8241323">Errorf</span><span class="op" id="8241329">(</span><span class="string" id="8241330">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8241356">,</span>&nbsp;<span class="ident" id="8241358">s</span><span class="op" id="8241359">,</span>&nbsp;<span class="ident" id="8241361">exp</span><span class="op" id="8241364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241367">}</span><br>
<span class="lineno">145</span><span class="op" id="8241369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241372">func</span>&nbsp;<span class="ident" id="8241377">TestHandler</span><span class="op" id="8241388">(</span><span class="ident" id="8241389">t</span>&nbsp;<span class="op" id="8241391">*</span><span class="ident" id="8241392">testing</span><span class="op" id="8241399">.</span><span class="ident" id="8241400">T</span><span class="op" id="8241401">)</span>&nbsp;<span class="op" id="8241403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241406">RemoveAll</span><span class="op" id="8241415">(</span><span class="op" id="8241416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241419">m</span>&nbsp;<span class="op" id="8241421">:=</span>&nbsp;<span class="ident" id="8241424">NewMap</span><span class="op" id="8241430">(</span><span class="string" id="8241431">&#34;map1&#34;</span><span class="op" id="8241437">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241440">m</span><span class="op" id="8241441">.</span><span class="ident" id="8241442">Add</span><span class="op" id="8241445">(</span><span class="string" id="8241446">&#34;a&#34;</span><span class="op" id="8241449">,</span>&nbsp;<span class="num" id="8241451">1</span><span class="op" id="8241452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241455">m</span><span class="op" id="8241456">.</span><span class="ident" id="8241457">Add</span><span class="op" id="8241460">(</span><span class="string" id="8241461">&#34;z&#34;</span><span class="op" id="8241464">,</span>&nbsp;<span class="num" id="8241466">2</span><span class="op" id="8241467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241470">m2</span>&nbsp;<span class="op" id="8241473">:=</span>&nbsp;<span class="ident" id="8241476">NewMap</span><span class="op" id="8241482">(</span><span class="string" id="8241483">&#34;map2&#34;</span><span class="op" id="8241489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8241492">for</span>&nbsp;<span class="ident" id="8241496">i</span>&nbsp;<span class="op" id="8241498">:=</span>&nbsp;<span class="num" id="8241501">0</span><span class="op" id="8241502">;</span>&nbsp;<span class="ident" id="8241504">i</span>&nbsp;<span class="op" id="8241506">&lt;</span>&nbsp;<span class="num" id="8241508">9</span><span class="op" id="8241509">;</span>&nbsp;<span class="ident" id="8241511">i</span><span class="op" id="8241512">++</span>&nbsp;<span class="op" id="8241515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241519">m2</span><span class="op" id="8241521">.</span><span class="ident" id="8241522">Add</span><span class="op" id="8241525">(</span><span class="ident" id="8241526">strconv</span><span class="op" id="8241533">.</span><span class="ident" id="8241534">Itoa</span><span class="op" id="8241538">(</span><span class="ident" id="8241539">i</span><span class="op" id="8241540">)</span><span class="op" id="8241541">,</span>&nbsp;<span class="ident" id="8241543">int64</span><span class="op" id="8241548">(</span><span class="ident" id="8241549">i</span><span class="op" id="8241550">)</span><span class="op" id="8241551">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241557">rr</span>&nbsp;<span class="op" id="8241560">:=</span>&nbsp;<span class="ident" id="8241563">httptest</span><span class="op" id="8241571">.</span><span class="ident" id="8241572">NewRecorder</span><span class="op" id="8241583">(</span><span class="op" id="8241584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241587">rr</span><span class="op" id="8241589">.</span><span class="ident" id="8241590">Body</span>&nbsp;<span class="op" id="8241595">=</span>&nbsp;<span class="builtinfunc" id="8241597">new</span><span class="op" id="8241600">(</span><span class="ident" id="8241601">bytes</span><span class="op" id="8241606">.</span><span class="ident" id="8241607">Buffer</span><span class="op" id="8241613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241616">expvarHandler</span><span class="op" id="8241629">(</span><span class="ident" id="8241630">rr</span><span class="op" id="8241632">,</span>&nbsp;<span class="ident" id="8241634">nil</span><span class="op" id="8241637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241640">want</span>&nbsp;<span class="op" id="8241645">:=</span>&nbsp;<span class="string" id="8241648">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8241763">if</span>&nbsp;<span class="ident" id="8241766">got</span>&nbsp;<span class="op" id="8241770">:=</span>&nbsp;<span class="ident" id="8241773">rr</span><span class="op" id="8241775">.</span><span class="ident" id="8241776">Body</span><span class="op" id="8241780">.</span><span class="ident" id="8241781">String</span><span class="op" id="8241787">(</span><span class="op" id="8241788">)</span><span class="op" id="8241789">;</span>&nbsp;<span class="ident" id="8241791">got</span>&nbsp;<span class="op" id="8241795">!=</span>&nbsp;<span class="ident" id="8241798">want</span>&nbsp;<span class="op" id="8241803">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8241807">t</span><span class="op" id="8241808">.</span><span class="ident" id="8241809">Errorf</span><span class="op" id="8241815">(</span><span class="string" id="8241816">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="8241852">,</span>&nbsp;<span class="ident" id="8241854">got</span><span class="op" id="8241857">,</span>&nbsp;<span class="ident" id="8241859">want</span><span class="op" id="8241863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241866">}</span><br>
<span class="lineno"></span><span class="op" id="8241868">}</span>
</div>
</body>
</html>
