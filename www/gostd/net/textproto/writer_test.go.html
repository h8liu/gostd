<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8452773">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8452829">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8452883">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8452934">package</span>&nbsp;<span class="ident" id="8452942">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8452953">import</span>&nbsp;<span class="op" id="8452960">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8452963">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8452972">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8452981">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8452991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8452994">func</span>&nbsp;<span class="ident" id="8452999">TestPrintfLine</span><span class="op" id="8453013">(</span><span class="ident" id="8453014">t</span>&nbsp;<span class="op" id="8453016">*</span><span class="ident" id="8453017">testing</span><span class="op" id="8453024">.</span><span class="ident" id="8453025">T</span><span class="op" id="8453026">)</span>&nbsp;<span class="op" id="8453028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8453031">var</span>&nbsp;<span class="ident" id="8453035">buf</span>&nbsp;<span class="ident" id="8453039">bytes</span><span class="op" id="8453044">.</span><span class="ident" id="8453045">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453053">w</span>&nbsp;<span class="op" id="8453055">:=</span>&nbsp;<span class="ident" id="8453058">NewWriter</span><span class="op" id="8453067">(</span><span class="ident" id="8453068">bufio</span><span class="op" id="8453073">.</span><span class="ident" id="8453074">NewWriter</span><span class="op" id="8453083">(</span><span class="op" id="8453084">&amp;</span><span class="ident" id="8453085">buf</span><span class="op" id="8453088">)</span><span class="op" id="8453089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453092">err</span>&nbsp;<span class="op" id="8453096">:=</span>&nbsp;<span class="ident" id="8453099">w</span><span class="op" id="8453100">.</span><span class="ident" id="8453101">PrintfLine</span><span class="op" id="8453111">(</span><span class="string" id="8453112">&#34;foo&nbsp;%d&#34;</span><span class="op" id="8453120">,</span>&nbsp;<span class="num" id="8453122">123</span><span class="op" id="8453125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8453128">if</span>&nbsp;<span class="ident" id="8453131">s</span>&nbsp;<span class="op" id="8453133">:=</span>&nbsp;<span class="ident" id="8453136">buf</span><span class="op" id="8453139">.</span><span class="ident" id="8453140">String</span><span class="op" id="8453146">(</span><span class="op" id="8453147">)</span><span class="op" id="8453148">;</span>&nbsp;<span class="ident" id="8453150">s</span>&nbsp;<span class="op" id="8453152">!=</span>&nbsp;<span class="string" id="8453155">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="8453169">||</span>&nbsp;<span class="ident" id="8453172">err</span>&nbsp;<span class="op" id="8453176">!=</span>&nbsp;<span class="ident" id="8453179">nil</span>&nbsp;<span class="op" id="8453183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453187">t</span><span class="op" id="8453188">.</span><span class="ident" id="8453189">Fatalf</span><span class="op" id="8453195">(</span><span class="string" id="8453196">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="8453210">,</span>&nbsp;<span class="ident" id="8453212">s</span><span class="op" id="8453213">,</span>&nbsp;<span class="ident" id="8453215">err</span><span class="op" id="8453218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8453221">}</span><br>
<span class="lineno">20</span><span class="op" id="8453223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8453226">func</span>&nbsp;<span class="ident" id="8453231">TestDotWriter</span><span class="op" id="8453244">(</span><span class="ident" id="8453245">t</span>&nbsp;<span class="op" id="8453247">*</span><span class="ident" id="8453248">testing</span><span class="op" id="8453255">.</span><span class="ident" id="8453256">T</span><span class="op" id="8453257">)</span>&nbsp;<span class="op" id="8453259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8453262">var</span>&nbsp;<span class="ident" id="8453266">buf</span>&nbsp;<span class="ident" id="8453270">bytes</span><span class="op" id="8453275">.</span><span class="ident" id="8453276">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453284">w</span>&nbsp;<span class="op" id="8453286">:=</span>&nbsp;<span class="ident" id="8453289">NewWriter</span><span class="op" id="8453298">(</span><span class="ident" id="8453299">bufio</span><span class="op" id="8453304">.</span><span class="ident" id="8453305">NewWriter</span><span class="op" id="8453314">(</span><span class="op" id="8453315">&amp;</span><span class="ident" id="8453316">buf</span><span class="op" id="8453319">)</span><span class="op" id="8453320">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453323">d</span>&nbsp;<span class="op" id="8453325">:=</span>&nbsp;<span class="ident" id="8453328">w</span><span class="op" id="8453329">.</span><span class="ident" id="8453330">DotWriter</span><span class="op" id="8453339">(</span><span class="op" id="8453340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453343">n</span><span class="op" id="8453344">,</span>&nbsp;<span class="ident" id="8453346">err</span>&nbsp;<span class="op" id="8453350">:=</span>&nbsp;<span class="ident" id="8453353">d</span><span class="op" id="8453354">.</span><span class="ident" id="8453355">Write</span><span class="op" id="8453360">(</span><span class="op" id="8453361">[</span><span class="op" id="8453362">]</span><span class="builtintype" id="8453363">byte</span><span class="op" id="8453367">(</span><span class="string" id="8453368">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="8453395">)</span><span class="op" id="8453396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8453399">if</span>&nbsp;<span class="ident" id="8453402">n</span>&nbsp;<span class="op" id="8453404">!=</span>&nbsp;<span class="num" id="8453407">21</span>&nbsp;<span class="op" id="8453410">||</span>&nbsp;<span class="ident" id="8453413">err</span>&nbsp;<span class="op" id="8453417">!=</span>&nbsp;<span class="ident" id="8453420">nil</span>&nbsp;<span class="op" id="8453424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453428">t</span><span class="op" id="8453429">.</span><span class="ident" id="8453430">Fatalf</span><span class="op" id="8453436">(</span><span class="string" id="8453437">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8453452">,</span>&nbsp;<span class="ident" id="8453454">n</span><span class="op" id="8453455">,</span>&nbsp;<span class="ident" id="8453457">err</span><span class="op" id="8453460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8453463">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453466">d</span><span class="op" id="8453467">.</span><span class="ident" id="8453468">Close</span><span class="op" id="8453473">(</span><span class="op" id="8453474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453477">want</span>&nbsp;<span class="op" id="8453482">:=</span>&nbsp;<span class="string" id="8453485">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8453535">if</span>&nbsp;<span class="ident" id="8453538">s</span>&nbsp;<span class="op" id="8453540">:=</span>&nbsp;<span class="ident" id="8453543">buf</span><span class="op" id="8453546">.</span><span class="ident" id="8453547">String</span><span class="op" id="8453553">(</span><span class="op" id="8453554">)</span><span class="op" id="8453555">;</span>&nbsp;<span class="ident" id="8453557">s</span>&nbsp;<span class="op" id="8453559">!=</span>&nbsp;<span class="ident" id="8453562">want</span>&nbsp;<span class="op" id="8453567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8453571">t</span><span class="op" id="8453572">.</span><span class="ident" id="8453573">Fatalf</span><span class="op" id="8453579">(</span><span class="string" id="8453580">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="8453590">,</span>&nbsp;<span class="ident" id="8453592">s</span><span class="op" id="8453593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8453596">}</span><br>
<span class="lineno">35</span><span class="op" id="8453598">}</span>
</div>
</body>
</html>
