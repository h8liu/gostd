<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5297429">package</span>&nbsp;<span class="ident" id="5297437">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5297444">//&nbsp;Interrupt&nbsp;defines&nbsp;the&nbsp;interrupt&nbsp;page</span><br>
<span class="lineno"></span><span class="keyword" id="5297484">type</span>&nbsp;<span class="ident" id="5297489">interrupt</span>&nbsp;<span class="keyword" id="5297499">struct</span>&nbsp;<span class="op" id="5297506">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297509">p</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5297514">*</span><span class="ident" id="5297515"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span>&nbsp;&nbsp;<span class="comment" id="5297521">//&nbsp;the&nbsp;dma&nbsp;page&nbsp;for&nbsp;interrupt&nbsp;handler</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297560">base</span>&nbsp;<span class="builtintype" id="5297565">uint32</span>&nbsp;<span class="comment" id="5297572">//&nbsp;dma&nbsp;offset</span><br>
<span class="lineno"></span><span class="op" id="5297586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5297589">//&nbsp;Number&nbsp;of&nbsp;interrupts</span><br>
<span class="lineno">10</span><span class="keyword" id="5297613">const</span>&nbsp;<span class="ident" id="5297619">Ninterrupt</span>&nbsp;<span class="op" id="5297630">=</span>&nbsp;<span class="num" id="5297632">256</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5297637">const</span>&nbsp;<span class="op" id="5297643">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297646">intFlags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5297659">=</span>&nbsp;<span class="num" id="5297661">0</span>&nbsp;&nbsp;<span class="comment" id="5297664">//&nbsp;flags,&nbsp;bit&nbsp;0&nbsp;is&nbsp;master&nbsp;enabling&nbsp;switch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297707">intKernelSP</span>&nbsp;&nbsp;<span class="op" id="5297720">=</span>&nbsp;<span class="num" id="5297722">4</span>&nbsp;&nbsp;<span class="comment" id="5297725">//&nbsp;position&nbsp;of&nbsp;the&nbsp;handler&nbsp;stack&nbsp;base&nbsp;pointer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297772">intHandlerPC</span>&nbsp;<span class="op" id="5297785">=</span>&nbsp;<span class="num" id="5297787">8</span>&nbsp;&nbsp;<span class="comment" id="5297790">//&nbsp;position&nbsp;of&nbsp;the&nbsp;handler&nbsp;start&nbsp;PC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297827">intSyscallPC</span>&nbsp;<span class="op" id="5297840">=</span>&nbsp;<span class="num" id="5297842">12</span>&nbsp;<span class="comment" id="5297845">//&nbsp;position&nbsp;of&nbsp;the&nbsp;syscall&nbsp;start&nbsp;PC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297882">intMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5297895">=</span>&nbsp;<span class="num" id="5297897">32</span>&nbsp;<span class="comment" id="5297900">//&nbsp;interrupt&nbsp;enable&nbsp;mask&nbsp;bits&nbsp;offset&nbsp;(32&nbsp;bytes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297949">intPending</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5297962">=</span>&nbsp;<span class="num" id="5297964">64</span>&nbsp;<span class="comment" id="5297967">//&nbsp;interrupt&nbsp;pending&nbsp;bits&nbsp;offset&nbsp;(32&nbsp;bytes)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298013">intCtrlSize</span>&nbsp;<span class="op" id="5298025">=</span>&nbsp;<span class="num" id="5298027">128</span><br>
<span class="lineno"></span><span class="op" id="5298031">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5298034">//&nbsp;NewInterrupt&nbsp;creates&nbsp;a&nbsp;interrupt&nbsp;on&nbsp;the&nbsp;given&nbsp;DMA&nbsp;page.</span><br>
<span class="lineno"></span><span class="keyword" id="5298093">func</span>&nbsp;<span class="ident" id="5298098">newInterrupt</span><span class="op" id="5298110">(</span><span class="ident" id="5298111">p</span>&nbsp;<span class="op" id="5298113">*</span><span class="ident" id="5298114"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><span class="op" id="5298118">,</span>&nbsp;<span class="ident" id="5298120">core</span>&nbsp;<span class="builtintype" id="5298125">byte</span><span class="op" id="5298129">)</span>&nbsp;<span class="op" id="5298131">*</span><span class="ident" id="5298132"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span>&nbsp;<span class="op" id="5298142">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298145">ret</span>&nbsp;<span class="op" id="5298149">:=</span>&nbsp;<span class="builtinfunc" id="5298152">new</span><span class="op" id="5298155">(</span><span class="ident" id="5298156"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298168"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298145">ret</a></span><span class="op" id="5298171">.</span><span class="ident" id="5298172">p</span>&nbsp;<span class="op" id="5298174">=</span>&nbsp;<span class="ident" id="5298176"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298111">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298179"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298145">ret</a></span><span class="op" id="5298182">.</span><span class="ident" id="5298183">base</span>&nbsp;<span class="op" id="5298188">=</span>&nbsp;<span class="builtintype" id="5298190">uint32</span><span class="op" id="5298196">(</span><span class="ident" id="5298197"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298120">core</a></span><span class="op" id="5298201">)</span>&nbsp;<span class="op" id="5298203">*</span>&nbsp;<span class="ident" id="5298205"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298013">intCtrlSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298218">if</span>&nbsp;<span class="ident" id="5298221"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298145">ret</a></span><span class="op" id="5298224">.</span><span class="ident" id="5298225">base</span><span class="op" id="5298229">+</span><span class="ident" id="5298230"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298013">intCtrlSize</a></span>&nbsp;<span class="op" id="5298242">&gt;</span>&nbsp;<span class="ident" id="5298244"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span>&nbsp;<span class="op" id="5298253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5298257">panic</span><span class="op" id="5298262">(</span><span class="string" id="5298263">&#34;bug&#34;</span><span class="op" id="5298268">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298275">return</span>&nbsp;<span class="ident" id="5298282"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298145">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5298286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5298289">func</span>&nbsp;<span class="op" id="5298294">(</span><span class="ident" id="5298295">in</span>&nbsp;<span class="op" id="5298298">*</span><span class="ident" id="5298299"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298308">)</span>&nbsp;<span class="ident" id="5298310">readWord</span><span class="op" id="5298318">(</span><span class="ident" id="5298319">off</span>&nbsp;<span class="builtintype" id="5298323">uint32</span><span class="op" id="5298329">)</span>&nbsp;<span class="builtintype" id="5298331">uint32</span>&nbsp;<span class="op" id="5298338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298341">return</span>&nbsp;<span class="ident" id="5298348"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298295">in</a></span><span class="op" id="5298350">.</span><span class="ident" id="5298351">p</span><span class="op" id="5298352">.</span><span class="ident" id="5298353">ReadWord</span><span class="op" id="5298361">(</span><span class="ident" id="5298362"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298295">in</a></span><span class="op" id="5298364">.</span><span class="ident" id="5298365">base</span>&nbsp;<span class="op" id="5298370">+</span>&nbsp;<span class="ident" id="5298372"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298319">off</a></span><span class="op" id="5298375">)</span><br>
<span class="lineno"></span><span class="op" id="5298377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5298380">func</span>&nbsp;<span class="op" id="5298385">(</span><span class="ident" id="5298386">in</span>&nbsp;<span class="op" id="5298389">*</span><span class="ident" id="5298390"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298399">)</span>&nbsp;<span class="ident" id="5298401">readByte</span><span class="op" id="5298409">(</span><span class="ident" id="5298410">off</span>&nbsp;<span class="builtintype" id="5298414">uint32</span><span class="op" id="5298420">)</span>&nbsp;<span class="builtintype" id="5298422">byte</span>&nbsp;<span class="op" id="5298427">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298430">return</span>&nbsp;<span class="ident" id="5298437"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298386">in</a></span><span class="op" id="5298439">.</span><span class="ident" id="5298440">p</span><span class="op" id="5298441">.</span><span class="ident" id="5298442">ReadByte</span><span class="op" id="5298450">(</span><span class="ident" id="5298451"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298386">in</a></span><span class="op" id="5298453">.</span><span class="ident" id="5298454">base</span>&nbsp;<span class="op" id="5298459">+</span>&nbsp;<span class="ident" id="5298461"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298410">off</a></span><span class="op" id="5298464">)</span><br>
<span class="lineno"></span><span class="op" id="5298466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5298469">func</span>&nbsp;<span class="op" id="5298474">(</span><span class="ident" id="5298475">in</span>&nbsp;<span class="op" id="5298478">*</span><span class="ident" id="5298479"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298488">)</span>&nbsp;<span class="ident" id="5298490">writeWord</span><span class="op" id="5298499">(</span><span class="ident" id="5298500">off</span>&nbsp;<span class="builtintype" id="5298504">uint32</span><span class="op" id="5298510">,</span>&nbsp;<span class="ident" id="5298512">v</span>&nbsp;<span class="builtintype" id="5298514">uint32</span><span class="op" id="5298520">)</span>&nbsp;<span class="op" id="5298522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298525"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298475">in</a></span><span class="op" id="5298527">.</span><span class="ident" id="5298528">p</span><span class="op" id="5298529">.</span><span class="ident" id="5298530">WriteWord</span><span class="op" id="5298539">(</span><span class="ident" id="5298540"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298475">in</a></span><span class="op" id="5298542">.</span><span class="ident" id="5298543">base</span><span class="op" id="5298547">+</span><span class="ident" id="5298548"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298500">off</a></span><span class="op" id="5298551">,</span>&nbsp;<span class="ident" id="5298553"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298512">v</a></span><span class="op" id="5298554">)</span><br>
<span class="lineno">45</span><span class="op" id="5298556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5298559">func</span>&nbsp;<span class="op" id="5298564">(</span><span class="ident" id="5298565">in</span>&nbsp;<span class="op" id="5298568">*</span><span class="ident" id="5298569"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298578">)</span>&nbsp;<span class="ident" id="5298580">writeByte</span><span class="op" id="5298589">(</span><span class="ident" id="5298590">off</span>&nbsp;<span class="builtintype" id="5298594">uint32</span><span class="op" id="5298600">,</span>&nbsp;<span class="ident" id="5298602">v</span>&nbsp;<span class="builtintype" id="5298604">byte</span><span class="op" id="5298608">)</span>&nbsp;<span class="op" id="5298610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298613"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298565">in</a></span><span class="op" id="5298615">.</span><span class="ident" id="5298616">p</span><span class="op" id="5298617">.</span><span class="ident" id="5298618">WriteByte</span><span class="op" id="5298627">(</span><span class="ident" id="5298628"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298565">in</a></span><span class="op" id="5298630">.</span><span class="ident" id="5298631">base</span><span class="op" id="5298635">+</span><span class="ident" id="5298636"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298590">off</a></span><span class="op" id="5298639">,</span>&nbsp;<span class="ident" id="5298641"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298602">v</a></span><span class="op" id="5298642">)</span><br>
<span class="lineno"></span><span class="op" id="5298644">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5298647">func</span>&nbsp;<span class="op" id="5298652">(</span><span class="ident" id="5298653">in</span>&nbsp;<span class="op" id="5298656">*</span><span class="ident" id="5298657"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298666">)</span>&nbsp;<span class="ident" id="5298668">kernelSP</span><span class="op" id="5298676">(</span><span class="op" id="5298677">)</span>&nbsp;<span class="builtintype" id="5298679">uint32</span>&nbsp;<span class="op" id="5298686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298689">return</span>&nbsp;<span class="ident" id="5298696"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298653">in</a></span><span class="op" id="5298698">.</span><span class="ident" id="5298699">readWord</span><span class="op" id="5298707">(</span><span class="ident" id="5298708"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297707">intKernelSP</a></span><span class="op" id="5298719">)</span><br>
<span class="lineno"></span><span class="op" id="5298721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="5298724">func</span>&nbsp;<span class="op" id="5298729">(</span><span class="ident" id="5298730">in</span>&nbsp;<span class="op" id="5298733">*</span><span class="ident" id="5298734"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298743">)</span>&nbsp;<span class="ident" id="5298745">handlerPC</span><span class="op" id="5298754">(</span><span class="op" id="5298755">)</span>&nbsp;<span class="builtintype" id="5298757">uint32</span>&nbsp;<span class="op" id="5298764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298767">return</span>&nbsp;<span class="ident" id="5298774"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298730">in</a></span><span class="op" id="5298776">.</span><span class="ident" id="5298777">readWord</span><span class="op" id="5298785">(</span><span class="ident" id="5298786"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297772">intHandlerPC</a></span><span class="op" id="5298798">)</span><br>
<span class="lineno"></span><span class="op" id="5298800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5298803">func</span>&nbsp;<span class="op" id="5298808">(</span><span class="ident" id="5298809">in</span>&nbsp;<span class="op" id="5298812">*</span><span class="ident" id="5298813"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298822">)</span>&nbsp;<span class="ident" id="5298824">syscallPC</span><span class="op" id="5298833">(</span><span class="op" id="5298834">)</span>&nbsp;<span class="builtintype" id="5298836">uint32</span>&nbsp;<span class="op" id="5298843">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298846">return</span>&nbsp;<span class="ident" id="5298853"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298809">in</a></span><span class="op" id="5298855">.</span><span class="ident" id="5298856">readWord</span><span class="op" id="5298864">(</span><span class="ident" id="5298865"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297827">intSyscallPC</a></span><span class="op" id="5298877">)</span><br>
<span class="lineno"></span><span class="op" id="5298879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5298882">//&nbsp;Issue&nbsp;issues&nbsp;an&nbsp;interrupt.&nbsp;If&nbsp;the&nbsp;interrupt&nbsp;is&nbsp;already&nbsp;issued,</span><br>
<span class="lineno"></span><span class="comment" id="5298948">//&nbsp;this&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">65</span><span class="keyword" id="5298971">func</span>&nbsp;<span class="op" id="5298976">(</span><span class="ident" id="5298977">in</span>&nbsp;<span class="op" id="5298980">*</span><span class="ident" id="5298981"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5298990">)</span>&nbsp;<span class="ident" id="5298992">Issue</span><span class="op" id="5298997">(</span><span class="ident" id="5298998">i</span>&nbsp;<span class="builtintype" id="5299000">byte</span><span class="op" id="5299004">)</span>&nbsp;<span class="op" id="5299006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299009">off</span>&nbsp;<span class="op" id="5299013">:=</span>&nbsp;<span class="builtintype" id="5299016">uint32</span><span class="op" id="5299022">(</span><span class="ident" id="5299023"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298998">i</a></span><span class="op" id="5299024">/</span><span class="num" id="5299025">8</span><span class="op" id="5299026">)</span>&nbsp;<span class="op" id="5299028">+</span>&nbsp;<span class="ident" id="5299030"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297949">intPending</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299042">b</span>&nbsp;<span class="op" id="5299044">:=</span>&nbsp;<span class="ident" id="5299047"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298977">in</a></span><span class="op" id="5299049">.</span><span class="ident" id="5299050">readByte</span><span class="op" id="5299058">(</span><span class="ident" id="5299059"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299009">off</a></span><span class="op" id="5299062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299065"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299042">b</a></span>&nbsp;<span class="op" id="5299067">|=</span>&nbsp;<span class="num" id="5299070">0x1</span>&nbsp;<span class="op" id="5299074">&lt;&lt;</span>&nbsp;<span class="op" id="5299077">(</span><span class="ident" id="5299078"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298998">i</a></span>&nbsp;<span class="op" id="5299080">%</span>&nbsp;<span class="num" id="5299082">8</span><span class="op" id="5299083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299086"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5298977">in</a></span><span class="op" id="5299088">.</span><span class="ident" id="5299089">writeByte</span><span class="op" id="5299098">(</span><span class="ident" id="5299099"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299009">off</a></span><span class="op" id="5299102">,</span>&nbsp;<span class="ident" id="5299104"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299042">b</a></span><span class="op" id="5299105">)</span><br>
<span class="lineno">70</span><span class="op" id="5299107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5299110">//&nbsp;Clear&nbsp;clears&nbsp;an&nbsp;interrupt.&nbsp;If&nbsp;the&nbsp;interrupt&nbsp;is&nbsp;already&nbsp;cleared,</span><br>
<span class="lineno"></span><span class="comment" id="5299177">//&nbsp;this&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno"></span><span class="keyword" id="5299200">func</span>&nbsp;<span class="op" id="5299205">(</span><span class="ident" id="5299206">in</span>&nbsp;<span class="op" id="5299209">*</span><span class="ident" id="5299210"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5299219">)</span>&nbsp;<span class="ident" id="5299221">Clear</span><span class="op" id="5299226">(</span><span class="ident" id="5299227">i</span>&nbsp;<span class="builtintype" id="5299229">byte</span><span class="op" id="5299233">)</span>&nbsp;<span class="op" id="5299235">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299238">off</span>&nbsp;<span class="op" id="5299242">:=</span>&nbsp;<span class="builtintype" id="5299245">uint32</span><span class="op" id="5299251">(</span><span class="ident" id="5299252"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299227">i</a></span><span class="op" id="5299253">/</span><span class="num" id="5299254">8</span><span class="op" id="5299255">)</span>&nbsp;<span class="op" id="5299257">+</span>&nbsp;<span class="ident" id="5299259"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297949">intPending</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299271">b</span>&nbsp;<span class="op" id="5299273">:=</span>&nbsp;<span class="ident" id="5299276"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299206">in</a></span><span class="op" id="5299278">.</span><span class="ident" id="5299279">readByte</span><span class="op" id="5299287">(</span><span class="ident" id="5299288"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299238">off</a></span><span class="op" id="5299291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299294"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299271">b</a></span>&nbsp;<span class="op" id="5299296">&amp;=</span>&nbsp;<span class="op" id="5299299">^</span><span class="op" id="5299300">(</span><span class="num" id="5299301">0x1</span>&nbsp;<span class="op" id="5299305">&lt;&lt;</span>&nbsp;<span class="op" id="5299308">(</span><span class="ident" id="5299309"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299227">i</a></span>&nbsp;<span class="op" id="5299311">%</span>&nbsp;<span class="num" id="5299313">8</span><span class="op" id="5299314">)</span><span class="op" id="5299315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299318"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299206">in</a></span><span class="op" id="5299320">.</span><span class="ident" id="5299321">writeByte</span><span class="op" id="5299330">(</span><span class="ident" id="5299331"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299238">off</a></span><span class="op" id="5299334">,</span>&nbsp;<span class="ident" id="5299336"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299271">b</a></span><span class="op" id="5299337">)</span><br>
<span class="lineno"></span><span class="op" id="5299339">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5299342">//&nbsp;Enable&nbsp;sets&nbsp;the&nbsp;interrupt&nbsp;enable&nbsp;bit&nbsp;in&nbsp;the&nbsp;flags.</span><br>
<span class="lineno"></span><span class="keyword" id="5299396">func</span>&nbsp;<span class="op" id="5299401">(</span><span class="ident" id="5299402">in</span>&nbsp;<span class="op" id="5299405">*</span><span class="ident" id="5299406"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5299415">)</span>&nbsp;<span class="ident" id="5299417">Enable</span><span class="op" id="5299423">(</span><span class="op" id="5299424">)</span>&nbsp;<span class="op" id="5299426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299429">b</span>&nbsp;<span class="op" id="5299431">:=</span>&nbsp;<span class="ident" id="5299434"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299402">in</a></span><span class="op" id="5299436">.</span><span class="ident" id="5299437">readByte</span><span class="op" id="5299445">(</span><span class="ident" id="5299446"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5299454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299457"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299429">b</a></span>&nbsp;<span class="op" id="5299459">|=</span>&nbsp;<span class="num" id="5299462">0x1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299467"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299402">in</a></span><span class="op" id="5299469">.</span><span class="ident" id="5299470">writeByte</span><span class="op" id="5299479">(</span><span class="ident" id="5299480"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5299488">,</span>&nbsp;<span class="ident" id="5299490"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299429">b</a></span><span class="op" id="5299491">)</span><br>
<span class="lineno"></span><span class="op" id="5299493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5299496">//&nbsp;Enabled&nbsp;tests&nbsp;if&nbsp;interrupt&nbsp;is&nbsp;enabled</span><br>
<span class="lineno"></span><span class="keyword" id="5299537">func</span>&nbsp;<span class="op" id="5299542">(</span><span class="ident" id="5299543">in</span>&nbsp;<span class="op" id="5299546">*</span><span class="ident" id="5299547"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5299556">)</span>&nbsp;<span class="ident" id="5299558">Enabled</span><span class="op" id="5299565">(</span><span class="op" id="5299566">)</span>&nbsp;<span class="builtintype" id="5299568">bool</span>&nbsp;<span class="op" id="5299573">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299576">b</span>&nbsp;<span class="op" id="5299578">:=</span>&nbsp;<span class="ident" id="5299581"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299543">in</a></span><span class="op" id="5299583">.</span><span class="ident" id="5299584">readByte</span><span class="op" id="5299592">(</span><span class="ident" id="5299593"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5299601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299604">return</span>&nbsp;<span class="op" id="5299611">(</span><span class="ident" id="5299612"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299576">b</a></span>&nbsp;<span class="op" id="5299614">&amp;</span>&nbsp;<span class="num" id="5299616">0x1</span><span class="op" id="5299619">)</span>&nbsp;<span class="op" id="5299621">!=</span>&nbsp;<span class="num" id="5299624">0</span><br>
<span class="lineno"></span><span class="op" id="5299626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5299629">//&nbsp;Disable&nbsp;clears&nbsp;the&nbsp;interrupt&nbsp;enable&nbsp;bit&nbsp;in&nbsp;the&nbsp;flags.</span><br>
<span class="lineno">95</span><span class="keyword" id="5299686">func</span>&nbsp;<span class="op" id="5299691">(</span><span class="ident" id="5299692">in</span>&nbsp;<span class="op" id="5299695">*</span><span class="ident" id="5299696"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5299705">)</span>&nbsp;<span class="ident" id="5299707">Disable</span><span class="op" id="5299714">(</span><span class="op" id="5299715">)</span>&nbsp;<span class="op" id="5299717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299720">b</span>&nbsp;<span class="op" id="5299722">:=</span>&nbsp;<span class="ident" id="5299725"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299692">in</a></span><span class="op" id="5299727">.</span><span class="ident" id="5299728">readByte</span><span class="op" id="5299736">(</span><span class="ident" id="5299737"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5299745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299748"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299720">b</a></span>&nbsp;<span class="op" id="5299750">&amp;=</span>&nbsp;<span class="op" id="5299753">^</span><span class="builtintype" id="5299754">byte</span><span class="op" id="5299758">(</span><span class="num" id="5299759">0x1</span><span class="op" id="5299762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299765"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299692">in</a></span><span class="op" id="5299767">.</span><span class="ident" id="5299768">writeByte</span><span class="op" id="5299777">(</span><span class="ident" id="5299778"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5299786">,</span>&nbsp;<span class="ident" id="5299788"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299720">b</a></span><span class="op" id="5299789">)</span><br>
<span class="lineno"></span><span class="op" id="5299791">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5299794">//&nbsp;EnableInt&nbsp;enables&nbsp;a&nbsp;particular&nbsp;interrupt&nbsp;by&nbsp;clearing&nbsp;the&nbsp;mask.</span><br>
<span class="lineno"></span><span class="keyword" id="5299860">func</span>&nbsp;<span class="op" id="5299865">(</span><span class="ident" id="5299866">in</span>&nbsp;<span class="op" id="5299869">*</span><span class="ident" id="5299870"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5299879">)</span>&nbsp;<span class="ident" id="5299881">EnableInt</span><span class="op" id="5299890">(</span><span class="ident" id="5299891">i</span>&nbsp;<span class="builtintype" id="5299893">byte</span><span class="op" id="5299897">)</span>&nbsp;<span class="op" id="5299899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299902">off</span>&nbsp;<span class="op" id="5299906">:=</span>&nbsp;<span class="builtintype" id="5299909">uint32</span><span class="op" id="5299915">(</span><span class="ident" id="5299916"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299891">i</a></span><span class="op" id="5299917">/</span><span class="num" id="5299918">8</span><span class="op" id="5299919">)</span>&nbsp;<span class="op" id="5299921">+</span>&nbsp;<span class="ident" id="5299923"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297882">intMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299932">b</span>&nbsp;<span class="op" id="5299934">:=</span>&nbsp;<span class="ident" id="5299937"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299866">in</a></span><span class="op" id="5299939">.</span><span class="ident" id="5299940">readByte</span><span class="op" id="5299948">(</span><span class="ident" id="5299949"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299902">off</a></span><span class="op" id="5299952">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299955"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299932">b</a></span>&nbsp;<span class="op" id="5299957">|=</span>&nbsp;<span class="num" id="5299960">0x1</span>&nbsp;<span class="op" id="5299964">&lt;&lt;</span>&nbsp;<span class="op" id="5299967">(</span><span class="ident" id="5299968"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299891">i</a></span>&nbsp;<span class="op" id="5299970">%</span>&nbsp;<span class="num" id="5299972">8</span><span class="op" id="5299973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299976"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299866">in</a></span><span class="op" id="5299978">.</span><span class="ident" id="5299979">writeByte</span><span class="op" id="5299988">(</span><span class="ident" id="5299989"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299902">off</a></span><span class="op" id="5299992">,</span>&nbsp;<span class="ident" id="5299994"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5299932">b</a></span><span class="op" id="5299995">)</span><br>
<span class="lineno"></span><span class="op" id="5299997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5300000">//&nbsp;DisableInt&nbsp;disables&nbsp;a&nbsp;particular&nbsp;interrupt&nbsp;by&nbsp;setting&nbsp;the&nbsp;mask.</span><br>
<span class="lineno">110</span><span class="keyword" id="5300067">func</span>&nbsp;<span class="op" id="5300072">(</span><span class="ident" id="5300073">in</span>&nbsp;<span class="op" id="5300076">*</span><span class="ident" id="5300077"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5300086">)</span>&nbsp;<span class="ident" id="5300088">DisableInt</span><span class="op" id="5300098">(</span><span class="ident" id="5300099">i</span>&nbsp;<span class="builtintype" id="5300101">byte</span><span class="op" id="5300105">)</span>&nbsp;<span class="op" id="5300107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300110">off</span>&nbsp;<span class="op" id="5300114">:=</span>&nbsp;<span class="builtintype" id="5300117">uint32</span><span class="op" id="5300123">(</span><span class="ident" id="5300124"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300099">i</a></span><span class="op" id="5300125">/</span><span class="num" id="5300126">8</span><span class="op" id="5300127">)</span>&nbsp;<span class="op" id="5300129">+</span>&nbsp;<span class="ident" id="5300131"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297882">intMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300140">b</span>&nbsp;<span class="op" id="5300142">:=</span>&nbsp;<span class="ident" id="5300145"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300073">in</a></span><span class="op" id="5300147">.</span><span class="ident" id="5300148">readByte</span><span class="op" id="5300156">(</span><span class="ident" id="5300157"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300110">off</a></span><span class="op" id="5300160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300163"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300140">b</a></span>&nbsp;<span class="op" id="5300165">&amp;=</span>&nbsp;<span class="op" id="5300168">^</span><span class="op" id="5300169">(</span><span class="num" id="5300170">0x1</span>&nbsp;<span class="op" id="5300174">&lt;&lt;</span>&nbsp;<span class="op" id="5300177">(</span><span class="ident" id="5300178"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300099">i</a></span>&nbsp;<span class="op" id="5300180">%</span>&nbsp;<span class="num" id="5300182">8</span><span class="op" id="5300183">)</span><span class="op" id="5300184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300187"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300073">in</a></span><span class="op" id="5300189">.</span><span class="ident" id="5300190">writeByte</span><span class="op" id="5300199">(</span><span class="ident" id="5300200"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300110">off</a></span><span class="op" id="5300203">,</span>&nbsp;<span class="ident" id="5300205"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300140">b</a></span><span class="op" id="5300206">)</span><br>
<span class="lineno">115</span><span class="op" id="5300208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5300211">//&nbsp;Flags&nbsp;returns&nbsp;the&nbsp;flags&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5300244">func</span>&nbsp;<span class="op" id="5300249">(</span><span class="ident" id="5300250">in</span>&nbsp;<span class="op" id="5300253">*</span><span class="ident" id="5300254"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5300263">)</span>&nbsp;<span class="ident" id="5300265">Flags</span><span class="op" id="5300270">(</span><span class="op" id="5300271">)</span>&nbsp;<span class="builtintype" id="5300273">byte</span>&nbsp;<span class="op" id="5300278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300281">return</span>&nbsp;<span class="ident" id="5300288"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300250">in</a></span><span class="op" id="5300290">.</span><span class="ident" id="5300291">readByte</span><span class="op" id="5300299">(</span><span class="ident" id="5300300"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297646">intFlags</a></span><span class="op" id="5300308">)</span><br>
<span class="lineno">120</span><span class="op" id="5300310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5300313">//&nbsp;Poll&nbsp;looks&nbsp;for&nbsp;the&nbsp;next&nbsp;pending&nbsp;interrupt.</span><br>
<span class="lineno"></span><span class="keyword" id="5300359">func</span>&nbsp;<span class="op" id="5300364">(</span><span class="ident" id="5300365">in</span>&nbsp;<span class="op" id="5300368">*</span><span class="ident" id="5300369"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297489">interrupt</a></span><span class="op" id="5300378">)</span>&nbsp;<span class="ident" id="5300380">Poll</span><span class="op" id="5300384">(</span><span class="op" id="5300385">)</span>&nbsp;<span class="op" id="5300387">(</span><span class="builtintype" id="5300388">bool</span><span class="op" id="5300392">,</span>&nbsp;<span class="builtintype" id="5300394">byte</span><span class="op" id="5300398">)</span>&nbsp;<span class="op" id="5300400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300403">flag</span>&nbsp;<span class="op" id="5300408">:=</span>&nbsp;<span class="ident" id="5300411"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300365">in</a></span><span class="op" id="5300413">.</span><span class="ident" id="5300414">Flags</span><span class="op" id="5300419">(</span><span class="op" id="5300420">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300423">if</span>&nbsp;<span class="ident" id="5300426"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300403">flag</a></span><span class="op" id="5300430">&amp;</span><span class="num" id="5300431">0x1</span>&nbsp;<span class="op" id="5300435">==</span>&nbsp;<span class="num" id="5300438">0</span>&nbsp;<span class="op" id="5300440">{</span>&nbsp;<span class="comment" id="5300442">//&nbsp;interrupt&nbsp;is&nbsp;disabled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300469">return</span>&nbsp;<span class="ident" id="5300476">false</span><span class="op" id="5300481">,</span>&nbsp;<span class="num" id="5300483">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5300490">//&nbsp;search&nbsp;bits&nbsp;based&nbsp;on&nbsp;priorities.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5300527">//&nbsp;smaller&nbsp;is&nbsp;higher</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300549">for</span>&nbsp;<span class="ident" id="5300553">i</span>&nbsp;<span class="op" id="5300555">:=</span>&nbsp;<span class="builtintype" id="5300558">uint32</span><span class="op" id="5300564">(</span><span class="num" id="5300565">0</span><span class="op" id="5300566">)</span><span class="op" id="5300567">;</span>&nbsp;<span class="ident" id="5300569"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300553">i</a></span>&nbsp;<span class="op" id="5300571">&lt;</span>&nbsp;<span class="ident" id="5300573"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297619">Ninterrupt</a></span><span class="op" id="5300583">/</span><span class="num" id="5300584">8</span><span class="op" id="5300585">;</span>&nbsp;<span class="ident" id="5300587"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300553">i</a></span><span class="op" id="5300588">++</span>&nbsp;<span class="op" id="5300591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300595">pending</span>&nbsp;<span class="op" id="5300603">:=</span>&nbsp;<span class="ident" id="5300606"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300365">in</a></span><span class="op" id="5300608">.</span><span class="ident" id="5300609">readByte</span><span class="op" id="5300617">(</span><span class="ident" id="5300618"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297949">intPending</a></span>&nbsp;<span class="op" id="5300629">+</span>&nbsp;<span class="ident" id="5300631"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300553">i</a></span><span class="op" id="5300632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300636">mask</span>&nbsp;<span class="op" id="5300641">:=</span>&nbsp;<span class="ident" id="5300644"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300365">in</a></span><span class="op" id="5300646">.</span><span class="ident" id="5300647">readByte</span><span class="op" id="5300655">(</span><span class="ident" id="5300656"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5297882">intMask</a></span>&nbsp;<span class="op" id="5300664">+</span>&nbsp;<span class="ident" id="5300666"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300553">i</a></span><span class="op" id="5300667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300671"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300595">pending</a></span>&nbsp;<span class="op" id="5300679">&amp;=</span>&nbsp;<span class="ident" id="5300682"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300636">mask</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300689">if</span>&nbsp;<span class="ident" id="5300692"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300595">pending</a></span>&nbsp;<span class="op" id="5300700">==</span>&nbsp;<span class="num" id="5300703">0</span>&nbsp;<span class="op" id="5300705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300710">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300726">for</span>&nbsp;<span class="ident" id="5300730">b</span>&nbsp;<span class="op" id="5300732">:=</span>&nbsp;<span class="builtintype" id="5300735">byte</span><span class="op" id="5300739">(</span><span class="num" id="5300740">0</span><span class="op" id="5300741">)</span><span class="op" id="5300742">;</span>&nbsp;<span class="ident" id="5300744"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300730">b</a></span>&nbsp;<span class="op" id="5300746">&lt;</span>&nbsp;<span class="num" id="5300748">8</span><span class="op" id="5300749">;</span>&nbsp;<span class="ident" id="5300751"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300730">b</a></span><span class="op" id="5300752">++</span>&nbsp;<span class="op" id="5300755">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300760">if</span>&nbsp;<span class="ident" id="5300763"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300595">pending</a></span><span class="op" id="5300770">&amp;</span><span class="op" id="5300771">(</span><span class="num" id="5300772">0x1</span><span class="op" id="5300775">&lt;&lt;</span><span class="ident" id="5300777"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300730">b</a></span><span class="op" id="5300778">)</span>&nbsp;<span class="op" id="5300780">==</span>&nbsp;<span class="num" id="5300783">0</span>&nbsp;<span class="op" id="5300785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300809">return</span>&nbsp;<span class="ident" id="5300816">true</span><span class="op" id="5300820">,</span>&nbsp;<span class="builtintype" id="5300822">byte</span><span class="op" id="5300826">(</span><span class="ident" id="5300827"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300553">i</a></span><span class="op" id="5300828">*</span><span class="num" id="5300829">8</span><span class="op" id="5300830">)</span>&nbsp;<span class="op" id="5300832">+</span>&nbsp;<span class="ident" id="5300834"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5300730">b</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300845">return</span>&nbsp;<span class="ident" id="5300852">false</span><span class="op" id="5300857">,</span>&nbsp;<span class="num" id="5300859">0</span><br>
<span class="lineno"></span><span class="op" id="5300861">}</span>
</div>
</body>
</html>
