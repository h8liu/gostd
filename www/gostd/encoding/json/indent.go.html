<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html" class="current">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4811591">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4811647">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4811701">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4811752">package</span>&nbsp;<span class="ident" id="4811760">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4811766">import</span>&nbsp;<span class="string" id="4811773">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4811782">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="4811834">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="4811876">func</span>&nbsp;<span class="ident" id="4811881">Compact</span><span class="op" id="4811888">(</span><span class="ident" id="4811889">dst</span>&nbsp;<span class="op" id="4811893">*</span><span class="ident" id="4811894">bytes</span><span class="op" id="4811899">.</span><span class="ident" id="4811900">Buffer</span><span class="op" id="4811906">,</span>&nbsp;<span class="ident" id="4811908">src</span>&nbsp;<span class="op" id="4811912">[</span><span class="op" id="4811913">]</span><span class="builtintype" id="4811914">byte</span><span class="op" id="4811918">)</span>&nbsp;<span class="builtintype" id="4811920">error</span>&nbsp;<span class="op" id="4811926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811929">return</span>&nbsp;<span class="ident" id="4811936">compact</span><span class="op" id="4811943">(</span><span class="ident" id="4811944">dst</span><span class="op" id="4811947">,</span>&nbsp;<span class="ident" id="4811949">src</span><span class="op" id="4811952">,</span>&nbsp;<span class="builtintype" id="4811954">false</span><span class="op" id="4811959">)</span><br>
<span class="lineno"></span><span class="op" id="4811961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4811964">func</span>&nbsp;<span class="ident" id="4811969">compact</span><span class="op" id="4811976">(</span><span class="ident" id="4811977">dst</span>&nbsp;<span class="op" id="4811981">*</span><span class="ident" id="4811982">bytes</span><span class="op" id="4811987">.</span><span class="ident" id="4811988">Buffer</span><span class="op" id="4811994">,</span>&nbsp;<span class="ident" id="4811996">src</span>&nbsp;<span class="op" id="4812000">[</span><span class="op" id="4812001">]</span><span class="builtintype" id="4812002">byte</span><span class="op" id="4812006">,</span>&nbsp;<span class="ident" id="4812008">escape</span>&nbsp;<span class="builtintype" id="4812015">bool</span><span class="op" id="4812019">)</span>&nbsp;<span class="builtintype" id="4812021">error</span>&nbsp;<span class="op" id="4812027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812030">origLen</span>&nbsp;<span class="op" id="4812038">:=</span>&nbsp;<span class="ident" id="4812041">dst</span><span class="op" id="4812044">.</span><span class="ident" id="4812045">Len</span><span class="op" id="4812048">(</span><span class="op" id="4812049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812052">var</span>&nbsp;<span class="ident" id="4812056">scan</span>&nbsp;<span class="ident" id="4812061">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812070">scan</span><span class="op" id="4812074">.</span><span class="ident" id="4812075">reset</span><span class="op" id="4812080">(</span><span class="op" id="4812081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812084">start</span>&nbsp;<span class="op" id="4812090">:=</span>&nbsp;<span class="num" id="4812093">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812096">for</span>&nbsp;<span class="ident" id="4812100">i</span><span class="op" id="4812101">,</span>&nbsp;<span class="ident" id="4812103">c</span>&nbsp;<span class="op" id="4812105">:=</span>&nbsp;<span class="keyword" id="4812108">range</span>&nbsp;<span class="ident" id="4812114">src</span>&nbsp;<span class="op" id="4812118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812122">if</span>&nbsp;<span class="ident" id="4812125">escape</span>&nbsp;<span class="op" id="4812132">&amp;&amp;</span>&nbsp;<span class="op" id="4812135">(</span><span class="ident" id="4812136">c</span>&nbsp;<span class="op" id="4812138">==</span>&nbsp;<span class="string" id="4812141">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="4812145">||</span>&nbsp;<span class="ident" id="4812148">c</span>&nbsp;<span class="op" id="4812150">==</span>&nbsp;<span class="string" id="4812153">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4812157">||</span>&nbsp;<span class="ident" id="4812160">c</span>&nbsp;<span class="op" id="4812162">==</span>&nbsp;<span class="string" id="4812165">&#39;&amp;&#39;</span><span class="op" id="4812168">)</span>&nbsp;<span class="op" id="4812170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812175">if</span>&nbsp;<span class="ident" id="4812178">start</span>&nbsp;<span class="op" id="4812184">&lt;</span>&nbsp;<span class="ident" id="4812186">i</span>&nbsp;<span class="op" id="4812188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812194">dst</span><span class="op" id="4812197">.</span><span class="ident" id="4812198">Write</span><span class="op" id="4812203">(</span><span class="ident" id="4812204">src</span><span class="op" id="4812207">[</span><span class="ident" id="4812208">start</span><span class="op" id="4812213">:</span><span class="ident" id="4812214">i</span><span class="op" id="4812215">]</span><span class="op" id="4812216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812221">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812226">dst</span><span class="op" id="4812229">.</span><span class="ident" id="4812230">WriteString</span><span class="op" id="4812241">(</span><span class="string" id="4812242">`\u00`</span><span class="op" id="4812248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812253">dst</span><span class="op" id="4812256">.</span><span class="ident" id="4812257">WriteByte</span><span class="op" id="4812266">(</span><span class="ident" id="4812267">hex</span><span class="op" id="4812270">[</span><span class="ident" id="4812271">c</span><span class="op" id="4812272">&gt;&gt;</span><span class="num" id="4812274">4</span><span class="op" id="4812275">]</span><span class="op" id="4812276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812281">dst</span><span class="op" id="4812284">.</span><span class="ident" id="4812285">WriteByte</span><span class="op" id="4812294">(</span><span class="ident" id="4812295">hex</span><span class="op" id="4812298">[</span><span class="ident" id="4812299">c</span><span class="op" id="4812300">&amp;</span><span class="num" id="4812301">0xF</span><span class="op" id="4812304">]</span><span class="op" id="4812305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812310">start</span>&nbsp;<span class="op" id="4812316">=</span>&nbsp;<span class="ident" id="4812318">i</span>&nbsp;<span class="op" id="4812320">+</span>&nbsp;<span class="num" id="4812322">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812326">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4812330">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812386">if</span>&nbsp;<span class="ident" id="4812389">c</span>&nbsp;<span class="op" id="4812391">==</span>&nbsp;<span class="num" id="4812394">0xE2</span>&nbsp;<span class="op" id="4812399">&amp;&amp;</span>&nbsp;<span class="ident" id="4812402">i</span><span class="op" id="4812403">+</span><span class="num" id="4812404">2</span>&nbsp;<span class="op" id="4812406">&lt;</span>&nbsp;<span class="builtinfunc" id="4812408">len</span><span class="op" id="4812411">(</span><span class="ident" id="4812412">src</span><span class="op" id="4812415">)</span>&nbsp;<span class="op" id="4812417">&amp;&amp;</span>&nbsp;<span class="ident" id="4812420">src</span><span class="op" id="4812423">[</span><span class="ident" id="4812424">i</span><span class="op" id="4812425">+</span><span class="num" id="4812426">1</span><span class="op" id="4812427">]</span>&nbsp;<span class="op" id="4812429">==</span>&nbsp;<span class="num" id="4812432">0x80</span>&nbsp;<span class="op" id="4812437">&amp;&amp;</span>&nbsp;<span class="ident" id="4812440">src</span><span class="op" id="4812443">[</span><span class="ident" id="4812444">i</span><span class="op" id="4812445">+</span><span class="num" id="4812446">2</span><span class="op" id="4812447">]</span><span class="op" id="4812448">&amp;^</span><span class="num" id="4812450">1</span>&nbsp;<span class="op" id="4812452">==</span>&nbsp;<span class="num" id="4812455">0xA8</span>&nbsp;<span class="op" id="4812460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812465">if</span>&nbsp;<span class="ident" id="4812468">start</span>&nbsp;<span class="op" id="4812474">&lt;</span>&nbsp;<span class="ident" id="4812476">i</span>&nbsp;<span class="op" id="4812478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812484">dst</span><span class="op" id="4812487">.</span><span class="ident" id="4812488">Write</span><span class="op" id="4812493">(</span><span class="ident" id="4812494">src</span><span class="op" id="4812497">[</span><span class="ident" id="4812498">start</span><span class="op" id="4812503">:</span><span class="ident" id="4812504">i</span><span class="op" id="4812505">]</span><span class="op" id="4812506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812511">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812516">dst</span><span class="op" id="4812519">.</span><span class="ident" id="4812520">WriteString</span><span class="op" id="4812531">(</span><span class="string" id="4812532">`\u202`</span><span class="op" id="4812539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812544">dst</span><span class="op" id="4812547">.</span><span class="ident" id="4812548">WriteByte</span><span class="op" id="4812557">(</span><span class="ident" id="4812558">hex</span><span class="op" id="4812561">[</span><span class="ident" id="4812562">src</span><span class="op" id="4812565">[</span><span class="ident" id="4812566">i</span><span class="op" id="4812567">+</span><span class="num" id="4812568">2</span><span class="op" id="4812569">]</span><span class="op" id="4812570">&amp;</span><span class="num" id="4812571">0xF</span><span class="op" id="4812574">]</span><span class="op" id="4812575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812580">start</span>&nbsp;<span class="op" id="4812586">=</span>&nbsp;<span class="ident" id="4812588">i</span>&nbsp;<span class="op" id="4812590">+</span>&nbsp;<span class="num" id="4812592">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812600">v</span>&nbsp;<span class="op" id="4812602">:=</span>&nbsp;<span class="ident" id="4812605">scan</span><span class="op" id="4812609">.</span><span class="ident" id="4812610">step</span><span class="op" id="4812614">(</span><span class="op" id="4812615">&amp;</span><span class="ident" id="4812616">scan</span><span class="op" id="4812620">,</span>&nbsp;<span class="builtintype" id="4812622">int</span><span class="op" id="4812625">(</span><span class="ident" id="4812626">c</span><span class="op" id="4812627">)</span><span class="op" id="4812628">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812632">if</span>&nbsp;<span class="ident" id="4812635">v</span>&nbsp;<span class="op" id="4812637">&gt;=</span>&nbsp;<span class="ident" id="4812640">scanSkipSpace</span>&nbsp;<span class="op" id="4812654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812659">if</span>&nbsp;<span class="ident" id="4812662">v</span>&nbsp;<span class="op" id="4812664">==</span>&nbsp;<span class="ident" id="4812667">scanError</span>&nbsp;<span class="op" id="4812677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812683">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812697">if</span>&nbsp;<span class="ident" id="4812700">start</span>&nbsp;<span class="op" id="4812706">&lt;</span>&nbsp;<span class="ident" id="4812708">i</span>&nbsp;<span class="op" id="4812710">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812716">dst</span><span class="op" id="4812719">.</span><span class="ident" id="4812720">Write</span><span class="op" id="4812725">(</span><span class="ident" id="4812726">src</span><span class="op" id="4812729">[</span><span class="ident" id="4812730">start</span><span class="op" id="4812735">:</span><span class="ident" id="4812736">i</span><span class="op" id="4812737">]</span><span class="op" id="4812738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812748">start</span>&nbsp;<span class="op" id="4812754">=</span>&nbsp;<span class="ident" id="4812756">i</span>&nbsp;<span class="op" id="4812758">+</span>&nbsp;<span class="num" id="4812760">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812767">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812770">if</span>&nbsp;<span class="ident" id="4812773">scan</span><span class="op" id="4812777">.</span><span class="ident" id="4812778">eof</span><span class="op" id="4812781">(</span><span class="op" id="4812782">)</span>&nbsp;<span class="op" id="4812784">==</span>&nbsp;<span class="ident" id="4812787">scanError</span>&nbsp;<span class="op" id="4812797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812801">dst</span><span class="op" id="4812804">.</span><span class="ident" id="4812805">Truncate</span><span class="op" id="4812813">(</span><span class="ident" id="4812814">origLen</span><span class="op" id="4812821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812825">return</span>&nbsp;<span class="ident" id="4812832">scan</span><span class="op" id="4812836">.</span><span class="ident" id="4812837">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812845">if</span>&nbsp;<span class="ident" id="4812848">start</span>&nbsp;<span class="op" id="4812854">&lt;</span>&nbsp;<span class="builtinfunc" id="4812856">len</span><span class="op" id="4812859">(</span><span class="ident" id="4812860">src</span><span class="op" id="4812863">)</span>&nbsp;<span class="op" id="4812865">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812869">dst</span><span class="op" id="4812872">.</span><span class="ident" id="4812873">Write</span><span class="op" id="4812878">(</span><span class="ident" id="4812879">src</span><span class="op" id="4812882">[</span><span class="ident" id="4812883">start</span><span class="op" id="4812888">:</span><span class="op" id="4812889">]</span><span class="op" id="4812890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4812893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4812896">return</span>&nbsp;<span class="ident" id="4812903">nil</span><br>
<span class="lineno"></span><span class="op" id="4812907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4812910">func</span>&nbsp;<span class="ident" id="4812915">newline</span><span class="op" id="4812922">(</span><span class="ident" id="4812923">dst</span>&nbsp;<span class="op" id="4812927">*</span><span class="ident" id="4812928">bytes</span><span class="op" id="4812933">.</span><span class="ident" id="4812934">Buffer</span><span class="op" id="4812940">,</span>&nbsp;<span class="ident" id="4812942">prefix</span><span class="op" id="4812948">,</span>&nbsp;<span class="ident" id="4812950">indent</span>&nbsp;<span class="builtintype" id="4812957">string</span><span class="op" id="4812963">,</span>&nbsp;<span class="ident" id="4812965">depth</span>&nbsp;<span class="builtintype" id="4812971">int</span><span class="op" id="4812974">)</span>&nbsp;<span class="op" id="4812976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4812979">dst</span><span class="op" id="4812982">.</span><span class="ident" id="4812983">WriteByte</span><span class="op" id="4812992">(</span><span class="string" id="4812993">&#39;\n&#39;</span><span class="op" id="4812997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813000">dst</span><span class="op" id="4813003">.</span><span class="ident" id="4813004">WriteString</span><span class="op" id="4813015">(</span><span class="ident" id="4813016">prefix</span><span class="op" id="4813022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813025">for</span>&nbsp;<span class="ident" id="4813029">i</span>&nbsp;<span class="op" id="4813031">:=</span>&nbsp;<span class="num" id="4813034">0</span><span class="op" id="4813035">;</span>&nbsp;<span class="ident" id="4813037">i</span>&nbsp;<span class="op" id="4813039">&lt;</span>&nbsp;<span class="ident" id="4813041">depth</span><span class="op" id="4813046">;</span>&nbsp;<span class="ident" id="4813048">i</span><span class="op" id="4813049">++</span>&nbsp;<span class="op" id="4813052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813056">dst</span><span class="op" id="4813059">.</span><span class="ident" id="4813060">WriteString</span><span class="op" id="4813071">(</span><span class="ident" id="4813072">indent</span><span class="op" id="4813078">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4813081">}</span><br>
<span class="lineno"></span><span class="op" id="4813083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4813086">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="4813153">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="4813212">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="4813275">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="4813333">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="4813396">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4813456">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="4813509">func</span>&nbsp;<span class="ident" id="4813514">Indent</span><span class="op" id="4813520">(</span><span class="ident" id="4813521">dst</span>&nbsp;<span class="op" id="4813525">*</span><span class="ident" id="4813526">bytes</span><span class="op" id="4813531">.</span><span class="ident" id="4813532">Buffer</span><span class="op" id="4813538">,</span>&nbsp;<span class="ident" id="4813540">src</span>&nbsp;<span class="op" id="4813544">[</span><span class="op" id="4813545">]</span><span class="builtintype" id="4813546">byte</span><span class="op" id="4813550">,</span>&nbsp;<span class="ident" id="4813552">prefix</span><span class="op" id="4813558">,</span>&nbsp;<span class="ident" id="4813560">indent</span>&nbsp;<span class="builtintype" id="4813567">string</span><span class="op" id="4813573">)</span>&nbsp;<span class="builtintype" id="4813575">error</span>&nbsp;<span class="op" id="4813581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813584">origLen</span>&nbsp;<span class="op" id="4813592">:=</span>&nbsp;<span class="ident" id="4813595">dst</span><span class="op" id="4813598">.</span><span class="ident" id="4813599">Len</span><span class="op" id="4813602">(</span><span class="op" id="4813603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813606">var</span>&nbsp;<span class="ident" id="4813610">scan</span>&nbsp;<span class="ident" id="4813615">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813624">scan</span><span class="op" id="4813628">.</span><span class="ident" id="4813629">reset</span><span class="op" id="4813634">(</span><span class="op" id="4813635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813638">needIndent</span>&nbsp;<span class="op" id="4813649">:=</span>&nbsp;<span class="builtintype" id="4813652">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813659">depth</span>&nbsp;<span class="op" id="4813665">:=</span>&nbsp;<span class="num" id="4813668">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813671">for</span>&nbsp;<span class="ident" id="4813675">_</span><span class="op" id="4813676">,</span>&nbsp;<span class="ident" id="4813678">c</span>&nbsp;<span class="op" id="4813680">:=</span>&nbsp;<span class="keyword" id="4813683">range</span>&nbsp;<span class="ident" id="4813689">src</span>&nbsp;<span class="op" id="4813693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813697">scan</span><span class="op" id="4813701">.</span><span class="ident" id="4813702">bytes</span><span class="op" id="4813707">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813712">v</span>&nbsp;<span class="op" id="4813714">:=</span>&nbsp;<span class="ident" id="4813717">scan</span><span class="op" id="4813721">.</span><span class="ident" id="4813722">step</span><span class="op" id="4813726">(</span><span class="op" id="4813727">&amp;</span><span class="ident" id="4813728">scan</span><span class="op" id="4813732">,</span>&nbsp;<span class="builtintype" id="4813734">int</span><span class="op" id="4813737">(</span><span class="ident" id="4813738">c</span><span class="op" id="4813739">)</span><span class="op" id="4813740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813744">if</span>&nbsp;<span class="ident" id="4813747">v</span>&nbsp;<span class="op" id="4813749">==</span>&nbsp;<span class="ident" id="4813752">scanSkipSpace</span>&nbsp;<span class="op" id="4813766">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813771">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4813782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813786">if</span>&nbsp;<span class="ident" id="4813789">v</span>&nbsp;<span class="op" id="4813791">==</span>&nbsp;<span class="ident" id="4813794">scanError</span>&nbsp;<span class="op" id="4813804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813809">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4813817">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4813821">if</span>&nbsp;<span class="ident" id="4813824">needIndent</span>&nbsp;<span class="op" id="4813835">&amp;&amp;</span>&nbsp;<span class="ident" id="4813838">v</span>&nbsp;<span class="op" id="4813840">!=</span>&nbsp;<span class="ident" id="4813843">scanEndObject</span>&nbsp;<span class="op" id="4813857">&amp;&amp;</span>&nbsp;<span class="ident" id="4813860">v</span>&nbsp;<span class="op" id="4813862">!=</span>&nbsp;<span class="ident" id="4813865">scanEndArray</span>&nbsp;<span class="op" id="4813878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813883">needIndent</span>&nbsp;<span class="op" id="4813894">=</span>&nbsp;<span class="builtintype" id="4813896">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813905">depth</span><span class="op" id="4813910">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4813916">newline</span><span class="op" id="4813923">(</span><span class="ident" id="4813924">dst</span><span class="op" id="4813927">,</span>&nbsp;<span class="ident" id="4813929">prefix</span><span class="op" id="4813935">,</span>&nbsp;<span class="ident" id="4813937">indent</span><span class="op" id="4813943">,</span>&nbsp;<span class="ident" id="4813945">depth</span><span class="op" id="4813950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4813954">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4813959">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4814002">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814059">if</span>&nbsp;<span class="ident" id="4814062">v</span>&nbsp;<span class="op" id="4814064">==</span>&nbsp;<span class="ident" id="4814067">scanContinue</span>&nbsp;<span class="op" id="4814080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814085">dst</span><span class="op" id="4814088">.</span><span class="ident" id="4814089">WriteByte</span><span class="op" id="4814098">(</span><span class="ident" id="4814099">c</span><span class="op" id="4814100">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814105">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4814121">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814163">switch</span>&nbsp;<span class="ident" id="4814170">c</span>&nbsp;<span class="op" id="4814172">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814176">case</span>&nbsp;<span class="string" id="4814181">&#39;{&#39;</span><span class="op" id="4814184">,</span>&nbsp;<span class="string" id="4814186">&#39;[&#39;</span><span class="op" id="4814189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4814194">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814272">needIndent</span>&nbsp;<span class="op" id="4814283">=</span>&nbsp;<span class="builtintype" id="4814285">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814293">dst</span><span class="op" id="4814296">.</span><span class="ident" id="4814297">WriteByte</span><span class="op" id="4814306">(</span><span class="ident" id="4814307">c</span><span class="op" id="4814308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814313">case</span>&nbsp;<span class="string" id="4814318">&#39;,&#39;</span><span class="op" id="4814321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814326">dst</span><span class="op" id="4814329">.</span><span class="ident" id="4814330">WriteByte</span><span class="op" id="4814339">(</span><span class="ident" id="4814340">c</span><span class="op" id="4814341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814346">newline</span><span class="op" id="4814353">(</span><span class="ident" id="4814354">dst</span><span class="op" id="4814357">,</span>&nbsp;<span class="ident" id="4814359">prefix</span><span class="op" id="4814365">,</span>&nbsp;<span class="ident" id="4814367">indent</span><span class="op" id="4814373">,</span>&nbsp;<span class="ident" id="4814375">depth</span><span class="op" id="4814380">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814385">case</span>&nbsp;<span class="string" id="4814390">&#39;:&#39;</span><span class="op" id="4814393">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814398">dst</span><span class="op" id="4814401">.</span><span class="ident" id="4814402">WriteByte</span><span class="op" id="4814411">(</span><span class="ident" id="4814412">c</span><span class="op" id="4814413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814418">dst</span><span class="op" id="4814421">.</span><span class="ident" id="4814422">WriteByte</span><span class="op" id="4814431">(</span><span class="string" id="4814432">&#39;&nbsp;&#39;</span><span class="op" id="4814435">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814440">case</span>&nbsp;<span class="string" id="4814445">&#39;}&#39;</span><span class="op" id="4814448">,</span>&nbsp;<span class="string" id="4814450">&#39;]&#39;</span><span class="op" id="4814453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814458">if</span>&nbsp;<span class="ident" id="4814461">needIndent</span>&nbsp;<span class="op" id="4814472">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4814478">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814523">needIndent</span>&nbsp;<span class="op" id="4814534">=</span>&nbsp;<span class="builtintype" id="4814536">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814545">}</span>&nbsp;<span class="keyword" id="4814547">else</span>&nbsp;<span class="op" id="4814552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814558">depth</span><span class="op" id="4814563">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814570">newline</span><span class="op" id="4814577">(</span><span class="ident" id="4814578">dst</span><span class="op" id="4814581">,</span>&nbsp;<span class="ident" id="4814583">prefix</span><span class="op" id="4814589">,</span>&nbsp;<span class="ident" id="4814591">indent</span><span class="op" id="4814597">,</span>&nbsp;<span class="ident" id="4814599">depth</span><span class="op" id="4814604">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814614">dst</span><span class="op" id="4814617">.</span><span class="ident" id="4814618">WriteByte</span><span class="op" id="4814627">(</span><span class="ident" id="4814628">c</span><span class="op" id="4814629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814634">default</span><span class="op" id="4814641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814646">dst</span><span class="op" id="4814649">.</span><span class="ident" id="4814650">WriteByte</span><span class="op" id="4814659">(</span><span class="ident" id="4814660">c</span><span class="op" id="4814661">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814671">if</span>&nbsp;<span class="ident" id="4814674">scan</span><span class="op" id="4814678">.</span><span class="ident" id="4814679">eof</span><span class="op" id="4814682">(</span><span class="op" id="4814683">)</span>&nbsp;<span class="op" id="4814685">==</span>&nbsp;<span class="ident" id="4814688">scanError</span>&nbsp;<span class="op" id="4814698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4814702">dst</span><span class="op" id="4814705">.</span><span class="ident" id="4814706">Truncate</span><span class="op" id="4814714">(</span><span class="ident" id="4814715">origLen</span><span class="op" id="4814722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814726">return</span>&nbsp;<span class="ident" id="4814733">scan</span><span class="op" id="4814737">.</span><span class="ident" id="4814738">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4814743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4814746">return</span>&nbsp;<span class="ident" id="4814753">nil</span><br>
<span class="lineno"></span><span class="op" id="4814757">}</span>
</div>
</body>
</html>
