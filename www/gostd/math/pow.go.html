<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1921064">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1921119">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1921173">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1921224">package</span>&nbsp;<span class="ident" id="1921232">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1921238">func</span>&nbsp;<span class="ident" id="1921243">isOddInt</span><span class="op" id="1921251">(</span><span class="ident" id="1921252">x</span>&nbsp;<span class="builtintype" id="1921254">float64</span><span class="op" id="1921261">)</span>&nbsp;<span class="builtintype" id="1921263">bool</span>&nbsp;<span class="op" id="1921268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921271">xi</span><span class="op" id="1921273">,</span>&nbsp;<span class="ident" id="1921275">xf</span>&nbsp;<span class="op" id="1921278">:=</span>&nbsp;<span class="ident" id="1921281">Modf</span><span class="op" id="1921285">(</span><span class="ident" id="1921286">x</span><span class="op" id="1921287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1921290">return</span>&nbsp;<span class="ident" id="1921297">xf</span>&nbsp;<span class="op" id="1921300">==</span>&nbsp;<span class="num" id="1921303">0</span>&nbsp;<span class="op" id="1921305">&amp;&amp;</span>&nbsp;<span class="ident" id="1921308">int64</span><span class="op" id="1921313">(</span><span class="ident" id="1921314">xi</span><span class="op" id="1921316">)</span><span class="op" id="1921317">&amp;</span><span class="num" id="1921318">1</span>&nbsp;<span class="op" id="1921320">==</span>&nbsp;<span class="num" id="1921323">1</span><br>
<span class="lineno">10</span><span class="op" id="1921325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1921328">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="1921396">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1921462">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="1921512">//</span><br>
<span class="lineno"></span><span class="comment" id="1921515">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="1921548">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1921577">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="1921604">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1921631">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1921652">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1921673">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1921721">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="1921746">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="1921769">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1921831">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1921877">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1921937">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="1921959">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1921994">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1922027">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1922060">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1922095">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="1922128">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1922159">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="1922189">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="1922250">func</span>&nbsp;<span class="ident" id="1922255">Pow</span><span class="op" id="1922258">(</span><span class="ident" id="1922259">x</span><span class="op" id="1922260">,</span>&nbsp;<span class="ident" id="1922262">y</span>&nbsp;<span class="builtintype" id="1922264">float64</span><span class="op" id="1922271">)</span>&nbsp;<span class="builtintype" id="1922273">float64</span>&nbsp;<span class="op" id="1922281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922284">switch</span>&nbsp;<span class="op" id="1922291">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922294">case</span>&nbsp;<span class="ident" id="1922299">y</span>&nbsp;<span class="op" id="1922301">==</span>&nbsp;<span class="num" id="1922304">0</span>&nbsp;<span class="op" id="1922306">||</span>&nbsp;<span class="ident" id="1922309">x</span>&nbsp;<span class="op" id="1922311">==</span>&nbsp;<span class="num" id="1922314">1</span><span class="op" id="1922315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922319">return</span>&nbsp;<span class="num" id="1922326">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922329">case</span>&nbsp;<span class="ident" id="1922334">y</span>&nbsp;<span class="op" id="1922336">==</span>&nbsp;<span class="num" id="1922339">1</span><span class="op" id="1922340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922344">return</span>&nbsp;<span class="ident" id="1922351">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922354">case</span>&nbsp;<span class="ident" id="1922359">y</span>&nbsp;<span class="op" id="1922361">==</span>&nbsp;<span class="num" id="1922364">0.5</span><span class="op" id="1922367">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922371">return</span>&nbsp;<span class="ident" id="1922378">Sqrt</span><span class="op" id="1922382">(</span><span class="ident" id="1922383">x</span><span class="op" id="1922384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922387">case</span>&nbsp;<span class="ident" id="1922392">y</span>&nbsp;<span class="op" id="1922394">==</span>&nbsp;<span class="op" id="1922397">-</span><span class="num" id="1922398">0.5</span><span class="op" id="1922401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922405">return</span>&nbsp;<span class="num" id="1922412">1</span>&nbsp;<span class="op" id="1922414">/</span>&nbsp;<span class="ident" id="1922416">Sqrt</span><span class="op" id="1922420">(</span><span class="ident" id="1922421">x</span><span class="op" id="1922422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922425">case</span>&nbsp;<span class="ident" id="1922430">IsNaN</span><span class="op" id="1922435">(</span><span class="ident" id="1922436">x</span><span class="op" id="1922437">)</span>&nbsp;<span class="op" id="1922439">||</span>&nbsp;<span class="ident" id="1922442">IsNaN</span><span class="op" id="1922447">(</span><span class="ident" id="1922448">y</span><span class="op" id="1922449">)</span><span class="op" id="1922450">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922454">return</span>&nbsp;<span class="ident" id="1922461">NaN</span><span class="op" id="1922464">(</span><span class="op" id="1922465">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922468">case</span>&nbsp;<span class="ident" id="1922473">x</span>&nbsp;<span class="op" id="1922475">==</span>&nbsp;<span class="num" id="1922478">0</span><span class="op" id="1922479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922483">switch</span>&nbsp;<span class="op" id="1922490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922494">case</span>&nbsp;<span class="ident" id="1922499">y</span>&nbsp;<span class="op" id="1922501">&lt;</span>&nbsp;<span class="num" id="1922503">0</span><span class="op" id="1922504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922509">if</span>&nbsp;<span class="ident" id="1922512">isOddInt</span><span class="op" id="1922520">(</span><span class="ident" id="1922521">y</span><span class="op" id="1922522">)</span>&nbsp;<span class="op" id="1922524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922530">return</span>&nbsp;<span class="ident" id="1922537">Copysign</span><span class="op" id="1922545">(</span><span class="ident" id="1922546">Inf</span><span class="op" id="1922549">(</span><span class="num" id="1922550">1</span><span class="op" id="1922551">)</span><span class="op" id="1922552">,</span>&nbsp;<span class="ident" id="1922554">x</span><span class="op" id="1922555">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922565">return</span>&nbsp;<span class="ident" id="1922572">Inf</span><span class="op" id="1922575">(</span><span class="num" id="1922576">1</span><span class="op" id="1922577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922581">case</span>&nbsp;<span class="ident" id="1922586">y</span>&nbsp;<span class="op" id="1922588">&gt;</span>&nbsp;<span class="num" id="1922590">0</span><span class="op" id="1922591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922596">if</span>&nbsp;<span class="ident" id="1922599">isOddInt</span><span class="op" id="1922607">(</span><span class="ident" id="1922608">y</span><span class="op" id="1922609">)</span>&nbsp;<span class="op" id="1922611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922617">return</span>&nbsp;<span class="ident" id="1922624">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922634">return</span>&nbsp;<span class="num" id="1922641">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922648">case</span>&nbsp;<span class="ident" id="1922653">IsInf</span><span class="op" id="1922658">(</span><span class="ident" id="1922659">y</span><span class="op" id="1922660">,</span>&nbsp;<span class="num" id="1922662">0</span><span class="op" id="1922663">)</span><span class="op" id="1922664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922668">switch</span>&nbsp;<span class="op" id="1922675">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922679">case</span>&nbsp;<span class="ident" id="1922684">x</span>&nbsp;<span class="op" id="1922686">==</span>&nbsp;<span class="op" id="1922689">-</span><span class="num" id="1922690">1</span><span class="op" id="1922691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922696">return</span>&nbsp;<span class="num" id="1922703">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922707">case</span>&nbsp;<span class="op" id="1922712">(</span><span class="ident" id="1922713">Abs</span><span class="op" id="1922716">(</span><span class="ident" id="1922717">x</span><span class="op" id="1922718">)</span>&nbsp;<span class="op" id="1922720">&lt;</span>&nbsp;<span class="num" id="1922722">1</span><span class="op" id="1922723">)</span>&nbsp;<span class="op" id="1922725">==</span>&nbsp;<span class="ident" id="1922728">IsInf</span><span class="op" id="1922733">(</span><span class="ident" id="1922734">y</span><span class="op" id="1922735">,</span>&nbsp;<span class="num" id="1922737">1</span><span class="op" id="1922738">)</span><span class="op" id="1922739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922744">return</span>&nbsp;<span class="num" id="1922751">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922755">default</span><span class="op" id="1922762">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922767">return</span>&nbsp;<span class="ident" id="1922774">Inf</span><span class="op" id="1922777">(</span><span class="num" id="1922778">1</span><span class="op" id="1922779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922786">case</span>&nbsp;<span class="ident" id="1922791">IsInf</span><span class="op" id="1922796">(</span><span class="ident" id="1922797">x</span><span class="op" id="1922798">,</span>&nbsp;<span class="num" id="1922800">0</span><span class="op" id="1922801">)</span><span class="op" id="1922802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922806">if</span>&nbsp;<span class="ident" id="1922809">IsInf</span><span class="op" id="1922814">(</span><span class="ident" id="1922815">x</span><span class="op" id="1922816">,</span>&nbsp;<span class="op" id="1922818">-</span><span class="num" id="1922819">1</span><span class="op" id="1922820">)</span>&nbsp;<span class="op" id="1922822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922827">return</span>&nbsp;<span class="ident" id="1922834">Pow</span><span class="op" id="1922837">(</span><span class="num" id="1922838">1</span><span class="op" id="1922839">/</span><span class="ident" id="1922840">x</span><span class="op" id="1922841">,</span>&nbsp;<span class="op" id="1922843">-</span><span class="ident" id="1922844">y</span><span class="op" id="1922845">)</span>&nbsp;<span class="comment" id="1922847">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922868">switch</span>&nbsp;<span class="op" id="1922875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922879">case</span>&nbsp;<span class="ident" id="1922884">y</span>&nbsp;<span class="op" id="1922886">&lt;</span>&nbsp;<span class="num" id="1922888">0</span><span class="op" id="1922889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922894">return</span>&nbsp;<span class="num" id="1922901">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922905">case</span>&nbsp;<span class="ident" id="1922910">y</span>&nbsp;<span class="op" id="1922912">&gt;</span>&nbsp;<span class="num" id="1922914">0</span><span class="op" id="1922915">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922920">return</span>&nbsp;<span class="ident" id="1922927">Inf</span><span class="op" id="1922930">(</span><span class="num" id="1922931">1</span><span class="op" id="1922932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1922939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922943">absy</span>&nbsp;<span class="op" id="1922948">:=</span>&nbsp;<span class="ident" id="1922951">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922954">flip</span>&nbsp;<span class="op" id="1922959">:=</span>&nbsp;<span class="builtintype" id="1922962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922969">if</span>&nbsp;<span class="ident" id="1922972">absy</span>&nbsp;<span class="op" id="1922977">&lt;</span>&nbsp;<span class="num" id="1922979">0</span>&nbsp;<span class="op" id="1922981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922985">absy</span>&nbsp;<span class="op" id="1922990">=</span>&nbsp;<span class="op" id="1922992">-</span><span class="ident" id="1922993">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923000">flip</span>&nbsp;<span class="op" id="1923005">=</span>&nbsp;<span class="builtintype" id="1923007">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923013">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923016">yi</span><span class="op" id="1923018">,</span>&nbsp;<span class="ident" id="1923020">yf</span>&nbsp;<span class="op" id="1923023">:=</span>&nbsp;<span class="ident" id="1923026">Modf</span><span class="op" id="1923030">(</span><span class="ident" id="1923031">absy</span><span class="op" id="1923035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923038">if</span>&nbsp;<span class="ident" id="1923041">yf</span>&nbsp;<span class="op" id="1923044">!=</span>&nbsp;<span class="num" id="1923047">0</span>&nbsp;<span class="op" id="1923049">&amp;&amp;</span>&nbsp;<span class="ident" id="1923052">x</span>&nbsp;<span class="op" id="1923054">&lt;</span>&nbsp;<span class="num" id="1923056">0</span>&nbsp;<span class="op" id="1923058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923062">return</span>&nbsp;<span class="ident" id="1923069">NaN</span><span class="op" id="1923072">(</span><span class="op" id="1923073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923079">if</span>&nbsp;<span class="ident" id="1923082">yi</span>&nbsp;<span class="op" id="1923085">&gt;=</span>&nbsp;<span class="num" id="1923088">1</span><span class="op" id="1923089">&lt;&lt;</span><span class="num" id="1923091">63</span>&nbsp;<span class="op" id="1923094">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923098">return</span>&nbsp;<span class="ident" id="1923105">Exp</span><span class="op" id="1923108">(</span><span class="ident" id="1923109">y</span>&nbsp;<span class="op" id="1923111">*</span>&nbsp;<span class="ident" id="1923113">Log</span><span class="op" id="1923116">(</span><span class="ident" id="1923117">x</span><span class="op" id="1923118">)</span><span class="op" id="1923119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923126">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923162">a1</span>&nbsp;<span class="op" id="1923165">:=</span>&nbsp;<span class="num" id="1923168">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923173">ae</span>&nbsp;<span class="op" id="1923176">:=</span>&nbsp;<span class="num" id="1923179">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923183">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923200">if</span>&nbsp;<span class="ident" id="1923203">yf</span>&nbsp;<span class="op" id="1923206">!=</span>&nbsp;<span class="num" id="1923209">0</span>&nbsp;<span class="op" id="1923211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923215">if</span>&nbsp;<span class="ident" id="1923218">yf</span>&nbsp;<span class="op" id="1923221">&gt;</span>&nbsp;<span class="num" id="1923223">0.5</span>&nbsp;<span class="op" id="1923227">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923232">yf</span><span class="op" id="1923234">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923240">yi</span><span class="op" id="1923242">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923251">a1</span>&nbsp;<span class="op" id="1923254">=</span>&nbsp;<span class="ident" id="1923256">Exp</span><span class="op" id="1923259">(</span><span class="ident" id="1923260">yf</span>&nbsp;<span class="op" id="1923263">*</span>&nbsp;<span class="ident" id="1923265">Log</span><span class="op" id="1923268">(</span><span class="ident" id="1923269">x</span><span class="op" id="1923270">)</span><span class="op" id="1923271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923274">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923278">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923295">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923338">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923372">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923411">x1</span><span class="op" id="1923413">,</span>&nbsp;<span class="ident" id="1923415">xe</span>&nbsp;<span class="op" id="1923418">:=</span>&nbsp;<span class="ident" id="1923421">Frexp</span><span class="op" id="1923426">(</span><span class="ident" id="1923427">x</span><span class="op" id="1923428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923431">for</span>&nbsp;<span class="ident" id="1923435">i</span>&nbsp;<span class="op" id="1923437">:=</span>&nbsp;<span class="ident" id="1923440">int64</span><span class="op" id="1923445">(</span><span class="ident" id="1923446">yi</span><span class="op" id="1923448">)</span><span class="op" id="1923449">;</span>&nbsp;<span class="ident" id="1923451">i</span>&nbsp;<span class="op" id="1923453">!=</span>&nbsp;<span class="num" id="1923456">0</span><span class="op" id="1923457">;</span>&nbsp;<span class="ident" id="1923459">i</span>&nbsp;<span class="op" id="1923461">&gt;&gt;=</span>&nbsp;<span class="num" id="1923465">1</span>&nbsp;<span class="op" id="1923467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923471">if</span>&nbsp;<span class="ident" id="1923474">i</span><span class="op" id="1923475">&amp;</span><span class="num" id="1923476">1</span>&nbsp;<span class="op" id="1923478">==</span>&nbsp;<span class="num" id="1923481">1</span>&nbsp;<span class="op" id="1923483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923488">a1</span>&nbsp;<span class="op" id="1923491">*=</span>&nbsp;<span class="ident" id="1923494">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923500">ae</span>&nbsp;<span class="op" id="1923503">+=</span>&nbsp;<span class="ident" id="1923506">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923515">x1</span>&nbsp;<span class="op" id="1923518">*=</span>&nbsp;<span class="ident" id="1923521">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923526">xe</span>&nbsp;<span class="op" id="1923529">&lt;&lt;=</span>&nbsp;<span class="num" id="1923533">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923537">if</span>&nbsp;<span class="ident" id="1923540">x1</span>&nbsp;<span class="op" id="1923543">&lt;</span>&nbsp;<span class="num" id="1923545">.5</span>&nbsp;<span class="op" id="1923548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923553">x1</span>&nbsp;<span class="op" id="1923556">+=</span>&nbsp;<span class="ident" id="1923559">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923565">xe</span><span class="op" id="1923567">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923579">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923598">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923628">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923658">if</span>&nbsp;<span class="ident" id="1923661">flip</span>&nbsp;<span class="op" id="1923666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923670">a1</span>&nbsp;<span class="op" id="1923673">=</span>&nbsp;<span class="num" id="1923675">1</span>&nbsp;<span class="op" id="1923677">/</span>&nbsp;<span class="ident" id="1923679">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923684">ae</span>&nbsp;<span class="op" id="1923687">=</span>&nbsp;<span class="op" id="1923689">-</span><span class="ident" id="1923690">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923697">return</span>&nbsp;<span class="ident" id="1923704">Ldexp</span><span class="op" id="1923709">(</span><span class="ident" id="1923710">a1</span><span class="op" id="1923712">,</span>&nbsp;<span class="ident" id="1923714">ae</span><span class="op" id="1923716">)</span><br>
<span class="lineno"></span><span class="op" id="1923718">}</span>
</div>
</body>
</html>
