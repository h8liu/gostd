<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html" class="current">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4011556">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4011611">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4011665">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4011716">package</span>&nbsp;<span class="ident" id="4011724">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4011729">import</span>&nbsp;<span class="op" id="4011736">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4011739">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4011752">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4011759">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4011762">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4011805">type</span>&nbsp;<span class="ident" id="4011810">DNSError</span>&nbsp;<span class="keyword" id="4011819">struct</span>&nbsp;<span class="op" id="4011826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4011829">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4011839">string</span>&nbsp;<span class="comment" id="4011846">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4011875">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4011885">string</span>&nbsp;<span class="comment" id="4011892">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4011912">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4011922">string</span>&nbsp;<span class="comment" id="4011929">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4011945">IsTimeout</span>&nbsp;<span class="builtintype" id="4011955">bool</span><br>
<span class="lineno"></span><span class="op" id="4011960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="4011963">func</span>&nbsp;<span class="op" id="4011968">(</span><span class="ident" id="4011969">e</span>&nbsp;<span class="op" id="4011971">*</span><span class="ident" id="4011972">DNSError</span><span class="op" id="4011980">)</span>&nbsp;<span class="ident" id="4011982">Error</span><span class="op" id="4011987">(</span><span class="op" id="4011988">)</span>&nbsp;<span class="builtintype" id="4011990">string</span>&nbsp;<span class="op" id="4011997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012000">if</span>&nbsp;<span class="ident" id="4012003">e</span>&nbsp;<span class="op" id="4012005">==</span>&nbsp;<span class="ident" id="4012008">nil</span>&nbsp;<span class="op" id="4012012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012016">return</span>&nbsp;<span class="string" id="4012023">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4012032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012035">s</span>&nbsp;<span class="op" id="4012037">:=</span>&nbsp;<span class="string" id="4012040">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="4012050">+</span>&nbsp;<span class="ident" id="4012052">e</span><span class="op" id="4012053">.</span><span class="ident" id="4012054">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012060">if</span>&nbsp;<span class="ident" id="4012063">e</span><span class="op" id="4012064">.</span><span class="ident" id="4012065">Server</span>&nbsp;<span class="op" id="4012072">!=</span>&nbsp;<span class="string" id="4012075">&#34;&#34;</span>&nbsp;<span class="op" id="4012078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012082">s</span>&nbsp;<span class="op" id="4012084">+=</span>&nbsp;<span class="string" id="4012087">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="4012094">+</span>&nbsp;<span class="ident" id="4012096">e</span><span class="op" id="4012097">.</span><span class="ident" id="4012098">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4012106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012109">s</span>&nbsp;<span class="op" id="4012111">+=</span>&nbsp;<span class="string" id="4012114">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4012119">+</span>&nbsp;<span class="ident" id="4012121">e</span><span class="op" id="4012122">.</span><span class="ident" id="4012123">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012128">return</span>&nbsp;<span class="ident" id="4012135">s</span><br>
<span class="lineno">30</span><span class="op" id="4012137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4012140">func</span>&nbsp;<span class="op" id="4012145">(</span><span class="ident" id="4012146">e</span>&nbsp;<span class="op" id="4012148">*</span><span class="ident" id="4012149">DNSError</span><span class="op" id="4012157">)</span>&nbsp;<span class="ident" id="4012159">Timeout</span><span class="op" id="4012166">(</span><span class="op" id="4012167">)</span>&nbsp;<span class="builtintype" id="4012169">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4012176">{</span>&nbsp;<span class="keyword" id="4012178">return</span>&nbsp;<span class="ident" id="4012185">e</span><span class="op" id="4012186">.</span><span class="ident" id="4012187">IsTimeout</span>&nbsp;<span class="op" id="4012197">}</span><br>
<span class="lineno"></span><span class="keyword" id="4012199">func</span>&nbsp;<span class="op" id="4012204">(</span><span class="ident" id="4012205">e</span>&nbsp;<span class="op" id="4012207">*</span><span class="ident" id="4012208">DNSError</span><span class="op" id="4012216">)</span>&nbsp;<span class="ident" id="4012218">Temporary</span><span class="op" id="4012227">(</span><span class="op" id="4012228">)</span>&nbsp;<span class="builtintype" id="4012230">bool</span>&nbsp;<span class="op" id="4012235">{</span>&nbsp;<span class="keyword" id="4012237">return</span>&nbsp;<span class="ident" id="4012244">e</span><span class="op" id="4012245">.</span><span class="ident" id="4012246">IsTimeout</span>&nbsp;<span class="op" id="4012256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="4012259">const</span>&nbsp;<span class="ident" id="4012265">noSuchHost</span>&nbsp;<span class="op" id="4012276">=</span>&nbsp;<span class="string" id="4012278">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4012294">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="4012367">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="4012445">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="4012473">func</span>&nbsp;<span class="ident" id="4012478">reverseaddr</span><span class="op" id="4012489">(</span><span class="ident" id="4012490">addr</span>&nbsp;<span class="builtintype" id="4012495">string</span><span class="op" id="4012501">)</span>&nbsp;<span class="op" id="4012503">(</span><span class="ident" id="4012504">arpa</span>&nbsp;<span class="builtintype" id="4012509">string</span><span class="op" id="4012515">,</span>&nbsp;<span class="ident" id="4012517">err</span>&nbsp;<span class="builtintype" id="4012521">error</span><span class="op" id="4012526">)</span>&nbsp;<span class="op" id="4012528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012531">ip</span>&nbsp;<span class="op" id="4012534">:=</span>&nbsp;<span class="ident" id="4012537">ParseIP</span><span class="op" id="4012544">(</span><span class="ident" id="4012545">addr</span><span class="op" id="4012549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012552">if</span>&nbsp;<span class="ident" id="4012555">ip</span>&nbsp;<span class="op" id="4012558">==</span>&nbsp;<span class="ident" id="4012561">nil</span>&nbsp;<span class="op" id="4012565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012569">return</span>&nbsp;<span class="string" id="4012576">&#34;&#34;</span><span class="op" id="4012578">,</span>&nbsp;<span class="op" id="4012580">&amp;</span><span class="ident" id="4012581">DNSError</span><span class="op" id="4012589">{</span><span class="ident" id="4012590">Err</span><span class="op" id="4012593">:</span>&nbsp;<span class="string" id="4012595">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="4012617">,</span>&nbsp;<span class="ident" id="4012619">Name</span><span class="op" id="4012623">:</span>&nbsp;<span class="ident" id="4012625">addr</span><span class="op" id="4012629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4012632">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012635">if</span>&nbsp;<span class="ident" id="4012638">ip</span><span class="op" id="4012640">.</span><span class="ident" id="4012641">To4</span><span class="op" id="4012644">(</span><span class="op" id="4012645">)</span>&nbsp;<span class="op" id="4012647">!=</span>&nbsp;<span class="ident" id="4012650">nil</span>&nbsp;<span class="op" id="4012654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012658">return</span>&nbsp;<span class="ident" id="4012665">itoa</span><span class="op" id="4012669">(</span><span class="builtintype" id="4012670">int</span><span class="op" id="4012673">(</span><span class="ident" id="4012674">ip</span><span class="op" id="4012676">[</span><span class="num" id="4012677">15</span><span class="op" id="4012679">]</span><span class="op" id="4012680">)</span><span class="op" id="4012681">)</span>&nbsp;<span class="op" id="4012683">+</span>&nbsp;<span class="string" id="4012685">&#34;.&#34;</span>&nbsp;<span class="op" id="4012689">+</span>&nbsp;<span class="ident" id="4012691">itoa</span><span class="op" id="4012695">(</span><span class="builtintype" id="4012696">int</span><span class="op" id="4012699">(</span><span class="ident" id="4012700">ip</span><span class="op" id="4012702">[</span><span class="num" id="4012703">14</span><span class="op" id="4012705">]</span><span class="op" id="4012706">)</span><span class="op" id="4012707">)</span>&nbsp;<span class="op" id="4012709">+</span>&nbsp;<span class="string" id="4012711">&#34;.&#34;</span>&nbsp;<span class="op" id="4012715">+</span>&nbsp;<span class="ident" id="4012717">itoa</span><span class="op" id="4012721">(</span><span class="builtintype" id="4012722">int</span><span class="op" id="4012725">(</span><span class="ident" id="4012726">ip</span><span class="op" id="4012728">[</span><span class="num" id="4012729">13</span><span class="op" id="4012731">]</span><span class="op" id="4012732">)</span><span class="op" id="4012733">)</span>&nbsp;<span class="op" id="4012735">+</span>&nbsp;<span class="string" id="4012737">&#34;.&#34;</span>&nbsp;<span class="op" id="4012741">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012746">itoa</span><span class="op" id="4012750">(</span><span class="builtintype" id="4012751">int</span><span class="op" id="4012754">(</span><span class="ident" id="4012755">ip</span><span class="op" id="4012757">[</span><span class="num" id="4012758">12</span><span class="op" id="4012760">]</span><span class="op" id="4012761">)</span><span class="op" id="4012762">)</span>&nbsp;<span class="op" id="4012764">+</span>&nbsp;<span class="string" id="4012766">&#34;.in-addr.arpa.&#34;</span><span class="op" id="4012782">,</span>&nbsp;<span class="ident" id="4012784">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4012789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4012792">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012809">buf</span>&nbsp;<span class="op" id="4012813">:=</span>&nbsp;<span class="builtinfunc" id="4012816">make</span><span class="op" id="4012820">(</span><span class="op" id="4012821">[</span><span class="op" id="4012822">]</span><span class="builtintype" id="4012823">byte</span><span class="op" id="4012827">,</span>&nbsp;<span class="num" id="4012829">0</span><span class="op" id="4012830">,</span>&nbsp;<span class="builtinfunc" id="4012832">len</span><span class="op" id="4012835">(</span><span class="ident" id="4012836">ip</span><span class="op" id="4012838">)</span><span class="op" id="4012839">*</span><span class="num" id="4012840">4</span><span class="op" id="4012841">+</span><span class="builtinfunc" id="4012842">len</span><span class="op" id="4012845">(</span><span class="string" id="4012846">&#34;ip6.arpa.&#34;</span><span class="op" id="4012857">)</span><span class="op" id="4012858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4012861">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4012899">for</span>&nbsp;<span class="ident" id="4012903">i</span>&nbsp;<span class="op" id="4012905">:=</span>&nbsp;<span class="builtinfunc" id="4012908">len</span><span class="op" id="4012911">(</span><span class="ident" id="4012912">ip</span><span class="op" id="4012914">)</span>&nbsp;<span class="op" id="4012916">-</span>&nbsp;<span class="num" id="4012918">1</span><span class="op" id="4012919">;</span>&nbsp;<span class="ident" id="4012921">i</span>&nbsp;<span class="op" id="4012923">&gt;=</span>&nbsp;<span class="num" id="4012926">0</span><span class="op" id="4012927">;</span>&nbsp;<span class="ident" id="4012929">i</span><span class="op" id="4012930">--</span>&nbsp;<span class="op" id="4012933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012937">v</span>&nbsp;<span class="op" id="4012939">:=</span>&nbsp;<span class="ident" id="4012942">ip</span><span class="op" id="4012944">[</span><span class="ident" id="4012945">i</span><span class="op" id="4012946">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012950">buf</span>&nbsp;<span class="op" id="4012954">=</span>&nbsp;<span class="builtinfunc" id="4012956">append</span><span class="op" id="4012962">(</span><span class="ident" id="4012963">buf</span><span class="op" id="4012966">,</span>&nbsp;<span class="ident" id="4012968">hexDigit</span><span class="op" id="4012976">[</span><span class="ident" id="4012977">v</span><span class="op" id="4012978">&amp;</span><span class="num" id="4012979">0xF</span><span class="op" id="4012982">]</span><span class="op" id="4012983">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4012987">buf</span>&nbsp;<span class="op" id="4012991">=</span>&nbsp;<span class="builtinfunc" id="4012993">append</span><span class="op" id="4012999">(</span><span class="ident" id="4013000">buf</span><span class="op" id="4013003">,</span>&nbsp;<span class="string" id="4013005">&#39;.&#39;</span><span class="op" id="4013008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4013012">buf</span>&nbsp;<span class="op" id="4013016">=</span>&nbsp;<span class="builtinfunc" id="4013018">append</span><span class="op" id="4013024">(</span><span class="ident" id="4013025">buf</span><span class="op" id="4013028">,</span>&nbsp;<span class="ident" id="4013030">hexDigit</span><span class="op" id="4013038">[</span><span class="ident" id="4013039">v</span><span class="op" id="4013040">&gt;&gt;</span><span class="num" id="4013042">4</span><span class="op" id="4013043">]</span><span class="op" id="4013044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4013048">buf</span>&nbsp;<span class="op" id="4013052">=</span>&nbsp;<span class="builtinfunc" id="4013054">append</span><span class="op" id="4013060">(</span><span class="ident" id="4013061">buf</span><span class="op" id="4013064">,</span>&nbsp;<span class="string" id="4013066">&#39;.&#39;</span><span class="op" id="4013069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4013072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013075">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4013139">buf</span>&nbsp;<span class="op" id="4013143">=</span>&nbsp;<span class="builtinfunc" id="4013145">append</span><span class="op" id="4013151">(</span><span class="ident" id="4013152">buf</span><span class="op" id="4013155">,</span>&nbsp;<span class="string" id="4013157">&#34;ip6.arpa.&#34;</span><span class="op" id="4013168">...</span><span class="op" id="4013171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4013174">return</span>&nbsp;<span class="builtintype" id="4013181">string</span><span class="op" id="4013187">(</span><span class="ident" id="4013188">buf</span><span class="op" id="4013191">)</span><span class="op" id="4013192">,</span>&nbsp;<span class="ident" id="4013194">nil</span><br>
<span class="lineno"></span><span class="op" id="4013198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4013201">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="4013241">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4013284">func</span>&nbsp;<span class="ident" id="4013289">answer</span><span class="op" id="4013295">(</span><span class="ident" id="4013296">name</span><span class="op" id="4013300">,</span>&nbsp;<span class="ident" id="4013302">server</span>&nbsp;<span class="builtintype" id="4013309">string</span><span class="op" id="4013315">,</span>&nbsp;<span class="ident" id="4013317">dns</span>&nbsp;<span class="op" id="4013321">*</span><span class="ident" id="4013322">dnsMsg</span><span class="op" id="4013328">,</span>&nbsp;<span class="ident" id="4013330">qtype</span>&nbsp;<span class="builtintype" id="4013336">uint16</span><span class="op" id="4013342">)</span>&nbsp;<span class="op" id="4013344">(</span><span class="ident" id="4013345">cname</span>&nbsp;<span class="builtintype" id="4013351">string</span><span class="op" id="4013357">,</span>&nbsp;<span class="ident" id="4013359">addrs</span>&nbsp;<span class="op" id="4013365">[</span><span class="op" id="4013366">]</span><span class="ident" id="4013367">dnsRR</span><span class="op" id="4013372">,</span>&nbsp;<span class="ident" id="4013374">err</span>&nbsp;<span class="builtintype" id="4013378">error</span><span class="op" id="4013383">)</span>&nbsp;<span class="op" id="4013385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4013388">addrs</span>&nbsp;<span class="op" id="4013394">=</span>&nbsp;<span class="builtinfunc" id="4013396">make</span><span class="op" id="4013400">(</span><span class="op" id="4013401">[</span><span class="op" id="4013402">]</span><span class="ident" id="4013403">dnsRR</span><span class="op" id="4013408">,</span>&nbsp;<span class="num" id="4013410">0</span><span class="op" id="4013411">,</span>&nbsp;<span class="builtinfunc" id="4013413">len</span><span class="op" id="4013416">(</span><span class="ident" id="4013417">dns</span><span class="op" id="4013420">.</span><span class="ident" id="4013421">answer</span><span class="op" id="4013427">)</span><span class="op" id="4013428">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4013432">if</span>&nbsp;<span class="ident" id="4013435">dns</span><span class="op" id="4013438">.</span><span class="ident" id="4013439">rcode</span>&nbsp;<span class="op" id="4013445">==</span>&nbsp;<span class="ident" id="4013448">dnsRcodeNameError</span>&nbsp;<span class="op" id="4013466">&amp;&amp;</span>&nbsp;<span class="ident" id="4013469">dns</span><span class="op" id="4013472">.</span><span class="ident" id="4013473">recursion_available</span>&nbsp;<span class="op" id="4013493">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4013497">return</span>&nbsp;<span class="string" id="4013504">&#34;&#34;</span><span class="op" id="4013506">,</span>&nbsp;<span class="ident" id="4013508">nil</span><span class="op" id="4013511">,</span>&nbsp;<span class="op" id="4013513">&amp;</span><span class="ident" id="4013514">DNSError</span><span class="op" id="4013522">{</span><span class="ident" id="4013523">Err</span><span class="op" id="4013526">:</span>&nbsp;<span class="ident" id="4013528">noSuchHost</span><span class="op" id="4013538">,</span>&nbsp;<span class="ident" id="4013540">Name</span><span class="op" id="4013544">:</span>&nbsp;<span class="ident" id="4013546">name</span><span class="op" id="4013550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4013553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4013556">if</span>&nbsp;<span class="ident" id="4013559">dns</span><span class="op" id="4013562">.</span><span class="ident" id="4013563">rcode</span>&nbsp;<span class="op" id="4013569">!=</span>&nbsp;<span class="ident" id="4013572">dnsRcodeSuccess</span>&nbsp;<span class="op" id="4013588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013592">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013632">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013678">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013723">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4013764">return</span>&nbsp;<span class="string" id="4013771">&#34;&#34;</span><span class="op" id="4013773">,</span>&nbsp;<span class="ident" id="4013775">nil</span><span class="op" id="4013778">,</span>&nbsp;<span class="op" id="4013780">&amp;</span><span class="ident" id="4013781">DNSError</span><span class="op" id="4013789">{</span><span class="ident" id="4013790">Err</span><span class="op" id="4013793">:</span>&nbsp;<span class="string" id="4013795">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="4013815">,</span>&nbsp;<span class="ident" id="4013817">Name</span><span class="op" id="4013821">:</span>&nbsp;<span class="ident" id="4013823">name</span><span class="op" id="4013827">,</span>&nbsp;<span class="ident" id="4013829">Server</span><span class="op" id="4013835">:</span>&nbsp;<span class="ident" id="4013837">server</span><span class="op" id="4013843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4013846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013850">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013873">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013934">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4013980">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014035">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="4014082">Cname</span><span class="op" id="4014087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014090">for</span>&nbsp;<span class="ident" id="4014094">cnameloop</span>&nbsp;<span class="op" id="4014104">:=</span>&nbsp;<span class="num" id="4014107">0</span><span class="op" id="4014108">;</span>&nbsp;<span class="ident" id="4014110">cnameloop</span>&nbsp;<span class="op" id="4014120">&lt;</span>&nbsp;<span class="num" id="4014122">10</span><span class="op" id="4014124">;</span>&nbsp;<span class="ident" id="4014126">cnameloop</span><span class="op" id="4014135">++</span>&nbsp;<span class="op" id="4014138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4014142">addrs</span>&nbsp;<span class="op" id="4014148">=</span>&nbsp;<span class="ident" id="4014150">addrs</span><span class="op" id="4014155">[</span><span class="num" id="4014156">0</span><span class="op" id="4014157">:</span><span class="num" id="4014158">0</span><span class="op" id="4014159">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014163">for</span>&nbsp;<span class="ident" id="4014167">_</span><span class="op" id="4014168">,</span>&nbsp;<span class="ident" id="4014170">rr</span>&nbsp;<span class="op" id="4014173">:=</span>&nbsp;<span class="keyword" id="4014176">range</span>&nbsp;<span class="ident" id="4014182">dns</span><span class="op" id="4014185">.</span><span class="ident" id="4014186">answer</span>&nbsp;<span class="op" id="4014193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014198">if</span>&nbsp;<span class="ident" id="4014201">_</span><span class="op" id="4014202">,</span>&nbsp;<span class="ident" id="4014204">justHeader</span>&nbsp;<span class="op" id="4014215">:=</span>&nbsp;<span class="ident" id="4014218">rr</span><span class="op" id="4014220">.</span><span class="op" id="4014221">(</span><span class="op" id="4014222">*</span><span class="ident" id="4014223">dnsRR_Header</span><span class="op" id="4014235">)</span><span class="op" id="4014236">;</span>&nbsp;<span class="ident" id="4014238">justHeader</span>&nbsp;<span class="op" id="4014249">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014255">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014293">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014335">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014370">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014401">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4014418">h</span>&nbsp;<span class="op" id="4014420">:=</span>&nbsp;<span class="ident" id="4014423">rr</span><span class="op" id="4014425">.</span><span class="ident" id="4014426">Header</span><span class="op" id="4014432">(</span><span class="op" id="4014433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014438">if</span>&nbsp;<span class="ident" id="4014441">h</span><span class="op" id="4014442">.</span><span class="ident" id="4014443">Class</span>&nbsp;<span class="op" id="4014449">==</span>&nbsp;<span class="ident" id="4014452">dnsClassINET</span>&nbsp;<span class="op" id="4014465">&amp;&amp;</span>&nbsp;<span class="ident" id="4014468">h</span><span class="op" id="4014469">.</span><span class="ident" id="4014470">Name</span>&nbsp;<span class="op" id="4014475">==</span>&nbsp;<span class="ident" id="4014478">name</span>&nbsp;<span class="op" id="4014483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014489">switch</span>&nbsp;<span class="ident" id="4014496">h</span><span class="op" id="4014497">.</span><span class="ident" id="4014498">Rrtype</span>&nbsp;<span class="op" id="4014505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014511">case</span>&nbsp;<span class="ident" id="4014516">qtype</span><span class="op" id="4014521">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4014528">addrs</span>&nbsp;<span class="op" id="4014534">=</span>&nbsp;<span class="builtinfunc" id="4014536">append</span><span class="op" id="4014542">(</span><span class="ident" id="4014543">addrs</span><span class="op" id="4014548">,</span>&nbsp;<span class="ident" id="4014550">rr</span><span class="op" id="4014552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014558">case</span>&nbsp;<span class="ident" id="4014563">dnsTypeCNAME</span><span class="op" id="4014575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014582">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4014608">name</span>&nbsp;<span class="op" id="4014613">=</span>&nbsp;<span class="ident" id="4014615">rr</span><span class="op" id="4014617">.</span><span class="op" id="4014618">(</span><span class="op" id="4014619">*</span><span class="ident" id="4014620">dnsRR_CNAME</span><span class="op" id="4014631">)</span><span class="op" id="4014632">.</span><span class="ident" id="4014633">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014644">continue</span>&nbsp;<span class="ident" id="4014653">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014676">if</span>&nbsp;<span class="builtinfunc" id="4014679">len</span><span class="op" id="4014682">(</span><span class="ident" id="4014683">addrs</span><span class="op" id="4014688">)</span>&nbsp;<span class="op" id="4014690">==</span>&nbsp;<span class="num" id="4014693">0</span>&nbsp;<span class="op" id="4014695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014700">return</span>&nbsp;<span class="string" id="4014707">&#34;&#34;</span><span class="op" id="4014709">,</span>&nbsp;<span class="ident" id="4014711">nil</span><span class="op" id="4014714">,</span>&nbsp;<span class="op" id="4014716">&amp;</span><span class="ident" id="4014717">DNSError</span><span class="op" id="4014725">{</span><span class="ident" id="4014726">Err</span><span class="op" id="4014729">:</span>&nbsp;<span class="ident" id="4014731">noSuchHost</span><span class="op" id="4014741">,</span>&nbsp;<span class="ident" id="4014743">Name</span><span class="op" id="4014747">:</span>&nbsp;<span class="ident" id="4014749">name</span><span class="op" id="4014753">,</span>&nbsp;<span class="ident" id="4014755">Server</span><span class="op" id="4014761">:</span>&nbsp;<span class="ident" id="4014763">server</span><span class="op" id="4014769">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014777">return</span>&nbsp;<span class="ident" id="4014784">name</span><span class="op" id="4014788">,</span>&nbsp;<span class="ident" id="4014790">addrs</span><span class="op" id="4014795">,</span>&nbsp;<span class="ident" id="4014797">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014806">return</span>&nbsp;<span class="string" id="4014813">&#34;&#34;</span><span class="op" id="4014815">,</span>&nbsp;<span class="ident" id="4014817">nil</span><span class="op" id="4014820">,</span>&nbsp;<span class="op" id="4014822">&amp;</span><span class="ident" id="4014823">DNSError</span><span class="op" id="4014831">{</span><span class="ident" id="4014832">Err</span><span class="op" id="4014835">:</span>&nbsp;<span class="string" id="4014837">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="4014857">,</span>&nbsp;<span class="ident" id="4014859">Name</span><span class="op" id="4014863">:</span>&nbsp;<span class="ident" id="4014865">name</span><span class="op" id="4014869">,</span>&nbsp;<span class="ident" id="4014871">Server</span><span class="op" id="4014877">:</span>&nbsp;<span class="ident" id="4014879">server</span><span class="op" id="4014885">}</span><br>
<span class="lineno">115</span><span class="op" id="4014887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4014890">func</span>&nbsp;<span class="ident" id="4014895">isDomainName</span><span class="op" id="4014907">(</span><span class="ident" id="4014908">s</span>&nbsp;<span class="builtintype" id="4014910">string</span><span class="op" id="4014916">)</span>&nbsp;<span class="builtintype" id="4014918">bool</span>&nbsp;<span class="op" id="4014923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4014926">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014954">if</span>&nbsp;<span class="builtinfunc" id="4014957">len</span><span class="op" id="4014960">(</span><span class="ident" id="4014961">s</span><span class="op" id="4014962">)</span>&nbsp;<span class="op" id="4014964">==</span>&nbsp;<span class="num" id="4014967">0</span>&nbsp;<span class="op" id="4014969">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014973">return</span>&nbsp;<span class="builtintype" id="4014980">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4014987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4014990">if</span>&nbsp;<span class="builtinfunc" id="4014993">len</span><span class="op" id="4014996">(</span><span class="ident" id="4014997">s</span><span class="op" id="4014998">)</span>&nbsp;<span class="op" id="4015000">&gt;</span>&nbsp;<span class="num" id="4015002">255</span>&nbsp;<span class="op" id="4015006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015010">return</span>&nbsp;<span class="builtintype" id="4015017">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015024">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015028">last</span>&nbsp;<span class="op" id="4015033">:=</span>&nbsp;<span class="builtintype" id="4015036">byte</span><span class="op" id="4015040">(</span><span class="string" id="4015041">&#39;.&#39;</span><span class="op" id="4015044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015047">ok</span>&nbsp;<span class="op" id="4015050">:=</span>&nbsp;<span class="builtintype" id="4015053">false</span>&nbsp;<span class="comment" id="4015059">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015092">partlen</span>&nbsp;<span class="op" id="4015100">:=</span>&nbsp;<span class="num" id="4015103">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015106">for</span>&nbsp;<span class="ident" id="4015110">i</span>&nbsp;<span class="op" id="4015112">:=</span>&nbsp;<span class="num" id="4015115">0</span><span class="op" id="4015116">;</span>&nbsp;<span class="ident" id="4015118">i</span>&nbsp;<span class="op" id="4015120">&lt;</span>&nbsp;<span class="builtinfunc" id="4015122">len</span><span class="op" id="4015125">(</span><span class="ident" id="4015126">s</span><span class="op" id="4015127">)</span><span class="op" id="4015128">;</span>&nbsp;<span class="ident" id="4015130">i</span><span class="op" id="4015131">++</span>&nbsp;<span class="op" id="4015134">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015138">c</span>&nbsp;<span class="op" id="4015140">:=</span>&nbsp;<span class="ident" id="4015143">s</span><span class="op" id="4015144">[</span><span class="ident" id="4015145">i</span><span class="op" id="4015146">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015150">switch</span>&nbsp;<span class="op" id="4015157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015161">default</span><span class="op" id="4015168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015173">return</span>&nbsp;<span class="builtintype" id="4015180">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015188">case</span>&nbsp;<span class="string" id="4015193">&#39;a&#39;</span>&nbsp;<span class="op" id="4015197">&lt;=</span>&nbsp;<span class="ident" id="4015200">c</span>&nbsp;<span class="op" id="4015202">&amp;&amp;</span>&nbsp;<span class="ident" id="4015205">c</span>&nbsp;<span class="op" id="4015207">&lt;=</span>&nbsp;<span class="string" id="4015210">&#39;z&#39;</span>&nbsp;<span class="op" id="4015214">||</span>&nbsp;<span class="string" id="4015217">&#39;A&#39;</span>&nbsp;<span class="op" id="4015221">&lt;=</span>&nbsp;<span class="ident" id="4015224">c</span>&nbsp;<span class="op" id="4015226">&amp;&amp;</span>&nbsp;<span class="ident" id="4015229">c</span>&nbsp;<span class="op" id="4015231">&lt;=</span>&nbsp;<span class="string" id="4015234">&#39;Z&#39;</span>&nbsp;<span class="op" id="4015238">||</span>&nbsp;<span class="ident" id="4015241">c</span>&nbsp;<span class="op" id="4015243">==</span>&nbsp;<span class="string" id="4015246">&#39;_&#39;</span><span class="op" id="4015249">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015254">ok</span>&nbsp;<span class="op" id="4015257">=</span>&nbsp;<span class="builtintype" id="4015259">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015267">partlen</span><span class="op" id="4015274">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015279">case</span>&nbsp;<span class="string" id="4015284">&#39;0&#39;</span>&nbsp;<span class="op" id="4015288">&lt;=</span>&nbsp;<span class="ident" id="4015291">c</span>&nbsp;<span class="op" id="4015293">&amp;&amp;</span>&nbsp;<span class="ident" id="4015296">c</span>&nbsp;<span class="op" id="4015298">&lt;=</span>&nbsp;<span class="string" id="4015301">&#39;9&#39;</span><span class="op" id="4015304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4015309">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015320">partlen</span><span class="op" id="4015327">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015332">case</span>&nbsp;<span class="ident" id="4015337">c</span>&nbsp;<span class="op" id="4015339">==</span>&nbsp;<span class="string" id="4015342">&#39;-&#39;</span><span class="op" id="4015345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4015350">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015388">if</span>&nbsp;<span class="ident" id="4015391">last</span>&nbsp;<span class="op" id="4015396">==</span>&nbsp;<span class="string" id="4015399">&#39;.&#39;</span>&nbsp;<span class="op" id="4015403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015409">return</span>&nbsp;<span class="builtintype" id="4015416">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015425">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015430">partlen</span><span class="op" id="4015437">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015442">case</span>&nbsp;<span class="ident" id="4015447">c</span>&nbsp;<span class="op" id="4015449">==</span>&nbsp;<span class="string" id="4015452">&#39;.&#39;</span><span class="op" id="4015455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4015460">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015503">if</span>&nbsp;<span class="ident" id="4015506">last</span>&nbsp;<span class="op" id="4015511">==</span>&nbsp;<span class="string" id="4015514">&#39;.&#39;</span>&nbsp;<span class="op" id="4015518">||</span>&nbsp;<span class="ident" id="4015521">last</span>&nbsp;<span class="op" id="4015526">==</span>&nbsp;<span class="string" id="4015529">&#39;-&#39;</span>&nbsp;<span class="op" id="4015533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015539">return</span>&nbsp;<span class="builtintype" id="4015546">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015560">if</span>&nbsp;<span class="ident" id="4015563">partlen</span>&nbsp;<span class="op" id="4015571">&gt;</span>&nbsp;<span class="num" id="4015573">63</span>&nbsp;<span class="op" id="4015576">||</span>&nbsp;<span class="ident" id="4015579">partlen</span>&nbsp;<span class="op" id="4015587">==</span>&nbsp;<span class="num" id="4015590">0</span>&nbsp;<span class="op" id="4015592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015598">return</span>&nbsp;<span class="builtintype" id="4015605">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015619">partlen</span>&nbsp;<span class="op" id="4015627">=</span>&nbsp;<span class="num" id="4015629">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015637">last</span>&nbsp;<span class="op" id="4015642">=</span>&nbsp;<span class="ident" id="4015644">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015650">if</span>&nbsp;<span class="ident" id="4015653">last</span>&nbsp;<span class="op" id="4015658">==</span>&nbsp;<span class="string" id="4015661">&#39;-&#39;</span>&nbsp;<span class="op" id="4015665">||</span>&nbsp;<span class="ident" id="4015668">partlen</span>&nbsp;<span class="op" id="4015676">&gt;</span>&nbsp;<span class="num" id="4015678">63</span>&nbsp;<span class="op" id="4015681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015685">return</span>&nbsp;<span class="builtintype" id="4015692">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4015699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4015703">return</span>&nbsp;<span class="ident" id="4015710">ok</span><br>
<span class="lineno"></span><span class="op" id="4015713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="4015716">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4015762">type</span>&nbsp;<span class="ident" id="4015767">SRV</span>&nbsp;<span class="keyword" id="4015771">struct</span>&nbsp;<span class="op" id="4015778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015781">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4015790">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015798">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4015807">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015815">Priority</span>&nbsp;<span class="builtintype" id="4015824">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4015832">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4015841">uint16</span><br>
<span class="lineno"></span><span class="op" id="4015848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4015851">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="4015923">type</span>&nbsp;<span class="ident" id="4015928">byPriorityWeight</span>&nbsp;<span class="op" id="4015945">[</span><span class="op" id="4015946">]</span><span class="op" id="4015947">*</span><span class="ident" id="4015948">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="4015953">func</span>&nbsp;<span class="op" id="4015958">(</span><span class="ident" id="4015959">s</span>&nbsp;<span class="ident" id="4015961">byPriorityWeight</span><span class="op" id="4015977">)</span>&nbsp;<span class="ident" id="4015979">Len</span><span class="op" id="4015982">(</span><span class="op" id="4015983">)</span>&nbsp;<span class="builtintype" id="4015985">int</span>&nbsp;<span class="op" id="4015989">{</span>&nbsp;<span class="keyword" id="4015991">return</span>&nbsp;<span class="builtinfunc" id="4015998">len</span><span class="op" id="4016001">(</span><span class="ident" id="4016002">s</span><span class="op" id="4016003">)</span>&nbsp;<span class="op" id="4016005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4016008">func</span>&nbsp;<span class="op" id="4016013">(</span><span class="ident" id="4016014">s</span>&nbsp;<span class="ident" id="4016016">byPriorityWeight</span><span class="op" id="4016032">)</span>&nbsp;<span class="ident" id="4016034">Swap</span><span class="op" id="4016038">(</span><span class="ident" id="4016039">i</span><span class="op" id="4016040">,</span>&nbsp;<span class="ident" id="4016042">j</span>&nbsp;<span class="builtintype" id="4016044">int</span><span class="op" id="4016047">)</span>&nbsp;<span class="op" id="4016049">{</span>&nbsp;<span class="ident" id="4016051">s</span><span class="op" id="4016052">[</span><span class="ident" id="4016053">i</span><span class="op" id="4016054">]</span><span class="op" id="4016055">,</span>&nbsp;<span class="ident" id="4016057">s</span><span class="op" id="4016058">[</span><span class="ident" id="4016059">j</span><span class="op" id="4016060">]</span>&nbsp;<span class="op" id="4016062">=</span>&nbsp;<span class="ident" id="4016064">s</span><span class="op" id="4016065">[</span><span class="ident" id="4016066">j</span><span class="op" id="4016067">]</span><span class="op" id="4016068">,</span>&nbsp;<span class="ident" id="4016070">s</span><span class="op" id="4016071">[</span><span class="ident" id="4016072">i</span><span class="op" id="4016073">]</span>&nbsp;<span class="op" id="4016075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4016078">func</span>&nbsp;<span class="op" id="4016083">(</span><span class="ident" id="4016084">s</span>&nbsp;<span class="ident" id="4016086">byPriorityWeight</span><span class="op" id="4016102">)</span>&nbsp;<span class="ident" id="4016104">Less</span><span class="op" id="4016108">(</span><span class="ident" id="4016109">i</span><span class="op" id="4016110">,</span>&nbsp;<span class="ident" id="4016112">j</span>&nbsp;<span class="builtintype" id="4016114">int</span><span class="op" id="4016117">)</span>&nbsp;<span class="builtintype" id="4016119">bool</span>&nbsp;<span class="op" id="4016124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016127">return</span>&nbsp;<span class="ident" id="4016134">s</span><span class="op" id="4016135">[</span><span class="ident" id="4016136">i</span><span class="op" id="4016137">]</span><span class="op" id="4016138">.</span><span class="ident" id="4016139">Priority</span>&nbsp;<span class="op" id="4016148">&lt;</span>&nbsp;<span class="ident" id="4016150">s</span><span class="op" id="4016151">[</span><span class="ident" id="4016152">j</span><span class="op" id="4016153">]</span><span class="op" id="4016154">.</span><span class="ident" id="4016155">Priority</span>&nbsp;<span class="op" id="4016164">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016169">(</span><span class="ident" id="4016170">s</span><span class="op" id="4016171">[</span><span class="ident" id="4016172">i</span><span class="op" id="4016173">]</span><span class="op" id="4016174">.</span><span class="ident" id="4016175">Priority</span>&nbsp;<span class="op" id="4016184">==</span>&nbsp;<span class="ident" id="4016187">s</span><span class="op" id="4016188">[</span><span class="ident" id="4016189">j</span><span class="op" id="4016190">]</span><span class="op" id="4016191">.</span><span class="ident" id="4016192">Priority</span>&nbsp;<span class="op" id="4016201">&amp;&amp;</span>&nbsp;<span class="ident" id="4016204">s</span><span class="op" id="4016205">[</span><span class="ident" id="4016206">i</span><span class="op" id="4016207">]</span><span class="op" id="4016208">.</span><span class="ident" id="4016209">Weight</span>&nbsp;<span class="op" id="4016216">&lt;</span>&nbsp;<span class="ident" id="4016218">s</span><span class="op" id="4016219">[</span><span class="ident" id="4016220">j</span><span class="op" id="4016221">]</span><span class="op" id="4016222">.</span><span class="ident" id="4016223">Weight</span><span class="op" id="4016229">)</span><br>
<span class="lineno"></span><span class="op" id="4016231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="4016234">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="4016304">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="4016330">func</span>&nbsp;<span class="op" id="4016335">(</span><span class="ident" id="4016336">addrs</span>&nbsp;<span class="ident" id="4016342">byPriorityWeight</span><span class="op" id="4016358">)</span>&nbsp;<span class="ident" id="4016360">shuffleByWeight</span><span class="op" id="4016375">(</span><span class="op" id="4016376">)</span>&nbsp;<span class="op" id="4016378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016381">sum</span>&nbsp;<span class="op" id="4016385">:=</span>&nbsp;<span class="num" id="4016388">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016391">for</span>&nbsp;<span class="ident" id="4016395">_</span><span class="op" id="4016396">,</span>&nbsp;<span class="ident" id="4016398">addr</span>&nbsp;<span class="op" id="4016403">:=</span>&nbsp;<span class="keyword" id="4016406">range</span>&nbsp;<span class="ident" id="4016412">addrs</span>&nbsp;<span class="op" id="4016418">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016422">sum</span>&nbsp;<span class="op" id="4016426">+=</span>&nbsp;<span class="builtintype" id="4016429">int</span><span class="op" id="4016432">(</span><span class="ident" id="4016433">addr</span><span class="op" id="4016437">.</span><span class="ident" id="4016438">Weight</span><span class="op" id="4016444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016450">for</span>&nbsp;<span class="ident" id="4016454">sum</span>&nbsp;<span class="op" id="4016458">&gt;</span>&nbsp;<span class="num" id="4016460">0</span>&nbsp;<span class="op" id="4016462">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4016465">len</span><span class="op" id="4016468">(</span><span class="ident" id="4016469">addrs</span><span class="op" id="4016474">)</span>&nbsp;<span class="op" id="4016476">&gt;</span>&nbsp;<span class="num" id="4016478">1</span>&nbsp;<span class="op" id="4016480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016484">s</span>&nbsp;<span class="op" id="4016486">:=</span>&nbsp;<span class="num" id="4016489">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016493">n</span>&nbsp;<span class="op" id="4016495">:=</span>&nbsp;<span class="ident" id="4016498">rand</span><span class="op" id="4016502">.</span><span class="ident" id="4016503">Intn</span><span class="op" id="4016507">(</span><span class="ident" id="4016508">sum</span><span class="op" id="4016511">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016515">for</span>&nbsp;<span class="ident" id="4016519">i</span>&nbsp;<span class="op" id="4016521">:=</span>&nbsp;<span class="keyword" id="4016524">range</span>&nbsp;<span class="ident" id="4016530">addrs</span>&nbsp;<span class="op" id="4016536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016541">s</span>&nbsp;<span class="op" id="4016543">+=</span>&nbsp;<span class="builtintype" id="4016546">int</span><span class="op" id="4016549">(</span><span class="ident" id="4016550">addrs</span><span class="op" id="4016555">[</span><span class="ident" id="4016556">i</span><span class="op" id="4016557">]</span><span class="op" id="4016558">.</span><span class="ident" id="4016559">Weight</span><span class="op" id="4016565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016570">if</span>&nbsp;<span class="ident" id="4016573">s</span>&nbsp;<span class="op" id="4016575">&gt;</span>&nbsp;<span class="ident" id="4016577">n</span>&nbsp;<span class="op" id="4016579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016585">if</span>&nbsp;<span class="ident" id="4016588">i</span>&nbsp;<span class="op" id="4016590">&gt;</span>&nbsp;<span class="num" id="4016592">0</span>&nbsp;<span class="op" id="4016594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016601">addrs</span><span class="op" id="4016606">[</span><span class="num" id="4016607">0</span><span class="op" id="4016608">]</span><span class="op" id="4016609">,</span>&nbsp;<span class="ident" id="4016611">addrs</span><span class="op" id="4016616">[</span><span class="ident" id="4016617">i</span><span class="op" id="4016618">]</span>&nbsp;<span class="op" id="4016620">=</span>&nbsp;<span class="ident" id="4016622">addrs</span><span class="op" id="4016627">[</span><span class="ident" id="4016628">i</span><span class="op" id="4016629">]</span><span class="op" id="4016630">,</span>&nbsp;<span class="ident" id="4016632">addrs</span><span class="op" id="4016637">[</span><span class="num" id="4016638">0</span><span class="op" id="4016639">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016651">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016668">sum</span>&nbsp;<span class="op" id="4016672">-=</span>&nbsp;<span class="builtintype" id="4016675">int</span><span class="op" id="4016678">(</span><span class="ident" id="4016679">addrs</span><span class="op" id="4016684">[</span><span class="num" id="4016685">0</span><span class="op" id="4016686">]</span><span class="op" id="4016687">.</span><span class="ident" id="4016688">Weight</span><span class="op" id="4016694">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016698">addrs</span>&nbsp;<span class="op" id="4016704">=</span>&nbsp;<span class="ident" id="4016706">addrs</span><span class="op" id="4016711">[</span><span class="num" id="4016712">1</span><span class="op" id="4016713">:</span><span class="op" id="4016714">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016717">}</span><br>
<span class="lineno"></span><span class="op" id="4016719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4016722">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="4016777">func</span>&nbsp;<span class="op" id="4016782">(</span><span class="ident" id="4016783">addrs</span>&nbsp;<span class="ident" id="4016789">byPriorityWeight</span><span class="op" id="4016805">)</span>&nbsp;<span class="ident" id="4016807">sort</span><span class="op" id="4016811">(</span><span class="op" id="4016812">)</span>&nbsp;<span class="op" id="4016814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016817">sort</span><span class="op" id="4016821">.</span><span class="ident" id="4016822">Sort</span><span class="op" id="4016826">(</span><span class="ident" id="4016827">addrs</span><span class="op" id="4016832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016835">i</span>&nbsp;<span class="op" id="4016837">:=</span>&nbsp;<span class="num" id="4016840">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016843">for</span>&nbsp;<span class="ident" id="4016847">j</span>&nbsp;<span class="op" id="4016849">:=</span>&nbsp;<span class="num" id="4016852">1</span><span class="op" id="4016853">;</span>&nbsp;<span class="ident" id="4016855">j</span>&nbsp;<span class="op" id="4016857">&lt;</span>&nbsp;<span class="builtinfunc" id="4016859">len</span><span class="op" id="4016862">(</span><span class="ident" id="4016863">addrs</span><span class="op" id="4016868">)</span><span class="op" id="4016869">;</span>&nbsp;<span class="ident" id="4016871">j</span><span class="op" id="4016872">++</span>&nbsp;<span class="op" id="4016875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4016879">if</span>&nbsp;<span class="ident" id="4016882">addrs</span><span class="op" id="4016887">[</span><span class="ident" id="4016888">i</span><span class="op" id="4016889">]</span><span class="op" id="4016890">.</span><span class="ident" id="4016891">Priority</span>&nbsp;<span class="op" id="4016900">!=</span>&nbsp;<span class="ident" id="4016903">addrs</span><span class="op" id="4016908">[</span><span class="ident" id="4016909">j</span><span class="op" id="4016910">]</span><span class="op" id="4016911">.</span><span class="ident" id="4016912">Priority</span>&nbsp;<span class="op" id="4016921">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016926">addrs</span><span class="op" id="4016931">[</span><span class="ident" id="4016932">i</span><span class="op" id="4016933">:</span><span class="ident" id="4016934">j</span><span class="op" id="4016935">]</span><span class="op" id="4016936">.</span><span class="ident" id="4016937">shuffleByWeight</span><span class="op" id="4016952">(</span><span class="op" id="4016953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016958">i</span>&nbsp;<span class="op" id="4016960">=</span>&nbsp;<span class="ident" id="4016962">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4016969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4016972">addrs</span><span class="op" id="4016977">[</span><span class="ident" id="4016978">i</span><span class="op" id="4016979">:</span><span class="op" id="4016980">]</span><span class="op" id="4016981">.</span><span class="ident" id="4016982">shuffleByWeight</span><span class="op" id="4016997">(</span><span class="op" id="4016998">)</span><br>
<span class="lineno">220</span><span class="op" id="4017000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4017003">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4017047">type</span>&nbsp;<span class="ident" id="4017052">MX</span>&nbsp;<span class="keyword" id="4017055">struct</span>&nbsp;<span class="op" id="4017062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017065">Host</span>&nbsp;<span class="builtintype" id="4017070">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017078">Pref</span>&nbsp;<span class="builtintype" id="4017083">uint16</span><br>
<span class="lineno"></span><span class="op" id="4017090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4017093">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="4017162">type</span>&nbsp;<span class="ident" id="4017167">byPref</span>&nbsp;<span class="op" id="4017174">[</span><span class="op" id="4017175">]</span><span class="op" id="4017176">*</span><span class="ident" id="4017177">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="4017181">func</span>&nbsp;<span class="op" id="4017186">(</span><span class="ident" id="4017187">s</span>&nbsp;<span class="ident" id="4017189">byPref</span><span class="op" id="4017195">)</span>&nbsp;<span class="ident" id="4017197">Len</span><span class="op" id="4017200">(</span><span class="op" id="4017201">)</span>&nbsp;<span class="builtintype" id="4017203">int</span>&nbsp;<span class="op" id="4017207">{</span>&nbsp;<span class="keyword" id="4017209">return</span>&nbsp;<span class="builtinfunc" id="4017216">len</span><span class="op" id="4017219">(</span><span class="ident" id="4017220">s</span><span class="op" id="4017221">)</span>&nbsp;<span class="op" id="4017223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4017226">func</span>&nbsp;<span class="op" id="4017231">(</span><span class="ident" id="4017232">s</span>&nbsp;<span class="ident" id="4017234">byPref</span><span class="op" id="4017240">)</span>&nbsp;<span class="ident" id="4017242">Less</span><span class="op" id="4017246">(</span><span class="ident" id="4017247">i</span><span class="op" id="4017248">,</span>&nbsp;<span class="ident" id="4017250">j</span>&nbsp;<span class="builtintype" id="4017252">int</span><span class="op" id="4017255">)</span>&nbsp;<span class="builtintype" id="4017257">bool</span>&nbsp;<span class="op" id="4017262">{</span>&nbsp;<span class="keyword" id="4017264">return</span>&nbsp;<span class="ident" id="4017271">s</span><span class="op" id="4017272">[</span><span class="ident" id="4017273">i</span><span class="op" id="4017274">]</span><span class="op" id="4017275">.</span><span class="ident" id="4017276">Pref</span>&nbsp;<span class="op" id="4017281">&lt;</span>&nbsp;<span class="ident" id="4017283">s</span><span class="op" id="4017284">[</span><span class="ident" id="4017285">j</span><span class="op" id="4017286">]</span><span class="op" id="4017287">.</span><span class="ident" id="4017288">Pref</span>&nbsp;<span class="op" id="4017293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4017296">func</span>&nbsp;<span class="op" id="4017301">(</span><span class="ident" id="4017302">s</span>&nbsp;<span class="ident" id="4017304">byPref</span><span class="op" id="4017310">)</span>&nbsp;<span class="ident" id="4017312">Swap</span><span class="op" id="4017316">(</span><span class="ident" id="4017317">i</span><span class="op" id="4017318">,</span>&nbsp;<span class="ident" id="4017320">j</span>&nbsp;<span class="builtintype" id="4017322">int</span><span class="op" id="4017325">)</span>&nbsp;<span class="op" id="4017327">{</span>&nbsp;<span class="ident" id="4017329">s</span><span class="op" id="4017330">[</span><span class="ident" id="4017331">i</span><span class="op" id="4017332">]</span><span class="op" id="4017333">,</span>&nbsp;<span class="ident" id="4017335">s</span><span class="op" id="4017336">[</span><span class="ident" id="4017337">j</span><span class="op" id="4017338">]</span>&nbsp;<span class="op" id="4017340">=</span>&nbsp;<span class="ident" id="4017342">s</span><span class="op" id="4017343">[</span><span class="ident" id="4017344">j</span><span class="op" id="4017345">]</span><span class="op" id="4017346">,</span>&nbsp;<span class="ident" id="4017348">s</span><span class="op" id="4017349">[</span><span class="ident" id="4017350">i</span><span class="op" id="4017351">]</span>&nbsp;<span class="op" id="4017353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4017356">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="4017410">func</span>&nbsp;<span class="op" id="4017415">(</span><span class="ident" id="4017416">s</span>&nbsp;<span class="ident" id="4017418">byPref</span><span class="op" id="4017424">)</span>&nbsp;<span class="ident" id="4017426">sort</span><span class="op" id="4017430">(</span><span class="op" id="4017431">)</span>&nbsp;<span class="op" id="4017433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4017436">for</span>&nbsp;<span class="ident" id="4017440">i</span>&nbsp;<span class="op" id="4017442">:=</span>&nbsp;<span class="keyword" id="4017445">range</span>&nbsp;<span class="ident" id="4017451">s</span>&nbsp;<span class="op" id="4017453">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017457">j</span>&nbsp;<span class="op" id="4017459">:=</span>&nbsp;<span class="ident" id="4017462">rand</span><span class="op" id="4017466">.</span><span class="ident" id="4017467">Intn</span><span class="op" id="4017471">(</span><span class="ident" id="4017472">i</span>&nbsp;<span class="op" id="4017474">+</span>&nbsp;<span class="num" id="4017476">1</span><span class="op" id="4017477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017481">s</span><span class="op" id="4017482">[</span><span class="ident" id="4017483">i</span><span class="op" id="4017484">]</span><span class="op" id="4017485">,</span>&nbsp;<span class="ident" id="4017487">s</span><span class="op" id="4017488">[</span><span class="ident" id="4017489">j</span><span class="op" id="4017490">]</span>&nbsp;<span class="op" id="4017492">=</span>&nbsp;<span class="ident" id="4017494">s</span><span class="op" id="4017495">[</span><span class="ident" id="4017496">j</span><span class="op" id="4017497">]</span><span class="op" id="4017498">,</span>&nbsp;<span class="ident" id="4017500">s</span><span class="op" id="4017501">[</span><span class="ident" id="4017502">i</span><span class="op" id="4017503">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4017506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017509">sort</span><span class="op" id="4017513">.</span><span class="ident" id="4017514">Sort</span><span class="op" id="4017518">(</span><span class="ident" id="4017519">s</span><span class="op" id="4017520">)</span><br>
<span class="lineno"></span><span class="op" id="4017522">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="4017525">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4017569">type</span>&nbsp;<span class="ident" id="4017574">NS</span>&nbsp;<span class="keyword" id="4017577">struct</span>&nbsp;<span class="op" id="4017584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4017587">Host</span>&nbsp;<span class="builtintype" id="4017592">string</span><br>
<span class="lineno"></span><span class="op" id="4017599">}</span>
</div>
</body>
</html>
