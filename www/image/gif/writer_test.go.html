<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6572305">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6572360">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6572414">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6572465">package</span>&nbsp;<span class="ident" id="6572473">gif</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6572478">import</span>&nbsp;<span class="op" id="6572485">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572488">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572497">&#34;image&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572506">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572521">_</span>&nbsp;<span class="string" id="6572523">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572536">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572549">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572562">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572568">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6572578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6572581">func</span>&nbsp;<span class="ident" id="6572586">readImg</span><span class="op" id="6572593">(</span><span class="ident" id="6572594">filename</span>&nbsp;<span class="builtintype" id="6572603">string</span><span class="op" id="6572609">)</span>&nbsp;<span class="op" id="6572611">(</span><span class="ident" id="6572612"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6572617">.</span><span class="ident" id="6572618">Image</span><span class="op" id="6572623">,</span>&nbsp;<span class="builtintype" id="6572625">error</span><span class="op" id="6572630">)</span>&nbsp;<span class="op" id="6572632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572635">f</span><span class="op" id="6572636">,</span>&nbsp;<span class="ident" id="6572638">err</span>&nbsp;<span class="op" id="6572642">:=</span>&nbsp;<span class="ident" id="6572645"><a href="/image/gif/writer_test.go.html#6572562">os</a></span><span class="op" id="6572647">.</span><span class="ident" id="6572648">Open</span><span class="op" id="6572652">(</span><span class="ident" id="6572653"><a href="/image/gif/writer_test.go.html#6572594">filename</a></span><span class="op" id="6572661">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572664">if</span>&nbsp;<span class="ident" id="6572667"><a href="/image/gif/writer_test.go.html#6572638">err</a></span>&nbsp;<span class="op" id="6572671">!=</span>&nbsp;<span class="ident" id="6572674">nil</span>&nbsp;<span class="op" id="6572678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572682">return</span>&nbsp;<span class="ident" id="6572689">nil</span><span class="op" id="6572692">,</span>&nbsp;<span class="ident" id="6572694"><a href="/image/gif/writer_test.go.html#6572638">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572702">defer</span>&nbsp;<span class="ident" id="6572708"><a href="/image/gif/writer_test.go.html#6572635">f</a></span><span class="op" id="6572709">.</span><span class="ident" id="6572710">Close</span><span class="op" id="6572715">(</span><span class="op" id="6572716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572719">m</span><span class="op" id="6572720">,</span>&nbsp;<span class="ident" id="6572722">_</span><span class="op" id="6572723">,</span>&nbsp;<span class="ident" id="6572725"><a href="/image/gif/writer_test.go.html#6572638">err</a></span>&nbsp;<span class="op" id="6572729">:=</span>&nbsp;<span class="ident" id="6572732"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6572737">.</span><span class="ident" id="6572738">Decode</span><span class="op" id="6572744">(</span><span class="ident" id="6572745"><a href="/image/gif/writer_test.go.html#6572635">f</a></span><span class="op" id="6572746">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572749">return</span>&nbsp;<span class="ident" id="6572756"><a href="/image/gif/writer_test.go.html#6572719">m</a></span><span class="op" id="6572757">,</span>&nbsp;<span class="ident" id="6572759"><a href="/image/gif/writer_test.go.html#6572638">err</a></span><br>
<span class="lineno"></span><span class="op" id="6572763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6572766">func</span>&nbsp;<span class="ident" id="6572771">readGIF</span><span class="op" id="6572778">(</span><span class="ident" id="6572779">filename</span>&nbsp;<span class="builtintype" id="6572788">string</span><span class="op" id="6572794">)</span>&nbsp;<span class="op" id="6572796">(</span><span class="op" id="6572797">*</span><span class="ident" id="6572798"><a href="/image/gif/reader.go.html#6316534">GIF</a></span><span class="op" id="6572801">,</span>&nbsp;<span class="builtintype" id="6572803">error</span><span class="op" id="6572808">)</span>&nbsp;<span class="op" id="6572810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572813">f</span><span class="op" id="6572814">,</span>&nbsp;<span class="ident" id="6572816">err</span>&nbsp;<span class="op" id="6572820">:=</span>&nbsp;<span class="ident" id="6572823"><a href="/image/gif/writer_test.go.html#6572562">os</a></span><span class="op" id="6572825">.</span><span class="ident" id="6572826">Open</span><span class="op" id="6572830">(</span><span class="ident" id="6572831"><a href="/image/gif/writer_test.go.html#6572779">filename</a></span><span class="op" id="6572839">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572842">if</span>&nbsp;<span class="ident" id="6572845"><a href="/image/gif/writer_test.go.html#6572816">err</a></span>&nbsp;<span class="op" id="6572849">!=</span>&nbsp;<span class="ident" id="6572852">nil</span>&nbsp;<span class="op" id="6572856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572860">return</span>&nbsp;<span class="ident" id="6572867">nil</span><span class="op" id="6572870">,</span>&nbsp;<span class="ident" id="6572872"><a href="/image/gif/writer_test.go.html#6572816">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572880">defer</span>&nbsp;<span class="ident" id="6572886"><a href="/image/gif/writer_test.go.html#6572813">f</a></span><span class="op" id="6572887">.</span><span class="ident" id="6572888">Close</span><span class="op" id="6572893">(</span><span class="op" id="6572894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572897">return</span>&nbsp;<span class="ident" id="6572904"><a href="/image/gif/reader.go.html#6316855">DecodeAll</a></span><span class="op" id="6572913">(</span><span class="ident" id="6572914"><a href="/image/gif/writer_test.go.html#6572813">f</a></span><span class="op" id="6572915">)</span><br>
<span class="lineno">35</span><span class="op" id="6572917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6572920">func</span>&nbsp;<span class="ident" id="6572925">delta</span><span class="op" id="6572930">(</span><span class="ident" id="6572931">u0</span><span class="op" id="6572933">,</span>&nbsp;<span class="ident" id="6572935">u1</span>&nbsp;<span class="builtintype" id="6572938">uint32</span><span class="op" id="6572944">)</span>&nbsp;<span class="ident" id="6572946">int64</span>&nbsp;<span class="op" id="6572952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572955">d</span>&nbsp;<span class="op" id="6572957">:=</span>&nbsp;<span class="ident" id="6572960">int64</span><span class="op" id="6572965">(</span><span class="ident" id="6572966"><a href="/image/gif/writer_test.go.html#6572931">u0</a></span><span class="op" id="6572968">)</span>&nbsp;<span class="op" id="6572970">-</span>&nbsp;<span class="ident" id="6572972">int64</span><span class="op" id="6572977">(</span><span class="ident" id="6572978"><a href="/image/gif/writer_test.go.html#6572935">u1</a></span><span class="op" id="6572980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572983">if</span>&nbsp;<span class="ident" id="6572986"><a href="/image/gif/writer_test.go.html#6572955">d</a></span>&nbsp;<span class="op" id="6572988">&lt;</span>&nbsp;<span class="num" id="6572990">0</span>&nbsp;<span class="op" id="6572992">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6572996">return</span>&nbsp;<span class="op" id="6573003">-</span><span class="ident" id="6573004"><a href="/image/gif/writer_test.go.html#6572955">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573010">return</span>&nbsp;<span class="ident" id="6573017"><a href="/image/gif/writer_test.go.html#6572955">d</a></span><br>
<span class="lineno"></span><span class="op" id="6573019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="6573022">//&nbsp;averageDelta&nbsp;returns&nbsp;the&nbsp;average&nbsp;delta&nbsp;in&nbsp;RGB&nbsp;space.&nbsp;The&nbsp;two&nbsp;images&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="6573098">//&nbsp;have&nbsp;the&nbsp;same&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="6573123">func</span>&nbsp;<span class="ident" id="6573128">averageDelta</span><span class="op" id="6573140">(</span><span class="ident" id="6573141">m0</span><span class="op" id="6573143">,</span>&nbsp;<span class="ident" id="6573145">m1</span>&nbsp;<span class="ident" id="6573148"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6573153">.</span><span class="ident" id="6573154">Image</span><span class="op" id="6573159">)</span>&nbsp;<span class="ident" id="6573161">int64</span>&nbsp;<span class="op" id="6573167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573170">b</span>&nbsp;<span class="op" id="6573172">:=</span>&nbsp;<span class="ident" id="6573175"><a href="/image/gif/writer_test.go.html#6573141">m0</a></span><span class="op" id="6573177">.</span><span class="ident" id="6573178">Bounds</span><span class="op" id="6573184">(</span><span class="op" id="6573185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573188">var</span>&nbsp;<span class="ident" id="6573192">sum</span><span class="op" id="6573195">,</span>&nbsp;<span class="ident" id="6573197">n</span>&nbsp;<span class="ident" id="6573199">int64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573206">for</span>&nbsp;<span class="ident" id="6573210">y</span>&nbsp;<span class="op" id="6573212">:=</span>&nbsp;<span class="ident" id="6573215"><a href="/image/gif/writer_test.go.html#6573170">b</a></span><span class="op" id="6573216">.</span><span class="ident" id="6573217">Min</span><span class="op" id="6573220">.</span><span class="ident" id="6573221">Y</span><span class="op" id="6573222">;</span>&nbsp;<span class="ident" id="6573224"><a href="/image/gif/writer_test.go.html#6573210">y</a></span>&nbsp;<span class="op" id="6573226">&lt;</span>&nbsp;<span class="ident" id="6573228"><a href="/image/gif/writer_test.go.html#6573170">b</a></span><span class="op" id="6573229">.</span><span class="ident" id="6573230">Max</span><span class="op" id="6573233">.</span><span class="ident" id="6573234">Y</span><span class="op" id="6573235">;</span>&nbsp;<span class="ident" id="6573237"><a href="/image/gif/writer_test.go.html#6573210">y</a></span><span class="op" id="6573238">++</span>&nbsp;<span class="op" id="6573241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573245">for</span>&nbsp;<span class="ident" id="6573249">x</span>&nbsp;<span class="op" id="6573251">:=</span>&nbsp;<span class="ident" id="6573254"><a href="/image/gif/writer_test.go.html#6573170">b</a></span><span class="op" id="6573255">.</span><span class="ident" id="6573256">Min</span><span class="op" id="6573259">.</span><span class="ident" id="6573260">X</span><span class="op" id="6573261">;</span>&nbsp;<span class="ident" id="6573263"><a href="/image/gif/writer_test.go.html#6573249">x</a></span>&nbsp;<span class="op" id="6573265">&lt;</span>&nbsp;<span class="ident" id="6573267"><a href="/image/gif/writer_test.go.html#6573170">b</a></span><span class="op" id="6573268">.</span><span class="ident" id="6573269">Max</span><span class="op" id="6573272">.</span><span class="ident" id="6573273">X</span><span class="op" id="6573274">;</span>&nbsp;<span class="ident" id="6573276"><a href="/image/gif/writer_test.go.html#6573249">x</a></span><span class="op" id="6573277">++</span>&nbsp;<span class="op" id="6573280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573285">c0</span>&nbsp;<span class="op" id="6573288">:=</span>&nbsp;<span class="ident" id="6573291"><a href="/image/gif/writer_test.go.html#6573141">m0</a></span><span class="op" id="6573293">.</span><span class="ident" id="6573294">At</span><span class="op" id="6573296">(</span><span class="ident" id="6573297"><a href="/image/gif/writer_test.go.html#6573249">x</a></span><span class="op" id="6573298">,</span>&nbsp;<span class="ident" id="6573300"><a href="/image/gif/writer_test.go.html#6573210">y</a></span><span class="op" id="6573301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573306">c1</span>&nbsp;<span class="op" id="6573309">:=</span>&nbsp;<span class="ident" id="6573312"><a href="/image/gif/writer_test.go.html#6573145">m1</a></span><span class="op" id="6573314">.</span><span class="ident" id="6573315">At</span><span class="op" id="6573317">(</span><span class="ident" id="6573318"><a href="/image/gif/writer_test.go.html#6573249">x</a></span><span class="op" id="6573319">,</span>&nbsp;<span class="ident" id="6573321"><a href="/image/gif/writer_test.go.html#6573210">y</a></span><span class="op" id="6573322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573327">r0</span><span class="op" id="6573329">,</span>&nbsp;<span class="ident" id="6573331">g0</span><span class="op" id="6573333">,</span>&nbsp;<span class="ident" id="6573335">b0</span><span class="op" id="6573337">,</span>&nbsp;<span class="ident" id="6573339">_</span>&nbsp;<span class="op" id="6573341">:=</span>&nbsp;<span class="ident" id="6573344"><a href="/image/gif/writer_test.go.html#6573285">c0</a></span><span class="op" id="6573346">.</span><span class="ident" id="6573347">RGBA</span><span class="op" id="6573351">(</span><span class="op" id="6573352">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573357">r1</span><span class="op" id="6573359">,</span>&nbsp;<span class="ident" id="6573361">g1</span><span class="op" id="6573363">,</span>&nbsp;<span class="ident" id="6573365">b1</span><span class="op" id="6573367">,</span>&nbsp;<span class="ident" id="6573369">_</span>&nbsp;<span class="op" id="6573371">:=</span>&nbsp;<span class="ident" id="6573374"><a href="/image/gif/writer_test.go.html#6573306">c1</a></span><span class="op" id="6573376">.</span><span class="ident" id="6573377">RGBA</span><span class="op" id="6573381">(</span><span class="op" id="6573382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573387"><a href="/image/gif/writer_test.go.html#6573192">sum</a></span>&nbsp;<span class="op" id="6573391">+=</span>&nbsp;<span class="ident" id="6573394"><a href="/image/gif/writer_test.go.html#6572925">delta</a></span><span class="op" id="6573399">(</span><span class="ident" id="6573400"><a href="/image/gif/writer_test.go.html#6573327">r0</a></span><span class="op" id="6573402">,</span>&nbsp;<span class="ident" id="6573404"><a href="/image/gif/writer_test.go.html#6573357">r1</a></span><span class="op" id="6573406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573411"><a href="/image/gif/writer_test.go.html#6573192">sum</a></span>&nbsp;<span class="op" id="6573415">+=</span>&nbsp;<span class="ident" id="6573418"><a href="/image/gif/writer_test.go.html#6572925">delta</a></span><span class="op" id="6573423">(</span><span class="ident" id="6573424"><a href="/image/gif/writer_test.go.html#6573331">g0</a></span><span class="op" id="6573426">,</span>&nbsp;<span class="ident" id="6573428"><a href="/image/gif/writer_test.go.html#6573361">g1</a></span><span class="op" id="6573430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573435"><a href="/image/gif/writer_test.go.html#6573192">sum</a></span>&nbsp;<span class="op" id="6573439">+=</span>&nbsp;<span class="ident" id="6573442"><a href="/image/gif/writer_test.go.html#6572925">delta</a></span><span class="op" id="6573447">(</span><span class="ident" id="6573448"><a href="/image/gif/writer_test.go.html#6573335">b0</a></span><span class="op" id="6573450">,</span>&nbsp;<span class="ident" id="6573452"><a href="/image/gif/writer_test.go.html#6573365">b1</a></span><span class="op" id="6573454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573459"><a href="/image/gif/writer_test.go.html#6573197">n</a></span>&nbsp;<span class="op" id="6573461">+=</span>&nbsp;<span class="num" id="6573464">3</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573474">return</span>&nbsp;<span class="ident" id="6573481"><a href="/image/gif/writer_test.go.html#6573192">sum</a></span>&nbsp;<span class="op" id="6573485">/</span>&nbsp;<span class="ident" id="6573487"><a href="/image/gif/writer_test.go.html#6573197">n</a></span><br>
<span class="lineno"></span><span class="op" id="6573489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6573492">var</span>&nbsp;<span class="ident" id="6573496">testCase</span>&nbsp;<span class="op" id="6573505">=</span>&nbsp;<span class="op" id="6573507">[</span><span class="op" id="6573508">]</span><span class="keyword" id="6573509">struct</span>&nbsp;<span class="op" id="6573516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573519">filename</span>&nbsp;&nbsp;<span class="builtintype" id="6573529">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573537">tolerance</span>&nbsp;<span class="ident" id="6573547">int64</span><br>
<span class="lineno"></span><span class="op" id="6573553">}</span><span class="op" id="6573554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573557">{</span><span class="string" id="6573558">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6573585">,</span>&nbsp;<span class="num" id="6573587">1</span>&nbsp;<span class="op" id="6573589">&lt;&lt;</span>&nbsp;<span class="num" id="6573592">12</span><span class="op" id="6573594">}</span><span class="op" id="6573595">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573598">{</span><span class="string" id="6573599">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6573626">,</span>&nbsp;<span class="num" id="6573628">0</span><span class="op" id="6573629">}</span><span class="op" id="6573630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573633">{</span><span class="string" id="6573634">&#34;../testdata/video-001.interlaced.gif&#34;</span><span class="op" id="6573672">,</span>&nbsp;<span class="num" id="6573674">0</span><span class="op" id="6573675">}</span><span class="op" id="6573676">,</span><br>
<span class="lineno"></span><span class="op" id="6573678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6573681">func</span>&nbsp;<span class="ident" id="6573686">TestWriter</span><span class="op" id="6573696">(</span><span class="ident" id="6573697">t</span>&nbsp;<span class="op" id="6573699">*</span><span class="ident" id="6573700"><a href="/image/gif/writer_test.go.html#6572568">testing</a></span><span class="op" id="6573707">.</span><span class="ident" id="6573708">T</span><span class="op" id="6573709">)</span>&nbsp;<span class="op" id="6573711">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573714">for</span>&nbsp;<span class="ident" id="6573718">_</span><span class="op" id="6573719">,</span>&nbsp;<span class="ident" id="6573721">tc</span>&nbsp;<span class="op" id="6573724">:=</span>&nbsp;<span class="keyword" id="6573727">range</span>&nbsp;<span class="ident" id="6573733"><a href="/image/gif/writer_test.go.html#6573496">testCase</a></span>&nbsp;<span class="op" id="6573742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573746">m0</span><span class="op" id="6573748">,</span>&nbsp;<span class="ident" id="6573750">err</span>&nbsp;<span class="op" id="6573754">:=</span>&nbsp;<span class="ident" id="6573757"><a href="/image/gif/writer_test.go.html#6572586">readImg</a></span><span class="op" id="6573764">(</span><span class="ident" id="6573765"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6573767">.</span><span class="ident" id="6573768">filename</span><span class="op" id="6573776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573780">if</span>&nbsp;<span class="ident" id="6573783"><a href="/image/gif/writer_test.go.html#6573750">err</a></span>&nbsp;<span class="op" id="6573787">!=</span>&nbsp;<span class="ident" id="6573790">nil</span>&nbsp;<span class="op" id="6573794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573799"><a href="/image/gif/writer_test.go.html#6573697">t</a></span><span class="op" id="6573800">.</span><span class="ident" id="6573801">Error</span><span class="op" id="6573806">(</span><span class="ident" id="6573807"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6573809">.</span><span class="ident" id="6573810">filename</span><span class="op" id="6573818">,</span>&nbsp;<span class="ident" id="6573820"><a href="/image/gif/writer_test.go.html#6573750">err</a></span><span class="op" id="6573823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573828">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573843">var</span>&nbsp;<span class="ident" id="6573847">buf</span>&nbsp;<span class="ident" id="6573851"><a href="/image/gif/writer_test.go.html#6572488">bytes</a></span><span class="op" id="6573856">.</span><span class="ident" id="6573857">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573866"><a href="/image/gif/writer_test.go.html#6573750">err</a></span>&nbsp;<span class="op" id="6573870">=</span>&nbsp;<span class="ident" id="6573872"><a href="/image/gif/writer.go.html#6324232">Encode</a></span><span class="op" id="6573878">(</span><span class="op" id="6573879">&amp;</span><span class="ident" id="6573880"><a href="/image/gif/writer_test.go.html#6573847">buf</a></span><span class="op" id="6573883">,</span>&nbsp;<span class="ident" id="6573885"><a href="/image/gif/writer_test.go.html#6573746">m0</a></span><span class="op" id="6573887">,</span>&nbsp;<span class="ident" id="6573889">nil</span><span class="op" id="6573892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573896">if</span>&nbsp;<span class="ident" id="6573899"><a href="/image/gif/writer_test.go.html#6573750">err</a></span>&nbsp;<span class="op" id="6573903">!=</span>&nbsp;<span class="ident" id="6573906">nil</span>&nbsp;<span class="op" id="6573910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573915"><a href="/image/gif/writer_test.go.html#6573697">t</a></span><span class="op" id="6573916">.</span><span class="ident" id="6573917">Error</span><span class="op" id="6573922">(</span><span class="ident" id="6573923"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6573925">.</span><span class="ident" id="6573926">filename</span><span class="op" id="6573934">,</span>&nbsp;<span class="ident" id="6573936"><a href="/image/gif/writer_test.go.html#6573750">err</a></span><span class="op" id="6573939">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573944">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573959">m1</span><span class="op" id="6573961">,</span>&nbsp;<span class="ident" id="6573963"><a href="/image/gif/writer_test.go.html#6573750">err</a></span>&nbsp;<span class="op" id="6573967">:=</span>&nbsp;<span class="ident" id="6573970"><a href="/image/gif/reader.go.html#6316310">Decode</a></span><span class="op" id="6573976">(</span><span class="op" id="6573977">&amp;</span><span class="ident" id="6573978"><a href="/image/gif/writer_test.go.html#6573847">buf</a></span><span class="op" id="6573981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6573985">if</span>&nbsp;<span class="ident" id="6573988"><a href="/image/gif/writer_test.go.html#6573750">err</a></span>&nbsp;<span class="op" id="6573992">!=</span>&nbsp;<span class="ident" id="6573995">nil</span>&nbsp;<span class="op" id="6573999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574004"><a href="/image/gif/writer_test.go.html#6573697">t</a></span><span class="op" id="6574005">.</span><span class="ident" id="6574006">Error</span><span class="op" id="6574011">(</span><span class="ident" id="6574012"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6574014">.</span><span class="ident" id="6574015">filename</span><span class="op" id="6574023">,</span>&nbsp;<span class="ident" id="6574025"><a href="/image/gif/writer_test.go.html#6573750">err</a></span><span class="op" id="6574028">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574033">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574048">if</span>&nbsp;<span class="ident" id="6574051"><a href="/image/gif/writer_test.go.html#6573746">m0</a></span><span class="op" id="6574053">.</span><span class="ident" id="6574054">Bounds</span><span class="op" id="6574060">(</span><span class="op" id="6574061">)</span>&nbsp;<span class="op" id="6574063">!=</span>&nbsp;<span class="ident" id="6574066"><a href="/image/gif/writer_test.go.html#6573959">m1</a></span><span class="op" id="6574068">.</span><span class="ident" id="6574069">Bounds</span><span class="op" id="6574075">(</span><span class="op" id="6574076">)</span>&nbsp;<span class="op" id="6574078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574083"><a href="/image/gif/writer_test.go.html#6573697">t</a></span><span class="op" id="6574084">.</span><span class="ident" id="6574085">Errorf</span><span class="op" id="6574091">(</span><span class="string" id="6574092">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6574122">,</span>&nbsp;<span class="ident" id="6574124"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6574126">.</span><span class="ident" id="6574127">filename</span><span class="op" id="6574135">,</span>&nbsp;<span class="ident" id="6574137"><a href="/image/gif/writer_test.go.html#6573746">m0</a></span><span class="op" id="6574139">.</span><span class="ident" id="6574140">Bounds</span><span class="op" id="6574146">(</span><span class="op" id="6574147">)</span><span class="op" id="6574148">,</span>&nbsp;<span class="ident" id="6574150"><a href="/image/gif/writer_test.go.html#6573959">m1</a></span><span class="op" id="6574152">.</span><span class="ident" id="6574153">Bounds</span><span class="op" id="6574159">(</span><span class="op" id="6574160">)</span><span class="op" id="6574161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574166">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6574181">//&nbsp;Compare&nbsp;the&nbsp;average&nbsp;delta&nbsp;to&nbsp;the&nbsp;tolerance&nbsp;level.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574236">avgDelta</span>&nbsp;<span class="op" id="6574245">:=</span>&nbsp;<span class="ident" id="6574248"><a href="/image/gif/writer_test.go.html#6573128">averageDelta</a></span><span class="op" id="6574260">(</span><span class="ident" id="6574261"><a href="/image/gif/writer_test.go.html#6573746">m0</a></span><span class="op" id="6574263">,</span>&nbsp;<span class="ident" id="6574265"><a href="/image/gif/writer_test.go.html#6573959">m1</a></span><span class="op" id="6574267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574271">if</span>&nbsp;<span class="ident" id="6574274"><a href="/image/gif/writer_test.go.html#6574236">avgDelta</a></span>&nbsp;<span class="op" id="6574283">&gt;</span>&nbsp;<span class="ident" id="6574285"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6574287">.</span><span class="ident" id="6574288">tolerance</span>&nbsp;<span class="op" id="6574298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574303"><a href="/image/gif/writer_test.go.html#6573697">t</a></span><span class="op" id="6574304">.</span><span class="ident" id="6574305">Errorf</span><span class="op" id="6574311">(</span><span class="string" id="6574312">&#34;%s:&nbsp;average&nbsp;delta&nbsp;is&nbsp;too&nbsp;high.&nbsp;expected:&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6574365">,</span>&nbsp;<span class="ident" id="6574367"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6574369">.</span><span class="ident" id="6574370">filename</span><span class="op" id="6574378">,</span>&nbsp;<span class="ident" id="6574380"><a href="/image/gif/writer_test.go.html#6573721">tc</a></span><span class="op" id="6574382">.</span><span class="ident" id="6574383">tolerance</span><span class="op" id="6574392">,</span>&nbsp;<span class="ident" id="6574394"><a href="/image/gif/writer_test.go.html#6574236">avgDelta</a></span><span class="op" id="6574402">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574421">}</span><br>
<span class="lineno"></span><span class="op" id="6574423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6574426">func</span>&nbsp;<span class="ident" id="6574431">TestSubImage</span><span class="op" id="6574443">(</span><span class="ident" id="6574444">t</span>&nbsp;<span class="op" id="6574446">*</span><span class="ident" id="6574447"><a href="/image/gif/writer_test.go.html#6572568">testing</a></span><span class="op" id="6574454">.</span><span class="ident" id="6574455">T</span><span class="op" id="6574456">)</span>&nbsp;<span class="op" id="6574458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574461">m0</span><span class="op" id="6574463">,</span>&nbsp;<span class="ident" id="6574465">err</span>&nbsp;<span class="op" id="6574469">:=</span>&nbsp;<span class="ident" id="6574472"><a href="/image/gif/writer_test.go.html#6572586">readImg</a></span><span class="op" id="6574479">(</span><span class="string" id="6574480">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6574507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574510">if</span>&nbsp;<span class="ident" id="6574513"><a href="/image/gif/writer_test.go.html#6574465">err</a></span>&nbsp;<span class="op" id="6574517">!=</span>&nbsp;<span class="ident" id="6574520">nil</span>&nbsp;<span class="op" id="6574524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574528"><a href="/image/gif/writer_test.go.html#6574444">t</a></span><span class="op" id="6574529">.</span><span class="ident" id="6574530">Fatalf</span><span class="op" id="6574536">(</span><span class="string" id="6574537">&#34;readImg:&nbsp;%v&#34;</span><span class="op" id="6574550">,</span>&nbsp;<span class="ident" id="6574552"><a href="/image/gif/writer_test.go.html#6574465">err</a></span><span class="op" id="6574555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574558">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574561"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span>&nbsp;<span class="op" id="6574564">=</span>&nbsp;<span class="ident" id="6574566"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span><span class="op" id="6574568">.</span><span class="op" id="6574569">(</span><span class="op" id="6574570">*</span><span class="ident" id="6574571"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6574576">.</span><span class="ident" id="6574577">Paletted</span><span class="op" id="6574585">)</span><span class="op" id="6574586">.</span><span class="ident" id="6574587">SubImage</span><span class="op" id="6574595">(</span><span class="ident" id="6574596"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6574601">.</span><span class="ident" id="6574602">Rect</span><span class="op" id="6574606">(</span><span class="num" id="6574607">0</span><span class="op" id="6574608">,</span>&nbsp;<span class="num" id="6574610">0</span><span class="op" id="6574611">,</span>&nbsp;<span class="num" id="6574613">50</span><span class="op" id="6574615">,</span>&nbsp;<span class="num" id="6574617">30</span><span class="op" id="6574619">)</span><span class="op" id="6574620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574623">var</span>&nbsp;<span class="ident" id="6574627">buf</span>&nbsp;<span class="ident" id="6574631"><a href="/image/gif/writer_test.go.html#6572488">bytes</a></span><span class="op" id="6574636">.</span><span class="ident" id="6574637">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574645"><a href="/image/gif/writer_test.go.html#6574465">err</a></span>&nbsp;<span class="op" id="6574649">=</span>&nbsp;<span class="ident" id="6574651"><a href="/image/gif/writer.go.html#6324232">Encode</a></span><span class="op" id="6574657">(</span><span class="op" id="6574658">&amp;</span><span class="ident" id="6574659"><a href="/image/gif/writer_test.go.html#6574627">buf</a></span><span class="op" id="6574662">,</span>&nbsp;<span class="ident" id="6574664"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span><span class="op" id="6574666">,</span>&nbsp;<span class="ident" id="6574668">nil</span><span class="op" id="6574671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574674">if</span>&nbsp;<span class="ident" id="6574677"><a href="/image/gif/writer_test.go.html#6574465">err</a></span>&nbsp;<span class="op" id="6574681">!=</span>&nbsp;<span class="ident" id="6574684">nil</span>&nbsp;<span class="op" id="6574688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574692"><a href="/image/gif/writer_test.go.html#6574444">t</a></span><span class="op" id="6574693">.</span><span class="ident" id="6574694">Fatalf</span><span class="op" id="6574700">(</span><span class="string" id="6574701">&#34;Encode:&nbsp;%v&#34;</span><span class="op" id="6574713">,</span>&nbsp;<span class="ident" id="6574715"><a href="/image/gif/writer_test.go.html#6574465">err</a></span><span class="op" id="6574718">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574724">m1</span><span class="op" id="6574726">,</span>&nbsp;<span class="ident" id="6574728"><a href="/image/gif/writer_test.go.html#6574465">err</a></span>&nbsp;<span class="op" id="6574732">:=</span>&nbsp;<span class="ident" id="6574735"><a href="/image/gif/reader.go.html#6316310">Decode</a></span><span class="op" id="6574741">(</span><span class="op" id="6574742">&amp;</span><span class="ident" id="6574743"><a href="/image/gif/writer_test.go.html#6574627">buf</a></span><span class="op" id="6574746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574749">if</span>&nbsp;<span class="ident" id="6574752"><a href="/image/gif/writer_test.go.html#6574465">err</a></span>&nbsp;<span class="op" id="6574756">!=</span>&nbsp;<span class="ident" id="6574759">nil</span>&nbsp;<span class="op" id="6574763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574767"><a href="/image/gif/writer_test.go.html#6574444">t</a></span><span class="op" id="6574768">.</span><span class="ident" id="6574769">Fatalf</span><span class="op" id="6574775">(</span><span class="string" id="6574776">&#34;Decode:&nbsp;%v&#34;</span><span class="op" id="6574788">,</span>&nbsp;<span class="ident" id="6574790"><a href="/image/gif/writer_test.go.html#6574465">err</a></span><span class="op" id="6574793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574796">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574799">if</span>&nbsp;<span class="ident" id="6574802"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span><span class="op" id="6574804">.</span><span class="ident" id="6574805">Bounds</span><span class="op" id="6574811">(</span><span class="op" id="6574812">)</span>&nbsp;<span class="op" id="6574814">!=</span>&nbsp;<span class="ident" id="6574817"><a href="/image/gif/writer_test.go.html#6574724">m1</a></span><span class="op" id="6574819">.</span><span class="ident" id="6574820">Bounds</span><span class="op" id="6574826">(</span><span class="op" id="6574827">)</span>&nbsp;<span class="op" id="6574829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574833"><a href="/image/gif/writer_test.go.html#6574444">t</a></span><span class="op" id="6574834">.</span><span class="ident" id="6574835">Fatalf</span><span class="op" id="6574841">(</span><span class="string" id="6574842">&#34;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6574868">,</span>&nbsp;<span class="ident" id="6574870"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span><span class="op" id="6574872">.</span><span class="ident" id="6574873">Bounds</span><span class="op" id="6574879">(</span><span class="op" id="6574880">)</span><span class="op" id="6574881">,</span>&nbsp;<span class="ident" id="6574883"><a href="/image/gif/writer_test.go.html#6574724">m1</a></span><span class="op" id="6574885">.</span><span class="ident" id="6574886">Bounds</span><span class="op" id="6574892">(</span><span class="op" id="6574893">)</span><span class="op" id="6574894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574900">if</span>&nbsp;<span class="ident" id="6574903"><a href="/image/gif/writer_test.go.html#6573128">averageDelta</a></span><span class="op" id="6574915">(</span><span class="ident" id="6574916"><a href="/image/gif/writer_test.go.html#6574461">m0</a></span><span class="op" id="6574918">,</span>&nbsp;<span class="ident" id="6574920"><a href="/image/gif/writer_test.go.html#6574724">m1</a></span><span class="op" id="6574922">)</span>&nbsp;<span class="op" id="6574924">!=</span>&nbsp;<span class="num" id="6574927">0</span>&nbsp;<span class="op" id="6574929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574933"><a href="/image/gif/writer_test.go.html#6574444">t</a></span><span class="op" id="6574934">.</span><span class="ident" id="6574935">Fatalf</span><span class="op" id="6574941">(</span><span class="string" id="6574942">&#34;images&nbsp;differ&#34;</span><span class="op" id="6574957">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574960">}</span><br>
<span class="lineno"></span><span class="op" id="6574962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6574965">var</span>&nbsp;<span class="ident" id="6574969">frames</span>&nbsp;<span class="op" id="6574976">=</span>&nbsp;<span class="op" id="6574978">[</span><span class="op" id="6574979">]</span><span class="builtintype" id="6574980">string</span><span class="op" id="6574986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6574989">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6575016">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6575019">&#34;../testdata/video-005.gray.gif&#34;</span><span class="op" id="6575051">,</span><br>
<span class="lineno"></span><span class="op" id="6575053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6575056">func</span>&nbsp;<span class="ident" id="6575061">TestEncodeAll</span><span class="op" id="6575074">(</span><span class="ident" id="6575075">t</span>&nbsp;<span class="op" id="6575077">*</span><span class="ident" id="6575078"><a href="/image/gif/writer_test.go.html#6572568">testing</a></span><span class="op" id="6575085">.</span><span class="ident" id="6575086">T</span><span class="op" id="6575087">)</span>&nbsp;<span class="op" id="6575089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575092">g0</span>&nbsp;<span class="op" id="6575095">:=</span>&nbsp;<span class="op" id="6575098">&amp;</span><span class="ident" id="6575099"><a href="/image/gif/reader.go.html#6316534">GIF</a></span><span class="op" id="6575102">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575106">Image</span><span class="op" id="6575111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6575117">make</span><span class="op" id="6575121">(</span><span class="op" id="6575122">[</span><span class="op" id="6575123">]</span><span class="op" id="6575124">*</span><span class="ident" id="6575125"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6575130">.</span><span class="ident" id="6575131">Paletted</span><span class="op" id="6575139">,</span>&nbsp;<span class="builtinfunc" id="6575141">len</span><span class="op" id="6575144">(</span><span class="ident" id="6575145"><a href="/image/gif/writer_test.go.html#6574969">frames</a></span><span class="op" id="6575151">)</span><span class="op" id="6575152">)</span><span class="op" id="6575153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575157">Delay</span><span class="op" id="6575162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6575168">make</span><span class="op" id="6575172">(</span><span class="op" id="6575173">[</span><span class="op" id="6575174">]</span><span class="builtintype" id="6575175">int</span><span class="op" id="6575178">,</span>&nbsp;<span class="builtinfunc" id="6575180">len</span><span class="op" id="6575183">(</span><span class="ident" id="6575184"><a href="/image/gif/writer_test.go.html#6574969">frames</a></span><span class="op" id="6575190">)</span><span class="op" id="6575191">)</span><span class="op" id="6575192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575196">LoopCount</span><span class="op" id="6575205">:</span>&nbsp;<span class="num" id="6575207">5</span><span class="op" id="6575208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575214">for</span>&nbsp;<span class="ident" id="6575218">i</span><span class="op" id="6575219">,</span>&nbsp;<span class="ident" id="6575221">f</span>&nbsp;<span class="op" id="6575223">:=</span>&nbsp;<span class="keyword" id="6575226">range</span>&nbsp;<span class="ident" id="6575232"><a href="/image/gif/writer_test.go.html#6574969">frames</a></span>&nbsp;<span class="op" id="6575239">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575243">m</span><span class="op" id="6575244">,</span>&nbsp;<span class="ident" id="6575246">err</span>&nbsp;<span class="op" id="6575250">:=</span>&nbsp;<span class="ident" id="6575253"><a href="/image/gif/writer_test.go.html#6572771">readGIF</a></span><span class="op" id="6575260">(</span><span class="ident" id="6575261"><a href="/image/gif/writer_test.go.html#6575221">f</a></span><span class="op" id="6575262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575266">if</span>&nbsp;<span class="ident" id="6575269"><a href="/image/gif/writer_test.go.html#6575246">err</a></span>&nbsp;<span class="op" id="6575273">!=</span>&nbsp;<span class="ident" id="6575276">nil</span>&nbsp;<span class="op" id="6575280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575285"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575286">.</span><span class="ident" id="6575287">Fatal</span><span class="op" id="6575292">(</span><span class="ident" id="6575293"><a href="/image/gif/writer_test.go.html#6575221">f</a></span><span class="op" id="6575294">,</span>&nbsp;<span class="ident" id="6575296"><a href="/image/gif/writer_test.go.html#6575246">err</a></span><span class="op" id="6575299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575307"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575309">.</span><span class="ident" id="6575310">Image</span><span class="op" id="6575315">[</span><span class="ident" id="6575316"><a href="/image/gif/writer_test.go.html#6575218">i</a></span><span class="op" id="6575317">]</span>&nbsp;<span class="op" id="6575319">=</span>&nbsp;<span class="ident" id="6575321"><a href="/image/gif/writer_test.go.html#6575243">m</a></span><span class="op" id="6575322">.</span><span class="ident" id="6575323">Image</span><span class="op" id="6575328">[</span><span class="num" id="6575329">0</span><span class="op" id="6575330">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575336">var</span>&nbsp;<span class="ident" id="6575340">buf</span>&nbsp;<span class="ident" id="6575344"><a href="/image/gif/writer_test.go.html#6572488">bytes</a></span><span class="op" id="6575349">.</span><span class="ident" id="6575350">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575358">if</span>&nbsp;<span class="ident" id="6575361">err</span>&nbsp;<span class="op" id="6575365">:=</span>&nbsp;<span class="ident" id="6575368"><a href="/image/gif/writer.go.html#6323666">EncodeAll</a></span><span class="op" id="6575377">(</span><span class="op" id="6575378">&amp;</span><span class="ident" id="6575379"><a href="/image/gif/writer_test.go.html#6575340">buf</a></span><span class="op" id="6575382">,</span>&nbsp;<span class="ident" id="6575384"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575386">)</span><span class="op" id="6575387">;</span>&nbsp;<span class="ident" id="6575389"><a href="/image/gif/writer_test.go.html#6575361">err</a></span>&nbsp;<span class="op" id="6575393">!=</span>&nbsp;<span class="ident" id="6575396">nil</span>&nbsp;<span class="op" id="6575400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575404"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575405">.</span><span class="ident" id="6575406">Fatal</span><span class="op" id="6575411">(</span><span class="string" id="6575412">&#34;EncodeAll:&#34;</span><span class="op" id="6575424">,</span>&nbsp;<span class="ident" id="6575426"><a href="/image/gif/writer_test.go.html#6575361">err</a></span><span class="op" id="6575429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575432">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575435">g1</span><span class="op" id="6575437">,</span>&nbsp;<span class="ident" id="6575439">err</span>&nbsp;<span class="op" id="6575443">:=</span>&nbsp;<span class="ident" id="6575446"><a href="/image/gif/reader.go.html#6316855">DecodeAll</a></span><span class="op" id="6575455">(</span><span class="op" id="6575456">&amp;</span><span class="ident" id="6575457"><a href="/image/gif/writer_test.go.html#6575340">buf</a></span><span class="op" id="6575460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575463">if</span>&nbsp;<span class="ident" id="6575466"><a href="/image/gif/writer_test.go.html#6575439">err</a></span>&nbsp;<span class="op" id="6575470">!=</span>&nbsp;<span class="ident" id="6575473">nil</span>&nbsp;<span class="op" id="6575477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575481"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575482">.</span><span class="ident" id="6575483">Fatal</span><span class="op" id="6575488">(</span><span class="string" id="6575489">&#34;DecodeAll:&#34;</span><span class="op" id="6575501">,</span>&nbsp;<span class="ident" id="6575503"><a href="/image/gif/writer_test.go.html#6575439">err</a></span><span class="op" id="6575506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575512">if</span>&nbsp;<span class="ident" id="6575515"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575517">.</span><span class="ident" id="6575518">LoopCount</span>&nbsp;<span class="op" id="6575528">!=</span>&nbsp;<span class="ident" id="6575531"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6575533">.</span><span class="ident" id="6575534">LoopCount</span>&nbsp;<span class="op" id="6575544">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575548"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575549">.</span><span class="ident" id="6575550">Errorf</span><span class="op" id="6575556">(</span><span class="string" id="6575557">&#34;loop&nbsp;counts&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="6575588">,</span>&nbsp;<span class="ident" id="6575590"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575592">.</span><span class="ident" id="6575593">LoopCount</span><span class="op" id="6575602">,</span>&nbsp;<span class="ident" id="6575604"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6575606">.</span><span class="ident" id="6575607">LoopCount</span><span class="op" id="6575616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575622">for</span>&nbsp;<span class="ident" id="6575626">i</span>&nbsp;<span class="op" id="6575628">:=</span>&nbsp;<span class="keyword" id="6575631">range</span>&nbsp;<span class="ident" id="6575637"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575639">.</span><span class="ident" id="6575640">Image</span>&nbsp;<span class="op" id="6575646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575650">m0</span><span class="op" id="6575652">,</span>&nbsp;<span class="ident" id="6575654">m1</span>&nbsp;<span class="op" id="6575657">:=</span>&nbsp;<span class="ident" id="6575660"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575662">.</span><span class="ident" id="6575663">Image</span><span class="op" id="6575668">[</span><span class="ident" id="6575669"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575670">]</span><span class="op" id="6575671">,</span>&nbsp;<span class="ident" id="6575673"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6575675">.</span><span class="ident" id="6575676">Image</span><span class="op" id="6575681">[</span><span class="ident" id="6575682"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575683">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575687">if</span>&nbsp;<span class="ident" id="6575690"><a href="/image/gif/writer_test.go.html#6575650">m0</a></span><span class="op" id="6575692">.</span><span class="ident" id="6575693">Bounds</span><span class="op" id="6575699">(</span><span class="op" id="6575700">)</span>&nbsp;<span class="op" id="6575702">!=</span>&nbsp;<span class="ident" id="6575705"><a href="/image/gif/writer_test.go.html#6575654">m1</a></span><span class="op" id="6575707">.</span><span class="ident" id="6575708">Bounds</span><span class="op" id="6575714">(</span><span class="op" id="6575715">)</span>&nbsp;<span class="op" id="6575717">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575722"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575723">.</span><span class="ident" id="6575724">Errorf</span><span class="op" id="6575730">(</span><span class="string" id="6575731">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6575761">,</span>&nbsp;<span class="ident" id="6575763"><a href="/image/gif/writer_test.go.html#6574969">frames</a></span><span class="op" id="6575769">[</span><span class="ident" id="6575770"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575771">]</span><span class="op" id="6575772">,</span>&nbsp;<span class="ident" id="6575774"><a href="/image/gif/writer_test.go.html#6575650">m0</a></span><span class="op" id="6575776">.</span><span class="ident" id="6575777">Bounds</span><span class="op" id="6575783">(</span><span class="op" id="6575784">)</span><span class="op" id="6575785">,</span>&nbsp;<span class="ident" id="6575787"><a href="/image/gif/writer_test.go.html#6575654">m1</a></span><span class="op" id="6575789">.</span><span class="ident" id="6575790">Bounds</span><span class="op" id="6575796">(</span><span class="op" id="6575797">)</span><span class="op" id="6575798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575806">d0</span><span class="op" id="6575808">,</span>&nbsp;<span class="ident" id="6575810">d1</span>&nbsp;<span class="op" id="6575813">:=</span>&nbsp;<span class="ident" id="6575816"><a href="/image/gif/writer_test.go.html#6575092">g0</a></span><span class="op" id="6575818">.</span><span class="ident" id="6575819">Delay</span><span class="op" id="6575824">[</span><span class="ident" id="6575825"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575826">]</span><span class="op" id="6575827">,</span>&nbsp;<span class="ident" id="6575829"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6575831">.</span><span class="ident" id="6575832">Delay</span><span class="op" id="6575837">[</span><span class="ident" id="6575838"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575839">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575843">if</span>&nbsp;<span class="ident" id="6575846"><a href="/image/gif/writer_test.go.html#6575806">d0</a></span>&nbsp;<span class="op" id="6575849">!=</span>&nbsp;<span class="ident" id="6575852"><a href="/image/gif/writer_test.go.html#6575810">d1</a></span>&nbsp;<span class="op" id="6575855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575860"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6575861">.</span><span class="ident" id="6575862">Errorf</span><span class="op" id="6575868">(</span><span class="string" id="6575869">&#34;%s:&nbsp;delay&nbsp;values&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="6575905">,</span>&nbsp;<span class="ident" id="6575907"><a href="/image/gif/writer_test.go.html#6574969">frames</a></span><span class="op" id="6575913">[</span><span class="ident" id="6575914"><a href="/image/gif/writer_test.go.html#6575626">i</a></span><span class="op" id="6575915">]</span><span class="op" id="6575916">,</span>&nbsp;<span class="ident" id="6575918"><a href="/image/gif/writer_test.go.html#6575806">d0</a></span><span class="op" id="6575920">,</span>&nbsp;<span class="ident" id="6575922"><a href="/image/gif/writer_test.go.html#6575810">d1</a></span><span class="op" id="6575924">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575935"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6575937">.</span><span class="ident" id="6575938">Delay</span>&nbsp;<span class="op" id="6575944">=</span>&nbsp;<span class="builtinfunc" id="6575946">make</span><span class="op" id="6575950">(</span><span class="op" id="6575951">[</span><span class="op" id="6575952">]</span><span class="builtintype" id="6575953">int</span><span class="op" id="6575956">,</span>&nbsp;<span class="num" id="6575958">1</span><span class="op" id="6575959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6575962">if</span>&nbsp;<span class="ident" id="6575965">err</span>&nbsp;<span class="op" id="6575969">:=</span>&nbsp;<span class="ident" id="6575972"><a href="/image/gif/writer.go.html#6323666">EncodeAll</a></span><span class="op" id="6575981">(</span><span class="ident" id="6575982"><a href="/image/gif/writer_test.go.html#6572536">ioutil</a></span><span class="op" id="6575988">.</span><span class="ident" id="6575989">Discard</span><span class="op" id="6575996">,</span>&nbsp;<span class="ident" id="6575998"><a href="/image/gif/writer_test.go.html#6575435">g1</a></span><span class="op" id="6576000">)</span><span class="op" id="6576001">;</span>&nbsp;<span class="ident" id="6576003"><a href="/image/gif/writer_test.go.html#6575965">err</a></span>&nbsp;<span class="op" id="6576007">==</span>&nbsp;<span class="ident" id="6576010">nil</span>&nbsp;<span class="op" id="6576014">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576018"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6576019">.</span><span class="ident" id="6576020">Error</span><span class="op" id="6576025">(</span><span class="string" id="6576026">&#34;expected&nbsp;error&nbsp;from&nbsp;mismatched&nbsp;delay&nbsp;and&nbsp;image&nbsp;slice&nbsp;lengths&#34;</span><span class="op" id="6576088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576094">if</span>&nbsp;<span class="ident" id="6576097">err</span>&nbsp;<span class="op" id="6576101">:=</span>&nbsp;<span class="ident" id="6576104"><a href="/image/gif/writer.go.html#6323666">EncodeAll</a></span><span class="op" id="6576113">(</span><span class="ident" id="6576114"><a href="/image/gif/writer_test.go.html#6572536">ioutil</a></span><span class="op" id="6576120">.</span><span class="ident" id="6576121">Discard</span><span class="op" id="6576128">,</span>&nbsp;<span class="op" id="6576130">&amp;</span><span class="ident" id="6576131"><a href="/image/gif/reader.go.html#6316534">GIF</a></span><span class="op" id="6576134">{</span><span class="op" id="6576135">}</span><span class="op" id="6576136">)</span><span class="op" id="6576137">;</span>&nbsp;<span class="ident" id="6576139"><a href="/image/gif/writer_test.go.html#6576097">err</a></span>&nbsp;<span class="op" id="6576143">==</span>&nbsp;<span class="ident" id="6576146">nil</span>&nbsp;<span class="op" id="6576150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576154"><a href="/image/gif/writer_test.go.html#6575075">t</a></span><span class="op" id="6576155">.</span><span class="ident" id="6576156">Error</span><span class="op" id="6576161">(</span><span class="string" id="6576162">&#34;expected&nbsp;error&nbsp;from&nbsp;providing&nbsp;empty&nbsp;gif&#34;</span><span class="op" id="6576203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576206">}</span><br>
<span class="lineno">175</span><span class="op" id="6576208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6576211">func</span>&nbsp;<span class="ident" id="6576216">BenchmarkEncode</span><span class="op" id="6576231">(</span><span class="ident" id="6576232">b</span>&nbsp;<span class="op" id="6576234">*</span><span class="ident" id="6576235"><a href="/image/gif/writer_test.go.html#6572568">testing</a></span><span class="op" id="6576242">.</span><span class="ident" id="6576243">B</span><span class="op" id="6576244">)</span>&nbsp;<span class="op" id="6576246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576249"><a href="/image/gif/writer_test.go.html#6576232">b</a></span><span class="op" id="6576250">.</span><span class="ident" id="6576251">StopTimer</span><span class="op" id="6576260">(</span><span class="op" id="6576261">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576265">bo</span>&nbsp;<span class="op" id="6576268">:=</span>&nbsp;<span class="ident" id="6576271"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6576276">.</span><span class="ident" id="6576277">Rect</span><span class="op" id="6576281">(</span><span class="num" id="6576282">0</span><span class="op" id="6576283">,</span>&nbsp;<span class="num" id="6576285">0</span><span class="op" id="6576286">,</span>&nbsp;<span class="num" id="6576288">640</span><span class="op" id="6576291">,</span>&nbsp;<span class="num" id="6576293">480</span><span class="op" id="6576296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576299">rnd</span>&nbsp;<span class="op" id="6576303">:=</span>&nbsp;<span class="ident" id="6576306"><a href="/image/gif/writer_test.go.html#6572549">rand</a></span><span class="op" id="6576310">.</span><span class="ident" id="6576311">New</span><span class="op" id="6576314">(</span><span class="ident" id="6576315"><a href="/image/gif/writer_test.go.html#6572549">rand</a></span><span class="op" id="6576319">.</span><span class="ident" id="6576320">NewSource</span><span class="op" id="6576329">(</span><span class="num" id="6576330">123</span><span class="op" id="6576333">)</span><span class="op" id="6576334">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6576338">//&nbsp;Restrict&nbsp;to&nbsp;a&nbsp;256-color&nbsp;paletted&nbsp;image&nbsp;to&nbsp;avoid&nbsp;quantization&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576409">palette</span>&nbsp;<span class="op" id="6576417">:=</span>&nbsp;<span class="builtinfunc" id="6576420">make</span><span class="op" id="6576424">(</span><span class="ident" id="6576425"><a href="/image/gif/writer_test.go.html#6572506">color</a></span><span class="op" id="6576430">.</span><span class="ident" id="6576431">Palette</span><span class="op" id="6576438">,</span>&nbsp;<span class="num" id="6576440">256</span><span class="op" id="6576443">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576446">for</span>&nbsp;<span class="ident" id="6576450">i</span>&nbsp;<span class="op" id="6576452">:=</span>&nbsp;<span class="keyword" id="6576455">range</span>&nbsp;<span class="ident" id="6576461"><a href="/image/gif/writer_test.go.html#6576409">palette</a></span>&nbsp;<span class="op" id="6576469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576473"><a href="/image/gif/writer_test.go.html#6576409">palette</a></span><span class="op" id="6576480">[</span><span class="ident" id="6576481"><a href="/image/gif/writer_test.go.html#6576450">i</a></span><span class="op" id="6576482">]</span>&nbsp;<span class="op" id="6576484">=</span>&nbsp;<span class="ident" id="6576486"><a href="/image/gif/writer_test.go.html#6572506">color</a></span><span class="op" id="6576491">.</span><span class="ident" id="6576492">RGBA</span><span class="op" id="6576496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6576501">uint8</span><span class="op" id="6576506">(</span><span class="ident" id="6576507"><a href="/image/gif/writer_test.go.html#6576299">rnd</a></span><span class="op" id="6576510">.</span><span class="ident" id="6576511">Intn</span><span class="op" id="6576515">(</span><span class="num" id="6576516">256</span><span class="op" id="6576519">)</span><span class="op" id="6576520">)</span><span class="op" id="6576521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6576526">uint8</span><span class="op" id="6576531">(</span><span class="ident" id="6576532"><a href="/image/gif/writer_test.go.html#6576299">rnd</a></span><span class="op" id="6576535">.</span><span class="ident" id="6576536">Intn</span><span class="op" id="6576540">(</span><span class="num" id="6576541">256</span><span class="op" id="6576544">)</span><span class="op" id="6576545">)</span><span class="op" id="6576546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6576551">uint8</span><span class="op" id="6576556">(</span><span class="ident" id="6576557"><a href="/image/gif/writer_test.go.html#6576299">rnd</a></span><span class="op" id="6576560">.</span><span class="ident" id="6576561">Intn</span><span class="op" id="6576565">(</span><span class="num" id="6576566">256</span><span class="op" id="6576569">)</span><span class="op" id="6576570">)</span><span class="op" id="6576571">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6576576">255</span><span class="op" id="6576579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576589">img</span>&nbsp;<span class="op" id="6576593">:=</span>&nbsp;<span class="ident" id="6576596"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6576601">.</span><span class="ident" id="6576602">NewPaletted</span><span class="op" id="6576613">(</span><span class="ident" id="6576614"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6576619">.</span><span class="ident" id="6576620">Rect</span><span class="op" id="6576624">(</span><span class="num" id="6576625">0</span><span class="op" id="6576626">,</span>&nbsp;<span class="num" id="6576628">0</span><span class="op" id="6576629">,</span>&nbsp;<span class="num" id="6576631">640</span><span class="op" id="6576634">,</span>&nbsp;<span class="num" id="6576636">480</span><span class="op" id="6576639">)</span><span class="op" id="6576640">,</span>&nbsp;<span class="ident" id="6576642"><a href="/image/gif/writer_test.go.html#6576409">palette</a></span><span class="op" id="6576649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576652">for</span>&nbsp;<span class="ident" id="6576656">y</span>&nbsp;<span class="op" id="6576658">:=</span>&nbsp;<span class="ident" id="6576661"><a href="/image/gif/writer_test.go.html#6576265">bo</a></span><span class="op" id="6576663">.</span><span class="ident" id="6576664">Min</span><span class="op" id="6576667">.</span><span class="ident" id="6576668">Y</span><span class="op" id="6576669">;</span>&nbsp;<span class="ident" id="6576671"><a href="/image/gif/writer_test.go.html#6576656">y</a></span>&nbsp;<span class="op" id="6576673">&lt;</span>&nbsp;<span class="ident" id="6576675"><a href="/image/gif/writer_test.go.html#6576265">bo</a></span><span class="op" id="6576677">.</span><span class="ident" id="6576678">Max</span><span class="op" id="6576681">.</span><span class="ident" id="6576682">Y</span><span class="op" id="6576683">;</span>&nbsp;<span class="ident" id="6576685"><a href="/image/gif/writer_test.go.html#6576656">y</a></span><span class="op" id="6576686">++</span>&nbsp;<span class="op" id="6576689">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576693">for</span>&nbsp;<span class="ident" id="6576697">x</span>&nbsp;<span class="op" id="6576699">:=</span>&nbsp;<span class="ident" id="6576702"><a href="/image/gif/writer_test.go.html#6576265">bo</a></span><span class="op" id="6576704">.</span><span class="ident" id="6576705">Min</span><span class="op" id="6576708">.</span><span class="ident" id="6576709">X</span><span class="op" id="6576710">;</span>&nbsp;<span class="ident" id="6576712"><a href="/image/gif/writer_test.go.html#6576697">x</a></span>&nbsp;<span class="op" id="6576714">&lt;</span>&nbsp;<span class="ident" id="6576716"><a href="/image/gif/writer_test.go.html#6576265">bo</a></span><span class="op" id="6576718">.</span><span class="ident" id="6576719">Max</span><span class="op" id="6576722">.</span><span class="ident" id="6576723">X</span><span class="op" id="6576724">;</span>&nbsp;<span class="ident" id="6576726"><a href="/image/gif/writer_test.go.html#6576697">x</a></span><span class="op" id="6576727">++</span>&nbsp;<span class="op" id="6576730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576735"><a href="/image/gif/writer_test.go.html#6576589">img</a></span><span class="op" id="6576738">.</span><span class="ident" id="6576739">Set</span><span class="op" id="6576742">(</span><span class="ident" id="6576743"><a href="/image/gif/writer_test.go.html#6576697">x</a></span><span class="op" id="6576744">,</span>&nbsp;<span class="ident" id="6576746"><a href="/image/gif/writer_test.go.html#6576656">y</a></span><span class="op" id="6576747">,</span>&nbsp;<span class="ident" id="6576749"><a href="/image/gif/writer_test.go.html#6576409">palette</a></span><span class="op" id="6576756">[</span><span class="ident" id="6576757"><a href="/image/gif/writer_test.go.html#6576299">rnd</a></span><span class="op" id="6576760">.</span><span class="ident" id="6576761">Intn</span><span class="op" id="6576765">(</span><span class="num" id="6576766">256</span><span class="op" id="6576769">)</span><span class="op" id="6576770">]</span><span class="op" id="6576771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576782"><a href="/image/gif/writer_test.go.html#6576232">b</a></span><span class="op" id="6576783">.</span><span class="ident" id="6576784">SetBytes</span><span class="op" id="6576792">(</span><span class="num" id="6576793">640</span>&nbsp;<span class="op" id="6576797">*</span>&nbsp;<span class="num" id="6576799">480</span>&nbsp;<span class="op" id="6576803">*</span>&nbsp;<span class="num" id="6576805">4</span><span class="op" id="6576806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576809"><a href="/image/gif/writer_test.go.html#6576232">b</a></span><span class="op" id="6576810">.</span><span class="ident" id="6576811">StartTimer</span><span class="op" id="6576821">(</span><span class="op" id="6576822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576825">for</span>&nbsp;<span class="ident" id="6576829">i</span>&nbsp;<span class="op" id="6576831">:=</span>&nbsp;<span class="num" id="6576834">0</span><span class="op" id="6576835">;</span>&nbsp;<span class="ident" id="6576837"><a href="/image/gif/writer_test.go.html#6576829">i</a></span>&nbsp;<span class="op" id="6576839">&lt;</span>&nbsp;<span class="ident" id="6576841"><a href="/image/gif/writer_test.go.html#6576232">b</a></span><span class="op" id="6576842">.</span><span class="ident" id="6576843">N</span><span class="op" id="6576844">;</span>&nbsp;<span class="ident" id="6576846"><a href="/image/gif/writer_test.go.html#6576829">i</a></span><span class="op" id="6576847">++</span>&nbsp;<span class="op" id="6576850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576854"><a href="/image/gif/writer.go.html#6324232">Encode</a></span><span class="op" id="6576860">(</span><span class="ident" id="6576861"><a href="/image/gif/writer_test.go.html#6572536">ioutil</a></span><span class="op" id="6576867">.</span><span class="ident" id="6576868">Discard</span><span class="op" id="6576875">,</span>&nbsp;<span class="ident" id="6576877"><a href="/image/gif/writer_test.go.html#6576589">img</a></span><span class="op" id="6576880">,</span>&nbsp;<span class="ident" id="6576882">nil</span><span class="op" id="6576885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576888">}</span><br>
<span class="lineno">205</span><span class="op" id="6576890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6576893">func</span>&nbsp;<span class="ident" id="6576898">BenchmarkQuantizedEncode</span><span class="op" id="6576922">(</span><span class="ident" id="6576923">b</span>&nbsp;<span class="op" id="6576925">*</span><span class="ident" id="6576926"><a href="/image/gif/writer_test.go.html#6572568">testing</a></span><span class="op" id="6576933">.</span><span class="ident" id="6576934">B</span><span class="op" id="6576935">)</span>&nbsp;<span class="op" id="6576937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576940"><a href="/image/gif/writer_test.go.html#6576923">b</a></span><span class="op" id="6576941">.</span><span class="ident" id="6576942">StopTimer</span><span class="op" id="6576951">(</span><span class="op" id="6576952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576955">img</span>&nbsp;<span class="op" id="6576959">:=</span>&nbsp;<span class="ident" id="6576962"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6576967">.</span><span class="ident" id="6576968">NewRGBA</span><span class="op" id="6576975">(</span><span class="ident" id="6576976"><a href="/image/gif/writer_test.go.html#6572497">image</a></span><span class="op" id="6576981">.</span><span class="ident" id="6576982">Rect</span><span class="op" id="6576986">(</span><span class="num" id="6576987">0</span><span class="op" id="6576988">,</span>&nbsp;<span class="num" id="6576990">0</span><span class="op" id="6576991">,</span>&nbsp;<span class="num" id="6576993">640</span><span class="op" id="6576996">,</span>&nbsp;<span class="num" id="6576998">480</span><span class="op" id="6577001">)</span><span class="op" id="6577002">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577005">bo</span>&nbsp;<span class="op" id="6577008">:=</span>&nbsp;<span class="ident" id="6577011"><a href="/image/gif/writer_test.go.html#6576955">img</a></span><span class="op" id="6577014">.</span><span class="ident" id="6577015">Bounds</span><span class="op" id="6577021">(</span><span class="op" id="6577022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577025">rnd</span>&nbsp;<span class="op" id="6577029">:=</span>&nbsp;<span class="ident" id="6577032"><a href="/image/gif/writer_test.go.html#6572549">rand</a></span><span class="op" id="6577036">.</span><span class="ident" id="6577037">New</span><span class="op" id="6577040">(</span><span class="ident" id="6577041"><a href="/image/gif/writer_test.go.html#6572549">rand</a></span><span class="op" id="6577045">.</span><span class="ident" id="6577046">NewSource</span><span class="op" id="6577055">(</span><span class="num" id="6577056">123</span><span class="op" id="6577059">)</span><span class="op" id="6577060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577063">for</span>&nbsp;<span class="ident" id="6577067">y</span>&nbsp;<span class="op" id="6577069">:=</span>&nbsp;<span class="ident" id="6577072"><a href="/image/gif/writer_test.go.html#6577005">bo</a></span><span class="op" id="6577074">.</span><span class="ident" id="6577075">Min</span><span class="op" id="6577078">.</span><span class="ident" id="6577079">Y</span><span class="op" id="6577080">;</span>&nbsp;<span class="ident" id="6577082"><a href="/image/gif/writer_test.go.html#6577067">y</a></span>&nbsp;<span class="op" id="6577084">&lt;</span>&nbsp;<span class="ident" id="6577086"><a href="/image/gif/writer_test.go.html#6577005">bo</a></span><span class="op" id="6577088">.</span><span class="ident" id="6577089">Max</span><span class="op" id="6577092">.</span><span class="ident" id="6577093">Y</span><span class="op" id="6577094">;</span>&nbsp;<span class="ident" id="6577096"><a href="/image/gif/writer_test.go.html#6577067">y</a></span><span class="op" id="6577097">++</span>&nbsp;<span class="op" id="6577100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577104">for</span>&nbsp;<span class="ident" id="6577108">x</span>&nbsp;<span class="op" id="6577110">:=</span>&nbsp;<span class="ident" id="6577113"><a href="/image/gif/writer_test.go.html#6577005">bo</a></span><span class="op" id="6577115">.</span><span class="ident" id="6577116">Min</span><span class="op" id="6577119">.</span><span class="ident" id="6577120">X</span><span class="op" id="6577121">;</span>&nbsp;<span class="ident" id="6577123"><a href="/image/gif/writer_test.go.html#6577108">x</a></span>&nbsp;<span class="op" id="6577125">&lt;</span>&nbsp;<span class="ident" id="6577127"><a href="/image/gif/writer_test.go.html#6577005">bo</a></span><span class="op" id="6577129">.</span><span class="ident" id="6577130">Max</span><span class="op" id="6577133">.</span><span class="ident" id="6577134">X</span><span class="op" id="6577135">;</span>&nbsp;<span class="ident" id="6577137"><a href="/image/gif/writer_test.go.html#6577108">x</a></span><span class="op" id="6577138">++</span>&nbsp;<span class="op" id="6577141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577146"><a href="/image/gif/writer_test.go.html#6576955">img</a></span><span class="op" id="6577149">.</span><span class="ident" id="6577150">SetRGBA</span><span class="op" id="6577157">(</span><span class="ident" id="6577158"><a href="/image/gif/writer_test.go.html#6577108">x</a></span><span class="op" id="6577159">,</span>&nbsp;<span class="ident" id="6577161"><a href="/image/gif/writer_test.go.html#6577067">y</a></span><span class="op" id="6577162">,</span>&nbsp;<span class="ident" id="6577164"><a href="/image/gif/writer_test.go.html#6572506">color</a></span><span class="op" id="6577169">.</span><span class="ident" id="6577170">RGBA</span><span class="op" id="6577174">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6577180">uint8</span><span class="op" id="6577185">(</span><span class="ident" id="6577186"><a href="/image/gif/writer_test.go.html#6577025">rnd</a></span><span class="op" id="6577189">.</span><span class="ident" id="6577190">Intn</span><span class="op" id="6577194">(</span><span class="num" id="6577195">256</span><span class="op" id="6577198">)</span><span class="op" id="6577199">)</span><span class="op" id="6577200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6577206">uint8</span><span class="op" id="6577211">(</span><span class="ident" id="6577212"><a href="/image/gif/writer_test.go.html#6577025">rnd</a></span><span class="op" id="6577215">.</span><span class="ident" id="6577216">Intn</span><span class="op" id="6577220">(</span><span class="num" id="6577221">256</span><span class="op" id="6577224">)</span><span class="op" id="6577225">)</span><span class="op" id="6577226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6577232">uint8</span><span class="op" id="6577237">(</span><span class="ident" id="6577238"><a href="/image/gif/writer_test.go.html#6577025">rnd</a></span><span class="op" id="6577241">.</span><span class="ident" id="6577242">Intn</span><span class="op" id="6577246">(</span><span class="num" id="6577247">256</span><span class="op" id="6577250">)</span><span class="op" id="6577251">)</span><span class="op" id="6577252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6577258">255</span><span class="op" id="6577261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577266">}</span><span class="op" id="6577267">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577277"><a href="/image/gif/writer_test.go.html#6576923">b</a></span><span class="op" id="6577278">.</span><span class="ident" id="6577279">SetBytes</span><span class="op" id="6577287">(</span><span class="num" id="6577288">640</span>&nbsp;<span class="op" id="6577292">*</span>&nbsp;<span class="num" id="6577294">480</span>&nbsp;<span class="op" id="6577298">*</span>&nbsp;<span class="num" id="6577300">4</span><span class="op" id="6577301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577304"><a href="/image/gif/writer_test.go.html#6576923">b</a></span><span class="op" id="6577305">.</span><span class="ident" id="6577306">StartTimer</span><span class="op" id="6577316">(</span><span class="op" id="6577317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577320">for</span>&nbsp;<span class="ident" id="6577324">i</span>&nbsp;<span class="op" id="6577326">:=</span>&nbsp;<span class="num" id="6577329">0</span><span class="op" id="6577330">;</span>&nbsp;<span class="ident" id="6577332"><a href="/image/gif/writer_test.go.html#6577324">i</a></span>&nbsp;<span class="op" id="6577334">&lt;</span>&nbsp;<span class="ident" id="6577336"><a href="/image/gif/writer_test.go.html#6576923">b</a></span><span class="op" id="6577337">.</span><span class="ident" id="6577338">N</span><span class="op" id="6577339">;</span>&nbsp;<span class="ident" id="6577341"><a href="/image/gif/writer_test.go.html#6577324">i</a></span><span class="op" id="6577342">++</span>&nbsp;<span class="op" id="6577345">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577349"><a href="/image/gif/writer.go.html#6324232">Encode</a></span><span class="op" id="6577355">(</span><span class="ident" id="6577356"><a href="/image/gif/writer_test.go.html#6572536">ioutil</a></span><span class="op" id="6577362">.</span><span class="ident" id="6577363">Discard</span><span class="op" id="6577370">,</span>&nbsp;<span class="ident" id="6577372"><a href="/image/gif/writer_test.go.html#6576955">img</a></span><span class="op" id="6577375">,</span>&nbsp;<span class="ident" id="6577377">nil</span><span class="op" id="6577380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577383">}</span><br>
<span class="lineno"></span><span class="op" id="6577385">}</span>
</div>
</body>
</html>
