<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2691295">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2691351">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2691405">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2691456">package</span>&nbsp;<span class="ident" id="2691464">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2691469">//&nbsp;TCPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;TCP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="2691523">type</span>&nbsp;<span class="ident" id="2691528">TCPAddr</span>&nbsp;<span class="keyword" id="2691536">struct</span>&nbsp;<span class="op" id="2691543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2691546">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2691551"><a href="/net/ip.go.html#2604330">IP</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2691555">Port</span>&nbsp;<span class="builtintype" id="2691560">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2691565">Zone</span>&nbsp;<span class="builtintype" id="2691570">string</span>&nbsp;<span class="comment" id="2691577">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="2691608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2691611">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;tcp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="2691665">func</span>&nbsp;<span class="op" id="2691670">(</span><span class="ident" id="2691671">a</span>&nbsp;<span class="op" id="2691673">*</span><span class="ident" id="2691674"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2691681">)</span>&nbsp;<span class="ident" id="2691683">Network</span><span class="op" id="2691690">(</span><span class="op" id="2691691">)</span>&nbsp;<span class="builtintype" id="2691693">string</span>&nbsp;<span class="op" id="2691700">{</span>&nbsp;<span class="keyword" id="2691702">return</span>&nbsp;<span class="string" id="2691709">&#34;tcp&#34;</span>&nbsp;<span class="op" id="2691715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2691718">func</span>&nbsp;<span class="op" id="2691723">(</span><span class="ident" id="2691724">a</span>&nbsp;<span class="op" id="2691726">*</span><span class="ident" id="2691727"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2691734">)</span>&nbsp;<span class="ident" id="2691736">String</span><span class="op" id="2691742">(</span><span class="op" id="2691743">)</span>&nbsp;<span class="builtintype" id="2691745">string</span>&nbsp;<span class="op" id="2691752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691755">if</span>&nbsp;<span class="ident" id="2691758"><a href="/net/tcpsock.go.html#2691724">a</a></span>&nbsp;<span class="op" id="2691760">==</span>&nbsp;<span class="ident" id="2691763">nil</span>&nbsp;<span class="op" id="2691767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691771">return</span>&nbsp;<span class="string" id="2691778">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2691787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2691790">ip</span>&nbsp;<span class="op" id="2691793">:=</span>&nbsp;<span class="ident" id="2691796"><a href="/net/ip.go.html#2611025">ipEmptyString</a></span><span class="op" id="2691809">(</span><span class="ident" id="2691810"><a href="/net/tcpsock.go.html#2691724">a</a></span><span class="op" id="2691811">.</span><span class="ident" id="2691812">IP</span><span class="op" id="2691814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691817">if</span>&nbsp;<span class="ident" id="2691820"><a href="/net/tcpsock.go.html#2691724">a</a></span><span class="op" id="2691821">.</span><span class="ident" id="2691822">Zone</span>&nbsp;<span class="op" id="2691827">!=</span>&nbsp;<span class="string" id="2691830">&#34;&#34;</span>&nbsp;<span class="op" id="2691833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691837">return</span>&nbsp;<span class="ident" id="2691844"><a href="/net/ipsock.go.html#2633137">JoinHostPort</a></span><span class="op" id="2691856">(</span><span class="ident" id="2691857"><a href="/net/tcpsock.go.html#2691790">ip</a></span><span class="op" id="2691859">+</span><span class="string" id="2691860">&#34;%&#34;</span><span class="op" id="2691863">+</span><span class="ident" id="2691864"><a href="/net/tcpsock.go.html#2691724">a</a></span><span class="op" id="2691865">.</span><span class="ident" id="2691866">Zone</span><span class="op" id="2691870">,</span>&nbsp;<span class="ident" id="2691872"><a href="/net/parse.go.html#2666210">itoa</a></span><span class="op" id="2691876">(</span><span class="ident" id="2691877"><a href="/net/tcpsock.go.html#2691724">a</a></span><span class="op" id="2691878">.</span><span class="ident" id="2691879">Port</span><span class="op" id="2691883">)</span><span class="op" id="2691884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2691887">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691890">return</span>&nbsp;<span class="ident" id="2691897"><a href="/net/ipsock.go.html#2633137">JoinHostPort</a></span><span class="op" id="2691909">(</span><span class="ident" id="2691910"><a href="/net/tcpsock.go.html#2691790">ip</a></span><span class="op" id="2691912">,</span>&nbsp;<span class="ident" id="2691914"><a href="/net/parse.go.html#2666210">itoa</a></span><span class="op" id="2691918">(</span><span class="ident" id="2691919"><a href="/net/tcpsock.go.html#2691724">a</a></span><span class="op" id="2691920">.</span><span class="ident" id="2691921">Port</span><span class="op" id="2691925">)</span><span class="op" id="2691926">)</span><br>
<span class="lineno"></span><span class="op" id="2691928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2691931">func</span>&nbsp;<span class="op" id="2691936">(</span><span class="ident" id="2691937">a</span>&nbsp;<span class="op" id="2691939">*</span><span class="ident" id="2691940"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2691947">)</span>&nbsp;<span class="ident" id="2691949">toAddr</span><span class="op" id="2691955">(</span><span class="op" id="2691956">)</span>&nbsp;<span class="ident" id="2691958"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2691963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691966">if</span>&nbsp;<span class="ident" id="2691969"><a href="/net/tcpsock.go.html#2691937">a</a></span>&nbsp;<span class="op" id="2691971">==</span>&nbsp;<span class="ident" id="2691974">nil</span>&nbsp;<span class="op" id="2691978">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691982">return</span>&nbsp;<span class="ident" id="2691989">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2691994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2691997">return</span>&nbsp;<span class="ident" id="2692004"><a href="/net/tcpsock.go.html#2691937">a</a></span><br>
<span class="lineno"></span><span class="op" id="2692006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2692009">//&nbsp;ResolveTCPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;TCP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="2692080">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2692149">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2692213">//&nbsp;&#34;tcp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="2692282">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="2692345">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2692371">func</span>&nbsp;<span class="ident" id="2692376">ResolveTCPAddr</span><span class="op" id="2692390">(</span><span class="ident" id="2692391">net</span><span class="op" id="2692394">,</span>&nbsp;<span class="ident" id="2692396">addr</span>&nbsp;<span class="builtintype" id="2692401">string</span><span class="op" id="2692407">)</span>&nbsp;<span class="op" id="2692409">(</span><span class="op" id="2692410">*</span><span class="ident" id="2692411"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2692418">,</span>&nbsp;<span class="builtintype" id="2692420">error</span><span class="op" id="2692425">)</span>&nbsp;<span class="op" id="2692427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692430">switch</span>&nbsp;<span class="ident" id="2692437"><a href="/net/tcpsock.go.html#2692391">net</a></span>&nbsp;<span class="op" id="2692441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692444">case</span>&nbsp;<span class="string" id="2692449">&#34;tcp&#34;</span><span class="op" id="2692454">,</span>&nbsp;<span class="string" id="2692456">&#34;tcp4&#34;</span><span class="op" id="2692462">,</span>&nbsp;<span class="string" id="2692464">&#34;tcp6&#34;</span><span class="op" id="2692470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692473">case</span>&nbsp;<span class="string" id="2692478">&#34;&#34;</span><span class="op" id="2692480">:</span>&nbsp;<span class="comment" id="2692482">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2692536"><a href="/net/tcpsock.go.html#2692391">net</a></span>&nbsp;<span class="op" id="2692540">=</span>&nbsp;<span class="string" id="2692542">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692549">default</span><span class="op" id="2692556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692560">return</span>&nbsp;<span class="ident" id="2692567">nil</span><span class="op" id="2692570">,</span>&nbsp;<span class="ident" id="2692572"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2692591">(</span><span class="ident" id="2692592"><a href="/net/tcpsock.go.html#2692391">net</a></span><span class="op" id="2692595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2692598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2692601">a</span><span class="op" id="2692602">,</span>&nbsp;<span class="ident" id="2692604">err</span>&nbsp;<span class="op" id="2692608">:=</span>&nbsp;<span class="ident" id="2692611"><a href="/net/ipsock.go.html#2633734">resolveInternetAddr</a></span><span class="op" id="2692630">(</span><span class="ident" id="2692631"><a href="/net/tcpsock.go.html#2692391">net</a></span><span class="op" id="2692634">,</span>&nbsp;<span class="ident" id="2692636"><a href="/net/tcpsock.go.html#2692396">addr</a></span><span class="op" id="2692640">,</span>&nbsp;<span class="ident" id="2692642"><a href="/net/net.go.html#2660335">noDeadline</a></span><span class="op" id="2692652">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692655">if</span>&nbsp;<span class="ident" id="2692658"><a href="/net/tcpsock.go.html#2692604">err</a></span>&nbsp;<span class="op" id="2692662">!=</span>&nbsp;<span class="ident" id="2692665">nil</span>&nbsp;<span class="op" id="2692669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692673">return</span>&nbsp;<span class="ident" id="2692680">nil</span><span class="op" id="2692683">,</span>&nbsp;<span class="ident" id="2692685"><a href="/net/tcpsock.go.html#2692604">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2692690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2692693">return</span>&nbsp;<span class="ident" id="2692700"><a href="/net/tcpsock.go.html#2692601">a</a></span><span class="op" id="2692701">.</span><span class="ident" id="2692702">toAddr</span><span class="op" id="2692708">(</span><span class="op" id="2692709">)</span><span class="op" id="2692710">.</span><span class="op" id="2692711">(</span><span class="op" id="2692712">*</span><span class="ident" id="2692713"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2692720">)</span><span class="op" id="2692721">,</span>&nbsp;<span class="ident" id="2692723">nil</span><br>
<span class="lineno"></span><span class="op" id="2692727">}</span>
</div>
</body>
</html>
