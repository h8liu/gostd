<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3115872">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3115927">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3115981">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3116032">//&nbsp;+build&nbsp;amd64&nbsp;amd64p32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3116058">package</span>&nbsp;<span class="ident" id="3116066">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3116073">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;the&nbsp;code&nbsp;to&nbsp;call&nbsp;the&nbsp;SSE&nbsp;4.2&nbsp;version&nbsp;of&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno">10</span><span class="comment" id="3116150">//&nbsp;CRC.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3116159">//&nbsp;haveSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;CPUID&nbsp;to&nbsp;test&nbsp;for&nbsp;SSE&nbsp;4.2</span><br>
<span class="lineno"></span><span class="comment" id="3116233">//&nbsp;support.</span><br>
<span class="lineno"></span><span class="keyword" id="3116245">func</span>&nbsp;<span class="ident" id="3116250">haveSSE42</span><span class="op" id="3116259">(</span><span class="op" id="3116260">)</span>&nbsp;<span class="builtintype" id="3116262">bool</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3116268">//&nbsp;castagnoliSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;the&nbsp;SSE4.2&nbsp;CRC32</span><br>
<span class="lineno"></span><span class="comment" id="3116339">//&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="keyword" id="3116355">func</span>&nbsp;<span class="ident" id="3116360">castagnoliSSE42</span><span class="op" id="3116375">(</span><span class="ident" id="3116376">crc</span>&nbsp;<span class="builtintype" id="3116380">uint32</span><span class="op" id="3116386">,</span>&nbsp;<span class="ident" id="3116388">p</span>&nbsp;<span class="op" id="3116390">[</span><span class="op" id="3116391">]</span><span class="builtintype" id="3116392">byte</span><span class="op" id="3116396">)</span>&nbsp;<span class="builtintype" id="3116398">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3116406">var</span>&nbsp;<span class="ident" id="3116410">sse42</span>&nbsp;<span class="op" id="3116416">=</span>&nbsp;<span class="ident" id="3116418"><a href="/hash/crc32/crc32_amd64x.go.html#3116250">haveSSE42</a></span><span class="op" id="3116427">(</span><span class="op" id="3116428">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3116431">func</span>&nbsp;<span class="ident" id="3116436">updateCastagnoli</span><span class="op" id="3116452">(</span><span class="ident" id="3116453">crc</span>&nbsp;<span class="builtintype" id="3116457">uint32</span><span class="op" id="3116463">,</span>&nbsp;<span class="ident" id="3116465">p</span>&nbsp;<span class="op" id="3116467">[</span><span class="op" id="3116468">]</span><span class="builtintype" id="3116469">byte</span><span class="op" id="3116473">)</span>&nbsp;<span class="builtintype" id="3116475">uint32</span>&nbsp;<span class="op" id="3116482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116485">if</span>&nbsp;<span class="ident" id="3116488"><a href="/hash/crc32/crc32_amd64x.go.html#3116410">sse42</a></span>&nbsp;<span class="op" id="3116494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116498">return</span>&nbsp;<span class="ident" id="3116505"><a href="/hash/crc32/crc32_amd64x.go.html#3116360">castagnoliSSE42</a></span><span class="op" id="3116520">(</span><span class="ident" id="3116521"><a href="/hash/crc32/crc32_amd64x.go.html#3116453">crc</a></span><span class="op" id="3116524">,</span>&nbsp;<span class="ident" id="3116526"><a href="/hash/crc32/crc32_amd64x.go.html#3116465">p</a></span><span class="op" id="3116527">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116533">return</span>&nbsp;<span class="ident" id="3116540"><a href="/hash/crc32/crc32.go.html#3114890">update</a></span><span class="op" id="3116546">(</span><span class="ident" id="3116547"><a href="/hash/crc32/crc32_amd64x.go.html#3116453">crc</a></span><span class="op" id="3116550">,</span>&nbsp;<span class="ident" id="3116552"><a href="/hash/crc32/crc32.go.html#3113537">castagnoliTable</a></span><span class="op" id="3116567">,</span>&nbsp;<span class="ident" id="3116569"><a href="/hash/crc32/crc32_amd64x.go.html#3116465">p</a></span><span class="op" id="3116570">)</span><br>
<span class="lineno"></span><span class="op" id="3116572">}</span>
</div>
</body>
</html>
