<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6155247">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6155303">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6155357">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6155408">package</span>&nbsp;<span class="ident" id="6155416">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6155423">import</span>&nbsp;<span class="op" id="6155430">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6155433">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6155440">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6155450">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6155453">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="6155524">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="6155592">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6155658">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="6155726">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="6155766">type</span>&nbsp;<span class="ident" id="6155771">typeUnit</span>&nbsp;<span class="keyword" id="6155780">struct</span>&nbsp;<span class="op" id="6155787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6155790">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6155796">toff</span>&nbsp;&nbsp;<span class="ident" id="6155802">Offset</span>&nbsp;<span class="comment" id="6155809">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6155851">name</span>&nbsp;&nbsp;<span class="builtintype" id="6155857">string</span>&nbsp;<span class="comment" id="6155864">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6155897">cache</span>&nbsp;<span class="ident" id="6155903">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6155910">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="6155943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6155946">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6155979">func</span>&nbsp;<span class="op" id="6155984">(</span><span class="ident" id="6155985">d</span>&nbsp;<span class="op" id="6155987">*</span><span class="ident" id="6155988">Data</span><span class="op" id="6155992">)</span>&nbsp;<span class="ident" id="6155994">parseTypes</span><span class="op" id="6156004">(</span><span class="ident" id="6156005">name</span>&nbsp;<span class="builtintype" id="6156010">string</span><span class="op" id="6156016">,</span>&nbsp;<span class="ident" id="6156018">types</span>&nbsp;<span class="op" id="6156024">[</span><span class="op" id="6156025">]</span><span class="builtintype" id="6156026">byte</span><span class="op" id="6156030">)</span>&nbsp;<span class="builtintype" id="6156032">error</span>&nbsp;<span class="op" id="6156038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156041">b</span>&nbsp;<span class="op" id="6156043">:=</span>&nbsp;<span class="ident" id="6156046">makeBuf</span><span class="op" id="6156053">(</span><span class="ident" id="6156054">d</span><span class="op" id="6156055">,</span>&nbsp;<span class="ident" id="6156057">unknownFormat</span><span class="op" id="6156070">{</span><span class="op" id="6156071">}</span><span class="op" id="6156072">,</span>&nbsp;<span class="ident" id="6156074">name</span><span class="op" id="6156078">,</span>&nbsp;<span class="num" id="6156080">0</span><span class="op" id="6156081">,</span>&nbsp;<span class="ident" id="6156083">types</span><span class="op" id="6156088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156091">for</span>&nbsp;<span class="builtinfunc" id="6156095">len</span><span class="op" id="6156098">(</span><span class="ident" id="6156099">b</span><span class="op" id="6156100">.</span><span class="ident" id="6156101">data</span><span class="op" id="6156105">)</span>&nbsp;<span class="op" id="6156107">&gt;</span>&nbsp;<span class="num" id="6156109">0</span>&nbsp;<span class="op" id="6156111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156115">base</span>&nbsp;<span class="op" id="6156120">:=</span>&nbsp;<span class="ident" id="6156123">b</span><span class="op" id="6156124">.</span><span class="ident" id="6156125">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156131">dwarf64</span>&nbsp;<span class="op" id="6156139">:=</span>&nbsp;<span class="builtintype" id="6156142">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156150">n</span>&nbsp;<span class="op" id="6156152">:=</span>&nbsp;<span class="ident" id="6156155">b</span><span class="op" id="6156156">.</span><span class="builtintype" id="6156157">uint32</span><span class="op" id="6156163">(</span><span class="op" id="6156164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156168">if</span>&nbsp;<span class="ident" id="6156171">n</span>&nbsp;<span class="op" id="6156173">==</span>&nbsp;<span class="num" id="6156176">0xffffffff</span>&nbsp;<span class="op" id="6156187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156192">n64</span>&nbsp;<span class="op" id="6156196">:=</span>&nbsp;<span class="ident" id="6156199">b</span><span class="op" id="6156200">.</span><span class="ident" id="6156201">uint64</span><span class="op" id="6156207">(</span><span class="op" id="6156208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156213">if</span>&nbsp;<span class="ident" id="6156216">n64</span>&nbsp;<span class="op" id="6156220">!=</span>&nbsp;<span class="ident" id="6156223">uint64</span><span class="op" id="6156229">(</span><span class="builtintype" id="6156230">uint32</span><span class="op" id="6156236">(</span><span class="ident" id="6156237">n64</span><span class="op" id="6156240">)</span><span class="op" id="6156241">)</span>&nbsp;<span class="op" id="6156243">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156249">b</span><span class="op" id="6156250">.</span><span class="builtintype" id="6156251">error</span><span class="op" id="6156256">(</span><span class="string" id="6156257">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="6156284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156290">return</span>&nbsp;<span class="ident" id="6156297">b</span><span class="op" id="6156298">.</span><span class="ident" id="6156299">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156311">n</span>&nbsp;<span class="op" id="6156313">=</span>&nbsp;<span class="builtintype" id="6156315">uint32</span><span class="op" id="6156321">(</span><span class="ident" id="6156322">n64</span><span class="op" id="6156325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156330">dwarf64</span>&nbsp;<span class="op" id="6156338">=</span>&nbsp;<span class="builtintype" id="6156340">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156351">hdroff</span>&nbsp;<span class="op" id="6156358">:=</span>&nbsp;<span class="ident" id="6156361">b</span><span class="op" id="6156362">.</span><span class="ident" id="6156363">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156369">vers</span>&nbsp;<span class="op" id="6156374">:=</span>&nbsp;<span class="ident" id="6156377">b</span><span class="op" id="6156378">.</span><span class="builtintype" id="6156379">uint16</span><span class="op" id="6156385">(</span><span class="op" id="6156386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156390">if</span>&nbsp;<span class="ident" id="6156393">vers</span>&nbsp;<span class="op" id="6156398">!=</span>&nbsp;<span class="num" id="6156401">4</span>&nbsp;<span class="op" id="6156403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156408">b</span><span class="op" id="6156409">.</span><span class="builtintype" id="6156410">error</span><span class="op" id="6156415">(</span><span class="string" id="6156416">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="6156445">+</span>&nbsp;<span class="ident" id="6156447">strconv</span><span class="op" id="6156454">.</span><span class="ident" id="6156455">Itoa</span><span class="op" id="6156459">(</span><span class="builtintype" id="6156460">int</span><span class="op" id="6156463">(</span><span class="ident" id="6156464">vers</span><span class="op" id="6156468">)</span><span class="op" id="6156469">)</span><span class="op" id="6156470">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156475">return</span>&nbsp;<span class="ident" id="6156482">b</span><span class="op" id="6156483">.</span><span class="ident" id="6156484">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156494">var</span>&nbsp;<span class="ident" id="6156498">ao</span>&nbsp;<span class="builtintype" id="6156501">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156510">if</span>&nbsp;<span class="op" id="6156513">!</span><span class="ident" id="6156514">dwarf64</span>&nbsp;<span class="op" id="6156522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156527">ao</span>&nbsp;<span class="op" id="6156530">=</span>&nbsp;<span class="ident" id="6156532">b</span><span class="op" id="6156533">.</span><span class="builtintype" id="6156534">uint32</span><span class="op" id="6156540">(</span><span class="op" id="6156541">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156545">}</span>&nbsp;<span class="keyword" id="6156547">else</span>&nbsp;<span class="op" id="6156552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156557">ao64</span>&nbsp;<span class="op" id="6156562">:=</span>&nbsp;<span class="ident" id="6156565">b</span><span class="op" id="6156566">.</span><span class="ident" id="6156567">uint64</span><span class="op" id="6156573">(</span><span class="op" id="6156574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156579">if</span>&nbsp;<span class="ident" id="6156582">ao64</span>&nbsp;<span class="op" id="6156587">!=</span>&nbsp;<span class="ident" id="6156590">uint64</span><span class="op" id="6156596">(</span><span class="builtintype" id="6156597">uint32</span><span class="op" id="6156603">(</span><span class="ident" id="6156604">ao64</span><span class="op" id="6156608">)</span><span class="op" id="6156609">)</span>&nbsp;<span class="op" id="6156611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156617">b</span><span class="op" id="6156618">.</span><span class="builtintype" id="6156619">error</span><span class="op" id="6156624">(</span><span class="string" id="6156625">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="6156659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156665">return</span>&nbsp;<span class="ident" id="6156672">b</span><span class="op" id="6156673">.</span><span class="ident" id="6156674">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156686">ao</span>&nbsp;<span class="op" id="6156689">=</span>&nbsp;<span class="builtintype" id="6156691">uint32</span><span class="op" id="6156697">(</span><span class="ident" id="6156698">ao64</span><span class="op" id="6156702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156710">atable</span><span class="op" id="6156716">,</span>&nbsp;<span class="ident" id="6156718">err</span>&nbsp;<span class="op" id="6156722">:=</span>&nbsp;<span class="ident" id="6156725">d</span><span class="op" id="6156726">.</span><span class="ident" id="6156727">parseAbbrev</span><span class="op" id="6156738">(</span><span class="ident" id="6156739">ao</span><span class="op" id="6156741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156745">if</span>&nbsp;<span class="ident" id="6156748">err</span>&nbsp;<span class="op" id="6156752">!=</span>&nbsp;<span class="ident" id="6156755">nil</span>&nbsp;<span class="op" id="6156759">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156764">return</span>&nbsp;<span class="ident" id="6156771">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156781">asize</span>&nbsp;<span class="op" id="6156787">:=</span>&nbsp;<span class="ident" id="6156790">b</span><span class="op" id="6156791">.</span><span class="builtintype" id="6156792">uint8</span><span class="op" id="6156797">(</span><span class="op" id="6156798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156802">sig</span>&nbsp;<span class="op" id="6156806">:=</span>&nbsp;<span class="ident" id="6156809">b</span><span class="op" id="6156810">.</span><span class="ident" id="6156811">uint64</span><span class="op" id="6156817">(</span><span class="op" id="6156818">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156823">var</span>&nbsp;<span class="ident" id="6156827">toff</span>&nbsp;<span class="builtintype" id="6156832">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156841">if</span>&nbsp;<span class="op" id="6156844">!</span><span class="ident" id="6156845">dwarf64</span>&nbsp;<span class="op" id="6156853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156858">toff</span>&nbsp;<span class="op" id="6156863">=</span>&nbsp;<span class="ident" id="6156865">b</span><span class="op" id="6156866">.</span><span class="builtintype" id="6156867">uint32</span><span class="op" id="6156873">(</span><span class="op" id="6156874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6156878">}</span>&nbsp;<span class="keyword" id="6156880">else</span>&nbsp;<span class="op" id="6156885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156890">to64</span>&nbsp;<span class="op" id="6156895">:=</span>&nbsp;<span class="ident" id="6156898">b</span><span class="op" id="6156899">.</span><span class="ident" id="6156900">uint64</span><span class="op" id="6156906">(</span><span class="op" id="6156907">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156912">if</span>&nbsp;<span class="ident" id="6156915">to64</span>&nbsp;<span class="op" id="6156920">!=</span>&nbsp;<span class="ident" id="6156923">uint64</span><span class="op" id="6156929">(</span><span class="builtintype" id="6156930">uint32</span><span class="op" id="6156936">(</span><span class="ident" id="6156937">to64</span><span class="op" id="6156941">)</span><span class="op" id="6156942">)</span>&nbsp;<span class="op" id="6156944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6156950">b</span><span class="op" id="6156951">.</span><span class="builtintype" id="6156952">error</span><span class="op" id="6156957">(</span><span class="string" id="6156958">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="6156990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6156996">return</span>&nbsp;<span class="ident" id="6157003">b</span><span class="op" id="6157004">.</span><span class="ident" id="6157005">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157017">toff</span>&nbsp;<span class="op" id="6157022">=</span>&nbsp;<span class="builtintype" id="6157024">uint32</span><span class="op" id="6157030">(</span><span class="ident" id="6157031">to64</span><span class="op" id="6157035">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157044">boff</span>&nbsp;<span class="op" id="6157049">:=</span>&nbsp;<span class="ident" id="6157052">b</span><span class="op" id="6157053">.</span><span class="ident" id="6157054">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157060">d</span><span class="op" id="6157061">.</span><span class="ident" id="6157062">typeSigs</span><span class="op" id="6157070">[</span><span class="ident" id="6157071">sig</span><span class="op" id="6157074">]</span>&nbsp;<span class="op" id="6157076">=</span>&nbsp;<span class="op" id="6157078">&amp;</span><span class="ident" id="6157079">typeUnit</span><span class="op" id="6157087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157092">unit</span><span class="op" id="6157096">:</span>&nbsp;<span class="ident" id="6157098">unit</span><span class="op" id="6157102">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157108">base</span><span class="op" id="6157112">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6157116">base</span><span class="op" id="6157120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157126">off</span><span class="op" id="6157129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157134">boff</span><span class="op" id="6157138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157144">data</span><span class="op" id="6157148">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6157152">b</span><span class="op" id="6157153">.</span><span class="ident" id="6157154">bytes</span><span class="op" id="6157159">(</span><span class="builtintype" id="6157160">int</span><span class="op" id="6157163">(</span><span class="ident" id="6157164">Offset</span><span class="op" id="6157170">(</span><span class="ident" id="6157171">n</span><span class="op" id="6157172">)</span>&nbsp;<span class="op" id="6157174">-</span>&nbsp;<span class="op" id="6157176">(</span><span class="ident" id="6157177">b</span><span class="op" id="6157178">.</span><span class="ident" id="6157179">off</span>&nbsp;<span class="op" id="6157183">-</span>&nbsp;<span class="ident" id="6157185">hdroff</span><span class="op" id="6157191">)</span><span class="op" id="6157192">)</span><span class="op" id="6157193">)</span><span class="op" id="6157194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157200">atable</span><span class="op" id="6157206">:</span>&nbsp;<span class="ident" id="6157208">atable</span><span class="op" id="6157214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157220">asize</span><span class="op" id="6157225">:</span>&nbsp;&nbsp;<span class="builtintype" id="6157228">int</span><span class="op" id="6157231">(</span><span class="ident" id="6157232">asize</span><span class="op" id="6157237">)</span><span class="op" id="6157238">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157244">vers</span><span class="op" id="6157248">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6157252">int</span><span class="op" id="6157255">(</span><span class="ident" id="6157256">vers</span><span class="op" id="6157260">)</span><span class="op" id="6157261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157267">is64</span><span class="op" id="6157271">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6157275">dwarf64</span><span class="op" id="6157282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157287">}</span><span class="op" id="6157288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157293">toff</span><span class="op" id="6157297">:</span>&nbsp;<span class="ident" id="6157299">Offset</span><span class="op" id="6157305">(</span><span class="ident" id="6157306">toff</span><span class="op" id="6157310">)</span><span class="op" id="6157311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157316">name</span><span class="op" id="6157320">:</span>&nbsp;<span class="ident" id="6157322">name</span><span class="op" id="6157326">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157334">if</span>&nbsp;<span class="ident" id="6157337">b</span><span class="op" id="6157338">.</span><span class="ident" id="6157339">err</span>&nbsp;<span class="op" id="6157343">!=</span>&nbsp;<span class="ident" id="6157346">nil</span>&nbsp;<span class="op" id="6157350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157355">return</span>&nbsp;<span class="ident" id="6157362">b</span><span class="op" id="6157363">.</span><span class="ident" id="6157364">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157373">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157376">return</span>&nbsp;<span class="ident" id="6157383">nil</span><br>
<span class="lineno"></span><span class="op" id="6157387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6157390">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="6157431">func</span>&nbsp;<span class="op" id="6157436">(</span><span class="ident" id="6157437">d</span>&nbsp;<span class="op" id="6157439">*</span><span class="ident" id="6157440">Data</span><span class="op" id="6157444">)</span>&nbsp;<span class="ident" id="6157446">sigToType</span><span class="op" id="6157455">(</span><span class="ident" id="6157456">sig</span>&nbsp;<span class="ident" id="6157460">uint64</span><span class="op" id="6157466">)</span>&nbsp;<span class="op" id="6157468">(</span><span class="ident" id="6157469">Type</span><span class="op" id="6157473">,</span>&nbsp;<span class="builtintype" id="6157475">error</span><span class="op" id="6157480">)</span>&nbsp;<span class="op" id="6157482">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157485">tu</span>&nbsp;<span class="op" id="6157488">:=</span>&nbsp;<span class="ident" id="6157491">d</span><span class="op" id="6157492">.</span><span class="ident" id="6157493">typeSigs</span><span class="op" id="6157501">[</span><span class="ident" id="6157502">sig</span><span class="op" id="6157505">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157508">if</span>&nbsp;<span class="ident" id="6157511">tu</span>&nbsp;<span class="op" id="6157514">==</span>&nbsp;<span class="ident" id="6157517">nil</span>&nbsp;<span class="op" id="6157521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157525">return</span>&nbsp;<span class="ident" id="6157532">nil</span><span class="op" id="6157535">,</span>&nbsp;<span class="ident" id="6157537">fmt</span><span class="op" id="6157540">.</span><span class="ident" id="6157541">Errorf</span><span class="op" id="6157547">(</span><span class="string" id="6157548">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="6157580">,</span>&nbsp;<span class="ident" id="6157582">sig</span><span class="op" id="6157585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157591">if</span>&nbsp;<span class="ident" id="6157594">tu</span><span class="op" id="6157596">.</span><span class="ident" id="6157597">cache</span>&nbsp;<span class="op" id="6157603">!=</span>&nbsp;<span class="ident" id="6157606">nil</span>&nbsp;<span class="op" id="6157610">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157614">return</span>&nbsp;<span class="ident" id="6157621">tu</span><span class="op" id="6157623">.</span><span class="ident" id="6157624">cache</span><span class="op" id="6157629">,</span>&nbsp;<span class="ident" id="6157631">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157640">b</span>&nbsp;<span class="op" id="6157642">:=</span>&nbsp;<span class="ident" id="6157645">makeBuf</span><span class="op" id="6157652">(</span><span class="ident" id="6157653">d</span><span class="op" id="6157654">,</span>&nbsp;<span class="ident" id="6157656">tu</span><span class="op" id="6157658">,</span>&nbsp;<span class="ident" id="6157660">tu</span><span class="op" id="6157662">.</span><span class="ident" id="6157663">name</span><span class="op" id="6157667">,</span>&nbsp;<span class="ident" id="6157669">tu</span><span class="op" id="6157671">.</span><span class="ident" id="6157672">off</span><span class="op" id="6157675">,</span>&nbsp;<span class="ident" id="6157677">tu</span><span class="op" id="6157679">.</span><span class="ident" id="6157680">data</span><span class="op" id="6157684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157687">r</span>&nbsp;<span class="op" id="6157689">:=</span>&nbsp;<span class="op" id="6157692">&amp;</span><span class="ident" id="6157693">typeUnitReader</span><span class="op" id="6157707">{</span><span class="ident" id="6157708">d</span><span class="op" id="6157709">:</span>&nbsp;<span class="ident" id="6157711">d</span><span class="op" id="6157712">,</span>&nbsp;<span class="ident" id="6157714">tu</span><span class="op" id="6157716">:</span>&nbsp;<span class="ident" id="6157718">tu</span><span class="op" id="6157720">,</span>&nbsp;<span class="ident" id="6157722">b</span><span class="op" id="6157723">:</span>&nbsp;<span class="ident" id="6157725">b</span><span class="op" id="6157726">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157729">t</span><span class="op" id="6157730">,</span>&nbsp;<span class="ident" id="6157732">err</span>&nbsp;<span class="op" id="6157736">:=</span>&nbsp;<span class="ident" id="6157739">d</span><span class="op" id="6157740">.</span><span class="ident" id="6157741">readType</span><span class="op" id="6157749">(</span><span class="ident" id="6157750">tu</span><span class="op" id="6157752">.</span><span class="ident" id="6157753">name</span><span class="op" id="6157757">,</span>&nbsp;<span class="ident" id="6157759">r</span><span class="op" id="6157760">,</span>&nbsp;<span class="ident" id="6157762">Offset</span><span class="op" id="6157768">(</span><span class="ident" id="6157769">tu</span><span class="op" id="6157771">.</span><span class="ident" id="6157772">toff</span><span class="op" id="6157776">)</span><span class="op" id="6157777">,</span>&nbsp;<span class="builtinfunc" id="6157779">make</span><span class="op" id="6157783">(</span><span class="keyword" id="6157784">map</span><span class="op" id="6157787">[</span><span class="ident" id="6157788">Offset</span><span class="op" id="6157794">]</span><span class="ident" id="6157795">Type</span><span class="op" id="6157799">)</span><span class="op" id="6157800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157803">if</span>&nbsp;<span class="ident" id="6157806">err</span>&nbsp;<span class="op" id="6157810">!=</span>&nbsp;<span class="ident" id="6157813">nil</span>&nbsp;<span class="op" id="6157817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157821">return</span>&nbsp;<span class="ident" id="6157828">nil</span><span class="op" id="6157831">,</span>&nbsp;<span class="ident" id="6157833">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6157838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157842">tu</span><span class="op" id="6157844">.</span><span class="ident" id="6157845">cache</span>&nbsp;<span class="op" id="6157851">=</span>&nbsp;<span class="ident" id="6157853">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6157856">return</span>&nbsp;<span class="ident" id="6157863">t</span><span class="op" id="6157864">,</span>&nbsp;<span class="ident" id="6157866">nil</span><br>
<span class="lineno"></span><span class="op" id="6157870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6157873">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="6157926">type</span>&nbsp;<span class="ident" id="6157931">typeUnitReader</span>&nbsp;<span class="keyword" id="6157946">struct</span>&nbsp;<span class="op" id="6157953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157956">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6157960">*</span><span class="ident" id="6157961">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157967">tu</span>&nbsp;&nbsp;<span class="op" id="6157971">*</span><span class="ident" id="6157972">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157982">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6157986">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6157991">err</span>&nbsp;<span class="builtintype" id="6157995">error</span><br>
<span class="lineno">125</span><span class="op" id="6158001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6158004">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="6158048">func</span>&nbsp;<span class="op" id="6158053">(</span><span class="ident" id="6158054">tur</span>&nbsp;<span class="op" id="6158058">*</span><span class="ident" id="6158059">typeUnitReader</span><span class="op" id="6158073">)</span>&nbsp;<span class="ident" id="6158075">Seek</span><span class="op" id="6158079">(</span><span class="ident" id="6158080">off</span>&nbsp;<span class="ident" id="6158084">Offset</span><span class="op" id="6158090">)</span>&nbsp;<span class="op" id="6158092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158095">tur</span><span class="op" id="6158098">.</span><span class="ident" id="6158099">err</span>&nbsp;<span class="op" id="6158103">=</span>&nbsp;<span class="ident" id="6158105">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158110">doff</span>&nbsp;<span class="op" id="6158115">:=</span>&nbsp;<span class="ident" id="6158118">off</span>&nbsp;<span class="op" id="6158122">-</span>&nbsp;<span class="ident" id="6158124">tur</span><span class="op" id="6158127">.</span><span class="ident" id="6158128">tu</span><span class="op" id="6158130">.</span><span class="ident" id="6158131">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158136">if</span>&nbsp;<span class="ident" id="6158139">doff</span>&nbsp;<span class="op" id="6158144">&lt;</span>&nbsp;<span class="num" id="6158146">0</span>&nbsp;<span class="op" id="6158148">||</span>&nbsp;<span class="ident" id="6158151">doff</span>&nbsp;<span class="op" id="6158156">&gt;=</span>&nbsp;<span class="ident" id="6158159">Offset</span><span class="op" id="6158165">(</span><span class="builtinfunc" id="6158166">len</span><span class="op" id="6158169">(</span><span class="ident" id="6158170">tur</span><span class="op" id="6158173">.</span><span class="ident" id="6158174">tu</span><span class="op" id="6158176">.</span><span class="ident" id="6158177">data</span><span class="op" id="6158181">)</span><span class="op" id="6158182">)</span>&nbsp;<span class="op" id="6158184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158188">tur</span><span class="op" id="6158191">.</span><span class="ident" id="6158192">err</span>&nbsp;<span class="op" id="6158196">=</span>&nbsp;<span class="ident" id="6158198">fmt</span><span class="op" id="6158201">.</span><span class="ident" id="6158202">Errorf</span><span class="op" id="6158208">(</span><span class="string" id="6158209">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="6158245">,</span>&nbsp;<span class="ident" id="6158247">tur</span><span class="op" id="6158250">.</span><span class="ident" id="6158251">tu</span><span class="op" id="6158253">.</span><span class="ident" id="6158254">name</span><span class="op" id="6158258">,</span>&nbsp;<span class="ident" id="6158260">doff</span><span class="op" id="6158264">,</span>&nbsp;<span class="builtinfunc" id="6158266">len</span><span class="op" id="6158269">(</span><span class="ident" id="6158270">tur</span><span class="op" id="6158273">.</span><span class="ident" id="6158274">tu</span><span class="op" id="6158276">.</span><span class="ident" id="6158277">data</span><span class="op" id="6158281">)</span><span class="op" id="6158282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158286">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6158294">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158297">tur</span><span class="op" id="6158300">.</span><span class="ident" id="6158301">b</span>&nbsp;<span class="op" id="6158303">=</span>&nbsp;<span class="ident" id="6158305">makeBuf</span><span class="op" id="6158312">(</span><span class="ident" id="6158313">tur</span><span class="op" id="6158316">.</span><span class="ident" id="6158317">d</span><span class="op" id="6158318">,</span>&nbsp;<span class="ident" id="6158320">tur</span><span class="op" id="6158323">.</span><span class="ident" id="6158324">tu</span><span class="op" id="6158326">,</span>&nbsp;<span class="ident" id="6158328">tur</span><span class="op" id="6158331">.</span><span class="ident" id="6158332">tu</span><span class="op" id="6158334">.</span><span class="ident" id="6158335">name</span><span class="op" id="6158339">,</span>&nbsp;<span class="ident" id="6158341">off</span><span class="op" id="6158344">,</span>&nbsp;<span class="ident" id="6158346">tur</span><span class="op" id="6158349">.</span><span class="ident" id="6158350">tu</span><span class="op" id="6158352">.</span><span class="ident" id="6158353">data</span><span class="op" id="6158357">[</span><span class="ident" id="6158358">doff</span><span class="op" id="6158362">:</span><span class="op" id="6158363">]</span><span class="op" id="6158364">)</span><br>
<span class="lineno"></span><span class="op" id="6158366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6158369">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="6158418">func</span>&nbsp;<span class="op" id="6158423">(</span><span class="ident" id="6158424">tur</span>&nbsp;<span class="op" id="6158428">*</span><span class="ident" id="6158429">typeUnitReader</span><span class="op" id="6158443">)</span>&nbsp;<span class="ident" id="6158445">Next</span><span class="op" id="6158449">(</span><span class="op" id="6158450">)</span>&nbsp;<span class="op" id="6158452">(</span><span class="op" id="6158453">*</span><span class="ident" id="6158454">Entry</span><span class="op" id="6158459">,</span>&nbsp;<span class="builtintype" id="6158461">error</span><span class="op" id="6158466">)</span>&nbsp;<span class="op" id="6158468">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158471">if</span>&nbsp;<span class="ident" id="6158474">tur</span><span class="op" id="6158477">.</span><span class="ident" id="6158478">err</span>&nbsp;<span class="op" id="6158482">!=</span>&nbsp;<span class="ident" id="6158485">nil</span>&nbsp;<span class="op" id="6158489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158493">return</span>&nbsp;<span class="ident" id="6158500">nil</span><span class="op" id="6158503">,</span>&nbsp;<span class="ident" id="6158505">tur</span><span class="op" id="6158508">.</span><span class="ident" id="6158509">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6158514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158517">if</span>&nbsp;<span class="builtinfunc" id="6158520">len</span><span class="op" id="6158523">(</span><span class="ident" id="6158524">tur</span><span class="op" id="6158527">.</span><span class="ident" id="6158528">tu</span><span class="op" id="6158530">.</span><span class="ident" id="6158531">data</span><span class="op" id="6158535">)</span>&nbsp;<span class="op" id="6158537">==</span>&nbsp;<span class="num" id="6158540">0</span>&nbsp;<span class="op" id="6158542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158546">return</span>&nbsp;<span class="ident" id="6158553">nil</span><span class="op" id="6158556">,</span>&nbsp;<span class="ident" id="6158558">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6158563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158566">e</span>&nbsp;<span class="op" id="6158568">:=</span>&nbsp;<span class="ident" id="6158571">tur</span><span class="op" id="6158574">.</span><span class="ident" id="6158575">b</span><span class="op" id="6158576">.</span><span class="ident" id="6158577">entry</span><span class="op" id="6158582">(</span><span class="ident" id="6158583">tur</span><span class="op" id="6158586">.</span><span class="ident" id="6158587">tu</span><span class="op" id="6158589">.</span><span class="ident" id="6158590">atable</span><span class="op" id="6158596">,</span>&nbsp;<span class="ident" id="6158598">tur</span><span class="op" id="6158601">.</span><span class="ident" id="6158602">tu</span><span class="op" id="6158604">.</span><span class="ident" id="6158605">base</span><span class="op" id="6158609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158612">if</span>&nbsp;<span class="ident" id="6158615">tur</span><span class="op" id="6158618">.</span><span class="ident" id="6158619">b</span><span class="op" id="6158620">.</span><span class="ident" id="6158621">err</span>&nbsp;<span class="op" id="6158625">!=</span>&nbsp;<span class="ident" id="6158628">nil</span>&nbsp;<span class="op" id="6158632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158636">tur</span><span class="op" id="6158639">.</span><span class="ident" id="6158640">err</span>&nbsp;<span class="op" id="6158644">=</span>&nbsp;<span class="ident" id="6158646">tur</span><span class="op" id="6158649">.</span><span class="ident" id="6158650">b</span><span class="op" id="6158651">.</span><span class="ident" id="6158652">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158658">return</span>&nbsp;<span class="ident" id="6158665">nil</span><span class="op" id="6158668">,</span>&nbsp;<span class="ident" id="6158670">tur</span><span class="op" id="6158673">.</span><span class="ident" id="6158674">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6158679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158682">return</span>&nbsp;<span class="ident" id="6158689">e</span><span class="op" id="6158690">,</span>&nbsp;<span class="ident" id="6158692">nil</span><br>
<span class="lineno"></span><span class="op" id="6158696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6158699">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="6158748">func</span>&nbsp;<span class="op" id="6158753">(</span><span class="ident" id="6158754">tur</span>&nbsp;<span class="op" id="6158758">*</span><span class="ident" id="6158759">typeUnitReader</span><span class="op" id="6158773">)</span>&nbsp;<span class="ident" id="6158775">clone</span><span class="op" id="6158780">(</span><span class="op" id="6158781">)</span>&nbsp;<span class="ident" id="6158783">typeReader</span>&nbsp;<span class="op" id="6158794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6158797">return</span>&nbsp;<span class="op" id="6158804">&amp;</span><span class="ident" id="6158805">typeUnitReader</span><span class="op" id="6158819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158823">d</span><span class="op" id="6158824">:</span>&nbsp;&nbsp;<span class="ident" id="6158827">tur</span><span class="op" id="6158830">.</span><span class="ident" id="6158831">d</span><span class="op" id="6158832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158836">tu</span><span class="op" id="6158838">:</span>&nbsp;<span class="ident" id="6158840">tur</span><span class="op" id="6158843">.</span><span class="ident" id="6158844">tu</span><span class="op" id="6158846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6158850">b</span><span class="op" id="6158851">:</span>&nbsp;&nbsp;<span class="ident" id="6158854">makeBuf</span><span class="op" id="6158861">(</span><span class="ident" id="6158862">tur</span><span class="op" id="6158865">.</span><span class="ident" id="6158866">d</span><span class="op" id="6158867">,</span>&nbsp;<span class="ident" id="6158869">tur</span><span class="op" id="6158872">.</span><span class="ident" id="6158873">tu</span><span class="op" id="6158875">,</span>&nbsp;<span class="ident" id="6158877">tur</span><span class="op" id="6158880">.</span><span class="ident" id="6158881">tu</span><span class="op" id="6158883">.</span><span class="ident" id="6158884">name</span><span class="op" id="6158888">,</span>&nbsp;<span class="ident" id="6158890">tur</span><span class="op" id="6158893">.</span><span class="ident" id="6158894">tu</span><span class="op" id="6158896">.</span><span class="ident" id="6158897">off</span><span class="op" id="6158900">,</span>&nbsp;<span class="ident" id="6158902">tur</span><span class="op" id="6158905">.</span><span class="ident" id="6158906">tu</span><span class="op" id="6158908">.</span><span class="ident" id="6158909">data</span><span class="op" id="6158913">)</span><span class="op" id="6158914">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6158917">}</span><br>
<span class="lineno"></span><span class="op" id="6158919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6158922">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="6158960">func</span>&nbsp;<span class="op" id="6158965">(</span><span class="ident" id="6158966">tur</span>&nbsp;<span class="op" id="6158970">*</span><span class="ident" id="6158971">typeUnitReader</span><span class="op" id="6158985">)</span>&nbsp;<span class="ident" id="6158987">offset</span><span class="op" id="6158993">(</span><span class="op" id="6158994">)</span>&nbsp;<span class="ident" id="6158996">Offset</span>&nbsp;<span class="op" id="6159003">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159006">return</span>&nbsp;<span class="ident" id="6159013">tur</span><span class="op" id="6159016">.</span><span class="ident" id="6159017">b</span><span class="op" id="6159018">.</span><span class="ident" id="6159019">off</span><br>
<span class="lineno"></span><span class="op" id="6159023">}</span>
</div>
</body>
</html>
