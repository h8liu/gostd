<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html" class="current">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2901099">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2901154">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2901208">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2901259">//&nbsp;Package&nbsp;strings&nbsp;implements&nbsp;simple&nbsp;functions&nbsp;to&nbsp;manipulate&nbsp;strings.</span><br>
<span class="lineno"></span><span class="keyword" id="2901329">package</span>&nbsp;<span class="ident" id="2901337">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2901346">import</span>&nbsp;<span class="op" id="2901353">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2901356">&#34;unicode&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2901367">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2901382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901385">//&nbsp;explode&nbsp;splits&nbsp;s&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;UTF-8&nbsp;sequences,&nbsp;one&nbsp;per&nbsp;Unicode&nbsp;character&nbsp;(still&nbsp;strings)&nbsp;up&nbsp;to&nbsp;a&nbsp;maximum&nbsp;of&nbsp;n&nbsp;(n&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;no&nbsp;limit).</span><br>
<span class="lineno"></span><span class="comment" id="2901526">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequences&nbsp;become&nbsp;correct&nbsp;encodings&nbsp;of&nbsp;U+FFF8.</span><br>
<span class="lineno">15</span><span class="keyword" id="2901589">func</span>&nbsp;<span class="ident" id="2901594">explode</span><span class="op" id="2901601">(</span><span class="ident" id="2901602">s</span>&nbsp;<span class="builtintype" id="2901604">string</span><span class="op" id="2901610">,</span>&nbsp;<span class="ident" id="2901612">n</span>&nbsp;<span class="builtintype" id="2901614">int</span><span class="op" id="2901617">)</span>&nbsp;<span class="op" id="2901619">[</span><span class="op" id="2901620">]</span><span class="builtintype" id="2901621">string</span>&nbsp;<span class="op" id="2901628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901631">if</span>&nbsp;<span class="ident" id="2901634">n</span>&nbsp;<span class="op" id="2901636">==</span>&nbsp;<span class="num" id="2901639">0</span>&nbsp;<span class="op" id="2901641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901645">return</span>&nbsp;<span class="ident" id="2901652">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901660">l</span>&nbsp;<span class="op" id="2901662">:=</span>&nbsp;<span class="ident" id="2901665">utf8</span><span class="op" id="2901669">.</span><span class="ident" id="2901670">RuneCountInString</span><span class="op" id="2901687">(</span><span class="ident" id="2901688">s</span><span class="op" id="2901689">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901692">if</span>&nbsp;<span class="ident" id="2901695">n</span>&nbsp;<span class="op" id="2901697">&lt;=</span>&nbsp;<span class="num" id="2901700">0</span>&nbsp;<span class="op" id="2901702">||</span>&nbsp;<span class="ident" id="2901705">n</span>&nbsp;<span class="op" id="2901707">&gt;</span>&nbsp;<span class="ident" id="2901709">l</span>&nbsp;<span class="op" id="2901711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901715">n</span>&nbsp;<span class="op" id="2901717">=</span>&nbsp;<span class="ident" id="2901719">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901725">a</span>&nbsp;<span class="op" id="2901727">:=</span>&nbsp;<span class="builtinfunc" id="2901730">make</span><span class="op" id="2901734">(</span><span class="op" id="2901735">[</span><span class="op" id="2901736">]</span><span class="builtintype" id="2901737">string</span><span class="op" id="2901743">,</span>&nbsp;<span class="ident" id="2901745">n</span><span class="op" id="2901746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901749">var</span>&nbsp;<span class="ident" id="2901753">size</span>&nbsp;<span class="builtintype" id="2901758">int</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901763">var</span>&nbsp;<span class="ident" id="2901767">ch</span>&nbsp;<span class="builtintype" id="2901770">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901776">i</span><span class="op" id="2901777">,</span>&nbsp;<span class="ident" id="2901779">cur</span>&nbsp;<span class="op" id="2901783">:=</span>&nbsp;<span class="num" id="2901786">0</span><span class="op" id="2901787">,</span>&nbsp;<span class="num" id="2901789">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901792">for</span>&nbsp;<span class="op" id="2901796">;</span>&nbsp;<span class="ident" id="2901798">i</span><span class="op" id="2901799">+</span><span class="num" id="2901800">1</span>&nbsp;<span class="op" id="2901802">&lt;</span>&nbsp;<span class="ident" id="2901804">n</span><span class="op" id="2901805">;</span>&nbsp;<span class="ident" id="2901807">i</span><span class="op" id="2901808">++</span>&nbsp;<span class="op" id="2901811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901815">ch</span><span class="op" id="2901817">,</span>&nbsp;<span class="ident" id="2901819">size</span>&nbsp;<span class="op" id="2901824">=</span>&nbsp;<span class="ident" id="2901826">utf8</span><span class="op" id="2901830">.</span><span class="ident" id="2901831">DecodeRuneInString</span><span class="op" id="2901849">(</span><span class="ident" id="2901850">s</span><span class="op" id="2901851">[</span><span class="ident" id="2901852">cur</span><span class="op" id="2901855">:</span><span class="op" id="2901856">]</span><span class="op" id="2901857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901861">if</span>&nbsp;<span class="ident" id="2901864">ch</span>&nbsp;<span class="op" id="2901867">==</span>&nbsp;<span class="ident" id="2901870">utf8</span><span class="op" id="2901874">.</span><span class="ident" id="2901875">RuneError</span>&nbsp;<span class="op" id="2901885">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901890">a</span><span class="op" id="2901891">[</span><span class="ident" id="2901892">i</span><span class="op" id="2901893">]</span>&nbsp;<span class="op" id="2901895">=</span>&nbsp;<span class="builtintype" id="2901897">string</span><span class="op" id="2901903">(</span><span class="ident" id="2901904">utf8</span><span class="op" id="2901908">.</span><span class="ident" id="2901909">RuneError</span><span class="op" id="2901918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901922">}</span>&nbsp;<span class="keyword" id="2901924">else</span>&nbsp;<span class="op" id="2901929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901934">a</span><span class="op" id="2901935">[</span><span class="ident" id="2901936">i</span><span class="op" id="2901937">]</span>&nbsp;<span class="op" id="2901939">=</span>&nbsp;<span class="ident" id="2901941">s</span><span class="op" id="2901942">[</span><span class="ident" id="2901943">cur</span>&nbsp;<span class="op" id="2901947">:</span>&nbsp;<span class="ident" id="2901949">cur</span><span class="op" id="2901952">+</span><span class="ident" id="2901953">size</span><span class="op" id="2901957">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901965">cur</span>&nbsp;<span class="op" id="2901969">+=</span>&nbsp;<span class="ident" id="2901972">size</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2901981">//&nbsp;add&nbsp;the&nbsp;rest,&nbsp;if&nbsp;there&nbsp;is&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902015">if</span>&nbsp;<span class="ident" id="2902018">cur</span>&nbsp;<span class="op" id="2902022">&lt;</span>&nbsp;<span class="builtinfunc" id="2902024">len</span><span class="op" id="2902027">(</span><span class="ident" id="2902028">s</span><span class="op" id="2902029">)</span>&nbsp;<span class="op" id="2902031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902035">a</span><span class="op" id="2902036">[</span><span class="ident" id="2902037">i</span><span class="op" id="2902038">]</span>&nbsp;<span class="op" id="2902040">=</span>&nbsp;<span class="ident" id="2902042">s</span><span class="op" id="2902043">[</span><span class="ident" id="2902044">cur</span><span class="op" id="2902047">:</span><span class="op" id="2902048">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902051">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902054">return</span>&nbsp;<span class="ident" id="2902061">a</span><br>
<span class="lineno"></span><span class="op" id="2902063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902066">//&nbsp;primeRK&nbsp;is&nbsp;the&nbsp;prime&nbsp;base&nbsp;used&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2902125">const</span>&nbsp;<span class="ident" id="2902131">primeRK</span>&nbsp;<span class="op" id="2902139">=</span>&nbsp;<span class="num" id="2902141">16777619</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2902151">//&nbsp;hashStr&nbsp;returns&nbsp;the&nbsp;hash&nbsp;and&nbsp;the&nbsp;appropriate&nbsp;multiplicative</span><br>
<span class="lineno"></span><span class="comment" id="2902214">//&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2902257">func</span>&nbsp;<span class="ident" id="2902262">hashStr</span><span class="op" id="2902269">(</span><span class="ident" id="2902270">sep</span>&nbsp;<span class="builtintype" id="2902274">string</span><span class="op" id="2902280">)</span>&nbsp;<span class="op" id="2902282">(</span><span class="builtintype" id="2902283">uint32</span><span class="op" id="2902289">,</span>&nbsp;<span class="builtintype" id="2902291">uint32</span><span class="op" id="2902297">)</span>&nbsp;<span class="op" id="2902299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902302">hash</span>&nbsp;<span class="op" id="2902307">:=</span>&nbsp;<span class="builtintype" id="2902310">uint32</span><span class="op" id="2902316">(</span><span class="num" id="2902317">0</span><span class="op" id="2902318">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902321">for</span>&nbsp;<span class="ident" id="2902325">i</span>&nbsp;<span class="op" id="2902327">:=</span>&nbsp;<span class="num" id="2902330">0</span><span class="op" id="2902331">;</span>&nbsp;<span class="ident" id="2902333">i</span>&nbsp;<span class="op" id="2902335">&lt;</span>&nbsp;<span class="builtinfunc" id="2902337">len</span><span class="op" id="2902340">(</span><span class="ident" id="2902341">sep</span><span class="op" id="2902344">)</span><span class="op" id="2902345">;</span>&nbsp;<span class="ident" id="2902347">i</span><span class="op" id="2902348">++</span>&nbsp;<span class="op" id="2902351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902355">hash</span>&nbsp;<span class="op" id="2902360">=</span>&nbsp;<span class="ident" id="2902362">hash</span><span class="op" id="2902366">*</span><span class="ident" id="2902367">primeRK</span>&nbsp;<span class="op" id="2902375">+</span>&nbsp;<span class="builtintype" id="2902377">uint32</span><span class="op" id="2902383">(</span><span class="ident" id="2902384">sep</span><span class="op" id="2902387">[</span><span class="ident" id="2902388">i</span><span class="op" id="2902389">]</span><span class="op" id="2902390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902396">var</span>&nbsp;<span class="ident" id="2902400">pow</span><span class="op" id="2902403">,</span>&nbsp;<span class="ident" id="2902405">sq</span>&nbsp;<span class="builtintype" id="2902408">uint32</span>&nbsp;<span class="op" id="2902415">=</span>&nbsp;<span class="num" id="2902417">1</span><span class="op" id="2902418">,</span>&nbsp;<span class="ident" id="2902420">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902429">for</span>&nbsp;<span class="ident" id="2902433">i</span>&nbsp;<span class="op" id="2902435">:=</span>&nbsp;<span class="builtinfunc" id="2902438">len</span><span class="op" id="2902441">(</span><span class="ident" id="2902442">sep</span><span class="op" id="2902445">)</span><span class="op" id="2902446">;</span>&nbsp;<span class="ident" id="2902448">i</span>&nbsp;<span class="op" id="2902450">&gt;</span>&nbsp;<span class="num" id="2902452">0</span><span class="op" id="2902453">;</span>&nbsp;<span class="ident" id="2902455">i</span>&nbsp;<span class="op" id="2902457">&gt;&gt;=</span>&nbsp;<span class="num" id="2902461">1</span>&nbsp;<span class="op" id="2902463">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902467">if</span>&nbsp;<span class="ident" id="2902470">i</span><span class="op" id="2902471">&amp;</span><span class="num" id="2902472">1</span>&nbsp;<span class="op" id="2902474">!=</span>&nbsp;<span class="num" id="2902477">0</span>&nbsp;<span class="op" id="2902479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902484">pow</span>&nbsp;<span class="op" id="2902488">*=</span>&nbsp;<span class="ident" id="2902491">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902500">sq</span>&nbsp;<span class="op" id="2902503">*=</span>&nbsp;<span class="ident" id="2902506">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902510">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902513">return</span>&nbsp;<span class="ident" id="2902520">hash</span><span class="op" id="2902524">,</span>&nbsp;<span class="ident" id="2902526">pow</span><br>
<span class="lineno"></span><span class="op" id="2902530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902533">//&nbsp;hashStrRev&nbsp;returns&nbsp;the&nbsp;hash&nbsp;of&nbsp;the&nbsp;reverse&nbsp;of&nbsp;sep&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2902594">//&nbsp;appropriate&nbsp;multiplicative&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno">65</span><span class="keyword" id="2902664">func</span>&nbsp;<span class="ident" id="2902669">hashStrRev</span><span class="op" id="2902679">(</span><span class="ident" id="2902680">sep</span>&nbsp;<span class="builtintype" id="2902684">string</span><span class="op" id="2902690">)</span>&nbsp;<span class="op" id="2902692">(</span><span class="builtintype" id="2902693">uint32</span><span class="op" id="2902699">,</span>&nbsp;<span class="builtintype" id="2902701">uint32</span><span class="op" id="2902707">)</span>&nbsp;<span class="op" id="2902709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902712">hash</span>&nbsp;<span class="op" id="2902717">:=</span>&nbsp;<span class="builtintype" id="2902720">uint32</span><span class="op" id="2902726">(</span><span class="num" id="2902727">0</span><span class="op" id="2902728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902731">for</span>&nbsp;<span class="ident" id="2902735">i</span>&nbsp;<span class="op" id="2902737">:=</span>&nbsp;<span class="builtinfunc" id="2902740">len</span><span class="op" id="2902743">(</span><span class="ident" id="2902744">sep</span><span class="op" id="2902747">)</span>&nbsp;<span class="op" id="2902749">-</span>&nbsp;<span class="num" id="2902751">1</span><span class="op" id="2902752">;</span>&nbsp;<span class="ident" id="2902754">i</span>&nbsp;<span class="op" id="2902756">&gt;=</span>&nbsp;<span class="num" id="2902759">0</span><span class="op" id="2902760">;</span>&nbsp;<span class="ident" id="2902762">i</span><span class="op" id="2902763">--</span>&nbsp;<span class="op" id="2902766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902770">hash</span>&nbsp;<span class="op" id="2902775">=</span>&nbsp;<span class="ident" id="2902777">hash</span><span class="op" id="2902781">*</span><span class="ident" id="2902782">primeRK</span>&nbsp;<span class="op" id="2902790">+</span>&nbsp;<span class="builtintype" id="2902792">uint32</span><span class="op" id="2902798">(</span><span class="ident" id="2902799">sep</span><span class="op" id="2902802">[</span><span class="ident" id="2902803">i</span><span class="op" id="2902804">]</span><span class="op" id="2902805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902808">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902811">var</span>&nbsp;<span class="ident" id="2902815">pow</span><span class="op" id="2902818">,</span>&nbsp;<span class="ident" id="2902820">sq</span>&nbsp;<span class="builtintype" id="2902823">uint32</span>&nbsp;<span class="op" id="2902830">=</span>&nbsp;<span class="num" id="2902832">1</span><span class="op" id="2902833">,</span>&nbsp;<span class="ident" id="2902835">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902844">for</span>&nbsp;<span class="ident" id="2902848">i</span>&nbsp;<span class="op" id="2902850">:=</span>&nbsp;<span class="builtinfunc" id="2902853">len</span><span class="op" id="2902856">(</span><span class="ident" id="2902857">sep</span><span class="op" id="2902860">)</span><span class="op" id="2902861">;</span>&nbsp;<span class="ident" id="2902863">i</span>&nbsp;<span class="op" id="2902865">&gt;</span>&nbsp;<span class="num" id="2902867">0</span><span class="op" id="2902868">;</span>&nbsp;<span class="ident" id="2902870">i</span>&nbsp;<span class="op" id="2902872">&gt;&gt;=</span>&nbsp;<span class="num" id="2902876">1</span>&nbsp;<span class="op" id="2902878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902882">if</span>&nbsp;<span class="ident" id="2902885">i</span><span class="op" id="2902886">&amp;</span><span class="num" id="2902887">1</span>&nbsp;<span class="op" id="2902889">!=</span>&nbsp;<span class="num" id="2902892">0</span>&nbsp;<span class="op" id="2902894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902899">pow</span>&nbsp;<span class="op" id="2902903">*=</span>&nbsp;<span class="ident" id="2902906">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902911">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902915">sq</span>&nbsp;<span class="op" id="2902918">*=</span>&nbsp;<span class="ident" id="2902921">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902928">return</span>&nbsp;<span class="ident" id="2902935">hash</span><span class="op" id="2902939">,</span>&nbsp;<span class="ident" id="2902941">pow</span><br>
<span class="lineno"></span><span class="op" id="2902945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2902948">//&nbsp;Count&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;sep&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2903017">func</span>&nbsp;<span class="ident" id="2903022">Count</span><span class="op" id="2903027">(</span><span class="ident" id="2903028">s</span><span class="op" id="2903029">,</span>&nbsp;<span class="ident" id="2903031">sep</span>&nbsp;<span class="builtintype" id="2903035">string</span><span class="op" id="2903041">)</span>&nbsp;<span class="builtintype" id="2903043">int</span>&nbsp;<span class="op" id="2903047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903050">n</span>&nbsp;<span class="op" id="2903052">:=</span>&nbsp;<span class="num" id="2903055">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903058">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903076">switch</span>&nbsp;<span class="op" id="2903083">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903086">case</span>&nbsp;<span class="builtinfunc" id="2903091">len</span><span class="op" id="2903094">(</span><span class="ident" id="2903095">sep</span><span class="op" id="2903098">)</span>&nbsp;<span class="op" id="2903100">==</span>&nbsp;<span class="num" id="2903103">0</span><span class="op" id="2903104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903108">return</span>&nbsp;<span class="ident" id="2903115">utf8</span><span class="op" id="2903119">.</span><span class="ident" id="2903120">RuneCountInString</span><span class="op" id="2903137">(</span><span class="ident" id="2903138">s</span><span class="op" id="2903139">)</span>&nbsp;<span class="op" id="2903141">+</span>&nbsp;<span class="num" id="2903143">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903146">case</span>&nbsp;<span class="builtinfunc" id="2903151">len</span><span class="op" id="2903154">(</span><span class="ident" id="2903155">sep</span><span class="op" id="2903158">)</span>&nbsp;<span class="op" id="2903160">==</span>&nbsp;<span class="num" id="2903163">1</span><span class="op" id="2903164">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903168">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903204">c</span>&nbsp;<span class="op" id="2903206">:=</span>&nbsp;<span class="ident" id="2903209">sep</span><span class="op" id="2903212">[</span><span class="num" id="2903213">0</span><span class="op" id="2903214">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903218">for</span>&nbsp;<span class="ident" id="2903222">i</span>&nbsp;<span class="op" id="2903224">:=</span>&nbsp;<span class="num" id="2903227">0</span><span class="op" id="2903228">;</span>&nbsp;<span class="ident" id="2903230">i</span>&nbsp;<span class="op" id="2903232">&lt;</span>&nbsp;<span class="builtinfunc" id="2903234">len</span><span class="op" id="2903237">(</span><span class="ident" id="2903238">s</span><span class="op" id="2903239">)</span><span class="op" id="2903240">;</span>&nbsp;<span class="ident" id="2903242">i</span><span class="op" id="2903243">++</span>&nbsp;<span class="op" id="2903246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903251">if</span>&nbsp;<span class="ident" id="2903254">s</span><span class="op" id="2903255">[</span><span class="ident" id="2903256">i</span><span class="op" id="2903257">]</span>&nbsp;<span class="op" id="2903259">==</span>&nbsp;<span class="ident" id="2903262">c</span>&nbsp;<span class="op" id="2903264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903270">n</span><span class="op" id="2903271">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903281">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903285">return</span>&nbsp;<span class="ident" id="2903292">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903295">case</span>&nbsp;<span class="builtinfunc" id="2903300">len</span><span class="op" id="2903303">(</span><span class="ident" id="2903304">sep</span><span class="op" id="2903307">)</span>&nbsp;<span class="op" id="2903309">&gt;</span>&nbsp;<span class="builtinfunc" id="2903311">len</span><span class="op" id="2903314">(</span><span class="ident" id="2903315">s</span><span class="op" id="2903316">)</span><span class="op" id="2903317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903321">return</span>&nbsp;<span class="num" id="2903328">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903331">case</span>&nbsp;<span class="builtinfunc" id="2903336">len</span><span class="op" id="2903339">(</span><span class="ident" id="2903340">sep</span><span class="op" id="2903343">)</span>&nbsp;<span class="op" id="2903345">==</span>&nbsp;<span class="builtinfunc" id="2903348">len</span><span class="op" id="2903351">(</span><span class="ident" id="2903352">s</span><span class="op" id="2903353">)</span><span class="op" id="2903354">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903358">if</span>&nbsp;<span class="ident" id="2903361">sep</span>&nbsp;<span class="op" id="2903365">==</span>&nbsp;<span class="ident" id="2903368">s</span>&nbsp;<span class="op" id="2903370">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903375">return</span>&nbsp;<span class="num" id="2903382">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903390">return</span>&nbsp;<span class="num" id="2903397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903403">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903425">hashsep</span><span class="op" id="2903432">,</span>&nbsp;<span class="ident" id="2903434">pow</span>&nbsp;<span class="op" id="2903438">:=</span>&nbsp;<span class="ident" id="2903441">hashStr</span><span class="op" id="2903448">(</span><span class="ident" id="2903449">sep</span><span class="op" id="2903452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903455">h</span>&nbsp;<span class="op" id="2903457">:=</span>&nbsp;<span class="builtintype" id="2903460">uint32</span><span class="op" id="2903466">(</span><span class="num" id="2903467">0</span><span class="op" id="2903468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903471">for</span>&nbsp;<span class="ident" id="2903475">i</span>&nbsp;<span class="op" id="2903477">:=</span>&nbsp;<span class="num" id="2903480">0</span><span class="op" id="2903481">;</span>&nbsp;<span class="ident" id="2903483">i</span>&nbsp;<span class="op" id="2903485">&lt;</span>&nbsp;<span class="builtinfunc" id="2903487">len</span><span class="op" id="2903490">(</span><span class="ident" id="2903491">sep</span><span class="op" id="2903494">)</span><span class="op" id="2903495">;</span>&nbsp;<span class="ident" id="2903497">i</span><span class="op" id="2903498">++</span>&nbsp;<span class="op" id="2903501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903505">h</span>&nbsp;<span class="op" id="2903507">=</span>&nbsp;<span class="ident" id="2903509">h</span><span class="op" id="2903510">*</span><span class="ident" id="2903511">primeRK</span>&nbsp;<span class="op" id="2903519">+</span>&nbsp;<span class="builtintype" id="2903521">uint32</span><span class="op" id="2903527">(</span><span class="ident" id="2903528">s</span><span class="op" id="2903529">[</span><span class="ident" id="2903530">i</span><span class="op" id="2903531">]</span><span class="op" id="2903532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903535">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903538">lastmatch</span>&nbsp;<span class="op" id="2903548">:=</span>&nbsp;<span class="num" id="2903551">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903554">if</span>&nbsp;<span class="ident" id="2903557">h</span>&nbsp;<span class="op" id="2903559">==</span>&nbsp;<span class="ident" id="2903562">hashsep</span>&nbsp;<span class="op" id="2903570">&amp;&amp;</span>&nbsp;<span class="ident" id="2903573">s</span><span class="op" id="2903574">[</span><span class="op" id="2903575">:</span><span class="builtinfunc" id="2903576">len</span><span class="op" id="2903579">(</span><span class="ident" id="2903580">sep</span><span class="op" id="2903583">)</span><span class="op" id="2903584">]</span>&nbsp;<span class="op" id="2903586">==</span>&nbsp;<span class="ident" id="2903589">sep</span>&nbsp;<span class="op" id="2903593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903597">n</span><span class="op" id="2903598">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903603">lastmatch</span>&nbsp;<span class="op" id="2903613">=</span>&nbsp;<span class="builtinfunc" id="2903615">len</span><span class="op" id="2903618">(</span><span class="ident" id="2903619">sep</span><span class="op" id="2903622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903625">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903628">for</span>&nbsp;<span class="ident" id="2903632">i</span>&nbsp;<span class="op" id="2903634">:=</span>&nbsp;<span class="builtinfunc" id="2903637">len</span><span class="op" id="2903640">(</span><span class="ident" id="2903641">sep</span><span class="op" id="2903644">)</span><span class="op" id="2903645">;</span>&nbsp;<span class="ident" id="2903647">i</span>&nbsp;<span class="op" id="2903649">&lt;</span>&nbsp;<span class="builtinfunc" id="2903651">len</span><span class="op" id="2903654">(</span><span class="ident" id="2903655">s</span><span class="op" id="2903656">)</span><span class="op" id="2903657">;</span>&nbsp;<span class="op" id="2903659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903663">h</span>&nbsp;<span class="op" id="2903665">*=</span>&nbsp;<span class="ident" id="2903668">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903678">h</span>&nbsp;<span class="op" id="2903680">+=</span>&nbsp;<span class="builtintype" id="2903683">uint32</span><span class="op" id="2903689">(</span><span class="ident" id="2903690">s</span><span class="op" id="2903691">[</span><span class="ident" id="2903692">i</span><span class="op" id="2903693">]</span><span class="op" id="2903694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903698">h</span>&nbsp;<span class="op" id="2903700">-=</span>&nbsp;<span class="ident" id="2903703">pow</span>&nbsp;<span class="op" id="2903707">*</span>&nbsp;<span class="builtintype" id="2903709">uint32</span><span class="op" id="2903715">(</span><span class="ident" id="2903716">s</span><span class="op" id="2903717">[</span><span class="ident" id="2903718">i</span><span class="op" id="2903719">-</span><span class="builtinfunc" id="2903720">len</span><span class="op" id="2903723">(</span><span class="ident" id="2903724">sep</span><span class="op" id="2903727">)</span><span class="op" id="2903728">]</span><span class="op" id="2903729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903733">i</span><span class="op" id="2903734">++</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903739">if</span>&nbsp;<span class="ident" id="2903742">h</span>&nbsp;<span class="op" id="2903744">==</span>&nbsp;<span class="ident" id="2903747">hashsep</span>&nbsp;<span class="op" id="2903755">&amp;&amp;</span>&nbsp;<span class="ident" id="2903758">lastmatch</span>&nbsp;<span class="op" id="2903768">&lt;=</span>&nbsp;<span class="ident" id="2903771">i</span><span class="op" id="2903772">-</span><span class="builtinfunc" id="2903773">len</span><span class="op" id="2903776">(</span><span class="ident" id="2903777">sep</span><span class="op" id="2903780">)</span>&nbsp;<span class="op" id="2903782">&amp;&amp;</span>&nbsp;<span class="ident" id="2903785">s</span><span class="op" id="2903786">[</span><span class="ident" id="2903787">i</span><span class="op" id="2903788">-</span><span class="builtinfunc" id="2903789">len</span><span class="op" id="2903792">(</span><span class="ident" id="2903793">sep</span><span class="op" id="2903796">)</span><span class="op" id="2903797">:</span><span class="ident" id="2903798">i</span><span class="op" id="2903799">]</span>&nbsp;<span class="op" id="2903801">==</span>&nbsp;<span class="ident" id="2903804">sep</span>&nbsp;<span class="op" id="2903808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903813">n</span><span class="op" id="2903814">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903820">lastmatch</span>&nbsp;<span class="op" id="2903830">=</span>&nbsp;<span class="ident" id="2903832">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903839">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903842">return</span>&nbsp;<span class="ident" id="2903849">n</span><br>
<span class="lineno"></span><span class="op" id="2903851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903854">//&nbsp;Contains&nbsp;returns&nbsp;true&nbsp;if&nbsp;substr&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2903902">func</span>&nbsp;<span class="ident" id="2903907">Contains</span><span class="op" id="2903915">(</span><span class="ident" id="2903916">s</span><span class="op" id="2903917">,</span>&nbsp;<span class="ident" id="2903919">substr</span>&nbsp;<span class="builtintype" id="2903926">string</span><span class="op" id="2903932">)</span>&nbsp;<span class="builtintype" id="2903934">bool</span>&nbsp;<span class="op" id="2903939">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903942">return</span>&nbsp;<span class="ident" id="2903949">Index</span><span class="op" id="2903954">(</span><span class="ident" id="2903955">s</span><span class="op" id="2903956">,</span>&nbsp;<span class="ident" id="2903958">substr</span><span class="op" id="2903964">)</span>&nbsp;<span class="op" id="2903966">&gt;=</span>&nbsp;<span class="num" id="2903969">0</span><br>
<span class="lineno"></span><span class="op" id="2903971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903974">//&nbsp;ContainsAny&nbsp;returns&nbsp;true&nbsp;if&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;in&nbsp;chars&nbsp;are&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2904052">func</span>&nbsp;<span class="ident" id="2904057">ContainsAny</span><span class="op" id="2904068">(</span><span class="ident" id="2904069">s</span><span class="op" id="2904070">,</span>&nbsp;<span class="ident" id="2904072">chars</span>&nbsp;<span class="builtintype" id="2904078">string</span><span class="op" id="2904084">)</span>&nbsp;<span class="builtintype" id="2904086">bool</span>&nbsp;<span class="op" id="2904091">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904094">return</span>&nbsp;<span class="ident" id="2904101">IndexAny</span><span class="op" id="2904109">(</span><span class="ident" id="2904110">s</span><span class="op" id="2904111">,</span>&nbsp;<span class="ident" id="2904113">chars</span><span class="op" id="2904118">)</span>&nbsp;<span class="op" id="2904120">&gt;=</span>&nbsp;<span class="num" id="2904123">0</span><br>
<span class="lineno"></span><span class="op" id="2904125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904128">//&nbsp;ContainsRune&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2904198">func</span>&nbsp;<span class="ident" id="2904203">ContainsRune</span><span class="op" id="2904215">(</span><span class="ident" id="2904216">s</span>&nbsp;<span class="builtintype" id="2904218">string</span><span class="op" id="2904224">,</span>&nbsp;<span class="ident" id="2904226">r</span>&nbsp;<span class="builtintype" id="2904228">rune</span><span class="op" id="2904232">)</span>&nbsp;<span class="builtintype" id="2904234">bool</span>&nbsp;<span class="op" id="2904239">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904242">return</span>&nbsp;<span class="ident" id="2904249">IndexRune</span><span class="op" id="2904258">(</span><span class="ident" id="2904259">s</span><span class="op" id="2904260">,</span>&nbsp;<span class="ident" id="2904262">r</span><span class="op" id="2904263">)</span>&nbsp;<span class="op" id="2904265">&gt;=</span>&nbsp;<span class="num" id="2904268">0</span><br>
<span class="lineno"></span><span class="op" id="2904270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904273">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2904369">func</span>&nbsp;<span class="ident" id="2904374">Index</span><span class="op" id="2904379">(</span><span class="ident" id="2904380">s</span><span class="op" id="2904381">,</span>&nbsp;<span class="ident" id="2904383">sep</span>&nbsp;<span class="builtintype" id="2904387">string</span><span class="op" id="2904393">)</span>&nbsp;<span class="builtintype" id="2904395">int</span>&nbsp;<span class="op" id="2904399">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904402">n</span>&nbsp;<span class="op" id="2904404">:=</span>&nbsp;<span class="builtinfunc" id="2904407">len</span><span class="op" id="2904410">(</span><span class="ident" id="2904411">sep</span><span class="op" id="2904414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904417">switch</span>&nbsp;<span class="op" id="2904424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904427">case</span>&nbsp;<span class="ident" id="2904432">n</span>&nbsp;<span class="op" id="2904434">==</span>&nbsp;<span class="num" id="2904437">0</span><span class="op" id="2904438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904442">return</span>&nbsp;<span class="num" id="2904449">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904452">case</span>&nbsp;<span class="ident" id="2904457">n</span>&nbsp;<span class="op" id="2904459">==</span>&nbsp;<span class="num" id="2904462">1</span><span class="op" id="2904463">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904467">return</span>&nbsp;<span class="ident" id="2904474">IndexByte</span><span class="op" id="2904483">(</span><span class="ident" id="2904484">s</span><span class="op" id="2904485">,</span>&nbsp;<span class="ident" id="2904487">sep</span><span class="op" id="2904490">[</span><span class="num" id="2904491">0</span><span class="op" id="2904492">]</span><span class="op" id="2904493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904496">case</span>&nbsp;<span class="ident" id="2904501">n</span>&nbsp;<span class="op" id="2904503">==</span>&nbsp;<span class="builtinfunc" id="2904506">len</span><span class="op" id="2904509">(</span><span class="ident" id="2904510">s</span><span class="op" id="2904511">)</span><span class="op" id="2904512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904516">if</span>&nbsp;<span class="ident" id="2904519">sep</span>&nbsp;<span class="op" id="2904523">==</span>&nbsp;<span class="ident" id="2904526">s</span>&nbsp;<span class="op" id="2904528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904533">return</span>&nbsp;<span class="num" id="2904540">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904544">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904548">return</span>&nbsp;<span class="op" id="2904555">-</span><span class="num" id="2904556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904559">case</span>&nbsp;<span class="ident" id="2904564">n</span>&nbsp;<span class="op" id="2904566">&gt;</span>&nbsp;<span class="builtinfunc" id="2904568">len</span><span class="op" id="2904571">(</span><span class="ident" id="2904572">s</span><span class="op" id="2904573">)</span><span class="op" id="2904574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904578">return</span>&nbsp;<span class="op" id="2904585">-</span><span class="num" id="2904586">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904592">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904614">hashsep</span><span class="op" id="2904621">,</span>&nbsp;<span class="ident" id="2904623">pow</span>&nbsp;<span class="op" id="2904627">:=</span>&nbsp;<span class="ident" id="2904630">hashStr</span><span class="op" id="2904637">(</span><span class="ident" id="2904638">sep</span><span class="op" id="2904641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904644">var</span>&nbsp;<span class="ident" id="2904648">h</span>&nbsp;<span class="builtintype" id="2904650">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904658">for</span>&nbsp;<span class="ident" id="2904662">i</span>&nbsp;<span class="op" id="2904664">:=</span>&nbsp;<span class="num" id="2904667">0</span><span class="op" id="2904668">;</span>&nbsp;<span class="ident" id="2904670">i</span>&nbsp;<span class="op" id="2904672">&lt;</span>&nbsp;<span class="ident" id="2904674">n</span><span class="op" id="2904675">;</span>&nbsp;<span class="ident" id="2904677">i</span><span class="op" id="2904678">++</span>&nbsp;<span class="op" id="2904681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904685">h</span>&nbsp;<span class="op" id="2904687">=</span>&nbsp;<span class="ident" id="2904689">h</span><span class="op" id="2904690">*</span><span class="ident" id="2904691">primeRK</span>&nbsp;<span class="op" id="2904699">+</span>&nbsp;<span class="builtintype" id="2904701">uint32</span><span class="op" id="2904707">(</span><span class="ident" id="2904708">s</span><span class="op" id="2904709">[</span><span class="ident" id="2904710">i</span><span class="op" id="2904711">]</span><span class="op" id="2904712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904715">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904718">if</span>&nbsp;<span class="ident" id="2904721">h</span>&nbsp;<span class="op" id="2904723">==</span>&nbsp;<span class="ident" id="2904726">hashsep</span>&nbsp;<span class="op" id="2904734">&amp;&amp;</span>&nbsp;<span class="ident" id="2904737">s</span><span class="op" id="2904738">[</span><span class="op" id="2904739">:</span><span class="ident" id="2904740">n</span><span class="op" id="2904741">]</span>&nbsp;<span class="op" id="2904743">==</span>&nbsp;<span class="ident" id="2904746">sep</span>&nbsp;<span class="op" id="2904750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904754">return</span>&nbsp;<span class="num" id="2904761">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904767">for</span>&nbsp;<span class="ident" id="2904771">i</span>&nbsp;<span class="op" id="2904773">:=</span>&nbsp;<span class="ident" id="2904776">n</span><span class="op" id="2904777">;</span>&nbsp;<span class="ident" id="2904779">i</span>&nbsp;<span class="op" id="2904781">&lt;</span>&nbsp;<span class="builtinfunc" id="2904783">len</span><span class="op" id="2904786">(</span><span class="ident" id="2904787">s</span><span class="op" id="2904788">)</span><span class="op" id="2904789">;</span>&nbsp;<span class="op" id="2904791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904795">h</span>&nbsp;<span class="op" id="2904797">*=</span>&nbsp;<span class="ident" id="2904800">primeRK</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904810">h</span>&nbsp;<span class="op" id="2904812">+=</span>&nbsp;<span class="builtintype" id="2904815">uint32</span><span class="op" id="2904821">(</span><span class="ident" id="2904822">s</span><span class="op" id="2904823">[</span><span class="ident" id="2904824">i</span><span class="op" id="2904825">]</span><span class="op" id="2904826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904830">h</span>&nbsp;<span class="op" id="2904832">-=</span>&nbsp;<span class="ident" id="2904835">pow</span>&nbsp;<span class="op" id="2904839">*</span>&nbsp;<span class="builtintype" id="2904841">uint32</span><span class="op" id="2904847">(</span><span class="ident" id="2904848">s</span><span class="op" id="2904849">[</span><span class="ident" id="2904850">i</span><span class="op" id="2904851">-</span><span class="ident" id="2904852">n</span><span class="op" id="2904853">]</span><span class="op" id="2904854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904858">i</span><span class="op" id="2904859">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904864">if</span>&nbsp;<span class="ident" id="2904867">h</span>&nbsp;<span class="op" id="2904869">==</span>&nbsp;<span class="ident" id="2904872">hashsep</span>&nbsp;<span class="op" id="2904880">&amp;&amp;</span>&nbsp;<span class="ident" id="2904883">s</span><span class="op" id="2904884">[</span><span class="ident" id="2904885">i</span><span class="op" id="2904886">-</span><span class="ident" id="2904887">n</span><span class="op" id="2904888">:</span><span class="ident" id="2904889">i</span><span class="op" id="2904890">]</span>&nbsp;<span class="op" id="2904892">==</span>&nbsp;<span class="ident" id="2904895">sep</span>&nbsp;<span class="op" id="2904899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904904">return</span>&nbsp;<span class="ident" id="2904911">i</span>&nbsp;<span class="op" id="2904913">-</span>&nbsp;<span class="ident" id="2904915">n</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904925">return</span>&nbsp;<span class="op" id="2904932">-</span><span class="num" id="2904933">1</span><br>
<span class="lineno"></span><span class="op" id="2904935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2904938">//&nbsp;LastIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2905037">func</span>&nbsp;<span class="ident" id="2905042">LastIndex</span><span class="op" id="2905051">(</span><span class="ident" id="2905052">s</span><span class="op" id="2905053">,</span>&nbsp;<span class="ident" id="2905055">sep</span>&nbsp;<span class="builtintype" id="2905059">string</span><span class="op" id="2905065">)</span>&nbsp;<span class="builtintype" id="2905067">int</span>&nbsp;<span class="op" id="2905071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905074">n</span>&nbsp;<span class="op" id="2905076">:=</span>&nbsp;<span class="builtinfunc" id="2905079">len</span><span class="op" id="2905082">(</span><span class="ident" id="2905083">sep</span><span class="op" id="2905086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905089">switch</span>&nbsp;<span class="op" id="2905096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905099">case</span>&nbsp;<span class="ident" id="2905104">n</span>&nbsp;<span class="op" id="2905106">==</span>&nbsp;<span class="num" id="2905109">0</span><span class="op" id="2905110">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905114">return</span>&nbsp;<span class="builtinfunc" id="2905121">len</span><span class="op" id="2905124">(</span><span class="ident" id="2905125">s</span><span class="op" id="2905126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905129">case</span>&nbsp;<span class="ident" id="2905134">n</span>&nbsp;<span class="op" id="2905136">==</span>&nbsp;<span class="num" id="2905139">1</span><span class="op" id="2905140">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905144">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905180">c</span>&nbsp;<span class="op" id="2905182">:=</span>&nbsp;<span class="ident" id="2905185">sep</span><span class="op" id="2905188">[</span><span class="num" id="2905189">0</span><span class="op" id="2905190">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905194">for</span>&nbsp;<span class="ident" id="2905198">i</span>&nbsp;<span class="op" id="2905200">:=</span>&nbsp;<span class="builtinfunc" id="2905203">len</span><span class="op" id="2905206">(</span><span class="ident" id="2905207">s</span><span class="op" id="2905208">)</span>&nbsp;<span class="op" id="2905210">-</span>&nbsp;<span class="num" id="2905212">1</span><span class="op" id="2905213">;</span>&nbsp;<span class="ident" id="2905215">i</span>&nbsp;<span class="op" id="2905217">&gt;=</span>&nbsp;<span class="num" id="2905220">0</span><span class="op" id="2905221">;</span>&nbsp;<span class="ident" id="2905223">i</span><span class="op" id="2905224">--</span>&nbsp;<span class="op" id="2905227">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905232">if</span>&nbsp;<span class="ident" id="2905235">s</span><span class="op" id="2905236">[</span><span class="ident" id="2905237">i</span><span class="op" id="2905238">]</span>&nbsp;<span class="op" id="2905240">==</span>&nbsp;<span class="ident" id="2905243">c</span>&nbsp;<span class="op" id="2905245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905251">return</span>&nbsp;<span class="ident" id="2905258">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905271">return</span>&nbsp;<span class="op" id="2905278">-</span><span class="num" id="2905279">1</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905282">case</span>&nbsp;<span class="ident" id="2905287">n</span>&nbsp;<span class="op" id="2905289">==</span>&nbsp;<span class="builtinfunc" id="2905292">len</span><span class="op" id="2905295">(</span><span class="ident" id="2905296">s</span><span class="op" id="2905297">)</span><span class="op" id="2905298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905302">if</span>&nbsp;<span class="ident" id="2905305">sep</span>&nbsp;<span class="op" id="2905309">==</span>&nbsp;<span class="ident" id="2905312">s</span>&nbsp;<span class="op" id="2905314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905319">return</span>&nbsp;<span class="num" id="2905326">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905334">return</span>&nbsp;<span class="op" id="2905341">-</span><span class="num" id="2905342">1</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905345">case</span>&nbsp;<span class="ident" id="2905350">n</span>&nbsp;<span class="op" id="2905352">&gt;</span>&nbsp;<span class="builtinfunc" id="2905354">len</span><span class="op" id="2905357">(</span><span class="ident" id="2905358">s</span><span class="op" id="2905359">)</span><span class="op" id="2905360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905364">return</span>&nbsp;<span class="op" id="2905371">-</span><span class="num" id="2905372">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905378">//&nbsp;Rabin-Karp&nbsp;search&nbsp;from&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905427">hashsep</span><span class="op" id="2905434">,</span>&nbsp;<span class="ident" id="2905436">pow</span>&nbsp;<span class="op" id="2905440">:=</span>&nbsp;<span class="ident" id="2905443">hashStrRev</span><span class="op" id="2905453">(</span><span class="ident" id="2905454">sep</span><span class="op" id="2905457">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905460">last</span>&nbsp;<span class="op" id="2905465">:=</span>&nbsp;<span class="builtinfunc" id="2905468">len</span><span class="op" id="2905471">(</span><span class="ident" id="2905472">s</span><span class="op" id="2905473">)</span>&nbsp;<span class="op" id="2905475">-</span>&nbsp;<span class="ident" id="2905477">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905480">var</span>&nbsp;<span class="ident" id="2905484">h</span>&nbsp;<span class="builtintype" id="2905486">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905494">for</span>&nbsp;<span class="ident" id="2905498">i</span>&nbsp;<span class="op" id="2905500">:=</span>&nbsp;<span class="builtinfunc" id="2905503">len</span><span class="op" id="2905506">(</span><span class="ident" id="2905507">s</span><span class="op" id="2905508">)</span>&nbsp;<span class="op" id="2905510">-</span>&nbsp;<span class="num" id="2905512">1</span><span class="op" id="2905513">;</span>&nbsp;<span class="ident" id="2905515">i</span>&nbsp;<span class="op" id="2905517">&gt;=</span>&nbsp;<span class="ident" id="2905520">last</span><span class="op" id="2905524">;</span>&nbsp;<span class="ident" id="2905526">i</span><span class="op" id="2905527">--</span>&nbsp;<span class="op" id="2905530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905534">h</span>&nbsp;<span class="op" id="2905536">=</span>&nbsp;<span class="ident" id="2905538">h</span><span class="op" id="2905539">*</span><span class="ident" id="2905540">primeRK</span>&nbsp;<span class="op" id="2905548">+</span>&nbsp;<span class="builtintype" id="2905550">uint32</span><span class="op" id="2905556">(</span><span class="ident" id="2905557">s</span><span class="op" id="2905558">[</span><span class="ident" id="2905559">i</span><span class="op" id="2905560">]</span><span class="op" id="2905561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905564">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905567">if</span>&nbsp;<span class="ident" id="2905570">h</span>&nbsp;<span class="op" id="2905572">==</span>&nbsp;<span class="ident" id="2905575">hashsep</span>&nbsp;<span class="op" id="2905583">&amp;&amp;</span>&nbsp;<span class="ident" id="2905586">s</span><span class="op" id="2905587">[</span><span class="ident" id="2905588">last</span><span class="op" id="2905592">:</span><span class="op" id="2905593">]</span>&nbsp;<span class="op" id="2905595">==</span>&nbsp;<span class="ident" id="2905598">sep</span>&nbsp;<span class="op" id="2905602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905606">return</span>&nbsp;<span class="ident" id="2905613">last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905622">for</span>&nbsp;<span class="ident" id="2905626">i</span>&nbsp;<span class="op" id="2905628">:=</span>&nbsp;<span class="ident" id="2905631">last</span>&nbsp;<span class="op" id="2905636">-</span>&nbsp;<span class="num" id="2905638">1</span><span class="op" id="2905639">;</span>&nbsp;<span class="ident" id="2905641">i</span>&nbsp;<span class="op" id="2905643">&gt;=</span>&nbsp;<span class="num" id="2905646">0</span><span class="op" id="2905647">;</span>&nbsp;<span class="ident" id="2905649">i</span><span class="op" id="2905650">--</span>&nbsp;<span class="op" id="2905653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905657">h</span>&nbsp;<span class="op" id="2905659">*=</span>&nbsp;<span class="ident" id="2905662">primeRK</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905672">h</span>&nbsp;<span class="op" id="2905674">+=</span>&nbsp;<span class="builtintype" id="2905677">uint32</span><span class="op" id="2905683">(</span><span class="ident" id="2905684">s</span><span class="op" id="2905685">[</span><span class="ident" id="2905686">i</span><span class="op" id="2905687">]</span><span class="op" id="2905688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905692">h</span>&nbsp;<span class="op" id="2905694">-=</span>&nbsp;<span class="ident" id="2905697">pow</span>&nbsp;<span class="op" id="2905701">*</span>&nbsp;<span class="builtintype" id="2905703">uint32</span><span class="op" id="2905709">(</span><span class="ident" id="2905710">s</span><span class="op" id="2905711">[</span><span class="ident" id="2905712">i</span><span class="op" id="2905713">+</span><span class="ident" id="2905714">n</span><span class="op" id="2905715">]</span><span class="op" id="2905716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905720">if</span>&nbsp;<span class="ident" id="2905723">h</span>&nbsp;<span class="op" id="2905725">==</span>&nbsp;<span class="ident" id="2905728">hashsep</span>&nbsp;<span class="op" id="2905736">&amp;&amp;</span>&nbsp;<span class="ident" id="2905739">s</span><span class="op" id="2905740">[</span><span class="ident" id="2905741">i</span><span class="op" id="2905742">:</span><span class="ident" id="2905743">i</span><span class="op" id="2905744">+</span><span class="ident" id="2905745">n</span><span class="op" id="2905746">]</span>&nbsp;<span class="op" id="2905748">==</span>&nbsp;<span class="ident" id="2905751">sep</span>&nbsp;<span class="op" id="2905755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905760">return</span>&nbsp;<span class="ident" id="2905767">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905771">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905777">return</span>&nbsp;<span class="op" id="2905784">-</span><span class="num" id="2905785">1</span><br>
<span class="lineno"></span><span class="op" id="2905787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905790">//&nbsp;IndexRune&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno">225</span><span class="comment" id="2905869">//&nbsp;r,&nbsp;or&nbsp;-1&nbsp;if&nbsp;rune&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2905910">func</span>&nbsp;<span class="ident" id="2905915">IndexRune</span><span class="op" id="2905924">(</span><span class="ident" id="2905925">s</span>&nbsp;<span class="builtintype" id="2905927">string</span><span class="op" id="2905933">,</span>&nbsp;<span class="ident" id="2905935">r</span>&nbsp;<span class="builtintype" id="2905937">rune</span><span class="op" id="2905941">)</span>&nbsp;<span class="builtintype" id="2905943">int</span>&nbsp;<span class="op" id="2905947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905950">switch</span>&nbsp;<span class="op" id="2905957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905960">case</span>&nbsp;<span class="ident" id="2905965">r</span>&nbsp;<span class="op" id="2905967">&lt;</span>&nbsp;<span class="ident" id="2905969">utf8</span><span class="op" id="2905973">.</span><span class="ident" id="2905974">RuneSelf</span><span class="op" id="2905982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905986">return</span>&nbsp;<span class="ident" id="2905993">IndexByte</span><span class="op" id="2906002">(</span><span class="ident" id="2906003">s</span><span class="op" id="2906004">,</span>&nbsp;<span class="builtintype" id="2906006">byte</span><span class="op" id="2906010">(</span><span class="ident" id="2906011">r</span><span class="op" id="2906012">)</span><span class="op" id="2906013">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906016">default</span><span class="op" id="2906023">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906027">for</span>&nbsp;<span class="ident" id="2906031">i</span><span class="op" id="2906032">,</span>&nbsp;<span class="ident" id="2906034">c</span>&nbsp;<span class="op" id="2906036">:=</span>&nbsp;<span class="keyword" id="2906039">range</span>&nbsp;<span class="ident" id="2906045">s</span>&nbsp;<span class="op" id="2906047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906052">if</span>&nbsp;<span class="ident" id="2906055">c</span>&nbsp;<span class="op" id="2906057">==</span>&nbsp;<span class="ident" id="2906060">r</span>&nbsp;<span class="op" id="2906062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906068">return</span>&nbsp;<span class="ident" id="2906075">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906080">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906090">return</span>&nbsp;<span class="op" id="2906097">-</span><span class="num" id="2906098">1</span><br>
<span class="lineno"></span><span class="op" id="2906100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="comment" id="2906103">//&nbsp;IndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="2906181">//&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2906260">func</span>&nbsp;<span class="ident" id="2906265">IndexAny</span><span class="op" id="2906273">(</span><span class="ident" id="2906274">s</span><span class="op" id="2906275">,</span>&nbsp;<span class="ident" id="2906277">chars</span>&nbsp;<span class="builtintype" id="2906283">string</span><span class="op" id="2906289">)</span>&nbsp;<span class="builtintype" id="2906291">int</span>&nbsp;<span class="op" id="2906295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906298">if</span>&nbsp;<span class="builtinfunc" id="2906301">len</span><span class="op" id="2906304">(</span><span class="ident" id="2906305">chars</span><span class="op" id="2906310">)</span>&nbsp;<span class="op" id="2906312">&gt;</span>&nbsp;<span class="num" id="2906314">0</span>&nbsp;<span class="op" id="2906316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906320">for</span>&nbsp;<span class="ident" id="2906324">i</span><span class="op" id="2906325">,</span>&nbsp;<span class="ident" id="2906327">c</span>&nbsp;<span class="op" id="2906329">:=</span>&nbsp;<span class="keyword" id="2906332">range</span>&nbsp;<span class="ident" id="2906338">s</span>&nbsp;<span class="op" id="2906340">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906345">for</span>&nbsp;<span class="ident" id="2906349">_</span><span class="op" id="2906350">,</span>&nbsp;<span class="ident" id="2906352">m</span>&nbsp;<span class="op" id="2906354">:=</span>&nbsp;<span class="keyword" id="2906357">range</span>&nbsp;<span class="ident" id="2906363">chars</span>&nbsp;<span class="op" id="2906369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906375">if</span>&nbsp;<span class="ident" id="2906378">c</span>&nbsp;<span class="op" id="2906380">==</span>&nbsp;<span class="ident" id="2906383">m</span>&nbsp;<span class="op" id="2906385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906392">return</span>&nbsp;<span class="ident" id="2906399">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906410">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906420">return</span>&nbsp;<span class="op" id="2906427">-</span><span class="num" id="2906428">1</span><br>
<span class="lineno"></span><span class="op" id="2906430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="2906433">//&nbsp;LastIndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="2906508">//&nbsp;point&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2906579">//&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2906596">func</span>&nbsp;<span class="ident" id="2906601">LastIndexAny</span><span class="op" id="2906613">(</span><span class="ident" id="2906614">s</span><span class="op" id="2906615">,</span>&nbsp;<span class="ident" id="2906617">chars</span>&nbsp;<span class="builtintype" id="2906623">string</span><span class="op" id="2906629">)</span>&nbsp;<span class="builtintype" id="2906631">int</span>&nbsp;<span class="op" id="2906635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906638">if</span>&nbsp;<span class="builtinfunc" id="2906641">len</span><span class="op" id="2906644">(</span><span class="ident" id="2906645">chars</span><span class="op" id="2906650">)</span>&nbsp;<span class="op" id="2906652">&gt;</span>&nbsp;<span class="num" id="2906654">0</span>&nbsp;<span class="op" id="2906656">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906660">for</span>&nbsp;<span class="ident" id="2906664">i</span>&nbsp;<span class="op" id="2906666">:=</span>&nbsp;<span class="builtinfunc" id="2906669">len</span><span class="op" id="2906672">(</span><span class="ident" id="2906673">s</span><span class="op" id="2906674">)</span><span class="op" id="2906675">;</span>&nbsp;<span class="ident" id="2906677">i</span>&nbsp;<span class="op" id="2906679">&gt;</span>&nbsp;<span class="num" id="2906681">0</span><span class="op" id="2906682">;</span>&nbsp;<span class="op" id="2906684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2906689">rune</span><span class="op" id="2906693">,</span>&nbsp;<span class="ident" id="2906695">size</span>&nbsp;<span class="op" id="2906700">:=</span>&nbsp;<span class="ident" id="2906703">utf8</span><span class="op" id="2906707">.</span><span class="ident" id="2906708">DecodeLastRuneInString</span><span class="op" id="2906730">(</span><span class="ident" id="2906731">s</span><span class="op" id="2906732">[</span><span class="num" id="2906733">0</span><span class="op" id="2906734">:</span><span class="ident" id="2906735">i</span><span class="op" id="2906736">]</span><span class="op" id="2906737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906742">i</span>&nbsp;<span class="op" id="2906744">-=</span>&nbsp;<span class="ident" id="2906747">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906755">for</span>&nbsp;<span class="ident" id="2906759">_</span><span class="op" id="2906760">,</span>&nbsp;<span class="ident" id="2906762">m</span>&nbsp;<span class="op" id="2906764">:=</span>&nbsp;<span class="keyword" id="2906767">range</span>&nbsp;<span class="ident" id="2906773">chars</span>&nbsp;<span class="op" id="2906779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906785">if</span>&nbsp;<span class="builtintype" id="2906788">rune</span>&nbsp;<span class="op" id="2906793">==</span>&nbsp;<span class="ident" id="2906796">m</span>&nbsp;<span class="op" id="2906798">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906805">return</span>&nbsp;<span class="ident" id="2906812">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906830">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906833">return</span>&nbsp;<span class="op" id="2906840">-</span><span class="num" id="2906841">1</span><br>
<span class="lineno"></span><span class="op" id="2906843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906846">//&nbsp;Generic&nbsp;split:&nbsp;splits&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep,</span><br>
<span class="lineno"></span><span class="comment" id="2906899">//&nbsp;including&nbsp;sepSave&nbsp;bytes&nbsp;of&nbsp;sep&nbsp;in&nbsp;the&nbsp;subarrays.</span><br>
<span class="lineno">275</span><span class="keyword" id="2906951">func</span>&nbsp;<span class="ident" id="2906956">genSplit</span><span class="op" id="2906964">(</span><span class="ident" id="2906965">s</span><span class="op" id="2906966">,</span>&nbsp;<span class="ident" id="2906968">sep</span>&nbsp;<span class="builtintype" id="2906972">string</span><span class="op" id="2906978">,</span>&nbsp;<span class="ident" id="2906980">sepSave</span><span class="op" id="2906987">,</span>&nbsp;<span class="ident" id="2906989">n</span>&nbsp;<span class="builtintype" id="2906991">int</span><span class="op" id="2906994">)</span>&nbsp;<span class="op" id="2906996">[</span><span class="op" id="2906997">]</span><span class="builtintype" id="2906998">string</span>&nbsp;<span class="op" id="2907005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907008">if</span>&nbsp;<span class="ident" id="2907011">n</span>&nbsp;<span class="op" id="2907013">==</span>&nbsp;<span class="num" id="2907016">0</span>&nbsp;<span class="op" id="2907018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907022">return</span>&nbsp;<span class="ident" id="2907029">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907037">if</span>&nbsp;<span class="ident" id="2907040">sep</span>&nbsp;<span class="op" id="2907044">==</span>&nbsp;<span class="string" id="2907047">&#34;&#34;</span>&nbsp;<span class="op" id="2907050">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907054">return</span>&nbsp;<span class="ident" id="2907061">explode</span><span class="op" id="2907068">(</span><span class="ident" id="2907069">s</span><span class="op" id="2907070">,</span>&nbsp;<span class="ident" id="2907072">n</span><span class="op" id="2907073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907079">if</span>&nbsp;<span class="ident" id="2907082">n</span>&nbsp;<span class="op" id="2907084">&lt;</span>&nbsp;<span class="num" id="2907086">0</span>&nbsp;<span class="op" id="2907088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907092">n</span>&nbsp;<span class="op" id="2907094">=</span>&nbsp;<span class="ident" id="2907096">Count</span><span class="op" id="2907101">(</span><span class="ident" id="2907102">s</span><span class="op" id="2907103">,</span>&nbsp;<span class="ident" id="2907105">sep</span><span class="op" id="2907108">)</span>&nbsp;<span class="op" id="2907110">+</span>&nbsp;<span class="num" id="2907112">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907115">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907118">c</span>&nbsp;<span class="op" id="2907120">:=</span>&nbsp;<span class="ident" id="2907123">sep</span><span class="op" id="2907126">[</span><span class="num" id="2907127">0</span><span class="op" id="2907128">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907131">start</span>&nbsp;<span class="op" id="2907137">:=</span>&nbsp;<span class="num" id="2907140">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907143">a</span>&nbsp;<span class="op" id="2907145">:=</span>&nbsp;<span class="builtinfunc" id="2907148">make</span><span class="op" id="2907152">(</span><span class="op" id="2907153">[</span><span class="op" id="2907154">]</span><span class="builtintype" id="2907155">string</span><span class="op" id="2907161">,</span>&nbsp;<span class="ident" id="2907163">n</span><span class="op" id="2907164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907167">na</span>&nbsp;<span class="op" id="2907170">:=</span>&nbsp;<span class="num" id="2907173">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907176">for</span>&nbsp;<span class="ident" id="2907180">i</span>&nbsp;<span class="op" id="2907182">:=</span>&nbsp;<span class="num" id="2907185">0</span><span class="op" id="2907186">;</span>&nbsp;<span class="ident" id="2907188">i</span><span class="op" id="2907189">+</span><span class="builtinfunc" id="2907190">len</span><span class="op" id="2907193">(</span><span class="ident" id="2907194">sep</span><span class="op" id="2907197">)</span>&nbsp;<span class="op" id="2907199">&lt;=</span>&nbsp;<span class="builtinfunc" id="2907202">len</span><span class="op" id="2907205">(</span><span class="ident" id="2907206">s</span><span class="op" id="2907207">)</span>&nbsp;<span class="op" id="2907209">&amp;&amp;</span>&nbsp;<span class="ident" id="2907212">na</span><span class="op" id="2907214">+</span><span class="num" id="2907215">1</span>&nbsp;<span class="op" id="2907217">&lt;</span>&nbsp;<span class="ident" id="2907219">n</span><span class="op" id="2907220">;</span>&nbsp;<span class="ident" id="2907222">i</span><span class="op" id="2907223">++</span>&nbsp;<span class="op" id="2907226">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907230">if</span>&nbsp;<span class="ident" id="2907233">s</span><span class="op" id="2907234">[</span><span class="ident" id="2907235">i</span><span class="op" id="2907236">]</span>&nbsp;<span class="op" id="2907238">==</span>&nbsp;<span class="ident" id="2907241">c</span>&nbsp;<span class="op" id="2907243">&amp;&amp;</span>&nbsp;<span class="op" id="2907246">(</span><span class="builtinfunc" id="2907247">len</span><span class="op" id="2907250">(</span><span class="ident" id="2907251">sep</span><span class="op" id="2907254">)</span>&nbsp;<span class="op" id="2907256">==</span>&nbsp;<span class="num" id="2907259">1</span>&nbsp;<span class="op" id="2907261">||</span>&nbsp;<span class="ident" id="2907264">s</span><span class="op" id="2907265">[</span><span class="ident" id="2907266">i</span><span class="op" id="2907267">:</span><span class="ident" id="2907268">i</span><span class="op" id="2907269">+</span><span class="builtinfunc" id="2907270">len</span><span class="op" id="2907273">(</span><span class="ident" id="2907274">sep</span><span class="op" id="2907277">)</span><span class="op" id="2907278">]</span>&nbsp;<span class="op" id="2907280">==</span>&nbsp;<span class="ident" id="2907283">sep</span><span class="op" id="2907286">)</span>&nbsp;<span class="op" id="2907288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907293">a</span><span class="op" id="2907294">[</span><span class="ident" id="2907295">na</span><span class="op" id="2907297">]</span>&nbsp;<span class="op" id="2907299">=</span>&nbsp;<span class="ident" id="2907301">s</span><span class="op" id="2907302">[</span><span class="ident" id="2907303">start</span>&nbsp;<span class="op" id="2907309">:</span>&nbsp;<span class="ident" id="2907311">i</span><span class="op" id="2907312">+</span><span class="ident" id="2907313">sepSave</span><span class="op" id="2907320">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907325">na</span><span class="op" id="2907327">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907333">start</span>&nbsp;<span class="op" id="2907339">=</span>&nbsp;<span class="ident" id="2907341">i</span>&nbsp;<span class="op" id="2907343">+</span>&nbsp;<span class="builtinfunc" id="2907345">len</span><span class="op" id="2907348">(</span><span class="ident" id="2907349">sep</span><span class="op" id="2907352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907357">i</span>&nbsp;<span class="op" id="2907359">+=</span>&nbsp;<span class="builtinfunc" id="2907362">len</span><span class="op" id="2907365">(</span><span class="ident" id="2907366">sep</span><span class="op" id="2907369">)</span>&nbsp;<span class="op" id="2907371">-</span>&nbsp;<span class="num" id="2907373">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907383">a</span><span class="op" id="2907384">[</span><span class="ident" id="2907385">na</span><span class="op" id="2907387">]</span>&nbsp;<span class="op" id="2907389">=</span>&nbsp;<span class="ident" id="2907391">s</span><span class="op" id="2907392">[</span><span class="ident" id="2907393">start</span><span class="op" id="2907398">:</span><span class="op" id="2907399">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907402">return</span>&nbsp;<span class="ident" id="2907409">a</span><span class="op" id="2907410">[</span><span class="num" id="2907411">0</span>&nbsp;<span class="op" id="2907413">:</span>&nbsp;<span class="ident" id="2907415">na</span><span class="op" id="2907417">+</span><span class="num" id="2907418">1</span><span class="op" id="2907419">]</span><br>
<span class="lineno"></span><span class="op" id="2907421">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2907424">//&nbsp;SplitN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2907499">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2907543">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2907604">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">305</span><span class="comment" id="2907664">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2907748">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2907797">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2907824">func</span>&nbsp;<span class="ident" id="2907829">SplitN</span><span class="op" id="2907835">(</span><span class="ident" id="2907836">s</span><span class="op" id="2907837">,</span>&nbsp;<span class="ident" id="2907839">sep</span>&nbsp;<span class="builtintype" id="2907843">string</span><span class="op" id="2907849">,</span>&nbsp;<span class="ident" id="2907851">n</span>&nbsp;<span class="builtintype" id="2907853">int</span><span class="op" id="2907856">)</span>&nbsp;<span class="op" id="2907858">[</span><span class="op" id="2907859">]</span><span class="builtintype" id="2907860">string</span>&nbsp;<span class="op" id="2907867">{</span>&nbsp;<span class="keyword" id="2907869">return</span>&nbsp;<span class="ident" id="2907876">genSplit</span><span class="op" id="2907884">(</span><span class="ident" id="2907885">s</span><span class="op" id="2907886">,</span>&nbsp;<span class="ident" id="2907888">sep</span><span class="op" id="2907891">,</span>&nbsp;<span class="num" id="2907893">0</span><span class="op" id="2907894">,</span>&nbsp;<span class="ident" id="2907896">n</span><span class="op" id="2907897">)</span>&nbsp;<span class="op" id="2907899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2907902">//&nbsp;SplitAfterN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2907973">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2908013">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfterN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2908079">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno"></span><span class="comment" id="2908139">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno">315</span><span class="comment" id="2908223">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2908272">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2908299">func</span>&nbsp;<span class="ident" id="2908304">SplitAfterN</span><span class="op" id="2908315">(</span><span class="ident" id="2908316">s</span><span class="op" id="2908317">,</span>&nbsp;<span class="ident" id="2908319">sep</span>&nbsp;<span class="builtintype" id="2908323">string</span><span class="op" id="2908329">,</span>&nbsp;<span class="ident" id="2908331">n</span>&nbsp;<span class="builtintype" id="2908333">int</span><span class="op" id="2908336">)</span>&nbsp;<span class="op" id="2908338">[</span><span class="op" id="2908339">]</span><span class="builtintype" id="2908340">string</span>&nbsp;<span class="op" id="2908347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908350">return</span>&nbsp;<span class="ident" id="2908357">genSplit</span><span class="op" id="2908365">(</span><span class="ident" id="2908366">s</span><span class="op" id="2908367">,</span>&nbsp;<span class="ident" id="2908369">sep</span><span class="op" id="2908372">,</span>&nbsp;<span class="builtinfunc" id="2908374">len</span><span class="op" id="2908377">(</span><span class="ident" id="2908378">sep</span><span class="op" id="2908381">)</span><span class="op" id="2908382">,</span>&nbsp;<span class="ident" id="2908384">n</span><span class="op" id="2908385">)</span><br>
<span class="lineno"></span><span class="op" id="2908387">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="2908390">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2908468">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2908512">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;Split&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2908572">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno">325</span><span class="keyword" id="2908622">func</span>&nbsp;<span class="ident" id="2908627">Split</span><span class="op" id="2908632">(</span><span class="ident" id="2908633">s</span><span class="op" id="2908634">,</span>&nbsp;<span class="ident" id="2908636">sep</span>&nbsp;<span class="builtintype" id="2908640">string</span><span class="op" id="2908646">)</span>&nbsp;<span class="op" id="2908648">[</span><span class="op" id="2908649">]</span><span class="builtintype" id="2908650">string</span>&nbsp;<span class="op" id="2908657">{</span>&nbsp;<span class="keyword" id="2908659">return</span>&nbsp;<span class="ident" id="2908666">genSplit</span><span class="op" id="2908674">(</span><span class="ident" id="2908675">s</span><span class="op" id="2908676">,</span>&nbsp;<span class="ident" id="2908678">sep</span><span class="op" id="2908681">,</span>&nbsp;<span class="num" id="2908683">0</span><span class="op" id="2908684">,</span>&nbsp;<span class="op" id="2908686">-</span><span class="num" id="2908687">1</span><span class="op" id="2908688">)</span>&nbsp;<span class="op" id="2908690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908693">//&nbsp;SplitAfter&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2908767">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2908807">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfter&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno">330</span><span class="comment" id="2908872">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitAfterN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="2908927">func</span>&nbsp;<span class="ident" id="2908932">SplitAfter</span><span class="op" id="2908942">(</span><span class="ident" id="2908943">s</span><span class="op" id="2908944">,</span>&nbsp;<span class="ident" id="2908946">sep</span>&nbsp;<span class="builtintype" id="2908950">string</span><span class="op" id="2908956">)</span>&nbsp;<span class="op" id="2908958">[</span><span class="op" id="2908959">]</span><span class="builtintype" id="2908960">string</span>&nbsp;<span class="op" id="2908967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908970">return</span>&nbsp;<span class="ident" id="2908977">genSplit</span><span class="op" id="2908985">(</span><span class="ident" id="2908986">s</span><span class="op" id="2908987">,</span>&nbsp;<span class="ident" id="2908989">sep</span><span class="op" id="2908992">,</span>&nbsp;<span class="builtinfunc" id="2908994">len</span><span class="op" id="2908997">(</span><span class="ident" id="2908998">sep</span><span class="op" id="2909001">)</span><span class="op" id="2909002">,</span>&nbsp;<span class="op" id="2909004">-</span><span class="num" id="2909005">1</span><span class="op" id="2909006">)</span><br>
<span class="lineno"></span><span class="op" id="2909008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="2909011">//&nbsp;Fields&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="2909101">//&nbsp;characters,&nbsp;as&nbsp;defined&nbsp;by&nbsp;unicode.IsSpace,&nbsp;returning&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="2909191">//&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2909237">func</span>&nbsp;<span class="ident" id="2909242">Fields</span><span class="op" id="2909248">(</span><span class="ident" id="2909249">s</span>&nbsp;<span class="builtintype" id="2909251">string</span><span class="op" id="2909257">)</span>&nbsp;<span class="op" id="2909259">[</span><span class="op" id="2909260">]</span><span class="builtintype" id="2909261">string</span>&nbsp;<span class="op" id="2909268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909271">return</span>&nbsp;<span class="ident" id="2909278">FieldsFunc</span><span class="op" id="2909288">(</span><span class="ident" id="2909289">s</span><span class="op" id="2909290">,</span>&nbsp;<span class="ident" id="2909292">unicode</span><span class="op" id="2909299">.</span><span class="ident" id="2909300">IsSpace</span><span class="op" id="2909307">)</span><br>
<span class="lineno">340</span><span class="op" id="2909309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909312">//&nbsp;FieldsFunc&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;at&nbsp;each&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)</span><br>
<span class="lineno"></span><span class="comment" id="2909399">//&nbsp;and&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;slices&nbsp;of&nbsp;s.&nbsp;If&nbsp;all&nbsp;code&nbsp;points&nbsp;in&nbsp;s&nbsp;satisfy&nbsp;f(c)&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2909483">//&nbsp;string&nbsp;is&nbsp;empty,&nbsp;an&nbsp;empty&nbsp;slice&nbsp;is&nbsp;returned.</span><br>
<span class="lineno">345</span><span class="comment" id="2909531">//&nbsp;FieldsFunc&nbsp;makes&nbsp;no&nbsp;guarantees&nbsp;about&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;it&nbsp;calls&nbsp;f(c).</span><br>
<span class="lineno"></span><span class="comment" id="2909605">//&nbsp;If&nbsp;f&nbsp;does&nbsp;not&nbsp;return&nbsp;consistent&nbsp;results&nbsp;for&nbsp;a&nbsp;given&nbsp;c,&nbsp;FieldsFunc&nbsp;may&nbsp;crash.</span><br>
<span class="lineno"></span><span class="keyword" id="2909685">func</span>&nbsp;<span class="ident" id="2909690">FieldsFunc</span><span class="op" id="2909700">(</span><span class="ident" id="2909701">s</span>&nbsp;<span class="builtintype" id="2909703">string</span><span class="op" id="2909709">,</span>&nbsp;<span class="ident" id="2909711">f</span>&nbsp;<span class="keyword" id="2909713">func</span><span class="op" id="2909717">(</span><span class="builtintype" id="2909718">rune</span><span class="op" id="2909722">)</span>&nbsp;<span class="builtintype" id="2909724">bool</span><span class="op" id="2909728">)</span>&nbsp;<span class="op" id="2909730">[</span><span class="op" id="2909731">]</span><span class="builtintype" id="2909732">string</span>&nbsp;<span class="op" id="2909739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2909742">//&nbsp;First&nbsp;count&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909770">n</span>&nbsp;<span class="op" id="2909772">:=</span>&nbsp;<span class="num" id="2909775">0</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909778">inField</span>&nbsp;<span class="op" id="2909786">:=</span>&nbsp;<span class="builtintype" id="2909789">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909796">for</span>&nbsp;<span class="ident" id="2909800">_</span><span class="op" id="2909801">,</span>&nbsp;<span class="builtintype" id="2909803">rune</span>&nbsp;<span class="op" id="2909808">:=</span>&nbsp;<span class="keyword" id="2909811">range</span>&nbsp;<span class="ident" id="2909817">s</span>&nbsp;<span class="op" id="2909819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909823">wasInField</span>&nbsp;<span class="op" id="2909834">:=</span>&nbsp;<span class="ident" id="2909837">inField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909847">inField</span>&nbsp;<span class="op" id="2909855">=</span>&nbsp;<span class="op" id="2909857">!</span><span class="ident" id="2909858">f</span><span class="op" id="2909859">(</span><span class="builtintype" id="2909860">rune</span><span class="op" id="2909864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909868">if</span>&nbsp;<span class="ident" id="2909871">inField</span>&nbsp;<span class="op" id="2909879">&amp;&amp;</span>&nbsp;<span class="op" id="2909882">!</span><span class="ident" id="2909883">wasInField</span>&nbsp;<span class="op" id="2909894">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909899">n</span><span class="op" id="2909900">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2909912">//&nbsp;Now&nbsp;create&nbsp;them.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909933">a</span>&nbsp;<span class="op" id="2909935">:=</span>&nbsp;<span class="builtinfunc" id="2909938">make</span><span class="op" id="2909942">(</span><span class="op" id="2909943">[</span><span class="op" id="2909944">]</span><span class="builtintype" id="2909945">string</span><span class="op" id="2909951">,</span>&nbsp;<span class="ident" id="2909953">n</span><span class="op" id="2909954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909957">na</span>&nbsp;<span class="op" id="2909960">:=</span>&nbsp;<span class="num" id="2909963">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909966">fieldStart</span>&nbsp;<span class="op" id="2909977">:=</span>&nbsp;<span class="op" id="2909980">-</span><span class="num" id="2909981">1</span>&nbsp;<span class="comment" id="2909983">//&nbsp;Set&nbsp;to&nbsp;-1&nbsp;when&nbsp;looking&nbsp;for&nbsp;start&nbsp;of&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910030">for</span>&nbsp;<span class="ident" id="2910034">i</span><span class="op" id="2910035">,</span>&nbsp;<span class="builtintype" id="2910037">rune</span>&nbsp;<span class="op" id="2910042">:=</span>&nbsp;<span class="keyword" id="2910045">range</span>&nbsp;<span class="ident" id="2910051">s</span>&nbsp;<span class="op" id="2910053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910057">if</span>&nbsp;<span class="ident" id="2910060">f</span><span class="op" id="2910061">(</span><span class="builtintype" id="2910062">rune</span><span class="op" id="2910066">)</span>&nbsp;<span class="op" id="2910068">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910073">if</span>&nbsp;<span class="ident" id="2910076">fieldStart</span>&nbsp;<span class="op" id="2910087">&gt;=</span>&nbsp;<span class="num" id="2910090">0</span>&nbsp;<span class="op" id="2910092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910098">a</span><span class="op" id="2910099">[</span><span class="ident" id="2910100">na</span><span class="op" id="2910102">]</span>&nbsp;<span class="op" id="2910104">=</span>&nbsp;<span class="ident" id="2910106">s</span><span class="op" id="2910107">[</span><span class="ident" id="2910108">fieldStart</span><span class="op" id="2910118">:</span><span class="ident" id="2910119">i</span><span class="op" id="2910120">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910126">na</span><span class="op" id="2910128">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910135">fieldStart</span>&nbsp;<span class="op" id="2910146">=</span>&nbsp;<span class="op" id="2910148">-</span><span class="num" id="2910149">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910154">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910158">}</span>&nbsp;<span class="keyword" id="2910160">else</span>&nbsp;<span class="keyword" id="2910165">if</span>&nbsp;<span class="ident" id="2910168">fieldStart</span>&nbsp;<span class="op" id="2910179">==</span>&nbsp;<span class="op" id="2910182">-</span><span class="num" id="2910183">1</span>&nbsp;<span class="op" id="2910185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910190">fieldStart</span>&nbsp;<span class="op" id="2910201">=</span>&nbsp;<span class="ident" id="2910203">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910213">if</span>&nbsp;<span class="ident" id="2910216">fieldStart</span>&nbsp;<span class="op" id="2910227">&gt;=</span>&nbsp;<span class="num" id="2910230">0</span>&nbsp;<span class="op" id="2910232">{</span>&nbsp;<span class="comment" id="2910234">//&nbsp;Last&nbsp;field&nbsp;might&nbsp;end&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910268">a</span><span class="op" id="2910269">[</span><span class="ident" id="2910270">na</span><span class="op" id="2910272">]</span>&nbsp;<span class="op" id="2910274">=</span>&nbsp;<span class="ident" id="2910276">s</span><span class="op" id="2910277">[</span><span class="ident" id="2910278">fieldStart</span><span class="op" id="2910288">:</span><span class="op" id="2910289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910295">return</span>&nbsp;<span class="ident" id="2910302">a</span><br>
<span class="lineno"></span><span class="op" id="2910304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="comment" id="2910307">//&nbsp;Join&nbsp;concatenates&nbsp;the&nbsp;elements&nbsp;of&nbsp;a&nbsp;to&nbsp;create&nbsp;a&nbsp;single&nbsp;string.&nbsp;&nbsp;&nbsp;The&nbsp;separator&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2910396">//&nbsp;sep&nbsp;is&nbsp;placed&nbsp;between&nbsp;elements&nbsp;in&nbsp;the&nbsp;resulting&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2910455">func</span>&nbsp;<span class="ident" id="2910460">Join</span><span class="op" id="2910464">(</span><span class="ident" id="2910465">a</span>&nbsp;<span class="op" id="2910467">[</span><span class="op" id="2910468">]</span><span class="builtintype" id="2910469">string</span><span class="op" id="2910475">,</span>&nbsp;<span class="ident" id="2910477">sep</span>&nbsp;<span class="builtintype" id="2910481">string</span><span class="op" id="2910487">)</span>&nbsp;<span class="builtintype" id="2910489">string</span>&nbsp;<span class="op" id="2910496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910499">if</span>&nbsp;<span class="builtinfunc" id="2910502">len</span><span class="op" id="2910505">(</span><span class="ident" id="2910506">a</span><span class="op" id="2910507">)</span>&nbsp;<span class="op" id="2910509">==</span>&nbsp;<span class="num" id="2910512">0</span>&nbsp;<span class="op" id="2910514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910518">return</span>&nbsp;<span class="string" id="2910525">&#34;&#34;</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910532">if</span>&nbsp;<span class="builtinfunc" id="2910535">len</span><span class="op" id="2910538">(</span><span class="ident" id="2910539">a</span><span class="op" id="2910540">)</span>&nbsp;<span class="op" id="2910542">==</span>&nbsp;<span class="num" id="2910545">1</span>&nbsp;<span class="op" id="2910547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910551">return</span>&nbsp;<span class="ident" id="2910558">a</span><span class="op" id="2910559">[</span><span class="num" id="2910560">0</span><span class="op" id="2910561">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910567">n</span>&nbsp;<span class="op" id="2910569">:=</span>&nbsp;<span class="builtinfunc" id="2910572">len</span><span class="op" id="2910575">(</span><span class="ident" id="2910576">sep</span><span class="op" id="2910579">)</span>&nbsp;<span class="op" id="2910581">*</span>&nbsp;<span class="op" id="2910583">(</span><span class="builtinfunc" id="2910584">len</span><span class="op" id="2910587">(</span><span class="ident" id="2910588">a</span><span class="op" id="2910589">)</span>&nbsp;<span class="op" id="2910591">-</span>&nbsp;<span class="num" id="2910593">1</span><span class="op" id="2910594">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910597">for</span>&nbsp;<span class="ident" id="2910601">i</span>&nbsp;<span class="op" id="2910603">:=</span>&nbsp;<span class="num" id="2910606">0</span><span class="op" id="2910607">;</span>&nbsp;<span class="ident" id="2910609">i</span>&nbsp;<span class="op" id="2910611">&lt;</span>&nbsp;<span class="builtinfunc" id="2910613">len</span><span class="op" id="2910616">(</span><span class="ident" id="2910617">a</span><span class="op" id="2910618">)</span><span class="op" id="2910619">;</span>&nbsp;<span class="ident" id="2910621">i</span><span class="op" id="2910622">++</span>&nbsp;<span class="op" id="2910625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910629">n</span>&nbsp;<span class="op" id="2910631">+=</span>&nbsp;<span class="builtinfunc" id="2910634">len</span><span class="op" id="2910637">(</span><span class="ident" id="2910638">a</span><span class="op" id="2910639">[</span><span class="ident" id="2910640">i</span><span class="op" id="2910641">]</span><span class="op" id="2910642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910649">b</span>&nbsp;<span class="op" id="2910651">:=</span>&nbsp;<span class="builtinfunc" id="2910654">make</span><span class="op" id="2910658">(</span><span class="op" id="2910659">[</span><span class="op" id="2910660">]</span><span class="builtintype" id="2910661">byte</span><span class="op" id="2910665">,</span>&nbsp;<span class="ident" id="2910667">n</span><span class="op" id="2910668">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910671">bp</span>&nbsp;<span class="op" id="2910674">:=</span>&nbsp;<span class="builtinfunc" id="2910677">copy</span><span class="op" id="2910681">(</span><span class="ident" id="2910682">b</span><span class="op" id="2910683">,</span>&nbsp;<span class="ident" id="2910685">a</span><span class="op" id="2910686">[</span><span class="num" id="2910687">0</span><span class="op" id="2910688">]</span><span class="op" id="2910689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910692">for</span>&nbsp;<span class="ident" id="2910696">_</span><span class="op" id="2910697">,</span>&nbsp;<span class="ident" id="2910699">s</span>&nbsp;<span class="op" id="2910701">:=</span>&nbsp;<span class="keyword" id="2910704">range</span>&nbsp;<span class="ident" id="2910710">a</span><span class="op" id="2910711">[</span><span class="num" id="2910712">1</span><span class="op" id="2910713">:</span><span class="op" id="2910714">]</span>&nbsp;<span class="op" id="2910716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910720">bp</span>&nbsp;<span class="op" id="2910723">+=</span>&nbsp;<span class="builtinfunc" id="2910726">copy</span><span class="op" id="2910730">(</span><span class="ident" id="2910731">b</span><span class="op" id="2910732">[</span><span class="ident" id="2910733">bp</span><span class="op" id="2910735">:</span><span class="op" id="2910736">]</span><span class="op" id="2910737">,</span>&nbsp;<span class="ident" id="2910739">sep</span><span class="op" id="2910742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910746">bp</span>&nbsp;<span class="op" id="2910749">+=</span>&nbsp;<span class="builtinfunc" id="2910752">copy</span><span class="op" id="2910756">(</span><span class="ident" id="2910757">b</span><span class="op" id="2910758">[</span><span class="ident" id="2910759">bp</span><span class="op" id="2910761">:</span><span class="op" id="2910762">]</span><span class="op" id="2910763">,</span>&nbsp;<span class="ident" id="2910765">s</span><span class="op" id="2910766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910769">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910772">return</span>&nbsp;<span class="builtintype" id="2910779">string</span><span class="op" id="2910785">(</span><span class="ident" id="2910786">b</span><span class="op" id="2910787">)</span><br>
<span class="lineno"></span><span class="op" id="2910789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2910792">//&nbsp;HasPrefix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;begins&nbsp;with&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="2910852">func</span>&nbsp;<span class="ident" id="2910857">HasPrefix</span><span class="op" id="2910866">(</span><span class="ident" id="2910867">s</span><span class="op" id="2910868">,</span>&nbsp;<span class="ident" id="2910870">prefix</span>&nbsp;<span class="builtintype" id="2910877">string</span><span class="op" id="2910883">)</span>&nbsp;<span class="builtintype" id="2910885">bool</span>&nbsp;<span class="op" id="2910890">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910893">return</span>&nbsp;<span class="builtinfunc" id="2910900">len</span><span class="op" id="2910903">(</span><span class="ident" id="2910904">s</span><span class="op" id="2910905">)</span>&nbsp;<span class="op" id="2910907">&gt;=</span>&nbsp;<span class="builtinfunc" id="2910910">len</span><span class="op" id="2910913">(</span><span class="ident" id="2910914">prefix</span><span class="op" id="2910920">)</span>&nbsp;<span class="op" id="2910922">&amp;&amp;</span>&nbsp;<span class="ident" id="2910925">s</span><span class="op" id="2910926">[</span><span class="num" id="2910927">0</span><span class="op" id="2910928">:</span><span class="builtinfunc" id="2910929">len</span><span class="op" id="2910932">(</span><span class="ident" id="2910933">prefix</span><span class="op" id="2910939">)</span><span class="op" id="2910940">]</span>&nbsp;<span class="op" id="2910942">==</span>&nbsp;<span class="ident" id="2910945">prefix</span><br>
<span class="lineno"></span><span class="op" id="2910952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2910955">//&nbsp;HasSuffix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;ends&nbsp;with&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="2911013">func</span>&nbsp;<span class="ident" id="2911018">HasSuffix</span><span class="op" id="2911027">(</span><span class="ident" id="2911028">s</span><span class="op" id="2911029">,</span>&nbsp;<span class="ident" id="2911031">suffix</span>&nbsp;<span class="builtintype" id="2911038">string</span><span class="op" id="2911044">)</span>&nbsp;<span class="builtintype" id="2911046">bool</span>&nbsp;<span class="op" id="2911051">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911054">return</span>&nbsp;<span class="builtinfunc" id="2911061">len</span><span class="op" id="2911064">(</span><span class="ident" id="2911065">s</span><span class="op" id="2911066">)</span>&nbsp;<span class="op" id="2911068">&gt;=</span>&nbsp;<span class="builtinfunc" id="2911071">len</span><span class="op" id="2911074">(</span><span class="ident" id="2911075">suffix</span><span class="op" id="2911081">)</span>&nbsp;<span class="op" id="2911083">&amp;&amp;</span>&nbsp;<span class="ident" id="2911086">s</span><span class="op" id="2911087">[</span><span class="builtinfunc" id="2911088">len</span><span class="op" id="2911091">(</span><span class="ident" id="2911092">s</span><span class="op" id="2911093">)</span><span class="op" id="2911094">-</span><span class="builtinfunc" id="2911095">len</span><span class="op" id="2911098">(</span><span class="ident" id="2911099">suffix</span><span class="op" id="2911105">)</span><span class="op" id="2911106">:</span><span class="op" id="2911107">]</span>&nbsp;<span class="op" id="2911109">==</span>&nbsp;<span class="ident" id="2911112">suffix</span><br>
<span class="lineno"></span><span class="op" id="2911119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2911122">//&nbsp;Map&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;its&nbsp;characters&nbsp;modified</span><br>
<span class="lineno"></span><span class="comment" id="2911193">//&nbsp;according&nbsp;to&nbsp;the&nbsp;mapping&nbsp;function.&nbsp;If&nbsp;mapping&nbsp;returns&nbsp;a&nbsp;negative&nbsp;value,&nbsp;the&nbsp;character&nbsp;is</span><br>
<span class="lineno">415</span><span class="comment" id="2911285">//&nbsp;dropped&nbsp;from&nbsp;the&nbsp;string&nbsp;with&nbsp;no&nbsp;replacement.</span><br>
<span class="lineno"></span><span class="keyword" id="2911333">func</span>&nbsp;<span class="ident" id="2911338">Map</span><span class="op" id="2911341">(</span><span class="ident" id="2911342">mapping</span>&nbsp;<span class="keyword" id="2911350">func</span><span class="op" id="2911354">(</span><span class="builtintype" id="2911355">rune</span><span class="op" id="2911359">)</span>&nbsp;<span class="builtintype" id="2911361">rune</span><span class="op" id="2911365">,</span>&nbsp;<span class="ident" id="2911367">s</span>&nbsp;<span class="builtintype" id="2911369">string</span><span class="op" id="2911375">)</span>&nbsp;<span class="builtintype" id="2911377">string</span>&nbsp;<span class="op" id="2911384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911387">//&nbsp;In&nbsp;the&nbsp;worst&nbsp;case,&nbsp;the&nbsp;string&nbsp;can&nbsp;grow&nbsp;when&nbsp;mapped,&nbsp;making</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911450">//&nbsp;things&nbsp;unpleasant.&nbsp;&nbsp;But&nbsp;it&#39;s&nbsp;so&nbsp;rare&nbsp;we&nbsp;barge&nbsp;in&nbsp;assuming&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911517">//&nbsp;fine.&nbsp;&nbsp;It&nbsp;could&nbsp;also&nbsp;shrink&nbsp;but&nbsp;that&nbsp;falls&nbsp;out&nbsp;naturally.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911579">maxbytes</span>&nbsp;<span class="op" id="2911588">:=</span>&nbsp;<span class="builtinfunc" id="2911591">len</span><span class="op" id="2911594">(</span><span class="ident" id="2911595">s</span><span class="op" id="2911596">)</span>&nbsp;<span class="comment" id="2911598">//&nbsp;length&nbsp;of&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911614">nbytes</span>&nbsp;<span class="op" id="2911621">:=</span>&nbsp;<span class="num" id="2911624">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911633">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;encoded&nbsp;in&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911666">//&nbsp;The&nbsp;output&nbsp;buffer&nbsp;b&nbsp;is&nbsp;initialized&nbsp;on&nbsp;demand,&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2911726">//&nbsp;time&nbsp;a&nbsp;character&nbsp;differs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911756">var</span>&nbsp;<span class="ident" id="2911760">b</span>&nbsp;<span class="op" id="2911762">[</span><span class="op" id="2911763">]</span><span class="builtintype" id="2911764">byte</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911771">for</span>&nbsp;<span class="ident" id="2911775">i</span><span class="op" id="2911776">,</span>&nbsp;<span class="ident" id="2911778">c</span>&nbsp;<span class="op" id="2911780">:=</span>&nbsp;<span class="keyword" id="2911783">range</span>&nbsp;<span class="ident" id="2911789">s</span>&nbsp;<span class="op" id="2911791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911795">r</span>&nbsp;<span class="op" id="2911797">:=</span>&nbsp;<span class="ident" id="2911800">mapping</span><span class="op" id="2911807">(</span><span class="ident" id="2911808">c</span><span class="op" id="2911809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911813">if</span>&nbsp;<span class="ident" id="2911816">b</span>&nbsp;<span class="op" id="2911818">==</span>&nbsp;<span class="ident" id="2911821">nil</span>&nbsp;<span class="op" id="2911825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911830">if</span>&nbsp;<span class="ident" id="2911833">r</span>&nbsp;<span class="op" id="2911835">==</span>&nbsp;<span class="ident" id="2911838">c</span>&nbsp;<span class="op" id="2911840">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911846">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911863">b</span>&nbsp;<span class="op" id="2911865">=</span>&nbsp;<span class="builtinfunc" id="2911867">make</span><span class="op" id="2911871">(</span><span class="op" id="2911872">[</span><span class="op" id="2911873">]</span><span class="builtintype" id="2911874">byte</span><span class="op" id="2911878">,</span>&nbsp;<span class="ident" id="2911880">maxbytes</span><span class="op" id="2911888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911893">nbytes</span>&nbsp;<span class="op" id="2911900">=</span>&nbsp;<span class="builtinfunc" id="2911902">copy</span><span class="op" id="2911906">(</span><span class="ident" id="2911907">b</span><span class="op" id="2911908">,</span>&nbsp;<span class="ident" id="2911910">s</span><span class="op" id="2911911">[</span><span class="op" id="2911912">:</span><span class="ident" id="2911913">i</span><span class="op" id="2911914">]</span><span class="op" id="2911915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911919">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911923">if</span>&nbsp;<span class="ident" id="2911926">r</span>&nbsp;<span class="op" id="2911928">&gt;=</span>&nbsp;<span class="num" id="2911931">0</span>&nbsp;<span class="op" id="2911933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911938">wid</span>&nbsp;<span class="op" id="2911942">:=</span>&nbsp;<span class="num" id="2911945">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911950">if</span>&nbsp;<span class="ident" id="2911953">r</span>&nbsp;<span class="op" id="2911955">&gt;=</span>&nbsp;<span class="ident" id="2911958">utf8</span><span class="op" id="2911962">.</span><span class="ident" id="2911963">RuneSelf</span>&nbsp;<span class="op" id="2911972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911978">wid</span>&nbsp;<span class="op" id="2911982">=</span>&nbsp;<span class="ident" id="2911984">utf8</span><span class="op" id="2911988">.</span><span class="ident" id="2911989">RuneLen</span><span class="op" id="2911996">(</span><span class="ident" id="2911997">r</span><span class="op" id="2911998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912003">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912008">if</span>&nbsp;<span class="ident" id="2912011">nbytes</span><span class="op" id="2912017">+</span><span class="ident" id="2912018">wid</span>&nbsp;<span class="op" id="2912022">&gt;</span>&nbsp;<span class="ident" id="2912024">maxbytes</span>&nbsp;<span class="op" id="2912033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2912039">//&nbsp;Grow&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912063">maxbytes</span>&nbsp;<span class="op" id="2912072">=</span>&nbsp;<span class="ident" id="2912074">maxbytes</span><span class="op" id="2912082">*</span><span class="num" id="2912083">2</span>&nbsp;<span class="op" id="2912085">+</span>&nbsp;<span class="ident" id="2912087">utf8</span><span class="op" id="2912091">.</span><span class="ident" id="2912092">UTFMax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912103">nb</span>&nbsp;<span class="op" id="2912106">:=</span>&nbsp;<span class="builtinfunc" id="2912109">make</span><span class="op" id="2912113">(</span><span class="op" id="2912114">[</span><span class="op" id="2912115">]</span><span class="builtintype" id="2912116">byte</span><span class="op" id="2912120">,</span>&nbsp;<span class="ident" id="2912122">maxbytes</span><span class="op" id="2912130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912136">copy</span><span class="op" id="2912140">(</span><span class="ident" id="2912141">nb</span><span class="op" id="2912143">,</span>&nbsp;<span class="ident" id="2912145">b</span><span class="op" id="2912146">[</span><span class="num" id="2912147">0</span><span class="op" id="2912148">:</span><span class="ident" id="2912149">nbytes</span><span class="op" id="2912155">]</span><span class="op" id="2912156">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912162">b</span>&nbsp;<span class="op" id="2912164">=</span>&nbsp;<span class="ident" id="2912166">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912177">nbytes</span>&nbsp;<span class="op" id="2912184">+=</span>&nbsp;<span class="ident" id="2912187">utf8</span><span class="op" id="2912191">.</span><span class="ident" id="2912192">EncodeRune</span><span class="op" id="2912202">(</span><span class="ident" id="2912203">b</span><span class="op" id="2912204">[</span><span class="ident" id="2912205">nbytes</span><span class="op" id="2912211">:</span><span class="ident" id="2912212">maxbytes</span><span class="op" id="2912220">]</span><span class="op" id="2912221">,</span>&nbsp;<span class="ident" id="2912223">r</span><span class="op" id="2912224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912231">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912234">if</span>&nbsp;<span class="ident" id="2912237">b</span>&nbsp;<span class="op" id="2912239">==</span>&nbsp;<span class="ident" id="2912242">nil</span>&nbsp;<span class="op" id="2912246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912250">return</span>&nbsp;<span class="ident" id="2912257">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912263">return</span>&nbsp;<span class="builtintype" id="2912270">string</span><span class="op" id="2912276">(</span><span class="ident" id="2912277">b</span><span class="op" id="2912278">[</span><span class="num" id="2912279">0</span><span class="op" id="2912280">:</span><span class="ident" id="2912281">nbytes</span><span class="op" id="2912287">]</span><span class="op" id="2912288">)</span><br>
<span class="lineno"></span><span class="op" id="2912290">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="2912293">//&nbsp;Repeat&nbsp;returns&nbsp;a&nbsp;new&nbsp;string&nbsp;consisting&nbsp;of&nbsp;count&nbsp;copies&nbsp;of&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2912368">func</span>&nbsp;<span class="ident" id="2912373">Repeat</span><span class="op" id="2912379">(</span><span class="ident" id="2912380">s</span>&nbsp;<span class="builtintype" id="2912382">string</span><span class="op" id="2912388">,</span>&nbsp;<span class="ident" id="2912390">count</span>&nbsp;<span class="builtintype" id="2912396">int</span><span class="op" id="2912399">)</span>&nbsp;<span class="builtintype" id="2912401">string</span>&nbsp;<span class="op" id="2912408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912411">b</span>&nbsp;<span class="op" id="2912413">:=</span>&nbsp;<span class="builtinfunc" id="2912416">make</span><span class="op" id="2912420">(</span><span class="op" id="2912421">[</span><span class="op" id="2912422">]</span><span class="builtintype" id="2912423">byte</span><span class="op" id="2912427">,</span>&nbsp;<span class="builtinfunc" id="2912429">len</span><span class="op" id="2912432">(</span><span class="ident" id="2912433">s</span><span class="op" id="2912434">)</span><span class="op" id="2912435">*</span><span class="ident" id="2912436">count</span><span class="op" id="2912441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912444">bp</span>&nbsp;<span class="op" id="2912447">:=</span>&nbsp;<span class="builtinfunc" id="2912450">copy</span><span class="op" id="2912454">(</span><span class="ident" id="2912455">b</span><span class="op" id="2912456">,</span>&nbsp;<span class="ident" id="2912458">s</span><span class="op" id="2912459">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912462">for</span>&nbsp;<span class="ident" id="2912466">bp</span>&nbsp;<span class="op" id="2912469">&lt;</span>&nbsp;<span class="builtinfunc" id="2912471">len</span><span class="op" id="2912474">(</span><span class="ident" id="2912475">b</span><span class="op" id="2912476">)</span>&nbsp;<span class="op" id="2912478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912482">copy</span><span class="op" id="2912486">(</span><span class="ident" id="2912487">b</span><span class="op" id="2912488">[</span><span class="ident" id="2912489">bp</span><span class="op" id="2912491">:</span><span class="op" id="2912492">]</span><span class="op" id="2912493">,</span>&nbsp;<span class="ident" id="2912495">b</span><span class="op" id="2912496">[</span><span class="op" id="2912497">:</span><span class="ident" id="2912498">bp</span><span class="op" id="2912500">]</span><span class="op" id="2912501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912505">bp</span>&nbsp;<span class="op" id="2912508">*=</span>&nbsp;<span class="num" id="2912511">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912517">return</span>&nbsp;<span class="builtintype" id="2912524">string</span><span class="op" id="2912530">(</span><span class="ident" id="2912531">b</span><span class="op" id="2912532">)</span><br>
<span class="lineno">465</span><span class="op" id="2912534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912537">//&nbsp;ToUpper&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;upper&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2912632">func</span>&nbsp;<span class="ident" id="2912637">ToUpper</span><span class="op" id="2912644">(</span><span class="ident" id="2912645">s</span>&nbsp;<span class="builtintype" id="2912647">string</span><span class="op" id="2912653">)</span>&nbsp;<span class="builtintype" id="2912655">string</span>&nbsp;<span class="op" id="2912662">{</span>&nbsp;<span class="keyword" id="2912664">return</span>&nbsp;<span class="ident" id="2912671">Map</span><span class="op" id="2912674">(</span><span class="ident" id="2912675">unicode</span><span class="op" id="2912682">.</span><span class="ident" id="2912683">ToUpper</span><span class="op" id="2912690">,</span>&nbsp;<span class="ident" id="2912692">s</span><span class="op" id="2912693">)</span>&nbsp;<span class="op" id="2912695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span><span class="comment" id="2912698">//&nbsp;ToLower&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2912793">func</span>&nbsp;<span class="ident" id="2912798">ToLower</span><span class="op" id="2912805">(</span><span class="ident" id="2912806">s</span>&nbsp;<span class="builtintype" id="2912808">string</span><span class="op" id="2912814">)</span>&nbsp;<span class="builtintype" id="2912816">string</span>&nbsp;<span class="op" id="2912823">{</span>&nbsp;<span class="keyword" id="2912825">return</span>&nbsp;<span class="ident" id="2912832">Map</span><span class="op" id="2912835">(</span><span class="ident" id="2912836">unicode</span><span class="op" id="2912843">.</span><span class="ident" id="2912844">ToLower</span><span class="op" id="2912851">,</span>&nbsp;<span class="ident" id="2912853">s</span><span class="op" id="2912854">)</span>&nbsp;<span class="op" id="2912856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912859">//&nbsp;ToTitle&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2912954">func</span>&nbsp;<span class="ident" id="2912959">ToTitle</span><span class="op" id="2912966">(</span><span class="ident" id="2912967">s</span>&nbsp;<span class="builtintype" id="2912969">string</span><span class="op" id="2912975">)</span>&nbsp;<span class="builtintype" id="2912977">string</span>&nbsp;<span class="op" id="2912984">{</span>&nbsp;<span class="keyword" id="2912986">return</span>&nbsp;<span class="ident" id="2912993">Map</span><span class="op" id="2912996">(</span><span class="ident" id="2912997">unicode</span><span class="op" id="2913004">.</span><span class="ident" id="2913005">ToTitle</span><span class="op" id="2913012">,</span>&nbsp;<span class="ident" id="2913014">s</span><span class="op" id="2913015">)</span>&nbsp;<span class="op" id="2913017">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="2913020">//&nbsp;ToUpperSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2913110">//&nbsp;upper&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2913170">func</span>&nbsp;<span class="ident" id="2913175">ToUpperSpecial</span><span class="op" id="2913189">(</span><span class="ident" id="2913190">_case</span>&nbsp;<span class="ident" id="2913196">unicode</span><span class="op" id="2913203">.</span><span class="ident" id="2913204">SpecialCase</span><span class="op" id="2913215">,</span>&nbsp;<span class="ident" id="2913217">s</span>&nbsp;<span class="builtintype" id="2913219">string</span><span class="op" id="2913225">)</span>&nbsp;<span class="builtintype" id="2913227">string</span>&nbsp;<span class="op" id="2913234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913237">return</span>&nbsp;<span class="ident" id="2913244">Map</span><span class="op" id="2913247">(</span><span class="keyword" id="2913248">func</span><span class="op" id="2913252">(</span><span class="ident" id="2913253">r</span>&nbsp;<span class="builtintype" id="2913255">rune</span><span class="op" id="2913259">)</span>&nbsp;<span class="builtintype" id="2913261">rune</span>&nbsp;<span class="op" id="2913266">{</span>&nbsp;<span class="keyword" id="2913268">return</span>&nbsp;<span class="ident" id="2913275">_case</span><span class="op" id="2913280">.</span><span class="ident" id="2913281">ToUpper</span><span class="op" id="2913288">(</span><span class="ident" id="2913289">r</span><span class="op" id="2913290">)</span>&nbsp;<span class="op" id="2913292">}</span><span class="op" id="2913293">,</span>&nbsp;<span class="ident" id="2913295">s</span><span class="op" id="2913296">)</span><br>
<span class="lineno">480</span><span class="op" id="2913298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913301">//&nbsp;ToLowerSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2913391">//&nbsp;lower&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2913451">func</span>&nbsp;<span class="ident" id="2913456">ToLowerSpecial</span><span class="op" id="2913470">(</span><span class="ident" id="2913471">_case</span>&nbsp;<span class="ident" id="2913477">unicode</span><span class="op" id="2913484">.</span><span class="ident" id="2913485">SpecialCase</span><span class="op" id="2913496">,</span>&nbsp;<span class="ident" id="2913498">s</span>&nbsp;<span class="builtintype" id="2913500">string</span><span class="op" id="2913506">)</span>&nbsp;<span class="builtintype" id="2913508">string</span>&nbsp;<span class="op" id="2913515">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913518">return</span>&nbsp;<span class="ident" id="2913525">Map</span><span class="op" id="2913528">(</span><span class="keyword" id="2913529">func</span><span class="op" id="2913533">(</span><span class="ident" id="2913534">r</span>&nbsp;<span class="builtintype" id="2913536">rune</span><span class="op" id="2913540">)</span>&nbsp;<span class="builtintype" id="2913542">rune</span>&nbsp;<span class="op" id="2913547">{</span>&nbsp;<span class="keyword" id="2913549">return</span>&nbsp;<span class="ident" id="2913556">_case</span><span class="op" id="2913561">.</span><span class="ident" id="2913562">ToLower</span><span class="op" id="2913569">(</span><span class="ident" id="2913570">r</span><span class="op" id="2913571">)</span>&nbsp;<span class="op" id="2913573">}</span><span class="op" id="2913574">,</span>&nbsp;<span class="ident" id="2913576">s</span><span class="op" id="2913577">)</span><br>
<span class="lineno"></span><span class="op" id="2913579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913582">//&nbsp;ToTitleSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2913672">//&nbsp;title&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno">490</span><span class="keyword" id="2913732">func</span>&nbsp;<span class="ident" id="2913737">ToTitleSpecial</span><span class="op" id="2913751">(</span><span class="ident" id="2913752">_case</span>&nbsp;<span class="ident" id="2913758">unicode</span><span class="op" id="2913765">.</span><span class="ident" id="2913766">SpecialCase</span><span class="op" id="2913777">,</span>&nbsp;<span class="ident" id="2913779">s</span>&nbsp;<span class="builtintype" id="2913781">string</span><span class="op" id="2913787">)</span>&nbsp;<span class="builtintype" id="2913789">string</span>&nbsp;<span class="op" id="2913796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913799">return</span>&nbsp;<span class="ident" id="2913806">Map</span><span class="op" id="2913809">(</span><span class="keyword" id="2913810">func</span><span class="op" id="2913814">(</span><span class="ident" id="2913815">r</span>&nbsp;<span class="builtintype" id="2913817">rune</span><span class="op" id="2913821">)</span>&nbsp;<span class="builtintype" id="2913823">rune</span>&nbsp;<span class="op" id="2913828">{</span>&nbsp;<span class="keyword" id="2913830">return</span>&nbsp;<span class="ident" id="2913837">_case</span><span class="op" id="2913842">.</span><span class="ident" id="2913843">ToTitle</span><span class="op" id="2913850">(</span><span class="ident" id="2913851">r</span><span class="op" id="2913852">)</span>&nbsp;<span class="op" id="2913854">}</span><span class="op" id="2913855">,</span>&nbsp;<span class="ident" id="2913857">s</span><span class="op" id="2913858">)</span><br>
<span class="lineno"></span><span class="op" id="2913860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913863">//&nbsp;isSeparator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;rune&nbsp;could&nbsp;mark&nbsp;a&nbsp;word&nbsp;boundary.</span><br>
<span class="lineno">495</span><span class="comment" id="2913931">//&nbsp;TODO:&nbsp;update&nbsp;when&nbsp;package&nbsp;unicode&nbsp;captures&nbsp;more&nbsp;of&nbsp;the&nbsp;properties.</span><br>
<span class="lineno"></span><span class="keyword" id="2914001">func</span>&nbsp;<span class="ident" id="2914006">isSeparator</span><span class="op" id="2914017">(</span><span class="ident" id="2914018">r</span>&nbsp;<span class="builtintype" id="2914020">rune</span><span class="op" id="2914024">)</span>&nbsp;<span class="builtintype" id="2914026">bool</span>&nbsp;<span class="op" id="2914031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914034">//&nbsp;ASCII&nbsp;alphanumerics&nbsp;and&nbsp;underscore&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914092">if</span>&nbsp;<span class="ident" id="2914095">r</span>&nbsp;<span class="op" id="2914097">&lt;=</span>&nbsp;<span class="num" id="2914100">0x7F</span>&nbsp;<span class="op" id="2914105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914109">switch</span>&nbsp;<span class="op" id="2914116">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914120">case</span>&nbsp;<span class="string" id="2914125">&#39;0&#39;</span>&nbsp;<span class="op" id="2914129">&lt;=</span>&nbsp;<span class="ident" id="2914132">r</span>&nbsp;<span class="op" id="2914134">&amp;&amp;</span>&nbsp;<span class="ident" id="2914137">r</span>&nbsp;<span class="op" id="2914139">&lt;=</span>&nbsp;<span class="string" id="2914142">&#39;9&#39;</span><span class="op" id="2914145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914150">return</span>&nbsp;<span class="builtintype" id="2914157">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914165">case</span>&nbsp;<span class="string" id="2914170">&#39;a&#39;</span>&nbsp;<span class="op" id="2914174">&lt;=</span>&nbsp;<span class="ident" id="2914177">r</span>&nbsp;<span class="op" id="2914179">&amp;&amp;</span>&nbsp;<span class="ident" id="2914182">r</span>&nbsp;<span class="op" id="2914184">&lt;=</span>&nbsp;<span class="string" id="2914187">&#39;z&#39;</span><span class="op" id="2914190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914195">return</span>&nbsp;<span class="builtintype" id="2914202">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914210">case</span>&nbsp;<span class="string" id="2914215">&#39;A&#39;</span>&nbsp;<span class="op" id="2914219">&lt;=</span>&nbsp;<span class="ident" id="2914222">r</span>&nbsp;<span class="op" id="2914224">&amp;&amp;</span>&nbsp;<span class="ident" id="2914227">r</span>&nbsp;<span class="op" id="2914229">&lt;=</span>&nbsp;<span class="string" id="2914232">&#39;Z&#39;</span><span class="op" id="2914235">:</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914240">return</span>&nbsp;<span class="builtintype" id="2914247">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914255">case</span>&nbsp;<span class="ident" id="2914260">r</span>&nbsp;<span class="op" id="2914262">==</span>&nbsp;<span class="string" id="2914265">&#39;_&#39;</span><span class="op" id="2914268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914273">return</span>&nbsp;<span class="builtintype" id="2914280">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914292">return</span>&nbsp;<span class="builtintype" id="2914299">true</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914308">//&nbsp;Letters&nbsp;and&nbsp;digits&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914350">if</span>&nbsp;<span class="ident" id="2914353">unicode</span><span class="op" id="2914360">.</span><span class="ident" id="2914361">IsLetter</span><span class="op" id="2914369">(</span><span class="ident" id="2914370">r</span><span class="op" id="2914371">)</span>&nbsp;<span class="op" id="2914373">||</span>&nbsp;<span class="ident" id="2914376">unicode</span><span class="op" id="2914383">.</span><span class="ident" id="2914384">IsDigit</span><span class="op" id="2914391">(</span><span class="ident" id="2914392">r</span><span class="op" id="2914393">)</span>&nbsp;<span class="op" id="2914395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914399">return</span>&nbsp;<span class="builtintype" id="2914406">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914413">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914416">//&nbsp;Otherwise,&nbsp;all&nbsp;we&nbsp;can&nbsp;do&nbsp;for&nbsp;now&nbsp;is&nbsp;treat&nbsp;spaces&nbsp;as&nbsp;separators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914484">return</span>&nbsp;<span class="ident" id="2914491">unicode</span><span class="op" id="2914498">.</span><span class="ident" id="2914499">IsSpace</span><span class="op" id="2914506">(</span><span class="ident" id="2914507">r</span><span class="op" id="2914508">)</span><br>
<span class="lineno"></span><span class="op" id="2914510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914513">//&nbsp;Title&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;that&nbsp;begin&nbsp;words</span><br>
<span class="lineno">520</span><span class="comment" id="2914595">//&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2914626">//</span><br>
<span class="lineno"></span><span class="comment" id="2914629">//&nbsp;BUG:&nbsp;The&nbsp;rule&nbsp;Title&nbsp;uses&nbsp;for&nbsp;word&nbsp;boundaries&nbsp;does&nbsp;not&nbsp;handle&nbsp;Unicode&nbsp;punctuation&nbsp;properly.</span><br>
<span class="lineno"></span><span class="keyword" id="2914723">func</span>&nbsp;<span class="ident" id="2914728">Title</span><span class="op" id="2914733">(</span><span class="ident" id="2914734">s</span>&nbsp;<span class="builtintype" id="2914736">string</span><span class="op" id="2914742">)</span>&nbsp;<span class="builtintype" id="2914744">string</span>&nbsp;<span class="op" id="2914751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914754">//&nbsp;Use&nbsp;a&nbsp;closure&nbsp;here&nbsp;to&nbsp;remember&nbsp;state.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914796">//&nbsp;Hackish&nbsp;but&nbsp;effective.&nbsp;Depends&nbsp;on&nbsp;Map&nbsp;scanning&nbsp;in&nbsp;order&nbsp;and&nbsp;calling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914868">//&nbsp;the&nbsp;closure&nbsp;once&nbsp;per&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914899">prev</span>&nbsp;<span class="op" id="2914904">:=</span>&nbsp;<span class="string" id="2914907">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914912">return</span>&nbsp;<span class="ident" id="2914919">Map</span><span class="op" id="2914922">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914926">func</span><span class="op" id="2914930">(</span><span class="ident" id="2914931">r</span>&nbsp;<span class="builtintype" id="2914933">rune</span><span class="op" id="2914937">)</span>&nbsp;<span class="builtintype" id="2914939">rune</span>&nbsp;<span class="op" id="2914944">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914949">if</span>&nbsp;<span class="ident" id="2914952">isSeparator</span><span class="op" id="2914963">(</span><span class="ident" id="2914964">prev</span><span class="op" id="2914968">)</span>&nbsp;<span class="op" id="2914970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914976">prev</span>&nbsp;<span class="op" id="2914981">=</span>&nbsp;<span class="ident" id="2914983">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914989">return</span>&nbsp;<span class="ident" id="2914996">unicode</span><span class="op" id="2915003">.</span><span class="ident" id="2915004">ToTitle</span><span class="op" id="2915011">(</span><span class="ident" id="2915012">r</span><span class="op" id="2915013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915023">prev</span>&nbsp;<span class="op" id="2915028">=</span>&nbsp;<span class="ident" id="2915030">r</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915035">return</span>&nbsp;<span class="ident" id="2915042">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915046">}</span><span class="op" id="2915047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915051">s</span><span class="op" id="2915052">)</span><br>
<span class="lineno"></span><span class="op" id="2915054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">540</span><span class="comment" id="2915057">//&nbsp;TrimLeftFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2915122">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2915172">func</span>&nbsp;<span class="ident" id="2915177">TrimLeftFunc</span><span class="op" id="2915189">(</span><span class="ident" id="2915190">s</span>&nbsp;<span class="builtintype" id="2915192">string</span><span class="op" id="2915198">,</span>&nbsp;<span class="ident" id="2915200">f</span>&nbsp;<span class="keyword" id="2915202">func</span><span class="op" id="2915206">(</span><span class="builtintype" id="2915207">rune</span><span class="op" id="2915211">)</span>&nbsp;<span class="builtintype" id="2915213">bool</span><span class="op" id="2915217">)</span>&nbsp;<span class="builtintype" id="2915219">string</span>&nbsp;<span class="op" id="2915226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915229">i</span>&nbsp;<span class="op" id="2915231">:=</span>&nbsp;<span class="ident" id="2915234">indexFunc</span><span class="op" id="2915243">(</span><span class="ident" id="2915244">s</span><span class="op" id="2915245">,</span>&nbsp;<span class="ident" id="2915247">f</span><span class="op" id="2915248">,</span>&nbsp;<span class="builtintype" id="2915250">false</span><span class="op" id="2915255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915258">if</span>&nbsp;<span class="ident" id="2915261">i</span>&nbsp;<span class="op" id="2915263">==</span>&nbsp;<span class="op" id="2915266">-</span><span class="num" id="2915267">1</span>&nbsp;<span class="op" id="2915269">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915273">return</span>&nbsp;<span class="string" id="2915280">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915287">return</span>&nbsp;<span class="ident" id="2915294">s</span><span class="op" id="2915295">[</span><span class="ident" id="2915296">i</span><span class="op" id="2915297">:</span><span class="op" id="2915298">]</span><br>
<span class="lineno"></span><span class="op" id="2915300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="2915303">//&nbsp;TrimRightFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2915370">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2915420">func</span>&nbsp;<span class="ident" id="2915425">TrimRightFunc</span><span class="op" id="2915438">(</span><span class="ident" id="2915439">s</span>&nbsp;<span class="builtintype" id="2915441">string</span><span class="op" id="2915447">,</span>&nbsp;<span class="ident" id="2915449">f</span>&nbsp;<span class="keyword" id="2915451">func</span><span class="op" id="2915455">(</span><span class="builtintype" id="2915456">rune</span><span class="op" id="2915460">)</span>&nbsp;<span class="builtintype" id="2915462">bool</span><span class="op" id="2915466">)</span>&nbsp;<span class="builtintype" id="2915468">string</span>&nbsp;<span class="op" id="2915475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915478">i</span>&nbsp;<span class="op" id="2915480">:=</span>&nbsp;<span class="ident" id="2915483">lastIndexFunc</span><span class="op" id="2915496">(</span><span class="ident" id="2915497">s</span><span class="op" id="2915498">,</span>&nbsp;<span class="ident" id="2915500">f</span><span class="op" id="2915501">,</span>&nbsp;<span class="builtintype" id="2915503">false</span><span class="op" id="2915508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915511">if</span>&nbsp;<span class="ident" id="2915514">i</span>&nbsp;<span class="op" id="2915516">&gt;=</span>&nbsp;<span class="num" id="2915519">0</span>&nbsp;<span class="op" id="2915521">&amp;&amp;</span>&nbsp;<span class="ident" id="2915524">s</span><span class="op" id="2915525">[</span><span class="ident" id="2915526">i</span><span class="op" id="2915527">]</span>&nbsp;<span class="op" id="2915529">&gt;=</span>&nbsp;<span class="ident" id="2915532">utf8</span><span class="op" id="2915536">.</span><span class="ident" id="2915537">RuneSelf</span>&nbsp;<span class="op" id="2915546">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915550">_</span><span class="op" id="2915551">,</span>&nbsp;<span class="ident" id="2915553">wid</span>&nbsp;<span class="op" id="2915557">:=</span>&nbsp;<span class="ident" id="2915560">utf8</span><span class="op" id="2915564">.</span><span class="ident" id="2915565">DecodeRuneInString</span><span class="op" id="2915583">(</span><span class="ident" id="2915584">s</span><span class="op" id="2915585">[</span><span class="ident" id="2915586">i</span><span class="op" id="2915587">:</span><span class="op" id="2915588">]</span><span class="op" id="2915589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915593">i</span>&nbsp;<span class="op" id="2915595">+=</span>&nbsp;<span class="ident" id="2915598">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915603">}</span>&nbsp;<span class="keyword" id="2915605">else</span>&nbsp;<span class="op" id="2915610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915614">i</span><span class="op" id="2915615">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915619">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915622">return</span>&nbsp;<span class="ident" id="2915629">s</span><span class="op" id="2915630">[</span><span class="num" id="2915631">0</span><span class="op" id="2915632">:</span><span class="ident" id="2915633">i</span><span class="op" id="2915634">]</span><br>
<span class="lineno"></span><span class="op" id="2915636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915639">//&nbsp;TrimFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2915700">//&nbsp;and&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno">565</span><span class="keyword" id="2915763">func</span>&nbsp;<span class="ident" id="2915768">TrimFunc</span><span class="op" id="2915776">(</span><span class="ident" id="2915777">s</span>&nbsp;<span class="builtintype" id="2915779">string</span><span class="op" id="2915785">,</span>&nbsp;<span class="ident" id="2915787">f</span>&nbsp;<span class="keyword" id="2915789">func</span><span class="op" id="2915793">(</span><span class="builtintype" id="2915794">rune</span><span class="op" id="2915798">)</span>&nbsp;<span class="builtintype" id="2915800">bool</span><span class="op" id="2915804">)</span>&nbsp;<span class="builtintype" id="2915806">string</span>&nbsp;<span class="op" id="2915813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915816">return</span>&nbsp;<span class="ident" id="2915823">TrimRightFunc</span><span class="op" id="2915836">(</span><span class="ident" id="2915837">TrimLeftFunc</span><span class="op" id="2915849">(</span><span class="ident" id="2915850">s</span><span class="op" id="2915851">,</span>&nbsp;<span class="ident" id="2915853">f</span><span class="op" id="2915854">)</span><span class="op" id="2915855">,</span>&nbsp;<span class="ident" id="2915857">f</span><span class="op" id="2915858">)</span><br>
<span class="lineno"></span><span class="op" id="2915860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915863">//&nbsp;IndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;first&nbsp;Unicode</span><br>
<span class="lineno">570</span><span class="comment" id="2915922">//&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2915971">func</span>&nbsp;<span class="ident" id="2915976">IndexFunc</span><span class="op" id="2915985">(</span><span class="ident" id="2915986">s</span>&nbsp;<span class="builtintype" id="2915988">string</span><span class="op" id="2915994">,</span>&nbsp;<span class="ident" id="2915996">f</span>&nbsp;<span class="keyword" id="2915998">func</span><span class="op" id="2916002">(</span><span class="builtintype" id="2916003">rune</span><span class="op" id="2916007">)</span>&nbsp;<span class="builtintype" id="2916009">bool</span><span class="op" id="2916013">)</span>&nbsp;<span class="builtintype" id="2916015">int</span>&nbsp;<span class="op" id="2916019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916022">return</span>&nbsp;<span class="ident" id="2916029">indexFunc</span><span class="op" id="2916038">(</span><span class="ident" id="2916039">s</span><span class="op" id="2916040">,</span>&nbsp;<span class="ident" id="2916042">f</span><span class="op" id="2916043">,</span>&nbsp;<span class="builtintype" id="2916045">true</span><span class="op" id="2916049">)</span><br>
<span class="lineno"></span><span class="op" id="2916051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2916054">//&nbsp;LastIndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="2916108">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2916165">func</span>&nbsp;<span class="ident" id="2916170">LastIndexFunc</span><span class="op" id="2916183">(</span><span class="ident" id="2916184">s</span>&nbsp;<span class="builtintype" id="2916186">string</span><span class="op" id="2916192">,</span>&nbsp;<span class="ident" id="2916194">f</span>&nbsp;<span class="keyword" id="2916196">func</span><span class="op" id="2916200">(</span><span class="builtintype" id="2916201">rune</span><span class="op" id="2916205">)</span>&nbsp;<span class="builtintype" id="2916207">bool</span><span class="op" id="2916211">)</span>&nbsp;<span class="builtintype" id="2916213">int</span>&nbsp;<span class="op" id="2916217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916220">return</span>&nbsp;<span class="ident" id="2916227">lastIndexFunc</span><span class="op" id="2916240">(</span><span class="ident" id="2916241">s</span><span class="op" id="2916242">,</span>&nbsp;<span class="ident" id="2916244">f</span><span class="op" id="2916245">,</span>&nbsp;<span class="builtintype" id="2916247">true</span><span class="op" id="2916251">)</span><br>
<span class="lineno"></span><span class="op" id="2916253">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2916256">//&nbsp;indexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;IndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2916309">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2916365">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2916378">func</span>&nbsp;<span class="ident" id="2916383">indexFunc</span><span class="op" id="2916392">(</span><span class="ident" id="2916393">s</span>&nbsp;<span class="builtintype" id="2916395">string</span><span class="op" id="2916401">,</span>&nbsp;<span class="ident" id="2916403">f</span>&nbsp;<span class="keyword" id="2916405">func</span><span class="op" id="2916409">(</span><span class="builtintype" id="2916410">rune</span><span class="op" id="2916414">)</span>&nbsp;<span class="builtintype" id="2916416">bool</span><span class="op" id="2916420">,</span>&nbsp;<span class="ident" id="2916422">truth</span>&nbsp;<span class="builtintype" id="2916428">bool</span><span class="op" id="2916432">)</span>&nbsp;<span class="builtintype" id="2916434">int</span>&nbsp;<span class="op" id="2916438">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916441">start</span>&nbsp;<span class="op" id="2916447">:=</span>&nbsp;<span class="num" id="2916450">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916453">for</span>&nbsp;<span class="ident" id="2916457">start</span>&nbsp;<span class="op" id="2916463">&lt;</span>&nbsp;<span class="builtinfunc" id="2916465">len</span><span class="op" id="2916468">(</span><span class="ident" id="2916469">s</span><span class="op" id="2916470">)</span>&nbsp;<span class="op" id="2916472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916476">wid</span>&nbsp;<span class="op" id="2916480">:=</span>&nbsp;<span class="num" id="2916483">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916487">r</span>&nbsp;<span class="op" id="2916489">:=</span>&nbsp;<span class="builtintype" id="2916492">rune</span><span class="op" id="2916496">(</span><span class="ident" id="2916497">s</span><span class="op" id="2916498">[</span><span class="ident" id="2916499">start</span><span class="op" id="2916504">]</span><span class="op" id="2916505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916509">if</span>&nbsp;<span class="ident" id="2916512">r</span>&nbsp;<span class="op" id="2916514">&gt;=</span>&nbsp;<span class="ident" id="2916517">utf8</span><span class="op" id="2916521">.</span><span class="ident" id="2916522">RuneSelf</span>&nbsp;<span class="op" id="2916531">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916536">r</span><span class="op" id="2916537">,</span>&nbsp;<span class="ident" id="2916539">wid</span>&nbsp;<span class="op" id="2916543">=</span>&nbsp;<span class="ident" id="2916545">utf8</span><span class="op" id="2916549">.</span><span class="ident" id="2916550">DecodeRuneInString</span><span class="op" id="2916568">(</span><span class="ident" id="2916569">s</span><span class="op" id="2916570">[</span><span class="ident" id="2916571">start</span><span class="op" id="2916576">:</span><span class="op" id="2916577">]</span><span class="op" id="2916578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916586">if</span>&nbsp;<span class="ident" id="2916589">f</span><span class="op" id="2916590">(</span><span class="ident" id="2916591">r</span><span class="op" id="2916592">)</span>&nbsp;<span class="op" id="2916594">==</span>&nbsp;<span class="ident" id="2916597">truth</span>&nbsp;<span class="op" id="2916603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916608">return</span>&nbsp;<span class="ident" id="2916615">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916623">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916627">start</span>&nbsp;<span class="op" id="2916633">+=</span>&nbsp;<span class="ident" id="2916636">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916644">return</span>&nbsp;<span class="op" id="2916651">-</span><span class="num" id="2916652">1</span><br>
<span class="lineno"></span><span class="op" id="2916654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="2916657">//&nbsp;lastIndexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;LastIndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2916718">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2916774">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2916787">func</span>&nbsp;<span class="ident" id="2916792">lastIndexFunc</span><span class="op" id="2916805">(</span><span class="ident" id="2916806">s</span>&nbsp;<span class="builtintype" id="2916808">string</span><span class="op" id="2916814">,</span>&nbsp;<span class="ident" id="2916816">f</span>&nbsp;<span class="keyword" id="2916818">func</span><span class="op" id="2916822">(</span><span class="builtintype" id="2916823">rune</span><span class="op" id="2916827">)</span>&nbsp;<span class="builtintype" id="2916829">bool</span><span class="op" id="2916833">,</span>&nbsp;<span class="ident" id="2916835">truth</span>&nbsp;<span class="builtintype" id="2916841">bool</span><span class="op" id="2916845">)</span>&nbsp;<span class="builtintype" id="2916847">int</span>&nbsp;<span class="op" id="2916851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916854">for</span>&nbsp;<span class="ident" id="2916858">i</span>&nbsp;<span class="op" id="2916860">:=</span>&nbsp;<span class="builtinfunc" id="2916863">len</span><span class="op" id="2916866">(</span><span class="ident" id="2916867">s</span><span class="op" id="2916868">)</span><span class="op" id="2916869">;</span>&nbsp;<span class="ident" id="2916871">i</span>&nbsp;<span class="op" id="2916873">&gt;</span>&nbsp;<span class="num" id="2916875">0</span><span class="op" id="2916876">;</span>&nbsp;<span class="op" id="2916878">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916882">r</span><span class="op" id="2916883">,</span>&nbsp;<span class="ident" id="2916885">size</span>&nbsp;<span class="op" id="2916890">:=</span>&nbsp;<span class="ident" id="2916893">utf8</span><span class="op" id="2916897">.</span><span class="ident" id="2916898">DecodeLastRuneInString</span><span class="op" id="2916920">(</span><span class="ident" id="2916921">s</span><span class="op" id="2916922">[</span><span class="num" id="2916923">0</span><span class="op" id="2916924">:</span><span class="ident" id="2916925">i</span><span class="op" id="2916926">]</span><span class="op" id="2916927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916931">i</span>&nbsp;<span class="op" id="2916933">-=</span>&nbsp;<span class="ident" id="2916936">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916943">if</span>&nbsp;<span class="ident" id="2916946">f</span><span class="op" id="2916947">(</span><span class="ident" id="2916948">r</span><span class="op" id="2916949">)</span>&nbsp;<span class="op" id="2916951">==</span>&nbsp;<span class="ident" id="2916954">truth</span>&nbsp;<span class="op" id="2916960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916965">return</span>&nbsp;<span class="ident" id="2916972">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916976">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916982">return</span>&nbsp;<span class="op" id="2916989">-</span><span class="num" id="2916990">1</span><br>
<span class="lineno"></span><span class="op" id="2916992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2916995">func</span>&nbsp;<span class="ident" id="2917000">makeCutsetFunc</span><span class="op" id="2917014">(</span><span class="ident" id="2917015">cutset</span>&nbsp;<span class="builtintype" id="2917022">string</span><span class="op" id="2917028">)</span>&nbsp;<span class="keyword" id="2917030">func</span><span class="op" id="2917034">(</span><span class="builtintype" id="2917035">rune</span><span class="op" id="2917039">)</span>&nbsp;<span class="builtintype" id="2917041">bool</span>&nbsp;<span class="op" id="2917046">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917049">return</span>&nbsp;<span class="keyword" id="2917056">func</span><span class="op" id="2917060">(</span><span class="ident" id="2917061">r</span>&nbsp;<span class="builtintype" id="2917063">rune</span><span class="op" id="2917067">)</span>&nbsp;<span class="builtintype" id="2917069">bool</span>&nbsp;<span class="op" id="2917074">{</span>&nbsp;<span class="keyword" id="2917076">return</span>&nbsp;<span class="ident" id="2917083">IndexRune</span><span class="op" id="2917092">(</span><span class="ident" id="2917093">cutset</span><span class="op" id="2917099">,</span>&nbsp;<span class="ident" id="2917101">r</span><span class="op" id="2917102">)</span>&nbsp;<span class="op" id="2917104">&gt;=</span>&nbsp;<span class="num" id="2917107">0</span>&nbsp;<span class="op" id="2917109">}</span><br>
<span class="lineno"></span><span class="op" id="2917111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917114">//&nbsp;Trim&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2917175">//&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno">620</span><span class="keyword" id="2917236">func</span>&nbsp;<span class="ident" id="2917241">Trim</span><span class="op" id="2917245">(</span><span class="ident" id="2917246">s</span>&nbsp;<span class="builtintype" id="2917248">string</span><span class="op" id="2917254">,</span>&nbsp;<span class="ident" id="2917256">cutset</span>&nbsp;<span class="builtintype" id="2917263">string</span><span class="op" id="2917269">)</span>&nbsp;<span class="builtintype" id="2917271">string</span>&nbsp;<span class="op" id="2917278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917281">if</span>&nbsp;<span class="ident" id="2917284">s</span>&nbsp;<span class="op" id="2917286">==</span>&nbsp;<span class="string" id="2917289">&#34;&#34;</span>&nbsp;<span class="op" id="2917292">||</span>&nbsp;<span class="ident" id="2917295">cutset</span>&nbsp;<span class="op" id="2917302">==</span>&nbsp;<span class="string" id="2917305">&#34;&#34;</span>&nbsp;<span class="op" id="2917308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917312">return</span>&nbsp;<span class="ident" id="2917319">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917325">return</span>&nbsp;<span class="ident" id="2917332">TrimFunc</span><span class="op" id="2917340">(</span><span class="ident" id="2917341">s</span><span class="op" id="2917342">,</span>&nbsp;<span class="ident" id="2917344">makeCutsetFunc</span><span class="op" id="2917358">(</span><span class="ident" id="2917359">cutset</span><span class="op" id="2917365">)</span><span class="op" id="2917366">)</span><br>
<span class="lineno">625</span><span class="op" id="2917368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917371">//&nbsp;TrimLeft&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2917432">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2917484">func</span>&nbsp;<span class="ident" id="2917489">TrimLeft</span><span class="op" id="2917497">(</span><span class="ident" id="2917498">s</span>&nbsp;<span class="builtintype" id="2917500">string</span><span class="op" id="2917506">,</span>&nbsp;<span class="ident" id="2917508">cutset</span>&nbsp;<span class="builtintype" id="2917515">string</span><span class="op" id="2917521">)</span>&nbsp;<span class="builtintype" id="2917523">string</span>&nbsp;<span class="op" id="2917530">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917533">if</span>&nbsp;<span class="ident" id="2917536">s</span>&nbsp;<span class="op" id="2917538">==</span>&nbsp;<span class="string" id="2917541">&#34;&#34;</span>&nbsp;<span class="op" id="2917544">||</span>&nbsp;<span class="ident" id="2917547">cutset</span>&nbsp;<span class="op" id="2917554">==</span>&nbsp;<span class="string" id="2917557">&#34;&#34;</span>&nbsp;<span class="op" id="2917560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917564">return</span>&nbsp;<span class="ident" id="2917571">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917577">return</span>&nbsp;<span class="ident" id="2917584">TrimLeftFunc</span><span class="op" id="2917596">(</span><span class="ident" id="2917597">s</span><span class="op" id="2917598">,</span>&nbsp;<span class="ident" id="2917600">makeCutsetFunc</span><span class="op" id="2917614">(</span><span class="ident" id="2917615">cutset</span><span class="op" id="2917621">)</span><span class="op" id="2917622">)</span><br>
<span class="lineno"></span><span class="op" id="2917624">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="2917627">//&nbsp;TrimRight&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2917691">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2917743">func</span>&nbsp;<span class="ident" id="2917748">TrimRight</span><span class="op" id="2917757">(</span><span class="ident" id="2917758">s</span>&nbsp;<span class="builtintype" id="2917760">string</span><span class="op" id="2917766">,</span>&nbsp;<span class="ident" id="2917768">cutset</span>&nbsp;<span class="builtintype" id="2917775">string</span><span class="op" id="2917781">)</span>&nbsp;<span class="builtintype" id="2917783">string</span>&nbsp;<span class="op" id="2917790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917793">if</span>&nbsp;<span class="ident" id="2917796">s</span>&nbsp;<span class="op" id="2917798">==</span>&nbsp;<span class="string" id="2917801">&#34;&#34;</span>&nbsp;<span class="op" id="2917804">||</span>&nbsp;<span class="ident" id="2917807">cutset</span>&nbsp;<span class="op" id="2917814">==</span>&nbsp;<span class="string" id="2917817">&#34;&#34;</span>&nbsp;<span class="op" id="2917820">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917824">return</span>&nbsp;<span class="ident" id="2917831">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917837">return</span>&nbsp;<span class="ident" id="2917844">TrimRightFunc</span><span class="op" id="2917857">(</span><span class="ident" id="2917858">s</span><span class="op" id="2917859">,</span>&nbsp;<span class="ident" id="2917861">makeCutsetFunc</span><span class="op" id="2917875">(</span><span class="ident" id="2917876">cutset</span><span class="op" id="2917882">)</span><span class="op" id="2917883">)</span><br>
<span class="lineno"></span><span class="op" id="2917885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="2917888">//&nbsp;TrimSpace&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2917951">//&nbsp;and&nbsp;trailing&nbsp;white&nbsp;space&nbsp;removed,&nbsp;as&nbsp;defined&nbsp;by&nbsp;Unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="2918011">func</span>&nbsp;<span class="ident" id="2918016">TrimSpace</span><span class="op" id="2918025">(</span><span class="ident" id="2918026">s</span>&nbsp;<span class="builtintype" id="2918028">string</span><span class="op" id="2918034">)</span>&nbsp;<span class="builtintype" id="2918036">string</span>&nbsp;<span class="op" id="2918043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918046">return</span>&nbsp;<span class="ident" id="2918053">TrimFunc</span><span class="op" id="2918061">(</span><span class="ident" id="2918062">s</span><span class="op" id="2918063">,</span>&nbsp;<span class="ident" id="2918065">unicode</span><span class="op" id="2918072">.</span><span class="ident" id="2918073">IsSpace</span><span class="op" id="2918080">)</span><br>
<span class="lineno"></span><span class="op" id="2918082">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span><span class="comment" id="2918085">//&nbsp;TrimPrefix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;leading&nbsp;prefix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2918153">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;start&nbsp;with&nbsp;prefix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2918213">func</span>&nbsp;<span class="ident" id="2918218">TrimPrefix</span><span class="op" id="2918228">(</span><span class="ident" id="2918229">s</span><span class="op" id="2918230">,</span>&nbsp;<span class="ident" id="2918232">prefix</span>&nbsp;<span class="builtintype" id="2918239">string</span><span class="op" id="2918245">)</span>&nbsp;<span class="builtintype" id="2918247">string</span>&nbsp;<span class="op" id="2918254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918257">if</span>&nbsp;<span class="ident" id="2918260">HasPrefix</span><span class="op" id="2918269">(</span><span class="ident" id="2918270">s</span><span class="op" id="2918271">,</span>&nbsp;<span class="ident" id="2918273">prefix</span><span class="op" id="2918279">)</span>&nbsp;<span class="op" id="2918281">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918285">return</span>&nbsp;<span class="ident" id="2918292">s</span><span class="op" id="2918293">[</span><span class="builtinfunc" id="2918294">len</span><span class="op" id="2918297">(</span><span class="ident" id="2918298">prefix</span><span class="op" id="2918304">)</span><span class="op" id="2918305">:</span><span class="op" id="2918306">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2918309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918312">return</span>&nbsp;<span class="ident" id="2918319">s</span><br>
<span class="lineno"></span><span class="op" id="2918321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="2918324">//&nbsp;TrimSuffix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;trailing&nbsp;suffix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2918393">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;end&nbsp;with&nbsp;suffix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2918451">func</span>&nbsp;<span class="ident" id="2918456">TrimSuffix</span><span class="op" id="2918466">(</span><span class="ident" id="2918467">s</span><span class="op" id="2918468">,</span>&nbsp;<span class="ident" id="2918470">suffix</span>&nbsp;<span class="builtintype" id="2918477">string</span><span class="op" id="2918483">)</span>&nbsp;<span class="builtintype" id="2918485">string</span>&nbsp;<span class="op" id="2918492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918495">if</span>&nbsp;<span class="ident" id="2918498">HasSuffix</span><span class="op" id="2918507">(</span><span class="ident" id="2918508">s</span><span class="op" id="2918509">,</span>&nbsp;<span class="ident" id="2918511">suffix</span><span class="op" id="2918517">)</span>&nbsp;<span class="op" id="2918519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918523">return</span>&nbsp;<span class="ident" id="2918530">s</span><span class="op" id="2918531">[</span><span class="op" id="2918532">:</span><span class="builtinfunc" id="2918533">len</span><span class="op" id="2918536">(</span><span class="ident" id="2918537">s</span><span class="op" id="2918538">)</span><span class="op" id="2918539">-</span><span class="builtinfunc" id="2918540">len</span><span class="op" id="2918543">(</span><span class="ident" id="2918544">suffix</span><span class="op" id="2918550">)</span><span class="op" id="2918551">]</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2918554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918557">return</span>&nbsp;<span class="ident" id="2918564">s</span><br>
<span class="lineno"></span><span class="op" id="2918566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2918569">//&nbsp;Replace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;the&nbsp;first&nbsp;n</span><br>
<span class="lineno">670</span><span class="comment" id="2918628">//&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;old&nbsp;replaced&nbsp;by&nbsp;new.</span><br>
<span class="lineno"></span><span class="comment" id="2918681">//&nbsp;If&nbsp;old&nbsp;is&nbsp;empty,&nbsp;it&nbsp;matches&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2918743">//&nbsp;and&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence,&nbsp;yielding&nbsp;up&nbsp;to&nbsp;k+1&nbsp;replacements</span><br>
<span class="lineno"></span><span class="comment" id="2918809">//&nbsp;for&nbsp;a&nbsp;k-rune&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2918833">//&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;there&nbsp;is&nbsp;no&nbsp;limit&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno">675</span><span class="keyword" id="2918895">func</span>&nbsp;<span class="ident" id="2918900">Replace</span><span class="op" id="2918907">(</span><span class="ident" id="2918908">s</span><span class="op" id="2918909">,</span>&nbsp;<span class="ident" id="2918911">old</span><span class="op" id="2918914">,</span>&nbsp;<span class="builtinfunc" id="2918916">new</span>&nbsp;<span class="builtintype" id="2918920">string</span><span class="op" id="2918926">,</span>&nbsp;<span class="ident" id="2918928">n</span>&nbsp;<span class="builtintype" id="2918930">int</span><span class="op" id="2918933">)</span>&nbsp;<span class="builtintype" id="2918935">string</span>&nbsp;<span class="op" id="2918942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918945">if</span>&nbsp;<span class="ident" id="2918948">old</span>&nbsp;<span class="op" id="2918952">==</span>&nbsp;<span class="builtinfunc" id="2918955">new</span>&nbsp;<span class="op" id="2918959">||</span>&nbsp;<span class="ident" id="2918962">n</span>&nbsp;<span class="op" id="2918964">==</span>&nbsp;<span class="num" id="2918967">0</span>&nbsp;<span class="op" id="2918969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2918973">return</span>&nbsp;<span class="ident" id="2918980">s</span>&nbsp;<span class="comment" id="2918982">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2919007">//&nbsp;Compute&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919043">if</span>&nbsp;<span class="ident" id="2919046">m</span>&nbsp;<span class="op" id="2919048">:=</span>&nbsp;<span class="ident" id="2919051">Count</span><span class="op" id="2919056">(</span><span class="ident" id="2919057">s</span><span class="op" id="2919058">,</span>&nbsp;<span class="ident" id="2919060">old</span><span class="op" id="2919063">)</span><span class="op" id="2919064">;</span>&nbsp;<span class="ident" id="2919066">m</span>&nbsp;<span class="op" id="2919068">==</span>&nbsp;<span class="num" id="2919071">0</span>&nbsp;<span class="op" id="2919073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919077">return</span>&nbsp;<span class="ident" id="2919084">s</span>&nbsp;<span class="comment" id="2919086">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919107">}</span>&nbsp;<span class="keyword" id="2919109">else</span>&nbsp;<span class="keyword" id="2919114">if</span>&nbsp;<span class="ident" id="2919117">n</span>&nbsp;<span class="op" id="2919119">&lt;</span>&nbsp;<span class="num" id="2919121">0</span>&nbsp;<span class="op" id="2919123">||</span>&nbsp;<span class="ident" id="2919126">m</span>&nbsp;<span class="op" id="2919128">&lt;</span>&nbsp;<span class="ident" id="2919130">n</span>&nbsp;<span class="op" id="2919132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919136">n</span>&nbsp;<span class="op" id="2919138">=</span>&nbsp;<span class="ident" id="2919140">m</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2919147">//&nbsp;Apply&nbsp;replacements&nbsp;to&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919181">t</span>&nbsp;<span class="op" id="2919183">:=</span>&nbsp;<span class="builtinfunc" id="2919186">make</span><span class="op" id="2919190">(</span><span class="op" id="2919191">[</span><span class="op" id="2919192">]</span><span class="builtintype" id="2919193">byte</span><span class="op" id="2919197">,</span>&nbsp;<span class="builtinfunc" id="2919199">len</span><span class="op" id="2919202">(</span><span class="ident" id="2919203">s</span><span class="op" id="2919204">)</span><span class="op" id="2919205">+</span><span class="ident" id="2919206">n</span><span class="op" id="2919207">*</span><span class="op" id="2919208">(</span><span class="builtinfunc" id="2919209">len</span><span class="op" id="2919212">(</span><span class="builtinfunc" id="2919213">new</span><span class="op" id="2919216">)</span><span class="op" id="2919217">-</span><span class="builtinfunc" id="2919218">len</span><span class="op" id="2919221">(</span><span class="ident" id="2919222">old</span><span class="op" id="2919225">)</span><span class="op" id="2919226">)</span><span class="op" id="2919227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919230">w</span>&nbsp;<span class="op" id="2919232">:=</span>&nbsp;<span class="num" id="2919235">0</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919238">start</span>&nbsp;<span class="op" id="2919244">:=</span>&nbsp;<span class="num" id="2919247">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919250">for</span>&nbsp;<span class="ident" id="2919254">i</span>&nbsp;<span class="op" id="2919256">:=</span>&nbsp;<span class="num" id="2919259">0</span><span class="op" id="2919260">;</span>&nbsp;<span class="ident" id="2919262">i</span>&nbsp;<span class="op" id="2919264">&lt;</span>&nbsp;<span class="ident" id="2919266">n</span><span class="op" id="2919267">;</span>&nbsp;<span class="ident" id="2919269">i</span><span class="op" id="2919270">++</span>&nbsp;<span class="op" id="2919273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919277">j</span>&nbsp;<span class="op" id="2919279">:=</span>&nbsp;<span class="ident" id="2919282">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919290">if</span>&nbsp;<span class="builtinfunc" id="2919293">len</span><span class="op" id="2919296">(</span><span class="ident" id="2919297">old</span><span class="op" id="2919300">)</span>&nbsp;<span class="op" id="2919302">==</span>&nbsp;<span class="num" id="2919305">0</span>&nbsp;<span class="op" id="2919307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919312">if</span>&nbsp;<span class="ident" id="2919315">i</span>&nbsp;<span class="op" id="2919317">&gt;</span>&nbsp;<span class="num" id="2919319">0</span>&nbsp;<span class="op" id="2919321">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919327">_</span><span class="op" id="2919328">,</span>&nbsp;<span class="ident" id="2919330">wid</span>&nbsp;<span class="op" id="2919334">:=</span>&nbsp;<span class="ident" id="2919337">utf8</span><span class="op" id="2919341">.</span><span class="ident" id="2919342">DecodeRuneInString</span><span class="op" id="2919360">(</span><span class="ident" id="2919361">s</span><span class="op" id="2919362">[</span><span class="ident" id="2919363">start</span><span class="op" id="2919368">:</span><span class="op" id="2919369">]</span><span class="op" id="2919370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919376">j</span>&nbsp;<span class="op" id="2919378">+=</span>&nbsp;<span class="ident" id="2919381">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919392">}</span>&nbsp;<span class="keyword" id="2919394">else</span>&nbsp;<span class="op" id="2919399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919404">j</span>&nbsp;<span class="op" id="2919406">+=</span>&nbsp;<span class="ident" id="2919409">Index</span><span class="op" id="2919414">(</span><span class="ident" id="2919415">s</span><span class="op" id="2919416">[</span><span class="ident" id="2919417">start</span><span class="op" id="2919422">:</span><span class="op" id="2919423">]</span><span class="op" id="2919424">,</span>&nbsp;<span class="ident" id="2919426">old</span><span class="op" id="2919429">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919437">w</span>&nbsp;<span class="op" id="2919439">+=</span>&nbsp;<span class="builtinfunc" id="2919442">copy</span><span class="op" id="2919446">(</span><span class="ident" id="2919447">t</span><span class="op" id="2919448">[</span><span class="ident" id="2919449">w</span><span class="op" id="2919450">:</span><span class="op" id="2919451">]</span><span class="op" id="2919452">,</span>&nbsp;<span class="ident" id="2919454">s</span><span class="op" id="2919455">[</span><span class="ident" id="2919456">start</span><span class="op" id="2919461">:</span><span class="ident" id="2919462">j</span><span class="op" id="2919463">]</span><span class="op" id="2919464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919468">w</span>&nbsp;<span class="op" id="2919470">+=</span>&nbsp;<span class="builtinfunc" id="2919473">copy</span><span class="op" id="2919477">(</span><span class="ident" id="2919478">t</span><span class="op" id="2919479">[</span><span class="ident" id="2919480">w</span><span class="op" id="2919481">:</span><span class="op" id="2919482">]</span><span class="op" id="2919483">,</span>&nbsp;<span class="builtinfunc" id="2919485">new</span><span class="op" id="2919488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919492">start</span>&nbsp;<span class="op" id="2919498">=</span>&nbsp;<span class="ident" id="2919500">j</span>&nbsp;<span class="op" id="2919502">+</span>&nbsp;<span class="builtinfunc" id="2919504">len</span><span class="op" id="2919507">(</span><span class="ident" id="2919508">old</span><span class="op" id="2919511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919514">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919517">w</span>&nbsp;<span class="op" id="2919519">+=</span>&nbsp;<span class="builtinfunc" id="2919522">copy</span><span class="op" id="2919526">(</span><span class="ident" id="2919527">t</span><span class="op" id="2919528">[</span><span class="ident" id="2919529">w</span><span class="op" id="2919530">:</span><span class="op" id="2919531">]</span><span class="op" id="2919532">,</span>&nbsp;<span class="ident" id="2919534">s</span><span class="op" id="2919535">[</span><span class="ident" id="2919536">start</span><span class="op" id="2919541">:</span><span class="op" id="2919542">]</span><span class="op" id="2919543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919546">return</span>&nbsp;<span class="builtintype" id="2919553">string</span><span class="op" id="2919559">(</span><span class="ident" id="2919560">t</span><span class="op" id="2919561">[</span><span class="num" id="2919562">0</span><span class="op" id="2919563">:</span><span class="ident" id="2919564">w</span><span class="op" id="2919565">]</span><span class="op" id="2919566">)</span><br>
<span class="lineno"></span><span class="op" id="2919568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919571">//&nbsp;EqualFold&nbsp;reports&nbsp;whether&nbsp;s&nbsp;and&nbsp;t,&nbsp;interpreted&nbsp;as&nbsp;UTF-8&nbsp;strings,</span><br>
<span class="lineno">710</span><span class="comment" id="2919639">//&nbsp;are&nbsp;equal&nbsp;under&nbsp;Unicode&nbsp;case-folding.</span><br>
<span class="lineno"></span><span class="keyword" id="2919680">func</span>&nbsp;<span class="ident" id="2919685">EqualFold</span><span class="op" id="2919694">(</span><span class="ident" id="2919695">s</span><span class="op" id="2919696">,</span>&nbsp;<span class="ident" id="2919698">t</span>&nbsp;<span class="builtintype" id="2919700">string</span><span class="op" id="2919706">)</span>&nbsp;<span class="builtintype" id="2919708">bool</span>&nbsp;<span class="op" id="2919713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919716">for</span>&nbsp;<span class="ident" id="2919720">s</span>&nbsp;<span class="op" id="2919722">!=</span>&nbsp;<span class="string" id="2919725">&#34;&#34;</span>&nbsp;<span class="op" id="2919728">&amp;&amp;</span>&nbsp;<span class="ident" id="2919731">t</span>&nbsp;<span class="op" id="2919733">!=</span>&nbsp;<span class="string" id="2919736">&#34;&#34;</span>&nbsp;<span class="op" id="2919739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2919743">//&nbsp;Extract&nbsp;first&nbsp;rune&nbsp;from&nbsp;each&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919785">var</span>&nbsp;<span class="ident" id="2919789">sr</span><span class="op" id="2919791">,</span>&nbsp;<span class="ident" id="2919793">tr</span>&nbsp;<span class="builtintype" id="2919796">rune</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919803">if</span>&nbsp;<span class="ident" id="2919806">s</span><span class="op" id="2919807">[</span><span class="num" id="2919808">0</span><span class="op" id="2919809">]</span>&nbsp;<span class="op" id="2919811">&lt;</span>&nbsp;<span class="ident" id="2919813">utf8</span><span class="op" id="2919817">.</span><span class="ident" id="2919818">RuneSelf</span>&nbsp;<span class="op" id="2919827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919832">sr</span><span class="op" id="2919834">,</span>&nbsp;<span class="ident" id="2919836">s</span>&nbsp;<span class="op" id="2919838">=</span>&nbsp;<span class="builtintype" id="2919840">rune</span><span class="op" id="2919844">(</span><span class="ident" id="2919845">s</span><span class="op" id="2919846">[</span><span class="num" id="2919847">0</span><span class="op" id="2919848">]</span><span class="op" id="2919849">)</span><span class="op" id="2919850">,</span>&nbsp;<span class="ident" id="2919852">s</span><span class="op" id="2919853">[</span><span class="num" id="2919854">1</span><span class="op" id="2919855">:</span><span class="op" id="2919856">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919860">}</span>&nbsp;<span class="keyword" id="2919862">else</span>&nbsp;<span class="op" id="2919867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919872">r</span><span class="op" id="2919873">,</span>&nbsp;<span class="ident" id="2919875">size</span>&nbsp;<span class="op" id="2919880">:=</span>&nbsp;<span class="ident" id="2919883">utf8</span><span class="op" id="2919887">.</span><span class="ident" id="2919888">DecodeRuneInString</span><span class="op" id="2919906">(</span><span class="ident" id="2919907">s</span><span class="op" id="2919908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919913">sr</span><span class="op" id="2919915">,</span>&nbsp;<span class="ident" id="2919917">s</span>&nbsp;<span class="op" id="2919919">=</span>&nbsp;<span class="ident" id="2919921">r</span><span class="op" id="2919922">,</span>&nbsp;<span class="ident" id="2919924">s</span><span class="op" id="2919925">[</span><span class="ident" id="2919926">size</span><span class="op" id="2919930">:</span><span class="op" id="2919931">]</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919939">if</span>&nbsp;<span class="ident" id="2919942">t</span><span class="op" id="2919943">[</span><span class="num" id="2919944">0</span><span class="op" id="2919945">]</span>&nbsp;<span class="op" id="2919947">&lt;</span>&nbsp;<span class="ident" id="2919949">utf8</span><span class="op" id="2919953">.</span><span class="ident" id="2919954">RuneSelf</span>&nbsp;<span class="op" id="2919963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919968">tr</span><span class="op" id="2919970">,</span>&nbsp;<span class="ident" id="2919972">t</span>&nbsp;<span class="op" id="2919974">=</span>&nbsp;<span class="builtintype" id="2919976">rune</span><span class="op" id="2919980">(</span><span class="ident" id="2919981">t</span><span class="op" id="2919982">[</span><span class="num" id="2919983">0</span><span class="op" id="2919984">]</span><span class="op" id="2919985">)</span><span class="op" id="2919986">,</span>&nbsp;<span class="ident" id="2919988">t</span><span class="op" id="2919989">[</span><span class="num" id="2919990">1</span><span class="op" id="2919991">:</span><span class="op" id="2919992">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919996">}</span>&nbsp;<span class="keyword" id="2919998">else</span>&nbsp;<span class="op" id="2920003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920008">r</span><span class="op" id="2920009">,</span>&nbsp;<span class="ident" id="2920011">size</span>&nbsp;<span class="op" id="2920016">:=</span>&nbsp;<span class="ident" id="2920019">utf8</span><span class="op" id="2920023">.</span><span class="ident" id="2920024">DecodeRuneInString</span><span class="op" id="2920042">(</span><span class="ident" id="2920043">t</span><span class="op" id="2920044">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920049">tr</span><span class="op" id="2920051">,</span>&nbsp;<span class="ident" id="2920053">t</span>&nbsp;<span class="op" id="2920055">=</span>&nbsp;<span class="ident" id="2920057">r</span><span class="op" id="2920058">,</span>&nbsp;<span class="ident" id="2920060">t</span><span class="op" id="2920061">[</span><span class="ident" id="2920062">size</span><span class="op" id="2920066">:</span><span class="op" id="2920067">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920076">//&nbsp;If&nbsp;they&nbsp;match,&nbsp;keep&nbsp;going;&nbsp;if&nbsp;not,&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920131">//&nbsp;Easy&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920147">if</span>&nbsp;<span class="ident" id="2920150">tr</span>&nbsp;<span class="op" id="2920153">==</span>&nbsp;<span class="ident" id="2920156">sr</span>&nbsp;<span class="op" id="2920159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920164">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920180">//&nbsp;Make&nbsp;sr&nbsp;&lt;&nbsp;tr&nbsp;to&nbsp;simplify&nbsp;what&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920224">if</span>&nbsp;<span class="ident" id="2920227">tr</span>&nbsp;<span class="op" id="2920230">&lt;</span>&nbsp;<span class="ident" id="2920232">sr</span>&nbsp;<span class="op" id="2920235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920240">tr</span><span class="op" id="2920242">,</span>&nbsp;<span class="ident" id="2920244">sr</span>&nbsp;<span class="op" id="2920247">=</span>&nbsp;<span class="ident" id="2920249">sr</span><span class="op" id="2920251">,</span>&nbsp;<span class="ident" id="2920253">tr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920262">//&nbsp;Fast&nbsp;check&nbsp;for&nbsp;ASCII.</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920289">if</span>&nbsp;<span class="ident" id="2920292">tr</span>&nbsp;<span class="op" id="2920295">&lt;</span>&nbsp;<span class="ident" id="2920297">utf8</span><span class="op" id="2920301">.</span><span class="ident" id="2920302">RuneSelf</span>&nbsp;<span class="op" id="2920311">&amp;&amp;</span>&nbsp;<span class="string" id="2920314">&#39;A&#39;</span>&nbsp;<span class="op" id="2920318">&lt;=</span>&nbsp;<span class="ident" id="2920321">sr</span>&nbsp;<span class="op" id="2920324">&amp;&amp;</span>&nbsp;<span class="ident" id="2920327">sr</span>&nbsp;<span class="op" id="2920330">&lt;=</span>&nbsp;<span class="string" id="2920333">&#39;Z&#39;</span>&nbsp;<span class="op" id="2920337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920342">//&nbsp;ASCII,&nbsp;and&nbsp;sr&nbsp;is&nbsp;upper&nbsp;case.&nbsp;&nbsp;tr&nbsp;must&nbsp;be&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920401">if</span>&nbsp;<span class="ident" id="2920404">tr</span>&nbsp;<span class="op" id="2920407">==</span>&nbsp;<span class="ident" id="2920410">sr</span><span class="op" id="2920412">+</span><span class="string" id="2920413">&#39;a&#39;</span><span class="op" id="2920416">-</span><span class="string" id="2920417">&#39;A&#39;</span>&nbsp;<span class="op" id="2920421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920427">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920439">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920444">return</span>&nbsp;<span class="builtintype" id="2920451">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920464">//&nbsp;General&nbsp;case.&nbsp;&nbsp;SimpleFold(x)&nbsp;returns&nbsp;the&nbsp;next&nbsp;equivalent&nbsp;rune&nbsp;&gt;&nbsp;x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920535">//&nbsp;or&nbsp;wraps&nbsp;around&nbsp;to&nbsp;smaller&nbsp;values.</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920575">r</span>&nbsp;<span class="op" id="2920577">:=</span>&nbsp;<span class="ident" id="2920580">unicode</span><span class="op" id="2920587">.</span><span class="ident" id="2920588">SimpleFold</span><span class="op" id="2920598">(</span><span class="ident" id="2920599">sr</span><span class="op" id="2920601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920605">for</span>&nbsp;<span class="ident" id="2920609">r</span>&nbsp;<span class="op" id="2920611">!=</span>&nbsp;<span class="ident" id="2920614">sr</span>&nbsp;<span class="op" id="2920617">&amp;&amp;</span>&nbsp;<span class="ident" id="2920620">r</span>&nbsp;<span class="op" id="2920622">&lt;</span>&nbsp;<span class="ident" id="2920624">tr</span>&nbsp;<span class="op" id="2920627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920632">r</span>&nbsp;<span class="op" id="2920634">=</span>&nbsp;<span class="ident" id="2920636">unicode</span><span class="op" id="2920643">.</span><span class="ident" id="2920644">SimpleFold</span><span class="op" id="2920654">(</span><span class="ident" id="2920655">r</span><span class="op" id="2920656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920664">if</span>&nbsp;<span class="ident" id="2920667">r</span>&nbsp;<span class="op" id="2920669">==</span>&nbsp;<span class="ident" id="2920672">tr</span>&nbsp;<span class="op" id="2920675">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920680">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920695">return</span>&nbsp;<span class="builtintype" id="2920702">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2920713">//&nbsp;One&nbsp;string&nbsp;is&nbsp;empty.&nbsp;&nbsp;Are&nbsp;both?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920749">return</span>&nbsp;<span class="ident" id="2920756">s</span>&nbsp;<span class="op" id="2920758">==</span>&nbsp;<span class="ident" id="2920761">t</span><br>
<span class="lineno"></span><span class="op" id="2920763">}</span>
</div>
</body>
</html>
