<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html" class="current">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6783911">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6783966">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6784020">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6784071">package</span>&nbsp;<span class="ident" id="6784079">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6784085">import</span>&nbsp;<span class="op" id="6784092">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6784095">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6784104">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6784114">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6784117">type</span>&nbsp;<span class="ident" id="6784122">clipTest</span>&nbsp;<span class="keyword" id="6784131">struct</span>&nbsp;<span class="op" id="6784138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784141">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6784155">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784163">r</span><span class="op" id="6784164">,</span>&nbsp;<span class="ident" id="6784166">dr</span><span class="op" id="6784168">,</span>&nbsp;<span class="ident" id="6784170">sr</span><span class="op" id="6784172">,</span>&nbsp;<span class="ident" id="6784174">mr</span>&nbsp;<span class="ident" id="6784177">image</span><span class="op" id="6784182">.</span><span class="ident" id="6784183">Rectangle</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784194">sp</span><span class="op" id="6784196">,</span>&nbsp;<span class="ident" id="6784198">mp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784208">image</span><span class="op" id="6784213">.</span><span class="ident" id="6784214">Point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784221">nilMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6784235">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784241">r0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784255">image</span><span class="op" id="6784260">.</span><span class="ident" id="6784261">Rectangle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784272">sp0</span><span class="op" id="6784275">,</span>&nbsp;<span class="ident" id="6784277">mp0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784286">image</span><span class="op" id="6784291">.</span><span class="ident" id="6784292">Point</span><br>
<span class="lineno"></span><span class="op" id="6784298">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6784301">var</span>&nbsp;<span class="ident" id="6784305">clipTests</span>&nbsp;<span class="op" id="6784315">=</span>&nbsp;<span class="op" id="6784317">[</span><span class="op" id="6784318">]</span><span class="ident" id="6784319">clipTest</span><span class="op" id="6784327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6784330">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6784379">&#34;basic&#34;</span><span class="op" id="6784386">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784390">image</span><span class="op" id="6784395">.</span><span class="ident" id="6784396">Rect</span><span class="op" id="6784400">(</span><span class="num" id="6784401">0</span><span class="op" id="6784402">,</span>&nbsp;<span class="num" id="6784404">0</span><span class="op" id="6784405">,</span>&nbsp;<span class="num" id="6784407">100</span><span class="op" id="6784410">,</span>&nbsp;<span class="num" id="6784412">100</span><span class="op" id="6784415">)</span><span class="op" id="6784416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784420">image</span><span class="op" id="6784425">.</span><span class="ident" id="6784426">Rect</span><span class="op" id="6784430">(</span><span class="num" id="6784431">0</span><span class="op" id="6784432">,</span>&nbsp;<span class="num" id="6784434">0</span><span class="op" id="6784435">,</span>&nbsp;<span class="num" id="6784437">100</span><span class="op" id="6784440">,</span>&nbsp;<span class="num" id="6784442">100</span><span class="op" id="6784445">)</span><span class="op" id="6784446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784450">image</span><span class="op" id="6784455">.</span><span class="ident" id="6784456">Rect</span><span class="op" id="6784460">(</span><span class="num" id="6784461">0</span><span class="op" id="6784462">,</span>&nbsp;<span class="num" id="6784464">0</span><span class="op" id="6784465">,</span>&nbsp;<span class="num" id="6784467">100</span><span class="op" id="6784470">,</span>&nbsp;<span class="num" id="6784472">100</span><span class="op" id="6784475">)</span><span class="op" id="6784476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784480">image</span><span class="op" id="6784485">.</span><span class="ident" id="6784486">ZR</span><span class="op" id="6784488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784492">image</span><span class="op" id="6784497">.</span><span class="ident" id="6784498">ZP</span><span class="op" id="6784500">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784504">image</span><span class="op" id="6784509">.</span><span class="ident" id="6784510">ZP</span><span class="op" id="6784512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6784516">true</span><span class="op" id="6784520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784524">image</span><span class="op" id="6784529">.</span><span class="ident" id="6784530">Rect</span><span class="op" id="6784534">(</span><span class="num" id="6784535">0</span><span class="op" id="6784536">,</span>&nbsp;<span class="num" id="6784538">0</span><span class="op" id="6784539">,</span>&nbsp;<span class="num" id="6784541">100</span><span class="op" id="6784544">,</span>&nbsp;<span class="num" id="6784546">100</span><span class="op" id="6784549">)</span><span class="op" id="6784550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784554">image</span><span class="op" id="6784559">.</span><span class="ident" id="6784560">ZP</span><span class="op" id="6784562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784566">image</span><span class="op" id="6784571">.</span><span class="ident" id="6784572">ZP</span><span class="op" id="6784574">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784577">}</span><span class="op" id="6784578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6784585">&#34;clip&nbsp;dr&#34;</span><span class="op" id="6784594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784598">image</span><span class="op" id="6784603">.</span><span class="ident" id="6784604">Rect</span><span class="op" id="6784608">(</span><span class="num" id="6784609">0</span><span class="op" id="6784610">,</span>&nbsp;<span class="num" id="6784612">0</span><span class="op" id="6784613">,</span>&nbsp;<span class="num" id="6784615">100</span><span class="op" id="6784618">,</span>&nbsp;<span class="num" id="6784620">100</span><span class="op" id="6784623">)</span><span class="op" id="6784624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784628">image</span><span class="op" id="6784633">.</span><span class="ident" id="6784634">Rect</span><span class="op" id="6784638">(</span><span class="num" id="6784639">40</span><span class="op" id="6784641">,</span>&nbsp;<span class="num" id="6784643">40</span><span class="op" id="6784645">,</span>&nbsp;<span class="num" id="6784647">60</span><span class="op" id="6784649">,</span>&nbsp;<span class="num" id="6784651">60</span><span class="op" id="6784653">)</span><span class="op" id="6784654">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784658">image</span><span class="op" id="6784663">.</span><span class="ident" id="6784664">Rect</span><span class="op" id="6784668">(</span><span class="num" id="6784669">0</span><span class="op" id="6784670">,</span>&nbsp;<span class="num" id="6784672">0</span><span class="op" id="6784673">,</span>&nbsp;<span class="num" id="6784675">100</span><span class="op" id="6784678">,</span>&nbsp;<span class="num" id="6784680">100</span><span class="op" id="6784683">)</span><span class="op" id="6784684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784688">image</span><span class="op" id="6784693">.</span><span class="ident" id="6784694">ZR</span><span class="op" id="6784696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784700">image</span><span class="op" id="6784705">.</span><span class="ident" id="6784706">ZP</span><span class="op" id="6784708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784712">image</span><span class="op" id="6784717">.</span><span class="ident" id="6784718">ZP</span><span class="op" id="6784720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6784724">true</span><span class="op" id="6784728">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784732">image</span><span class="op" id="6784737">.</span><span class="ident" id="6784738">Rect</span><span class="op" id="6784742">(</span><span class="num" id="6784743">40</span><span class="op" id="6784745">,</span>&nbsp;<span class="num" id="6784747">40</span><span class="op" id="6784749">,</span>&nbsp;<span class="num" id="6784751">60</span><span class="op" id="6784753">,</span>&nbsp;<span class="num" id="6784755">60</span><span class="op" id="6784757">)</span><span class="op" id="6784758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784762">image</span><span class="op" id="6784767">.</span><span class="ident" id="6784768">Pt</span><span class="op" id="6784770">(</span><span class="num" id="6784771">40</span><span class="op" id="6784773">,</span>&nbsp;<span class="num" id="6784775">40</span><span class="op" id="6784777">)</span><span class="op" id="6784778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784782">image</span><span class="op" id="6784787">.</span><span class="ident" id="6784788">ZP</span><span class="op" id="6784790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784793">}</span><span class="op" id="6784794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784797">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6784801">&#34;clip&nbsp;sr&#34;</span><span class="op" id="6784810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784814">image</span><span class="op" id="6784819">.</span><span class="ident" id="6784820">Rect</span><span class="op" id="6784824">(</span><span class="num" id="6784825">0</span><span class="op" id="6784826">,</span>&nbsp;<span class="num" id="6784828">0</span><span class="op" id="6784829">,</span>&nbsp;<span class="num" id="6784831">100</span><span class="op" id="6784834">,</span>&nbsp;<span class="num" id="6784836">100</span><span class="op" id="6784839">)</span><span class="op" id="6784840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784844">image</span><span class="op" id="6784849">.</span><span class="ident" id="6784850">Rect</span><span class="op" id="6784854">(</span><span class="num" id="6784855">0</span><span class="op" id="6784856">,</span>&nbsp;<span class="num" id="6784858">0</span><span class="op" id="6784859">,</span>&nbsp;<span class="num" id="6784861">100</span><span class="op" id="6784864">,</span>&nbsp;<span class="num" id="6784866">100</span><span class="op" id="6784869">)</span><span class="op" id="6784870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784874">image</span><span class="op" id="6784879">.</span><span class="ident" id="6784880">Rect</span><span class="op" id="6784884">(</span><span class="num" id="6784885">20</span><span class="op" id="6784887">,</span>&nbsp;<span class="num" id="6784889">20</span><span class="op" id="6784891">,</span>&nbsp;<span class="num" id="6784893">80</span><span class="op" id="6784895">,</span>&nbsp;<span class="num" id="6784897">80</span><span class="op" id="6784899">)</span><span class="op" id="6784900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784904">image</span><span class="op" id="6784909">.</span><span class="ident" id="6784910">ZR</span><span class="op" id="6784912">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784916">image</span><span class="op" id="6784921">.</span><span class="ident" id="6784922">ZP</span><span class="op" id="6784924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784928">image</span><span class="op" id="6784933">.</span><span class="ident" id="6784934">ZP</span><span class="op" id="6784936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6784940">true</span><span class="op" id="6784944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784948">image</span><span class="op" id="6784953">.</span><span class="ident" id="6784954">Rect</span><span class="op" id="6784958">(</span><span class="num" id="6784959">20</span><span class="op" id="6784961">,</span>&nbsp;<span class="num" id="6784963">20</span><span class="op" id="6784965">,</span>&nbsp;<span class="num" id="6784967">80</span><span class="op" id="6784969">,</span>&nbsp;<span class="num" id="6784971">80</span><span class="op" id="6784973">)</span><span class="op" id="6784974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784978">image</span><span class="op" id="6784983">.</span><span class="ident" id="6784984">Pt</span><span class="op" id="6784986">(</span><span class="num" id="6784987">20</span><span class="op" id="6784989">,</span>&nbsp;<span class="num" id="6784991">20</span><span class="op" id="6784993">)</span><span class="op" id="6784994">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784998">image</span><span class="op" id="6785003">.</span><span class="ident" id="6785004">ZP</span><span class="op" id="6785006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785009">}</span><span class="op" id="6785010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6785017">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr&#34;</span><span class="op" id="6785033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785037">image</span><span class="op" id="6785042">.</span><span class="ident" id="6785043">Rect</span><span class="op" id="6785047">(</span><span class="num" id="6785048">0</span><span class="op" id="6785049">,</span>&nbsp;<span class="num" id="6785051">0</span><span class="op" id="6785052">,</span>&nbsp;<span class="num" id="6785054">100</span><span class="op" id="6785057">,</span>&nbsp;<span class="num" id="6785059">100</span><span class="op" id="6785062">)</span><span class="op" id="6785063">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785067">image</span><span class="op" id="6785072">.</span><span class="ident" id="6785073">Rect</span><span class="op" id="6785077">(</span><span class="num" id="6785078">0</span><span class="op" id="6785079">,</span>&nbsp;<span class="num" id="6785081">0</span><span class="op" id="6785082">,</span>&nbsp;<span class="num" id="6785084">50</span><span class="op" id="6785086">,</span>&nbsp;<span class="num" id="6785088">100</span><span class="op" id="6785091">)</span><span class="op" id="6785092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785096">image</span><span class="op" id="6785101">.</span><span class="ident" id="6785102">Rect</span><span class="op" id="6785106">(</span><span class="num" id="6785107">20</span><span class="op" id="6785109">,</span>&nbsp;<span class="num" id="6785111">20</span><span class="op" id="6785113">,</span>&nbsp;<span class="num" id="6785115">80</span><span class="op" id="6785117">,</span>&nbsp;<span class="num" id="6785119">80</span><span class="op" id="6785121">)</span><span class="op" id="6785122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785126">image</span><span class="op" id="6785131">.</span><span class="ident" id="6785132">ZR</span><span class="op" id="6785134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785138">image</span><span class="op" id="6785143">.</span><span class="ident" id="6785144">ZP</span><span class="op" id="6785146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785150">image</span><span class="op" id="6785155">.</span><span class="ident" id="6785156">ZP</span><span class="op" id="6785158">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6785162">true</span><span class="op" id="6785166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785170">image</span><span class="op" id="6785175">.</span><span class="ident" id="6785176">Rect</span><span class="op" id="6785180">(</span><span class="num" id="6785181">20</span><span class="op" id="6785183">,</span>&nbsp;<span class="num" id="6785185">20</span><span class="op" id="6785187">,</span>&nbsp;<span class="num" id="6785189">50</span><span class="op" id="6785191">,</span>&nbsp;<span class="num" id="6785193">80</span><span class="op" id="6785195">)</span><span class="op" id="6785196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785200">image</span><span class="op" id="6785205">.</span><span class="ident" id="6785206">Pt</span><span class="op" id="6785208">(</span><span class="num" id="6785209">20</span><span class="op" id="6785211">,</span>&nbsp;<span class="num" id="6785213">20</span><span class="op" id="6785215">)</span><span class="op" id="6785216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785220">image</span><span class="op" id="6785225">.</span><span class="ident" id="6785226">ZP</span><span class="op" id="6785228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785231">}</span><span class="op" id="6785232">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6785239">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(top-left)&#34;</span><span class="op" id="6785281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785285">image</span><span class="op" id="6785290">.</span><span class="ident" id="6785291">Rect</span><span class="op" id="6785295">(</span><span class="num" id="6785296">0</span><span class="op" id="6785297">,</span>&nbsp;<span class="num" id="6785299">0</span><span class="op" id="6785300">,</span>&nbsp;<span class="num" id="6785302">100</span><span class="op" id="6785305">,</span>&nbsp;<span class="num" id="6785307">100</span><span class="op" id="6785310">)</span><span class="op" id="6785311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785315">image</span><span class="op" id="6785320">.</span><span class="ident" id="6785321">Rect</span><span class="op" id="6785325">(</span><span class="num" id="6785326">0</span><span class="op" id="6785327">,</span>&nbsp;<span class="num" id="6785329">0</span><span class="op" id="6785330">,</span>&nbsp;<span class="num" id="6785332">50</span><span class="op" id="6785334">,</span>&nbsp;<span class="num" id="6785336">100</span><span class="op" id="6785339">)</span><span class="op" id="6785340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785344">image</span><span class="op" id="6785349">.</span><span class="ident" id="6785350">Rect</span><span class="op" id="6785354">(</span><span class="num" id="6785355">20</span><span class="op" id="6785357">,</span>&nbsp;<span class="num" id="6785359">20</span><span class="op" id="6785361">,</span>&nbsp;<span class="num" id="6785363">80</span><span class="op" id="6785365">,</span>&nbsp;<span class="num" id="6785367">80</span><span class="op" id="6785369">)</span><span class="op" id="6785370">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785374">image</span><span class="op" id="6785379">.</span><span class="ident" id="6785380">ZR</span><span class="op" id="6785382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785386">image</span><span class="op" id="6785391">.</span><span class="ident" id="6785392">Pt</span><span class="op" id="6785394">(</span><span class="num" id="6785395">15</span><span class="op" id="6785397">,</span>&nbsp;<span class="num" id="6785399">8</span><span class="op" id="6785400">)</span><span class="op" id="6785401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785405">image</span><span class="op" id="6785410">.</span><span class="ident" id="6785411">ZP</span><span class="op" id="6785413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6785417">true</span><span class="op" id="6785421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785425">image</span><span class="op" id="6785430">.</span><span class="ident" id="6785431">Rect</span><span class="op" id="6785435">(</span><span class="num" id="6785436">5</span><span class="op" id="6785437">,</span>&nbsp;<span class="num" id="6785439">12</span><span class="op" id="6785441">,</span>&nbsp;<span class="num" id="6785443">50</span><span class="op" id="6785445">,</span>&nbsp;<span class="num" id="6785447">72</span><span class="op" id="6785449">)</span><span class="op" id="6785450">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785454">image</span><span class="op" id="6785459">.</span><span class="ident" id="6785460">Pt</span><span class="op" id="6785462">(</span><span class="num" id="6785463">20</span><span class="op" id="6785465">,</span>&nbsp;<span class="num" id="6785467">20</span><span class="op" id="6785469">)</span><span class="op" id="6785470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785474">image</span><span class="op" id="6785479">.</span><span class="ident" id="6785480">ZP</span><span class="op" id="6785482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785485">}</span><span class="op" id="6785486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6785493">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(middle-left)&#34;</span><span class="op" id="6785538">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785542">image</span><span class="op" id="6785547">.</span><span class="ident" id="6785548">Rect</span><span class="op" id="6785552">(</span><span class="num" id="6785553">0</span><span class="op" id="6785554">,</span>&nbsp;<span class="num" id="6785556">0</span><span class="op" id="6785557">,</span>&nbsp;<span class="num" id="6785559">100</span><span class="op" id="6785562">,</span>&nbsp;<span class="num" id="6785564">100</span><span class="op" id="6785567">)</span><span class="op" id="6785568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785572">image</span><span class="op" id="6785577">.</span><span class="ident" id="6785578">Rect</span><span class="op" id="6785582">(</span><span class="num" id="6785583">0</span><span class="op" id="6785584">,</span>&nbsp;<span class="num" id="6785586">0</span><span class="op" id="6785587">,</span>&nbsp;<span class="num" id="6785589">50</span><span class="op" id="6785591">,</span>&nbsp;<span class="num" id="6785593">100</span><span class="op" id="6785596">)</span><span class="op" id="6785597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785601">image</span><span class="op" id="6785606">.</span><span class="ident" id="6785607">Rect</span><span class="op" id="6785611">(</span><span class="num" id="6785612">20</span><span class="op" id="6785614">,</span>&nbsp;<span class="num" id="6785616">20</span><span class="op" id="6785618">,</span>&nbsp;<span class="num" id="6785620">80</span><span class="op" id="6785622">,</span>&nbsp;<span class="num" id="6785624">80</span><span class="op" id="6785626">)</span><span class="op" id="6785627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785631">image</span><span class="op" id="6785636">.</span><span class="ident" id="6785637">ZR</span><span class="op" id="6785639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785643">image</span><span class="op" id="6785648">.</span><span class="ident" id="6785649">Pt</span><span class="op" id="6785651">(</span><span class="num" id="6785652">15</span><span class="op" id="6785654">,</span>&nbsp;<span class="num" id="6785656">66</span><span class="op" id="6785658">)</span><span class="op" id="6785659">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785663">image</span><span class="op" id="6785668">.</span><span class="ident" id="6785669">ZP</span><span class="op" id="6785671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6785675">true</span><span class="op" id="6785679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785683">image</span><span class="op" id="6785688">.</span><span class="ident" id="6785689">Rect</span><span class="op" id="6785693">(</span><span class="num" id="6785694">5</span><span class="op" id="6785695">,</span>&nbsp;<span class="num" id="6785697">0</span><span class="op" id="6785698">,</span>&nbsp;<span class="num" id="6785700">50</span><span class="op" id="6785702">,</span>&nbsp;<span class="num" id="6785704">14</span><span class="op" id="6785706">)</span><span class="op" id="6785707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785711">image</span><span class="op" id="6785716">.</span><span class="ident" id="6785717">Pt</span><span class="op" id="6785719">(</span><span class="num" id="6785720">20</span><span class="op" id="6785722">,</span>&nbsp;<span class="num" id="6785724">66</span><span class="op" id="6785726">)</span><span class="op" id="6785727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785731">image</span><span class="op" id="6785736">.</span><span class="ident" id="6785737">ZP</span><span class="op" id="6785739">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785742">}</span><span class="op" id="6785743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6785750">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(bottom-left)&#34;</span><span class="op" id="6785795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785799">image</span><span class="op" id="6785804">.</span><span class="ident" id="6785805">Rect</span><span class="op" id="6785809">(</span><span class="num" id="6785810">0</span><span class="op" id="6785811">,</span>&nbsp;<span class="num" id="6785813">0</span><span class="op" id="6785814">,</span>&nbsp;<span class="num" id="6785816">100</span><span class="op" id="6785819">,</span>&nbsp;<span class="num" id="6785821">100</span><span class="op" id="6785824">)</span><span class="op" id="6785825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785829">image</span><span class="op" id="6785834">.</span><span class="ident" id="6785835">Rect</span><span class="op" id="6785839">(</span><span class="num" id="6785840">0</span><span class="op" id="6785841">,</span>&nbsp;<span class="num" id="6785843">0</span><span class="op" id="6785844">,</span>&nbsp;<span class="num" id="6785846">50</span><span class="op" id="6785848">,</span>&nbsp;<span class="num" id="6785850">100</span><span class="op" id="6785853">)</span><span class="op" id="6785854">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785858">image</span><span class="op" id="6785863">.</span><span class="ident" id="6785864">Rect</span><span class="op" id="6785868">(</span><span class="num" id="6785869">20</span><span class="op" id="6785871">,</span>&nbsp;<span class="num" id="6785873">20</span><span class="op" id="6785875">,</span>&nbsp;<span class="num" id="6785877">80</span><span class="op" id="6785879">,</span>&nbsp;<span class="num" id="6785881">80</span><span class="op" id="6785883">)</span><span class="op" id="6785884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785888">image</span><span class="op" id="6785893">.</span><span class="ident" id="6785894">ZR</span><span class="op" id="6785896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785900">image</span><span class="op" id="6785905">.</span><span class="ident" id="6785906">Pt</span><span class="op" id="6785908">(</span><span class="num" id="6785909">15</span><span class="op" id="6785911">,</span>&nbsp;<span class="num" id="6785913">91</span><span class="op" id="6785915">)</span><span class="op" id="6785916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785920">image</span><span class="op" id="6785925">.</span><span class="ident" id="6785926">ZP</span><span class="op" id="6785928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6785932">true</span><span class="op" id="6785936">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785940">image</span><span class="op" id="6785945">.</span><span class="ident" id="6785946">ZR</span><span class="op" id="6785948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785952">image</span><span class="op" id="6785957">.</span><span class="ident" id="6785958">Pt</span><span class="op" id="6785960">(</span><span class="num" id="6785961">15</span><span class="op" id="6785963">,</span>&nbsp;<span class="num" id="6785965">91</span><span class="op" id="6785967">)</span><span class="op" id="6785968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785972">image</span><span class="op" id="6785977">.</span><span class="ident" id="6785978">ZP</span><span class="op" id="6785980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785983">}</span><span class="op" id="6785984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785987">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6785991">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;inside&nbsp;sr&#34;</span><span class="op" id="6786021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786025">image</span><span class="op" id="6786030">.</span><span class="ident" id="6786031">Rect</span><span class="op" id="6786035">(</span><span class="num" id="6786036">0</span><span class="op" id="6786037">,</span>&nbsp;<span class="num" id="6786039">0</span><span class="op" id="6786040">,</span>&nbsp;<span class="num" id="6786042">100</span><span class="op" id="6786045">,</span>&nbsp;<span class="num" id="6786047">100</span><span class="op" id="6786050">)</span><span class="op" id="6786051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786055">image</span><span class="op" id="6786060">.</span><span class="ident" id="6786061">Rect</span><span class="op" id="6786065">(</span><span class="num" id="6786066">0</span><span class="op" id="6786067">,</span>&nbsp;<span class="num" id="6786069">0</span><span class="op" id="6786070">,</span>&nbsp;<span class="num" id="6786072">50</span><span class="op" id="6786074">,</span>&nbsp;<span class="num" id="6786076">100</span><span class="op" id="6786079">)</span><span class="op" id="6786080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786084">image</span><span class="op" id="6786089">.</span><span class="ident" id="6786090">Rect</span><span class="op" id="6786094">(</span><span class="num" id="6786095">20</span><span class="op" id="6786097">,</span>&nbsp;<span class="num" id="6786099">20</span><span class="op" id="6786101">,</span>&nbsp;<span class="num" id="6786103">80</span><span class="op" id="6786105">,</span>&nbsp;<span class="num" id="6786107">80</span><span class="op" id="6786109">)</span><span class="op" id="6786110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786114">image</span><span class="op" id="6786119">.</span><span class="ident" id="6786120">ZR</span><span class="op" id="6786122">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786126">image</span><span class="op" id="6786131">.</span><span class="ident" id="6786132">Pt</span><span class="op" id="6786134">(</span><span class="num" id="6786135">44</span><span class="op" id="6786137">,</span>&nbsp;<span class="num" id="6786139">33</span><span class="op" id="6786141">)</span><span class="op" id="6786142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786146">image</span><span class="op" id="6786151">.</span><span class="ident" id="6786152">ZP</span><span class="op" id="6786154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6786158">true</span><span class="op" id="6786162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786166">image</span><span class="op" id="6786171">.</span><span class="ident" id="6786172">Rect</span><span class="op" id="6786176">(</span><span class="num" id="6786177">0</span><span class="op" id="6786178">,</span>&nbsp;<span class="num" id="6786180">0</span><span class="op" id="6786181">,</span>&nbsp;<span class="num" id="6786183">36</span><span class="op" id="6786185">,</span>&nbsp;<span class="num" id="6786187">47</span><span class="op" id="6786189">)</span><span class="op" id="6786190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786194">image</span><span class="op" id="6786199">.</span><span class="ident" id="6786200">Pt</span><span class="op" id="6786202">(</span><span class="num" id="6786203">44</span><span class="op" id="6786205">,</span>&nbsp;<span class="num" id="6786207">33</span><span class="op" id="6786209">)</span><span class="op" id="6786210">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786214">image</span><span class="op" id="6786219">.</span><span class="ident" id="6786220">ZP</span><span class="op" id="6786222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786225">}</span><span class="op" id="6786226">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6786230">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;non-nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786279">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786283">&#34;basic&nbsp;mask&#34;</span><span class="op" id="6786295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786299">image</span><span class="op" id="6786304">.</span><span class="ident" id="6786305">Rect</span><span class="op" id="6786309">(</span><span class="num" id="6786310">0</span><span class="op" id="6786311">,</span>&nbsp;<span class="num" id="6786313">0</span><span class="op" id="6786314">,</span>&nbsp;<span class="num" id="6786316">80</span><span class="op" id="6786318">,</span>&nbsp;<span class="num" id="6786320">80</span><span class="op" id="6786322">)</span><span class="op" id="6786323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786327">image</span><span class="op" id="6786332">.</span><span class="ident" id="6786333">Rect</span><span class="op" id="6786337">(</span><span class="num" id="6786338">20</span><span class="op" id="6786340">,</span>&nbsp;<span class="num" id="6786342">0</span><span class="op" id="6786343">,</span>&nbsp;<span class="num" id="6786345">100</span><span class="op" id="6786348">,</span>&nbsp;<span class="num" id="6786350">80</span><span class="op" id="6786352">)</span><span class="op" id="6786353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786357">image</span><span class="op" id="6786362">.</span><span class="ident" id="6786363">Rect</span><span class="op" id="6786367">(</span><span class="num" id="6786368">0</span><span class="op" id="6786369">,</span>&nbsp;<span class="num" id="6786371">0</span><span class="op" id="6786372">,</span>&nbsp;<span class="num" id="6786374">50</span><span class="op" id="6786376">,</span>&nbsp;<span class="num" id="6786378">49</span><span class="op" id="6786380">)</span><span class="op" id="6786381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786385">image</span><span class="op" id="6786390">.</span><span class="ident" id="6786391">Rect</span><span class="op" id="6786395">(</span><span class="num" id="6786396">0</span><span class="op" id="6786397">,</span>&nbsp;<span class="num" id="6786399">0</span><span class="op" id="6786400">,</span>&nbsp;<span class="num" id="6786402">46</span><span class="op" id="6786404">,</span>&nbsp;<span class="num" id="6786406">47</span><span class="op" id="6786408">)</span><span class="op" id="6786409">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786413">image</span><span class="op" id="6786418">.</span><span class="ident" id="6786419">ZP</span><span class="op" id="6786421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786425">image</span><span class="op" id="6786430">.</span><span class="ident" id="6786431">ZP</span><span class="op" id="6786433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6786437">false</span><span class="op" id="6786442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786446">image</span><span class="op" id="6786451">.</span><span class="ident" id="6786452">Rect</span><span class="op" id="6786456">(</span><span class="num" id="6786457">20</span><span class="op" id="6786459">,</span>&nbsp;<span class="num" id="6786461">0</span><span class="op" id="6786462">,</span>&nbsp;<span class="num" id="6786464">46</span><span class="op" id="6786466">,</span>&nbsp;<span class="num" id="6786468">47</span><span class="op" id="6786470">)</span><span class="op" id="6786471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786475">image</span><span class="op" id="6786480">.</span><span class="ident" id="6786481">Pt</span><span class="op" id="6786483">(</span><span class="num" id="6786484">20</span><span class="op" id="6786486">,</span>&nbsp;<span class="num" id="6786488">0</span><span class="op" id="6786489">)</span><span class="op" id="6786490">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786494">image</span><span class="op" id="6786499">.</span><span class="ident" id="6786500">Pt</span><span class="op" id="6786502">(</span><span class="num" id="6786503">20</span><span class="op" id="6786505">,</span>&nbsp;<span class="num" id="6786507">0</span><span class="op" id="6786508">)</span><span class="op" id="6786509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786512">}</span><span class="op" id="6786513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6786516">//&nbsp;TODO(nigeltao):&nbsp;write&nbsp;more&nbsp;tests.</span><br>
<span class="lineno"></span><span class="op" id="6786553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="6786556">func</span>&nbsp;<span class="ident" id="6786561">TestClip</span><span class="op" id="6786569">(</span><span class="ident" id="6786570">t</span>&nbsp;<span class="op" id="6786572">*</span><span class="ident" id="6786573">testing</span><span class="op" id="6786580">.</span><span class="ident" id="6786581">T</span><span class="op" id="6786582">)</span>&nbsp;<span class="op" id="6786584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786587">dst0</span>&nbsp;<span class="op" id="6786592">:=</span>&nbsp;<span class="ident" id="6786595">image</span><span class="op" id="6786600">.</span><span class="ident" id="6786601">NewRGBA</span><span class="op" id="6786608">(</span><span class="ident" id="6786609">image</span><span class="op" id="6786614">.</span><span class="ident" id="6786615">Rect</span><span class="op" id="6786619">(</span><span class="num" id="6786620">0</span><span class="op" id="6786621">,</span>&nbsp;<span class="num" id="6786623">0</span><span class="op" id="6786624">,</span>&nbsp;<span class="num" id="6786626">100</span><span class="op" id="6786629">,</span>&nbsp;<span class="num" id="6786631">100</span><span class="op" id="6786634">)</span><span class="op" id="6786635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786638">src0</span>&nbsp;<span class="op" id="6786643">:=</span>&nbsp;<span class="ident" id="6786646">image</span><span class="op" id="6786651">.</span><span class="ident" id="6786652">NewRGBA</span><span class="op" id="6786659">(</span><span class="ident" id="6786660">image</span><span class="op" id="6786665">.</span><span class="ident" id="6786666">Rect</span><span class="op" id="6786670">(</span><span class="num" id="6786671">0</span><span class="op" id="6786672">,</span>&nbsp;<span class="num" id="6786674">0</span><span class="op" id="6786675">,</span>&nbsp;<span class="num" id="6786677">100</span><span class="op" id="6786680">,</span>&nbsp;<span class="num" id="6786682">100</span><span class="op" id="6786685">)</span><span class="op" id="6786686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786689">mask0</span>&nbsp;<span class="op" id="6786695">:=</span>&nbsp;<span class="ident" id="6786698">image</span><span class="op" id="6786703">.</span><span class="ident" id="6786704">NewRGBA</span><span class="op" id="6786711">(</span><span class="ident" id="6786712">image</span><span class="op" id="6786717">.</span><span class="ident" id="6786718">Rect</span><span class="op" id="6786722">(</span><span class="num" id="6786723">0</span><span class="op" id="6786724">,</span>&nbsp;<span class="num" id="6786726">0</span><span class="op" id="6786727">,</span>&nbsp;<span class="num" id="6786729">100</span><span class="op" id="6786732">,</span>&nbsp;<span class="num" id="6786734">100</span><span class="op" id="6786737">)</span><span class="op" id="6786738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786741">for</span>&nbsp;<span class="ident" id="6786745">_</span><span class="op" id="6786746">,</span>&nbsp;<span class="ident" id="6786748">c</span>&nbsp;<span class="op" id="6786750">:=</span>&nbsp;<span class="keyword" id="6786753">range</span>&nbsp;<span class="ident" id="6786759">clipTests</span>&nbsp;<span class="op" id="6786769">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786773">dst</span>&nbsp;<span class="op" id="6786777">:=</span>&nbsp;<span class="ident" id="6786780">dst0</span><span class="op" id="6786784">.</span><span class="ident" id="6786785">SubImage</span><span class="op" id="6786793">(</span><span class="ident" id="6786794">c</span><span class="op" id="6786795">.</span><span class="ident" id="6786796">dr</span><span class="op" id="6786798">)</span><span class="op" id="6786799">.</span><span class="op" id="6786800">(</span><span class="op" id="6786801">*</span><span class="ident" id="6786802">image</span><span class="op" id="6786807">.</span><span class="ident" id="6786808">RGBA</span><span class="op" id="6786812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786816">src</span>&nbsp;<span class="op" id="6786820">:=</span>&nbsp;<span class="ident" id="6786823">src0</span><span class="op" id="6786827">.</span><span class="ident" id="6786828">SubImage</span><span class="op" id="6786836">(</span><span class="ident" id="6786837">c</span><span class="op" id="6786838">.</span><span class="ident" id="6786839">sr</span><span class="op" id="6786841">)</span><span class="op" id="6786842">.</span><span class="op" id="6786843">(</span><span class="op" id="6786844">*</span><span class="ident" id="6786845">image</span><span class="op" id="6786850">.</span><span class="ident" id="6786851">RGBA</span><span class="op" id="6786855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786859">var</span>&nbsp;<span class="ident" id="6786863">mask</span>&nbsp;<span class="ident" id="6786868">image</span><span class="op" id="6786873">.</span><span class="ident" id="6786874">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786882">if</span>&nbsp;<span class="op" id="6786885">!</span><span class="ident" id="6786886">c</span><span class="op" id="6786887">.</span><span class="ident" id="6786888">nilMask</span>&nbsp;<span class="op" id="6786896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786901">mask</span>&nbsp;<span class="op" id="6786906">=</span>&nbsp;<span class="ident" id="6786908">mask0</span><span class="op" id="6786913">.</span><span class="ident" id="6786914">SubImage</span><span class="op" id="6786922">(</span><span class="ident" id="6786923">c</span><span class="op" id="6786924">.</span><span class="ident" id="6786925">mr</span><span class="op" id="6786927">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786935">r</span><span class="op" id="6786936">,</span>&nbsp;<span class="ident" id="6786938">sp</span><span class="op" id="6786940">,</span>&nbsp;<span class="ident" id="6786942">mp</span>&nbsp;<span class="op" id="6786945">:=</span>&nbsp;<span class="ident" id="6786948">c</span><span class="op" id="6786949">.</span><span class="ident" id="6786950">r</span><span class="op" id="6786951">,</span>&nbsp;<span class="ident" id="6786953">c</span><span class="op" id="6786954">.</span><span class="ident" id="6786955">sp</span><span class="op" id="6786957">,</span>&nbsp;<span class="ident" id="6786959">c</span><span class="op" id="6786960">.</span><span class="ident" id="6786961">mp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786966">clip</span><span class="op" id="6786970">(</span><span class="ident" id="6786971">dst</span><span class="op" id="6786974">,</span>&nbsp;<span class="op" id="6786976">&amp;</span><span class="ident" id="6786977">r</span><span class="op" id="6786978">,</span>&nbsp;<span class="ident" id="6786980">src</span><span class="op" id="6786983">,</span>&nbsp;<span class="op" id="6786985">&amp;</span><span class="ident" id="6786986">sp</span><span class="op" id="6786988">,</span>&nbsp;<span class="ident" id="6786990">mask</span><span class="op" id="6786994">,</span>&nbsp;<span class="op" id="6786996">&amp;</span><span class="ident" id="6786997">mp</span><span class="op" id="6786999">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787004">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;actual&nbsp;results&nbsp;equal&nbsp;the&nbsp;expected&nbsp;results.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787067">if</span>&nbsp;<span class="op" id="6787070">!</span><span class="ident" id="6787071">c</span><span class="op" id="6787072">.</span><span class="ident" id="6787073">r0</span><span class="op" id="6787075">.</span><span class="ident" id="6787076">Eq</span><span class="op" id="6787078">(</span><span class="ident" id="6787079">r</span><span class="op" id="6787080">)</span>&nbsp;<span class="op" id="6787082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787087">t</span><span class="op" id="6787088">.</span><span class="ident" id="6787089">Errorf</span><span class="op" id="6787095">(</span><span class="string" id="6787096">&#34;%s:&nbsp;clip&nbsp;rectangle&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6787131">,</span>&nbsp;<span class="ident" id="6787133">c</span><span class="op" id="6787134">.</span><span class="ident" id="6787135">desc</span><span class="op" id="6787139">,</span>&nbsp;<span class="ident" id="6787141">c</span><span class="op" id="6787142">.</span><span class="ident" id="6787143">r0</span><span class="op" id="6787145">,</span>&nbsp;<span class="ident" id="6787147">r</span><span class="op" id="6787148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787153">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787168">if</span>&nbsp;<span class="op" id="6787171">!</span><span class="ident" id="6787172">c</span><span class="op" id="6787173">.</span><span class="ident" id="6787174">sp0</span><span class="op" id="6787177">.</span><span class="ident" id="6787178">Eq</span><span class="op" id="6787180">(</span><span class="ident" id="6787181">sp</span><span class="op" id="6787183">)</span>&nbsp;<span class="op" id="6787185">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787190">t</span><span class="op" id="6787191">.</span><span class="ident" id="6787192">Errorf</span><span class="op" id="6787198">(</span><span class="string" id="6787199">&#34;%s:&nbsp;sp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6787222">,</span>&nbsp;<span class="ident" id="6787224">c</span><span class="op" id="6787225">.</span><span class="ident" id="6787226">desc</span><span class="op" id="6787230">,</span>&nbsp;<span class="ident" id="6787232">c</span><span class="op" id="6787233">.</span><span class="ident" id="6787234">sp0</span><span class="op" id="6787237">,</span>&nbsp;<span class="ident" id="6787239">sp</span><span class="op" id="6787241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787246">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787261">if</span>&nbsp;<span class="op" id="6787264">!</span><span class="ident" id="6787265">c</span><span class="op" id="6787266">.</span><span class="ident" id="6787267">nilMask</span>&nbsp;<span class="op" id="6787275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787280">if</span>&nbsp;<span class="op" id="6787283">!</span><span class="ident" id="6787284">c</span><span class="op" id="6787285">.</span><span class="ident" id="6787286">mp0</span><span class="op" id="6787289">.</span><span class="ident" id="6787290">Eq</span><span class="op" id="6787292">(</span><span class="ident" id="6787293">mp</span><span class="op" id="6787295">)</span>&nbsp;<span class="op" id="6787297">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787303">t</span><span class="op" id="6787304">.</span><span class="ident" id="6787305">Errorf</span><span class="op" id="6787311">(</span><span class="string" id="6787312">&#34;%s:&nbsp;mp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6787335">,</span>&nbsp;<span class="ident" id="6787337">c</span><span class="op" id="6787338">.</span><span class="ident" id="6787339">desc</span><span class="op" id="6787343">,</span>&nbsp;<span class="ident" id="6787345">c</span><span class="op" id="6787346">.</span><span class="ident" id="6787347">mp0</span><span class="op" id="6787350">,</span>&nbsp;<span class="ident" id="6787352">mp</span><span class="op" id="6787354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787360">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787381">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;clipped&nbsp;rectangle&nbsp;is&nbsp;contained&nbsp;by&nbsp;the&nbsp;dst&nbsp;/&nbsp;src&nbsp;/&nbsp;mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787456">//&nbsp;rectangles,&nbsp;in&nbsp;their&nbsp;respective&nbsp;co-ordinate&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787513">if</span>&nbsp;<span class="op" id="6787516">!</span><span class="ident" id="6787517">r</span><span class="op" id="6787518">.</span><span class="ident" id="6787519">In</span><span class="op" id="6787521">(</span><span class="ident" id="6787522">c</span><span class="op" id="6787523">.</span><span class="ident" id="6787524">dr</span><span class="op" id="6787526">)</span>&nbsp;<span class="op" id="6787528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787533">t</span><span class="op" id="6787534">.</span><span class="ident" id="6787535">Errorf</span><span class="op" id="6787541">(</span><span class="string" id="6787542">&#34;%s:&nbsp;c.dr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;r&nbsp;%v&#34;</span><span class="op" id="6787577">,</span>&nbsp;<span class="ident" id="6787579">c</span><span class="op" id="6787580">.</span><span class="ident" id="6787581">desc</span><span class="op" id="6787585">,</span>&nbsp;<span class="ident" id="6787587">c</span><span class="op" id="6787588">.</span><span class="ident" id="6787589">dr</span><span class="op" id="6787591">,</span>&nbsp;<span class="ident" id="6787593">r</span><span class="op" id="6787594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787598">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787602">//&nbsp;sr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;src&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787656">sr</span>&nbsp;<span class="op" id="6787659">:=</span>&nbsp;<span class="ident" id="6787662">r</span><span class="op" id="6787663">.</span><span class="ident" id="6787664">Add</span><span class="op" id="6787667">(</span><span class="ident" id="6787668">c</span><span class="op" id="6787669">.</span><span class="ident" id="6787670">sp</span><span class="op" id="6787672">.</span><span class="ident" id="6787673">Sub</span><span class="op" id="6787676">(</span><span class="ident" id="6787677">c</span><span class="op" id="6787678">.</span><span class="ident" id="6787679">dr</span><span class="op" id="6787681">.</span><span class="ident" id="6787682">Min</span><span class="op" id="6787685">)</span><span class="op" id="6787686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787690">if</span>&nbsp;<span class="op" id="6787693">!</span><span class="ident" id="6787694">sr</span><span class="op" id="6787696">.</span><span class="ident" id="6787697">In</span><span class="op" id="6787699">(</span><span class="ident" id="6787700">c</span><span class="op" id="6787701">.</span><span class="ident" id="6787702">sr</span><span class="op" id="6787704">)</span>&nbsp;<span class="op" id="6787706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787711">t</span><span class="op" id="6787712">.</span><span class="ident" id="6787713">Errorf</span><span class="op" id="6787719">(</span><span class="string" id="6787720">&#34;%s:&nbsp;c.sr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;sr&nbsp;%v&#34;</span><span class="op" id="6787756">,</span>&nbsp;<span class="ident" id="6787758">c</span><span class="op" id="6787759">.</span><span class="ident" id="6787760">desc</span><span class="op" id="6787764">,</span>&nbsp;<span class="ident" id="6787766">c</span><span class="op" id="6787767">.</span><span class="ident" id="6787768">sr</span><span class="op" id="6787770">,</span>&nbsp;<span class="ident" id="6787772">sr</span><span class="op" id="6787774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787778">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787782">if</span>&nbsp;<span class="op" id="6787785">!</span><span class="ident" id="6787786">c</span><span class="op" id="6787787">.</span><span class="ident" id="6787788">nilMask</span>&nbsp;<span class="op" id="6787796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787801">//&nbsp;mr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;mask&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787857">mr</span>&nbsp;<span class="op" id="6787860">:=</span>&nbsp;<span class="ident" id="6787863">r</span><span class="op" id="6787864">.</span><span class="ident" id="6787865">Add</span><span class="op" id="6787868">(</span><span class="ident" id="6787869">c</span><span class="op" id="6787870">.</span><span class="ident" id="6787871">mp</span><span class="op" id="6787873">.</span><span class="ident" id="6787874">Sub</span><span class="op" id="6787877">(</span><span class="ident" id="6787878">c</span><span class="op" id="6787879">.</span><span class="ident" id="6787880">dr</span><span class="op" id="6787882">.</span><span class="ident" id="6787883">Min</span><span class="op" id="6787886">)</span><span class="op" id="6787887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787892">if</span>&nbsp;<span class="op" id="6787895">!</span><span class="ident" id="6787896">mr</span><span class="op" id="6787898">.</span><span class="ident" id="6787899">In</span><span class="op" id="6787901">(</span><span class="ident" id="6787902">c</span><span class="op" id="6787903">.</span><span class="ident" id="6787904">mr</span><span class="op" id="6787906">)</span>&nbsp;<span class="op" id="6787908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787914">t</span><span class="op" id="6787915">.</span><span class="ident" id="6787916">Errorf</span><span class="op" id="6787922">(</span><span class="string" id="6787923">&#34;%s:&nbsp;c.mr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;mr&nbsp;%v&#34;</span><span class="op" id="6787959">,</span>&nbsp;<span class="ident" id="6787961">c</span><span class="op" id="6787962">.</span><span class="ident" id="6787963">desc</span><span class="op" id="6787967">,</span>&nbsp;<span class="ident" id="6787969">c</span><span class="op" id="6787970">.</span><span class="ident" id="6787971">mr</span><span class="op" id="6787973">,</span>&nbsp;<span class="ident" id="6787975">mr</span><span class="op" id="6787977">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787989">}</span><br>
<span class="lineno"></span><span class="op" id="6787991">}</span>
</div>
</body>
</html>
