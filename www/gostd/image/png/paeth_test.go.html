<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html" class="current">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7011123">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7011178">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7011232">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7011283">package</span>&nbsp;<span class="ident" id="7011291">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011296">import</span>&nbsp;<span class="op" id="7011303">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7011306">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7011315">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7011328">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7011338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011341">func</span>&nbsp;<span class="ident" id="7011346">slowAbs</span><span class="op" id="7011353">(</span><span class="ident" id="7011354">x</span>&nbsp;<span class="builtintype" id="7011356">int</span><span class="op" id="7011359">)</span>&nbsp;<span class="builtintype" id="7011361">int</span>&nbsp;<span class="op" id="7011365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011368">if</span>&nbsp;<span class="ident" id="7011371">x</span>&nbsp;<span class="op" id="7011373">&lt;</span>&nbsp;<span class="num" id="7011375">0</span>&nbsp;<span class="op" id="7011377">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011381">return</span>&nbsp;<span class="op" id="7011388">-</span><span class="ident" id="7011389">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7011392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011395">return</span>&nbsp;<span class="ident" id="7011402">x</span><br>
<span class="lineno"></span><span class="op" id="7011404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7011407">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="7011479">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="7011553">func</span>&nbsp;<span class="ident" id="7011558">slowPaeth</span><span class="op" id="7011567">(</span><span class="ident" id="7011568">a</span><span class="op" id="7011569">,</span>&nbsp;<span class="ident" id="7011571">b</span><span class="op" id="7011572">,</span>&nbsp;<span class="ident" id="7011574">c</span>&nbsp;<span class="builtintype" id="7011576">uint8</span><span class="op" id="7011581">)</span>&nbsp;<span class="builtintype" id="7011583">uint8</span>&nbsp;<span class="op" id="7011589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7011592">p</span>&nbsp;<span class="op" id="7011594">:=</span>&nbsp;<span class="builtintype" id="7011597">int</span><span class="op" id="7011600">(</span><span class="ident" id="7011601">a</span><span class="op" id="7011602">)</span>&nbsp;<span class="op" id="7011604">+</span>&nbsp;<span class="builtintype" id="7011606">int</span><span class="op" id="7011609">(</span><span class="ident" id="7011610">b</span><span class="op" id="7011611">)</span>&nbsp;<span class="op" id="7011613">-</span>&nbsp;<span class="builtintype" id="7011615">int</span><span class="op" id="7011618">(</span><span class="ident" id="7011619">c</span><span class="op" id="7011620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7011623">pa</span>&nbsp;<span class="op" id="7011626">:=</span>&nbsp;<span class="ident" id="7011629">slowAbs</span><span class="op" id="7011636">(</span><span class="ident" id="7011637">p</span>&nbsp;<span class="op" id="7011639">-</span>&nbsp;<span class="builtintype" id="7011641">int</span><span class="op" id="7011644">(</span><span class="ident" id="7011645">a</span><span class="op" id="7011646">)</span><span class="op" id="7011647">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7011650">pb</span>&nbsp;<span class="op" id="7011653">:=</span>&nbsp;<span class="ident" id="7011656">slowAbs</span><span class="op" id="7011663">(</span><span class="ident" id="7011664">p</span>&nbsp;<span class="op" id="7011666">-</span>&nbsp;<span class="builtintype" id="7011668">int</span><span class="op" id="7011671">(</span><span class="ident" id="7011672">b</span><span class="op" id="7011673">)</span><span class="op" id="7011674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7011677">pc</span>&nbsp;<span class="op" id="7011680">:=</span>&nbsp;<span class="ident" id="7011683">slowAbs</span><span class="op" id="7011690">(</span><span class="ident" id="7011691">p</span>&nbsp;<span class="op" id="7011693">-</span>&nbsp;<span class="builtintype" id="7011695">int</span><span class="op" id="7011698">(</span><span class="ident" id="7011699">c</span><span class="op" id="7011700">)</span><span class="op" id="7011701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011704">if</span>&nbsp;<span class="ident" id="7011707">pa</span>&nbsp;<span class="op" id="7011710">&lt;=</span>&nbsp;<span class="ident" id="7011713">pb</span>&nbsp;<span class="op" id="7011716">&amp;&amp;</span>&nbsp;<span class="ident" id="7011719">pa</span>&nbsp;<span class="op" id="7011722">&lt;=</span>&nbsp;<span class="ident" id="7011725">pc</span>&nbsp;<span class="op" id="7011728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011732">return</span>&nbsp;<span class="ident" id="7011739">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7011742">}</span>&nbsp;<span class="keyword" id="7011744">else</span>&nbsp;<span class="keyword" id="7011749">if</span>&nbsp;<span class="ident" id="7011752">pb</span>&nbsp;<span class="op" id="7011755">&lt;=</span>&nbsp;<span class="ident" id="7011758">pc</span>&nbsp;<span class="op" id="7011761">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011765">return</span>&nbsp;<span class="ident" id="7011772">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7011775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011778">return</span>&nbsp;<span class="ident" id="7011785">c</span><br>
<span class="lineno"></span><span class="op" id="7011787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="7011790">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="7011866">func</span>&nbsp;<span class="ident" id="7011871">slowFilterPaeth</span><span class="op" id="7011886">(</span><span class="ident" id="7011887">cdat</span><span class="op" id="7011891">,</span>&nbsp;<span class="ident" id="7011893">pdat</span>&nbsp;<span class="op" id="7011898">[</span><span class="op" id="7011899">]</span><span class="builtintype" id="7011900">byte</span><span class="op" id="7011904">,</span>&nbsp;<span class="ident" id="7011906">bytesPerPixel</span>&nbsp;<span class="builtintype" id="7011920">int</span><span class="op" id="7011923">)</span>&nbsp;<span class="op" id="7011925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7011928">for</span>&nbsp;<span class="ident" id="7011932">i</span>&nbsp;<span class="op" id="7011934">:=</span>&nbsp;<span class="num" id="7011937">0</span><span class="op" id="7011938">;</span>&nbsp;<span class="ident" id="7011940">i</span>&nbsp;<span class="op" id="7011942">&lt;</span>&nbsp;<span class="ident" id="7011944">bytesPerPixel</span><span class="op" id="7011957">;</span>&nbsp;<span class="ident" id="7011959">i</span><span class="op" id="7011960">++</span>&nbsp;<span class="op" id="7011963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7011967">cdat</span><span class="op" id="7011971">[</span><span class="ident" id="7011972">i</span><span class="op" id="7011973">]</span>&nbsp;<span class="op" id="7011975">+=</span>&nbsp;<span class="ident" id="7011978">paeth</span><span class="op" id="7011983">(</span><span class="num" id="7011984">0</span><span class="op" id="7011985">,</span>&nbsp;<span class="ident" id="7011987">pdat</span><span class="op" id="7011991">[</span><span class="ident" id="7011992">i</span><span class="op" id="7011993">]</span><span class="op" id="7011994">,</span>&nbsp;<span class="num" id="7011996">0</span><span class="op" id="7011997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012000">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012003">for</span>&nbsp;<span class="ident" id="7012007">i</span>&nbsp;<span class="op" id="7012009">:=</span>&nbsp;<span class="ident" id="7012012">bytesPerPixel</span><span class="op" id="7012025">;</span>&nbsp;<span class="ident" id="7012027">i</span>&nbsp;<span class="op" id="7012029">&lt;</span>&nbsp;<span class="builtinfunc" id="7012031">len</span><span class="op" id="7012034">(</span><span class="ident" id="7012035">cdat</span><span class="op" id="7012039">)</span><span class="op" id="7012040">;</span>&nbsp;<span class="ident" id="7012042">i</span><span class="op" id="7012043">++</span>&nbsp;<span class="op" id="7012046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012050">cdat</span><span class="op" id="7012054">[</span><span class="ident" id="7012055">i</span><span class="op" id="7012056">]</span>&nbsp;<span class="op" id="7012058">+=</span>&nbsp;<span class="ident" id="7012061">paeth</span><span class="op" id="7012066">(</span><span class="ident" id="7012067">cdat</span><span class="op" id="7012071">[</span><span class="ident" id="7012072">i</span><span class="op" id="7012073">-</span><span class="ident" id="7012074">bytesPerPixel</span><span class="op" id="7012087">]</span><span class="op" id="7012088">,</span>&nbsp;<span class="ident" id="7012090">pdat</span><span class="op" id="7012094">[</span><span class="ident" id="7012095">i</span><span class="op" id="7012096">]</span><span class="op" id="7012097">,</span>&nbsp;<span class="ident" id="7012099">pdat</span><span class="op" id="7012103">[</span><span class="ident" id="7012104">i</span><span class="op" id="7012105">-</span><span class="ident" id="7012106">bytesPerPixel</span><span class="op" id="7012119">]</span><span class="op" id="7012120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012123">}</span><br>
<span class="lineno"></span><span class="op" id="7012125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7012128">func</span>&nbsp;<span class="ident" id="7012133">TestPaeth</span><span class="op" id="7012142">(</span><span class="ident" id="7012143">t</span>&nbsp;<span class="op" id="7012145">*</span><span class="ident" id="7012146">testing</span><span class="op" id="7012153">.</span><span class="ident" id="7012154">T</span><span class="op" id="7012155">)</span>&nbsp;<span class="op" id="7012157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012160">for</span>&nbsp;<span class="ident" id="7012164">a</span>&nbsp;<span class="op" id="7012166">:=</span>&nbsp;<span class="num" id="7012169">0</span><span class="op" id="7012170">;</span>&nbsp;<span class="ident" id="7012172">a</span>&nbsp;<span class="op" id="7012174">&lt;</span>&nbsp;<span class="num" id="7012176">256</span><span class="op" id="7012179">;</span>&nbsp;<span class="ident" id="7012181">a</span>&nbsp;<span class="op" id="7012183">+=</span>&nbsp;<span class="num" id="7012186">15</span>&nbsp;<span class="op" id="7012189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012193">for</span>&nbsp;<span class="ident" id="7012197">b</span>&nbsp;<span class="op" id="7012199">:=</span>&nbsp;<span class="num" id="7012202">0</span><span class="op" id="7012203">;</span>&nbsp;<span class="ident" id="7012205">b</span>&nbsp;<span class="op" id="7012207">&lt;</span>&nbsp;<span class="num" id="7012209">256</span><span class="op" id="7012212">;</span>&nbsp;<span class="ident" id="7012214">b</span>&nbsp;<span class="op" id="7012216">+=</span>&nbsp;<span class="num" id="7012219">15</span>&nbsp;<span class="op" id="7012222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012227">for</span>&nbsp;<span class="ident" id="7012231">c</span>&nbsp;<span class="op" id="7012233">:=</span>&nbsp;<span class="num" id="7012236">0</span><span class="op" id="7012237">;</span>&nbsp;<span class="ident" id="7012239">c</span>&nbsp;<span class="op" id="7012241">&lt;</span>&nbsp;<span class="num" id="7012243">256</span><span class="op" id="7012246">;</span>&nbsp;<span class="ident" id="7012248">c</span>&nbsp;<span class="op" id="7012250">+=</span>&nbsp;<span class="num" id="7012253">15</span>&nbsp;<span class="op" id="7012256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012262">got</span>&nbsp;<span class="op" id="7012266">:=</span>&nbsp;<span class="ident" id="7012269">paeth</span><span class="op" id="7012274">(</span><span class="builtintype" id="7012275">uint8</span><span class="op" id="7012280">(</span><span class="ident" id="7012281">a</span><span class="op" id="7012282">)</span><span class="op" id="7012283">,</span>&nbsp;<span class="builtintype" id="7012285">uint8</span><span class="op" id="7012290">(</span><span class="ident" id="7012291">b</span><span class="op" id="7012292">)</span><span class="op" id="7012293">,</span>&nbsp;<span class="builtintype" id="7012295">uint8</span><span class="op" id="7012300">(</span><span class="ident" id="7012301">c</span><span class="op" id="7012302">)</span><span class="op" id="7012303">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012309">want</span>&nbsp;<span class="op" id="7012314">:=</span>&nbsp;<span class="ident" id="7012317">slowPaeth</span><span class="op" id="7012326">(</span><span class="builtintype" id="7012327">uint8</span><span class="op" id="7012332">(</span><span class="ident" id="7012333">a</span><span class="op" id="7012334">)</span><span class="op" id="7012335">,</span>&nbsp;<span class="builtintype" id="7012337">uint8</span><span class="op" id="7012342">(</span><span class="ident" id="7012343">b</span><span class="op" id="7012344">)</span><span class="op" id="7012345">,</span>&nbsp;<span class="builtintype" id="7012347">uint8</span><span class="op" id="7012352">(</span><span class="ident" id="7012353">c</span><span class="op" id="7012354">)</span><span class="op" id="7012355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012361">if</span>&nbsp;<span class="ident" id="7012364">got</span>&nbsp;<span class="op" id="7012368">!=</span>&nbsp;<span class="ident" id="7012371">want</span>&nbsp;<span class="op" id="7012376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012383">t</span><span class="op" id="7012384">.</span><span class="ident" id="7012385">Errorf</span><span class="op" id="7012391">(</span><span class="string" id="7012392">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7012431">,</span>&nbsp;<span class="ident" id="7012433">a</span><span class="op" id="7012434">,</span>&nbsp;<span class="ident" id="7012436">b</span><span class="op" id="7012437">,</span>&nbsp;<span class="ident" id="7012439">c</span><span class="op" id="7012440">,</span>&nbsp;<span class="ident" id="7012442">got</span><span class="op" id="7012445">,</span>&nbsp;<span class="ident" id="7012447">want</span><span class="op" id="7012451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012462">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012469">}</span><br>
<span class="lineno"></span><span class="op" id="7012471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7012474">func</span>&nbsp;<span class="ident" id="7012479">BenchmarkPaeth</span><span class="op" id="7012493">(</span><span class="ident" id="7012494">b</span>&nbsp;<span class="op" id="7012496">*</span><span class="ident" id="7012497">testing</span><span class="op" id="7012504">.</span><span class="ident" id="7012505">B</span><span class="op" id="7012506">)</span>&nbsp;<span class="op" id="7012508">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012511">for</span>&nbsp;<span class="ident" id="7012515">i</span>&nbsp;<span class="op" id="7012517">:=</span>&nbsp;<span class="num" id="7012520">0</span><span class="op" id="7012521">;</span>&nbsp;<span class="ident" id="7012523">i</span>&nbsp;<span class="op" id="7012525">&lt;</span>&nbsp;<span class="ident" id="7012527">b</span><span class="op" id="7012528">.</span><span class="ident" id="7012529">N</span><span class="op" id="7012530">;</span>&nbsp;<span class="ident" id="7012532">i</span><span class="op" id="7012533">++</span>&nbsp;<span class="op" id="7012536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012540">paeth</span><span class="op" id="7012545">(</span><span class="builtintype" id="7012546">uint8</span><span class="op" id="7012551">(</span><span class="ident" id="7012552">i</span><span class="op" id="7012553">&gt;&gt;</span><span class="num" id="7012555">16</span><span class="op" id="7012557">)</span><span class="op" id="7012558">,</span>&nbsp;<span class="builtintype" id="7012560">uint8</span><span class="op" id="7012565">(</span><span class="ident" id="7012566">i</span><span class="op" id="7012567">&gt;&gt;</span><span class="num" id="7012569">8</span><span class="op" id="7012570">)</span><span class="op" id="7012571">,</span>&nbsp;<span class="builtintype" id="7012573">uint8</span><span class="op" id="7012578">(</span><span class="ident" id="7012579">i</span><span class="op" id="7012580">)</span><span class="op" id="7012581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012584">}</span><br>
<span class="lineno"></span><span class="op" id="7012586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7012589">func</span>&nbsp;<span class="ident" id="7012594">TestPaethDecode</span><span class="op" id="7012609">(</span><span class="ident" id="7012610">t</span>&nbsp;<span class="op" id="7012612">*</span><span class="ident" id="7012613">testing</span><span class="op" id="7012620">.</span><span class="ident" id="7012621">T</span><span class="op" id="7012622">)</span>&nbsp;<span class="op" id="7012624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012627">pdat0</span>&nbsp;<span class="op" id="7012633">:=</span>&nbsp;<span class="builtinfunc" id="7012636">make</span><span class="op" id="7012640">(</span><span class="op" id="7012641">[</span><span class="op" id="7012642">]</span><span class="builtintype" id="7012643">byte</span><span class="op" id="7012647">,</span>&nbsp;<span class="num" id="7012649">32</span><span class="op" id="7012651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012654">pdat1</span>&nbsp;<span class="op" id="7012660">:=</span>&nbsp;<span class="builtinfunc" id="7012663">make</span><span class="op" id="7012667">(</span><span class="op" id="7012668">[</span><span class="op" id="7012669">]</span><span class="builtintype" id="7012670">byte</span><span class="op" id="7012674">,</span>&nbsp;<span class="num" id="7012676">32</span><span class="op" id="7012678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012681">pdat2</span>&nbsp;<span class="op" id="7012687">:=</span>&nbsp;<span class="builtinfunc" id="7012690">make</span><span class="op" id="7012694">(</span><span class="op" id="7012695">[</span><span class="op" id="7012696">]</span><span class="builtintype" id="7012697">byte</span><span class="op" id="7012701">,</span>&nbsp;<span class="num" id="7012703">32</span><span class="op" id="7012705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012708">cdat0</span>&nbsp;<span class="op" id="7012714">:=</span>&nbsp;<span class="builtinfunc" id="7012717">make</span><span class="op" id="7012721">(</span><span class="op" id="7012722">[</span><span class="op" id="7012723">]</span><span class="builtintype" id="7012724">byte</span><span class="op" id="7012728">,</span>&nbsp;<span class="num" id="7012730">32</span><span class="op" id="7012732">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012735">cdat1</span>&nbsp;<span class="op" id="7012741">:=</span>&nbsp;<span class="builtinfunc" id="7012744">make</span><span class="op" id="7012748">(</span><span class="op" id="7012749">[</span><span class="op" id="7012750">]</span><span class="builtintype" id="7012751">byte</span><span class="op" id="7012755">,</span>&nbsp;<span class="num" id="7012757">32</span><span class="op" id="7012759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012762">cdat2</span>&nbsp;<span class="op" id="7012768">:=</span>&nbsp;<span class="builtinfunc" id="7012771">make</span><span class="op" id="7012775">(</span><span class="op" id="7012776">[</span><span class="op" id="7012777">]</span><span class="builtintype" id="7012778">byte</span><span class="op" id="7012782">,</span>&nbsp;<span class="num" id="7012784">32</span><span class="op" id="7012786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012789">r</span>&nbsp;<span class="op" id="7012791">:=</span>&nbsp;<span class="ident" id="7012794">rand</span><span class="op" id="7012798">.</span><span class="ident" id="7012799">New</span><span class="op" id="7012802">(</span><span class="ident" id="7012803">rand</span><span class="op" id="7012807">.</span><span class="ident" id="7012808">NewSource</span><span class="op" id="7012817">(</span><span class="num" id="7012818">1</span><span class="op" id="7012819">)</span><span class="op" id="7012820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012823">for</span>&nbsp;<span class="ident" id="7012827">bytesPerPixel</span>&nbsp;<span class="op" id="7012841">:=</span>&nbsp;<span class="num" id="7012844">1</span><span class="op" id="7012845">;</span>&nbsp;<span class="ident" id="7012847">bytesPerPixel</span>&nbsp;<span class="op" id="7012861">&lt;=</span>&nbsp;<span class="num" id="7012864">8</span><span class="op" id="7012865">;</span>&nbsp;<span class="ident" id="7012867">bytesPerPixel</span><span class="op" id="7012880">++</span>&nbsp;<span class="op" id="7012883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012887">for</span>&nbsp;<span class="ident" id="7012891">i</span>&nbsp;<span class="op" id="7012893">:=</span>&nbsp;<span class="num" id="7012896">0</span><span class="op" id="7012897">;</span>&nbsp;<span class="ident" id="7012899">i</span>&nbsp;<span class="op" id="7012901">&lt;</span>&nbsp;<span class="num" id="7012903">100</span><span class="op" id="7012906">;</span>&nbsp;<span class="ident" id="7012908">i</span><span class="op" id="7012909">++</span>&nbsp;<span class="op" id="7012912">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7012917">for</span>&nbsp;<span class="ident" id="7012921">j</span>&nbsp;<span class="op" id="7012923">:=</span>&nbsp;<span class="keyword" id="7012926">range</span>&nbsp;<span class="ident" id="7012932">pdat0</span>&nbsp;<span class="op" id="7012938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012944">pdat0</span><span class="op" id="7012949">[</span><span class="ident" id="7012950">j</span><span class="op" id="7012951">]</span>&nbsp;<span class="op" id="7012953">=</span>&nbsp;<span class="builtintype" id="7012955">uint8</span><span class="op" id="7012960">(</span><span class="ident" id="7012961">r</span><span class="op" id="7012962">.</span><span class="ident" id="7012963">Uint32</span><span class="op" id="7012969">(</span><span class="op" id="7012970">)</span><span class="op" id="7012971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7012977">cdat0</span><span class="op" id="7012982">[</span><span class="ident" id="7012983">j</span><span class="op" id="7012984">]</span>&nbsp;<span class="op" id="7012986">=</span>&nbsp;<span class="builtintype" id="7012988">uint8</span><span class="op" id="7012993">(</span><span class="ident" id="7012994">r</span><span class="op" id="7012995">.</span><span class="ident" id="7012996">Uint32</span><span class="op" id="7013002">(</span><span class="op" id="7013003">)</span><span class="op" id="7013004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7013009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7013014">copy</span><span class="op" id="7013018">(</span><span class="ident" id="7013019">pdat1</span><span class="op" id="7013024">,</span>&nbsp;<span class="ident" id="7013026">pdat0</span><span class="op" id="7013031">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7013036">copy</span><span class="op" id="7013040">(</span><span class="ident" id="7013041">pdat2</span><span class="op" id="7013046">,</span>&nbsp;<span class="ident" id="7013048">pdat0</span><span class="op" id="7013053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7013058">copy</span><span class="op" id="7013062">(</span><span class="ident" id="7013063">cdat1</span><span class="op" id="7013068">,</span>&nbsp;<span class="ident" id="7013070">cdat0</span><span class="op" id="7013075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7013080">copy</span><span class="op" id="7013084">(</span><span class="ident" id="7013085">cdat2</span><span class="op" id="7013090">,</span>&nbsp;<span class="ident" id="7013092">cdat0</span><span class="op" id="7013097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7013102">filterPaeth</span><span class="op" id="7013113">(</span><span class="ident" id="7013114">cdat1</span><span class="op" id="7013119">,</span>&nbsp;<span class="ident" id="7013121">pdat1</span><span class="op" id="7013126">,</span>&nbsp;<span class="ident" id="7013128">bytesPerPixel</span><span class="op" id="7013141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7013146">slowFilterPaeth</span><span class="op" id="7013161">(</span><span class="ident" id="7013162">cdat2</span><span class="op" id="7013167">,</span>&nbsp;<span class="ident" id="7013169">pdat2</span><span class="op" id="7013174">,</span>&nbsp;<span class="ident" id="7013176">bytesPerPixel</span><span class="op" id="7013189">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7013194">if</span>&nbsp;<span class="op" id="7013197">!</span><span class="ident" id="7013198">bytes</span><span class="op" id="7013203">.</span><span class="ident" id="7013204">Equal</span><span class="op" id="7013209">(</span><span class="ident" id="7013210">cdat1</span><span class="op" id="7013215">,</span>&nbsp;<span class="ident" id="7013217">cdat2</span><span class="op" id="7013222">)</span>&nbsp;<span class="op" id="7013224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7013230">t</span><span class="op" id="7013231">.</span><span class="ident" id="7013232">Errorf</span><span class="op" id="7013238">(</span><span class="string" id="7013239">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="7013306">,</span>&nbsp;<span class="ident" id="7013308">bytesPerPixel</span><span class="op" id="7013321">,</span>&nbsp;<span class="ident" id="7013323">pdat0</span><span class="op" id="7013328">,</span>&nbsp;<span class="ident" id="7013330">cdat0</span><span class="op" id="7013335">,</span>&nbsp;<span class="ident" id="7013337">cdat1</span><span class="op" id="7013342">,</span>&nbsp;<span class="ident" id="7013344">cdat2</span><span class="op" id="7013349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7013355">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7013364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7013368">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7013371">}</span><br>
<span class="lineno"></span><span class="op" id="7013373">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
