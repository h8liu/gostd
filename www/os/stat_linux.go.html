<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2468758">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2468813">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2468867">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2468918">package</span>&nbsp;<span class="ident" id="2468926">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2468930">import</span>&nbsp;<span class="op" id="2468937">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2468940">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2468951">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2468958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2468961">func</span>&nbsp;<span class="ident" id="2468966">sameFile</span><span class="op" id="2468974">(</span><span class="ident" id="2468975">fs1</span><span class="op" id="2468978">,</span>&nbsp;<span class="ident" id="2468980">fs2</span>&nbsp;<span class="op" id="2468984">*</span><span class="ident" id="2468985"><a href="/os/types_notwin.go.html#2475355">fileStat</a></span><span class="op" id="2468993">)</span>&nbsp;<span class="builtintype" id="2468995">bool</span>&nbsp;<span class="op" id="2469000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469003">stat1</span>&nbsp;<span class="op" id="2469009">:=</span>&nbsp;<span class="ident" id="2469012"><a href="/os/stat_linux.go.html#2468975">fs1</a></span><span class="op" id="2469015">.</span><span class="ident" id="2469016">sys</span><span class="op" id="2469019">.</span><span class="op" id="2469020">(</span><span class="op" id="2469021">*</span><span class="ident" id="2469022"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469029">.</span><span class="ident" id="2469030">Stat_t</span><span class="op" id="2469036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469039">stat2</span>&nbsp;<span class="op" id="2469045">:=</span>&nbsp;<span class="ident" id="2469048"><a href="/os/stat_linux.go.html#2468980">fs2</a></span><span class="op" id="2469051">.</span><span class="ident" id="2469052">sys</span><span class="op" id="2469055">.</span><span class="op" id="2469056">(</span><span class="op" id="2469057">*</span><span class="ident" id="2469058"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469065">.</span><span class="ident" id="2469066">Stat_t</span><span class="op" id="2469072">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469075">return</span>&nbsp;<span class="ident" id="2469082"><a href="/os/stat_linux.go.html#2469003">stat1</a></span><span class="op" id="2469087">.</span><span class="ident" id="2469088">Dev</span>&nbsp;<span class="op" id="2469092">==</span>&nbsp;<span class="ident" id="2469095"><a href="/os/stat_linux.go.html#2469039">stat2</a></span><span class="op" id="2469100">.</span><span class="ident" id="2469101">Dev</span>&nbsp;<span class="op" id="2469105">&amp;&amp;</span>&nbsp;<span class="ident" id="2469108"><a href="/os/stat_linux.go.html#2469003">stat1</a></span><span class="op" id="2469113">.</span><span class="ident" id="2469114">Ino</span>&nbsp;<span class="op" id="2469118">==</span>&nbsp;<span class="ident" id="2469121"><a href="/os/stat_linux.go.html#2469039">stat2</a></span><span class="op" id="2469126">.</span><span class="ident" id="2469127">Ino</span><br>
<span class="lineno"></span><span class="op" id="2469131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2469134">func</span>&nbsp;<span class="ident" id="2469139">fileInfoFromStat</span><span class="op" id="2469155">(</span><span class="ident" id="2469156">st</span>&nbsp;<span class="op" id="2469159">*</span><span class="ident" id="2469160"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469167">.</span><span class="ident" id="2469168">Stat_t</span><span class="op" id="2469174">,</span>&nbsp;<span class="ident" id="2469176">name</span>&nbsp;<span class="builtintype" id="2469181">string</span><span class="op" id="2469187">)</span>&nbsp;<span class="ident" id="2469189"><a href="/os/types.go.html#2471413">FileInfo</a></span>&nbsp;<span class="op" id="2469198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469201">fs</span>&nbsp;<span class="op" id="2469204">:=</span>&nbsp;<span class="op" id="2469207">&amp;</span><span class="ident" id="2469208"><a href="/os/types_notwin.go.html#2475355">fileStat</a></span><span class="op" id="2469216">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469220">name</span><span class="op" id="2469224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2469229"><a href="/os/file_unix.go.html#2459266">basename</a></span><span class="op" id="2469237">(</span><span class="ident" id="2469238"><a href="/os/stat_linux.go.html#2469176">name</a></span><span class="op" id="2469242">)</span><span class="op" id="2469243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469247">size</span><span class="op" id="2469251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2469256">int64</span><span class="op" id="2469261">(</span><span class="ident" id="2469262"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469264">.</span><span class="ident" id="2469265">Size</span><span class="op" id="2469269">)</span><span class="op" id="2469270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469274">modTime</span><span class="op" id="2469281">:</span>&nbsp;<span class="ident" id="2469283"><a href="/os/stat_linux.go.html#2469948">timespecToTime</a></span><span class="op" id="2469297">(</span><span class="ident" id="2469298"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469300">.</span><span class="ident" id="2469301">Mtim</span><span class="op" id="2469305">)</span><span class="op" id="2469306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469310">sys</span><span class="op" id="2469313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2469319"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469324">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469327"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469329">.</span><span class="ident" id="2469330">mode</span>&nbsp;<span class="op" id="2469335">=</span>&nbsp;<span class="ident" id="2469337"><a href="/os/types.go.html#2472066">FileMode</a></span><span class="op" id="2469345">(</span><span class="ident" id="2469346"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469348">.</span><span class="ident" id="2469349">Mode</span>&nbsp;<span class="op" id="2469354">&amp;</span>&nbsp;<span class="num" id="2469356">0777</span><span class="op" id="2469360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469363">switch</span>&nbsp;<span class="ident" id="2469370"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469372">.</span><span class="ident" id="2469373">Mode</span>&nbsp;<span class="op" id="2469378">&amp;</span>&nbsp;<span class="ident" id="2469380"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469387">.</span><span class="ident" id="2469388">S_IFMT</span>&nbsp;<span class="op" id="2469395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469398">case</span>&nbsp;<span class="ident" id="2469403"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469410">.</span><span class="ident" id="2469411">S_IFBLK</span><span class="op" id="2469418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469422"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469424">.</span><span class="ident" id="2469425">mode</span>&nbsp;<span class="op" id="2469430">|=</span>&nbsp;<span class="ident" id="2469433"><a href="/os/types.go.html#2472891">ModeDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469445">case</span>&nbsp;<span class="ident" id="2469450"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469457">.</span><span class="ident" id="2469458">S_IFCHR</span><span class="op" id="2469465">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469469"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469471">.</span><span class="ident" id="2469472">mode</span>&nbsp;<span class="op" id="2469477">|=</span>&nbsp;<span class="ident" id="2469480"><a href="/os/types.go.html#2472891">ModeDevice</a></span>&nbsp;<span class="op" id="2469491">|</span>&nbsp;<span class="ident" id="2469493"><a href="/os/types.go.html#2473224">ModeCharDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469509">case</span>&nbsp;<span class="ident" id="2469514"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469521">.</span><span class="ident" id="2469522">S_IFDIR</span><span class="op" id="2469529">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469533"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469535">.</span><span class="ident" id="2469536">mode</span>&nbsp;<span class="op" id="2469541">|=</span>&nbsp;<span class="ident" id="2469544"><a href="/os/types.go.html#2472535">ModeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469553">case</span>&nbsp;<span class="ident" id="2469558"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469565">.</span><span class="ident" id="2469566">S_IFIFO</span><span class="op" id="2469573">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469577"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469579">.</span><span class="ident" id="2469580">mode</span>&nbsp;<span class="op" id="2469585">|=</span>&nbsp;<span class="ident" id="2469588"><a href="/os/types.go.html#2472957">ModeNamedPipe</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469603">case</span>&nbsp;<span class="ident" id="2469608"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469615">.</span><span class="ident" id="2469616">S_IFLNK</span><span class="op" id="2469623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469627"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469629">.</span><span class="ident" id="2469630">mode</span>&nbsp;<span class="op" id="2469635">|=</span>&nbsp;<span class="ident" id="2469638"><a href="/os/types.go.html#2472823">ModeSymlink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469651">case</span>&nbsp;<span class="ident" id="2469656"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469663">.</span><span class="ident" id="2469664">S_IFREG</span><span class="op" id="2469671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2469675">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469693">case</span>&nbsp;<span class="ident" id="2469698"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469705">.</span><span class="ident" id="2469706">S_IFSOCK</span><span class="op" id="2469714">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469718"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469720">.</span><span class="ident" id="2469721">mode</span>&nbsp;<span class="op" id="2469726">|=</span>&nbsp;<span class="ident" id="2469729"><a href="/os/types.go.html#2473029">ModeSocket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469744">if</span>&nbsp;<span class="ident" id="2469747"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469749">.</span><span class="ident" id="2469750">Mode</span><span class="op" id="2469754">&amp;</span><span class="ident" id="2469755"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469762">.</span><span class="ident" id="2469763">S_ISGID</span>&nbsp;<span class="op" id="2469771">!=</span>&nbsp;<span class="num" id="2469774">0</span>&nbsp;<span class="op" id="2469776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469780"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469782">.</span><span class="ident" id="2469783">mode</span>&nbsp;<span class="op" id="2469788">|=</span>&nbsp;<span class="ident" id="2469791"><a href="/os/types.go.html#2473163">ModeSetgid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469803">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469806">if</span>&nbsp;<span class="ident" id="2469809"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469811">.</span><span class="ident" id="2469812">Mode</span><span class="op" id="2469816">&amp;</span><span class="ident" id="2469817"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469824">.</span><span class="ident" id="2469825">S_ISUID</span>&nbsp;<span class="op" id="2469833">!=</span>&nbsp;<span class="num" id="2469836">0</span>&nbsp;<span class="op" id="2469838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469842"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469844">.</span><span class="ident" id="2469845">mode</span>&nbsp;<span class="op" id="2469850">|=</span>&nbsp;<span class="ident" id="2469853"><a href="/os/types.go.html#2473102">ModeSetuid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469868">if</span>&nbsp;<span class="ident" id="2469871"><a href="/os/stat_linux.go.html#2469156">st</a></span><span class="op" id="2469873">.</span><span class="ident" id="2469874">Mode</span><span class="op" id="2469878">&amp;</span><span class="ident" id="2469879"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469886">.</span><span class="ident" id="2469887">S_ISVTX</span>&nbsp;<span class="op" id="2469895">!=</span>&nbsp;<span class="num" id="2469898">0</span>&nbsp;<span class="op" id="2469900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469904"><a href="/os/stat_linux.go.html#2469201">fs</a></span><span class="op" id="2469906">.</span><span class="ident" id="2469907">mode</span>&nbsp;<span class="op" id="2469912">|=</span>&nbsp;<span class="ident" id="2469915"><a href="/os/types.go.html#2473324">ModeSticky</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469930">return</span>&nbsp;<span class="ident" id="2469937"><a href="/os/stat_linux.go.html#2469201">fs</a></span><br>
<span class="lineno"></span><span class="op" id="2469940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2469943">func</span>&nbsp;<span class="ident" id="2469948">timespecToTime</span><span class="op" id="2469962">(</span><span class="ident" id="2469963">ts</span>&nbsp;<span class="ident" id="2469966"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2469973">.</span><span class="ident" id="2469974">Timespec</span><span class="op" id="2469982">)</span>&nbsp;<span class="ident" id="2469984"><a href="/os/stat_linux.go.html#2468951">time</a></span><span class="op" id="2469988">.</span><span class="ident" id="2469989">Time</span>&nbsp;<span class="op" id="2469994">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469997">return</span>&nbsp;<span class="ident" id="2470004"><a href="/os/stat_linux.go.html#2468951">time</a></span><span class="op" id="2470008">.</span><span class="ident" id="2470009">Unix</span><span class="op" id="2470013">(</span><span class="ident" id="2470014">int64</span><span class="op" id="2470019">(</span><span class="ident" id="2470020"><a href="/os/stat_linux.go.html#2469963">ts</a></span><span class="op" id="2470022">.</span><span class="ident" id="2470023">Sec</span><span class="op" id="2470026">)</span><span class="op" id="2470027">,</span>&nbsp;<span class="ident" id="2470029">int64</span><span class="op" id="2470034">(</span><span class="ident" id="2470035"><a href="/os/stat_linux.go.html#2469963">ts</a></span><span class="op" id="2470037">.</span><span class="ident" id="2470038">Nsec</span><span class="op" id="2470042">)</span><span class="op" id="2470043">)</span><br>
<span class="lineno"></span><span class="op" id="2470045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2470048">//&nbsp;For&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="2470064">func</span>&nbsp;<span class="ident" id="2470069">atime</span><span class="op" id="2470074">(</span><span class="ident" id="2470075">fi</span>&nbsp;<span class="ident" id="2470078"><a href="/os/types.go.html#2471413">FileInfo</a></span><span class="op" id="2470086">)</span>&nbsp;<span class="ident" id="2470088"><a href="/os/stat_linux.go.html#2468951">time</a></span><span class="op" id="2470092">.</span><span class="ident" id="2470093">Time</span>&nbsp;<span class="op" id="2470098">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2470101">return</span>&nbsp;<span class="ident" id="2470108"><a href="/os/stat_linux.go.html#2469948">timespecToTime</a></span><span class="op" id="2470122">(</span><span class="ident" id="2470123"><a href="/os/stat_linux.go.html#2470075">fi</a></span><span class="op" id="2470125">.</span><span class="ident" id="2470126">Sys</span><span class="op" id="2470129">(</span><span class="op" id="2470130">)</span><span class="op" id="2470131">.</span><span class="op" id="2470132">(</span><span class="op" id="2470133">*</span><span class="ident" id="2470134"><a href="/os/stat_linux.go.html#2468940">syscall</a></span><span class="op" id="2470141">.</span><span class="ident" id="2470142">Stat_t</span><span class="op" id="2470148">)</span><span class="op" id="2470149">.</span><span class="ident" id="2470150">Atim</span><span class="op" id="2470154">)</span><br>
<span class="lineno"></span><span class="op" id="2470156">}</span>
</div>
</body>
</html>
