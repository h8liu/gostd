<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8035817">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8035872">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8035926">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8035977">package</span>&nbsp;<span class="ident" id="8035985">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8035996">import</span>&nbsp;<span class="op" id="8036003">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8036006">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8036015">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8036028">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8036039">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8036049">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8036052">func</span>&nbsp;<span class="ident" id="8036057">TestWriter</span><span class="op" id="8036067">(</span><span class="ident" id="8036068">t</span>&nbsp;<span class="op" id="8036070">*</span><span class="ident" id="8036071">testing</span><span class="op" id="8036078">.</span><span class="ident" id="8036079">T</span><span class="op" id="8036080">)</span>&nbsp;<span class="op" id="8036082">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036085">fileContents</span>&nbsp;<span class="op" id="8036098">:=</span>&nbsp;<span class="op" id="8036101">[</span><span class="op" id="8036102">]</span><span class="builtintype" id="8036103">byte</span><span class="op" id="8036107">(</span><span class="string" id="8036108">&#34;my&nbsp;file&nbsp;contents&#34;</span><span class="op" id="8036126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036130">var</span>&nbsp;<span class="ident" id="8036134">b</span>&nbsp;<span class="ident" id="8036136">bytes</span><span class="op" id="8036141">.</span><span class="ident" id="8036142">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036150">w</span>&nbsp;<span class="op" id="8036152">:=</span>&nbsp;<span class="ident" id="8036155">NewWriter</span><span class="op" id="8036164">(</span><span class="op" id="8036165">&amp;</span><span class="ident" id="8036166">b</span><span class="op" id="8036167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036170">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036174">part</span><span class="op" id="8036178">,</span>&nbsp;<span class="ident" id="8036180">err</span>&nbsp;<span class="op" id="8036184">:=</span>&nbsp;<span class="ident" id="8036187">w</span><span class="op" id="8036188">.</span><span class="ident" id="8036189">CreateFormFile</span><span class="op" id="8036203">(</span><span class="string" id="8036204">&#34;myfile&#34;</span><span class="op" id="8036212">,</span>&nbsp;<span class="string" id="8036214">&#34;my-file.txt&#34;</span><span class="op" id="8036227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036231">if</span>&nbsp;<span class="ident" id="8036234">err</span>&nbsp;<span class="op" id="8036238">!=</span>&nbsp;<span class="builtintype" id="8036241">nil</span>&nbsp;<span class="op" id="8036245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036250">t</span><span class="op" id="8036251">.</span><span class="ident" id="8036252">Fatalf</span><span class="op" id="8036258">(</span><span class="string" id="8036259">&#34;CreateFormFile:&nbsp;%v&#34;</span><span class="op" id="8036279">,</span>&nbsp;<span class="ident" id="8036281">err</span><span class="op" id="8036284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036292">part</span><span class="op" id="8036296">.</span><span class="ident" id="8036297">Write</span><span class="op" id="8036302">(</span><span class="ident" id="8036303">fileContents</span><span class="op" id="8036315">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036319">err</span>&nbsp;<span class="op" id="8036323">=</span>&nbsp;<span class="ident" id="8036325">w</span><span class="op" id="8036326">.</span><span class="ident" id="8036327">WriteField</span><span class="op" id="8036337">(</span><span class="string" id="8036338">&#34;key&#34;</span><span class="op" id="8036343">,</span>&nbsp;<span class="string" id="8036345">&#34;val&#34;</span><span class="op" id="8036350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036354">if</span>&nbsp;<span class="ident" id="8036357">err</span>&nbsp;<span class="op" id="8036361">!=</span>&nbsp;<span class="builtintype" id="8036364">nil</span>&nbsp;<span class="op" id="8036368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036373">t</span><span class="op" id="8036374">.</span><span class="ident" id="8036375">Fatalf</span><span class="op" id="8036381">(</span><span class="string" id="8036382">&#34;WriteField:&nbsp;%v&#34;</span><span class="op" id="8036398">,</span>&nbsp;<span class="ident" id="8036400">err</span><span class="op" id="8036403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036411">part</span><span class="op" id="8036415">.</span><span class="ident" id="8036416">Write</span><span class="op" id="8036421">(</span><span class="op" id="8036422">[</span><span class="op" id="8036423">]</span><span class="builtintype" id="8036424">byte</span><span class="op" id="8036428">(</span><span class="string" id="8036429">&#34;val&#34;</span><span class="op" id="8036434">)</span><span class="op" id="8036435">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036439">err</span>&nbsp;<span class="op" id="8036443">=</span>&nbsp;<span class="ident" id="8036445">w</span><span class="op" id="8036446">.</span><span class="ident" id="8036447">Close</span><span class="op" id="8036452">(</span><span class="op" id="8036453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036457">if</span>&nbsp;<span class="ident" id="8036460">err</span>&nbsp;<span class="op" id="8036464">!=</span>&nbsp;<span class="builtintype" id="8036467">nil</span>&nbsp;<span class="op" id="8036471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036476">t</span><span class="op" id="8036477">.</span><span class="ident" id="8036478">Fatalf</span><span class="op" id="8036484">(</span><span class="string" id="8036485">&#34;Close:&nbsp;%v&#34;</span><span class="op" id="8036496">,</span>&nbsp;<span class="ident" id="8036498">err</span><span class="op" id="8036501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036509">s</span>&nbsp;<span class="op" id="8036511">:=</span>&nbsp;<span class="ident" id="8036514">b</span><span class="op" id="8036515">.</span><span class="ident" id="8036516">String</span><span class="op" id="8036522">(</span><span class="op" id="8036523">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036527">if</span>&nbsp;<span class="builtinfunc" id="8036530">len</span><span class="op" id="8036533">(</span><span class="ident" id="8036534">s</span><span class="op" id="8036535">)</span>&nbsp;<span class="op" id="8036537">==</span>&nbsp;<span class="num" id="8036540">0</span>&nbsp;<span class="op" id="8036542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036547">t</span><span class="op" id="8036548">.</span><span class="ident" id="8036549">Fatal</span><span class="op" id="8036554">(</span><span class="string" id="8036555">&#34;String:&nbsp;unexpected&nbsp;empty&nbsp;result&#34;</span><span class="op" id="8036588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036596">if</span>&nbsp;<span class="ident" id="8036599">s</span><span class="op" id="8036600">[</span><span class="num" id="8036601">0</span><span class="op" id="8036602">]</span>&nbsp;<span class="op" id="8036604">==</span>&nbsp;<span class="string" id="8036607">&#39;\r&#39;</span>&nbsp;<span class="op" id="8036612">||</span>&nbsp;<span class="ident" id="8036615">s</span><span class="op" id="8036616">[</span><span class="num" id="8036617">0</span><span class="op" id="8036618">]</span>&nbsp;<span class="op" id="8036620">==</span>&nbsp;<span class="string" id="8036623">&#39;\n&#39;</span>&nbsp;<span class="op" id="8036628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036633">t</span><span class="op" id="8036634">.</span><span class="ident" id="8036635">Fatal</span><span class="op" id="8036640">(</span><span class="string" id="8036641">&#34;String:&nbsp;unexpected&nbsp;newline&#34;</span><span class="op" id="8036669">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036680">r</span>&nbsp;<span class="op" id="8036682">:=</span>&nbsp;<span class="ident" id="8036685">NewReader</span><span class="op" id="8036694">(</span><span class="op" id="8036695">&amp;</span><span class="ident" id="8036696">b</span><span class="op" id="8036697">,</span>&nbsp;<span class="ident" id="8036699">w</span><span class="op" id="8036700">.</span><span class="ident" id="8036701">Boundary</span><span class="op" id="8036709">(</span><span class="op" id="8036710">)</span><span class="op" id="8036711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036715">part</span><span class="op" id="8036719">,</span>&nbsp;<span class="ident" id="8036721">err</span>&nbsp;<span class="op" id="8036725">:=</span>&nbsp;<span class="ident" id="8036728">r</span><span class="op" id="8036729">.</span><span class="ident" id="8036730">NextPart</span><span class="op" id="8036738">(</span><span class="op" id="8036739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036742">if</span>&nbsp;<span class="ident" id="8036745">err</span>&nbsp;<span class="op" id="8036749">!=</span>&nbsp;<span class="builtintype" id="8036752">nil</span>&nbsp;<span class="op" id="8036756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036760">t</span><span class="op" id="8036761">.</span><span class="ident" id="8036762">Fatalf</span><span class="op" id="8036768">(</span><span class="string" id="8036769">&#34;part&nbsp;1:&nbsp;%v&#34;</span><span class="op" id="8036781">,</span>&nbsp;<span class="ident" id="8036783">err</span><span class="op" id="8036786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036792">if</span>&nbsp;<span class="ident" id="8036795">g</span><span class="op" id="8036796">,</span>&nbsp;<span class="ident" id="8036798">e</span>&nbsp;<span class="op" id="8036800">:=</span>&nbsp;<span class="ident" id="8036803">part</span><span class="op" id="8036807">.</span><span class="ident" id="8036808">FormName</span><span class="op" id="8036816">(</span><span class="op" id="8036817">)</span><span class="op" id="8036818">,</span>&nbsp;<span class="string" id="8036820">&#34;myfile&#34;</span><span class="op" id="8036828">;</span>&nbsp;<span class="ident" id="8036830">g</span>&nbsp;<span class="op" id="8036832">!=</span>&nbsp;<span class="ident" id="8036835">e</span>&nbsp;<span class="op" id="8036837">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036841">t</span><span class="op" id="8036842">.</span><span class="ident" id="8036843">Errorf</span><span class="op" id="8036849">(</span><span class="string" id="8036850">&#34;part&nbsp;1:&nbsp;want&nbsp;form&nbsp;name&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8036885">,</span>&nbsp;<span class="ident" id="8036887">e</span><span class="op" id="8036888">,</span>&nbsp;<span class="ident" id="8036890">g</span><span class="op" id="8036891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036897">slurp</span><span class="op" id="8036902">,</span>&nbsp;<span class="ident" id="8036904">err</span>&nbsp;<span class="op" id="8036908">:=</span>&nbsp;<span class="ident" id="8036911">ioutil</span><span class="op" id="8036917">.</span><span class="ident" id="8036918">ReadAll</span><span class="op" id="8036925">(</span><span class="ident" id="8036926">part</span><span class="op" id="8036930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036933">if</span>&nbsp;<span class="ident" id="8036936">err</span>&nbsp;<span class="op" id="8036940">!=</span>&nbsp;<span class="builtintype" id="8036943">nil</span>&nbsp;<span class="op" id="8036947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8036951">t</span><span class="op" id="8036952">.</span><span class="ident" id="8036953">Fatalf</span><span class="op" id="8036959">(</span><span class="string" id="8036960">&#34;part&nbsp;1:&nbsp;ReadAll:&nbsp;%v&#34;</span><span class="op" id="8036981">,</span>&nbsp;<span class="ident" id="8036983">err</span><span class="op" id="8036986">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8036989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8036992">if</span>&nbsp;<span class="ident" id="8036995">e</span><span class="op" id="8036996">,</span>&nbsp;<span class="ident" id="8036998">g</span>&nbsp;<span class="op" id="8037000">:=</span>&nbsp;<span class="builtintype" id="8037003">string</span><span class="op" id="8037009">(</span><span class="ident" id="8037010">fileContents</span><span class="op" id="8037022">)</span><span class="op" id="8037023">,</span>&nbsp;<span class="builtintype" id="8037025">string</span><span class="op" id="8037031">(</span><span class="ident" id="8037032">slurp</span><span class="op" id="8037037">)</span><span class="op" id="8037038">;</span>&nbsp;<span class="ident" id="8037040">e</span>&nbsp;<span class="op" id="8037042">!=</span>&nbsp;<span class="ident" id="8037045">g</span>&nbsp;<span class="op" id="8037047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037051">t</span><span class="op" id="8037052">.</span><span class="ident" id="8037053">Errorf</span><span class="op" id="8037059">(</span><span class="string" id="8037060">&#34;part&nbsp;1:&nbsp;want&nbsp;contents&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8037094">,</span>&nbsp;<span class="ident" id="8037096">e</span><span class="op" id="8037097">,</span>&nbsp;<span class="ident" id="8037099">g</span><span class="op" id="8037100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037107">part</span><span class="op" id="8037111">,</span>&nbsp;<span class="ident" id="8037113">err</span>&nbsp;<span class="op" id="8037117">=</span>&nbsp;<span class="ident" id="8037119">r</span><span class="op" id="8037120">.</span><span class="ident" id="8037121">NextPart</span><span class="op" id="8037129">(</span><span class="op" id="8037130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037133">if</span>&nbsp;<span class="ident" id="8037136">err</span>&nbsp;<span class="op" id="8037140">!=</span>&nbsp;<span class="builtintype" id="8037143">nil</span>&nbsp;<span class="op" id="8037147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037151">t</span><span class="op" id="8037152">.</span><span class="ident" id="8037153">Fatalf</span><span class="op" id="8037159">(</span><span class="string" id="8037160">&#34;part&nbsp;2:&nbsp;%v&#34;</span><span class="op" id="8037172">,</span>&nbsp;<span class="ident" id="8037174">err</span><span class="op" id="8037177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037183">if</span>&nbsp;<span class="ident" id="8037186">g</span><span class="op" id="8037187">,</span>&nbsp;<span class="ident" id="8037189">e</span>&nbsp;<span class="op" id="8037191">:=</span>&nbsp;<span class="ident" id="8037194">part</span><span class="op" id="8037198">.</span><span class="ident" id="8037199">FormName</span><span class="op" id="8037207">(</span><span class="op" id="8037208">)</span><span class="op" id="8037209">,</span>&nbsp;<span class="string" id="8037211">&#34;key&#34;</span><span class="op" id="8037216">;</span>&nbsp;<span class="ident" id="8037218">g</span>&nbsp;<span class="op" id="8037220">!=</span>&nbsp;<span class="ident" id="8037223">e</span>&nbsp;<span class="op" id="8037225">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037229">t</span><span class="op" id="8037230">.</span><span class="ident" id="8037231">Errorf</span><span class="op" id="8037237">(</span><span class="string" id="8037238">&#34;part&nbsp;2:&nbsp;want&nbsp;form&nbsp;name&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8037273">,</span>&nbsp;<span class="ident" id="8037275">e</span><span class="op" id="8037276">,</span>&nbsp;<span class="ident" id="8037278">g</span><span class="op" id="8037279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037285">slurp</span><span class="op" id="8037290">,</span>&nbsp;<span class="ident" id="8037292">err</span>&nbsp;<span class="op" id="8037296">=</span>&nbsp;<span class="ident" id="8037298">ioutil</span><span class="op" id="8037304">.</span><span class="ident" id="8037305">ReadAll</span><span class="op" id="8037312">(</span><span class="ident" id="8037313">part</span><span class="op" id="8037317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037320">if</span>&nbsp;<span class="ident" id="8037323">err</span>&nbsp;<span class="op" id="8037327">!=</span>&nbsp;<span class="builtintype" id="8037330">nil</span>&nbsp;<span class="op" id="8037334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037338">t</span><span class="op" id="8037339">.</span><span class="ident" id="8037340">Fatalf</span><span class="op" id="8037346">(</span><span class="string" id="8037347">&#34;part&nbsp;2:&nbsp;ReadAll:&nbsp;%v&#34;</span><span class="op" id="8037368">,</span>&nbsp;<span class="ident" id="8037370">err</span><span class="op" id="8037373">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037379">if</span>&nbsp;<span class="ident" id="8037382">e</span><span class="op" id="8037383">,</span>&nbsp;<span class="ident" id="8037385">g</span>&nbsp;<span class="op" id="8037387">:=</span>&nbsp;<span class="string" id="8037390">&#34;val&#34;</span><span class="op" id="8037395">,</span>&nbsp;<span class="builtintype" id="8037397">string</span><span class="op" id="8037403">(</span><span class="ident" id="8037404">slurp</span><span class="op" id="8037409">)</span><span class="op" id="8037410">;</span>&nbsp;<span class="ident" id="8037412">e</span>&nbsp;<span class="op" id="8037414">!=</span>&nbsp;<span class="ident" id="8037417">g</span>&nbsp;<span class="op" id="8037419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037423">t</span><span class="op" id="8037424">.</span><span class="ident" id="8037425">Errorf</span><span class="op" id="8037431">(</span><span class="string" id="8037432">&#34;part&nbsp;2:&nbsp;want&nbsp;contents&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8037466">,</span>&nbsp;<span class="ident" id="8037468">e</span><span class="op" id="8037469">,</span>&nbsp;<span class="ident" id="8037471">g</span><span class="op" id="8037472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037479">part</span><span class="op" id="8037483">,</span>&nbsp;<span class="ident" id="8037485">err</span>&nbsp;<span class="op" id="8037489">=</span>&nbsp;<span class="ident" id="8037491">r</span><span class="op" id="8037492">.</span><span class="ident" id="8037493">NextPart</span><span class="op" id="8037501">(</span><span class="op" id="8037502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037505">if</span>&nbsp;<span class="ident" id="8037508">part</span>&nbsp;<span class="op" id="8037513">!=</span>&nbsp;<span class="builtintype" id="8037516">nil</span>&nbsp;<span class="op" id="8037520">||</span>&nbsp;<span class="ident" id="8037523">err</span>&nbsp;<span class="op" id="8037527">==</span>&nbsp;<span class="builtintype" id="8037530">nil</span>&nbsp;<span class="op" id="8037534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037538">t</span><span class="op" id="8037539">.</span><span class="ident" id="8037540">Fatalf</span><span class="op" id="8037546">(</span><span class="string" id="8037547">&#34;expected&nbsp;end&nbsp;of&nbsp;parts;&nbsp;got&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8037582">,</span>&nbsp;<span class="ident" id="8037584">part</span><span class="op" id="8037588">,</span>&nbsp;<span class="ident" id="8037590">err</span><span class="op" id="8037593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037596">}</span><br>
<span class="lineno"></span><span class="op" id="8037598">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="8037601">func</span>&nbsp;<span class="ident" id="8037606">TestWriterSetBoundary</span><span class="op" id="8037627">(</span><span class="ident" id="8037628">t</span>&nbsp;<span class="op" id="8037630">*</span><span class="ident" id="8037631">testing</span><span class="op" id="8037638">.</span><span class="ident" id="8037639">T</span><span class="op" id="8037640">)</span>&nbsp;<span class="op" id="8037642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037645">var</span>&nbsp;<span class="ident" id="8037649">b</span>&nbsp;<span class="ident" id="8037651">bytes</span><span class="op" id="8037656">.</span><span class="ident" id="8037657">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037665">w</span>&nbsp;<span class="op" id="8037667">:=</span>&nbsp;<span class="ident" id="8037670">NewWriter</span><span class="op" id="8037679">(</span><span class="op" id="8037680">&amp;</span><span class="ident" id="8037681">b</span><span class="op" id="8037682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037685">tests</span>&nbsp;<span class="op" id="8037691">:=</span>&nbsp;<span class="op" id="8037694">[</span><span class="op" id="8037695">]</span><span class="keyword" id="8037696">struct</span>&nbsp;<span class="op" id="8037703">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037707">b</span>&nbsp;&nbsp;<span class="builtintype" id="8037710">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037719">ok</span>&nbsp;<span class="builtintype" id="8037722">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037728">}</span><span class="op" id="8037729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037733">{</span><span class="string" id="8037734">&#34;abc&#34;</span><span class="op" id="8037739">,</span>&nbsp;<span class="builtintype" id="8037741">true</span><span class="op" id="8037745">}</span><span class="op" id="8037746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037750">{</span><span class="string" id="8037751">&#34;&#34;</span><span class="op" id="8037753">,</span>&nbsp;<span class="builtintype" id="8037755">false</span><span class="op" id="8037760">}</span><span class="op" id="8037761">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037765">{</span><span class="string" id="8037766">&#34;ung√ºltig&#34;</span><span class="op" id="8037777">,</span>&nbsp;<span class="builtintype" id="8037779">false</span><span class="op" id="8037784">}</span><span class="op" id="8037785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037789">{</span><span class="string" id="8037790">&#34;!&#34;</span><span class="op" id="8037793">,</span>&nbsp;<span class="builtintype" id="8037795">false</span><span class="op" id="8037800">}</span><span class="op" id="8037801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037805">{</span><span class="ident" id="8037806">strings</span><span class="op" id="8037813">.</span><span class="ident" id="8037814">Repeat</span><span class="op" id="8037820">(</span><span class="string" id="8037821">&#34;x&#34;</span><span class="op" id="8037824">,</span>&nbsp;<span class="num" id="8037826">69</span><span class="op" id="8037828">)</span><span class="op" id="8037829">,</span>&nbsp;<span class="builtintype" id="8037831">true</span><span class="op" id="8037835">}</span><span class="op" id="8037836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037840">{</span><span class="ident" id="8037841">strings</span><span class="op" id="8037848">.</span><span class="ident" id="8037849">Repeat</span><span class="op" id="8037855">(</span><span class="string" id="8037856">&#34;x&#34;</span><span class="op" id="8037859">,</span>&nbsp;<span class="num" id="8037861">70</span><span class="op" id="8037863">)</span><span class="op" id="8037864">,</span>&nbsp;<span class="builtintype" id="8037866">false</span><span class="op" id="8037871">}</span><span class="op" id="8037872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037876">{</span><span class="string" id="8037877">&#34;bad!ascii!&#34;</span><span class="op" id="8037889">,</span>&nbsp;<span class="builtintype" id="8037891">false</span><span class="op" id="8037896">}</span><span class="op" id="8037897">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037901">{</span><span class="string" id="8037902">&#34;my-separator&#34;</span><span class="op" id="8037916">,</span>&nbsp;<span class="builtintype" id="8037918">true</span><span class="op" id="8037922">}</span><span class="op" id="8037923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8037926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8037929">for</span>&nbsp;<span class="ident" id="8037933">i</span><span class="op" id="8037934">,</span>&nbsp;<span class="ident" id="8037936">tt</span>&nbsp;<span class="op" id="8037939">:=</span>&nbsp;<span class="keyword" id="8037942">range</span>&nbsp;<span class="ident" id="8037948">tests</span>&nbsp;<span class="op" id="8037954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037958">err</span>&nbsp;<span class="op" id="8037962">:=</span>&nbsp;<span class="ident" id="8037965">w</span><span class="op" id="8037966">.</span><span class="ident" id="8037967">SetBoundary</span><span class="op" id="8037978">(</span><span class="ident" id="8037979">tt</span><span class="op" id="8037981">.</span><span class="ident" id="8037982">b</span><span class="op" id="8037983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037987">got</span>&nbsp;<span class="op" id="8037991">:=</span>&nbsp;<span class="ident" id="8037994">err</span>&nbsp;<span class="op" id="8037998">==</span>&nbsp;<span class="builtintype" id="8038001">nil</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8038007">if</span>&nbsp;<span class="ident" id="8038010">got</span>&nbsp;<span class="op" id="8038014">!=</span>&nbsp;<span class="ident" id="8038017">tt</span><span class="op" id="8038019">.</span><span class="ident" id="8038020">ok</span>&nbsp;<span class="op" id="8038023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038028">t</span><span class="op" id="8038029">.</span><span class="ident" id="8038030">Errorf</span><span class="op" id="8038036">(</span><span class="string" id="8038037">&#34;%d.&nbsp;boundary&nbsp;%q&nbsp;=&nbsp;%v&nbsp;(%v);&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8038073">,</span>&nbsp;<span class="ident" id="8038075">i</span><span class="op" id="8038076">,</span>&nbsp;<span class="ident" id="8038078">tt</span><span class="op" id="8038080">.</span><span class="ident" id="8038081">b</span><span class="op" id="8038082">,</span>&nbsp;<span class="ident" id="8038084">got</span><span class="op" id="8038087">,</span>&nbsp;<span class="ident" id="8038089">err</span><span class="op" id="8038092">,</span>&nbsp;<span class="ident" id="8038094">tt</span><span class="op" id="8038096">.</span><span class="ident" id="8038097">ok</span><span class="op" id="8038099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038103">}</span>&nbsp;<span class="keyword" id="8038105">else</span>&nbsp;<span class="keyword" id="8038110">if</span>&nbsp;<span class="ident" id="8038113">tt</span><span class="op" id="8038115">.</span><span class="ident" id="8038116">ok</span>&nbsp;<span class="op" id="8038119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038124">got</span>&nbsp;<span class="op" id="8038128">:=</span>&nbsp;<span class="ident" id="8038131">w</span><span class="op" id="8038132">.</span><span class="ident" id="8038133">Boundary</span><span class="op" id="8038141">(</span><span class="op" id="8038142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8038147">if</span>&nbsp;<span class="ident" id="8038150">got</span>&nbsp;<span class="op" id="8038154">!=</span>&nbsp;<span class="ident" id="8038157">tt</span><span class="op" id="8038159">.</span><span class="ident" id="8038160">b</span>&nbsp;<span class="op" id="8038162">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038168">t</span><span class="op" id="8038169">.</span><span class="ident" id="8038170">Errorf</span><span class="op" id="8038176">(</span><span class="string" id="8038177">&#34;boundary&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8038201">,</span>&nbsp;<span class="ident" id="8038203">got</span><span class="op" id="8038206">,</span>&nbsp;<span class="ident" id="8038208">tt</span><span class="op" id="8038210">.</span><span class="ident" id="8038211">b</span><span class="op" id="8038212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038227">w</span><span class="op" id="8038228">.</span><span class="ident" id="8038229">Close</span><span class="op" id="8038234">(</span><span class="op" id="8038235">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8038238">if</span>&nbsp;<span class="ident" id="8038241">got</span>&nbsp;<span class="op" id="8038245">:=</span>&nbsp;<span class="ident" id="8038248">b</span><span class="op" id="8038249">.</span><span class="ident" id="8038250">String</span><span class="op" id="8038256">(</span><span class="op" id="8038257">)</span><span class="op" id="8038258">;</span>&nbsp;<span class="op" id="8038260">!</span><span class="ident" id="8038261">strings</span><span class="op" id="8038268">.</span><span class="ident" id="8038269">Contains</span><span class="op" id="8038277">(</span><span class="ident" id="8038278">got</span><span class="op" id="8038281">,</span>&nbsp;<span class="string" id="8038283">&#34;\r\n--my-separator--\r\n&#34;</span><span class="op" id="8038309">)</span>&nbsp;<span class="op" id="8038311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038315">t</span><span class="op" id="8038316">.</span><span class="ident" id="8038317">Errorf</span><span class="op" id="8038323">(</span><span class="string" id="8038324">&#34;expected&nbsp;my-separator&nbsp;in&nbsp;output.&nbsp;got:&nbsp;%q&#34;</span><span class="op" id="8038366">,</span>&nbsp;<span class="ident" id="8038368">got</span><span class="op" id="8038371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038374">}</span><br>
<span class="lineno"></span><span class="op" id="8038376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8038379">func</span>&nbsp;<span class="ident" id="8038384">TestWriterBoundaryGoroutines</span><span class="op" id="8038412">(</span><span class="ident" id="8038413">t</span>&nbsp;<span class="op" id="8038415">*</span><span class="ident" id="8038416">testing</span><span class="op" id="8038423">.</span><span class="ident" id="8038424">T</span><span class="op" id="8038425">)</span>&nbsp;<span class="op" id="8038427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8038430">//&nbsp;Verify&nbsp;there&#39;s&nbsp;no&nbsp;data&nbsp;race&nbsp;accessing&nbsp;any&nbsp;lazy&nbsp;boundary&nbsp;if&nbsp;it&#39;s&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8038506">//&nbsp;different&nbsp;goroutines.&nbsp;This&nbsp;was&nbsp;previously&nbsp;broken&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8038562">//&nbsp;https://codereview.appspot.com/95760043/&nbsp;and&nbsp;reverted&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8038623">//&nbsp;https://codereview.appspot.com/117600043/</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038669">w</span>&nbsp;<span class="op" id="8038671">:=</span>&nbsp;<span class="ident" id="8038674">NewWriter</span><span class="op" id="8038683">(</span><span class="ident" id="8038684">ioutil</span><span class="op" id="8038690">.</span><span class="ident" id="8038691">Discard</span><span class="op" id="8038698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038701">done</span>&nbsp;<span class="op" id="8038706">:=</span>&nbsp;<span class="builtinfunc" id="8038709">make</span><span class="op" id="8038713">(</span><span class="keyword" id="8038714">chan</span>&nbsp;<span class="builtintype" id="8038719">int</span><span class="op" id="8038722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8038725">go</span>&nbsp;<span class="keyword" id="8038728">func</span><span class="op" id="8038732">(</span><span class="op" id="8038733">)</span>&nbsp;<span class="op" id="8038735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038739">w</span><span class="op" id="8038740">.</span><span class="ident" id="8038741">CreateFormField</span><span class="op" id="8038756">(</span><span class="string" id="8038757">&#34;foo&#34;</span><span class="op" id="8038762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038766">done</span>&nbsp;<span class="op" id="8038771">&lt;-</span>&nbsp;<span class="num" id="8038774">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038777">}</span><span class="op" id="8038778">(</span><span class="op" id="8038779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038782">w</span><span class="op" id="8038783">.</span><span class="ident" id="8038784">Boundary</span><span class="op" id="8038792">(</span><span class="op" id="8038793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8038796">&lt;-</span><span class="ident" id="8038798">done</span><br>
<span class="lineno"></span><span class="op" id="8038803">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
