<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html" class="current">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3842980">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3843036">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3843090">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3843141">package</span>&nbsp;<span class="ident" id="3843149">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3843154">import</span>&nbsp;<span class="op" id="3843161">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3843164">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3843170">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3843180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3843183">func</span>&nbsp;<span class="ident" id="3843188">setDefaultSockopts</span><span class="op" id="3843206">(</span><span class="ident" id="3843207">s</span><span class="op" id="3843208">,</span>&nbsp;<span class="ident" id="3843210">family</span><span class="op" id="3843216">,</span>&nbsp;<span class="ident" id="3843218">sotype</span>&nbsp;<span class="builtintype" id="3843225">int</span><span class="op" id="3843228">,</span>&nbsp;<span class="ident" id="3843230">ipv6only</span>&nbsp;<span class="builtintype" id="3843239">bool</span><span class="op" id="3843243">)</span>&nbsp;<span class="builtintype" id="3843245">error</span>&nbsp;<span class="op" id="3843251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3843254">if</span>&nbsp;<span class="ident" id="3843257">family</span>&nbsp;<span class="op" id="3843264">==</span>&nbsp;<span class="ident" id="3843267">syscall</span><span class="op" id="3843274">.</span><span class="ident" id="3843275">AF_INET6</span>&nbsp;<span class="op" id="3843284">&amp;&amp;</span>&nbsp;<span class="ident" id="3843287">sotype</span>&nbsp;<span class="op" id="3843294">!=</span>&nbsp;<span class="ident" id="3843297">syscall</span><span class="op" id="3843304">.</span><span class="ident" id="3843305">SOCK_RAW</span>&nbsp;<span class="op" id="3843314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843318">//&nbsp;Allow&nbsp;both&nbsp;IP&nbsp;versions&nbsp;even&nbsp;if&nbsp;the&nbsp;OS&nbsp;default</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843369">//&nbsp;is&nbsp;otherwise.&nbsp;&nbsp;Note&nbsp;that&nbsp;some&nbsp;operating&nbsp;systems</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843422">//&nbsp;never&nbsp;admit&nbsp;this&nbsp;option.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843452">syscall</span><span class="op" id="3843459">.</span><span class="ident" id="3843460">SetsockoptInt</span><span class="op" id="3843473">(</span><span class="ident" id="3843474">s</span><span class="op" id="3843475">,</span>&nbsp;<span class="ident" id="3843477">syscall</span><span class="op" id="3843484">.</span><span class="ident" id="3843485">IPPROTO_IPV6</span><span class="op" id="3843497">,</span>&nbsp;<span class="ident" id="3843499">syscall</span><span class="op" id="3843506">.</span><span class="ident" id="3843507">IPV6_V6ONLY</span><span class="op" id="3843518">,</span>&nbsp;<span class="ident" id="3843520">boolint</span><span class="op" id="3843527">(</span><span class="ident" id="3843528">ipv6only</span><span class="op" id="3843536">)</span><span class="op" id="3843537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3843540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843543">//&nbsp;Allow&nbsp;broadcast.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3843564">return</span>&nbsp;<span class="ident" id="3843571">os</span><span class="op" id="3843573">.</span><span class="ident" id="3843574">NewSyscallError</span><span class="op" id="3843589">(</span><span class="string" id="3843590">&#34;setsockopt&#34;</span><span class="op" id="3843602">,</span>&nbsp;<span class="ident" id="3843604">syscall</span><span class="op" id="3843611">.</span><span class="ident" id="3843612">SetsockoptInt</span><span class="op" id="3843625">(</span><span class="ident" id="3843626">s</span><span class="op" id="3843627">,</span>&nbsp;<span class="ident" id="3843629">syscall</span><span class="op" id="3843636">.</span><span class="ident" id="3843637">SOL_SOCKET</span><span class="op" id="3843647">,</span>&nbsp;<span class="ident" id="3843649">syscall</span><span class="op" id="3843656">.</span><span class="ident" id="3843657">SO_BROADCAST</span><span class="op" id="3843669">,</span>&nbsp;<span class="num" id="3843671">1</span><span class="op" id="3843672">)</span><span class="op" id="3843673">)</span><br>
<span class="lineno"></span><span class="op" id="3843675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3843678">func</span>&nbsp;<span class="ident" id="3843683">setDefaultListenerSockopts</span><span class="op" id="3843709">(</span><span class="ident" id="3843710">s</span>&nbsp;<span class="builtintype" id="3843712">int</span><span class="op" id="3843715">)</span>&nbsp;<span class="builtintype" id="3843717">error</span>&nbsp;<span class="op" id="3843723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843726">//&nbsp;Allow&nbsp;reuse&nbsp;of&nbsp;recently-used&nbsp;addresses.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3843770">return</span>&nbsp;<span class="ident" id="3843777">os</span><span class="op" id="3843779">.</span><span class="ident" id="3843780">NewSyscallError</span><span class="op" id="3843795">(</span><span class="string" id="3843796">&#34;setsockopt&#34;</span><span class="op" id="3843808">,</span>&nbsp;<span class="ident" id="3843810">syscall</span><span class="op" id="3843817">.</span><span class="ident" id="3843818">SetsockoptInt</span><span class="op" id="3843831">(</span><span class="ident" id="3843832">s</span><span class="op" id="3843833">,</span>&nbsp;<span class="ident" id="3843835">syscall</span><span class="op" id="3843842">.</span><span class="ident" id="3843843">SOL_SOCKET</span><span class="op" id="3843853">,</span>&nbsp;<span class="ident" id="3843855">syscall</span><span class="op" id="3843862">.</span><span class="ident" id="3843863">SO_REUSEADDR</span><span class="op" id="3843875">,</span>&nbsp;<span class="num" id="3843877">1</span><span class="op" id="3843878">)</span><span class="op" id="3843879">)</span><br>
<span class="lineno"></span><span class="op" id="3843881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3843884">func</span>&nbsp;<span class="ident" id="3843889">setDefaultMulticastSockopts</span><span class="op" id="3843916">(</span><span class="ident" id="3843917">s</span>&nbsp;<span class="builtintype" id="3843919">int</span><span class="op" id="3843922">)</span>&nbsp;<span class="builtintype" id="3843924">error</span>&nbsp;<span class="op" id="3843930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843933">//&nbsp;Allow&nbsp;multicast&nbsp;UDP&nbsp;and&nbsp;raw&nbsp;IP&nbsp;datagram&nbsp;sockets&nbsp;to&nbsp;listen</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3843995">//&nbsp;concurrently&nbsp;across&nbsp;multiple&nbsp;listeners.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844039">return</span>&nbsp;<span class="ident" id="3844046">os</span><span class="op" id="3844048">.</span><span class="ident" id="3844049">NewSyscallError</span><span class="op" id="3844064">(</span><span class="string" id="3844065">&#34;setsockopt&#34;</span><span class="op" id="3844077">,</span>&nbsp;<span class="ident" id="3844079">syscall</span><span class="op" id="3844086">.</span><span class="ident" id="3844087">SetsockoptInt</span><span class="op" id="3844100">(</span><span class="ident" id="3844101">s</span><span class="op" id="3844102">,</span>&nbsp;<span class="ident" id="3844104">syscall</span><span class="op" id="3844111">.</span><span class="ident" id="3844112">SOL_SOCKET</span><span class="op" id="3844122">,</span>&nbsp;<span class="ident" id="3844124">syscall</span><span class="op" id="3844131">.</span><span class="ident" id="3844132">SO_REUSEADDR</span><span class="op" id="3844144">,</span>&nbsp;<span class="num" id="3844146">1</span><span class="op" id="3844147">)</span><span class="op" id="3844148">)</span><br>
<span class="lineno"></span><span class="op" id="3844150">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
