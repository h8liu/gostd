<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7907045">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7907100">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7907154">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7907205">package</span>&nbsp;<span class="ident" id="7907213">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7907221">import</span>&nbsp;<span class="op" id="7907228">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907231">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907240">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907253">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907265">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907278">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7907289">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7907299">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7907302">const</span>&nbsp;<span class="ident" id="7907308">testfile</span>&nbsp;<span class="op" id="7907317">=</span>&nbsp;<span class="string" id="7907319">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7907337">func</span>&nbsp;<span class="ident" id="7907342">diff</span><span class="op" id="7907346">(</span><span class="ident" id="7907347">t</span>&nbsp;<span class="op" id="7907349">*</span><span class="ident" id="7907350">testing</span><span class="op" id="7907357">.</span><span class="ident" id="7907358">T</span><span class="op" id="7907359">,</span>&nbsp;<span class="ident" id="7907361">dst</span><span class="op" id="7907364">,</span>&nbsp;<span class="ident" id="7907366">src</span>&nbsp;<span class="op" id="7907370">[</span><span class="op" id="7907371">]</span><span class="builtintype" id="7907372">byte</span><span class="op" id="7907376">)</span>&nbsp;<span class="op" id="7907378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907381">line</span>&nbsp;<span class="op" id="7907386">:=</span>&nbsp;<span class="num" id="7907389">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907392">offs</span>&nbsp;<span class="op" id="7907397">:=</span>&nbsp;<span class="num" id="7907400">0</span>&nbsp;<span class="comment" id="7907402">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907418">for</span>&nbsp;<span class="ident" id="7907422">i</span>&nbsp;<span class="op" id="7907424">:=</span>&nbsp;<span class="num" id="7907427">0</span><span class="op" id="7907428">;</span>&nbsp;<span class="ident" id="7907430">i</span>&nbsp;<span class="op" id="7907432">&lt;</span>&nbsp;<span class="builtinfunc" id="7907434">len</span><span class="op" id="7907437">(</span><span class="ident" id="7907438">dst</span><span class="op" id="7907441">)</span>&nbsp;<span class="op" id="7907443">&amp;&amp;</span>&nbsp;<span class="ident" id="7907446">i</span>&nbsp;<span class="op" id="7907448">&lt;</span>&nbsp;<span class="builtinfunc" id="7907450">len</span><span class="op" id="7907453">(</span><span class="ident" id="7907454">src</span><span class="op" id="7907457">)</span><span class="op" id="7907458">;</span>&nbsp;<span class="ident" id="7907460">i</span><span class="op" id="7907461">++</span>&nbsp;<span class="op" id="7907464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907468">d</span>&nbsp;<span class="op" id="7907470">:=</span>&nbsp;<span class="ident" id="7907473">dst</span><span class="op" id="7907476">[</span><span class="ident" id="7907477">i</span><span class="op" id="7907478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907482">s</span>&nbsp;<span class="op" id="7907484">:=</span>&nbsp;<span class="ident" id="7907487">src</span><span class="op" id="7907490">[</span><span class="ident" id="7907491">i</span><span class="op" id="7907492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907496">if</span>&nbsp;<span class="ident" id="7907499">d</span>&nbsp;<span class="op" id="7907501">!=</span>&nbsp;<span class="ident" id="7907504">s</span>&nbsp;<span class="op" id="7907506">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907511">t</span><span class="op" id="7907512">.</span><span class="ident" id="7907513">Errorf</span><span class="op" id="7907519">(</span><span class="string" id="7907520">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7907534">,</span>&nbsp;<span class="ident" id="7907536">line</span><span class="op" id="7907540">,</span>&nbsp;<span class="ident" id="7907542">dst</span><span class="op" id="7907545">[</span><span class="ident" id="7907546">offs</span><span class="op" id="7907550">:</span><span class="ident" id="7907551">i</span><span class="op" id="7907552">+</span><span class="num" id="7907553">1</span><span class="op" id="7907554">]</span><span class="op" id="7907555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907560">t</span><span class="op" id="7907561">.</span><span class="ident" id="7907562">Errorf</span><span class="op" id="7907568">(</span><span class="string" id="7907569">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7907583">,</span>&nbsp;<span class="ident" id="7907585">line</span><span class="op" id="7907589">,</span>&nbsp;<span class="ident" id="7907591">src</span><span class="op" id="7907594">[</span><span class="ident" id="7907595">offs</span><span class="op" id="7907599">:</span><span class="ident" id="7907600">i</span><span class="op" id="7907601">+</span><span class="num" id="7907602">1</span><span class="op" id="7907603">]</span><span class="op" id="7907604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907609">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907622">if</span>&nbsp;<span class="ident" id="7907625">s</span>&nbsp;<span class="op" id="7907627">==</span>&nbsp;<span class="string" id="7907630">&#39;\n&#39;</span>&nbsp;<span class="op" id="7907635">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907640">line</span><span class="op" id="7907644">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907650">offs</span>&nbsp;<span class="op" id="7907655">=</span>&nbsp;<span class="ident" id="7907657">i</span>&nbsp;<span class="op" id="7907659">+</span>&nbsp;<span class="num" id="7907661">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907671">if</span>&nbsp;<span class="builtinfunc" id="7907674">len</span><span class="op" id="7907677">(</span><span class="ident" id="7907678">dst</span><span class="op" id="7907681">)</span>&nbsp;<span class="op" id="7907683">!=</span>&nbsp;<span class="builtinfunc" id="7907686">len</span><span class="op" id="7907689">(</span><span class="ident" id="7907690">src</span><span class="op" id="7907693">)</span>&nbsp;<span class="op" id="7907695">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907699">t</span><span class="op" id="7907700">.</span><span class="ident" id="7907701">Errorf</span><span class="op" id="7907707">(</span><span class="string" id="7907708">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7907748">,</span>&nbsp;<span class="builtinfunc" id="7907750">len</span><span class="op" id="7907753">(</span><span class="ident" id="7907754">dst</span><span class="op" id="7907757">)</span><span class="op" id="7907758">,</span>&nbsp;<span class="builtinfunc" id="7907760">len</span><span class="op" id="7907763">(</span><span class="ident" id="7907764">src</span><span class="op" id="7907767">)</span><span class="op" id="7907768">,</span>&nbsp;<span class="ident" id="7907770">src</span><span class="op" id="7907773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907776">}</span><br>
<span class="lineno"></span><span class="op" id="7907778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7907781">func</span>&nbsp;<span class="ident" id="7907786">TestNode</span><span class="op" id="7907794">(</span><span class="ident" id="7907795">t</span>&nbsp;<span class="op" id="7907797">*</span><span class="ident" id="7907798">testing</span><span class="op" id="7907805">.</span><span class="ident" id="7907806">T</span><span class="op" id="7907807">)</span>&nbsp;<span class="op" id="7907809">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907812">src</span><span class="op" id="7907815">,</span>&nbsp;<span class="ident" id="7907817">err</span>&nbsp;<span class="op" id="7907821">:=</span>&nbsp;<span class="ident" id="7907824">ioutil</span><span class="op" id="7907830">.</span><span class="ident" id="7907831">ReadFile</span><span class="op" id="7907839">(</span><span class="ident" id="7907840">testfile</span><span class="op" id="7907848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907851">if</span>&nbsp;<span class="ident" id="7907854">err</span>&nbsp;<span class="op" id="7907858">!=</span>&nbsp;<span class="ident" id="7907861">nil</span>&nbsp;<span class="op" id="7907865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907869">t</span><span class="op" id="7907870">.</span><span class="ident" id="7907871">Fatal</span><span class="op" id="7907876">(</span><span class="ident" id="7907877">err</span><span class="op" id="7907880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7907883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907887">fset</span>&nbsp;<span class="op" id="7907892">:=</span>&nbsp;<span class="ident" id="7907895">token</span><span class="op" id="7907900">.</span><span class="ident" id="7907901">NewFileSet</span><span class="op" id="7907911">(</span><span class="op" id="7907912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7907915">file</span><span class="op" id="7907919">,</span>&nbsp;<span class="ident" id="7907921">err</span>&nbsp;<span class="op" id="7907925">:=</span>&nbsp;<span class="ident" id="7907928">parser</span><span class="op" id="7907934">.</span><span class="ident" id="7907935">ParseFile</span><span class="op" id="7907944">(</span><span class="ident" id="7907945">fset</span><span class="op" id="7907949">,</span>&nbsp;<span class="ident" id="7907951">testfile</span><span class="op" id="7907959">,</span>&nbsp;<span class="ident" id="7907961">src</span><span class="op" id="7907964">,</span>&nbsp;<span class="ident" id="7907966">parser</span><span class="op" id="7907972">.</span><span class="ident" id="7907973">ParseComments</span><span class="op" id="7907986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7907989">if</span>&nbsp;<span class="ident" id="7907992">err</span>&nbsp;<span class="op" id="7907996">!=</span>&nbsp;<span class="ident" id="7907999">nil</span>&nbsp;<span class="op" id="7908003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908007">t</span><span class="op" id="7908008">.</span><span class="ident" id="7908009">Fatal</span><span class="op" id="7908014">(</span><span class="ident" id="7908015">err</span><span class="op" id="7908018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908021">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908025">var</span>&nbsp;<span class="ident" id="7908029">buf</span>&nbsp;<span class="ident" id="7908033">bytes</span><span class="op" id="7908038">.</span><span class="ident" id="7908039">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908048">if</span>&nbsp;<span class="ident" id="7908051">err</span>&nbsp;<span class="op" id="7908055">=</span>&nbsp;<span class="ident" id="7908057">Node</span><span class="op" id="7908061">(</span><span class="op" id="7908062">&amp;</span><span class="ident" id="7908063">buf</span><span class="op" id="7908066">,</span>&nbsp;<span class="ident" id="7908068">fset</span><span class="op" id="7908072">,</span>&nbsp;<span class="ident" id="7908074">file</span><span class="op" id="7908078">)</span><span class="op" id="7908079">;</span>&nbsp;<span class="ident" id="7908081">err</span>&nbsp;<span class="op" id="7908085">!=</span>&nbsp;<span class="ident" id="7908088">nil</span>&nbsp;<span class="op" id="7908092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908096">t</span><span class="op" id="7908097">.</span><span class="ident" id="7908098">Fatal</span><span class="op" id="7908103">(</span><span class="string" id="7908104">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7908118">,</span>&nbsp;<span class="ident" id="7908120">err</span><span class="op" id="7908123">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908130">diff</span><span class="op" id="7908134">(</span><span class="ident" id="7908135">t</span><span class="op" id="7908136">,</span>&nbsp;<span class="ident" id="7908138">buf</span><span class="op" id="7908141">.</span><span class="ident" id="7908142">Bytes</span><span class="op" id="7908147">(</span><span class="op" id="7908148">)</span><span class="op" id="7908149">,</span>&nbsp;<span class="ident" id="7908151">src</span><span class="op" id="7908154">)</span><br>
<span class="lineno"></span><span class="op" id="7908156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7908159">func</span>&nbsp;<span class="ident" id="7908164">TestSource</span><span class="op" id="7908174">(</span><span class="ident" id="7908175">t</span>&nbsp;<span class="op" id="7908177">*</span><span class="ident" id="7908178">testing</span><span class="op" id="7908185">.</span><span class="ident" id="7908186">T</span><span class="op" id="7908187">)</span>&nbsp;<span class="op" id="7908189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908192">src</span><span class="op" id="7908195">,</span>&nbsp;<span class="ident" id="7908197">err</span>&nbsp;<span class="op" id="7908201">:=</span>&nbsp;<span class="ident" id="7908204">ioutil</span><span class="op" id="7908210">.</span><span class="ident" id="7908211">ReadFile</span><span class="op" id="7908219">(</span><span class="ident" id="7908220">testfile</span><span class="op" id="7908228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908231">if</span>&nbsp;<span class="ident" id="7908234">err</span>&nbsp;<span class="op" id="7908238">!=</span>&nbsp;<span class="ident" id="7908241">nil</span>&nbsp;<span class="op" id="7908245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908249">t</span><span class="op" id="7908250">.</span><span class="ident" id="7908251">Fatal</span><span class="op" id="7908256">(</span><span class="ident" id="7908257">err</span><span class="op" id="7908260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908263">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908267">res</span><span class="op" id="7908270">,</span>&nbsp;<span class="ident" id="7908272">err</span>&nbsp;<span class="op" id="7908276">:=</span>&nbsp;<span class="ident" id="7908279">Source</span><span class="op" id="7908285">(</span><span class="ident" id="7908286">src</span><span class="op" id="7908289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7908292">if</span>&nbsp;<span class="ident" id="7908295">err</span>&nbsp;<span class="op" id="7908299">!=</span>&nbsp;<span class="ident" id="7908302">nil</span>&nbsp;<span class="op" id="7908306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908310">t</span><span class="op" id="7908311">.</span><span class="ident" id="7908312">Fatal</span><span class="op" id="7908317">(</span><span class="string" id="7908318">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7908334">,</span>&nbsp;<span class="ident" id="7908336">err</span><span class="op" id="7908339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7908342">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908346">diff</span><span class="op" id="7908350">(</span><span class="ident" id="7908351">t</span><span class="op" id="7908352">,</span>&nbsp;<span class="ident" id="7908354">res</span><span class="op" id="7908357">,</span>&nbsp;<span class="ident" id="7908359">src</span><span class="op" id="7908362">)</span><br>
<span class="lineno"></span><span class="op" id="7908364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7908367">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7908441">var</span>&nbsp;<span class="ident" id="7908445">tests</span>&nbsp;<span class="op" id="7908451">=</span>&nbsp;<span class="op" id="7908453">[</span><span class="op" id="7908454">]</span><span class="builtintype" id="7908455">string</span><span class="op" id="7908461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7908464">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908486">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7908506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908509">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7908520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908523">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7908553">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7908557">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908577">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7908585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908588">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7908624">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7908628">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908672">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7908692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908695">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7908721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908724">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7908760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908763">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7908807">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908810">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7908867">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7908873">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908917">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7908978">,</span>&nbsp;<span class="comment" id="7908980">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909027">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909040">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7909062">,</span>&nbsp;<span class="comment" id="7909064">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909081">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909104">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7909118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909121">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7909135">,</span><br>
<span class="lineno"></span><span class="op" id="7909137">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7909140">func</span>&nbsp;<span class="ident" id="7909145">String</span><span class="op" id="7909151">(</span><span class="ident" id="7909152">s</span>&nbsp;<span class="builtintype" id="7909154">string</span><span class="op" id="7909160">)</span>&nbsp;<span class="op" id="7909162">(</span><span class="builtintype" id="7909163">string</span><span class="op" id="7909169">,</span>&nbsp;<span class="builtintype" id="7909171">error</span><span class="op" id="7909176">)</span>&nbsp;<span class="op" id="7909178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909181">res</span><span class="op" id="7909184">,</span>&nbsp;<span class="ident" id="7909186">err</span>&nbsp;<span class="op" id="7909190">:=</span>&nbsp;<span class="ident" id="7909193">Source</span><span class="op" id="7909199">(</span><span class="op" id="7909200">[</span><span class="op" id="7909201">]</span><span class="builtintype" id="7909202">byte</span><span class="op" id="7909206">(</span><span class="ident" id="7909207">s</span><span class="op" id="7909208">)</span><span class="op" id="7909209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909212">if</span>&nbsp;<span class="ident" id="7909215">err</span>&nbsp;<span class="op" id="7909219">!=</span>&nbsp;<span class="ident" id="7909222">nil</span>&nbsp;<span class="op" id="7909226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909230">return</span>&nbsp;<span class="string" id="7909237">&#34;&#34;</span><span class="op" id="7909239">,</span>&nbsp;<span class="ident" id="7909241">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909249">return</span>&nbsp;<span class="builtintype" id="7909256">string</span><span class="op" id="7909262">(</span><span class="ident" id="7909263">res</span><span class="op" id="7909266">)</span><span class="op" id="7909267">,</span>&nbsp;<span class="ident" id="7909269">nil</span><br>
<span class="lineno"></span><span class="op" id="7909273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909276">func</span>&nbsp;<span class="ident" id="7909281">TestPartial</span><span class="op" id="7909292">(</span><span class="ident" id="7909293">t</span>&nbsp;<span class="op" id="7909295">*</span><span class="ident" id="7909296">testing</span><span class="op" id="7909303">.</span><span class="ident" id="7909304">T</span><span class="op" id="7909305">)</span>&nbsp;<span class="op" id="7909307">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909310">for</span>&nbsp;<span class="ident" id="7909314">_</span><span class="op" id="7909315">,</span>&nbsp;<span class="ident" id="7909317">src</span>&nbsp;<span class="op" id="7909321">:=</span>&nbsp;<span class="keyword" id="7909324">range</span>&nbsp;<span class="ident" id="7909330">tests</span>&nbsp;<span class="op" id="7909336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909340">if</span>&nbsp;<span class="ident" id="7909343">strings</span><span class="op" id="7909350">.</span><span class="ident" id="7909351">HasPrefix</span><span class="op" id="7909360">(</span><span class="ident" id="7909361">src</span><span class="op" id="7909364">,</span>&nbsp;<span class="string" id="7909366">&#34;ERROR&#34;</span><span class="op" id="7909373">)</span>&nbsp;<span class="op" id="7909375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909380">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909408">src</span>&nbsp;<span class="op" id="7909412">=</span>&nbsp;<span class="ident" id="7909414">src</span><span class="op" id="7909417">[</span><span class="num" id="7909418">5</span><span class="op" id="7909419">:</span><span class="op" id="7909420">]</span>&nbsp;<span class="comment" id="7909422">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909448">res</span><span class="op" id="7909451">,</span>&nbsp;<span class="ident" id="7909453">err</span>&nbsp;<span class="op" id="7909457">:=</span>&nbsp;<span class="ident" id="7909460">String</span><span class="op" id="7909466">(</span><span class="ident" id="7909467">src</span><span class="op" id="7909470">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909475">if</span>&nbsp;<span class="ident" id="7909478">err</span>&nbsp;<span class="op" id="7909482">==</span>&nbsp;<span class="ident" id="7909485">nil</span>&nbsp;<span class="op" id="7909489">&amp;&amp;</span>&nbsp;<span class="ident" id="7909492">res</span>&nbsp;<span class="op" id="7909496">==</span>&nbsp;<span class="ident" id="7909499">src</span>&nbsp;<span class="op" id="7909503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909509">t</span><span class="op" id="7909510">.</span><span class="ident" id="7909511">Errorf</span><span class="op" id="7909517">(</span><span class="string" id="7909518">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7909570">,</span>&nbsp;<span class="ident" id="7909572">src</span><span class="op" id="7909575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909584">}</span>&nbsp;<span class="keyword" id="7909586">else</span>&nbsp;<span class="op" id="7909591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909596">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909627">res</span><span class="op" id="7909630">,</span>&nbsp;<span class="ident" id="7909632">err</span>&nbsp;<span class="op" id="7909636">:=</span>&nbsp;<span class="ident" id="7909639">String</span><span class="op" id="7909645">(</span><span class="ident" id="7909646">src</span><span class="op" id="7909649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909654">if</span>&nbsp;<span class="ident" id="7909657">err</span>&nbsp;<span class="op" id="7909661">!=</span>&nbsp;<span class="ident" id="7909664">nil</span>&nbsp;<span class="op" id="7909668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909674">t</span><span class="op" id="7909675">.</span><span class="ident" id="7909676">Errorf</span><span class="op" id="7909682">(</span><span class="string" id="7909683">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7909712">,</span>&nbsp;<span class="ident" id="7909714">err</span><span class="op" id="7909717">,</span>&nbsp;<span class="ident" id="7909719">src</span><span class="op" id="7909722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909727">}</span>&nbsp;<span class="keyword" id="7909729">else</span>&nbsp;<span class="keyword" id="7909734">if</span>&nbsp;<span class="ident" id="7909737">res</span>&nbsp;<span class="op" id="7909741">!=</span>&nbsp;<span class="ident" id="7909744">src</span>&nbsp;<span class="op" id="7909748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909754">t</span><span class="op" id="7909755">.</span><span class="ident" id="7909756">Errorf</span><span class="op" id="7909762">(</span><span class="string" id="7909763">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7909810">,</span>&nbsp;<span class="ident" id="7909812">src</span><span class="op" id="7909815">,</span>&nbsp;<span class="ident" id="7909817">res</span><span class="op" id="7909820">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909832">}</span><br>
<span class="lineno"></span><span class="op" id="7909834">}</span>
</div>
</body>
</html>
