<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html" class="current">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1695531">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1695586">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1695640">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1695691">package</span>&nbsp;<span class="ident" id="1695699">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1695708">import</span>&nbsp;<span class="string" id="1695715">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1695725">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1695809">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1695892">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1695919">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1695994">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1696052">type</span>&nbsp;<span class="ident" id="1696057">Func</span>&nbsp;<span class="keyword" id="1696062">struct</span>&nbsp;<span class="op" id="1696069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696072">opaque</span>&nbsp;<span class="keyword" id="1696079">struct</span><span class="op" id="1696085">{</span><span class="op" id="1696086">}</span>&nbsp;<span class="comment" id="1696088">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1696132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1696135">func</span>&nbsp;<span class="op" id="1696140">(</span><span class="ident" id="1696141">f</span>&nbsp;<span class="op" id="1696143">*</span><span class="ident" id="1696144">Func</span><span class="op" id="1696148">)</span>&nbsp;<span class="ident" id="1696150">raw</span><span class="op" id="1696153">(</span><span class="op" id="1696154">)</span>&nbsp;<span class="op" id="1696156">*</span><span class="ident" id="1696157">_func</span>&nbsp;<span class="op" id="1696163">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1696166">return</span>&nbsp;<span class="op" id="1696173">(</span><span class="op" id="1696174">*</span><span class="ident" id="1696175">_func</span><span class="op" id="1696180">)</span><span class="op" id="1696181">(</span><span class="ident" id="1696182">unsafe</span><span class="op" id="1696188">.</span><span class="ident" id="1696189">Pointer</span><span class="op" id="1696196">(</span><span class="ident" id="1696197">f</span><span class="op" id="1696198">)</span><span class="op" id="1696199">)</span><br>
<span class="lineno"></span><span class="op" id="1696201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1696204">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1696218">const</span>&nbsp;<span class="op" id="1696224">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696227">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1696255">=</span>&nbsp;<span class="num" id="1696257">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696260">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1696288">=</span>&nbsp;<span class="num" id="1696290">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696293">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1696321">=</span>&nbsp;<span class="num" id="1696323">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696326">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1696354">=</span>&nbsp;<span class="num" id="1696356">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696359">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1696387">=</span>&nbsp;<span class="num" id="1696389">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696392">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1696420">=</span>&nbsp;<span class="op" id="1696422">-</span><span class="num" id="1696423">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1696434">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1696437">var</span>&nbsp;<span class="op" id="1696441">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696444">pclntable</span>&nbsp;<span class="op" id="1696454">[</span><span class="op" id="1696455">]</span><span class="builtintype" id="1696456">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696462">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1696472">[</span><span class="op" id="1696473">]</span><span class="ident" id="1696474">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696483">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1696493">[</span><span class="op" id="1696494">]</span><span class="builtintype" id="1696495">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696504">pclntab</span><span class="op" id="1696511">,</span>&nbsp;<span class="ident" id="1696513">epclntab</span>&nbsp;<span class="keyword" id="1696522">struct</span><span class="op" id="1696528">{</span><span class="op" id="1696529">}</span>&nbsp;<span class="comment" id="1696531">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1696549">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1696552">type</span>&nbsp;<span class="ident" id="1696557">functab</span>&nbsp;<span class="keyword" id="1696565">struct</span>&nbsp;<span class="op" id="1696572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696575">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1696583">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696592">funcoff</span>&nbsp;<span class="builtintype" id="1696600">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1696608">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1696611">func</span>&nbsp;<span class="ident" id="1696616">symtabinit</span><span class="op" id="1696626">(</span><span class="op" id="1696627">)</span>&nbsp;<span class="op" id="1696629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1696632">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1696688">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1696738">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696788">pcln</span>&nbsp;<span class="op" id="1696793">:=</span>&nbsp;<span class="op" id="1696796">(</span><span class="op" id="1696797">*</span><span class="op" id="1696798">[</span><span class="num" id="1696799">8</span><span class="op" id="1696800">]</span><span class="builtintype" id="1696801">byte</span><span class="op" id="1696805">)</span><span class="op" id="1696806">(</span><span class="ident" id="1696807">unsafe</span><span class="op" id="1696813">.</span><span class="ident" id="1696814">Pointer</span><span class="op" id="1696821">(</span><span class="op" id="1696822">&amp;</span><span class="ident" id="1696823">pclntab</span><span class="op" id="1696830">)</span><span class="op" id="1696831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1696834">pcln32</span>&nbsp;<span class="op" id="1696841">:=</span>&nbsp;<span class="op" id="1696844">(</span><span class="op" id="1696845">*</span><span class="op" id="1696846">[</span><span class="num" id="1696847">2</span><span class="op" id="1696848">]</span><span class="builtintype" id="1696849">uint32</span><span class="op" id="1696855">)</span><span class="op" id="1696856">(</span><span class="ident" id="1696857">unsafe</span><span class="op" id="1696863">.</span><span class="ident" id="1696864">Pointer</span><span class="op" id="1696871">(</span><span class="op" id="1696872">&amp;</span><span class="ident" id="1696873">pclntab</span><span class="op" id="1696880">)</span><span class="op" id="1696881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1696884">if</span>&nbsp;<span class="ident" id="1696887">pcln32</span><span class="op" id="1696893">[</span><span class="num" id="1696894">0</span><span class="op" id="1696895">]</span>&nbsp;<span class="op" id="1696897">!=</span>&nbsp;<span class="num" id="1696900">0xfffffffb</span>&nbsp;<span class="op" id="1696911">||</span>&nbsp;<span class="ident" id="1696914">pcln</span><span class="op" id="1696918">[</span><span class="num" id="1696919">4</span><span class="op" id="1696920">]</span>&nbsp;<span class="op" id="1696922">!=</span>&nbsp;<span class="num" id="1696925">0</span>&nbsp;<span class="op" id="1696927">||</span>&nbsp;<span class="ident" id="1696930">pcln</span><span class="op" id="1696934">[</span><span class="num" id="1696935">5</span><span class="op" id="1696936">]</span>&nbsp;<span class="op" id="1696938">!=</span>&nbsp;<span class="num" id="1696941">0</span>&nbsp;<span class="op" id="1696943">||</span>&nbsp;<span class="ident" id="1696946">pcln</span><span class="op" id="1696950">[</span><span class="num" id="1696951">6</span><span class="op" id="1696952">]</span>&nbsp;<span class="op" id="1696954">!=</span>&nbsp;<span class="ident" id="1696957">_PCQuantum</span>&nbsp;<span class="op" id="1696968">||</span>&nbsp;<span class="ident" id="1696971">pcln</span><span class="op" id="1696975">[</span><span class="num" id="1696976">7</span><span class="op" id="1696977">]</span>&nbsp;<span class="op" id="1696979">!=</span>&nbsp;<span class="ident" id="1696982">ptrSize</span>&nbsp;<span class="op" id="1696990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1696994">println</span><span class="op" id="1697001">(</span><span class="string" id="1697002">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1697042">,</span>&nbsp;<span class="ident" id="1697044">hex</span><span class="op" id="1697047">(</span><span class="ident" id="1697048">pcln32</span><span class="op" id="1697054">[</span><span class="num" id="1697055">0</span><span class="op" id="1697056">]</span><span class="op" id="1697057">)</span><span class="op" id="1697058">,</span>&nbsp;<span class="ident" id="1697060">hex</span><span class="op" id="1697063">(</span><span class="ident" id="1697064">pcln</span><span class="op" id="1697068">[</span><span class="num" id="1697069">4</span><span class="op" id="1697070">]</span><span class="op" id="1697071">)</span><span class="op" id="1697072">,</span>&nbsp;<span class="ident" id="1697074">hex</span><span class="op" id="1697077">(</span><span class="ident" id="1697078">pcln</span><span class="op" id="1697082">[</span><span class="num" id="1697083">5</span><span class="op" id="1697084">]</span><span class="op" id="1697085">)</span><span class="op" id="1697086">,</span>&nbsp;<span class="ident" id="1697088">hex</span><span class="op" id="1697091">(</span><span class="ident" id="1697092">pcln</span><span class="op" id="1697096">[</span><span class="num" id="1697097">6</span><span class="op" id="1697098">]</span><span class="op" id="1697099">)</span><span class="op" id="1697100">,</span>&nbsp;<span class="ident" id="1697102">hex</span><span class="op" id="1697105">(</span><span class="ident" id="1697106">pcln</span><span class="op" id="1697110">[</span><span class="num" id="1697111">7</span><span class="op" id="1697112">]</span><span class="op" id="1697113">)</span><span class="op" id="1697114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697118">gothrow</span><span class="op" id="1697125">(</span><span class="string" id="1697126">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1697159">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1697162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1697166">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697212">sp</span>&nbsp;<span class="op" id="1697215">:=</span>&nbsp;<span class="op" id="1697218">(</span><span class="op" id="1697219">*</span><span class="ident" id="1697220">sliceStruct</span><span class="op" id="1697231">)</span><span class="op" id="1697232">(</span><span class="ident" id="1697233">unsafe</span><span class="op" id="1697239">.</span><span class="ident" id="1697240">Pointer</span><span class="op" id="1697247">(</span><span class="op" id="1697248">&amp;</span><span class="ident" id="1697249">pclntable</span><span class="op" id="1697258">)</span><span class="op" id="1697259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697262">sp</span><span class="op" id="1697264">.</span><span class="ident" id="1697265">array</span>&nbsp;<span class="op" id="1697271">=</span>&nbsp;<span class="ident" id="1697273">unsafe</span><span class="op" id="1697279">.</span><span class="ident" id="1697280">Pointer</span><span class="op" id="1697287">(</span><span class="op" id="1697288">&amp;</span><span class="ident" id="1697289">pclntab</span><span class="op" id="1697296">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697299">sp</span><span class="op" id="1697301">.</span><span class="builtinfunc" id="1697302">len</span>&nbsp;<span class="op" id="1697306">=</span>&nbsp;<span class="builtintype" id="1697308">int</span><span class="op" id="1697311">(</span><span class="builtintype" id="1697312">uintptr</span><span class="op" id="1697319">(</span><span class="ident" id="1697320">unsafe</span><span class="op" id="1697326">.</span><span class="ident" id="1697327">Pointer</span><span class="op" id="1697334">(</span><span class="op" id="1697335">&amp;</span><span class="ident" id="1697336">epclntab</span><span class="op" id="1697344">)</span><span class="op" id="1697345">)</span>&nbsp;<span class="op" id="1697347">-</span>&nbsp;<span class="builtintype" id="1697349">uintptr</span><span class="op" id="1697356">(</span><span class="ident" id="1697357">unsafe</span><span class="op" id="1697363">.</span><span class="ident" id="1697364">Pointer</span><span class="op" id="1697371">(</span><span class="op" id="1697372">&amp;</span><span class="ident" id="1697373">pclntab</span><span class="op" id="1697380">)</span><span class="op" id="1697381">)</span><span class="op" id="1697382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697385">sp</span><span class="op" id="1697387">.</span><span class="builtinfunc" id="1697388">cap</span>&nbsp;<span class="op" id="1697392">=</span>&nbsp;<span class="ident" id="1697394">sp</span><span class="op" id="1697396">.</span><span class="builtinfunc" id="1697397">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1697403">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697461">nftab</span>&nbsp;<span class="op" id="1697467">:=</span>&nbsp;<span class="builtintype" id="1697470">int</span><span class="op" id="1697473">(</span><span class="op" id="1697474">*</span><span class="op" id="1697475">(</span><span class="op" id="1697476">*</span><span class="builtintype" id="1697477">uintptr</span><span class="op" id="1697484">)</span><span class="op" id="1697485">(</span><span class="ident" id="1697486">add</span><span class="op" id="1697489">(</span><span class="ident" id="1697490">unsafe</span><span class="op" id="1697496">.</span><span class="ident" id="1697497">Pointer</span><span class="op" id="1697504">(</span><span class="ident" id="1697505">pcln</span><span class="op" id="1697509">)</span><span class="op" id="1697510">,</span>&nbsp;<span class="num" id="1697512">8</span><span class="op" id="1697513">)</span><span class="op" id="1697514">)</span><span class="op" id="1697515">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697518">p</span>&nbsp;<span class="op" id="1697520">:=</span>&nbsp;<span class="ident" id="1697523">add</span><span class="op" id="1697526">(</span><span class="ident" id="1697527">unsafe</span><span class="op" id="1697533">.</span><span class="ident" id="1697534">Pointer</span><span class="op" id="1697541">(</span><span class="ident" id="1697542">pcln</span><span class="op" id="1697546">)</span><span class="op" id="1697547">,</span>&nbsp;<span class="num" id="1697549">8</span><span class="op" id="1697550">+</span><span class="ident" id="1697551">ptrSize</span><span class="op" id="1697558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697561">sp</span>&nbsp;<span class="op" id="1697564">=</span>&nbsp;<span class="op" id="1697566">(</span><span class="op" id="1697567">*</span><span class="ident" id="1697568">sliceStruct</span><span class="op" id="1697579">)</span><span class="op" id="1697580">(</span><span class="ident" id="1697581">unsafe</span><span class="op" id="1697587">.</span><span class="ident" id="1697588">Pointer</span><span class="op" id="1697595">(</span><span class="op" id="1697596">&amp;</span><span class="ident" id="1697597">ftab</span><span class="op" id="1697601">)</span><span class="op" id="1697602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697605">sp</span><span class="op" id="1697607">.</span><span class="ident" id="1697608">array</span>&nbsp;<span class="op" id="1697614">=</span>&nbsp;<span class="ident" id="1697616">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697619">sp</span><span class="op" id="1697621">.</span><span class="builtinfunc" id="1697622">len</span>&nbsp;<span class="op" id="1697626">=</span>&nbsp;<span class="ident" id="1697628">nftab</span>&nbsp;<span class="op" id="1697634">+</span>&nbsp;<span class="num" id="1697636">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697639">sp</span><span class="op" id="1697641">.</span><span class="builtinfunc" id="1697642">cap</span>&nbsp;<span class="op" id="1697646">=</span>&nbsp;<span class="ident" id="1697648">sp</span><span class="op" id="1697650">.</span><span class="builtinfunc" id="1697651">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1697656">for</span>&nbsp;<span class="ident" id="1697660">i</span>&nbsp;<span class="op" id="1697662">:=</span>&nbsp;<span class="num" id="1697665">0</span><span class="op" id="1697666">;</span>&nbsp;<span class="ident" id="1697668">i</span>&nbsp;<span class="op" id="1697670">&lt;</span>&nbsp;<span class="ident" id="1697672">nftab</span><span class="op" id="1697677">;</span>&nbsp;<span class="ident" id="1697679">i</span><span class="op" id="1697680">++</span>&nbsp;<span class="op" id="1697683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1697687">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1697771">if</span>&nbsp;<span class="ident" id="1697774">ftab</span><span class="op" id="1697778">[</span><span class="ident" id="1697779">i</span><span class="op" id="1697780">]</span><span class="op" id="1697781">.</span><span class="ident" id="1697782">entry</span>&nbsp;<span class="op" id="1697788">&gt;</span>&nbsp;<span class="ident" id="1697790">ftab</span><span class="op" id="1697794">[</span><span class="ident" id="1697795">i</span><span class="op" id="1697796">+</span><span class="num" id="1697797">1</span><span class="op" id="1697798">]</span><span class="op" id="1697799">.</span><span class="ident" id="1697800">entry</span>&nbsp;<span class="op" id="1697806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697811">f1</span>&nbsp;<span class="op" id="1697814">:=</span>&nbsp;<span class="op" id="1697817">(</span><span class="op" id="1697818">*</span><span class="ident" id="1697819">_func</span><span class="op" id="1697824">)</span><span class="op" id="1697825">(</span><span class="ident" id="1697826">unsafe</span><span class="op" id="1697832">.</span><span class="ident" id="1697833">Pointer</span><span class="op" id="1697840">(</span><span class="op" id="1697841">&amp;</span><span class="ident" id="1697842">pclntable</span><span class="op" id="1697851">[</span><span class="ident" id="1697852">ftab</span><span class="op" id="1697856">[</span><span class="ident" id="1697857">i</span><span class="op" id="1697858">]</span><span class="op" id="1697859">.</span><span class="ident" id="1697860">funcoff</span><span class="op" id="1697867">]</span><span class="op" id="1697868">)</span><span class="op" id="1697869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697874">f2</span>&nbsp;<span class="op" id="1697877">:=</span>&nbsp;<span class="op" id="1697880">(</span><span class="op" id="1697881">*</span><span class="ident" id="1697882">_func</span><span class="op" id="1697887">)</span><span class="op" id="1697888">(</span><span class="ident" id="1697889">unsafe</span><span class="op" id="1697895">.</span><span class="ident" id="1697896">Pointer</span><span class="op" id="1697903">(</span><span class="op" id="1697904">&amp;</span><span class="ident" id="1697905">pclntable</span><span class="op" id="1697914">[</span><span class="ident" id="1697915">ftab</span><span class="op" id="1697919">[</span><span class="ident" id="1697920">i</span><span class="op" id="1697921">+</span><span class="num" id="1697922">1</span><span class="op" id="1697923">]</span><span class="op" id="1697924">.</span><span class="ident" id="1697925">funcoff</span><span class="op" id="1697932">]</span><span class="op" id="1697933">)</span><span class="op" id="1697934">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697939">f2name</span>&nbsp;<span class="op" id="1697946">:=</span>&nbsp;<span class="string" id="1697949">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1697958">if</span>&nbsp;<span class="ident" id="1697961">i</span><span class="op" id="1697962">+</span><span class="num" id="1697963">1</span>&nbsp;<span class="op" id="1697965">&lt;</span>&nbsp;<span class="ident" id="1697967">nftab</span>&nbsp;<span class="op" id="1697973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1697979">f2name</span>&nbsp;<span class="op" id="1697986">=</span>&nbsp;<span class="ident" id="1697988">gofuncname</span><span class="op" id="1697998">(</span><span class="ident" id="1697999">f2</span><span class="op" id="1698001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1698006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1698011">println</span><span class="op" id="1698018">(</span><span class="string" id="1698019">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1698073">,</span>&nbsp;<span class="ident" id="1698075">hex</span><span class="op" id="1698078">(</span><span class="ident" id="1698079">ftab</span><span class="op" id="1698083">[</span><span class="ident" id="1698084">i</span><span class="op" id="1698085">]</span><span class="op" id="1698086">.</span><span class="ident" id="1698087">entry</span><span class="op" id="1698092">)</span><span class="op" id="1698093">,</span>&nbsp;<span class="ident" id="1698095">gofuncname</span><span class="op" id="1698105">(</span><span class="ident" id="1698106">f1</span><span class="op" id="1698108">)</span><span class="op" id="1698109">,</span>&nbsp;<span class="string" id="1698111">&#34;&gt;&#34;</span><span class="op" id="1698114">,</span>&nbsp;<span class="ident" id="1698116">hex</span><span class="op" id="1698119">(</span><span class="ident" id="1698120">ftab</span><span class="op" id="1698124">[</span><span class="ident" id="1698125">i</span><span class="op" id="1698126">+</span><span class="num" id="1698127">1</span><span class="op" id="1698128">]</span><span class="op" id="1698129">.</span><span class="ident" id="1698130">entry</span><span class="op" id="1698135">)</span><span class="op" id="1698136">,</span>&nbsp;<span class="ident" id="1698138">f2name</span><span class="op" id="1698144">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1698149">for</span>&nbsp;<span class="ident" id="1698153">j</span>&nbsp;<span class="op" id="1698155">:=</span>&nbsp;<span class="num" id="1698158">0</span><span class="op" id="1698159">;</span>&nbsp;<span class="ident" id="1698161">j</span>&nbsp;<span class="op" id="1698163">&lt;=</span>&nbsp;<span class="ident" id="1698166">i</span><span class="op" id="1698167">;</span>&nbsp;<span class="ident" id="1698169">j</span><span class="op" id="1698170">++</span>&nbsp;<span class="op" id="1698173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1698179">print</span><span class="op" id="1698184">(</span><span class="string" id="1698185">&#34;\t&#34;</span><span class="op" id="1698189">,</span>&nbsp;<span class="ident" id="1698191">hex</span><span class="op" id="1698194">(</span><span class="ident" id="1698195">ftab</span><span class="op" id="1698199">[</span><span class="ident" id="1698200">j</span><span class="op" id="1698201">]</span><span class="op" id="1698202">.</span><span class="ident" id="1698203">entry</span><span class="op" id="1698208">)</span><span class="op" id="1698209">,</span>&nbsp;<span class="string" id="1698211">&#34;&nbsp;&#34;</span><span class="op" id="1698214">,</span>&nbsp;<span class="ident" id="1698216">gofuncname</span><span class="op" id="1698226">(</span><span class="op" id="1698227">(</span><span class="op" id="1698228">*</span><span class="ident" id="1698229">_func</span><span class="op" id="1698234">)</span><span class="op" id="1698235">(</span><span class="ident" id="1698236">unsafe</span><span class="op" id="1698242">.</span><span class="ident" id="1698243">Pointer</span><span class="op" id="1698250">(</span><span class="op" id="1698251">&amp;</span><span class="ident" id="1698252">pclntable</span><span class="op" id="1698261">[</span><span class="ident" id="1698262">ftab</span><span class="op" id="1698266">[</span><span class="ident" id="1698267">j</span><span class="op" id="1698268">]</span><span class="op" id="1698269">.</span><span class="ident" id="1698270">funcoff</span><span class="op" id="1698277">]</span><span class="op" id="1698278">)</span><span class="op" id="1698279">)</span><span class="op" id="1698280">)</span><span class="op" id="1698281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1698286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698291">gothrow</span><span class="op" id="1698298">(</span><span class="string" id="1698299">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1698329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1698333">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1698336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1698340">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1698397">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1698456">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698486">sp</span>&nbsp;<span class="op" id="1698489">=</span>&nbsp;<span class="op" id="1698491">(</span><span class="op" id="1698492">*</span><span class="ident" id="1698493">sliceStruct</span><span class="op" id="1698504">)</span><span class="op" id="1698505">(</span><span class="ident" id="1698506">unsafe</span><span class="op" id="1698512">.</span><span class="ident" id="1698513">Pointer</span><span class="op" id="1698520">(</span><span class="op" id="1698521">&amp;</span><span class="ident" id="1698522">filetab</span><span class="op" id="1698529">)</span><span class="op" id="1698530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698533">end</span>&nbsp;<span class="op" id="1698537">:=</span>&nbsp;<span class="ident" id="1698540">unsafe</span><span class="op" id="1698546">.</span><span class="ident" id="1698547">Pointer</span><span class="op" id="1698554">(</span><span class="op" id="1698555">&amp;</span><span class="ident" id="1698556">ftab</span><span class="op" id="1698560">[</span><span class="ident" id="1698561">nftab</span><span class="op" id="1698566">]</span><span class="op" id="1698567">.</span><span class="ident" id="1698568">funcoff</span><span class="op" id="1698575">)</span>&nbsp;<span class="comment" id="1698577">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698598">fileoffset</span>&nbsp;<span class="op" id="1698609">:=</span>&nbsp;<span class="op" id="1698612">*</span><span class="op" id="1698613">(</span><span class="op" id="1698614">*</span><span class="builtintype" id="1698615">uint32</span><span class="op" id="1698621">)</span><span class="op" id="1698622">(</span><span class="ident" id="1698623">end</span><span class="op" id="1698626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698629">sp</span><span class="op" id="1698631">.</span><span class="ident" id="1698632">array</span>&nbsp;<span class="op" id="1698638">=</span>&nbsp;<span class="ident" id="1698640">unsafe</span><span class="op" id="1698646">.</span><span class="ident" id="1698647">Pointer</span><span class="op" id="1698654">(</span><span class="op" id="1698655">&amp;</span><span class="ident" id="1698656">pclntable</span><span class="op" id="1698665">[</span><span class="ident" id="1698666">fileoffset</span><span class="op" id="1698676">]</span><span class="op" id="1698677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1698680">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1698721">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698767">sp</span><span class="op" id="1698769">.</span><span class="builtinfunc" id="1698770">len</span>&nbsp;<span class="op" id="1698774">=</span>&nbsp;<span class="num" id="1698776">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698779">sp</span><span class="op" id="1698781">.</span><span class="builtinfunc" id="1698782">cap</span>&nbsp;<span class="op" id="1698786">=</span>&nbsp;<span class="num" id="1698788">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698791">sp</span><span class="op" id="1698793">.</span><span class="builtinfunc" id="1698794">len</span>&nbsp;<span class="op" id="1698798">=</span>&nbsp;<span class="builtintype" id="1698800">int</span><span class="op" id="1698803">(</span><span class="ident" id="1698804">filetab</span><span class="op" id="1698811">[</span><span class="num" id="1698812">0</span><span class="op" id="1698813">]</span><span class="op" id="1698814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698817">sp</span><span class="op" id="1698819">.</span><span class="builtinfunc" id="1698820">cap</span>&nbsp;<span class="op" id="1698824">=</span>&nbsp;<span class="ident" id="1698826">sp</span><span class="op" id="1698828">.</span><span class="builtinfunc" id="1698829">len</span><br>
<span class="lineno">100</span><span class="op" id="1698833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1698836">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1698907">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1698954">func</span>&nbsp;<span class="ident" id="1698959">FuncForPC</span><span class="op" id="1698968">(</span><span class="ident" id="1698969">pc</span>&nbsp;<span class="builtintype" id="1698972">uintptr</span><span class="op" id="1698979">)</span>&nbsp;<span class="op" id="1698981">*</span><span class="ident" id="1698982">Func</span>&nbsp;<span class="op" id="1698987">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1698990">return</span>&nbsp;<span class="op" id="1698997">(</span><span class="op" id="1698998">*</span><span class="ident" id="1698999">Func</span><span class="op" id="1699003">)</span><span class="op" id="1699004">(</span><span class="ident" id="1699005">unsafe</span><span class="op" id="1699011">.</span><span class="ident" id="1699012">Pointer</span><span class="op" id="1699019">(</span><span class="ident" id="1699020">findfunc</span><span class="op" id="1699028">(</span><span class="ident" id="1699029">pc</span><span class="op" id="1699031">)</span><span class="op" id="1699032">)</span><span class="op" id="1699033">)</span><br>
<span class="lineno"></span><span class="op" id="1699035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1699038">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1699080">func</span>&nbsp;<span class="op" id="1699085">(</span><span class="ident" id="1699086">f</span>&nbsp;<span class="op" id="1699088">*</span><span class="ident" id="1699089">Func</span><span class="op" id="1699093">)</span>&nbsp;<span class="ident" id="1699095">Name</span><span class="op" id="1699099">(</span><span class="op" id="1699100">)</span>&nbsp;<span class="builtintype" id="1699102">string</span>&nbsp;<span class="op" id="1699109">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699112">return</span>&nbsp;<span class="ident" id="1699119">gofuncname</span><span class="op" id="1699129">(</span><span class="ident" id="1699130">f</span><span class="op" id="1699131">.</span><span class="ident" id="1699132">raw</span><span class="op" id="1699135">(</span><span class="op" id="1699136">)</span><span class="op" id="1699137">)</span><br>
<span class="lineno"></span><span class="op" id="1699139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1699142">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1699194">func</span>&nbsp;<span class="op" id="1699199">(</span><span class="ident" id="1699200">f</span>&nbsp;<span class="op" id="1699202">*</span><span class="ident" id="1699203">Func</span><span class="op" id="1699207">)</span>&nbsp;<span class="ident" id="1699209">Entry</span><span class="op" id="1699214">(</span><span class="op" id="1699215">)</span>&nbsp;<span class="builtintype" id="1699217">uintptr</span>&nbsp;<span class="op" id="1699225">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699228">return</span>&nbsp;<span class="ident" id="1699235">f</span><span class="op" id="1699236">.</span><span class="ident" id="1699237">raw</span><span class="op" id="1699240">(</span><span class="op" id="1699241">)</span><span class="op" id="1699242">.</span><span class="ident" id="1699243">entry</span><br>
<span class="lineno"></span><span class="op" id="1699249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1699252">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1699309">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1699365">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1699423">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1699444">func</span>&nbsp;<span class="op" id="1699449">(</span><span class="ident" id="1699450">f</span>&nbsp;<span class="op" id="1699452">*</span><span class="ident" id="1699453">Func</span><span class="op" id="1699457">)</span>&nbsp;<span class="ident" id="1699459">FileLine</span><span class="op" id="1699467">(</span><span class="ident" id="1699468">pc</span>&nbsp;<span class="builtintype" id="1699471">uintptr</span><span class="op" id="1699478">)</span>&nbsp;<span class="op" id="1699480">(</span><span class="ident" id="1699481">file</span>&nbsp;<span class="builtintype" id="1699486">string</span><span class="op" id="1699492">,</span>&nbsp;<span class="ident" id="1699494">line</span>&nbsp;<span class="builtintype" id="1699499">int</span><span class="op" id="1699502">)</span>&nbsp;<span class="op" id="1699504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1699507">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1699574">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1699638">line</span>&nbsp;<span class="op" id="1699643">=</span>&nbsp;<span class="builtintype" id="1699645">int</span><span class="op" id="1699648">(</span><span class="ident" id="1699649">funcline1</span><span class="op" id="1699658">(</span><span class="ident" id="1699659">f</span><span class="op" id="1699660">.</span><span class="ident" id="1699661">raw</span><span class="op" id="1699664">(</span><span class="op" id="1699665">)</span><span class="op" id="1699666">,</span>&nbsp;<span class="ident" id="1699668">pc</span><span class="op" id="1699670">,</span>&nbsp;<span class="op" id="1699672">&amp;</span><span class="ident" id="1699673">file</span><span class="op" id="1699677">,</span>&nbsp;<span class="builtintype" id="1699679">false</span><span class="op" id="1699684">)</span><span class="op" id="1699685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699688">return</span>&nbsp;<span class="ident" id="1699695">file</span><span class="op" id="1699699">,</span>&nbsp;<span class="ident" id="1699701">line</span><br>
<span class="lineno"></span><span class="op" id="1699706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1699709">func</span>&nbsp;<span class="ident" id="1699714">findfunc</span><span class="op" id="1699722">(</span><span class="ident" id="1699723">pc</span>&nbsp;<span class="builtintype" id="1699726">uintptr</span><span class="op" id="1699733">)</span>&nbsp;<span class="op" id="1699735">*</span><span class="ident" id="1699736">_func</span>&nbsp;<span class="op" id="1699742">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699745">if</span>&nbsp;<span class="builtinfunc" id="1699748">len</span><span class="op" id="1699751">(</span><span class="ident" id="1699752">ftab</span><span class="op" id="1699756">)</span>&nbsp;<span class="op" id="1699758">==</span>&nbsp;<span class="num" id="1699761">0</span>&nbsp;<span class="op" id="1699763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699767">return</span>&nbsp;<span class="ident" id="1699774">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1699779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699783">if</span>&nbsp;<span class="ident" id="1699786">pc</span>&nbsp;<span class="op" id="1699789">&lt;</span>&nbsp;<span class="ident" id="1699791">ftab</span><span class="op" id="1699795">[</span><span class="num" id="1699796">0</span><span class="op" id="1699797">]</span><span class="op" id="1699798">.</span><span class="ident" id="1699799">entry</span>&nbsp;<span class="op" id="1699805">||</span>&nbsp;<span class="ident" id="1699808">pc</span>&nbsp;<span class="op" id="1699811">&gt;=</span>&nbsp;<span class="ident" id="1699814">ftab</span><span class="op" id="1699818">[</span><span class="builtinfunc" id="1699819">len</span><span class="op" id="1699822">(</span><span class="ident" id="1699823">ftab</span><span class="op" id="1699827">)</span><span class="op" id="1699828">-</span><span class="num" id="1699829">1</span><span class="op" id="1699830">]</span><span class="op" id="1699831">.</span><span class="ident" id="1699832">entry</span>&nbsp;<span class="op" id="1699838">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699842">return</span>&nbsp;<span class="ident" id="1699849">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1699854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1699858">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1699907">lo</span>&nbsp;<span class="op" id="1699910">:=</span>&nbsp;<span class="num" id="1699913">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1699916">nf</span>&nbsp;<span class="op" id="1699919">:=</span>&nbsp;<span class="builtinfunc" id="1699922">len</span><span class="op" id="1699925">(</span><span class="ident" id="1699926">ftab</span><span class="op" id="1699930">)</span>&nbsp;<span class="op" id="1699932">-</span>&nbsp;<span class="num" id="1699934">1</span>&nbsp;<span class="comment" id="1699936">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1699963">for</span>&nbsp;<span class="ident" id="1699967">nf</span>&nbsp;<span class="op" id="1699970">&gt;</span>&nbsp;<span class="num" id="1699972">0</span>&nbsp;<span class="op" id="1699974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1699978">n</span>&nbsp;<span class="op" id="1699980">:=</span>&nbsp;<span class="ident" id="1699983">nf</span>&nbsp;<span class="op" id="1699986">/</span>&nbsp;<span class="num" id="1699988">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1699992">f</span>&nbsp;<span class="op" id="1699994">:=</span>&nbsp;<span class="op" id="1699997">&amp;</span><span class="ident" id="1699998">ftab</span><span class="op" id="1700002">[</span><span class="ident" id="1700003">lo</span><span class="op" id="1700005">+</span><span class="ident" id="1700006">n</span><span class="op" id="1700007">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700011">if</span>&nbsp;<span class="ident" id="1700014">f</span><span class="op" id="1700015">.</span><span class="ident" id="1700016">entry</span>&nbsp;<span class="op" id="1700022">&lt;=</span>&nbsp;<span class="ident" id="1700025">pc</span>&nbsp;<span class="op" id="1700028">&amp;&amp;</span>&nbsp;<span class="ident" id="1700031">pc</span>&nbsp;<span class="op" id="1700034">&lt;</span>&nbsp;<span class="ident" id="1700036">ftab</span><span class="op" id="1700040">[</span><span class="ident" id="1700041">lo</span><span class="op" id="1700043">+</span><span class="ident" id="1700044">n</span><span class="op" id="1700045">+</span><span class="num" id="1700046">1</span><span class="op" id="1700047">]</span><span class="op" id="1700048">.</span><span class="ident" id="1700049">entry</span>&nbsp;<span class="op" id="1700055">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700060">return</span>&nbsp;<span class="op" id="1700067">(</span><span class="op" id="1700068">*</span><span class="ident" id="1700069">_func</span><span class="op" id="1700074">)</span><span class="op" id="1700075">(</span><span class="ident" id="1700076">unsafe</span><span class="op" id="1700082">.</span><span class="ident" id="1700083">Pointer</span><span class="op" id="1700090">(</span><span class="op" id="1700091">&amp;</span><span class="ident" id="1700092">pclntable</span><span class="op" id="1700101">[</span><span class="ident" id="1700102">f</span><span class="op" id="1700103">.</span><span class="ident" id="1700104">funcoff</span><span class="op" id="1700111">]</span><span class="op" id="1700112">)</span><span class="op" id="1700113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700117">}</span>&nbsp;<span class="keyword" id="1700119">else</span>&nbsp;<span class="keyword" id="1700124">if</span>&nbsp;<span class="ident" id="1700127">pc</span>&nbsp;<span class="op" id="1700130">&lt;</span>&nbsp;<span class="ident" id="1700132">f</span><span class="op" id="1700133">.</span><span class="ident" id="1700134">entry</span>&nbsp;<span class="op" id="1700140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700145">nf</span>&nbsp;<span class="op" id="1700148">=</span>&nbsp;<span class="ident" id="1700150">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700154">}</span>&nbsp;<span class="keyword" id="1700156">else</span>&nbsp;<span class="op" id="1700161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700166">lo</span>&nbsp;<span class="op" id="1700169">+=</span>&nbsp;<span class="ident" id="1700172">n</span>&nbsp;<span class="op" id="1700174">+</span>&nbsp;<span class="num" id="1700176">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700181">nf</span>&nbsp;<span class="op" id="1700184">-=</span>&nbsp;<span class="ident" id="1700187">n</span>&nbsp;<span class="op" id="1700189">+</span>&nbsp;<span class="num" id="1700191">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700202">gothrow</span><span class="op" id="1700209">(</span><span class="string" id="1700210">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1700242">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700245">return</span>&nbsp;<span class="ident" id="1700252">nil</span><br>
<span class="lineno"></span><span class="op" id="1700256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1700259">func</span>&nbsp;<span class="ident" id="1700264">pcvalue</span><span class="op" id="1700271">(</span><span class="ident" id="1700272">f</span>&nbsp;<span class="op" id="1700274">*</span><span class="ident" id="1700275">_func</span><span class="op" id="1700280">,</span>&nbsp;<span class="ident" id="1700282">off</span>&nbsp;<span class="builtintype" id="1700286">int32</span><span class="op" id="1700291">,</span>&nbsp;<span class="ident" id="1700293">targetpc</span>&nbsp;<span class="builtintype" id="1700302">uintptr</span><span class="op" id="1700309">,</span>&nbsp;<span class="ident" id="1700311">strict</span>&nbsp;<span class="builtintype" id="1700318">bool</span><span class="op" id="1700322">)</span>&nbsp;<span class="builtintype" id="1700324">int32</span>&nbsp;<span class="op" id="1700330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700333">if</span>&nbsp;<span class="ident" id="1700336">off</span>&nbsp;<span class="op" id="1700340">==</span>&nbsp;<span class="num" id="1700343">0</span>&nbsp;<span class="op" id="1700345">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700349">return</span>&nbsp;<span class="op" id="1700356">-</span><span class="num" id="1700357">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700363">p</span>&nbsp;<span class="op" id="1700365">:=</span>&nbsp;<span class="ident" id="1700368">pclntable</span><span class="op" id="1700377">[</span><span class="ident" id="1700378">off</span><span class="op" id="1700381">:</span><span class="op" id="1700382">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700385">pc</span>&nbsp;<span class="op" id="1700388">:=</span>&nbsp;<span class="ident" id="1700391">f</span><span class="op" id="1700392">.</span><span class="ident" id="1700393">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700400">val</span>&nbsp;<span class="op" id="1700404">:=</span>&nbsp;<span class="builtintype" id="1700407">int32</span><span class="op" id="1700412">(</span><span class="op" id="1700413">-</span><span class="num" id="1700414">1</span><span class="op" id="1700415">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700418">for</span>&nbsp;<span class="op" id="1700422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700426">var</span>&nbsp;<span class="ident" id="1700430">ok</span>&nbsp;<span class="builtintype" id="1700433">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700440">p</span><span class="op" id="1700441">,</span>&nbsp;<span class="ident" id="1700443">ok</span>&nbsp;<span class="op" id="1700446">=</span>&nbsp;<span class="ident" id="1700448">step</span><span class="op" id="1700452">(</span><span class="ident" id="1700453">p</span><span class="op" id="1700454">,</span>&nbsp;<span class="op" id="1700456">&amp;</span><span class="ident" id="1700457">pc</span><span class="op" id="1700459">,</span>&nbsp;<span class="op" id="1700461">&amp;</span><span class="ident" id="1700462">val</span><span class="op" id="1700465">,</span>&nbsp;<span class="ident" id="1700467">pc</span>&nbsp;<span class="op" id="1700470">==</span>&nbsp;<span class="ident" id="1700473">f</span><span class="op" id="1700474">.</span><span class="ident" id="1700475">entry</span><span class="op" id="1700480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700484">if</span>&nbsp;<span class="op" id="1700487">!</span><span class="ident" id="1700488">ok</span>&nbsp;<span class="op" id="1700491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700496">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700508">if</span>&nbsp;<span class="ident" id="1700511">targetpc</span>&nbsp;<span class="op" id="1700520">&lt;</span>&nbsp;<span class="ident" id="1700522">pc</span>&nbsp;<span class="op" id="1700525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700530">return</span>&nbsp;<span class="ident" id="1700537">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700546">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1700550">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1700621">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700653">if</span>&nbsp;<span class="ident" id="1700656">panicking</span>&nbsp;<span class="op" id="1700666">!=</span>&nbsp;<span class="num" id="1700669">0</span>&nbsp;<span class="op" id="1700671">||</span>&nbsp;<span class="op" id="1700674">!</span><span class="ident" id="1700675">strict</span>&nbsp;<span class="op" id="1700682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700686">return</span>&nbsp;<span class="op" id="1700693">-</span><span class="num" id="1700694">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1700701">print</span><span class="op" id="1700706">(</span><span class="string" id="1700707">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1700745">,</span>&nbsp;<span class="ident" id="1700747">gofuncname</span><span class="op" id="1700757">(</span><span class="ident" id="1700758">f</span><span class="op" id="1700759">)</span><span class="op" id="1700760">,</span>&nbsp;<span class="string" id="1700762">&#34;&nbsp;pc=&#34;</span><span class="op" id="1700768">,</span>&nbsp;<span class="ident" id="1700770">hex</span><span class="op" id="1700773">(</span><span class="ident" id="1700774">pc</span><span class="op" id="1700776">)</span><span class="op" id="1700777">,</span>&nbsp;<span class="string" id="1700779">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1700791">,</span>&nbsp;<span class="ident" id="1700793">hex</span><span class="op" id="1700796">(</span><span class="ident" id="1700797">targetpc</span><span class="op" id="1700805">)</span><span class="op" id="1700806">,</span>&nbsp;<span class="string" id="1700808">&#34;&nbsp;tab=&#34;</span><span class="op" id="1700815">,</span>&nbsp;<span class="ident" id="1700817">p</span><span class="op" id="1700818">,</span>&nbsp;<span class="string" id="1700820">&#34;\n&#34;</span><span class="op" id="1700824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700828">p</span>&nbsp;<span class="op" id="1700830">=</span>&nbsp;<span class="ident" id="1700832">pclntable</span><span class="op" id="1700841">[</span><span class="ident" id="1700842">off</span><span class="op" id="1700845">:</span><span class="op" id="1700846">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700849">pc</span>&nbsp;<span class="op" id="1700852">=</span>&nbsp;<span class="ident" id="1700854">f</span><span class="op" id="1700855">.</span><span class="ident" id="1700856">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700863">val</span>&nbsp;<span class="op" id="1700867">=</span>&nbsp;<span class="op" id="1700869">-</span><span class="num" id="1700870">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700873">for</span>&nbsp;<span class="op" id="1700877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700881">var</span>&nbsp;<span class="ident" id="1700885">ok</span>&nbsp;<span class="builtintype" id="1700888">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1700895">p</span><span class="op" id="1700896">,</span>&nbsp;<span class="ident" id="1700898">ok</span>&nbsp;<span class="op" id="1700901">=</span>&nbsp;<span class="ident" id="1700903">step</span><span class="op" id="1700907">(</span><span class="ident" id="1700908">p</span><span class="op" id="1700909">,</span>&nbsp;<span class="op" id="1700911">&amp;</span><span class="ident" id="1700912">pc</span><span class="op" id="1700914">,</span>&nbsp;<span class="op" id="1700916">&amp;</span><span class="ident" id="1700917">val</span><span class="op" id="1700920">,</span>&nbsp;<span class="ident" id="1700922">pc</span>&nbsp;<span class="op" id="1700925">==</span>&nbsp;<span class="ident" id="1700928">f</span><span class="op" id="1700929">.</span><span class="ident" id="1700930">entry</span><span class="op" id="1700935">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700939">if</span>&nbsp;<span class="op" id="1700942">!</span><span class="ident" id="1700943">ok</span>&nbsp;<span class="op" id="1700946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1700951">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1700959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1700963">print</span><span class="op" id="1700968">(</span><span class="string" id="1700969">&#34;\tvalue=&#34;</span><span class="op" id="1700979">,</span>&nbsp;<span class="ident" id="1700981">val</span><span class="op" id="1700984">,</span>&nbsp;<span class="string" id="1700986">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1700998">,</span>&nbsp;<span class="ident" id="1701000">hex</span><span class="op" id="1701003">(</span><span class="ident" id="1701004">pc</span><span class="op" id="1701006">)</span><span class="op" id="1701007">,</span>&nbsp;<span class="string" id="1701009">&#34;\n&#34;</span><span class="op" id="1701013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1701016">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1701020">gothrow</span><span class="op" id="1701027">(</span><span class="string" id="1701028">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1701058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701061">return</span>&nbsp;<span class="op" id="1701068">-</span><span class="num" id="1701069">1</span><br>
<span class="lineno"></span><span class="op" id="1701071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1701074">func</span>&nbsp;<span class="ident" id="1701079">funcname</span><span class="op" id="1701087">(</span><span class="ident" id="1701088">f</span>&nbsp;<span class="op" id="1701090">*</span><span class="ident" id="1701091">_func</span><span class="op" id="1701096">)</span>&nbsp;<span class="op" id="1701098">*</span><span class="builtintype" id="1701099">byte</span>&nbsp;<span class="op" id="1701104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701107">if</span>&nbsp;<span class="ident" id="1701110">f</span>&nbsp;<span class="op" id="1701112">==</span>&nbsp;<span class="ident" id="1701115">nil</span>&nbsp;<span class="op" id="1701119">||</span>&nbsp;<span class="ident" id="1701122">f</span><span class="op" id="1701123">.</span><span class="ident" id="1701124">nameoff</span>&nbsp;<span class="op" id="1701132">==</span>&nbsp;<span class="num" id="1701135">0</span>&nbsp;<span class="op" id="1701137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701141">return</span>&nbsp;<span class="ident" id="1701148">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1701153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701156">return</span>&nbsp;<span class="op" id="1701163">(</span><span class="op" id="1701164">*</span><span class="builtintype" id="1701165">byte</span><span class="op" id="1701169">)</span><span class="op" id="1701170">(</span><span class="ident" id="1701171">unsafe</span><span class="op" id="1701177">.</span><span class="ident" id="1701178">Pointer</span><span class="op" id="1701185">(</span><span class="op" id="1701186">&amp;</span><span class="ident" id="1701187">pclntable</span><span class="op" id="1701196">[</span><span class="ident" id="1701197">f</span><span class="op" id="1701198">.</span><span class="ident" id="1701199">nameoff</span><span class="op" id="1701206">]</span><span class="op" id="1701207">)</span><span class="op" id="1701208">)</span><br>
<span class="lineno">205</span><span class="op" id="1701210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1701213">func</span>&nbsp;<span class="ident" id="1701218">gofuncname</span><span class="op" id="1701228">(</span><span class="ident" id="1701229">f</span>&nbsp;<span class="op" id="1701231">*</span><span class="ident" id="1701232">_func</span><span class="op" id="1701237">)</span>&nbsp;<span class="builtintype" id="1701239">string</span>&nbsp;<span class="op" id="1701246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701249">return</span>&nbsp;<span class="ident" id="1701256">gostringnocopy</span><span class="op" id="1701270">(</span><span class="ident" id="1701271">funcname</span><span class="op" id="1701279">(</span><span class="ident" id="1701280">f</span><span class="op" id="1701281">)</span><span class="op" id="1701282">)</span><br>
<span class="lineno"></span><span class="op" id="1701284">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1701287">func</span>&nbsp;<span class="ident" id="1701292">funcline1</span><span class="op" id="1701301">(</span><span class="ident" id="1701302">f</span>&nbsp;<span class="op" id="1701304">*</span><span class="ident" id="1701305">_func</span><span class="op" id="1701310">,</span>&nbsp;<span class="ident" id="1701312">targetpc</span>&nbsp;<span class="builtintype" id="1701321">uintptr</span><span class="op" id="1701328">,</span>&nbsp;<span class="ident" id="1701330">file</span>&nbsp;<span class="op" id="1701335">*</span><span class="builtintype" id="1701336">string</span><span class="op" id="1701342">,</span>&nbsp;<span class="ident" id="1701344">strict</span>&nbsp;<span class="builtintype" id="1701351">bool</span><span class="op" id="1701355">)</span>&nbsp;<span class="builtintype" id="1701357">int32</span>&nbsp;<span class="op" id="1701363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1701366">*</span><span class="ident" id="1701367">file</span>&nbsp;<span class="op" id="1701372">=</span>&nbsp;<span class="string" id="1701374">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1701379">fileno</span>&nbsp;<span class="op" id="1701386">:=</span>&nbsp;<span class="builtintype" id="1701389">int</span><span class="op" id="1701392">(</span><span class="ident" id="1701393">pcvalue</span><span class="op" id="1701400">(</span><span class="ident" id="1701401">f</span><span class="op" id="1701402">,</span>&nbsp;<span class="ident" id="1701404">f</span><span class="op" id="1701405">.</span><span class="ident" id="1701406">pcfile</span><span class="op" id="1701412">,</span>&nbsp;<span class="ident" id="1701414">targetpc</span><span class="op" id="1701422">,</span>&nbsp;<span class="ident" id="1701424">strict</span><span class="op" id="1701430">)</span><span class="op" id="1701431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1701434">line</span>&nbsp;<span class="op" id="1701439">:=</span>&nbsp;<span class="ident" id="1701442">pcvalue</span><span class="op" id="1701449">(</span><span class="ident" id="1701450">f</span><span class="op" id="1701451">,</span>&nbsp;<span class="ident" id="1701453">f</span><span class="op" id="1701454">.</span><span class="ident" id="1701455">pcln</span><span class="op" id="1701459">,</span>&nbsp;<span class="ident" id="1701461">targetpc</span><span class="op" id="1701469">,</span>&nbsp;<span class="ident" id="1701471">strict</span><span class="op" id="1701477">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701480">if</span>&nbsp;<span class="ident" id="1701483">fileno</span>&nbsp;<span class="op" id="1701490">==</span>&nbsp;<span class="op" id="1701493">-</span><span class="num" id="1701494">1</span>&nbsp;<span class="op" id="1701496">||</span>&nbsp;<span class="ident" id="1701499">line</span>&nbsp;<span class="op" id="1701504">==</span>&nbsp;<span class="op" id="1701507">-</span><span class="num" id="1701508">1</span>&nbsp;<span class="op" id="1701510">||</span>&nbsp;<span class="ident" id="1701513">fileno</span>&nbsp;<span class="op" id="1701520">&gt;=</span>&nbsp;<span class="builtinfunc" id="1701523">len</span><span class="op" id="1701526">(</span><span class="ident" id="1701527">filetab</span><span class="op" id="1701534">)</span>&nbsp;<span class="op" id="1701536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1701540">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701651">return</span>&nbsp;<span class="num" id="1701658">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1701661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1701664">*</span><span class="ident" id="1701665">file</span>&nbsp;<span class="op" id="1701670">=</span>&nbsp;<span class="ident" id="1701672">gostringnocopy</span><span class="op" id="1701686">(</span><span class="op" id="1701687">&amp;</span><span class="ident" id="1701688">pclntable</span><span class="op" id="1701697">[</span><span class="ident" id="1701698">filetab</span><span class="op" id="1701705">[</span><span class="ident" id="1701706">fileno</span><span class="op" id="1701712">]</span><span class="op" id="1701713">]</span><span class="op" id="1701714">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701717">return</span>&nbsp;<span class="ident" id="1701724">line</span><br>
<span class="lineno"></span><span class="op" id="1701729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1701732">func</span>&nbsp;<span class="ident" id="1701737">funcline</span><span class="op" id="1701745">(</span><span class="ident" id="1701746">f</span>&nbsp;<span class="op" id="1701748">*</span><span class="ident" id="1701749">_func</span><span class="op" id="1701754">,</span>&nbsp;<span class="ident" id="1701756">targetpc</span>&nbsp;<span class="builtintype" id="1701765">uintptr</span><span class="op" id="1701772">,</span>&nbsp;<span class="ident" id="1701774">file</span>&nbsp;<span class="op" id="1701779">*</span><span class="builtintype" id="1701780">string</span><span class="op" id="1701786">)</span>&nbsp;<span class="builtintype" id="1701788">int32</span>&nbsp;<span class="op" id="1701794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701797">return</span>&nbsp;<span class="ident" id="1701804">funcline1</span><span class="op" id="1701813">(</span><span class="ident" id="1701814">f</span><span class="op" id="1701815">,</span>&nbsp;<span class="ident" id="1701817">targetpc</span><span class="op" id="1701825">,</span>&nbsp;<span class="ident" id="1701827">file</span><span class="op" id="1701831">,</span>&nbsp;<span class="builtintype" id="1701833">true</span><span class="op" id="1701837">)</span><br>
<span class="lineno">225</span><span class="op" id="1701839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1701842">func</span>&nbsp;<span class="ident" id="1701847">funcspdelta</span><span class="op" id="1701858">(</span><span class="ident" id="1701859">f</span>&nbsp;<span class="op" id="1701861">*</span><span class="ident" id="1701862">_func</span><span class="op" id="1701867">,</span>&nbsp;<span class="ident" id="1701869">targetpc</span>&nbsp;<span class="builtintype" id="1701878">uintptr</span><span class="op" id="1701885">)</span>&nbsp;<span class="builtintype" id="1701887">int32</span>&nbsp;<span class="op" id="1701893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1701896">x</span>&nbsp;<span class="op" id="1701898">:=</span>&nbsp;<span class="ident" id="1701901">pcvalue</span><span class="op" id="1701908">(</span><span class="ident" id="1701909">f</span><span class="op" id="1701910">,</span>&nbsp;<span class="ident" id="1701912">f</span><span class="op" id="1701913">.</span><span class="ident" id="1701914">pcsp</span><span class="op" id="1701918">,</span>&nbsp;<span class="ident" id="1701920">targetpc</span><span class="op" id="1701928">,</span>&nbsp;<span class="builtintype" id="1701930">true</span><span class="op" id="1701934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1701937">if</span>&nbsp;<span class="ident" id="1701940">x</span><span class="op" id="1701941">&amp;</span><span class="op" id="1701942">(</span><span class="ident" id="1701943">ptrSize</span><span class="op" id="1701950">-</span><span class="num" id="1701951">1</span><span class="op" id="1701952">)</span>&nbsp;<span class="op" id="1701954">!=</span>&nbsp;<span class="num" id="1701957">0</span>&nbsp;<span class="op" id="1701959">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1701963">print</span><span class="op" id="1701968">(</span><span class="string" id="1701969">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1701987">,</span>&nbsp;<span class="ident" id="1701989">hex</span><span class="op" id="1701992">(</span><span class="ident" id="1701993">f</span><span class="op" id="1701994">.</span><span class="ident" id="1701995">entry</span><span class="op" id="1702000">)</span><span class="op" id="1702001">,</span>&nbsp;<span class="string" id="1702003">&#34;&nbsp;&#34;</span><span class="op" id="1702006">,</span>&nbsp;<span class="ident" id="1702008">hex</span><span class="op" id="1702011">(</span><span class="ident" id="1702012">targetpc</span><span class="op" id="1702020">)</span><span class="op" id="1702021">,</span>&nbsp;<span class="string" id="1702023">&#34;&nbsp;&#34;</span><span class="op" id="1702026">,</span>&nbsp;<span class="ident" id="1702028">hex</span><span class="op" id="1702031">(</span><span class="ident" id="1702032">f</span><span class="op" id="1702033">.</span><span class="ident" id="1702034">pcsp</span><span class="op" id="1702038">)</span><span class="op" id="1702039">,</span>&nbsp;<span class="string" id="1702041">&#34;&nbsp;&#34;</span><span class="op" id="1702044">,</span>&nbsp;<span class="ident" id="1702046">x</span><span class="op" id="1702047">,</span>&nbsp;<span class="string" id="1702049">&#34;\n&#34;</span><span class="op" id="1702053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702059">return</span>&nbsp;<span class="ident" id="1702066">x</span><br>
<span class="lineno"></span><span class="op" id="1702068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1702071">func</span>&nbsp;<span class="ident" id="1702076">pcdatavalue</span><span class="op" id="1702087">(</span><span class="ident" id="1702088">f</span>&nbsp;<span class="op" id="1702090">*</span><span class="ident" id="1702091">_func</span><span class="op" id="1702096">,</span>&nbsp;<span class="ident" id="1702098">table</span>&nbsp;<span class="builtintype" id="1702104">int32</span><span class="op" id="1702109">,</span>&nbsp;<span class="ident" id="1702111">targetpc</span>&nbsp;<span class="builtintype" id="1702120">uintptr</span><span class="op" id="1702127">)</span>&nbsp;<span class="builtintype" id="1702129">int32</span>&nbsp;<span class="op" id="1702135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702138">if</span>&nbsp;<span class="ident" id="1702141">table</span>&nbsp;<span class="op" id="1702147">&lt;</span>&nbsp;<span class="num" id="1702149">0</span>&nbsp;<span class="op" id="1702151">||</span>&nbsp;<span class="ident" id="1702154">table</span>&nbsp;<span class="op" id="1702160">&gt;=</span>&nbsp;<span class="ident" id="1702163">f</span><span class="op" id="1702164">.</span><span class="ident" id="1702165">npcdata</span>&nbsp;<span class="op" id="1702173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702177">return</span>&nbsp;<span class="op" id="1702184">-</span><span class="num" id="1702185">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702191">off</span>&nbsp;<span class="op" id="1702195">:=</span>&nbsp;<span class="op" id="1702198">*</span><span class="op" id="1702199">(</span><span class="op" id="1702200">*</span><span class="builtintype" id="1702201">int32</span><span class="op" id="1702206">)</span><span class="op" id="1702207">(</span><span class="ident" id="1702208">add</span><span class="op" id="1702211">(</span><span class="ident" id="1702212">unsafe</span><span class="op" id="1702218">.</span><span class="ident" id="1702219">Pointer</span><span class="op" id="1702226">(</span><span class="op" id="1702227">&amp;</span><span class="ident" id="1702228">f</span><span class="op" id="1702229">.</span><span class="ident" id="1702230">nfuncdata</span><span class="op" id="1702239">)</span><span class="op" id="1702240">,</span>&nbsp;<span class="ident" id="1702242">unsafe</span><span class="op" id="1702248">.</span><span class="ident" id="1702249">Sizeof</span><span class="op" id="1702255">(</span><span class="ident" id="1702256">f</span><span class="op" id="1702257">.</span><span class="ident" id="1702258">nfuncdata</span><span class="op" id="1702267">)</span><span class="op" id="1702268">+</span><span class="builtintype" id="1702269">uintptr</span><span class="op" id="1702276">(</span><span class="ident" id="1702277">table</span><span class="op" id="1702282">)</span><span class="op" id="1702283">*</span><span class="num" id="1702284">4</span><span class="op" id="1702285">)</span><span class="op" id="1702286">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702289">return</span>&nbsp;<span class="ident" id="1702296">pcvalue</span><span class="op" id="1702303">(</span><span class="ident" id="1702304">f</span><span class="op" id="1702305">,</span>&nbsp;<span class="ident" id="1702307">off</span><span class="op" id="1702310">,</span>&nbsp;<span class="ident" id="1702312">targetpc</span><span class="op" id="1702320">,</span>&nbsp;<span class="builtintype" id="1702322">true</span><span class="op" id="1702326">)</span><br>
<span class="lineno"></span><span class="op" id="1702328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1702331">func</span>&nbsp;<span class="ident" id="1702336">funcdata</span><span class="op" id="1702344">(</span><span class="ident" id="1702345">f</span>&nbsp;<span class="op" id="1702347">*</span><span class="ident" id="1702348">_func</span><span class="op" id="1702353">,</span>&nbsp;<span class="ident" id="1702355">i</span>&nbsp;<span class="builtintype" id="1702357">int32</span><span class="op" id="1702362">)</span>&nbsp;<span class="ident" id="1702364">unsafe</span><span class="op" id="1702370">.</span><span class="ident" id="1702371">Pointer</span>&nbsp;<span class="op" id="1702379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702382">if</span>&nbsp;<span class="ident" id="1702385">i</span>&nbsp;<span class="op" id="1702387">&lt;</span>&nbsp;<span class="num" id="1702389">0</span>&nbsp;<span class="op" id="1702391">||</span>&nbsp;<span class="ident" id="1702394">i</span>&nbsp;<span class="op" id="1702396">&gt;=</span>&nbsp;<span class="ident" id="1702399">f</span><span class="op" id="1702400">.</span><span class="ident" id="1702401">nfuncdata</span>&nbsp;<span class="op" id="1702411">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702415">return</span>&nbsp;<span class="ident" id="1702422">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702430">p</span>&nbsp;<span class="op" id="1702432">:=</span>&nbsp;<span class="ident" id="1702435">add</span><span class="op" id="1702438">(</span><span class="ident" id="1702439">unsafe</span><span class="op" id="1702445">.</span><span class="ident" id="1702446">Pointer</span><span class="op" id="1702453">(</span><span class="op" id="1702454">&amp;</span><span class="ident" id="1702455">f</span><span class="op" id="1702456">.</span><span class="ident" id="1702457">nfuncdata</span><span class="op" id="1702466">)</span><span class="op" id="1702467">,</span>&nbsp;<span class="ident" id="1702469">unsafe</span><span class="op" id="1702475">.</span><span class="ident" id="1702476">Sizeof</span><span class="op" id="1702482">(</span><span class="ident" id="1702483">f</span><span class="op" id="1702484">.</span><span class="ident" id="1702485">nfuncdata</span><span class="op" id="1702494">)</span><span class="op" id="1702495">+</span><span class="builtintype" id="1702496">uintptr</span><span class="op" id="1702503">(</span><span class="ident" id="1702504">f</span><span class="op" id="1702505">.</span><span class="ident" id="1702506">npcdata</span><span class="op" id="1702513">)</span><span class="op" id="1702514">*</span><span class="num" id="1702515">4</span><span class="op" id="1702516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702519">if</span>&nbsp;<span class="ident" id="1702522">ptrSize</span>&nbsp;<span class="op" id="1702530">==</span>&nbsp;<span class="num" id="1702533">8</span>&nbsp;<span class="op" id="1702535">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1702538">uintptr</span><span class="op" id="1702545">(</span><span class="ident" id="1702546">p</span><span class="op" id="1702547">)</span><span class="op" id="1702548">&amp;</span><span class="num" id="1702549">4</span>&nbsp;<span class="op" id="1702551">!=</span>&nbsp;<span class="num" id="1702554">0</span>&nbsp;<span class="op" id="1702556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702560">if</span>&nbsp;<span class="builtintype" id="1702563">uintptr</span><span class="op" id="1702570">(</span><span class="ident" id="1702571">unsafe</span><span class="op" id="1702577">.</span><span class="ident" id="1702578">Pointer</span><span class="op" id="1702585">(</span><span class="ident" id="1702586">f</span><span class="op" id="1702587">)</span><span class="op" id="1702588">)</span><span class="op" id="1702589">&amp;</span><span class="num" id="1702590">4</span>&nbsp;<span class="op" id="1702592">!=</span>&nbsp;<span class="num" id="1702595">0</span>&nbsp;<span class="op" id="1702597">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1702602">println</span><span class="op" id="1702609">(</span><span class="string" id="1702610">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1702636">,</span>&nbsp;<span class="ident" id="1702638">f</span><span class="op" id="1702639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702647">p</span>&nbsp;<span class="op" id="1702649">=</span>&nbsp;<span class="ident" id="1702651">add</span><span class="op" id="1702654">(</span><span class="ident" id="1702655">p</span><span class="op" id="1702656">,</span>&nbsp;<span class="num" id="1702658">4</span><span class="op" id="1702659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702665">return</span>&nbsp;<span class="op" id="1702672">*</span><span class="op" id="1702673">(</span><span class="op" id="1702674">*</span><span class="ident" id="1702675">unsafe</span><span class="op" id="1702681">.</span><span class="ident" id="1702682">Pointer</span><span class="op" id="1702689">)</span><span class="op" id="1702690">(</span><span class="ident" id="1702691">add</span><span class="op" id="1702694">(</span><span class="ident" id="1702695">p</span><span class="op" id="1702696">,</span>&nbsp;<span class="builtintype" id="1702698">uintptr</span><span class="op" id="1702705">(</span><span class="ident" id="1702706">i</span><span class="op" id="1702707">)</span><span class="op" id="1702708">*</span><span class="ident" id="1702709">ptrSize</span><span class="op" id="1702716">)</span><span class="op" id="1702717">)</span><br>
<span class="lineno">255</span><span class="op" id="1702719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1702722">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1702788">func</span>&nbsp;<span class="ident" id="1702793">step</span><span class="op" id="1702797">(</span><span class="ident" id="1702798">p</span>&nbsp;<span class="op" id="1702800">[</span><span class="op" id="1702801">]</span><span class="builtintype" id="1702802">byte</span><span class="op" id="1702806">,</span>&nbsp;<span class="ident" id="1702808">pc</span>&nbsp;<span class="op" id="1702811">*</span><span class="builtintype" id="1702812">uintptr</span><span class="op" id="1702819">,</span>&nbsp;<span class="ident" id="1702821">val</span>&nbsp;<span class="op" id="1702825">*</span><span class="builtintype" id="1702826">int32</span><span class="op" id="1702831">,</span>&nbsp;<span class="ident" id="1702833">first</span>&nbsp;<span class="builtintype" id="1702839">bool</span><span class="op" id="1702843">)</span>&nbsp;<span class="op" id="1702845">(</span><span class="ident" id="1702846">newp</span>&nbsp;<span class="op" id="1702851">[</span><span class="op" id="1702852">]</span><span class="builtintype" id="1702853">byte</span><span class="op" id="1702857">,</span>&nbsp;<span class="ident" id="1702859">ok</span>&nbsp;<span class="builtintype" id="1702862">bool</span><span class="op" id="1702866">)</span>&nbsp;<span class="op" id="1702868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702871">p</span><span class="op" id="1702872">,</span>&nbsp;<span class="ident" id="1702874">uvdelta</span>&nbsp;<span class="op" id="1702882">:=</span>&nbsp;<span class="ident" id="1702885">readvarint</span><span class="op" id="1702895">(</span><span class="ident" id="1702896">p</span><span class="op" id="1702897">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702900">if</span>&nbsp;<span class="ident" id="1702903">uvdelta</span>&nbsp;<span class="op" id="1702911">==</span>&nbsp;<span class="num" id="1702914">0</span>&nbsp;<span class="op" id="1702916">&amp;&amp;</span>&nbsp;<span class="op" id="1702919">!</span><span class="ident" id="1702920">first</span>&nbsp;<span class="op" id="1702926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702930">return</span>&nbsp;<span class="ident" id="1702937">nil</span><span class="op" id="1702940">,</span>&nbsp;<span class="builtintype" id="1702942">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1702949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702952">if</span>&nbsp;<span class="ident" id="1702955">uvdelta</span><span class="op" id="1702962">&amp;</span><span class="num" id="1702963">1</span>&nbsp;<span class="op" id="1702965">!=</span>&nbsp;<span class="num" id="1702968">0</span>&nbsp;<span class="op" id="1702970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702974">uvdelta</span>&nbsp;<span class="op" id="1702982">=</span>&nbsp;<span class="op" id="1702984">^</span><span class="op" id="1702985">(</span><span class="ident" id="1702986">uvdelta</span>&nbsp;<span class="op" id="1702994">&gt;&gt;</span>&nbsp;<span class="num" id="1702997">1</span><span class="op" id="1702998">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703001">}</span>&nbsp;<span class="keyword" id="1703003">else</span>&nbsp;<span class="op" id="1703008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703012">uvdelta</span>&nbsp;<span class="op" id="1703020">&gt;&gt;=</span>&nbsp;<span class="num" id="1703024">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703030">vdelta</span>&nbsp;<span class="op" id="1703037">:=</span>&nbsp;<span class="builtintype" id="1703040">int32</span><span class="op" id="1703045">(</span><span class="ident" id="1703046">uvdelta</span><span class="op" id="1703053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703056">p</span><span class="op" id="1703057">,</span>&nbsp;<span class="ident" id="1703059">pcdelta</span>&nbsp;<span class="op" id="1703067">:=</span>&nbsp;<span class="ident" id="1703070">readvarint</span><span class="op" id="1703080">(</span><span class="ident" id="1703081">p</span><span class="op" id="1703082">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703085">*</span><span class="ident" id="1703086">pc</span>&nbsp;<span class="op" id="1703089">+=</span>&nbsp;<span class="builtintype" id="1703092">uintptr</span><span class="op" id="1703099">(</span><span class="ident" id="1703100">pcdelta</span>&nbsp;<span class="op" id="1703108">*</span>&nbsp;<span class="ident" id="1703110">_PCQuantum</span><span class="op" id="1703120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703123">*</span><span class="ident" id="1703124">val</span>&nbsp;<span class="op" id="1703128">+=</span>&nbsp;<span class="ident" id="1703131">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703139">return</span>&nbsp;<span class="ident" id="1703146">p</span><span class="op" id="1703147">,</span>&nbsp;<span class="builtintype" id="1703149">true</span><br>
<span class="lineno"></span><span class="op" id="1703154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1703157">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1703194">func</span>&nbsp;<span class="ident" id="1703199">readvarint</span><span class="op" id="1703209">(</span><span class="ident" id="1703210">p</span>&nbsp;<span class="op" id="1703212">[</span><span class="op" id="1703213">]</span><span class="builtintype" id="1703214">byte</span><span class="op" id="1703218">)</span>&nbsp;<span class="op" id="1703220">(</span><span class="ident" id="1703221">newp</span>&nbsp;<span class="op" id="1703226">[</span><span class="op" id="1703227">]</span><span class="builtintype" id="1703228">byte</span><span class="op" id="1703232">,</span>&nbsp;<span class="ident" id="1703234">val</span>&nbsp;<span class="builtintype" id="1703238">uint32</span><span class="op" id="1703244">)</span>&nbsp;<span class="op" id="1703246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703249">var</span>&nbsp;<span class="ident" id="1703253">v</span><span class="op" id="1703254">,</span>&nbsp;<span class="ident" id="1703256">shift</span>&nbsp;<span class="builtintype" id="1703262">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703270">for</span>&nbsp;<span class="op" id="1703274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703278">b</span>&nbsp;<span class="op" id="1703280">:=</span>&nbsp;<span class="ident" id="1703283">p</span><span class="op" id="1703284">[</span><span class="num" id="1703285">0</span><span class="op" id="1703286">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703290">p</span>&nbsp;<span class="op" id="1703292">=</span>&nbsp;<span class="ident" id="1703294">p</span><span class="op" id="1703295">[</span><span class="num" id="1703296">1</span><span class="op" id="1703297">:</span><span class="op" id="1703298">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703302">v</span>&nbsp;<span class="op" id="1703304">|=</span>&nbsp;<span class="op" id="1703307">(</span><span class="builtintype" id="1703308">uint32</span><span class="op" id="1703314">(</span><span class="ident" id="1703315">b</span><span class="op" id="1703316">)</span>&nbsp;<span class="op" id="1703318">&amp;</span>&nbsp;<span class="num" id="1703320">0x7F</span><span class="op" id="1703324">)</span>&nbsp;<span class="op" id="1703326">&lt;&lt;</span>&nbsp;<span class="ident" id="1703329">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703337">if</span>&nbsp;<span class="ident" id="1703340">b</span><span class="op" id="1703341">&amp;</span><span class="num" id="1703342">0x80</span>&nbsp;<span class="op" id="1703347">==</span>&nbsp;<span class="num" id="1703350">0</span>&nbsp;<span class="op" id="1703352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703357">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703365">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1703369">shift</span>&nbsp;<span class="op" id="1703375">+=</span>&nbsp;<span class="num" id="1703378">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1703381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1703384">return</span>&nbsp;<span class="ident" id="1703391">p</span><span class="op" id="1703392">,</span>&nbsp;<span class="ident" id="1703394">v</span><br>
<span class="lineno"></span><span class="op" id="1703396">}</span>
</div>
</body>
</html>
