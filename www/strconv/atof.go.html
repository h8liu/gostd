<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2946469">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2946524">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2946578">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2946629">//&nbsp;Package&nbsp;strconv&nbsp;implements&nbsp;conversions&nbsp;to&nbsp;and&nbsp;from&nbsp;string&nbsp;representations</span><br>
<span class="lineno"></span><span class="comment" id="2946706">//&nbsp;of&nbsp;basic&nbsp;data&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2946730">package</span>&nbsp;<span class="ident" id="2946738">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946747">//&nbsp;decimal&nbsp;to&nbsp;binary&nbsp;floating&nbsp;point&nbsp;conversion.</span><br>
<span class="lineno">10</span><span class="comment" id="2946795">//&nbsp;Algorithm:</span><br>
<span class="lineno"></span><span class="comment" id="2946809">//&nbsp;&nbsp;&nbsp;1)&nbsp;Store&nbsp;input&nbsp;in&nbsp;multiprecision&nbsp;decimal.</span><br>
<span class="lineno"></span><span class="comment" id="2946856">//&nbsp;&nbsp;&nbsp;2)&nbsp;Multiply/divide&nbsp;decimal&nbsp;by&nbsp;powers&nbsp;of&nbsp;two&nbsp;until&nbsp;in&nbsp;range&nbsp;[0.5,&nbsp;1)</span><br>
<span class="lineno"></span><span class="comment" id="2946929">//&nbsp;&nbsp;&nbsp;3)&nbsp;Multiply&nbsp;by&nbsp;2^precision&nbsp;and&nbsp;round&nbsp;to&nbsp;get&nbsp;mantissa.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="2946989">import</span>&nbsp;<span class="string" id="2946996">&#34;math&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2947004">var</span>&nbsp;<span class="ident" id="2947008">optimize</span>&nbsp;<span class="op" id="2947017">=</span>&nbsp;<span class="builtintype" id="2947019">true</span>&nbsp;<span class="comment" id="2947024">//&nbsp;can&nbsp;change&nbsp;for&nbsp;testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2947051">func</span>&nbsp;<span class="ident" id="2947056">equalIgnoreCase</span><span class="op" id="2947071">(</span><span class="ident" id="2947072">s1</span><span class="op" id="2947074">,</span>&nbsp;<span class="ident" id="2947076">s2</span>&nbsp;<span class="builtintype" id="2947079">string</span><span class="op" id="2947085">)</span>&nbsp;<span class="builtintype" id="2947087">bool</span>&nbsp;<span class="op" id="2947092">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947095">if</span>&nbsp;<span class="builtinfunc" id="2947098">len</span><span class="op" id="2947101">(</span><span class="ident" id="2947102"><a href="/strconv/atof.go.html#2947072">s1</a></span><span class="op" id="2947104">)</span>&nbsp;<span class="op" id="2947106">!=</span>&nbsp;<span class="builtinfunc" id="2947109">len</span><span class="op" id="2947112">(</span><span class="ident" id="2947113"><a href="/strconv/atof.go.html#2947076">s2</a></span><span class="op" id="2947115">)</span>&nbsp;<span class="op" id="2947117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947121">return</span>&nbsp;<span class="builtintype" id="2947128">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947138">for</span>&nbsp;<span class="ident" id="2947142">i</span>&nbsp;<span class="op" id="2947144">:=</span>&nbsp;<span class="num" id="2947147">0</span><span class="op" id="2947148">;</span>&nbsp;<span class="ident" id="2947150"><a href="/strconv/atof.go.html#2947142">i</a></span>&nbsp;<span class="op" id="2947152">&lt;</span>&nbsp;<span class="builtinfunc" id="2947154">len</span><span class="op" id="2947157">(</span><span class="ident" id="2947158"><a href="/strconv/atof.go.html#2947072">s1</a></span><span class="op" id="2947160">)</span><span class="op" id="2947161">;</span>&nbsp;<span class="ident" id="2947163"><a href="/strconv/atof.go.html#2947142">i</a></span><span class="op" id="2947164">++</span>&nbsp;<span class="op" id="2947167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947171">c1</span>&nbsp;<span class="op" id="2947174">:=</span>&nbsp;<span class="ident" id="2947177"><a href="/strconv/atof.go.html#2947072">s1</a></span><span class="op" id="2947179">[</span><span class="ident" id="2947180"><a href="/strconv/atof.go.html#2947142">i</a></span><span class="op" id="2947181">]</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947185">if</span>&nbsp;<span class="string" id="2947188">&#39;A&#39;</span>&nbsp;<span class="op" id="2947192">&lt;=</span>&nbsp;<span class="ident" id="2947195"><a href="/strconv/atof.go.html#2947171">c1</a></span>&nbsp;<span class="op" id="2947198">&amp;&amp;</span>&nbsp;<span class="ident" id="2947201"><a href="/strconv/atof.go.html#2947171">c1</a></span>&nbsp;<span class="op" id="2947204">&lt;=</span>&nbsp;<span class="string" id="2947207">&#39;Z&#39;</span>&nbsp;<span class="op" id="2947211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947216"><a href="/strconv/atof.go.html#2947171">c1</a></span>&nbsp;<span class="op" id="2947219">+=</span>&nbsp;<span class="string" id="2947222">&#39;a&#39;</span>&nbsp;<span class="op" id="2947226">-</span>&nbsp;<span class="string" id="2947228">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947238">c2</span>&nbsp;<span class="op" id="2947241">:=</span>&nbsp;<span class="ident" id="2947244"><a href="/strconv/atof.go.html#2947076">s2</a></span><span class="op" id="2947246">[</span><span class="ident" id="2947247"><a href="/strconv/atof.go.html#2947142">i</a></span><span class="op" id="2947248">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947252">if</span>&nbsp;<span class="string" id="2947255">&#39;A&#39;</span>&nbsp;<span class="op" id="2947259">&lt;=</span>&nbsp;<span class="ident" id="2947262"><a href="/strconv/atof.go.html#2947238">c2</a></span>&nbsp;<span class="op" id="2947265">&amp;&amp;</span>&nbsp;<span class="ident" id="2947268"><a href="/strconv/atof.go.html#2947238">c2</a></span>&nbsp;<span class="op" id="2947271">&lt;=</span>&nbsp;<span class="string" id="2947274">&#39;Z&#39;</span>&nbsp;<span class="op" id="2947278">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947283"><a href="/strconv/atof.go.html#2947238">c2</a></span>&nbsp;<span class="op" id="2947286">+=</span>&nbsp;<span class="string" id="2947289">&#39;a&#39;</span>&nbsp;<span class="op" id="2947293">-</span>&nbsp;<span class="string" id="2947295">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947305">if</span>&nbsp;<span class="ident" id="2947308"><a href="/strconv/atof.go.html#2947171">c1</a></span>&nbsp;<span class="op" id="2947311">!=</span>&nbsp;<span class="ident" id="2947314"><a href="/strconv/atof.go.html#2947238">c2</a></span>&nbsp;<span class="op" id="2947317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947322">return</span>&nbsp;<span class="builtintype" id="2947329">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947337">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947343">return</span>&nbsp;<span class="builtintype" id="2947350">true</span><br>
<span class="lineno"></span><span class="op" id="2947355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2947358">func</span>&nbsp;<span class="ident" id="2947363">special</span><span class="op" id="2947370">(</span><span class="ident" id="2947371">s</span>&nbsp;<span class="builtintype" id="2947373">string</span><span class="op" id="2947379">)</span>&nbsp;<span class="op" id="2947381">(</span><span class="ident" id="2947382">f</span>&nbsp;<span class="builtintype" id="2947384">float64</span><span class="op" id="2947391">,</span>&nbsp;<span class="ident" id="2947393">ok</span>&nbsp;<span class="builtintype" id="2947396">bool</span><span class="op" id="2947400">)</span>&nbsp;<span class="op" id="2947402">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947405">if</span>&nbsp;<span class="builtinfunc" id="2947408">len</span><span class="op" id="2947411">(</span><span class="ident" id="2947412"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947413">)</span>&nbsp;<span class="op" id="2947415">==</span>&nbsp;<span class="num" id="2947418">0</span>&nbsp;<span class="op" id="2947420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947424">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947435">switch</span>&nbsp;<span class="ident" id="2947442"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947443">[</span><span class="num" id="2947444">0</span><span class="op" id="2947445">]</span>&nbsp;<span class="op" id="2947447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947450">default</span><span class="op" id="2947457">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947461">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947469">case</span>&nbsp;<span class="string" id="2947474">&#39;+&#39;</span><span class="op" id="2947477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947481">if</span>&nbsp;<span class="ident" id="2947484"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947499">(</span><span class="ident" id="2947500"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947501">,</span>&nbsp;<span class="string" id="2947503">&#34;+inf&#34;</span><span class="op" id="2947509">)</span>&nbsp;<span class="op" id="2947511">||</span>&nbsp;<span class="ident" id="2947514"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947529">(</span><span class="ident" id="2947530"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947531">,</span>&nbsp;<span class="string" id="2947533">&#34;+infinity&#34;</span><span class="op" id="2947544">)</span>&nbsp;<span class="op" id="2947546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947551">return</span>&nbsp;<span class="ident" id="2947558"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2947562">.</span><span class="ident" id="2947563">Inf</span><span class="op" id="2947566">(</span><span class="num" id="2947567">1</span><span class="op" id="2947568">)</span><span class="op" id="2947569">,</span>&nbsp;<span class="builtintype" id="2947571">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947578">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947581">case</span>&nbsp;<span class="string" id="2947586">&#39;-&#39;</span><span class="op" id="2947589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947593">if</span>&nbsp;<span class="ident" id="2947596"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947611">(</span><span class="ident" id="2947612"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947613">,</span>&nbsp;<span class="string" id="2947615">&#34;-inf&#34;</span><span class="op" id="2947621">)</span>&nbsp;<span class="op" id="2947623">||</span>&nbsp;<span class="ident" id="2947626"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947641">(</span><span class="ident" id="2947642"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947643">,</span>&nbsp;<span class="string" id="2947645">&#34;-infinity&#34;</span><span class="op" id="2947656">)</span>&nbsp;<span class="op" id="2947658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947663">return</span>&nbsp;<span class="ident" id="2947670"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2947674">.</span><span class="ident" id="2947675">Inf</span><span class="op" id="2947678">(</span><span class="op" id="2947679">-</span><span class="num" id="2947680">1</span><span class="op" id="2947681">)</span><span class="op" id="2947682">,</span>&nbsp;<span class="builtintype" id="2947684">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947694">case</span>&nbsp;<span class="string" id="2947699">&#39;n&#39;</span><span class="op" id="2947702">,</span>&nbsp;<span class="string" id="2947704">&#39;N&#39;</span><span class="op" id="2947707">:</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947711">if</span>&nbsp;<span class="ident" id="2947714"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947729">(</span><span class="ident" id="2947730"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947731">,</span>&nbsp;<span class="string" id="2947733">&#34;nan&#34;</span><span class="op" id="2947738">)</span>&nbsp;<span class="op" id="2947740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947745">return</span>&nbsp;<span class="ident" id="2947752"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2947756">.</span><span class="ident" id="2947757">NaN</span><span class="op" id="2947760">(</span><span class="op" id="2947761">)</span><span class="op" id="2947762">,</span>&nbsp;<span class="builtintype" id="2947764">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947774">case</span>&nbsp;<span class="string" id="2947779">&#39;i&#39;</span><span class="op" id="2947782">,</span>&nbsp;<span class="string" id="2947784">&#39;I&#39;</span><span class="op" id="2947787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947791">if</span>&nbsp;<span class="ident" id="2947794"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947809">(</span><span class="ident" id="2947810"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947811">,</span>&nbsp;<span class="string" id="2947813">&#34;inf&#34;</span><span class="op" id="2947818">)</span>&nbsp;<span class="op" id="2947820">||</span>&nbsp;<span class="ident" id="2947823"><a href="/strconv/atof.go.html#2947056">equalIgnoreCase</a></span><span class="op" id="2947838">(</span><span class="ident" id="2947839"><a href="/strconv/atof.go.html#2947371">s</a></span><span class="op" id="2947840">,</span>&nbsp;<span class="string" id="2947842">&#34;infinity&#34;</span><span class="op" id="2947852">)</span>&nbsp;<span class="op" id="2947854">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947859">return</span>&nbsp;<span class="ident" id="2947866"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2947870">.</span><span class="ident" id="2947871">Inf</span><span class="op" id="2947874">(</span><span class="num" id="2947875">1</span><span class="op" id="2947876">)</span><span class="op" id="2947877">,</span>&nbsp;<span class="builtintype" id="2947879">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947892">return</span><br>
<span class="lineno"></span><span class="op" id="2947899">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="2947902">func</span>&nbsp;<span class="op" id="2947907">(</span><span class="ident" id="2947908">b</span>&nbsp;<span class="op" id="2947910">*</span><span class="ident" id="2947911"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2947918">)</span>&nbsp;<span class="ident" id="2947920">set</span><span class="op" id="2947923">(</span><span class="ident" id="2947924">s</span>&nbsp;<span class="builtintype" id="2947926">string</span><span class="op" id="2947932">)</span>&nbsp;<span class="op" id="2947934">(</span><span class="ident" id="2947935">ok</span>&nbsp;<span class="builtintype" id="2947938">bool</span><span class="op" id="2947942">)</span>&nbsp;<span class="op" id="2947944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947947">i</span>&nbsp;<span class="op" id="2947949">:=</span>&nbsp;<span class="num" id="2947952">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947955"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2947956">.</span><span class="ident" id="2947957">neg</span>&nbsp;<span class="op" id="2947961">=</span>&nbsp;<span class="builtintype" id="2947963">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947970"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2947971">.</span><span class="ident" id="2947972">trunc</span>&nbsp;<span class="op" id="2947978">=</span>&nbsp;<span class="builtintype" id="2947980">false</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947988">//&nbsp;optional&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948006">if</span>&nbsp;<span class="ident" id="2948009"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2948011">&gt;=</span>&nbsp;<span class="builtinfunc" id="2948014">len</span><span class="op" id="2948017">(</span><span class="ident" id="2948018"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948019">)</span>&nbsp;<span class="op" id="2948021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948025">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948033">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948036">switch</span>&nbsp;<span class="op" id="2948043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948046">case</span>&nbsp;<span class="ident" id="2948051"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948052">[</span><span class="ident" id="2948053"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948054">]</span>&nbsp;<span class="op" id="2948056">==</span>&nbsp;<span class="string" id="2948059">&#39;+&#39;</span><span class="op" id="2948062">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948066"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948067">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948071">case</span>&nbsp;<span class="ident" id="2948076"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948077">[</span><span class="ident" id="2948078"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948079">]</span>&nbsp;<span class="op" id="2948081">==</span>&nbsp;<span class="string" id="2948084">&#39;-&#39;</span><span class="op" id="2948087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948091"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948092">.</span><span class="ident" id="2948093">neg</span>&nbsp;<span class="op" id="2948097">=</span>&nbsp;<span class="builtintype" id="2948099">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948106"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948107">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948115">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948126">sawdot</span>&nbsp;<span class="op" id="2948133">:=</span>&nbsp;<span class="builtintype" id="2948136">false</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948143">sawdigits</span>&nbsp;<span class="op" id="2948153">:=</span>&nbsp;<span class="builtintype" id="2948156">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948163">for</span>&nbsp;<span class="op" id="2948167">;</span>&nbsp;<span class="ident" id="2948169"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2948171">&lt;</span>&nbsp;<span class="builtinfunc" id="2948173">len</span><span class="op" id="2948176">(</span><span class="ident" id="2948177"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948178">)</span><span class="op" id="2948179">;</span>&nbsp;<span class="ident" id="2948181"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948182">++</span>&nbsp;<span class="op" id="2948185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948189">switch</span>&nbsp;<span class="op" id="2948196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948200">case</span>&nbsp;<span class="ident" id="2948205"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948206">[</span><span class="ident" id="2948207"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948208">]</span>&nbsp;<span class="op" id="2948210">==</span>&nbsp;<span class="string" id="2948213">&#39;.&#39;</span><span class="op" id="2948216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948221">if</span>&nbsp;<span class="ident" id="2948224"><a href="/strconv/atof.go.html#2948126">sawdot</a></span>&nbsp;<span class="op" id="2948231">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948237">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948252"><a href="/strconv/atof.go.html#2948126">sawdot</a></span>&nbsp;<span class="op" id="2948259">=</span>&nbsp;<span class="builtintype" id="2948261">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948269"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948270">.</span><span class="ident" id="2948271">dp</span>&nbsp;<span class="op" id="2948274">=</span>&nbsp;<span class="ident" id="2948276"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948277">.</span><span class="ident" id="2948278">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948284">continue</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948296">case</span>&nbsp;<span class="string" id="2948301">&#39;0&#39;</span>&nbsp;<span class="op" id="2948305">&lt;=</span>&nbsp;<span class="ident" id="2948308"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948309">[</span><span class="ident" id="2948310"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948311">]</span>&nbsp;<span class="op" id="2948313">&amp;&amp;</span>&nbsp;<span class="ident" id="2948316"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948317">[</span><span class="ident" id="2948318"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948319">]</span>&nbsp;<span class="op" id="2948321">&lt;=</span>&nbsp;<span class="string" id="2948324">&#39;9&#39;</span><span class="op" id="2948327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948332"><a href="/strconv/atof.go.html#2948143">sawdigits</a></span>&nbsp;<span class="op" id="2948342">=</span>&nbsp;<span class="builtintype" id="2948344">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948352">if</span>&nbsp;<span class="ident" id="2948355"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948356">[</span><span class="ident" id="2948357"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948358">]</span>&nbsp;<span class="op" id="2948360">==</span>&nbsp;<span class="string" id="2948363">&#39;0&#39;</span>&nbsp;<span class="op" id="2948367">&amp;&amp;</span>&nbsp;<span class="ident" id="2948370"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948371">.</span><span class="ident" id="2948372">nd</span>&nbsp;<span class="op" id="2948375">==</span>&nbsp;<span class="num" id="2948378">0</span>&nbsp;<span class="op" id="2948380">{</span>&nbsp;<span class="comment" id="2948382">//&nbsp;ignore&nbsp;leading&nbsp;zeros</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948410"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948411">.</span><span class="ident" id="2948412">dp</span><span class="op" id="2948414">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948421">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948438">if</span>&nbsp;<span class="ident" id="2948441"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948442">.</span><span class="ident" id="2948443">nd</span>&nbsp;<span class="op" id="2948446">&lt;</span>&nbsp;<span class="builtinfunc" id="2948448">len</span><span class="op" id="2948451">(</span><span class="ident" id="2948452"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948453">.</span><span class="ident" id="2948454">d</span><span class="op" id="2948455">)</span>&nbsp;<span class="op" id="2948457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948463"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948464">.</span><span class="ident" id="2948465">d</span><span class="op" id="2948466">[</span><span class="ident" id="2948467"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948468">.</span><span class="ident" id="2948469">nd</span><span class="op" id="2948471">]</span>&nbsp;<span class="op" id="2948473">=</span>&nbsp;<span class="ident" id="2948475"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948476">[</span><span class="ident" id="2948477"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948484"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948485">.</span><span class="ident" id="2948486">nd</span><span class="op" id="2948488">++</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948494">}</span>&nbsp;<span class="keyword" id="2948496">else</span>&nbsp;<span class="keyword" id="2948501">if</span>&nbsp;<span class="ident" id="2948504"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948505">[</span><span class="ident" id="2948506"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948507">]</span>&nbsp;<span class="op" id="2948509">!=</span>&nbsp;<span class="string" id="2948512">&#39;0&#39;</span>&nbsp;<span class="op" id="2948516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948522"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948523">.</span><span class="ident" id="2948524">trunc</span>&nbsp;<span class="op" id="2948530">=</span>&nbsp;<span class="builtintype" id="2948532">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948545">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948556">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948560">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948570">if</span>&nbsp;<span class="op" id="2948573">!</span><span class="ident" id="2948574"><a href="/strconv/atof.go.html#2948143">sawdigits</a></span>&nbsp;<span class="op" id="2948584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948588">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948596">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948599">if</span>&nbsp;<span class="op" id="2948602">!</span><span class="ident" id="2948603"><a href="/strconv/atof.go.html#2948126">sawdot</a></span>&nbsp;<span class="op" id="2948610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948614"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948615">.</span><span class="ident" id="2948616">dp</span>&nbsp;<span class="op" id="2948619">=</span>&nbsp;<span class="ident" id="2948621"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2948622">.</span><span class="ident" id="2948623">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948631">//&nbsp;optional&nbsp;exponent&nbsp;moves&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948674">//&nbsp;if&nbsp;we&nbsp;read&nbsp;a&nbsp;very&nbsp;large,&nbsp;very&nbsp;long&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948721">//&nbsp;just&nbsp;be&nbsp;sure&nbsp;to&nbsp;move&nbsp;the&nbsp;decimal&nbsp;point&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948767">//&nbsp;a&nbsp;lot&nbsp;(say,&nbsp;100000).&nbsp;&nbsp;it&nbsp;doesn&#39;t&nbsp;matter&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948819">//&nbsp;not&nbsp;the&nbsp;exact&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948845">if</span>&nbsp;<span class="ident" id="2948848"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2948850">&lt;</span>&nbsp;<span class="builtinfunc" id="2948852">len</span><span class="op" id="2948855">(</span><span class="ident" id="2948856"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948857">)</span>&nbsp;<span class="op" id="2948859">&amp;&amp;</span>&nbsp;<span class="op" id="2948862">(</span><span class="ident" id="2948863"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948864">[</span><span class="ident" id="2948865"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948866">]</span>&nbsp;<span class="op" id="2948868">==</span>&nbsp;<span class="string" id="2948871">&#39;e&#39;</span>&nbsp;<span class="op" id="2948875">||</span>&nbsp;<span class="ident" id="2948878"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948879">[</span><span class="ident" id="2948880"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948881">]</span>&nbsp;<span class="op" id="2948883">==</span>&nbsp;<span class="string" id="2948886">&#39;E&#39;</span><span class="op" id="2948889">)</span>&nbsp;<span class="op" id="2948891">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948895"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948896">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948901">if</span>&nbsp;<span class="ident" id="2948904"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2948906">&gt;=</span>&nbsp;<span class="builtinfunc" id="2948909">len</span><span class="op" id="2948912">(</span><span class="ident" id="2948913"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948914">)</span>&nbsp;<span class="op" id="2948916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948921">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948934">esign</span>&nbsp;<span class="op" id="2948940">:=</span>&nbsp;<span class="num" id="2948943">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948947">if</span>&nbsp;<span class="ident" id="2948950"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948951">[</span><span class="ident" id="2948952"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948953">]</span>&nbsp;<span class="op" id="2948955">==</span>&nbsp;<span class="string" id="2948958">&#39;+&#39;</span>&nbsp;<span class="op" id="2948962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948967"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948968">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948973">}</span>&nbsp;<span class="keyword" id="2948975">else</span>&nbsp;<span class="keyword" id="2948980">if</span>&nbsp;<span class="ident" id="2948983"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2948984">[</span><span class="ident" id="2948985"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2948986">]</span>&nbsp;<span class="op" id="2948988">==</span>&nbsp;<span class="string" id="2948991">&#39;-&#39;</span>&nbsp;<span class="op" id="2948995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949000"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949001">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949007"><a href="/strconv/atof.go.html#2948934">esign</a></span>&nbsp;<span class="op" id="2949013">=</span>&nbsp;<span class="op" id="2949015">-</span><span class="num" id="2949016">1</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949024">if</span>&nbsp;<span class="ident" id="2949027"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2949029">&gt;=</span>&nbsp;<span class="builtinfunc" id="2949032">len</span><span class="op" id="2949035">(</span><span class="ident" id="2949036"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949037">)</span>&nbsp;<span class="op" id="2949039">||</span>&nbsp;<span class="ident" id="2949042"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949043">[</span><span class="ident" id="2949044"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949045">]</span>&nbsp;<span class="op" id="2949047">&lt;</span>&nbsp;<span class="string" id="2949049">&#39;0&#39;</span>&nbsp;<span class="op" id="2949053">||</span>&nbsp;<span class="ident" id="2949056"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949057">[</span><span class="ident" id="2949058"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949059">]</span>&nbsp;<span class="op" id="2949061">&gt;</span>&nbsp;<span class="string" id="2949063">&#39;9&#39;</span>&nbsp;<span class="op" id="2949067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949072">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949085">e</span>&nbsp;<span class="op" id="2949087">:=</span>&nbsp;<span class="num" id="2949090">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949094">for</span>&nbsp;<span class="op" id="2949098">;</span>&nbsp;<span class="ident" id="2949100"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2949102">&lt;</span>&nbsp;<span class="builtinfunc" id="2949104">len</span><span class="op" id="2949107">(</span><span class="ident" id="2949108"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949109">)</span>&nbsp;<span class="op" id="2949111">&amp;&amp;</span>&nbsp;<span class="string" id="2949114">&#39;0&#39;</span>&nbsp;<span class="op" id="2949118">&lt;=</span>&nbsp;<span class="ident" id="2949121"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949122">[</span><span class="ident" id="2949123"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949124">]</span>&nbsp;<span class="op" id="2949126">&amp;&amp;</span>&nbsp;<span class="ident" id="2949129"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949130">[</span><span class="ident" id="2949131"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949132">]</span>&nbsp;<span class="op" id="2949134">&lt;=</span>&nbsp;<span class="string" id="2949137">&#39;9&#39;</span><span class="op" id="2949140">;</span>&nbsp;<span class="ident" id="2949142"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949143">++</span>&nbsp;<span class="op" id="2949146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949151">if</span>&nbsp;<span class="ident" id="2949154"><a href="/strconv/atof.go.html#2949085">e</a></span>&nbsp;<span class="op" id="2949156">&lt;</span>&nbsp;<span class="num" id="2949158">10000</span>&nbsp;<span class="op" id="2949164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949170"><a href="/strconv/atof.go.html#2949085">e</a></span>&nbsp;<span class="op" id="2949172">=</span>&nbsp;<span class="ident" id="2949174"><a href="/strconv/atof.go.html#2949085">e</a></span><span class="op" id="2949175">*</span><span class="num" id="2949176">10</span>&nbsp;<span class="op" id="2949179">+</span>&nbsp;<span class="builtintype" id="2949181">int</span><span class="op" id="2949184">(</span><span class="ident" id="2949185"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949186">[</span><span class="ident" id="2949187"><a href="/strconv/atof.go.html#2947947">i</a></span><span class="op" id="2949188">]</span><span class="op" id="2949189">)</span>&nbsp;<span class="op" id="2949191">-</span>&nbsp;<span class="string" id="2949193">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949204">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949208"><a href="/strconv/atof.go.html#2947908">b</a></span><span class="op" id="2949209">.</span><span class="ident" id="2949210">dp</span>&nbsp;<span class="op" id="2949213">+=</span>&nbsp;<span class="ident" id="2949216"><a href="/strconv/atof.go.html#2949085">e</a></span>&nbsp;<span class="op" id="2949218">*</span>&nbsp;<span class="ident" id="2949220"><a href="/strconv/atof.go.html#2948934">esign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949231">if</span>&nbsp;<span class="ident" id="2949234"><a href="/strconv/atof.go.html#2947947">i</a></span>&nbsp;<span class="op" id="2949236">!=</span>&nbsp;<span class="builtinfunc" id="2949239">len</span><span class="op" id="2949242">(</span><span class="ident" id="2949243"><a href="/strconv/atof.go.html#2947924">s</a></span><span class="op" id="2949244">)</span>&nbsp;<span class="op" id="2949246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949250">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949262"><a href="/strconv/atof.go.html#2947935">ok</a></span>&nbsp;<span class="op" id="2949265">=</span>&nbsp;<span class="builtintype" id="2949267">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949273">return</span><br>
<span class="lineno"></span><span class="op" id="2949280">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2949283">//&nbsp;readFloat&nbsp;reads&nbsp;a&nbsp;decimal&nbsp;mantissa&nbsp;and&nbsp;exponent&nbsp;from&nbsp;a&nbsp;float</span><br>
<span class="lineno"></span><span class="comment" id="2949347">//&nbsp;string&nbsp;representation.&nbsp;It&nbsp;sets&nbsp;ok&nbsp;to&nbsp;false&nbsp;if&nbsp;the&nbsp;number&nbsp;could</span><br>
<span class="lineno"></span><span class="comment" id="2949413">//&nbsp;not&nbsp;fit&nbsp;return&nbsp;types&nbsp;or&nbsp;is&nbsp;invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2949452">func</span>&nbsp;<span class="ident" id="2949457">readFloat</span><span class="op" id="2949466">(</span><span class="ident" id="2949467">s</span>&nbsp;<span class="builtintype" id="2949469">string</span><span class="op" id="2949475">)</span>&nbsp;<span class="op" id="2949477">(</span><span class="ident" id="2949478">mantissa</span>&nbsp;<span class="ident" id="2949487">uint64</span><span class="op" id="2949493">,</span>&nbsp;<span class="ident" id="2949495">exp</span>&nbsp;<span class="builtintype" id="2949499">int</span><span class="op" id="2949502">,</span>&nbsp;<span class="ident" id="2949504">neg</span><span class="op" id="2949507">,</span>&nbsp;<span class="ident" id="2949509">trunc</span><span class="op" id="2949514">,</span>&nbsp;<span class="ident" id="2949516">ok</span>&nbsp;<span class="builtintype" id="2949519">bool</span><span class="op" id="2949523">)</span>&nbsp;<span class="op" id="2949525">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949528">const</span>&nbsp;<span class="ident" id="2949534">uint64digits</span>&nbsp;<span class="op" id="2949547">=</span>&nbsp;<span class="num" id="2949549">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949553">i</span>&nbsp;<span class="op" id="2949555">:=</span>&nbsp;<span class="num" id="2949558">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949562">//&nbsp;optional&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949580">if</span>&nbsp;<span class="ident" id="2949583"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2949585">&gt;=</span>&nbsp;<span class="builtinfunc" id="2949588">len</span><span class="op" id="2949591">(</span><span class="ident" id="2949592"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2949593">)</span>&nbsp;<span class="op" id="2949595">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949599">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949610">switch</span>&nbsp;<span class="op" id="2949617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949620">case</span>&nbsp;<span class="ident" id="2949625"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2949626">[</span><span class="ident" id="2949627"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949628">]</span>&nbsp;<span class="op" id="2949630">==</span>&nbsp;<span class="string" id="2949633">&#39;+&#39;</span><span class="op" id="2949636">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949640"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949641">++</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949645">case</span>&nbsp;<span class="ident" id="2949650"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2949651">[</span><span class="ident" id="2949652"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949653">]</span>&nbsp;<span class="op" id="2949655">==</span>&nbsp;<span class="string" id="2949658">&#39;-&#39;</span><span class="op" id="2949661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949665"><a href="/strconv/atof.go.html#2949504">neg</a></span>&nbsp;<span class="op" id="2949669">=</span>&nbsp;<span class="builtintype" id="2949671">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949678"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949679">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949687">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949698">sawdot</span>&nbsp;<span class="op" id="2949705">:=</span>&nbsp;<span class="builtintype" id="2949708">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949715">sawdigits</span>&nbsp;<span class="op" id="2949725">:=</span>&nbsp;<span class="builtintype" id="2949728">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949735">nd</span>&nbsp;<span class="op" id="2949738">:=</span>&nbsp;<span class="num" id="2949741">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949744">ndMant</span>&nbsp;<span class="op" id="2949751">:=</span>&nbsp;<span class="num" id="2949754">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949757">dp</span>&nbsp;<span class="op" id="2949760">:=</span>&nbsp;<span class="num" id="2949763">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949766">for</span>&nbsp;<span class="op" id="2949770">;</span>&nbsp;<span class="ident" id="2949772"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2949774">&lt;</span>&nbsp;<span class="builtinfunc" id="2949776">len</span><span class="op" id="2949779">(</span><span class="ident" id="2949780"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2949781">)</span><span class="op" id="2949782">;</span>&nbsp;<span class="ident" id="2949784"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949785">++</span>&nbsp;<span class="op" id="2949788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949792">switch</span>&nbsp;<span class="ident" id="2949799">c</span>&nbsp;<span class="op" id="2949801">:=</span>&nbsp;<span class="ident" id="2949804"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2949805">[</span><span class="ident" id="2949806"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2949807">]</span><span class="op" id="2949808">;</span>&nbsp;<span class="builtintype" id="2949810">true</span>&nbsp;<span class="op" id="2949815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949819">case</span>&nbsp;<span class="ident" id="2949824"><a href="/strconv/atof.go.html#2949799">c</a></span>&nbsp;<span class="op" id="2949826">==</span>&nbsp;<span class="string" id="2949829">&#39;.&#39;</span><span class="op" id="2949832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949837">if</span>&nbsp;<span class="ident" id="2949840"><a href="/strconv/atof.go.html#2949698">sawdot</a></span>&nbsp;<span class="op" id="2949847">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949853">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949868"><a href="/strconv/atof.go.html#2949698">sawdot</a></span>&nbsp;<span class="op" id="2949875">=</span>&nbsp;<span class="builtintype" id="2949877">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949885"><a href="/strconv/atof.go.html#2949757">dp</a></span>&nbsp;<span class="op" id="2949888">=</span>&nbsp;<span class="ident" id="2949890"><a href="/strconv/atof.go.html#2949735">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949896">continue</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949908">case</span>&nbsp;<span class="string" id="2949913">&#39;0&#39;</span>&nbsp;<span class="op" id="2949917">&lt;=</span>&nbsp;<span class="ident" id="2949920"><a href="/strconv/atof.go.html#2949799">c</a></span>&nbsp;<span class="op" id="2949922">&amp;&amp;</span>&nbsp;<span class="ident" id="2949925"><a href="/strconv/atof.go.html#2949799">c</a></span>&nbsp;<span class="op" id="2949927">&lt;=</span>&nbsp;<span class="string" id="2949930">&#39;9&#39;</span><span class="op" id="2949933">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949938"><a href="/strconv/atof.go.html#2949715">sawdigits</a></span>&nbsp;<span class="op" id="2949948">=</span>&nbsp;<span class="builtintype" id="2949950">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949958">if</span>&nbsp;<span class="ident" id="2949961"><a href="/strconv/atof.go.html#2949799">c</a></span>&nbsp;<span class="op" id="2949963">==</span>&nbsp;<span class="string" id="2949966">&#39;0&#39;</span>&nbsp;<span class="op" id="2949970">&amp;&amp;</span>&nbsp;<span class="ident" id="2949973"><a href="/strconv/atof.go.html#2949735">nd</a></span>&nbsp;<span class="op" id="2949976">==</span>&nbsp;<span class="num" id="2949979">0</span>&nbsp;<span class="op" id="2949981">{</span>&nbsp;<span class="comment" id="2949983">//&nbsp;ignore&nbsp;leading&nbsp;zeros</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950011"><a href="/strconv/atof.go.html#2949757">dp</a></span><span class="op" id="2950013">--</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950020">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950037"><a href="/strconv/atof.go.html#2949735">nd</a></span><span class="op" id="2950039">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950045">if</span>&nbsp;<span class="ident" id="2950048"><a href="/strconv/atof.go.html#2949744">ndMant</a></span>&nbsp;<span class="op" id="2950055">&lt;</span>&nbsp;<span class="ident" id="2950057"><a href="/strconv/atof.go.html#2949534">uint64digits</a></span>&nbsp;<span class="op" id="2950070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950076"><a href="/strconv/atof.go.html#2949478">mantissa</a></span>&nbsp;<span class="op" id="2950085">*=</span>&nbsp;<span class="num" id="2950088">10</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950095"><a href="/strconv/atof.go.html#2949478">mantissa</a></span>&nbsp;<span class="op" id="2950104">+=</span>&nbsp;<span class="ident" id="2950107">uint64</span><span class="op" id="2950113">(</span><span class="ident" id="2950114"><a href="/strconv/atof.go.html#2949799">c</a></span>&nbsp;<span class="op" id="2950116">-</span>&nbsp;<span class="string" id="2950118">&#39;0&#39;</span><span class="op" id="2950121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950127"><a href="/strconv/atof.go.html#2949744">ndMant</a></span><span class="op" id="2950133">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950139">}</span>&nbsp;<span class="keyword" id="2950141">else</span>&nbsp;<span class="keyword" id="2950146">if</span>&nbsp;<span class="ident" id="2950149"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950150">[</span><span class="ident" id="2950151"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950152">]</span>&nbsp;<span class="op" id="2950154">!=</span>&nbsp;<span class="string" id="2950157">&#39;0&#39;</span>&nbsp;<span class="op" id="2950161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950167"><a href="/strconv/atof.go.html#2949509">trunc</a></span>&nbsp;<span class="op" id="2950173">=</span>&nbsp;<span class="builtintype" id="2950175">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950183">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950188">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950203">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950213">if</span>&nbsp;<span class="op" id="2950216">!</span><span class="ident" id="2950217"><a href="/strconv/atof.go.html#2949715">sawdigits</a></span>&nbsp;<span class="op" id="2950227">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950231">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950242">if</span>&nbsp;<span class="op" id="2950245">!</span><span class="ident" id="2950246"><a href="/strconv/atof.go.html#2949698">sawdot</a></span>&nbsp;<span class="op" id="2950253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950257"><a href="/strconv/atof.go.html#2949757">dp</a></span>&nbsp;<span class="op" id="2950260">=</span>&nbsp;<span class="ident" id="2950262"><a href="/strconv/atof.go.html#2949735">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950266">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950270">//&nbsp;optional&nbsp;exponent&nbsp;moves&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950313">//&nbsp;if&nbsp;we&nbsp;read&nbsp;a&nbsp;very&nbsp;large,&nbsp;very&nbsp;long&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950360">//&nbsp;just&nbsp;be&nbsp;sure&nbsp;to&nbsp;move&nbsp;the&nbsp;decimal&nbsp;point&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950406">//&nbsp;a&nbsp;lot&nbsp;(say,&nbsp;100000).&nbsp;&nbsp;it&nbsp;doesn&#39;t&nbsp;matter&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950458">//&nbsp;not&nbsp;the&nbsp;exact&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950484">if</span>&nbsp;<span class="ident" id="2950487"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2950489">&lt;</span>&nbsp;<span class="builtinfunc" id="2950491">len</span><span class="op" id="2950494">(</span><span class="ident" id="2950495"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950496">)</span>&nbsp;<span class="op" id="2950498">&amp;&amp;</span>&nbsp;<span class="op" id="2950501">(</span><span class="ident" id="2950502"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950503">[</span><span class="ident" id="2950504"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950505">]</span>&nbsp;<span class="op" id="2950507">==</span>&nbsp;<span class="string" id="2950510">&#39;e&#39;</span>&nbsp;<span class="op" id="2950514">||</span>&nbsp;<span class="ident" id="2950517"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950518">[</span><span class="ident" id="2950519"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950520">]</span>&nbsp;<span class="op" id="2950522">==</span>&nbsp;<span class="string" id="2950525">&#39;E&#39;</span><span class="op" id="2950528">)</span>&nbsp;<span class="op" id="2950530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950534"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950535">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950540">if</span>&nbsp;<span class="ident" id="2950543"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2950545">&gt;=</span>&nbsp;<span class="builtinfunc" id="2950548">len</span><span class="op" id="2950551">(</span><span class="ident" id="2950552"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950553">)</span>&nbsp;<span class="op" id="2950555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950560">return</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950573">esign</span>&nbsp;<span class="op" id="2950579">:=</span>&nbsp;<span class="num" id="2950582">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950586">if</span>&nbsp;<span class="ident" id="2950589"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950590">[</span><span class="ident" id="2950591"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950592">]</span>&nbsp;<span class="op" id="2950594">==</span>&nbsp;<span class="string" id="2950597">&#39;+&#39;</span>&nbsp;<span class="op" id="2950601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950606"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950607">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950612">}</span>&nbsp;<span class="keyword" id="2950614">else</span>&nbsp;<span class="keyword" id="2950619">if</span>&nbsp;<span class="ident" id="2950622"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950623">[</span><span class="ident" id="2950624"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950625">]</span>&nbsp;<span class="op" id="2950627">==</span>&nbsp;<span class="string" id="2950630">&#39;-&#39;</span>&nbsp;<span class="op" id="2950634">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950639"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950640">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950646"><a href="/strconv/atof.go.html#2950573">esign</a></span>&nbsp;<span class="op" id="2950652">=</span>&nbsp;<span class="op" id="2950654">-</span><span class="num" id="2950655">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950663">if</span>&nbsp;<span class="ident" id="2950666"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2950668">&gt;=</span>&nbsp;<span class="builtinfunc" id="2950671">len</span><span class="op" id="2950674">(</span><span class="ident" id="2950675"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950676">)</span>&nbsp;<span class="op" id="2950678">||</span>&nbsp;<span class="ident" id="2950681"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950682">[</span><span class="ident" id="2950683"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950684">]</span>&nbsp;<span class="op" id="2950686">&lt;</span>&nbsp;<span class="string" id="2950688">&#39;0&#39;</span>&nbsp;<span class="op" id="2950692">||</span>&nbsp;<span class="ident" id="2950695"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950696">[</span><span class="ident" id="2950697"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950698">]</span>&nbsp;<span class="op" id="2950700">&gt;</span>&nbsp;<span class="string" id="2950702">&#39;9&#39;</span>&nbsp;<span class="op" id="2950706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950711">return</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950724">e</span>&nbsp;<span class="op" id="2950726">:=</span>&nbsp;<span class="num" id="2950729">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950733">for</span>&nbsp;<span class="op" id="2950737">;</span>&nbsp;<span class="ident" id="2950739"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2950741">&lt;</span>&nbsp;<span class="builtinfunc" id="2950743">len</span><span class="op" id="2950746">(</span><span class="ident" id="2950747"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950748">)</span>&nbsp;<span class="op" id="2950750">&amp;&amp;</span>&nbsp;<span class="string" id="2950753">&#39;0&#39;</span>&nbsp;<span class="op" id="2950757">&lt;=</span>&nbsp;<span class="ident" id="2950760"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950761">[</span><span class="ident" id="2950762"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950763">]</span>&nbsp;<span class="op" id="2950765">&amp;&amp;</span>&nbsp;<span class="ident" id="2950768"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950769">[</span><span class="ident" id="2950770"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950771">]</span>&nbsp;<span class="op" id="2950773">&lt;=</span>&nbsp;<span class="string" id="2950776">&#39;9&#39;</span><span class="op" id="2950779">;</span>&nbsp;<span class="ident" id="2950781"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950782">++</span>&nbsp;<span class="op" id="2950785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950790">if</span>&nbsp;<span class="ident" id="2950793"><a href="/strconv/atof.go.html#2950724">e</a></span>&nbsp;<span class="op" id="2950795">&lt;</span>&nbsp;<span class="num" id="2950797">10000</span>&nbsp;<span class="op" id="2950803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950809"><a href="/strconv/atof.go.html#2950724">e</a></span>&nbsp;<span class="op" id="2950811">=</span>&nbsp;<span class="ident" id="2950813"><a href="/strconv/atof.go.html#2950724">e</a></span><span class="op" id="2950814">*</span><span class="num" id="2950815">10</span>&nbsp;<span class="op" id="2950818">+</span>&nbsp;<span class="builtintype" id="2950820">int</span><span class="op" id="2950823">(</span><span class="ident" id="2950824"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950825">[</span><span class="ident" id="2950826"><a href="/strconv/atof.go.html#2949553">i</a></span><span class="op" id="2950827">]</span><span class="op" id="2950828">)</span>&nbsp;<span class="op" id="2950830">-</span>&nbsp;<span class="string" id="2950832">&#39;0&#39;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950847"><a href="/strconv/atof.go.html#2949757">dp</a></span>&nbsp;<span class="op" id="2950850">+=</span>&nbsp;<span class="ident" id="2950853"><a href="/strconv/atof.go.html#2950724">e</a></span>&nbsp;<span class="op" id="2950855">*</span>&nbsp;<span class="ident" id="2950857"><a href="/strconv/atof.go.html#2950573">esign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950868">if</span>&nbsp;<span class="ident" id="2950871"><a href="/strconv/atof.go.html#2949553">i</a></span>&nbsp;<span class="op" id="2950873">!=</span>&nbsp;<span class="builtinfunc" id="2950876">len</span><span class="op" id="2950879">(</span><span class="ident" id="2950880"><a href="/strconv/atof.go.html#2949467">s</a></span><span class="op" id="2950881">)</span>&nbsp;<span class="op" id="2950883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950887">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950899"><a href="/strconv/atof.go.html#2949495">exp</a></span>&nbsp;<span class="op" id="2950903">=</span>&nbsp;<span class="ident" id="2950905"><a href="/strconv/atof.go.html#2949757">dp</a></span>&nbsp;<span class="op" id="2950908">-</span>&nbsp;<span class="ident" id="2950910"><a href="/strconv/atof.go.html#2949744">ndMant</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950918"><a href="/strconv/atof.go.html#2949516">ok</a></span>&nbsp;<span class="op" id="2950921">=</span>&nbsp;<span class="builtintype" id="2950923">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950929">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="2950937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="2950940">//&nbsp;decimal&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;binary&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2950988">var</span>&nbsp;<span class="ident" id="2950992">powtab</span>&nbsp;<span class="op" id="2950999">=</span>&nbsp;<span class="op" id="2951001">[</span><span class="op" id="2951002">]</span><span class="builtintype" id="2951003">int</span><span class="op" id="2951006">{</span><span class="num" id="2951007">1</span><span class="op" id="2951008">,</span>&nbsp;<span class="num" id="2951010">3</span><span class="op" id="2951011">,</span>&nbsp;<span class="num" id="2951013">6</span><span class="op" id="2951014">,</span>&nbsp;<span class="num" id="2951016">9</span><span class="op" id="2951017">,</span>&nbsp;<span class="num" id="2951019">13</span><span class="op" id="2951021">,</span>&nbsp;<span class="num" id="2951023">16</span><span class="op" id="2951025">,</span>&nbsp;<span class="num" id="2951027">19</span><span class="op" id="2951029">,</span>&nbsp;<span class="num" id="2951031">23</span><span class="op" id="2951033">,</span>&nbsp;<span class="num" id="2951035">26</span><span class="op" id="2951037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2951040">func</span>&nbsp;<span class="op" id="2951045">(</span><span class="ident" id="2951046">d</span>&nbsp;<span class="op" id="2951048">*</span><span class="ident" id="2951049"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2951056">)</span>&nbsp;<span class="ident" id="2951058">floatBits</span><span class="op" id="2951067">(</span><span class="ident" id="2951068">flt</span>&nbsp;<span class="op" id="2951072">*</span><span class="ident" id="2951073"><a href="/strconv/ftoa.go.html#2991005">floatInfo</a></span><span class="op" id="2951082">)</span>&nbsp;<span class="op" id="2951084">(</span><span class="ident" id="2951085">b</span>&nbsp;<span class="ident" id="2951087">uint64</span><span class="op" id="2951093">,</span>&nbsp;<span class="ident" id="2951095">overflow</span>&nbsp;<span class="builtintype" id="2951104">bool</span><span class="op" id="2951108">)</span>&nbsp;<span class="op" id="2951110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951113">var</span>&nbsp;<span class="ident" id="2951117">exp</span>&nbsp;<span class="builtintype" id="2951121">int</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951126">var</span>&nbsp;<span class="ident" id="2951130">mant</span>&nbsp;<span class="ident" id="2951135">uint64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951144">//&nbsp;Zero&nbsp;is&nbsp;always&nbsp;a&nbsp;special&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951179">if</span>&nbsp;<span class="ident" id="2951182"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951183">.</span><span class="ident" id="2951184">nd</span>&nbsp;<span class="op" id="2951187">==</span>&nbsp;<span class="num" id="2951190">0</span>&nbsp;<span class="op" id="2951192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951196"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2951201">=</span>&nbsp;<span class="num" id="2951203">0</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951207"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2951211">=</span>&nbsp;<span class="ident" id="2951213"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2951216">.</span><span class="ident" id="2951217">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951224">goto</span>&nbsp;<span class="ident" id="2951229">out</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951238">//&nbsp;Obvious&nbsp;overflow/underflow.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951270">//&nbsp;These&nbsp;bounds&nbsp;are&nbsp;for&nbsp;64-bit&nbsp;floats.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951310">//&nbsp;Will&nbsp;have&nbsp;to&nbsp;change&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;support&nbsp;80-bit&nbsp;floats&nbsp;in&nbsp;the&nbsp;future.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951385">if</span>&nbsp;<span class="ident" id="2951388"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951389">.</span><span class="ident" id="2951390">dp</span>&nbsp;<span class="op" id="2951393">&gt;</span>&nbsp;<span class="num" id="2951395">310</span>&nbsp;<span class="op" id="2951399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951403">goto</span>&nbsp;<span class="ident" id="2951408">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951418">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951421">if</span>&nbsp;<span class="ident" id="2951424"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951425">.</span><span class="ident" id="2951426">dp</span>&nbsp;<span class="op" id="2951429">&lt;</span>&nbsp;<span class="op" id="2951431">-</span><span class="num" id="2951432">330</span>&nbsp;<span class="op" id="2951436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951440">//&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951450"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2951455">=</span>&nbsp;<span class="num" id="2951457">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951461"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2951465">=</span>&nbsp;<span class="ident" id="2951467"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2951470">.</span><span class="ident" id="2951471">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951478">goto</span>&nbsp;<span class="ident" id="2951483">out</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951492">//&nbsp;Scale&nbsp;by&nbsp;powers&nbsp;of&nbsp;two&nbsp;until&nbsp;in&nbsp;range&nbsp;[0.5,&nbsp;1.0)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951545"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2951549">=</span>&nbsp;<span class="num" id="2951551">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951554">for</span>&nbsp;<span class="ident" id="2951558"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951559">.</span><span class="ident" id="2951560">dp</span>&nbsp;<span class="op" id="2951563">&gt;</span>&nbsp;<span class="num" id="2951565">0</span>&nbsp;<span class="op" id="2951567">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951571">var</span>&nbsp;<span class="ident" id="2951575">n</span>&nbsp;<span class="builtintype" id="2951577">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951583">if</span>&nbsp;<span class="ident" id="2951586"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951587">.</span><span class="ident" id="2951588">dp</span>&nbsp;<span class="op" id="2951591">&gt;=</span>&nbsp;<span class="builtinfunc" id="2951594">len</span><span class="op" id="2951597">(</span><span class="ident" id="2951598"><a href="/strconv/atof.go.html#2950992">powtab</a></span><span class="op" id="2951604">)</span>&nbsp;<span class="op" id="2951606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951611"><a href="/strconv/atof.go.html#2951575">n</a></span>&nbsp;<span class="op" id="2951613">=</span>&nbsp;<span class="num" id="2951615">27</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951620">}</span>&nbsp;<span class="keyword" id="2951622">else</span>&nbsp;<span class="op" id="2951627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951632"><a href="/strconv/atof.go.html#2951575">n</a></span>&nbsp;<span class="op" id="2951634">=</span>&nbsp;<span class="ident" id="2951636"><a href="/strconv/atof.go.html#2950992">powtab</a></span><span class="op" id="2951642">[</span><span class="ident" id="2951643"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951644">.</span><span class="ident" id="2951645">dp</span><span class="op" id="2951647">]</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951655"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951656">.</span><span class="ident" id="2951657">Shift</span><span class="op" id="2951662">(</span><span class="op" id="2951663">-</span><span class="ident" id="2951664"><a href="/strconv/atof.go.html#2951575">n</a></span><span class="op" id="2951665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951669"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2951673">+=</span>&nbsp;<span class="ident" id="2951676"><a href="/strconv/atof.go.html#2951575">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951682">for</span>&nbsp;<span class="ident" id="2951686"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951687">.</span><span class="ident" id="2951688">dp</span>&nbsp;<span class="op" id="2951691">&lt;</span>&nbsp;<span class="num" id="2951693">0</span>&nbsp;<span class="op" id="2951695">||</span>&nbsp;<span class="ident" id="2951698"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951699">.</span><span class="ident" id="2951700">dp</span>&nbsp;<span class="op" id="2951703">==</span>&nbsp;<span class="num" id="2951706">0</span>&nbsp;<span class="op" id="2951708">&amp;&amp;</span>&nbsp;<span class="ident" id="2951711"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951712">.</span><span class="ident" id="2951713">d</span><span class="op" id="2951714">[</span><span class="num" id="2951715">0</span><span class="op" id="2951716">]</span>&nbsp;<span class="op" id="2951718">&lt;</span>&nbsp;<span class="string" id="2951720">&#39;5&#39;</span>&nbsp;<span class="op" id="2951724">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951728">var</span>&nbsp;<span class="ident" id="2951732">n</span>&nbsp;<span class="builtintype" id="2951734">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951740">if</span>&nbsp;<span class="op" id="2951743">-</span><span class="ident" id="2951744"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951745">.</span><span class="ident" id="2951746">dp</span>&nbsp;<span class="op" id="2951749">&gt;=</span>&nbsp;<span class="builtinfunc" id="2951752">len</span><span class="op" id="2951755">(</span><span class="ident" id="2951756"><a href="/strconv/atof.go.html#2950992">powtab</a></span><span class="op" id="2951762">)</span>&nbsp;<span class="op" id="2951764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951769"><a href="/strconv/atof.go.html#2951732">n</a></span>&nbsp;<span class="op" id="2951771">=</span>&nbsp;<span class="num" id="2951773">27</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951778">}</span>&nbsp;<span class="keyword" id="2951780">else</span>&nbsp;<span class="op" id="2951785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951790"><a href="/strconv/atof.go.html#2951732">n</a></span>&nbsp;<span class="op" id="2951792">=</span>&nbsp;<span class="ident" id="2951794"><a href="/strconv/atof.go.html#2950992">powtab</a></span><span class="op" id="2951800">[</span><span class="op" id="2951801">-</span><span class="ident" id="2951802"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951803">.</span><span class="ident" id="2951804">dp</span><span class="op" id="2951806">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951814"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2951815">.</span><span class="ident" id="2951816">Shift</span><span class="op" id="2951821">(</span><span class="ident" id="2951822"><a href="/strconv/atof.go.html#2951732">n</a></span><span class="op" id="2951823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951827"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2951831">-=</span>&nbsp;<span class="ident" id="2951834"><a href="/strconv/atof.go.html#2951732">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951841">//&nbsp;Our&nbsp;range&nbsp;is&nbsp;[0.5,1)&nbsp;but&nbsp;floating&nbsp;point&nbsp;range&nbsp;is&nbsp;[1,2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951901"><a href="/strconv/atof.go.html#2951117">exp</a></span><span class="op" id="2951904">--</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951909">//&nbsp;Minimum&nbsp;representable&nbsp;exponent&nbsp;is&nbsp;flt.bias+1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951959">//&nbsp;If&nbsp;the&nbsp;exponent&nbsp;is&nbsp;smaller,&nbsp;move&nbsp;it&nbsp;up&nbsp;and</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952006">//&nbsp;adjust&nbsp;d&nbsp;accordingly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952032">if</span>&nbsp;<span class="ident" id="2952035"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2952039">&lt;</span>&nbsp;<span class="ident" id="2952041"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952044">.</span><span class="ident" id="2952045">bias</span><span class="op" id="2952049">+</span><span class="num" id="2952050">1</span>&nbsp;<span class="op" id="2952052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952056">n</span>&nbsp;<span class="op" id="2952058">:=</span>&nbsp;<span class="ident" id="2952061"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952064">.</span><span class="ident" id="2952065">bias</span>&nbsp;<span class="op" id="2952070">+</span>&nbsp;<span class="num" id="2952072">1</span>&nbsp;<span class="op" id="2952074">-</span>&nbsp;<span class="ident" id="2952076"><a href="/strconv/atof.go.html#2951117">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952082"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2952083">.</span><span class="ident" id="2952084">Shift</span><span class="op" id="2952089">(</span><span class="op" id="2952090">-</span><span class="ident" id="2952091"><a href="/strconv/atof.go.html#2952056">n</a></span><span class="op" id="2952092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952096"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2952100">+=</span>&nbsp;<span class="ident" id="2952103"><a href="/strconv/atof.go.html#2952056">n</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952110">if</span>&nbsp;<span class="ident" id="2952113"><a href="/strconv/atof.go.html#2951117">exp</a></span><span class="op" id="2952116">-</span><span class="ident" id="2952117"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952120">.</span><span class="ident" id="2952121">bias</span>&nbsp;<span class="op" id="2952126">&gt;=</span>&nbsp;<span class="num" id="2952129">1</span><span class="op" id="2952130">&lt;&lt;</span><span class="ident" id="2952132"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952135">.</span><span class="ident" id="2952136">expbits</span><span class="op" id="2952143">-</span><span class="num" id="2952144">1</span>&nbsp;<span class="op" id="2952146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952150">goto</span>&nbsp;<span class="ident" id="2952155">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952165">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952169">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952202"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2952203">.</span><span class="ident" id="2952204">Shift</span><span class="op" id="2952209">(</span><span class="builtintype" id="2952210">int</span><span class="op" id="2952213">(</span><span class="num" id="2952214">1</span>&nbsp;<span class="op" id="2952216">+</span>&nbsp;<span class="ident" id="2952218"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952221">.</span><span class="ident" id="2952222">mantbits</span><span class="op" id="2952230">)</span><span class="op" id="2952231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952234"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2952239">=</span>&nbsp;<span class="ident" id="2952241"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2952242">.</span><span class="ident" id="2952243">RoundedInteger</span><span class="op" id="2952257">(</span><span class="op" id="2952258">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952262">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952311">if</span>&nbsp;<span class="ident" id="2952314"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2952319">==</span>&nbsp;<span class="num" id="2952322">2</span><span class="op" id="2952323">&lt;&lt;</span><span class="ident" id="2952325"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952328">.</span><span class="ident" id="2952329">mantbits</span>&nbsp;<span class="op" id="2952338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952342"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2952347">&gt;&gt;=</span>&nbsp;<span class="num" id="2952351">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952355"><a href="/strconv/atof.go.html#2951117">exp</a></span><span class="op" id="2952358">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952363">if</span>&nbsp;<span class="ident" id="2952366"><a href="/strconv/atof.go.html#2951117">exp</a></span><span class="op" id="2952369">-</span><span class="ident" id="2952370"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952373">.</span><span class="ident" id="2952374">bias</span>&nbsp;<span class="op" id="2952379">&gt;=</span>&nbsp;<span class="num" id="2952382">1</span><span class="op" id="2952383">&lt;&lt;</span><span class="ident" id="2952385"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952388">.</span><span class="ident" id="2952389">expbits</span><span class="op" id="2952396">-</span><span class="num" id="2952397">1</span>&nbsp;<span class="op" id="2952399">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952404">goto</span>&nbsp;<span class="ident" id="2952409">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952427">//&nbsp;Denormalized?</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952445">if</span>&nbsp;<span class="ident" id="2952448"><a href="/strconv/atof.go.html#2951130">mant</a></span><span class="op" id="2952452">&amp;</span><span class="op" id="2952453">(</span><span class="num" id="2952454">1</span><span class="op" id="2952455">&lt;&lt;</span><span class="ident" id="2952457"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952460">.</span><span class="ident" id="2952461">mantbits</span><span class="op" id="2952469">)</span>&nbsp;<span class="op" id="2952471">==</span>&nbsp;<span class="num" id="2952474">0</span>&nbsp;<span class="op" id="2952476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952480"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2952484">=</span>&nbsp;<span class="ident" id="2952486"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952489">.</span><span class="ident" id="2952490">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952499">goto</span>&nbsp;<span class="ident" id="2952504">out</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="ident" id="2952509">overflow</span><span class="op" id="2952517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952520">//&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952530"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2952535">=</span>&nbsp;<span class="num" id="2952537">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952540"><a href="/strconv/atof.go.html#2951117">exp</a></span>&nbsp;<span class="op" id="2952544">=</span>&nbsp;<span class="num" id="2952546">1</span><span class="op" id="2952547">&lt;&lt;</span><span class="ident" id="2952549"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952552">.</span><span class="ident" id="2952553">expbits</span>&nbsp;<span class="op" id="2952561">-</span>&nbsp;<span class="num" id="2952563">1</span>&nbsp;<span class="op" id="2952565">+</span>&nbsp;<span class="ident" id="2952567"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952570">.</span><span class="ident" id="2952571">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952577"><a href="/strconv/atof.go.html#2951095">overflow</a></span>&nbsp;<span class="op" id="2952586">=</span>&nbsp;<span class="builtintype" id="2952588">true</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="ident" id="2952594">out</span><span class="op" id="2952597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952600">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952619">bits</span>&nbsp;<span class="op" id="2952624">:=</span>&nbsp;<span class="ident" id="2952627"><a href="/strconv/atof.go.html#2951130">mant</a></span>&nbsp;<span class="op" id="2952632">&amp;</span>&nbsp;<span class="op" id="2952634">(</span><span class="ident" id="2952635">uint64</span><span class="op" id="2952641">(</span><span class="num" id="2952642">1</span><span class="op" id="2952643">)</span><span class="op" id="2952644">&lt;&lt;</span><span class="ident" id="2952646"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952649">.</span><span class="ident" id="2952650">mantbits</span>&nbsp;<span class="op" id="2952659">-</span>&nbsp;<span class="num" id="2952661">1</span><span class="op" id="2952662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952665"><a href="/strconv/atof.go.html#2952619">bits</a></span>&nbsp;<span class="op" id="2952670">|=</span>&nbsp;<span class="ident" id="2952673">uint64</span><span class="op" id="2952679">(</span><span class="op" id="2952680">(</span><span class="ident" id="2952681"><a href="/strconv/atof.go.html#2951117">exp</a></span><span class="op" id="2952684">-</span><span class="ident" id="2952685"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952688">.</span><span class="ident" id="2952689">bias</span><span class="op" id="2952693">)</span><span class="op" id="2952694">&amp;</span><span class="op" id="2952695">(</span><span class="num" id="2952696">1</span><span class="op" id="2952697">&lt;&lt;</span><span class="ident" id="2952699"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952702">.</span><span class="ident" id="2952703">expbits</span><span class="op" id="2952710">-</span><span class="num" id="2952711">1</span><span class="op" id="2952712">)</span><span class="op" id="2952713">)</span>&nbsp;<span class="op" id="2952715">&lt;&lt;</span>&nbsp;<span class="ident" id="2952718"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952721">.</span><span class="ident" id="2952722">mantbits</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952732">if</span>&nbsp;<span class="ident" id="2952735"><a href="/strconv/atof.go.html#2951046">d</a></span><span class="op" id="2952736">.</span><span class="ident" id="2952737">neg</span>&nbsp;<span class="op" id="2952741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952745"><a href="/strconv/atof.go.html#2952619">bits</a></span>&nbsp;<span class="op" id="2952750">|=</span>&nbsp;<span class="num" id="2952753">1</span>&nbsp;<span class="op" id="2952755">&lt;&lt;</span>&nbsp;<span class="ident" id="2952758"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952761">.</span><span class="ident" id="2952762">mantbits</span>&nbsp;<span class="op" id="2952771">&lt;&lt;</span>&nbsp;<span class="ident" id="2952774"><a href="/strconv/atof.go.html#2951068">flt</a></span><span class="op" id="2952777">.</span><span class="ident" id="2952778">expbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952790">return</span>&nbsp;<span class="ident" id="2952797"><a href="/strconv/atof.go.html#2952619">bits</a></span><span class="op" id="2952801">,</span>&nbsp;<span class="ident" id="2952803"><a href="/strconv/atof.go.html#2951095">overflow</a></span><br>
<span class="lineno"></span><span class="op" id="2952812">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="2952815">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2952838">var</span>&nbsp;<span class="ident" id="2952842">float64pow10</span>&nbsp;<span class="op" id="2952855">=</span>&nbsp;<span class="op" id="2952857">[</span><span class="op" id="2952858">]</span><span class="builtintype" id="2952859">float64</span><span class="op" id="2952866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2952869">1e0</span><span class="op" id="2952872">,</span>&nbsp;<span class="num" id="2952874">1e1</span><span class="op" id="2952877">,</span>&nbsp;<span class="num" id="2952879">1e2</span><span class="op" id="2952882">,</span>&nbsp;<span class="num" id="2952884">1e3</span><span class="op" id="2952887">,</span>&nbsp;<span class="num" id="2952889">1e4</span><span class="op" id="2952892">,</span>&nbsp;<span class="num" id="2952894">1e5</span><span class="op" id="2952897">,</span>&nbsp;<span class="num" id="2952899">1e6</span><span class="op" id="2952902">,</span>&nbsp;<span class="num" id="2952904">1e7</span><span class="op" id="2952907">,</span>&nbsp;<span class="num" id="2952909">1e8</span><span class="op" id="2952912">,</span>&nbsp;<span class="num" id="2952914">1e9</span><span class="op" id="2952917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2952920">1e10</span><span class="op" id="2952924">,</span>&nbsp;<span class="num" id="2952926">1e11</span><span class="op" id="2952930">,</span>&nbsp;<span class="num" id="2952932">1e12</span><span class="op" id="2952936">,</span>&nbsp;<span class="num" id="2952938">1e13</span><span class="op" id="2952942">,</span>&nbsp;<span class="num" id="2952944">1e14</span><span class="op" id="2952948">,</span>&nbsp;<span class="num" id="2952950">1e15</span><span class="op" id="2952954">,</span>&nbsp;<span class="num" id="2952956">1e16</span><span class="op" id="2952960">,</span>&nbsp;<span class="num" id="2952962">1e17</span><span class="op" id="2952966">,</span>&nbsp;<span class="num" id="2952968">1e18</span><span class="op" id="2952972">,</span>&nbsp;<span class="num" id="2952974">1e19</span><span class="op" id="2952978">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2952981">1e20</span><span class="op" id="2952985">,</span>&nbsp;<span class="num" id="2952987">1e21</span><span class="op" id="2952991">,</span>&nbsp;<span class="num" id="2952993">1e22</span><span class="op" id="2952997">,</span><br>
<span class="lineno"></span><span class="op" id="2952999">}</span><br>
<span class="lineno"></span><span class="keyword" id="2953001">var</span>&nbsp;<span class="ident" id="2953005">float32pow10</span>&nbsp;<span class="op" id="2953018">=</span>&nbsp;<span class="op" id="2953020">[</span><span class="op" id="2953021">]</span><span class="builtintype" id="2953022">float32</span><span class="op" id="2953029">{</span><span class="num" id="2953030">1e0</span><span class="op" id="2953033">,</span>&nbsp;<span class="num" id="2953035">1e1</span><span class="op" id="2953038">,</span>&nbsp;<span class="num" id="2953040">1e2</span><span class="op" id="2953043">,</span>&nbsp;<span class="num" id="2953045">1e3</span><span class="op" id="2953048">,</span>&nbsp;<span class="num" id="2953050">1e4</span><span class="op" id="2953053">,</span>&nbsp;<span class="num" id="2953055">1e5</span><span class="op" id="2953058">,</span>&nbsp;<span class="num" id="2953060">1e6</span><span class="op" id="2953063">,</span>&nbsp;<span class="num" id="2953065">1e7</span><span class="op" id="2953068">,</span>&nbsp;<span class="num" id="2953070">1e8</span><span class="op" id="2953073">,</span>&nbsp;<span class="num" id="2953075">1e9</span><span class="op" id="2953078">,</span>&nbsp;<span class="num" id="2953080">1e10</span><span class="op" id="2953084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953087">//&nbsp;If&nbsp;possible&nbsp;to&nbsp;convert&nbsp;decimal&nbsp;representation&nbsp;to&nbsp;64-bit&nbsp;float&nbsp;f&nbsp;exactly,</span><br>
<span class="lineno">365</span><span class="comment" id="2953163">//&nbsp;entirely&nbsp;in&nbsp;floating-point&nbsp;math,&nbsp;do&nbsp;so,&nbsp;avoiding&nbsp;the&nbsp;expense&nbsp;of&nbsp;decimalToFloatBits.</span><br>
<span class="lineno"></span><span class="comment" id="2953250">//&nbsp;Three&nbsp;common&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="2953273">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2953299">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer&nbsp;*&nbsp;exact&nbsp;power&nbsp;of&nbsp;ten</span><br>
<span class="lineno"></span><span class="comment" id="2953346">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer&nbsp;/&nbsp;exact&nbsp;power&nbsp;of&nbsp;ten</span><br>
<span class="lineno">370</span><span class="comment" id="2953393">//&nbsp;These&nbsp;all&nbsp;produce&nbsp;potentially&nbsp;inexact&nbsp;but&nbsp;correctly&nbsp;rounded&nbsp;answers.</span><br>
<span class="lineno"></span><span class="keyword" id="2953465">func</span>&nbsp;<span class="ident" id="2953470">atof64exact</span><span class="op" id="2953481">(</span><span class="ident" id="2953482">mantissa</span>&nbsp;<span class="ident" id="2953491">uint64</span><span class="op" id="2953497">,</span>&nbsp;<span class="ident" id="2953499">exp</span>&nbsp;<span class="builtintype" id="2953503">int</span><span class="op" id="2953506">,</span>&nbsp;<span class="ident" id="2953508">neg</span>&nbsp;<span class="builtintype" id="2953512">bool</span><span class="op" id="2953516">)</span>&nbsp;<span class="op" id="2953518">(</span><span class="ident" id="2953519">f</span>&nbsp;<span class="builtintype" id="2953521">float64</span><span class="op" id="2953528">,</span>&nbsp;<span class="ident" id="2953530">ok</span>&nbsp;<span class="builtintype" id="2953533">bool</span><span class="op" id="2953537">)</span>&nbsp;<span class="op" id="2953539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953542">if</span>&nbsp;<span class="ident" id="2953545"><a href="/strconv/atof.go.html#2953482">mantissa</a></span><span class="op" id="2953553">&gt;&gt;</span><span class="ident" id="2953555"><a href="/strconv/ftoa.go.html#2991116">float64info</a></span><span class="op" id="2953566">.</span><span class="ident" id="2953567">mantbits</span>&nbsp;<span class="op" id="2953576">!=</span>&nbsp;<span class="num" id="2953579">0</span>&nbsp;<span class="op" id="2953581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953585">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953593">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953596"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2953598">=</span>&nbsp;<span class="builtintype" id="2953600">float64</span><span class="op" id="2953607">(</span><span class="ident" id="2953608"><a href="/strconv/atof.go.html#2953482">mantissa</a></span><span class="op" id="2953616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953619">if</span>&nbsp;<span class="ident" id="2953622"><a href="/strconv/atof.go.html#2953508">neg</a></span>&nbsp;<span class="op" id="2953626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953630"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2953632">=</span>&nbsp;<span class="op" id="2953634">-</span><span class="ident" id="2953635"><a href="/strconv/atof.go.html#2953519">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953641">switch</span>&nbsp;<span class="op" id="2953648">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953651">case</span>&nbsp;<span class="ident" id="2953656"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2953660">==</span>&nbsp;<span class="num" id="2953663">0</span><span class="op" id="2953664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953668">//&nbsp;an&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953685">return</span>&nbsp;<span class="ident" id="2953692"><a href="/strconv/atof.go.html#2953519">f</a></span><span class="op" id="2953693">,</span>&nbsp;<span class="builtintype" id="2953695">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953701">//&nbsp;Exact&nbsp;integers&nbsp;are&nbsp;&lt;=&nbsp;10^15.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953734">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;ten&nbsp;are&nbsp;&lt;=&nbsp;10^22.</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953772">case</span>&nbsp;<span class="ident" id="2953777"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2953781">&gt;</span>&nbsp;<span class="num" id="2953783">0</span>&nbsp;<span class="op" id="2953785">&amp;&amp;</span>&nbsp;<span class="ident" id="2953788"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2953792">&lt;=</span>&nbsp;<span class="num" id="2953795">15</span><span class="op" id="2953797">+</span><span class="num" id="2953798">22</span><span class="op" id="2953800">:</span>&nbsp;<span class="comment" id="2953802">//&nbsp;int&nbsp;*&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953818">//&nbsp;If&nbsp;exponent&nbsp;is&nbsp;big&nbsp;but&nbsp;number&nbsp;of&nbsp;digits&nbsp;is&nbsp;not,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953871">//&nbsp;can&nbsp;move&nbsp;a&nbsp;few&nbsp;zeros&nbsp;into&nbsp;the&nbsp;integer&nbsp;part.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953920">if</span>&nbsp;<span class="ident" id="2953923"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2953927">&gt;</span>&nbsp;<span class="num" id="2953929">22</span>&nbsp;<span class="op" id="2953932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953937"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2953939">*=</span>&nbsp;<span class="ident" id="2953942"><a href="/strconv/atof.go.html#2952842">float64pow10</a></span><span class="op" id="2953954">[</span><span class="ident" id="2953955"><a href="/strconv/atof.go.html#2953499">exp</a></span><span class="op" id="2953958">-</span><span class="num" id="2953959">22</span><span class="op" id="2953961">]</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953966"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2953970">=</span>&nbsp;<span class="num" id="2953972">22</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953981">if</span>&nbsp;<span class="ident" id="2953984"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2953986">&gt;</span>&nbsp;<span class="num" id="2953988">1e15</span>&nbsp;<span class="op" id="2953993">||</span>&nbsp;<span class="ident" id="2953996"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2953998">&lt;</span>&nbsp;<span class="op" id="2954000">-</span><span class="num" id="2954001">1e15</span>&nbsp;<span class="op" id="2954006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954011">//&nbsp;the&nbsp;exponent&nbsp;was&nbsp;really&nbsp;too&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954052">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954065">return</span>&nbsp;<span class="ident" id="2954072"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2954074">*</span>&nbsp;<span class="ident" id="2954076"><a href="/strconv/atof.go.html#2952842">float64pow10</a></span><span class="op" id="2954088">[</span><span class="ident" id="2954089"><a href="/strconv/atof.go.html#2953499">exp</a></span><span class="op" id="2954092">]</span><span class="op" id="2954093">,</span>&nbsp;<span class="builtintype" id="2954095">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954101">case</span>&nbsp;<span class="ident" id="2954106"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2954110">&lt;</span>&nbsp;<span class="num" id="2954112">0</span>&nbsp;<span class="op" id="2954114">&amp;&amp;</span>&nbsp;<span class="ident" id="2954117"><a href="/strconv/atof.go.html#2953499">exp</a></span>&nbsp;<span class="op" id="2954121">&gt;=</span>&nbsp;<span class="op" id="2954124">-</span><span class="num" id="2954125">22</span><span class="op" id="2954127">:</span>&nbsp;<span class="comment" id="2954129">//&nbsp;int&nbsp;/&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954145">return</span>&nbsp;<span class="ident" id="2954152"><a href="/strconv/atof.go.html#2953519">f</a></span>&nbsp;<span class="op" id="2954154">/</span>&nbsp;<span class="ident" id="2954156"><a href="/strconv/atof.go.html#2952842">float64pow10</a></span><span class="op" id="2954168">[</span><span class="op" id="2954169">-</span><span class="ident" id="2954170"><a href="/strconv/atof.go.html#2953499">exp</a></span><span class="op" id="2954173">]</span><span class="op" id="2954174">,</span>&nbsp;<span class="builtintype" id="2954176">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954182">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954185">return</span><br>
<span class="lineno"></span><span class="op" id="2954192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2954195">//&nbsp;If&nbsp;possible&nbsp;to&nbsp;compute&nbsp;mantissa*10^exp&nbsp;to&nbsp;32-bit&nbsp;float&nbsp;f&nbsp;exactly,</span><br>
<span class="lineno"></span><span class="comment" id="2954264">//&nbsp;entirely&nbsp;in&nbsp;floating-point&nbsp;math,&nbsp;do&nbsp;so,&nbsp;avoiding&nbsp;the&nbsp;machinery&nbsp;above.</span><br>
<span class="lineno">405</span><span class="keyword" id="2954337">func</span>&nbsp;<span class="ident" id="2954342">atof32exact</span><span class="op" id="2954353">(</span><span class="ident" id="2954354">mantissa</span>&nbsp;<span class="ident" id="2954363">uint64</span><span class="op" id="2954369">,</span>&nbsp;<span class="ident" id="2954371">exp</span>&nbsp;<span class="builtintype" id="2954375">int</span><span class="op" id="2954378">,</span>&nbsp;<span class="ident" id="2954380">neg</span>&nbsp;<span class="builtintype" id="2954384">bool</span><span class="op" id="2954388">)</span>&nbsp;<span class="op" id="2954390">(</span><span class="ident" id="2954391">f</span>&nbsp;<span class="builtintype" id="2954393">float32</span><span class="op" id="2954400">,</span>&nbsp;<span class="ident" id="2954402">ok</span>&nbsp;<span class="builtintype" id="2954405">bool</span><span class="op" id="2954409">)</span>&nbsp;<span class="op" id="2954411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954414">if</span>&nbsp;<span class="ident" id="2954417"><a href="/strconv/atof.go.html#2954354">mantissa</a></span><span class="op" id="2954425">&gt;&gt;</span><span class="ident" id="2954427"><a href="/strconv/ftoa.go.html#2991075">float32info</a></span><span class="op" id="2954438">.</span><span class="ident" id="2954439">mantbits</span>&nbsp;<span class="op" id="2954448">!=</span>&nbsp;<span class="num" id="2954451">0</span>&nbsp;<span class="op" id="2954453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954457">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954468"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954470">=</span>&nbsp;<span class="builtintype" id="2954472">float32</span><span class="op" id="2954479">(</span><span class="ident" id="2954480"><a href="/strconv/atof.go.html#2954354">mantissa</a></span><span class="op" id="2954488">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954491">if</span>&nbsp;<span class="ident" id="2954494"><a href="/strconv/atof.go.html#2954380">neg</a></span>&nbsp;<span class="op" id="2954498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954502"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954504">=</span>&nbsp;<span class="op" id="2954506">-</span><span class="ident" id="2954507"><a href="/strconv/atof.go.html#2954391">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954513">switch</span>&nbsp;<span class="op" id="2954520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954523">case</span>&nbsp;<span class="ident" id="2954528"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954532">==</span>&nbsp;<span class="num" id="2954535">0</span><span class="op" id="2954536">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954540">return</span>&nbsp;<span class="ident" id="2954547"><a href="/strconv/atof.go.html#2954391">f</a></span><span class="op" id="2954548">,</span>&nbsp;<span class="builtintype" id="2954550">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954556">//&nbsp;Exact&nbsp;integers&nbsp;are&nbsp;&lt;=&nbsp;10^7.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954588">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;ten&nbsp;are&nbsp;&lt;=&nbsp;10^10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954626">case</span>&nbsp;<span class="ident" id="2954631"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954635">&gt;</span>&nbsp;<span class="num" id="2954637">0</span>&nbsp;<span class="op" id="2954639">&amp;&amp;</span>&nbsp;<span class="ident" id="2954642"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954646">&lt;=</span>&nbsp;<span class="num" id="2954649">7</span><span class="op" id="2954650">+</span><span class="num" id="2954651">10</span><span class="op" id="2954653">:</span>&nbsp;<span class="comment" id="2954655">//&nbsp;int&nbsp;*&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954671">//&nbsp;If&nbsp;exponent&nbsp;is&nbsp;big&nbsp;but&nbsp;number&nbsp;of&nbsp;digits&nbsp;is&nbsp;not,</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954724">//&nbsp;can&nbsp;move&nbsp;a&nbsp;few&nbsp;zeros&nbsp;into&nbsp;the&nbsp;integer&nbsp;part.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954773">if</span>&nbsp;<span class="ident" id="2954776"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954780">&gt;</span>&nbsp;<span class="num" id="2954782">10</span>&nbsp;<span class="op" id="2954785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954790"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954792">*=</span>&nbsp;<span class="ident" id="2954795"><a href="/strconv/atof.go.html#2953005">float32pow10</a></span><span class="op" id="2954807">[</span><span class="ident" id="2954808"><a href="/strconv/atof.go.html#2954371">exp</a></span><span class="op" id="2954811">-</span><span class="num" id="2954812">10</span><span class="op" id="2954814">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954819"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954823">=</span>&nbsp;<span class="num" id="2954825">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954830">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954834">if</span>&nbsp;<span class="ident" id="2954837"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954839">&gt;</span>&nbsp;<span class="num" id="2954841">1e7</span>&nbsp;<span class="op" id="2954845">||</span>&nbsp;<span class="ident" id="2954848"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954850">&lt;</span>&nbsp;<span class="op" id="2954852">-</span><span class="num" id="2954853">1e7</span>&nbsp;<span class="op" id="2954857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954862">//&nbsp;the&nbsp;exponent&nbsp;was&nbsp;really&nbsp;too&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954903">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954916">return</span>&nbsp;<span class="ident" id="2954923"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2954925">*</span>&nbsp;<span class="ident" id="2954927"><a href="/strconv/atof.go.html#2953005">float32pow10</a></span><span class="op" id="2954939">[</span><span class="ident" id="2954940"><a href="/strconv/atof.go.html#2954371">exp</a></span><span class="op" id="2954943">]</span><span class="op" id="2954944">,</span>&nbsp;<span class="builtintype" id="2954946">true</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954952">case</span>&nbsp;<span class="ident" id="2954957"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954961">&lt;</span>&nbsp;<span class="num" id="2954963">0</span>&nbsp;<span class="op" id="2954965">&amp;&amp;</span>&nbsp;<span class="ident" id="2954968"><a href="/strconv/atof.go.html#2954371">exp</a></span>&nbsp;<span class="op" id="2954972">&gt;=</span>&nbsp;<span class="op" id="2954975">-</span><span class="num" id="2954976">10</span><span class="op" id="2954978">:</span>&nbsp;<span class="comment" id="2954980">//&nbsp;int&nbsp;/&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954996">return</span>&nbsp;<span class="ident" id="2955003"><a href="/strconv/atof.go.html#2954391">f</a></span>&nbsp;<span class="op" id="2955005">/</span>&nbsp;<span class="ident" id="2955007"><a href="/strconv/atof.go.html#2953005">float32pow10</a></span><span class="op" id="2955019">[</span><span class="op" id="2955020">-</span><span class="ident" id="2955021"><a href="/strconv/atof.go.html#2954371">exp</a></span><span class="op" id="2955024">]</span><span class="op" id="2955025">,</span>&nbsp;<span class="builtintype" id="2955027">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955036">return</span><br>
<span class="lineno"></span><span class="op" id="2955043">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="2955046">const</span>&nbsp;<span class="ident" id="2955052">fnParseFloat</span>&nbsp;<span class="op" id="2955065">=</span>&nbsp;<span class="string" id="2955067">&#34;ParseFloat&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2955081">func</span>&nbsp;<span class="ident" id="2955086">atof32</span><span class="op" id="2955092">(</span><span class="ident" id="2955093">s</span>&nbsp;<span class="builtintype" id="2955095">string</span><span class="op" id="2955101">)</span>&nbsp;<span class="op" id="2955103">(</span><span class="ident" id="2955104">f</span>&nbsp;<span class="builtintype" id="2955106">float32</span><span class="op" id="2955113">,</span>&nbsp;<span class="ident" id="2955115">err</span>&nbsp;<span class="builtintype" id="2955119">error</span><span class="op" id="2955124">)</span>&nbsp;<span class="op" id="2955126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955129">if</span>&nbsp;<span class="ident" id="2955132">val</span><span class="op" id="2955135">,</span>&nbsp;<span class="ident" id="2955137">ok</span>&nbsp;<span class="op" id="2955140">:=</span>&nbsp;<span class="ident" id="2955143"><a href="/strconv/atof.go.html#2947363">special</a></span><span class="op" id="2955150">(</span><span class="ident" id="2955151"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955152">)</span><span class="op" id="2955153">;</span>&nbsp;<span class="ident" id="2955155"><a href="/strconv/atof.go.html#2955137">ok</a></span>&nbsp;<span class="op" id="2955158">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955162">return</span>&nbsp;<span class="builtintype" id="2955169">float32</span><span class="op" id="2955176">(</span><span class="ident" id="2955177"><a href="/strconv/atof.go.html#2955132">val</a></span><span class="op" id="2955180">)</span><span class="op" id="2955181">,</span>&nbsp;<span class="ident" id="2955183">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955192">if</span>&nbsp;<span class="ident" id="2955195"><a href="/strconv/atof.go.html#2947008">optimize</a></span>&nbsp;<span class="op" id="2955204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955208">//&nbsp;Parse&nbsp;mantissa&nbsp;and&nbsp;exponent.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955242">mantissa</span><span class="op" id="2955250">,</span>&nbsp;<span class="ident" id="2955252">exp</span><span class="op" id="2955255">,</span>&nbsp;<span class="ident" id="2955257">neg</span><span class="op" id="2955260">,</span>&nbsp;<span class="ident" id="2955262">trunc</span><span class="op" id="2955267">,</span>&nbsp;<span class="ident" id="2955269">ok</span>&nbsp;<span class="op" id="2955272">:=</span>&nbsp;<span class="ident" id="2955275"><a href="/strconv/atof.go.html#2949457">readFloat</a></span><span class="op" id="2955284">(</span><span class="ident" id="2955285"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955290">if</span>&nbsp;<span class="ident" id="2955293"><a href="/strconv/atof.go.html#2955269">ok</a></span>&nbsp;<span class="op" id="2955296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955301">//&nbsp;Try&nbsp;pure&nbsp;floating-point&nbsp;arithmetic&nbsp;conversion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955354">if</span>&nbsp;<span class="op" id="2955357">!</span><span class="ident" id="2955358"><a href="/strconv/atof.go.html#2955262">trunc</a></span>&nbsp;<span class="op" id="2955364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955370">if</span>&nbsp;<span class="ident" id="2955373">f</span><span class="op" id="2955374">,</span>&nbsp;<span class="ident" id="2955376">ok</span>&nbsp;<span class="op" id="2955379">:=</span>&nbsp;<span class="ident" id="2955382"><a href="/strconv/atof.go.html#2954342">atof32exact</a></span><span class="op" id="2955393">(</span><span class="ident" id="2955394"><a href="/strconv/atof.go.html#2955242">mantissa</a></span><span class="op" id="2955402">,</span>&nbsp;<span class="ident" id="2955404"><a href="/strconv/atof.go.html#2955252">exp</a></span><span class="op" id="2955407">,</span>&nbsp;<span class="ident" id="2955409"><a href="/strconv/atof.go.html#2955257">neg</a></span><span class="op" id="2955412">)</span><span class="op" id="2955413">;</span>&nbsp;<span class="ident" id="2955415"><a href="/strconv/atof.go.html#2955376">ok</a></span>&nbsp;<span class="op" id="2955418">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955425">return</span>&nbsp;<span class="ident" id="2955432"><a href="/strconv/atof.go.html#2955373">f</a></span><span class="op" id="2955433">,</span>&nbsp;<span class="ident" id="2955435">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955453">//&nbsp;Try&nbsp;another&nbsp;fast&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955482">ext</span>&nbsp;<span class="op" id="2955486">:=</span>&nbsp;<span class="builtinfunc" id="2955489">new</span><span class="op" id="2955492">(</span><span class="ident" id="2955493"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2955501">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955506">if</span>&nbsp;<span class="ident" id="2955509">ok</span>&nbsp;<span class="op" id="2955512">:=</span>&nbsp;<span class="ident" id="2955515"><a href="/strconv/atof.go.html#2955482">ext</a></span><span class="op" id="2955518">.</span><span class="ident" id="2955519">AssignDecimal</span><span class="op" id="2955532">(</span><span class="ident" id="2955533"><a href="/strconv/atof.go.html#2955242">mantissa</a></span><span class="op" id="2955541">,</span>&nbsp;<span class="ident" id="2955543"><a href="/strconv/atof.go.html#2955252">exp</a></span><span class="op" id="2955546">,</span>&nbsp;<span class="ident" id="2955548"><a href="/strconv/atof.go.html#2955257">neg</a></span><span class="op" id="2955551">,</span>&nbsp;<span class="ident" id="2955553"><a href="/strconv/atof.go.html#2955262">trunc</a></span><span class="op" id="2955558">,</span>&nbsp;<span class="op" id="2955560">&amp;</span><span class="ident" id="2955561"><a href="/strconv/ftoa.go.html#2991075">float32info</a></span><span class="op" id="2955572">)</span><span class="op" id="2955573">;</span>&nbsp;<span class="ident" id="2955575"><a href="/strconv/atof.go.html#2955509">ok</a></span>&nbsp;<span class="op" id="2955578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955584">b</span><span class="op" id="2955585">,</span>&nbsp;<span class="ident" id="2955587">ovf</span>&nbsp;<span class="op" id="2955591">:=</span>&nbsp;<span class="ident" id="2955594"><a href="/strconv/atof.go.html#2955482">ext</a></span><span class="op" id="2955597">.</span><span class="ident" id="2955598">floatBits</span><span class="op" id="2955607">(</span><span class="op" id="2955608">&amp;</span><span class="ident" id="2955609"><a href="/strconv/ftoa.go.html#2991075">float32info</a></span><span class="op" id="2955620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955626"><a href="/strconv/atof.go.html#2955104">f</a></span>&nbsp;<span class="op" id="2955628">=</span>&nbsp;<span class="ident" id="2955630"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2955634">.</span><span class="ident" id="2955635">Float32frombits</span><span class="op" id="2955650">(</span><span class="builtintype" id="2955651">uint32</span><span class="op" id="2955657">(</span><span class="ident" id="2955658"><a href="/strconv/atof.go.html#2955584">b</a></span><span class="op" id="2955659">)</span><span class="op" id="2955660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955666">if</span>&nbsp;<span class="ident" id="2955669"><a href="/strconv/atof.go.html#2955587">ovf</a></span>&nbsp;<span class="op" id="2955673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955680"><a href="/strconv/atof.go.html#2955115">err</a></span>&nbsp;<span class="op" id="2955684">=</span>&nbsp;<span class="ident" id="2955686"><a href="/strconv/atoi.go.html#2958719">rangeError</a></span><span class="op" id="2955696">(</span><span class="ident" id="2955697"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2955709">,</span>&nbsp;<span class="ident" id="2955711"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955712">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955724">return</span>&nbsp;<span class="ident" id="2955731"><a href="/strconv/atof.go.html#2955104">f</a></span><span class="op" id="2955732">,</span>&nbsp;<span class="ident" id="2955734"><a href="/strconv/atof.go.html#2955115">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955748">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955751">var</span>&nbsp;<span class="ident" id="2955755">d</span>&nbsp;<span class="ident" id="2955757"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955766">if</span>&nbsp;<span class="op" id="2955769">!</span><span class="ident" id="2955770"><a href="/strconv/atof.go.html#2955755">d</a></span><span class="op" id="2955771">.</span><span class="ident" id="2955772">set</span><span class="op" id="2955775">(</span><span class="ident" id="2955776"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955777">)</span>&nbsp;<span class="op" id="2955779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955783">return</span>&nbsp;<span class="num" id="2955790">0</span><span class="op" id="2955791">,</span>&nbsp;<span class="ident" id="2955793"><a href="/strconv/atoi.go.html#2958633">syntaxError</a></span><span class="op" id="2955804">(</span><span class="ident" id="2955805"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2955817">,</span>&nbsp;<span class="ident" id="2955819"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955826">b</span><span class="op" id="2955827">,</span>&nbsp;<span class="ident" id="2955829">ovf</span>&nbsp;<span class="op" id="2955833">:=</span>&nbsp;<span class="ident" id="2955836"><a href="/strconv/atof.go.html#2955755">d</a></span><span class="op" id="2955837">.</span><span class="ident" id="2955838">floatBits</span><span class="op" id="2955847">(</span><span class="op" id="2955848">&amp;</span><span class="ident" id="2955849"><a href="/strconv/ftoa.go.html#2991075">float32info</a></span><span class="op" id="2955860">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955863"><a href="/strconv/atof.go.html#2955104">f</a></span>&nbsp;<span class="op" id="2955865">=</span>&nbsp;<span class="ident" id="2955867"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2955871">.</span><span class="ident" id="2955872">Float32frombits</span><span class="op" id="2955887">(</span><span class="builtintype" id="2955888">uint32</span><span class="op" id="2955894">(</span><span class="ident" id="2955895"><a href="/strconv/atof.go.html#2955826">b</a></span><span class="op" id="2955896">)</span><span class="op" id="2955897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955900">if</span>&nbsp;<span class="ident" id="2955903"><a href="/strconv/atof.go.html#2955829">ovf</a></span>&nbsp;<span class="op" id="2955907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955911"><a href="/strconv/atof.go.html#2955115">err</a></span>&nbsp;<span class="op" id="2955915">=</span>&nbsp;<span class="ident" id="2955917"><a href="/strconv/atoi.go.html#2958719">rangeError</a></span><span class="op" id="2955927">(</span><span class="ident" id="2955928"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2955940">,</span>&nbsp;<span class="ident" id="2955942"><a href="/strconv/atof.go.html#2955093">s</a></span><span class="op" id="2955943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955949">return</span>&nbsp;<span class="ident" id="2955956"><a href="/strconv/atof.go.html#2955104">f</a></span><span class="op" id="2955957">,</span>&nbsp;<span class="ident" id="2955959"><a href="/strconv/atof.go.html#2955115">err</a></span><br>
<span class="lineno">475</span><span class="op" id="2955963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2955966">func</span>&nbsp;<span class="ident" id="2955971">atof64</span><span class="op" id="2955977">(</span><span class="ident" id="2955978">s</span>&nbsp;<span class="builtintype" id="2955980">string</span><span class="op" id="2955986">)</span>&nbsp;<span class="op" id="2955988">(</span><span class="ident" id="2955989">f</span>&nbsp;<span class="builtintype" id="2955991">float64</span><span class="op" id="2955998">,</span>&nbsp;<span class="ident" id="2956000">err</span>&nbsp;<span class="builtintype" id="2956004">error</span><span class="op" id="2956009">)</span>&nbsp;<span class="op" id="2956011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956014">if</span>&nbsp;<span class="ident" id="2956017">val</span><span class="op" id="2956020">,</span>&nbsp;<span class="ident" id="2956022">ok</span>&nbsp;<span class="op" id="2956025">:=</span>&nbsp;<span class="ident" id="2956028"><a href="/strconv/atof.go.html#2947363">special</a></span><span class="op" id="2956035">(</span><span class="ident" id="2956036"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956037">)</span><span class="op" id="2956038">;</span>&nbsp;<span class="ident" id="2956040"><a href="/strconv/atof.go.html#2956022">ok</a></span>&nbsp;<span class="op" id="2956043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956047">return</span>&nbsp;<span class="ident" id="2956054"><a href="/strconv/atof.go.html#2956017">val</a></span><span class="op" id="2956057">,</span>&nbsp;<span class="ident" id="2956059">nil</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956068">if</span>&nbsp;<span class="ident" id="2956071"><a href="/strconv/atof.go.html#2947008">optimize</a></span>&nbsp;<span class="op" id="2956080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956084">//&nbsp;Parse&nbsp;mantissa&nbsp;and&nbsp;exponent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956118">mantissa</span><span class="op" id="2956126">,</span>&nbsp;<span class="ident" id="2956128">exp</span><span class="op" id="2956131">,</span>&nbsp;<span class="ident" id="2956133">neg</span><span class="op" id="2956136">,</span>&nbsp;<span class="ident" id="2956138">trunc</span><span class="op" id="2956143">,</span>&nbsp;<span class="ident" id="2956145">ok</span>&nbsp;<span class="op" id="2956148">:=</span>&nbsp;<span class="ident" id="2956151"><a href="/strconv/atof.go.html#2949457">readFloat</a></span><span class="op" id="2956160">(</span><span class="ident" id="2956161"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956162">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956166">if</span>&nbsp;<span class="ident" id="2956169"><a href="/strconv/atof.go.html#2956145">ok</a></span>&nbsp;<span class="op" id="2956172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956177">//&nbsp;Try&nbsp;pure&nbsp;floating-point&nbsp;arithmetic&nbsp;conversion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956230">if</span>&nbsp;<span class="op" id="2956233">!</span><span class="ident" id="2956234"><a href="/strconv/atof.go.html#2956138">trunc</a></span>&nbsp;<span class="op" id="2956240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956246">if</span>&nbsp;<span class="ident" id="2956249">f</span><span class="op" id="2956250">,</span>&nbsp;<span class="ident" id="2956252">ok</span>&nbsp;<span class="op" id="2956255">:=</span>&nbsp;<span class="ident" id="2956258"><a href="/strconv/atof.go.html#2953470">atof64exact</a></span><span class="op" id="2956269">(</span><span class="ident" id="2956270"><a href="/strconv/atof.go.html#2956118">mantissa</a></span><span class="op" id="2956278">,</span>&nbsp;<span class="ident" id="2956280"><a href="/strconv/atof.go.html#2956128">exp</a></span><span class="op" id="2956283">,</span>&nbsp;<span class="ident" id="2956285"><a href="/strconv/atof.go.html#2956133">neg</a></span><span class="op" id="2956288">)</span><span class="op" id="2956289">;</span>&nbsp;<span class="ident" id="2956291"><a href="/strconv/atof.go.html#2956252">ok</a></span>&nbsp;<span class="op" id="2956294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956301">return</span>&nbsp;<span class="ident" id="2956308"><a href="/strconv/atof.go.html#2956249">f</a></span><span class="op" id="2956309">,</span>&nbsp;<span class="ident" id="2956311">nil</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956329">//&nbsp;Try&nbsp;another&nbsp;fast&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956358">ext</span>&nbsp;<span class="op" id="2956362">:=</span>&nbsp;<span class="builtinfunc" id="2956365">new</span><span class="op" id="2956368">(</span><span class="ident" id="2956369"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2956377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956382">if</span>&nbsp;<span class="ident" id="2956385">ok</span>&nbsp;<span class="op" id="2956388">:=</span>&nbsp;<span class="ident" id="2956391"><a href="/strconv/atof.go.html#2956358">ext</a></span><span class="op" id="2956394">.</span><span class="ident" id="2956395">AssignDecimal</span><span class="op" id="2956408">(</span><span class="ident" id="2956409"><a href="/strconv/atof.go.html#2956118">mantissa</a></span><span class="op" id="2956417">,</span>&nbsp;<span class="ident" id="2956419"><a href="/strconv/atof.go.html#2956128">exp</a></span><span class="op" id="2956422">,</span>&nbsp;<span class="ident" id="2956424"><a href="/strconv/atof.go.html#2956133">neg</a></span><span class="op" id="2956427">,</span>&nbsp;<span class="ident" id="2956429"><a href="/strconv/atof.go.html#2956138">trunc</a></span><span class="op" id="2956434">,</span>&nbsp;<span class="op" id="2956436">&amp;</span><span class="ident" id="2956437"><a href="/strconv/ftoa.go.html#2991116">float64info</a></span><span class="op" id="2956448">)</span><span class="op" id="2956449">;</span>&nbsp;<span class="ident" id="2956451"><a href="/strconv/atof.go.html#2956385">ok</a></span>&nbsp;<span class="op" id="2956454">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956460">b</span><span class="op" id="2956461">,</span>&nbsp;<span class="ident" id="2956463">ovf</span>&nbsp;<span class="op" id="2956467">:=</span>&nbsp;<span class="ident" id="2956470"><a href="/strconv/atof.go.html#2956358">ext</a></span><span class="op" id="2956473">.</span><span class="ident" id="2956474">floatBits</span><span class="op" id="2956483">(</span><span class="op" id="2956484">&amp;</span><span class="ident" id="2956485"><a href="/strconv/ftoa.go.html#2991116">float64info</a></span><span class="op" id="2956496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956502"><a href="/strconv/atof.go.html#2955989">f</a></span>&nbsp;<span class="op" id="2956504">=</span>&nbsp;<span class="ident" id="2956506"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2956510">.</span><span class="ident" id="2956511">Float64frombits</span><span class="op" id="2956526">(</span><span class="ident" id="2956527"><a href="/strconv/atof.go.html#2956460">b</a></span><span class="op" id="2956528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956534">if</span>&nbsp;<span class="ident" id="2956537"><a href="/strconv/atof.go.html#2956463">ovf</a></span>&nbsp;<span class="op" id="2956541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956548"><a href="/strconv/atof.go.html#2956000">err</a></span>&nbsp;<span class="op" id="2956552">=</span>&nbsp;<span class="ident" id="2956554"><a href="/strconv/atoi.go.html#2958719">rangeError</a></span><span class="op" id="2956564">(</span><span class="ident" id="2956565"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2956577">,</span>&nbsp;<span class="ident" id="2956579"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956586">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956592">return</span>&nbsp;<span class="ident" id="2956599"><a href="/strconv/atof.go.html#2955989">f</a></span><span class="op" id="2956600">,</span>&nbsp;<span class="ident" id="2956602"><a href="/strconv/atof.go.html#2956000">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956619">var</span>&nbsp;<span class="ident" id="2956623">d</span>&nbsp;<span class="ident" id="2956625"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956634">if</span>&nbsp;<span class="op" id="2956637">!</span><span class="ident" id="2956638"><a href="/strconv/atof.go.html#2956623">d</a></span><span class="op" id="2956639">.</span><span class="ident" id="2956640">set</span><span class="op" id="2956643">(</span><span class="ident" id="2956644"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956645">)</span>&nbsp;<span class="op" id="2956647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956651">return</span>&nbsp;<span class="num" id="2956658">0</span><span class="op" id="2956659">,</span>&nbsp;<span class="ident" id="2956661"><a href="/strconv/atoi.go.html#2958633">syntaxError</a></span><span class="op" id="2956672">(</span><span class="ident" id="2956673"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2956685">,</span>&nbsp;<span class="ident" id="2956687"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956694">b</span><span class="op" id="2956695">,</span>&nbsp;<span class="ident" id="2956697">ovf</span>&nbsp;<span class="op" id="2956701">:=</span>&nbsp;<span class="ident" id="2956704"><a href="/strconv/atof.go.html#2956623">d</a></span><span class="op" id="2956705">.</span><span class="ident" id="2956706">floatBits</span><span class="op" id="2956715">(</span><span class="op" id="2956716">&amp;</span><span class="ident" id="2956717"><a href="/strconv/ftoa.go.html#2991116">float64info</a></span><span class="op" id="2956728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956731"><a href="/strconv/atof.go.html#2955989">f</a></span>&nbsp;<span class="op" id="2956733">=</span>&nbsp;<span class="ident" id="2956735"><a href="/strconv/atof.go.html#2946996">math</a></span><span class="op" id="2956739">.</span><span class="ident" id="2956740">Float64frombits</span><span class="op" id="2956755">(</span><span class="ident" id="2956756"><a href="/strconv/atof.go.html#2956694">b</a></span><span class="op" id="2956757">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956760">if</span>&nbsp;<span class="ident" id="2956763"><a href="/strconv/atof.go.html#2956697">ovf</a></span>&nbsp;<span class="op" id="2956767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956771"><a href="/strconv/atof.go.html#2956000">err</a></span>&nbsp;<span class="op" id="2956775">=</span>&nbsp;<span class="ident" id="2956777"><a href="/strconv/atoi.go.html#2958719">rangeError</a></span><span class="op" id="2956787">(</span><span class="ident" id="2956788"><a href="/strconv/atof.go.html#2955052">fnParseFloat</a></span><span class="op" id="2956800">,</span>&nbsp;<span class="ident" id="2956802"><a href="/strconv/atof.go.html#2955978">s</a></span><span class="op" id="2956803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956809">return</span>&nbsp;<span class="ident" id="2956816"><a href="/strconv/atof.go.html#2955989">f</a></span><span class="op" id="2956817">,</span>&nbsp;<span class="ident" id="2956819"><a href="/strconv/atof.go.html#2956000">err</a></span><br>
<span class="lineno"></span><span class="op" id="2956823">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="2956826">//&nbsp;ParseFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;a&nbsp;floating-point&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="2956889">//&nbsp;with&nbsp;the&nbsp;precision&nbsp;specified&nbsp;by&nbsp;bitSize:&nbsp;32&nbsp;for&nbsp;float32,&nbsp;or&nbsp;64&nbsp;for&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2956968">//&nbsp;When&nbsp;bitSize=32,&nbsp;the&nbsp;result&nbsp;still&nbsp;has&nbsp;type&nbsp;float64,&nbsp;but&nbsp;it&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2957038">//&nbsp;convertible&nbsp;to&nbsp;float32&nbsp;without&nbsp;changing&nbsp;its&nbsp;value.</span><br>
<span class="lineno">520</span><span class="comment" id="2957092">//</span><br>
<span class="lineno"></span><span class="comment" id="2957095">//&nbsp;If&nbsp;s&nbsp;is&nbsp;well-formed&nbsp;and&nbsp;near&nbsp;a&nbsp;valid&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="2957158">//&nbsp;ParseFloat&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;floating&nbsp;point&nbsp;number&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2957222">//&nbsp;using&nbsp;IEEE754&nbsp;unbiased&nbsp;rounding.</span><br>
<span class="lineno"></span><span class="comment" id="2957258">//</span><br>
<span class="lineno">525</span><span class="comment" id="2957261">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseFloat&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2957328">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2957356">//</span><br>
<span class="lineno"></span><span class="comment" id="2957359">//&nbsp;If&nbsp;s&nbsp;is&nbsp;not&nbsp;syntactically&nbsp;well-formed,&nbsp;ParseFloat&nbsp;returns&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax.</span><br>
<span class="lineno"></span><span class="comment" id="2957441">//</span><br>
<span class="lineno">530</span><span class="comment" id="2957444">//&nbsp;If&nbsp;s&nbsp;is&nbsp;syntactically&nbsp;well-formed&nbsp;but&nbsp;is&nbsp;more&nbsp;than&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span><span class="comment" id="2957506">//&nbsp;away&nbsp;from&nbsp;the&nbsp;largest&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;the&nbsp;given&nbsp;size,</span><br>
<span class="lineno"></span><span class="comment" id="2957572">//&nbsp;ParseFloat&nbsp;returns&nbsp;f&nbsp;=&nbsp;Inf,&nbsp;err.Err&nbsp;=&nbsp;ErrRange.</span><br>
<span class="lineno"></span><span class="keyword" id="2957625">func</span>&nbsp;<span class="ident" id="2957630">ParseFloat</span><span class="op" id="2957640">(</span><span class="ident" id="2957641">s</span>&nbsp;<span class="builtintype" id="2957643">string</span><span class="op" id="2957649">,</span>&nbsp;<span class="ident" id="2957651">bitSize</span>&nbsp;<span class="builtintype" id="2957659">int</span><span class="op" id="2957662">)</span>&nbsp;<span class="op" id="2957664">(</span><span class="ident" id="2957665">f</span>&nbsp;<span class="builtintype" id="2957667">float64</span><span class="op" id="2957674">,</span>&nbsp;<span class="ident" id="2957676">err</span>&nbsp;<span class="builtintype" id="2957680">error</span><span class="op" id="2957685">)</span>&nbsp;<span class="op" id="2957687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957690">if</span>&nbsp;<span class="ident" id="2957693"><a href="/strconv/atof.go.html#2957651">bitSize</a></span>&nbsp;<span class="op" id="2957701">==</span>&nbsp;<span class="num" id="2957704">32</span>&nbsp;<span class="op" id="2957707">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957711">f1</span><span class="op" id="2957713">,</span>&nbsp;<span class="ident" id="2957715">err1</span>&nbsp;<span class="op" id="2957720">:=</span>&nbsp;<span class="ident" id="2957723"><a href="/strconv/atof.go.html#2955086">atof32</a></span><span class="op" id="2957729">(</span><span class="ident" id="2957730"><a href="/strconv/atof.go.html#2957641">s</a></span><span class="op" id="2957731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957735">return</span>&nbsp;<span class="builtintype" id="2957742">float64</span><span class="op" id="2957749">(</span><span class="ident" id="2957750"><a href="/strconv/atof.go.html#2957711">f1</a></span><span class="op" id="2957752">)</span><span class="op" id="2957753">,</span>&nbsp;<span class="ident" id="2957755"><a href="/strconv/atof.go.html#2957715">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957764">f1</span><span class="op" id="2957766">,</span>&nbsp;<span class="ident" id="2957768">err1</span>&nbsp;<span class="op" id="2957773">:=</span>&nbsp;<span class="ident" id="2957776"><a href="/strconv/atof.go.html#2955971">atof64</a></span><span class="op" id="2957782">(</span><span class="ident" id="2957783"><a href="/strconv/atof.go.html#2957641">s</a></span><span class="op" id="2957784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957787">return</span>&nbsp;<span class="ident" id="2957794"><a href="/strconv/atof.go.html#2957764">f1</a></span><span class="op" id="2957796">,</span>&nbsp;<span class="ident" id="2957798"><a href="/strconv/atof.go.html#2957768">err1</a></span><br>
<span class="lineno">540</span><span class="op" id="2957803">}</span>
</div>
</body>
</html>
