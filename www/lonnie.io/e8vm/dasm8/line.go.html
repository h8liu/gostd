<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4963265">package</span>&nbsp;<span class="ident" id="4963273">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4963280">import</span>&nbsp;<span class="op" id="4963287">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4963290">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4963299">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4963318">&#34;fmt&#34;</span><br>
<span class="lineno"></span><span class="op" id="4963324">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4963327">//&nbsp;Line&nbsp;is&nbsp;a&nbsp;disassembled&nbsp;line</span><br>
<span class="lineno">10</span><span class="keyword" id="4963358">type</span>&nbsp;<span class="ident" id="4963363">Line</span>&nbsp;<span class="keyword" id="4963368">struct</span>&nbsp;<span class="op" id="4963375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963378">Addr</span>&nbsp;<span class="builtintype" id="4963383">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963392">Inst</span>&nbsp;<span class="builtintype" id="4963397">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963405">Str</span>&nbsp;&nbsp;<span class="builtintype" id="4963410">string</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963419">IsJump</span>&nbsp;<span class="builtintype" id="4963426">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963432">To</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4963439">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963447">ToLine</span>&nbsp;<span class="op" id="4963454">*</span><span class="ident" id="4963455">Line</span><br>
<span class="lineno"></span><span class="op" id="4963460">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4963463">func</span>&nbsp;<span class="ident" id="4963468">printables</span><span class="op" id="4963478">(</span><span class="ident" id="4963479">bs</span>&nbsp;<span class="op" id="4963482">[</span><span class="op" id="4963483">]</span><span class="builtintype" id="4963484">byte</span><span class="op" id="4963488">)</span>&nbsp;<span class="builtintype" id="4963490">string</span>&nbsp;<span class="op" id="4963497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963500">ret</span>&nbsp;<span class="op" id="4963504">:=</span>&nbsp;<span class="string" id="4963507">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963511">for</span>&nbsp;<span class="ident" id="4963515">_</span><span class="op" id="4963516">,</span>&nbsp;<span class="ident" id="4963518">b</span>&nbsp;<span class="op" id="4963520">:=</span>&nbsp;<span class="keyword" id="4963523">range</span>&nbsp;<span class="ident" id="4963529">bs</span>&nbsp;<span class="op" id="4963532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963536">r</span>&nbsp;<span class="op" id="4963538">:=</span>&nbsp;<span class="builtintype" id="4963541">rune</span><span class="op" id="4963545">(</span><span class="ident" id="4963546">b</span><span class="op" id="4963547">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963551">if</span>&nbsp;<span class="ident" id="4963554">r</span>&nbsp;<span class="op" id="4963556">&gt;=</span>&nbsp;<span class="string" id="4963559">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4963563">&amp;&amp;</span>&nbsp;<span class="ident" id="4963566">r</span>&nbsp;<span class="op" id="4963568">&lt;=</span>&nbsp;<span class="string" id="4963571">&#39;~&#39;</span>&nbsp;<span class="op" id="4963575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963580">ret</span>&nbsp;<span class="op" id="4963584">+=</span>&nbsp;<span class="builtintype" id="4963587">string</span><span class="op" id="4963593">(</span><span class="ident" id="4963594">r</span><span class="op" id="4963595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963599">}</span>&nbsp;<span class="keyword" id="4963601">else</span>&nbsp;<span class="op" id="4963606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963611">ret</span>&nbsp;<span class="op" id="4963615">+=</span>&nbsp;<span class="string" id="4963618">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963624">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963630">return</span>&nbsp;<span class="ident" id="4963637">ret</span><br>
<span class="lineno"></span><span class="op" id="4963641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4963644">var</span>&nbsp;<span class="ident" id="4963648">enc</span>&nbsp;<span class="op" id="4963652">=</span>&nbsp;<span class="ident" id="4963654">binary</span><span class="op" id="4963660">.</span><span class="ident" id="4963661">LittleEndian</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="4963675">func</span>&nbsp;<span class="op" id="4963680">(</span><span class="ident" id="4963681">line</span>&nbsp;<span class="op" id="4963686">*</span><span class="ident" id="4963687">Line</span><span class="op" id="4963691">)</span>&nbsp;<span class="ident" id="4963693">String</span><span class="op" id="4963699">(</span><span class="op" id="4963700">)</span>&nbsp;<span class="builtintype" id="4963702">string</span>&nbsp;<span class="op" id="4963709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963712">ret</span>&nbsp;<span class="op" id="4963716">:=</span>&nbsp;<span class="builtinfunc" id="4963719">new</span><span class="op" id="4963722">(</span><span class="ident" id="4963723">bytes</span><span class="op" id="4963728">.</span><span class="ident" id="4963729">Buffer</span><span class="op" id="4963735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963738">var</span>&nbsp;<span class="ident" id="4963742">buf</span>&nbsp;<span class="op" id="4963746">[</span><span class="num" id="4963747">4</span><span class="op" id="4963748">]</span><span class="builtintype" id="4963749">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963755">enc</span><span class="op" id="4963758">.</span><span class="ident" id="4963759">PutUint32</span><span class="op" id="4963768">(</span><span class="ident" id="4963769">buf</span><span class="op" id="4963772">[</span><span class="op" id="4963773">:</span><span class="op" id="4963774">]</span><span class="op" id="4963775">,</span>&nbsp;<span class="ident" id="4963777">line</span><span class="op" id="4963781">.</span><span class="ident" id="4963782">Inst</span><span class="op" id="4963786">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963790">fmt</span><span class="op" id="4963793">.</span><span class="ident" id="4963794">Fprintf</span><span class="op" id="4963801">(</span><span class="ident" id="4963802">ret</span><span class="op" id="4963805">,</span>&nbsp;<span class="string" id="4963807">&#34;%08x:&nbsp;&nbsp;%&nbsp;02x&#34;</span><span class="op" id="4963821">,</span>&nbsp;<span class="ident" id="4963823">line</span><span class="op" id="4963827">.</span><span class="ident" id="4963828">Addr</span><span class="op" id="4963832">,</span>&nbsp;<span class="ident" id="4963834">buf</span><span class="op" id="4963837">[</span><span class="op" id="4963838">:</span><span class="op" id="4963839">]</span><span class="op" id="4963840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963843">fmt</span><span class="op" id="4963846">.</span><span class="ident" id="4963847">Fprintf</span><span class="op" id="4963854">(</span><span class="ident" id="4963855">ret</span><span class="op" id="4963858">,</span>&nbsp;<span class="string" id="4963860">&#34;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="4963867">,</span>&nbsp;<span class="ident" id="4963869">printables</span><span class="op" id="4963879">(</span><span class="ident" id="4963880">buf</span><span class="op" id="4963883">[</span><span class="op" id="4963884">:</span><span class="op" id="4963885">]</span><span class="op" id="4963886">)</span><span class="op" id="4963887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963890">fmt</span><span class="op" id="4963893">.</span><span class="ident" id="4963894">Fprintf</span><span class="op" id="4963901">(</span><span class="ident" id="4963902">ret</span><span class="op" id="4963905">,</span>&nbsp;<span class="string" id="4963907">&#34;&nbsp;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="4963915">,</span>&nbsp;<span class="ident" id="4963917">line</span><span class="op" id="4963921">.</span><span class="ident" id="4963922">Str</span><span class="op" id="4963925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963928">if</span>&nbsp;<span class="ident" id="4963931">line</span><span class="op" id="4963935">.</span><span class="ident" id="4963936">IsJump</span>&nbsp;<span class="op" id="4963943">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963947">fmt</span><span class="op" id="4963950">.</span><span class="ident" id="4963951">Fprintf</span><span class="op" id="4963958">(</span><span class="ident" id="4963959">ret</span><span class="op" id="4963962">,</span>&nbsp;<span class="string" id="4963964">&#34;&nbsp;&nbsp;&nbsp;//&nbsp;%08x&#34;</span><span class="op" id="4963976">,</span>&nbsp;<span class="ident" id="4963978">line</span><span class="op" id="4963982">.</span><span class="ident" id="4963983">To</span><span class="op" id="4963985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963992">return</span>&nbsp;<span class="ident" id="4963999">ret</span><span class="op" id="4964002">.</span><span class="ident" id="4964003">String</span><span class="op" id="4964009">(</span><span class="op" id="4964010">)</span><br>
<span class="lineno"></span><span class="op" id="4964012">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4964015">func</span>&nbsp;<span class="ident" id="4964020">newLine</span><span class="op" id="4964027">(</span><span class="ident" id="4964028">addr</span>&nbsp;<span class="builtintype" id="4964033">uint32</span><span class="op" id="4964039">,</span>&nbsp;<span class="ident" id="4964041">in</span>&nbsp;<span class="builtintype" id="4964044">uint32</span><span class="op" id="4964050">)</span>&nbsp;<span class="op" id="4964052">*</span><span class="ident" id="4964053">Line</span>&nbsp;<span class="op" id="4964058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964061">ret</span>&nbsp;<span class="op" id="4964065">:=</span>&nbsp;<span class="builtinfunc" id="4964068">new</span><span class="op" id="4964071">(</span><span class="ident" id="4964072">Line</span><span class="op" id="4964076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964079">ret</span><span class="op" id="4964082">.</span><span class="ident" id="4964083">Addr</span>&nbsp;<span class="op" id="4964088">=</span>&nbsp;<span class="ident" id="4964090">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964096">ret</span><span class="op" id="4964099">.</span><span class="ident" id="4964100">Inst</span>&nbsp;<span class="op" id="4964105">=</span>&nbsp;<span class="ident" id="4964107">in</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964111">return</span>&nbsp;<span class="ident" id="4964118">ret</span><br>
<span class="lineno"></span><span class="op" id="4964122">}</span>
</div>
</body>
</html>
