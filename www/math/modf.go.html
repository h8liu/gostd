<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2072171">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2072226">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2072280">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2072331">package</span>&nbsp;<span class="ident" id="2072339">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2072345">//&nbsp;Modf&nbsp;returns&nbsp;integer&nbsp;and&nbsp;fractional&nbsp;floating-point&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="2072407">//&nbsp;that&nbsp;sum&nbsp;to&nbsp;f.&nbsp;&nbsp;Both&nbsp;values&nbsp;have&nbsp;the&nbsp;same&nbsp;sign&nbsp;as&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="2072463">//</span><br>
<span class="lineno">10</span><span class="comment" id="2072466">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2072488">//&nbsp;&nbsp;&nbsp;&nbspModf(±Inf)&nbsp;=&nbsp;±Inf,&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2072516">//&nbsp;&nbsp;&nbsp;&nbspModf(NaN)&nbsp;=&nbsp;NaN,&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="2072540">func</span>&nbsp;<span class="ident" id="2072545">Modf</span><span class="op" id="2072549">(</span><span class="ident" id="2072550">f</span>&nbsp;<span class="builtintype" id="2072552">float64</span><span class="op" id="2072559">)</span>&nbsp;<span class="op" id="2072561">(</span><span class="builtintype" id="2072562">int</span>&nbsp;<span class="builtintype" id="2072566">float64</span><span class="op" id="2072573">,</span>&nbsp;<span class="ident" id="2072575">frac</span>&nbsp;<span class="builtintype" id="2072580">float64</span><span class="op" id="2072587">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="2072590">func</span>&nbsp;<span class="ident" id="2072595">modf</span><span class="op" id="2072599">(</span><span class="ident" id="2072600">f</span>&nbsp;<span class="builtintype" id="2072602">float64</span><span class="op" id="2072609">)</span>&nbsp;<span class="op" id="2072611">(</span><span class="builtintype" id="2072612">int</span>&nbsp;<span class="builtintype" id="2072616">float64</span><span class="op" id="2072623">,</span>&nbsp;<span class="ident" id="2072625">frac</span>&nbsp;<span class="builtintype" id="2072630">float64</span><span class="op" id="2072637">)</span>&nbsp;<span class="op" id="2072639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072642">if</span>&nbsp;<span class="ident" id="2072645">f</span>&nbsp;<span class="op" id="2072647">&lt;</span>&nbsp;<span class="num" id="2072649">1</span>&nbsp;<span class="op" id="2072651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072655">if</span>&nbsp;<span class="ident" id="2072658">f</span>&nbsp;<span class="op" id="2072660">&lt;</span>&nbsp;<span class="num" id="2072662">0</span>&nbsp;<span class="op" id="2072664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2072669">int</span><span class="op" id="2072672">,</span>&nbsp;<span class="ident" id="2072674">frac</span>&nbsp;<span class="op" id="2072679">=</span>&nbsp;<span class="ident" id="2072681">Modf</span><span class="op" id="2072685">(</span><span class="op" id="2072686">-</span><span class="ident" id="2072687">f</span><span class="op" id="2072688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072693">return</span>&nbsp;<span class="op" id="2072700">-</span><span class="builtintype" id="2072701">int</span><span class="op" id="2072704">,</span>&nbsp;<span class="op" id="2072706">-</span><span class="ident" id="2072707">frac</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072718">return</span>&nbsp;<span class="num" id="2072725">0</span><span class="op" id="2072726">,</span>&nbsp;<span class="ident" id="2072728">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072735">x</span>&nbsp;<span class="op" id="2072737">:=</span>&nbsp;<span class="ident" id="2072740">Float64bits</span><span class="op" id="2072751">(</span><span class="ident" id="2072752">f</span><span class="op" id="2072753">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072756">e</span>&nbsp;<span class="op" id="2072758">:=</span>&nbsp;<span class="builtintype" id="2072761">uint</span><span class="op" id="2072765">(</span><span class="ident" id="2072766">x</span><span class="op" id="2072767">&gt;&gt;</span><span class="ident" id="2072769">shift</span><span class="op" id="2072774">)</span><span class="op" id="2072775">&amp;</span><span class="ident" id="2072776">mask</span>&nbsp;<span class="op" id="2072781">-</span>&nbsp;<span class="ident" id="2072783">bias</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2072790">//&nbsp;Keep&nbsp;the&nbsp;top&nbsp;12+e&nbsp;bits,&nbsp;the&nbsp;integer&nbsp;part;&nbsp;clear&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072852">if</span>&nbsp;<span class="ident" id="2072855">e</span>&nbsp;<span class="op" id="2072857">&lt;</span>&nbsp;<span class="num" id="2072859">64</span><span class="op" id="2072861">-</span><span class="num" id="2072862">12</span>&nbsp;<span class="op" id="2072865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072869">x</span>&nbsp;<span class="op" id="2072871">&amp;^=</span>&nbsp;<span class="num" id="2072875">1</span><span class="op" id="2072876">&lt;&lt;</span><span class="op" id="2072878">(</span><span class="num" id="2072879">64</span><span class="op" id="2072881">-</span><span class="num" id="2072882">12</span><span class="op" id="2072884">-</span><span class="ident" id="2072885">e</span><span class="op" id="2072886">)</span>&nbsp;<span class="op" id="2072888">-</span>&nbsp;<span class="num" id="2072890">1</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2072896">int</span>&nbsp;<span class="op" id="2072900">=</span>&nbsp;<span class="ident" id="2072902">Float64frombits</span><span class="op" id="2072917">(</span><span class="ident" id="2072918">x</span><span class="op" id="2072919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072922">frac</span>&nbsp;<span class="op" id="2072927">=</span>&nbsp;<span class="ident" id="2072929">f</span>&nbsp;<span class="op" id="2072931">-</span>&nbsp;<span class="builtintype" id="2072933">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072938">return</span><br>
<span class="lineno"></span><span class="op" id="2072945">}</span>
</div>
</body>
</html>
