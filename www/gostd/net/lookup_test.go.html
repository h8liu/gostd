<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html" class="current">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6719474">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6719529">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6719583">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6719634">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="6719698">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6719725">package</span>&nbsp;<span class="ident" id="6719733">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6719738">import</span>&nbsp;<span class="op" id="6719745">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6719748">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6719756">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6719767">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6719777">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6719780">var</span>&nbsp;<span class="ident" id="6719784">testExternal</span>&nbsp;<span class="op" id="6719797">=</span>&nbsp;<span class="ident" id="6719799">flag</span><span class="op" id="6719803">.</span><span class="ident" id="6719804">Bool</span><span class="op" id="6719808">(</span><span class="string" id="6719809">&#34;external&#34;</span><span class="op" id="6719819">,</span>&nbsp;<span class="builtintype" id="6719821">true</span><span class="op" id="6719825">,</span>&nbsp;<span class="string" id="6719827">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="6719876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6719879">var</span>&nbsp;<span class="ident" id="6719883">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="6719904">=</span>&nbsp;<span class="op" id="6719906">[</span><span class="op" id="6719907">]</span><span class="keyword" id="6719908">struct</span>&nbsp;<span class="op" id="6719915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719918">service</span><span class="op" id="6719925">,</span>&nbsp;<span class="ident" id="6719927">proto</span><span class="op" id="6719932">,</span>&nbsp;<span class="ident" id="6719934">name</span>&nbsp;<span class="builtintype" id="6719939">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719947">cname</span><span class="op" id="6719952">,</span>&nbsp;<span class="ident" id="6719954">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6719968">string</span><br>
<span class="lineno"></span><span class="op" id="6719975">}</span><span class="op" id="6719976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6719983">&#34;xmpp-server&#34;</span><span class="op" id="6719996">,</span>&nbsp;<span class="string" id="6719998">&#34;tcp&#34;</span><span class="op" id="6720003">,</span>&nbsp;<span class="string" id="6720005">&#34;google.com&#34;</span><span class="op" id="6720017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6720021">&#34;.google.com&#34;</span><span class="op" id="6720034">,</span>&nbsp;<span class="string" id="6720036">&#34;.google.com&#34;</span><span class="op" id="6720049">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720052">}</span><span class="op" id="6720053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6720060">&#34;&#34;</span><span class="op" id="6720062">,</span>&nbsp;<span class="string" id="6720064">&#34;&#34;</span><span class="op" id="6720066">,</span>&nbsp;<span class="string" id="6720068">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="6720098">,</span>&nbsp;<span class="comment" id="6720100">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6720128">&#34;.google.com&#34;</span><span class="op" id="6720141">,</span>&nbsp;<span class="string" id="6720143">&#34;.google.com&#34;</span><span class="op" id="6720156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720159">}</span><span class="op" id="6720160">,</span><br>
<span class="lineno">30</span><span class="op" id="6720162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6720165">func</span>&nbsp;<span class="ident" id="6720170">TestLookupGoogleSRV</span><span class="op" id="6720189">(</span><span class="ident" id="6720190">t</span>&nbsp;<span class="op" id="6720192">*</span><span class="ident" id="6720193">testing</span><span class="op" id="6720200">.</span><span class="ident" id="6720201">T</span><span class="op" id="6720202">)</span>&nbsp;<span class="op" id="6720204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720207">if</span>&nbsp;<span class="ident" id="6720210">testing</span><span class="op" id="6720217">.</span><span class="ident" id="6720218">Short</span><span class="op" id="6720223">(</span><span class="op" id="6720224">)</span>&nbsp;<span class="op" id="6720226">||</span>&nbsp;<span class="op" id="6720229">!</span><span class="op" id="6720230">*</span><span class="ident" id="6720231">testExternal</span>&nbsp;<span class="op" id="6720244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720248">t</span><span class="op" id="6720249">.</span><span class="ident" id="6720250">Skip</span><span class="op" id="6720254">(</span><span class="string" id="6720255">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6720296">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720303">for</span>&nbsp;<span class="ident" id="6720307">_</span><span class="op" id="6720308">,</span>&nbsp;<span class="ident" id="6720310">tt</span>&nbsp;<span class="op" id="6720313">:=</span>&nbsp;<span class="keyword" id="6720316">range</span>&nbsp;<span class="ident" id="6720322">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="6720343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720347">cname</span><span class="op" id="6720352">,</span>&nbsp;<span class="ident" id="6720354">srvs</span><span class="op" id="6720358">,</span>&nbsp;<span class="ident" id="6720360">err</span>&nbsp;<span class="op" id="6720364">:=</span>&nbsp;<span class="ident" id="6720367">LookupSRV</span><span class="op" id="6720376">(</span><span class="ident" id="6720377">tt</span><span class="op" id="6720379">.</span><span class="ident" id="6720380">service</span><span class="op" id="6720387">,</span>&nbsp;<span class="ident" id="6720389">tt</span><span class="op" id="6720391">.</span><span class="ident" id="6720392">proto</span><span class="op" id="6720397">,</span>&nbsp;<span class="ident" id="6720399">tt</span><span class="op" id="6720401">.</span><span class="ident" id="6720402">name</span><span class="op" id="6720406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720410">if</span>&nbsp;<span class="ident" id="6720413">err</span>&nbsp;<span class="op" id="6720417">!=</span>&nbsp;<span class="builtintype" id="6720420">nil</span>&nbsp;<span class="op" id="6720424">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720429">t</span><span class="op" id="6720430">.</span><span class="ident" id="6720431">Fatal</span><span class="op" id="6720436">(</span><span class="ident" id="6720437">err</span><span class="op" id="6720440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720448">if</span>&nbsp;<span class="builtinfunc" id="6720451">len</span><span class="op" id="6720454">(</span><span class="ident" id="6720455">srvs</span><span class="op" id="6720459">)</span>&nbsp;<span class="op" id="6720461">==</span>&nbsp;<span class="num" id="6720464">0</span>&nbsp;<span class="op" id="6720466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720471">t</span><span class="op" id="6720472">.</span><span class="ident" id="6720473">Error</span><span class="op" id="6720478">(</span><span class="string" id="6720479">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6720494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720498">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720502">if</span>&nbsp;<span class="op" id="6720505">!</span><span class="ident" id="6720506">strings</span><span class="op" id="6720513">.</span><span class="ident" id="6720514">Contains</span><span class="op" id="6720522">(</span><span class="ident" id="6720523">cname</span><span class="op" id="6720528">,</span>&nbsp;<span class="ident" id="6720530">tt</span><span class="op" id="6720532">.</span><span class="ident" id="6720533">cname</span><span class="op" id="6720538">)</span>&nbsp;<span class="op" id="6720540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720545">t</span><span class="op" id="6720546">.</span><span class="ident" id="6720547">Errorf</span><span class="op" id="6720553">(</span><span class="string" id="6720554">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6720571">,</span>&nbsp;<span class="ident" id="6720573">cname</span><span class="op" id="6720578">,</span>&nbsp;<span class="ident" id="6720580">tt</span><span class="op" id="6720582">.</span><span class="ident" id="6720583">cname</span><span class="op" id="6720588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720596">for</span>&nbsp;<span class="ident" id="6720600">_</span><span class="op" id="6720601">,</span>&nbsp;<span class="ident" id="6720603">srv</span>&nbsp;<span class="op" id="6720607">:=</span>&nbsp;<span class="keyword" id="6720610">range</span>&nbsp;<span class="ident" id="6720616">srvs</span>&nbsp;<span class="op" id="6720621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720626">if</span>&nbsp;<span class="op" id="6720629">!</span><span class="ident" id="6720630">strings</span><span class="op" id="6720637">.</span><span class="ident" id="6720638">Contains</span><span class="op" id="6720646">(</span><span class="ident" id="6720647">srv</span><span class="op" id="6720650">.</span><span class="ident" id="6720651">Target</span><span class="op" id="6720657">,</span>&nbsp;<span class="ident" id="6720659">tt</span><span class="op" id="6720661">.</span><span class="ident" id="6720662">target</span><span class="op" id="6720668">)</span>&nbsp;<span class="op" id="6720670">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720676">t</span><span class="op" id="6720677">.</span><span class="ident" id="6720678">Errorf</span><span class="op" id="6720684">(</span><span class="string" id="6720685">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6720722">,</span>&nbsp;<span class="ident" id="6720724">srv</span><span class="op" id="6720727">,</span>&nbsp;<span class="ident" id="6720729">tt</span><span class="op" id="6720731">.</span><span class="ident" id="6720732">target</span><span class="op" id="6720738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720750">}</span><br>
<span class="lineno"></span><span class="op" id="6720752">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6720755">func</span>&nbsp;<span class="ident" id="6720760">TestLookupGmailMX</span><span class="op" id="6720777">(</span><span class="ident" id="6720778">t</span>&nbsp;<span class="op" id="6720780">*</span><span class="ident" id="6720781">testing</span><span class="op" id="6720788">.</span><span class="ident" id="6720789">T</span><span class="op" id="6720790">)</span>&nbsp;<span class="op" id="6720792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720795">if</span>&nbsp;<span class="ident" id="6720798">testing</span><span class="op" id="6720805">.</span><span class="ident" id="6720806">Short</span><span class="op" id="6720811">(</span><span class="op" id="6720812">)</span>&nbsp;<span class="op" id="6720814">||</span>&nbsp;<span class="op" id="6720817">!</span><span class="op" id="6720818">*</span><span class="ident" id="6720819">testExternal</span>&nbsp;<span class="op" id="6720832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720836">t</span><span class="op" id="6720837">.</span><span class="ident" id="6720838">Skip</span><span class="op" id="6720842">(</span><span class="string" id="6720843">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6720884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720887">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720891">mxs</span><span class="op" id="6720894">,</span>&nbsp;<span class="ident" id="6720896">err</span>&nbsp;<span class="op" id="6720900">:=</span>&nbsp;<span class="ident" id="6720903">LookupMX</span><span class="op" id="6720911">(</span><span class="string" id="6720912">&#34;gmail.com&#34;</span><span class="op" id="6720923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720926">if</span>&nbsp;<span class="ident" id="6720929">err</span>&nbsp;<span class="op" id="6720933">!=</span>&nbsp;<span class="builtintype" id="6720936">nil</span>&nbsp;<span class="op" id="6720940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720944">t</span><span class="op" id="6720945">.</span><span class="ident" id="6720946">Fatal</span><span class="op" id="6720951">(</span><span class="ident" id="6720952">err</span><span class="op" id="6720955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720958">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720961">if</span>&nbsp;<span class="builtinfunc" id="6720964">len</span><span class="op" id="6720967">(</span><span class="ident" id="6720968">mxs</span><span class="op" id="6720971">)</span>&nbsp;<span class="op" id="6720973">==</span>&nbsp;<span class="num" id="6720976">0</span>&nbsp;<span class="op" id="6720978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720982">t</span><span class="op" id="6720983">.</span><span class="ident" id="6720984">Error</span><span class="op" id="6720989">(</span><span class="string" id="6720990">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6721005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721011">for</span>&nbsp;<span class="ident" id="6721015">_</span><span class="op" id="6721016">,</span>&nbsp;<span class="ident" id="6721018">mx</span>&nbsp;<span class="op" id="6721021">:=</span>&nbsp;<span class="keyword" id="6721024">range</span>&nbsp;<span class="ident" id="6721030">mxs</span>&nbsp;<span class="op" id="6721034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721038">if</span>&nbsp;<span class="op" id="6721041">!</span><span class="ident" id="6721042">strings</span><span class="op" id="6721049">.</span><span class="ident" id="6721050">Contains</span><span class="op" id="6721058">(</span><span class="ident" id="6721059">mx</span><span class="op" id="6721061">.</span><span class="ident" id="6721062">Host</span><span class="op" id="6721066">,</span>&nbsp;<span class="string" id="6721068">&#34;.google.com&#34;</span><span class="op" id="6721081">)</span>&nbsp;<span class="op" id="6721083">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721088">t</span><span class="op" id="6721089">.</span><span class="ident" id="6721090">Errorf</span><span class="op" id="6721096">(</span><span class="string" id="6721097">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6721144">,</span>&nbsp;<span class="ident" id="6721146">mx</span><span class="op" id="6721148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721155">}</span><br>
<span class="lineno"></span><span class="op" id="6721157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6721160">func</span>&nbsp;<span class="ident" id="6721165">TestLookupGmailNS</span><span class="op" id="6721182">(</span><span class="ident" id="6721183">t</span>&nbsp;<span class="op" id="6721185">*</span><span class="ident" id="6721186">testing</span><span class="op" id="6721193">.</span><span class="ident" id="6721194">T</span><span class="op" id="6721195">)</span>&nbsp;<span class="op" id="6721197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721200">if</span>&nbsp;<span class="ident" id="6721203">testing</span><span class="op" id="6721210">.</span><span class="ident" id="6721211">Short</span><span class="op" id="6721216">(</span><span class="op" id="6721217">)</span>&nbsp;<span class="op" id="6721219">||</span>&nbsp;<span class="op" id="6721222">!</span><span class="op" id="6721223">*</span><span class="ident" id="6721224">testExternal</span>&nbsp;<span class="op" id="6721237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721241">t</span><span class="op" id="6721242">.</span><span class="ident" id="6721243">Skip</span><span class="op" id="6721247">(</span><span class="string" id="6721248">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6721289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721296">nss</span><span class="op" id="6721299">,</span>&nbsp;<span class="ident" id="6721301">err</span>&nbsp;<span class="op" id="6721305">:=</span>&nbsp;<span class="ident" id="6721308">LookupNS</span><span class="op" id="6721316">(</span><span class="string" id="6721317">&#34;gmail.com&#34;</span><span class="op" id="6721328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721331">if</span>&nbsp;<span class="ident" id="6721334">err</span>&nbsp;<span class="op" id="6721338">!=</span>&nbsp;<span class="builtintype" id="6721341">nil</span>&nbsp;<span class="op" id="6721345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721349">t</span><span class="op" id="6721350">.</span><span class="ident" id="6721351">Fatal</span><span class="op" id="6721356">(</span><span class="ident" id="6721357">err</span><span class="op" id="6721360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721366">if</span>&nbsp;<span class="builtinfunc" id="6721369">len</span><span class="op" id="6721372">(</span><span class="ident" id="6721373">nss</span><span class="op" id="6721376">)</span>&nbsp;<span class="op" id="6721378">==</span>&nbsp;<span class="num" id="6721381">0</span>&nbsp;<span class="op" id="6721383">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721387">t</span><span class="op" id="6721388">.</span><span class="ident" id="6721389">Error</span><span class="op" id="6721394">(</span><span class="string" id="6721395">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6721410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721416">for</span>&nbsp;<span class="ident" id="6721420">_</span><span class="op" id="6721421">,</span>&nbsp;<span class="ident" id="6721423">ns</span>&nbsp;<span class="op" id="6721426">:=</span>&nbsp;<span class="keyword" id="6721429">range</span>&nbsp;<span class="ident" id="6721435">nss</span>&nbsp;<span class="op" id="6721439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721443">if</span>&nbsp;<span class="op" id="6721446">!</span><span class="ident" id="6721447">strings</span><span class="op" id="6721454">.</span><span class="ident" id="6721455">Contains</span><span class="op" id="6721463">(</span><span class="ident" id="6721464">ns</span><span class="op" id="6721466">.</span><span class="ident" id="6721467">Host</span><span class="op" id="6721471">,</span>&nbsp;<span class="string" id="6721473">&#34;.google.com&#34;</span><span class="op" id="6721486">)</span>&nbsp;<span class="op" id="6721488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721493">t</span><span class="op" id="6721494">.</span><span class="ident" id="6721495">Errorf</span><span class="op" id="6721501">(</span><span class="string" id="6721502">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6721549">,</span>&nbsp;<span class="ident" id="6721551">ns</span><span class="op" id="6721553">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721560">}</span><br>
<span class="lineno"></span><span class="op" id="6721562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6721565">func</span>&nbsp;<span class="ident" id="6721570">TestLookupGmailTXT</span><span class="op" id="6721588">(</span><span class="ident" id="6721589">t</span>&nbsp;<span class="op" id="6721591">*</span><span class="ident" id="6721592">testing</span><span class="op" id="6721599">.</span><span class="ident" id="6721600">T</span><span class="op" id="6721601">)</span>&nbsp;<span class="op" id="6721603">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721606">if</span>&nbsp;<span class="ident" id="6721609">testing</span><span class="op" id="6721616">.</span><span class="ident" id="6721617">Short</span><span class="op" id="6721622">(</span><span class="op" id="6721623">)</span>&nbsp;<span class="op" id="6721625">||</span>&nbsp;<span class="op" id="6721628">!</span><span class="op" id="6721629">*</span><span class="ident" id="6721630">testExternal</span>&nbsp;<span class="op" id="6721643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721647">t</span><span class="op" id="6721648">.</span><span class="ident" id="6721649">Skip</span><span class="op" id="6721653">(</span><span class="string" id="6721654">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6721695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721702">txts</span><span class="op" id="6721706">,</span>&nbsp;<span class="ident" id="6721708">err</span>&nbsp;<span class="op" id="6721712">:=</span>&nbsp;<span class="ident" id="6721715">LookupTXT</span><span class="op" id="6721724">(</span><span class="string" id="6721725">&#34;gmail.com&#34;</span><span class="op" id="6721736">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721739">if</span>&nbsp;<span class="ident" id="6721742">err</span>&nbsp;<span class="op" id="6721746">!=</span>&nbsp;<span class="builtintype" id="6721749">nil</span>&nbsp;<span class="op" id="6721753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721757">t</span><span class="op" id="6721758">.</span><span class="ident" id="6721759">Fatal</span><span class="op" id="6721764">(</span><span class="ident" id="6721765">err</span><span class="op" id="6721768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721774">if</span>&nbsp;<span class="builtinfunc" id="6721777">len</span><span class="op" id="6721780">(</span><span class="ident" id="6721781">txts</span><span class="op" id="6721785">)</span>&nbsp;<span class="op" id="6721787">==</span>&nbsp;<span class="num" id="6721790">0</span>&nbsp;<span class="op" id="6721792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721796">t</span><span class="op" id="6721797">.</span><span class="ident" id="6721798">Error</span><span class="op" id="6721803">(</span><span class="string" id="6721804">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6721819">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721825">for</span>&nbsp;<span class="ident" id="6721829">_</span><span class="op" id="6721830">,</span>&nbsp;<span class="ident" id="6721832">txt</span>&nbsp;<span class="op" id="6721836">:=</span>&nbsp;<span class="keyword" id="6721839">range</span>&nbsp;<span class="ident" id="6721845">txts</span>&nbsp;<span class="op" id="6721850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721854">if</span>&nbsp;<span class="op" id="6721857">!</span><span class="ident" id="6721858">strings</span><span class="op" id="6721865">.</span><span class="ident" id="6721866">Contains</span><span class="op" id="6721874">(</span><span class="ident" id="6721875">txt</span><span class="op" id="6721878">,</span>&nbsp;<span class="string" id="6721880">&#34;spf&#34;</span><span class="op" id="6721885">)</span>&nbsp;<span class="op" id="6721887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721892">t</span><span class="op" id="6721893">.</span><span class="ident" id="6721894">Errorf</span><span class="op" id="6721900">(</span><span class="string" id="6721901">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="6721928">,</span>&nbsp;<span class="ident" id="6721930">txt</span><span class="op" id="6721933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721937">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721940">}</span><br>
<span class="lineno"></span><span class="op" id="6721942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6721945">var</span>&nbsp;<span class="ident" id="6721949">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="6721976">=</span>&nbsp;<span class="op" id="6721978">[</span><span class="op" id="6721979">]</span><span class="keyword" id="6721980">struct</span>&nbsp;<span class="op" id="6721987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721990">addr</span>&nbsp;<span class="builtintype" id="6721995">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722003">name</span>&nbsp;<span class="builtintype" id="6722008">string</span><br>
<span class="lineno"></span><span class="op" id="6722015">}</span><span class="op" id="6722016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722019">{</span><span class="string" id="6722020">&#34;8.8.8.8&#34;</span><span class="op" id="6722029">,</span>&nbsp;<span class="string" id="6722031">&#34;.google.com.&#34;</span><span class="op" id="6722045">}</span><span class="op" id="6722046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722049">{</span><span class="string" id="6722050">&#34;8.8.4.4&#34;</span><span class="op" id="6722059">,</span>&nbsp;<span class="string" id="6722061">&#34;.google.com.&#34;</span><span class="op" id="6722075">}</span><span class="op" id="6722076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722079">{</span><span class="string" id="6722080">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="6722102">,</span>&nbsp;<span class="string" id="6722104">&#34;.google.com.&#34;</span><span class="op" id="6722118">}</span><span class="op" id="6722119">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722122">{</span><span class="string" id="6722123">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="6722145">,</span>&nbsp;<span class="string" id="6722147">&#34;.google.com.&#34;</span><span class="op" id="6722161">}</span><span class="op" id="6722162">,</span><br>
<span class="lineno"></span><span class="op" id="6722164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722167">func</span>&nbsp;<span class="ident" id="6722172">TestLookupGooglePublicDNSAddr</span><span class="op" id="6722201">(</span><span class="ident" id="6722202">t</span>&nbsp;<span class="op" id="6722204">*</span><span class="ident" id="6722205">testing</span><span class="op" id="6722212">.</span><span class="ident" id="6722213">T</span><span class="op" id="6722214">)</span>&nbsp;<span class="op" id="6722216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722219">if</span>&nbsp;<span class="ident" id="6722222">testing</span><span class="op" id="6722229">.</span><span class="ident" id="6722230">Short</span><span class="op" id="6722235">(</span><span class="op" id="6722236">)</span>&nbsp;<span class="op" id="6722238">||</span>&nbsp;<span class="op" id="6722241">!</span><span class="op" id="6722242">*</span><span class="ident" id="6722243">testExternal</span>&nbsp;<span class="op" id="6722256">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722260">t</span><span class="op" id="6722261">.</span><span class="ident" id="6722262">Skip</span><span class="op" id="6722266">(</span><span class="string" id="6722267">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6722308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722315">for</span>&nbsp;<span class="ident" id="6722319">_</span><span class="op" id="6722320">,</span>&nbsp;<span class="ident" id="6722322">tt</span>&nbsp;<span class="op" id="6722325">:=</span>&nbsp;<span class="keyword" id="6722328">range</span>&nbsp;<span class="ident" id="6722334">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="6722361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722365">names</span><span class="op" id="6722370">,</span>&nbsp;<span class="ident" id="6722372">err</span>&nbsp;<span class="op" id="6722376">:=</span>&nbsp;<span class="ident" id="6722379">LookupAddr</span><span class="op" id="6722389">(</span><span class="ident" id="6722390">tt</span><span class="op" id="6722392">.</span><span class="ident" id="6722393">addr</span><span class="op" id="6722397">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722401">if</span>&nbsp;<span class="ident" id="6722404">err</span>&nbsp;<span class="op" id="6722408">!=</span>&nbsp;<span class="builtintype" id="6722411">nil</span>&nbsp;<span class="op" id="6722415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722420">t</span><span class="op" id="6722421">.</span><span class="ident" id="6722422">Fatal</span><span class="op" id="6722427">(</span><span class="ident" id="6722428">err</span><span class="op" id="6722431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722439">if</span>&nbsp;<span class="builtinfunc" id="6722442">len</span><span class="op" id="6722445">(</span><span class="ident" id="6722446">names</span><span class="op" id="6722451">)</span>&nbsp;<span class="op" id="6722453">==</span>&nbsp;<span class="num" id="6722456">0</span>&nbsp;<span class="op" id="6722458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722463">t</span><span class="op" id="6722464">.</span><span class="ident" id="6722465">Error</span><span class="op" id="6722470">(</span><span class="string" id="6722471">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6722486">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722494">for</span>&nbsp;<span class="ident" id="6722498">_</span><span class="op" id="6722499">,</span>&nbsp;<span class="ident" id="6722501">name</span>&nbsp;<span class="op" id="6722506">:=</span>&nbsp;<span class="keyword" id="6722509">range</span>&nbsp;<span class="ident" id="6722515">names</span>&nbsp;<span class="op" id="6722521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722526">if</span>&nbsp;<span class="op" id="6722529">!</span><span class="ident" id="6722530">strings</span><span class="op" id="6722537">.</span><span class="ident" id="6722538">HasSuffix</span><span class="op" id="6722547">(</span><span class="ident" id="6722548">name</span><span class="op" id="6722552">,</span>&nbsp;<span class="ident" id="6722554">tt</span><span class="op" id="6722556">.</span><span class="ident" id="6722557">name</span><span class="op" id="6722561">)</span>&nbsp;<span class="op" id="6722563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722569">t</span><span class="op" id="6722570">.</span><span class="ident" id="6722571">Errorf</span><span class="op" id="6722577">(</span><span class="string" id="6722578">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6722615">,</span>&nbsp;<span class="ident" id="6722617">name</span><span class="op" id="6722621">,</span>&nbsp;<span class="ident" id="6722623">tt</span><span class="op" id="6722625">.</span><span class="ident" id="6722626">name</span><span class="op" id="6722630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722635">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722642">}</span><br>
<span class="lineno"></span><span class="op" id="6722644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722647">func</span>&nbsp;<span class="ident" id="6722652">TestLookupIANACNAME</span><span class="op" id="6722671">(</span><span class="ident" id="6722672">t</span>&nbsp;<span class="op" id="6722674">*</span><span class="ident" id="6722675">testing</span><span class="op" id="6722682">.</span><span class="ident" id="6722683">T</span><span class="op" id="6722684">)</span>&nbsp;<span class="op" id="6722686">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722689">if</span>&nbsp;<span class="ident" id="6722692">testing</span><span class="op" id="6722699">.</span><span class="ident" id="6722700">Short</span><span class="op" id="6722705">(</span><span class="op" id="6722706">)</span>&nbsp;<span class="op" id="6722708">||</span>&nbsp;<span class="op" id="6722711">!</span><span class="op" id="6722712">*</span><span class="ident" id="6722713">testExternal</span>&nbsp;<span class="op" id="6722726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722730">t</span><span class="op" id="6722731">.</span><span class="ident" id="6722732">Skip</span><span class="op" id="6722736">(</span><span class="string" id="6722737">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6722778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722785">cname</span><span class="op" id="6722790">,</span>&nbsp;<span class="ident" id="6722792">err</span>&nbsp;<span class="op" id="6722796">:=</span>&nbsp;<span class="ident" id="6722799">LookupCNAME</span><span class="op" id="6722810">(</span><span class="string" id="6722811">&#34;www.iana.org&#34;</span><span class="op" id="6722825">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722828">if</span>&nbsp;<span class="ident" id="6722831">err</span>&nbsp;<span class="op" id="6722835">!=</span>&nbsp;<span class="builtintype" id="6722838">nil</span>&nbsp;<span class="op" id="6722842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722846">t</span><span class="op" id="6722847">.</span><span class="ident" id="6722848">Fatal</span><span class="op" id="6722853">(</span><span class="ident" id="6722854">err</span><span class="op" id="6722857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722863">if</span>&nbsp;<span class="op" id="6722866">!</span><span class="ident" id="6722867">strings</span><span class="op" id="6722874">.</span><span class="ident" id="6722875">HasSuffix</span><span class="op" id="6722884">(</span><span class="ident" id="6722885">cname</span><span class="op" id="6722890">,</span>&nbsp;<span class="string" id="6722892">&#34;.icann.org.&#34;</span><span class="op" id="6722905">)</span>&nbsp;<span class="op" id="6722907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722911">t</span><span class="op" id="6722912">.</span><span class="ident" id="6722913">Errorf</span><span class="op" id="6722919">(</span><span class="string" id="6722920">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="6722966">,</span>&nbsp;<span class="ident" id="6722968">cname</span><span class="op" id="6722973">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722976">}</span><br>
<span class="lineno"></span><span class="op" id="6722978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722981">func</span>&nbsp;<span class="ident" id="6722986">TestLookupGoogleHost</span><span class="op" id="6723006">(</span><span class="ident" id="6723007">t</span>&nbsp;<span class="op" id="6723009">*</span><span class="ident" id="6723010">testing</span><span class="op" id="6723017">.</span><span class="ident" id="6723018">T</span><span class="op" id="6723019">)</span>&nbsp;<span class="op" id="6723021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723024">if</span>&nbsp;<span class="ident" id="6723027">testing</span><span class="op" id="6723034">.</span><span class="ident" id="6723035">Short</span><span class="op" id="6723040">(</span><span class="op" id="6723041">)</span>&nbsp;<span class="op" id="6723043">||</span>&nbsp;<span class="op" id="6723046">!</span><span class="op" id="6723047">*</span><span class="ident" id="6723048">testExternal</span>&nbsp;<span class="op" id="6723061">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723065">t</span><span class="op" id="6723066">.</span><span class="ident" id="6723067">Skip</span><span class="op" id="6723071">(</span><span class="string" id="6723072">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6723113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723120">addrs</span><span class="op" id="6723125">,</span>&nbsp;<span class="ident" id="6723127">err</span>&nbsp;<span class="op" id="6723131">:=</span>&nbsp;<span class="ident" id="6723134">LookupHost</span><span class="op" id="6723144">(</span><span class="string" id="6723145">&#34;google.com&#34;</span><span class="op" id="6723157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723160">if</span>&nbsp;<span class="ident" id="6723163">err</span>&nbsp;<span class="op" id="6723167">!=</span>&nbsp;<span class="builtintype" id="6723170">nil</span>&nbsp;<span class="op" id="6723174">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723178">t</span><span class="op" id="6723179">.</span><span class="ident" id="6723180">Fatal</span><span class="op" id="6723185">(</span><span class="ident" id="6723186">err</span><span class="op" id="6723189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723195">if</span>&nbsp;<span class="builtinfunc" id="6723198">len</span><span class="op" id="6723201">(</span><span class="ident" id="6723202">addrs</span><span class="op" id="6723207">)</span>&nbsp;<span class="op" id="6723209">==</span>&nbsp;<span class="num" id="6723212">0</span>&nbsp;<span class="op" id="6723214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723218">t</span><span class="op" id="6723219">.</span><span class="ident" id="6723220">Error</span><span class="op" id="6723225">(</span><span class="string" id="6723226">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6723241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723244">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723247">for</span>&nbsp;<span class="ident" id="6723251">_</span><span class="op" id="6723252">,</span>&nbsp;<span class="ident" id="6723254">addr</span>&nbsp;<span class="op" id="6723259">:=</span>&nbsp;<span class="keyword" id="6723262">range</span>&nbsp;<span class="ident" id="6723268">addrs</span>&nbsp;<span class="op" id="6723274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723278">if</span>&nbsp;<span class="ident" id="6723281">ParseIP</span><span class="op" id="6723288">(</span><span class="ident" id="6723289">addr</span><span class="op" id="6723293">)</span>&nbsp;<span class="op" id="6723295">==</span>&nbsp;<span class="builtintype" id="6723298">nil</span>&nbsp;<span class="op" id="6723302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723307">t</span><span class="op" id="6723308">.</span><span class="ident" id="6723309">Errorf</span><span class="op" id="6723315">(</span><span class="string" id="6723316">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6723351">,</span>&nbsp;<span class="ident" id="6723353">addr</span><span class="op" id="6723357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723364">}</span><br>
<span class="lineno">175</span><span class="op" id="6723366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6723369">func</span>&nbsp;<span class="ident" id="6723374">TestLookupGoogleIP</span><span class="op" id="6723392">(</span><span class="ident" id="6723393">t</span>&nbsp;<span class="op" id="6723395">*</span><span class="ident" id="6723396">testing</span><span class="op" id="6723403">.</span><span class="ident" id="6723404">T</span><span class="op" id="6723405">)</span>&nbsp;<span class="op" id="6723407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723410">if</span>&nbsp;<span class="ident" id="6723413">testing</span><span class="op" id="6723420">.</span><span class="ident" id="6723421">Short</span><span class="op" id="6723426">(</span><span class="op" id="6723427">)</span>&nbsp;<span class="op" id="6723429">||</span>&nbsp;<span class="op" id="6723432">!</span><span class="op" id="6723433">*</span><span class="ident" id="6723434">testExternal</span>&nbsp;<span class="op" id="6723447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723451">t</span><span class="op" id="6723452">.</span><span class="ident" id="6723453">Skip</span><span class="op" id="6723457">(</span><span class="string" id="6723458">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6723499">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723506">ips</span><span class="op" id="6723509">,</span>&nbsp;<span class="ident" id="6723511">err</span>&nbsp;<span class="op" id="6723515">:=</span>&nbsp;<span class="ident" id="6723518">LookupIP</span><span class="op" id="6723526">(</span><span class="string" id="6723527">&#34;google.com&#34;</span><span class="op" id="6723539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723542">if</span>&nbsp;<span class="ident" id="6723545">err</span>&nbsp;<span class="op" id="6723549">!=</span>&nbsp;<span class="builtintype" id="6723552">nil</span>&nbsp;<span class="op" id="6723556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723560">t</span><span class="op" id="6723561">.</span><span class="ident" id="6723562">Fatal</span><span class="op" id="6723567">(</span><span class="ident" id="6723568">err</span><span class="op" id="6723571">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723577">if</span>&nbsp;<span class="builtinfunc" id="6723580">len</span><span class="op" id="6723583">(</span><span class="ident" id="6723584">ips</span><span class="op" id="6723587">)</span>&nbsp;<span class="op" id="6723589">==</span>&nbsp;<span class="num" id="6723592">0</span>&nbsp;<span class="op" id="6723594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723598">t</span><span class="op" id="6723599">.</span><span class="ident" id="6723600">Error</span><span class="op" id="6723605">(</span><span class="string" id="6723606">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6723621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723627">for</span>&nbsp;<span class="ident" id="6723631">_</span><span class="op" id="6723632">,</span>&nbsp;<span class="ident" id="6723634">ip</span>&nbsp;<span class="op" id="6723637">:=</span>&nbsp;<span class="keyword" id="6723640">range</span>&nbsp;<span class="ident" id="6723646">ips</span>&nbsp;<span class="op" id="6723650">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6723654">if</span>&nbsp;<span class="ident" id="6723657">ip</span><span class="op" id="6723659">.</span><span class="ident" id="6723660">To4</span><span class="op" id="6723663">(</span><span class="op" id="6723664">)</span>&nbsp;<span class="op" id="6723666">==</span>&nbsp;<span class="builtintype" id="6723669">nil</span>&nbsp;<span class="op" id="6723673">&amp;&amp;</span>&nbsp;<span class="ident" id="6723676">ip</span><span class="op" id="6723678">.</span><span class="ident" id="6723679">To16</span><span class="op" id="6723683">(</span><span class="op" id="6723684">)</span>&nbsp;<span class="op" id="6723686">==</span>&nbsp;<span class="builtintype" id="6723689">nil</span>&nbsp;<span class="op" id="6723693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723698">t</span><span class="op" id="6723699">.</span><span class="ident" id="6723700">Errorf</span><span class="op" id="6723706">(</span><span class="string" id="6723707">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6723735">,</span>&nbsp;<span class="ident" id="6723737">ip</span><span class="op" id="6723739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723746">}</span><br>
<span class="lineno"></span><span class="op" id="6723748">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="6723751">var</span>&nbsp;<span class="ident" id="6723755">revAddrTests</span>&nbsp;<span class="op" id="6723768">=</span>&nbsp;<span class="op" id="6723770">[</span><span class="op" id="6723771">]</span><span class="keyword" id="6723772">struct</span>&nbsp;<span class="op" id="6723779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723782">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6723792">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723800">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6723810">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6723818">ErrPrefix</span>&nbsp;<span class="builtintype" id="6723828">string</span><br>
<span class="lineno">200</span><span class="op" id="6723835">}</span><span class="op" id="6723836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723839">{</span><span class="string" id="6723840">&#34;1.2.3.4&#34;</span><span class="op" id="6723849">,</span>&nbsp;<span class="string" id="6723851">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="6723874">,</span>&nbsp;<span class="string" id="6723876">&#34;&#34;</span><span class="op" id="6723878">}</span><span class="op" id="6723879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723882">{</span><span class="string" id="6723883">&#34;245.110.36.114&#34;</span><span class="op" id="6723899">,</span>&nbsp;<span class="string" id="6723901">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="6723931">,</span>&nbsp;<span class="string" id="6723933">&#34;&#34;</span><span class="op" id="6723935">}</span><span class="op" id="6723936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723939">{</span><span class="string" id="6723940">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="6723960">,</span>&nbsp;<span class="string" id="6723962">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="6723989">,</span>&nbsp;<span class="string" id="6723991">&#34;&#34;</span><span class="op" id="6723993">}</span><span class="op" id="6723994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6723997">{</span><span class="string" id="6723998">&#34;::1&#34;</span><span class="op" id="6724003">,</span>&nbsp;<span class="string" id="6724005">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6724080">,</span>&nbsp;<span class="string" id="6724082">&#34;&#34;</span><span class="op" id="6724084">}</span><span class="op" id="6724085">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724088">{</span><span class="string" id="6724089">&#34;1::&#34;</span><span class="op" id="6724094">,</span>&nbsp;<span class="string" id="6724096">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6724171">,</span>&nbsp;<span class="string" id="6724173">&#34;&#34;</span><span class="op" id="6724175">}</span><span class="op" id="6724176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724179">{</span><span class="string" id="6724180">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="6724200">,</span>&nbsp;<span class="string" id="6724202">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6724277">,</span>&nbsp;<span class="string" id="6724279">&#34;&#34;</span><span class="op" id="6724281">}</span><span class="op" id="6724282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724285">{</span><span class="string" id="6724286">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="6724325">,</span>&nbsp;<span class="string" id="6724327">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6724402">,</span>&nbsp;<span class="string" id="6724404">&#34;&#34;</span><span class="op" id="6724406">}</span><span class="op" id="6724407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724410">{</span><span class="string" id="6724411">&#34;1.2.3&#34;</span><span class="op" id="6724418">,</span>&nbsp;<span class="string" id="6724420">&#34;&#34;</span><span class="op" id="6724422">,</span>&nbsp;<span class="string" id="6724424">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6724446">}</span><span class="op" id="6724447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724450">{</span><span class="string" id="6724451">&#34;1.2.3.4.5&#34;</span><span class="op" id="6724462">,</span>&nbsp;<span class="string" id="6724464">&#34;&#34;</span><span class="op" id="6724466">,</span>&nbsp;<span class="string" id="6724468">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6724490">}</span><span class="op" id="6724491">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724494">{</span><span class="string" id="6724495">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="6724521">,</span>&nbsp;<span class="string" id="6724523">&#34;&#34;</span><span class="op" id="6724525">,</span>&nbsp;<span class="string" id="6724527">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6724549">}</span><span class="op" id="6724550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724553">{</span><span class="string" id="6724554">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="6724585">,</span>&nbsp;<span class="string" id="6724587">&#34;&#34;</span><span class="op" id="6724589">,</span>&nbsp;<span class="string" id="6724591">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6724613">}</span><span class="op" id="6724614">,</span><br>
<span class="lineno"></span><span class="op" id="6724616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6724619">func</span>&nbsp;<span class="ident" id="6724624">TestReverseAddress</span><span class="op" id="6724642">(</span><span class="ident" id="6724643">t</span>&nbsp;<span class="op" id="6724645">*</span><span class="ident" id="6724646">testing</span><span class="op" id="6724653">.</span><span class="ident" id="6724654">T</span><span class="op" id="6724655">)</span>&nbsp;<span class="op" id="6724657">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6724660">for</span>&nbsp;<span class="ident" id="6724664">i</span><span class="op" id="6724665">,</span>&nbsp;<span class="ident" id="6724667">tt</span>&nbsp;<span class="op" id="6724670">:=</span>&nbsp;<span class="keyword" id="6724673">range</span>&nbsp;<span class="ident" id="6724679">revAddrTests</span>&nbsp;<span class="op" id="6724692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6724696">a</span><span class="op" id="6724697">,</span>&nbsp;<span class="ident" id="6724699">err</span>&nbsp;<span class="op" id="6724703">:=</span>&nbsp;<span class="ident" id="6724706">reverseaddr</span><span class="op" id="6724717">(</span><span class="ident" id="6724718">tt</span><span class="op" id="6724720">.</span><span class="ident" id="6724721">Addr</span><span class="op" id="6724725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6724729">if</span>&nbsp;<span class="builtinfunc" id="6724732">len</span><span class="op" id="6724735">(</span><span class="ident" id="6724736">tt</span><span class="op" id="6724738">.</span><span class="ident" id="6724739">ErrPrefix</span><span class="op" id="6724748">)</span>&nbsp;<span class="op" id="6724750">&gt;</span>&nbsp;<span class="num" id="6724752">0</span>&nbsp;<span class="op" id="6724754">&amp;&amp;</span>&nbsp;<span class="ident" id="6724757">err</span>&nbsp;<span class="op" id="6724761">==</span>&nbsp;<span class="builtintype" id="6724764">nil</span>&nbsp;<span class="op" id="6724768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6724773">t</span><span class="op" id="6724774">.</span><span class="ident" id="6724775">Errorf</span><span class="op" id="6724781">(</span><span class="string" id="6724782">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="6724819">,</span>&nbsp;<span class="ident" id="6724821">i</span><span class="op" id="6724822">,</span>&nbsp;<span class="ident" id="6724824">tt</span><span class="op" id="6724826">.</span><span class="ident" id="6724827">ErrPrefix</span><span class="op" id="6724836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6724841">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6724856">if</span>&nbsp;<span class="builtinfunc" id="6724859">len</span><span class="op" id="6724862">(</span><span class="ident" id="6724863">tt</span><span class="op" id="6724865">.</span><span class="ident" id="6724866">ErrPrefix</span><span class="op" id="6724875">)</span>&nbsp;<span class="op" id="6724877">==</span>&nbsp;<span class="num" id="6724880">0</span>&nbsp;<span class="op" id="6724882">&amp;&amp;</span>&nbsp;<span class="ident" id="6724885">err</span>&nbsp;<span class="op" id="6724889">!=</span>&nbsp;<span class="builtintype" id="6724892">nil</span>&nbsp;<span class="op" id="6724896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6724901">t</span><span class="op" id="6724902">.</span><span class="ident" id="6724903">Errorf</span><span class="op" id="6724909">(</span><span class="string" id="6724910">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="6724947">,</span>&nbsp;<span class="ident" id="6724949">i</span><span class="op" id="6724950">,</span>&nbsp;<span class="ident" id="6724952">err</span><span class="op" id="6724955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6724959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6724963">if</span>&nbsp;<span class="ident" id="6724966">err</span>&nbsp;<span class="op" id="6724970">!=</span>&nbsp;<span class="builtintype" id="6724973">nil</span>&nbsp;<span class="op" id="6724977">&amp;&amp;</span>&nbsp;<span class="ident" id="6724980">err</span><span class="op" id="6724983">.</span><span class="op" id="6724984">(</span><span class="op" id="6724985">*</span><span class="ident" id="6724986">DNSError</span><span class="op" id="6724994">)</span><span class="op" id="6724995">.</span><span class="ident" id="6724996">Err</span>&nbsp;<span class="op" id="6725000">!=</span>&nbsp;<span class="ident" id="6725003">tt</span><span class="op" id="6725005">.</span><span class="ident" id="6725006">ErrPrefix</span>&nbsp;<span class="op" id="6725016">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725021">t</span><span class="op" id="6725022">.</span><span class="ident" id="6725023">Errorf</span><span class="op" id="6725029">(</span><span class="string" id="6725030">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="6725075">,</span>&nbsp;<span class="ident" id="6725077">i</span><span class="op" id="6725078">,</span>&nbsp;<span class="ident" id="6725080">tt</span><span class="op" id="6725082">.</span><span class="ident" id="6725083">ErrPrefix</span><span class="op" id="6725092">,</span>&nbsp;<span class="ident" id="6725094">err</span><span class="op" id="6725097">.</span><span class="op" id="6725098">(</span><span class="op" id="6725099">*</span><span class="ident" id="6725100">DNSError</span><span class="op" id="6725108">)</span><span class="op" id="6725109">.</span><span class="ident" id="6725110">Err</span><span class="op" id="6725113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725121">if</span>&nbsp;<span class="ident" id="6725124">a</span>&nbsp;<span class="op" id="6725126">!=</span>&nbsp;<span class="ident" id="6725129">tt</span><span class="op" id="6725131">.</span><span class="ident" id="6725132">Reverse</span>&nbsp;<span class="op" id="6725140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725145">t</span><span class="op" id="6725146">.</span><span class="ident" id="6725147">Errorf</span><span class="op" id="6725153">(</span><span class="string" id="6725154">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="6725198">,</span>&nbsp;<span class="ident" id="6725200">i</span><span class="op" id="6725201">,</span>&nbsp;<span class="ident" id="6725203">tt</span><span class="op" id="6725205">.</span><span class="ident" id="6725206">Reverse</span><span class="op" id="6725213">,</span>&nbsp;<span class="ident" id="6725215">a</span><span class="op" id="6725216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725220">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725223">}</span><br>
<span class="lineno"></span><span class="op" id="6725225">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
