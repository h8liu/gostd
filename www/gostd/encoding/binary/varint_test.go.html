<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html" class="current">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6416608">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6416663">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6416717">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6416768">package</span>&nbsp;<span class="ident" id="6416776">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6416784">import</span>&nbsp;<span class="op" id="6416791">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416794">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416803">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416809">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6416819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6416822">func</span>&nbsp;<span class="ident" id="6416827">testConstant</span><span class="op" id="6416839">(</span><span class="ident" id="6416840">t</span>&nbsp;<span class="op" id="6416842">*</span><span class="ident" id="6416843">testing</span><span class="op" id="6416850">.</span><span class="ident" id="6416851">T</span><span class="op" id="6416852">,</span>&nbsp;<span class="ident" id="6416854">w</span>&nbsp;<span class="builtintype" id="6416856">uint</span><span class="op" id="6416860">,</span>&nbsp;<span class="ident" id="6416862">max</span>&nbsp;<span class="builtintype" id="6416866">int</span><span class="op" id="6416869">)</span>&nbsp;<span class="op" id="6416871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416874">buf</span>&nbsp;<span class="op" id="6416878">:=</span>&nbsp;<span class="builtinfunc" id="6416881">make</span><span class="op" id="6416885">(</span><span class="op" id="6416886">[</span><span class="op" id="6416887">]</span><span class="builtintype" id="6416888">byte</span><span class="op" id="6416892">,</span>&nbsp;<span class="ident" id="6416894">MaxVarintLen64</span><span class="op" id="6416908">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416911">n</span>&nbsp;<span class="op" id="6416913">:=</span>&nbsp;<span class="ident" id="6416916">PutUvarint</span><span class="op" id="6416926">(</span><span class="ident" id="6416927">buf</span><span class="op" id="6416930">,</span>&nbsp;<span class="num" id="6416932">1</span><span class="op" id="6416933">&lt;&lt;</span><span class="ident" id="6416935">w</span><span class="op" id="6416936">-</span><span class="num" id="6416937">1</span><span class="op" id="6416938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416941">if</span>&nbsp;<span class="ident" id="6416944">n</span>&nbsp;<span class="op" id="6416946">!=</span>&nbsp;<span class="ident" id="6416949">max</span>&nbsp;<span class="op" id="6416953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416957">t</span><span class="op" id="6416958">.</span><span class="ident" id="6416959">Errorf</span><span class="op" id="6416965">(</span><span class="string" id="6416966">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6416996">,</span>&nbsp;<span class="ident" id="6416998">w</span><span class="op" id="6416999">,</span>&nbsp;<span class="ident" id="6417001">max</span><span class="op" id="6417004">,</span>&nbsp;<span class="ident" id="6417006">n</span><span class="op" id="6417007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417010">}</span><br>
<span class="lineno"></span><span class="op" id="6417012">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6417015">func</span>&nbsp;<span class="ident" id="6417020">TestConstants</span><span class="op" id="6417033">(</span><span class="ident" id="6417034">t</span>&nbsp;<span class="op" id="6417036">*</span><span class="ident" id="6417037">testing</span><span class="op" id="6417044">.</span><span class="ident" id="6417045">T</span><span class="op" id="6417046">)</span>&nbsp;<span class="op" id="6417048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417051">testConstant</span><span class="op" id="6417063">(</span><span class="ident" id="6417064">t</span><span class="op" id="6417065">,</span>&nbsp;<span class="num" id="6417067">16</span><span class="op" id="6417069">,</span>&nbsp;<span class="ident" id="6417071">MaxVarintLen16</span><span class="op" id="6417085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417088">testConstant</span><span class="op" id="6417100">(</span><span class="ident" id="6417101">t</span><span class="op" id="6417102">,</span>&nbsp;<span class="num" id="6417104">32</span><span class="op" id="6417106">,</span>&nbsp;<span class="ident" id="6417108">MaxVarintLen32</span><span class="op" id="6417122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417125">testConstant</span><span class="op" id="6417137">(</span><span class="ident" id="6417138">t</span><span class="op" id="6417139">,</span>&nbsp;<span class="num" id="6417141">64</span><span class="op" id="6417143">,</span>&nbsp;<span class="ident" id="6417145">MaxVarintLen64</span><span class="op" id="6417159">)</span><br>
<span class="lineno">25</span><span class="op" id="6417161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6417164">func</span>&nbsp;<span class="ident" id="6417169">testVarint</span><span class="op" id="6417179">(</span><span class="ident" id="6417180">t</span>&nbsp;<span class="op" id="6417182">*</span><span class="ident" id="6417183">testing</span><span class="op" id="6417190">.</span><span class="ident" id="6417191">T</span><span class="op" id="6417192">,</span>&nbsp;<span class="ident" id="6417194">x</span>&nbsp;<span class="builtintype" id="6417196">int64</span><span class="op" id="6417201">)</span>&nbsp;<span class="op" id="6417203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417206">buf</span>&nbsp;<span class="op" id="6417210">:=</span>&nbsp;<span class="builtinfunc" id="6417213">make</span><span class="op" id="6417217">(</span><span class="op" id="6417218">[</span><span class="op" id="6417219">]</span><span class="builtintype" id="6417220">byte</span><span class="op" id="6417224">,</span>&nbsp;<span class="ident" id="6417226">MaxVarintLen64</span><span class="op" id="6417240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417243">n</span>&nbsp;<span class="op" id="6417245">:=</span>&nbsp;<span class="ident" id="6417248">PutVarint</span><span class="op" id="6417257">(</span><span class="ident" id="6417258">buf</span><span class="op" id="6417261">,</span>&nbsp;<span class="ident" id="6417263">x</span><span class="op" id="6417264">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417267">y</span><span class="op" id="6417268">,</span>&nbsp;<span class="ident" id="6417270">m</span>&nbsp;<span class="op" id="6417272">:=</span>&nbsp;<span class="ident" id="6417275">Varint</span><span class="op" id="6417281">(</span><span class="ident" id="6417282">buf</span><span class="op" id="6417285">[</span><span class="num" id="6417286">0</span><span class="op" id="6417287">:</span><span class="ident" id="6417288">n</span><span class="op" id="6417289">]</span><span class="op" id="6417290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417293">if</span>&nbsp;<span class="ident" id="6417296">x</span>&nbsp;<span class="op" id="6417298">!=</span>&nbsp;<span class="ident" id="6417301">y</span>&nbsp;<span class="op" id="6417303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417307">t</span><span class="op" id="6417308">.</span><span class="ident" id="6417309">Errorf</span><span class="op" id="6417315">(</span><span class="string" id="6417316">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6417336">,</span>&nbsp;<span class="ident" id="6417338">x</span><span class="op" id="6417339">,</span>&nbsp;<span class="ident" id="6417341">y</span><span class="op" id="6417342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417348">if</span>&nbsp;<span class="ident" id="6417351">n</span>&nbsp;<span class="op" id="6417353">!=</span>&nbsp;<span class="ident" id="6417356">m</span>&nbsp;<span class="op" id="6417358">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417362">t</span><span class="op" id="6417363">.</span><span class="ident" id="6417364">Errorf</span><span class="op" id="6417370">(</span><span class="string" id="6417371">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6417404">,</span>&nbsp;<span class="ident" id="6417406">x</span><span class="op" id="6417407">,</span>&nbsp;<span class="ident" id="6417409">m</span><span class="op" id="6417410">,</span>&nbsp;<span class="ident" id="6417412">n</span><span class="op" id="6417413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417420">y</span><span class="op" id="6417421">,</span>&nbsp;<span class="ident" id="6417423">err</span>&nbsp;<span class="op" id="6417427">:=</span>&nbsp;<span class="ident" id="6417430">ReadVarint</span><span class="op" id="6417440">(</span><span class="ident" id="6417441">bytes</span><span class="op" id="6417446">.</span><span class="ident" id="6417447">NewReader</span><span class="op" id="6417456">(</span><span class="ident" id="6417457">buf</span><span class="op" id="6417460">)</span><span class="op" id="6417461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417464">if</span>&nbsp;<span class="ident" id="6417467">err</span>&nbsp;<span class="op" id="6417471">!=</span>&nbsp;<span class="builtintype" id="6417474">nil</span>&nbsp;<span class="op" id="6417478">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417482">t</span><span class="op" id="6417483">.</span><span class="ident" id="6417484">Errorf</span><span class="op" id="6417490">(</span><span class="string" id="6417491">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="6417511">,</span>&nbsp;<span class="ident" id="6417513">x</span><span class="op" id="6417514">,</span>&nbsp;<span class="ident" id="6417516">err</span><span class="op" id="6417519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417525">if</span>&nbsp;<span class="ident" id="6417528">x</span>&nbsp;<span class="op" id="6417530">!=</span>&nbsp;<span class="ident" id="6417533">y</span>&nbsp;<span class="op" id="6417535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417539">t</span><span class="op" id="6417540">.</span><span class="ident" id="6417541">Errorf</span><span class="op" id="6417547">(</span><span class="string" id="6417548">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6417572">,</span>&nbsp;<span class="ident" id="6417574">x</span><span class="op" id="6417575">,</span>&nbsp;<span class="ident" id="6417577">y</span><span class="op" id="6417578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417581">}</span><br>
<span class="lineno">45</span><span class="op" id="6417583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6417586">func</span>&nbsp;<span class="ident" id="6417591">testUvarint</span><span class="op" id="6417602">(</span><span class="ident" id="6417603">t</span>&nbsp;<span class="op" id="6417605">*</span><span class="ident" id="6417606">testing</span><span class="op" id="6417613">.</span><span class="ident" id="6417614">T</span><span class="op" id="6417615">,</span>&nbsp;<span class="ident" id="6417617">x</span>&nbsp;<span class="builtintype" id="6417619">uint64</span><span class="op" id="6417625">)</span>&nbsp;<span class="op" id="6417627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417630">buf</span>&nbsp;<span class="op" id="6417634">:=</span>&nbsp;<span class="builtinfunc" id="6417637">make</span><span class="op" id="6417641">(</span><span class="op" id="6417642">[</span><span class="op" id="6417643">]</span><span class="builtintype" id="6417644">byte</span><span class="op" id="6417648">,</span>&nbsp;<span class="ident" id="6417650">MaxVarintLen64</span><span class="op" id="6417664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417667">n</span>&nbsp;<span class="op" id="6417669">:=</span>&nbsp;<span class="ident" id="6417672">PutUvarint</span><span class="op" id="6417682">(</span><span class="ident" id="6417683">buf</span><span class="op" id="6417686">,</span>&nbsp;<span class="ident" id="6417688">x</span><span class="op" id="6417689">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417692">y</span><span class="op" id="6417693">,</span>&nbsp;<span class="ident" id="6417695">m</span>&nbsp;<span class="op" id="6417697">:=</span>&nbsp;<span class="ident" id="6417700">Uvarint</span><span class="op" id="6417707">(</span><span class="ident" id="6417708">buf</span><span class="op" id="6417711">[</span><span class="num" id="6417712">0</span><span class="op" id="6417713">:</span><span class="ident" id="6417714">n</span><span class="op" id="6417715">]</span><span class="op" id="6417716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417719">if</span>&nbsp;<span class="ident" id="6417722">x</span>&nbsp;<span class="op" id="6417724">!=</span>&nbsp;<span class="ident" id="6417727">y</span>&nbsp;<span class="op" id="6417729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417733">t</span><span class="op" id="6417734">.</span><span class="ident" id="6417735">Errorf</span><span class="op" id="6417741">(</span><span class="string" id="6417742">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6417763">,</span>&nbsp;<span class="ident" id="6417765">x</span><span class="op" id="6417766">,</span>&nbsp;<span class="ident" id="6417768">y</span><span class="op" id="6417769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417775">if</span>&nbsp;<span class="ident" id="6417778">n</span>&nbsp;<span class="op" id="6417780">!=</span>&nbsp;<span class="ident" id="6417783">m</span>&nbsp;<span class="op" id="6417785">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417789">t</span><span class="op" id="6417790">.</span><span class="ident" id="6417791">Errorf</span><span class="op" id="6417797">(</span><span class="string" id="6417798">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6417832">,</span>&nbsp;<span class="ident" id="6417834">x</span><span class="op" id="6417835">,</span>&nbsp;<span class="ident" id="6417837">m</span><span class="op" id="6417838">,</span>&nbsp;<span class="ident" id="6417840">n</span><span class="op" id="6417841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417848">y</span><span class="op" id="6417849">,</span>&nbsp;<span class="ident" id="6417851">err</span>&nbsp;<span class="op" id="6417855">:=</span>&nbsp;<span class="ident" id="6417858">ReadUvarint</span><span class="op" id="6417869">(</span><span class="ident" id="6417870">bytes</span><span class="op" id="6417875">.</span><span class="ident" id="6417876">NewReader</span><span class="op" id="6417885">(</span><span class="ident" id="6417886">buf</span><span class="op" id="6417889">)</span><span class="op" id="6417890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417893">if</span>&nbsp;<span class="ident" id="6417896">err</span>&nbsp;<span class="op" id="6417900">!=</span>&nbsp;<span class="builtintype" id="6417903">nil</span>&nbsp;<span class="op" id="6417907">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417911">t</span><span class="op" id="6417912">.</span><span class="ident" id="6417913">Errorf</span><span class="op" id="6417919">(</span><span class="string" id="6417920">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="6417941">,</span>&nbsp;<span class="ident" id="6417943">x</span><span class="op" id="6417944">,</span>&nbsp;<span class="ident" id="6417946">err</span><span class="op" id="6417949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417955">if</span>&nbsp;<span class="ident" id="6417958">x</span>&nbsp;<span class="op" id="6417960">!=</span>&nbsp;<span class="ident" id="6417963">y</span>&nbsp;<span class="op" id="6417965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417969">t</span><span class="op" id="6417970">.</span><span class="ident" id="6417971">Errorf</span><span class="op" id="6417977">(</span><span class="string" id="6417978">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6418003">,</span>&nbsp;<span class="ident" id="6418005">x</span><span class="op" id="6418006">,</span>&nbsp;<span class="ident" id="6418008">y</span><span class="op" id="6418009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418012">}</span><br>
<span class="lineno">65</span><span class="op" id="6418014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418017">var</span>&nbsp;<span class="ident" id="6418021">tests</span>&nbsp;<span class="op" id="6418027">=</span>&nbsp;<span class="op" id="6418029">[</span><span class="op" id="6418030">]</span><span class="builtintype" id="6418031">int64</span><span class="op" id="6418036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418039">-</span><span class="num" id="6418040">1</span>&nbsp;<span class="op" id="6418042">&lt;&lt;</span>&nbsp;<span class="num" id="6418045">63</span><span class="op" id="6418047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418050">-</span><span class="num" id="6418051">1</span><span class="op" id="6418052">&lt;&lt;</span><span class="num" id="6418054">63</span>&nbsp;<span class="op" id="6418057">+</span>&nbsp;<span class="num" id="6418059">1</span><span class="op" id="6418060">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418063">-</span><span class="num" id="6418064">1</span><span class="op" id="6418065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418068">0</span><span class="op" id="6418069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418072">1</span><span class="op" id="6418073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418076">2</span><span class="op" id="6418077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418080">10</span><span class="op" id="6418082">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418085">20</span><span class="op" id="6418087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418090">63</span><span class="op" id="6418092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418095">64</span><span class="op" id="6418097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418100">65</span><span class="op" id="6418102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418105">127</span><span class="op" id="6418108">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418111">128</span><span class="op" id="6418114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418117">129</span><span class="op" id="6418120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418123">255</span><span class="op" id="6418126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418129">256</span><span class="op" id="6418132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418135">257</span><span class="op" id="6418138">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6418141">1</span><span class="op" id="6418142">&lt;&lt;</span><span class="num" id="6418144">63</span>&nbsp;<span class="op" id="6418147">-</span>&nbsp;<span class="num" id="6418149">1</span><span class="op" id="6418150">,</span><br>
<span class="lineno"></span><span class="op" id="6418152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418155">func</span>&nbsp;<span class="ident" id="6418160">TestVarint</span><span class="op" id="6418170">(</span><span class="ident" id="6418171">t</span>&nbsp;<span class="op" id="6418173">*</span><span class="ident" id="6418174">testing</span><span class="op" id="6418181">.</span><span class="ident" id="6418182">T</span><span class="op" id="6418183">)</span>&nbsp;<span class="op" id="6418185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418188">for</span>&nbsp;<span class="ident" id="6418192">_</span><span class="op" id="6418193">,</span>&nbsp;<span class="ident" id="6418195">x</span>&nbsp;<span class="op" id="6418197">:=</span>&nbsp;<span class="keyword" id="6418200">range</span>&nbsp;<span class="ident" id="6418206">tests</span>&nbsp;<span class="op" id="6418212">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418216">testVarint</span><span class="op" id="6418226">(</span><span class="ident" id="6418227">t</span><span class="op" id="6418228">,</span>&nbsp;<span class="ident" id="6418230">x</span><span class="op" id="6418231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418235">testVarint</span><span class="op" id="6418245">(</span><span class="ident" id="6418246">t</span><span class="op" id="6418247">,</span>&nbsp;<span class="op" id="6418249">-</span><span class="ident" id="6418250">x</span><span class="op" id="6418251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418257">for</span>&nbsp;<span class="ident" id="6418261">x</span>&nbsp;<span class="op" id="6418263">:=</span>&nbsp;<span class="builtintype" id="6418266">int64</span><span class="op" id="6418271">(</span><span class="num" id="6418272">0x7</span><span class="op" id="6418275">)</span><span class="op" id="6418276">;</span>&nbsp;<span class="ident" id="6418278">x</span>&nbsp;<span class="op" id="6418280">!=</span>&nbsp;<span class="num" id="6418283">0</span><span class="op" id="6418284">;</span>&nbsp;<span class="ident" id="6418286">x</span>&nbsp;<span class="op" id="6418288">&lt;&lt;=</span>&nbsp;<span class="num" id="6418292">1</span>&nbsp;<span class="op" id="6418294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418298">testVarint</span><span class="op" id="6418308">(</span><span class="ident" id="6418309">t</span><span class="op" id="6418310">,</span>&nbsp;<span class="ident" id="6418312">x</span><span class="op" id="6418313">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418317">testVarint</span><span class="op" id="6418327">(</span><span class="ident" id="6418328">t</span><span class="op" id="6418329">,</span>&nbsp;<span class="op" id="6418331">-</span><span class="ident" id="6418332">x</span><span class="op" id="6418333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418336">}</span><br>
<span class="lineno"></span><span class="op" id="6418338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418341">func</span>&nbsp;<span class="ident" id="6418346">TestUvarint</span><span class="op" id="6418357">(</span><span class="ident" id="6418358">t</span>&nbsp;<span class="op" id="6418360">*</span><span class="ident" id="6418361">testing</span><span class="op" id="6418368">.</span><span class="ident" id="6418369">T</span><span class="op" id="6418370">)</span>&nbsp;<span class="op" id="6418372">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418375">for</span>&nbsp;<span class="ident" id="6418379">_</span><span class="op" id="6418380">,</span>&nbsp;<span class="ident" id="6418382">x</span>&nbsp;<span class="op" id="6418384">:=</span>&nbsp;<span class="keyword" id="6418387">range</span>&nbsp;<span class="ident" id="6418393">tests</span>&nbsp;<span class="op" id="6418399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418403">testUvarint</span><span class="op" id="6418414">(</span><span class="ident" id="6418415">t</span><span class="op" id="6418416">,</span>&nbsp;<span class="builtintype" id="6418418">uint64</span><span class="op" id="6418424">(</span><span class="ident" id="6418425">x</span><span class="op" id="6418426">)</span><span class="op" id="6418427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418433">for</span>&nbsp;<span class="ident" id="6418437">x</span>&nbsp;<span class="op" id="6418439">:=</span>&nbsp;<span class="builtintype" id="6418442">uint64</span><span class="op" id="6418448">(</span><span class="num" id="6418449">0x7</span><span class="op" id="6418452">)</span><span class="op" id="6418453">;</span>&nbsp;<span class="ident" id="6418455">x</span>&nbsp;<span class="op" id="6418457">!=</span>&nbsp;<span class="num" id="6418460">0</span><span class="op" id="6418461">;</span>&nbsp;<span class="ident" id="6418463">x</span>&nbsp;<span class="op" id="6418465">&lt;&lt;=</span>&nbsp;<span class="num" id="6418469">1</span>&nbsp;<span class="op" id="6418471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418475">testUvarint</span><span class="op" id="6418486">(</span><span class="ident" id="6418487">t</span><span class="op" id="6418488">,</span>&nbsp;<span class="ident" id="6418490">x</span><span class="op" id="6418491">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418494">}</span><br>
<span class="lineno"></span><span class="op" id="6418496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418499">func</span>&nbsp;<span class="ident" id="6418504">TestBufferTooSmall</span><span class="op" id="6418522">(</span><span class="ident" id="6418523">t</span>&nbsp;<span class="op" id="6418525">*</span><span class="ident" id="6418526">testing</span><span class="op" id="6418533">.</span><span class="ident" id="6418534">T</span><span class="op" id="6418535">)</span>&nbsp;<span class="op" id="6418537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418540">buf</span>&nbsp;<span class="op" id="6418544">:=</span>&nbsp;<span class="op" id="6418547">[</span><span class="op" id="6418548">]</span><span class="builtintype" id="6418549">byte</span><span class="op" id="6418553">{</span><span class="num" id="6418554">0x80</span><span class="op" id="6418558">,</span>&nbsp;<span class="num" id="6418560">0x80</span><span class="op" id="6418564">,</span>&nbsp;<span class="num" id="6418566">0x80</span><span class="op" id="6418570">,</span>&nbsp;<span class="num" id="6418572">0x80</span><span class="op" id="6418576">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418579">for</span>&nbsp;<span class="ident" id="6418583">i</span>&nbsp;<span class="op" id="6418585">:=</span>&nbsp;<span class="num" id="6418588">0</span><span class="op" id="6418589">;</span>&nbsp;<span class="ident" id="6418591">i</span>&nbsp;<span class="op" id="6418593">&lt;=</span>&nbsp;<span class="builtinfunc" id="6418596">len</span><span class="op" id="6418599">(</span><span class="ident" id="6418600">buf</span><span class="op" id="6418603">)</span><span class="op" id="6418604">;</span>&nbsp;<span class="ident" id="6418606">i</span><span class="op" id="6418607">++</span>&nbsp;<span class="op" id="6418610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418614">buf</span>&nbsp;<span class="op" id="6418618">:=</span>&nbsp;<span class="ident" id="6418621">buf</span><span class="op" id="6418624">[</span><span class="num" id="6418625">0</span><span class="op" id="6418626">:</span><span class="ident" id="6418627">i</span><span class="op" id="6418628">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418632">x</span><span class="op" id="6418633">,</span>&nbsp;<span class="ident" id="6418635">n</span>&nbsp;<span class="op" id="6418637">:=</span>&nbsp;<span class="ident" id="6418640">Uvarint</span><span class="op" id="6418647">(</span><span class="ident" id="6418648">buf</span><span class="op" id="6418651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418655">if</span>&nbsp;<span class="ident" id="6418658">x</span>&nbsp;<span class="op" id="6418660">!=</span>&nbsp;<span class="num" id="6418663">0</span>&nbsp;<span class="op" id="6418665">||</span>&nbsp;<span class="ident" id="6418668">n</span>&nbsp;<span class="op" id="6418670">!=</span>&nbsp;<span class="num" id="6418673">0</span>&nbsp;<span class="op" id="6418675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418680">t</span><span class="op" id="6418681">.</span><span class="ident" id="6418682">Errorf</span><span class="op" id="6418688">(</span><span class="string" id="6418689">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="6418722">,</span>&nbsp;<span class="ident" id="6418724">buf</span><span class="op" id="6418727">,</span>&nbsp;<span class="ident" id="6418729">x</span><span class="op" id="6418730">,</span>&nbsp;<span class="ident" id="6418732">n</span><span class="op" id="6418733">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418742">x</span><span class="op" id="6418743">,</span>&nbsp;<span class="ident" id="6418745">err</span>&nbsp;<span class="op" id="6418749">:=</span>&nbsp;<span class="ident" id="6418752">ReadUvarint</span><span class="op" id="6418763">(</span><span class="ident" id="6418764">bytes</span><span class="op" id="6418769">.</span><span class="ident" id="6418770">NewReader</span><span class="op" id="6418779">(</span><span class="ident" id="6418780">buf</span><span class="op" id="6418783">)</span><span class="op" id="6418784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418788">if</span>&nbsp;<span class="ident" id="6418791">x</span>&nbsp;<span class="op" id="6418793">!=</span>&nbsp;<span class="num" id="6418796">0</span>&nbsp;<span class="op" id="6418798">||</span>&nbsp;<span class="ident" id="6418801">err</span>&nbsp;<span class="op" id="6418805">!=</span>&nbsp;<span class="ident" id="6418808">io</span><span class="op" id="6418810">.</span><span class="ident" id="6418811">EOF</span>&nbsp;<span class="op" id="6418815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418820">t</span><span class="op" id="6418821">.</span><span class="ident" id="6418822">Errorf</span><span class="op" id="6418828">(</span><span class="string" id="6418829">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="6418868">,</span>&nbsp;<span class="ident" id="6418870">buf</span><span class="op" id="6418873">,</span>&nbsp;<span class="ident" id="6418875">x</span><span class="op" id="6418876">,</span>&nbsp;<span class="ident" id="6418878">err</span><span class="op" id="6418881">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418888">}</span><br>
<span class="lineno"></span><span class="op" id="6418890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418893">func</span>&nbsp;<span class="ident" id="6418898">testOverflow</span><span class="op" id="6418910">(</span><span class="ident" id="6418911">t</span>&nbsp;<span class="op" id="6418913">*</span><span class="ident" id="6418914">testing</span><span class="op" id="6418921">.</span><span class="ident" id="6418922">T</span><span class="op" id="6418923">,</span>&nbsp;<span class="ident" id="6418925">buf</span>&nbsp;<span class="op" id="6418929">[</span><span class="op" id="6418930">]</span><span class="builtintype" id="6418931">byte</span><span class="op" id="6418935">,</span>&nbsp;<span class="ident" id="6418937">n0</span>&nbsp;<span class="builtintype" id="6418940">int</span><span class="op" id="6418943">,</span>&nbsp;<span class="ident" id="6418945">err0</span>&nbsp;<span class="builtintype" id="6418950">error</span><span class="op" id="6418955">)</span>&nbsp;<span class="op" id="6418957">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418960">x</span><span class="op" id="6418961">,</span>&nbsp;<span class="ident" id="6418963">n</span>&nbsp;<span class="op" id="6418965">:=</span>&nbsp;<span class="ident" id="6418968">Uvarint</span><span class="op" id="6418975">(</span><span class="ident" id="6418976">buf</span><span class="op" id="6418979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418982">if</span>&nbsp;<span class="ident" id="6418985">x</span>&nbsp;<span class="op" id="6418987">!=</span>&nbsp;<span class="num" id="6418990">0</span>&nbsp;<span class="op" id="6418992">||</span>&nbsp;<span class="ident" id="6418995">n</span>&nbsp;<span class="op" id="6418997">!=</span>&nbsp;<span class="ident" id="6419000">n0</span>&nbsp;<span class="op" id="6419003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419007">t</span><span class="op" id="6419008">.</span><span class="ident" id="6419009">Errorf</span><span class="op" id="6419015">(</span><span class="string" id="6419016">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="6419061">,</span>&nbsp;<span class="ident" id="6419063">buf</span><span class="op" id="6419066">,</span>&nbsp;<span class="ident" id="6419068">x</span><span class="op" id="6419069">,</span>&nbsp;<span class="ident" id="6419071">n</span><span class="op" id="6419072">,</span>&nbsp;<span class="ident" id="6419074">n0</span><span class="op" id="6419076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419083">x</span><span class="op" id="6419084">,</span>&nbsp;<span class="ident" id="6419086">err</span>&nbsp;<span class="op" id="6419090">:=</span>&nbsp;<span class="ident" id="6419093">ReadUvarint</span><span class="op" id="6419104">(</span><span class="ident" id="6419105">bytes</span><span class="op" id="6419110">.</span><span class="ident" id="6419111">NewReader</span><span class="op" id="6419120">(</span><span class="ident" id="6419121">buf</span><span class="op" id="6419124">)</span><span class="op" id="6419125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419128">if</span>&nbsp;<span class="ident" id="6419131">x</span>&nbsp;<span class="op" id="6419133">!=</span>&nbsp;<span class="num" id="6419136">0</span>&nbsp;<span class="op" id="6419138">||</span>&nbsp;<span class="ident" id="6419141">err</span>&nbsp;<span class="op" id="6419145">!=</span>&nbsp;<span class="ident" id="6419148">err0</span>&nbsp;<span class="op" id="6419153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419157">t</span><span class="op" id="6419158">.</span><span class="ident" id="6419159">Errorf</span><span class="op" id="6419165">(</span><span class="string" id="6419166">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="6419217">,</span>&nbsp;<span class="ident" id="6419219">buf</span><span class="op" id="6419222">,</span>&nbsp;<span class="ident" id="6419224">x</span><span class="op" id="6419225">,</span>&nbsp;<span class="ident" id="6419227">err</span><span class="op" id="6419230">,</span>&nbsp;<span class="ident" id="6419232">err0</span><span class="op" id="6419236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419239">}</span><br>
<span class="lineno"></span><span class="op" id="6419241">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="6419244">func</span>&nbsp;<span class="ident" id="6419249">TestOverflow</span><span class="op" id="6419261">(</span><span class="ident" id="6419262">t</span>&nbsp;<span class="op" id="6419264">*</span><span class="ident" id="6419265">testing</span><span class="op" id="6419272">.</span><span class="ident" id="6419273">T</span><span class="op" id="6419274">)</span>&nbsp;<span class="op" id="6419276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419279">testOverflow</span><span class="op" id="6419291">(</span><span class="ident" id="6419292">t</span><span class="op" id="6419293">,</span>&nbsp;<span class="op" id="6419295">[</span><span class="op" id="6419296">]</span><span class="builtintype" id="6419297">byte</span><span class="op" id="6419301">{</span><span class="num" id="6419302">0x80</span><span class="op" id="6419306">,</span>&nbsp;<span class="num" id="6419308">0x80</span><span class="op" id="6419312">,</span>&nbsp;<span class="num" id="6419314">0x80</span><span class="op" id="6419318">,</span>&nbsp;<span class="num" id="6419320">0x80</span><span class="op" id="6419324">,</span>&nbsp;<span class="num" id="6419326">0x80</span><span class="op" id="6419330">,</span>&nbsp;<span class="num" id="6419332">0x80</span><span class="op" id="6419336">,</span>&nbsp;<span class="num" id="6419338">0x80</span><span class="op" id="6419342">,</span>&nbsp;<span class="num" id="6419344">0x80</span><span class="op" id="6419348">,</span>&nbsp;<span class="num" id="6419350">0x80</span><span class="op" id="6419354">,</span>&nbsp;<span class="num" id="6419356">0x2</span><span class="op" id="6419359">}</span><span class="op" id="6419360">,</span>&nbsp;<span class="op" id="6419362">-</span><span class="num" id="6419363">10</span><span class="op" id="6419365">,</span>&nbsp;<span class="ident" id="6419367">overflow</span><span class="op" id="6419375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419378">testOverflow</span><span class="op" id="6419390">(</span><span class="ident" id="6419391">t</span><span class="op" id="6419392">,</span>&nbsp;<span class="op" id="6419394">[</span><span class="op" id="6419395">]</span><span class="builtintype" id="6419396">byte</span><span class="op" id="6419400">{</span><span class="num" id="6419401">0x80</span><span class="op" id="6419405">,</span>&nbsp;<span class="num" id="6419407">0x80</span><span class="op" id="6419411">,</span>&nbsp;<span class="num" id="6419413">0x80</span><span class="op" id="6419417">,</span>&nbsp;<span class="num" id="6419419">0x80</span><span class="op" id="6419423">,</span>&nbsp;<span class="num" id="6419425">0x80</span><span class="op" id="6419429">,</span>&nbsp;<span class="num" id="6419431">0x80</span><span class="op" id="6419435">,</span>&nbsp;<span class="num" id="6419437">0x80</span><span class="op" id="6419441">,</span>&nbsp;<span class="num" id="6419443">0x80</span><span class="op" id="6419447">,</span>&nbsp;<span class="num" id="6419449">0x80</span><span class="op" id="6419453">,</span>&nbsp;<span class="num" id="6419455">0x80</span><span class="op" id="6419459">,</span>&nbsp;<span class="num" id="6419461">0x80</span><span class="op" id="6419465">,</span>&nbsp;<span class="num" id="6419467">0x80</span><span class="op" id="6419471">,</span>&nbsp;<span class="num" id="6419473">0x1</span><span class="op" id="6419476">,</span>&nbsp;<span class="num" id="6419478">0</span><span class="op" id="6419479">,</span>&nbsp;<span class="num" id="6419481">0</span><span class="op" id="6419482">}</span><span class="op" id="6419483">,</span>&nbsp;<span class="op" id="6419485">-</span><span class="num" id="6419486">13</span><span class="op" id="6419488">,</span>&nbsp;<span class="ident" id="6419490">overflow</span><span class="op" id="6419498">)</span><br>
<span class="lineno"></span><span class="op" id="6419500">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6419503">func</span>&nbsp;<span class="ident" id="6419508">TestNonCanonicalZero</span><span class="op" id="6419528">(</span><span class="ident" id="6419529">t</span>&nbsp;<span class="op" id="6419531">*</span><span class="ident" id="6419532">testing</span><span class="op" id="6419539">.</span><span class="ident" id="6419540">T</span><span class="op" id="6419541">)</span>&nbsp;<span class="op" id="6419543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419546">buf</span>&nbsp;<span class="op" id="6419550">:=</span>&nbsp;<span class="op" id="6419553">[</span><span class="op" id="6419554">]</span><span class="builtintype" id="6419555">byte</span><span class="op" id="6419559">{</span><span class="num" id="6419560">0x80</span><span class="op" id="6419564">,</span>&nbsp;<span class="num" id="6419566">0x80</span><span class="op" id="6419570">,</span>&nbsp;<span class="num" id="6419572">0x80</span><span class="op" id="6419576">,</span>&nbsp;<span class="num" id="6419578">0</span><span class="op" id="6419579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419582">x</span><span class="op" id="6419583">,</span>&nbsp;<span class="ident" id="6419585">n</span>&nbsp;<span class="op" id="6419587">:=</span>&nbsp;<span class="ident" id="6419590">Uvarint</span><span class="op" id="6419597">(</span><span class="ident" id="6419598">buf</span><span class="op" id="6419601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419604">if</span>&nbsp;<span class="ident" id="6419607">x</span>&nbsp;<span class="op" id="6419609">!=</span>&nbsp;<span class="num" id="6419612">0</span>&nbsp;<span class="op" id="6419614">||</span>&nbsp;<span class="ident" id="6419617">n</span>&nbsp;<span class="op" id="6419619">!=</span>&nbsp;<span class="num" id="6419622">4</span>&nbsp;<span class="op" id="6419624">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419628">t</span><span class="op" id="6419629">.</span><span class="ident" id="6419630">Errorf</span><span class="op" id="6419636">(</span><span class="string" id="6419637">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="6419681">,</span>&nbsp;<span class="ident" id="6419683">buf</span><span class="op" id="6419686">,</span>&nbsp;<span class="ident" id="6419688">x</span><span class="op" id="6419689">,</span>&nbsp;<span class="ident" id="6419691">n</span><span class="op" id="6419692">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419696">}</span><br>
<span class="lineno"></span><span class="op" id="6419698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="6419701">func</span>&nbsp;<span class="ident" id="6419706">BenchmarkPutUvarint32</span><span class="op" id="6419727">(</span><span class="ident" id="6419728">b</span>&nbsp;<span class="op" id="6419730">*</span><span class="ident" id="6419731">testing</span><span class="op" id="6419738">.</span><span class="ident" id="6419739">B</span><span class="op" id="6419740">)</span>&nbsp;<span class="op" id="6419742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419745">buf</span>&nbsp;<span class="op" id="6419749">:=</span>&nbsp;<span class="builtinfunc" id="6419752">make</span><span class="op" id="6419756">(</span><span class="op" id="6419757">[</span><span class="op" id="6419758">]</span><span class="builtintype" id="6419759">byte</span><span class="op" id="6419763">,</span>&nbsp;<span class="ident" id="6419765">MaxVarintLen32</span><span class="op" id="6419779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419782">b</span><span class="op" id="6419783">.</span><span class="ident" id="6419784">SetBytes</span><span class="op" id="6419792">(</span><span class="num" id="6419793">4</span><span class="op" id="6419794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419797">for</span>&nbsp;<span class="ident" id="6419801">i</span>&nbsp;<span class="op" id="6419803">:=</span>&nbsp;<span class="num" id="6419806">0</span><span class="op" id="6419807">;</span>&nbsp;<span class="ident" id="6419809">i</span>&nbsp;<span class="op" id="6419811">&lt;</span>&nbsp;<span class="ident" id="6419813">b</span><span class="op" id="6419814">.</span><span class="ident" id="6419815">N</span><span class="op" id="6419816">;</span>&nbsp;<span class="ident" id="6419818">i</span><span class="op" id="6419819">++</span>&nbsp;<span class="op" id="6419822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419826">for</span>&nbsp;<span class="ident" id="6419830">j</span>&nbsp;<span class="op" id="6419832">:=</span>&nbsp;<span class="builtintype" id="6419835">uint</span><span class="op" id="6419839">(</span><span class="num" id="6419840">0</span><span class="op" id="6419841">)</span><span class="op" id="6419842">;</span>&nbsp;<span class="ident" id="6419844">j</span>&nbsp;<span class="op" id="6419846">&lt;</span>&nbsp;<span class="ident" id="6419848">MaxVarintLen32</span><span class="op" id="6419862">;</span>&nbsp;<span class="ident" id="6419864">j</span><span class="op" id="6419865">++</span>&nbsp;<span class="op" id="6419868">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419873">PutUvarint</span><span class="op" id="6419883">(</span><span class="ident" id="6419884">buf</span><span class="op" id="6419887">,</span>&nbsp;<span class="num" id="6419889">1</span><span class="op" id="6419890">&lt;&lt;</span><span class="op" id="6419892">(</span><span class="ident" id="6419893">j</span><span class="op" id="6419894">*</span><span class="num" id="6419895">7</span><span class="op" id="6419896">)</span><span class="op" id="6419897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419904">}</span><br>
<span class="lineno"></span><span class="op" id="6419906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="6419909">func</span>&nbsp;<span class="ident" id="6419914">BenchmarkPutUvarint64</span><span class="op" id="6419935">(</span><span class="ident" id="6419936">b</span>&nbsp;<span class="op" id="6419938">*</span><span class="ident" id="6419939">testing</span><span class="op" id="6419946">.</span><span class="ident" id="6419947">B</span><span class="op" id="6419948">)</span>&nbsp;<span class="op" id="6419950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419953">buf</span>&nbsp;<span class="op" id="6419957">:=</span>&nbsp;<span class="builtinfunc" id="6419960">make</span><span class="op" id="6419964">(</span><span class="op" id="6419965">[</span><span class="op" id="6419966">]</span><span class="builtintype" id="6419967">byte</span><span class="op" id="6419971">,</span>&nbsp;<span class="ident" id="6419973">MaxVarintLen64</span><span class="op" id="6419987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419990">b</span><span class="op" id="6419991">.</span><span class="ident" id="6419992">SetBytes</span><span class="op" id="6420000">(</span><span class="num" id="6420001">8</span><span class="op" id="6420002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420005">for</span>&nbsp;<span class="ident" id="6420009">i</span>&nbsp;<span class="op" id="6420011">:=</span>&nbsp;<span class="num" id="6420014">0</span><span class="op" id="6420015">;</span>&nbsp;<span class="ident" id="6420017">i</span>&nbsp;<span class="op" id="6420019">&lt;</span>&nbsp;<span class="ident" id="6420021">b</span><span class="op" id="6420022">.</span><span class="ident" id="6420023">N</span><span class="op" id="6420024">;</span>&nbsp;<span class="ident" id="6420026">i</span><span class="op" id="6420027">++</span>&nbsp;<span class="op" id="6420030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420034">for</span>&nbsp;<span class="ident" id="6420038">j</span>&nbsp;<span class="op" id="6420040">:=</span>&nbsp;<span class="builtintype" id="6420043">uint</span><span class="op" id="6420047">(</span><span class="num" id="6420048">0</span><span class="op" id="6420049">)</span><span class="op" id="6420050">;</span>&nbsp;<span class="ident" id="6420052">j</span>&nbsp;<span class="op" id="6420054">&lt;</span>&nbsp;<span class="ident" id="6420056">MaxVarintLen64</span><span class="op" id="6420070">;</span>&nbsp;<span class="ident" id="6420072">j</span><span class="op" id="6420073">++</span>&nbsp;<span class="op" id="6420076">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420081">PutUvarint</span><span class="op" id="6420091">(</span><span class="ident" id="6420092">buf</span><span class="op" id="6420095">,</span>&nbsp;<span class="num" id="6420097">1</span><span class="op" id="6420098">&lt;&lt;</span><span class="op" id="6420100">(</span><span class="ident" id="6420101">j</span><span class="op" id="6420102">*</span><span class="num" id="6420103">7</span><span class="op" id="6420104">)</span><span class="op" id="6420105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420112">}</span><br>
<span class="lineno"></span><span class="op" id="6420114">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
