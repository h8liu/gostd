<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3603812">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3603867">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3603921">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3603972">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3604049">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3604059">package</span>&nbsp;<span class="ident" id="3604067">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3604073">import</span>&nbsp;<span class="op" id="3604080">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604083">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3604093">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3604096">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3604146">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3604204">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3604270">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3604327">type</span>&nbsp;<span class="ident" id="3604332">lazybuf</span>&nbsp;<span class="keyword" id="3604340">struct</span>&nbsp;<span class="op" id="3604347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604350">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3604354">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604362">buf</span>&nbsp;<span class="op" id="3604366">[</span><span class="op" id="3604367">]</span><span class="builtintype" id="3604368">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604374">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3604378">int</span><br>
<span class="lineno"></span><span class="op" id="3604382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3604385">func</span>&nbsp;<span class="op" id="3604390">(</span><span class="ident" id="3604391">b</span>&nbsp;<span class="op" id="3604393">*</span><span class="ident" id="3604394">lazybuf</span><span class="op" id="3604401">)</span>&nbsp;<span class="ident" id="3604403">index</span><span class="op" id="3604408">(</span><span class="ident" id="3604409">i</span>&nbsp;<span class="builtintype" id="3604411">int</span><span class="op" id="3604414">)</span>&nbsp;<span class="builtintype" id="3604416">byte</span>&nbsp;<span class="op" id="3604421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604424">if</span>&nbsp;<span class="ident" id="3604427">b</span><span class="op" id="3604428">.</span><span class="ident" id="3604429">buf</span>&nbsp;<span class="op" id="3604433">!=</span>&nbsp;<span class="ident" id="3604436">nil</span>&nbsp;<span class="op" id="3604440">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604444">return</span>&nbsp;<span class="ident" id="3604451">b</span><span class="op" id="3604452">.</span><span class="ident" id="3604453">buf</span><span class="op" id="3604456">[</span><span class="ident" id="3604457">i</span><span class="op" id="3604458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604464">return</span>&nbsp;<span class="ident" id="3604471">b</span><span class="op" id="3604472">.</span><span class="ident" id="3604473">s</span><span class="op" id="3604474">[</span><span class="ident" id="3604475">i</span><span class="op" id="3604476">]</span><br>
<span class="lineno"></span><span class="op" id="3604478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3604481">func</span>&nbsp;<span class="op" id="3604486">(</span><span class="ident" id="3604487">b</span>&nbsp;<span class="op" id="3604489">*</span><span class="ident" id="3604490">lazybuf</span><span class="op" id="3604497">)</span>&nbsp;<span class="builtinfunc" id="3604499">append</span><span class="op" id="3604505">(</span><span class="ident" id="3604506">c</span>&nbsp;<span class="builtintype" id="3604508">byte</span><span class="op" id="3604512">)</span>&nbsp;<span class="op" id="3604514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604517">if</span>&nbsp;<span class="ident" id="3604520">b</span><span class="op" id="3604521">.</span><span class="ident" id="3604522">buf</span>&nbsp;<span class="op" id="3604526">==</span>&nbsp;<span class="ident" id="3604529">nil</span>&nbsp;<span class="op" id="3604533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604537">if</span>&nbsp;<span class="ident" id="3604540">b</span><span class="op" id="3604541">.</span><span class="ident" id="3604542">w</span>&nbsp;<span class="op" id="3604544">&lt;</span>&nbsp;<span class="builtinfunc" id="3604546">len</span><span class="op" id="3604549">(</span><span class="ident" id="3604550">b</span><span class="op" id="3604551">.</span><span class="ident" id="3604552">s</span><span class="op" id="3604553">)</span>&nbsp;<span class="op" id="3604555">&amp;&amp;</span>&nbsp;<span class="ident" id="3604558">b</span><span class="op" id="3604559">.</span><span class="ident" id="3604560">s</span><span class="op" id="3604561">[</span><span class="ident" id="3604562">b</span><span class="op" id="3604563">.</span><span class="ident" id="3604564">w</span><span class="op" id="3604565">]</span>&nbsp;<span class="op" id="3604567">==</span>&nbsp;<span class="ident" id="3604570">c</span>&nbsp;<span class="op" id="3604572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604577">b</span><span class="op" id="3604578">.</span><span class="ident" id="3604579">w</span><span class="op" id="3604580">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604586">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604599">b</span><span class="op" id="3604600">.</span><span class="ident" id="3604601">buf</span>&nbsp;<span class="op" id="3604605">=</span>&nbsp;<span class="builtinfunc" id="3604607">make</span><span class="op" id="3604611">(</span><span class="op" id="3604612">[</span><span class="op" id="3604613">]</span><span class="builtintype" id="3604614">byte</span><span class="op" id="3604618">,</span>&nbsp;<span class="builtinfunc" id="3604620">len</span><span class="op" id="3604623">(</span><span class="ident" id="3604624">b</span><span class="op" id="3604625">.</span><span class="ident" id="3604626">s</span><span class="op" id="3604627">)</span><span class="op" id="3604628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3604632">copy</span><span class="op" id="3604636">(</span><span class="ident" id="3604637">b</span><span class="op" id="3604638">.</span><span class="ident" id="3604639">buf</span><span class="op" id="3604642">,</span>&nbsp;<span class="ident" id="3604644">b</span><span class="op" id="3604645">.</span><span class="ident" id="3604646">s</span><span class="op" id="3604647">[</span><span class="op" id="3604648">:</span><span class="ident" id="3604649">b</span><span class="op" id="3604650">.</span><span class="ident" id="3604651">w</span><span class="op" id="3604652">]</span><span class="op" id="3604653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604659">b</span><span class="op" id="3604660">.</span><span class="ident" id="3604661">buf</span><span class="op" id="3604664">[</span><span class="ident" id="3604665">b</span><span class="op" id="3604666">.</span><span class="ident" id="3604667">w</span><span class="op" id="3604668">]</span>&nbsp;<span class="op" id="3604670">=</span>&nbsp;<span class="ident" id="3604672">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604675">b</span><span class="op" id="3604676">.</span><span class="ident" id="3604677">w</span><span class="op" id="3604678">++</span><br>
<span class="lineno"></span><span class="op" id="3604681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3604684">func</span>&nbsp;<span class="op" id="3604689">(</span><span class="ident" id="3604690">b</span>&nbsp;<span class="op" id="3604692">*</span><span class="ident" id="3604693">lazybuf</span><span class="op" id="3604700">)</span>&nbsp;<span class="builtintype" id="3604702">string</span><span class="op" id="3604708">(</span><span class="op" id="3604709">)</span>&nbsp;<span class="builtintype" id="3604711">string</span>&nbsp;<span class="op" id="3604718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604721">if</span>&nbsp;<span class="ident" id="3604724">b</span><span class="op" id="3604725">.</span><span class="ident" id="3604726">buf</span>&nbsp;<span class="op" id="3604730">==</span>&nbsp;<span class="ident" id="3604733">nil</span>&nbsp;<span class="op" id="3604737">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604741">return</span>&nbsp;<span class="ident" id="3604748">b</span><span class="op" id="3604749">.</span><span class="ident" id="3604750">s</span><span class="op" id="3604751">[</span><span class="op" id="3604752">:</span><span class="ident" id="3604753">b</span><span class="op" id="3604754">.</span><span class="ident" id="3604755">w</span><span class="op" id="3604756">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604762">return</span>&nbsp;<span class="builtintype" id="3604769">string</span><span class="op" id="3604775">(</span><span class="ident" id="3604776">b</span><span class="op" id="3604777">.</span><span class="ident" id="3604778">buf</span><span class="op" id="3604781">[</span><span class="op" id="3604782">:</span><span class="ident" id="3604783">b</span><span class="op" id="3604784">.</span><span class="ident" id="3604785">w</span><span class="op" id="3604786">]</span><span class="op" id="3604787">)</span><br>
<span class="lineno"></span><span class="op" id="3604789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3604792">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3604851">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3604916">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3604972">//</span><br>
<span class="lineno"></span><span class="comment" id="3604975">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3605027">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3605093">//&nbsp;&nbsp;&nbsp;&nbsp3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3605164">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3605218">//&nbsp;&nbsp;&nbsp;&nbsp4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3605272">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3605336">//</span><br>
<span class="lineno"></span><span class="comment" id="3605339">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3605404">//</span><br>
<span class="lineno"></span><span class="comment" id="3605407">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3605466">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3605493">//</span><br>
<span class="lineno"></span><span class="comment" id="3605496">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3605552">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3605580">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3605632">func</span>&nbsp;<span class="ident" id="3605637">Clean</span><span class="op" id="3605642">(</span><span class="ident" id="3605643">path</span>&nbsp;<span class="builtintype" id="3605648">string</span><span class="op" id="3605654">)</span>&nbsp;<span class="builtintype" id="3605656">string</span>&nbsp;<span class="op" id="3605663">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605666">if</span>&nbsp;<span class="ident" id="3605669">path</span>&nbsp;<span class="op" id="3605674">==</span>&nbsp;<span class="string" id="3605677">&#34;&#34;</span>&nbsp;<span class="op" id="3605680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605684">return</span>&nbsp;<span class="string" id="3605691">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605700">rooted</span>&nbsp;<span class="op" id="3605707">:=</span>&nbsp;<span class="ident" id="3605710">path</span><span class="op" id="3605714">[</span><span class="num" id="3605715">0</span><span class="op" id="3605716">]</span>&nbsp;<span class="op" id="3605718">==</span>&nbsp;<span class="string" id="3605721">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605726">n</span>&nbsp;<span class="op" id="3605728">:=</span>&nbsp;<span class="builtinfunc" id="3605731">len</span><span class="op" id="3605734">(</span><span class="ident" id="3605735">path</span><span class="op" id="3605739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605743">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605759">//&nbsp;&nbsp;&nbsp;&nbspreading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605818">//&nbsp;&nbsp;&nbsp;&nbspwriting&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605872">//&nbsp;&nbsp;&nbsp;&nbspdotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605934">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspit&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605999">out</span>&nbsp;<span class="op" id="3606003">:=</span>&nbsp;<span class="ident" id="3606006">lazybuf</span><span class="op" id="3606013">{</span><span class="ident" id="3606014">s</span><span class="op" id="3606015">:</span>&nbsp;<span class="ident" id="3606017">path</span><span class="op" id="3606021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606024">r</span><span class="op" id="3606025">,</span>&nbsp;<span class="ident" id="3606027">dotdot</span>&nbsp;<span class="op" id="3606034">:=</span>&nbsp;<span class="num" id="3606037">0</span><span class="op" id="3606038">,</span>&nbsp;<span class="num" id="3606040">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606043">if</span>&nbsp;<span class="ident" id="3606046">rooted</span>&nbsp;<span class="op" id="3606053">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606057">out</span><span class="op" id="3606060">.</span><span class="builtinfunc" id="3606061">append</span><span class="op" id="3606067">(</span><span class="string" id="3606068">&#39;/&#39;</span><span class="op" id="3606071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606075">r</span><span class="op" id="3606076">,</span>&nbsp;<span class="ident" id="3606078">dotdot</span>&nbsp;<span class="op" id="3606085">=</span>&nbsp;<span class="num" id="3606087">1</span><span class="op" id="3606088">,</span>&nbsp;<span class="num" id="3606090">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606097">for</span>&nbsp;<span class="ident" id="3606101">r</span>&nbsp;<span class="op" id="3606103">&lt;</span>&nbsp;<span class="ident" id="3606105">n</span>&nbsp;<span class="op" id="3606107">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606111">switch</span>&nbsp;<span class="op" id="3606118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606122">case</span>&nbsp;<span class="ident" id="3606127">path</span><span class="op" id="3606131">[</span><span class="ident" id="3606132">r</span><span class="op" id="3606133">]</span>&nbsp;<span class="op" id="3606135">==</span>&nbsp;<span class="string" id="3606138">&#39;/&#39;</span><span class="op" id="3606141">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606146">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606171">r</span><span class="op" id="3606172">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606177">case</span>&nbsp;<span class="ident" id="3606182">path</span><span class="op" id="3606186">[</span><span class="ident" id="3606187">r</span><span class="op" id="3606188">]</span>&nbsp;<span class="op" id="3606190">==</span>&nbsp;<span class="string" id="3606193">&#39;.&#39;</span>&nbsp;<span class="op" id="3606197">&amp;&amp;</span>&nbsp;<span class="op" id="3606200">(</span><span class="ident" id="3606201">r</span><span class="op" id="3606202">+</span><span class="num" id="3606203">1</span>&nbsp;<span class="op" id="3606205">==</span>&nbsp;<span class="ident" id="3606208">n</span>&nbsp;<span class="op" id="3606210">||</span>&nbsp;<span class="ident" id="3606213">path</span><span class="op" id="3606217">[</span><span class="ident" id="3606218">r</span><span class="op" id="3606219">+</span><span class="num" id="3606220">1</span><span class="op" id="3606221">]</span>&nbsp;<span class="op" id="3606223">==</span>&nbsp;<span class="string" id="3606226">&#39;/&#39;</span><span class="op" id="3606229">)</span><span class="op" id="3606230">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606235">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606251">r</span><span class="op" id="3606252">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606257">case</span>&nbsp;<span class="ident" id="3606262">path</span><span class="op" id="3606266">[</span><span class="ident" id="3606267">r</span><span class="op" id="3606268">]</span>&nbsp;<span class="op" id="3606270">==</span>&nbsp;<span class="string" id="3606273">&#39;.&#39;</span>&nbsp;<span class="op" id="3606277">&amp;&amp;</span>&nbsp;<span class="ident" id="3606280">path</span><span class="op" id="3606284">[</span><span class="ident" id="3606285">r</span><span class="op" id="3606286">+</span><span class="num" id="3606287">1</span><span class="op" id="3606288">]</span>&nbsp;<span class="op" id="3606290">==</span>&nbsp;<span class="string" id="3606293">&#39;.&#39;</span>&nbsp;<span class="op" id="3606297">&amp;&amp;</span>&nbsp;<span class="op" id="3606300">(</span><span class="ident" id="3606301">r</span><span class="op" id="3606302">+</span><span class="num" id="3606303">2</span>&nbsp;<span class="op" id="3606305">==</span>&nbsp;<span class="ident" id="3606308">n</span>&nbsp;<span class="op" id="3606310">||</span>&nbsp;<span class="ident" id="3606313">path</span><span class="op" id="3606317">[</span><span class="ident" id="3606318">r</span><span class="op" id="3606319">+</span><span class="num" id="3606320">2</span><span class="op" id="3606321">]</span>&nbsp;<span class="op" id="3606323">==</span>&nbsp;<span class="string" id="3606326">&#39;/&#39;</span><span class="op" id="3606329">)</span><span class="op" id="3606330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606335">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606370">r</span>&nbsp;<span class="op" id="3606372">+=</span>&nbsp;<span class="num" id="3606375">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606380">switch</span>&nbsp;<span class="op" id="3606387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606392">case</span>&nbsp;<span class="ident" id="3606397">out</span><span class="op" id="3606400">.</span><span class="ident" id="3606401">w</span>&nbsp;<span class="op" id="3606403">&gt;</span>&nbsp;<span class="ident" id="3606405">dotdot</span><span class="op" id="3606411">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606417">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606438">out</span><span class="op" id="3606441">.</span><span class="ident" id="3606442">w</span><span class="op" id="3606443">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606450">for</span>&nbsp;<span class="ident" id="3606454">out</span><span class="op" id="3606457">.</span><span class="ident" id="3606458">w</span>&nbsp;<span class="op" id="3606460">&gt;</span>&nbsp;<span class="ident" id="3606462">dotdot</span>&nbsp;<span class="op" id="3606469">&amp;&amp;</span>&nbsp;<span class="ident" id="3606472">out</span><span class="op" id="3606475">.</span><span class="ident" id="3606476">index</span><span class="op" id="3606481">(</span><span class="ident" id="3606482">out</span><span class="op" id="3606485">.</span><span class="ident" id="3606486">w</span><span class="op" id="3606487">)</span>&nbsp;<span class="op" id="3606489">!=</span>&nbsp;<span class="string" id="3606492">&#39;/&#39;</span>&nbsp;<span class="op" id="3606496">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606503">out</span><span class="op" id="3606506">.</span><span class="ident" id="3606507">w</span><span class="op" id="3606508">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606520">case</span>&nbsp;<span class="op" id="3606525">!</span><span class="ident" id="3606526">rooted</span><span class="op" id="3606532">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606538">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606601">if</span>&nbsp;<span class="ident" id="3606604">out</span><span class="op" id="3606607">.</span><span class="ident" id="3606608">w</span>&nbsp;<span class="op" id="3606610">&gt;</span>&nbsp;<span class="num" id="3606612">0</span>&nbsp;<span class="op" id="3606614">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606621">out</span><span class="op" id="3606624">.</span><span class="builtinfunc" id="3606625">append</span><span class="op" id="3606631">(</span><span class="string" id="3606632">&#39;/&#39;</span><span class="op" id="3606635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606647">out</span><span class="op" id="3606650">.</span><span class="builtinfunc" id="3606651">append</span><span class="op" id="3606657">(</span><span class="string" id="3606658">&#39;.&#39;</span><span class="op" id="3606661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606667">out</span><span class="op" id="3606670">.</span><span class="builtinfunc" id="3606671">append</span><span class="op" id="3606677">(</span><span class="string" id="3606678">&#39;.&#39;</span><span class="op" id="3606681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606687">dotdot</span>&nbsp;<span class="op" id="3606694">=</span>&nbsp;<span class="ident" id="3606696">out</span><span class="op" id="3606699">.</span><span class="ident" id="3606700">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606709">default</span><span class="op" id="3606716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606721">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606746">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606772">if</span>&nbsp;<span class="ident" id="3606775">rooted</span>&nbsp;<span class="op" id="3606782">&amp;&amp;</span>&nbsp;<span class="ident" id="3606785">out</span><span class="op" id="3606788">.</span><span class="ident" id="3606789">w</span>&nbsp;<span class="op" id="3606791">!=</span>&nbsp;<span class="num" id="3606794">1</span>&nbsp;<span class="op" id="3606796">||</span>&nbsp;<span class="op" id="3606799">!</span><span class="ident" id="3606800">rooted</span>&nbsp;<span class="op" id="3606807">&amp;&amp;</span>&nbsp;<span class="ident" id="3606810">out</span><span class="op" id="3606813">.</span><span class="ident" id="3606814">w</span>&nbsp;<span class="op" id="3606816">!=</span>&nbsp;<span class="num" id="3606819">0</span>&nbsp;<span class="op" id="3606821">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606827">out</span><span class="op" id="3606830">.</span><span class="builtinfunc" id="3606831">append</span><span class="op" id="3606837">(</span><span class="string" id="3606838">&#39;/&#39;</span><span class="op" id="3606841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606851">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606870">for</span>&nbsp;<span class="op" id="3606874">;</span>&nbsp;<span class="ident" id="3606876">r</span>&nbsp;<span class="op" id="3606878">&lt;</span>&nbsp;<span class="ident" id="3606880">n</span>&nbsp;<span class="op" id="3606882">&amp;&amp;</span>&nbsp;<span class="ident" id="3606885">path</span><span class="op" id="3606889">[</span><span class="ident" id="3606890">r</span><span class="op" id="3606891">]</span>&nbsp;<span class="op" id="3606893">!=</span>&nbsp;<span class="string" id="3606896">&#39;/&#39;</span><span class="op" id="3606899">;</span>&nbsp;<span class="ident" id="3606901">r</span><span class="op" id="3606902">++</span>&nbsp;<span class="op" id="3606905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606911">out</span><span class="op" id="3606914">.</span><span class="builtinfunc" id="3606915">append</span><span class="op" id="3606921">(</span><span class="ident" id="3606922">path</span><span class="op" id="3606926">[</span><span class="ident" id="3606927">r</span><span class="op" id="3606928">]</span><span class="op" id="3606929">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606945">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606976">if</span>&nbsp;<span class="ident" id="3606979">out</span><span class="op" id="3606982">.</span><span class="ident" id="3606983">w</span>&nbsp;<span class="op" id="3606985">==</span>&nbsp;<span class="num" id="3606988">0</span>&nbsp;<span class="op" id="3606990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606994">return</span>&nbsp;<span class="string" id="3607001">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607010">return</span>&nbsp;<span class="ident" id="3607017">out</span><span class="op" id="3607020">.</span><span class="builtintype" id="3607021">string</span><span class="op" id="3607027">(</span><span class="op" id="3607028">)</span><br>
<span class="lineno">135</span><span class="op" id="3607030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3607033">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3607093">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3607152">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3607213">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3607234">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3607297">func</span>&nbsp;<span class="ident" id="3607302">Split</span><span class="op" id="3607307">(</span><span class="ident" id="3607308">path</span>&nbsp;<span class="builtintype" id="3607313">string</span><span class="op" id="3607319">)</span>&nbsp;<span class="op" id="3607321">(</span><span class="ident" id="3607322">dir</span><span class="op" id="3607325">,</span>&nbsp;<span class="ident" id="3607327">file</span>&nbsp;<span class="builtintype" id="3607332">string</span><span class="op" id="3607338">)</span>&nbsp;<span class="op" id="3607340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607343">i</span>&nbsp;<span class="op" id="3607345">:=</span>&nbsp;<span class="ident" id="3607348">strings</span><span class="op" id="3607355">.</span><span class="ident" id="3607356">LastIndex</span><span class="op" id="3607365">(</span><span class="ident" id="3607366">path</span><span class="op" id="3607370">,</span>&nbsp;<span class="string" id="3607372">&#34;/&#34;</span><span class="op" id="3607375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607378">return</span>&nbsp;<span class="ident" id="3607385">path</span><span class="op" id="3607389">[</span><span class="op" id="3607390">:</span><span class="ident" id="3607391">i</span><span class="op" id="3607392">+</span><span class="num" id="3607393">1</span><span class="op" id="3607394">]</span><span class="op" id="3607395">,</span>&nbsp;<span class="ident" id="3607397">path</span><span class="op" id="3607401">[</span><span class="ident" id="3607402">i</span><span class="op" id="3607403">+</span><span class="num" id="3607404">1</span><span class="op" id="3607405">:</span><span class="op" id="3607406">]</span><br>
<span class="lineno">145</span><span class="op" id="3607408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3607411">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3607482">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3607554">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3607588">func</span>&nbsp;<span class="ident" id="3607593">Join</span><span class="op" id="3607597">(</span><span class="ident" id="3607598">elem</span>&nbsp;<span class="op" id="3607603">...</span><span class="builtintype" id="3607606">string</span><span class="op" id="3607612">)</span>&nbsp;<span class="builtintype" id="3607614">string</span>&nbsp;<span class="op" id="3607621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607624">for</span>&nbsp;<span class="ident" id="3607628">i</span><span class="op" id="3607629">,</span>&nbsp;<span class="ident" id="3607631">e</span>&nbsp;<span class="op" id="3607633">:=</span>&nbsp;<span class="keyword" id="3607636">range</span>&nbsp;<span class="ident" id="3607642">elem</span>&nbsp;<span class="op" id="3607647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607651">if</span>&nbsp;<span class="ident" id="3607654">e</span>&nbsp;<span class="op" id="3607656">!=</span>&nbsp;<span class="string" id="3607659">&#34;&#34;</span>&nbsp;<span class="op" id="3607662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607667">return</span>&nbsp;<span class="ident" id="3607674">Clean</span><span class="op" id="3607679">(</span><span class="ident" id="3607680">strings</span><span class="op" id="3607687">.</span><span class="ident" id="3607688">Join</span><span class="op" id="3607692">(</span><span class="ident" id="3607693">elem</span><span class="op" id="3607697">[</span><span class="ident" id="3607698">i</span><span class="op" id="3607699">:</span><span class="op" id="3607700">]</span><span class="op" id="3607701">,</span>&nbsp;<span class="string" id="3607703">&#34;/&#34;</span><span class="op" id="3607706">)</span><span class="op" id="3607707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607711">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607717">return</span>&nbsp;<span class="string" id="3607724">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3607727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3607730">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3607783">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3607841">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3607890">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3607925">func</span>&nbsp;<span class="ident" id="3607930">Ext</span><span class="op" id="3607933">(</span><span class="ident" id="3607934">path</span>&nbsp;<span class="builtintype" id="3607939">string</span><span class="op" id="3607945">)</span>&nbsp;<span class="builtintype" id="3607947">string</span>&nbsp;<span class="op" id="3607954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607957">for</span>&nbsp;<span class="ident" id="3607961">i</span>&nbsp;<span class="op" id="3607963">:=</span>&nbsp;<span class="builtinfunc" id="3607966">len</span><span class="op" id="3607969">(</span><span class="ident" id="3607970">path</span><span class="op" id="3607974">)</span>&nbsp;<span class="op" id="3607976">-</span>&nbsp;<span class="num" id="3607978">1</span><span class="op" id="3607979">;</span>&nbsp;<span class="ident" id="3607981">i</span>&nbsp;<span class="op" id="3607983">&gt;=</span>&nbsp;<span class="num" id="3607986">0</span>&nbsp;<span class="op" id="3607988">&amp;&amp;</span>&nbsp;<span class="ident" id="3607991">path</span><span class="op" id="3607995">[</span><span class="ident" id="3607996">i</span><span class="op" id="3607997">]</span>&nbsp;<span class="op" id="3607999">!=</span>&nbsp;<span class="string" id="3608002">&#39;/&#39;</span><span class="op" id="3608005">;</span>&nbsp;<span class="ident" id="3608007">i</span><span class="op" id="3608008">--</span>&nbsp;<span class="op" id="3608011">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608015">if</span>&nbsp;<span class="ident" id="3608018">path</span><span class="op" id="3608022">[</span><span class="ident" id="3608023">i</span><span class="op" id="3608024">]</span>&nbsp;<span class="op" id="3608026">==</span>&nbsp;<span class="string" id="3608029">&#39;.&#39;</span>&nbsp;<span class="op" id="3608033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608038">return</span>&nbsp;<span class="ident" id="3608045">path</span><span class="op" id="3608049">[</span><span class="ident" id="3608050">i</span><span class="op" id="3608051">:</span><span class="op" id="3608052">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608062">return</span>&nbsp;<span class="string" id="3608069">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3608072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3608075">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3608117">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3608185">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3608228">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3608291">func</span>&nbsp;<span class="ident" id="3608296">Base</span><span class="op" id="3608300">(</span><span class="ident" id="3608301">path</span>&nbsp;<span class="builtintype" id="3608306">string</span><span class="op" id="3608312">)</span>&nbsp;<span class="builtintype" id="3608314">string</span>&nbsp;<span class="op" id="3608321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608324">if</span>&nbsp;<span class="ident" id="3608327">path</span>&nbsp;<span class="op" id="3608332">==</span>&nbsp;<span class="string" id="3608335">&#34;&#34;</span>&nbsp;<span class="op" id="3608338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608342">return</span>&nbsp;<span class="string" id="3608349">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608354">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608357">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608385">for</span>&nbsp;<span class="builtinfunc" id="3608389">len</span><span class="op" id="3608392">(</span><span class="ident" id="3608393">path</span><span class="op" id="3608397">)</span>&nbsp;<span class="op" id="3608399">&gt;</span>&nbsp;<span class="num" id="3608401">0</span>&nbsp;<span class="op" id="3608403">&amp;&amp;</span>&nbsp;<span class="ident" id="3608406">path</span><span class="op" id="3608410">[</span><span class="builtinfunc" id="3608411">len</span><span class="op" id="3608414">(</span><span class="ident" id="3608415">path</span><span class="op" id="3608419">)</span><span class="op" id="3608420">-</span><span class="num" id="3608421">1</span><span class="op" id="3608422">]</span>&nbsp;<span class="op" id="3608424">==</span>&nbsp;<span class="string" id="3608427">&#39;/&#39;</span>&nbsp;<span class="op" id="3608431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608435">path</span>&nbsp;<span class="op" id="3608440">=</span>&nbsp;<span class="ident" id="3608442">path</span><span class="op" id="3608446">[</span><span class="num" id="3608447">0</span>&nbsp;<span class="op" id="3608449">:</span>&nbsp;<span class="builtinfunc" id="3608451">len</span><span class="op" id="3608454">(</span><span class="ident" id="3608455">path</span><span class="op" id="3608459">)</span><span class="op" id="3608460">-</span><span class="num" id="3608461">1</span><span class="op" id="3608462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608468">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608494">if</span>&nbsp;<span class="ident" id="3608497">i</span>&nbsp;<span class="op" id="3608499">:=</span>&nbsp;<span class="ident" id="3608502">strings</span><span class="op" id="3608509">.</span><span class="ident" id="3608510">LastIndex</span><span class="op" id="3608519">(</span><span class="ident" id="3608520">path</span><span class="op" id="3608524">,</span>&nbsp;<span class="string" id="3608526">&#34;/&#34;</span><span class="op" id="3608529">)</span><span class="op" id="3608530">;</span>&nbsp;<span class="ident" id="3608532">i</span>&nbsp;<span class="op" id="3608534">&gt;=</span>&nbsp;<span class="num" id="3608537">0</span>&nbsp;<span class="op" id="3608539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608543">path</span>&nbsp;<span class="op" id="3608548">=</span>&nbsp;<span class="ident" id="3608550">path</span><span class="op" id="3608554">[</span><span class="ident" id="3608555">i</span><span class="op" id="3608556">+</span><span class="num" id="3608557">1</span><span class="op" id="3608558">:</span><span class="op" id="3608559">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608565">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608604">if</span>&nbsp;<span class="ident" id="3608607">path</span>&nbsp;<span class="op" id="3608612">==</span>&nbsp;<span class="string" id="3608615">&#34;&#34;</span>&nbsp;<span class="op" id="3608618">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608622">return</span>&nbsp;<span class="string" id="3608629">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608637">return</span>&nbsp;<span class="ident" id="3608644">path</span><br>
<span class="lineno"></span><span class="op" id="3608649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3608652">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3608699">func</span>&nbsp;<span class="ident" id="3608704">IsAbs</span><span class="op" id="3608709">(</span><span class="ident" id="3608710">path</span>&nbsp;<span class="builtintype" id="3608715">string</span><span class="op" id="3608721">)</span>&nbsp;<span class="builtintype" id="3608723">bool</span>&nbsp;<span class="op" id="3608728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608731">return</span>&nbsp;<span class="builtinfunc" id="3608738">len</span><span class="op" id="3608741">(</span><span class="ident" id="3608742">path</span><span class="op" id="3608746">)</span>&nbsp;<span class="op" id="3608748">&gt;</span>&nbsp;<span class="num" id="3608750">0</span>&nbsp;<span class="op" id="3608752">&amp;&amp;</span>&nbsp;<span class="ident" id="3608755">path</span><span class="op" id="3608759">[</span><span class="num" id="3608760">0</span><span class="op" id="3608761">]</span>&nbsp;<span class="op" id="3608763">==</span>&nbsp;<span class="string" id="3608766">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3608770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3608773">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3608854">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3608936">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3608960">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3609002">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3609079">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3609161">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3609171">func</span>&nbsp;<span class="ident" id="3609176">Dir</span><span class="op" id="3609179">(</span><span class="ident" id="3609180">path</span>&nbsp;<span class="builtintype" id="3609185">string</span><span class="op" id="3609191">)</span>&nbsp;<span class="builtintype" id="3609193">string</span>&nbsp;<span class="op" id="3609200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609203">dir</span><span class="op" id="3609206">,</span>&nbsp;<span class="ident" id="3609208">_</span>&nbsp;<span class="op" id="3609210">:=</span>&nbsp;<span class="ident" id="3609213">Split</span><span class="op" id="3609218">(</span><span class="ident" id="3609219">path</span><span class="op" id="3609223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609226">return</span>&nbsp;<span class="ident" id="3609233">Clean</span><span class="op" id="3609238">(</span><span class="ident" id="3609239">dir</span><span class="op" id="3609242">)</span><br>
<span class="lineno">210</span><span class="op" id="3609244">}</span>
</div>
</body>
</html>
