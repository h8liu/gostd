<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7792537">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7792592">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7792646">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7792697">package</span>&nbsp;<span class="ident" id="7792705">base64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792713">import</span>&nbsp;<span class="op" id="7792720">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792723">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792732">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792742">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792748">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792761">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792772">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792783">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792794">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7792801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792804">type</span>&nbsp;<span class="ident" id="7792809">testpair</span>&nbsp;<span class="keyword" id="7792818">struct</span>&nbsp;<span class="op" id="7792825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792828">decoded</span><span class="op" id="7792835">,</span>&nbsp;<span class="ident" id="7792837">encoded</span>&nbsp;<span class="builtintype" id="7792845">string</span><br>
<span class="lineno">20</span><span class="op" id="7792852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792855">var</span>&nbsp;<span class="ident" id="7792859">pairs</span>&nbsp;<span class="op" id="7792865">=</span>&nbsp;<span class="op" id="7792867">[</span><span class="op" id="7792868">]</span><span class="ident" id="7792869"><a href="/encoding/base64/base64_test.go.html#7792809">testpair</a></span><span class="op" id="7792877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7792880">//&nbsp;RFC&nbsp;3548&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792902">{</span><span class="string" id="7792903">&#34;\x14\xfb\x9c\x03\xd9\x7e&#34;</span><span class="op" id="7792929">,</span>&nbsp;<span class="string" id="7792931">&#34;FPucA9l+&#34;</span><span class="op" id="7792941">}</span><span class="op" id="7792942">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792945">{</span><span class="string" id="7792946">&#34;\x14\xfb\x9c\x03\xd9&#34;</span><span class="op" id="7792968">,</span>&nbsp;<span class="string" id="7792970">&#34;FPucA9k=&#34;</span><span class="op" id="7792980">}</span><span class="op" id="7792981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792984">{</span><span class="string" id="7792985">&#34;\x14\xfb\x9c\x03&#34;</span><span class="op" id="7793003">,</span>&nbsp;<span class="string" id="7793005">&#34;FPucAw==&#34;</span><span class="op" id="7793015">}</span><span class="op" id="7793016">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7793020">//&nbsp;RFC&nbsp;4648&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793042">{</span><span class="string" id="7793043">&#34;&#34;</span><span class="op" id="7793045">,</span>&nbsp;<span class="string" id="7793047">&#34;&#34;</span><span class="op" id="7793049">}</span><span class="op" id="7793050">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793053">{</span><span class="string" id="7793054">&#34;f&#34;</span><span class="op" id="7793057">,</span>&nbsp;<span class="string" id="7793059">&#34;Zg==&#34;</span><span class="op" id="7793065">}</span><span class="op" id="7793066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793069">{</span><span class="string" id="7793070">&#34;fo&#34;</span><span class="op" id="7793074">,</span>&nbsp;<span class="string" id="7793076">&#34;Zm8=&#34;</span><span class="op" id="7793082">}</span><span class="op" id="7793083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793086">{</span><span class="string" id="7793087">&#34;foo&#34;</span><span class="op" id="7793092">,</span>&nbsp;<span class="string" id="7793094">&#34;Zm9v&#34;</span><span class="op" id="7793100">}</span><span class="op" id="7793101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793104">{</span><span class="string" id="7793105">&#34;foob&#34;</span><span class="op" id="7793111">,</span>&nbsp;<span class="string" id="7793113">&#34;Zm9vYg==&#34;</span><span class="op" id="7793123">}</span><span class="op" id="7793124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793127">{</span><span class="string" id="7793128">&#34;fooba&#34;</span><span class="op" id="7793135">,</span>&nbsp;<span class="string" id="7793137">&#34;Zm9vYmE=&#34;</span><span class="op" id="7793147">}</span><span class="op" id="7793148">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793151">{</span><span class="string" id="7793152">&#34;foobar&#34;</span><span class="op" id="7793160">,</span>&nbsp;<span class="string" id="7793162">&#34;Zm9vYmFy&#34;</span><span class="op" id="7793172">}</span><span class="op" id="7793173">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7793177">//&nbsp;Wikipedia&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793200">{</span><span class="string" id="7793201">&#34;sure.&#34;</span><span class="op" id="7793208">,</span>&nbsp;<span class="string" id="7793210">&#34;c3VyZS4=&#34;</span><span class="op" id="7793220">}</span><span class="op" id="7793221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793224">{</span><span class="string" id="7793225">&#34;sure&#34;</span><span class="op" id="7793231">,</span>&nbsp;<span class="string" id="7793233">&#34;c3VyZQ==&#34;</span><span class="op" id="7793243">}</span><span class="op" id="7793244">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793247">{</span><span class="string" id="7793248">&#34;sur&#34;</span><span class="op" id="7793253">,</span>&nbsp;<span class="string" id="7793255">&#34;c3Vy&#34;</span><span class="op" id="7793261">}</span><span class="op" id="7793262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793265">{</span><span class="string" id="7793266">&#34;su&#34;</span><span class="op" id="7793270">,</span>&nbsp;<span class="string" id="7793272">&#34;c3U=&#34;</span><span class="op" id="7793278">}</span><span class="op" id="7793279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793282">{</span><span class="string" id="7793283">&#34;leasure.&#34;</span><span class="op" id="7793293">,</span>&nbsp;<span class="string" id="7793295">&#34;bGVhc3VyZS4=&#34;</span><span class="op" id="7793309">}</span><span class="op" id="7793310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793313">{</span><span class="string" id="7793314">&#34;easure.&#34;</span><span class="op" id="7793323">,</span>&nbsp;<span class="string" id="7793325">&#34;ZWFzdXJlLg==&#34;</span><span class="op" id="7793339">}</span><span class="op" id="7793340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793343">{</span><span class="string" id="7793344">&#34;asure.&#34;</span><span class="op" id="7793352">,</span>&nbsp;<span class="string" id="7793354">&#34;YXN1cmUu&#34;</span><span class="op" id="7793364">}</span><span class="op" id="7793365">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793368">{</span><span class="string" id="7793369">&#34;sure.&#34;</span><span class="op" id="7793376">,</span>&nbsp;<span class="string" id="7793378">&#34;c3VyZS4=&#34;</span><span class="op" id="7793388">}</span><span class="op" id="7793389">,</span><br>
<span class="lineno"></span><span class="op" id="7793391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793394">var</span>&nbsp;<span class="ident" id="7793398">bigtest</span>&nbsp;<span class="op" id="7793406">=</span>&nbsp;<span class="ident" id="7793408"><a href="/encoding/base64/base64_test.go.html#7792809">testpair</a></span><span class="op" id="7793416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7793419">&#34;Twas&nbsp;brillig,&nbsp;and&nbsp;the&nbsp;slithy&nbsp;toves&#34;</span><span class="op" id="7793455">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7793458">&#34;VHdhcyBicmlsbGlnLCBhbmQgdGhlIHNsaXRoeSB0b3Zlcw==&#34;</span><span class="op" id="7793508">,</span><br>
<span class="lineno"></span><span class="op" id="7793510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793513">func</span>&nbsp;<span class="ident" id="7793518">testEqual</span><span class="op" id="7793527">(</span><span class="ident" id="7793528">t</span>&nbsp;<span class="op" id="7793530">*</span><span class="ident" id="7793531"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7793538">.</span><span class="ident" id="7793539">T</span><span class="op" id="7793540">,</span>&nbsp;<span class="ident" id="7793542">msg</span>&nbsp;<span class="builtintype" id="7793546">string</span><span class="op" id="7793552">,</span>&nbsp;<span class="ident" id="7793554">args</span>&nbsp;<span class="op" id="7793559">...</span><span class="keyword" id="7793562">interface</span><span class="op" id="7793571">{</span><span class="op" id="7793572">}</span><span class="op" id="7793573">)</span>&nbsp;<span class="builtintype" id="7793575">bool</span>&nbsp;<span class="op" id="7793580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793583">if</span>&nbsp;<span class="ident" id="7793586"><a href="/encoding/base64/base64_test.go.html#7793554">args</a></span><span class="op" id="7793590">[</span><span class="builtinfunc" id="7793591">len</span><span class="op" id="7793594">(</span><span class="ident" id="7793595"><a href="/encoding/base64/base64_test.go.html#7793554">args</a></span><span class="op" id="7793599">)</span><span class="op" id="7793600">-</span><span class="num" id="7793601">2</span><span class="op" id="7793602">]</span>&nbsp;<span class="op" id="7793604">!=</span>&nbsp;<span class="ident" id="7793607"><a href="/encoding/base64/base64_test.go.html#7793554">args</a></span><span class="op" id="7793611">[</span><span class="builtinfunc" id="7793612">len</span><span class="op" id="7793615">(</span><span class="ident" id="7793616"><a href="/encoding/base64/base64_test.go.html#7793554">args</a></span><span class="op" id="7793620">)</span><span class="op" id="7793621">-</span><span class="num" id="7793622">1</span><span class="op" id="7793623">]</span>&nbsp;<span class="op" id="7793625">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793629"><a href="/encoding/base64/base64_test.go.html#7793528">t</a></span><span class="op" id="7793630">.</span><span class="ident" id="7793631">Errorf</span><span class="op" id="7793637">(</span><span class="ident" id="7793638"><a href="/encoding/base64/base64_test.go.html#7793542">msg</a></span><span class="op" id="7793641">,</span>&nbsp;<span class="ident" id="7793643"><a href="/encoding/base64/base64_test.go.html#7793554">args</a></span><span class="op" id="7793647">...</span><span class="op" id="7793650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793654">return</span>&nbsp;<span class="ident" id="7793661">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793671">return</span>&nbsp;<span class="ident" id="7793678">true</span><br>
<span class="lineno"></span><span class="op" id="7793683">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="7793686">func</span>&nbsp;<span class="ident" id="7793691">TestEncode</span><span class="op" id="7793701">(</span><span class="ident" id="7793702">t</span>&nbsp;<span class="op" id="7793704">*</span><span class="ident" id="7793705"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7793712">.</span><span class="ident" id="7793713">T</span><span class="op" id="7793714">)</span>&nbsp;<span class="op" id="7793716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793719">for</span>&nbsp;<span class="ident" id="7793723">_</span><span class="op" id="7793724">,</span>&nbsp;<span class="ident" id="7793726">p</span>&nbsp;<span class="op" id="7793728">:=</span>&nbsp;<span class="keyword" id="7793731">range</span>&nbsp;<span class="ident" id="7793737"><a href="/encoding/base64/base64_test.go.html#7792859">pairs</a></span>&nbsp;<span class="op" id="7793743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793747">got</span>&nbsp;<span class="op" id="7793751">:=</span>&nbsp;<span class="ident" id="7793754"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7793765">.</span><span class="ident" id="7793766">EncodeToString</span><span class="op" id="7793780">(</span><span class="op" id="7793781">[</span><span class="op" id="7793782">]</span><span class="builtintype" id="7793783">byte</span><span class="op" id="7793787">(</span><span class="ident" id="7793788"><a href="/encoding/base64/base64_test.go.html#7793726">p</a></span><span class="op" id="7793789">.</span><span class="ident" id="7793790">decoded</span><span class="op" id="7793797">)</span><span class="op" id="7793798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793802"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7793811">(</span><span class="ident" id="7793812"><a href="/encoding/base64/base64_test.go.html#7793702">t</a></span><span class="op" id="7793813">,</span>&nbsp;<span class="string" id="7793815">&#34;Encode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7793841">,</span>&nbsp;<span class="ident" id="7793843"><a href="/encoding/base64/base64_test.go.html#7793726">p</a></span><span class="op" id="7793844">.</span><span class="ident" id="7793845">decoded</span><span class="op" id="7793852">,</span>&nbsp;<span class="ident" id="7793854"><a href="/encoding/base64/base64_test.go.html#7793747">got</a></span><span class="op" id="7793857">,</span>&nbsp;<span class="ident" id="7793859"><a href="/encoding/base64/base64_test.go.html#7793726">p</a></span><span class="op" id="7793860">.</span><span class="ident" id="7793861">encoded</span><span class="op" id="7793868">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793871">}</span><br>
<span class="lineno"></span><span class="op" id="7793873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793876">func</span>&nbsp;<span class="ident" id="7793881">TestEncoder</span><span class="op" id="7793892">(</span><span class="ident" id="7793893">t</span>&nbsp;<span class="op" id="7793895">*</span><span class="ident" id="7793896"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7793903">.</span><span class="ident" id="7793904">T</span><span class="op" id="7793905">)</span>&nbsp;<span class="op" id="7793907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793910">for</span>&nbsp;<span class="ident" id="7793914">_</span><span class="op" id="7793915">,</span>&nbsp;<span class="ident" id="7793917">p</span>&nbsp;<span class="op" id="7793919">:=</span>&nbsp;<span class="keyword" id="7793922">range</span>&nbsp;<span class="ident" id="7793928"><a href="/encoding/base64/base64_test.go.html#7792859">pairs</a></span>&nbsp;<span class="op" id="7793934">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793938">bb</span>&nbsp;<span class="op" id="7793941">:=</span>&nbsp;<span class="op" id="7793944">&amp;</span><span class="ident" id="7793945"><a href="/encoding/base64/base64_test.go.html#7792723">bytes</a></span><span class="op" id="7793950">.</span><span class="ident" id="7793951">Buffer</span><span class="op" id="7793957">{</span><span class="op" id="7793958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793962">encoder</span>&nbsp;<span class="op" id="7793970">:=</span>&nbsp;<span class="ident" id="7793973"><a href="/encoding/base64/base64.go.html#3727719">NewEncoder</a></span><span class="op" id="7793983">(</span><span class="ident" id="7793984"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7793995">,</span>&nbsp;<span class="ident" id="7793997"><a href="/encoding/base64/base64_test.go.html#7793938">bb</a></span><span class="op" id="7793999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794003"><a href="/encoding/base64/base64_test.go.html#7793962">encoder</a></span><span class="op" id="7794010">.</span><span class="ident" id="7794011">Write</span><span class="op" id="7794016">(</span><span class="op" id="7794017">[</span><span class="op" id="7794018">]</span><span class="builtintype" id="7794019">byte</span><span class="op" id="7794023">(</span><span class="ident" id="7794024"><a href="/encoding/base64/base64_test.go.html#7793917">p</a></span><span class="op" id="7794025">.</span><span class="ident" id="7794026">decoded</span><span class="op" id="7794033">)</span><span class="op" id="7794034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794038"><a href="/encoding/base64/base64_test.go.html#7793962">encoder</a></span><span class="op" id="7794045">.</span><span class="ident" id="7794046">Close</span><span class="op" id="7794051">(</span><span class="op" id="7794052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794056"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7794065">(</span><span class="ident" id="7794066"><a href="/encoding/base64/base64_test.go.html#7793893">t</a></span><span class="op" id="7794067">,</span>&nbsp;<span class="string" id="7794069">&#34;Encode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7794095">,</span>&nbsp;<span class="ident" id="7794097"><a href="/encoding/base64/base64_test.go.html#7793917">p</a></span><span class="op" id="7794098">.</span><span class="ident" id="7794099">decoded</span><span class="op" id="7794106">,</span>&nbsp;<span class="ident" id="7794108"><a href="/encoding/base64/base64_test.go.html#7793938">bb</a></span><span class="op" id="7794110">.</span><span class="ident" id="7794111">String</span><span class="op" id="7794117">(</span><span class="op" id="7794118">)</span><span class="op" id="7794119">,</span>&nbsp;<span class="ident" id="7794121"><a href="/encoding/base64/base64_test.go.html#7793917">p</a></span><span class="op" id="7794122">.</span><span class="ident" id="7794123">encoded</span><span class="op" id="7794130">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794133">}</span><br>
<span class="lineno"></span><span class="op" id="7794135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794138">func</span>&nbsp;<span class="ident" id="7794143">TestEncoderBuffering</span><span class="op" id="7794163">(</span><span class="ident" id="7794164">t</span>&nbsp;<span class="op" id="7794166">*</span><span class="ident" id="7794167"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7794174">.</span><span class="ident" id="7794175">T</span><span class="op" id="7794176">)</span>&nbsp;<span class="op" id="7794178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794181">input</span>&nbsp;<span class="op" id="7794187">:=</span>&nbsp;<span class="op" id="7794190">[</span><span class="op" id="7794191">]</span><span class="builtintype" id="7794192">byte</span><span class="op" id="7794196">(</span><span class="ident" id="7794197"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7794204">.</span><span class="ident" id="7794205">decoded</span><span class="op" id="7794212">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794215">for</span>&nbsp;<span class="ident" id="7794219">bs</span>&nbsp;<span class="op" id="7794222">:=</span>&nbsp;<span class="num" id="7794225">1</span><span class="op" id="7794226">;</span>&nbsp;<span class="ident" id="7794228"><a href="/encoding/base64/base64_test.go.html#7794219">bs</a></span>&nbsp;<span class="op" id="7794231">&lt;=</span>&nbsp;<span class="num" id="7794234">12</span><span class="op" id="7794236">;</span>&nbsp;<span class="ident" id="7794238"><a href="/encoding/base64/base64_test.go.html#7794219">bs</a></span><span class="op" id="7794240">++</span>&nbsp;<span class="op" id="7794243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794247">bb</span>&nbsp;<span class="op" id="7794250">:=</span>&nbsp;<span class="op" id="7794253">&amp;</span><span class="ident" id="7794254"><a href="/encoding/base64/base64_test.go.html#7792723">bytes</a></span><span class="op" id="7794259">.</span><span class="ident" id="7794260">Buffer</span><span class="op" id="7794266">{</span><span class="op" id="7794267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794271">encoder</span>&nbsp;<span class="op" id="7794279">:=</span>&nbsp;<span class="ident" id="7794282"><a href="/encoding/base64/base64.go.html#3727719">NewEncoder</a></span><span class="op" id="7794292">(</span><span class="ident" id="7794293"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7794304">,</span>&nbsp;<span class="ident" id="7794306"><a href="/encoding/base64/base64_test.go.html#7794247">bb</a></span><span class="op" id="7794308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794312">for</span>&nbsp;<span class="ident" id="7794316">pos</span>&nbsp;<span class="op" id="7794320">:=</span>&nbsp;<span class="num" id="7794323">0</span><span class="op" id="7794324">;</span>&nbsp;<span class="ident" id="7794326"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span>&nbsp;<span class="op" id="7794330">&lt;</span>&nbsp;<span class="builtinfunc" id="7794332">len</span><span class="op" id="7794335">(</span><span class="ident" id="7794336"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794341">)</span><span class="op" id="7794342">;</span>&nbsp;<span class="ident" id="7794344"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span>&nbsp;<span class="op" id="7794348">+=</span>&nbsp;<span class="ident" id="7794351"><a href="/encoding/base64/base64_test.go.html#7794219">bs</a></span>&nbsp;<span class="op" id="7794354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794359">end</span>&nbsp;<span class="op" id="7794363">:=</span>&nbsp;<span class="ident" id="7794366"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span>&nbsp;<span class="op" id="7794370">+</span>&nbsp;<span class="ident" id="7794372"><a href="/encoding/base64/base64_test.go.html#7794219">bs</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794378">if</span>&nbsp;<span class="ident" id="7794381"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span>&nbsp;<span class="op" id="7794385">&gt;</span>&nbsp;<span class="builtinfunc" id="7794387">len</span><span class="op" id="7794390">(</span><span class="ident" id="7794391"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794396">)</span>&nbsp;<span class="op" id="7794398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794404"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span>&nbsp;<span class="op" id="7794408">=</span>&nbsp;<span class="builtinfunc" id="7794410">len</span><span class="op" id="7794413">(</span><span class="ident" id="7794414"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794429">n</span><span class="op" id="7794430">,</span>&nbsp;<span class="ident" id="7794432">err</span>&nbsp;<span class="op" id="7794436">:=</span>&nbsp;<span class="ident" id="7794439"><a href="/encoding/base64/base64_test.go.html#7794271">encoder</a></span><span class="op" id="7794446">.</span><span class="ident" id="7794447">Write</span><span class="op" id="7794452">(</span><span class="ident" id="7794453"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794458">[</span><span class="ident" id="7794459"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span><span class="op" id="7794462">:</span><span class="ident" id="7794463"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span><span class="op" id="7794466">]</span><span class="op" id="7794467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794472"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7794481">(</span><span class="ident" id="7794482"><a href="/encoding/base64/base64_test.go.html#7794164">t</a></span><span class="op" id="7794483">,</span>&nbsp;<span class="string" id="7794485">&#34;Write(%q)&nbsp;gave&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7794519">,</span>&nbsp;<span class="ident" id="7794521"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794526">[</span><span class="ident" id="7794527"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span><span class="op" id="7794530">:</span><span class="ident" id="7794531"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span><span class="op" id="7794534">]</span><span class="op" id="7794535">,</span>&nbsp;<span class="ident" id="7794537"><a href="/encoding/base64/base64_test.go.html#7794432">err</a></span><span class="op" id="7794540">,</span>&nbsp;<span class="builtintype" id="7794542">error</span><span class="op" id="7794547">(</span><span class="ident" id="7794548">nil</span><span class="op" id="7794551">)</span><span class="op" id="7794552">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794557"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7794566">(</span><span class="ident" id="7794567"><a href="/encoding/base64/base64_test.go.html#7794164">t</a></span><span class="op" id="7794568">,</span>&nbsp;<span class="string" id="7794570">&#34;Write(%q)&nbsp;gave&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7794605">,</span>&nbsp;<span class="ident" id="7794607"><a href="/encoding/base64/base64_test.go.html#7794181">input</a></span><span class="op" id="7794612">[</span><span class="ident" id="7794613"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span><span class="op" id="7794616">:</span><span class="ident" id="7794617"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span><span class="op" id="7794620">]</span><span class="op" id="7794621">,</span>&nbsp;<span class="ident" id="7794623"><a href="/encoding/base64/base64_test.go.html#7794429">n</a></span><span class="op" id="7794624">,</span>&nbsp;<span class="ident" id="7794626"><a href="/encoding/base64/base64_test.go.html#7794359">end</a></span><span class="op" id="7794629">-</span><span class="ident" id="7794630"><a href="/encoding/base64/base64_test.go.html#7794316">pos</a></span><span class="op" id="7794633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794641">err</span>&nbsp;<span class="op" id="7794645">:=</span>&nbsp;<span class="ident" id="7794648"><a href="/encoding/base64/base64_test.go.html#7794271">encoder</a></span><span class="op" id="7794655">.</span><span class="ident" id="7794656">Close</span><span class="op" id="7794661">(</span><span class="op" id="7794662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794666"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7794675">(</span><span class="ident" id="7794676"><a href="/encoding/base64/base64_test.go.html#7794164">t</a></span><span class="op" id="7794677">,</span>&nbsp;<span class="string" id="7794679">&#34;Close&nbsp;gave&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7794709">,</span>&nbsp;<span class="ident" id="7794711"><a href="/encoding/base64/base64_test.go.html#7794641">err</a></span><span class="op" id="7794714">,</span>&nbsp;<span class="builtintype" id="7794716">error</span><span class="op" id="7794721">(</span><span class="ident" id="7794722">nil</span><span class="op" id="7794725">)</span><span class="op" id="7794726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794730"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7794739">(</span><span class="ident" id="7794740"><a href="/encoding/base64/base64_test.go.html#7794164">t</a></span><span class="op" id="7794741">,</span>&nbsp;<span class="string" id="7794743">&#34;Encoding/%d&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7794776">,</span>&nbsp;<span class="ident" id="7794778"><a href="/encoding/base64/base64_test.go.html#7794219">bs</a></span><span class="op" id="7794780">,</span>&nbsp;<span class="ident" id="7794782"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7794789">.</span><span class="ident" id="7794790">decoded</span><span class="op" id="7794797">,</span>&nbsp;<span class="ident" id="7794799"><a href="/encoding/base64/base64_test.go.html#7794247">bb</a></span><span class="op" id="7794801">.</span><span class="ident" id="7794802">String</span><span class="op" id="7794808">(</span><span class="op" id="7794809">)</span><span class="op" id="7794810">,</span>&nbsp;<span class="ident" id="7794812"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7794819">.</span><span class="ident" id="7794820">encoded</span><span class="op" id="7794827">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794830">}</span><br>
<span class="lineno"></span><span class="op" id="7794832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794835">func</span>&nbsp;<span class="ident" id="7794840">TestDecode</span><span class="op" id="7794850">(</span><span class="ident" id="7794851">t</span>&nbsp;<span class="op" id="7794853">*</span><span class="ident" id="7794854"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7794861">.</span><span class="ident" id="7794862">T</span><span class="op" id="7794863">)</span>&nbsp;<span class="op" id="7794865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794868">for</span>&nbsp;<span class="ident" id="7794872">_</span><span class="op" id="7794873">,</span>&nbsp;<span class="ident" id="7794875">p</span>&nbsp;<span class="op" id="7794877">:=</span>&nbsp;<span class="keyword" id="7794880">range</span>&nbsp;<span class="ident" id="7794886"><a href="/encoding/base64/base64_test.go.html#7792859">pairs</a></span>&nbsp;<span class="op" id="7794892">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794896">dbuf</span>&nbsp;<span class="op" id="7794901">:=</span>&nbsp;<span class="builtinfunc" id="7794904">make</span><span class="op" id="7794908">(</span><span class="op" id="7794909">[</span><span class="op" id="7794910">]</span><span class="builtintype" id="7794911">byte</span><span class="op" id="7794915">,</span>&nbsp;<span class="ident" id="7794917"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7794928">.</span><span class="ident" id="7794929">DecodedLen</span><span class="op" id="7794939">(</span><span class="builtinfunc" id="7794940">len</span><span class="op" id="7794943">(</span><span class="ident" id="7794944"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7794945">.</span><span class="ident" id="7794946">encoded</span><span class="op" id="7794953">)</span><span class="op" id="7794954">)</span><span class="op" id="7794955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794959">count</span><span class="op" id="7794964">,</span>&nbsp;<span class="ident" id="7794966">end</span><span class="op" id="7794969">,</span>&nbsp;<span class="ident" id="7794971">err</span>&nbsp;<span class="op" id="7794975">:=</span>&nbsp;<span class="ident" id="7794978"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7794989">.</span><span class="ident" id="7794990">decode</span><span class="op" id="7794996">(</span><span class="ident" id="7794997"><a href="/encoding/base64/base64_test.go.html#7794896">dbuf</a></span><span class="op" id="7795001">,</span>&nbsp;<span class="op" id="7795003">[</span><span class="op" id="7795004">]</span><span class="builtintype" id="7795005">byte</span><span class="op" id="7795009">(</span><span class="ident" id="7795010"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795011">.</span><span class="ident" id="7795012">encoded</span><span class="op" id="7795019">)</span><span class="op" id="7795020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795024"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795033">(</span><span class="ident" id="7795034"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795035">,</span>&nbsp;<span class="string" id="7795037">&#34;Decode(%q)&nbsp;=&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7795069">,</span>&nbsp;<span class="ident" id="7795071"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795072">.</span><span class="ident" id="7795073">encoded</span><span class="op" id="7795080">,</span>&nbsp;<span class="ident" id="7795082"><a href="/encoding/base64/base64_test.go.html#7794971">err</a></span><span class="op" id="7795085">,</span>&nbsp;<span class="builtintype" id="7795087">error</span><span class="op" id="7795092">(</span><span class="ident" id="7795093">nil</span><span class="op" id="7795096">)</span><span class="op" id="7795097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795101"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795110">(</span><span class="ident" id="7795111"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795112">,</span>&nbsp;<span class="string" id="7795114">&#34;Decode(%q)&nbsp;=&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7795147">,</span>&nbsp;<span class="ident" id="7795149"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795150">.</span><span class="ident" id="7795151">encoded</span><span class="op" id="7795158">,</span>&nbsp;<span class="ident" id="7795160"><a href="/encoding/base64/base64_test.go.html#7794959">count</a></span><span class="op" id="7795165">,</span>&nbsp;<span class="builtinfunc" id="7795167">len</span><span class="op" id="7795170">(</span><span class="ident" id="7795171"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795172">.</span><span class="ident" id="7795173">decoded</span><span class="op" id="7795180">)</span><span class="op" id="7795181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7795185">if</span>&nbsp;<span class="builtinfunc" id="7795188">len</span><span class="op" id="7795191">(</span><span class="ident" id="7795192"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795193">.</span><span class="ident" id="7795194">encoded</span><span class="op" id="7795201">)</span>&nbsp;<span class="op" id="7795203">&gt;</span>&nbsp;<span class="num" id="7795205">0</span>&nbsp;<span class="op" id="7795207">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795212"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795221">(</span><span class="ident" id="7795222"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795223">,</span>&nbsp;<span class="string" id="7795225">&#34;Decode(%q)&nbsp;=&nbsp;end&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7795255">,</span>&nbsp;<span class="ident" id="7795257"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795258">.</span><span class="ident" id="7795259">encoded</span><span class="op" id="7795266">,</span>&nbsp;<span class="ident" id="7795268"><a href="/encoding/base64/base64_test.go.html#7794966">end</a></span><span class="op" id="7795271">,</span>&nbsp;<span class="op" id="7795273">(</span><span class="ident" id="7795274"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795275">.</span><span class="ident" id="7795276">encoded</span><span class="op" id="7795283">[</span><span class="builtinfunc" id="7795284">len</span><span class="op" id="7795287">(</span><span class="ident" id="7795288"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795289">.</span><span class="ident" id="7795290">encoded</span><span class="op" id="7795297">)</span><span class="op" id="7795298">-</span><span class="num" id="7795299">1</span><span class="op" id="7795300">]</span>&nbsp;<span class="op" id="7795302">==</span>&nbsp;<span class="string" id="7795305">&#39;=&#39;</span><span class="op" id="7795308">)</span><span class="op" id="7795309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795317"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795326">(</span><span class="ident" id="7795327"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795328">,</span>&nbsp;<span class="string" id="7795330">&#34;Decode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7795356">,</span>&nbsp;<span class="ident" id="7795358"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795359">.</span><span class="ident" id="7795360">encoded</span><span class="op" id="7795367">,</span>&nbsp;<span class="builtintype" id="7795369">string</span><span class="op" id="7795375">(</span><span class="ident" id="7795376"><a href="/encoding/base64/base64_test.go.html#7794896">dbuf</a></span><span class="op" id="7795380">[</span><span class="num" id="7795381">0</span><span class="op" id="7795382">:</span><span class="ident" id="7795383"><a href="/encoding/base64/base64_test.go.html#7794959">count</a></span><span class="op" id="7795388">]</span><span class="op" id="7795389">)</span><span class="op" id="7795390">,</span>&nbsp;<span class="ident" id="7795392"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795393">.</span><span class="ident" id="7795394">decoded</span><span class="op" id="7795401">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795406"><a href="/encoding/base64/base64_test.go.html#7794896">dbuf</a></span><span class="op" id="7795410">,</span>&nbsp;<span class="ident" id="7795412"><a href="/encoding/base64/base64_test.go.html#7794971">err</a></span>&nbsp;<span class="op" id="7795416">=</span>&nbsp;<span class="ident" id="7795418"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7795429">.</span><span class="ident" id="7795430">DecodeString</span><span class="op" id="7795442">(</span><span class="ident" id="7795443"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795444">.</span><span class="ident" id="7795445">encoded</span><span class="op" id="7795452">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795456"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795465">(</span><span class="ident" id="7795466"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795467">,</span>&nbsp;<span class="string" id="7795469">&#34;DecodeString(%q)&nbsp;=&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7795507">,</span>&nbsp;<span class="ident" id="7795509"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795510">.</span><span class="ident" id="7795511">encoded</span><span class="op" id="7795518">,</span>&nbsp;<span class="ident" id="7795520"><a href="/encoding/base64/base64_test.go.html#7794971">err</a></span><span class="op" id="7795523">,</span>&nbsp;<span class="builtintype" id="7795525">error</span><span class="op" id="7795530">(</span><span class="ident" id="7795531">nil</span><span class="op" id="7795534">)</span><span class="op" id="7795535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795539"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795548">(</span><span class="ident" id="7795549"><a href="/encoding/base64/base64_test.go.html#7794851">t</a></span><span class="op" id="7795550">,</span>&nbsp;<span class="string" id="7795552">&#34;DecodeString(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7795584">,</span>&nbsp;<span class="builtintype" id="7795586">string</span><span class="op" id="7795592">(</span><span class="ident" id="7795593"><a href="/encoding/base64/base64_test.go.html#7794896">dbuf</a></span><span class="op" id="7795597">)</span><span class="op" id="7795598">,</span>&nbsp;<span class="ident" id="7795600"><a href="/encoding/base64/base64_test.go.html#7794875">p</a></span><span class="op" id="7795601">.</span><span class="ident" id="7795602">decoded</span><span class="op" id="7795609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795612">}</span><br>
<span class="lineno"></span><span class="op" id="7795614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7795617">func</span>&nbsp;<span class="ident" id="7795622">TestDecoder</span><span class="op" id="7795633">(</span><span class="ident" id="7795634">t</span>&nbsp;<span class="op" id="7795636">*</span><span class="ident" id="7795637"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7795644">.</span><span class="ident" id="7795645">T</span><span class="op" id="7795646">)</span>&nbsp;<span class="op" id="7795648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7795651">for</span>&nbsp;<span class="ident" id="7795655">_</span><span class="op" id="7795656">,</span>&nbsp;<span class="ident" id="7795658">p</span>&nbsp;<span class="op" id="7795660">:=</span>&nbsp;<span class="keyword" id="7795663">range</span>&nbsp;<span class="ident" id="7795669"><a href="/encoding/base64/base64_test.go.html#7792859">pairs</a></span>&nbsp;<span class="op" id="7795675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795679">decoder</span>&nbsp;<span class="op" id="7795687">:=</span>&nbsp;<span class="ident" id="7795690"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7795700">(</span><span class="ident" id="7795701"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7795712">,</span>&nbsp;<span class="ident" id="7795714"><a href="/encoding/base64/base64_test.go.html#7792772">strings</a></span><span class="op" id="7795721">.</span><span class="ident" id="7795722">NewReader</span><span class="op" id="7795731">(</span><span class="ident" id="7795732"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7795733">.</span><span class="ident" id="7795734">encoded</span><span class="op" id="7795741">)</span><span class="op" id="7795742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795746">dbuf</span>&nbsp;<span class="op" id="7795751">:=</span>&nbsp;<span class="builtinfunc" id="7795754">make</span><span class="op" id="7795758">(</span><span class="op" id="7795759">[</span><span class="op" id="7795760">]</span><span class="builtintype" id="7795761">byte</span><span class="op" id="7795765">,</span>&nbsp;<span class="ident" id="7795767"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7795778">.</span><span class="ident" id="7795779">DecodedLen</span><span class="op" id="7795789">(</span><span class="builtinfunc" id="7795790">len</span><span class="op" id="7795793">(</span><span class="ident" id="7795794"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7795795">.</span><span class="ident" id="7795796">encoded</span><span class="op" id="7795803">)</span><span class="op" id="7795804">)</span><span class="op" id="7795805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795809">count</span><span class="op" id="7795814">,</span>&nbsp;<span class="ident" id="7795816">err</span>&nbsp;<span class="op" id="7795820">:=</span>&nbsp;<span class="ident" id="7795823"><a href="/encoding/base64/base64_test.go.html#7795679">decoder</a></span><span class="op" id="7795830">.</span><span class="ident" id="7795831">Read</span><span class="op" id="7795835">(</span><span class="ident" id="7795836"><a href="/encoding/base64/base64_test.go.html#7795746">dbuf</a></span><span class="op" id="7795840">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7795844">if</span>&nbsp;<span class="ident" id="7795847"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span>&nbsp;<span class="op" id="7795851">!=</span>&nbsp;<span class="ident" id="7795854">nil</span>&nbsp;<span class="op" id="7795858">&amp;&amp;</span>&nbsp;<span class="ident" id="7795861"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span>&nbsp;<span class="op" id="7795865">!=</span>&nbsp;<span class="ident" id="7795868"><a href="/encoding/base64/base64_test.go.html#7792742">io</a></span><span class="op" id="7795870">.</span><span class="ident" id="7795871">EOF</span>&nbsp;<span class="op" id="7795875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795880"><a href="/encoding/base64/base64_test.go.html#7795634">t</a></span><span class="op" id="7795881">.</span><span class="ident" id="7795882">Fatal</span><span class="op" id="7795887">(</span><span class="string" id="7795888">&#34;Read&nbsp;failed&#34;</span><span class="op" id="7795901">,</span>&nbsp;<span class="ident" id="7795903"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span><span class="op" id="7795906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7795914"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7795923">(</span><span class="ident" id="7795924"><a href="/encoding/base64/base64_test.go.html#7795634">t</a></span><span class="op" id="7795925">,</span>&nbsp;<span class="string" id="7795927">&#34;Read&nbsp;from&nbsp;%q&nbsp;=&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7795962">,</span>&nbsp;<span class="ident" id="7795964"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7795965">.</span><span class="ident" id="7795966">encoded</span><span class="op" id="7795973">,</span>&nbsp;<span class="ident" id="7795975"><a href="/encoding/base64/base64_test.go.html#7795809">count</a></span><span class="op" id="7795980">,</span>&nbsp;<span class="builtinfunc" id="7795982">len</span><span class="op" id="7795985">(</span><span class="ident" id="7795986"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7795987">.</span><span class="ident" id="7795988">decoded</span><span class="op" id="7795995">)</span><span class="op" id="7795996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796000"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7796009">(</span><span class="ident" id="7796010"><a href="/encoding/base64/base64_test.go.html#7795634">t</a></span><span class="op" id="7796011">,</span>&nbsp;<span class="string" id="7796013">&#34;Decoding&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7796043">,</span>&nbsp;<span class="ident" id="7796045"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7796046">.</span><span class="ident" id="7796047">encoded</span><span class="op" id="7796054">,</span>&nbsp;<span class="builtintype" id="7796056">string</span><span class="op" id="7796062">(</span><span class="ident" id="7796063"><a href="/encoding/base64/base64_test.go.html#7795746">dbuf</a></span><span class="op" id="7796067">[</span><span class="num" id="7796068">0</span><span class="op" id="7796069">:</span><span class="ident" id="7796070"><a href="/encoding/base64/base64_test.go.html#7795809">count</a></span><span class="op" id="7796075">]</span><span class="op" id="7796076">)</span><span class="op" id="7796077">,</span>&nbsp;<span class="ident" id="7796079"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7796080">.</span><span class="ident" id="7796081">decoded</span><span class="op" id="7796088">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796092">if</span>&nbsp;<span class="ident" id="7796095"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span>&nbsp;<span class="op" id="7796099">!=</span>&nbsp;<span class="ident" id="7796102"><a href="/encoding/base64/base64_test.go.html#7792742">io</a></span><span class="op" id="7796104">.</span><span class="ident" id="7796105">EOF</span>&nbsp;<span class="op" id="7796109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796114"><a href="/encoding/base64/base64_test.go.html#7795809">count</a></span><span class="op" id="7796119">,</span>&nbsp;<span class="ident" id="7796121"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span>&nbsp;<span class="op" id="7796125">=</span>&nbsp;<span class="ident" id="7796127"><a href="/encoding/base64/base64_test.go.html#7795679">decoder</a></span><span class="op" id="7796134">.</span><span class="ident" id="7796135">Read</span><span class="op" id="7796139">(</span><span class="ident" id="7796140"><a href="/encoding/base64/base64_test.go.html#7795746">dbuf</a></span><span class="op" id="7796144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796152"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7796161">(</span><span class="ident" id="7796162"><a href="/encoding/base64/base64_test.go.html#7795634">t</a></span><span class="op" id="7796163">,</span>&nbsp;<span class="string" id="7796165">&#34;Read&nbsp;from&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7796193">,</span>&nbsp;<span class="ident" id="7796195"><a href="/encoding/base64/base64_test.go.html#7795658">p</a></span><span class="op" id="7796196">.</span><span class="ident" id="7796197">encoded</span><span class="op" id="7796204">,</span>&nbsp;<span class="ident" id="7796206"><a href="/encoding/base64/base64_test.go.html#7795816">err</a></span><span class="op" id="7796209">,</span>&nbsp;<span class="ident" id="7796211"><a href="/encoding/base64/base64_test.go.html#7792742">io</a></span><span class="op" id="7796213">.</span><span class="ident" id="7796214">EOF</span><span class="op" id="7796217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796220">}</span><br>
<span class="lineno">130</span><span class="op" id="7796222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796225">func</span>&nbsp;<span class="ident" id="7796230">TestDecoderBuffering</span><span class="op" id="7796250">(</span><span class="ident" id="7796251">t</span>&nbsp;<span class="op" id="7796253">*</span><span class="ident" id="7796254"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7796261">.</span><span class="ident" id="7796262">T</span><span class="op" id="7796263">)</span>&nbsp;<span class="op" id="7796265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796268">for</span>&nbsp;<span class="ident" id="7796272">bs</span>&nbsp;<span class="op" id="7796275">:=</span>&nbsp;<span class="num" id="7796278">1</span><span class="op" id="7796279">;</span>&nbsp;<span class="ident" id="7796281"><a href="/encoding/base64/base64_test.go.html#7796272">bs</a></span>&nbsp;<span class="op" id="7796284">&lt;=</span>&nbsp;<span class="num" id="7796287">12</span><span class="op" id="7796289">;</span>&nbsp;<span class="ident" id="7796291"><a href="/encoding/base64/base64_test.go.html#7796272">bs</a></span><span class="op" id="7796293">++</span>&nbsp;<span class="op" id="7796296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796300">decoder</span>&nbsp;<span class="op" id="7796308">:=</span>&nbsp;<span class="ident" id="7796311"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7796321">(</span><span class="ident" id="7796322"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7796333">,</span>&nbsp;<span class="ident" id="7796335"><a href="/encoding/base64/base64_test.go.html#7792772">strings</a></span><span class="op" id="7796342">.</span><span class="ident" id="7796343">NewReader</span><span class="op" id="7796352">(</span><span class="ident" id="7796353"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796360">.</span><span class="ident" id="7796361">encoded</span><span class="op" id="7796368">)</span><span class="op" id="7796369">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796373">buf</span>&nbsp;<span class="op" id="7796377">:=</span>&nbsp;<span class="builtinfunc" id="7796380">make</span><span class="op" id="7796384">(</span><span class="op" id="7796385">[</span><span class="op" id="7796386">]</span><span class="builtintype" id="7796387">byte</span><span class="op" id="7796391">,</span>&nbsp;<span class="builtinfunc" id="7796393">len</span><span class="op" id="7796396">(</span><span class="ident" id="7796397"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796404">.</span><span class="ident" id="7796405">decoded</span><span class="op" id="7796412">)</span><span class="op" id="7796413">+</span><span class="num" id="7796414">12</span><span class="op" id="7796416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796420">var</span>&nbsp;<span class="ident" id="7796424">total</span>&nbsp;<span class="builtintype" id="7796430">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796436">for</span>&nbsp;<span class="ident" id="7796440"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span>&nbsp;<span class="op" id="7796446">=</span>&nbsp;<span class="num" id="7796448">0</span><span class="op" id="7796449">;</span>&nbsp;<span class="ident" id="7796451"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span>&nbsp;<span class="op" id="7796457">&lt;</span>&nbsp;<span class="builtinfunc" id="7796459">len</span><span class="op" id="7796462">(</span><span class="ident" id="7796463"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796470">.</span><span class="ident" id="7796471">decoded</span><span class="op" id="7796478">)</span><span class="op" id="7796479">;</span>&nbsp;<span class="op" id="7796481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796486">n</span><span class="op" id="7796487">,</span>&nbsp;<span class="ident" id="7796489">err</span>&nbsp;<span class="op" id="7796493">:=</span>&nbsp;<span class="ident" id="7796496"><a href="/encoding/base64/base64_test.go.html#7796300">decoder</a></span><span class="op" id="7796503">.</span><span class="ident" id="7796504">Read</span><span class="op" id="7796508">(</span><span class="ident" id="7796509"><a href="/encoding/base64/base64_test.go.html#7796373">buf</a></span><span class="op" id="7796512">[</span><span class="ident" id="7796513"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span>&nbsp;<span class="op" id="7796519">:</span>&nbsp;<span class="ident" id="7796521"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span><span class="op" id="7796526">+</span><span class="ident" id="7796527"><a href="/encoding/base64/base64_test.go.html#7796272">bs</a></span><span class="op" id="7796529">]</span><span class="op" id="7796530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796535"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7796544">(</span><span class="ident" id="7796545"><a href="/encoding/base64/base64_test.go.html#7796251">t</a></span><span class="op" id="7796546">,</span>&nbsp;<span class="string" id="7796548">&#34;Read&nbsp;from&nbsp;%q&nbsp;at&nbsp;pos&nbsp;%d&nbsp;=&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;_,&nbsp;%v&#34;</span><span class="op" id="7796593">,</span>&nbsp;<span class="ident" id="7796595"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796602">.</span><span class="ident" id="7796603">encoded</span><span class="op" id="7796610">,</span>&nbsp;<span class="ident" id="7796612"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span><span class="op" id="7796617">,</span>&nbsp;<span class="ident" id="7796619"><a href="/encoding/base64/base64_test.go.html#7796486">n</a></span><span class="op" id="7796620">,</span>&nbsp;<span class="ident" id="7796622"><a href="/encoding/base64/base64_test.go.html#7796489">err</a></span><span class="op" id="7796625">,</span>&nbsp;<span class="builtintype" id="7796627">error</span><span class="op" id="7796632">(</span><span class="ident" id="7796633">nil</span><span class="op" id="7796636">)</span><span class="op" id="7796637">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796642"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span>&nbsp;<span class="op" id="7796648">+=</span>&nbsp;<span class="ident" id="7796651"><a href="/encoding/base64/base64_test.go.html#7796486">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796659"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7796668">(</span><span class="ident" id="7796669"><a href="/encoding/base64/base64_test.go.html#7796251">t</a></span><span class="op" id="7796670">,</span>&nbsp;<span class="string" id="7796672">&#34;Decoding/%d&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7796705">,</span>&nbsp;<span class="ident" id="7796707"><a href="/encoding/base64/base64_test.go.html#7796272">bs</a></span><span class="op" id="7796709">,</span>&nbsp;<span class="ident" id="7796711"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796718">.</span><span class="ident" id="7796719">encoded</span><span class="op" id="7796726">,</span>&nbsp;<span class="builtintype" id="7796728">string</span><span class="op" id="7796734">(</span><span class="ident" id="7796735"><a href="/encoding/base64/base64_test.go.html#7796373">buf</a></span><span class="op" id="7796738">[</span><span class="num" id="7796739">0</span><span class="op" id="7796740">:</span><span class="ident" id="7796741"><a href="/encoding/base64/base64_test.go.html#7796424">total</a></span><span class="op" id="7796746">]</span><span class="op" id="7796747">)</span><span class="op" id="7796748">,</span>&nbsp;<span class="ident" id="7796750"><a href="/encoding/base64/base64_test.go.html#7793398">bigtest</a></span><span class="op" id="7796757">.</span><span class="ident" id="7796758">decoded</span><span class="op" id="7796765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796768">}</span><br>
<span class="lineno"></span><span class="op" id="7796770">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="7796773">func</span>&nbsp;<span class="ident" id="7796778">TestDecodeCorrupt</span><span class="op" id="7796795">(</span><span class="ident" id="7796796">t</span>&nbsp;<span class="op" id="7796798">*</span><span class="ident" id="7796799"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7796806">.</span><span class="ident" id="7796807">T</span><span class="op" id="7796808">)</span>&nbsp;<span class="op" id="7796810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796813">testCases</span>&nbsp;<span class="op" id="7796823">:=</span>&nbsp;<span class="op" id="7796826">[</span><span class="op" id="7796827">]</span><span class="keyword" id="7796828">struct</span>&nbsp;<span class="op" id="7796835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796839">input</span>&nbsp;&nbsp;<span class="builtintype" id="7796846">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796855">offset</span>&nbsp;<span class="builtintype" id="7796862">int</span>&nbsp;<span class="comment" id="7796866">//&nbsp;-1&nbsp;means&nbsp;no&nbsp;corruption.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796894">}</span><span class="op" id="7796895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796899">{</span><span class="string" id="7796900">&#34;&#34;</span><span class="op" id="7796902">,</span>&nbsp;<span class="op" id="7796904">-</span><span class="num" id="7796905">1</span><span class="op" id="7796906">}</span><span class="op" id="7796907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796911">{</span><span class="string" id="7796912">&#34;!!!!&#34;</span><span class="op" id="7796918">,</span>&nbsp;<span class="num" id="7796920">0</span><span class="op" id="7796921">}</span><span class="op" id="7796922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796926">{</span><span class="string" id="7796927">&#34;====&#34;</span><span class="op" id="7796933">,</span>&nbsp;<span class="num" id="7796935">0</span><span class="op" id="7796936">}</span><span class="op" id="7796937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796941">{</span><span class="string" id="7796942">&#34;x===&#34;</span><span class="op" id="7796948">,</span>&nbsp;<span class="num" id="7796950">1</span><span class="op" id="7796951">}</span><span class="op" id="7796952">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796956">{</span><span class="string" id="7796957">&#34;=AAA&#34;</span><span class="op" id="7796963">,</span>&nbsp;<span class="num" id="7796965">0</span><span class="op" id="7796966">}</span><span class="op" id="7796967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796971">{</span><span class="string" id="7796972">&#34;A=AA&#34;</span><span class="op" id="7796978">,</span>&nbsp;<span class="num" id="7796980">1</span><span class="op" id="7796981">}</span><span class="op" id="7796982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796986">{</span><span class="string" id="7796987">&#34;AA=A&#34;</span><span class="op" id="7796993">,</span>&nbsp;<span class="num" id="7796995">2</span><span class="op" id="7796996">}</span><span class="op" id="7796997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797001">{</span><span class="string" id="7797002">&#34;AA==A&#34;</span><span class="op" id="7797009">,</span>&nbsp;<span class="num" id="7797011">4</span><span class="op" id="7797012">}</span><span class="op" id="7797013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797017">{</span><span class="string" id="7797018">&#34;AAA=AAAA&#34;</span><span class="op" id="7797028">,</span>&nbsp;<span class="num" id="7797030">4</span><span class="op" id="7797031">}</span><span class="op" id="7797032">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797036">{</span><span class="string" id="7797037">&#34;AAAAA&#34;</span><span class="op" id="7797044">,</span>&nbsp;<span class="num" id="7797046">4</span><span class="op" id="7797047">}</span><span class="op" id="7797048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797052">{</span><span class="string" id="7797053">&#34;AAAAAA&#34;</span><span class="op" id="7797061">,</span>&nbsp;<span class="num" id="7797063">4</span><span class="op" id="7797064">}</span><span class="op" id="7797065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797069">{</span><span class="string" id="7797070">&#34;A=&#34;</span><span class="op" id="7797074">,</span>&nbsp;<span class="num" id="7797076">1</span><span class="op" id="7797077">}</span><span class="op" id="7797078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797082">{</span><span class="string" id="7797083">&#34;A==&#34;</span><span class="op" id="7797088">,</span>&nbsp;<span class="num" id="7797090">1</span><span class="op" id="7797091">}</span><span class="op" id="7797092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797096">{</span><span class="string" id="7797097">&#34;AA=&#34;</span><span class="op" id="7797102">,</span>&nbsp;<span class="num" id="7797104">3</span><span class="op" id="7797105">}</span><span class="op" id="7797106">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797110">{</span><span class="string" id="7797111">&#34;AA==&#34;</span><span class="op" id="7797117">,</span>&nbsp;<span class="op" id="7797119">-</span><span class="num" id="7797120">1</span><span class="op" id="7797121">}</span><span class="op" id="7797122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797126">{</span><span class="string" id="7797127">&#34;AAA=&#34;</span><span class="op" id="7797133">,</span>&nbsp;<span class="op" id="7797135">-</span><span class="num" id="7797136">1</span><span class="op" id="7797137">}</span><span class="op" id="7797138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797142">{</span><span class="string" id="7797143">&#34;AAAA&#34;</span><span class="op" id="7797149">,</span>&nbsp;<span class="op" id="7797151">-</span><span class="num" id="7797152">1</span><span class="op" id="7797153">}</span><span class="op" id="7797154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797158">{</span><span class="string" id="7797159">&#34;AAAAAA=&#34;</span><span class="op" id="7797168">,</span>&nbsp;<span class="num" id="7797170">7</span><span class="op" id="7797171">}</span><span class="op" id="7797172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797176">{</span><span class="string" id="7797177">&#34;YWJjZA=====&#34;</span><span class="op" id="7797190">,</span>&nbsp;<span class="num" id="7797192">8</span><span class="op" id="7797193">}</span><span class="op" id="7797194">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797200">for</span>&nbsp;<span class="ident" id="7797204">_</span><span class="op" id="7797205">,</span>&nbsp;<span class="ident" id="7797207">tc</span>&nbsp;<span class="op" id="7797210">:=</span>&nbsp;<span class="keyword" id="7797213">range</span>&nbsp;<span class="ident" id="7797219"><a href="/encoding/base64/base64_test.go.html#7796813">testCases</a></span>&nbsp;<span class="op" id="7797229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797233">dbuf</span>&nbsp;<span class="op" id="7797238">:=</span>&nbsp;<span class="builtinfunc" id="7797241">make</span><span class="op" id="7797245">(</span><span class="op" id="7797246">[</span><span class="op" id="7797247">]</span><span class="builtintype" id="7797248">byte</span><span class="op" id="7797252">,</span>&nbsp;<span class="ident" id="7797254"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7797265">.</span><span class="ident" id="7797266">DecodedLen</span><span class="op" id="7797276">(</span><span class="builtinfunc" id="7797277">len</span><span class="op" id="7797280">(</span><span class="ident" id="7797281"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797283">.</span><span class="ident" id="7797284">input</span><span class="op" id="7797289">)</span><span class="op" id="7797290">)</span><span class="op" id="7797291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797295">_</span><span class="op" id="7797296">,</span>&nbsp;<span class="ident" id="7797298">err</span>&nbsp;<span class="op" id="7797302">:=</span>&nbsp;<span class="ident" id="7797305"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7797316">.</span><span class="ident" id="7797317">Decode</span><span class="op" id="7797323">(</span><span class="ident" id="7797324"><a href="/encoding/base64/base64_test.go.html#7797233">dbuf</a></span><span class="op" id="7797328">,</span>&nbsp;<span class="op" id="7797330">[</span><span class="op" id="7797331">]</span><span class="builtintype" id="7797332">byte</span><span class="op" id="7797336">(</span><span class="ident" id="7797337"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797339">.</span><span class="ident" id="7797340">input</span><span class="op" id="7797345">)</span><span class="op" id="7797346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797350">if</span>&nbsp;<span class="ident" id="7797353"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797355">.</span><span class="ident" id="7797356">offset</span>&nbsp;<span class="op" id="7797363">==</span>&nbsp;<span class="op" id="7797366">-</span><span class="num" id="7797367">1</span>&nbsp;<span class="op" id="7797369">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797374">if</span>&nbsp;<span class="ident" id="7797377"><a href="/encoding/base64/base64_test.go.html#7797298">err</a></span>&nbsp;<span class="op" id="7797381">!=</span>&nbsp;<span class="ident" id="7797384">nil</span>&nbsp;<span class="op" id="7797388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797394"><a href="/encoding/base64/base64_test.go.html#7796796">t</a></span><span class="op" id="7797395">.</span><span class="ident" id="7797396">Error</span><span class="op" id="7797401">(</span><span class="string" id="7797402">&#34;Decoder&nbsp;wrongly&nbsp;detected&nbsp;coruption&nbsp;in&#34;</span><span class="op" id="7797441">,</span>&nbsp;<span class="ident" id="7797443"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797445">.</span><span class="ident" id="7797446">input</span><span class="op" id="7797451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797461">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797472">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797476">switch</span>&nbsp;<span class="ident" id="7797483">err</span>&nbsp;<span class="op" id="7797487">:=</span>&nbsp;<span class="ident" id="7797490"><a href="/encoding/base64/base64_test.go.html#7797298">err</a></span><span class="op" id="7797493">.</span><span class="op" id="7797494">(</span><span class="keyword" id="7797495">type</span><span class="op" id="7797499">)</span>&nbsp;<span class="op" id="7797501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797505">case</span>&nbsp;<span class="ident" id="7797510"><a href="/encoding/base64/base64.go.html#3728006">CorruptInputError</a></span><span class="op" id="7797527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797532"><a href="/encoding/base64/base64_test.go.html#7793518">testEqual</a></span><span class="op" id="7797541">(</span><span class="ident" id="7797542"><a href="/encoding/base64/base64_test.go.html#7796796">t</a></span><span class="op" id="7797543">,</span>&nbsp;<span class="string" id="7797545">&#34;Corruption&nbsp;in&nbsp;%q&nbsp;at&nbsp;offset&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7797585">,</span>&nbsp;<span class="ident" id="7797587"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797589">.</span><span class="ident" id="7797590">input</span><span class="op" id="7797595">,</span>&nbsp;<span class="builtintype" id="7797597">int</span><span class="op" id="7797600">(</span><span class="ident" id="7797601"><a href="/encoding/base64/base64_test.go.html#7797483">err</a></span><span class="op" id="7797604">)</span><span class="op" id="7797605">,</span>&nbsp;<span class="ident" id="7797607"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797609">.</span><span class="ident" id="7797610">offset</span><span class="op" id="7797616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797620">default</span><span class="op" id="7797627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797632"><a href="/encoding/base64/base64_test.go.html#7796796">t</a></span><span class="op" id="7797633">.</span><span class="ident" id="7797634">Error</span><span class="op" id="7797639">(</span><span class="string" id="7797640">&#34;Decoder&nbsp;failed&nbsp;to&nbsp;detect&nbsp;corruption&nbsp;in&#34;</span><span class="op" id="7797680">,</span>&nbsp;<span class="ident" id="7797682"><a href="/encoding/base64/base64_test.go.html#7797207">tc</a></span><span class="op" id="7797684">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797691">}</span><br>
<span class="lineno"></span><span class="op" id="7797693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7797696">func</span>&nbsp;<span class="ident" id="7797701">TestBig</span><span class="op" id="7797708">(</span><span class="ident" id="7797709">t</span>&nbsp;<span class="op" id="7797711">*</span><span class="ident" id="7797712"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7797719">.</span><span class="ident" id="7797720">T</span><span class="op" id="7797721">)</span>&nbsp;<span class="op" id="7797723">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797726">n</span>&nbsp;<span class="op" id="7797728">:=</span>&nbsp;<span class="num" id="7797731">3</span><span class="op" id="7797732">*</span><span class="num" id="7797733">1000</span>&nbsp;<span class="op" id="7797738">+</span>&nbsp;<span class="num" id="7797740">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797743">raw</span>&nbsp;<span class="op" id="7797747">:=</span>&nbsp;<span class="builtinfunc" id="7797750">make</span><span class="op" id="7797754">(</span><span class="op" id="7797755">[</span><span class="op" id="7797756">]</span><span class="builtintype" id="7797757">byte</span><span class="op" id="7797761">,</span>&nbsp;<span class="ident" id="7797763"><a href="/encoding/base64/base64_test.go.html#7797726">n</a></span><span class="op" id="7797764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797767">const</span>&nbsp;<span class="ident" id="7797773">alpha</span>&nbsp;<span class="op" id="7797779">=</span>&nbsp;<span class="string" id="7797781">&#34;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797847">for</span>&nbsp;<span class="ident" id="7797851">i</span>&nbsp;<span class="op" id="7797853">:=</span>&nbsp;<span class="num" id="7797856">0</span><span class="op" id="7797857">;</span>&nbsp;<span class="ident" id="7797859"><a href="/encoding/base64/base64_test.go.html#7797851">i</a></span>&nbsp;<span class="op" id="7797861">&lt;</span>&nbsp;<span class="ident" id="7797863"><a href="/encoding/base64/base64_test.go.html#7797726">n</a></span><span class="op" id="7797864">;</span>&nbsp;<span class="ident" id="7797866"><a href="/encoding/base64/base64_test.go.html#7797851">i</a></span><span class="op" id="7797867">++</span>&nbsp;<span class="op" id="7797870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797874"><a href="/encoding/base64/base64_test.go.html#7797743">raw</a></span><span class="op" id="7797877">[</span><span class="ident" id="7797878"><a href="/encoding/base64/base64_test.go.html#7797851">i</a></span><span class="op" id="7797879">]</span>&nbsp;<span class="op" id="7797881">=</span>&nbsp;<span class="ident" id="7797883"><a href="/encoding/base64/base64_test.go.html#7797773">alpha</a></span><span class="op" id="7797888">[</span><span class="ident" id="7797889"><a href="/encoding/base64/base64_test.go.html#7797851">i</a></span><span class="op" id="7797890">%</span><span class="builtinfunc" id="7797891">len</span><span class="op" id="7797894">(</span><span class="ident" id="7797895"><a href="/encoding/base64/base64_test.go.html#7797773">alpha</a></span><span class="op" id="7797900">)</span><span class="op" id="7797901">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797907">encoded</span>&nbsp;<span class="op" id="7797915">:=</span>&nbsp;<span class="builtinfunc" id="7797918">new</span><span class="op" id="7797921">(</span><span class="ident" id="7797922"><a href="/encoding/base64/base64_test.go.html#7792723">bytes</a></span><span class="op" id="7797927">.</span><span class="ident" id="7797928">Buffer</span><span class="op" id="7797934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797937">w</span>&nbsp;<span class="op" id="7797939">:=</span>&nbsp;<span class="ident" id="7797942"><a href="/encoding/base64/base64.go.html#3727719">NewEncoder</a></span><span class="op" id="7797952">(</span><span class="ident" id="7797953"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7797964">,</span>&nbsp;<span class="ident" id="7797966"><a href="/encoding/base64/base64_test.go.html#7797907">encoded</a></span><span class="op" id="7797973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797976">nn</span><span class="op" id="7797978">,</span>&nbsp;<span class="ident" id="7797980">err</span>&nbsp;<span class="op" id="7797984">:=</span>&nbsp;<span class="ident" id="7797987"><a href="/encoding/base64/base64_test.go.html#7797937">w</a></span><span class="op" id="7797988">.</span><span class="ident" id="7797989">Write</span><span class="op" id="7797994">(</span><span class="ident" id="7797995"><a href="/encoding/base64/base64_test.go.html#7797743">raw</a></span><span class="op" id="7797998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798001">if</span>&nbsp;<span class="ident" id="7798004"><a href="/encoding/base64/base64_test.go.html#7797976">nn</a></span>&nbsp;<span class="op" id="7798007">!=</span>&nbsp;<span class="ident" id="7798010"><a href="/encoding/base64/base64_test.go.html#7797726">n</a></span>&nbsp;<span class="op" id="7798012">||</span>&nbsp;<span class="ident" id="7798015"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span>&nbsp;<span class="op" id="7798019">!=</span>&nbsp;<span class="ident" id="7798022">nil</span>&nbsp;<span class="op" id="7798026">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798030"><a href="/encoding/base64/base64_test.go.html#7797709">t</a></span><span class="op" id="7798031">.</span><span class="ident" id="7798032">Fatalf</span><span class="op" id="7798038">(</span><span class="string" id="7798039">&#34;Encoder.Write(raw)&nbsp;=&nbsp;%d,&nbsp;%v&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="7798081">,</span>&nbsp;<span class="ident" id="7798083"><a href="/encoding/base64/base64_test.go.html#7797976">nn</a></span><span class="op" id="7798085">,</span>&nbsp;<span class="ident" id="7798087"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span><span class="op" id="7798090">,</span>&nbsp;<span class="ident" id="7798092"><a href="/encoding/base64/base64_test.go.html#7797726">n</a></span><span class="op" id="7798093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798099"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span>&nbsp;<span class="op" id="7798103">=</span>&nbsp;<span class="ident" id="7798105"><a href="/encoding/base64/base64_test.go.html#7797937">w</a></span><span class="op" id="7798106">.</span><span class="ident" id="7798107">Close</span><span class="op" id="7798112">(</span><span class="op" id="7798113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798116">if</span>&nbsp;<span class="ident" id="7798119"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span>&nbsp;<span class="op" id="7798123">!=</span>&nbsp;<span class="ident" id="7798126">nil</span>&nbsp;<span class="op" id="7798130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798134"><a href="/encoding/base64/base64_test.go.html#7797709">t</a></span><span class="op" id="7798135">.</span><span class="ident" id="7798136">Fatalf</span><span class="op" id="7798142">(</span><span class="string" id="7798143">&#34;Encoder.Close()&nbsp;=&nbsp;%v&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7798174">,</span>&nbsp;<span class="ident" id="7798176"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span><span class="op" id="7798179">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798185">decoded</span><span class="op" id="7798192">,</span>&nbsp;<span class="ident" id="7798194"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span>&nbsp;<span class="op" id="7798198">:=</span>&nbsp;<span class="ident" id="7798201"><a href="/encoding/base64/base64_test.go.html#7792748">ioutil</a></span><span class="op" id="7798207">.</span><span class="ident" id="7798208">ReadAll</span><span class="op" id="7798215">(</span><span class="ident" id="7798216"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7798226">(</span><span class="ident" id="7798227"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7798238">,</span>&nbsp;<span class="ident" id="7798240"><a href="/encoding/base64/base64_test.go.html#7797907">encoded</a></span><span class="op" id="7798247">)</span><span class="op" id="7798248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798251">if</span>&nbsp;<span class="ident" id="7798254"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span>&nbsp;<span class="op" id="7798258">!=</span>&nbsp;<span class="ident" id="7798261">nil</span>&nbsp;<span class="op" id="7798265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798269"><a href="/encoding/base64/base64_test.go.html#7797709">t</a></span><span class="op" id="7798270">.</span><span class="ident" id="7798271">Fatalf</span><span class="op" id="7798277">(</span><span class="string" id="7798278">&#34;ioutil.ReadAll(NewDecoder(...)):&nbsp;%v&#34;</span><span class="op" id="7798315">,</span>&nbsp;<span class="ident" id="7798317"><a href="/encoding/base64/base64_test.go.html#7797980">err</a></span><span class="op" id="7798320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798323">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798327">if</span>&nbsp;<span class="op" id="7798330">!</span><span class="ident" id="7798331"><a href="/encoding/base64/base64_test.go.html#7792723">bytes</a></span><span class="op" id="7798336">.</span><span class="ident" id="7798337">Equal</span><span class="op" id="7798342">(</span><span class="ident" id="7798343"><a href="/encoding/base64/base64_test.go.html#7797743">raw</a></span><span class="op" id="7798346">,</span>&nbsp;<span class="ident" id="7798348"><a href="/encoding/base64/base64_test.go.html#7798185">decoded</a></span><span class="op" id="7798355">)</span>&nbsp;<span class="op" id="7798357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798361">var</span>&nbsp;<span class="ident" id="7798365">i</span>&nbsp;<span class="builtintype" id="7798367">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798373">for</span>&nbsp;<span class="ident" id="7798377"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span>&nbsp;<span class="op" id="7798379">=</span>&nbsp;<span class="num" id="7798381">0</span><span class="op" id="7798382">;</span>&nbsp;<span class="ident" id="7798384"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span>&nbsp;<span class="op" id="7798386">&lt;</span>&nbsp;<span class="builtinfunc" id="7798388">len</span><span class="op" id="7798391">(</span><span class="ident" id="7798392"><a href="/encoding/base64/base64_test.go.html#7798185">decoded</a></span><span class="op" id="7798399">)</span>&nbsp;<span class="op" id="7798401">&amp;&amp;</span>&nbsp;<span class="ident" id="7798404"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span>&nbsp;<span class="op" id="7798406">&lt;</span>&nbsp;<span class="builtinfunc" id="7798408">len</span><span class="op" id="7798411">(</span><span class="ident" id="7798412"><a href="/encoding/base64/base64_test.go.html#7797743">raw</a></span><span class="op" id="7798415">)</span><span class="op" id="7798416">;</span>&nbsp;<span class="ident" id="7798418"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span><span class="op" id="7798419">++</span>&nbsp;<span class="op" id="7798422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798427">if</span>&nbsp;<span class="ident" id="7798430"><a href="/encoding/base64/base64_test.go.html#7798185">decoded</a></span><span class="op" id="7798437">[</span><span class="ident" id="7798438"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span><span class="op" id="7798439">]</span>&nbsp;<span class="op" id="7798441">!=</span>&nbsp;<span class="ident" id="7798444"><a href="/encoding/base64/base64_test.go.html#7797743">raw</a></span><span class="op" id="7798447">[</span><span class="ident" id="7798448"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span><span class="op" id="7798449">]</span>&nbsp;<span class="op" id="7798451">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798457">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798474"><a href="/encoding/base64/base64_test.go.html#7797709">t</a></span><span class="op" id="7798475">.</span><span class="ident" id="7798476">Errorf</span><span class="op" id="7798482">(</span><span class="string" id="7798483">&#34;Decode(Encode(%d-byte&nbsp;string))&nbsp;failed&nbsp;at&nbsp;offset&nbsp;%d&#34;</span><span class="op" id="7798535">,</span>&nbsp;<span class="ident" id="7798537"><a href="/encoding/base64/base64_test.go.html#7797726">n</a></span><span class="op" id="7798538">,</span>&nbsp;<span class="ident" id="7798540"><a href="/encoding/base64/base64_test.go.html#7798365">i</a></span><span class="op" id="7798541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798544">}</span><br>
<span class="lineno">220</span><span class="op" id="7798546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7798549">func</span>&nbsp;<span class="ident" id="7798554">TestNewLineCharacters</span><span class="op" id="7798575">(</span><span class="ident" id="7798576">t</span>&nbsp;<span class="op" id="7798578">*</span><span class="ident" id="7798579"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7798586">.</span><span class="ident" id="7798587">T</span><span class="op" id="7798588">)</span>&nbsp;<span class="op" id="7798590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798593">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;should&nbsp;decode&nbsp;to&nbsp;the&nbsp;string&nbsp;&#34;sure&#34;,&nbsp;without&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798663">const</span>&nbsp;<span class="ident" id="7798669">expected</span>&nbsp;<span class="op" id="7798678">=</span>&nbsp;<span class="string" id="7798680">&#34;sure&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798688">examples</span>&nbsp;<span class="op" id="7798697">:=</span>&nbsp;<span class="op" id="7798700">[</span><span class="op" id="7798701">]</span><span class="builtintype" id="7798702">string</span><span class="op" id="7798708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798712">&#34;c3VyZQ==&#34;</span><span class="op" id="7798722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798726">&#34;c3VyZQ==\r&#34;</span><span class="op" id="7798738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798742">&#34;c3VyZQ==\n&#34;</span><span class="op" id="7798754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798758">&#34;c3VyZQ==\r\n&#34;</span><span class="op" id="7798772">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798776">&#34;c3VyZ\r\nQ==&#34;</span><span class="op" id="7798790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798794">&#34;c3V\ryZ\nQ==&#34;</span><span class="op" id="7798808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798812">&#34;c3V\nyZ\rQ==&#34;</span><span class="op" id="7798826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798830">&#34;c3VyZ\nQ==&#34;</span><span class="op" id="7798842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798846">&#34;c3VyZQ\n==&#34;</span><span class="op" id="7798858">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798862">&#34;c3VyZQ=\n=&#34;</span><span class="op" id="7798874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7798878">&#34;c3VyZQ=\r\n\r\n=&#34;</span><span class="op" id="7798896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798902">for</span>&nbsp;<span class="ident" id="7798906">_</span><span class="op" id="7798907">,</span>&nbsp;<span class="ident" id="7798909">e</span>&nbsp;<span class="op" id="7798911">:=</span>&nbsp;<span class="keyword" id="7798914">range</span>&nbsp;<span class="ident" id="7798920"><a href="/encoding/base64/base64_test.go.html#7798688">examples</a></span>&nbsp;<span class="op" id="7798929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798933">buf</span><span class="op" id="7798936">,</span>&nbsp;<span class="ident" id="7798938">err</span>&nbsp;<span class="op" id="7798942">:=</span>&nbsp;<span class="ident" id="7798945"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7798956">.</span><span class="ident" id="7798957">DecodeString</span><span class="op" id="7798969">(</span><span class="ident" id="7798970"><a href="/encoding/base64/base64_test.go.html#7798909">e</a></span><span class="op" id="7798971">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798975">if</span>&nbsp;<span class="ident" id="7798978"><a href="/encoding/base64/base64_test.go.html#7798938">err</a></span>&nbsp;<span class="op" id="7798982">!=</span>&nbsp;<span class="ident" id="7798985">nil</span>&nbsp;<span class="op" id="7798989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798994"><a href="/encoding/base64/base64_test.go.html#7798576">t</a></span><span class="op" id="7798995">.</span><span class="ident" id="7798996">Errorf</span><span class="op" id="7799002">(</span><span class="string" id="7799003">&#34;Decode(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7799026">,</span>&nbsp;<span class="ident" id="7799028"><a href="/encoding/base64/base64_test.go.html#7798909">e</a></span><span class="op" id="7799029">,</span>&nbsp;<span class="ident" id="7799031"><a href="/encoding/base64/base64_test.go.html#7798938">err</a></span><span class="op" id="7799034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799039">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799054">if</span>&nbsp;<span class="ident" id="7799057">s</span>&nbsp;<span class="op" id="7799059">:=</span>&nbsp;<span class="builtintype" id="7799062">string</span><span class="op" id="7799068">(</span><span class="ident" id="7799069"><a href="/encoding/base64/base64_test.go.html#7798933">buf</a></span><span class="op" id="7799072">)</span><span class="op" id="7799073">;</span>&nbsp;<span class="ident" id="7799075"><a href="/encoding/base64/base64_test.go.html#7799057">s</a></span>&nbsp;<span class="op" id="7799077">!=</span>&nbsp;<span class="ident" id="7799080"><a href="/encoding/base64/base64_test.go.html#7798669">expected</a></span>&nbsp;<span class="op" id="7799089">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799094"><a href="/encoding/base64/base64_test.go.html#7798576">t</a></span><span class="op" id="7799095">.</span><span class="ident" id="7799096">Errorf</span><span class="op" id="7799102">(</span><span class="string" id="7799103">&#34;Decode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7799129">,</span>&nbsp;<span class="ident" id="7799131"><a href="/encoding/base64/base64_test.go.html#7798909">e</a></span><span class="op" id="7799132">,</span>&nbsp;<span class="ident" id="7799134"><a href="/encoding/base64/base64_test.go.html#7799057">s</a></span><span class="op" id="7799135">,</span>&nbsp;<span class="ident" id="7799137"><a href="/encoding/base64/base64_test.go.html#7798669">expected</a></span><span class="op" id="7799145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799152">}</span><br>
<span class="lineno"></span><span class="op" id="7799154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7799157">type</span>&nbsp;<span class="ident" id="7799162">nextRead</span>&nbsp;<span class="keyword" id="7799171">struct</span>&nbsp;<span class="op" id="7799178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799181">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7799185">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7799191">//&nbsp;bytes&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799211">err</span>&nbsp;<span class="builtintype" id="7799215">error</span>&nbsp;<span class="comment" id="7799221">//&nbsp;error&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7799240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="7799243">//&nbsp;faultInjectReader&nbsp;returns&nbsp;data&nbsp;from&nbsp;source,&nbsp;rate-limited</span><br>
<span class="lineno"></span><span class="comment" id="7799303">//&nbsp;and&nbsp;with&nbsp;the&nbsp;errors&nbsp;as&nbsp;written&nbsp;to&nbsp;nextc.</span><br>
<span class="lineno"></span><span class="keyword" id="7799347">type</span>&nbsp;<span class="ident" id="7799352">faultInjectReader</span>&nbsp;<span class="keyword" id="7799370">struct</span>&nbsp;<span class="op" id="7799377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799380">source</span>&nbsp;<span class="builtintype" id="7799387">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799395">nextc</span>&nbsp;&nbsp;<span class="op" id="7799402">&lt;-</span><span class="keyword" id="7799404">chan</span>&nbsp;<span class="ident" id="7799409"><a href="/encoding/base64/base64_test.go.html#7799162">nextRead</a></span><br>
<span class="lineno">260</span><span class="op" id="7799418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7799421">func</span>&nbsp;<span class="op" id="7799426">(</span><span class="ident" id="7799427">r</span>&nbsp;<span class="op" id="7799429">*</span><span class="ident" id="7799430"><a href="/encoding/base64/base64_test.go.html#7799352">faultInjectReader</a></span><span class="op" id="7799447">)</span>&nbsp;<span class="ident" id="7799449">Read</span><span class="op" id="7799453">(</span><span class="ident" id="7799454">p</span>&nbsp;<span class="op" id="7799456">[</span><span class="op" id="7799457">]</span><span class="builtintype" id="7799458">byte</span><span class="op" id="7799462">)</span>&nbsp;<span class="op" id="7799464">(</span><span class="builtintype" id="7799465">int</span><span class="op" id="7799468">,</span>&nbsp;<span class="builtintype" id="7799470">error</span><span class="op" id="7799475">)</span>&nbsp;<span class="op" id="7799477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799480">nr</span>&nbsp;<span class="op" id="7799483">:=</span>&nbsp;<span class="op" id="7799486">&lt;-</span><span class="ident" id="7799488"><a href="/encoding/base64/base64_test.go.html#7799427">r</a></span><span class="op" id="7799489">.</span><span class="ident" id="7799490">nextc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799497">if</span>&nbsp;<span class="builtinfunc" id="7799500">len</span><span class="op" id="7799503">(</span><span class="ident" id="7799504"><a href="/encoding/base64/base64_test.go.html#7799454">p</a></span><span class="op" id="7799505">)</span>&nbsp;<span class="op" id="7799507">&gt;</span>&nbsp;<span class="ident" id="7799509"><a href="/encoding/base64/base64_test.go.html#7799480">nr</a></span><span class="op" id="7799511">.</span><span class="ident" id="7799512">n</span>&nbsp;<span class="op" id="7799514">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799518"><a href="/encoding/base64/base64_test.go.html#7799454">p</a></span>&nbsp;<span class="op" id="7799520">=</span>&nbsp;<span class="ident" id="7799522"><a href="/encoding/base64/base64_test.go.html#7799454">p</a></span><span class="op" id="7799523">[</span><span class="op" id="7799524">:</span><span class="ident" id="7799525"><a href="/encoding/base64/base64_test.go.html#7799480">nr</a></span><span class="op" id="7799527">.</span><span class="ident" id="7799528">n</span><span class="op" id="7799529">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799535">n</span>&nbsp;<span class="op" id="7799537">:=</span>&nbsp;<span class="builtinfunc" id="7799540">copy</span><span class="op" id="7799544">(</span><span class="ident" id="7799545"><a href="/encoding/base64/base64_test.go.html#7799454">p</a></span><span class="op" id="7799546">,</span>&nbsp;<span class="ident" id="7799548"><a href="/encoding/base64/base64_test.go.html#7799427">r</a></span><span class="op" id="7799549">.</span><span class="ident" id="7799550">source</span><span class="op" id="7799556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799559"><a href="/encoding/base64/base64_test.go.html#7799427">r</a></span><span class="op" id="7799560">.</span><span class="ident" id="7799561">source</span>&nbsp;<span class="op" id="7799568">=</span>&nbsp;<span class="ident" id="7799570"><a href="/encoding/base64/base64_test.go.html#7799427">r</a></span><span class="op" id="7799571">.</span><span class="ident" id="7799572">source</span><span class="op" id="7799578">[</span><span class="ident" id="7799579"><a href="/encoding/base64/base64_test.go.html#7799535">n</a></span><span class="op" id="7799580">:</span><span class="op" id="7799581">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799584">return</span>&nbsp;<span class="ident" id="7799591"><a href="/encoding/base64/base64_test.go.html#7799535">n</a></span><span class="op" id="7799592">,</span>&nbsp;<span class="ident" id="7799594"><a href="/encoding/base64/base64_test.go.html#7799480">nr</a></span><span class="op" id="7799596">.</span><span class="ident" id="7799597">err</span><br>
<span class="lineno">270</span><span class="op" id="7799601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7799604">//&nbsp;tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;ignore&nbsp;errors&nbsp;from&nbsp;our&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span><span class="keyword" id="7799668">func</span>&nbsp;<span class="ident" id="7799673">TestDecoderIssue3577</span><span class="op" id="7799693">(</span><span class="ident" id="7799694">t</span>&nbsp;<span class="op" id="7799696">*</span><span class="ident" id="7799697"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7799704">.</span><span class="ident" id="7799705">T</span><span class="op" id="7799706">)</span>&nbsp;<span class="op" id="7799708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799711">next</span>&nbsp;<span class="op" id="7799716">:=</span>&nbsp;<span class="builtinfunc" id="7799719">make</span><span class="op" id="7799723">(</span><span class="keyword" id="7799724">chan</span>&nbsp;<span class="ident" id="7799729"><a href="/encoding/base64/base64_test.go.html#7799162">nextRead</a></span><span class="op" id="7799737">,</span>&nbsp;<span class="num" id="7799739">10</span><span class="op" id="7799741">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799744">wantErr</span>&nbsp;<span class="op" id="7799752">:=</span>&nbsp;<span class="ident" id="7799755"><a href="/encoding/base64/base64_test.go.html#7792732">errors</a></span><span class="op" id="7799761">.</span><span class="ident" id="7799762">New</span><span class="op" id="7799765">(</span><span class="string" id="7799766">&#34;my&nbsp;error&#34;</span><span class="op" id="7799776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799779"><a href="/encoding/base64/base64_test.go.html#7799711">next</a></span>&nbsp;<span class="op" id="7799784">&lt;-</span>&nbsp;<span class="ident" id="7799787"><a href="/encoding/base64/base64_test.go.html#7799162">nextRead</a></span><span class="op" id="7799795">{</span><span class="num" id="7799796">5</span><span class="op" id="7799797">,</span>&nbsp;<span class="ident" id="7799799">nil</span><span class="op" id="7799802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799805"><a href="/encoding/base64/base64_test.go.html#7799711">next</a></span>&nbsp;<span class="op" id="7799810">&lt;-</span>&nbsp;<span class="ident" id="7799813"><a href="/encoding/base64/base64_test.go.html#7799162">nextRead</a></span><span class="op" id="7799821">{</span><span class="num" id="7799822">10</span><span class="op" id="7799824">,</span>&nbsp;<span class="ident" id="7799826"><a href="/encoding/base64/base64_test.go.html#7799744">wantErr</a></span><span class="op" id="7799833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799836"><a href="/encoding/base64/base64_test.go.html#7799711">next</a></span>&nbsp;<span class="op" id="7799841">&lt;-</span>&nbsp;<span class="ident" id="7799844"><a href="/encoding/base64/base64_test.go.html#7799162">nextRead</a></span><span class="op" id="7799852">{</span><span class="num" id="7799853">0</span><span class="op" id="7799854">,</span>&nbsp;<span class="ident" id="7799856"><a href="/encoding/base64/base64_test.go.html#7799744">wantErr</a></span><span class="op" id="7799863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799866">d</span>&nbsp;<span class="op" id="7799868">:=</span>&nbsp;<span class="ident" id="7799871"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7799881">(</span><span class="ident" id="7799882"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7799893">,</span>&nbsp;<span class="op" id="7799895">&amp;</span><span class="ident" id="7799896"><a href="/encoding/base64/base64_test.go.html#7799352">faultInjectReader</a></span><span class="op" id="7799913">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799917">source</span><span class="op" id="7799923">:</span>&nbsp;<span class="string" id="7799925">&#34;VHdhcyBicmlsbGlnLCBhbmQgdGhlIHNsaXRoeSB0b3Zlcw==&#34;</span><span class="op" id="7799975">,</span>&nbsp;<span class="comment" id="7799977">//&nbsp;twas&nbsp;brillig...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799998">nextc</span><span class="op" id="7800003">:</span>&nbsp;&nbsp;<span class="ident" id="7800006"><a href="/encoding/base64/base64_test.go.html#7799711">next</a></span><span class="op" id="7800010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800013">}</span><span class="op" id="7800014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800017">errc</span>&nbsp;<span class="op" id="7800022">:=</span>&nbsp;<span class="builtinfunc" id="7800025">make</span><span class="op" id="7800029">(</span><span class="keyword" id="7800030">chan</span>&nbsp;<span class="builtintype" id="7800035">error</span><span class="op" id="7800040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800043">go</span>&nbsp;<span class="keyword" id="7800046">func</span><span class="op" id="7800050">(</span><span class="op" id="7800051">)</span>&nbsp;<span class="op" id="7800053">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800057">_</span><span class="op" id="7800058">,</span>&nbsp;<span class="ident" id="7800060">err</span>&nbsp;<span class="op" id="7800064">:=</span>&nbsp;<span class="ident" id="7800067"><a href="/encoding/base64/base64_test.go.html#7792748">ioutil</a></span><span class="op" id="7800073">.</span><span class="ident" id="7800074">ReadAll</span><span class="op" id="7800081">(</span><span class="ident" id="7800082"><a href="/encoding/base64/base64_test.go.html#7799866">d</a></span><span class="op" id="7800083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800087"><a href="/encoding/base64/base64_test.go.html#7800017">errc</a></span>&nbsp;<span class="op" id="7800092">&lt;-</span>&nbsp;<span class="ident" id="7800095"><a href="/encoding/base64/base64_test.go.html#7800060">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800100">}</span><span class="op" id="7800101">(</span><span class="op" id="7800102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800105">select</span>&nbsp;<span class="op" id="7800112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800115">case</span>&nbsp;<span class="ident" id="7800120">err</span>&nbsp;<span class="op" id="7800124">:=</span>&nbsp;<span class="op" id="7800127">&lt;-</span><span class="ident" id="7800129"><a href="/encoding/base64/base64_test.go.html#7800017">errc</a></span><span class="op" id="7800133">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800137">if</span>&nbsp;<span class="ident" id="7800140"><a href="/encoding/base64/base64_test.go.html#7800120">err</a></span>&nbsp;<span class="op" id="7800144">!=</span>&nbsp;<span class="ident" id="7800147"><a href="/encoding/base64/base64_test.go.html#7799744">wantErr</a></span>&nbsp;<span class="op" id="7800155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800160"><a href="/encoding/base64/base64_test.go.html#7799694">t</a></span><span class="op" id="7800161">.</span><span class="ident" id="7800162">Errorf</span><span class="op" id="7800168">(</span><span class="string" id="7800169">&#34;got&nbsp;error&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7800192">,</span>&nbsp;<span class="ident" id="7800194"><a href="/encoding/base64/base64_test.go.html#7800120">err</a></span><span class="op" id="7800197">,</span>&nbsp;<span class="ident" id="7800199"><a href="/encoding/base64/base64_test.go.html#7799744">wantErr</a></span><span class="op" id="7800206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800213">case</span>&nbsp;<span class="op" id="7800218">&lt;-</span><span class="ident" id="7800220"><a href="/encoding/base64/base64_test.go.html#7792794">time</a></span><span class="op" id="7800224">.</span><span class="ident" id="7800225">After</span><span class="op" id="7800230">(</span><span class="num" id="7800231">5</span>&nbsp;<span class="op" id="7800233">*</span>&nbsp;<span class="ident" id="7800235"><a href="/encoding/base64/base64_test.go.html#7792794">time</a></span><span class="op" id="7800239">.</span><span class="ident" id="7800240">Second</span><span class="op" id="7800246">)</span><span class="op" id="7800247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800251"><a href="/encoding/base64/base64_test.go.html#7799694">t</a></span><span class="op" id="7800252">.</span><span class="ident" id="7800253">Errorf</span><span class="op" id="7800259">(</span><span class="string" id="7800260">&#34;timeout;&nbsp;Decoder&nbsp;blocked&nbsp;without&nbsp;returning&nbsp;an&nbsp;error&#34;</span><span class="op" id="7800313">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800316">}</span><br>
<span class="lineno"></span><span class="op" id="7800318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7800321">func</span>&nbsp;<span class="ident" id="7800326">TestDecoderIssue4779</span><span class="op" id="7800346">(</span><span class="ident" id="7800347">t</span>&nbsp;<span class="op" id="7800349">*</span><span class="ident" id="7800350"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7800357">.</span><span class="ident" id="7800358">T</span><span class="op" id="7800359">)</span>&nbsp;<span class="op" id="7800361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800364">encoded</span>&nbsp;<span class="op" id="7800372">:=</span>&nbsp;<span class="string" id="7800375">`CP/EAT8AAAEF<br>
<span class="lineno">300</span>AQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAAB<br>
<span class="lineno"></span>BAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHx<br>
<span class="lineno"></span>Y3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm<br>
<span class="lineno"></span>9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS<br>
<span class="lineno"></span>0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0<br>
<span class="lineno">305</span>pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9VSSSSUpJJJJSkkkJ+Tj<br>
<span class="lineno"></span>1kiy1jCJJDnAcCTykpKkuQ6p/jN6FgmxlNduXawwAzaGH+V6jn/R/wCt71zdn+N/qL3kVYFNYB4N<br>
<span class="lineno"></span>ji6PDVjWpKp9TSXnvTf8bFNjg3qOEa2n6VlLpj/rT/pf567DpX1i6L1hs9Py67X8mqdtg/rUWbbf<br>
<span class="lineno"></span>+gkp0kkkklKSSSSUpJJJJT//0PVUkkklKVLq3WMDpGI7KzrNjADtYNXvI/Mqr/Pd/q9W3vaxjnvM<br>
<span class="lineno"></span>NaCXE9gNSvGPrf8AWS3qmba5jjsJhoB0DAf0NDf6sevf+/lf8Hj0JJATfWT6/dV6oXU1uOLQeKKn<br>
<span class="lineno">310</span>EQP+Hubtfe/+R7Mf/g7f5xcocp++Z11JMCJPgFBxOg7/AOuqDx8I/ikpkXkmSdU8mJIJA/O8EMAy<br>
<span class="lineno"></span>j+mSARB/17pKVXYWHXjsj7yIex0PadzXMO1zT5KHoNA3HT8ietoGhgjsfA+CSnvvqh/jJtqsrwOv<br>
<span class="lineno"></span>2b6NGNzXfTYexzJ+nU7/ALkf4P8Awv6P9KvTQQ4AgyDqCF85Pho3CTB7eHwXoH+LT65uZbX9X+o2<br>
<span class="lineno"></span>bqbPb06551Y4<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801406">encodedShort</span>&nbsp;<span class="op" id="7801419">:=</span>&nbsp;<span class="ident" id="7801422"><a href="/encoding/base64/base64_test.go.html#7792772">strings</a></span><span class="op" id="7801429">.</span><span class="ident" id="7801430">Replace</span><span class="op" id="7801437">(</span><span class="ident" id="7801438"><a href="/encoding/base64/base64_test.go.html#7800364">encoded</a></span><span class="op" id="7801445">,</span>&nbsp;<span class="string" id="7801447">&#34;\n&#34;</span><span class="op" id="7801451">,</span>&nbsp;<span class="string" id="7801453">&#34;&#34;</span><span class="op" id="7801455">,</span>&nbsp;<span class="op" id="7801457">-</span><span class="num" id="7801458">1</span><span class="op" id="7801459">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801463">dec</span>&nbsp;<span class="op" id="7801467">:=</span>&nbsp;<span class="ident" id="7801470"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7801480">(</span><span class="ident" id="7801481"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7801492">,</span>&nbsp;<span class="ident" id="7801494"><a href="/encoding/base64/base64_test.go.html#7792772">strings</a></span><span class="op" id="7801501">.</span><span class="ident" id="7801502">NewReader</span><span class="op" id="7801511">(</span><span class="ident" id="7801512"><a href="/encoding/base64/base64_test.go.html#7800364">encoded</a></span><span class="op" id="7801519">)</span><span class="op" id="7801520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801523">res1</span><span class="op" id="7801527">,</span>&nbsp;<span class="ident" id="7801529">err</span>&nbsp;<span class="op" id="7801533">:=</span>&nbsp;<span class="ident" id="7801536"><a href="/encoding/base64/base64_test.go.html#7792748">ioutil</a></span><span class="op" id="7801542">.</span><span class="ident" id="7801543">ReadAll</span><span class="op" id="7801550">(</span><span class="ident" id="7801551"><a href="/encoding/base64/base64_test.go.html#7801463">dec</a></span><span class="op" id="7801554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801557">if</span>&nbsp;<span class="ident" id="7801560"><a href="/encoding/base64/base64_test.go.html#7801529">err</a></span>&nbsp;<span class="op" id="7801564">!=</span>&nbsp;<span class="ident" id="7801567">nil</span>&nbsp;<span class="op" id="7801571">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801575"><a href="/encoding/base64/base64_test.go.html#7800347">t</a></span><span class="op" id="7801576">.</span><span class="ident" id="7801577">Errorf</span><span class="op" id="7801583">(</span><span class="string" id="7801584">&#34;ReadAll&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7801604">,</span>&nbsp;<span class="ident" id="7801606"><a href="/encoding/base64/base64_test.go.html#7801529">err</a></span><span class="op" id="7801609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801616"><a href="/encoding/base64/base64_test.go.html#7801463">dec</a></span>&nbsp;<span class="op" id="7801620">=</span>&nbsp;<span class="ident" id="7801622"><a href="/encoding/base64/base64.go.html#3732261">NewDecoder</a></span><span class="op" id="7801632">(</span><span class="ident" id="7801633"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7801644">,</span>&nbsp;<span class="ident" id="7801646"><a href="/encoding/base64/base64_test.go.html#7792772">strings</a></span><span class="op" id="7801653">.</span><span class="ident" id="7801654">NewReader</span><span class="op" id="7801663">(</span><span class="ident" id="7801664"><a href="/encoding/base64/base64_test.go.html#7801406">encodedShort</a></span><span class="op" id="7801676">)</span><span class="op" id="7801677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801680">var</span>&nbsp;<span class="ident" id="7801684">res2</span>&nbsp;<span class="op" id="7801689">[</span><span class="op" id="7801690">]</span><span class="builtintype" id="7801691">byte</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801697"><a href="/encoding/base64/base64_test.go.html#7801684">res2</a></span><span class="op" id="7801701">,</span>&nbsp;<span class="ident" id="7801703"><a href="/encoding/base64/base64_test.go.html#7801529">err</a></span>&nbsp;<span class="op" id="7801707">=</span>&nbsp;<span class="ident" id="7801709"><a href="/encoding/base64/base64_test.go.html#7792748">ioutil</a></span><span class="op" id="7801715">.</span><span class="ident" id="7801716">ReadAll</span><span class="op" id="7801723">(</span><span class="ident" id="7801724"><a href="/encoding/base64/base64_test.go.html#7801463">dec</a></span><span class="op" id="7801727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801730">if</span>&nbsp;<span class="ident" id="7801733"><a href="/encoding/base64/base64_test.go.html#7801529">err</a></span>&nbsp;<span class="op" id="7801737">!=</span>&nbsp;<span class="ident" id="7801740">nil</span>&nbsp;<span class="op" id="7801744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801748"><a href="/encoding/base64/base64_test.go.html#7800347">t</a></span><span class="op" id="7801749">.</span><span class="ident" id="7801750">Errorf</span><span class="op" id="7801756">(</span><span class="string" id="7801757">&#34;ReadAll&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7801777">,</span>&nbsp;<span class="ident" id="7801779"><a href="/encoding/base64/base64_test.go.html#7801529">err</a></span><span class="op" id="7801782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801789">if</span>&nbsp;<span class="op" id="7801792">!</span><span class="ident" id="7801793"><a href="/encoding/base64/base64_test.go.html#7792723">bytes</a></span><span class="op" id="7801798">.</span><span class="ident" id="7801799">Equal</span><span class="op" id="7801804">(</span><span class="ident" id="7801805"><a href="/encoding/base64/base64_test.go.html#7801523">res1</a></span><span class="op" id="7801809">,</span>&nbsp;<span class="ident" id="7801811"><a href="/encoding/base64/base64_test.go.html#7801684">res2</a></span><span class="op" id="7801815">)</span>&nbsp;<span class="op" id="7801817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801821"><a href="/encoding/base64/base64_test.go.html#7800347">t</a></span><span class="op" id="7801822">.</span><span class="ident" id="7801823">Error</span><span class="op" id="7801828">(</span><span class="string" id="7801829">&#34;Decoded&nbsp;results&nbsp;not&nbsp;equal&#34;</span><span class="op" id="7801856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801859">}</span><br>
<span class="lineno"></span><span class="op" id="7801861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7801864">func</span>&nbsp;<span class="ident" id="7801869">TestDecoderIssue7733</span><span class="op" id="7801889">(</span><span class="ident" id="7801890">t</span>&nbsp;<span class="op" id="7801892">*</span><span class="ident" id="7801893"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7801900">.</span><span class="ident" id="7801901">T</span><span class="op" id="7801902">)</span>&nbsp;<span class="op" id="7801904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801907">s</span><span class="op" id="7801908">,</span>&nbsp;<span class="ident" id="7801910">err</span>&nbsp;<span class="op" id="7801914">:=</span>&nbsp;<span class="ident" id="7801917"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7801928">.</span><span class="ident" id="7801929">DecodeString</span><span class="op" id="7801941">(</span><span class="string" id="7801942">&#34;YWJjZA=====&#34;</span><span class="op" id="7801955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801958">want</span>&nbsp;<span class="op" id="7801963">:=</span>&nbsp;<span class="ident" id="7801966"><a href="/encoding/base64/base64.go.html#3728006">CorruptInputError</a></span><span class="op" id="7801983">(</span><span class="num" id="7801984">8</span><span class="op" id="7801985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801988">if</span>&nbsp;<span class="op" id="7801991">!</span><span class="ident" id="7801992"><a href="/encoding/base64/base64_test.go.html#7792761">reflect</a></span><span class="op" id="7801999">.</span><span class="ident" id="7802000">DeepEqual</span><span class="op" id="7802009">(</span><span class="ident" id="7802010"><a href="/encoding/base64/base64_test.go.html#7801958">want</a></span><span class="op" id="7802014">,</span>&nbsp;<span class="ident" id="7802016"><a href="/encoding/base64/base64_test.go.html#7801910">err</a></span><span class="op" id="7802019">)</span>&nbsp;<span class="op" id="7802021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802025"><a href="/encoding/base64/base64_test.go.html#7801890">t</a></span><span class="op" id="7802026">.</span><span class="ident" id="7802027">Errorf</span><span class="op" id="7802033">(</span><span class="string" id="7802034">&#34;Error&nbsp;=&nbsp;%v;&nbsp;want&nbsp;CorruptInputError(8)&#34;</span><span class="op" id="7802073">,</span>&nbsp;<span class="ident" id="7802075"><a href="/encoding/base64/base64_test.go.html#7801910">err</a></span><span class="op" id="7802078">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802084">if</span>&nbsp;<span class="builtintype" id="7802087">string</span><span class="op" id="7802093">(</span><span class="ident" id="7802094"><a href="/encoding/base64/base64_test.go.html#7801907">s</a></span><span class="op" id="7802095">)</span>&nbsp;<span class="op" id="7802097">!=</span>&nbsp;<span class="string" id="7802100">&#34;abcd&#34;</span>&nbsp;<span class="op" id="7802107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802111"><a href="/encoding/base64/base64_test.go.html#7801890">t</a></span><span class="op" id="7802112">.</span><span class="ident" id="7802113">Errorf</span><span class="op" id="7802119">(</span><span class="string" id="7802120">&#34;DecodeString&nbsp;=&nbsp;%q;&nbsp;want&nbsp;abcd&#34;</span><span class="op" id="7802150">,</span>&nbsp;<span class="ident" id="7802152"><a href="/encoding/base64/base64_test.go.html#7801907">s</a></span><span class="op" id="7802153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802156">}</span><br>
<span class="lineno"></span><span class="op" id="7802158">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="keyword" id="7802161">func</span>&nbsp;<span class="ident" id="7802166">BenchmarkEncodeToString</span><span class="op" id="7802189">(</span><span class="ident" id="7802190">b</span>&nbsp;<span class="op" id="7802192">*</span><span class="ident" id="7802193"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7802200">.</span><span class="ident" id="7802201">B</span><span class="op" id="7802202">)</span>&nbsp;<span class="op" id="7802204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802207">data</span>&nbsp;<span class="op" id="7802212">:=</span>&nbsp;<span class="builtinfunc" id="7802215">make</span><span class="op" id="7802219">(</span><span class="op" id="7802220">[</span><span class="op" id="7802221">]</span><span class="builtintype" id="7802222">byte</span><span class="op" id="7802226">,</span>&nbsp;<span class="num" id="7802228">8192</span><span class="op" id="7802232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802235"><a href="/encoding/base64/base64_test.go.html#7802190">b</a></span><span class="op" id="7802236">.</span><span class="ident" id="7802237">SetBytes</span><span class="op" id="7802245">(</span><span class="ident" id="7802246">int64</span><span class="op" id="7802251">(</span><span class="builtinfunc" id="7802252">len</span><span class="op" id="7802255">(</span><span class="ident" id="7802256"><a href="/encoding/base64/base64_test.go.html#7802207">data</a></span><span class="op" id="7802260">)</span><span class="op" id="7802261">)</span><span class="op" id="7802262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802265">for</span>&nbsp;<span class="ident" id="7802269">i</span>&nbsp;<span class="op" id="7802271">:=</span>&nbsp;<span class="num" id="7802274">0</span><span class="op" id="7802275">;</span>&nbsp;<span class="ident" id="7802277"><a href="/encoding/base64/base64_test.go.html#7802269">i</a></span>&nbsp;<span class="op" id="7802279">&lt;</span>&nbsp;<span class="ident" id="7802281"><a href="/encoding/base64/base64_test.go.html#7802190">b</a></span><span class="op" id="7802282">.</span><span class="ident" id="7802283">N</span><span class="op" id="7802284">;</span>&nbsp;<span class="ident" id="7802286"><a href="/encoding/base64/base64_test.go.html#7802269">i</a></span><span class="op" id="7802287">++</span>&nbsp;<span class="op" id="7802290">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802294"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7802305">.</span><span class="ident" id="7802306">EncodeToString</span><span class="op" id="7802320">(</span><span class="ident" id="7802321"><a href="/encoding/base64/base64_test.go.html#7802207">data</a></span><span class="op" id="7802325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802328">}</span><br>
<span class="lineno"></span><span class="op" id="7802330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802333">func</span>&nbsp;<span class="ident" id="7802338">BenchmarkDecodeString</span><span class="op" id="7802359">(</span><span class="ident" id="7802360">b</span>&nbsp;<span class="op" id="7802362">*</span><span class="ident" id="7802363"><a href="/encoding/base64/base64_test.go.html#7792783">testing</a></span><span class="op" id="7802370">.</span><span class="ident" id="7802371">B</span><span class="op" id="7802372">)</span>&nbsp;<span class="op" id="7802374">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802377">data</span>&nbsp;<span class="op" id="7802382">:=</span>&nbsp;<span class="ident" id="7802385"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7802396">.</span><span class="ident" id="7802397">EncodeToString</span><span class="op" id="7802411">(</span><span class="builtinfunc" id="7802412">make</span><span class="op" id="7802416">(</span><span class="op" id="7802417">[</span><span class="op" id="7802418">]</span><span class="builtintype" id="7802419">byte</span><span class="op" id="7802423">,</span>&nbsp;<span class="num" id="7802425">8192</span><span class="op" id="7802429">)</span><span class="op" id="7802430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802433"><a href="/encoding/base64/base64_test.go.html#7802360">b</a></span><span class="op" id="7802434">.</span><span class="ident" id="7802435">SetBytes</span><span class="op" id="7802443">(</span><span class="ident" id="7802444">int64</span><span class="op" id="7802449">(</span><span class="builtinfunc" id="7802450">len</span><span class="op" id="7802453">(</span><span class="ident" id="7802454"><a href="/encoding/base64/base64_test.go.html#7802377">data</a></span><span class="op" id="7802458">)</span><span class="op" id="7802459">)</span><span class="op" id="7802460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802463">for</span>&nbsp;<span class="ident" id="7802467">i</span>&nbsp;<span class="op" id="7802469">:=</span>&nbsp;<span class="num" id="7802472">0</span><span class="op" id="7802473">;</span>&nbsp;<span class="ident" id="7802475"><a href="/encoding/base64/base64_test.go.html#7802467">i</a></span>&nbsp;<span class="op" id="7802477">&lt;</span>&nbsp;<span class="ident" id="7802479"><a href="/encoding/base64/base64_test.go.html#7802360">b</a></span><span class="op" id="7802480">.</span><span class="ident" id="7802481">N</span><span class="op" id="7802482">;</span>&nbsp;<span class="ident" id="7802484"><a href="/encoding/base64/base64_test.go.html#7802467">i</a></span><span class="op" id="7802485">++</span>&nbsp;<span class="op" id="7802488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802492"><a href="/encoding/base64/base64.go.html#3724538">StdEncoding</a></span><span class="op" id="7802503">.</span><span class="ident" id="7802504">DecodeString</span><span class="op" id="7802516">(</span><span class="ident" id="7802517"><a href="/encoding/base64/base64_test.go.html#7802377">data</a></span><span class="op" id="7802521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802524">}</span><br>
<span class="lineno">360</span><span class="op" id="7802526">}</span>
</div>
</body>
</html>
