<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5313736">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5313791">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5313845">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5313896">package</span>&nbsp;<span class="ident" id="5313904">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5313910">import</span>&nbsp;<span class="op" id="5313917">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5313920">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5313930">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5313933">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5314006">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="5314074">type</span>&nbsp;<span class="ident" id="5314079">tagOptions</span>&nbsp;<span class="builtintype" id="5314090">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5314098">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5314161">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="5314189">func</span>&nbsp;<span class="ident" id="5314194">parseTag</span><span class="op" id="5314202">(</span><span class="ident" id="5314203">tag</span>&nbsp;<span class="builtintype" id="5314207">string</span><span class="op" id="5314213">)</span>&nbsp;<span class="op" id="5314215">(</span><span class="builtintype" id="5314216">string</span><span class="op" id="5314222">,</span>&nbsp;<span class="ident" id="5314224">tagOptions</span><span class="op" id="5314234">)</span>&nbsp;<span class="op" id="5314236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314239">if</span>&nbsp;<span class="ident" id="5314242">idx</span>&nbsp;<span class="op" id="5314246">:=</span>&nbsp;<span class="ident" id="5314249">strings</span><span class="op" id="5314256">.</span><span class="ident" id="5314257">Index</span><span class="op" id="5314262">(</span><span class="ident" id="5314263">tag</span><span class="op" id="5314266">,</span>&nbsp;<span class="string" id="5314268">&#34;,&#34;</span><span class="op" id="5314271">)</span><span class="op" id="5314272">;</span>&nbsp;<span class="ident" id="5314274">idx</span>&nbsp;<span class="op" id="5314278">!=</span>&nbsp;<span class="op" id="5314281">-</span><span class="num" id="5314282">1</span>&nbsp;<span class="op" id="5314284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314288">return</span>&nbsp;<span class="ident" id="5314295">tag</span><span class="op" id="5314298">[</span><span class="op" id="5314299">:</span><span class="ident" id="5314300">idx</span><span class="op" id="5314303">]</span><span class="op" id="5314304">,</span>&nbsp;<span class="ident" id="5314306">tagOptions</span><span class="op" id="5314316">(</span><span class="ident" id="5314317">tag</span><span class="op" id="5314320">[</span><span class="ident" id="5314321">idx</span><span class="op" id="5314324">+</span><span class="num" id="5314325">1</span><span class="op" id="5314326">:</span><span class="op" id="5314327">]</span><span class="op" id="5314328">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5314331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314334">return</span>&nbsp;<span class="ident" id="5314341">tag</span><span class="op" id="5314344">,</span>&nbsp;<span class="ident" id="5314346">tagOptions</span><span class="op" id="5314356">(</span><span class="string" id="5314357">&#34;&#34;</span><span class="op" id="5314359">)</span><br>
<span class="lineno"></span><span class="op" id="5314361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5314364">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="5314426">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5314495">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="5314525">func</span>&nbsp;<span class="op" id="5314530">(</span><span class="ident" id="5314531">o</span>&nbsp;<span class="ident" id="5314533">tagOptions</span><span class="op" id="5314543">)</span>&nbsp;<span class="ident" id="5314545">Contains</span><span class="op" id="5314553">(</span><span class="ident" id="5314554">optionName</span>&nbsp;<span class="builtintype" id="5314565">string</span><span class="op" id="5314571">)</span>&nbsp;<span class="builtintype" id="5314573">bool</span>&nbsp;<span class="op" id="5314578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314581">if</span>&nbsp;<span class="builtinfunc" id="5314584">len</span><span class="op" id="5314587">(</span><span class="ident" id="5314588">o</span><span class="op" id="5314589">)</span>&nbsp;<span class="op" id="5314591">==</span>&nbsp;<span class="num" id="5314594">0</span>&nbsp;<span class="op" id="5314596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314600">return</span>&nbsp;<span class="builtintype" id="5314607">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5314614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5314617">s</span>&nbsp;<span class="op" id="5314619">:=</span>&nbsp;<span class="builtintype" id="5314622">string</span><span class="op" id="5314628">(</span><span class="ident" id="5314629">o</span><span class="op" id="5314630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314633">for</span>&nbsp;<span class="ident" id="5314637">s</span>&nbsp;<span class="op" id="5314639">!=</span>&nbsp;<span class="string" id="5314642">&#34;&#34;</span>&nbsp;<span class="op" id="5314645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314649">var</span>&nbsp;<span class="ident" id="5314653">next</span>&nbsp;<span class="builtintype" id="5314658">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5314667">i</span>&nbsp;<span class="op" id="5314669">:=</span>&nbsp;<span class="ident" id="5314672">strings</span><span class="op" id="5314679">.</span><span class="ident" id="5314680">Index</span><span class="op" id="5314685">(</span><span class="ident" id="5314686">s</span><span class="op" id="5314687">,</span>&nbsp;<span class="string" id="5314689">&#34;,&#34;</span><span class="op" id="5314692">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314696">if</span>&nbsp;<span class="ident" id="5314699">i</span>&nbsp;<span class="op" id="5314701">&gt;=</span>&nbsp;<span class="num" id="5314704">0</span>&nbsp;<span class="op" id="5314706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5314711">s</span><span class="op" id="5314712">,</span>&nbsp;<span class="ident" id="5314714">next</span>&nbsp;<span class="op" id="5314719">=</span>&nbsp;<span class="ident" id="5314721">s</span><span class="op" id="5314722">[</span><span class="op" id="5314723">:</span><span class="ident" id="5314724">i</span><span class="op" id="5314725">]</span><span class="op" id="5314726">,</span>&nbsp;<span class="ident" id="5314728">s</span><span class="op" id="5314729">[</span><span class="ident" id="5314730">i</span><span class="op" id="5314731">+</span><span class="num" id="5314732">1</span><span class="op" id="5314733">:</span><span class="op" id="5314734">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5314738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314742">if</span>&nbsp;<span class="ident" id="5314745">s</span>&nbsp;<span class="op" id="5314747">==</span>&nbsp;<span class="ident" id="5314750">optionName</span>&nbsp;<span class="op" id="5314761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314766">return</span>&nbsp;<span class="builtintype" id="5314773">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5314780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5314784">s</span>&nbsp;<span class="op" id="5314786">=</span>&nbsp;<span class="ident" id="5314788">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5314794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5314797">return</span>&nbsp;<span class="builtintype" id="5314804">false</span><br>
<span class="lineno"></span><span class="op" id="5314810">}</span>
</div>
</body>
</html>
