<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6900510">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6900565">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6900619">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6900670">package</span>&nbsp;<span class="ident" id="6900678">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900684">import</span>&nbsp;<span class="op" id="6900691">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6900694">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6900704">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6900711">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6900719">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6900729">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900732">const</span>&nbsp;<span class="op" id="6900738">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900741">numTestSamples</span>&nbsp;<span class="op" id="6900756">=</span>&nbsp;<span class="num" id="6900758">10000</span><br>
<span class="lineno"></span><span class="op" id="6900764">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900767">type</span>&nbsp;<span class="ident" id="6900772">statsResults</span>&nbsp;<span class="keyword" id="6900785">struct</span>&nbsp;<span class="op" id="6900792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900795">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6900807">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900816">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6900828">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900837">closeEnough</span>&nbsp;<span class="builtintype" id="6900849">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900858">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6900870">float64</span><br>
<span class="lineno"></span><span class="op" id="6900878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6900881">func</span>&nbsp;<span class="ident" id="6900886">max</span><span class="op" id="6900889">(</span><span class="ident" id="6900890">a</span><span class="op" id="6900891">,</span>&nbsp;<span class="ident" id="6900893">b</span>&nbsp;<span class="builtintype" id="6900895">float64</span><span class="op" id="6900902">)</span>&nbsp;<span class="builtintype" id="6900904">float64</span>&nbsp;<span class="op" id="6900912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900915">if</span>&nbsp;<span class="ident" id="6900918">a</span>&nbsp;<span class="op" id="6900920">&gt;</span>&nbsp;<span class="ident" id="6900922">b</span>&nbsp;<span class="op" id="6900924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900928">return</span>&nbsp;<span class="ident" id="6900935">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900941">return</span>&nbsp;<span class="ident" id="6900948">b</span><br>
<span class="lineno">30</span><span class="op" id="6900950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900953">func</span>&nbsp;<span class="ident" id="6900958">nearEqual</span><span class="op" id="6900967">(</span><span class="ident" id="6900968">a</span><span class="op" id="6900969">,</span>&nbsp;<span class="ident" id="6900971">b</span><span class="op" id="6900972">,</span>&nbsp;<span class="ident" id="6900974">closeEnough</span><span class="op" id="6900985">,</span>&nbsp;<span class="ident" id="6900987">maxError</span>&nbsp;<span class="builtintype" id="6900996">float64</span><span class="op" id="6901003">)</span>&nbsp;<span class="builtintype" id="6901005">bool</span>&nbsp;<span class="op" id="6901010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901013">absDiff</span>&nbsp;<span class="op" id="6901021">:=</span>&nbsp;<span class="ident" id="6901024">math</span><span class="op" id="6901028">.</span><span class="ident" id="6901029">Abs</span><span class="op" id="6901032">(</span><span class="ident" id="6901033">a</span>&nbsp;<span class="op" id="6901035">-</span>&nbsp;<span class="ident" id="6901037">b</span><span class="op" id="6901038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901041">if</span>&nbsp;<span class="ident" id="6901044">absDiff</span>&nbsp;<span class="op" id="6901052">&lt;</span>&nbsp;<span class="ident" id="6901054">closeEnough</span>&nbsp;<span class="op" id="6901066">{</span>&nbsp;<span class="comment" id="6901068">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901138">return</span>&nbsp;<span class="builtintype" id="6901145">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901154">return</span>&nbsp;<span class="ident" id="6901161">absDiff</span><span class="op" id="6901168">/</span><span class="ident" id="6901169">max</span><span class="op" id="6901172">(</span><span class="ident" id="6901173">math</span><span class="op" id="6901177">.</span><span class="ident" id="6901178">Abs</span><span class="op" id="6901181">(</span><span class="ident" id="6901182">a</span><span class="op" id="6901183">)</span><span class="op" id="6901184">,</span>&nbsp;<span class="ident" id="6901186">math</span><span class="op" id="6901190">.</span><span class="ident" id="6901191">Abs</span><span class="op" id="6901194">(</span><span class="ident" id="6901195">b</span><span class="op" id="6901196">)</span><span class="op" id="6901197">)</span>&nbsp;<span class="op" id="6901199">&lt;</span>&nbsp;<span class="ident" id="6901201">maxError</span><br>
<span class="lineno"></span><span class="op" id="6901210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6901213">var</span>&nbsp;<span class="ident" id="6901217">testSeeds</span>&nbsp;<span class="op" id="6901227">=</span>&nbsp;<span class="op" id="6901229">[</span><span class="op" id="6901230">]</span><span class="ident" id="6901231">int64</span><span class="op" id="6901236">{</span><span class="num" id="6901237">1</span><span class="op" id="6901238">,</span>&nbsp;<span class="num" id="6901240">1754801282</span><span class="op" id="6901250">,</span>&nbsp;<span class="num" id="6901252">1698661970</span><span class="op" id="6901262">,</span>&nbsp;<span class="num" id="6901264">1550503961</span><span class="op" id="6901274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6901277">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6901351">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="6901384">func</span>&nbsp;<span class="op" id="6901389">(</span><span class="ident" id="6901390">this</span>&nbsp;<span class="op" id="6901395">*</span><span class="ident" id="6901396">statsResults</span><span class="op" id="6901408">)</span>&nbsp;<span class="ident" id="6901410">checkSimilarDistribution</span><span class="op" id="6901434">(</span><span class="ident" id="6901435">expected</span>&nbsp;<span class="op" id="6901444">*</span><span class="ident" id="6901445">statsResults</span><span class="op" id="6901457">)</span>&nbsp;<span class="builtintype" id="6901459">error</span>&nbsp;<span class="op" id="6901465">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901468">if</span>&nbsp;<span class="op" id="6901471">!</span><span class="ident" id="6901472">nearEqual</span><span class="op" id="6901481">(</span><span class="ident" id="6901482">this</span><span class="op" id="6901486">.</span><span class="ident" id="6901487">mean</span><span class="op" id="6901491">,</span>&nbsp;<span class="ident" id="6901493">expected</span><span class="op" id="6901501">.</span><span class="ident" id="6901502">mean</span><span class="op" id="6901506">,</span>&nbsp;<span class="ident" id="6901508">expected</span><span class="op" id="6901516">.</span><span class="ident" id="6901517">closeEnough</span><span class="op" id="6901528">,</span>&nbsp;<span class="ident" id="6901530">expected</span><span class="op" id="6901538">.</span><span class="ident" id="6901539">maxError</span><span class="op" id="6901547">)</span>&nbsp;<span class="op" id="6901549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901553">s</span>&nbsp;<span class="op" id="6901555">:=</span>&nbsp;<span class="ident" id="6901558">fmt</span><span class="op" id="6901561">.</span><span class="ident" id="6901562">Sprintf</span><span class="op" id="6901569">(</span><span class="string" id="6901570">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6901608">,</span>&nbsp;<span class="ident" id="6901610">this</span><span class="op" id="6901614">.</span><span class="ident" id="6901615">mean</span><span class="op" id="6901619">,</span>&nbsp;<span class="ident" id="6901621">expected</span><span class="op" id="6901629">.</span><span class="ident" id="6901630">mean</span><span class="op" id="6901634">,</span>&nbsp;<span class="ident" id="6901636">expected</span><span class="op" id="6901644">.</span><span class="ident" id="6901645">closeEnough</span><span class="op" id="6901656">,</span>&nbsp;<span class="ident" id="6901658">expected</span><span class="op" id="6901666">.</span><span class="ident" id="6901667">maxError</span><span class="op" id="6901675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901679">fmt</span><span class="op" id="6901682">.</span><span class="ident" id="6901683">Println</span><span class="op" id="6901690">(</span><span class="ident" id="6901691">s</span><span class="op" id="6901692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901696">return</span>&nbsp;<span class="ident" id="6901703">errors</span><span class="op" id="6901709">.</span><span class="ident" id="6901710">New</span><span class="op" id="6901713">(</span><span class="ident" id="6901714">s</span><span class="op" id="6901715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901718">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901721">if</span>&nbsp;<span class="op" id="6901724">!</span><span class="ident" id="6901725">nearEqual</span><span class="op" id="6901734">(</span><span class="ident" id="6901735">this</span><span class="op" id="6901739">.</span><span class="ident" id="6901740">stddev</span><span class="op" id="6901746">,</span>&nbsp;<span class="ident" id="6901748">expected</span><span class="op" id="6901756">.</span><span class="ident" id="6901757">stddev</span><span class="op" id="6901763">,</span>&nbsp;<span class="num" id="6901765">0</span><span class="op" id="6901766">,</span>&nbsp;<span class="ident" id="6901768">expected</span><span class="op" id="6901776">.</span><span class="ident" id="6901777">maxError</span><span class="op" id="6901785">)</span>&nbsp;<span class="op" id="6901787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901791">s</span>&nbsp;<span class="op" id="6901793">:=</span>&nbsp;<span class="ident" id="6901796">fmt</span><span class="op" id="6901799">.</span><span class="ident" id="6901800">Sprintf</span><span class="op" id="6901807">(</span><span class="string" id="6901808">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6901848">,</span>&nbsp;<span class="ident" id="6901850">this</span><span class="op" id="6901854">.</span><span class="ident" id="6901855">stddev</span><span class="op" id="6901861">,</span>&nbsp;<span class="ident" id="6901863">expected</span><span class="op" id="6901871">.</span><span class="ident" id="6901872">stddev</span><span class="op" id="6901878">,</span>&nbsp;<span class="ident" id="6901880">expected</span><span class="op" id="6901888">.</span><span class="ident" id="6901889">closeEnough</span><span class="op" id="6901900">,</span>&nbsp;<span class="ident" id="6901902">expected</span><span class="op" id="6901910">.</span><span class="ident" id="6901911">maxError</span><span class="op" id="6901919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901923">fmt</span><span class="op" id="6901926">.</span><span class="ident" id="6901927">Println</span><span class="op" id="6901934">(</span><span class="ident" id="6901935">s</span><span class="op" id="6901936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901940">return</span>&nbsp;<span class="ident" id="6901947">errors</span><span class="op" id="6901953">.</span><span class="ident" id="6901954">New</span><span class="op" id="6901957">(</span><span class="ident" id="6901958">s</span><span class="op" id="6901959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901962">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901965">return</span>&nbsp;<span class="ident" id="6901972">nil</span><br>
<span class="lineno"></span><span class="op" id="6901976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6901979">func</span>&nbsp;<span class="ident" id="6901984">getStatsResults</span><span class="op" id="6901999">(</span><span class="ident" id="6902000">samples</span>&nbsp;<span class="op" id="6902008">[</span><span class="op" id="6902009">]</span><span class="builtintype" id="6902010">float64</span><span class="op" id="6902017">)</span>&nbsp;<span class="op" id="6902019">*</span><span class="ident" id="6902020">statsResults</span>&nbsp;<span class="op" id="6902033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902036">res</span>&nbsp;<span class="op" id="6902040">:=</span>&nbsp;<span class="builtinfunc" id="6902043">new</span><span class="op" id="6902046">(</span><span class="ident" id="6902047">statsResults</span><span class="op" id="6902059">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902062">var</span>&nbsp;<span class="ident" id="6902066">sum</span><span class="op" id="6902069">,</span>&nbsp;<span class="ident" id="6902071">squaresum</span>&nbsp;<span class="builtintype" id="6902081">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902090">for</span>&nbsp;<span class="ident" id="6902094">_</span><span class="op" id="6902095">,</span>&nbsp;<span class="ident" id="6902097">s</span>&nbsp;<span class="op" id="6902099">:=</span>&nbsp;<span class="keyword" id="6902102">range</span>&nbsp;<span class="ident" id="6902108">samples</span>&nbsp;<span class="op" id="6902116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902120">sum</span>&nbsp;<span class="op" id="6902124">+=</span>&nbsp;<span class="ident" id="6902127">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902131">squaresum</span>&nbsp;<span class="op" id="6902141">+=</span>&nbsp;<span class="ident" id="6902144">s</span>&nbsp;<span class="op" id="6902146">*</span>&nbsp;<span class="ident" id="6902148">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902151">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902154">res</span><span class="op" id="6902157">.</span><span class="ident" id="6902158">mean</span>&nbsp;<span class="op" id="6902163">=</span>&nbsp;<span class="ident" id="6902165">sum</span>&nbsp;<span class="op" id="6902169">/</span>&nbsp;<span class="builtintype" id="6902171">float64</span><span class="op" id="6902178">(</span><span class="builtinfunc" id="6902179">len</span><span class="op" id="6902182">(</span><span class="ident" id="6902183">samples</span><span class="op" id="6902190">)</span><span class="op" id="6902191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902194">res</span><span class="op" id="6902197">.</span><span class="ident" id="6902198">stddev</span>&nbsp;<span class="op" id="6902205">=</span>&nbsp;<span class="ident" id="6902207">math</span><span class="op" id="6902211">.</span><span class="ident" id="6902212">Sqrt</span><span class="op" id="6902216">(</span><span class="ident" id="6902217">squaresum</span><span class="op" id="6902226">/</span><span class="builtintype" id="6902227">float64</span><span class="op" id="6902234">(</span><span class="builtinfunc" id="6902235">len</span><span class="op" id="6902238">(</span><span class="ident" id="6902239">samples</span><span class="op" id="6902246">)</span><span class="op" id="6902247">)</span>&nbsp;<span class="op" id="6902249">-</span>&nbsp;<span class="ident" id="6902251">res</span><span class="op" id="6902254">.</span><span class="ident" id="6902255">mean</span><span class="op" id="6902259">*</span><span class="ident" id="6902260">res</span><span class="op" id="6902263">.</span><span class="ident" id="6902264">mean</span><span class="op" id="6902268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902271">return</span>&nbsp;<span class="ident" id="6902278">res</span><br>
<span class="lineno"></span><span class="op" id="6902282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="6902285">func</span>&nbsp;<span class="ident" id="6902290">checkSampleDistribution</span><span class="op" id="6902313">(</span><span class="ident" id="6902314">t</span>&nbsp;<span class="op" id="6902316">*</span><span class="ident" id="6902317">testing</span><span class="op" id="6902324">.</span><span class="ident" id="6902325">T</span><span class="op" id="6902326">,</span>&nbsp;<span class="ident" id="6902328">samples</span>&nbsp;<span class="op" id="6902336">[</span><span class="op" id="6902337">]</span><span class="builtintype" id="6902338">float64</span><span class="op" id="6902345">,</span>&nbsp;<span class="ident" id="6902347">expected</span>&nbsp;<span class="op" id="6902356">*</span><span class="ident" id="6902357">statsResults</span><span class="op" id="6902369">)</span>&nbsp;<span class="op" id="6902371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902374">actual</span>&nbsp;<span class="op" id="6902381">:=</span>&nbsp;<span class="ident" id="6902384">getStatsResults</span><span class="op" id="6902399">(</span><span class="ident" id="6902400">samples</span><span class="op" id="6902407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902410">err</span>&nbsp;<span class="op" id="6902414">:=</span>&nbsp;<span class="ident" id="6902417">actual</span><span class="op" id="6902423">.</span><span class="ident" id="6902424">checkSimilarDistribution</span><span class="op" id="6902448">(</span><span class="ident" id="6902449">expected</span><span class="op" id="6902457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902460">if</span>&nbsp;<span class="ident" id="6902463">err</span>&nbsp;<span class="op" id="6902467">!=</span>&nbsp;<span class="ident" id="6902470">nil</span>&nbsp;<span class="op" id="6902474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902478">t</span><span class="op" id="6902479">.</span><span class="ident" id="6902480">Errorf</span><span class="op" id="6902486">(</span><span class="ident" id="6902487">err</span><span class="op" id="6902490">.</span><span class="ident" id="6902491">Error</span><span class="op" id="6902496">(</span><span class="op" id="6902497">)</span><span class="op" id="6902498">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902501">}</span><br>
<span class="lineno"></span><span class="op" id="6902503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6902506">func</span>&nbsp;<span class="ident" id="6902511">checkSampleSliceDistributions</span><span class="op" id="6902540">(</span><span class="ident" id="6902541">t</span>&nbsp;<span class="op" id="6902543">*</span><span class="ident" id="6902544">testing</span><span class="op" id="6902551">.</span><span class="ident" id="6902552">T</span><span class="op" id="6902553">,</span>&nbsp;<span class="ident" id="6902555">samples</span>&nbsp;<span class="op" id="6902563">[</span><span class="op" id="6902564">]</span><span class="builtintype" id="6902565">float64</span><span class="op" id="6902572">,</span>&nbsp;<span class="ident" id="6902574">nslices</span>&nbsp;<span class="builtintype" id="6902582">int</span><span class="op" id="6902585">,</span>&nbsp;<span class="ident" id="6902587">expected</span>&nbsp;<span class="op" id="6902596">*</span><span class="ident" id="6902597">statsResults</span><span class="op" id="6902609">)</span>&nbsp;<span class="op" id="6902611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902614">chunk</span>&nbsp;<span class="op" id="6902620">:=</span>&nbsp;<span class="builtinfunc" id="6902623">len</span><span class="op" id="6902626">(</span><span class="ident" id="6902627">samples</span><span class="op" id="6902634">)</span>&nbsp;<span class="op" id="6902636">/</span>&nbsp;<span class="ident" id="6902638">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902647">for</span>&nbsp;<span class="ident" id="6902651">i</span>&nbsp;<span class="op" id="6902653">:=</span>&nbsp;<span class="num" id="6902656">0</span><span class="op" id="6902657">;</span>&nbsp;<span class="ident" id="6902659">i</span>&nbsp;<span class="op" id="6902661">&lt;</span>&nbsp;<span class="ident" id="6902663">nslices</span><span class="op" id="6902670">;</span>&nbsp;<span class="ident" id="6902672">i</span><span class="op" id="6902673">++</span>&nbsp;<span class="op" id="6902676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902680">low</span>&nbsp;<span class="op" id="6902684">:=</span>&nbsp;<span class="ident" id="6902687">i</span>&nbsp;<span class="op" id="6902689">*</span>&nbsp;<span class="ident" id="6902691">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902699">var</span>&nbsp;<span class="ident" id="6902703">high</span>&nbsp;<span class="builtintype" id="6902708">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902714">if</span>&nbsp;<span class="ident" id="6902717">i</span>&nbsp;<span class="op" id="6902719">==</span>&nbsp;<span class="ident" id="6902722">nslices</span><span class="op" id="6902729">-</span><span class="num" id="6902730">1</span>&nbsp;<span class="op" id="6902732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902737">high</span>&nbsp;<span class="op" id="6902742">=</span>&nbsp;<span class="builtinfunc" id="6902744">len</span><span class="op" id="6902747">(</span><span class="ident" id="6902748">samples</span><span class="op" id="6902755">)</span>&nbsp;<span class="op" id="6902757">-</span>&nbsp;<span class="num" id="6902759">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902763">}</span>&nbsp;<span class="keyword" id="6902765">else</span>&nbsp;<span class="op" id="6902770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902775">high</span>&nbsp;<span class="op" id="6902780">=</span>&nbsp;<span class="op" id="6902782">(</span><span class="ident" id="6902783">i</span>&nbsp;<span class="op" id="6902785">+</span>&nbsp;<span class="num" id="6902787">1</span><span class="op" id="6902788">)</span>&nbsp;<span class="op" id="6902790">*</span>&nbsp;<span class="ident" id="6902792">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902804">checkSampleDistribution</span><span class="op" id="6902827">(</span><span class="ident" id="6902828">t</span><span class="op" id="6902829">,</span>&nbsp;<span class="ident" id="6902831">samples</span><span class="op" id="6902838">[</span><span class="ident" id="6902839">low</span><span class="op" id="6902842">:</span><span class="ident" id="6902843">high</span><span class="op" id="6902847">]</span><span class="op" id="6902848">,</span>&nbsp;<span class="ident" id="6902850">expected</span><span class="op" id="6902858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902861">}</span><br>
<span class="lineno">90</span><span class="op" id="6902863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6902866">//</span><br>
<span class="lineno"></span><span class="comment" id="6902869">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6902898">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="6902902">func</span>&nbsp;<span class="ident" id="6902907">generateNormalSamples</span><span class="op" id="6902928">(</span><span class="ident" id="6902929">nsamples</span>&nbsp;<span class="builtintype" id="6902938">int</span><span class="op" id="6902941">,</span>&nbsp;<span class="ident" id="6902943">mean</span><span class="op" id="6902947">,</span>&nbsp;<span class="ident" id="6902949">stddev</span>&nbsp;<span class="builtintype" id="6902956">float64</span><span class="op" id="6902963">,</span>&nbsp;<span class="ident" id="6902965">seed</span>&nbsp;<span class="ident" id="6902970">int64</span><span class="op" id="6902975">)</span>&nbsp;<span class="op" id="6902977">[</span><span class="op" id="6902978">]</span><span class="builtintype" id="6902979">float64</span>&nbsp;<span class="op" id="6902987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902990">r</span>&nbsp;<span class="op" id="6902992">:=</span>&nbsp;<span class="ident" id="6902995">New</span><span class="op" id="6902998">(</span><span class="ident" id="6902999">NewSource</span><span class="op" id="6903008">(</span><span class="ident" id="6903009">seed</span><span class="op" id="6903013">)</span><span class="op" id="6903014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903017">samples</span>&nbsp;<span class="op" id="6903025">:=</span>&nbsp;<span class="builtinfunc" id="6903028">make</span><span class="op" id="6903032">(</span><span class="op" id="6903033">[</span><span class="op" id="6903034">]</span><span class="builtintype" id="6903035">float64</span><span class="op" id="6903042">,</span>&nbsp;<span class="ident" id="6903044">nsamples</span><span class="op" id="6903052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903055">for</span>&nbsp;<span class="ident" id="6903059">i</span>&nbsp;<span class="op" id="6903061">:=</span>&nbsp;<span class="keyword" id="6903064">range</span>&nbsp;<span class="ident" id="6903070">samples</span>&nbsp;<span class="op" id="6903078">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903082">samples</span><span class="op" id="6903089">[</span><span class="ident" id="6903090">i</span><span class="op" id="6903091">]</span>&nbsp;<span class="op" id="6903093">=</span>&nbsp;<span class="ident" id="6903095">r</span><span class="op" id="6903096">.</span><span class="ident" id="6903097">NormFloat64</span><span class="op" id="6903108">(</span><span class="op" id="6903109">)</span><span class="op" id="6903110">*</span><span class="ident" id="6903111">stddev</span>&nbsp;<span class="op" id="6903118">+</span>&nbsp;<span class="ident" id="6903120">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903129">return</span>&nbsp;<span class="ident" id="6903136">samples</span><br>
<span class="lineno"></span><span class="op" id="6903144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6903147">func</span>&nbsp;<span class="ident" id="6903152">testNormalDistribution</span><span class="op" id="6903174">(</span><span class="ident" id="6903175">t</span>&nbsp;<span class="op" id="6903177">*</span><span class="ident" id="6903178">testing</span><span class="op" id="6903185">.</span><span class="ident" id="6903186">T</span><span class="op" id="6903187">,</span>&nbsp;<span class="ident" id="6903189">nsamples</span>&nbsp;<span class="builtintype" id="6903198">int</span><span class="op" id="6903201">,</span>&nbsp;<span class="ident" id="6903203">mean</span><span class="op" id="6903207">,</span>&nbsp;<span class="ident" id="6903209">stddev</span>&nbsp;<span class="builtintype" id="6903216">float64</span><span class="op" id="6903223">,</span>&nbsp;<span class="ident" id="6903225">seed</span>&nbsp;<span class="ident" id="6903230">int64</span><span class="op" id="6903235">)</span>&nbsp;<span class="op" id="6903237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6903240">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903337">samples</span>&nbsp;<span class="op" id="6903345">:=</span>&nbsp;<span class="ident" id="6903348">generateNormalSamples</span><span class="op" id="6903369">(</span><span class="ident" id="6903370">nsamples</span><span class="op" id="6903378">,</span>&nbsp;<span class="ident" id="6903380">mean</span><span class="op" id="6903384">,</span>&nbsp;<span class="ident" id="6903386">stddev</span><span class="op" id="6903392">,</span>&nbsp;<span class="ident" id="6903394">seed</span><span class="op" id="6903398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903401">errorScale</span>&nbsp;<span class="op" id="6903412">:=</span>&nbsp;<span class="ident" id="6903415">max</span><span class="op" id="6903418">(</span><span class="num" id="6903419">1.0</span><span class="op" id="6903422">,</span>&nbsp;<span class="ident" id="6903424">stddev</span><span class="op" id="6903430">)</span>&nbsp;<span class="comment" id="6903432">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903461">expected</span>&nbsp;<span class="op" id="6903470">:=</span>&nbsp;<span class="op" id="6903473">&amp;</span><span class="ident" id="6903474">statsResults</span><span class="op" id="6903486">{</span><span class="ident" id="6903487">mean</span><span class="op" id="6903491">,</span>&nbsp;<span class="ident" id="6903493">stddev</span><span class="op" id="6903499">,</span>&nbsp;<span class="num" id="6903501">0.10</span>&nbsp;<span class="op" id="6903506">*</span>&nbsp;<span class="ident" id="6903508">errorScale</span><span class="op" id="6903518">,</span>&nbsp;<span class="num" id="6903520">0.08</span>&nbsp;<span class="op" id="6903525">*</span>&nbsp;<span class="ident" id="6903527">errorScale</span><span class="op" id="6903537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6903541">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903610">checkSampleDistribution</span><span class="op" id="6903633">(</span><span class="ident" id="6903634">t</span><span class="op" id="6903635">,</span>&nbsp;<span class="ident" id="6903637">samples</span><span class="op" id="6903644">,</span>&nbsp;<span class="ident" id="6903646">expected</span><span class="op" id="6903654">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6903658">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903733">checkSampleSliceDistributions</span><span class="op" id="6903762">(</span><span class="ident" id="6903763">t</span><span class="op" id="6903764">,</span>&nbsp;<span class="ident" id="6903766">samples</span><span class="op" id="6903773">,</span>&nbsp;<span class="num" id="6903775">2</span><span class="op" id="6903776">,</span>&nbsp;<span class="ident" id="6903778">expected</span><span class="op" id="6903786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6903790">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903864">checkSampleSliceDistributions</span><span class="op" id="6903893">(</span><span class="ident" id="6903894">t</span><span class="op" id="6903895">,</span>&nbsp;<span class="ident" id="6903897">samples</span><span class="op" id="6903904">,</span>&nbsp;<span class="num" id="6903906">7</span><span class="op" id="6903907">,</span>&nbsp;<span class="ident" id="6903909">expected</span><span class="op" id="6903917">)</span><br>
<span class="lineno">120</span><span class="op" id="6903919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6903922">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6903939">func</span>&nbsp;<span class="ident" id="6903944">TestStandardNormalValues</span><span class="op" id="6903968">(</span><span class="ident" id="6903969">t</span>&nbsp;<span class="op" id="6903971">*</span><span class="ident" id="6903972">testing</span><span class="op" id="6903979">.</span><span class="ident" id="6903980">T</span><span class="op" id="6903981">)</span>&nbsp;<span class="op" id="6903983">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903986">for</span>&nbsp;<span class="ident" id="6903990">_</span><span class="op" id="6903991">,</span>&nbsp;<span class="ident" id="6903993">seed</span>&nbsp;<span class="op" id="6903998">:=</span>&nbsp;<span class="keyword" id="6904001">range</span>&nbsp;<span class="ident" id="6904007">testSeeds</span>&nbsp;<span class="op" id="6904017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904021">testNormalDistribution</span><span class="op" id="6904043">(</span><span class="ident" id="6904044">t</span><span class="op" id="6904045">,</span>&nbsp;<span class="ident" id="6904047">numTestSamples</span><span class="op" id="6904061">,</span>&nbsp;<span class="num" id="6904063">0</span><span class="op" id="6904064">,</span>&nbsp;<span class="num" id="6904066">1</span><span class="op" id="6904067">,</span>&nbsp;<span class="ident" id="6904069">seed</span><span class="op" id="6904073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904076">}</span><br>
<span class="lineno"></span><span class="op" id="6904078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="6904081">func</span>&nbsp;<span class="ident" id="6904086">TestNonStandardNormalValues</span><span class="op" id="6904113">(</span><span class="ident" id="6904114">t</span>&nbsp;<span class="op" id="6904116">*</span><span class="ident" id="6904117">testing</span><span class="op" id="6904124">.</span><span class="ident" id="6904125">T</span><span class="op" id="6904126">)</span>&nbsp;<span class="op" id="6904128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904131">sdmax</span>&nbsp;<span class="op" id="6904137">:=</span>&nbsp;<span class="num" id="6904140">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904148">mmax</span>&nbsp;<span class="op" id="6904153">:=</span>&nbsp;<span class="num" id="6904156">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904164">if</span>&nbsp;<span class="ident" id="6904167">testing</span><span class="op" id="6904174">.</span><span class="ident" id="6904175">Short</span><span class="op" id="6904180">(</span><span class="op" id="6904181">)</span>&nbsp;<span class="op" id="6904183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904187">sdmax</span>&nbsp;<span class="op" id="6904193">=</span>&nbsp;<span class="num" id="6904195">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904199">mmax</span>&nbsp;<span class="op" id="6904204">=</span>&nbsp;<span class="num" id="6904206">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904212">for</span>&nbsp;<span class="ident" id="6904216">sd</span>&nbsp;<span class="op" id="6904219">:=</span>&nbsp;<span class="num" id="6904222">0.5</span><span class="op" id="6904225">;</span>&nbsp;<span class="ident" id="6904227">sd</span>&nbsp;<span class="op" id="6904230">&lt;</span>&nbsp;<span class="ident" id="6904232">sdmax</span><span class="op" id="6904237">;</span>&nbsp;<span class="ident" id="6904239">sd</span>&nbsp;<span class="op" id="6904242">*=</span>&nbsp;<span class="num" id="6904245">2</span>&nbsp;<span class="op" id="6904247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904251">for</span>&nbsp;<span class="ident" id="6904255">m</span>&nbsp;<span class="op" id="6904257">:=</span>&nbsp;<span class="num" id="6904260">0.5</span><span class="op" id="6904263">;</span>&nbsp;<span class="ident" id="6904265">m</span>&nbsp;<span class="op" id="6904267">&lt;</span>&nbsp;<span class="ident" id="6904269">mmax</span><span class="op" id="6904273">;</span>&nbsp;<span class="ident" id="6904275">m</span>&nbsp;<span class="op" id="6904277">*=</span>&nbsp;<span class="num" id="6904280">2</span>&nbsp;<span class="op" id="6904282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904287">for</span>&nbsp;<span class="ident" id="6904291">_</span><span class="op" id="6904292">,</span>&nbsp;<span class="ident" id="6904294">seed</span>&nbsp;<span class="op" id="6904299">:=</span>&nbsp;<span class="keyword" id="6904302">range</span>&nbsp;<span class="ident" id="6904308">testSeeds</span>&nbsp;<span class="op" id="6904318">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904324">testNormalDistribution</span><span class="op" id="6904346">(</span><span class="ident" id="6904347">t</span><span class="op" id="6904348">,</span>&nbsp;<span class="ident" id="6904350">numTestSamples</span><span class="op" id="6904364">,</span>&nbsp;<span class="ident" id="6904366">m</span><span class="op" id="6904367">,</span>&nbsp;<span class="ident" id="6904369">sd</span><span class="op" id="6904371">,</span>&nbsp;<span class="ident" id="6904373">seed</span><span class="op" id="6904377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904383">if</span>&nbsp;<span class="ident" id="6904386">testing</span><span class="op" id="6904393">.</span><span class="ident" id="6904394">Short</span><span class="op" id="6904399">(</span><span class="op" id="6904400">)</span>&nbsp;<span class="op" id="6904402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904409">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904424">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904431">}</span><br>
<span class="lineno"></span><span class="op" id="6904433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6904436">//</span><br>
<span class="lineno">150</span><span class="comment" id="6904439">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6904473">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6904477">func</span>&nbsp;<span class="ident" id="6904482">generateExponentialSamples</span><span class="op" id="6904508">(</span><span class="ident" id="6904509">nsamples</span>&nbsp;<span class="builtintype" id="6904518">int</span><span class="op" id="6904521">,</span>&nbsp;<span class="ident" id="6904523">rate</span>&nbsp;<span class="builtintype" id="6904528">float64</span><span class="op" id="6904535">,</span>&nbsp;<span class="ident" id="6904537">seed</span>&nbsp;<span class="ident" id="6904542">int64</span><span class="op" id="6904547">)</span>&nbsp;<span class="op" id="6904549">[</span><span class="op" id="6904550">]</span><span class="builtintype" id="6904551">float64</span>&nbsp;<span class="op" id="6904559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904562">r</span>&nbsp;<span class="op" id="6904564">:=</span>&nbsp;<span class="ident" id="6904567">New</span><span class="op" id="6904570">(</span><span class="ident" id="6904571">NewSource</span><span class="op" id="6904580">(</span><span class="ident" id="6904581">seed</span><span class="op" id="6904585">)</span><span class="op" id="6904586">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904589">samples</span>&nbsp;<span class="op" id="6904597">:=</span>&nbsp;<span class="builtinfunc" id="6904600">make</span><span class="op" id="6904604">(</span><span class="op" id="6904605">[</span><span class="op" id="6904606">]</span><span class="builtintype" id="6904607">float64</span><span class="op" id="6904614">,</span>&nbsp;<span class="ident" id="6904616">nsamples</span><span class="op" id="6904624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904627">for</span>&nbsp;<span class="ident" id="6904631">i</span>&nbsp;<span class="op" id="6904633">:=</span>&nbsp;<span class="keyword" id="6904636">range</span>&nbsp;<span class="ident" id="6904642">samples</span>&nbsp;<span class="op" id="6904650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904654">samples</span><span class="op" id="6904661">[</span><span class="ident" id="6904662">i</span><span class="op" id="6904663">]</span>&nbsp;<span class="op" id="6904665">=</span>&nbsp;<span class="ident" id="6904667">r</span><span class="op" id="6904668">.</span><span class="ident" id="6904669">ExpFloat64</span><span class="op" id="6904679">(</span><span class="op" id="6904680">)</span>&nbsp;<span class="op" id="6904682">/</span>&nbsp;<span class="ident" id="6904684">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904693">return</span>&nbsp;<span class="ident" id="6904700">samples</span><br>
<span class="lineno">160</span><span class="op" id="6904708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6904711">func</span>&nbsp;<span class="ident" id="6904716">testExponentialDistribution</span><span class="op" id="6904743">(</span><span class="ident" id="6904744">t</span>&nbsp;<span class="op" id="6904746">*</span><span class="ident" id="6904747">testing</span><span class="op" id="6904754">.</span><span class="ident" id="6904755">T</span><span class="op" id="6904756">,</span>&nbsp;<span class="ident" id="6904758">nsamples</span>&nbsp;<span class="builtintype" id="6904767">int</span><span class="op" id="6904770">,</span>&nbsp;<span class="ident" id="6904772">rate</span>&nbsp;<span class="builtintype" id="6904777">float64</span><span class="op" id="6904784">,</span>&nbsp;<span class="ident" id="6904786">seed</span>&nbsp;<span class="ident" id="6904791">int64</span><span class="op" id="6904796">)</span>&nbsp;<span class="op" id="6904798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6904801">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904880">mean</span>&nbsp;<span class="op" id="6904885">:=</span>&nbsp;<span class="num" id="6904888">1</span>&nbsp;<span class="op" id="6904890">/</span>&nbsp;<span class="ident" id="6904892">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904898">stddev</span>&nbsp;<span class="op" id="6904905">:=</span>&nbsp;<span class="ident" id="6904908">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904915">samples</span>&nbsp;<span class="op" id="6904923">:=</span>&nbsp;<span class="ident" id="6904926">generateExponentialSamples</span><span class="op" id="6904952">(</span><span class="ident" id="6904953">nsamples</span><span class="op" id="6904961">,</span>&nbsp;<span class="ident" id="6904963">rate</span><span class="op" id="6904967">,</span>&nbsp;<span class="ident" id="6904969">seed</span><span class="op" id="6904973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904976">errorScale</span>&nbsp;<span class="op" id="6904987">:=</span>&nbsp;<span class="ident" id="6904990">max</span><span class="op" id="6904993">(</span><span class="num" id="6904994">1.0</span><span class="op" id="6904997">,</span>&nbsp;<span class="num" id="6904999">1</span><span class="op" id="6905000">/</span><span class="ident" id="6905001">rate</span><span class="op" id="6905005">)</span>&nbsp;<span class="comment" id="6905007">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905053">expected</span>&nbsp;<span class="op" id="6905062">:=</span>&nbsp;<span class="op" id="6905065">&amp;</span><span class="ident" id="6905066">statsResults</span><span class="op" id="6905078">{</span><span class="ident" id="6905079">mean</span><span class="op" id="6905083">,</span>&nbsp;<span class="ident" id="6905085">stddev</span><span class="op" id="6905091">,</span>&nbsp;<span class="num" id="6905093">0.10</span>&nbsp;<span class="op" id="6905098">*</span>&nbsp;<span class="ident" id="6905100">errorScale</span><span class="op" id="6905110">,</span>&nbsp;<span class="num" id="6905112">0.20</span>&nbsp;<span class="op" id="6905117">*</span>&nbsp;<span class="ident" id="6905119">errorScale</span><span class="op" id="6905129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6905133">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905202">checkSampleDistribution</span><span class="op" id="6905225">(</span><span class="ident" id="6905226">t</span><span class="op" id="6905227">,</span>&nbsp;<span class="ident" id="6905229">samples</span><span class="op" id="6905236">,</span>&nbsp;<span class="ident" id="6905238">expected</span><span class="op" id="6905246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6905250">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905325">checkSampleSliceDistributions</span><span class="op" id="6905354">(</span><span class="ident" id="6905355">t</span><span class="op" id="6905356">,</span>&nbsp;<span class="ident" id="6905358">samples</span><span class="op" id="6905365">,</span>&nbsp;<span class="num" id="6905367">2</span><span class="op" id="6905368">,</span>&nbsp;<span class="ident" id="6905370">expected</span><span class="op" id="6905378">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6905382">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905456">checkSampleSliceDistributions</span><span class="op" id="6905485">(</span><span class="ident" id="6905486">t</span><span class="op" id="6905487">,</span>&nbsp;<span class="ident" id="6905489">samples</span><span class="op" id="6905496">,</span>&nbsp;<span class="num" id="6905498">7</span><span class="op" id="6905499">,</span>&nbsp;<span class="ident" id="6905501">expected</span><span class="op" id="6905509">)</span><br>
<span class="lineno">180</span><span class="op" id="6905511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6905514">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6905531">func</span>&nbsp;<span class="ident" id="6905536">TestStandardExponentialValues</span><span class="op" id="6905565">(</span><span class="ident" id="6905566">t</span>&nbsp;<span class="op" id="6905568">*</span><span class="ident" id="6905569">testing</span><span class="op" id="6905576">.</span><span class="ident" id="6905577">T</span><span class="op" id="6905578">)</span>&nbsp;<span class="op" id="6905580">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6905583">for</span>&nbsp;<span class="ident" id="6905587">_</span><span class="op" id="6905588">,</span>&nbsp;<span class="ident" id="6905590">seed</span>&nbsp;<span class="op" id="6905595">:=</span>&nbsp;<span class="keyword" id="6905598">range</span>&nbsp;<span class="ident" id="6905604">testSeeds</span>&nbsp;<span class="op" id="6905614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905618">testExponentialDistribution</span><span class="op" id="6905645">(</span><span class="ident" id="6905646">t</span><span class="op" id="6905647">,</span>&nbsp;<span class="ident" id="6905649">numTestSamples</span><span class="op" id="6905663">,</span>&nbsp;<span class="num" id="6905665">1</span><span class="op" id="6905666">,</span>&nbsp;<span class="ident" id="6905668">seed</span><span class="op" id="6905672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905675">}</span><br>
<span class="lineno"></span><span class="op" id="6905677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="6905680">func</span>&nbsp;<span class="ident" id="6905685">TestNonStandardExponentialValues</span><span class="op" id="6905717">(</span><span class="ident" id="6905718">t</span>&nbsp;<span class="op" id="6905720">*</span><span class="ident" id="6905721">testing</span><span class="op" id="6905728">.</span><span class="ident" id="6905729">T</span><span class="op" id="6905730">)</span>&nbsp;<span class="op" id="6905732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6905735">for</span>&nbsp;<span class="ident" id="6905739">rate</span>&nbsp;<span class="op" id="6905744">:=</span>&nbsp;<span class="num" id="6905747">0.05</span><span class="op" id="6905751">;</span>&nbsp;<span class="ident" id="6905753">rate</span>&nbsp;<span class="op" id="6905758">&lt;</span>&nbsp;<span class="num" id="6905760">10</span><span class="op" id="6905762">;</span>&nbsp;<span class="ident" id="6905764">rate</span>&nbsp;<span class="op" id="6905769">*=</span>&nbsp;<span class="num" id="6905772">2</span>&nbsp;<span class="op" id="6905774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6905778">for</span>&nbsp;<span class="ident" id="6905782">_</span><span class="op" id="6905783">,</span>&nbsp;<span class="ident" id="6905785">seed</span>&nbsp;<span class="op" id="6905790">:=</span>&nbsp;<span class="keyword" id="6905793">range</span>&nbsp;<span class="ident" id="6905799">testSeeds</span>&nbsp;<span class="op" id="6905809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905814">testExponentialDistribution</span><span class="op" id="6905841">(</span><span class="ident" id="6905842">t</span><span class="op" id="6905843">,</span>&nbsp;<span class="ident" id="6905845">numTestSamples</span><span class="op" id="6905859">,</span>&nbsp;<span class="ident" id="6905861">rate</span><span class="op" id="6905865">,</span>&nbsp;<span class="ident" id="6905867">seed</span><span class="op" id="6905871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6905876">if</span>&nbsp;<span class="ident" id="6905879">testing</span><span class="op" id="6905886">.</span><span class="ident" id="6905887">Short</span><span class="op" id="6905892">(</span><span class="op" id="6905893">)</span>&nbsp;<span class="op" id="6905895">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6905901">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905917">}</span><br>
<span class="lineno"></span><span class="op" id="6905919">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="6905922">//</span><br>
<span class="lineno"></span><span class="comment" id="6905925">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6905951">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="6905955">func</span>&nbsp;<span class="ident" id="6905960">initNorm</span><span class="op" id="6905968">(</span><span class="op" id="6905969">)</span>&nbsp;<span class="op" id="6905971">(</span><span class="ident" id="6905972">testKn</span>&nbsp;<span class="op" id="6905979">[</span><span class="op" id="6905980">]</span><span class="builtintype" id="6905981">uint32</span><span class="op" id="6905987">,</span>&nbsp;<span class="ident" id="6905989">testWn</span><span class="op" id="6905995">,</span>&nbsp;<span class="ident" id="6905997">testFn</span>&nbsp;<span class="op" id="6906004">[</span><span class="op" id="6906005">]</span><span class="builtintype" id="6906006">float32</span><span class="op" id="6906013">)</span>&nbsp;<span class="op" id="6906015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906018">const</span>&nbsp;<span class="ident" id="6906024">m1</span>&nbsp;<span class="op" id="6906027">=</span>&nbsp;<span class="num" id="6906029">1</span>&nbsp;<span class="op" id="6906031">&lt;&lt;</span>&nbsp;<span class="num" id="6906034">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906038">var</span>&nbsp;<span class="op" id="6906042">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906046">dn</span>&nbsp;<span class="builtintype" id="6906049">float64</span>&nbsp;<span class="op" id="6906057">=</span>&nbsp;<span class="ident" id="6906059">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906064">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6906075">=</span>&nbsp;<span class="ident" id="6906077">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906082">vn</span>&nbsp;<span class="builtintype" id="6906085">float64</span>&nbsp;<span class="op" id="6906093">=</span>&nbsp;<span class="num" id="6906095">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906120">testKn</span>&nbsp;<span class="op" id="6906127">=</span>&nbsp;<span class="builtinfunc" id="6906129">make</span><span class="op" id="6906133">(</span><span class="op" id="6906134">[</span><span class="op" id="6906135">]</span><span class="builtintype" id="6906136">uint32</span><span class="op" id="6906142">,</span>&nbsp;<span class="num" id="6906144">128</span><span class="op" id="6906147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906150">testWn</span>&nbsp;<span class="op" id="6906157">=</span>&nbsp;<span class="builtinfunc" id="6906159">make</span><span class="op" id="6906163">(</span><span class="op" id="6906164">[</span><span class="op" id="6906165">]</span><span class="builtintype" id="6906166">float32</span><span class="op" id="6906173">,</span>&nbsp;<span class="num" id="6906175">128</span><span class="op" id="6906178">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906181">testFn</span>&nbsp;<span class="op" id="6906188">=</span>&nbsp;<span class="builtinfunc" id="6906190">make</span><span class="op" id="6906194">(</span><span class="op" id="6906195">[</span><span class="op" id="6906196">]</span><span class="builtintype" id="6906197">float32</span><span class="op" id="6906204">,</span>&nbsp;<span class="num" id="6906206">128</span><span class="op" id="6906209">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906213">q</span>&nbsp;<span class="op" id="6906215">:=</span>&nbsp;<span class="ident" id="6906218">vn</span>&nbsp;<span class="op" id="6906221">/</span>&nbsp;<span class="ident" id="6906223">math</span><span class="op" id="6906227">.</span><span class="ident" id="6906228">Exp</span><span class="op" id="6906231">(</span><span class="op" id="6906232">-</span><span class="num" id="6906233">0.5</span><span class="op" id="6906236">*</span><span class="ident" id="6906237">dn</span><span class="op" id="6906239">*</span><span class="ident" id="6906240">dn</span><span class="op" id="6906242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906245">testKn</span><span class="op" id="6906251">[</span><span class="num" id="6906252">0</span><span class="op" id="6906253">]</span>&nbsp;<span class="op" id="6906255">=</span>&nbsp;<span class="builtintype" id="6906257">uint32</span><span class="op" id="6906263">(</span><span class="op" id="6906264">(</span><span class="ident" id="6906265">dn</span>&nbsp;<span class="op" id="6906268">/</span>&nbsp;<span class="ident" id="6906270">q</span><span class="op" id="6906271">)</span>&nbsp;<span class="op" id="6906273">*</span>&nbsp;<span class="ident" id="6906275">m1</span><span class="op" id="6906277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906280">testKn</span><span class="op" id="6906286">[</span><span class="num" id="6906287">1</span><span class="op" id="6906288">]</span>&nbsp;<span class="op" id="6906290">=</span>&nbsp;<span class="num" id="6906292">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906295">testWn</span><span class="op" id="6906301">[</span><span class="num" id="6906302">0</span><span class="op" id="6906303">]</span>&nbsp;<span class="op" id="6906305">=</span>&nbsp;<span class="builtintype" id="6906307">float32</span><span class="op" id="6906314">(</span><span class="ident" id="6906315">q</span>&nbsp;<span class="op" id="6906317">/</span>&nbsp;<span class="ident" id="6906319">m1</span><span class="op" id="6906321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906324">testWn</span><span class="op" id="6906330">[</span><span class="num" id="6906331">127</span><span class="op" id="6906334">]</span>&nbsp;<span class="op" id="6906336">=</span>&nbsp;<span class="builtintype" id="6906338">float32</span><span class="op" id="6906345">(</span><span class="ident" id="6906346">dn</span>&nbsp;<span class="op" id="6906349">/</span>&nbsp;<span class="ident" id="6906351">m1</span><span class="op" id="6906353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906356">testFn</span><span class="op" id="6906362">[</span><span class="num" id="6906363">0</span><span class="op" id="6906364">]</span>&nbsp;<span class="op" id="6906366">=</span>&nbsp;<span class="num" id="6906368">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906373">testFn</span><span class="op" id="6906379">[</span><span class="num" id="6906380">127</span><span class="op" id="6906383">]</span>&nbsp;<span class="op" id="6906385">=</span>&nbsp;<span class="builtintype" id="6906387">float32</span><span class="op" id="6906394">(</span><span class="ident" id="6906395">math</span><span class="op" id="6906399">.</span><span class="ident" id="6906400">Exp</span><span class="op" id="6906403">(</span><span class="op" id="6906404">-</span><span class="num" id="6906405">0.5</span>&nbsp;<span class="op" id="6906409">*</span>&nbsp;<span class="ident" id="6906411">dn</span>&nbsp;<span class="op" id="6906414">*</span>&nbsp;<span class="ident" id="6906416">dn</span><span class="op" id="6906418">)</span><span class="op" id="6906419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906422">for</span>&nbsp;<span class="ident" id="6906426">i</span>&nbsp;<span class="op" id="6906428">:=</span>&nbsp;<span class="num" id="6906431">126</span><span class="op" id="6906434">;</span>&nbsp;<span class="ident" id="6906436">i</span>&nbsp;<span class="op" id="6906438">&gt;=</span>&nbsp;<span class="num" id="6906441">1</span><span class="op" id="6906442">;</span>&nbsp;<span class="ident" id="6906444">i</span><span class="op" id="6906445">--</span>&nbsp;<span class="op" id="6906448">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906452">dn</span>&nbsp;<span class="op" id="6906455">=</span>&nbsp;<span class="ident" id="6906457">math</span><span class="op" id="6906461">.</span><span class="ident" id="6906462">Sqrt</span><span class="op" id="6906466">(</span><span class="op" id="6906467">-</span><span class="num" id="6906468">2.0</span>&nbsp;<span class="op" id="6906472">*</span>&nbsp;<span class="ident" id="6906474">math</span><span class="op" id="6906478">.</span><span class="ident" id="6906479">Log</span><span class="op" id="6906482">(</span><span class="ident" id="6906483">vn</span><span class="op" id="6906485">/</span><span class="ident" id="6906486">dn</span><span class="op" id="6906488">+</span><span class="ident" id="6906489">math</span><span class="op" id="6906493">.</span><span class="ident" id="6906494">Exp</span><span class="op" id="6906497">(</span><span class="op" id="6906498">-</span><span class="num" id="6906499">0.5</span><span class="op" id="6906502">*</span><span class="ident" id="6906503">dn</span><span class="op" id="6906505">*</span><span class="ident" id="6906506">dn</span><span class="op" id="6906508">)</span><span class="op" id="6906509">)</span><span class="op" id="6906510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906514">testKn</span><span class="op" id="6906520">[</span><span class="ident" id="6906521">i</span><span class="op" id="6906522">+</span><span class="num" id="6906523">1</span><span class="op" id="6906524">]</span>&nbsp;<span class="op" id="6906526">=</span>&nbsp;<span class="builtintype" id="6906528">uint32</span><span class="op" id="6906534">(</span><span class="op" id="6906535">(</span><span class="ident" id="6906536">dn</span>&nbsp;<span class="op" id="6906539">/</span>&nbsp;<span class="ident" id="6906541">tn</span><span class="op" id="6906543">)</span>&nbsp;<span class="op" id="6906545">*</span>&nbsp;<span class="ident" id="6906547">m1</span><span class="op" id="6906549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906553">tn</span>&nbsp;<span class="op" id="6906556">=</span>&nbsp;<span class="ident" id="6906558">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906563">testFn</span><span class="op" id="6906569">[</span><span class="ident" id="6906570">i</span><span class="op" id="6906571">]</span>&nbsp;<span class="op" id="6906573">=</span>&nbsp;<span class="builtintype" id="6906575">float32</span><span class="op" id="6906582">(</span><span class="ident" id="6906583">math</span><span class="op" id="6906587">.</span><span class="ident" id="6906588">Exp</span><span class="op" id="6906591">(</span><span class="op" id="6906592">-</span><span class="num" id="6906593">0.5</span>&nbsp;<span class="op" id="6906597">*</span>&nbsp;<span class="ident" id="6906599">dn</span>&nbsp;<span class="op" id="6906602">*</span>&nbsp;<span class="ident" id="6906604">dn</span><span class="op" id="6906606">)</span><span class="op" id="6906607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906611">testWn</span><span class="op" id="6906617">[</span><span class="ident" id="6906618">i</span><span class="op" id="6906619">]</span>&nbsp;<span class="op" id="6906621">=</span>&nbsp;<span class="builtintype" id="6906623">float32</span><span class="op" id="6906630">(</span><span class="ident" id="6906631">dn</span>&nbsp;<span class="op" id="6906634">/</span>&nbsp;<span class="ident" id="6906636">m1</span><span class="op" id="6906638">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906644">return</span><br>
<span class="lineno"></span><span class="op" id="6906651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6906654">func</span>&nbsp;<span class="ident" id="6906659">initExp</span><span class="op" id="6906666">(</span><span class="op" id="6906667">)</span>&nbsp;<span class="op" id="6906669">(</span><span class="ident" id="6906670">testKe</span>&nbsp;<span class="op" id="6906677">[</span><span class="op" id="6906678">]</span><span class="builtintype" id="6906679">uint32</span><span class="op" id="6906685">,</span>&nbsp;<span class="ident" id="6906687">testWe</span><span class="op" id="6906693">,</span>&nbsp;<span class="ident" id="6906695">testFe</span>&nbsp;<span class="op" id="6906702">[</span><span class="op" id="6906703">]</span><span class="builtintype" id="6906704">float32</span><span class="op" id="6906711">)</span>&nbsp;<span class="op" id="6906713">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906716">const</span>&nbsp;<span class="ident" id="6906722">m2</span>&nbsp;<span class="op" id="6906725">=</span>&nbsp;<span class="num" id="6906727">1</span>&nbsp;<span class="op" id="6906729">&lt;&lt;</span>&nbsp;<span class="num" id="6906732">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6906736">var</span>&nbsp;<span class="op" id="6906740">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906744">de</span>&nbsp;<span class="builtintype" id="6906747">float64</span>&nbsp;<span class="op" id="6906755">=</span>&nbsp;<span class="ident" id="6906757">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906762">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6906773">=</span>&nbsp;<span class="ident" id="6906775">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906780">ve</span>&nbsp;<span class="builtintype" id="6906783">float64</span>&nbsp;<span class="op" id="6906791">=</span>&nbsp;<span class="num" id="6906793">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906823">testKe</span>&nbsp;<span class="op" id="6906830">=</span>&nbsp;<span class="builtinfunc" id="6906832">make</span><span class="op" id="6906836">(</span><span class="op" id="6906837">[</span><span class="op" id="6906838">]</span><span class="builtintype" id="6906839">uint32</span><span class="op" id="6906845">,</span>&nbsp;<span class="num" id="6906847">256</span><span class="op" id="6906850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906853">testWe</span>&nbsp;<span class="op" id="6906860">=</span>&nbsp;<span class="builtinfunc" id="6906862">make</span><span class="op" id="6906866">(</span><span class="op" id="6906867">[</span><span class="op" id="6906868">]</span><span class="builtintype" id="6906869">float32</span><span class="op" id="6906876">,</span>&nbsp;<span class="num" id="6906878">256</span><span class="op" id="6906881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906884">testFe</span>&nbsp;<span class="op" id="6906891">=</span>&nbsp;<span class="builtinfunc" id="6906893">make</span><span class="op" id="6906897">(</span><span class="op" id="6906898">[</span><span class="op" id="6906899">]</span><span class="builtintype" id="6906900">float32</span><span class="op" id="6906907">,</span>&nbsp;<span class="num" id="6906909">256</span><span class="op" id="6906912">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906916">q</span>&nbsp;<span class="op" id="6906918">:=</span>&nbsp;<span class="ident" id="6906921">ve</span>&nbsp;<span class="op" id="6906924">/</span>&nbsp;<span class="ident" id="6906926">math</span><span class="op" id="6906930">.</span><span class="ident" id="6906931">Exp</span><span class="op" id="6906934">(</span><span class="op" id="6906935">-</span><span class="ident" id="6906936">de</span><span class="op" id="6906938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906941">testKe</span><span class="op" id="6906947">[</span><span class="num" id="6906948">0</span><span class="op" id="6906949">]</span>&nbsp;<span class="op" id="6906951">=</span>&nbsp;<span class="builtintype" id="6906953">uint32</span><span class="op" id="6906959">(</span><span class="op" id="6906960">(</span><span class="ident" id="6906961">de</span>&nbsp;<span class="op" id="6906964">/</span>&nbsp;<span class="ident" id="6906966">q</span><span class="op" id="6906967">)</span>&nbsp;<span class="op" id="6906969">*</span>&nbsp;<span class="ident" id="6906971">m2</span><span class="op" id="6906973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906976">testKe</span><span class="op" id="6906982">[</span><span class="num" id="6906983">1</span><span class="op" id="6906984">]</span>&nbsp;<span class="op" id="6906986">=</span>&nbsp;<span class="num" id="6906988">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6906991">testWe</span><span class="op" id="6906997">[</span><span class="num" id="6906998">0</span><span class="op" id="6906999">]</span>&nbsp;<span class="op" id="6907001">=</span>&nbsp;<span class="builtintype" id="6907003">float32</span><span class="op" id="6907010">(</span><span class="ident" id="6907011">q</span>&nbsp;<span class="op" id="6907013">/</span>&nbsp;<span class="ident" id="6907015">m2</span><span class="op" id="6907017">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907020">testWe</span><span class="op" id="6907026">[</span><span class="num" id="6907027">255</span><span class="op" id="6907030">]</span>&nbsp;<span class="op" id="6907032">=</span>&nbsp;<span class="builtintype" id="6907034">float32</span><span class="op" id="6907041">(</span><span class="ident" id="6907042">de</span>&nbsp;<span class="op" id="6907045">/</span>&nbsp;<span class="ident" id="6907047">m2</span><span class="op" id="6907049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907052">testFe</span><span class="op" id="6907058">[</span><span class="num" id="6907059">0</span><span class="op" id="6907060">]</span>&nbsp;<span class="op" id="6907062">=</span>&nbsp;<span class="num" id="6907064">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907069">testFe</span><span class="op" id="6907075">[</span><span class="num" id="6907076">255</span><span class="op" id="6907079">]</span>&nbsp;<span class="op" id="6907081">=</span>&nbsp;<span class="builtintype" id="6907083">float32</span><span class="op" id="6907090">(</span><span class="ident" id="6907091">math</span><span class="op" id="6907095">.</span><span class="ident" id="6907096">Exp</span><span class="op" id="6907099">(</span><span class="op" id="6907100">-</span><span class="ident" id="6907101">de</span><span class="op" id="6907103">)</span><span class="op" id="6907104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907107">for</span>&nbsp;<span class="ident" id="6907111">i</span>&nbsp;<span class="op" id="6907113">:=</span>&nbsp;<span class="num" id="6907116">254</span><span class="op" id="6907119">;</span>&nbsp;<span class="ident" id="6907121">i</span>&nbsp;<span class="op" id="6907123">&gt;=</span>&nbsp;<span class="num" id="6907126">1</span><span class="op" id="6907127">;</span>&nbsp;<span class="ident" id="6907129">i</span><span class="op" id="6907130">--</span>&nbsp;<span class="op" id="6907133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907137">de</span>&nbsp;<span class="op" id="6907140">=</span>&nbsp;<span class="op" id="6907142">-</span><span class="ident" id="6907143">math</span><span class="op" id="6907147">.</span><span class="ident" id="6907148">Log</span><span class="op" id="6907151">(</span><span class="ident" id="6907152">ve</span><span class="op" id="6907154">/</span><span class="ident" id="6907155">de</span>&nbsp;<span class="op" id="6907158">+</span>&nbsp;<span class="ident" id="6907160">math</span><span class="op" id="6907164">.</span><span class="ident" id="6907165">Exp</span><span class="op" id="6907168">(</span><span class="op" id="6907169">-</span><span class="ident" id="6907170">de</span><span class="op" id="6907172">)</span><span class="op" id="6907173">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907177">testKe</span><span class="op" id="6907183">[</span><span class="ident" id="6907184">i</span><span class="op" id="6907185">+</span><span class="num" id="6907186">1</span><span class="op" id="6907187">]</span>&nbsp;<span class="op" id="6907189">=</span>&nbsp;<span class="builtintype" id="6907191">uint32</span><span class="op" id="6907197">(</span><span class="op" id="6907198">(</span><span class="ident" id="6907199">de</span>&nbsp;<span class="op" id="6907202">/</span>&nbsp;<span class="ident" id="6907204">te</span><span class="op" id="6907206">)</span>&nbsp;<span class="op" id="6907208">*</span>&nbsp;<span class="ident" id="6907210">m2</span><span class="op" id="6907212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907216">te</span>&nbsp;<span class="op" id="6907219">=</span>&nbsp;<span class="ident" id="6907221">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907226">testFe</span><span class="op" id="6907232">[</span><span class="ident" id="6907233">i</span><span class="op" id="6907234">]</span>&nbsp;<span class="op" id="6907236">=</span>&nbsp;<span class="builtintype" id="6907238">float32</span><span class="op" id="6907245">(</span><span class="ident" id="6907246">math</span><span class="op" id="6907250">.</span><span class="ident" id="6907251">Exp</span><span class="op" id="6907254">(</span><span class="op" id="6907255">-</span><span class="ident" id="6907256">de</span><span class="op" id="6907258">)</span><span class="op" id="6907259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6907263">testWe</span><span class="op" id="6907269">[</span><span class="ident" id="6907270">i</span><span class="op" id="6907271">]</span>&nbsp;<span class="op" id="6907273">=</span>&nbsp;<span class="builtintype" id="6907275">float32</span><span class="op" id="6907282">(</span><span class="ident" id="6907283">de</span>&nbsp;<span class="op" id="6907286">/</span>&nbsp;<span class="ident" id="6907288">m2</span><span class="op" id="6907290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907293">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907296">return</span><br>
<span class="lineno"></span><span class="op" id="6907303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6907306">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6907374">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="6907438">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6907456">func</span>&nbsp;<span class="ident" id="6907461">compareUint32Slices</span><span class="op" id="6907480">(</span><span class="ident" id="6907481">s1</span><span class="op" id="6907483">,</span>&nbsp;<span class="ident" id="6907485">s2</span>&nbsp;<span class="op" id="6907488">[</span><span class="op" id="6907489">]</span><span class="builtintype" id="6907490">uint32</span><span class="op" id="6907496">)</span>&nbsp;<span class="builtintype" id="6907498">int</span>&nbsp;<span class="op" id="6907502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907505">if</span>&nbsp;<span class="builtinfunc" id="6907508">len</span><span class="op" id="6907511">(</span><span class="ident" id="6907512">s1</span><span class="op" id="6907514">)</span>&nbsp;<span class="op" id="6907516">!=</span>&nbsp;<span class="builtinfunc" id="6907519">len</span><span class="op" id="6907522">(</span><span class="ident" id="6907523">s2</span><span class="op" id="6907525">)</span>&nbsp;<span class="op" id="6907527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907531">if</span>&nbsp;<span class="builtinfunc" id="6907534">len</span><span class="op" id="6907537">(</span><span class="ident" id="6907538">s1</span><span class="op" id="6907540">)</span>&nbsp;<span class="op" id="6907542">&gt;</span>&nbsp;<span class="builtinfunc" id="6907544">len</span><span class="op" id="6907547">(</span><span class="ident" id="6907548">s2</span><span class="op" id="6907550">)</span>&nbsp;<span class="op" id="6907552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907557">return</span>&nbsp;<span class="builtinfunc" id="6907564">len</span><span class="op" id="6907567">(</span><span class="ident" id="6907568">s2</span><span class="op" id="6907570">)</span>&nbsp;<span class="op" id="6907572">+</span>&nbsp;<span class="num" id="6907574">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907582">return</span>&nbsp;<span class="builtinfunc" id="6907589">len</span><span class="op" id="6907592">(</span><span class="ident" id="6907593">s1</span><span class="op" id="6907595">)</span>&nbsp;<span class="op" id="6907597">+</span>&nbsp;<span class="num" id="6907599">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907605">for</span>&nbsp;<span class="ident" id="6907609">i</span>&nbsp;<span class="op" id="6907611">:=</span>&nbsp;<span class="keyword" id="6907614">range</span>&nbsp;<span class="ident" id="6907620">s1</span>&nbsp;<span class="op" id="6907623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907627">if</span>&nbsp;<span class="ident" id="6907630">s1</span><span class="op" id="6907632">[</span><span class="ident" id="6907633">i</span><span class="op" id="6907634">]</span>&nbsp;<span class="op" id="6907636">!=</span>&nbsp;<span class="ident" id="6907639">s2</span><span class="op" id="6907641">[</span><span class="ident" id="6907642">i</span><span class="op" id="6907643">]</span>&nbsp;<span class="op" id="6907645">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907650">return</span>&nbsp;<span class="ident" id="6907657">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907667">return</span>&nbsp;<span class="op" id="6907674">-</span><span class="num" id="6907675">1</span><br>
<span class="lineno"></span><span class="op" id="6907677">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="6907680">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6907749">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="6907813">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6907831">func</span>&nbsp;<span class="ident" id="6907836">compareFloat32Slices</span><span class="op" id="6907856">(</span><span class="ident" id="6907857">s1</span><span class="op" id="6907859">,</span>&nbsp;<span class="ident" id="6907861">s2</span>&nbsp;<span class="op" id="6907864">[</span><span class="op" id="6907865">]</span><span class="builtintype" id="6907866">float32</span><span class="op" id="6907873">)</span>&nbsp;<span class="builtintype" id="6907875">int</span>&nbsp;<span class="op" id="6907879">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907882">if</span>&nbsp;<span class="builtinfunc" id="6907885">len</span><span class="op" id="6907888">(</span><span class="ident" id="6907889">s1</span><span class="op" id="6907891">)</span>&nbsp;<span class="op" id="6907893">!=</span>&nbsp;<span class="builtinfunc" id="6907896">len</span><span class="op" id="6907899">(</span><span class="ident" id="6907900">s2</span><span class="op" id="6907902">)</span>&nbsp;<span class="op" id="6907904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907908">if</span>&nbsp;<span class="builtinfunc" id="6907911">len</span><span class="op" id="6907914">(</span><span class="ident" id="6907915">s1</span><span class="op" id="6907917">)</span>&nbsp;<span class="op" id="6907919">&gt;</span>&nbsp;<span class="builtinfunc" id="6907921">len</span><span class="op" id="6907924">(</span><span class="ident" id="6907925">s2</span><span class="op" id="6907927">)</span>&nbsp;<span class="op" id="6907929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907934">return</span>&nbsp;<span class="builtinfunc" id="6907941">len</span><span class="op" id="6907944">(</span><span class="ident" id="6907945">s2</span><span class="op" id="6907947">)</span>&nbsp;<span class="op" id="6907949">+</span>&nbsp;<span class="num" id="6907951">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907959">return</span>&nbsp;<span class="builtinfunc" id="6907966">len</span><span class="op" id="6907969">(</span><span class="ident" id="6907970">s1</span><span class="op" id="6907972">)</span>&nbsp;<span class="op" id="6907974">+</span>&nbsp;<span class="num" id="6907976">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6907982">for</span>&nbsp;<span class="ident" id="6907986">i</span>&nbsp;<span class="op" id="6907988">:=</span>&nbsp;<span class="keyword" id="6907991">range</span>&nbsp;<span class="ident" id="6907997">s1</span>&nbsp;<span class="op" id="6908000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908004">if</span>&nbsp;<span class="op" id="6908007">!</span><span class="ident" id="6908008">nearEqual</span><span class="op" id="6908017">(</span><span class="builtintype" id="6908018">float64</span><span class="op" id="6908025">(</span><span class="ident" id="6908026">s1</span><span class="op" id="6908028">[</span><span class="ident" id="6908029">i</span><span class="op" id="6908030">]</span><span class="op" id="6908031">)</span><span class="op" id="6908032">,</span>&nbsp;<span class="builtintype" id="6908034">float64</span><span class="op" id="6908041">(</span><span class="ident" id="6908042">s2</span><span class="op" id="6908044">[</span><span class="ident" id="6908045">i</span><span class="op" id="6908046">]</span><span class="op" id="6908047">)</span><span class="op" id="6908048">,</span>&nbsp;<span class="num" id="6908050">0</span><span class="op" id="6908051">,</span>&nbsp;<span class="num" id="6908053">1e-7</span><span class="op" id="6908057">)</span>&nbsp;<span class="op" id="6908059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908064">return</span>&nbsp;<span class="ident" id="6908071">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908075">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908081">return</span>&nbsp;<span class="op" id="6908088">-</span><span class="num" id="6908089">1</span><br>
<span class="lineno"></span><span class="op" id="6908091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6908094">func</span>&nbsp;<span class="ident" id="6908099">TestNormTables</span><span class="op" id="6908113">(</span><span class="ident" id="6908114">t</span>&nbsp;<span class="op" id="6908116">*</span><span class="ident" id="6908117">testing</span><span class="op" id="6908124">.</span><span class="ident" id="6908125">T</span><span class="op" id="6908126">)</span>&nbsp;<span class="op" id="6908128">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908131">testKn</span><span class="op" id="6908137">,</span>&nbsp;<span class="ident" id="6908139">testWn</span><span class="op" id="6908145">,</span>&nbsp;<span class="ident" id="6908147">testFn</span>&nbsp;<span class="op" id="6908154">:=</span>&nbsp;<span class="ident" id="6908157">initNorm</span><span class="op" id="6908165">(</span><span class="op" id="6908166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908169">if</span>&nbsp;<span class="ident" id="6908172">i</span>&nbsp;<span class="op" id="6908174">:=</span>&nbsp;<span class="ident" id="6908177">compareUint32Slices</span><span class="op" id="6908196">(</span><span class="ident" id="6908197">kn</span><span class="op" id="6908199">[</span><span class="num" id="6908200">0</span><span class="op" id="6908201">:</span><span class="op" id="6908202">]</span><span class="op" id="6908203">,</span>&nbsp;<span class="ident" id="6908205">testKn</span><span class="op" id="6908211">)</span><span class="op" id="6908212">;</span>&nbsp;<span class="ident" id="6908214">i</span>&nbsp;<span class="op" id="6908216">&gt;=</span>&nbsp;<span class="num" id="6908219">0</span>&nbsp;<span class="op" id="6908221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908225">t</span><span class="op" id="6908226">.</span><span class="ident" id="6908227">Errorf</span><span class="op" id="6908233">(</span><span class="string" id="6908234">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908270">,</span>&nbsp;<span class="ident" id="6908272">i</span><span class="op" id="6908273">,</span>&nbsp;<span class="ident" id="6908275">kn</span><span class="op" id="6908277">[</span><span class="ident" id="6908278">i</span><span class="op" id="6908279">]</span><span class="op" id="6908280">,</span>&nbsp;<span class="ident" id="6908282">testKn</span><span class="op" id="6908288">[</span><span class="ident" id="6908289">i</span><span class="op" id="6908290">]</span><span class="op" id="6908291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908297">if</span>&nbsp;<span class="ident" id="6908300">i</span>&nbsp;<span class="op" id="6908302">:=</span>&nbsp;<span class="ident" id="6908305">compareFloat32Slices</span><span class="op" id="6908325">(</span><span class="ident" id="6908326">wn</span><span class="op" id="6908328">[</span><span class="num" id="6908329">0</span><span class="op" id="6908330">:</span><span class="op" id="6908331">]</span><span class="op" id="6908332">,</span>&nbsp;<span class="ident" id="6908334">testWn</span><span class="op" id="6908340">)</span><span class="op" id="6908341">;</span>&nbsp;<span class="ident" id="6908343">i</span>&nbsp;<span class="op" id="6908345">&gt;=</span>&nbsp;<span class="num" id="6908348">0</span>&nbsp;<span class="op" id="6908350">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908354">t</span><span class="op" id="6908355">.</span><span class="ident" id="6908356">Errorf</span><span class="op" id="6908362">(</span><span class="string" id="6908363">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908399">,</span>&nbsp;<span class="ident" id="6908401">i</span><span class="op" id="6908402">,</span>&nbsp;<span class="ident" id="6908404">wn</span><span class="op" id="6908406">[</span><span class="ident" id="6908407">i</span><span class="op" id="6908408">]</span><span class="op" id="6908409">,</span>&nbsp;<span class="ident" id="6908411">testWn</span><span class="op" id="6908417">[</span><span class="ident" id="6908418">i</span><span class="op" id="6908419">]</span><span class="op" id="6908420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908426">if</span>&nbsp;<span class="ident" id="6908429">i</span>&nbsp;<span class="op" id="6908431">:=</span>&nbsp;<span class="ident" id="6908434">compareFloat32Slices</span><span class="op" id="6908454">(</span><span class="ident" id="6908455">fn</span><span class="op" id="6908457">[</span><span class="num" id="6908458">0</span><span class="op" id="6908459">:</span><span class="op" id="6908460">]</span><span class="op" id="6908461">,</span>&nbsp;<span class="ident" id="6908463">testFn</span><span class="op" id="6908469">)</span><span class="op" id="6908470">;</span>&nbsp;<span class="ident" id="6908472">i</span>&nbsp;<span class="op" id="6908474">&gt;=</span>&nbsp;<span class="num" id="6908477">0</span>&nbsp;<span class="op" id="6908479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908483">t</span><span class="op" id="6908484">.</span><span class="ident" id="6908485">Errorf</span><span class="op" id="6908491">(</span><span class="string" id="6908492">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908528">,</span>&nbsp;<span class="ident" id="6908530">i</span><span class="op" id="6908531">,</span>&nbsp;<span class="ident" id="6908533">fn</span><span class="op" id="6908535">[</span><span class="ident" id="6908536">i</span><span class="op" id="6908537">]</span><span class="op" id="6908538">,</span>&nbsp;<span class="ident" id="6908540">testFn</span><span class="op" id="6908546">[</span><span class="ident" id="6908547">i</span><span class="op" id="6908548">]</span><span class="op" id="6908549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908552">}</span><br>
<span class="lineno">310</span><span class="op" id="6908554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6908557">func</span>&nbsp;<span class="ident" id="6908562">TestExpTables</span><span class="op" id="6908575">(</span><span class="ident" id="6908576">t</span>&nbsp;<span class="op" id="6908578">*</span><span class="ident" id="6908579">testing</span><span class="op" id="6908586">.</span><span class="ident" id="6908587">T</span><span class="op" id="6908588">)</span>&nbsp;<span class="op" id="6908590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908593">testKe</span><span class="op" id="6908599">,</span>&nbsp;<span class="ident" id="6908601">testWe</span><span class="op" id="6908607">,</span>&nbsp;<span class="ident" id="6908609">testFe</span>&nbsp;<span class="op" id="6908616">:=</span>&nbsp;<span class="ident" id="6908619">initExp</span><span class="op" id="6908626">(</span><span class="op" id="6908627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908630">if</span>&nbsp;<span class="ident" id="6908633">i</span>&nbsp;<span class="op" id="6908635">:=</span>&nbsp;<span class="ident" id="6908638">compareUint32Slices</span><span class="op" id="6908657">(</span><span class="ident" id="6908658">ke</span><span class="op" id="6908660">[</span><span class="num" id="6908661">0</span><span class="op" id="6908662">:</span><span class="op" id="6908663">]</span><span class="op" id="6908664">,</span>&nbsp;<span class="ident" id="6908666">testKe</span><span class="op" id="6908672">)</span><span class="op" id="6908673">;</span>&nbsp;<span class="ident" id="6908675">i</span>&nbsp;<span class="op" id="6908677">&gt;=</span>&nbsp;<span class="num" id="6908680">0</span>&nbsp;<span class="op" id="6908682">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908686">t</span><span class="op" id="6908687">.</span><span class="ident" id="6908688">Errorf</span><span class="op" id="6908694">(</span><span class="string" id="6908695">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908731">,</span>&nbsp;<span class="ident" id="6908733">i</span><span class="op" id="6908734">,</span>&nbsp;<span class="ident" id="6908736">ke</span><span class="op" id="6908738">[</span><span class="ident" id="6908739">i</span><span class="op" id="6908740">]</span><span class="op" id="6908741">,</span>&nbsp;<span class="ident" id="6908743">testKe</span><span class="op" id="6908749">[</span><span class="ident" id="6908750">i</span><span class="op" id="6908751">]</span><span class="op" id="6908752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908758">if</span>&nbsp;<span class="ident" id="6908761">i</span>&nbsp;<span class="op" id="6908763">:=</span>&nbsp;<span class="ident" id="6908766">compareFloat32Slices</span><span class="op" id="6908786">(</span><span class="ident" id="6908787">we</span><span class="op" id="6908789">[</span><span class="num" id="6908790">0</span><span class="op" id="6908791">:</span><span class="op" id="6908792">]</span><span class="op" id="6908793">,</span>&nbsp;<span class="ident" id="6908795">testWe</span><span class="op" id="6908801">)</span><span class="op" id="6908802">;</span>&nbsp;<span class="ident" id="6908804">i</span>&nbsp;<span class="op" id="6908806">&gt;=</span>&nbsp;<span class="num" id="6908809">0</span>&nbsp;<span class="op" id="6908811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908815">t</span><span class="op" id="6908816">.</span><span class="ident" id="6908817">Errorf</span><span class="op" id="6908823">(</span><span class="string" id="6908824">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908860">,</span>&nbsp;<span class="ident" id="6908862">i</span><span class="op" id="6908863">,</span>&nbsp;<span class="ident" id="6908865">we</span><span class="op" id="6908867">[</span><span class="ident" id="6908868">i</span><span class="op" id="6908869">]</span><span class="op" id="6908870">,</span>&nbsp;<span class="ident" id="6908872">testWe</span><span class="op" id="6908878">[</span><span class="ident" id="6908879">i</span><span class="op" id="6908880">]</span><span class="op" id="6908881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908884">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908887">if</span>&nbsp;<span class="ident" id="6908890">i</span>&nbsp;<span class="op" id="6908892">:=</span>&nbsp;<span class="ident" id="6908895">compareFloat32Slices</span><span class="op" id="6908915">(</span><span class="ident" id="6908916">fe</span><span class="op" id="6908918">[</span><span class="num" id="6908919">0</span><span class="op" id="6908920">:</span><span class="op" id="6908921">]</span><span class="op" id="6908922">,</span>&nbsp;<span class="ident" id="6908924">testFe</span><span class="op" id="6908930">)</span><span class="op" id="6908931">;</span>&nbsp;<span class="ident" id="6908933">i</span>&nbsp;<span class="op" id="6908935">&gt;=</span>&nbsp;<span class="num" id="6908938">0</span>&nbsp;<span class="op" id="6908940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908944">t</span><span class="op" id="6908945">.</span><span class="ident" id="6908946">Errorf</span><span class="op" id="6908952">(</span><span class="string" id="6908953">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6908989">,</span>&nbsp;<span class="ident" id="6908991">i</span><span class="op" id="6908992">,</span>&nbsp;<span class="ident" id="6908994">fe</span><span class="op" id="6908996">[</span><span class="ident" id="6908997">i</span><span class="op" id="6908998">]</span><span class="op" id="6908999">,</span>&nbsp;<span class="ident" id="6909001">testFe</span><span class="op" id="6909007">[</span><span class="ident" id="6909008">i</span><span class="op" id="6909009">]</span><span class="op" id="6909010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909013">}</span><br>
<span class="lineno"></span><span class="op" id="6909015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="6909018">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="6909090">func</span>&nbsp;<span class="ident" id="6909095">TestFloat32</span><span class="op" id="6909106">(</span><span class="ident" id="6909107">t</span>&nbsp;<span class="op" id="6909109">*</span><span class="ident" id="6909110">testing</span><span class="op" id="6909117">.</span><span class="ident" id="6909118">T</span><span class="op" id="6909119">)</span>&nbsp;<span class="op" id="6909121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909124">r</span>&nbsp;<span class="op" id="6909126">:=</span>&nbsp;<span class="ident" id="6909129">New</span><span class="op" id="6909132">(</span><span class="ident" id="6909133">NewSource</span><span class="op" id="6909142">(</span><span class="num" id="6909143">1</span><span class="op" id="6909144">)</span><span class="op" id="6909145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909148">for</span>&nbsp;<span class="ident" id="6909152">ct</span>&nbsp;<span class="op" id="6909155">:=</span>&nbsp;<span class="num" id="6909158">0</span><span class="op" id="6909159">;</span>&nbsp;<span class="ident" id="6909161">ct</span>&nbsp;<span class="op" id="6909164">&lt;</span>&nbsp;<span class="num" id="6909166">10e6</span><span class="op" id="6909170">;</span>&nbsp;<span class="ident" id="6909172">ct</span><span class="op" id="6909174">++</span>&nbsp;<span class="op" id="6909177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909181">f</span>&nbsp;<span class="op" id="6909183">:=</span>&nbsp;<span class="ident" id="6909186">r</span><span class="op" id="6909187">.</span><span class="ident" id="6909188">Float32</span><span class="op" id="6909195">(</span><span class="op" id="6909196">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909200">if</span>&nbsp;<span class="ident" id="6909203">f</span>&nbsp;<span class="op" id="6909205">&gt;=</span>&nbsp;<span class="num" id="6909208">1</span>&nbsp;<span class="op" id="6909210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909215">t</span><span class="op" id="6909216">.</span><span class="ident" id="6909217">Fatal</span><span class="op" id="6909222">(</span><span class="string" id="6909223">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="6909264">,</span>&nbsp;<span class="ident" id="6909266">ct</span><span class="op" id="6909268">,</span>&nbsp;<span class="string" id="6909270">&#34;f:&#34;</span><span class="op" id="6909274">,</span>&nbsp;<span class="ident" id="6909276">f</span><span class="op" id="6909277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909284">}</span><br>
<span class="lineno"></span><span class="op" id="6909286">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="6909289">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6909304">func</span>&nbsp;<span class="ident" id="6909309">BenchmarkInt63Threadsafe</span><span class="op" id="6909333">(</span><span class="ident" id="6909334">b</span>&nbsp;<span class="op" id="6909336">*</span><span class="ident" id="6909337">testing</span><span class="op" id="6909344">.</span><span class="ident" id="6909345">B</span><span class="op" id="6909346">)</span>&nbsp;<span class="op" id="6909348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909351">for</span>&nbsp;<span class="ident" id="6909355">n</span>&nbsp;<span class="op" id="6909357">:=</span>&nbsp;<span class="ident" id="6909360">b</span><span class="op" id="6909361">.</span><span class="ident" id="6909362">N</span><span class="op" id="6909363">;</span>&nbsp;<span class="ident" id="6909365">n</span>&nbsp;<span class="op" id="6909367">&gt;</span>&nbsp;<span class="num" id="6909369">0</span><span class="op" id="6909370">;</span>&nbsp;<span class="ident" id="6909372">n</span><span class="op" id="6909373">--</span>&nbsp;<span class="op" id="6909376">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909380">Int63</span><span class="op" id="6909385">(</span><span class="op" id="6909386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909389">}</span><br>
<span class="lineno"></span><span class="op" id="6909391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6909394">func</span>&nbsp;<span class="ident" id="6909399">BenchmarkInt63Unthreadsafe</span><span class="op" id="6909425">(</span><span class="ident" id="6909426">b</span>&nbsp;<span class="op" id="6909428">*</span><span class="ident" id="6909429">testing</span><span class="op" id="6909436">.</span><span class="ident" id="6909437">B</span><span class="op" id="6909438">)</span>&nbsp;<span class="op" id="6909440">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909443">r</span>&nbsp;<span class="op" id="6909445">:=</span>&nbsp;<span class="ident" id="6909448">New</span><span class="op" id="6909451">(</span><span class="ident" id="6909452">NewSource</span><span class="op" id="6909461">(</span><span class="num" id="6909462">1</span><span class="op" id="6909463">)</span><span class="op" id="6909464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909467">for</span>&nbsp;<span class="ident" id="6909471">n</span>&nbsp;<span class="op" id="6909473">:=</span>&nbsp;<span class="ident" id="6909476">b</span><span class="op" id="6909477">.</span><span class="ident" id="6909478">N</span><span class="op" id="6909479">;</span>&nbsp;<span class="ident" id="6909481">n</span>&nbsp;<span class="op" id="6909483">&gt;</span>&nbsp;<span class="num" id="6909485">0</span><span class="op" id="6909486">;</span>&nbsp;<span class="ident" id="6909488">n</span><span class="op" id="6909489">--</span>&nbsp;<span class="op" id="6909492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909496">r</span><span class="op" id="6909497">.</span><span class="ident" id="6909498">Int63</span><span class="op" id="6909503">(</span><span class="op" id="6909504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909507">}</span><br>
<span class="lineno"></span><span class="op" id="6909509">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="6909512">func</span>&nbsp;<span class="ident" id="6909517">BenchmarkIntn1000</span><span class="op" id="6909534">(</span><span class="ident" id="6909535">b</span>&nbsp;<span class="op" id="6909537">*</span><span class="ident" id="6909538">testing</span><span class="op" id="6909545">.</span><span class="ident" id="6909546">B</span><span class="op" id="6909547">)</span>&nbsp;<span class="op" id="6909549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909552">r</span>&nbsp;<span class="op" id="6909554">:=</span>&nbsp;<span class="ident" id="6909557">New</span><span class="op" id="6909560">(</span><span class="ident" id="6909561">NewSource</span><span class="op" id="6909570">(</span><span class="num" id="6909571">1</span><span class="op" id="6909572">)</span><span class="op" id="6909573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909576">for</span>&nbsp;<span class="ident" id="6909580">n</span>&nbsp;<span class="op" id="6909582">:=</span>&nbsp;<span class="ident" id="6909585">b</span><span class="op" id="6909586">.</span><span class="ident" id="6909587">N</span><span class="op" id="6909588">;</span>&nbsp;<span class="ident" id="6909590">n</span>&nbsp;<span class="op" id="6909592">&gt;</span>&nbsp;<span class="num" id="6909594">0</span><span class="op" id="6909595">;</span>&nbsp;<span class="ident" id="6909597">n</span><span class="op" id="6909598">--</span>&nbsp;<span class="op" id="6909601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909605">r</span><span class="op" id="6909606">.</span><span class="ident" id="6909607">Intn</span><span class="op" id="6909611">(</span><span class="num" id="6909612">1000</span><span class="op" id="6909616">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909619">}</span><br>
<span class="lineno"></span><span class="op" id="6909621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6909624">func</span>&nbsp;<span class="ident" id="6909629">BenchmarkInt63n1000</span><span class="op" id="6909648">(</span><span class="ident" id="6909649">b</span>&nbsp;<span class="op" id="6909651">*</span><span class="ident" id="6909652">testing</span><span class="op" id="6909659">.</span><span class="ident" id="6909660">B</span><span class="op" id="6909661">)</span>&nbsp;<span class="op" id="6909663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909666">r</span>&nbsp;<span class="op" id="6909668">:=</span>&nbsp;<span class="ident" id="6909671">New</span><span class="op" id="6909674">(</span><span class="ident" id="6909675">NewSource</span><span class="op" id="6909684">(</span><span class="num" id="6909685">1</span><span class="op" id="6909686">)</span><span class="op" id="6909687">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909690">for</span>&nbsp;<span class="ident" id="6909694">n</span>&nbsp;<span class="op" id="6909696">:=</span>&nbsp;<span class="ident" id="6909699">b</span><span class="op" id="6909700">.</span><span class="ident" id="6909701">N</span><span class="op" id="6909702">;</span>&nbsp;<span class="ident" id="6909704">n</span>&nbsp;<span class="op" id="6909706">&gt;</span>&nbsp;<span class="num" id="6909708">0</span><span class="op" id="6909709">;</span>&nbsp;<span class="ident" id="6909711">n</span><span class="op" id="6909712">--</span>&nbsp;<span class="op" id="6909715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909719">r</span><span class="op" id="6909720">.</span><span class="ident" id="6909721">Int63n</span><span class="op" id="6909727">(</span><span class="num" id="6909728">1000</span><span class="op" id="6909732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909735">}</span><br>
<span class="lineno"></span><span class="op" id="6909737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="6909740">func</span>&nbsp;<span class="ident" id="6909745">BenchmarkInt31n1000</span><span class="op" id="6909764">(</span><span class="ident" id="6909765">b</span>&nbsp;<span class="op" id="6909767">*</span><span class="ident" id="6909768">testing</span><span class="op" id="6909775">.</span><span class="ident" id="6909776">B</span><span class="op" id="6909777">)</span>&nbsp;<span class="op" id="6909779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909782">r</span>&nbsp;<span class="op" id="6909784">:=</span>&nbsp;<span class="ident" id="6909787">New</span><span class="op" id="6909790">(</span><span class="ident" id="6909791">NewSource</span><span class="op" id="6909800">(</span><span class="num" id="6909801">1</span><span class="op" id="6909802">)</span><span class="op" id="6909803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909806">for</span>&nbsp;<span class="ident" id="6909810">n</span>&nbsp;<span class="op" id="6909812">:=</span>&nbsp;<span class="ident" id="6909815">b</span><span class="op" id="6909816">.</span><span class="ident" id="6909817">N</span><span class="op" id="6909818">;</span>&nbsp;<span class="ident" id="6909820">n</span>&nbsp;<span class="op" id="6909822">&gt;</span>&nbsp;<span class="num" id="6909824">0</span><span class="op" id="6909825">;</span>&nbsp;<span class="ident" id="6909827">n</span><span class="op" id="6909828">--</span>&nbsp;<span class="op" id="6909831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909835">r</span><span class="op" id="6909836">.</span><span class="ident" id="6909837">Int31n</span><span class="op" id="6909843">(</span><span class="num" id="6909844">1000</span><span class="op" id="6909848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909851">}</span><br>
<span class="lineno">370</span><span class="op" id="6909853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6909856">func</span>&nbsp;<span class="ident" id="6909861">BenchmarkFloat32</span><span class="op" id="6909877">(</span><span class="ident" id="6909878">b</span>&nbsp;<span class="op" id="6909880">*</span><span class="ident" id="6909881">testing</span><span class="op" id="6909888">.</span><span class="ident" id="6909889">B</span><span class="op" id="6909890">)</span>&nbsp;<span class="op" id="6909892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909895">r</span>&nbsp;<span class="op" id="6909897">:=</span>&nbsp;<span class="ident" id="6909900">New</span><span class="op" id="6909903">(</span><span class="ident" id="6909904">NewSource</span><span class="op" id="6909913">(</span><span class="num" id="6909914">1</span><span class="op" id="6909915">)</span><span class="op" id="6909916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909919">for</span>&nbsp;<span class="ident" id="6909923">n</span>&nbsp;<span class="op" id="6909925">:=</span>&nbsp;<span class="ident" id="6909928">b</span><span class="op" id="6909929">.</span><span class="ident" id="6909930">N</span><span class="op" id="6909931">;</span>&nbsp;<span class="ident" id="6909933">n</span>&nbsp;<span class="op" id="6909935">&gt;</span>&nbsp;<span class="num" id="6909937">0</span><span class="op" id="6909938">;</span>&nbsp;<span class="ident" id="6909940">n</span><span class="op" id="6909941">--</span>&nbsp;<span class="op" id="6909944">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909948">r</span><span class="op" id="6909949">.</span><span class="ident" id="6909950">Float32</span><span class="op" id="6909957">(</span><span class="op" id="6909958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909961">}</span><br>
<span class="lineno"></span><span class="op" id="6909963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6909966">func</span>&nbsp;<span class="ident" id="6909971">BenchmarkFloat64</span><span class="op" id="6909987">(</span><span class="ident" id="6909988">b</span>&nbsp;<span class="op" id="6909990">*</span><span class="ident" id="6909991">testing</span><span class="op" id="6909998">.</span><span class="ident" id="6909999">B</span><span class="op" id="6910000">)</span>&nbsp;<span class="op" id="6910002">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910005">r</span>&nbsp;<span class="op" id="6910007">:=</span>&nbsp;<span class="ident" id="6910010">New</span><span class="op" id="6910013">(</span><span class="ident" id="6910014">NewSource</span><span class="op" id="6910023">(</span><span class="num" id="6910024">1</span><span class="op" id="6910025">)</span><span class="op" id="6910026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910029">for</span>&nbsp;<span class="ident" id="6910033">n</span>&nbsp;<span class="op" id="6910035">:=</span>&nbsp;<span class="ident" id="6910038">b</span><span class="op" id="6910039">.</span><span class="ident" id="6910040">N</span><span class="op" id="6910041">;</span>&nbsp;<span class="ident" id="6910043">n</span>&nbsp;<span class="op" id="6910045">&gt;</span>&nbsp;<span class="num" id="6910047">0</span><span class="op" id="6910048">;</span>&nbsp;<span class="ident" id="6910050">n</span><span class="op" id="6910051">--</span>&nbsp;<span class="op" id="6910054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910058">r</span><span class="op" id="6910059">.</span><span class="ident" id="6910060">Float64</span><span class="op" id="6910067">(</span><span class="op" id="6910068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910071">}</span><br>
<span class="lineno"></span><span class="op" id="6910073">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="6910076">func</span>&nbsp;<span class="ident" id="6910081">BenchmarkPerm3</span><span class="op" id="6910095">(</span><span class="ident" id="6910096">b</span>&nbsp;<span class="op" id="6910098">*</span><span class="ident" id="6910099">testing</span><span class="op" id="6910106">.</span><span class="ident" id="6910107">B</span><span class="op" id="6910108">)</span>&nbsp;<span class="op" id="6910110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910113">r</span>&nbsp;<span class="op" id="6910115">:=</span>&nbsp;<span class="ident" id="6910118">New</span><span class="op" id="6910121">(</span><span class="ident" id="6910122">NewSource</span><span class="op" id="6910131">(</span><span class="num" id="6910132">1</span><span class="op" id="6910133">)</span><span class="op" id="6910134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910137">for</span>&nbsp;<span class="ident" id="6910141">n</span>&nbsp;<span class="op" id="6910143">:=</span>&nbsp;<span class="ident" id="6910146">b</span><span class="op" id="6910147">.</span><span class="ident" id="6910148">N</span><span class="op" id="6910149">;</span>&nbsp;<span class="ident" id="6910151">n</span>&nbsp;<span class="op" id="6910153">&gt;</span>&nbsp;<span class="num" id="6910155">0</span><span class="op" id="6910156">;</span>&nbsp;<span class="ident" id="6910158">n</span><span class="op" id="6910159">--</span>&nbsp;<span class="op" id="6910162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910166">r</span><span class="op" id="6910167">.</span><span class="ident" id="6910168">Perm</span><span class="op" id="6910172">(</span><span class="num" id="6910173">3</span><span class="op" id="6910174">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910177">}</span><br>
<span class="lineno"></span><span class="op" id="6910179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6910182">func</span>&nbsp;<span class="ident" id="6910187">BenchmarkPerm30</span><span class="op" id="6910202">(</span><span class="ident" id="6910203">b</span>&nbsp;<span class="op" id="6910205">*</span><span class="ident" id="6910206">testing</span><span class="op" id="6910213">.</span><span class="ident" id="6910214">B</span><span class="op" id="6910215">)</span>&nbsp;<span class="op" id="6910217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910220">r</span>&nbsp;<span class="op" id="6910222">:=</span>&nbsp;<span class="ident" id="6910225">New</span><span class="op" id="6910228">(</span><span class="ident" id="6910229">NewSource</span><span class="op" id="6910238">(</span><span class="num" id="6910239">1</span><span class="op" id="6910240">)</span><span class="op" id="6910241">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910244">for</span>&nbsp;<span class="ident" id="6910248">n</span>&nbsp;<span class="op" id="6910250">:=</span>&nbsp;<span class="ident" id="6910253">b</span><span class="op" id="6910254">.</span><span class="ident" id="6910255">N</span><span class="op" id="6910256">;</span>&nbsp;<span class="ident" id="6910258">n</span>&nbsp;<span class="op" id="6910260">&gt;</span>&nbsp;<span class="num" id="6910262">0</span><span class="op" id="6910263">;</span>&nbsp;<span class="ident" id="6910265">n</span><span class="op" id="6910266">--</span>&nbsp;<span class="op" id="6910269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910273">r</span><span class="op" id="6910274">.</span><span class="ident" id="6910275">Perm</span><span class="op" id="6910279">(</span><span class="num" id="6910280">30</span><span class="op" id="6910282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910285">}</span><br>
<span class="lineno"></span><span class="op" id="6910287">}</span>
</div>
</body>
</html>
