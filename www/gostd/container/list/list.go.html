<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4973503">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4973558">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4973612">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4973663">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4973712">//</span><br>
<span class="lineno"></span><span class="comment" id="4973715">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4973763">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4973811">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4973844">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4973849">//</span><br>
<span class="lineno"></span><span class="keyword" id="4973852">package</span>&nbsp;<span class="ident" id="4973860">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4973866">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4973909">type</span>&nbsp;<span class="ident" id="4973914">Element</span>&nbsp;<span class="keyword" id="4973922">struct</span>&nbsp;<span class="op" id="4973929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4973932">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974002">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974073">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974143">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974214">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4974239">next</span><span class="op" id="4974243">,</span>&nbsp;<span class="ident" id="4974245">prev</span>&nbsp;<span class="op" id="4974250">*</span><span class="ident" id="4974251">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974261">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4974305">list</span>&nbsp;<span class="op" id="4974310">*</span><span class="ident" id="4974311">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4974318">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4974358">Value</span>&nbsp;<span class="keyword" id="4974364">interface</span><span class="op" id="4974373">{</span><span class="op" id="4974374">}</span><br>
<span class="lineno"></span><span class="op" id="4974376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4974379">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4974425">func</span>&nbsp;<span class="op" id="4974430">(</span><span class="ident" id="4974431">e</span>&nbsp;<span class="op" id="4974433">*</span><span class="ident" id="4974434">Element</span><span class="op" id="4974441">)</span>&nbsp;<span class="ident" id="4974443">Next</span><span class="op" id="4974447">(</span><span class="op" id="4974448">)</span>&nbsp;<span class="op" id="4974450">*</span><span class="ident" id="4974451">Element</span>&nbsp;<span class="op" id="4974459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974462">if</span>&nbsp;<span class="ident" id="4974465">p</span>&nbsp;<span class="op" id="4974467">:=</span>&nbsp;<span class="ident" id="4974470">e</span><span class="op" id="4974471">.</span><span class="ident" id="4974472">next</span><span class="op" id="4974476">;</span>&nbsp;<span class="ident" id="4974478">e</span><span class="op" id="4974479">.</span><span class="ident" id="4974480">list</span>&nbsp;<span class="op" id="4974485">!=</span>&nbsp;<span class="ident" id="4974488">nil</span>&nbsp;<span class="op" id="4974492">&amp;&amp;</span>&nbsp;<span class="ident" id="4974495">p</span>&nbsp;<span class="op" id="4974497">!=</span>&nbsp;<span class="op" id="4974500">&amp;</span><span class="ident" id="4974501">e</span><span class="op" id="4974502">.</span><span class="ident" id="4974503">list</span><span class="op" id="4974507">.</span><span class="ident" id="4974508">root</span>&nbsp;<span class="op" id="4974513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974517">return</span>&nbsp;<span class="ident" id="4974524">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4974527">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974530">return</span>&nbsp;<span class="ident" id="4974537">nil</span><br>
<span class="lineno"></span><span class="op" id="4974541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4974544">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4974594">func</span>&nbsp;<span class="op" id="4974599">(</span><span class="ident" id="4974600">e</span>&nbsp;<span class="op" id="4974602">*</span><span class="ident" id="4974603">Element</span><span class="op" id="4974610">)</span>&nbsp;<span class="ident" id="4974612">Prev</span><span class="op" id="4974616">(</span><span class="op" id="4974617">)</span>&nbsp;<span class="op" id="4974619">*</span><span class="ident" id="4974620">Element</span>&nbsp;<span class="op" id="4974628">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974631">if</span>&nbsp;<span class="ident" id="4974634">p</span>&nbsp;<span class="op" id="4974636">:=</span>&nbsp;<span class="ident" id="4974639">e</span><span class="op" id="4974640">.</span><span class="ident" id="4974641">prev</span><span class="op" id="4974645">;</span>&nbsp;<span class="ident" id="4974647">e</span><span class="op" id="4974648">.</span><span class="ident" id="4974649">list</span>&nbsp;<span class="op" id="4974654">!=</span>&nbsp;<span class="ident" id="4974657">nil</span>&nbsp;<span class="op" id="4974661">&amp;&amp;</span>&nbsp;<span class="ident" id="4974664">p</span>&nbsp;<span class="op" id="4974666">!=</span>&nbsp;<span class="op" id="4974669">&amp;</span><span class="ident" id="4974670">e</span><span class="op" id="4974671">.</span><span class="ident" id="4974672">list</span><span class="op" id="4974676">.</span><span class="ident" id="4974677">root</span>&nbsp;<span class="op" id="4974682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974686">return</span>&nbsp;<span class="ident" id="4974693">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4974696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4974699">return</span>&nbsp;<span class="ident" id="4974706">nil</span><br>
<span class="lineno"></span><span class="op" id="4974710">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4974713">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4974754">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4974812">type</span>&nbsp;<span class="ident" id="4974817">List</span>&nbsp;<span class="keyword" id="4974822">struct</span>&nbsp;<span class="op" id="4974829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4974832">root</span>&nbsp;<span class="ident" id="4974837">Element</span>&nbsp;<span class="comment" id="4974845">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4974918">len</span>&nbsp;&nbsp;<span class="builtintype" id="4974923">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4974931">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4974988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4974991">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4975029">func</span>&nbsp;<span class="op" id="4975034">(</span><span class="ident" id="4975035">l</span>&nbsp;<span class="op" id="4975037">*</span><span class="ident" id="4975038">List</span><span class="op" id="4975042">)</span>&nbsp;<span class="ident" id="4975044">Init</span><span class="op" id="4975048">(</span><span class="op" id="4975049">)</span>&nbsp;<span class="op" id="4975051">*</span><span class="ident" id="4975052">List</span>&nbsp;<span class="op" id="4975057">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975060">l</span><span class="op" id="4975061">.</span><span class="ident" id="4975062">root</span><span class="op" id="4975066">.</span><span class="ident" id="4975067">next</span>&nbsp;<span class="op" id="4975072">=</span>&nbsp;<span class="op" id="4975074">&amp;</span><span class="ident" id="4975075">l</span><span class="op" id="4975076">.</span><span class="ident" id="4975077">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975083">l</span><span class="op" id="4975084">.</span><span class="ident" id="4975085">root</span><span class="op" id="4975089">.</span><span class="ident" id="4975090">prev</span>&nbsp;<span class="op" id="4975095">=</span>&nbsp;<span class="op" id="4975097">&amp;</span><span class="ident" id="4975098">l</span><span class="op" id="4975099">.</span><span class="ident" id="4975100">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975106">l</span><span class="op" id="4975107">.</span><span class="builtinfunc" id="4975108">len</span>&nbsp;<span class="op" id="4975112">=</span>&nbsp;<span class="num" id="4975114">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975117">return</span>&nbsp;<span class="ident" id="4975124">l</span><br>
<span class="lineno"></span><span class="op" id="4975126">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4975129">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4975165">func</span>&nbsp;<span class="ident" id="4975170">New</span><span class="op" id="4975173">(</span><span class="op" id="4975174">)</span>&nbsp;<span class="op" id="4975176">*</span><span class="ident" id="4975177">List</span>&nbsp;<span class="op" id="4975182">{</span>&nbsp;<span class="keyword" id="4975184">return</span>&nbsp;<span class="builtinfunc" id="4975191">new</span><span class="op" id="4975194">(</span><span class="ident" id="4975195">List</span><span class="op" id="4975199">)</span><span class="op" id="4975200">.</span><span class="ident" id="4975201">Init</span><span class="op" id="4975205">(</span><span class="op" id="4975206">)</span>&nbsp;<span class="op" id="4975208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4975211">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4975260">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4975287">func</span>&nbsp;<span class="op" id="4975292">(</span><span class="ident" id="4975293">l</span>&nbsp;<span class="op" id="4975295">*</span><span class="ident" id="4975296">List</span><span class="op" id="4975300">)</span>&nbsp;<span class="ident" id="4975302">Len</span><span class="op" id="4975305">(</span><span class="op" id="4975306">)</span>&nbsp;<span class="builtintype" id="4975308">int</span>&nbsp;<span class="op" id="4975312">{</span>&nbsp;<span class="keyword" id="4975314">return</span>&nbsp;<span class="ident" id="4975321">l</span><span class="op" id="4975322">.</span><span class="builtinfunc" id="4975323">len</span>&nbsp;<span class="op" id="4975327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4975330">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4975383">func</span>&nbsp;<span class="op" id="4975388">(</span><span class="ident" id="4975389">l</span>&nbsp;<span class="op" id="4975391">*</span><span class="ident" id="4975392">List</span><span class="op" id="4975396">)</span>&nbsp;<span class="ident" id="4975398">Front</span><span class="op" id="4975403">(</span><span class="op" id="4975404">)</span>&nbsp;<span class="op" id="4975406">*</span><span class="ident" id="4975407">Element</span>&nbsp;<span class="op" id="4975415">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975418">if</span>&nbsp;<span class="ident" id="4975421">l</span><span class="op" id="4975422">.</span><span class="builtinfunc" id="4975423">len</span>&nbsp;<span class="op" id="4975427">==</span>&nbsp;<span class="num" id="4975430">0</span>&nbsp;<span class="op" id="4975432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975436">return</span>&nbsp;<span class="ident" id="4975443">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4975448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975451">return</span>&nbsp;<span class="ident" id="4975458">l</span><span class="op" id="4975459">.</span><span class="ident" id="4975460">root</span><span class="op" id="4975464">.</span><span class="ident" id="4975465">next</span><br>
<span class="lineno"></span><span class="op" id="4975470">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4975473">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4975524">func</span>&nbsp;<span class="op" id="4975529">(</span><span class="ident" id="4975530">l</span>&nbsp;<span class="op" id="4975532">*</span><span class="ident" id="4975533">List</span><span class="op" id="4975537">)</span>&nbsp;<span class="ident" id="4975539">Back</span><span class="op" id="4975543">(</span><span class="op" id="4975544">)</span>&nbsp;<span class="op" id="4975546">*</span><span class="ident" id="4975547">Element</span>&nbsp;<span class="op" id="4975555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975558">if</span>&nbsp;<span class="ident" id="4975561">l</span><span class="op" id="4975562">.</span><span class="builtinfunc" id="4975563">len</span>&nbsp;<span class="op" id="4975567">==</span>&nbsp;<span class="num" id="4975570">0</span>&nbsp;<span class="op" id="4975572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975576">return</span>&nbsp;<span class="ident" id="4975583">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4975588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975591">return</span>&nbsp;<span class="ident" id="4975598">l</span><span class="op" id="4975599">.</span><span class="ident" id="4975600">root</span><span class="op" id="4975604">.</span><span class="ident" id="4975605">prev</span><br>
<span class="lineno"></span><span class="op" id="4975610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4975613">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4975663">func</span>&nbsp;<span class="op" id="4975668">(</span><span class="ident" id="4975669">l</span>&nbsp;<span class="op" id="4975671">*</span><span class="ident" id="4975672">List</span><span class="op" id="4975676">)</span>&nbsp;<span class="ident" id="4975678">lazyInit</span><span class="op" id="4975686">(</span><span class="op" id="4975687">)</span>&nbsp;<span class="op" id="4975689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975692">if</span>&nbsp;<span class="ident" id="4975695">l</span><span class="op" id="4975696">.</span><span class="ident" id="4975697">root</span><span class="op" id="4975701">.</span><span class="ident" id="4975702">next</span>&nbsp;<span class="op" id="4975707">==</span>&nbsp;<span class="ident" id="4975710">nil</span>&nbsp;<span class="op" id="4975714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975718">l</span><span class="op" id="4975719">.</span><span class="ident" id="4975720">Init</span><span class="op" id="4975724">(</span><span class="op" id="4975725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4975728">}</span><br>
<span class="lineno"></span><span class="op" id="4975730">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4975733">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4975796">func</span>&nbsp;<span class="op" id="4975801">(</span><span class="ident" id="4975802">l</span>&nbsp;<span class="op" id="4975804">*</span><span class="ident" id="4975805">List</span><span class="op" id="4975809">)</span>&nbsp;<span class="ident" id="4975811">insert</span><span class="op" id="4975817">(</span><span class="ident" id="4975818">e</span><span class="op" id="4975819">,</span>&nbsp;<span class="ident" id="4975821">at</span>&nbsp;<span class="op" id="4975824">*</span><span class="ident" id="4975825">Element</span><span class="op" id="4975832">)</span>&nbsp;<span class="op" id="4975834">*</span><span class="ident" id="4975835">Element</span>&nbsp;<span class="op" id="4975843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975846">n</span>&nbsp;<span class="op" id="4975848">:=</span>&nbsp;<span class="ident" id="4975851">at</span><span class="op" id="4975853">.</span><span class="ident" id="4975854">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975860">at</span><span class="op" id="4975862">.</span><span class="ident" id="4975863">next</span>&nbsp;<span class="op" id="4975868">=</span>&nbsp;<span class="ident" id="4975870">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975873">e</span><span class="op" id="4975874">.</span><span class="ident" id="4975875">prev</span>&nbsp;<span class="op" id="4975880">=</span>&nbsp;<span class="ident" id="4975882">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975886">e</span><span class="op" id="4975887">.</span><span class="ident" id="4975888">next</span>&nbsp;<span class="op" id="4975893">=</span>&nbsp;<span class="ident" id="4975895">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975898">n</span><span class="op" id="4975899">.</span><span class="ident" id="4975900">prev</span>&nbsp;<span class="op" id="4975905">=</span>&nbsp;<span class="ident" id="4975907">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975910">e</span><span class="op" id="4975911">.</span><span class="ident" id="4975912">list</span>&nbsp;<span class="op" id="4975917">=</span>&nbsp;<span class="ident" id="4975919">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4975922">l</span><span class="op" id="4975923">.</span><span class="builtinfunc" id="4975924">len</span><span class="op" id="4975927">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4975931">return</span>&nbsp;<span class="ident" id="4975938">e</span><br>
<span class="lineno"></span><span class="op" id="4975940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4975943">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4976019">func</span>&nbsp;<span class="op" id="4976024">(</span><span class="ident" id="4976025">l</span>&nbsp;<span class="op" id="4976027">*</span><span class="ident" id="4976028">List</span><span class="op" id="4976032">)</span>&nbsp;<span class="ident" id="4976034">insertValue</span><span class="op" id="4976045">(</span><span class="ident" id="4976046">v</span>&nbsp;<span class="keyword" id="4976048">interface</span><span class="op" id="4976057">{</span><span class="op" id="4976058">}</span><span class="op" id="4976059">,</span>&nbsp;<span class="ident" id="4976061">at</span>&nbsp;<span class="op" id="4976064">*</span><span class="ident" id="4976065">Element</span><span class="op" id="4976072">)</span>&nbsp;<span class="op" id="4976074">*</span><span class="ident" id="4976075">Element</span>&nbsp;<span class="op" id="4976083">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4976086">return</span>&nbsp;<span class="ident" id="4976093">l</span><span class="op" id="4976094">.</span><span class="ident" id="4976095">insert</span><span class="op" id="4976101">(</span><span class="op" id="4976102">&amp;</span><span class="ident" id="4976103">Element</span><span class="op" id="4976110">{</span><span class="ident" id="4976111">Value</span><span class="op" id="4976116">:</span>&nbsp;<span class="ident" id="4976118">v</span><span class="op" id="4976119">}</span><span class="op" id="4976120">,</span>&nbsp;<span class="ident" id="4976122">at</span><span class="op" id="4976124">)</span><br>
<span class="lineno"></span><span class="op" id="4976126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4976129">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4976197">func</span>&nbsp;<span class="op" id="4976202">(</span><span class="ident" id="4976203">l</span>&nbsp;<span class="op" id="4976205">*</span><span class="ident" id="4976206">List</span><span class="op" id="4976210">)</span>&nbsp;<span class="ident" id="4976212">remove</span><span class="op" id="4976218">(</span><span class="ident" id="4976219">e</span>&nbsp;<span class="op" id="4976221">*</span><span class="ident" id="4976222">Element</span><span class="op" id="4976229">)</span>&nbsp;<span class="op" id="4976231">*</span><span class="ident" id="4976232">Element</span>&nbsp;<span class="op" id="4976240">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976243">e</span><span class="op" id="4976244">.</span><span class="ident" id="4976245">prev</span><span class="op" id="4976249">.</span><span class="ident" id="4976250">next</span>&nbsp;<span class="op" id="4976255">=</span>&nbsp;<span class="ident" id="4976257">e</span><span class="op" id="4976258">.</span><span class="ident" id="4976259">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976265">e</span><span class="op" id="4976266">.</span><span class="ident" id="4976267">next</span><span class="op" id="4976271">.</span><span class="ident" id="4976272">prev</span>&nbsp;<span class="op" id="4976277">=</span>&nbsp;<span class="ident" id="4976279">e</span><span class="op" id="4976280">.</span><span class="ident" id="4976281">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976287">e</span><span class="op" id="4976288">.</span><span class="ident" id="4976289">next</span>&nbsp;<span class="op" id="4976294">=</span>&nbsp;<span class="ident" id="4976296">nil</span>&nbsp;<span class="comment" id="4976300">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976323">e</span><span class="op" id="4976324">.</span><span class="ident" id="4976325">prev</span>&nbsp;<span class="op" id="4976330">=</span>&nbsp;<span class="ident" id="4976332">nil</span>&nbsp;<span class="comment" id="4976336">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976359">e</span><span class="op" id="4976360">.</span><span class="ident" id="4976361">list</span>&nbsp;<span class="op" id="4976366">=</span>&nbsp;<span class="ident" id="4976368">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976373">l</span><span class="op" id="4976374">.</span><span class="builtinfunc" id="4976375">len</span><span class="op" id="4976378">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4976382">return</span>&nbsp;<span class="ident" id="4976389">e</span><br>
<span class="lineno"></span><span class="op" id="4976391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4976394">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4976451">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4976492">func</span>&nbsp;<span class="op" id="4976497">(</span><span class="ident" id="4976498">l</span>&nbsp;<span class="op" id="4976500">*</span><span class="ident" id="4976501">List</span><span class="op" id="4976505">)</span>&nbsp;<span class="ident" id="4976507">Remove</span><span class="op" id="4976513">(</span><span class="ident" id="4976514">e</span>&nbsp;<span class="op" id="4976516">*</span><span class="ident" id="4976517">Element</span><span class="op" id="4976524">)</span>&nbsp;<span class="keyword" id="4976526">interface</span><span class="op" id="4976535">{</span><span class="op" id="4976536">}</span>&nbsp;<span class="op" id="4976538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4976541">if</span>&nbsp;<span class="ident" id="4976544">e</span><span class="op" id="4976545">.</span><span class="ident" id="4976546">list</span>&nbsp;<span class="op" id="4976551">==</span>&nbsp;<span class="ident" id="4976554">l</span>&nbsp;<span class="op" id="4976556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4976560">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4976630">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976698">l</span><span class="op" id="4976699">.</span><span class="ident" id="4976700">remove</span><span class="op" id="4976706">(</span><span class="ident" id="4976707">e</span><span class="op" id="4976708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4976711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4976714">return</span>&nbsp;<span class="ident" id="4976721">e</span><span class="op" id="4976722">.</span><span class="ident" id="4976723">Value</span><br>
<span class="lineno"></span><span class="op" id="4976729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4976732">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4976820">func</span>&nbsp;<span class="op" id="4976825">(</span><span class="ident" id="4976826">l</span>&nbsp;<span class="op" id="4976828">*</span><span class="ident" id="4976829">List</span><span class="op" id="4976833">)</span>&nbsp;<span class="ident" id="4976835">PushFront</span><span class="op" id="4976844">(</span><span class="ident" id="4976845">v</span>&nbsp;<span class="keyword" id="4976847">interface</span><span class="op" id="4976856">{</span><span class="op" id="4976857">}</span><span class="op" id="4976858">)</span>&nbsp;<span class="op" id="4976860">*</span><span class="ident" id="4976861">Element</span>&nbsp;<span class="op" id="4976869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4976872">l</span><span class="op" id="4976873">.</span><span class="ident" id="4976874">lazyInit</span><span class="op" id="4976882">(</span><span class="op" id="4976883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4976886">return</span>&nbsp;<span class="ident" id="4976893">l</span><span class="op" id="4976894">.</span><span class="ident" id="4976895">insertValue</span><span class="op" id="4976906">(</span><span class="ident" id="4976907">v</span><span class="op" id="4976908">,</span>&nbsp;<span class="op" id="4976910">&amp;</span><span class="ident" id="4976911">l</span><span class="op" id="4976912">.</span><span class="ident" id="4976913">root</span><span class="op" id="4976917">)</span><br>
<span class="lineno"></span><span class="op" id="4976919">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4976922">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4977008">func</span>&nbsp;<span class="op" id="4977013">(</span><span class="ident" id="4977014">l</span>&nbsp;<span class="op" id="4977016">*</span><span class="ident" id="4977017">List</span><span class="op" id="4977021">)</span>&nbsp;<span class="ident" id="4977023">PushBack</span><span class="op" id="4977031">(</span><span class="ident" id="4977032">v</span>&nbsp;<span class="keyword" id="4977034">interface</span><span class="op" id="4977043">{</span><span class="op" id="4977044">}</span><span class="op" id="4977045">)</span>&nbsp;<span class="op" id="4977047">*</span><span class="ident" id="4977048">Element</span>&nbsp;<span class="op" id="4977056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4977059">l</span><span class="op" id="4977060">.</span><span class="ident" id="4977061">lazyInit</span><span class="op" id="4977069">(</span><span class="op" id="4977070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977073">return</span>&nbsp;<span class="ident" id="4977080">l</span><span class="op" id="4977081">.</span><span class="ident" id="4977082">insertValue</span><span class="op" id="4977093">(</span><span class="ident" id="4977094">v</span><span class="op" id="4977095">,</span>&nbsp;<span class="ident" id="4977097">l</span><span class="op" id="4977098">.</span><span class="ident" id="4977099">root</span><span class="op" id="4977103">.</span><span class="ident" id="4977104">prev</span><span class="op" id="4977108">)</span><br>
<span class="lineno">140</span><span class="op" id="4977110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4977113">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4977205">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4977266">func</span>&nbsp;<span class="op" id="4977271">(</span><span class="ident" id="4977272">l</span>&nbsp;<span class="op" id="4977274">*</span><span class="ident" id="4977275">List</span><span class="op" id="4977279">)</span>&nbsp;<span class="ident" id="4977281">InsertBefore</span><span class="op" id="4977293">(</span><span class="ident" id="4977294">v</span>&nbsp;<span class="keyword" id="4977296">interface</span><span class="op" id="4977305">{</span><span class="op" id="4977306">}</span><span class="op" id="4977307">,</span>&nbsp;<span class="ident" id="4977309">mark</span>&nbsp;<span class="op" id="4977314">*</span><span class="ident" id="4977315">Element</span><span class="op" id="4977322">)</span>&nbsp;<span class="op" id="4977324">*</span><span class="ident" id="4977325">Element</span>&nbsp;<span class="op" id="4977333">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977336">if</span>&nbsp;<span class="ident" id="4977339">mark</span><span class="op" id="4977343">.</span><span class="ident" id="4977344">list</span>&nbsp;<span class="op" id="4977349">!=</span>&nbsp;<span class="ident" id="4977352">l</span>&nbsp;<span class="op" id="4977354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977358">return</span>&nbsp;<span class="ident" id="4977365">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4977370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4977373">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977430">return</span>&nbsp;<span class="ident" id="4977437">l</span><span class="op" id="4977438">.</span><span class="ident" id="4977439">insertValue</span><span class="op" id="4977450">(</span><span class="ident" id="4977451">v</span><span class="op" id="4977452">,</span>&nbsp;<span class="ident" id="4977454">mark</span><span class="op" id="4977458">.</span><span class="ident" id="4977459">prev</span><span class="op" id="4977463">)</span><br>
<span class="lineno">150</span><span class="op" id="4977465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4977468">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4977558">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4977619">func</span>&nbsp;<span class="op" id="4977624">(</span><span class="ident" id="4977625">l</span>&nbsp;<span class="op" id="4977627">*</span><span class="ident" id="4977628">List</span><span class="op" id="4977632">)</span>&nbsp;<span class="ident" id="4977634">InsertAfter</span><span class="op" id="4977645">(</span><span class="ident" id="4977646">v</span>&nbsp;<span class="keyword" id="4977648">interface</span><span class="op" id="4977657">{</span><span class="op" id="4977658">}</span><span class="op" id="4977659">,</span>&nbsp;<span class="ident" id="4977661">mark</span>&nbsp;<span class="op" id="4977666">*</span><span class="ident" id="4977667">Element</span><span class="op" id="4977674">)</span>&nbsp;<span class="op" id="4977676">*</span><span class="ident" id="4977677">Element</span>&nbsp;<span class="op" id="4977685">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977688">if</span>&nbsp;<span class="ident" id="4977691">mark</span><span class="op" id="4977695">.</span><span class="ident" id="4977696">list</span>&nbsp;<span class="op" id="4977701">!=</span>&nbsp;<span class="ident" id="4977704">l</span>&nbsp;<span class="op" id="4977706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977710">return</span>&nbsp;<span class="ident" id="4977717">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4977722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4977725">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977782">return</span>&nbsp;<span class="ident" id="4977789">l</span><span class="op" id="4977790">.</span><span class="ident" id="4977791">insertValue</span><span class="op" id="4977802">(</span><span class="ident" id="4977803">v</span><span class="op" id="4977804">,</span>&nbsp;<span class="ident" id="4977806">mark</span><span class="op" id="4977810">)</span><br>
<span class="lineno">160</span><span class="op" id="4977812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4977815">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4977870">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4977928">func</span>&nbsp;<span class="op" id="4977933">(</span><span class="ident" id="4977934">l</span>&nbsp;<span class="op" id="4977936">*</span><span class="ident" id="4977937">List</span><span class="op" id="4977941">)</span>&nbsp;<span class="ident" id="4977943">MoveToFront</span><span class="op" id="4977954">(</span><span class="ident" id="4977955">e</span>&nbsp;<span class="op" id="4977957">*</span><span class="ident" id="4977958">Element</span><span class="op" id="4977965">)</span>&nbsp;<span class="op" id="4977967">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4977970">if</span>&nbsp;<span class="ident" id="4977973">e</span><span class="op" id="4977974">.</span><span class="ident" id="4977975">list</span>&nbsp;<span class="op" id="4977980">!=</span>&nbsp;<span class="ident" id="4977983">l</span>&nbsp;<span class="op" id="4977985">||</span>&nbsp;<span class="ident" id="4977988">l</span><span class="op" id="4977989">.</span><span class="ident" id="4977990">root</span><span class="op" id="4977994">.</span><span class="ident" id="4977995">next</span>&nbsp;<span class="op" id="4978000">==</span>&nbsp;<span class="ident" id="4978003">e</span>&nbsp;<span class="op" id="4978005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978009">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4978017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4978020">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978077">l</span><span class="op" id="4978078">.</span><span class="ident" id="4978079">insert</span><span class="op" id="4978085">(</span><span class="ident" id="4978086">l</span><span class="op" id="4978087">.</span><span class="ident" id="4978088">remove</span><span class="op" id="4978094">(</span><span class="ident" id="4978095">e</span><span class="op" id="4978096">)</span><span class="op" id="4978097">,</span>&nbsp;<span class="op" id="4978099">&amp;</span><span class="ident" id="4978100">l</span><span class="op" id="4978101">.</span><span class="ident" id="4978102">root</span><span class="op" id="4978106">)</span><br>
<span class="lineno">170</span><span class="op" id="4978108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4978111">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4978164">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4978222">func</span>&nbsp;<span class="op" id="4978227">(</span><span class="ident" id="4978228">l</span>&nbsp;<span class="op" id="4978230">*</span><span class="ident" id="4978231">List</span><span class="op" id="4978235">)</span>&nbsp;<span class="ident" id="4978237">MoveToBack</span><span class="op" id="4978247">(</span><span class="ident" id="4978248">e</span>&nbsp;<span class="op" id="4978250">*</span><span class="ident" id="4978251">Element</span><span class="op" id="4978258">)</span>&nbsp;<span class="op" id="4978260">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978263">if</span>&nbsp;<span class="ident" id="4978266">e</span><span class="op" id="4978267">.</span><span class="ident" id="4978268">list</span>&nbsp;<span class="op" id="4978273">!=</span>&nbsp;<span class="ident" id="4978276">l</span>&nbsp;<span class="op" id="4978278">||</span>&nbsp;<span class="ident" id="4978281">l</span><span class="op" id="4978282">.</span><span class="ident" id="4978283">root</span><span class="op" id="4978287">.</span><span class="ident" id="4978288">prev</span>&nbsp;<span class="op" id="4978293">==</span>&nbsp;<span class="ident" id="4978296">e</span>&nbsp;<span class="op" id="4978298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978302">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4978310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4978313">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978370">l</span><span class="op" id="4978371">.</span><span class="ident" id="4978372">insert</span><span class="op" id="4978378">(</span><span class="ident" id="4978379">l</span><span class="op" id="4978380">.</span><span class="ident" id="4978381">remove</span><span class="op" id="4978387">(</span><span class="ident" id="4978388">e</span><span class="op" id="4978389">)</span><span class="op" id="4978390">,</span>&nbsp;<span class="ident" id="4978392">l</span><span class="op" id="4978393">.</span><span class="ident" id="4978394">root</span><span class="op" id="4978398">.</span><span class="ident" id="4978399">prev</span><span class="op" id="4978403">)</span><br>
<span class="lineno">180</span><span class="op" id="4978405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4978408">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4978471">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4978551">func</span>&nbsp;<span class="op" id="4978556">(</span><span class="ident" id="4978557">l</span>&nbsp;<span class="op" id="4978559">*</span><span class="ident" id="4978560">List</span><span class="op" id="4978564">)</span>&nbsp;<span class="ident" id="4978566">MoveBefore</span><span class="op" id="4978576">(</span><span class="ident" id="4978577">e</span><span class="op" id="4978578">,</span>&nbsp;<span class="ident" id="4978580">mark</span>&nbsp;<span class="op" id="4978585">*</span><span class="ident" id="4978586">Element</span><span class="op" id="4978593">)</span>&nbsp;<span class="op" id="4978595">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978598">if</span>&nbsp;<span class="ident" id="4978601">e</span><span class="op" id="4978602">.</span><span class="ident" id="4978603">list</span>&nbsp;<span class="op" id="4978608">!=</span>&nbsp;<span class="ident" id="4978611">l</span>&nbsp;<span class="op" id="4978613">||</span>&nbsp;<span class="ident" id="4978616">e</span>&nbsp;<span class="op" id="4978618">==</span>&nbsp;<span class="ident" id="4978621">mark</span>&nbsp;<span class="op" id="4978626">||</span>&nbsp;<span class="ident" id="4978629">mark</span><span class="op" id="4978633">.</span><span class="ident" id="4978634">list</span>&nbsp;<span class="op" id="4978639">!=</span>&nbsp;<span class="ident" id="4978642">l</span>&nbsp;<span class="op" id="4978644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978648">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4978656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978659">l</span><span class="op" id="4978660">.</span><span class="ident" id="4978661">insert</span><span class="op" id="4978667">(</span><span class="ident" id="4978668">l</span><span class="op" id="4978669">.</span><span class="ident" id="4978670">remove</span><span class="op" id="4978676">(</span><span class="ident" id="4978677">e</span><span class="op" id="4978678">)</span><span class="op" id="4978679">,</span>&nbsp;<span class="ident" id="4978681">mark</span><span class="op" id="4978685">.</span><span class="ident" id="4978686">prev</span><span class="op" id="4978690">)</span><br>
<span class="lineno"></span><span class="op" id="4978692">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4978695">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4978756">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4978836">func</span>&nbsp;<span class="op" id="4978841">(</span><span class="ident" id="4978842">l</span>&nbsp;<span class="op" id="4978844">*</span><span class="ident" id="4978845">List</span><span class="op" id="4978849">)</span>&nbsp;<span class="ident" id="4978851">MoveAfter</span><span class="op" id="4978860">(</span><span class="ident" id="4978861">e</span><span class="op" id="4978862">,</span>&nbsp;<span class="ident" id="4978864">mark</span>&nbsp;<span class="op" id="4978869">*</span><span class="ident" id="4978870">Element</span><span class="op" id="4978877">)</span>&nbsp;<span class="op" id="4978879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978882">if</span>&nbsp;<span class="ident" id="4978885">e</span><span class="op" id="4978886">.</span><span class="ident" id="4978887">list</span>&nbsp;<span class="op" id="4978892">!=</span>&nbsp;<span class="ident" id="4978895">l</span>&nbsp;<span class="op" id="4978897">||</span>&nbsp;<span class="ident" id="4978900">e</span>&nbsp;<span class="op" id="4978902">==</span>&nbsp;<span class="ident" id="4978905">mark</span>&nbsp;<span class="op" id="4978910">||</span>&nbsp;<span class="ident" id="4978913">mark</span><span class="op" id="4978917">.</span><span class="ident" id="4978918">list</span>&nbsp;<span class="op" id="4978923">!=</span>&nbsp;<span class="ident" id="4978926">l</span>&nbsp;<span class="op" id="4978928">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4978932">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4978940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978943">l</span><span class="op" id="4978944">.</span><span class="ident" id="4978945">insert</span><span class="op" id="4978951">(</span><span class="ident" id="4978952">l</span><span class="op" id="4978953">.</span><span class="ident" id="4978954">remove</span><span class="op" id="4978960">(</span><span class="ident" id="4978961">e</span><span class="op" id="4978962">)</span><span class="op" id="4978963">,</span>&nbsp;<span class="ident" id="4978965">mark</span><span class="op" id="4978969">)</span><br>
<span class="lineno"></span><span class="op" id="4978971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4978974">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4979045">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4979087">func</span>&nbsp;<span class="op" id="4979092">(</span><span class="ident" id="4979093">l</span>&nbsp;<span class="op" id="4979095">*</span><span class="ident" id="4979096">List</span><span class="op" id="4979100">)</span>&nbsp;<span class="ident" id="4979102">PushBackList</span><span class="op" id="4979114">(</span><span class="ident" id="4979115">other</span>&nbsp;<span class="op" id="4979121">*</span><span class="ident" id="4979122">List</span><span class="op" id="4979126">)</span>&nbsp;<span class="op" id="4979128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979131">l</span><span class="op" id="4979132">.</span><span class="ident" id="4979133">lazyInit</span><span class="op" id="4979141">(</span><span class="op" id="4979142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979145">for</span>&nbsp;<span class="ident" id="4979149">i</span><span class="op" id="4979150">,</span>&nbsp;<span class="ident" id="4979152">e</span>&nbsp;<span class="op" id="4979154">:=</span>&nbsp;<span class="ident" id="4979157">other</span><span class="op" id="4979162">.</span><span class="ident" id="4979163">Len</span><span class="op" id="4979166">(</span><span class="op" id="4979167">)</span><span class="op" id="4979168">,</span>&nbsp;<span class="ident" id="4979170">other</span><span class="op" id="4979175">.</span><span class="ident" id="4979176">Front</span><span class="op" id="4979181">(</span><span class="op" id="4979182">)</span><span class="op" id="4979183">;</span>&nbsp;<span class="ident" id="4979185">i</span>&nbsp;<span class="op" id="4979187">&gt;</span>&nbsp;<span class="num" id="4979189">0</span><span class="op" id="4979190">;</span>&nbsp;<span class="ident" id="4979192">i</span><span class="op" id="4979193">,</span>&nbsp;<span class="ident" id="4979195">e</span>&nbsp;<span class="op" id="4979197">=</span>&nbsp;<span class="ident" id="4979199">i</span><span class="op" id="4979200">-</span><span class="num" id="4979201">1</span><span class="op" id="4979202">,</span>&nbsp;<span class="ident" id="4979204">e</span><span class="op" id="4979205">.</span><span class="ident" id="4979206">Next</span><span class="op" id="4979210">(</span><span class="op" id="4979211">)</span>&nbsp;<span class="op" id="4979213">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979217">l</span><span class="op" id="4979218">.</span><span class="ident" id="4979219">insertValue</span><span class="op" id="4979230">(</span><span class="ident" id="4979231">e</span><span class="op" id="4979232">.</span><span class="ident" id="4979233">Value</span><span class="op" id="4979238">,</span>&nbsp;<span class="ident" id="4979240">l</span><span class="op" id="4979241">.</span><span class="ident" id="4979242">root</span><span class="op" id="4979246">.</span><span class="ident" id="4979247">prev</span><span class="op" id="4979251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4979254">}</span><br>
<span class="lineno"></span><span class="op" id="4979256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4979259">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4979332">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4979374">func</span>&nbsp;<span class="op" id="4979379">(</span><span class="ident" id="4979380">l</span>&nbsp;<span class="op" id="4979382">*</span><span class="ident" id="4979383">List</span><span class="op" id="4979387">)</span>&nbsp;<span class="ident" id="4979389">PushFrontList</span><span class="op" id="4979402">(</span><span class="ident" id="4979403">other</span>&nbsp;<span class="op" id="4979409">*</span><span class="ident" id="4979410">List</span><span class="op" id="4979414">)</span>&nbsp;<span class="op" id="4979416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979419">l</span><span class="op" id="4979420">.</span><span class="ident" id="4979421">lazyInit</span><span class="op" id="4979429">(</span><span class="op" id="4979430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979433">for</span>&nbsp;<span class="ident" id="4979437">i</span><span class="op" id="4979438">,</span>&nbsp;<span class="ident" id="4979440">e</span>&nbsp;<span class="op" id="4979442">:=</span>&nbsp;<span class="ident" id="4979445">other</span><span class="op" id="4979450">.</span><span class="ident" id="4979451">Len</span><span class="op" id="4979454">(</span><span class="op" id="4979455">)</span><span class="op" id="4979456">,</span>&nbsp;<span class="ident" id="4979458">other</span><span class="op" id="4979463">.</span><span class="ident" id="4979464">Back</span><span class="op" id="4979468">(</span><span class="op" id="4979469">)</span><span class="op" id="4979470">;</span>&nbsp;<span class="ident" id="4979472">i</span>&nbsp;<span class="op" id="4979474">&gt;</span>&nbsp;<span class="num" id="4979476">0</span><span class="op" id="4979477">;</span>&nbsp;<span class="ident" id="4979479">i</span><span class="op" id="4979480">,</span>&nbsp;<span class="ident" id="4979482">e</span>&nbsp;<span class="op" id="4979484">=</span>&nbsp;<span class="ident" id="4979486">i</span><span class="op" id="4979487">-</span><span class="num" id="4979488">1</span><span class="op" id="4979489">,</span>&nbsp;<span class="ident" id="4979491">e</span><span class="op" id="4979492">.</span><span class="ident" id="4979493">Prev</span><span class="op" id="4979497">(</span><span class="op" id="4979498">)</span>&nbsp;<span class="op" id="4979500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979504">l</span><span class="op" id="4979505">.</span><span class="ident" id="4979506">insertValue</span><span class="op" id="4979517">(</span><span class="ident" id="4979518">e</span><span class="op" id="4979519">.</span><span class="ident" id="4979520">Value</span><span class="op" id="4979525">,</span>&nbsp;<span class="op" id="4979527">&amp;</span><span class="ident" id="4979528">l</span><span class="op" id="4979529">.</span><span class="ident" id="4979530">root</span><span class="op" id="4979534">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4979537">}</span><br>
<span class="lineno"></span><span class="op" id="4979539">}</span>
</div>
</body>
</html>
