<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3822336">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3822391">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3822445">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3822496">package</span>&nbsp;<span class="ident" id="3822504">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3822515">import</span>&nbsp;<span class="op" id="3822522">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822525">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822534">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822544">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822550">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822563">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3822580">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3822585">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3822588">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3822664">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3822711">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3822775">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3822816">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3822879">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3822928">func</span>&nbsp;<span class="op" id="3822933">(</span><span class="ident" id="3822934">r</span>&nbsp;<span class="op" id="3822936">*</span><span class="ident" id="3822937">Reader</span><span class="op" id="3822943">)</span>&nbsp;<span class="ident" id="3822945">ReadForm</span><span class="op" id="3822953">(</span><span class="ident" id="3822954">maxMemory</span>&nbsp;<span class="ident" id="3822964">int64</span><span class="op" id="3822969">)</span>&nbsp;<span class="op" id="3822971">(</span><span class="ident" id="3822972">f</span>&nbsp;<span class="op" id="3822974">*</span><span class="ident" id="3822975">Form</span><span class="op" id="3822979">,</span>&nbsp;<span class="ident" id="3822981">err</span>&nbsp;<span class="builtintype" id="3822985">error</span><span class="op" id="3822990">)</span>&nbsp;<span class="op" id="3822992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3822995">form</span>&nbsp;<span class="op" id="3823000">:=</span>&nbsp;<span class="op" id="3823003">&amp;</span><span class="ident" id="3823004">Form</span><span class="op" id="3823008">{</span><span class="builtinfunc" id="3823009">make</span><span class="op" id="3823013">(</span><span class="keyword" id="3823014">map</span><span class="op" id="3823017">[</span><span class="builtintype" id="3823018">string</span><span class="op" id="3823024">]</span><span class="op" id="3823025">[</span><span class="op" id="3823026">]</span><span class="builtintype" id="3823027">string</span><span class="op" id="3823033">)</span><span class="op" id="3823034">,</span>&nbsp;<span class="builtinfunc" id="3823036">make</span><span class="op" id="3823040">(</span><span class="keyword" id="3823041">map</span><span class="op" id="3823044">[</span><span class="builtintype" id="3823045">string</span><span class="op" id="3823051">]</span><span class="op" id="3823052">[</span><span class="op" id="3823053">]</span><span class="op" id="3823054">*</span><span class="ident" id="3823055">FileHeader</span><span class="op" id="3823065">)</span><span class="op" id="3823066">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823069">defer</span>&nbsp;<span class="keyword" id="3823075">func</span><span class="op" id="3823079">(</span><span class="op" id="3823080">)</span>&nbsp;<span class="op" id="3823082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823086">if</span>&nbsp;<span class="ident" id="3823089">err</span>&nbsp;<span class="op" id="3823093">!=</span>&nbsp;<span class="ident" id="3823096">nil</span>&nbsp;<span class="op" id="3823100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823105">form</span><span class="op" id="3823109">.</span><span class="ident" id="3823110">RemoveAll</span><span class="op" id="3823119">(</span><span class="op" id="3823120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823127">}</span><span class="op" id="3823128">(</span><span class="op" id="3823129">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823133">maxValueBytes</span>&nbsp;<span class="op" id="3823147">:=</span>&nbsp;<span class="ident" id="3823150">int64</span><span class="op" id="3823155">(</span><span class="num" id="3823156">10</span>&nbsp;<span class="op" id="3823159">&lt;&lt;</span>&nbsp;<span class="num" id="3823162">20</span><span class="op" id="3823164">)</span>&nbsp;<span class="comment" id="3823166">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823194">for</span>&nbsp;<span class="op" id="3823198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823202">p</span><span class="op" id="3823203">,</span>&nbsp;<span class="ident" id="3823205">err</span>&nbsp;<span class="op" id="3823209">:=</span>&nbsp;<span class="ident" id="3823212">r</span><span class="op" id="3823213">.</span><span class="ident" id="3823214">NextPart</span><span class="op" id="3823222">(</span><span class="op" id="3823223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823227">if</span>&nbsp;<span class="ident" id="3823230">err</span>&nbsp;<span class="op" id="3823234">==</span>&nbsp;<span class="ident" id="3823237">io</span><span class="op" id="3823239">.</span><span class="ident" id="3823240">EOF</span>&nbsp;<span class="op" id="3823244">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823249">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823261">if</span>&nbsp;<span class="ident" id="3823264">err</span>&nbsp;<span class="op" id="3823268">!=</span>&nbsp;<span class="ident" id="3823271">nil</span>&nbsp;<span class="op" id="3823275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823280">return</span>&nbsp;<span class="ident" id="3823287">nil</span><span class="op" id="3823290">,</span>&nbsp;<span class="ident" id="3823292">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823298">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823303">name</span>&nbsp;<span class="op" id="3823308">:=</span>&nbsp;<span class="ident" id="3823311">p</span><span class="op" id="3823312">.</span><span class="ident" id="3823313">FormName</span><span class="op" id="3823321">(</span><span class="op" id="3823322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823326">if</span>&nbsp;<span class="ident" id="3823329">name</span>&nbsp;<span class="op" id="3823334">==</span>&nbsp;<span class="string" id="3823337">&#34;&#34;</span>&nbsp;<span class="op" id="3823340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823345">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823356">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823360">filename</span>&nbsp;<span class="op" id="3823369">:=</span>&nbsp;<span class="ident" id="3823372">p</span><span class="op" id="3823373">.</span><span class="ident" id="3823374">FileName</span><span class="op" id="3823382">(</span><span class="op" id="3823383">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823388">var</span>&nbsp;<span class="ident" id="3823392">b</span>&nbsp;<span class="ident" id="3823394">bytes</span><span class="op" id="3823399">.</span><span class="ident" id="3823400">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823410">if</span>&nbsp;<span class="ident" id="3823413">filename</span>&nbsp;<span class="op" id="3823422">==</span>&nbsp;<span class="string" id="3823425">&#34;&#34;</span>&nbsp;<span class="op" id="3823428">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3823433">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823472">n</span><span class="op" id="3823473">,</span>&nbsp;<span class="ident" id="3823475">err</span>&nbsp;<span class="op" id="3823479">:=</span>&nbsp;<span class="ident" id="3823482">io</span><span class="op" id="3823484">.</span><span class="ident" id="3823485">CopyN</span><span class="op" id="3823490">(</span><span class="op" id="3823491">&amp;</span><span class="ident" id="3823492">b</span><span class="op" id="3823493">,</span>&nbsp;<span class="ident" id="3823495">p</span><span class="op" id="3823496">,</span>&nbsp;<span class="ident" id="3823498">maxValueBytes</span><span class="op" id="3823511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823516">if</span>&nbsp;<span class="ident" id="3823519">err</span>&nbsp;<span class="op" id="3823523">!=</span>&nbsp;<span class="ident" id="3823526">nil</span>&nbsp;<span class="op" id="3823530">&amp;&amp;</span>&nbsp;<span class="ident" id="3823533">err</span>&nbsp;<span class="op" id="3823537">!=</span>&nbsp;<span class="ident" id="3823540">io</span><span class="op" id="3823542">.</span><span class="ident" id="3823543">EOF</span>&nbsp;<span class="op" id="3823547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823553">return</span>&nbsp;<span class="ident" id="3823560">nil</span><span class="op" id="3823563">,</span>&nbsp;<span class="ident" id="3823565">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823572">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823577">maxValueBytes</span>&nbsp;<span class="op" id="3823591">-=</span>&nbsp;<span class="ident" id="3823594">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823599">if</span>&nbsp;<span class="ident" id="3823602">maxValueBytes</span>&nbsp;<span class="op" id="3823616">==</span>&nbsp;<span class="num" id="3823619">0</span>&nbsp;<span class="op" id="3823621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823627">return</span>&nbsp;<span class="ident" id="3823634">nil</span><span class="op" id="3823637">,</span>&nbsp;<span class="ident" id="3823639">errors</span><span class="op" id="3823645">.</span><span class="ident" id="3823646">New</span><span class="op" id="3823649">(</span><span class="string" id="3823650">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3823680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823690">form</span><span class="op" id="3823694">.</span><span class="ident" id="3823695">Value</span><span class="op" id="3823700">[</span><span class="ident" id="3823701">name</span><span class="op" id="3823705">]</span>&nbsp;<span class="op" id="3823707">=</span>&nbsp;<span class="builtinfunc" id="3823709">append</span><span class="op" id="3823715">(</span><span class="ident" id="3823716">form</span><span class="op" id="3823720">.</span><span class="ident" id="3823721">Value</span><span class="op" id="3823726">[</span><span class="ident" id="3823727">name</span><span class="op" id="3823731">]</span><span class="op" id="3823732">,</span>&nbsp;<span class="ident" id="3823734">b</span><span class="op" id="3823735">.</span><span class="ident" id="3823736">String</span><span class="op" id="3823742">(</span><span class="op" id="3823743">)</span><span class="op" id="3823744">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823749">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3823765">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823803">fh</span>&nbsp;<span class="op" id="3823806">:=</span>&nbsp;<span class="op" id="3823809">&amp;</span><span class="ident" id="3823810">FileHeader</span><span class="op" id="3823820">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823825">Filename</span><span class="op" id="3823833">:</span>&nbsp;<span class="ident" id="3823835">filename</span><span class="op" id="3823843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823848">Header</span><span class="op" id="3823854">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3823858">p</span><span class="op" id="3823859">.</span><span class="ident" id="3823860">Header</span><span class="op" id="3823866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3823874">n</span><span class="op" id="3823875">,</span>&nbsp;<span class="ident" id="3823877">err</span>&nbsp;<span class="op" id="3823881">:=</span>&nbsp;<span class="ident" id="3823884">io</span><span class="op" id="3823886">.</span><span class="ident" id="3823887">CopyN</span><span class="op" id="3823892">(</span><span class="op" id="3823893">&amp;</span><span class="ident" id="3823894">b</span><span class="op" id="3823895">,</span>&nbsp;<span class="ident" id="3823897">p</span><span class="op" id="3823898">,</span>&nbsp;<span class="ident" id="3823900">maxMemory</span><span class="op" id="3823909">+</span><span class="num" id="3823910">1</span><span class="op" id="3823911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823915">if</span>&nbsp;<span class="ident" id="3823918">err</span>&nbsp;<span class="op" id="3823922">!=</span>&nbsp;<span class="ident" id="3823925">nil</span>&nbsp;<span class="op" id="3823929">&amp;&amp;</span>&nbsp;<span class="ident" id="3823932">err</span>&nbsp;<span class="op" id="3823936">!=</span>&nbsp;<span class="ident" id="3823939">io</span><span class="op" id="3823941">.</span><span class="ident" id="3823942">EOF</span>&nbsp;<span class="op" id="3823946">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823951">return</span>&nbsp;<span class="ident" id="3823958">nil</span><span class="op" id="3823961">,</span>&nbsp;<span class="ident" id="3823963">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3823969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3823973">if</span>&nbsp;<span class="ident" id="3823976">n</span>&nbsp;<span class="op" id="3823978">&gt;</span>&nbsp;<span class="ident" id="3823980">maxMemory</span>&nbsp;<span class="op" id="3823990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3823995">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824041">file</span><span class="op" id="3824045">,</span>&nbsp;<span class="ident" id="3824047">err</span>&nbsp;<span class="op" id="3824051">:=</span>&nbsp;<span class="ident" id="3824054">ioutil</span><span class="op" id="3824060">.</span><span class="ident" id="3824061">TempFile</span><span class="op" id="3824069">(</span><span class="string" id="3824070">&#34;&#34;</span><span class="op" id="3824072">,</span>&nbsp;<span class="string" id="3824074">&#34;multipart-&#34;</span><span class="op" id="3824086">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824091">if</span>&nbsp;<span class="ident" id="3824094">err</span>&nbsp;<span class="op" id="3824098">!=</span>&nbsp;<span class="ident" id="3824101">nil</span>&nbsp;<span class="op" id="3824105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824111">return</span>&nbsp;<span class="ident" id="3824118">nil</span><span class="op" id="3824121">,</span>&nbsp;<span class="ident" id="3824123">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3824130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824135">defer</span>&nbsp;<span class="ident" id="3824141">file</span><span class="op" id="3824145">.</span><span class="ident" id="3824146">Close</span><span class="op" id="3824151">(</span><span class="op" id="3824152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824157">_</span><span class="op" id="3824158">,</span>&nbsp;<span class="ident" id="3824160">err</span>&nbsp;<span class="op" id="3824164">=</span>&nbsp;<span class="ident" id="3824166">io</span><span class="op" id="3824168">.</span><span class="ident" id="3824169">Copy</span><span class="op" id="3824173">(</span><span class="ident" id="3824174">file</span><span class="op" id="3824178">,</span>&nbsp;<span class="ident" id="3824180">io</span><span class="op" id="3824182">.</span><span class="ident" id="3824183">MultiReader</span><span class="op" id="3824194">(</span><span class="op" id="3824195">&amp;</span><span class="ident" id="3824196">b</span><span class="op" id="3824197">,</span>&nbsp;<span class="ident" id="3824199">p</span><span class="op" id="3824200">)</span><span class="op" id="3824201">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824206">if</span>&nbsp;<span class="ident" id="3824209">err</span>&nbsp;<span class="op" id="3824213">!=</span>&nbsp;<span class="ident" id="3824216">nil</span>&nbsp;<span class="op" id="3824220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824226">os</span><span class="op" id="3824228">.</span><span class="ident" id="3824229">Remove</span><span class="op" id="3824235">(</span><span class="ident" id="3824236">file</span><span class="op" id="3824240">.</span><span class="ident" id="3824241">Name</span><span class="op" id="3824245">(</span><span class="op" id="3824246">)</span><span class="op" id="3824247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824253">return</span>&nbsp;<span class="ident" id="3824260">nil</span><span class="op" id="3824263">,</span>&nbsp;<span class="ident" id="3824265">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3824272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824277">fh</span><span class="op" id="3824279">.</span><span class="ident" id="3824280">tmpfile</span>&nbsp;<span class="op" id="3824288">=</span>&nbsp;<span class="ident" id="3824290">file</span><span class="op" id="3824294">.</span><span class="ident" id="3824295">Name</span><span class="op" id="3824299">(</span><span class="op" id="3824300">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3824304">}</span>&nbsp;<span class="keyword" id="3824306">else</span>&nbsp;<span class="op" id="3824311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824316">fh</span><span class="op" id="3824318">.</span><span class="ident" id="3824319">content</span>&nbsp;<span class="op" id="3824327">=</span>&nbsp;<span class="ident" id="3824329">b</span><span class="op" id="3824330">.</span><span class="ident" id="3824331">Bytes</span><span class="op" id="3824336">(</span><span class="op" id="3824337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824342">maxMemory</span>&nbsp;<span class="op" id="3824352">-=</span>&nbsp;<span class="ident" id="3824355">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3824359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824363">form</span><span class="op" id="3824367">.</span><span class="ident" id="3824368">File</span><span class="op" id="3824372">[</span><span class="ident" id="3824373">name</span><span class="op" id="3824377">]</span>&nbsp;<span class="op" id="3824379">=</span>&nbsp;<span class="builtinfunc" id="3824381">append</span><span class="op" id="3824387">(</span><span class="ident" id="3824388">form</span><span class="op" id="3824392">.</span><span class="ident" id="3824393">File</span><span class="op" id="3824397">[</span><span class="ident" id="3824398">name</span><span class="op" id="3824402">]</span><span class="op" id="3824403">,</span>&nbsp;<span class="ident" id="3824405">fh</span><span class="op" id="3824407">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3824410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824414">return</span>&nbsp;<span class="ident" id="3824421">form</span><span class="op" id="3824425">,</span>&nbsp;<span class="ident" id="3824427">nil</span><br>
<span class="lineno"></span><span class="op" id="3824431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3824434">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3824470">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3824528">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3824585">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3824627">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3824660">type</span>&nbsp;<span class="ident" id="3824665">Form</span>&nbsp;<span class="keyword" id="3824670">struct</span>&nbsp;<span class="op" id="3824677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824680">Value</span>&nbsp;<span class="keyword" id="3824686">map</span><span class="op" id="3824689">[</span><span class="builtintype" id="3824690">string</span><span class="op" id="3824696">]</span><span class="op" id="3824697">[</span><span class="op" id="3824698">]</span><span class="builtintype" id="3824699">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824707">File</span>&nbsp;&nbsp;<span class="keyword" id="3824713">map</span><span class="op" id="3824716">[</span><span class="builtintype" id="3824717">string</span><span class="op" id="3824723">]</span><span class="op" id="3824724">[</span><span class="op" id="3824725">]</span><span class="op" id="3824726">*</span><span class="ident" id="3824727">FileHeader</span><br>
<span class="lineno"></span><span class="op" id="3824738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3824741">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3824806">func</span>&nbsp;<span class="op" id="3824811">(</span><span class="ident" id="3824812">f</span>&nbsp;<span class="op" id="3824814">*</span><span class="ident" id="3824815">Form</span><span class="op" id="3824819">)</span>&nbsp;<span class="ident" id="3824821">RemoveAll</span><span class="op" id="3824830">(</span><span class="op" id="3824831">)</span>&nbsp;<span class="builtintype" id="3824833">error</span>&nbsp;<span class="op" id="3824839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824842">var</span>&nbsp;<span class="ident" id="3824846">err</span>&nbsp;<span class="builtintype" id="3824850">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824857">for</span>&nbsp;<span class="ident" id="3824861">_</span><span class="op" id="3824862">,</span>&nbsp;<span class="ident" id="3824864">fhs</span>&nbsp;<span class="op" id="3824868">:=</span>&nbsp;<span class="keyword" id="3824871">range</span>&nbsp;<span class="ident" id="3824877">f</span><span class="op" id="3824878">.</span><span class="ident" id="3824879">File</span>&nbsp;<span class="op" id="3824884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824888">for</span>&nbsp;<span class="ident" id="3824892">_</span><span class="op" id="3824893">,</span>&nbsp;<span class="ident" id="3824895">fh</span>&nbsp;<span class="op" id="3824898">:=</span>&nbsp;<span class="keyword" id="3824901">range</span>&nbsp;<span class="ident" id="3824907">fhs</span>&nbsp;<span class="op" id="3824911">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824916">if</span>&nbsp;<span class="ident" id="3824919">fh</span><span class="op" id="3824921">.</span><span class="ident" id="3824922">tmpfile</span>&nbsp;<span class="op" id="3824930">!=</span>&nbsp;<span class="string" id="3824933">&#34;&#34;</span>&nbsp;<span class="op" id="3824936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3824942">e</span>&nbsp;<span class="op" id="3824944">:=</span>&nbsp;<span class="ident" id="3824947">os</span><span class="op" id="3824949">.</span><span class="ident" id="3824950">Remove</span><span class="op" id="3824956">(</span><span class="ident" id="3824957">fh</span><span class="op" id="3824959">.</span><span class="ident" id="3824960">tmpfile</span><span class="op" id="3824967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3824973">if</span>&nbsp;<span class="ident" id="3824976">e</span>&nbsp;<span class="op" id="3824978">!=</span>&nbsp;<span class="ident" id="3824981">nil</span>&nbsp;<span class="op" id="3824985">&amp;&amp;</span>&nbsp;<span class="ident" id="3824988">err</span>&nbsp;<span class="op" id="3824992">==</span>&nbsp;<span class="ident" id="3824995">nil</span>&nbsp;<span class="op" id="3824999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825006">err</span>&nbsp;<span class="op" id="3825010">=</span>&nbsp;<span class="ident" id="3825012">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825018">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3825033">return</span>&nbsp;<span class="ident" id="3825040">err</span><br>
<span class="lineno"></span><span class="op" id="3825044">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3825047">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3825109">type</span>&nbsp;<span class="ident" id="3825114">FileHeader</span>&nbsp;<span class="keyword" id="3825125">struct</span>&nbsp;<span class="op" id="3825132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825135">Filename</span>&nbsp;<span class="builtintype" id="3825144">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825152">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3825161">textproto</span><span class="op" id="3825170">.</span><span class="ident" id="3825171">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825184">content</span>&nbsp;<span class="op" id="3825192">[</span><span class="op" id="3825193">]</span><span class="builtintype" id="3825194">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825200">tmpfile</span>&nbsp;<span class="builtintype" id="3825208">string</span><br>
<span class="lineno"></span><span class="op" id="3825215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3825218">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3825278">func</span>&nbsp;<span class="op" id="3825283">(</span><span class="ident" id="3825284">fh</span>&nbsp;<span class="op" id="3825287">*</span><span class="ident" id="3825288">FileHeader</span><span class="op" id="3825298">)</span>&nbsp;<span class="ident" id="3825300">Open</span><span class="op" id="3825304">(</span><span class="op" id="3825305">)</span>&nbsp;<span class="op" id="3825307">(</span><span class="ident" id="3825308">File</span><span class="op" id="3825312">,</span>&nbsp;<span class="builtintype" id="3825314">error</span><span class="op" id="3825319">)</span>&nbsp;<span class="op" id="3825321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3825324">if</span>&nbsp;<span class="ident" id="3825327">b</span>&nbsp;<span class="op" id="3825329">:=</span>&nbsp;<span class="ident" id="3825332">fh</span><span class="op" id="3825334">.</span><span class="ident" id="3825335">content</span><span class="op" id="3825342">;</span>&nbsp;<span class="ident" id="3825344">b</span>&nbsp;<span class="op" id="3825346">!=</span>&nbsp;<span class="ident" id="3825349">nil</span>&nbsp;<span class="op" id="3825353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825357">r</span>&nbsp;<span class="op" id="3825359">:=</span>&nbsp;<span class="ident" id="3825362">io</span><span class="op" id="3825364">.</span><span class="ident" id="3825365">NewSectionReader</span><span class="op" id="3825381">(</span><span class="ident" id="3825382">bytes</span><span class="op" id="3825387">.</span><span class="ident" id="3825388">NewReader</span><span class="op" id="3825397">(</span><span class="ident" id="3825398">b</span><span class="op" id="3825399">)</span><span class="op" id="3825400">,</span>&nbsp;<span class="num" id="3825402">0</span><span class="op" id="3825403">,</span>&nbsp;<span class="ident" id="3825405">int64</span><span class="op" id="3825410">(</span><span class="builtinfunc" id="3825411">len</span><span class="op" id="3825414">(</span><span class="ident" id="3825415">b</span><span class="op" id="3825416">)</span><span class="op" id="3825417">)</span><span class="op" id="3825418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3825422">return</span>&nbsp;<span class="ident" id="3825429">sectionReadCloser</span><span class="op" id="3825446">{</span><span class="ident" id="3825447">r</span><span class="op" id="3825448">}</span><span class="op" id="3825449">,</span>&nbsp;<span class="ident" id="3825451">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3825459">return</span>&nbsp;<span class="ident" id="3825466">os</span><span class="op" id="3825468">.</span><span class="ident" id="3825469">Open</span><span class="op" id="3825473">(</span><span class="ident" id="3825474">fh</span><span class="op" id="3825476">.</span><span class="ident" id="3825477">tmpfile</span><span class="op" id="3825484">)</span><br>
<span class="lineno"></span><span class="op" id="3825486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3825489">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3825561">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3825620">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3825699">type</span>&nbsp;<span class="ident" id="3825704">File</span>&nbsp;<span class="keyword" id="3825709">interface</span>&nbsp;<span class="op" id="3825719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825722">io</span><span class="op" id="3825724">.</span><span class="ident" id="3825725">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825733">io</span><span class="op" id="3825735">.</span><span class="ident" id="3825736">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825746">io</span><span class="op" id="3825748">.</span><span class="ident" id="3825749">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3825757">io</span><span class="op" id="3825759">.</span><span class="ident" id="3825760">Closer</span><br>
<span class="lineno"></span><span class="op" id="3825767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3825770">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3825816">type</span>&nbsp;<span class="ident" id="3825821">sectionReadCloser</span>&nbsp;<span class="keyword" id="3825839">struct</span>&nbsp;<span class="op" id="3825846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3825849">*</span><span class="ident" id="3825850">io</span><span class="op" id="3825852">.</span><span class="ident" id="3825853">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3825867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3825870">func</span>&nbsp;<span class="op" id="3825875">(</span><span class="ident" id="3825876">rc</span>&nbsp;<span class="ident" id="3825879">sectionReadCloser</span><span class="op" id="3825896">)</span>&nbsp;<span class="ident" id="3825898">Close</span><span class="op" id="3825903">(</span><span class="op" id="3825904">)</span>&nbsp;<span class="builtintype" id="3825906">error</span>&nbsp;<span class="op" id="3825912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3825915">return</span>&nbsp;<span class="ident" id="3825922">nil</span><br>
<span class="lineno"></span><span class="op" id="3825926">}</span>
</div>
</body>
</html>
