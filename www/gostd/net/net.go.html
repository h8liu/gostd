<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html" class="current">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3809242">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3809297">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3809351">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3809402">/*<br>
<span class="lineno"></span>Package&nbsp;net&nbsp;provides&nbsp;a&nbsp;portable&nbsp;interface&nbsp;for&nbsp;network&nbsp;I/O,&nbsp;including<br>
<span class="lineno"></span>TCP/IP,&nbsp;UDP,&nbsp;domain&nbsp;name&nbsp;resolution,&nbsp;and&nbsp;Unix&nbsp;domain&nbsp;sockets.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Although&nbsp;the&nbsp;package&nbsp;provides&nbsp;access&nbsp;to&nbsp;low-level&nbsp;networking<br>
<span class="lineno">10</span>primitives,&nbsp;most&nbsp;clients&nbsp;will&nbsp;need&nbsp;only&nbsp;the&nbsp;basic&nbsp;interface&nbsp;provided<br>
<span class="lineno"></span>by&nbsp;the&nbsp;Dial,&nbsp;Listen,&nbsp;and&nbsp;Accept&nbsp;functions&nbsp;and&nbsp;the&nbsp;associated<br>
<span class="lineno"></span>Conn&nbsp;and&nbsp;Listener&nbsp;interfaces.&nbsp;The&nbsp;crypto/tls&nbsp;package&nbsp;uses<br>
<span class="lineno"></span>the&nbsp;same&nbsp;interfaces&nbsp;and&nbsp;similar&nbsp;Dial&nbsp;and&nbsp;Listen&nbsp;functions.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>The&nbsp;Dial&nbsp;function&nbsp;connects&nbsp;to&nbsp;a&nbsp;server:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;net.Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:80&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Fprintf(conn,&nbsp;&#34;GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;status,&nbsp;err&nbsp;:=&nbsp;bufio.NewReader(conn).ReadString(&#39;\n&#39;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
<span class="lineno"></span><br>
<span class="lineno">25</span>The&nbsp;Listen&nbsp;function&nbsp;creates&nbsp;servers:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ln,&nbsp;err&nbsp;:=&nbsp;net.Listen(&#34;tcp&#34;,&nbsp;&#34;:8080&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;ln.Accept()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;handleConnection(conn)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3810305">package</span>&nbsp;<span class="ident" id="3810313">net</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="3810318">//&nbsp;TODO(rsc):</span><br>
<span class="lineno"></span><span class="comment" id="3810332">//&nbsp;&nbsp;&nbsp;&nbsp;support&nbsp;for&nbsp;raw&nbsp;ethernet&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3810369">import</span>&nbsp;<span class="op" id="3810376">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3810379">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3810389">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3810395">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3810401">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3810412">&#34;time&#34;</span><br>
<span class="lineno">50</span><span class="op" id="3810419">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3810422">//&nbsp;Addr&nbsp;represents&nbsp;a&nbsp;network&nbsp;end&nbsp;point&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3810470">type</span>&nbsp;<span class="ident" id="3810475">Addr</span>&nbsp;<span class="keyword" id="3810480">interface</span>&nbsp;<span class="op" id="3810490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3810493">Network</span><span class="op" id="3810500">(</span><span class="op" id="3810501">)</span>&nbsp;<span class="builtintype" id="3810503">string</span>&nbsp;<span class="comment" id="3810510">//&nbsp;name&nbsp;of&nbsp;the&nbsp;network</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3810534">String</span><span class="op" id="3810540">(</span><span class="op" id="3810541">)</span>&nbsp;<span class="builtintype" id="3810543">string</span>&nbsp;&nbsp;<span class="comment" id="3810551">//&nbsp;string&nbsp;form&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span><span class="op" id="3810577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3810580">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;generic&nbsp;stream-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3810637">//</span><br>
<span class="lineno">60</span><span class="comment" id="3810640">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Conn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3810708">type</span>&nbsp;<span class="ident" id="3810713">Conn</span>&nbsp;<span class="keyword" id="3810718">interface</span>&nbsp;<span class="op" id="3810728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3810731">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3810772">//&nbsp;Read&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3810847">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3810914">Read</span><span class="op" id="3810918">(</span><span class="ident" id="3810919">b</span>&nbsp;<span class="op" id="3810921">[</span><span class="op" id="3810922">]</span><span class="builtintype" id="3810923">byte</span><span class="op" id="3810927">)</span>&nbsp;<span class="op" id="3810929">(</span><span class="ident" id="3810930">n</span>&nbsp;<span class="builtintype" id="3810932">int</span><span class="op" id="3810935">,</span>&nbsp;<span class="ident" id="3810937">err</span>&nbsp;<span class="builtintype" id="3810941">error</span><span class="op" id="3810946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3810950">//&nbsp;Write&nbsp;writes&nbsp;data&nbsp;to&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3810991">//&nbsp;Write&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811067">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3811135">Write</span><span class="op" id="3811140">(</span><span class="ident" id="3811141">b</span>&nbsp;<span class="op" id="3811143">[</span><span class="op" id="3811144">]</span><span class="builtintype" id="3811145">byte</span><span class="op" id="3811149">)</span>&nbsp;<span class="op" id="3811151">(</span><span class="ident" id="3811152">n</span>&nbsp;<span class="builtintype" id="3811154">int</span><span class="op" id="3811157">,</span>&nbsp;<span class="ident" id="3811159">err</span>&nbsp;<span class="builtintype" id="3811163">error</span><span class="op" id="3811168">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811172">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811205">//&nbsp;Any&nbsp;blocked&nbsp;Read&nbsp;or&nbsp;Write&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3811283">Close</span><span class="op" id="3811288">(</span><span class="op" id="3811289">)</span>&nbsp;<span class="builtintype" id="3811291">error</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811299">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3811348">LocalAddr</span><span class="op" id="3811357">(</span><span class="op" id="3811358">)</span>&nbsp;<span class="ident" id="3811360">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811367">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3811418">RemoteAddr</span><span class="op" id="3811428">(</span><span class="op" id="3811429">)</span>&nbsp;<span class="ident" id="3811431">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811438">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811499">//&nbsp;with&nbsp;the&nbsp;connection.&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811557">//&nbsp;SetReadDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811599">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811603">//&nbsp;A&nbsp;deadline&nbsp;is&nbsp;an&nbsp;absolute&nbsp;time&nbsp;after&nbsp;which&nbsp;I/O&nbsp;operations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811665">//&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811717">//&nbsp;blocking.&nbsp;The&nbsp;deadline&nbsp;applies&nbsp;to&nbsp;all&nbsp;future&nbsp;I/O,&nbsp;not&nbsp;just</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811780">//&nbsp;the&nbsp;immediately&nbsp;following&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;Write.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811833">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811837">//&nbsp;An&nbsp;idle&nbsp;timeout&nbsp;can&nbsp;be&nbsp;implemented&nbsp;by&nbsp;repeatedly&nbsp;extending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811900">//&nbsp;the&nbsp;deadline&nbsp;after&nbsp;successful&nbsp;Read&nbsp;or&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811955">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3811959">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;I/O&nbsp;operations&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3812022">SetDeadline</span><span class="op" id="3812033">(</span><span class="ident" id="3812034">t</span>&nbsp;<span class="ident" id="3812036">time</span><span class="op" id="3812040">.</span><span class="ident" id="3812041">Time</span><span class="op" id="3812045">)</span>&nbsp;<span class="builtintype" id="3812047">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812055">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812116">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3812169">SetReadDeadline</span><span class="op" id="3812184">(</span><span class="ident" id="3812185">t</span>&nbsp;<span class="ident" id="3812187">time</span><span class="op" id="3812191">.</span><span class="ident" id="3812192">Time</span><span class="op" id="3812196">)</span>&nbsp;<span class="builtintype" id="3812198">error</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812206">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812269">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812335">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3812382">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3812436">SetWriteDeadline</span><span class="op" id="3812452">(</span><span class="ident" id="3812453">t</span>&nbsp;<span class="ident" id="3812455">time</span><span class="op" id="3812459">.</span><span class="ident" id="3812460">Time</span><span class="op" id="3812464">)</span>&nbsp;<span class="builtintype" id="3812466">error</span><br>
<span class="lineno"></span><span class="op" id="3812472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3812475">type</span>&nbsp;<span class="ident" id="3812480">conn</span>&nbsp;<span class="keyword" id="3812485">struct</span>&nbsp;<span class="op" id="3812492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3812495">fd</span>&nbsp;<span class="op" id="3812498">*</span><span class="ident" id="3812499">netFD</span><br>
<span class="lineno">110</span><span class="op" id="3812505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3812508">func</span>&nbsp;<span class="op" id="3812513">(</span><span class="ident" id="3812514">c</span>&nbsp;<span class="op" id="3812516">*</span><span class="ident" id="3812517">conn</span><span class="op" id="3812521">)</span>&nbsp;<span class="ident" id="3812523">ok</span><span class="op" id="3812525">(</span><span class="op" id="3812526">)</span>&nbsp;<span class="builtintype" id="3812528">bool</span>&nbsp;<span class="op" id="3812533">{</span>&nbsp;<span class="keyword" id="3812535">return</span>&nbsp;<span class="ident" id="3812542">c</span>&nbsp;<span class="op" id="3812544">!=</span>&nbsp;<span class="builtintype" id="3812547">nil</span>&nbsp;<span class="op" id="3812551">&amp;&amp;</span>&nbsp;<span class="ident" id="3812554">c</span><span class="op" id="3812555">.</span><span class="ident" id="3812556">fd</span>&nbsp;<span class="op" id="3812559">!=</span>&nbsp;<span class="builtintype" id="3812562">nil</span>&nbsp;<span class="op" id="3812566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3812569">//&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3812611">//&nbsp;Read&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3812652">func</span>&nbsp;<span class="op" id="3812657">(</span><span class="ident" id="3812658">c</span>&nbsp;<span class="op" id="3812660">*</span><span class="ident" id="3812661">conn</span><span class="op" id="3812665">)</span>&nbsp;<span class="ident" id="3812667">Read</span><span class="op" id="3812671">(</span><span class="ident" id="3812672">b</span>&nbsp;<span class="op" id="3812674">[</span><span class="op" id="3812675">]</span><span class="builtintype" id="3812676">byte</span><span class="op" id="3812680">)</span>&nbsp;<span class="op" id="3812682">(</span><span class="builtintype" id="3812683">int</span><span class="op" id="3812686">,</span>&nbsp;<span class="builtintype" id="3812688">error</span><span class="op" id="3812693">)</span>&nbsp;<span class="op" id="3812695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812698">if</span>&nbsp;<span class="op" id="3812701">!</span><span class="ident" id="3812702">c</span><span class="op" id="3812703">.</span><span class="ident" id="3812704">ok</span><span class="op" id="3812706">(</span><span class="op" id="3812707">)</span>&nbsp;<span class="op" id="3812709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812713">return</span>&nbsp;<span class="num" id="3812720">0</span><span class="op" id="3812721">,</span>&nbsp;<span class="ident" id="3812723">syscall</span><span class="op" id="3812730">.</span><span class="ident" id="3812731">EINVAL</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3812739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812742">return</span>&nbsp;<span class="ident" id="3812749">c</span><span class="op" id="3812750">.</span><span class="ident" id="3812751">fd</span><span class="op" id="3812753">.</span><span class="ident" id="3812754">Read</span><span class="op" id="3812758">(</span><span class="ident" id="3812759">b</span><span class="op" id="3812760">)</span><br>
<span class="lineno"></span><span class="op" id="3812762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3812765">//&nbsp;Write&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">125</span><span class="keyword" id="3812808">func</span>&nbsp;<span class="op" id="3812813">(</span><span class="ident" id="3812814">c</span>&nbsp;<span class="op" id="3812816">*</span><span class="ident" id="3812817">conn</span><span class="op" id="3812821">)</span>&nbsp;<span class="ident" id="3812823">Write</span><span class="op" id="3812828">(</span><span class="ident" id="3812829">b</span>&nbsp;<span class="op" id="3812831">[</span><span class="op" id="3812832">]</span><span class="builtintype" id="3812833">byte</span><span class="op" id="3812837">)</span>&nbsp;<span class="op" id="3812839">(</span><span class="builtintype" id="3812840">int</span><span class="op" id="3812843">,</span>&nbsp;<span class="builtintype" id="3812845">error</span><span class="op" id="3812850">)</span>&nbsp;<span class="op" id="3812852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812855">if</span>&nbsp;<span class="op" id="3812858">!</span><span class="ident" id="3812859">c</span><span class="op" id="3812860">.</span><span class="ident" id="3812861">ok</span><span class="op" id="3812863">(</span><span class="op" id="3812864">)</span>&nbsp;<span class="op" id="3812866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812870">return</span>&nbsp;<span class="num" id="3812877">0</span><span class="op" id="3812878">,</span>&nbsp;<span class="ident" id="3812880">syscall</span><span class="op" id="3812887">.</span><span class="ident" id="3812888">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3812896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812899">return</span>&nbsp;<span class="ident" id="3812906">c</span><span class="op" id="3812907">.</span><span class="ident" id="3812908">fd</span><span class="op" id="3812910">.</span><span class="ident" id="3812911">Write</span><span class="op" id="3812916">(</span><span class="ident" id="3812917">b</span><span class="op" id="3812918">)</span><br>
<span class="lineno">130</span><span class="op" id="3812920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3812923">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3812955">func</span>&nbsp;<span class="op" id="3812960">(</span><span class="ident" id="3812961">c</span>&nbsp;<span class="op" id="3812963">*</span><span class="ident" id="3812964">conn</span><span class="op" id="3812968">)</span>&nbsp;<span class="ident" id="3812970">Close</span><span class="op" id="3812975">(</span><span class="op" id="3812976">)</span>&nbsp;<span class="builtintype" id="3812978">error</span>&nbsp;<span class="op" id="3812984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3812987">if</span>&nbsp;<span class="op" id="3812990">!</span><span class="ident" id="3812991">c</span><span class="op" id="3812992">.</span><span class="ident" id="3812993">ok</span><span class="op" id="3812995">(</span><span class="op" id="3812996">)</span>&nbsp;<span class="op" id="3812998">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813002">return</span>&nbsp;<span class="ident" id="3813009">syscall</span><span class="op" id="3813016">.</span><span class="ident" id="3813017">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813028">return</span>&nbsp;<span class="ident" id="3813035">c</span><span class="op" id="3813036">.</span><span class="ident" id="3813037">fd</span><span class="op" id="3813039">.</span><span class="ident" id="3813040">Close</span><span class="op" id="3813045">(</span><span class="op" id="3813046">)</span><br>
<span class="lineno"></span><span class="op" id="3813048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3813051">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3813099">func</span>&nbsp;<span class="op" id="3813104">(</span><span class="ident" id="3813105">c</span>&nbsp;<span class="op" id="3813107">*</span><span class="ident" id="3813108">conn</span><span class="op" id="3813112">)</span>&nbsp;<span class="ident" id="3813114">LocalAddr</span><span class="op" id="3813123">(</span><span class="op" id="3813124">)</span>&nbsp;<span class="ident" id="3813126">Addr</span>&nbsp;<span class="op" id="3813131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813134">if</span>&nbsp;<span class="op" id="3813137">!</span><span class="ident" id="3813138">c</span><span class="op" id="3813139">.</span><span class="ident" id="3813140">ok</span><span class="op" id="3813142">(</span><span class="op" id="3813143">)</span>&nbsp;<span class="op" id="3813145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813149">return</span>&nbsp;<span class="builtintype" id="3813156">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813161">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813164">return</span>&nbsp;<span class="ident" id="3813171">c</span><span class="op" id="3813172">.</span><span class="ident" id="3813173">fd</span><span class="op" id="3813175">.</span><span class="ident" id="3813176">laddr</span><br>
<span class="lineno"></span><span class="op" id="3813182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3813185">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3813235">func</span>&nbsp;<span class="op" id="3813240">(</span><span class="ident" id="3813241">c</span>&nbsp;<span class="op" id="3813243">*</span><span class="ident" id="3813244">conn</span><span class="op" id="3813248">)</span>&nbsp;<span class="ident" id="3813250">RemoteAddr</span><span class="op" id="3813260">(</span><span class="op" id="3813261">)</span>&nbsp;<span class="ident" id="3813263">Addr</span>&nbsp;<span class="op" id="3813268">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813271">if</span>&nbsp;<span class="op" id="3813274">!</span><span class="ident" id="3813275">c</span><span class="op" id="3813276">.</span><span class="ident" id="3813277">ok</span><span class="op" id="3813279">(</span><span class="op" id="3813280">)</span>&nbsp;<span class="op" id="3813282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813286">return</span>&nbsp;<span class="builtintype" id="3813293">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813301">return</span>&nbsp;<span class="ident" id="3813308">c</span><span class="op" id="3813309">.</span><span class="ident" id="3813310">fd</span><span class="op" id="3813312">.</span><span class="ident" id="3813313">raddr</span><br>
<span class="lineno"></span><span class="op" id="3813319">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3813322">//&nbsp;SetDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3813377">func</span>&nbsp;<span class="op" id="3813382">(</span><span class="ident" id="3813383">c</span>&nbsp;<span class="op" id="3813385">*</span><span class="ident" id="3813386">conn</span><span class="op" id="3813390">)</span>&nbsp;<span class="ident" id="3813392">SetDeadline</span><span class="op" id="3813403">(</span><span class="ident" id="3813404">t</span>&nbsp;<span class="ident" id="3813406">time</span><span class="op" id="3813410">.</span><span class="ident" id="3813411">Time</span><span class="op" id="3813415">)</span>&nbsp;<span class="builtintype" id="3813417">error</span>&nbsp;<span class="op" id="3813423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813426">if</span>&nbsp;<span class="op" id="3813429">!</span><span class="ident" id="3813430">c</span><span class="op" id="3813431">.</span><span class="ident" id="3813432">ok</span><span class="op" id="3813434">(</span><span class="op" id="3813435">)</span>&nbsp;<span class="op" id="3813437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813441">return</span>&nbsp;<span class="ident" id="3813448">syscall</span><span class="op" id="3813455">.</span><span class="ident" id="3813456">EINVAL</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813467">return</span>&nbsp;<span class="ident" id="3813474">c</span><span class="op" id="3813475">.</span><span class="ident" id="3813476">fd</span><span class="op" id="3813478">.</span><span class="ident" id="3813479">setDeadline</span><span class="op" id="3813490">(</span><span class="ident" id="3813491">t</span><span class="op" id="3813492">)</span><br>
<span class="lineno"></span><span class="op" id="3813494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3813497">//&nbsp;SetReadDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetReadDeadline&nbsp;method.</span><br>
<span class="lineno">165</span><span class="keyword" id="3813560">func</span>&nbsp;<span class="op" id="3813565">(</span><span class="ident" id="3813566">c</span>&nbsp;<span class="op" id="3813568">*</span><span class="ident" id="3813569">conn</span><span class="op" id="3813573">)</span>&nbsp;<span class="ident" id="3813575">SetReadDeadline</span><span class="op" id="3813590">(</span><span class="ident" id="3813591">t</span>&nbsp;<span class="ident" id="3813593">time</span><span class="op" id="3813597">.</span><span class="ident" id="3813598">Time</span><span class="op" id="3813602">)</span>&nbsp;<span class="builtintype" id="3813604">error</span>&nbsp;<span class="op" id="3813610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813613">if</span>&nbsp;<span class="op" id="3813616">!</span><span class="ident" id="3813617">c</span><span class="op" id="3813618">.</span><span class="ident" id="3813619">ok</span><span class="op" id="3813621">(</span><span class="op" id="3813622">)</span>&nbsp;<span class="op" id="3813624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813628">return</span>&nbsp;<span class="ident" id="3813635">syscall</span><span class="op" id="3813642">.</span><span class="ident" id="3813643">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813654">return</span>&nbsp;<span class="ident" id="3813661">c</span><span class="op" id="3813662">.</span><span class="ident" id="3813663">fd</span><span class="op" id="3813665">.</span><span class="ident" id="3813666">setReadDeadline</span><span class="op" id="3813681">(</span><span class="ident" id="3813682">t</span><span class="op" id="3813683">)</span><br>
<span class="lineno">170</span><span class="op" id="3813685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3813688">//&nbsp;SetWriteDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetWriteDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3813753">func</span>&nbsp;<span class="op" id="3813758">(</span><span class="ident" id="3813759">c</span>&nbsp;<span class="op" id="3813761">*</span><span class="ident" id="3813762">conn</span><span class="op" id="3813766">)</span>&nbsp;<span class="ident" id="3813768">SetWriteDeadline</span><span class="op" id="3813784">(</span><span class="ident" id="3813785">t</span>&nbsp;<span class="ident" id="3813787">time</span><span class="op" id="3813791">.</span><span class="ident" id="3813792">Time</span><span class="op" id="3813796">)</span>&nbsp;<span class="builtintype" id="3813798">error</span>&nbsp;<span class="op" id="3813804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813807">if</span>&nbsp;<span class="op" id="3813810">!</span><span class="ident" id="3813811">c</span><span class="op" id="3813812">.</span><span class="ident" id="3813813">ok</span><span class="op" id="3813815">(</span><span class="op" id="3813816">)</span>&nbsp;<span class="op" id="3813818">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813822">return</span>&nbsp;<span class="ident" id="3813829">syscall</span><span class="op" id="3813836">.</span><span class="ident" id="3813837">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3813845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3813848">return</span>&nbsp;<span class="ident" id="3813855">c</span><span class="op" id="3813856">.</span><span class="ident" id="3813857">fd</span><span class="op" id="3813859">.</span><span class="ident" id="3813860">setWriteDeadline</span><span class="op" id="3813876">(</span><span class="ident" id="3813877">t</span><span class="op" id="3813878">)</span><br>
<span class="lineno"></span><span class="op" id="3813880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3813883">//&nbsp;SetReadBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3813940">//&nbsp;receive&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3813990">func</span>&nbsp;<span class="op" id="3813995">(</span><span class="ident" id="3813996">c</span>&nbsp;<span class="op" id="3813998">*</span><span class="ident" id="3813999">conn</span><span class="op" id="3814003">)</span>&nbsp;<span class="ident" id="3814005">SetReadBuffer</span><span class="op" id="3814018">(</span><span class="ident" id="3814019">bytes</span>&nbsp;<span class="builtintype" id="3814025">int</span><span class="op" id="3814028">)</span>&nbsp;<span class="builtintype" id="3814030">error</span>&nbsp;<span class="op" id="3814036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814039">if</span>&nbsp;<span class="op" id="3814042">!</span><span class="ident" id="3814043">c</span><span class="op" id="3814044">.</span><span class="ident" id="3814045">ok</span><span class="op" id="3814047">(</span><span class="op" id="3814048">)</span>&nbsp;<span class="op" id="3814050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814054">return</span>&nbsp;<span class="ident" id="3814061">syscall</span><span class="op" id="3814068">.</span><span class="ident" id="3814069">EINVAL</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3814077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814080">return</span>&nbsp;<span class="ident" id="3814087">setReadBuffer</span><span class="op" id="3814100">(</span><span class="ident" id="3814101">c</span><span class="op" id="3814102">.</span><span class="ident" id="3814103">fd</span><span class="op" id="3814105">,</span>&nbsp;<span class="ident" id="3814107">bytes</span><span class="op" id="3814112">)</span><br>
<span class="lineno"></span><span class="op" id="3814114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3814117">//&nbsp;SetWriteBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno">190</span><span class="comment" id="3814175">//&nbsp;transmit&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3814226">func</span>&nbsp;<span class="op" id="3814231">(</span><span class="ident" id="3814232">c</span>&nbsp;<span class="op" id="3814234">*</span><span class="ident" id="3814235">conn</span><span class="op" id="3814239">)</span>&nbsp;<span class="ident" id="3814241">SetWriteBuffer</span><span class="op" id="3814255">(</span><span class="ident" id="3814256">bytes</span>&nbsp;<span class="builtintype" id="3814262">int</span><span class="op" id="3814265">)</span>&nbsp;<span class="builtintype" id="3814267">error</span>&nbsp;<span class="op" id="3814273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814276">if</span>&nbsp;<span class="op" id="3814279">!</span><span class="ident" id="3814280">c</span><span class="op" id="3814281">.</span><span class="ident" id="3814282">ok</span><span class="op" id="3814284">(</span><span class="op" id="3814285">)</span>&nbsp;<span class="op" id="3814287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814291">return</span>&nbsp;<span class="ident" id="3814298">syscall</span><span class="op" id="3814305">.</span><span class="ident" id="3814306">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3814314">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3814317">return</span>&nbsp;<span class="ident" id="3814324">setWriteBuffer</span><span class="op" id="3814338">(</span><span class="ident" id="3814339">c</span><span class="op" id="3814340">.</span><span class="ident" id="3814341">fd</span><span class="op" id="3814343">,</span>&nbsp;<span class="ident" id="3814345">bytes</span><span class="op" id="3814350">)</span><br>
<span class="lineno"></span><span class="op" id="3814352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3814355">//&nbsp;File&nbsp;sets&nbsp;the&nbsp;underlying&nbsp;os.File&nbsp;to&nbsp;blocking&nbsp;mode&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span><span class="comment" id="3814428">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno">200</span><span class="comment" id="3814491">//&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="3814556">//</span><br>
<span class="lineno"></span><span class="comment" id="3814559">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;connection&#39;s.</span><br>
<span class="lineno"></span><span class="comment" id="3814637">//&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original&nbsp;using&nbsp;this&nbsp;duplicate</span><br>
<span class="lineno"></span><span class="comment" id="3814709">//&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno">205</span><span class="keyword" id="3814752">func</span>&nbsp;<span class="op" id="3814757">(</span><span class="ident" id="3814758">c</span>&nbsp;<span class="op" id="3814760">*</span><span class="ident" id="3814761">conn</span><span class="op" id="3814765">)</span>&nbsp;<span class="ident" id="3814767">File</span><span class="op" id="3814771">(</span><span class="op" id="3814772">)</span>&nbsp;<span class="op" id="3814774">(</span><span class="ident" id="3814775">f</span>&nbsp;<span class="op" id="3814777">*</span><span class="ident" id="3814778">os</span><span class="op" id="3814780">.</span><span class="ident" id="3814781">File</span><span class="op" id="3814785">,</span>&nbsp;<span class="ident" id="3814787">err</span>&nbsp;<span class="builtintype" id="3814791">error</span><span class="op" id="3814796">)</span>&nbsp;<span class="op" id="3814798">{</span>&nbsp;<span class="keyword" id="3814800">return</span>&nbsp;<span class="ident" id="3814807">c</span><span class="op" id="3814808">.</span><span class="ident" id="3814809">fd</span><span class="op" id="3814811">.</span><span class="ident" id="3814812">dup</span><span class="op" id="3814815">(</span><span class="op" id="3814816">)</span>&nbsp;<span class="op" id="3814818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3814821">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;network&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3814861">type</span>&nbsp;<span class="ident" id="3814866">Error</span>&nbsp;<span class="keyword" id="3814872">interface</span>&nbsp;<span class="op" id="3814882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3814885">error</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3814892">Timeout</span><span class="op" id="3814899">(</span><span class="op" id="3814900">)</span>&nbsp;<span class="builtintype" id="3814902">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3814909">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;a&nbsp;timeout?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3814937">Temporary</span><span class="op" id="3814946">(</span><span class="op" id="3814947">)</span>&nbsp;<span class="builtintype" id="3814949">bool</span>&nbsp;<span class="comment" id="3814954">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;temporary?</span><br>
<span class="lineno"></span><span class="op" id="3814981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3814984">//&nbsp;PacketConn&nbsp;is&nbsp;a&nbsp;generic&nbsp;packet-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">215</span><span class="comment" id="3815047">//</span><br>
<span class="lineno"></span><span class="comment" id="3815050">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;PacketConn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3815124">type</span>&nbsp;<span class="ident" id="3815129">PacketConn</span>&nbsp;<span class="keyword" id="3815140">interface</span>&nbsp;<span class="op" id="3815150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815153">//&nbsp;ReadFrom&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;the&nbsp;connection,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815202">//&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815260">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815312">//&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815335">//&nbsp;ReadFrom&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815383">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815445">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3815486">ReadFrom</span><span class="op" id="3815494">(</span><span class="ident" id="3815495">b</span>&nbsp;<span class="op" id="3815497">[</span><span class="op" id="3815498">]</span><span class="builtintype" id="3815499">byte</span><span class="op" id="3815503">)</span>&nbsp;<span class="op" id="3815505">(</span><span class="ident" id="3815506">n</span>&nbsp;<span class="builtintype" id="3815508">int</span><span class="op" id="3815511">,</span>&nbsp;<span class="ident" id="3815513">addr</span>&nbsp;<span class="ident" id="3815518">Addr</span><span class="op" id="3815522">,</span>&nbsp;<span class="ident" id="3815524">err</span>&nbsp;<span class="builtintype" id="3815528">error</span><span class="op" id="3815533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815537">//&nbsp;WriteTo&nbsp;writes&nbsp;a&nbsp;packet&nbsp;with&nbsp;payload&nbsp;b&nbsp;to&nbsp;addr.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815589">//&nbsp;WriteTo&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815636">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815698">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815740">//&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3815801">WriteTo</span><span class="op" id="3815808">(</span><span class="ident" id="3815809">b</span>&nbsp;<span class="op" id="3815811">[</span><span class="op" id="3815812">]</span><span class="builtintype" id="3815813">byte</span><span class="op" id="3815817">,</span>&nbsp;<span class="ident" id="3815819">addr</span>&nbsp;<span class="ident" id="3815824">Addr</span><span class="op" id="3815828">)</span>&nbsp;<span class="op" id="3815830">(</span><span class="ident" id="3815831">n</span>&nbsp;<span class="builtintype" id="3815833">int</span><span class="op" id="3815836">,</span>&nbsp;<span class="ident" id="3815838">err</span>&nbsp;<span class="builtintype" id="3815842">error</span><span class="op" id="3815847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815851">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815884">//&nbsp;Any&nbsp;blocked&nbsp;ReadFrom&nbsp;or&nbsp;WriteTo&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3815968">Close</span><span class="op" id="3815973">(</span><span class="op" id="3815974">)</span>&nbsp;<span class="builtintype" id="3815976">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3815984">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3816033">LocalAddr</span><span class="op" id="3816042">(</span><span class="op" id="3816043">)</span>&nbsp;<span class="ident" id="3816045">Addr</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816052">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816113">//&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3816138">SetDeadline</span><span class="op" id="3816149">(</span><span class="ident" id="3816150">t</span>&nbsp;<span class="ident" id="3816152">time</span><span class="op" id="3816156">.</span><span class="ident" id="3816157">Time</span><span class="op" id="3816161">)</span>&nbsp;<span class="builtintype" id="3816163">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816171">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816232">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Read&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816294">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816336">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3816389">SetReadDeadline</span><span class="op" id="3816404">(</span><span class="ident" id="3816405">t</span>&nbsp;<span class="ident" id="3816407">time</span><span class="op" id="3816411">.</span><span class="ident" id="3816412">Time</span><span class="op" id="3816416">)</span>&nbsp;<span class="builtintype" id="3816418">error</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816426">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816489">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Write&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816552">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816594">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816648">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3816714">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3816761">SetWriteDeadline</span><span class="op" id="3816777">(</span><span class="ident" id="3816778">t</span>&nbsp;<span class="ident" id="3816780">time</span><span class="op" id="3816784">.</span><span class="ident" id="3816785">Time</span><span class="op" id="3816789">)</span>&nbsp;<span class="builtintype" id="3816791">error</span><br>
<span class="lineno"></span><span class="op" id="3816797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3816800">var</span>&nbsp;<span class="ident" id="3816804">listenerBacklog</span>&nbsp;<span class="op" id="3816820">=</span>&nbsp;<span class="ident" id="3816822">maxListenerBacklog</span><span class="op" id="3816840">(</span><span class="op" id="3816841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3816844">//&nbsp;A&nbsp;Listener&nbsp;is&nbsp;a&nbsp;generic&nbsp;network&nbsp;listener&nbsp;for&nbsp;stream-oriented&nbsp;protocols.</span><br>
<span class="lineno"></span><span class="comment" id="3816919">//</span><br>
<span class="lineno"></span><span class="comment" id="3816922">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Listener&nbsp;simultaneously.</span><br>
<span class="lineno">265</span><span class="keyword" id="3816994">type</span>&nbsp;<span class="ident" id="3816999">Listener</span>&nbsp;<span class="keyword" id="3817008">interface</span>&nbsp;<span class="op" id="3817018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817021">//&nbsp;Accept&nbsp;waits&nbsp;for&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;connection&nbsp;to&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817091">Accept</span><span class="op" id="3817097">(</span><span class="op" id="3817098">)</span>&nbsp;<span class="op" id="3817100">(</span><span class="ident" id="3817101">c</span>&nbsp;<span class="ident" id="3817103">Conn</span><span class="op" id="3817107">,</span>&nbsp;<span class="ident" id="3817109">err</span>&nbsp;<span class="builtintype" id="3817113">error</span><span class="op" id="3817118">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817122">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;listener.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817153">//&nbsp;Any&nbsp;blocked&nbsp;Accept&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817224">Close</span><span class="op" id="3817229">(</span><span class="op" id="3817230">)</span>&nbsp;<span class="builtintype" id="3817232">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817240">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817289">Addr</span><span class="op" id="3817293">(</span><span class="op" id="3817294">)</span>&nbsp;<span class="ident" id="3817296">Addr</span><br>
<span class="lineno">275</span><span class="op" id="3817301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3817304">//&nbsp;Various&nbsp;errors&nbsp;contained&nbsp;in&nbsp;OpError.</span><br>
<span class="lineno"></span><span class="keyword" id="3817344">var</span>&nbsp;<span class="op" id="3817348">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817351">//&nbsp;For&nbsp;connection&nbsp;setup&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817398">errMissingAddress</span>&nbsp;<span class="op" id="3817416">=</span>&nbsp;<span class="ident" id="3817418">errors</span><span class="op" id="3817424">.</span><span class="ident" id="3817425">New</span><span class="op" id="3817428">(</span><span class="string" id="3817429">&#34;missing&nbsp;address&#34;</span><span class="op" id="3817446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817450">//&nbsp;For&nbsp;both&nbsp;read&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817490">errTimeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3817510">error</span>&nbsp;<span class="op" id="3817516">=</span>&nbsp;<span class="op" id="3817518">&amp;</span><span class="ident" id="3817519">timeoutError</span><span class="op" id="3817531">{</span><span class="op" id="3817532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817535">errClosing</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3817561">=</span>&nbsp;<span class="ident" id="3817563">errors</span><span class="op" id="3817569">.</span><span class="ident" id="3817570">New</span><span class="op" id="3817573">(</span><span class="string" id="3817574">&#34;use&nbsp;of&nbsp;closed&nbsp;network&nbsp;connection&#34;</span><span class="op" id="3817608">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817611">ErrWriteToConnected</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3817637">=</span>&nbsp;<span class="ident" id="3817639">errors</span><span class="op" id="3817645">.</span><span class="ident" id="3817646">New</span><span class="op" id="3817649">(</span><span class="string" id="3817650">&#34;use&nbsp;of&nbsp;WriteTo&nbsp;with&nbsp;pre-connected&nbsp;connection&#34;</span><span class="op" id="3817696">)</span><br>
<span class="lineno"></span><span class="op" id="3817698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3817701">//&nbsp;OpError&nbsp;is&nbsp;the&nbsp;error&nbsp;type&nbsp;usually&nbsp;returned&nbsp;by&nbsp;functions&nbsp;in&nbsp;the&nbsp;net</span><br>
<span class="lineno"></span><span class="comment" id="3817771">//&nbsp;package.&nbsp;It&nbsp;describes&nbsp;the&nbsp;operation,&nbsp;network&nbsp;type,&nbsp;and&nbsp;address&nbsp;of</span><br>
<span class="lineno">290</span><span class="comment" id="3817840">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3817853">type</span>&nbsp;<span class="ident" id="3817858">OpError</span>&nbsp;<span class="keyword" id="3817866">struct</span>&nbsp;<span class="op" id="3817873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817876">//&nbsp;Op&nbsp;is&nbsp;the&nbsp;operation&nbsp;which&nbsp;caused&nbsp;the&nbsp;error,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817932">//&nbsp;&#34;read&#34;&nbsp;or&nbsp;&#34;write&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3817955">Op</span>&nbsp;<span class="builtintype" id="3817958">string</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3817967">//&nbsp;Net&nbsp;is&nbsp;the&nbsp;network&nbsp;type&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3818025">//&nbsp;such&nbsp;as&nbsp;&#34;tcp&#34;&nbsp;or&nbsp;&#34;udp6&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818054">Net</span>&nbsp;<span class="builtintype" id="3818058">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3818067">//&nbsp;Addr&nbsp;is&nbsp;the&nbsp;network&nbsp;address&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818129">Addr</span>&nbsp;<span class="ident" id="3818134">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3818141">//&nbsp;Err&nbsp;is&nbsp;the&nbsp;error&nbsp;that&nbsp;occurred&nbsp;during&nbsp;the&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818198">Err</span>&nbsp;<span class="builtintype" id="3818202">error</span><br>
<span class="lineno">305</span><span class="op" id="3818208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818211">func</span>&nbsp;<span class="op" id="3818216">(</span><span class="ident" id="3818217">e</span>&nbsp;<span class="op" id="3818219">*</span><span class="ident" id="3818220">OpError</span><span class="op" id="3818227">)</span>&nbsp;<span class="ident" id="3818229">Error</span><span class="op" id="3818234">(</span><span class="op" id="3818235">)</span>&nbsp;<span class="builtintype" id="3818237">string</span>&nbsp;<span class="op" id="3818244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818247">if</span>&nbsp;<span class="ident" id="3818250">e</span>&nbsp;<span class="op" id="3818252">==</span>&nbsp;<span class="builtintype" id="3818255">nil</span>&nbsp;<span class="op" id="3818259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818263">return</span>&nbsp;<span class="string" id="3818270">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3818279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818282">s</span>&nbsp;<span class="op" id="3818284">:=</span>&nbsp;<span class="ident" id="3818287">e</span><span class="op" id="3818288">.</span><span class="ident" id="3818289">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818293">if</span>&nbsp;<span class="ident" id="3818296">e</span><span class="op" id="3818297">.</span><span class="ident" id="3818298">Net</span>&nbsp;<span class="op" id="3818302">!=</span>&nbsp;<span class="string" id="3818305">&#34;&#34;</span>&nbsp;<span class="op" id="3818308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818312">s</span>&nbsp;<span class="op" id="3818314">+=</span>&nbsp;<span class="string" id="3818317">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3818321">+</span>&nbsp;<span class="ident" id="3818323">e</span><span class="op" id="3818324">.</span><span class="ident" id="3818325">Net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3818330">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818333">if</span>&nbsp;<span class="ident" id="3818336">e</span><span class="op" id="3818337">.</span><span class="ident" id="3818338">Addr</span>&nbsp;<span class="op" id="3818343">!=</span>&nbsp;<span class="builtintype" id="3818346">nil</span>&nbsp;<span class="op" id="3818350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818354">s</span>&nbsp;<span class="op" id="3818356">+=</span>&nbsp;<span class="string" id="3818359">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3818363">+</span>&nbsp;<span class="ident" id="3818365">e</span><span class="op" id="3818366">.</span><span class="ident" id="3818367">Addr</span><span class="op" id="3818371">.</span><span class="ident" id="3818372">String</span><span class="op" id="3818378">(</span><span class="op" id="3818379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3818382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818385">s</span>&nbsp;<span class="op" id="3818387">+=</span>&nbsp;<span class="string" id="3818390">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3818395">+</span>&nbsp;<span class="ident" id="3818397">e</span><span class="op" id="3818398">.</span><span class="ident" id="3818399">Err</span><span class="op" id="3818402">.</span><span class="ident" id="3818403">Error</span><span class="op" id="3818408">(</span><span class="op" id="3818409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818412">return</span>&nbsp;<span class="ident" id="3818419">s</span><br>
<span class="lineno">320</span><span class="op" id="3818421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818424">type</span>&nbsp;<span class="ident" id="3818429">temporary</span>&nbsp;<span class="keyword" id="3818439">interface</span>&nbsp;<span class="op" id="3818449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818452">Temporary</span><span class="op" id="3818461">(</span><span class="op" id="3818462">)</span>&nbsp;<span class="builtintype" id="3818464">bool</span><br>
<span class="lineno"></span><span class="op" id="3818469">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="3818472">func</span>&nbsp;<span class="op" id="3818477">(</span><span class="ident" id="3818478">e</span>&nbsp;<span class="op" id="3818480">*</span><span class="ident" id="3818481">OpError</span><span class="op" id="3818488">)</span>&nbsp;<span class="ident" id="3818490">Temporary</span><span class="op" id="3818499">(</span><span class="op" id="3818500">)</span>&nbsp;<span class="builtintype" id="3818502">bool</span>&nbsp;<span class="op" id="3818507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818510">t</span><span class="op" id="3818511">,</span>&nbsp;<span class="ident" id="3818513">ok</span>&nbsp;<span class="op" id="3818516">:=</span>&nbsp;<span class="ident" id="3818519">e</span><span class="op" id="3818520">.</span><span class="ident" id="3818521">Err</span><span class="op" id="3818524">.</span><span class="op" id="3818525">(</span><span class="ident" id="3818526">temporary</span><span class="op" id="3818535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818538">return</span>&nbsp;<span class="ident" id="3818545">ok</span>&nbsp;<span class="op" id="3818548">&amp;&amp;</span>&nbsp;<span class="ident" id="3818551">t</span><span class="op" id="3818552">.</span><span class="ident" id="3818553">Temporary</span><span class="op" id="3818562">(</span><span class="op" id="3818563">)</span><br>
<span class="lineno"></span><span class="op" id="3818565">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="3818568">var</span>&nbsp;<span class="ident" id="3818572">noDeadline</span>&nbsp;<span class="op" id="3818583">=</span>&nbsp;<span class="ident" id="3818585">time</span><span class="op" id="3818589">.</span><span class="ident" id="3818590">Time</span><span class="op" id="3818594">{</span><span class="op" id="3818595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818598">type</span>&nbsp;<span class="ident" id="3818603">timeout</span>&nbsp;<span class="keyword" id="3818611">interface</span>&nbsp;<span class="op" id="3818621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818624">Timeout</span><span class="op" id="3818631">(</span><span class="op" id="3818632">)</span>&nbsp;<span class="builtintype" id="3818634">bool</span><br>
<span class="lineno">335</span><span class="op" id="3818639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818642">func</span>&nbsp;<span class="op" id="3818647">(</span><span class="ident" id="3818648">e</span>&nbsp;<span class="op" id="3818650">*</span><span class="ident" id="3818651">OpError</span><span class="op" id="3818658">)</span>&nbsp;<span class="ident" id="3818660">Timeout</span><span class="op" id="3818667">(</span><span class="op" id="3818668">)</span>&nbsp;<span class="builtintype" id="3818670">bool</span>&nbsp;<span class="op" id="3818675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818678">t</span><span class="op" id="3818679">,</span>&nbsp;<span class="ident" id="3818681">ok</span>&nbsp;<span class="op" id="3818684">:=</span>&nbsp;<span class="ident" id="3818687">e</span><span class="op" id="3818688">.</span><span class="ident" id="3818689">Err</span><span class="op" id="3818692">.</span><span class="op" id="3818693">(</span><span class="ident" id="3818694">timeout</span><span class="op" id="3818701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3818704">return</span>&nbsp;<span class="ident" id="3818711">ok</span>&nbsp;<span class="op" id="3818714">&amp;&amp;</span>&nbsp;<span class="ident" id="3818717">t</span><span class="op" id="3818718">.</span><span class="ident" id="3818719">Timeout</span><span class="op" id="3818726">(</span><span class="op" id="3818727">)</span><br>
<span class="lineno">340</span><span class="op" id="3818729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818732">type</span>&nbsp;<span class="ident" id="3818737">timeoutError</span>&nbsp;<span class="keyword" id="3818750">struct</span><span class="op" id="3818756">{</span><span class="op" id="3818757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818760">func</span>&nbsp;<span class="op" id="3818765">(</span><span class="ident" id="3818766">e</span>&nbsp;<span class="op" id="3818768">*</span><span class="ident" id="3818769">timeoutError</span><span class="op" id="3818781">)</span>&nbsp;<span class="ident" id="3818783">Error</span><span class="op" id="3818788">(</span><span class="op" id="3818789">)</span>&nbsp;<span class="builtintype" id="3818791">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3818800">{</span>&nbsp;<span class="keyword" id="3818802">return</span>&nbsp;<span class="string" id="3818809">&#34;i/o&nbsp;timeout&#34;</span>&nbsp;<span class="op" id="3818823">}</span><br>
<span class="lineno">345</span><span class="keyword" id="3818825">func</span>&nbsp;<span class="op" id="3818830">(</span><span class="ident" id="3818831">e</span>&nbsp;<span class="op" id="3818833">*</span><span class="ident" id="3818834">timeoutError</span><span class="op" id="3818846">)</span>&nbsp;<span class="ident" id="3818848">Timeout</span><span class="op" id="3818855">(</span><span class="op" id="3818856">)</span>&nbsp;<span class="builtintype" id="3818858">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3818865">{</span>&nbsp;<span class="keyword" id="3818867">return</span>&nbsp;<span class="builtintype" id="3818874">true</span>&nbsp;<span class="op" id="3818879">}</span><br>
<span class="lineno"></span><span class="keyword" id="3818881">func</span>&nbsp;<span class="op" id="3818886">(</span><span class="ident" id="3818887">e</span>&nbsp;<span class="op" id="3818889">*</span><span class="ident" id="3818890">timeoutError</span><span class="op" id="3818902">)</span>&nbsp;<span class="ident" id="3818904">Temporary</span><span class="op" id="3818913">(</span><span class="op" id="3818914">)</span>&nbsp;<span class="builtintype" id="3818916">bool</span>&nbsp;<span class="op" id="3818921">{</span>&nbsp;<span class="keyword" id="3818923">return</span>&nbsp;<span class="builtintype" id="3818930">true</span>&nbsp;<span class="op" id="3818935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818938">type</span>&nbsp;<span class="ident" id="3818943">AddrError</span>&nbsp;<span class="keyword" id="3818953">struct</span>&nbsp;<span class="op" id="3818960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818963">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3818968">string</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3818976">Addr</span>&nbsp;<span class="builtintype" id="3818981">string</span><br>
<span class="lineno"></span><span class="op" id="3818988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3818991">func</span>&nbsp;<span class="op" id="3818996">(</span><span class="ident" id="3818997">e</span>&nbsp;<span class="op" id="3818999">*</span><span class="ident" id="3819000">AddrError</span><span class="op" id="3819009">)</span>&nbsp;<span class="ident" id="3819011">Error</span><span class="op" id="3819016">(</span><span class="op" id="3819017">)</span>&nbsp;<span class="builtintype" id="3819019">string</span>&nbsp;<span class="op" id="3819026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819029">if</span>&nbsp;<span class="ident" id="3819032">e</span>&nbsp;<span class="op" id="3819034">==</span>&nbsp;<span class="builtintype" id="3819037">nil</span>&nbsp;<span class="op" id="3819041">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819045">return</span>&nbsp;<span class="string" id="3819052">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3819061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3819064">s</span>&nbsp;<span class="op" id="3819066">:=</span>&nbsp;<span class="ident" id="3819069">e</span><span class="op" id="3819070">.</span><span class="ident" id="3819071">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819076">if</span>&nbsp;<span class="ident" id="3819079">e</span><span class="op" id="3819080">.</span><span class="ident" id="3819081">Addr</span>&nbsp;<span class="op" id="3819086">!=</span>&nbsp;<span class="string" id="3819089">&#34;&#34;</span>&nbsp;<span class="op" id="3819092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3819096">s</span>&nbsp;<span class="op" id="3819098">+=</span>&nbsp;<span class="string" id="3819101">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3819105">+</span>&nbsp;<span class="ident" id="3819107">e</span><span class="op" id="3819108">.</span><span class="ident" id="3819109">Addr</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3819115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819118">return</span>&nbsp;<span class="ident" id="3819125">s</span><br>
<span class="lineno"></span><span class="op" id="3819127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819130">func</span>&nbsp;<span class="op" id="3819135">(</span><span class="ident" id="3819136">e</span>&nbsp;<span class="op" id="3819138">*</span><span class="ident" id="3819139">AddrError</span><span class="op" id="3819148">)</span>&nbsp;<span class="ident" id="3819150">Temporary</span><span class="op" id="3819159">(</span><span class="op" id="3819160">)</span>&nbsp;<span class="builtintype" id="3819162">bool</span>&nbsp;<span class="op" id="3819167">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819170">return</span>&nbsp;<span class="builtintype" id="3819177">false</span><br>
<span class="lineno"></span><span class="op" id="3819183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819186">func</span>&nbsp;<span class="op" id="3819191">(</span><span class="ident" id="3819192">e</span>&nbsp;<span class="op" id="3819194">*</span><span class="ident" id="3819195">AddrError</span><span class="op" id="3819204">)</span>&nbsp;<span class="ident" id="3819206">Timeout</span><span class="op" id="3819213">(</span><span class="op" id="3819214">)</span>&nbsp;<span class="builtintype" id="3819216">bool</span>&nbsp;<span class="op" id="3819221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819224">return</span>&nbsp;<span class="builtintype" id="3819231">false</span><br>
<span class="lineno">370</span><span class="op" id="3819237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819240">type</span>&nbsp;<span class="ident" id="3819245">UnknownNetworkError</span>&nbsp;<span class="builtintype" id="3819265">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819273">func</span>&nbsp;<span class="op" id="3819278">(</span><span class="ident" id="3819279">e</span>&nbsp;<span class="ident" id="3819281">UnknownNetworkError</span><span class="op" id="3819300">)</span>&nbsp;<span class="ident" id="3819302">Error</span><span class="op" id="3819307">(</span><span class="op" id="3819308">)</span>&nbsp;<span class="builtintype" id="3819310">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3819319">{</span>&nbsp;<span class="keyword" id="3819321">return</span>&nbsp;<span class="string" id="3819328">&#34;unknown&nbsp;network&nbsp;&#34;</span>&nbsp;<span class="op" id="3819347">+</span>&nbsp;<span class="builtintype" id="3819349">string</span><span class="op" id="3819355">(</span><span class="ident" id="3819356">e</span><span class="op" id="3819357">)</span>&nbsp;<span class="op" id="3819359">}</span><br>
<span class="lineno">375</span><span class="keyword" id="3819361">func</span>&nbsp;<span class="op" id="3819366">(</span><span class="ident" id="3819367">e</span>&nbsp;<span class="ident" id="3819369">UnknownNetworkError</span><span class="op" id="3819388">)</span>&nbsp;<span class="ident" id="3819390">Temporary</span><span class="op" id="3819399">(</span><span class="op" id="3819400">)</span>&nbsp;<span class="builtintype" id="3819402">bool</span>&nbsp;<span class="op" id="3819407">{</span>&nbsp;<span class="keyword" id="3819409">return</span>&nbsp;<span class="builtintype" id="3819416">false</span>&nbsp;<span class="op" id="3819422">}</span><br>
<span class="lineno"></span><span class="keyword" id="3819424">func</span>&nbsp;<span class="op" id="3819429">(</span><span class="ident" id="3819430">e</span>&nbsp;<span class="ident" id="3819432">UnknownNetworkError</span><span class="op" id="3819451">)</span>&nbsp;<span class="ident" id="3819453">Timeout</span><span class="op" id="3819460">(</span><span class="op" id="3819461">)</span>&nbsp;<span class="builtintype" id="3819463">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3819470">{</span>&nbsp;<span class="keyword" id="3819472">return</span>&nbsp;<span class="builtintype" id="3819479">false</span>&nbsp;<span class="op" id="3819485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819488">type</span>&nbsp;<span class="ident" id="3819493">InvalidAddrError</span>&nbsp;<span class="builtintype" id="3819510">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3819518">func</span>&nbsp;<span class="op" id="3819523">(</span><span class="ident" id="3819524">e</span>&nbsp;<span class="ident" id="3819526">InvalidAddrError</span><span class="op" id="3819542">)</span>&nbsp;<span class="ident" id="3819544">Error</span><span class="op" id="3819549">(</span><span class="op" id="3819550">)</span>&nbsp;<span class="builtintype" id="3819552">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3819561">{</span>&nbsp;<span class="keyword" id="3819563">return</span>&nbsp;<span class="builtintype" id="3819570">string</span><span class="op" id="3819576">(</span><span class="ident" id="3819577">e</span><span class="op" id="3819578">)</span>&nbsp;<span class="op" id="3819580">}</span><br>
<span class="lineno"></span><span class="keyword" id="3819582">func</span>&nbsp;<span class="op" id="3819587">(</span><span class="ident" id="3819588">e</span>&nbsp;<span class="ident" id="3819590">InvalidAddrError</span><span class="op" id="3819606">)</span>&nbsp;<span class="ident" id="3819608">Timeout</span><span class="op" id="3819615">(</span><span class="op" id="3819616">)</span>&nbsp;<span class="builtintype" id="3819618">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3819625">{</span>&nbsp;<span class="keyword" id="3819627">return</span>&nbsp;<span class="builtintype" id="3819634">false</span>&nbsp;<span class="op" id="3819640">}</span><br>
<span class="lineno"></span><span class="keyword" id="3819642">func</span>&nbsp;<span class="op" id="3819647">(</span><span class="ident" id="3819648">e</span>&nbsp;<span class="ident" id="3819650">InvalidAddrError</span><span class="op" id="3819666">)</span>&nbsp;<span class="ident" id="3819668">Temporary</span><span class="op" id="3819677">(</span><span class="op" id="3819678">)</span>&nbsp;<span class="builtintype" id="3819680">bool</span>&nbsp;<span class="op" id="3819685">{</span>&nbsp;<span class="keyword" id="3819687">return</span>&nbsp;<span class="builtintype" id="3819694">false</span>&nbsp;<span class="op" id="3819700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3819703">//&nbsp;DNSConfigError&nbsp;represents&nbsp;an&nbsp;error&nbsp;reading&nbsp;the&nbsp;machine&#39;s&nbsp;DNS&nbsp;configuration.</span><br>
<span class="lineno">385</span><span class="keyword" id="3819782">type</span>&nbsp;<span class="ident" id="3819787">DNSConfigError</span>&nbsp;<span class="keyword" id="3819802">struct</span>&nbsp;<span class="op" id="3819809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3819812">Err</span>&nbsp;<span class="builtintype" id="3819816">error</span><br>
<span class="lineno"></span><span class="op" id="3819822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819825">func</span>&nbsp;<span class="op" id="3819830">(</span><span class="ident" id="3819831">e</span>&nbsp;<span class="op" id="3819833">*</span><span class="ident" id="3819834">DNSConfigError</span><span class="op" id="3819848">)</span>&nbsp;<span class="ident" id="3819850">Error</span><span class="op" id="3819855">(</span><span class="op" id="3819856">)</span>&nbsp;<span class="builtintype" id="3819858">string</span>&nbsp;<span class="op" id="3819865">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3819868">return</span>&nbsp;<span class="string" id="3819875">&#34;error&nbsp;reading&nbsp;DNS&nbsp;config:&nbsp;&#34;</span>&nbsp;<span class="op" id="3819904">+</span>&nbsp;<span class="ident" id="3819906">e</span><span class="op" id="3819907">.</span><span class="ident" id="3819908">Err</span><span class="op" id="3819911">.</span><span class="ident" id="3819912">Error</span><span class="op" id="3819917">(</span><span class="op" id="3819918">)</span><br>
<span class="lineno"></span><span class="op" id="3819920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3819923">func</span>&nbsp;<span class="op" id="3819928">(</span><span class="ident" id="3819929">e</span>&nbsp;<span class="op" id="3819931">*</span><span class="ident" id="3819932">DNSConfigError</span><span class="op" id="3819946">)</span>&nbsp;<span class="ident" id="3819948">Timeout</span><span class="op" id="3819955">(</span><span class="op" id="3819956">)</span>&nbsp;<span class="builtintype" id="3819958">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3819965">{</span>&nbsp;<span class="keyword" id="3819967">return</span>&nbsp;<span class="builtintype" id="3819974">false</span>&nbsp;<span class="op" id="3819980">}</span><br>
<span class="lineno"></span><span class="keyword" id="3819982">func</span>&nbsp;<span class="op" id="3819987">(</span><span class="ident" id="3819988">e</span>&nbsp;<span class="op" id="3819990">*</span><span class="ident" id="3819991">DNSConfigError</span><span class="op" id="3820005">)</span>&nbsp;<span class="ident" id="3820007">Temporary</span><span class="op" id="3820016">(</span><span class="op" id="3820017">)</span>&nbsp;<span class="builtintype" id="3820019">bool</span>&nbsp;<span class="op" id="3820024">{</span>&nbsp;<span class="keyword" id="3820026">return</span>&nbsp;<span class="builtintype" id="3820033">false</span>&nbsp;<span class="op" id="3820039">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="3820042">type</span>&nbsp;<span class="ident" id="3820047">writerOnly</span>&nbsp;<span class="keyword" id="3820058">struct</span>&nbsp;<span class="op" id="3820065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3820068">io</span><span class="op" id="3820070">.</span><span class="ident" id="3820071">Writer</span><br>
<span class="lineno"></span><span class="op" id="3820078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="3820081">//&nbsp;Fallback&nbsp;implementation&nbsp;of&nbsp;io.ReaderFrom&#39;s&nbsp;ReadFrom,&nbsp;when&nbsp;sendfile&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3820157">//&nbsp;applicable.</span><br>
<span class="lineno"></span><span class="keyword" id="3820172">func</span>&nbsp;<span class="ident" id="3820177">genericReadFrom</span><span class="op" id="3820192">(</span><span class="ident" id="3820193">w</span>&nbsp;<span class="ident" id="3820195">io</span><span class="op" id="3820197">.</span><span class="ident" id="3820198">Writer</span><span class="op" id="3820204">,</span>&nbsp;<span class="ident" id="3820206">r</span>&nbsp;<span class="ident" id="3820208">io</span><span class="op" id="3820210">.</span><span class="ident" id="3820211">Reader</span><span class="op" id="3820217">)</span>&nbsp;<span class="op" id="3820219">(</span><span class="ident" id="3820220">n</span>&nbsp;<span class="builtintype" id="3820222">int64</span><span class="op" id="3820227">,</span>&nbsp;<span class="ident" id="3820229">err</span>&nbsp;<span class="builtintype" id="3820233">error</span><span class="op" id="3820238">)</span>&nbsp;<span class="op" id="3820240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3820243">//&nbsp;Use&nbsp;wrapper&nbsp;to&nbsp;hide&nbsp;existing&nbsp;r.ReadFrom&nbsp;from&nbsp;io.Copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3820301">return</span>&nbsp;<span class="ident" id="3820308">io</span><span class="op" id="3820310">.</span><span class="ident" id="3820311">Copy</span><span class="op" id="3820315">(</span><span class="ident" id="3820316">writerOnly</span><span class="op" id="3820326">{</span><span class="ident" id="3820327">w</span><span class="op" id="3820328">}</span><span class="op" id="3820329">,</span>&nbsp;<span class="ident" id="3820331">r</span><span class="op" id="3820332">)</span><br>
<span class="lineno">405</span><span class="op" id="3820334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3820337">//&nbsp;Limit&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;cgo-using&nbsp;goroutines,&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3820401">//&nbsp;each&nbsp;will&nbsp;block&nbsp;an&nbsp;entire&nbsp;operating&nbsp;system&nbsp;thread.&nbsp;The&nbsp;usual&nbsp;culprit</span><br>
<span class="lineno"></span><span class="comment" id="3820473">//&nbsp;is&nbsp;resolving&nbsp;many&nbsp;DNS&nbsp;names&nbsp;in&nbsp;separate&nbsp;goroutines&nbsp;but&nbsp;the&nbsp;DNS</span><br>
<span class="lineno">410</span><span class="comment" id="3820539">//&nbsp;server&nbsp;is&nbsp;not&nbsp;responding.&nbsp;Then&nbsp;the&nbsp;many&nbsp;lookups&nbsp;each&nbsp;use&nbsp;a&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3820611">//&nbsp;thread,&nbsp;and&nbsp;the&nbsp;system&nbsp;or&nbsp;the&nbsp;program&nbsp;runs&nbsp;out&nbsp;of&nbsp;threads.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3820674">var</span>&nbsp;<span class="ident" id="3820678">threadLimit</span>&nbsp;<span class="op" id="3820690">=</span>&nbsp;<span class="builtinfunc" id="3820692">make</span><span class="op" id="3820696">(</span><span class="keyword" id="3820697">chan</span>&nbsp;<span class="keyword" id="3820702">struct</span><span class="op" id="3820708">{</span><span class="op" id="3820709">}</span><span class="op" id="3820710">,</span>&nbsp;<span class="num" id="3820712">500</span><span class="op" id="3820715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3820718">//&nbsp;Using&nbsp;send&nbsp;for&nbsp;acquire&nbsp;is&nbsp;fine&nbsp;here&nbsp;because&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="3820787">//&nbsp;to&nbsp;protect&nbsp;any&nbsp;memory.&nbsp;All&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="3820859">//&nbsp;making&nbsp;calls&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3820887">func</span>&nbsp;<span class="ident" id="3820892">acquireThread</span><span class="op" id="3820905">(</span><span class="op" id="3820906">)</span>&nbsp;<span class="op" id="3820908">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3820911">threadLimit</span>&nbsp;<span class="op" id="3820923">&lt;-</span>&nbsp;<span class="keyword" id="3820926">struct</span><span class="op" id="3820932">{</span><span class="op" id="3820933">}</span><span class="op" id="3820934">{</span><span class="op" id="3820935">}</span><br>
<span class="lineno"></span><span class="op" id="3820937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3820940">func</span>&nbsp;<span class="ident" id="3820945">releaseThread</span><span class="op" id="3820958">(</span><span class="op" id="3820959">)</span>&nbsp;<span class="op" id="3820961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3820964">&lt;-</span><span class="ident" id="3820966">threadLimit</span><br>
<span class="lineno">425</span><span class="op" id="3820978">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
