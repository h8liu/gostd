<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5036319">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5036374">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5036428">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5036479">package</span>&nbsp;<span class="ident" id="5036487">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5036492">import</span>&nbsp;<span class="op" id="5036499">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5036502">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5036511">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5036521">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5036527">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5036538">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5036545">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5036548">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="5036617">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5036689">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="5036720">const</span>&nbsp;<span class="ident" id="5036726">tooBig</span>&nbsp;<span class="op" id="5036733">=</span>&nbsp;<span class="num" id="5036735">1</span>&nbsp;<span class="op" id="5036737">&lt;&lt;</span>&nbsp;<span class="num" id="5036740">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5036744">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5036820">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5036852">type</span>&nbsp;<span class="ident" id="5036857">Decoder</span>&nbsp;<span class="keyword" id="5036865">struct</span>&nbsp;<span class="op" id="5036872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5036875">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5036888">sync</span><span class="op" id="5036892">.</span><span class="ident" id="5036893">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5036928">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5036970">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5036983">io</span><span class="op" id="5036985">.</span><span class="ident" id="5036986">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037023">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037046">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5037059">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037099">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037140">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5037153">map</span><span class="op" id="5037156">[</span><span class="ident" id="5037157">typeId</span><span class="op" id="5037163">]</span><span class="op" id="5037164">*</span><span class="ident" id="5037165">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037193">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037237">decoderCache</span>&nbsp;<span class="keyword" id="5037250">map</span><span class="op" id="5037253">[</span><span class="ident" id="5037254">reflect</span><span class="op" id="5037261">.</span><span class="ident" id="5037262">Type</span><span class="op" id="5037266">]</span><span class="keyword" id="5037267">map</span><span class="op" id="5037270">[</span><span class="ident" id="5037271">typeId</span><span class="op" id="5037277">]</span><span class="op" id="5037278">*</span><span class="op" id="5037279">*</span><span class="ident" id="5037280">decEngine</span>&nbsp;<span class="comment" id="5037290">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037320">ignorerCache</span>&nbsp;<span class="keyword" id="5037333">map</span><span class="op" id="5037336">[</span><span class="ident" id="5037337">typeId</span><span class="op" id="5037343">]</span><span class="op" id="5037344">*</span><span class="op" id="5037345">*</span><span class="ident" id="5037346">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037373">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037403">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5037416">*</span><span class="ident" id="5037417">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037456">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037508">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5037521">[</span><span class="op" id="5037522">]</span><span class="builtintype" id="5037523">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5037561">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037615">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5037628">error</span><br>
<span class="lineno"></span><span class="op" id="5037634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5037637">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="5037704">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5037775">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5037792">func</span>&nbsp;<span class="ident" id="5037797">NewDecoder</span><span class="op" id="5037807">(</span><span class="ident" id="5037808">r</span>&nbsp;<span class="ident" id="5037810">io</span><span class="op" id="5037812">.</span><span class="ident" id="5037813">Reader</span><span class="op" id="5037819">)</span>&nbsp;<span class="op" id="5037821">*</span><span class="ident" id="5037822">Decoder</span>&nbsp;<span class="op" id="5037830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037833">dec</span>&nbsp;<span class="op" id="5037837">:=</span>&nbsp;<span class="builtinfunc" id="5037840">new</span><span class="op" id="5037843">(</span><span class="ident" id="5037844">Decoder</span><span class="op" id="5037851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5037854">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5037931">if</span>&nbsp;<span class="ident" id="5037934">_</span><span class="op" id="5037935">,</span>&nbsp;<span class="ident" id="5037937">ok</span>&nbsp;<span class="op" id="5037940">:=</span>&nbsp;<span class="ident" id="5037943">r</span><span class="op" id="5037944">.</span><span class="op" id="5037945">(</span><span class="ident" id="5037946">io</span><span class="op" id="5037948">.</span><span class="ident" id="5037949">ByteReader</span><span class="op" id="5037959">)</span><span class="op" id="5037960">;</span>&nbsp;<span class="op" id="5037962">!</span><span class="ident" id="5037963">ok</span>&nbsp;<span class="op" id="5037966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037970">r</span>&nbsp;<span class="op" id="5037972">=</span>&nbsp;<span class="ident" id="5037974">bufio</span><span class="op" id="5037979">.</span><span class="ident" id="5037980">NewReader</span><span class="op" id="5037989">(</span><span class="ident" id="5037990">r</span><span class="op" id="5037991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5037994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5037997">dec</span><span class="op" id="5038000">.</span><span class="ident" id="5038001">r</span>&nbsp;<span class="op" id="5038003">=</span>&nbsp;<span class="ident" id="5038005">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038008">dec</span><span class="op" id="5038011">.</span><span class="ident" id="5038012">wireType</span>&nbsp;<span class="op" id="5038021">=</span>&nbsp;<span class="builtinfunc" id="5038023">make</span><span class="op" id="5038027">(</span><span class="keyword" id="5038028">map</span><span class="op" id="5038031">[</span><span class="ident" id="5038032">typeId</span><span class="op" id="5038038">]</span><span class="op" id="5038039">*</span><span class="ident" id="5038040">wireType</span><span class="op" id="5038048">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038051">dec</span><span class="op" id="5038054">.</span><span class="ident" id="5038055">decoderCache</span>&nbsp;<span class="op" id="5038068">=</span>&nbsp;<span class="builtinfunc" id="5038070">make</span><span class="op" id="5038074">(</span><span class="keyword" id="5038075">map</span><span class="op" id="5038078">[</span><span class="ident" id="5038079">reflect</span><span class="op" id="5038086">.</span><span class="ident" id="5038087">Type</span><span class="op" id="5038091">]</span><span class="keyword" id="5038092">map</span><span class="op" id="5038095">[</span><span class="ident" id="5038096">typeId</span><span class="op" id="5038102">]</span><span class="op" id="5038103">*</span><span class="op" id="5038104">*</span><span class="ident" id="5038105">decEngine</span><span class="op" id="5038114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038117">dec</span><span class="op" id="5038120">.</span><span class="ident" id="5038121">ignorerCache</span>&nbsp;<span class="op" id="5038134">=</span>&nbsp;<span class="builtinfunc" id="5038136">make</span><span class="op" id="5038140">(</span><span class="keyword" id="5038141">map</span><span class="op" id="5038144">[</span><span class="ident" id="5038145">typeId</span><span class="op" id="5038151">]</span><span class="op" id="5038152">*</span><span class="op" id="5038153">*</span><span class="ident" id="5038154">decEngine</span><span class="op" id="5038163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038166">dec</span><span class="op" id="5038169">.</span><span class="ident" id="5038170">countBuf</span>&nbsp;<span class="op" id="5038179">=</span>&nbsp;<span class="builtinfunc" id="5038181">make</span><span class="op" id="5038185">(</span><span class="op" id="5038186">[</span><span class="op" id="5038187">]</span><span class="builtintype" id="5038188">byte</span><span class="op" id="5038192">,</span>&nbsp;<span class="num" id="5038194">9</span><span class="op" id="5038195">)</span>&nbsp;<span class="comment" id="5038197">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5038253">return</span>&nbsp;<span class="ident" id="5038260">dec</span><br>
<span class="lineno">50</span><span class="op" id="5038264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5038267">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5038311">func</span>&nbsp;<span class="op" id="5038316">(</span><span class="ident" id="5038317">dec</span>&nbsp;<span class="op" id="5038321">*</span><span class="ident" id="5038322">Decoder</span><span class="op" id="5038329">)</span>&nbsp;<span class="ident" id="5038331">recvType</span><span class="op" id="5038339">(</span><span class="ident" id="5038340">id</span>&nbsp;<span class="ident" id="5038343">typeId</span><span class="op" id="5038349">)</span>&nbsp;<span class="op" id="5038351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5038354">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5038407">if</span>&nbsp;<span class="ident" id="5038410">id</span>&nbsp;<span class="op" id="5038413">&lt;</span>&nbsp;<span class="ident" id="5038415">firstUserId</span>&nbsp;<span class="op" id="5038427">||</span>&nbsp;<span class="ident" id="5038430">dec</span><span class="op" id="5038433">.</span><span class="ident" id="5038434">wireType</span><span class="op" id="5038442">[</span><span class="ident" id="5038443">id</span><span class="op" id="5038445">]</span>&nbsp;<span class="op" id="5038447">!=</span>&nbsp;<span class="ident" id="5038450">nil</span>&nbsp;<span class="op" id="5038454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038458">dec</span><span class="op" id="5038461">.</span><span class="ident" id="5038462">err</span>&nbsp;<span class="op" id="5038466">=</span>&nbsp;<span class="ident" id="5038468">errors</span><span class="op" id="5038474">.</span><span class="ident" id="5038475">New</span><span class="op" id="5038478">(</span><span class="string" id="5038479">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="5038509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5038513">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5038521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5038525">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038535">wire</span>&nbsp;<span class="op" id="5038540">:=</span>&nbsp;<span class="builtinfunc" id="5038543">new</span><span class="op" id="5038546">(</span><span class="ident" id="5038547">wireType</span><span class="op" id="5038555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038558">dec</span><span class="op" id="5038561">.</span><span class="ident" id="5038562">decodeValue</span><span class="op" id="5038573">(</span><span class="ident" id="5038574">tWireType</span><span class="op" id="5038583">,</span>&nbsp;<span class="ident" id="5038585">reflect</span><span class="op" id="5038592">.</span><span class="ident" id="5038593">ValueOf</span><span class="op" id="5038600">(</span><span class="ident" id="5038601">wire</span><span class="op" id="5038605">)</span><span class="op" id="5038606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5038609">if</span>&nbsp;<span class="ident" id="5038612">dec</span><span class="op" id="5038615">.</span><span class="ident" id="5038616">err</span>&nbsp;<span class="op" id="5038620">!=</span>&nbsp;<span class="ident" id="5038623">nil</span>&nbsp;<span class="op" id="5038627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5038631">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5038639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5038642">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038677">dec</span><span class="op" id="5038680">.</span><span class="ident" id="5038681">wireType</span><span class="op" id="5038689">[</span><span class="ident" id="5038690">id</span><span class="op" id="5038692">]</span>&nbsp;<span class="op" id="5038694">=</span>&nbsp;<span class="ident" id="5038696">wire</span><br>
<span class="lineno"></span><span class="op" id="5038701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5038704">var</span>&nbsp;<span class="ident" id="5038708">errBadCount</span>&nbsp;<span class="op" id="5038720">=</span>&nbsp;<span class="ident" id="5038722">errors</span><span class="op" id="5038728">.</span><span class="ident" id="5038729">New</span><span class="op" id="5038732">(</span><span class="string" id="5038733">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="5038757">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5038760">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="5038846">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="5038934">func</span>&nbsp;<span class="op" id="5038939">(</span><span class="ident" id="5038940">dec</span>&nbsp;<span class="op" id="5038944">*</span><span class="ident" id="5038945">Decoder</span><span class="op" id="5038952">)</span>&nbsp;<span class="ident" id="5038954">recvMessage</span><span class="op" id="5038965">(</span><span class="op" id="5038966">)</span>&nbsp;<span class="builtintype" id="5038968">bool</span>&nbsp;<span class="op" id="5038973">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5038976">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5038994">nbytes</span><span class="op" id="5039000">,</span>&nbsp;<span class="ident" id="5039002">_</span><span class="op" id="5039003">,</span>&nbsp;<span class="ident" id="5039005">err</span>&nbsp;<span class="op" id="5039009">:=</span>&nbsp;<span class="ident" id="5039012">decodeUintReader</span><span class="op" id="5039028">(</span><span class="ident" id="5039029">dec</span><span class="op" id="5039032">.</span><span class="ident" id="5039033">r</span><span class="op" id="5039034">,</span>&nbsp;<span class="ident" id="5039036">dec</span><span class="op" id="5039039">.</span><span class="ident" id="5039040">countBuf</span><span class="op" id="5039048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039051">if</span>&nbsp;<span class="ident" id="5039054">err</span>&nbsp;<span class="op" id="5039058">!=</span>&nbsp;<span class="ident" id="5039061">nil</span>&nbsp;<span class="op" id="5039065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039069">dec</span><span class="op" id="5039072">.</span><span class="ident" id="5039073">err</span>&nbsp;<span class="op" id="5039077">=</span>&nbsp;<span class="ident" id="5039079">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039085">return</span>&nbsp;<span class="builtintype" id="5039092">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039102">if</span>&nbsp;<span class="ident" id="5039105">nbytes</span>&nbsp;<span class="op" id="5039112">&gt;=</span>&nbsp;<span class="ident" id="5039115">tooBig</span>&nbsp;<span class="op" id="5039122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039126">dec</span><span class="op" id="5039129">.</span><span class="ident" id="5039130">err</span>&nbsp;<span class="op" id="5039134">=</span>&nbsp;<span class="ident" id="5039136">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039150">return</span>&nbsp;<span class="builtintype" id="5039157">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039164">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039167">dec</span><span class="op" id="5039170">.</span><span class="ident" id="5039171">readMessage</span><span class="op" id="5039182">(</span><span class="builtintype" id="5039183">int</span><span class="op" id="5039186">(</span><span class="ident" id="5039187">nbytes</span><span class="op" id="5039193">)</span><span class="op" id="5039194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039197">return</span>&nbsp;<span class="ident" id="5039204">dec</span><span class="op" id="5039207">.</span><span class="ident" id="5039208">err</span>&nbsp;<span class="op" id="5039212">==</span>&nbsp;<span class="ident" id="5039215">nil</span><br>
<span class="lineno"></span><span class="op" id="5039219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5039222">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="5039281">func</span>&nbsp;<span class="op" id="5039286">(</span><span class="ident" id="5039287">dec</span>&nbsp;<span class="op" id="5039291">*</span><span class="ident" id="5039292">Decoder</span><span class="op" id="5039299">)</span>&nbsp;<span class="ident" id="5039301">readMessage</span><span class="op" id="5039312">(</span><span class="ident" id="5039313">nbytes</span>&nbsp;<span class="builtintype" id="5039320">int</span><span class="op" id="5039323">)</span>&nbsp;<span class="op" id="5039325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039328">if</span>&nbsp;<span class="ident" id="5039331">dec</span><span class="op" id="5039334">.</span><span class="ident" id="5039335">buf</span><span class="op" id="5039338">.</span><span class="ident" id="5039339">Len</span><span class="op" id="5039342">(</span><span class="op" id="5039343">)</span>&nbsp;<span class="op" id="5039345">!=</span>&nbsp;<span class="num" id="5039348">0</span>&nbsp;<span class="op" id="5039350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039354">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5039398">panic</span><span class="op" id="5039403">(</span><span class="string" id="5039404">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="5039430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039433">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039436">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039454">dec</span><span class="op" id="5039457">.</span><span class="ident" id="5039458">buf</span><span class="op" id="5039461">.</span><span class="ident" id="5039462">Size</span><span class="op" id="5039466">(</span><span class="ident" id="5039467">nbytes</span><span class="op" id="5039473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039476">_</span><span class="op" id="5039477">,</span>&nbsp;<span class="ident" id="5039479">dec</span><span class="op" id="5039482">.</span><span class="ident" id="5039483">err</span>&nbsp;<span class="op" id="5039487">=</span>&nbsp;<span class="ident" id="5039489">io</span><span class="op" id="5039491">.</span><span class="ident" id="5039492">ReadFull</span><span class="op" id="5039500">(</span><span class="ident" id="5039501">dec</span><span class="op" id="5039504">.</span><span class="ident" id="5039505">r</span><span class="op" id="5039506">,</span>&nbsp;<span class="ident" id="5039508">dec</span><span class="op" id="5039511">.</span><span class="ident" id="5039512">buf</span><span class="op" id="5039515">.</span><span class="ident" id="5039516">Bytes</span><span class="op" id="5039521">(</span><span class="op" id="5039522">)</span><span class="op" id="5039523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039526">if</span>&nbsp;<span class="ident" id="5039529">dec</span><span class="op" id="5039532">.</span><span class="ident" id="5039533">err</span>&nbsp;<span class="op" id="5039537">!=</span>&nbsp;<span class="ident" id="5039540">nil</span>&nbsp;<span class="op" id="5039544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039548">if</span>&nbsp;<span class="ident" id="5039551">dec</span><span class="op" id="5039554">.</span><span class="ident" id="5039555">err</span>&nbsp;<span class="op" id="5039559">==</span>&nbsp;<span class="ident" id="5039562">io</span><span class="op" id="5039564">.</span><span class="ident" id="5039565">EOF</span>&nbsp;<span class="op" id="5039569">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039574">dec</span><span class="op" id="5039577">.</span><span class="ident" id="5039578">err</span>&nbsp;<span class="op" id="5039582">=</span>&nbsp;<span class="ident" id="5039584">io</span><span class="op" id="5039586">.</span><span class="ident" id="5039587">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039609">}</span><br>
<span class="lineno"></span><span class="op" id="5039611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5039614">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="5039695">func</span>&nbsp;<span class="ident" id="5039700">toInt</span><span class="op" id="5039705">(</span><span class="ident" id="5039706">x</span>&nbsp;<span class="ident" id="5039708">uint64</span><span class="op" id="5039714">)</span>&nbsp;<span class="ident" id="5039716">int64</span>&nbsp;<span class="op" id="5039722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039725">i</span>&nbsp;<span class="op" id="5039727">:=</span>&nbsp;<span class="ident" id="5039730">int64</span><span class="op" id="5039735">(</span><span class="ident" id="5039736">x</span>&nbsp;<span class="op" id="5039738">&gt;&gt;</span>&nbsp;<span class="num" id="5039741">1</span><span class="op" id="5039742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039745">if</span>&nbsp;<span class="ident" id="5039748">x</span><span class="op" id="5039749">&amp;</span><span class="num" id="5039750">1</span>&nbsp;<span class="op" id="5039752">!=</span>&nbsp;<span class="num" id="5039755">0</span>&nbsp;<span class="op" id="5039757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039761">i</span>&nbsp;<span class="op" id="5039763">=</span>&nbsp;<span class="op" id="5039765">^</span><span class="ident" id="5039766">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039772">return</span>&nbsp;<span class="ident" id="5039779">i</span><br>
<span class="lineno"></span><span class="op" id="5039781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5039784">func</span>&nbsp;<span class="op" id="5039789">(</span><span class="ident" id="5039790">dec</span>&nbsp;<span class="op" id="5039794">*</span><span class="ident" id="5039795">Decoder</span><span class="op" id="5039802">)</span>&nbsp;<span class="ident" id="5039804">nextInt</span><span class="op" id="5039811">(</span><span class="op" id="5039812">)</span>&nbsp;<span class="ident" id="5039814">int64</span>&nbsp;<span class="op" id="5039820">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039823">n</span><span class="op" id="5039824">,</span>&nbsp;<span class="ident" id="5039826">_</span><span class="op" id="5039827">,</span>&nbsp;<span class="ident" id="5039829">err</span>&nbsp;<span class="op" id="5039833">:=</span>&nbsp;<span class="ident" id="5039836">decodeUintReader</span><span class="op" id="5039852">(</span><span class="op" id="5039853">&amp;</span><span class="ident" id="5039854">dec</span><span class="op" id="5039857">.</span><span class="ident" id="5039858">buf</span><span class="op" id="5039861">,</span>&nbsp;<span class="ident" id="5039863">dec</span><span class="op" id="5039866">.</span><span class="ident" id="5039867">countBuf</span><span class="op" id="5039875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039878">if</span>&nbsp;<span class="ident" id="5039881">err</span>&nbsp;<span class="op" id="5039885">!=</span>&nbsp;<span class="ident" id="5039888">nil</span>&nbsp;<span class="op" id="5039892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039896">dec</span><span class="op" id="5039899">.</span><span class="ident" id="5039900">err</span>&nbsp;<span class="op" id="5039904">=</span>&nbsp;<span class="ident" id="5039906">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5039911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5039914">return</span>&nbsp;<span class="ident" id="5039921">toInt</span><span class="op" id="5039926">(</span><span class="ident" id="5039927">n</span><span class="op" id="5039928">)</span><br>
<span class="lineno">120</span><span class="op" id="5039930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5039933">func</span>&nbsp;<span class="op" id="5039938">(</span><span class="ident" id="5039939">dec</span>&nbsp;<span class="op" id="5039943">*</span><span class="ident" id="5039944">Decoder</span><span class="op" id="5039951">)</span>&nbsp;<span class="ident" id="5039953">nextUint</span><span class="op" id="5039961">(</span><span class="op" id="5039962">)</span>&nbsp;<span class="ident" id="5039964">uint64</span>&nbsp;<span class="op" id="5039971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039974">n</span><span class="op" id="5039975">,</span>&nbsp;<span class="ident" id="5039977">_</span><span class="op" id="5039978">,</span>&nbsp;<span class="ident" id="5039980">err</span>&nbsp;<span class="op" id="5039984">:=</span>&nbsp;<span class="ident" id="5039987">decodeUintReader</span><span class="op" id="5040003">(</span><span class="op" id="5040004">&amp;</span><span class="ident" id="5040005">dec</span><span class="op" id="5040008">.</span><span class="ident" id="5040009">buf</span><span class="op" id="5040012">,</span>&nbsp;<span class="ident" id="5040014">dec</span><span class="op" id="5040017">.</span><span class="ident" id="5040018">countBuf</span><span class="op" id="5040026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040029">if</span>&nbsp;<span class="ident" id="5040032">err</span>&nbsp;<span class="op" id="5040036">!=</span>&nbsp;<span class="ident" id="5040039">nil</span>&nbsp;<span class="op" id="5040043">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040047">dec</span><span class="op" id="5040050">.</span><span class="ident" id="5040051">err</span>&nbsp;<span class="op" id="5040055">=</span>&nbsp;<span class="ident" id="5040057">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5040062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040065">return</span>&nbsp;<span class="ident" id="5040072">n</span><br>
<span class="lineno"></span><span class="op" id="5040074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5040077">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="5040107">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="5040123">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="5040169">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5040233">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="5040299">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5040364">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="5040390">func</span>&nbsp;<span class="op" id="5040395">(</span><span class="ident" id="5040396">dec</span>&nbsp;<span class="op" id="5040400">*</span><span class="ident" id="5040401">Decoder</span><span class="op" id="5040408">)</span>&nbsp;<span class="ident" id="5040410">decodeTypeSequence</span><span class="op" id="5040428">(</span><span class="ident" id="5040429">isInterface</span>&nbsp;<span class="builtintype" id="5040441">bool</span><span class="op" id="5040445">)</span>&nbsp;<span class="ident" id="5040447">typeId</span>&nbsp;<span class="op" id="5040454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040457">for</span>&nbsp;<span class="ident" id="5040461">dec</span><span class="op" id="5040464">.</span><span class="ident" id="5040465">err</span>&nbsp;<span class="op" id="5040469">==</span>&nbsp;<span class="ident" id="5040472">nil</span>&nbsp;<span class="op" id="5040476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040480">if</span>&nbsp;<span class="ident" id="5040483">dec</span><span class="op" id="5040486">.</span><span class="ident" id="5040487">buf</span><span class="op" id="5040490">.</span><span class="ident" id="5040491">Len</span><span class="op" id="5040494">(</span><span class="op" id="5040495">)</span>&nbsp;<span class="op" id="5040497">==</span>&nbsp;<span class="num" id="5040500">0</span>&nbsp;<span class="op" id="5040502">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040507">if</span>&nbsp;<span class="op" id="5040510">!</span><span class="ident" id="5040511">dec</span><span class="op" id="5040514">.</span><span class="ident" id="5040515">recvMessage</span><span class="op" id="5040526">(</span><span class="op" id="5040527">)</span>&nbsp;<span class="op" id="5040529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040535">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5040544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5040548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040552">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040576">id</span>&nbsp;<span class="op" id="5040579">:=</span>&nbsp;<span class="ident" id="5040582">typeId</span><span class="op" id="5040588">(</span><span class="ident" id="5040589">dec</span><span class="op" id="5040592">.</span><span class="ident" id="5040593">nextInt</span><span class="op" id="5040600">(</span><span class="op" id="5040601">)</span><span class="op" id="5040602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040606">if</span>&nbsp;<span class="ident" id="5040609">id</span>&nbsp;<span class="op" id="5040612">&gt;=</span>&nbsp;<span class="num" id="5040615">0</span>&nbsp;<span class="op" id="5040617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040622">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040643">return</span>&nbsp;<span class="ident" id="5040650">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5040655">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040659">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040699">dec</span><span class="op" id="5040702">.</span><span class="ident" id="5040703">recvType</span><span class="op" id="5040711">(</span><span class="op" id="5040712">-</span><span class="ident" id="5040713">id</span><span class="op" id="5040715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040719">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040780">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040838">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5040898">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040937">if</span>&nbsp;<span class="ident" id="5040940">dec</span><span class="op" id="5040943">.</span><span class="ident" id="5040944">buf</span><span class="op" id="5040947">.</span><span class="ident" id="5040948">Len</span><span class="op" id="5040951">(</span><span class="op" id="5040952">)</span>&nbsp;<span class="op" id="5040954">&gt;</span>&nbsp;<span class="num" id="5040956">0</span>&nbsp;<span class="op" id="5040958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5040963">if</span>&nbsp;<span class="op" id="5040966">!</span><span class="ident" id="5040967">isInterface</span>&nbsp;<span class="op" id="5040979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040985">dec</span><span class="op" id="5040988">.</span><span class="ident" id="5040989">err</span>&nbsp;<span class="op" id="5040993">=</span>&nbsp;<span class="ident" id="5040995">errors</span><span class="op" id="5041001">.</span><span class="ident" id="5041002">New</span><span class="op" id="5041005">(</span><span class="string" id="5041006">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="5041028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041034">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5041043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041048">dec</span><span class="op" id="5041051">.</span><span class="ident" id="5041052">nextUint</span><span class="op" id="5041060">(</span><span class="op" id="5041061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5041065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5041068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041071">return</span>&nbsp;<span class="op" id="5041078">-</span><span class="num" id="5041079">1</span><br>
<span class="lineno">165</span><span class="op" id="5041081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041084">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="5041148">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5041208">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="5041264">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5041315">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="5041364">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5041417">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="5041439">func</span>&nbsp;<span class="op" id="5041444">(</span><span class="ident" id="5041445">dec</span>&nbsp;<span class="op" id="5041449">*</span><span class="ident" id="5041450">Decoder</span><span class="op" id="5041457">)</span>&nbsp;<span class="ident" id="5041459">Decode</span><span class="op" id="5041465">(</span><span class="ident" id="5041466">e</span>&nbsp;<span class="keyword" id="5041468">interface</span><span class="op" id="5041477">{</span><span class="op" id="5041478">}</span><span class="op" id="5041479">)</span>&nbsp;<span class="builtintype" id="5041481">error</span>&nbsp;<span class="op" id="5041487">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041490">if</span>&nbsp;<span class="ident" id="5041493">e</span>&nbsp;<span class="op" id="5041495">==</span>&nbsp;<span class="ident" id="5041498">nil</span>&nbsp;<span class="op" id="5041502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041506">return</span>&nbsp;<span class="ident" id="5041513">dec</span><span class="op" id="5041516">.</span><span class="ident" id="5041517">DecodeValue</span><span class="op" id="5041528">(</span><span class="ident" id="5041529">reflect</span><span class="op" id="5041536">.</span><span class="ident" id="5041537">Value</span><span class="op" id="5041542">{</span><span class="op" id="5041543">}</span><span class="op" id="5041544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5041547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041550">value</span>&nbsp;<span class="op" id="5041556">:=</span>&nbsp;<span class="ident" id="5041559">reflect</span><span class="op" id="5041566">.</span><span class="ident" id="5041567">ValueOf</span><span class="op" id="5041574">(</span><span class="ident" id="5041575">e</span><span class="op" id="5041576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5041579">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5041649">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041704">if</span>&nbsp;<span class="ident" id="5041707">value</span><span class="op" id="5041712">.</span><span class="ident" id="5041713">Type</span><span class="op" id="5041717">(</span><span class="op" id="5041718">)</span><span class="op" id="5041719">.</span><span class="ident" id="5041720">Kind</span><span class="op" id="5041724">(</span><span class="op" id="5041725">)</span>&nbsp;<span class="op" id="5041727">!=</span>&nbsp;<span class="ident" id="5041730">reflect</span><span class="op" id="5041737">.</span><span class="ident" id="5041738">Ptr</span>&nbsp;<span class="op" id="5041742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041746">dec</span><span class="op" id="5041749">.</span><span class="ident" id="5041750">err</span>&nbsp;<span class="op" id="5041754">=</span>&nbsp;<span class="ident" id="5041756">errors</span><span class="op" id="5041762">.</span><span class="ident" id="5041763">New</span><span class="op" id="5041766">(</span><span class="string" id="5041767">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="5041810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041814">return</span>&nbsp;<span class="ident" id="5041821">dec</span><span class="op" id="5041824">.</span><span class="ident" id="5041825">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5041830">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041833">return</span>&nbsp;<span class="ident" id="5041840">dec</span><span class="op" id="5041843">.</span><span class="ident" id="5041844">DecodeValue</span><span class="op" id="5041855">(</span><span class="ident" id="5041856">value</span><span class="op" id="5041861">)</span><br>
<span class="lineno"></span><span class="op" id="5041863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041866">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5041925">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="5042014">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="5042088">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="5042164">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5042222">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5042244">func</span>&nbsp;<span class="op" id="5042249">(</span><span class="ident" id="5042250">dec</span>&nbsp;<span class="op" id="5042254">*</span><span class="ident" id="5042255">Decoder</span><span class="op" id="5042262">)</span>&nbsp;<span class="ident" id="5042264">DecodeValue</span><span class="op" id="5042275">(</span><span class="ident" id="5042276">v</span>&nbsp;<span class="ident" id="5042278">reflect</span><span class="op" id="5042285">.</span><span class="ident" id="5042286">Value</span><span class="op" id="5042291">)</span>&nbsp;<span class="builtintype" id="5042293">error</span>&nbsp;<span class="op" id="5042299">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042302">if</span>&nbsp;<span class="ident" id="5042305">v</span><span class="op" id="5042306">.</span><span class="ident" id="5042307">IsValid</span><span class="op" id="5042314">(</span><span class="op" id="5042315">)</span>&nbsp;<span class="op" id="5042317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042321">if</span>&nbsp;<span class="ident" id="5042324">v</span><span class="op" id="5042325">.</span><span class="ident" id="5042326">Kind</span><span class="op" id="5042330">(</span><span class="op" id="5042331">)</span>&nbsp;<span class="op" id="5042333">==</span>&nbsp;<span class="ident" id="5042336">reflect</span><span class="op" id="5042343">.</span><span class="ident" id="5042344">Ptr</span>&nbsp;<span class="op" id="5042348">&amp;&amp;</span>&nbsp;<span class="op" id="5042351">!</span><span class="ident" id="5042352">v</span><span class="op" id="5042353">.</span><span class="ident" id="5042354">IsNil</span><span class="op" id="5042359">(</span><span class="op" id="5042360">)</span>&nbsp;<span class="op" id="5042362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5042367">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042418">}</span>&nbsp;<span class="keyword" id="5042420">else</span>&nbsp;<span class="keyword" id="5042425">if</span>&nbsp;<span class="op" id="5042428">!</span><span class="ident" id="5042429">v</span><span class="op" id="5042430">.</span><span class="ident" id="5042431">CanSet</span><span class="op" id="5042437">(</span><span class="op" id="5042438">)</span>&nbsp;<span class="op" id="5042440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042445">return</span>&nbsp;<span class="ident" id="5042452">errors</span><span class="op" id="5042458">.</span><span class="ident" id="5042459">New</span><span class="op" id="5042462">(</span><span class="string" id="5042463">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="5042503">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5042513">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042563">dec</span><span class="op" id="5042566">.</span><span class="ident" id="5042567">mutex</span><span class="op" id="5042572">.</span><span class="ident" id="5042573">Lock</span><span class="op" id="5042577">(</span><span class="op" id="5042578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042581">defer</span>&nbsp;<span class="ident" id="5042587">dec</span><span class="op" id="5042590">.</span><span class="ident" id="5042591">mutex</span><span class="op" id="5042596">.</span><span class="ident" id="5042597">Unlock</span><span class="op" id="5042603">(</span><span class="op" id="5042604">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042608">dec</span><span class="op" id="5042611">.</span><span class="ident" id="5042612">buf</span><span class="op" id="5042615">.</span><span class="ident" id="5042616">Reset</span><span class="op" id="5042621">(</span><span class="op" id="5042622">)</span>&nbsp;<span class="comment" id="5042624">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042675">dec</span><span class="op" id="5042678">.</span><span class="ident" id="5042679">err</span>&nbsp;<span class="op" id="5042683">=</span>&nbsp;<span class="ident" id="5042685">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042690">id</span>&nbsp;<span class="op" id="5042693">:=</span>&nbsp;<span class="ident" id="5042696">dec</span><span class="op" id="5042699">.</span><span class="ident" id="5042700">decodeTypeSequence</span><span class="op" id="5042718">(</span><span class="builtintype" id="5042719">false</span><span class="op" id="5042724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042727">if</span>&nbsp;<span class="ident" id="5042730">dec</span><span class="op" id="5042733">.</span><span class="ident" id="5042734">err</span>&nbsp;<span class="op" id="5042738">==</span>&nbsp;<span class="ident" id="5042741">nil</span>&nbsp;<span class="op" id="5042745">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042749">dec</span><span class="op" id="5042752">.</span><span class="ident" id="5042753">decodeValue</span><span class="op" id="5042764">(</span><span class="ident" id="5042765">id</span><span class="op" id="5042767">,</span>&nbsp;<span class="ident" id="5042769">v</span><span class="op" id="5042770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042776">return</span>&nbsp;<span class="ident" id="5042783">dec</span><span class="op" id="5042786">.</span><span class="ident" id="5042787">err</span><br>
<span class="lineno"></span><span class="op" id="5042791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5042794">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="5042874">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5042959">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5042983">var</span>&nbsp;<span class="ident" id="5042987">debugFunc</span>&nbsp;<span class="keyword" id="5042997">func</span><span class="op" id="5043001">(</span><span class="ident" id="5043002">io</span><span class="op" id="5043004">.</span><span class="ident" id="5043005">Reader</span><span class="op" id="5043011">)</span>
</div>
</body>
</html>
