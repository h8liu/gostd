<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html" class="current">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3925017">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3925072">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3925126">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3925177">package</span>&nbsp;<span class="ident" id="3925185">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3925196">import</span>&nbsp;<span class="op" id="3925203">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925206">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925215">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925225">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925231">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925244">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3925261">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3925266">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3925269">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3925345">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3925392">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3925456">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3925497">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3925560">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3925609">func</span>&nbsp;<span class="op" id="3925614">(</span><span class="ident" id="3925615">r</span>&nbsp;<span class="op" id="3925617">*</span><span class="ident" id="3925618">Reader</span><span class="op" id="3925624">)</span>&nbsp;<span class="ident" id="3925626">ReadForm</span><span class="op" id="3925634">(</span><span class="ident" id="3925635">maxMemory</span>&nbsp;<span class="builtintype" id="3925645">int64</span><span class="op" id="3925650">)</span>&nbsp;<span class="op" id="3925652">(</span><span class="ident" id="3925653">f</span>&nbsp;<span class="op" id="3925655">*</span><span class="ident" id="3925656">Form</span><span class="op" id="3925660">,</span>&nbsp;<span class="ident" id="3925662">err</span>&nbsp;<span class="builtintype" id="3925666">error</span><span class="op" id="3925671">)</span>&nbsp;<span class="op" id="3925673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925676">form</span>&nbsp;<span class="op" id="3925681">:=</span>&nbsp;<span class="op" id="3925684">&amp;</span><span class="ident" id="3925685">Form</span><span class="op" id="3925689">{</span><span class="builtinfunc" id="3925690">make</span><span class="op" id="3925694">(</span><span class="keyword" id="3925695">map</span><span class="op" id="3925698">[</span><span class="builtintype" id="3925699">string</span><span class="op" id="3925705">]</span><span class="op" id="3925706">[</span><span class="op" id="3925707">]</span><span class="builtintype" id="3925708">string</span><span class="op" id="3925714">)</span><span class="op" id="3925715">,</span>&nbsp;<span class="builtinfunc" id="3925717">make</span><span class="op" id="3925721">(</span><span class="keyword" id="3925722">map</span><span class="op" id="3925725">[</span><span class="builtintype" id="3925726">string</span><span class="op" id="3925732">]</span><span class="op" id="3925733">[</span><span class="op" id="3925734">]</span><span class="op" id="3925735">*</span><span class="ident" id="3925736">FileHeader</span><span class="op" id="3925746">)</span><span class="op" id="3925747">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925750">defer</span>&nbsp;<span class="keyword" id="3925756">func</span><span class="op" id="3925760">(</span><span class="op" id="3925761">)</span>&nbsp;<span class="op" id="3925763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925767">if</span>&nbsp;<span class="ident" id="3925770">err</span>&nbsp;<span class="op" id="3925774">!=</span>&nbsp;<span class="builtintype" id="3925777">nil</span>&nbsp;<span class="op" id="3925781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925786">form</span><span class="op" id="3925790">.</span><span class="ident" id="3925791">RemoveAll</span><span class="op" id="3925800">(</span><span class="op" id="3925801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3925805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3925808">}</span><span class="op" id="3925809">(</span><span class="op" id="3925810">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925814">maxValueBytes</span>&nbsp;<span class="op" id="3925828">:=</span>&nbsp;<span class="builtintype" id="3925831">int64</span><span class="op" id="3925836">(</span><span class="num" id="3925837">10</span>&nbsp;<span class="op" id="3925840">&lt;&lt;</span>&nbsp;<span class="num" id="3925843">20</span><span class="op" id="3925845">)</span>&nbsp;<span class="comment" id="3925847">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925875">for</span>&nbsp;<span class="op" id="3925879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925883">p</span><span class="op" id="3925884">,</span>&nbsp;<span class="ident" id="3925886">err</span>&nbsp;<span class="op" id="3925890">:=</span>&nbsp;<span class="ident" id="3925893">r</span><span class="op" id="3925894">.</span><span class="ident" id="3925895">NextPart</span><span class="op" id="3925903">(</span><span class="op" id="3925904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925908">if</span>&nbsp;<span class="ident" id="3925911">err</span>&nbsp;<span class="op" id="3925915">==</span>&nbsp;<span class="ident" id="3925918">io</span><span class="op" id="3925920">.</span><span class="ident" id="3925921">EOF</span>&nbsp;<span class="op" id="3925925">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925930">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3925938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925942">if</span>&nbsp;<span class="ident" id="3925945">err</span>&nbsp;<span class="op" id="3925949">!=</span>&nbsp;<span class="builtintype" id="3925952">nil</span>&nbsp;<span class="op" id="3925956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925961">return</span>&nbsp;<span class="builtintype" id="3925968">nil</span><span class="op" id="3925971">,</span>&nbsp;<span class="ident" id="3925973">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3925979">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925984">name</span>&nbsp;<span class="op" id="3925989">:=</span>&nbsp;<span class="ident" id="3925992">p</span><span class="op" id="3925993">.</span><span class="ident" id="3925994">FormName</span><span class="op" id="3926002">(</span><span class="op" id="3926003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926007">if</span>&nbsp;<span class="ident" id="3926010">name</span>&nbsp;<span class="op" id="3926015">==</span>&nbsp;<span class="string" id="3926018">&#34;&#34;</span>&nbsp;<span class="op" id="3926021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926026">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926037">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926041">filename</span>&nbsp;<span class="op" id="3926050">:=</span>&nbsp;<span class="ident" id="3926053">p</span><span class="op" id="3926054">.</span><span class="ident" id="3926055">FileName</span><span class="op" id="3926063">(</span><span class="op" id="3926064">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926069">var</span>&nbsp;<span class="ident" id="3926073">b</span>&nbsp;<span class="ident" id="3926075">bytes</span><span class="op" id="3926080">.</span><span class="ident" id="3926081">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926091">if</span>&nbsp;<span class="ident" id="3926094">filename</span>&nbsp;<span class="op" id="3926103">==</span>&nbsp;<span class="string" id="3926106">&#34;&#34;</span>&nbsp;<span class="op" id="3926109">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3926114">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926153">n</span><span class="op" id="3926154">,</span>&nbsp;<span class="ident" id="3926156">err</span>&nbsp;<span class="op" id="3926160">:=</span>&nbsp;<span class="ident" id="3926163">io</span><span class="op" id="3926165">.</span><span class="ident" id="3926166">CopyN</span><span class="op" id="3926171">(</span><span class="op" id="3926172">&amp;</span><span class="ident" id="3926173">b</span><span class="op" id="3926174">,</span>&nbsp;<span class="ident" id="3926176">p</span><span class="op" id="3926177">,</span>&nbsp;<span class="ident" id="3926179">maxValueBytes</span><span class="op" id="3926192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926197">if</span>&nbsp;<span class="ident" id="3926200">err</span>&nbsp;<span class="op" id="3926204">!=</span>&nbsp;<span class="builtintype" id="3926207">nil</span>&nbsp;<span class="op" id="3926211">&amp;&amp;</span>&nbsp;<span class="ident" id="3926214">err</span>&nbsp;<span class="op" id="3926218">!=</span>&nbsp;<span class="ident" id="3926221">io</span><span class="op" id="3926223">.</span><span class="ident" id="3926224">EOF</span>&nbsp;<span class="op" id="3926228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926234">return</span>&nbsp;<span class="builtintype" id="3926241">nil</span><span class="op" id="3926244">,</span>&nbsp;<span class="ident" id="3926246">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926253">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926258">maxValueBytes</span>&nbsp;<span class="op" id="3926272">-=</span>&nbsp;<span class="ident" id="3926275">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926280">if</span>&nbsp;<span class="ident" id="3926283">maxValueBytes</span>&nbsp;<span class="op" id="3926297">==</span>&nbsp;<span class="num" id="3926300">0</span>&nbsp;<span class="op" id="3926302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926308">return</span>&nbsp;<span class="builtintype" id="3926315">nil</span><span class="op" id="3926318">,</span>&nbsp;<span class="ident" id="3926320">errors</span><span class="op" id="3926326">.</span><span class="ident" id="3926327">New</span><span class="op" id="3926330">(</span><span class="string" id="3926331">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3926361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926371">form</span><span class="op" id="3926375">.</span><span class="ident" id="3926376">Value</span><span class="op" id="3926381">[</span><span class="ident" id="3926382">name</span><span class="op" id="3926386">]</span>&nbsp;<span class="op" id="3926388">=</span>&nbsp;<span class="builtinfunc" id="3926390">append</span><span class="op" id="3926396">(</span><span class="ident" id="3926397">form</span><span class="op" id="3926401">.</span><span class="ident" id="3926402">Value</span><span class="op" id="3926407">[</span><span class="ident" id="3926408">name</span><span class="op" id="3926412">]</span><span class="op" id="3926413">,</span>&nbsp;<span class="ident" id="3926415">b</span><span class="op" id="3926416">.</span><span class="ident" id="3926417">String</span><span class="op" id="3926423">(</span><span class="op" id="3926424">)</span><span class="op" id="3926425">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926430">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3926446">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926484">fh</span>&nbsp;<span class="op" id="3926487">:=</span>&nbsp;<span class="op" id="3926490">&amp;</span><span class="ident" id="3926491">FileHeader</span><span class="op" id="3926501">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926506">Filename</span><span class="op" id="3926514">:</span>&nbsp;<span class="ident" id="3926516">filename</span><span class="op" id="3926524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926529">Header</span><span class="op" id="3926535">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3926539">p</span><span class="op" id="3926540">.</span><span class="ident" id="3926541">Header</span><span class="op" id="3926547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926555">n</span><span class="op" id="3926556">,</span>&nbsp;<span class="ident" id="3926558">err</span>&nbsp;<span class="op" id="3926562">:=</span>&nbsp;<span class="ident" id="3926565">io</span><span class="op" id="3926567">.</span><span class="ident" id="3926568">CopyN</span><span class="op" id="3926573">(</span><span class="op" id="3926574">&amp;</span><span class="ident" id="3926575">b</span><span class="op" id="3926576">,</span>&nbsp;<span class="ident" id="3926578">p</span><span class="op" id="3926579">,</span>&nbsp;<span class="ident" id="3926581">maxMemory</span><span class="op" id="3926590">+</span><span class="num" id="3926591">1</span><span class="op" id="3926592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926596">if</span>&nbsp;<span class="ident" id="3926599">err</span>&nbsp;<span class="op" id="3926603">!=</span>&nbsp;<span class="builtintype" id="3926606">nil</span>&nbsp;<span class="op" id="3926610">&amp;&amp;</span>&nbsp;<span class="ident" id="3926613">err</span>&nbsp;<span class="op" id="3926617">!=</span>&nbsp;<span class="ident" id="3926620">io</span><span class="op" id="3926622">.</span><span class="ident" id="3926623">EOF</span>&nbsp;<span class="op" id="3926627">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926632">return</span>&nbsp;<span class="builtintype" id="3926639">nil</span><span class="op" id="3926642">,</span>&nbsp;<span class="ident" id="3926644">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926654">if</span>&nbsp;<span class="ident" id="3926657">n</span>&nbsp;<span class="op" id="3926659">&gt;</span>&nbsp;<span class="ident" id="3926661">maxMemory</span>&nbsp;<span class="op" id="3926671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3926676">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926722">file</span><span class="op" id="3926726">,</span>&nbsp;<span class="ident" id="3926728">err</span>&nbsp;<span class="op" id="3926732">:=</span>&nbsp;<span class="ident" id="3926735">ioutil</span><span class="op" id="3926741">.</span><span class="ident" id="3926742">TempFile</span><span class="op" id="3926750">(</span><span class="string" id="3926751">&#34;&#34;</span><span class="op" id="3926753">,</span>&nbsp;<span class="string" id="3926755">&#34;multipart-&#34;</span><span class="op" id="3926767">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926772">if</span>&nbsp;<span class="ident" id="3926775">err</span>&nbsp;<span class="op" id="3926779">!=</span>&nbsp;<span class="builtintype" id="3926782">nil</span>&nbsp;<span class="op" id="3926786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926792">return</span>&nbsp;<span class="builtintype" id="3926799">nil</span><span class="op" id="3926802">,</span>&nbsp;<span class="ident" id="3926804">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926816">defer</span>&nbsp;<span class="ident" id="3926822">file</span><span class="op" id="3926826">.</span><span class="ident" id="3926827">Close</span><span class="op" id="3926832">(</span><span class="op" id="3926833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926838">_</span><span class="op" id="3926839">,</span>&nbsp;<span class="ident" id="3926841">err</span>&nbsp;<span class="op" id="3926845">=</span>&nbsp;<span class="ident" id="3926847">io</span><span class="op" id="3926849">.</span><span class="ident" id="3926850">Copy</span><span class="op" id="3926854">(</span><span class="ident" id="3926855">file</span><span class="op" id="3926859">,</span>&nbsp;<span class="ident" id="3926861">io</span><span class="op" id="3926863">.</span><span class="ident" id="3926864">MultiReader</span><span class="op" id="3926875">(</span><span class="op" id="3926876">&amp;</span><span class="ident" id="3926877">b</span><span class="op" id="3926878">,</span>&nbsp;<span class="ident" id="3926880">p</span><span class="op" id="3926881">)</span><span class="op" id="3926882">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926887">if</span>&nbsp;<span class="ident" id="3926890">err</span>&nbsp;<span class="op" id="3926894">!=</span>&nbsp;<span class="builtintype" id="3926897">nil</span>&nbsp;<span class="op" id="3926901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926907">os</span><span class="op" id="3926909">.</span><span class="ident" id="3926910">Remove</span><span class="op" id="3926916">(</span><span class="ident" id="3926917">file</span><span class="op" id="3926921">.</span><span class="ident" id="3926922">Name</span><span class="op" id="3926926">(</span><span class="op" id="3926927">)</span><span class="op" id="3926928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3926934">return</span>&nbsp;<span class="builtintype" id="3926941">nil</span><span class="op" id="3926944">,</span>&nbsp;<span class="ident" id="3926946">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926958">fh</span><span class="op" id="3926960">.</span><span class="ident" id="3926961">tmpfile</span>&nbsp;<span class="op" id="3926969">=</span>&nbsp;<span class="ident" id="3926971">file</span><span class="op" id="3926975">.</span><span class="ident" id="3926976">Name</span><span class="op" id="3926980">(</span><span class="op" id="3926981">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3926985">}</span>&nbsp;<span class="keyword" id="3926987">else</span>&nbsp;<span class="op" id="3926992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3926997">fh</span><span class="op" id="3926999">.</span><span class="ident" id="3927000">content</span>&nbsp;<span class="op" id="3927008">=</span>&nbsp;<span class="ident" id="3927010">b</span><span class="op" id="3927011">.</span><span class="ident" id="3927012">Bytes</span><span class="op" id="3927017">(</span><span class="op" id="3927018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927023">maxMemory</span>&nbsp;<span class="op" id="3927033">-=</span>&nbsp;<span class="ident" id="3927036">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927044">form</span><span class="op" id="3927048">.</span><span class="ident" id="3927049">File</span><span class="op" id="3927053">[</span><span class="ident" id="3927054">name</span><span class="op" id="3927058">]</span>&nbsp;<span class="op" id="3927060">=</span>&nbsp;<span class="builtinfunc" id="3927062">append</span><span class="op" id="3927068">(</span><span class="ident" id="3927069">form</span><span class="op" id="3927073">.</span><span class="ident" id="3927074">File</span><span class="op" id="3927078">[</span><span class="ident" id="3927079">name</span><span class="op" id="3927083">]</span><span class="op" id="3927084">,</span>&nbsp;<span class="ident" id="3927086">fh</span><span class="op" id="3927088">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927095">return</span>&nbsp;<span class="ident" id="3927102">form</span><span class="op" id="3927106">,</span>&nbsp;<span class="builtintype" id="3927108">nil</span><br>
<span class="lineno"></span><span class="op" id="3927112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3927115">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3927151">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3927209">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3927266">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3927308">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3927341">type</span>&nbsp;<span class="ident" id="3927346">Form</span>&nbsp;<span class="keyword" id="3927351">struct</span>&nbsp;<span class="op" id="3927358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927361">Value</span>&nbsp;<span class="keyword" id="3927367">map</span><span class="op" id="3927370">[</span><span class="builtintype" id="3927371">string</span><span class="op" id="3927377">]</span><span class="op" id="3927378">[</span><span class="op" id="3927379">]</span><span class="builtintype" id="3927380">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927388">File</span>&nbsp;&nbsp;<span class="keyword" id="3927394">map</span><span class="op" id="3927397">[</span><span class="builtintype" id="3927398">string</span><span class="op" id="3927404">]</span><span class="op" id="3927405">[</span><span class="op" id="3927406">]</span><span class="op" id="3927407">*</span><span class="ident" id="3927408">FileHeader</span><br>
<span class="lineno"></span><span class="op" id="3927419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3927422">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3927487">func</span>&nbsp;<span class="op" id="3927492">(</span><span class="ident" id="3927493">f</span>&nbsp;<span class="op" id="3927495">*</span><span class="ident" id="3927496">Form</span><span class="op" id="3927500">)</span>&nbsp;<span class="ident" id="3927502">RemoveAll</span><span class="op" id="3927511">(</span><span class="op" id="3927512">)</span>&nbsp;<span class="builtintype" id="3927514">error</span>&nbsp;<span class="op" id="3927520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927523">var</span>&nbsp;<span class="ident" id="3927527">err</span>&nbsp;<span class="builtintype" id="3927531">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927538">for</span>&nbsp;<span class="ident" id="3927542">_</span><span class="op" id="3927543">,</span>&nbsp;<span class="ident" id="3927545">fhs</span>&nbsp;<span class="op" id="3927549">:=</span>&nbsp;<span class="keyword" id="3927552">range</span>&nbsp;<span class="ident" id="3927558">f</span><span class="op" id="3927559">.</span><span class="ident" id="3927560">File</span>&nbsp;<span class="op" id="3927565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927569">for</span>&nbsp;<span class="ident" id="3927573">_</span><span class="op" id="3927574">,</span>&nbsp;<span class="ident" id="3927576">fh</span>&nbsp;<span class="op" id="3927579">:=</span>&nbsp;<span class="keyword" id="3927582">range</span>&nbsp;<span class="ident" id="3927588">fhs</span>&nbsp;<span class="op" id="3927592">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927597">if</span>&nbsp;<span class="ident" id="3927600">fh</span><span class="op" id="3927602">.</span><span class="ident" id="3927603">tmpfile</span>&nbsp;<span class="op" id="3927611">!=</span>&nbsp;<span class="string" id="3927614">&#34;&#34;</span>&nbsp;<span class="op" id="3927617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927623">e</span>&nbsp;<span class="op" id="3927625">:=</span>&nbsp;<span class="ident" id="3927628">os</span><span class="op" id="3927630">.</span><span class="ident" id="3927631">Remove</span><span class="op" id="3927637">(</span><span class="ident" id="3927638">fh</span><span class="op" id="3927640">.</span><span class="ident" id="3927641">tmpfile</span><span class="op" id="3927648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927654">if</span>&nbsp;<span class="ident" id="3927657">e</span>&nbsp;<span class="op" id="3927659">!=</span>&nbsp;<span class="builtintype" id="3927662">nil</span>&nbsp;<span class="op" id="3927666">&amp;&amp;</span>&nbsp;<span class="ident" id="3927669">err</span>&nbsp;<span class="op" id="3927673">==</span>&nbsp;<span class="builtintype" id="3927676">nil</span>&nbsp;<span class="op" id="3927680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927687">err</span>&nbsp;<span class="op" id="3927691">=</span>&nbsp;<span class="ident" id="3927693">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927699">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3927711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3927714">return</span>&nbsp;<span class="ident" id="3927721">err</span><br>
<span class="lineno"></span><span class="op" id="3927725">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3927728">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3927790">type</span>&nbsp;<span class="ident" id="3927795">FileHeader</span>&nbsp;<span class="keyword" id="3927806">struct</span>&nbsp;<span class="op" id="3927813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927816">Filename</span>&nbsp;<span class="builtintype" id="3927825">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927833">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3927842">textproto</span><span class="op" id="3927851">.</span><span class="ident" id="3927852">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927865">content</span>&nbsp;<span class="op" id="3927873">[</span><span class="op" id="3927874">]</span><span class="builtintype" id="3927875">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3927881">tmpfile</span>&nbsp;<span class="builtintype" id="3927889">string</span><br>
<span class="lineno"></span><span class="op" id="3927896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3927899">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3927959">func</span>&nbsp;<span class="op" id="3927964">(</span><span class="ident" id="3927965">fh</span>&nbsp;<span class="op" id="3927968">*</span><span class="ident" id="3927969">FileHeader</span><span class="op" id="3927979">)</span>&nbsp;<span class="ident" id="3927981">Open</span><span class="op" id="3927985">(</span><span class="op" id="3927986">)</span>&nbsp;<span class="op" id="3927988">(</span><span class="ident" id="3927989">File</span><span class="op" id="3927993">,</span>&nbsp;<span class="builtintype" id="3927995">error</span><span class="op" id="3928000">)</span>&nbsp;<span class="op" id="3928002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3928005">if</span>&nbsp;<span class="ident" id="3928008">b</span>&nbsp;<span class="op" id="3928010">:=</span>&nbsp;<span class="ident" id="3928013">fh</span><span class="op" id="3928015">.</span><span class="ident" id="3928016">content</span><span class="op" id="3928023">;</span>&nbsp;<span class="ident" id="3928025">b</span>&nbsp;<span class="op" id="3928027">!=</span>&nbsp;<span class="builtintype" id="3928030">nil</span>&nbsp;<span class="op" id="3928034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3928038">r</span>&nbsp;<span class="op" id="3928040">:=</span>&nbsp;<span class="ident" id="3928043">io</span><span class="op" id="3928045">.</span><span class="ident" id="3928046">NewSectionReader</span><span class="op" id="3928062">(</span><span class="ident" id="3928063">bytes</span><span class="op" id="3928068">.</span><span class="ident" id="3928069">NewReader</span><span class="op" id="3928078">(</span><span class="ident" id="3928079">b</span><span class="op" id="3928080">)</span><span class="op" id="3928081">,</span>&nbsp;<span class="num" id="3928083">0</span><span class="op" id="3928084">,</span>&nbsp;<span class="builtintype" id="3928086">int64</span><span class="op" id="3928091">(</span><span class="builtinfunc" id="3928092">len</span><span class="op" id="3928095">(</span><span class="ident" id="3928096">b</span><span class="op" id="3928097">)</span><span class="op" id="3928098">)</span><span class="op" id="3928099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3928103">return</span>&nbsp;<span class="ident" id="3928110">sectionReadCloser</span><span class="op" id="3928127">{</span><span class="ident" id="3928128">r</span><span class="op" id="3928129">}</span><span class="op" id="3928130">,</span>&nbsp;<span class="builtintype" id="3928132">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3928137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3928140">return</span>&nbsp;<span class="ident" id="3928147">os</span><span class="op" id="3928149">.</span><span class="ident" id="3928150">Open</span><span class="op" id="3928154">(</span><span class="ident" id="3928155">fh</span><span class="op" id="3928157">.</span><span class="ident" id="3928158">tmpfile</span><span class="op" id="3928165">)</span><br>
<span class="lineno"></span><span class="op" id="3928167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3928170">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3928242">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3928301">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3928380">type</span>&nbsp;<span class="ident" id="3928385">File</span>&nbsp;<span class="keyword" id="3928390">interface</span>&nbsp;<span class="op" id="3928400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3928403">io</span><span class="op" id="3928405">.</span><span class="ident" id="3928406">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3928414">io</span><span class="op" id="3928416">.</span><span class="ident" id="3928417">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3928427">io</span><span class="op" id="3928429">.</span><span class="ident" id="3928430">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3928438">io</span><span class="op" id="3928440">.</span><span class="ident" id="3928441">Closer</span><br>
<span class="lineno"></span><span class="op" id="3928448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3928451">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3928497">type</span>&nbsp;<span class="ident" id="3928502">sectionReadCloser</span>&nbsp;<span class="keyword" id="3928520">struct</span>&nbsp;<span class="op" id="3928527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3928530">*</span><span class="ident" id="3928531">io</span><span class="op" id="3928533">.</span><span class="ident" id="3928534">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3928548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3928551">func</span>&nbsp;<span class="op" id="3928556">(</span><span class="ident" id="3928557">rc</span>&nbsp;<span class="ident" id="3928560">sectionReadCloser</span><span class="op" id="3928577">)</span>&nbsp;<span class="ident" id="3928579">Close</span><span class="op" id="3928584">(</span><span class="op" id="3928585">)</span>&nbsp;<span class="builtintype" id="3928587">error</span>&nbsp;<span class="op" id="3928593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3928596">return</span>&nbsp;<span class="builtintype" id="3928603">nil</span><br>
<span class="lineno"></span><span class="op" id="3928607">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
