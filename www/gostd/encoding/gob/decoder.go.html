<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4780226">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4780281">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4780335">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4780386">package</span>&nbsp;<span class="ident" id="4780394">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4780399">import</span>&nbsp;<span class="op" id="4780406">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4780409">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4780418">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4780428">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4780434">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4780445">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4780452">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4780455">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="4780524">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="4780596">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="4780627">const</span>&nbsp;<span class="ident" id="4780633">tooBig</span>&nbsp;<span class="op" id="4780640">=</span>&nbsp;<span class="num" id="4780642">1</span>&nbsp;<span class="op" id="4780644">&lt;&lt;</span>&nbsp;<span class="num" id="4780647">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4780651">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4780727">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4780759">type</span>&nbsp;<span class="ident" id="4780764">Decoder</span>&nbsp;<span class="keyword" id="4780772">struct</span>&nbsp;<span class="op" id="4780779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780782">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780795">sync</span><span class="op" id="4780799">.</span><span class="ident" id="4780800">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780835">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780877">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780890">io</span><span class="op" id="4780892">.</span><span class="ident" id="4780893">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780930">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780953">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780966">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781006">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781047">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781060">map</span><span class="op" id="4781063">[</span><span class="ident" id="4781064">typeId</span><span class="op" id="4781070">]</span><span class="op" id="4781071">*</span><span class="ident" id="4781072">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781100">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781144">decoderCache</span>&nbsp;<span class="keyword" id="4781157">map</span><span class="op" id="4781160">[</span><span class="ident" id="4781161">reflect</span><span class="op" id="4781168">.</span><span class="ident" id="4781169">Type</span><span class="op" id="4781173">]</span><span class="keyword" id="4781174">map</span><span class="op" id="4781177">[</span><span class="ident" id="4781178">typeId</span><span class="op" id="4781184">]</span><span class="op" id="4781185">*</span><span class="op" id="4781186">*</span><span class="ident" id="4781187">decEngine</span>&nbsp;<span class="comment" id="4781197">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781227">ignorerCache</span>&nbsp;<span class="keyword" id="4781240">map</span><span class="op" id="4781243">[</span><span class="ident" id="4781244">typeId</span><span class="op" id="4781250">]</span><span class="op" id="4781251">*</span><span class="op" id="4781252">*</span><span class="ident" id="4781253">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781280">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781310">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781323">*</span><span class="ident" id="4781324">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781363">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781415">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781428">[</span><span class="op" id="4781429">]</span><span class="builtintype" id="4781430">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781468">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781522">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4781535">error</span><br>
<span class="lineno"></span><span class="op" id="4781541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4781544">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="4781611">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4781682">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4781699">func</span>&nbsp;<span class="ident" id="4781704">NewDecoder</span><span class="op" id="4781714">(</span><span class="ident" id="4781715">r</span>&nbsp;<span class="ident" id="4781717">io</span><span class="op" id="4781719">.</span><span class="ident" id="4781720">Reader</span><span class="op" id="4781726">)</span>&nbsp;<span class="op" id="4781728">*</span><span class="ident" id="4781729">Decoder</span>&nbsp;<span class="op" id="4781737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781740">dec</span>&nbsp;<span class="op" id="4781744">:=</span>&nbsp;<span class="builtinfunc" id="4781747">new</span><span class="op" id="4781750">(</span><span class="ident" id="4781751">Decoder</span><span class="op" id="4781758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4781761">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781838">if</span>&nbsp;<span class="ident" id="4781841">_</span><span class="op" id="4781842">,</span>&nbsp;<span class="ident" id="4781844">ok</span>&nbsp;<span class="op" id="4781847">:=</span>&nbsp;<span class="ident" id="4781850">r</span><span class="op" id="4781851">.</span><span class="op" id="4781852">(</span><span class="ident" id="4781853">io</span><span class="op" id="4781855">.</span><span class="ident" id="4781856">ByteReader</span><span class="op" id="4781866">)</span><span class="op" id="4781867">;</span>&nbsp;<span class="op" id="4781869">!</span><span class="ident" id="4781870">ok</span>&nbsp;<span class="op" id="4781873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781877">r</span>&nbsp;<span class="op" id="4781879">=</span>&nbsp;<span class="ident" id="4781881">bufio</span><span class="op" id="4781886">.</span><span class="ident" id="4781887">NewReader</span><span class="op" id="4781896">(</span><span class="ident" id="4781897">r</span><span class="op" id="4781898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781904">dec</span><span class="op" id="4781907">.</span><span class="ident" id="4781908">r</span>&nbsp;<span class="op" id="4781910">=</span>&nbsp;<span class="ident" id="4781912">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781915">dec</span><span class="op" id="4781918">.</span><span class="ident" id="4781919">wireType</span>&nbsp;<span class="op" id="4781928">=</span>&nbsp;<span class="builtinfunc" id="4781930">make</span><span class="op" id="4781934">(</span><span class="keyword" id="4781935">map</span><span class="op" id="4781938">[</span><span class="ident" id="4781939">typeId</span><span class="op" id="4781945">]</span><span class="op" id="4781946">*</span><span class="ident" id="4781947">wireType</span><span class="op" id="4781955">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781958">dec</span><span class="op" id="4781961">.</span><span class="ident" id="4781962">decoderCache</span>&nbsp;<span class="op" id="4781975">=</span>&nbsp;<span class="builtinfunc" id="4781977">make</span><span class="op" id="4781981">(</span><span class="keyword" id="4781982">map</span><span class="op" id="4781985">[</span><span class="ident" id="4781986">reflect</span><span class="op" id="4781993">.</span><span class="ident" id="4781994">Type</span><span class="op" id="4781998">]</span><span class="keyword" id="4781999">map</span><span class="op" id="4782002">[</span><span class="ident" id="4782003">typeId</span><span class="op" id="4782009">]</span><span class="op" id="4782010">*</span><span class="op" id="4782011">*</span><span class="ident" id="4782012">decEngine</span><span class="op" id="4782021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782024">dec</span><span class="op" id="4782027">.</span><span class="ident" id="4782028">ignorerCache</span>&nbsp;<span class="op" id="4782041">=</span>&nbsp;<span class="builtinfunc" id="4782043">make</span><span class="op" id="4782047">(</span><span class="keyword" id="4782048">map</span><span class="op" id="4782051">[</span><span class="ident" id="4782052">typeId</span><span class="op" id="4782058">]</span><span class="op" id="4782059">*</span><span class="op" id="4782060">*</span><span class="ident" id="4782061">decEngine</span><span class="op" id="4782070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782073">dec</span><span class="op" id="4782076">.</span><span class="ident" id="4782077">countBuf</span>&nbsp;<span class="op" id="4782086">=</span>&nbsp;<span class="builtinfunc" id="4782088">make</span><span class="op" id="4782092">(</span><span class="op" id="4782093">[</span><span class="op" id="4782094">]</span><span class="builtintype" id="4782095">byte</span><span class="op" id="4782099">,</span>&nbsp;<span class="num" id="4782101">9</span><span class="op" id="4782102">)</span>&nbsp;<span class="comment" id="4782104">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782160">return</span>&nbsp;<span class="ident" id="4782167">dec</span><br>
<span class="lineno">50</span><span class="op" id="4782171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782174">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4782218">func</span>&nbsp;<span class="op" id="4782223">(</span><span class="ident" id="4782224">dec</span>&nbsp;<span class="op" id="4782228">*</span><span class="ident" id="4782229">Decoder</span><span class="op" id="4782236">)</span>&nbsp;<span class="ident" id="4782238">recvType</span><span class="op" id="4782246">(</span><span class="ident" id="4782247">id</span>&nbsp;<span class="ident" id="4782250">typeId</span><span class="op" id="4782256">)</span>&nbsp;<span class="op" id="4782258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4782261">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782314">if</span>&nbsp;<span class="ident" id="4782317">id</span>&nbsp;<span class="op" id="4782320">&lt;</span>&nbsp;<span class="ident" id="4782322">firstUserId</span>&nbsp;<span class="op" id="4782334">||</span>&nbsp;<span class="ident" id="4782337">dec</span><span class="op" id="4782340">.</span><span class="ident" id="4782341">wireType</span><span class="op" id="4782349">[</span><span class="ident" id="4782350">id</span><span class="op" id="4782352">]</span>&nbsp;<span class="op" id="4782354">!=</span>&nbsp;<span class="ident" id="4782357">nil</span>&nbsp;<span class="op" id="4782361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782365">dec</span><span class="op" id="4782368">.</span><span class="ident" id="4782369">err</span>&nbsp;<span class="op" id="4782373">=</span>&nbsp;<span class="ident" id="4782375">errors</span><span class="op" id="4782381">.</span><span class="ident" id="4782382">New</span><span class="op" id="4782385">(</span><span class="string" id="4782386">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="4782416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782420">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4782432">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782442">wire</span>&nbsp;<span class="op" id="4782447">:=</span>&nbsp;<span class="builtinfunc" id="4782450">new</span><span class="op" id="4782453">(</span><span class="ident" id="4782454">wireType</span><span class="op" id="4782462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782465">dec</span><span class="op" id="4782468">.</span><span class="ident" id="4782469">decodeValue</span><span class="op" id="4782480">(</span><span class="ident" id="4782481">tWireType</span><span class="op" id="4782490">,</span>&nbsp;<span class="ident" id="4782492">reflect</span><span class="op" id="4782499">.</span><span class="ident" id="4782500">ValueOf</span><span class="op" id="4782507">(</span><span class="ident" id="4782508">wire</span><span class="op" id="4782512">)</span><span class="op" id="4782513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782516">if</span>&nbsp;<span class="ident" id="4782519">dec</span><span class="op" id="4782522">.</span><span class="ident" id="4782523">err</span>&nbsp;<span class="op" id="4782527">!=</span>&nbsp;<span class="ident" id="4782530">nil</span>&nbsp;<span class="op" id="4782534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782538">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4782549">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782584">dec</span><span class="op" id="4782587">.</span><span class="ident" id="4782588">wireType</span><span class="op" id="4782596">[</span><span class="ident" id="4782597">id</span><span class="op" id="4782599">]</span>&nbsp;<span class="op" id="4782601">=</span>&nbsp;<span class="ident" id="4782603">wire</span><br>
<span class="lineno"></span><span class="op" id="4782608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4782611">var</span>&nbsp;<span class="ident" id="4782615">errBadCount</span>&nbsp;<span class="op" id="4782627">=</span>&nbsp;<span class="ident" id="4782629">errors</span><span class="op" id="4782635">.</span><span class="ident" id="4782636">New</span><span class="op" id="4782639">(</span><span class="string" id="4782640">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="4782664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782667">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="4782753">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="4782841">func</span>&nbsp;<span class="op" id="4782846">(</span><span class="ident" id="4782847">dec</span>&nbsp;<span class="op" id="4782851">*</span><span class="ident" id="4782852">Decoder</span><span class="op" id="4782859">)</span>&nbsp;<span class="ident" id="4782861">recvMessage</span><span class="op" id="4782872">(</span><span class="op" id="4782873">)</span>&nbsp;<span class="builtintype" id="4782875">bool</span>&nbsp;<span class="op" id="4782880">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4782883">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782901">nbytes</span><span class="op" id="4782907">,</span>&nbsp;<span class="ident" id="4782909">_</span><span class="op" id="4782910">,</span>&nbsp;<span class="ident" id="4782912">err</span>&nbsp;<span class="op" id="4782916">:=</span>&nbsp;<span class="ident" id="4782919">decodeUintReader</span><span class="op" id="4782935">(</span><span class="ident" id="4782936">dec</span><span class="op" id="4782939">.</span><span class="ident" id="4782940">r</span><span class="op" id="4782941">,</span>&nbsp;<span class="ident" id="4782943">dec</span><span class="op" id="4782946">.</span><span class="ident" id="4782947">countBuf</span><span class="op" id="4782955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782958">if</span>&nbsp;<span class="ident" id="4782961">err</span>&nbsp;<span class="op" id="4782965">!=</span>&nbsp;<span class="ident" id="4782968">nil</span>&nbsp;<span class="op" id="4782972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782976">dec</span><span class="op" id="4782979">.</span><span class="ident" id="4782980">err</span>&nbsp;<span class="op" id="4782984">=</span>&nbsp;<span class="ident" id="4782986">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782992">return</span>&nbsp;<span class="builtintype" id="4782999">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783009">if</span>&nbsp;<span class="ident" id="4783012">nbytes</span>&nbsp;<span class="op" id="4783019">&gt;=</span>&nbsp;<span class="ident" id="4783022">tooBig</span>&nbsp;<span class="op" id="4783029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783033">dec</span><span class="op" id="4783036">.</span><span class="ident" id="4783037">err</span>&nbsp;<span class="op" id="4783041">=</span>&nbsp;<span class="ident" id="4783043">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783057">return</span>&nbsp;<span class="builtintype" id="4783064">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783071">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783074">dec</span><span class="op" id="4783077">.</span><span class="ident" id="4783078">readMessage</span><span class="op" id="4783089">(</span><span class="builtintype" id="4783090">int</span><span class="op" id="4783093">(</span><span class="ident" id="4783094">nbytes</span><span class="op" id="4783100">)</span><span class="op" id="4783101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783104">return</span>&nbsp;<span class="ident" id="4783111">dec</span><span class="op" id="4783114">.</span><span class="ident" id="4783115">err</span>&nbsp;<span class="op" id="4783119">==</span>&nbsp;<span class="ident" id="4783122">nil</span><br>
<span class="lineno"></span><span class="op" id="4783126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783129">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="4783188">func</span>&nbsp;<span class="op" id="4783193">(</span><span class="ident" id="4783194">dec</span>&nbsp;<span class="op" id="4783198">*</span><span class="ident" id="4783199">Decoder</span><span class="op" id="4783206">)</span>&nbsp;<span class="ident" id="4783208">readMessage</span><span class="op" id="4783219">(</span><span class="ident" id="4783220">nbytes</span>&nbsp;<span class="builtintype" id="4783227">int</span><span class="op" id="4783230">)</span>&nbsp;<span class="op" id="4783232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783235">if</span>&nbsp;<span class="ident" id="4783238">dec</span><span class="op" id="4783241">.</span><span class="ident" id="4783242">buf</span><span class="op" id="4783245">.</span><span class="ident" id="4783246">Len</span><span class="op" id="4783249">(</span><span class="op" id="4783250">)</span>&nbsp;<span class="op" id="4783252">!=</span>&nbsp;<span class="num" id="4783255">0</span>&nbsp;<span class="op" id="4783257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783261">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4783305">panic</span><span class="op" id="4783310">(</span><span class="string" id="4783311">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="4783337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783340">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783343">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783361">dec</span><span class="op" id="4783364">.</span><span class="ident" id="4783365">buf</span><span class="op" id="4783368">.</span><span class="ident" id="4783369">Size</span><span class="op" id="4783373">(</span><span class="ident" id="4783374">nbytes</span><span class="op" id="4783380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783383">_</span><span class="op" id="4783384">,</span>&nbsp;<span class="ident" id="4783386">dec</span><span class="op" id="4783389">.</span><span class="ident" id="4783390">err</span>&nbsp;<span class="op" id="4783394">=</span>&nbsp;<span class="ident" id="4783396">io</span><span class="op" id="4783398">.</span><span class="ident" id="4783399">ReadFull</span><span class="op" id="4783407">(</span><span class="ident" id="4783408">dec</span><span class="op" id="4783411">.</span><span class="ident" id="4783412">r</span><span class="op" id="4783413">,</span>&nbsp;<span class="ident" id="4783415">dec</span><span class="op" id="4783418">.</span><span class="ident" id="4783419">buf</span><span class="op" id="4783422">.</span><span class="ident" id="4783423">Bytes</span><span class="op" id="4783428">(</span><span class="op" id="4783429">)</span><span class="op" id="4783430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783433">if</span>&nbsp;<span class="ident" id="4783436">dec</span><span class="op" id="4783439">.</span><span class="ident" id="4783440">err</span>&nbsp;<span class="op" id="4783444">!=</span>&nbsp;<span class="ident" id="4783447">nil</span>&nbsp;<span class="op" id="4783451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783455">if</span>&nbsp;<span class="ident" id="4783458">dec</span><span class="op" id="4783461">.</span><span class="ident" id="4783462">err</span>&nbsp;<span class="op" id="4783466">==</span>&nbsp;<span class="ident" id="4783469">io</span><span class="op" id="4783471">.</span><span class="ident" id="4783472">EOF</span>&nbsp;<span class="op" id="4783476">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783481">dec</span><span class="op" id="4783484">.</span><span class="ident" id="4783485">err</span>&nbsp;<span class="op" id="4783489">=</span>&nbsp;<span class="ident" id="4783491">io</span><span class="op" id="4783493">.</span><span class="ident" id="4783494">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783516">}</span><br>
<span class="lineno"></span><span class="op" id="4783518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4783521">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="4783602">func</span>&nbsp;<span class="ident" id="4783607">toInt</span><span class="op" id="4783612">(</span><span class="ident" id="4783613">x</span>&nbsp;<span class="ident" id="4783615">uint64</span><span class="op" id="4783621">)</span>&nbsp;<span class="ident" id="4783623">int64</span>&nbsp;<span class="op" id="4783629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783632">i</span>&nbsp;<span class="op" id="4783634">:=</span>&nbsp;<span class="ident" id="4783637">int64</span><span class="op" id="4783642">(</span><span class="ident" id="4783643">x</span>&nbsp;<span class="op" id="4783645">&gt;&gt;</span>&nbsp;<span class="num" id="4783648">1</span><span class="op" id="4783649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783652">if</span>&nbsp;<span class="ident" id="4783655">x</span><span class="op" id="4783656">&amp;</span><span class="num" id="4783657">1</span>&nbsp;<span class="op" id="4783659">!=</span>&nbsp;<span class="num" id="4783662">0</span>&nbsp;<span class="op" id="4783664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783668">i</span>&nbsp;<span class="op" id="4783670">=</span>&nbsp;<span class="op" id="4783672">^</span><span class="ident" id="4783673">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783679">return</span>&nbsp;<span class="ident" id="4783686">i</span><br>
<span class="lineno"></span><span class="op" id="4783688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4783691">func</span>&nbsp;<span class="op" id="4783696">(</span><span class="ident" id="4783697">dec</span>&nbsp;<span class="op" id="4783701">*</span><span class="ident" id="4783702">Decoder</span><span class="op" id="4783709">)</span>&nbsp;<span class="ident" id="4783711">nextInt</span><span class="op" id="4783718">(</span><span class="op" id="4783719">)</span>&nbsp;<span class="ident" id="4783721">int64</span>&nbsp;<span class="op" id="4783727">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783730">n</span><span class="op" id="4783731">,</span>&nbsp;<span class="ident" id="4783733">_</span><span class="op" id="4783734">,</span>&nbsp;<span class="ident" id="4783736">err</span>&nbsp;<span class="op" id="4783740">:=</span>&nbsp;<span class="ident" id="4783743">decodeUintReader</span><span class="op" id="4783759">(</span><span class="op" id="4783760">&amp;</span><span class="ident" id="4783761">dec</span><span class="op" id="4783764">.</span><span class="ident" id="4783765">buf</span><span class="op" id="4783768">,</span>&nbsp;<span class="ident" id="4783770">dec</span><span class="op" id="4783773">.</span><span class="ident" id="4783774">countBuf</span><span class="op" id="4783782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783785">if</span>&nbsp;<span class="ident" id="4783788">err</span>&nbsp;<span class="op" id="4783792">!=</span>&nbsp;<span class="ident" id="4783795">nil</span>&nbsp;<span class="op" id="4783799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783803">dec</span><span class="op" id="4783806">.</span><span class="ident" id="4783807">err</span>&nbsp;<span class="op" id="4783811">=</span>&nbsp;<span class="ident" id="4783813">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783821">return</span>&nbsp;<span class="ident" id="4783828">toInt</span><span class="op" id="4783833">(</span><span class="ident" id="4783834">n</span><span class="op" id="4783835">)</span><br>
<span class="lineno">120</span><span class="op" id="4783837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4783840">func</span>&nbsp;<span class="op" id="4783845">(</span><span class="ident" id="4783846">dec</span>&nbsp;<span class="op" id="4783850">*</span><span class="ident" id="4783851">Decoder</span><span class="op" id="4783858">)</span>&nbsp;<span class="ident" id="4783860">nextUint</span><span class="op" id="4783868">(</span><span class="op" id="4783869">)</span>&nbsp;<span class="ident" id="4783871">uint64</span>&nbsp;<span class="op" id="4783878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783881">n</span><span class="op" id="4783882">,</span>&nbsp;<span class="ident" id="4783884">_</span><span class="op" id="4783885">,</span>&nbsp;<span class="ident" id="4783887">err</span>&nbsp;<span class="op" id="4783891">:=</span>&nbsp;<span class="ident" id="4783894">decodeUintReader</span><span class="op" id="4783910">(</span><span class="op" id="4783911">&amp;</span><span class="ident" id="4783912">dec</span><span class="op" id="4783915">.</span><span class="ident" id="4783916">buf</span><span class="op" id="4783919">,</span>&nbsp;<span class="ident" id="4783921">dec</span><span class="op" id="4783924">.</span><span class="ident" id="4783925">countBuf</span><span class="op" id="4783933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783936">if</span>&nbsp;<span class="ident" id="4783939">err</span>&nbsp;<span class="op" id="4783943">!=</span>&nbsp;<span class="ident" id="4783946">nil</span>&nbsp;<span class="op" id="4783950">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783954">dec</span><span class="op" id="4783957">.</span><span class="ident" id="4783958">err</span>&nbsp;<span class="op" id="4783962">=</span>&nbsp;<span class="ident" id="4783964">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783972">return</span>&nbsp;<span class="ident" id="4783979">n</span><br>
<span class="lineno"></span><span class="op" id="4783981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4783984">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="4784014">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="4784030">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="4784076">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4784140">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="4784206">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4784271">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="4784297">func</span>&nbsp;<span class="op" id="4784302">(</span><span class="ident" id="4784303">dec</span>&nbsp;<span class="op" id="4784307">*</span><span class="ident" id="4784308">Decoder</span><span class="op" id="4784315">)</span>&nbsp;<span class="ident" id="4784317">decodeTypeSequence</span><span class="op" id="4784335">(</span><span class="ident" id="4784336">isInterface</span>&nbsp;<span class="builtintype" id="4784348">bool</span><span class="op" id="4784352">)</span>&nbsp;<span class="ident" id="4784354">typeId</span>&nbsp;<span class="op" id="4784361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784364">for</span>&nbsp;<span class="ident" id="4784368">dec</span><span class="op" id="4784371">.</span><span class="ident" id="4784372">err</span>&nbsp;<span class="op" id="4784376">==</span>&nbsp;<span class="ident" id="4784379">nil</span>&nbsp;<span class="op" id="4784383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784387">if</span>&nbsp;<span class="ident" id="4784390">dec</span><span class="op" id="4784393">.</span><span class="ident" id="4784394">buf</span><span class="op" id="4784397">.</span><span class="ident" id="4784398">Len</span><span class="op" id="4784401">(</span><span class="op" id="4784402">)</span>&nbsp;<span class="op" id="4784404">==</span>&nbsp;<span class="num" id="4784407">0</span>&nbsp;<span class="op" id="4784409">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784414">if</span>&nbsp;<span class="op" id="4784417">!</span><span class="ident" id="4784418">dec</span><span class="op" id="4784421">.</span><span class="ident" id="4784422">recvMessage</span><span class="op" id="4784433">(</span><span class="op" id="4784434">)</span>&nbsp;<span class="op" id="4784436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784442">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784459">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784483">id</span>&nbsp;<span class="op" id="4784486">:=</span>&nbsp;<span class="ident" id="4784489">typeId</span><span class="op" id="4784495">(</span><span class="ident" id="4784496">dec</span><span class="op" id="4784499">.</span><span class="ident" id="4784500">nextInt</span><span class="op" id="4784507">(</span><span class="op" id="4784508">)</span><span class="op" id="4784509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784513">if</span>&nbsp;<span class="ident" id="4784516">id</span>&nbsp;<span class="op" id="4784519">&gt;=</span>&nbsp;<span class="num" id="4784522">0</span>&nbsp;<span class="op" id="4784524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784529">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784550">return</span>&nbsp;<span class="ident" id="4784557">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784562">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784566">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784606">dec</span><span class="op" id="4784609">.</span><span class="ident" id="4784610">recvType</span><span class="op" id="4784618">(</span><span class="op" id="4784619">-</span><span class="ident" id="4784620">id</span><span class="op" id="4784622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784626">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784687">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784745">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784805">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784844">if</span>&nbsp;<span class="ident" id="4784847">dec</span><span class="op" id="4784850">.</span><span class="ident" id="4784851">buf</span><span class="op" id="4784854">.</span><span class="ident" id="4784855">Len</span><span class="op" id="4784858">(</span><span class="op" id="4784859">)</span>&nbsp;<span class="op" id="4784861">&gt;</span>&nbsp;<span class="num" id="4784863">0</span>&nbsp;<span class="op" id="4784865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784870">if</span>&nbsp;<span class="op" id="4784873">!</span><span class="ident" id="4784874">isInterface</span>&nbsp;<span class="op" id="4784886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784892">dec</span><span class="op" id="4784895">.</span><span class="ident" id="4784896">err</span>&nbsp;<span class="op" id="4784900">=</span>&nbsp;<span class="ident" id="4784902">errors</span><span class="op" id="4784908">.</span><span class="ident" id="4784909">New</span><span class="op" id="4784912">(</span><span class="string" id="4784913">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="4784935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784941">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784955">dec</span><span class="op" id="4784958">.</span><span class="ident" id="4784959">nextUint</span><span class="op" id="4784967">(</span><span class="op" id="4784968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784978">return</span>&nbsp;<span class="op" id="4784985">-</span><span class="num" id="4784986">1</span><br>
<span class="lineno">165</span><span class="op" id="4784988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4784991">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="4785055">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4785115">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="4785171">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4785222">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="4785271">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4785324">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4785346">func</span>&nbsp;<span class="op" id="4785351">(</span><span class="ident" id="4785352">dec</span>&nbsp;<span class="op" id="4785356">*</span><span class="ident" id="4785357">Decoder</span><span class="op" id="4785364">)</span>&nbsp;<span class="ident" id="4785366">Decode</span><span class="op" id="4785372">(</span><span class="ident" id="4785373">e</span>&nbsp;<span class="keyword" id="4785375">interface</span><span class="op" id="4785384">{</span><span class="op" id="4785385">}</span><span class="op" id="4785386">)</span>&nbsp;<span class="builtintype" id="4785388">error</span>&nbsp;<span class="op" id="4785394">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785397">if</span>&nbsp;<span class="ident" id="4785400">e</span>&nbsp;<span class="op" id="4785402">==</span>&nbsp;<span class="ident" id="4785405">nil</span>&nbsp;<span class="op" id="4785409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785413">return</span>&nbsp;<span class="ident" id="4785420">dec</span><span class="op" id="4785423">.</span><span class="ident" id="4785424">DecodeValue</span><span class="op" id="4785435">(</span><span class="ident" id="4785436">reflect</span><span class="op" id="4785443">.</span><span class="ident" id="4785444">Value</span><span class="op" id="4785449">{</span><span class="op" id="4785450">}</span><span class="op" id="4785451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785457">value</span>&nbsp;<span class="op" id="4785463">:=</span>&nbsp;<span class="ident" id="4785466">reflect</span><span class="op" id="4785473">.</span><span class="ident" id="4785474">ValueOf</span><span class="op" id="4785481">(</span><span class="ident" id="4785482">e</span><span class="op" id="4785483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4785486">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4785556">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785611">if</span>&nbsp;<span class="ident" id="4785614">value</span><span class="op" id="4785619">.</span><span class="ident" id="4785620">Type</span><span class="op" id="4785624">(</span><span class="op" id="4785625">)</span><span class="op" id="4785626">.</span><span class="ident" id="4785627">Kind</span><span class="op" id="4785631">(</span><span class="op" id="4785632">)</span>&nbsp;<span class="op" id="4785634">!=</span>&nbsp;<span class="ident" id="4785637">reflect</span><span class="op" id="4785644">.</span><span class="ident" id="4785645">Ptr</span>&nbsp;<span class="op" id="4785649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785653">dec</span><span class="op" id="4785656">.</span><span class="ident" id="4785657">err</span>&nbsp;<span class="op" id="4785661">=</span>&nbsp;<span class="ident" id="4785663">errors</span><span class="op" id="4785669">.</span><span class="ident" id="4785670">New</span><span class="op" id="4785673">(</span><span class="string" id="4785674">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="4785717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785721">return</span>&nbsp;<span class="ident" id="4785728">dec</span><span class="op" id="4785731">.</span><span class="ident" id="4785732">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785737">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785740">return</span>&nbsp;<span class="ident" id="4785747">dec</span><span class="op" id="4785750">.</span><span class="ident" id="4785751">DecodeValue</span><span class="op" id="4785762">(</span><span class="ident" id="4785763">value</span><span class="op" id="4785768">)</span><br>
<span class="lineno"></span><span class="op" id="4785770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4785773">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4785832">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="4785921">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="4785995">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="4786071">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4786129">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="4786151">func</span>&nbsp;<span class="op" id="4786156">(</span><span class="ident" id="4786157">dec</span>&nbsp;<span class="op" id="4786161">*</span><span class="ident" id="4786162">Decoder</span><span class="op" id="4786169">)</span>&nbsp;<span class="ident" id="4786171">DecodeValue</span><span class="op" id="4786182">(</span><span class="ident" id="4786183">v</span>&nbsp;<span class="ident" id="4786185">reflect</span><span class="op" id="4786192">.</span><span class="ident" id="4786193">Value</span><span class="op" id="4786198">)</span>&nbsp;<span class="builtintype" id="4786200">error</span>&nbsp;<span class="op" id="4786206">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786209">if</span>&nbsp;<span class="ident" id="4786212">v</span><span class="op" id="4786213">.</span><span class="ident" id="4786214">IsValid</span><span class="op" id="4786221">(</span><span class="op" id="4786222">)</span>&nbsp;<span class="op" id="4786224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786228">if</span>&nbsp;<span class="ident" id="4786231">v</span><span class="op" id="4786232">.</span><span class="ident" id="4786233">Kind</span><span class="op" id="4786237">(</span><span class="op" id="4786238">)</span>&nbsp;<span class="op" id="4786240">==</span>&nbsp;<span class="ident" id="4786243">reflect</span><span class="op" id="4786250">.</span><span class="ident" id="4786251">Ptr</span>&nbsp;<span class="op" id="4786255">&amp;&amp;</span>&nbsp;<span class="op" id="4786258">!</span><span class="ident" id="4786259">v</span><span class="op" id="4786260">.</span><span class="ident" id="4786261">IsNil</span><span class="op" id="4786266">(</span><span class="op" id="4786267">)</span>&nbsp;<span class="op" id="4786269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4786274">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786325">}</span>&nbsp;<span class="keyword" id="4786327">else</span>&nbsp;<span class="keyword" id="4786332">if</span>&nbsp;<span class="op" id="4786335">!</span><span class="ident" id="4786336">v</span><span class="op" id="4786337">.</span><span class="ident" id="4786338">CanSet</span><span class="op" id="4786344">(</span><span class="op" id="4786345">)</span>&nbsp;<span class="op" id="4786347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786352">return</span>&nbsp;<span class="ident" id="4786359">errors</span><span class="op" id="4786365">.</span><span class="ident" id="4786366">New</span><span class="op" id="4786369">(</span><span class="string" id="4786370">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="4786410">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4786420">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786470">dec</span><span class="op" id="4786473">.</span><span class="ident" id="4786474">mutex</span><span class="op" id="4786479">.</span><span class="ident" id="4786480">Lock</span><span class="op" id="4786484">(</span><span class="op" id="4786485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786488">defer</span>&nbsp;<span class="ident" id="4786494">dec</span><span class="op" id="4786497">.</span><span class="ident" id="4786498">mutex</span><span class="op" id="4786503">.</span><span class="ident" id="4786504">Unlock</span><span class="op" id="4786510">(</span><span class="op" id="4786511">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786515">dec</span><span class="op" id="4786518">.</span><span class="ident" id="4786519">buf</span><span class="op" id="4786522">.</span><span class="ident" id="4786523">Reset</span><span class="op" id="4786528">(</span><span class="op" id="4786529">)</span>&nbsp;<span class="comment" id="4786531">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786582">dec</span><span class="op" id="4786585">.</span><span class="ident" id="4786586">err</span>&nbsp;<span class="op" id="4786590">=</span>&nbsp;<span class="ident" id="4786592">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786597">id</span>&nbsp;<span class="op" id="4786600">:=</span>&nbsp;<span class="ident" id="4786603">dec</span><span class="op" id="4786606">.</span><span class="ident" id="4786607">decodeTypeSequence</span><span class="op" id="4786625">(</span><span class="builtintype" id="4786626">false</span><span class="op" id="4786631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786634">if</span>&nbsp;<span class="ident" id="4786637">dec</span><span class="op" id="4786640">.</span><span class="ident" id="4786641">err</span>&nbsp;<span class="op" id="4786645">==</span>&nbsp;<span class="ident" id="4786648">nil</span>&nbsp;<span class="op" id="4786652">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786656">dec</span><span class="op" id="4786659">.</span><span class="ident" id="4786660">decodeValue</span><span class="op" id="4786671">(</span><span class="ident" id="4786672">id</span><span class="op" id="4786674">,</span>&nbsp;<span class="ident" id="4786676">v</span><span class="op" id="4786677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786683">return</span>&nbsp;<span class="ident" id="4786690">dec</span><span class="op" id="4786693">.</span><span class="ident" id="4786694">err</span><br>
<span class="lineno"></span><span class="op" id="4786698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="4786701">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="4786781">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="4786866">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4786890">var</span>&nbsp;<span class="ident" id="4786894">debugFunc</span>&nbsp;<span class="keyword" id="4786904">func</span><span class="op" id="4786908">(</span><span class="ident" id="4786909">io</span><span class="op" id="4786911">.</span><span class="ident" id="4786912">Reader</span><span class="op" id="4786918">)</span>
</div>
</body>
</html>
