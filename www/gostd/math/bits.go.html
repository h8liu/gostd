<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html" class="current">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2051000">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2051055">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2051109">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2051160">package</span>&nbsp;<span class="ident" id="2051168">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2051174">const</span>&nbsp;<span class="op" id="2051180">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051183">uvnan</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051192">=</span>&nbsp;<span class="num" id="2051194">0x7FF8000000000001</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051214">uvinf</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051223">=</span>&nbsp;<span class="num" id="2051225">0x7FF0000000000000</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051245">uvneginf</span>&nbsp;<span class="op" id="2051254">=</span>&nbsp;<span class="num" id="2051256">0xFFF0000000000000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051276">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051285">=</span>&nbsp;<span class="num" id="2051287">0x7FF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051294">shift</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051303">=</span>&nbsp;<span class="num" id="2051305">64</span>&nbsp;<span class="op" id="2051308">-</span>&nbsp;<span class="num" id="2051310">11</span>&nbsp;<span class="op" id="2051313">-</span>&nbsp;<span class="num" id="2051315">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051318">bias</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051327">=</span>&nbsp;<span class="num" id="2051329">1023</span><br>
<span class="lineno"></span><span class="op" id="2051334">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2051337">//&nbsp;Inf&nbsp;returns&nbsp;positive&nbsp;infinity&nbsp;if&nbsp;sign&nbsp;&gt;=&nbsp;0,&nbsp;negative&nbsp;infinity&nbsp;if&nbsp;sign&nbsp;&lt;&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2051415">func</span>&nbsp;<span class="ident" id="2051420">Inf</span><span class="op" id="2051423">(</span><span class="ident" id="2051424">sign</span>&nbsp;<span class="builtintype" id="2051429">int</span><span class="op" id="2051432">)</span>&nbsp;<span class="builtintype" id="2051434">float64</span>&nbsp;<span class="op" id="2051442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2051445">var</span>&nbsp;<span class="ident" id="2051449">v</span>&nbsp;<span class="ident" id="2051451">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2051459">if</span>&nbsp;<span class="ident" id="2051462">sign</span>&nbsp;<span class="op" id="2051467">&gt;=</span>&nbsp;<span class="num" id="2051470">0</span>&nbsp;<span class="op" id="2051472">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051476">v</span>&nbsp;<span class="op" id="2051478">=</span>&nbsp;<span class="ident" id="2051480">uvinf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051487">}</span>&nbsp;<span class="keyword" id="2051489">else</span>&nbsp;<span class="op" id="2051494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2051498">v</span>&nbsp;<span class="op" id="2051500">=</span>&nbsp;<span class="ident" id="2051502">uvneginf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2051512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2051515">return</span>&nbsp;<span class="ident" id="2051522">Float64frombits</span><span class="op" id="2051537">(</span><span class="ident" id="2051538">v</span><span class="op" id="2051539">)</span><br>
<span class="lineno">25</span><span class="op" id="2051541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2051544">//&nbsp;NaN&nbsp;returns&nbsp;an&nbsp;IEEE&nbsp;754&nbsp;``not-a-number&#39;&#39;&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2051595">func</span>&nbsp;<span class="ident" id="2051600">NaN</span><span class="op" id="2051603">(</span><span class="op" id="2051604">)</span>&nbsp;<span class="builtintype" id="2051606">float64</span>&nbsp;<span class="op" id="2051614">{</span>&nbsp;<span class="keyword" id="2051616">return</span>&nbsp;<span class="ident" id="2051623">Float64frombits</span><span class="op" id="2051638">(</span><span class="ident" id="2051639">uvnan</span><span class="op" id="2051644">)</span>&nbsp;<span class="op" id="2051646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="2051649">//&nbsp;IsNaN&nbsp;reports&nbsp;whether&nbsp;f&nbsp;is&nbsp;an&nbsp;IEEE&nbsp;754&nbsp;``not-a-number&#39;&#39;&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2051715">func</span>&nbsp;<span class="ident" id="2051720">IsNaN</span><span class="op" id="2051725">(</span><span class="ident" id="2051726">f</span>&nbsp;<span class="builtintype" id="2051728">float64</span><span class="op" id="2051735">)</span>&nbsp;<span class="op" id="2051737">(</span><span class="ident" id="2051738">is</span>&nbsp;<span class="builtintype" id="2051741">bool</span><span class="op" id="2051745">)</span>&nbsp;<span class="op" id="2051747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2051750">//&nbsp;IEEE&nbsp;754&nbsp;says&nbsp;that&nbsp;only&nbsp;NaNs&nbsp;satisfy&nbsp;f&nbsp;!=&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2051799">//&nbsp;To&nbsp;avoid&nbsp;the&nbsp;floating-point&nbsp;hardware,&nbsp;could&nbsp;use:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2051852">//&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;:=&nbsp;Float64bits(f);</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2051877">//&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;uint32(x&gt;&gt;shift)&amp;mask&nbsp;==&nbsp;mask&nbsp;&amp;&amp;&nbsp;x&nbsp;!=&nbsp;uvinf&nbsp;&amp;&amp;&nbsp;x&nbsp;!=&nbsp;uvneginf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2051949">return</span>&nbsp;<span class="ident" id="2051956">f</span>&nbsp;<span class="op" id="2051958">!=</span>&nbsp;<span class="ident" id="2051961">f</span><br>
<span class="lineno"></span><span class="op" id="2051963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2051966">//&nbsp;IsInf&nbsp;reports&nbsp;whether&nbsp;f&nbsp;is&nbsp;an&nbsp;infinity,&nbsp;according&nbsp;to&nbsp;sign.</span><br>
<span class="lineno">40</span><span class="comment" id="2052028">//&nbsp;If&nbsp;sign&nbsp;&gt;&nbsp;0,&nbsp;IsInf&nbsp;reports&nbsp;whether&nbsp;f&nbsp;is&nbsp;positive&nbsp;infinity.</span><br>
<span class="lineno"></span><span class="comment" id="2052090">//&nbsp;If&nbsp;sign&nbsp;&lt;&nbsp;0,&nbsp;IsInf&nbsp;reports&nbsp;whether&nbsp;f&nbsp;is&nbsp;negative&nbsp;infinity.</span><br>
<span class="lineno"></span><span class="comment" id="2052152">//&nbsp;If&nbsp;sign&nbsp;==&nbsp;0,&nbsp;IsInf&nbsp;reports&nbsp;whether&nbsp;f&nbsp;is&nbsp;either&nbsp;infinity.</span><br>
<span class="lineno"></span><span class="keyword" id="2052213">func</span>&nbsp;<span class="ident" id="2052218">IsInf</span><span class="op" id="2052223">(</span><span class="ident" id="2052224">f</span>&nbsp;<span class="builtintype" id="2052226">float64</span><span class="op" id="2052233">,</span>&nbsp;<span class="ident" id="2052235">sign</span>&nbsp;<span class="builtintype" id="2052240">int</span><span class="op" id="2052243">)</span>&nbsp;<span class="builtintype" id="2052245">bool</span>&nbsp;<span class="op" id="2052250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2052253">//&nbsp;Test&nbsp;for&nbsp;infinity&nbsp;by&nbsp;comparing&nbsp;against&nbsp;maximum&nbsp;float.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2052311">//&nbsp;To&nbsp;avoid&nbsp;the&nbsp;floating-point&nbsp;hardware,&nbsp;could&nbsp;use:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2052364">//&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;:=&nbsp;Float64bits(f);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2052389">//&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sign&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;x&nbsp;==&nbsp;uvinf&nbsp;||&nbsp;sign&nbsp;&lt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;x&nbsp;==&nbsp;uvneginf;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052455">return</span>&nbsp;<span class="ident" id="2052462">sign</span>&nbsp;<span class="op" id="2052467">&gt;=</span>&nbsp;<span class="num" id="2052470">0</span>&nbsp;<span class="op" id="2052472">&amp;&amp;</span>&nbsp;<span class="ident" id="2052475">f</span>&nbsp;<span class="op" id="2052477">&gt;</span>&nbsp;<span class="ident" id="2052479">MaxFloat64</span>&nbsp;<span class="op" id="2052490">||</span>&nbsp;<span class="ident" id="2052493">sign</span>&nbsp;<span class="op" id="2052498">&lt;=</span>&nbsp;<span class="num" id="2052501">0</span>&nbsp;<span class="op" id="2052503">&amp;&amp;</span>&nbsp;<span class="ident" id="2052506">f</span>&nbsp;<span class="op" id="2052508">&lt;</span>&nbsp;<span class="op" id="2052510">-</span><span class="ident" id="2052511">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2052522">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2052525">//&nbsp;normalize&nbsp;returns&nbsp;a&nbsp;normal&nbsp;number&nbsp;y&nbsp;and&nbsp;exponent&nbsp;exp</span><br>
<span class="lineno"></span><span class="comment" id="2052581">//&nbsp;satisfying&nbsp;x&nbsp;==&nbsp;y&nbsp;×&nbsp;2**exp.&nbsp;It&nbsp;assumes&nbsp;x&nbsp;is&nbsp;finite&nbsp;and&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="keyword" id="2052650">func</span>&nbsp;<span class="ident" id="2052655">normalize</span><span class="op" id="2052664">(</span><span class="ident" id="2052665">x</span>&nbsp;<span class="builtintype" id="2052667">float64</span><span class="op" id="2052674">)</span>&nbsp;<span class="op" id="2052676">(</span><span class="ident" id="2052677">y</span>&nbsp;<span class="builtintype" id="2052679">float64</span><span class="op" id="2052686">,</span>&nbsp;<span class="ident" id="2052688">exp</span>&nbsp;<span class="builtintype" id="2052692">int</span><span class="op" id="2052695">)</span>&nbsp;<span class="op" id="2052697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052700">const</span>&nbsp;<span class="ident" id="2052706">SmallestNormal</span>&nbsp;<span class="op" id="2052721">=</span>&nbsp;<span class="num" id="2052723">2.2250738585072014e-308</span>&nbsp;<span class="comment" id="2052747">//&nbsp;2**-1022</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052760">if</span>&nbsp;<span class="ident" id="2052763">Abs</span><span class="op" id="2052766">(</span><span class="ident" id="2052767">x</span><span class="op" id="2052768">)</span>&nbsp;<span class="op" id="2052770">&lt;</span>&nbsp;<span class="ident" id="2052772">SmallestNormal</span>&nbsp;<span class="op" id="2052787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052791">return</span>&nbsp;<span class="ident" id="2052798">x</span>&nbsp;<span class="op" id="2052800">*</span>&nbsp;<span class="op" id="2052802">(</span><span class="num" id="2052803">1</span>&nbsp;<span class="op" id="2052805">&lt;&lt;</span>&nbsp;<span class="num" id="2052808">52</span><span class="op" id="2052810">)</span><span class="op" id="2052811">,</span>&nbsp;<span class="op" id="2052813">-</span><span class="num" id="2052814">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052821">return</span>&nbsp;<span class="ident" id="2052828">x</span><span class="op" id="2052829">,</span>&nbsp;<span class="num" id="2052831">0</span><br>
<span class="lineno"></span><span class="op" id="2052833">}</span>
</div>
</body>
</html>
