<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html" class="current">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6863493">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6863548">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6863602">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6863653">package</span>&nbsp;<span class="ident" id="6863661">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6863667">import</span>&nbsp;<span class="op" id="6863674">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6863677">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6863686">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6863694">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6863705">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6863716">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6863726">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6863729">type</span>&nbsp;<span class="ident" id="6863734">Optionals</span>&nbsp;<span class="keyword" id="6863744">struct</span>&nbsp;<span class="op" id="6863751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863754">Sr</span>&nbsp;<span class="builtintype" id="6863757">string</span>&nbsp;<span class="string" id="6863764">`json:&#34;sr&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863777">So</span>&nbsp;<span class="builtintype" id="6863780">string</span>&nbsp;<span class="string" id="6863787">`json:&#34;so,omitempty&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863810">Sw</span>&nbsp;<span class="builtintype" id="6863813">string</span>&nbsp;<span class="string" id="6863820">`json:&#34;-&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863833">Ir</span>&nbsp;<span class="builtintype" id="6863836">int</span>&nbsp;<span class="string" id="6863840">`json:&#34;omitempty&#34;`</span>&nbsp;<span class="comment" id="6863859">//&nbsp;actually&nbsp;named&nbsp;omitempty,&nbsp;not&nbsp;an&nbsp;option</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863903">Io</span>&nbsp;<span class="builtintype" id="6863906">int</span>&nbsp;<span class="string" id="6863910">`json:&#34;io,omitempty&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863934">Slr</span>&nbsp;<span class="op" id="6863938">[</span><span class="op" id="6863939">]</span><span class="builtintype" id="6863940">string</span>&nbsp;<span class="string" id="6863947">`json:&#34;slr,random&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863968">Slo</span>&nbsp;<span class="op" id="6863972">[</span><span class="op" id="6863973">]</span><span class="builtintype" id="6863974">string</span>&nbsp;<span class="string" id="6863981">`json:&#34;slo,omitempty&#34;`</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864006">Mr</span>&nbsp;<span class="keyword" id="6864009">map</span><span class="op" id="6864012">[</span><span class="builtintype" id="6864013">string</span><span class="op" id="6864019">]</span><span class="keyword" id="6864020">interface</span><span class="op" id="6864029">{</span><span class="op" id="6864030">}</span>&nbsp;<span class="string" id="6864032">`json:&#34;mr&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864045">Mo</span>&nbsp;<span class="keyword" id="6864048">map</span><span class="op" id="6864051">[</span><span class="builtintype" id="6864052">string</span><span class="op" id="6864058">]</span><span class="keyword" id="6864059">interface</span><span class="op" id="6864068">{</span><span class="op" id="6864069">}</span>&nbsp;<span class="string" id="6864071">`json:&#34;,omitempty&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864093">Fr</span>&nbsp;<span class="builtintype" id="6864096">float64</span>&nbsp;<span class="string" id="6864104">`json:&#34;fr&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864117">Fo</span>&nbsp;<span class="builtintype" id="6864120">float64</span>&nbsp;<span class="string" id="6864128">`json:&#34;fo,omitempty&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864152">Br</span>&nbsp;<span class="builtintype" id="6864155">bool</span>&nbsp;<span class="string" id="6864160">`json:&#34;br&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864173">Bo</span>&nbsp;<span class="builtintype" id="6864176">bool</span>&nbsp;<span class="string" id="6864181">`json:&#34;bo,omitempty&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864205">Ur</span>&nbsp;<span class="builtintype" id="6864208">uint</span>&nbsp;<span class="string" id="6864213">`json:&#34;ur&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864226">Uo</span>&nbsp;<span class="builtintype" id="6864229">uint</span>&nbsp;<span class="string" id="6864234">`json:&#34;uo,omitempty&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864258">Str</span>&nbsp;<span class="keyword" id="6864262">struct</span><span class="op" id="6864268">{</span><span class="op" id="6864269">}</span>&nbsp;<span class="string" id="6864271">`json:&#34;str&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864285">Sto</span>&nbsp;<span class="keyword" id="6864289">struct</span><span class="op" id="6864295">{</span><span class="op" id="6864296">}</span>&nbsp;<span class="string" id="6864298">`json:&#34;sto,omitempty&#34;`</span><br>
<span class="lineno">40</span><span class="op" id="6864321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6864324">var</span>&nbsp;<span class="ident" id="6864328">optionalsExpected</span>&nbsp;<span class="op" id="6864346">=</span>&nbsp;<span class="string" id="6864348">`{<br>
<span class="lineno"></span>&nbsp;&#34;sr&#34;:&nbsp;&#34;&#34;,<br>
<span class="lineno"></span>&nbsp;&#34;omitempty&#34;:&nbsp;0,<br>
<span class="lineno">45</span>&nbsp;&#34;slr&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&#34;mr&#34;:&nbsp;{},<br>
<span class="lineno"></span>&nbsp;&#34;fr&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&#34;br&#34;:&nbsp;false,<br>
<span class="lineno"></span>&nbsp;&#34;ur&#34;:&nbsp;0,<br>
<span class="lineno">50</span>&nbsp;&#34;str&#34;:&nbsp;{},<br>
<span class="lineno"></span>&nbsp;&#34;sto&#34;:&nbsp;{}<br>
<span class="lineno"></span>}`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6864465">func</span>&nbsp;<span class="ident" id="6864470">TestOmitEmpty</span><span class="op" id="6864483">(</span><span class="ident" id="6864484">t</span>&nbsp;<span class="op" id="6864486">*</span><span class="ident" id="6864487"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6864494">.</span><span class="ident" id="6864495"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6864496">)</span>&nbsp;<span class="op" id="6864498">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6864501">var</span>&nbsp;<span class="ident" id="6864505">o</span>&nbsp;<span class="ident" id="6864507"><a href="/gostd/encoding/json/encode_test.go.html#6863734">Optionals</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864518"><a href="/gostd/encoding/json/encode_test.go.html#6864505">o</a></span><span class="op" id="6864519">.</span><span class="ident" id="6864520"><a href="/gostd/encoding/json/encode_test.go.html#6863810">Sw</a></span>&nbsp;<span class="op" id="6864523">=</span>&nbsp;<span class="string" id="6864525">&#34;something&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864538"><a href="/gostd/encoding/json/encode_test.go.html#6864505">o</a></span><span class="op" id="6864539">.</span><span class="ident" id="6864540"><a href="/gostd/encoding/json/encode_test.go.html#6864006">Mr</a></span>&nbsp;<span class="op" id="6864543">=</span>&nbsp;<span class="keyword" id="6864545">map</span><span class="op" id="6864548">[</span><span class="builtintype" id="6864549">string</span><span class="op" id="6864555">]</span><span class="keyword" id="6864556">interface</span><span class="op" id="6864565">{</span><span class="op" id="6864566">}</span><span class="op" id="6864567">{</span><span class="op" id="6864568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864571"><a href="/gostd/encoding/json/encode_test.go.html#6864505">o</a></span><span class="op" id="6864572">.</span><span class="ident" id="6864573"><a href="/gostd/encoding/json/encode_test.go.html#6864045">Mo</a></span>&nbsp;<span class="op" id="6864576">=</span>&nbsp;<span class="keyword" id="6864578">map</span><span class="op" id="6864581">[</span><span class="builtintype" id="6864582">string</span><span class="op" id="6864588">]</span><span class="keyword" id="6864589">interface</span><span class="op" id="6864598">{</span><span class="op" id="6864599">}</span><span class="op" id="6864600">{</span><span class="op" id="6864601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864605">got</span><span class="op" id="6864608">,</span>&nbsp;<span class="ident" id="6864610">err</span>&nbsp;<span class="op" id="6864614">:=</span>&nbsp;<span class="ident" id="6864617"><a href="/gostd/encoding/json/encode.go.html#3995259">MarshalIndent</a></span><span class="op" id="6864630">(</span><span class="op" id="6864631">&amp;</span><span class="ident" id="6864632"><a href="/gostd/encoding/json/encode_test.go.html#6864505">o</a></span><span class="op" id="6864633">,</span>&nbsp;<span class="string" id="6864635">&#34;&#34;</span><span class="op" id="6864637">,</span>&nbsp;<span class="string" id="6864639">&#34;&nbsp;&#34;</span><span class="op" id="6864642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6864645">if</span>&nbsp;<span class="ident" id="6864648"><a href="/gostd/encoding/json/encode_test.go.html#6864610">err</a></span>&nbsp;<span class="op" id="6864652">!=</span>&nbsp;<span class="builtintype" id="6864655">nil</span>&nbsp;<span class="op" id="6864659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864663"><a href="/gostd/encoding/json/encode_test.go.html#6864484">t</a></span><span class="op" id="6864664">.</span><span class="ident" id="6864665"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6864670">(</span><span class="ident" id="6864671"><a href="/gostd/encoding/json/encode_test.go.html#6864610">err</a></span><span class="op" id="6864674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6864677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6864680">if</span>&nbsp;<span class="ident" id="6864683">got</span>&nbsp;<span class="op" id="6864687">:=</span>&nbsp;<span class="builtintype" id="6864690">string</span><span class="op" id="6864696">(</span><span class="ident" id="6864697"><a href="/gostd/encoding/json/encode_test.go.html#6864605">got</a></span><span class="op" id="6864700">)</span><span class="op" id="6864701">;</span>&nbsp;<span class="ident" id="6864703"><a href="/gostd/encoding/json/encode_test.go.html#6864683">got</a></span>&nbsp;<span class="op" id="6864707">!=</span>&nbsp;<span class="ident" id="6864710"><a href="/gostd/encoding/json/encode_test.go.html#6864328">optionalsExpected</a></span>&nbsp;<span class="op" id="6864728">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864732"><a href="/gostd/encoding/json/encode_test.go.html#6864484">t</a></span><span class="op" id="6864733">.</span><span class="ident" id="6864734"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6864740">(</span><span class="string" id="6864741">&#34;&nbsp;got:&nbsp;%s\nwant:&nbsp;%s\n&#34;</span><span class="op" id="6864763">,</span>&nbsp;<span class="ident" id="6864765"><a href="/gostd/encoding/json/encode_test.go.html#6864683">got</a></span><span class="op" id="6864768">,</span>&nbsp;<span class="ident" id="6864770"><a href="/gostd/encoding/json/encode_test.go.html#6864328">optionalsExpected</a></span><span class="op" id="6864787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6864790">}</span><br>
<span class="lineno"></span><span class="op" id="6864792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6864795">type</span>&nbsp;<span class="ident" id="6864800">StringTag</span>&nbsp;<span class="keyword" id="6864810">struct</span>&nbsp;<span class="op" id="6864817">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864820">BoolStr</span>&nbsp;<span class="builtintype" id="6864828">bool</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6864835">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864853">IntStr</span>&nbsp;&nbsp;<span class="builtintype" id="6864861">int64</span>&nbsp;&nbsp;<span class="string" id="6864868">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6864886">StrStr</span>&nbsp;&nbsp;<span class="builtintype" id="6864894">string</span>&nbsp;<span class="string" id="6864901">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6864918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6864921">var</span>&nbsp;<span class="ident" id="6864925">stringTagExpected</span>&nbsp;<span class="op" id="6864943">=</span>&nbsp;<span class="string" id="6864945">`{<br>
<span class="lineno"></span>&nbsp;&#34;BoolStr&#34;:&nbsp;&#34;true&#34;,<br>
<span class="lineno"></span>&nbsp;&#34;IntStr&#34;:&nbsp;&#34;42&#34;,<br>
<span class="lineno"></span>&nbsp;&#34;StrStr&#34;:&nbsp;&#34;\&#34;xzbit\&#34;&#34;<br>
<span class="lineno"></span>}`</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="6865012">func</span>&nbsp;<span class="ident" id="6865017">TestStringTag</span><span class="op" id="6865030">(</span><span class="ident" id="6865031">t</span>&nbsp;<span class="op" id="6865033">*</span><span class="ident" id="6865034"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6865041">.</span><span class="ident" id="6865042"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6865043">)</span>&nbsp;<span class="op" id="6865045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865048">var</span>&nbsp;<span class="ident" id="6865052">s</span>&nbsp;<span class="ident" id="6865054"><a href="/gostd/encoding/json/encode_test.go.html#6864800">StringTag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865065"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865066">.</span><span class="ident" id="6865067"><a href="/gostd/encoding/json/encode_test.go.html#6864820">BoolStr</a></span>&nbsp;<span class="op" id="6865075">=</span>&nbsp;<span class="builtintype" id="6865077">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865083"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865084">.</span><span class="ident" id="6865085"><a href="/gostd/encoding/json/encode_test.go.html#6864853">IntStr</a></span>&nbsp;<span class="op" id="6865092">=</span>&nbsp;<span class="num" id="6865094">42</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865098"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865099">.</span><span class="ident" id="6865100"><a href="/gostd/encoding/json/encode_test.go.html#6864886">StrStr</a></span>&nbsp;<span class="op" id="6865107">=</span>&nbsp;<span class="string" id="6865109">&#34;xzbit&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865118">got</span><span class="op" id="6865121">,</span>&nbsp;<span class="ident" id="6865123">err</span>&nbsp;<span class="op" id="6865127">:=</span>&nbsp;<span class="ident" id="6865130"><a href="/gostd/encoding/json/encode.go.html#3995259">MarshalIndent</a></span><span class="op" id="6865143">(</span><span class="op" id="6865144">&amp;</span><span class="ident" id="6865145"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865146">,</span>&nbsp;<span class="string" id="6865148">&#34;&#34;</span><span class="op" id="6865150">,</span>&nbsp;<span class="string" id="6865152">&#34;&nbsp;&#34;</span><span class="op" id="6865155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865158">if</span>&nbsp;<span class="ident" id="6865161"><a href="/gostd/encoding/json/encode_test.go.html#6865123">err</a></span>&nbsp;<span class="op" id="6865165">!=</span>&nbsp;<span class="builtintype" id="6865168">nil</span>&nbsp;<span class="op" id="6865172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865176"><a href="/gostd/encoding/json/encode_test.go.html#6865031">t</a></span><span class="op" id="6865177">.</span><span class="ident" id="6865178"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6865183">(</span><span class="ident" id="6865184"><a href="/gostd/encoding/json/encode_test.go.html#6865123">err</a></span><span class="op" id="6865187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865190">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865193">if</span>&nbsp;<span class="ident" id="6865196">got</span>&nbsp;<span class="op" id="6865200">:=</span>&nbsp;<span class="builtintype" id="6865203">string</span><span class="op" id="6865209">(</span><span class="ident" id="6865210"><a href="/gostd/encoding/json/encode_test.go.html#6865118">got</a></span><span class="op" id="6865213">)</span><span class="op" id="6865214">;</span>&nbsp;<span class="ident" id="6865216"><a href="/gostd/encoding/json/encode_test.go.html#6865196">got</a></span>&nbsp;<span class="op" id="6865220">!=</span>&nbsp;<span class="ident" id="6865223"><a href="/gostd/encoding/json/encode_test.go.html#6864925">stringTagExpected</a></span>&nbsp;<span class="op" id="6865241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865245"><a href="/gostd/encoding/json/encode_test.go.html#6865031">t</a></span><span class="op" id="6865246">.</span><span class="ident" id="6865247"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6865253">(</span><span class="string" id="6865254">&#34;&nbsp;got:&nbsp;%s\nwant:&nbsp;%s\n&#34;</span><span class="op" id="6865276">,</span>&nbsp;<span class="ident" id="6865278"><a href="/gostd/encoding/json/encode_test.go.html#6865196">got</a></span><span class="op" id="6865281">,</span>&nbsp;<span class="ident" id="6865283"><a href="/gostd/encoding/json/encode_test.go.html#6864925">stringTagExpected</a></span><span class="op" id="6865300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6865307">//&nbsp;Verify&nbsp;that&nbsp;it&nbsp;round-trips.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865339">var</span>&nbsp;<span class="ident" id="6865343">s2</span>&nbsp;<span class="ident" id="6865346"><a href="/gostd/encoding/json/encode_test.go.html#6864800">StringTag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865357"><a href="/gostd/encoding/json/encode_test.go.html#6865123">err</a></span>&nbsp;<span class="op" id="6865361">=</span>&nbsp;<span class="ident" id="6865363"><a href="/gostd/encoding/json/stream.go.html#4044448">NewDecoder</a></span><span class="op" id="6865373">(</span><span class="ident" id="6865374"><a href="/gostd/encoding/json/encode_test.go.html#6863677">bytes</a></span><span class="op" id="6865379">.</span><span class="ident" id="6865380"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="6865389">(</span><span class="ident" id="6865390"><a href="/gostd/encoding/json/encode_test.go.html#6865118">got</a></span><span class="op" id="6865393">)</span><span class="op" id="6865394">)</span><span class="op" id="6865395">.</span><span class="ident" id="6865396"><a href="/gostd/encoding/json/stream.go.html#4044912">Decode</a></span><span class="op" id="6865402">(</span><span class="op" id="6865403">&amp;</span><span class="ident" id="6865404"><a href="/gostd/encoding/json/encode_test.go.html#6865343">s2</a></span><span class="op" id="6865406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865409">if</span>&nbsp;<span class="ident" id="6865412"><a href="/gostd/encoding/json/encode_test.go.html#6865123">err</a></span>&nbsp;<span class="op" id="6865416">!=</span>&nbsp;<span class="builtintype" id="6865419">nil</span>&nbsp;<span class="op" id="6865423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865427"><a href="/gostd/encoding/json/encode_test.go.html#6865031">t</a></span><span class="op" id="6865428">.</span><span class="ident" id="6865429"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6865435">(</span><span class="string" id="6865436">&#34;Decode:&nbsp;%v&#34;</span><span class="op" id="6865448">,</span>&nbsp;<span class="ident" id="6865450"><a href="/gostd/encoding/json/encode_test.go.html#6865123">err</a></span><span class="op" id="6865453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865456">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865459">if</span>&nbsp;<span class="op" id="6865462">!</span><span class="ident" id="6865463"><a href="/gostd/encoding/json/encode_test.go.html#6863694">reflect</a></span><span class="op" id="6865470">.</span><span class="ident" id="6865471"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="6865480">(</span><span class="ident" id="6865481"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865482">,</span>&nbsp;<span class="ident" id="6865484"><a href="/gostd/encoding/json/encode_test.go.html#6865343">s2</a></span><span class="op" id="6865486">)</span>&nbsp;<span class="op" id="6865488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865492"><a href="/gostd/encoding/json/encode_test.go.html#6865031">t</a></span><span class="op" id="6865493">.</span><span class="ident" id="6865494"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6865500">(</span><span class="string" id="6865501">&#34;decode&nbsp;didn&#39;t&nbsp;match.\nsource:&nbsp;%#v\nEncoded&nbsp;as:\n%s\ndecode:&nbsp;%#v&#34;</span><span class="op" id="6865566">,</span>&nbsp;<span class="ident" id="6865568"><a href="/gostd/encoding/json/encode_test.go.html#6865052">s</a></span><span class="op" id="6865569">,</span>&nbsp;<span class="builtintype" id="6865571">string</span><span class="op" id="6865577">(</span><span class="ident" id="6865578"><a href="/gostd/encoding/json/encode_test.go.html#6865118">got</a></span><span class="op" id="6865581">)</span><span class="op" id="6865582">,</span>&nbsp;<span class="ident" id="6865584"><a href="/gostd/encoding/json/encode_test.go.html#6865343">s2</a></span><span class="op" id="6865586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865589">}</span><br>
<span class="lineno"></span><span class="op" id="6865591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6865594">//&nbsp;byte&nbsp;slices&nbsp;are&nbsp;special&nbsp;even&nbsp;if&nbsp;they&#39;re&nbsp;renamed&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="6865652">type</span>&nbsp;<span class="ident" id="6865657">renamedByte</span>&nbsp;<span class="builtintype" id="6865669">byte</span><br>
<span class="lineno"></span><span class="keyword" id="6865674">type</span>&nbsp;<span class="ident" id="6865679">renamedByteSlice</span>&nbsp;<span class="op" id="6865696">[</span><span class="op" id="6865697">]</span><span class="builtintype" id="6865698">byte</span><br>
<span class="lineno"></span><span class="keyword" id="6865703">type</span>&nbsp;<span class="ident" id="6865708">renamedRenamedByteSlice</span>&nbsp;<span class="op" id="6865732">[</span><span class="op" id="6865733">]</span><span class="ident" id="6865734"><a href="/gostd/encoding/json/encode_test.go.html#6865657">renamedByte</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="6865747">func</span>&nbsp;<span class="ident" id="6865752">TestEncodeRenamedByteSlice</span><span class="op" id="6865778">(</span><span class="ident" id="6865779">t</span>&nbsp;<span class="op" id="6865781">*</span><span class="ident" id="6865782"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6865789">.</span><span class="ident" id="6865790"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6865791">)</span>&nbsp;<span class="op" id="6865793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865796">s</span>&nbsp;<span class="op" id="6865798">:=</span>&nbsp;<span class="ident" id="6865801"><a href="/gostd/encoding/json/encode_test.go.html#6865679">renamedByteSlice</a></span><span class="op" id="6865817">(</span><span class="string" id="6865818">&#34;abc&#34;</span><span class="op" id="6865823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865826">result</span><span class="op" id="6865832">,</span>&nbsp;<span class="ident" id="6865834">err</span>&nbsp;<span class="op" id="6865838">:=</span>&nbsp;<span class="ident" id="6865841"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6865848">(</span><span class="ident" id="6865849"><a href="/gostd/encoding/json/encode_test.go.html#6865796">s</a></span><span class="op" id="6865850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865853">if</span>&nbsp;<span class="ident" id="6865856"><a href="/gostd/encoding/json/encode_test.go.html#6865834">err</a></span>&nbsp;<span class="op" id="6865860">!=</span>&nbsp;<span class="builtintype" id="6865863">nil</span>&nbsp;<span class="op" id="6865867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865871"><a href="/gostd/encoding/json/encode_test.go.html#6865779">t</a></span><span class="op" id="6865872">.</span><span class="ident" id="6865873"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6865878">(</span><span class="ident" id="6865879"><a href="/gostd/encoding/json/encode_test.go.html#6865834">err</a></span><span class="op" id="6865882">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865888">expect</span>&nbsp;<span class="op" id="6865895">:=</span>&nbsp;<span class="string" id="6865898">`&#34;YWJj&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865908">if</span>&nbsp;<span class="builtintype" id="6865911">string</span><span class="op" id="6865917">(</span><span class="ident" id="6865918"><a href="/gostd/encoding/json/encode_test.go.html#6865826">result</a></span><span class="op" id="6865924">)</span>&nbsp;<span class="op" id="6865926">!=</span>&nbsp;<span class="ident" id="6865929"><a href="/gostd/encoding/json/encode_test.go.html#6865888">expect</a></span>&nbsp;<span class="op" id="6865936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865940"><a href="/gostd/encoding/json/encode_test.go.html#6865779">t</a></span><span class="op" id="6865941">.</span><span class="ident" id="6865942"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6865948">(</span><span class="string" id="6865949">&#34;&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6865966">,</span>&nbsp;<span class="ident" id="6865968"><a href="/gostd/encoding/json/encode_test.go.html#6865826">result</a></span><span class="op" id="6865974">,</span>&nbsp;<span class="ident" id="6865976"><a href="/gostd/encoding/json/encode_test.go.html#6865888">expect</a></span><span class="op" id="6865982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6865985">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6865988">r</span>&nbsp;<span class="op" id="6865990">:=</span>&nbsp;<span class="ident" id="6865993"><a href="/gostd/encoding/json/encode_test.go.html#6865708">renamedRenamedByteSlice</a></span><span class="op" id="6866016">(</span><span class="string" id="6866017">&#34;abc&#34;</span><span class="op" id="6866022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866025"><a href="/gostd/encoding/json/encode_test.go.html#6865826">result</a></span><span class="op" id="6866031">,</span>&nbsp;<span class="ident" id="6866033"><a href="/gostd/encoding/json/encode_test.go.html#6865834">err</a></span>&nbsp;<span class="op" id="6866037">=</span>&nbsp;<span class="ident" id="6866039"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6866046">(</span><span class="ident" id="6866047"><a href="/gostd/encoding/json/encode_test.go.html#6865988">r</a></span><span class="op" id="6866048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866051">if</span>&nbsp;<span class="ident" id="6866054"><a href="/gostd/encoding/json/encode_test.go.html#6865834">err</a></span>&nbsp;<span class="op" id="6866058">!=</span>&nbsp;<span class="builtintype" id="6866061">nil</span>&nbsp;<span class="op" id="6866065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866069"><a href="/gostd/encoding/json/encode_test.go.html#6865779">t</a></span><span class="op" id="6866070">.</span><span class="ident" id="6866071"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6866076">(</span><span class="ident" id="6866077"><a href="/gostd/encoding/json/encode_test.go.html#6865834">err</a></span><span class="op" id="6866080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866083">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866086">if</span>&nbsp;<span class="builtintype" id="6866089">string</span><span class="op" id="6866095">(</span><span class="ident" id="6866096"><a href="/gostd/encoding/json/encode_test.go.html#6865826">result</a></span><span class="op" id="6866102">)</span>&nbsp;<span class="op" id="6866104">!=</span>&nbsp;<span class="ident" id="6866107"><a href="/gostd/encoding/json/encode_test.go.html#6865888">expect</a></span>&nbsp;<span class="op" id="6866114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866118"><a href="/gostd/encoding/json/encode_test.go.html#6865779">t</a></span><span class="op" id="6866119">.</span><span class="ident" id="6866120"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6866126">(</span><span class="string" id="6866127">&#34;&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6866144">,</span>&nbsp;<span class="ident" id="6866146"><a href="/gostd/encoding/json/encode_test.go.html#6865826">result</a></span><span class="op" id="6866152">,</span>&nbsp;<span class="ident" id="6866154"><a href="/gostd/encoding/json/encode_test.go.html#6865888">expect</a></span><span class="op" id="6866160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866163">}</span><br>
<span class="lineno"></span><span class="op" id="6866165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="6866168">var</span>&nbsp;<span class="ident" id="6866172">unsupportedValues</span>&nbsp;<span class="op" id="6866190">=</span>&nbsp;<span class="op" id="6866192">[</span><span class="op" id="6866193">]</span><span class="keyword" id="6866194">interface</span><span class="op" id="6866203">{</span><span class="op" id="6866204">}</span><span class="op" id="6866205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866208"><a href="/gostd/encoding/json/encode_test.go.html#6863686">math</a></span><span class="op" id="6866212">.</span><span class="ident" id="6866213"><a href="/gostd/math/bits.go.html#2211303">NaN</a></span><span class="op" id="6866216">(</span><span class="op" id="6866217">)</span><span class="op" id="6866218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866221"><a href="/gostd/encoding/json/encode_test.go.html#6863686">math</a></span><span class="op" id="6866225">.</span><span class="ident" id="6866226"><a href="/gostd/math/bits.go.html#2211123">Inf</a></span><span class="op" id="6866229">(</span><span class="op" id="6866230">-</span><span class="num" id="6866231">1</span><span class="op" id="6866232">)</span><span class="op" id="6866233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866236"><a href="/gostd/encoding/json/encode_test.go.html#6863686">math</a></span><span class="op" id="6866240">.</span><span class="ident" id="6866241"><a href="/gostd/math/bits.go.html#2211123">Inf</a></span><span class="op" id="6866244">(</span><span class="num" id="6866245">1</span><span class="op" id="6866246">)</span><span class="op" id="6866247">,</span><br>
<span class="lineno"></span><span class="op" id="6866249">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="6866252">func</span>&nbsp;<span class="ident" id="6866257">TestUnsupportedValues</span><span class="op" id="6866278">(</span><span class="ident" id="6866279">t</span>&nbsp;<span class="op" id="6866281">*</span><span class="ident" id="6866282"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6866289">.</span><span class="ident" id="6866290"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6866291">)</span>&nbsp;<span class="op" id="6866293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866296">for</span>&nbsp;<span class="ident" id="6866300">_</span><span class="op" id="6866301">,</span>&nbsp;<span class="ident" id="6866303">v</span>&nbsp;<span class="op" id="6866305">:=</span>&nbsp;<span class="keyword" id="6866308">range</span>&nbsp;<span class="ident" id="6866314"><a href="/gostd/encoding/json/encode_test.go.html#6866172">unsupportedValues</a></span>&nbsp;<span class="op" id="6866332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866336">if</span>&nbsp;<span class="ident" id="6866339">_</span><span class="op" id="6866340">,</span>&nbsp;<span class="ident" id="6866342">err</span>&nbsp;<span class="op" id="6866346">:=</span>&nbsp;<span class="ident" id="6866349"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6866356">(</span><span class="ident" id="6866357"><a href="/gostd/encoding/json/encode_test.go.html#6866303">v</a></span><span class="op" id="6866358">)</span><span class="op" id="6866359">;</span>&nbsp;<span class="ident" id="6866361"><a href="/gostd/encoding/json/encode_test.go.html#6866342">err</a></span>&nbsp;<span class="op" id="6866365">!=</span>&nbsp;<span class="builtintype" id="6866368">nil</span>&nbsp;<span class="op" id="6866372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866377">if</span>&nbsp;<span class="ident" id="6866380">_</span><span class="op" id="6866381">,</span>&nbsp;<span class="ident" id="6866383">ok</span>&nbsp;<span class="op" id="6866386">:=</span>&nbsp;<span class="ident" id="6866389"><a href="/gostd/encoding/json/encode_test.go.html#6866342">err</a></span><span class="op" id="6866392">.</span><span class="op" id="6866393">(</span><span class="op" id="6866394">*</span><span class="ident" id="6866395"><a href="/gostd/encoding/json/encode.go.html#3997049">UnsupportedValueError</a></span><span class="op" id="6866416">)</span><span class="op" id="6866417">;</span>&nbsp;<span class="op" id="6866419">!</span><span class="ident" id="6866420"><a href="/gostd/encoding/json/encode_test.go.html#6866383">ok</a></span>&nbsp;<span class="op" id="6866423">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866429"><a href="/gostd/encoding/json/encode_test.go.html#6866279">t</a></span><span class="op" id="6866430">.</span><span class="ident" id="6866431"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6866437">(</span><span class="string" id="6866438">&#34;for&nbsp;%v,&nbsp;got&nbsp;%T&nbsp;want&nbsp;UnsupportedValueError&#34;</span><span class="op" id="6866481">,</span>&nbsp;<span class="ident" id="6866483"><a href="/gostd/encoding/json/encode_test.go.html#6866303">v</a></span><span class="op" id="6866484">,</span>&nbsp;<span class="ident" id="6866486"><a href="/gostd/encoding/json/encode_test.go.html#6866342">err</a></span><span class="op" id="6866489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866498">}</span>&nbsp;<span class="keyword" id="6866500">else</span>&nbsp;<span class="op" id="6866505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6866510"><a href="/gostd/encoding/json/encode_test.go.html#6866279">t</a></span><span class="op" id="6866511">.</span><span class="ident" id="6866512"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6866518">(</span><span class="string" id="6866519">&#34;for&nbsp;%v,&nbsp;expected&nbsp;error&#34;</span><span class="op" id="6866543">,</span>&nbsp;<span class="ident" id="6866545"><a href="/gostd/encoding/json/encode_test.go.html#6866303">v</a></span><span class="op" id="6866546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866550">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866553">}</span><br>
<span class="lineno"></span><span class="op" id="6866555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6866558">//&nbsp;Ref&nbsp;has&nbsp;Marshaler&nbsp;and&nbsp;Unmarshaler&nbsp;methods&nbsp;with&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="6866626">type</span>&nbsp;<span class="ident" id="6866631">Ref</span>&nbsp;<span class="builtintype" id="6866635">int</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="6866640">func</span>&nbsp;<span class="op" id="6866645">(</span><span class="op" id="6866646">*</span><span class="ident" id="6866647"><a href="/gostd/encoding/json/encode_test.go.html#6866631">Ref</a></span><span class="op" id="6866650">)</span>&nbsp;<span class="ident" id="6866652">MarshalJSON</span><span class="op" id="6866663">(</span><span class="op" id="6866664">)</span>&nbsp;<span class="op" id="6866666">(</span><span class="op" id="6866667">[</span><span class="op" id="6866668">]</span><span class="builtintype" id="6866669">byte</span><span class="op" id="6866673">,</span>&nbsp;<span class="builtintype" id="6866675">error</span><span class="op" id="6866680">)</span>&nbsp;<span class="op" id="6866682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866685">return</span>&nbsp;<span class="op" id="6866692">[</span><span class="op" id="6866693">]</span><span class="builtintype" id="6866694">byte</span><span class="op" id="6866698">(</span><span class="string" id="6866699">`&#34;ref&#34;`</span><span class="op" id="6866706">)</span><span class="op" id="6866707">,</span>&nbsp;<span class="builtintype" id="6866709">nil</span><br>
<span class="lineno"></span><span class="op" id="6866713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6866716">func</span>&nbsp;<span class="op" id="6866721">(</span><span class="ident" id="6866722">r</span>&nbsp;<span class="op" id="6866724">*</span><span class="ident" id="6866725"><a href="/gostd/encoding/json/encode_test.go.html#6866631">Ref</a></span><span class="op" id="6866728">)</span>&nbsp;<span class="ident" id="6866730">UnmarshalJSON</span><span class="op" id="6866743">(</span><span class="op" id="6866744">[</span><span class="op" id="6866745">]</span><span class="builtintype" id="6866746">byte</span><span class="op" id="6866750">)</span>&nbsp;<span class="builtintype" id="6866752">error</span>&nbsp;<span class="op" id="6866758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6866761">*</span><span class="ident" id="6866762"><a href="/gostd/encoding/json/encode_test.go.html#6866722">r</a></span>&nbsp;<span class="op" id="6866764">=</span>&nbsp;<span class="num" id="6866766">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866770">return</span>&nbsp;<span class="builtintype" id="6866777">nil</span><br>
<span class="lineno"></span><span class="op" id="6866781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6866784">//&nbsp;Val&nbsp;has&nbsp;Marshaler&nbsp;methods&nbsp;with&nbsp;value&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="6866834">type</span>&nbsp;<span class="ident" id="6866839">Val</span>&nbsp;<span class="builtintype" id="6866843">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6866848">func</span>&nbsp;<span class="op" id="6866853">(</span><span class="ident" id="6866854"><a href="/gostd/encoding/json/encode_test.go.html#6866839">Val</a></span><span class="op" id="6866857">)</span>&nbsp;<span class="ident" id="6866859">MarshalJSON</span><span class="op" id="6866870">(</span><span class="op" id="6866871">)</span>&nbsp;<span class="op" id="6866873">(</span><span class="op" id="6866874">[</span><span class="op" id="6866875">]</span><span class="builtintype" id="6866876">byte</span><span class="op" id="6866880">,</span>&nbsp;<span class="builtintype" id="6866882">error</span><span class="op" id="6866887">)</span>&nbsp;<span class="op" id="6866889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6866892">return</span>&nbsp;<span class="op" id="6866899">[</span><span class="op" id="6866900">]</span><span class="builtintype" id="6866901">byte</span><span class="op" id="6866905">(</span><span class="string" id="6866906">`&#34;val&#34;`</span><span class="op" id="6866913">)</span><span class="op" id="6866914">,</span>&nbsp;<span class="builtintype" id="6866916">nil</span><br>
<span class="lineno">165</span><span class="op" id="6866920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6866923">//&nbsp;RefText&nbsp;has&nbsp;Marshaler&nbsp;and&nbsp;Unmarshaler&nbsp;methods&nbsp;with&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="6866995">type</span>&nbsp;<span class="ident" id="6867000">RefText</span>&nbsp;<span class="builtintype" id="6867008">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="6867013">func</span>&nbsp;<span class="op" id="6867018">(</span><span class="op" id="6867019">*</span><span class="ident" id="6867020"><a href="/gostd/encoding/json/encode_test.go.html#6867000">RefText</a></span><span class="op" id="6867027">)</span>&nbsp;<span class="ident" id="6867029">MarshalText</span><span class="op" id="6867040">(</span><span class="op" id="6867041">)</span>&nbsp;<span class="op" id="6867043">(</span><span class="op" id="6867044">[</span><span class="op" id="6867045">]</span><span class="builtintype" id="6867046">byte</span><span class="op" id="6867050">,</span>&nbsp;<span class="builtintype" id="6867052">error</span><span class="op" id="6867057">)</span>&nbsp;<span class="op" id="6867059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867062">return</span>&nbsp;<span class="op" id="6867069">[</span><span class="op" id="6867070">]</span><span class="builtintype" id="6867071">byte</span><span class="op" id="6867075">(</span><span class="string" id="6867076">`&#34;ref&#34;`</span><span class="op" id="6867083">)</span><span class="op" id="6867084">,</span>&nbsp;<span class="builtintype" id="6867086">nil</span><br>
<span class="lineno"></span><span class="op" id="6867090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6867093">func</span>&nbsp;<span class="op" id="6867098">(</span><span class="ident" id="6867099">r</span>&nbsp;<span class="op" id="6867101">*</span><span class="ident" id="6867102"><a href="/gostd/encoding/json/encode_test.go.html#6867000">RefText</a></span><span class="op" id="6867109">)</span>&nbsp;<span class="ident" id="6867111">UnmarshalText</span><span class="op" id="6867124">(</span><span class="op" id="6867125">[</span><span class="op" id="6867126">]</span><span class="builtintype" id="6867127">byte</span><span class="op" id="6867131">)</span>&nbsp;<span class="builtintype" id="6867133">error</span>&nbsp;<span class="op" id="6867139">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6867142">*</span><span class="ident" id="6867143"><a href="/gostd/encoding/json/encode_test.go.html#6867099">r</a></span>&nbsp;<span class="op" id="6867145">=</span>&nbsp;<span class="num" id="6867147">13</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867151">return</span>&nbsp;<span class="builtintype" id="6867158">nil</span><br>
<span class="lineno"></span><span class="op" id="6867162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6867165">//&nbsp;ValText&nbsp;has&nbsp;Marshaler&nbsp;methods&nbsp;with&nbsp;value&nbsp;receiver.</span><br>
<span class="lineno">180</span><span class="keyword" id="6867219">type</span>&nbsp;<span class="ident" id="6867224">ValText</span>&nbsp;<span class="builtintype" id="6867232">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6867237">func</span>&nbsp;<span class="op" id="6867242">(</span><span class="ident" id="6867243"><a href="/gostd/encoding/json/encode_test.go.html#6867224">ValText</a></span><span class="op" id="6867250">)</span>&nbsp;<span class="ident" id="6867252">MarshalText</span><span class="op" id="6867263">(</span><span class="op" id="6867264">)</span>&nbsp;<span class="op" id="6867266">(</span><span class="op" id="6867267">[</span><span class="op" id="6867268">]</span><span class="builtintype" id="6867269">byte</span><span class="op" id="6867273">,</span>&nbsp;<span class="builtintype" id="6867275">error</span><span class="op" id="6867280">)</span>&nbsp;<span class="op" id="6867282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867285">return</span>&nbsp;<span class="op" id="6867292">[</span><span class="op" id="6867293">]</span><span class="builtintype" id="6867294">byte</span><span class="op" id="6867298">(</span><span class="string" id="6867299">`&#34;val&#34;`</span><span class="op" id="6867306">)</span><span class="op" id="6867307">,</span>&nbsp;<span class="builtintype" id="6867309">nil</span><br>
<span class="lineno"></span><span class="op" id="6867313">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="6867316">func</span>&nbsp;<span class="ident" id="6867321">TestRefValMarshal</span><span class="op" id="6867338">(</span><span class="ident" id="6867339">t</span>&nbsp;<span class="op" id="6867341">*</span><span class="ident" id="6867342"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6867349">.</span><span class="ident" id="6867350"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6867351">)</span>&nbsp;<span class="op" id="6867353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867356">var</span>&nbsp;<span class="ident" id="6867360">s</span>&nbsp;<span class="op" id="6867362">=</span>&nbsp;<span class="keyword" id="6867364">struct</span>&nbsp;<span class="op" id="6867371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867375">R0</span>&nbsp;<span class="ident" id="6867378"><a href="/gostd/encoding/json/encode_test.go.html#6866631">Ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867384">R1</span>&nbsp;<span class="op" id="6867387">*</span><span class="ident" id="6867388"><a href="/gostd/encoding/json/encode_test.go.html#6866631">Ref</a></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867394">R2</span>&nbsp;<span class="ident" id="6867397"><a href="/gostd/encoding/json/encode_test.go.html#6867000">RefText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867407">R3</span>&nbsp;<span class="op" id="6867410">*</span><span class="ident" id="6867411"><a href="/gostd/encoding/json/encode_test.go.html#6867000">RefText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867421">V0</span>&nbsp;<span class="ident" id="6867424"><a href="/gostd/encoding/json/encode_test.go.html#6866839">Val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867430">V1</span>&nbsp;<span class="op" id="6867433">*</span><span class="ident" id="6867434"><a href="/gostd/encoding/json/encode_test.go.html#6866839">Val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867440">V2</span>&nbsp;<span class="ident" id="6867443"><a href="/gostd/encoding/json/encode_test.go.html#6867224">ValText</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867453">V3</span>&nbsp;<span class="op" id="6867456">*</span><span class="ident" id="6867457"><a href="/gostd/encoding/json/encode_test.go.html#6867224">ValText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6867466">}</span><span class="op" id="6867467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867471"><a href="/gostd/encoding/json/encode_test.go.html#6867375">R0</a></span><span class="op" id="6867473">:</span>&nbsp;<span class="num" id="6867475">12</span><span class="op" id="6867477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867481"><a href="/gostd/encoding/json/encode_test.go.html#6867384">R1</a></span><span class="op" id="6867483">:</span>&nbsp;<span class="builtinfunc" id="6867485">new</span><span class="op" id="6867488">(</span><span class="ident" id="6867489"><a href="/gostd/encoding/json/encode_test.go.html#6866631">Ref</a></span><span class="op" id="6867492">)</span><span class="op" id="6867493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867497"><a href="/gostd/encoding/json/encode_test.go.html#6867394">R2</a></span><span class="op" id="6867499">:</span>&nbsp;<span class="num" id="6867501">14</span><span class="op" id="6867503">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867507"><a href="/gostd/encoding/json/encode_test.go.html#6867407">R3</a></span><span class="op" id="6867509">:</span>&nbsp;<span class="builtinfunc" id="6867511">new</span><span class="op" id="6867514">(</span><span class="ident" id="6867515"><a href="/gostd/encoding/json/encode_test.go.html#6867000">RefText</a></span><span class="op" id="6867522">)</span><span class="op" id="6867523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867527"><a href="/gostd/encoding/json/encode_test.go.html#6867421">V0</a></span><span class="op" id="6867529">:</span>&nbsp;<span class="num" id="6867531">13</span><span class="op" id="6867533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867537"><a href="/gostd/encoding/json/encode_test.go.html#6867430">V1</a></span><span class="op" id="6867539">:</span>&nbsp;<span class="builtinfunc" id="6867541">new</span><span class="op" id="6867544">(</span><span class="ident" id="6867545"><a href="/gostd/encoding/json/encode_test.go.html#6866839">Val</a></span><span class="op" id="6867548">)</span><span class="op" id="6867549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867553"><a href="/gostd/encoding/json/encode_test.go.html#6867440">V2</a></span><span class="op" id="6867555">:</span>&nbsp;<span class="num" id="6867557">15</span><span class="op" id="6867559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867563"><a href="/gostd/encoding/json/encode_test.go.html#6867453">V3</a></span><span class="op" id="6867565">:</span>&nbsp;<span class="builtinfunc" id="6867567">new</span><span class="op" id="6867570">(</span><span class="ident" id="6867571"><a href="/gostd/encoding/json/encode_test.go.html#6867224">ValText</a></span><span class="op" id="6867578">)</span><span class="op" id="6867579">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6867582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867585">const</span>&nbsp;<span class="ident" id="6867591">want</span>&nbsp;<span class="op" id="6867596">=</span>&nbsp;<span class="string" id="6867598">`{&#34;R0&#34;:&#34;ref&#34;,&#34;R1&#34;:&#34;ref&#34;,&#34;R2&#34;:&#34;\&#34;ref\&#34;&#34;,&#34;R3&#34;:&#34;\&#34;ref\&#34;&#34;,&#34;V0&#34;:&#34;val&#34;,&#34;V1&#34;:&#34;val&#34;,&#34;V2&#34;:&#34;\&#34;val\&#34;&#34;,&#34;V3&#34;:&#34;\&#34;val\&#34;&#34;}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867707">b</span><span class="op" id="6867708">,</span>&nbsp;<span class="ident" id="6867710">err</span>&nbsp;<span class="op" id="6867714">:=</span>&nbsp;<span class="ident" id="6867717"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6867724">(</span><span class="op" id="6867725">&amp;</span><span class="ident" id="6867726"><a href="/gostd/encoding/json/encode_test.go.html#6867360">s</a></span><span class="op" id="6867727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867730">if</span>&nbsp;<span class="ident" id="6867733"><a href="/gostd/encoding/json/encode_test.go.html#6867710">err</a></span>&nbsp;<span class="op" id="6867737">!=</span>&nbsp;<span class="builtintype" id="6867740">nil</span>&nbsp;<span class="op" id="6867744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867748"><a href="/gostd/encoding/json/encode_test.go.html#6867339">t</a></span><span class="op" id="6867749">.</span><span class="ident" id="6867750"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6867756">(</span><span class="string" id="6867757">&#34;Marshal:&nbsp;%v&#34;</span><span class="op" id="6867770">,</span>&nbsp;<span class="ident" id="6867772"><a href="/gostd/encoding/json/encode_test.go.html#6867710">err</a></span><span class="op" id="6867775">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6867778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867781">if</span>&nbsp;<span class="ident" id="6867784">got</span>&nbsp;<span class="op" id="6867788">:=</span>&nbsp;<span class="builtintype" id="6867791">string</span><span class="op" id="6867797">(</span><span class="ident" id="6867798"><a href="/gostd/encoding/json/encode_test.go.html#6867707">b</a></span><span class="op" id="6867799">)</span><span class="op" id="6867800">;</span>&nbsp;<span class="ident" id="6867802"><a href="/gostd/encoding/json/encode_test.go.html#6867784">got</a></span>&nbsp;<span class="op" id="6867806">!=</span>&nbsp;<span class="ident" id="6867809"><a href="/gostd/encoding/json/encode_test.go.html#6867591">want</a></span>&nbsp;<span class="op" id="6867814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6867818"><a href="/gostd/encoding/json/encode_test.go.html#6867339">t</a></span><span class="op" id="6867819">.</span><span class="ident" id="6867820"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6867826">(</span><span class="string" id="6867827">&#34;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6867844">,</span>&nbsp;<span class="ident" id="6867846"><a href="/gostd/encoding/json/encode_test.go.html#6867784">got</a></span><span class="op" id="6867849">,</span>&nbsp;<span class="ident" id="6867851"><a href="/gostd/encoding/json/encode_test.go.html#6867591">want</a></span><span class="op" id="6867855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6867858">}</span><br>
<span class="lineno"></span><span class="op" id="6867860">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="comment" id="6867863">//&nbsp;C&nbsp;implements&nbsp;Marshaler&nbsp;and&nbsp;returns&nbsp;unescaped&nbsp;JSON.</span><br>
<span class="lineno"></span><span class="keyword" id="6867917">type</span>&nbsp;<span class="ident" id="6867922">C</span>&nbsp;<span class="builtintype" id="6867924">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6867929">func</span>&nbsp;<span class="op" id="6867934">(</span><span class="ident" id="6867935"><a href="/gostd/encoding/json/encode_test.go.html#6867922">C</a></span><span class="op" id="6867936">)</span>&nbsp;<span class="ident" id="6867938">MarshalJSON</span><span class="op" id="6867949">(</span><span class="op" id="6867950">)</span>&nbsp;<span class="op" id="6867952">(</span><span class="op" id="6867953">[</span><span class="op" id="6867954">]</span><span class="builtintype" id="6867955">byte</span><span class="op" id="6867959">,</span>&nbsp;<span class="builtintype" id="6867961">error</span><span class="op" id="6867966">)</span>&nbsp;<span class="op" id="6867968">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6867971">return</span>&nbsp;<span class="op" id="6867978">[</span><span class="op" id="6867979">]</span><span class="builtintype" id="6867980">byte</span><span class="op" id="6867984">(</span><span class="string" id="6867985">`&#34;&lt;&amp;&gt;&#34;`</span><span class="op" id="6867992">)</span><span class="op" id="6867993">,</span>&nbsp;<span class="builtintype" id="6867995">nil</span><br>
<span class="lineno"></span><span class="op" id="6867999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6868002">//&nbsp;CText&nbsp;implements&nbsp;Marshaler&nbsp;and&nbsp;returns&nbsp;unescaped&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="6868060">type</span>&nbsp;<span class="ident" id="6868065">CText</span>&nbsp;<span class="builtintype" id="6868071">int</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="keyword" id="6868076">func</span>&nbsp;<span class="op" id="6868081">(</span><span class="ident" id="6868082"><a href="/gostd/encoding/json/encode_test.go.html#6868065">CText</a></span><span class="op" id="6868087">)</span>&nbsp;<span class="ident" id="6868089">MarshalText</span><span class="op" id="6868100">(</span><span class="op" id="6868101">)</span>&nbsp;<span class="op" id="6868103">(</span><span class="op" id="6868104">[</span><span class="op" id="6868105">]</span><span class="builtintype" id="6868106">byte</span><span class="op" id="6868110">,</span>&nbsp;<span class="builtintype" id="6868112">error</span><span class="op" id="6868117">)</span>&nbsp;<span class="op" id="6868119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868122">return</span>&nbsp;<span class="op" id="6868129">[</span><span class="op" id="6868130">]</span><span class="builtintype" id="6868131">byte</span><span class="op" id="6868135">(</span><span class="string" id="6868136">`&#34;&lt;&amp;&gt;&#34;`</span><span class="op" id="6868143">)</span><span class="op" id="6868144">,</span>&nbsp;<span class="builtintype" id="6868146">nil</span><br>
<span class="lineno"></span><span class="op" id="6868150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="6868153">func</span>&nbsp;<span class="ident" id="6868158">TestMarshalerEscaping</span><span class="op" id="6868179">(</span><span class="ident" id="6868180">t</span>&nbsp;<span class="op" id="6868182">*</span><span class="ident" id="6868183"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6868190">.</span><span class="ident" id="6868191"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6868192">)</span>&nbsp;<span class="op" id="6868194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868197">var</span>&nbsp;<span class="ident" id="6868201">c</span>&nbsp;<span class="ident" id="6868203"><a href="/gostd/encoding/json/encode_test.go.html#6867922">C</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868206">want</span>&nbsp;<span class="op" id="6868211">:=</span>&nbsp;<span class="string" id="6868214">`&#34;\u003c\u0026\u003e&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868238">b</span><span class="op" id="6868239">,</span>&nbsp;<span class="ident" id="6868241">err</span>&nbsp;<span class="op" id="6868245">:=</span>&nbsp;<span class="ident" id="6868248"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6868255">(</span><span class="ident" id="6868256"><a href="/gostd/encoding/json/encode_test.go.html#6868201">c</a></span><span class="op" id="6868257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868260">if</span>&nbsp;<span class="ident" id="6868263"><a href="/gostd/encoding/json/encode_test.go.html#6868241">err</a></span>&nbsp;<span class="op" id="6868267">!=</span>&nbsp;<span class="builtintype" id="6868270">nil</span>&nbsp;<span class="op" id="6868274">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868278"><a href="/gostd/encoding/json/encode_test.go.html#6868180">t</a></span><span class="op" id="6868279">.</span><span class="ident" id="6868280"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6868286">(</span><span class="string" id="6868287">&#34;Marshal(c):&nbsp;%v&#34;</span><span class="op" id="6868303">,</span>&nbsp;<span class="ident" id="6868305"><a href="/gostd/encoding/json/encode_test.go.html#6868241">err</a></span><span class="op" id="6868308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868314">if</span>&nbsp;<span class="ident" id="6868317">got</span>&nbsp;<span class="op" id="6868321">:=</span>&nbsp;<span class="builtintype" id="6868324">string</span><span class="op" id="6868330">(</span><span class="ident" id="6868331"><a href="/gostd/encoding/json/encode_test.go.html#6868238">b</a></span><span class="op" id="6868332">)</span><span class="op" id="6868333">;</span>&nbsp;<span class="ident" id="6868335"><a href="/gostd/encoding/json/encode_test.go.html#6868317">got</a></span>&nbsp;<span class="op" id="6868339">!=</span>&nbsp;<span class="ident" id="6868342"><a href="/gostd/encoding/json/encode_test.go.html#6868206">want</a></span>&nbsp;<span class="op" id="6868347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868351"><a href="/gostd/encoding/json/encode_test.go.html#6868180">t</a></span><span class="op" id="6868352">.</span><span class="ident" id="6868353"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6868359">(</span><span class="string" id="6868360">&#34;Marshal(c)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6868388">,</span>&nbsp;<span class="ident" id="6868390"><a href="/gostd/encoding/json/encode_test.go.html#6868317">got</a></span><span class="op" id="6868393">,</span>&nbsp;<span class="ident" id="6868395"><a href="/gostd/encoding/json/encode_test.go.html#6868206">want</a></span><span class="op" id="6868399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868402">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868406">var</span>&nbsp;<span class="ident" id="6868410">ct</span>&nbsp;<span class="ident" id="6868413"><a href="/gostd/encoding/json/encode_test.go.html#6868065">CText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868420"><a href="/gostd/encoding/json/encode_test.go.html#6868206">want</a></span>&nbsp;<span class="op" id="6868425">=</span>&nbsp;<span class="string" id="6868427">`&#34;\&#34;\u003c\u0026\u003e\&#34;&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868455"><a href="/gostd/encoding/json/encode_test.go.html#6868238">b</a></span><span class="op" id="6868456">,</span>&nbsp;<span class="ident" id="6868458"><a href="/gostd/encoding/json/encode_test.go.html#6868241">err</a></span>&nbsp;<span class="op" id="6868462">=</span>&nbsp;<span class="ident" id="6868464"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6868471">(</span><span class="ident" id="6868472"><a href="/gostd/encoding/json/encode_test.go.html#6868410">ct</a></span><span class="op" id="6868474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868477">if</span>&nbsp;<span class="ident" id="6868480"><a href="/gostd/encoding/json/encode_test.go.html#6868241">err</a></span>&nbsp;<span class="op" id="6868484">!=</span>&nbsp;<span class="builtintype" id="6868487">nil</span>&nbsp;<span class="op" id="6868491">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868495"><a href="/gostd/encoding/json/encode_test.go.html#6868180">t</a></span><span class="op" id="6868496">.</span><span class="ident" id="6868497"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6868503">(</span><span class="string" id="6868504">&#34;Marshal(ct):&nbsp;%v&#34;</span><span class="op" id="6868521">,</span>&nbsp;<span class="ident" id="6868523"><a href="/gostd/encoding/json/encode_test.go.html#6868241">err</a></span><span class="op" id="6868526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868532">if</span>&nbsp;<span class="ident" id="6868535">got</span>&nbsp;<span class="op" id="6868539">:=</span>&nbsp;<span class="builtintype" id="6868542">string</span><span class="op" id="6868548">(</span><span class="ident" id="6868549"><a href="/gostd/encoding/json/encode_test.go.html#6868238">b</a></span><span class="op" id="6868550">)</span><span class="op" id="6868551">;</span>&nbsp;<span class="ident" id="6868553"><a href="/gostd/encoding/json/encode_test.go.html#6868535">got</a></span>&nbsp;<span class="op" id="6868557">!=</span>&nbsp;<span class="ident" id="6868560"><a href="/gostd/encoding/json/encode_test.go.html#6868206">want</a></span>&nbsp;<span class="op" id="6868565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868569"><a href="/gostd/encoding/json/encode_test.go.html#6868180">t</a></span><span class="op" id="6868570">.</span><span class="ident" id="6868571"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6868577">(</span><span class="string" id="6868578">&#34;Marshal(ct)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6868607">,</span>&nbsp;<span class="ident" id="6868609"><a href="/gostd/encoding/json/encode_test.go.html#6868535">got</a></span><span class="op" id="6868612">,</span>&nbsp;<span class="ident" id="6868614"><a href="/gostd/encoding/json/encode_test.go.html#6868206">want</a></span><span class="op" id="6868618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868621">}</span><br>
<span class="lineno">250</span><span class="op" id="6868623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868626">type</span>&nbsp;<span class="ident" id="6868631">IntType</span>&nbsp;<span class="builtintype" id="6868639">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868644">type</span>&nbsp;<span class="ident" id="6868649">MyStruct</span>&nbsp;<span class="keyword" id="6868658">struct</span>&nbsp;<span class="op" id="6868665">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868668"><a href="/gostd/encoding/json/encode_test.go.html#6868631">IntType</a></span><br>
<span class="lineno"></span><span class="op" id="6868676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868679">func</span>&nbsp;<span class="ident" id="6868684">TestAnonymousNonstruct</span><span class="op" id="6868706">(</span><span class="ident" id="6868707">t</span>&nbsp;<span class="op" id="6868709">*</span><span class="ident" id="6868710"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6868717">.</span><span class="ident" id="6868718"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6868719">)</span>&nbsp;<span class="op" id="6868721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868724">var</span>&nbsp;<span class="ident" id="6868728">i</span>&nbsp;<span class="ident" id="6868730"><a href="/gostd/encoding/json/encode_test.go.html#6868631">IntType</a></span>&nbsp;<span class="op" id="6868738">=</span>&nbsp;<span class="num" id="6868740">11</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868744">a</span>&nbsp;<span class="op" id="6868746">:=</span>&nbsp;<span class="ident" id="6868749"><a href="/gostd/encoding/json/encode_test.go.html#6868649">MyStruct</a></span><span class="op" id="6868757">{</span><span class="ident" id="6868758"><a href="/gostd/encoding/json/encode_test.go.html#6868728">i</a></span><span class="op" id="6868759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868762">const</span>&nbsp;<span class="ident" id="6868768">want</span>&nbsp;<span class="op" id="6868773">=</span>&nbsp;<span class="string" id="6868775">`{&#34;IntType&#34;:11}`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868794">b</span><span class="op" id="6868795">,</span>&nbsp;<span class="ident" id="6868797">err</span>&nbsp;<span class="op" id="6868801">:=</span>&nbsp;<span class="ident" id="6868804"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6868811">(</span><span class="ident" id="6868812"><a href="/gostd/encoding/json/encode_test.go.html#6868744">a</a></span><span class="op" id="6868813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868816">if</span>&nbsp;<span class="ident" id="6868819"><a href="/gostd/encoding/json/encode_test.go.html#6868797">err</a></span>&nbsp;<span class="op" id="6868823">!=</span>&nbsp;<span class="builtintype" id="6868826">nil</span>&nbsp;<span class="op" id="6868830">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868834"><a href="/gostd/encoding/json/encode_test.go.html#6868707">t</a></span><span class="op" id="6868835">.</span><span class="ident" id="6868836"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6868842">(</span><span class="string" id="6868843">&#34;Marshal:&nbsp;%v&#34;</span><span class="op" id="6868856">,</span>&nbsp;<span class="ident" id="6868858"><a href="/gostd/encoding/json/encode_test.go.html#6868797">err</a></span><span class="op" id="6868861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868867">if</span>&nbsp;<span class="ident" id="6868870">got</span>&nbsp;<span class="op" id="6868874">:=</span>&nbsp;<span class="builtintype" id="6868877">string</span><span class="op" id="6868883">(</span><span class="ident" id="6868884"><a href="/gostd/encoding/json/encode_test.go.html#6868794">b</a></span><span class="op" id="6868885">)</span><span class="op" id="6868886">;</span>&nbsp;<span class="ident" id="6868888"><a href="/gostd/encoding/json/encode_test.go.html#6868870">got</a></span>&nbsp;<span class="op" id="6868892">!=</span>&nbsp;<span class="ident" id="6868895"><a href="/gostd/encoding/json/encode_test.go.html#6868768">want</a></span>&nbsp;<span class="op" id="6868900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868904"><a href="/gostd/encoding/json/encode_test.go.html#6868707">t</a></span><span class="op" id="6868905">.</span><span class="ident" id="6868906"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6868912">(</span><span class="string" id="6868913">&#34;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6868930">,</span>&nbsp;<span class="ident" id="6868932"><a href="/gostd/encoding/json/encode_test.go.html#6868870">got</a></span><span class="op" id="6868935">,</span>&nbsp;<span class="ident" id="6868937"><a href="/gostd/encoding/json/encode_test.go.html#6868768">want</a></span><span class="op" id="6868941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868944">}</span><br>
<span class="lineno">270</span><span class="op" id="6868946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868949">type</span>&nbsp;<span class="ident" id="6868954">BugA</span>&nbsp;<span class="keyword" id="6868959">struct</span>&nbsp;<span class="op" id="6868966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868969">S</span>&nbsp;<span class="builtintype" id="6868971">string</span><br>
<span class="lineno"></span><span class="op" id="6868978">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="6868981">type</span>&nbsp;<span class="ident" id="6868986">BugB</span>&nbsp;<span class="keyword" id="6868991">struct</span>&nbsp;<span class="op" id="6868998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869001"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869007">S</span>&nbsp;<span class="builtintype" id="6869009">string</span><br>
<span class="lineno"></span><span class="op" id="6869016">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="6869019">type</span>&nbsp;<span class="ident" id="6869024">BugC</span>&nbsp;<span class="keyword" id="6869029">struct</span>&nbsp;<span class="op" id="6869036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869039">S</span>&nbsp;<span class="builtintype" id="6869041">string</span><br>
<span class="lineno"></span><span class="op" id="6869048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="6869051">//&nbsp;Legal&nbsp;Go:&nbsp;We&nbsp;never&nbsp;use&nbsp;the&nbsp;repeated&nbsp;embedded&nbsp;field&nbsp;(S).</span><br>
<span class="lineno"></span><span class="keyword" id="6869110">type</span>&nbsp;<span class="ident" id="6869115">BugX</span>&nbsp;<span class="keyword" id="6869120">struct</span>&nbsp;<span class="op" id="6869127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869130">A</span>&nbsp;<span class="builtintype" id="6869132">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869137"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869143"><a href="/gostd/encoding/json/encode_test.go.html#6868986">BugB</a></span><br>
<span class="lineno">290</span><span class="op" id="6869148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6869151">//&nbsp;Issue&nbsp;5245.</span><br>
<span class="lineno"></span><span class="keyword" id="6869166">func</span>&nbsp;<span class="ident" id="6869171">TestEmbeddedBug</span><span class="op" id="6869186">(</span><span class="ident" id="6869187">t</span>&nbsp;<span class="op" id="6869189">*</span><span class="ident" id="6869190"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6869197">.</span><span class="ident" id="6869198"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6869199">)</span>&nbsp;<span class="op" id="6869201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869204">v</span>&nbsp;<span class="op" id="6869206">:=</span>&nbsp;<span class="ident" id="6869209"><a href="/gostd/encoding/json/encode_test.go.html#6868986">BugB</a></span><span class="op" id="6869213">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869217"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><span class="op" id="6869221">{</span><span class="string" id="6869222">&#34;A&#34;</span><span class="op" id="6869225">}</span><span class="op" id="6869226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6869230">&#34;B&#34;</span><span class="op" id="6869233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869239">b</span><span class="op" id="6869240">,</span>&nbsp;<span class="ident" id="6869242">err</span>&nbsp;<span class="op" id="6869246">:=</span>&nbsp;<span class="ident" id="6869249"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6869256">(</span><span class="ident" id="6869257"><a href="/gostd/encoding/json/encode_test.go.html#6869204">v</a></span><span class="op" id="6869258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869261">if</span>&nbsp;<span class="ident" id="6869264"><a href="/gostd/encoding/json/encode_test.go.html#6869242">err</a></span>&nbsp;<span class="op" id="6869268">!=</span>&nbsp;<span class="builtintype" id="6869271">nil</span>&nbsp;<span class="op" id="6869275">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869279"><a href="/gostd/encoding/json/encode_test.go.html#6869187">t</a></span><span class="op" id="6869280">.</span><span class="ident" id="6869281"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6869286">(</span><span class="string" id="6869287">&#34;Marshal:&#34;</span><span class="op" id="6869297">,</span>&nbsp;<span class="ident" id="6869299"><a href="/gostd/encoding/json/encode_test.go.html#6869242">err</a></span><span class="op" id="6869302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869308">want</span>&nbsp;<span class="op" id="6869313">:=</span>&nbsp;<span class="string" id="6869316">`{&#34;S&#34;:&#34;B&#34;}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869329">got</span>&nbsp;<span class="op" id="6869333">:=</span>&nbsp;<span class="builtintype" id="6869336">string</span><span class="op" id="6869342">(</span><span class="ident" id="6869343"><a href="/gostd/encoding/json/encode_test.go.html#6869239">b</a></span><span class="op" id="6869344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869347">if</span>&nbsp;<span class="ident" id="6869350"><a href="/gostd/encoding/json/encode_test.go.html#6869329">got</a></span>&nbsp;<span class="op" id="6869354">!=</span>&nbsp;<span class="ident" id="6869357"><a href="/gostd/encoding/json/encode_test.go.html#6869308">want</a></span>&nbsp;<span class="op" id="6869362">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869366"><a href="/gostd/encoding/json/encode_test.go.html#6869187">t</a></span><span class="op" id="6869367">.</span><span class="ident" id="6869368"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6869374">(</span><span class="string" id="6869375">&#34;Marshal:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6869400">,</span>&nbsp;<span class="ident" id="6869402"><a href="/gostd/encoding/json/encode_test.go.html#6869329">got</a></span><span class="op" id="6869405">,</span>&nbsp;<span class="ident" id="6869407"><a href="/gostd/encoding/json/encode_test.go.html#6869308">want</a></span><span class="op" id="6869411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869417">//&nbsp;Now&nbsp;check&nbsp;that&nbsp;the&nbsp;duplicate&nbsp;field,&nbsp;S,&nbsp;does&nbsp;not&nbsp;appear.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869477">x</span>&nbsp;<span class="op" id="6869479">:=</span>&nbsp;<span class="ident" id="6869482"><a href="/gostd/encoding/json/encode_test.go.html#6869115">BugX</a></span><span class="op" id="6869486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869490"><a href="/gostd/encoding/json/encode_test.go.html#6869130">A</a></span><span class="op" id="6869491">:</span>&nbsp;<span class="num" id="6869493">23</span><span class="op" id="6869495">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869501"><a href="/gostd/encoding/json/encode_test.go.html#6869239">b</a></span><span class="op" id="6869502">,</span>&nbsp;<span class="ident" id="6869504"><a href="/gostd/encoding/json/encode_test.go.html#6869242">err</a></span>&nbsp;<span class="op" id="6869508">=</span>&nbsp;<span class="ident" id="6869510"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6869517">(</span><span class="ident" id="6869518"><a href="/gostd/encoding/json/encode_test.go.html#6869477">x</a></span><span class="op" id="6869519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869522">if</span>&nbsp;<span class="ident" id="6869525"><a href="/gostd/encoding/json/encode_test.go.html#6869242">err</a></span>&nbsp;<span class="op" id="6869529">!=</span>&nbsp;<span class="builtintype" id="6869532">nil</span>&nbsp;<span class="op" id="6869536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869540"><a href="/gostd/encoding/json/encode_test.go.html#6869187">t</a></span><span class="op" id="6869541">.</span><span class="ident" id="6869542"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6869547">(</span><span class="string" id="6869548">&#34;Marshal:&#34;</span><span class="op" id="6869558">,</span>&nbsp;<span class="ident" id="6869560"><a href="/gostd/encoding/json/encode_test.go.html#6869242">err</a></span><span class="op" id="6869563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869566">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869569"><a href="/gostd/encoding/json/encode_test.go.html#6869308">want</a></span>&nbsp;<span class="op" id="6869574">=</span>&nbsp;<span class="string" id="6869576">`{&#34;A&#34;:23}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869588"><a href="/gostd/encoding/json/encode_test.go.html#6869329">got</a></span>&nbsp;<span class="op" id="6869592">=</span>&nbsp;<span class="builtintype" id="6869594">string</span><span class="op" id="6869600">(</span><span class="ident" id="6869601"><a href="/gostd/encoding/json/encode_test.go.html#6869239">b</a></span><span class="op" id="6869602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869605">if</span>&nbsp;<span class="ident" id="6869608"><a href="/gostd/encoding/json/encode_test.go.html#6869329">got</a></span>&nbsp;<span class="op" id="6869612">!=</span>&nbsp;<span class="ident" id="6869615"><a href="/gostd/encoding/json/encode_test.go.html#6869308">want</a></span>&nbsp;<span class="op" id="6869620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869624"><a href="/gostd/encoding/json/encode_test.go.html#6869187">t</a></span><span class="op" id="6869625">.</span><span class="ident" id="6869626"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6869632">(</span><span class="string" id="6869633">&#34;Marshal:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6869658">,</span>&nbsp;<span class="ident" id="6869660"><a href="/gostd/encoding/json/encode_test.go.html#6869329">got</a></span><span class="op" id="6869663">,</span>&nbsp;<span class="ident" id="6869665"><a href="/gostd/encoding/json/encode_test.go.html#6869308">want</a></span><span class="op" id="6869669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869672">}</span><br>
<span class="lineno">320</span><span class="op" id="6869674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6869677">type</span>&nbsp;<span class="ident" id="6869682">BugD</span>&nbsp;<span class="keyword" id="6869687">struct</span>&nbsp;<span class="op" id="6869694">{</span>&nbsp;<span class="comment" id="6869696">//&nbsp;Same&nbsp;as&nbsp;BugA&nbsp;after&nbsp;tagging.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869728">XXX</span>&nbsp;<span class="builtintype" id="6869732">string</span>&nbsp;<span class="string" id="6869739">`json:&#34;S&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6869750">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="6869753">//&nbsp;BugD&#39;s&nbsp;tagged&nbsp;S&nbsp;field&nbsp;should&nbsp;dominate&nbsp;BugA&#39;s.</span><br>
<span class="lineno"></span><span class="keyword" id="6869802">type</span>&nbsp;<span class="ident" id="6869807">BugY</span>&nbsp;<span class="keyword" id="6869812">struct</span>&nbsp;<span class="op" id="6869819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869822"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869828"><a href="/gostd/encoding/json/encode_test.go.html#6869682">BugD</a></span><br>
<span class="lineno">330</span><span class="op" id="6869833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6869836">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;field&nbsp;with&nbsp;a&nbsp;tag&nbsp;dominates&nbsp;untagged&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6869895">func</span>&nbsp;<span class="ident" id="6869900">TestTaggedFieldDominates</span><span class="op" id="6869924">(</span><span class="ident" id="6869925">t</span>&nbsp;<span class="op" id="6869927">*</span><span class="ident" id="6869928"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6869935">.</span><span class="ident" id="6869936"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6869937">)</span>&nbsp;<span class="op" id="6869939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869942">v</span>&nbsp;<span class="op" id="6869944">:=</span>&nbsp;<span class="ident" id="6869947"><a href="/gostd/encoding/json/encode_test.go.html#6869807">BugY</a></span><span class="op" id="6869951">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869955"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><span class="op" id="6869959">{</span><span class="string" id="6869960">&#34;BugA&#34;</span><span class="op" id="6869966">}</span><span class="op" id="6869967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869971"><a href="/gostd/encoding/json/encode_test.go.html#6869682">BugD</a></span><span class="op" id="6869975">{</span><span class="string" id="6869976">&#34;BugD&#34;</span><span class="op" id="6869982">}</span><span class="op" id="6869983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869989">b</span><span class="op" id="6869990">,</span>&nbsp;<span class="ident" id="6869992">err</span>&nbsp;<span class="op" id="6869996">:=</span>&nbsp;<span class="ident" id="6869999"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6870006">(</span><span class="ident" id="6870007"><a href="/gostd/encoding/json/encode_test.go.html#6869942">v</a></span><span class="op" id="6870008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870011">if</span>&nbsp;<span class="ident" id="6870014"><a href="/gostd/encoding/json/encode_test.go.html#6869992">err</a></span>&nbsp;<span class="op" id="6870018">!=</span>&nbsp;<span class="builtintype" id="6870021">nil</span>&nbsp;<span class="op" id="6870025">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870029"><a href="/gostd/encoding/json/encode_test.go.html#6869925">t</a></span><span class="op" id="6870030">.</span><span class="ident" id="6870031"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6870036">(</span><span class="string" id="6870037">&#34;Marshal:&#34;</span><span class="op" id="6870047">,</span>&nbsp;<span class="ident" id="6870049"><a href="/gostd/encoding/json/encode_test.go.html#6869992">err</a></span><span class="op" id="6870052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870058">want</span>&nbsp;<span class="op" id="6870063">:=</span>&nbsp;<span class="string" id="6870066">`{&#34;S&#34;:&#34;BugD&#34;}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870082">got</span>&nbsp;<span class="op" id="6870086">:=</span>&nbsp;<span class="builtintype" id="6870089">string</span><span class="op" id="6870095">(</span><span class="ident" id="6870096"><a href="/gostd/encoding/json/encode_test.go.html#6869989">b</a></span><span class="op" id="6870097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870100">if</span>&nbsp;<span class="ident" id="6870103"><a href="/gostd/encoding/json/encode_test.go.html#6870082">got</a></span>&nbsp;<span class="op" id="6870107">!=</span>&nbsp;<span class="ident" id="6870110"><a href="/gostd/encoding/json/encode_test.go.html#6870058">want</a></span>&nbsp;<span class="op" id="6870115">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870119"><a href="/gostd/encoding/json/encode_test.go.html#6869925">t</a></span><span class="op" id="6870120">.</span><span class="ident" id="6870121"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6870127">(</span><span class="string" id="6870128">&#34;Marshal:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6870153">,</span>&nbsp;<span class="ident" id="6870155"><a href="/gostd/encoding/json/encode_test.go.html#6870082">got</a></span><span class="op" id="6870158">,</span>&nbsp;<span class="ident" id="6870160"><a href="/gostd/encoding/json/encode_test.go.html#6870058">want</a></span><span class="op" id="6870164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870167">}</span><br>
<span class="lineno"></span><span class="op" id="6870169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6870172">//&nbsp;There&nbsp;are&nbsp;no&nbsp;tags&nbsp;here,&nbsp;so&nbsp;S&nbsp;should&nbsp;not&nbsp;appear.</span><br>
<span class="lineno">350</span><span class="keyword" id="6870223">type</span>&nbsp;<span class="ident" id="6870228">BugZ</span>&nbsp;<span class="keyword" id="6870233">struct</span>&nbsp;<span class="op" id="6870240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870243"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870249"><a href="/gostd/encoding/json/encode_test.go.html#6869024">BugC</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870255"><a href="/gostd/encoding/json/encode_test.go.html#6869807">BugY</a></span>&nbsp;<span class="comment" id="6870260">//&nbsp;Contains&nbsp;a&nbsp;tagged&nbsp;S&nbsp;field&nbsp;through&nbsp;BugD;&nbsp;should&nbsp;not&nbsp;dominate.</span><br>
<span class="lineno"></span><span class="op" id="6870324">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="keyword" id="6870327">func</span>&nbsp;<span class="ident" id="6870332">TestDuplicatedFieldDisappears</span><span class="op" id="6870361">(</span><span class="ident" id="6870362">t</span>&nbsp;<span class="op" id="6870364">*</span><span class="ident" id="6870365"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6870372">.</span><span class="ident" id="6870373"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6870374">)</span>&nbsp;<span class="op" id="6870376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870379">v</span>&nbsp;<span class="op" id="6870381">:=</span>&nbsp;<span class="ident" id="6870384"><a href="/gostd/encoding/json/encode_test.go.html#6870228">BugZ</a></span><span class="op" id="6870388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870392"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><span class="op" id="6870396">{</span><span class="string" id="6870397">&#34;BugA&#34;</span><span class="op" id="6870403">}</span><span class="op" id="6870404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870408"><a href="/gostd/encoding/json/encode_test.go.html#6869024">BugC</a></span><span class="op" id="6870412">{</span><span class="string" id="6870413">&#34;BugC&#34;</span><span class="op" id="6870419">}</span><span class="op" id="6870420">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870424"><a href="/gostd/encoding/json/encode_test.go.html#6869807">BugY</a></span><span class="op" id="6870428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870433"><a href="/gostd/encoding/json/encode_test.go.html#6868954">BugA</a></span><span class="op" id="6870437">{</span><span class="string" id="6870438">&#34;nested&nbsp;BugA&#34;</span><span class="op" id="6870451">}</span><span class="op" id="6870452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870457"><a href="/gostd/encoding/json/encode_test.go.html#6869682">BugD</a></span><span class="op" id="6870461">{</span><span class="string" id="6870462">&#34;nested&nbsp;BugD&#34;</span><span class="op" id="6870475">}</span><span class="op" id="6870476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870480">}</span><span class="op" id="6870481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870484">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870487">b</span><span class="op" id="6870488">,</span>&nbsp;<span class="ident" id="6870490">err</span>&nbsp;<span class="op" id="6870494">:=</span>&nbsp;<span class="ident" id="6870497"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6870504">(</span><span class="ident" id="6870505"><a href="/gostd/encoding/json/encode_test.go.html#6870379">v</a></span><span class="op" id="6870506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870509">if</span>&nbsp;<span class="ident" id="6870512"><a href="/gostd/encoding/json/encode_test.go.html#6870490">err</a></span>&nbsp;<span class="op" id="6870516">!=</span>&nbsp;<span class="builtintype" id="6870519">nil</span>&nbsp;<span class="op" id="6870523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870527"><a href="/gostd/encoding/json/encode_test.go.html#6870362">t</a></span><span class="op" id="6870528">.</span><span class="ident" id="6870529"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6870534">(</span><span class="string" id="6870535">&#34;Marshal:&#34;</span><span class="op" id="6870545">,</span>&nbsp;<span class="ident" id="6870547"><a href="/gostd/encoding/json/encode_test.go.html#6870490">err</a></span><span class="op" id="6870550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870556">want</span>&nbsp;<span class="op" id="6870561">:=</span>&nbsp;<span class="string" id="6870564">`{}`</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870570">got</span>&nbsp;<span class="op" id="6870574">:=</span>&nbsp;<span class="builtintype" id="6870577">string</span><span class="op" id="6870583">(</span><span class="ident" id="6870584"><a href="/gostd/encoding/json/encode_test.go.html#6870487">b</a></span><span class="op" id="6870585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870588">if</span>&nbsp;<span class="ident" id="6870591"><a href="/gostd/encoding/json/encode_test.go.html#6870570">got</a></span>&nbsp;<span class="op" id="6870595">!=</span>&nbsp;<span class="ident" id="6870598"><a href="/gostd/encoding/json/encode_test.go.html#6870556">want</a></span>&nbsp;<span class="op" id="6870603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870607"><a href="/gostd/encoding/json/encode_test.go.html#6870362">t</a></span><span class="op" id="6870608">.</span><span class="ident" id="6870609"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6870615">(</span><span class="string" id="6870616">&#34;Marshal:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6870641">,</span>&nbsp;<span class="ident" id="6870643"><a href="/gostd/encoding/json/encode_test.go.html#6870570">got</a></span><span class="op" id="6870646">,</span>&nbsp;<span class="ident" id="6870648"><a href="/gostd/encoding/json/encode_test.go.html#6870556">want</a></span><span class="op" id="6870652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870655">}</span><br>
<span class="lineno"></span><span class="op" id="6870657">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="6870660">func</span>&nbsp;<span class="ident" id="6870665">TestStringBytes</span><span class="op" id="6870680">(</span><span class="ident" id="6870681">t</span>&nbsp;<span class="op" id="6870683">*</span><span class="ident" id="6870684"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6870691">.</span><span class="ident" id="6870692"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6870693">)</span>&nbsp;<span class="op" id="6870695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6870698">//&nbsp;Test&nbsp;that&nbsp;encodeState.stringBytes&nbsp;and&nbsp;encodeState.string&nbsp;use&nbsp;the&nbsp;same&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870782">es</span>&nbsp;<span class="op" id="6870785">:=</span>&nbsp;<span class="op" id="6870788">&amp;</span><span class="ident" id="6870789"><a href="/gostd/encoding/json/encode.go.html#3998096">encodeState</a></span><span class="op" id="6870800">{</span><span class="op" id="6870801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870804">var</span>&nbsp;<span class="ident" id="6870808">r</span>&nbsp;<span class="op" id="6870810">[</span><span class="op" id="6870811">]</span><span class="builtintype" id="6870812">rune</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870818">for</span>&nbsp;<span class="ident" id="6870822">i</span>&nbsp;<span class="op" id="6870824">:=</span>&nbsp;<span class="string" id="6870827">&#39;\u0000&#39;</span><span class="op" id="6870835">;</span>&nbsp;<span class="ident" id="6870837"><a href="/gostd/encoding/json/encode_test.go.html#6870822">i</a></span>&nbsp;<span class="op" id="6870839">&lt;=</span>&nbsp;<span class="ident" id="6870842"><a href="/gostd/encoding/json/encode_test.go.html#6863716">unicode</a></span><span class="op" id="6870849">.</span><span class="ident" id="6870850"><a href="/gostd/unicode/letter.go.html#1821536">MaxRune</a></span><span class="op" id="6870857">;</span>&nbsp;<span class="ident" id="6870859"><a href="/gostd/encoding/json/encode_test.go.html#6870822">i</a></span><span class="op" id="6870860">++</span>&nbsp;<span class="op" id="6870863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870867"><a href="/gostd/encoding/json/encode_test.go.html#6870808">r</a></span>&nbsp;<span class="op" id="6870869">=</span>&nbsp;<span class="builtinfunc" id="6870871">append</span><span class="op" id="6870877">(</span><span class="ident" id="6870878"><a href="/gostd/encoding/json/encode_test.go.html#6870808">r</a></span><span class="op" id="6870879">,</span>&nbsp;<span class="ident" id="6870881"><a href="/gostd/encoding/json/encode_test.go.html#6870822">i</a></span><span class="op" id="6870882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870888">s</span>&nbsp;<span class="op" id="6870890">:=</span>&nbsp;<span class="builtintype" id="6870893">string</span><span class="op" id="6870899">(</span><span class="ident" id="6870900"><a href="/gostd/encoding/json/encode_test.go.html#6870808">r</a></span><span class="op" id="6870901">)</span>&nbsp;<span class="op" id="6870903">+</span>&nbsp;<span class="string" id="6870905">&#34;\xff\xff\xffhello&#34;</span>&nbsp;<span class="comment" id="6870925">//&nbsp;some&nbsp;invalid&nbsp;UTF-8&nbsp;too</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870952">_</span><span class="op" id="6870953">,</span>&nbsp;<span class="ident" id="6870955">err</span>&nbsp;<span class="op" id="6870959">:=</span>&nbsp;<span class="ident" id="6870962"><a href="/gostd/encoding/json/encode_test.go.html#6870782">es</a></span><span class="op" id="6870964">.</span><span class="builtintype" id="6870965"><a href="/gostd/encoding/json/encode.go.html#4010394">string</a></span><span class="op" id="6870971">(</span><span class="ident" id="6870972"><a href="/gostd/encoding/json/encode_test.go.html#6870888">s</a></span><span class="op" id="6870973">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870976">if</span>&nbsp;<span class="ident" id="6870979"><a href="/gostd/encoding/json/encode_test.go.html#6870955">err</a></span>&nbsp;<span class="op" id="6870983">!=</span>&nbsp;<span class="builtintype" id="6870986">nil</span>&nbsp;<span class="op" id="6870990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870994"><a href="/gostd/encoding/json/encode_test.go.html#6870681">t</a></span><span class="op" id="6870995">.</span><span class="ident" id="6870996"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6871001">(</span><span class="ident" id="6871002"><a href="/gostd/encoding/json/encode_test.go.html#6870955">err</a></span><span class="op" id="6871005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871012">esBytes</span>&nbsp;<span class="op" id="6871020">:=</span>&nbsp;<span class="op" id="6871023">&amp;</span><span class="ident" id="6871024"><a href="/gostd/encoding/json/encode.go.html#3998096">encodeState</a></span><span class="op" id="6871035">{</span><span class="op" id="6871036">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871039">_</span><span class="op" id="6871040">,</span>&nbsp;<span class="ident" id="6871042"><a href="/gostd/encoding/json/encode_test.go.html#6870955">err</a></span>&nbsp;<span class="op" id="6871046">=</span>&nbsp;<span class="ident" id="6871048"><a href="/gostd/encoding/json/encode_test.go.html#6871012">esBytes</a></span><span class="op" id="6871055">.</span><span class="ident" id="6871056"><a href="/gostd/encoding/json/encode.go.html#4012278">stringBytes</a></span><span class="op" id="6871067">(</span><span class="op" id="6871068">[</span><span class="op" id="6871069">]</span><span class="builtintype" id="6871070">byte</span><span class="op" id="6871074">(</span><span class="ident" id="6871075"><a href="/gostd/encoding/json/encode_test.go.html#6870888">s</a></span><span class="op" id="6871076">)</span><span class="op" id="6871077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871080">if</span>&nbsp;<span class="ident" id="6871083"><a href="/gostd/encoding/json/encode_test.go.html#6870955">err</a></span>&nbsp;<span class="op" id="6871087">!=</span>&nbsp;<span class="builtintype" id="6871090">nil</span>&nbsp;<span class="op" id="6871094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871098"><a href="/gostd/encoding/json/encode_test.go.html#6870681">t</a></span><span class="op" id="6871099">.</span><span class="ident" id="6871100"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6871105">(</span><span class="ident" id="6871106"><a href="/gostd/encoding/json/encode_test.go.html#6870955">err</a></span><span class="op" id="6871109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871116">enc</span>&nbsp;<span class="op" id="6871120">:=</span>&nbsp;<span class="ident" id="6871123"><a href="/gostd/encoding/json/encode_test.go.html#6870782">es</a></span><span class="op" id="6871125">.</span><span class="ident" id="6871126"><a href="/gostd/encoding/json/encode.go.html#3998118">Buffer</a></span><span class="op" id="6871132">.</span><span class="ident" id="6871133"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="6871139">(</span><span class="op" id="6871140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871143">encBytes</span>&nbsp;<span class="op" id="6871152">:=</span>&nbsp;<span class="ident" id="6871155"><a href="/gostd/encoding/json/encode_test.go.html#6871012">esBytes</a></span><span class="op" id="6871162">.</span><span class="ident" id="6871163"><a href="/gostd/encoding/json/encode.go.html#3998118">Buffer</a></span><span class="op" id="6871169">.</span><span class="ident" id="6871170"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="6871176">(</span><span class="op" id="6871177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871180">if</span>&nbsp;<span class="ident" id="6871183"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span>&nbsp;<span class="op" id="6871187">!=</span>&nbsp;<span class="ident" id="6871190"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span>&nbsp;<span class="op" id="6871199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871203">i</span>&nbsp;<span class="op" id="6871205">:=</span>&nbsp;<span class="num" id="6871208">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871212">for</span>&nbsp;<span class="ident" id="6871216"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span>&nbsp;<span class="op" id="6871218">&lt;</span>&nbsp;<span class="builtinfunc" id="6871220">len</span><span class="op" id="6871223">(</span><span class="ident" id="6871224"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871227">)</span>&nbsp;<span class="op" id="6871229">&amp;&amp;</span>&nbsp;<span class="ident" id="6871232"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span>&nbsp;<span class="op" id="6871234">&lt;</span>&nbsp;<span class="builtinfunc" id="6871236">len</span><span class="op" id="6871239">(</span><span class="ident" id="6871240"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871248">)</span>&nbsp;<span class="op" id="6871250">&amp;&amp;</span>&nbsp;<span class="ident" id="6871253"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871256">[</span><span class="ident" id="6871257"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871258">]</span>&nbsp;<span class="op" id="6871260">==</span>&nbsp;<span class="ident" id="6871263"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871271">[</span><span class="ident" id="6871272"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871273">]</span>&nbsp;<span class="op" id="6871275">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871280"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871281">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871290"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span>&nbsp;<span class="op" id="6871294">=</span>&nbsp;<span class="ident" id="6871296"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871299">[</span><span class="ident" id="6871300"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871301">:</span><span class="op" id="6871302">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871306"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span>&nbsp;<span class="op" id="6871315">=</span>&nbsp;<span class="ident" id="6871317"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871325">[</span><span class="ident" id="6871326"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871327">:</span><span class="op" id="6871328">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871332"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span>&nbsp;<span class="op" id="6871334">=</span>&nbsp;<span class="num" id="6871336">0</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871340">for</span>&nbsp;<span class="ident" id="6871344"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span>&nbsp;<span class="op" id="6871346">&lt;</span>&nbsp;<span class="builtinfunc" id="6871348">len</span><span class="op" id="6871351">(</span><span class="ident" id="6871352"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871355">)</span>&nbsp;<span class="op" id="6871357">&amp;&amp;</span>&nbsp;<span class="ident" id="6871360"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span>&nbsp;<span class="op" id="6871362">&lt;</span>&nbsp;<span class="builtinfunc" id="6871364">len</span><span class="op" id="6871367">(</span><span class="ident" id="6871368"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871376">)</span>&nbsp;<span class="op" id="6871378">&amp;&amp;</span>&nbsp;<span class="ident" id="6871381"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871384">[</span><span class="builtinfunc" id="6871385">len</span><span class="op" id="6871388">(</span><span class="ident" id="6871389"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871392">)</span><span class="op" id="6871393">-</span><span class="ident" id="6871394"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871395">-</span><span class="num" id="6871396">1</span><span class="op" id="6871397">]</span>&nbsp;<span class="op" id="6871399">==</span>&nbsp;<span class="ident" id="6871402"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871410">[</span><span class="builtinfunc" id="6871411">len</span><span class="op" id="6871414">(</span><span class="ident" id="6871415"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871423">)</span><span class="op" id="6871424">-</span><span class="ident" id="6871425"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871426">-</span><span class="num" id="6871427">1</span><span class="op" id="6871428">]</span>&nbsp;<span class="op" id="6871430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871435"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871436">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871445"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span>&nbsp;<span class="op" id="6871449">=</span>&nbsp;<span class="ident" id="6871451"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871454">[</span><span class="op" id="6871455">:</span><span class="builtinfunc" id="6871456">len</span><span class="op" id="6871459">(</span><span class="ident" id="6871460"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871463">)</span><span class="op" id="6871464">-</span><span class="ident" id="6871465"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871466">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871470"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span>&nbsp;<span class="op" id="6871479">=</span>&nbsp;<span class="ident" id="6871481"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871489">[</span><span class="op" id="6871490">:</span><span class="builtinfunc" id="6871491">len</span><span class="op" id="6871494">(</span><span class="ident" id="6871495"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871503">)</span><span class="op" id="6871504">-</span><span class="ident" id="6871505"><a href="/gostd/encoding/json/encode_test.go.html#6871203">i</a></span><span class="op" id="6871506">]</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871511">if</span>&nbsp;<span class="builtinfunc" id="6871514">len</span><span class="op" id="6871517">(</span><span class="ident" id="6871518"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871521">)</span>&nbsp;<span class="op" id="6871523">&gt;</span>&nbsp;<span class="num" id="6871525">20</span>&nbsp;<span class="op" id="6871528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871533"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span>&nbsp;<span class="op" id="6871537">=</span>&nbsp;<span class="ident" id="6871539"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871542">[</span><span class="op" id="6871543">:</span><span class="num" id="6871544">20</span><span class="op" id="6871546">]</span>&nbsp;<span class="op" id="6871548">+</span>&nbsp;<span class="string" id="6871550">&#34;...&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871562">if</span>&nbsp;<span class="builtinfunc" id="6871565">len</span><span class="op" id="6871568">(</span><span class="ident" id="6871569"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871577">)</span>&nbsp;<span class="op" id="6871579">&gt;</span>&nbsp;<span class="num" id="6871581">20</span>&nbsp;<span class="op" id="6871584">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871589"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span>&nbsp;<span class="op" id="6871598">=</span>&nbsp;<span class="ident" id="6871600"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871608">[</span><span class="op" id="6871609">:</span><span class="num" id="6871610">20</span><span class="op" id="6871612">]</span>&nbsp;<span class="op" id="6871614">+</span>&nbsp;<span class="string" id="6871616">&#34;...&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871629"><a href="/gostd/encoding/json/encode_test.go.html#6870681">t</a></span><span class="op" id="6871630">.</span><span class="ident" id="6871631"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6871637">(</span><span class="string" id="6871638">&#34;encodings&nbsp;differ&nbsp;at&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="6871670">,</span>&nbsp;<span class="ident" id="6871672"><a href="/gostd/encoding/json/encode_test.go.html#6871116">enc</a></span><span class="op" id="6871675">,</span>&nbsp;<span class="ident" id="6871677"><a href="/gostd/encoding/json/encode_test.go.html#6871143">encBytes</a></span><span class="op" id="6871685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871688">}</span><br>
<span class="lineno">420</span><span class="op" id="6871690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6871693">func</span>&nbsp;<span class="ident" id="6871698">TestIssue6458</span><span class="op" id="6871711">(</span><span class="ident" id="6871712">t</span>&nbsp;<span class="op" id="6871714">*</span><span class="ident" id="6871715"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6871722">.</span><span class="ident" id="6871723"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6871724">)</span>&nbsp;<span class="op" id="6871726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871729">type</span>&nbsp;<span class="ident" id="6871734">Foo</span>&nbsp;<span class="keyword" id="6871738">struct</span>&nbsp;<span class="op" id="6871745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871749">M</span>&nbsp;<span class="ident" id="6871751"><a href="/gostd/encoding/json/stream.go.html#4048300">RawMessage</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871766">x</span>&nbsp;<span class="op" id="6871768">:=</span>&nbsp;<span class="ident" id="6871771"><a href="/gostd/encoding/json/encode_test.go.html#6871734">Foo</a></span><span class="op" id="6871774">{</span><span class="ident" id="6871775"><a href="/gostd/encoding/json/stream.go.html#4048300">RawMessage</a></span><span class="op" id="6871785">(</span><span class="string" id="6871786">`&#34;foo&#34;`</span><span class="op" id="6871793">)</span><span class="op" id="6871794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871798">b</span><span class="op" id="6871799">,</span>&nbsp;<span class="ident" id="6871801">err</span>&nbsp;<span class="op" id="6871805">:=</span>&nbsp;<span class="ident" id="6871808"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6871815">(</span><span class="op" id="6871816">&amp;</span><span class="ident" id="6871817"><a href="/gostd/encoding/json/encode_test.go.html#6871766">x</a></span><span class="op" id="6871818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871821">if</span>&nbsp;<span class="ident" id="6871824"><a href="/gostd/encoding/json/encode_test.go.html#6871801">err</a></span>&nbsp;<span class="op" id="6871828">!=</span>&nbsp;<span class="builtintype" id="6871831">nil</span>&nbsp;<span class="op" id="6871835">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871839"><a href="/gostd/encoding/json/encode_test.go.html#6871712">t</a></span><span class="op" id="6871840">.</span><span class="ident" id="6871841"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6871846">(</span><span class="ident" id="6871847"><a href="/gostd/encoding/json/encode_test.go.html#6871801">err</a></span><span class="op" id="6871850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871856">if</span>&nbsp;<span class="ident" id="6871859">want</span>&nbsp;<span class="op" id="6871864">:=</span>&nbsp;<span class="string" id="6871867">`{&#34;M&#34;:&#34;foo&#34;}`</span><span class="op" id="6871880">;</span>&nbsp;<span class="builtintype" id="6871882">string</span><span class="op" id="6871888">(</span><span class="ident" id="6871889"><a href="/gostd/encoding/json/encode_test.go.html#6871798">b</a></span><span class="op" id="6871890">)</span>&nbsp;<span class="op" id="6871892">!=</span>&nbsp;<span class="ident" id="6871895"><a href="/gostd/encoding/json/encode_test.go.html#6871859">want</a></span>&nbsp;<span class="op" id="6871900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871904"><a href="/gostd/encoding/json/encode_test.go.html#6871712">t</a></span><span class="op" id="6871905">.</span><span class="ident" id="6871906"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6871912">(</span><span class="string" id="6871913">&#34;Marshal(&amp;x)&nbsp;=&nbsp;%#q;&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6871942">,</span>&nbsp;<span class="ident" id="6871944"><a href="/gostd/encoding/json/encode_test.go.html#6871798">b</a></span><span class="op" id="6871945">,</span>&nbsp;<span class="ident" id="6871947"><a href="/gostd/encoding/json/encode_test.go.html#6871859">want</a></span><span class="op" id="6871951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871954">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871958"><a href="/gostd/encoding/json/encode_test.go.html#6871798">b</a></span><span class="op" id="6871959">,</span>&nbsp;<span class="ident" id="6871961"><a href="/gostd/encoding/json/encode_test.go.html#6871801">err</a></span>&nbsp;<span class="op" id="6871965">=</span>&nbsp;<span class="ident" id="6871967"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6871974">(</span><span class="ident" id="6871975"><a href="/gostd/encoding/json/encode_test.go.html#6871766">x</a></span><span class="op" id="6871976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871979">if</span>&nbsp;<span class="ident" id="6871982"><a href="/gostd/encoding/json/encode_test.go.html#6871801">err</a></span>&nbsp;<span class="op" id="6871986">!=</span>&nbsp;<span class="builtintype" id="6871989">nil</span>&nbsp;<span class="op" id="6871993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871997"><a href="/gostd/encoding/json/encode_test.go.html#6871712">t</a></span><span class="op" id="6871998">.</span><span class="ident" id="6871999"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6872004">(</span><span class="ident" id="6872005"><a href="/gostd/encoding/json/encode_test.go.html#6871801">err</a></span><span class="op" id="6872008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872011">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872015">if</span>&nbsp;<span class="ident" id="6872018">want</span>&nbsp;<span class="op" id="6872023">:=</span>&nbsp;<span class="string" id="6872026">`{&#34;M&#34;:&#34;ImZvbyI=&#34;}`</span><span class="op" id="6872044">;</span>&nbsp;<span class="builtintype" id="6872046">string</span><span class="op" id="6872052">(</span><span class="ident" id="6872053"><a href="/gostd/encoding/json/encode_test.go.html#6871798">b</a></span><span class="op" id="6872054">)</span>&nbsp;<span class="op" id="6872056">!=</span>&nbsp;<span class="ident" id="6872059"><a href="/gostd/encoding/json/encode_test.go.html#6872018">want</a></span>&nbsp;<span class="op" id="6872064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872068"><a href="/gostd/encoding/json/encode_test.go.html#6871712">t</a></span><span class="op" id="6872069">.</span><span class="ident" id="6872070"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6872076">(</span><span class="string" id="6872077">&#34;Marshal(x)&nbsp;=&nbsp;%#q;&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6872105">,</span>&nbsp;<span class="ident" id="6872107"><a href="/gostd/encoding/json/encode_test.go.html#6871798">b</a></span><span class="op" id="6872108">,</span>&nbsp;<span class="ident" id="6872110"><a href="/gostd/encoding/json/encode_test.go.html#6872018">want</a></span><span class="op" id="6872114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872117">}</span><br>
<span class="lineno"></span><span class="op" id="6872119">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span><span class="keyword" id="6872122">func</span>&nbsp;<span class="ident" id="6872127">TestHTMLEscape</span><span class="op" id="6872141">(</span><span class="ident" id="6872142">t</span>&nbsp;<span class="op" id="6872144">*</span><span class="ident" id="6872145"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6872152">.</span><span class="ident" id="6872153"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6872154">)</span>&nbsp;<span class="op" id="6872156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872159">var</span>&nbsp;<span class="ident" id="6872163">b</span><span class="op" id="6872164">,</span>&nbsp;<span class="ident" id="6872166">want</span>&nbsp;<span class="ident" id="6872171"><a href="/gostd/encoding/json/encode_test.go.html#6863677">bytes</a></span><span class="op" id="6872176">.</span><span class="ident" id="6872177"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872185">m</span>&nbsp;<span class="op" id="6872187">:=</span>&nbsp;<span class="string" id="6872190">`{&#34;M&#34;:&#34;&lt;html&gt;foo&nbsp;&amp;`</span>&nbsp;<span class="op" id="6872210">+</span>&nbsp;<span class="string" id="6872212">&#34;\xe2\x80\xa8&nbsp;\xe2\x80\xa9&#34;</span>&nbsp;<span class="op" id="6872240">+</span>&nbsp;<span class="string" id="6872242">`&lt;/html&gt;&#34;}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872255"><a href="/gostd/encoding/json/encode_test.go.html#6872166">want</a></span><span class="op" id="6872259">.</span><span class="ident" id="6872260"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="6872265">(</span><span class="op" id="6872266">[</span><span class="op" id="6872267">]</span><span class="builtintype" id="6872268">byte</span><span class="op" id="6872272">(</span><span class="string" id="6872273">`{&#34;M&#34;:&#34;\u003chtml\u003efoo&nbsp;\u0026\u2028&nbsp;\u2029\u003c/html\u003e&#34;}`</span><span class="op" id="6872339">)</span><span class="op" id="6872340">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872343"><a href="/gostd/encoding/json/encode.go.html#3995908">HTMLEscape</a></span><span class="op" id="6872353">(</span><span class="op" id="6872354">&amp;</span><span class="ident" id="6872355"><a href="/gostd/encoding/json/encode_test.go.html#6872163">b</a></span><span class="op" id="6872356">,</span>&nbsp;<span class="op" id="6872358">[</span><span class="op" id="6872359">]</span><span class="builtintype" id="6872360">byte</span><span class="op" id="6872364">(</span><span class="ident" id="6872365"><a href="/gostd/encoding/json/encode_test.go.html#6872185">m</a></span><span class="op" id="6872366">)</span><span class="op" id="6872367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872370">if</span>&nbsp;<span class="op" id="6872373">!</span><span class="ident" id="6872374"><a href="/gostd/encoding/json/encode_test.go.html#6863677">bytes</a></span><span class="op" id="6872379">.</span><span class="ident" id="6872380"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="6872385">(</span><span class="ident" id="6872386"><a href="/gostd/encoding/json/encode_test.go.html#6872163">b</a></span><span class="op" id="6872387">.</span><span class="ident" id="6872388"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6872393">(</span><span class="op" id="6872394">)</span><span class="op" id="6872395">,</span>&nbsp;<span class="ident" id="6872397"><a href="/gostd/encoding/json/encode_test.go.html#6872166">want</a></span><span class="op" id="6872401">.</span><span class="ident" id="6872402"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6872407">(</span><span class="op" id="6872408">)</span><span class="op" id="6872409">)</span>&nbsp;<span class="op" id="6872411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872415"><a href="/gostd/encoding/json/encode_test.go.html#6872142">t</a></span><span class="op" id="6872416">.</span><span class="ident" id="6872417"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6872423">(</span><span class="string" id="6872424">&#34;HTMLEscape(&amp;b,&nbsp;[]byte(m))&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6872465">,</span>&nbsp;<span class="ident" id="6872467"><a href="/gostd/encoding/json/encode_test.go.html#6872163">b</a></span><span class="op" id="6872468">.</span><span class="ident" id="6872469"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6872474">(</span><span class="op" id="6872475">)</span><span class="op" id="6872476">,</span>&nbsp;<span class="ident" id="6872478"><a href="/gostd/encoding/json/encode_test.go.html#6872166">want</a></span><span class="op" id="6872482">.</span><span class="ident" id="6872483"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6872488">(</span><span class="op" id="6872489">)</span><span class="op" id="6872490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872493">}</span><br>
<span class="lineno"></span><span class="op" id="6872495">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="6872498">//&nbsp;golang.org/issue/8582</span><br>
<span class="lineno"></span><span class="keyword" id="6872523">func</span>&nbsp;<span class="ident" id="6872528">TestEncodePointerString</span><span class="op" id="6872551">(</span><span class="ident" id="6872552">t</span>&nbsp;<span class="op" id="6872554">*</span><span class="ident" id="6872555"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6872562">.</span><span class="ident" id="6872563"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6872564">)</span>&nbsp;<span class="op" id="6872566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872569">type</span>&nbsp;<span class="ident" id="6872574">stringPointer</span>&nbsp;<span class="keyword" id="6872588">struct</span>&nbsp;<span class="op" id="6872595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872599">N</span>&nbsp;<span class="op" id="6872601">*</span><span class="builtintype" id="6872602">int64</span>&nbsp;<span class="string" id="6872608">`json:&#34;n,string&#34;`</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872630">var</span>&nbsp;<span class="ident" id="6872634">n</span>&nbsp;<span class="builtintype" id="6872636">int64</span>&nbsp;<span class="op" id="6872642">=</span>&nbsp;<span class="num" id="6872644">42</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872648">b</span><span class="op" id="6872649">,</span>&nbsp;<span class="ident" id="6872651">err</span>&nbsp;<span class="op" id="6872655">:=</span>&nbsp;<span class="ident" id="6872658"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6872665">(</span><span class="ident" id="6872666"><a href="/gostd/encoding/json/encode_test.go.html#6872574">stringPointer</a></span><span class="op" id="6872679">{</span><span class="ident" id="6872680"><a href="/gostd/encoding/json/encode_test.go.html#6872599">N</a></span><span class="op" id="6872681">:</span>&nbsp;<span class="op" id="6872683">&amp;</span><span class="ident" id="6872684"><a href="/gostd/encoding/json/encode_test.go.html#6872634">n</a></span><span class="op" id="6872685">}</span><span class="op" id="6872686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872689">if</span>&nbsp;<span class="ident" id="6872692"><a href="/gostd/encoding/json/encode_test.go.html#6872651">err</a></span>&nbsp;<span class="op" id="6872696">!=</span>&nbsp;<span class="builtintype" id="6872699">nil</span>&nbsp;<span class="op" id="6872703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872707"><a href="/gostd/encoding/json/encode_test.go.html#6872552">t</a></span><span class="op" id="6872708">.</span><span class="ident" id="6872709"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6872715">(</span><span class="string" id="6872716">&#34;Marshal:&nbsp;%v&#34;</span><span class="op" id="6872729">,</span>&nbsp;<span class="ident" id="6872731"><a href="/gostd/encoding/json/encode_test.go.html#6872651">err</a></span><span class="op" id="6872734">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872740">if</span>&nbsp;<span class="ident" id="6872743">got</span><span class="op" id="6872746">,</span>&nbsp;<span class="ident" id="6872748">want</span>&nbsp;<span class="op" id="6872753">:=</span>&nbsp;<span class="builtintype" id="6872756">string</span><span class="op" id="6872762">(</span><span class="ident" id="6872763"><a href="/gostd/encoding/json/encode_test.go.html#6872648">b</a></span><span class="op" id="6872764">)</span><span class="op" id="6872765">,</span>&nbsp;<span class="string" id="6872767">`{&#34;n&#34;:&#34;42&#34;}`</span><span class="op" id="6872779">;</span>&nbsp;<span class="ident" id="6872781"><a href="/gostd/encoding/json/encode_test.go.html#6872743">got</a></span>&nbsp;<span class="op" id="6872785">!=</span>&nbsp;<span class="ident" id="6872788"><a href="/gostd/encoding/json/encode_test.go.html#6872748">want</a></span>&nbsp;<span class="op" id="6872793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872797"><a href="/gostd/encoding/json/encode_test.go.html#6872552">t</a></span><span class="op" id="6872798">.</span><span class="ident" id="6872799"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6872805">(</span><span class="string" id="6872806">&#34;Marshal&nbsp;=&nbsp;%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6872829">,</span>&nbsp;<span class="ident" id="6872831"><a href="/gostd/encoding/json/encode_test.go.html#6872743">got</a></span><span class="op" id="6872834">,</span>&nbsp;<span class="ident" id="6872836"><a href="/gostd/encoding/json/encode_test.go.html#6872748">want</a></span><span class="op" id="6872840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872846">var</span>&nbsp;<span class="ident" id="6872850">back</span>&nbsp;<span class="ident" id="6872855"><a href="/gostd/encoding/json/encode_test.go.html#6872574">stringPointer</a></span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872870"><a href="/gostd/encoding/json/encode_test.go.html#6872651">err</a></span>&nbsp;<span class="op" id="6872874">=</span>&nbsp;<span class="ident" id="6872876"><a href="/gostd/encoding/json/decode.go.html#3965482">Unmarshal</a></span><span class="op" id="6872885">(</span><span class="ident" id="6872886"><a href="/gostd/encoding/json/encode_test.go.html#6872648">b</a></span><span class="op" id="6872887">,</span>&nbsp;<span class="op" id="6872889">&amp;</span><span class="ident" id="6872890"><a href="/gostd/encoding/json/encode_test.go.html#6872850">back</a></span><span class="op" id="6872894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872897">if</span>&nbsp;<span class="ident" id="6872900"><a href="/gostd/encoding/json/encode_test.go.html#6872651">err</a></span>&nbsp;<span class="op" id="6872904">!=</span>&nbsp;<span class="builtintype" id="6872907">nil</span>&nbsp;<span class="op" id="6872911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872915"><a href="/gostd/encoding/json/encode_test.go.html#6872552">t</a></span><span class="op" id="6872916">.</span><span class="ident" id="6872917"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6872923">(</span><span class="string" id="6872924">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op" id="6872939">,</span>&nbsp;<span class="ident" id="6872941"><a href="/gostd/encoding/json/encode_test.go.html#6872651">err</a></span><span class="op" id="6872944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872950">if</span>&nbsp;<span class="ident" id="6872953"><a href="/gostd/encoding/json/encode_test.go.html#6872850">back</a></span><span class="op" id="6872957">.</span><span class="ident" id="6872958"><a href="/gostd/encoding/json/encode_test.go.html#6872599">N</a></span>&nbsp;<span class="op" id="6872960">==</span>&nbsp;<span class="builtintype" id="6872963">nil</span>&nbsp;<span class="op" id="6872967">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872971"><a href="/gostd/encoding/json/encode_test.go.html#6872552">t</a></span><span class="op" id="6872972">.</span><span class="ident" id="6872973"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6872979">(</span><span class="string" id="6872980">&#34;Unmarshalled&nbsp;nil&nbsp;N&nbsp;field&#34;</span><span class="op" id="6873006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873012">if</span>&nbsp;<span class="op" id="6873015">*</span><span class="ident" id="6873016"><a href="/gostd/encoding/json/encode_test.go.html#6872850">back</a></span><span class="op" id="6873020">.</span><span class="ident" id="6873021"><a href="/gostd/encoding/json/encode_test.go.html#6872599">N</a></span>&nbsp;<span class="op" id="6873023">!=</span>&nbsp;<span class="num" id="6873026">42</span>&nbsp;<span class="op" id="6873029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873033"><a href="/gostd/encoding/json/encode_test.go.html#6872552">t</a></span><span class="op" id="6873034">.</span><span class="ident" id="6873035"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6873041">(</span><span class="string" id="6873042">&#34;*N&nbsp;=&nbsp;%d;&nbsp;want&nbsp;42&#34;</span><span class="op" id="6873060">,</span>&nbsp;<span class="op" id="6873062">*</span><span class="ident" id="6873063"><a href="/gostd/encoding/json/encode_test.go.html#6872850">back</a></span><span class="op" id="6873067">.</span><span class="ident" id="6873068"><a href="/gostd/encoding/json/encode_test.go.html#6872599">N</a></span><span class="op" id="6873069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873072">}</span><br>
<span class="lineno">480</span><span class="op" id="6873074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6873077">var</span>&nbsp;<span class="ident" id="6873081">encodeStringTests</span>&nbsp;<span class="op" id="6873099">=</span>&nbsp;<span class="op" id="6873101">[</span><span class="op" id="6873102">]</span><span class="keyword" id="6873103">struct</span>&nbsp;<span class="op" id="6873110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873113">in</span>&nbsp;&nbsp;<span class="builtintype" id="6873117">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873125">out</span>&nbsp;<span class="builtintype" id="6873129">string</span><br>
<span class="lineno">485</span><span class="op" id="6873136">}</span><span class="op" id="6873137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873140">{</span><span class="string" id="6873141">&#34;\x00&#34;</span><span class="op" id="6873147">,</span>&nbsp;<span class="string" id="6873149">`&#34;\u0000&#34;`</span><span class="op" id="6873159">}</span><span class="op" id="6873160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873163">{</span><span class="string" id="6873164">&#34;\x01&#34;</span><span class="op" id="6873170">,</span>&nbsp;<span class="string" id="6873172">`&#34;\u0001&#34;`</span><span class="op" id="6873182">}</span><span class="op" id="6873183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873186">{</span><span class="string" id="6873187">&#34;\x02&#34;</span><span class="op" id="6873193">,</span>&nbsp;<span class="string" id="6873195">`&#34;\u0002&#34;`</span><span class="op" id="6873205">}</span><span class="op" id="6873206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873209">{</span><span class="string" id="6873210">&#34;\x03&#34;</span><span class="op" id="6873216">,</span>&nbsp;<span class="string" id="6873218">`&#34;\u0003&#34;`</span><span class="op" id="6873228">}</span><span class="op" id="6873229">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873232">{</span><span class="string" id="6873233">&#34;\x04&#34;</span><span class="op" id="6873239">,</span>&nbsp;<span class="string" id="6873241">`&#34;\u0004&#34;`</span><span class="op" id="6873251">}</span><span class="op" id="6873252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873255">{</span><span class="string" id="6873256">&#34;\x05&#34;</span><span class="op" id="6873262">,</span>&nbsp;<span class="string" id="6873264">`&#34;\u0005&#34;`</span><span class="op" id="6873274">}</span><span class="op" id="6873275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873278">{</span><span class="string" id="6873279">&#34;\x06&#34;</span><span class="op" id="6873285">,</span>&nbsp;<span class="string" id="6873287">`&#34;\u0006&#34;`</span><span class="op" id="6873297">}</span><span class="op" id="6873298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873301">{</span><span class="string" id="6873302">&#34;\x07&#34;</span><span class="op" id="6873308">,</span>&nbsp;<span class="string" id="6873310">`&#34;\u0007&#34;`</span><span class="op" id="6873320">}</span><span class="op" id="6873321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873324">{</span><span class="string" id="6873325">&#34;\x08&#34;</span><span class="op" id="6873331">,</span>&nbsp;<span class="string" id="6873333">`&#34;\u0008&#34;`</span><span class="op" id="6873343">}</span><span class="op" id="6873344">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873347">{</span><span class="string" id="6873348">&#34;\x09&#34;</span><span class="op" id="6873354">,</span>&nbsp;<span class="string" id="6873356">`&#34;\t&#34;`</span><span class="op" id="6873362">}</span><span class="op" id="6873363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873366">{</span><span class="string" id="6873367">&#34;\x0a&#34;</span><span class="op" id="6873373">,</span>&nbsp;<span class="string" id="6873375">`&#34;\n&#34;`</span><span class="op" id="6873381">}</span><span class="op" id="6873382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873385">{</span><span class="string" id="6873386">&#34;\x0b&#34;</span><span class="op" id="6873392">,</span>&nbsp;<span class="string" id="6873394">`&#34;\u000b&#34;`</span><span class="op" id="6873404">}</span><span class="op" id="6873405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873408">{</span><span class="string" id="6873409">&#34;\x0c&#34;</span><span class="op" id="6873415">,</span>&nbsp;<span class="string" id="6873417">`&#34;\u000c&#34;`</span><span class="op" id="6873427">}</span><span class="op" id="6873428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873431">{</span><span class="string" id="6873432">&#34;\x0d&#34;</span><span class="op" id="6873438">,</span>&nbsp;<span class="string" id="6873440">`&#34;\r&#34;`</span><span class="op" id="6873446">}</span><span class="op" id="6873447">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873450">{</span><span class="string" id="6873451">&#34;\x0e&#34;</span><span class="op" id="6873457">,</span>&nbsp;<span class="string" id="6873459">`&#34;\u000e&#34;`</span><span class="op" id="6873469">}</span><span class="op" id="6873470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873473">{</span><span class="string" id="6873474">&#34;\x0f&#34;</span><span class="op" id="6873480">,</span>&nbsp;<span class="string" id="6873482">`&#34;\u000f&#34;`</span><span class="op" id="6873492">}</span><span class="op" id="6873493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873496">{</span><span class="string" id="6873497">&#34;\x10&#34;</span><span class="op" id="6873503">,</span>&nbsp;<span class="string" id="6873505">`&#34;\u0010&#34;`</span><span class="op" id="6873515">}</span><span class="op" id="6873516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873519">{</span><span class="string" id="6873520">&#34;\x11&#34;</span><span class="op" id="6873526">,</span>&nbsp;<span class="string" id="6873528">`&#34;\u0011&#34;`</span><span class="op" id="6873538">}</span><span class="op" id="6873539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873542">{</span><span class="string" id="6873543">&#34;\x12&#34;</span><span class="op" id="6873549">,</span>&nbsp;<span class="string" id="6873551">`&#34;\u0012&#34;`</span><span class="op" id="6873561">}</span><span class="op" id="6873562">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873565">{</span><span class="string" id="6873566">&#34;\x13&#34;</span><span class="op" id="6873572">,</span>&nbsp;<span class="string" id="6873574">`&#34;\u0013&#34;`</span><span class="op" id="6873584">}</span><span class="op" id="6873585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873588">{</span><span class="string" id="6873589">&#34;\x14&#34;</span><span class="op" id="6873595">,</span>&nbsp;<span class="string" id="6873597">`&#34;\u0014&#34;`</span><span class="op" id="6873607">}</span><span class="op" id="6873608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873611">{</span><span class="string" id="6873612">&#34;\x15&#34;</span><span class="op" id="6873618">,</span>&nbsp;<span class="string" id="6873620">`&#34;\u0015&#34;`</span><span class="op" id="6873630">}</span><span class="op" id="6873631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873634">{</span><span class="string" id="6873635">&#34;\x16&#34;</span><span class="op" id="6873641">,</span>&nbsp;<span class="string" id="6873643">`&#34;\u0016&#34;`</span><span class="op" id="6873653">}</span><span class="op" id="6873654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873657">{</span><span class="string" id="6873658">&#34;\x17&#34;</span><span class="op" id="6873664">,</span>&nbsp;<span class="string" id="6873666">`&#34;\u0017&#34;`</span><span class="op" id="6873676">}</span><span class="op" id="6873677">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873680">{</span><span class="string" id="6873681">&#34;\x18&#34;</span><span class="op" id="6873687">,</span>&nbsp;<span class="string" id="6873689">`&#34;\u0018&#34;`</span><span class="op" id="6873699">}</span><span class="op" id="6873700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873703">{</span><span class="string" id="6873704">&#34;\x19&#34;</span><span class="op" id="6873710">,</span>&nbsp;<span class="string" id="6873712">`&#34;\u0019&#34;`</span><span class="op" id="6873722">}</span><span class="op" id="6873723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873726">{</span><span class="string" id="6873727">&#34;\x1a&#34;</span><span class="op" id="6873733">,</span>&nbsp;<span class="string" id="6873735">`&#34;\u001a&#34;`</span><span class="op" id="6873745">}</span><span class="op" id="6873746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873749">{</span><span class="string" id="6873750">&#34;\x1b&#34;</span><span class="op" id="6873756">,</span>&nbsp;<span class="string" id="6873758">`&#34;\u001b&#34;`</span><span class="op" id="6873768">}</span><span class="op" id="6873769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873772">{</span><span class="string" id="6873773">&#34;\x1c&#34;</span><span class="op" id="6873779">,</span>&nbsp;<span class="string" id="6873781">`&#34;\u001c&#34;`</span><span class="op" id="6873791">}</span><span class="op" id="6873792">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873795">{</span><span class="string" id="6873796">&#34;\x1d&#34;</span><span class="op" id="6873802">,</span>&nbsp;<span class="string" id="6873804">`&#34;\u001d&#34;`</span><span class="op" id="6873814">}</span><span class="op" id="6873815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873818">{</span><span class="string" id="6873819">&#34;\x1e&#34;</span><span class="op" id="6873825">,</span>&nbsp;<span class="string" id="6873827">`&#34;\u001e&#34;`</span><span class="op" id="6873837">}</span><span class="op" id="6873838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873841">{</span><span class="string" id="6873842">&#34;\x1f&#34;</span><span class="op" id="6873848">,</span>&nbsp;<span class="string" id="6873850">`&#34;\u001f&#34;`</span><span class="op" id="6873860">}</span><span class="op" id="6873861">,</span><br>
<span class="lineno"></span><span class="op" id="6873863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="6873866">func</span>&nbsp;<span class="ident" id="6873871">TestEncodeString</span><span class="op" id="6873887">(</span><span class="ident" id="6873888">t</span>&nbsp;<span class="op" id="6873890">*</span><span class="ident" id="6873891"><a href="/gostd/encoding/json/encode_test.go.html#6863705">testing</a></span><span class="op" id="6873898">.</span><span class="ident" id="6873899"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6873900">)</span>&nbsp;<span class="op" id="6873902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873905">for</span>&nbsp;<span class="ident" id="6873909">_</span><span class="op" id="6873910">,</span>&nbsp;<span class="ident" id="6873912">tt</span>&nbsp;<span class="op" id="6873915">:=</span>&nbsp;<span class="keyword" id="6873918">range</span>&nbsp;<span class="ident" id="6873924"><a href="/gostd/encoding/json/encode_test.go.html#6873081">encodeStringTests</a></span>&nbsp;<span class="op" id="6873942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873946">b</span><span class="op" id="6873947">,</span>&nbsp;<span class="ident" id="6873949">err</span>&nbsp;<span class="op" id="6873953">:=</span>&nbsp;<span class="ident" id="6873956"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="6873963">(</span><span class="ident" id="6873964"><a href="/gostd/encoding/json/encode_test.go.html#6873912">tt</a></span><span class="op" id="6873966">.</span><span class="ident" id="6873967"><a href="/gostd/encoding/json/encode_test.go.html#6873113">in</a></span><span class="op" id="6873969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873973">if</span>&nbsp;<span class="ident" id="6873976"><a href="/gostd/encoding/json/encode_test.go.html#6873949">err</a></span>&nbsp;<span class="op" id="6873980">!=</span>&nbsp;<span class="builtintype" id="6873983">nil</span>&nbsp;<span class="op" id="6873987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873992"><a href="/gostd/encoding/json/encode_test.go.html#6873888">t</a></span><span class="op" id="6873993">.</span><span class="ident" id="6873994"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6874000">(</span><span class="string" id="6874001">&#34;Marshal(%q):&nbsp;%v&#34;</span><span class="op" id="6874018">,</span>&nbsp;<span class="ident" id="6874020"><a href="/gostd/encoding/json/encode_test.go.html#6873912">tt</a></span><span class="op" id="6874022">.</span><span class="ident" id="6874023"><a href="/gostd/encoding/json/encode_test.go.html#6873113">in</a></span><span class="op" id="6874025">,</span>&nbsp;<span class="ident" id="6874027"><a href="/gostd/encoding/json/encode_test.go.html#6873949">err</a></span><span class="op" id="6874030">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6874035">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6874046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6874050">out</span>&nbsp;<span class="op" id="6874054">:=</span>&nbsp;<span class="builtintype" id="6874057">string</span><span class="op" id="6874063">(</span><span class="ident" id="6874064"><a href="/gostd/encoding/json/encode_test.go.html#6873946">b</a></span><span class="op" id="6874065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6874069">if</span>&nbsp;<span class="ident" id="6874072"><a href="/gostd/encoding/json/encode_test.go.html#6874050">out</a></span>&nbsp;<span class="op" id="6874076">!=</span>&nbsp;<span class="ident" id="6874079"><a href="/gostd/encoding/json/encode_test.go.html#6873912">tt</a></span><span class="op" id="6874081">.</span><span class="ident" id="6874082"><a href="/gostd/encoding/json/encode_test.go.html#6873125">out</a></span>&nbsp;<span class="op" id="6874086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6874091"><a href="/gostd/encoding/json/encode_test.go.html#6873888">t</a></span><span class="op" id="6874092">.</span><span class="ident" id="6874093"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6874099">(</span><span class="string" id="6874100">&#34;Marshal(%q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6874129">,</span>&nbsp;<span class="ident" id="6874131"><a href="/gostd/encoding/json/encode_test.go.html#6873912">tt</a></span><span class="op" id="6874133">.</span><span class="ident" id="6874134"><a href="/gostd/encoding/json/encode_test.go.html#6873113">in</a></span><span class="op" id="6874136">,</span>&nbsp;<span class="ident" id="6874138"><a href="/gostd/encoding/json/encode_test.go.html#6874050">out</a></span><span class="op" id="6874141">,</span>&nbsp;<span class="ident" id="6874143"><a href="/gostd/encoding/json/encode_test.go.html#6873912">tt</a></span><span class="op" id="6874145">.</span><span class="ident" id="6874146"><a href="/gostd/encoding/json/encode_test.go.html#6873125">out</a></span><span class="op" id="6874149">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6874153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6874156">}</span><br>
<span class="lineno"></span><span class="op" id="6874158">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
