<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6462278">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6462333">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6462387">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6462438">package</span>&nbsp;<span class="ident" id="6462446">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6462454">import</span>&nbsp;<span class="op" id="6462461">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6462464">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6462473">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6462490">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6462511">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6462522">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6462532">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6462535">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="6462580">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="6462607">func</span>&nbsp;<span class="ident" id="6462612">RemoveAll</span><span class="op" id="6462621">(</span><span class="op" id="6462622">)</span>&nbsp;<span class="op" id="6462624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462627">mutex</span><span class="op" id="6462632">.</span><span class="ident" id="6462633">Lock</span><span class="op" id="6462637">(</span><span class="op" id="6462638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462641">defer</span>&nbsp;<span class="ident" id="6462647">mutex</span><span class="op" id="6462652">.</span><span class="ident" id="6462653">Unlock</span><span class="op" id="6462659">(</span><span class="op" id="6462660">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462663">vars</span>&nbsp;<span class="op" id="6462668">=</span>&nbsp;<span class="builtinfunc" id="6462670">make</span><span class="op" id="6462674">(</span><span class="keyword" id="6462675">map</span><span class="op" id="6462678">[</span><span class="builtintype" id="6462679">string</span><span class="op" id="6462685">]</span><span class="ident" id="6462686">Var</span><span class="op" id="6462689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462692">varKeys</span>&nbsp;<span class="op" id="6462700">=</span>&nbsp;<span class="ident" id="6462702">nil</span><br>
<span class="lineno"></span><span class="op" id="6462706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6462709">func</span>&nbsp;<span class="ident" id="6462714">TestInt</span><span class="op" id="6462721">(</span><span class="ident" id="6462722">t</span>&nbsp;<span class="op" id="6462724">*</span><span class="ident" id="6462725">testing</span><span class="op" id="6462732">.</span><span class="ident" id="6462733">T</span><span class="op" id="6462734">)</span>&nbsp;<span class="op" id="6462736">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462739">RemoveAll</span><span class="op" id="6462748">(</span><span class="op" id="6462749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462752">reqs</span>&nbsp;<span class="op" id="6462757">:=</span>&nbsp;<span class="ident" id="6462760">NewInt</span><span class="op" id="6462766">(</span><span class="string" id="6462767">&#34;requests&#34;</span><span class="op" id="6462777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462780">if</span>&nbsp;<span class="ident" id="6462783">reqs</span><span class="op" id="6462787">.</span><span class="ident" id="6462788">i</span>&nbsp;<span class="op" id="6462790">!=</span>&nbsp;<span class="num" id="6462793">0</span>&nbsp;<span class="op" id="6462795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462799">t</span><span class="op" id="6462800">.</span><span class="ident" id="6462801">Errorf</span><span class="op" id="6462807">(</span><span class="string" id="6462808">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6462829">,</span>&nbsp;<span class="ident" id="6462831">reqs</span><span class="op" id="6462835">.</span><span class="ident" id="6462836">i</span><span class="op" id="6462837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462840">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462843">if</span>&nbsp;<span class="ident" id="6462846">reqs</span>&nbsp;<span class="op" id="6462851">!=</span>&nbsp;<span class="ident" id="6462854">Get</span><span class="op" id="6462857">(</span><span class="string" id="6462858">&#34;requests&#34;</span><span class="op" id="6462868">)</span><span class="op" id="6462869">.</span><span class="op" id="6462870">(</span><span class="op" id="6462871">*</span><span class="ident" id="6462872">Int</span><span class="op" id="6462875">)</span>&nbsp;<span class="op" id="6462877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462881">t</span><span class="op" id="6462882">.</span><span class="ident" id="6462883">Errorf</span><span class="op" id="6462889">(</span><span class="string" id="6462890">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6462905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462912">reqs</span><span class="op" id="6462916">.</span><span class="ident" id="6462917">Add</span><span class="op" id="6462920">(</span><span class="num" id="6462921">1</span><span class="op" id="6462922">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462925">reqs</span><span class="op" id="6462929">.</span><span class="ident" id="6462930">Add</span><span class="op" id="6462933">(</span><span class="num" id="6462934">3</span><span class="op" id="6462935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462938">if</span>&nbsp;<span class="ident" id="6462941">reqs</span><span class="op" id="6462945">.</span><span class="ident" id="6462946">i</span>&nbsp;<span class="op" id="6462948">!=</span>&nbsp;<span class="num" id="6462951">4</span>&nbsp;<span class="op" id="6462953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462957">t</span><span class="op" id="6462958">.</span><span class="ident" id="6462959">Errorf</span><span class="op" id="6462965">(</span><span class="string" id="6462966">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6462987">,</span>&nbsp;<span class="ident" id="6462989">reqs</span><span class="op" id="6462993">.</span><span class="ident" id="6462994">i</span><span class="op" id="6462995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463002">if</span>&nbsp;<span class="ident" id="6463005">s</span>&nbsp;<span class="op" id="6463007">:=</span>&nbsp;<span class="ident" id="6463010">reqs</span><span class="op" id="6463014">.</span><span class="ident" id="6463015">String</span><span class="op" id="6463021">(</span><span class="op" id="6463022">)</span><span class="op" id="6463023">;</span>&nbsp;<span class="ident" id="6463025">s</span>&nbsp;<span class="op" id="6463027">!=</span>&nbsp;<span class="string" id="6463030">&#34;4&#34;</span>&nbsp;<span class="op" id="6463034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463038">t</span><span class="op" id="6463039">.</span><span class="ident" id="6463040">Errorf</span><span class="op" id="6463046">(</span><span class="string" id="6463047">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="6463079">,</span>&nbsp;<span class="ident" id="6463081">s</span><span class="op" id="6463082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463089">reqs</span><span class="op" id="6463093">.</span><span class="ident" id="6463094">Set</span><span class="op" id="6463097">(</span><span class="op" id="6463098">-</span><span class="num" id="6463099">2</span><span class="op" id="6463100">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463103">if</span>&nbsp;<span class="ident" id="6463106">reqs</span><span class="op" id="6463110">.</span><span class="ident" id="6463111">i</span>&nbsp;<span class="op" id="6463113">!=</span>&nbsp;<span class="op" id="6463116">-</span><span class="num" id="6463117">2</span>&nbsp;<span class="op" id="6463119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463123">t</span><span class="op" id="6463124">.</span><span class="ident" id="6463125">Errorf</span><span class="op" id="6463131">(</span><span class="string" id="6463132">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="6463154">,</span>&nbsp;<span class="ident" id="6463156">reqs</span><span class="op" id="6463160">.</span><span class="ident" id="6463161">i</span><span class="op" id="6463162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463165">}</span><br>
<span class="lineno"></span><span class="op" id="6463167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6463170">func</span>&nbsp;<span class="ident" id="6463175">TestFloat</span><span class="op" id="6463184">(</span><span class="ident" id="6463185">t</span>&nbsp;<span class="op" id="6463187">*</span><span class="ident" id="6463188">testing</span><span class="op" id="6463195">.</span><span class="ident" id="6463196">T</span><span class="op" id="6463197">)</span>&nbsp;<span class="op" id="6463199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463202">RemoveAll</span><span class="op" id="6463211">(</span><span class="op" id="6463212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463215">reqs</span>&nbsp;<span class="op" id="6463220">:=</span>&nbsp;<span class="ident" id="6463223">NewFloat</span><span class="op" id="6463231">(</span><span class="string" id="6463232">&#34;requests-float&#34;</span><span class="op" id="6463248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463251">if</span>&nbsp;<span class="ident" id="6463254">reqs</span><span class="op" id="6463258">.</span><span class="ident" id="6463259">f</span>&nbsp;<span class="op" id="6463261">!=</span>&nbsp;<span class="num" id="6463264">0.0</span>&nbsp;<span class="op" id="6463268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463272">t</span><span class="op" id="6463273">.</span><span class="ident" id="6463274">Errorf</span><span class="op" id="6463280">(</span><span class="string" id="6463281">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6463302">,</span>&nbsp;<span class="ident" id="6463304">reqs</span><span class="op" id="6463308">.</span><span class="ident" id="6463309">f</span><span class="op" id="6463310">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463316">if</span>&nbsp;<span class="ident" id="6463319">reqs</span>&nbsp;<span class="op" id="6463324">!=</span>&nbsp;<span class="ident" id="6463327">Get</span><span class="op" id="6463330">(</span><span class="string" id="6463331">&#34;requests-float&#34;</span><span class="op" id="6463347">)</span><span class="op" id="6463348">.</span><span class="op" id="6463349">(</span><span class="op" id="6463350">*</span><span class="ident" id="6463351">Float</span><span class="op" id="6463356">)</span>&nbsp;<span class="op" id="6463358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463362">t</span><span class="op" id="6463363">.</span><span class="ident" id="6463364">Errorf</span><span class="op" id="6463370">(</span><span class="string" id="6463371">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6463386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463393">reqs</span><span class="op" id="6463397">.</span><span class="ident" id="6463398">Add</span><span class="op" id="6463401">(</span><span class="num" id="6463402">1.5</span><span class="op" id="6463405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463408">reqs</span><span class="op" id="6463412">.</span><span class="ident" id="6463413">Add</span><span class="op" id="6463416">(</span><span class="num" id="6463417">1.25</span><span class="op" id="6463421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463424">if</span>&nbsp;<span class="ident" id="6463427">reqs</span><span class="op" id="6463431">.</span><span class="ident" id="6463432">f</span>&nbsp;<span class="op" id="6463434">!=</span>&nbsp;<span class="num" id="6463437">2.75</span>&nbsp;<span class="op" id="6463442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463446">t</span><span class="op" id="6463447">.</span><span class="ident" id="6463448">Errorf</span><span class="op" id="6463454">(</span><span class="string" id="6463455">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="6463479">,</span>&nbsp;<span class="ident" id="6463481">reqs</span><span class="op" id="6463485">.</span><span class="ident" id="6463486">f</span><span class="op" id="6463487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463490">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463494">if</span>&nbsp;<span class="ident" id="6463497">s</span>&nbsp;<span class="op" id="6463499">:=</span>&nbsp;<span class="ident" id="6463502">reqs</span><span class="op" id="6463506">.</span><span class="ident" id="6463507">String</span><span class="op" id="6463513">(</span><span class="op" id="6463514">)</span><span class="op" id="6463515">;</span>&nbsp;<span class="ident" id="6463517">s</span>&nbsp;<span class="op" id="6463519">!=</span>&nbsp;<span class="string" id="6463522">&#34;2.75&#34;</span>&nbsp;<span class="op" id="6463529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463533">t</span><span class="op" id="6463534">.</span><span class="ident" id="6463535">Errorf</span><span class="op" id="6463541">(</span><span class="string" id="6463542">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="6463577">,</span>&nbsp;<span class="ident" id="6463579">s</span><span class="op" id="6463580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463587">reqs</span><span class="op" id="6463591">.</span><span class="ident" id="6463592">Add</span><span class="op" id="6463595">(</span><span class="op" id="6463596">-</span><span class="num" id="6463597">2</span><span class="op" id="6463598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463601">if</span>&nbsp;<span class="ident" id="6463604">reqs</span><span class="op" id="6463608">.</span><span class="ident" id="6463609">f</span>&nbsp;<span class="op" id="6463611">!=</span>&nbsp;<span class="num" id="6463614">0.75</span>&nbsp;<span class="op" id="6463619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463623">t</span><span class="op" id="6463624">.</span><span class="ident" id="6463625">Errorf</span><span class="op" id="6463631">(</span><span class="string" id="6463632">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="6463656">,</span>&nbsp;<span class="ident" id="6463658">reqs</span><span class="op" id="6463662">.</span><span class="ident" id="6463663">f</span><span class="op" id="6463664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463667">}</span><br>
<span class="lineno"></span><span class="op" id="6463669">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="6463672">func</span>&nbsp;<span class="ident" id="6463677">TestString</span><span class="op" id="6463687">(</span><span class="ident" id="6463688">t</span>&nbsp;<span class="op" id="6463690">*</span><span class="ident" id="6463691">testing</span><span class="op" id="6463698">.</span><span class="ident" id="6463699">T</span><span class="op" id="6463700">)</span>&nbsp;<span class="op" id="6463702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463705">RemoveAll</span><span class="op" id="6463714">(</span><span class="op" id="6463715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463718">name</span>&nbsp;<span class="op" id="6463723">:=</span>&nbsp;<span class="ident" id="6463726">NewString</span><span class="op" id="6463735">(</span><span class="string" id="6463736">&#34;my-name&#34;</span><span class="op" id="6463745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463748">if</span>&nbsp;<span class="ident" id="6463751">name</span><span class="op" id="6463755">.</span><span class="ident" id="6463756">s</span>&nbsp;<span class="op" id="6463758">!=</span>&nbsp;<span class="string" id="6463761">&#34;&#34;</span>&nbsp;<span class="op" id="6463764">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463768">t</span><span class="op" id="6463769">.</span><span class="ident" id="6463770">Errorf</span><span class="op" id="6463776">(</span><span class="string" id="6463777">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="6463801">,</span>&nbsp;<span class="ident" id="6463803">name</span><span class="op" id="6463807">.</span><span class="ident" id="6463808">s</span><span class="op" id="6463809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463816">name</span><span class="op" id="6463820">.</span><span class="ident" id="6463821">Set</span><span class="op" id="6463824">(</span><span class="string" id="6463825">&#34;Mike&#34;</span><span class="op" id="6463831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463834">if</span>&nbsp;<span class="ident" id="6463837">name</span><span class="op" id="6463841">.</span><span class="ident" id="6463842">s</span>&nbsp;<span class="op" id="6463844">!=</span>&nbsp;<span class="string" id="6463847">&#34;Mike&#34;</span>&nbsp;<span class="op" id="6463854">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463858">t</span><span class="op" id="6463859">.</span><span class="ident" id="6463860">Errorf</span><span class="op" id="6463866">(</span><span class="string" id="6463867">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="6463895">,</span>&nbsp;<span class="ident" id="6463897">name</span><span class="op" id="6463901">.</span><span class="ident" id="6463902">s</span><span class="op" id="6463903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463910">if</span>&nbsp;<span class="ident" id="6463913">s</span>&nbsp;<span class="op" id="6463915">:=</span>&nbsp;<span class="ident" id="6463918">name</span><span class="op" id="6463922">.</span><span class="ident" id="6463923">String</span><span class="op" id="6463929">(</span><span class="op" id="6463930">)</span><span class="op" id="6463931">;</span>&nbsp;<span class="ident" id="6463933">s</span>&nbsp;<span class="op" id="6463935">!=</span>&nbsp;<span class="string" id="6463938">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="6463949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463953">t</span><span class="op" id="6463954">.</span><span class="ident" id="6463955">Errorf</span><span class="op" id="6463961">(</span><span class="string" id="6463962">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="6464001">,</span>&nbsp;<span class="ident" id="6464003">s</span><span class="op" id="6464004">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464007">}</span><br>
<span class="lineno"></span><span class="op" id="6464009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6464012">func</span>&nbsp;<span class="ident" id="6464017">TestMapCounter</span><span class="op" id="6464031">(</span><span class="ident" id="6464032">t</span>&nbsp;<span class="op" id="6464034">*</span><span class="ident" id="6464035">testing</span><span class="op" id="6464042">.</span><span class="ident" id="6464043">T</span><span class="op" id="6464044">)</span>&nbsp;<span class="op" id="6464046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464049">RemoveAll</span><span class="op" id="6464058">(</span><span class="op" id="6464059">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464062">colors</span>&nbsp;<span class="op" id="6464069">:=</span>&nbsp;<span class="ident" id="6464072">NewMap</span><span class="op" id="6464078">(</span><span class="string" id="6464079">&#34;bike-shed-colors&#34;</span><span class="op" id="6464097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464101">colors</span><span class="op" id="6464107">.</span><span class="ident" id="6464108">Add</span><span class="op" id="6464111">(</span><span class="string" id="6464112">&#34;red&#34;</span><span class="op" id="6464117">,</span>&nbsp;<span class="num" id="6464119">1</span><span class="op" id="6464120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464123">colors</span><span class="op" id="6464129">.</span><span class="ident" id="6464130">Add</span><span class="op" id="6464133">(</span><span class="string" id="6464134">&#34;red&#34;</span><span class="op" id="6464139">,</span>&nbsp;<span class="num" id="6464141">2</span><span class="op" id="6464142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464145">colors</span><span class="op" id="6464151">.</span><span class="ident" id="6464152">Add</span><span class="op" id="6464155">(</span><span class="string" id="6464156">&#34;blue&#34;</span><span class="op" id="6464162">,</span>&nbsp;<span class="num" id="6464164">4</span><span class="op" id="6464165">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464168">colors</span><span class="op" id="6464174">.</span><span class="ident" id="6464175">AddFloat</span><span class="op" id="6464183">(</span><span class="string" id="6464184">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6464200">,</span>&nbsp;<span class="num" id="6464202">4.125</span><span class="op" id="6464207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464210">if</span>&nbsp;<span class="ident" id="6464213">x</span>&nbsp;<span class="op" id="6464215">:=</span>&nbsp;<span class="ident" id="6464218">colors</span><span class="op" id="6464224">.</span><span class="ident" id="6464225">m</span><span class="op" id="6464226">[</span><span class="string" id="6464227">&#34;red&#34;</span><span class="op" id="6464232">]</span><span class="op" id="6464233">.</span><span class="op" id="6464234">(</span><span class="op" id="6464235">*</span><span class="ident" id="6464236">Int</span><span class="op" id="6464239">)</span><span class="op" id="6464240">.</span><span class="ident" id="6464241">i</span><span class="op" id="6464242">;</span>&nbsp;<span class="ident" id="6464244">x</span>&nbsp;<span class="op" id="6464246">!=</span>&nbsp;<span class="num" id="6464249">3</span>&nbsp;<span class="op" id="6464251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464255">t</span><span class="op" id="6464256">.</span><span class="ident" id="6464257">Errorf</span><span class="op" id="6464263">(</span><span class="string" id="6464264">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6464296">,</span>&nbsp;<span class="ident" id="6464298">x</span><span class="op" id="6464299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464305">if</span>&nbsp;<span class="ident" id="6464308">x</span>&nbsp;<span class="op" id="6464310">:=</span>&nbsp;<span class="ident" id="6464313">colors</span><span class="op" id="6464319">.</span><span class="ident" id="6464320">m</span><span class="op" id="6464321">[</span><span class="string" id="6464322">&#34;blue&#34;</span><span class="op" id="6464328">]</span><span class="op" id="6464329">.</span><span class="op" id="6464330">(</span><span class="op" id="6464331">*</span><span class="ident" id="6464332">Int</span><span class="op" id="6464335">)</span><span class="op" id="6464336">.</span><span class="ident" id="6464337">i</span><span class="op" id="6464338">;</span>&nbsp;<span class="ident" id="6464340">x</span>&nbsp;<span class="op" id="6464342">!=</span>&nbsp;<span class="num" id="6464345">4</span>&nbsp;<span class="op" id="6464347">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464351">t</span><span class="op" id="6464352">.</span><span class="ident" id="6464353">Errorf</span><span class="op" id="6464359">(</span><span class="string" id="6464360">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6464393">,</span>&nbsp;<span class="ident" id="6464395">x</span><span class="op" id="6464396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464402">if</span>&nbsp;<span class="ident" id="6464405">x</span>&nbsp;<span class="op" id="6464407">:=</span>&nbsp;<span class="ident" id="6464410">colors</span><span class="op" id="6464416">.</span><span class="ident" id="6464417">m</span><span class="op" id="6464418">[</span><span class="string" id="6464419">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6464435">]</span><span class="op" id="6464436">.</span><span class="op" id="6464437">(</span><span class="op" id="6464438">*</span><span class="ident" id="6464439">Float</span><span class="op" id="6464444">)</span><span class="op" id="6464445">.</span><span class="ident" id="6464446">f</span><span class="op" id="6464447">;</span>&nbsp;<span class="ident" id="6464449">x</span>&nbsp;<span class="op" id="6464451">!=</span>&nbsp;<span class="num" id="6464454">4.125</span>&nbsp;<span class="op" id="6464460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464464">t</span><span class="op" id="6464465">.</span><span class="ident" id="6464466">Errorf</span><span class="op" id="6464472">(</span><span class="string" id="6464473">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="6464518">,</span>&nbsp;<span class="ident" id="6464520">x</span><span class="op" id="6464521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464524">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6464528">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6464581">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464630">s</span>&nbsp;<span class="op" id="6464632">:=</span>&nbsp;<span class="ident" id="6464635">colors</span><span class="op" id="6464641">.</span><span class="ident" id="6464642">String</span><span class="op" id="6464648">(</span><span class="op" id="6464649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464652">var</span>&nbsp;<span class="ident" id="6464656">j</span>&nbsp;<span class="keyword" id="6464658">interface</span><span class="op" id="6464667">{</span><span class="op" id="6464668">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464671">err</span>&nbsp;<span class="op" id="6464675">:=</span>&nbsp;<span class="ident" id="6464678">json</span><span class="op" id="6464682">.</span><span class="ident" id="6464683">Unmarshal</span><span class="op" id="6464692">(</span><span class="op" id="6464693">[</span><span class="op" id="6464694">]</span><span class="builtintype" id="6464695">byte</span><span class="op" id="6464699">(</span><span class="ident" id="6464700">s</span><span class="op" id="6464701">)</span><span class="op" id="6464702">,</span>&nbsp;<span class="op" id="6464704">&amp;</span><span class="ident" id="6464705">j</span><span class="op" id="6464706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464709">if</span>&nbsp;<span class="ident" id="6464712">err</span>&nbsp;<span class="op" id="6464716">!=</span>&nbsp;<span class="ident" id="6464719">nil</span>&nbsp;<span class="op" id="6464723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464727">t</span><span class="op" id="6464728">.</span><span class="ident" id="6464729">Errorf</span><span class="op" id="6464735">(</span><span class="string" id="6464736">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="6464774">,</span>&nbsp;<span class="ident" id="6464776">err</span><span class="op" id="6464779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464785">m</span><span class="op" id="6464786">,</span>&nbsp;<span class="ident" id="6464788">ok</span>&nbsp;<span class="op" id="6464791">:=</span>&nbsp;<span class="ident" id="6464794">j</span><span class="op" id="6464795">.</span><span class="op" id="6464796">(</span><span class="keyword" id="6464797">map</span><span class="op" id="6464800">[</span><span class="builtintype" id="6464801">string</span><span class="op" id="6464807">]</span><span class="keyword" id="6464808">interface</span><span class="op" id="6464817">{</span><span class="op" id="6464818">}</span><span class="op" id="6464819">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464822">if</span>&nbsp;<span class="op" id="6464825">!</span><span class="ident" id="6464826">ok</span>&nbsp;<span class="op" id="6464829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464833">t</span><span class="op" id="6464834">.</span><span class="ident" id="6464835">Error</span><span class="op" id="6464840">(</span><span class="string" id="6464841">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="6464880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464886">red</span>&nbsp;<span class="op" id="6464890">:=</span>&nbsp;<span class="ident" id="6464893">m</span><span class="op" id="6464894">[</span><span class="string" id="6464895">&#34;red&#34;</span><span class="op" id="6464900">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464903">x</span><span class="op" id="6464904">,</span>&nbsp;<span class="ident" id="6464906">ok</span>&nbsp;<span class="op" id="6464909">:=</span>&nbsp;<span class="ident" id="6464912">red</span><span class="op" id="6464915">.</span><span class="op" id="6464916">(</span><span class="builtintype" id="6464917">float64</span><span class="op" id="6464924">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464927">if</span>&nbsp;<span class="op" id="6464930">!</span><span class="ident" id="6464931">ok</span>&nbsp;<span class="op" id="6464934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464938">t</span><span class="op" id="6464939">.</span><span class="ident" id="6464940">Error</span><span class="op" id="6464945">(</span><span class="string" id="6464946">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="6464975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464981">if</span>&nbsp;<span class="ident" id="6464984">x</span>&nbsp;<span class="op" id="6464986">!=</span>&nbsp;<span class="num" id="6464989">3</span>&nbsp;<span class="op" id="6464991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464995">t</span><span class="op" id="6464996">.</span><span class="ident" id="6464997">Errorf</span><span class="op" id="6465003">(</span><span class="string" id="6465004">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6465022">,</span>&nbsp;<span class="ident" id="6465024">x</span><span class="op" id="6465025">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465028">}</span><br>
<span class="lineno"></span><span class="op" id="6465030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6465033">func</span>&nbsp;<span class="ident" id="6465038">TestFunc</span><span class="op" id="6465046">(</span><span class="ident" id="6465047">t</span>&nbsp;<span class="op" id="6465049">*</span><span class="ident" id="6465050">testing</span><span class="op" id="6465057">.</span><span class="ident" id="6465058">T</span><span class="op" id="6465059">)</span>&nbsp;<span class="op" id="6465061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465064">RemoveAll</span><span class="op" id="6465073">(</span><span class="op" id="6465074">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465077">var</span>&nbsp;<span class="ident" id="6465081">x</span>&nbsp;<span class="keyword" id="6465083">interface</span><span class="op" id="6465092">{</span><span class="op" id="6465093">}</span>&nbsp;<span class="op" id="6465095">=</span>&nbsp;<span class="op" id="6465097">[</span><span class="op" id="6465098">]</span><span class="builtintype" id="6465099">string</span><span class="op" id="6465105">{</span><span class="string" id="6465106">&#34;a&#34;</span><span class="op" id="6465109">,</span>&nbsp;<span class="string" id="6465111">&#34;b&#34;</span><span class="op" id="6465114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465117">f</span>&nbsp;<span class="op" id="6465119">:=</span>&nbsp;<span class="ident" id="6465122">Func</span><span class="op" id="6465126">(</span><span class="keyword" id="6465127">func</span><span class="op" id="6465131">(</span><span class="op" id="6465132">)</span>&nbsp;<span class="keyword" id="6465134">interface</span><span class="op" id="6465143">{</span><span class="op" id="6465144">}</span>&nbsp;<span class="op" id="6465146">{</span>&nbsp;<span class="keyword" id="6465148">return</span>&nbsp;<span class="ident" id="6465155">x</span>&nbsp;<span class="op" id="6465157">}</span><span class="op" id="6465158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465161">if</span>&nbsp;<span class="ident" id="6465164">s</span><span class="op" id="6465165">,</span>&nbsp;<span class="ident" id="6465167">exp</span>&nbsp;<span class="op" id="6465171">:=</span>&nbsp;<span class="ident" id="6465174">f</span><span class="op" id="6465175">.</span><span class="ident" id="6465176">String</span><span class="op" id="6465182">(</span><span class="op" id="6465183">)</span><span class="op" id="6465184">,</span>&nbsp;<span class="string" id="6465186">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="6465197">;</span>&nbsp;<span class="ident" id="6465199">s</span>&nbsp;<span class="op" id="6465201">!=</span>&nbsp;<span class="ident" id="6465204">exp</span>&nbsp;<span class="op" id="6465208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465212">t</span><span class="op" id="6465213">.</span><span class="ident" id="6465214">Errorf</span><span class="op" id="6465220">(</span><span class="string" id="6465221">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6465247">,</span>&nbsp;<span class="ident" id="6465249">s</span><span class="op" id="6465250">,</span>&nbsp;<span class="ident" id="6465252">exp</span><span class="op" id="6465255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465258">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465262">x</span>&nbsp;<span class="op" id="6465264">=</span>&nbsp;<span class="num" id="6465266">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465270">if</span>&nbsp;<span class="ident" id="6465273">s</span><span class="op" id="6465274">,</span>&nbsp;<span class="ident" id="6465276">exp</span>&nbsp;<span class="op" id="6465280">:=</span>&nbsp;<span class="ident" id="6465283">f</span><span class="op" id="6465284">.</span><span class="ident" id="6465285">String</span><span class="op" id="6465291">(</span><span class="op" id="6465292">)</span><span class="op" id="6465293">,</span>&nbsp;<span class="string" id="6465295">`17`</span><span class="op" id="6465299">;</span>&nbsp;<span class="ident" id="6465301">s</span>&nbsp;<span class="op" id="6465303">!=</span>&nbsp;<span class="ident" id="6465306">exp</span>&nbsp;<span class="op" id="6465310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465314">t</span><span class="op" id="6465315">.</span><span class="ident" id="6465316">Errorf</span><span class="op" id="6465322">(</span><span class="string" id="6465323">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6465349">,</span>&nbsp;<span class="ident" id="6465351">s</span><span class="op" id="6465352">,</span>&nbsp;<span class="ident" id="6465354">exp</span><span class="op" id="6465357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465360">}</span><br>
<span class="lineno">145</span><span class="op" id="6465362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6465365">func</span>&nbsp;<span class="ident" id="6465370">TestHandler</span><span class="op" id="6465381">(</span><span class="ident" id="6465382">t</span>&nbsp;<span class="op" id="6465384">*</span><span class="ident" id="6465385">testing</span><span class="op" id="6465392">.</span><span class="ident" id="6465393">T</span><span class="op" id="6465394">)</span>&nbsp;<span class="op" id="6465396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465399">RemoveAll</span><span class="op" id="6465408">(</span><span class="op" id="6465409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465412">m</span>&nbsp;<span class="op" id="6465414">:=</span>&nbsp;<span class="ident" id="6465417">NewMap</span><span class="op" id="6465423">(</span><span class="string" id="6465424">&#34;map1&#34;</span><span class="op" id="6465430">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465433">m</span><span class="op" id="6465434">.</span><span class="ident" id="6465435">Add</span><span class="op" id="6465438">(</span><span class="string" id="6465439">&#34;a&#34;</span><span class="op" id="6465442">,</span>&nbsp;<span class="num" id="6465444">1</span><span class="op" id="6465445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465448">m</span><span class="op" id="6465449">.</span><span class="ident" id="6465450">Add</span><span class="op" id="6465453">(</span><span class="string" id="6465454">&#34;z&#34;</span><span class="op" id="6465457">,</span>&nbsp;<span class="num" id="6465459">2</span><span class="op" id="6465460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465463">m2</span>&nbsp;<span class="op" id="6465466">:=</span>&nbsp;<span class="ident" id="6465469">NewMap</span><span class="op" id="6465475">(</span><span class="string" id="6465476">&#34;map2&#34;</span><span class="op" id="6465482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465485">for</span>&nbsp;<span class="ident" id="6465489">i</span>&nbsp;<span class="op" id="6465491">:=</span>&nbsp;<span class="num" id="6465494">0</span><span class="op" id="6465495">;</span>&nbsp;<span class="ident" id="6465497">i</span>&nbsp;<span class="op" id="6465499">&lt;</span>&nbsp;<span class="num" id="6465501">9</span><span class="op" id="6465502">;</span>&nbsp;<span class="ident" id="6465504">i</span><span class="op" id="6465505">++</span>&nbsp;<span class="op" id="6465508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465512">m2</span><span class="op" id="6465514">.</span><span class="ident" id="6465515">Add</span><span class="op" id="6465518">(</span><span class="ident" id="6465519">strconv</span><span class="op" id="6465526">.</span><span class="ident" id="6465527">Itoa</span><span class="op" id="6465531">(</span><span class="ident" id="6465532">i</span><span class="op" id="6465533">)</span><span class="op" id="6465534">,</span>&nbsp;<span class="ident" id="6465536">int64</span><span class="op" id="6465541">(</span><span class="ident" id="6465542">i</span><span class="op" id="6465543">)</span><span class="op" id="6465544">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465550">rr</span>&nbsp;<span class="op" id="6465553">:=</span>&nbsp;<span class="ident" id="6465556">httptest</span><span class="op" id="6465564">.</span><span class="ident" id="6465565">NewRecorder</span><span class="op" id="6465576">(</span><span class="op" id="6465577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465580">rr</span><span class="op" id="6465582">.</span><span class="ident" id="6465583">Body</span>&nbsp;<span class="op" id="6465588">=</span>&nbsp;<span class="builtinfunc" id="6465590">new</span><span class="op" id="6465593">(</span><span class="ident" id="6465594">bytes</span><span class="op" id="6465599">.</span><span class="ident" id="6465600">Buffer</span><span class="op" id="6465606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465609">expvarHandler</span><span class="op" id="6465622">(</span><span class="ident" id="6465623">rr</span><span class="op" id="6465625">,</span>&nbsp;<span class="ident" id="6465627">nil</span><span class="op" id="6465630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465633">want</span>&nbsp;<span class="op" id="6465638">:=</span>&nbsp;<span class="string" id="6465641">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465756">if</span>&nbsp;<span class="ident" id="6465759">got</span>&nbsp;<span class="op" id="6465763">:=</span>&nbsp;<span class="ident" id="6465766">rr</span><span class="op" id="6465768">.</span><span class="ident" id="6465769">Body</span><span class="op" id="6465773">.</span><span class="ident" id="6465774">String</span><span class="op" id="6465780">(</span><span class="op" id="6465781">)</span><span class="op" id="6465782">;</span>&nbsp;<span class="ident" id="6465784">got</span>&nbsp;<span class="op" id="6465788">!=</span>&nbsp;<span class="ident" id="6465791">want</span>&nbsp;<span class="op" id="6465796">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465800">t</span><span class="op" id="6465801">.</span><span class="ident" id="6465802">Errorf</span><span class="op" id="6465808">(</span><span class="string" id="6465809">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="6465845">,</span>&nbsp;<span class="ident" id="6465847">got</span><span class="op" id="6465850">,</span>&nbsp;<span class="ident" id="6465852">want</span><span class="op" id="6465856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465859">}</span><br>
<span class="lineno"></span><span class="op" id="6465861">}</span>
</div>
</body>
</html>
