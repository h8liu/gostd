<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5813594">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5813650">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5813704">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5813755">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5813778">package</span>&nbsp;<span class="ident" id="5813786">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5813793">import</span>&nbsp;<span class="op" id="5813800">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5813803">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5813822">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5813829">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5813832">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5813909">//</span><br>
<span class="lineno"></span><span class="comment" id="5813912">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5813999">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5814077">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5814155">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5814227">//</span><br>
<span class="lineno"></span><span class="comment" id="5814230">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5814311">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5814390">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5814443">//</span><br>
<span class="lineno"></span><span class="comment" id="5814446">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5814521">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5814596">type</span>&nbsp;<span class="ident" id="5814601">LineTable</span>&nbsp;<span class="keyword" id="5814611">struct</span>&nbsp;<span class="op" id="5814618">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814621">Data</span>&nbsp;<span class="op" id="5814626">[</span><span class="op" id="5814627">]</span><span class="builtintype" id="5814628">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814634">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5814639">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814647">Line</span>&nbsp;<span class="builtintype" id="5814652">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5814658">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814675">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5814684">sync</span><span class="op" id="5814688">.</span><span class="ident" id="5814689">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814696">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5814705">int</span>&nbsp;<span class="comment" id="5814709">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814763">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5814772">binary</span><span class="op" id="5814778">.</span><span class="ident" id="5814779">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814790">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5814799">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814807">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5814816">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814824">functab</span>&nbsp;&nbsp;<span class="op" id="5814833">[</span><span class="op" id="5814834">]</span><span class="builtintype" id="5814835">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814841">nfunctab</span>&nbsp;<span class="builtintype" id="5814850">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814858">filetab</span>&nbsp;&nbsp;<span class="op" id="5814867">[</span><span class="op" id="5814868">]</span><span class="builtintype" id="5814869">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814875">nfiletab</span>&nbsp;<span class="builtintype" id="5814884">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814892">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5814901">map</span><span class="op" id="5814904">[</span><span class="builtintype" id="5814905">string</span><span class="op" id="5814911">]</span><span class="builtintype" id="5814912">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5814919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5814922">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5814993">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5815058">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5815132">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5815143">const</span>&nbsp;<span class="ident" id="5815149">oldQuantum</span>&nbsp;<span class="op" id="5815160">=</span>&nbsp;<span class="num" id="5815162">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5815165">func</span>&nbsp;<span class="op" id="5815170">(</span><span class="ident" id="5815171">t</span>&nbsp;<span class="op" id="5815173">*</span><span class="ident" id="5815174">LineTable</span><span class="op" id="5815183">)</span>&nbsp;<span class="ident" id="5815185">parse</span><span class="op" id="5815190">(</span><span class="ident" id="5815191">targetPC</span>&nbsp;<span class="ident" id="5815200">uint64</span><span class="op" id="5815206">,</span>&nbsp;<span class="ident" id="5815208">targetLine</span>&nbsp;<span class="builtintype" id="5815219">int</span><span class="op" id="5815222">)</span>&nbsp;<span class="op" id="5815224">(</span><span class="ident" id="5815225">b</span>&nbsp;<span class="op" id="5815227">[</span><span class="op" id="5815228">]</span><span class="builtintype" id="5815229">byte</span><span class="op" id="5815233">,</span>&nbsp;<span class="ident" id="5815235">pc</span>&nbsp;<span class="ident" id="5815238">uint64</span><span class="op" id="5815244">,</span>&nbsp;<span class="ident" id="5815246">line</span>&nbsp;<span class="builtintype" id="5815251">int</span><span class="op" id="5815254">)</span>&nbsp;<span class="op" id="5815256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815259">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815316">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815348">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815410">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815467">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815506">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815510">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5815573">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815630">b</span><span class="op" id="5815631">,</span>&nbsp;<span class="ident" id="5815633">pc</span><span class="op" id="5815635">,</span>&nbsp;<span class="ident" id="5815637">line</span>&nbsp;<span class="op" id="5815642">=</span>&nbsp;<span class="ident" id="5815644">t</span><span class="op" id="5815645">.</span><span class="ident" id="5815646">Data</span><span class="op" id="5815650">,</span>&nbsp;<span class="ident" id="5815652">t</span><span class="op" id="5815653">.</span><span class="ident" id="5815654">PC</span><span class="op" id="5815656">,</span>&nbsp;<span class="ident" id="5815658">t</span><span class="op" id="5815659">.</span><span class="ident" id="5815660">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815666">for</span>&nbsp;<span class="ident" id="5815670">pc</span>&nbsp;<span class="op" id="5815673">&lt;=</span>&nbsp;<span class="ident" id="5815676">targetPC</span>&nbsp;<span class="op" id="5815685">&amp;&amp;</span>&nbsp;<span class="ident" id="5815688">line</span>&nbsp;<span class="op" id="5815693">!=</span>&nbsp;<span class="ident" id="5815696">targetLine</span>&nbsp;<span class="op" id="5815707">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5815710">len</span><span class="op" id="5815713">(</span><span class="ident" id="5815714">b</span><span class="op" id="5815715">)</span>&nbsp;<span class="op" id="5815717">&gt;</span>&nbsp;<span class="num" id="5815719">0</span>&nbsp;<span class="op" id="5815721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815725">code</span>&nbsp;<span class="op" id="5815730">:=</span>&nbsp;<span class="ident" id="5815733">b</span><span class="op" id="5815734">[</span><span class="num" id="5815735">0</span><span class="op" id="5815736">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815740">b</span>&nbsp;<span class="op" id="5815742">=</span>&nbsp;<span class="ident" id="5815744">b</span><span class="op" id="5815745">[</span><span class="num" id="5815746">1</span><span class="op" id="5815747">:</span><span class="op" id="5815748">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815752">switch</span>&nbsp;<span class="op" id="5815759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815763">case</span>&nbsp;<span class="ident" id="5815768">code</span>&nbsp;<span class="op" id="5815773">==</span>&nbsp;<span class="num" id="5815776">0</span><span class="op" id="5815777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815782">if</span>&nbsp;<span class="builtinfunc" id="5815785">len</span><span class="op" id="5815788">(</span><span class="ident" id="5815789">b</span><span class="op" id="5815790">)</span>&nbsp;<span class="op" id="5815792">&lt;</span>&nbsp;<span class="num" id="5815794">4</span>&nbsp;<span class="op" id="5815796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815802">b</span>&nbsp;<span class="op" id="5815804">=</span>&nbsp;<span class="ident" id="5815806">b</span><span class="op" id="5815807">[</span><span class="num" id="5815808">0</span><span class="op" id="5815809">:</span><span class="num" id="5815810">0</span><span class="op" id="5815811">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815817">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5815826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815831">val</span>&nbsp;<span class="op" id="5815835">:=</span>&nbsp;<span class="ident" id="5815838">binary</span><span class="op" id="5815844">.</span><span class="ident" id="5815845">BigEndian</span><span class="op" id="5815854">.</span><span class="ident" id="5815855">Uint32</span><span class="op" id="5815861">(</span><span class="ident" id="5815862">b</span><span class="op" id="5815863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815868">b</span>&nbsp;<span class="op" id="5815870">=</span>&nbsp;<span class="ident" id="5815872">b</span><span class="op" id="5815873">[</span><span class="num" id="5815874">4</span><span class="op" id="5815875">:</span><span class="op" id="5815876">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815881">line</span>&nbsp;<span class="op" id="5815886">+=</span>&nbsp;<span class="builtintype" id="5815889">int</span><span class="op" id="5815892">(</span><span class="ident" id="5815893">val</span><span class="op" id="5815896">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815900">case</span>&nbsp;<span class="ident" id="5815905">code</span>&nbsp;<span class="op" id="5815910">&lt;=</span>&nbsp;<span class="num" id="5815913">64</span><span class="op" id="5815915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815920">line</span>&nbsp;<span class="op" id="5815925">+=</span>&nbsp;<span class="builtintype" id="5815928">int</span><span class="op" id="5815931">(</span><span class="ident" id="5815932">code</span><span class="op" id="5815936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815940">case</span>&nbsp;<span class="ident" id="5815945">code</span>&nbsp;<span class="op" id="5815950">&lt;=</span>&nbsp;<span class="num" id="5815953">128</span><span class="op" id="5815956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815961">line</span>&nbsp;<span class="op" id="5815966">-=</span>&nbsp;<span class="builtintype" id="5815969">int</span><span class="op" id="5815972">(</span><span class="ident" id="5815973">code</span>&nbsp;<span class="op" id="5815978">-</span>&nbsp;<span class="num" id="5815980">64</span><span class="op" id="5815982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815986">default</span><span class="op" id="5815993">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815998">pc</span>&nbsp;<span class="op" id="5816001">+=</span>&nbsp;<span class="ident" id="5816004">oldQuantum</span>&nbsp;<span class="op" id="5816015">*</span>&nbsp;<span class="ident" id="5816017">uint64</span><span class="op" id="5816023">(</span><span class="ident" id="5816024">code</span><span class="op" id="5816028">-</span><span class="num" id="5816029">128</span><span class="op" id="5816032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816037">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816052">pc</span>&nbsp;<span class="op" id="5816055">+=</span>&nbsp;<span class="ident" id="5816058">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816070">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816073">return</span>&nbsp;<span class="ident" id="5816080">b</span><span class="op" id="5816081">,</span>&nbsp;<span class="ident" id="5816083">pc</span><span class="op" id="5816085">,</span>&nbsp;<span class="ident" id="5816087">line</span><br>
<span class="lineno"></span><span class="op" id="5816092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5816095">func</span>&nbsp;<span class="op" id="5816100">(</span><span class="ident" id="5816101">t</span>&nbsp;<span class="op" id="5816103">*</span><span class="ident" id="5816104">LineTable</span><span class="op" id="5816113">)</span>&nbsp;<span class="ident" id="5816115">slice</span><span class="op" id="5816120">(</span><span class="ident" id="5816121">pc</span>&nbsp;<span class="ident" id="5816124">uint64</span><span class="op" id="5816130">)</span>&nbsp;<span class="op" id="5816132">*</span><span class="ident" id="5816133">LineTable</span>&nbsp;<span class="op" id="5816143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816146">data</span><span class="op" id="5816150">,</span>&nbsp;<span class="ident" id="5816152">pc</span><span class="op" id="5816154">,</span>&nbsp;<span class="ident" id="5816156">line</span>&nbsp;<span class="op" id="5816161">:=</span>&nbsp;<span class="ident" id="5816164">t</span><span class="op" id="5816165">.</span><span class="ident" id="5816166">parse</span><span class="op" id="5816171">(</span><span class="ident" id="5816172">pc</span><span class="op" id="5816174">,</span>&nbsp;<span class="op" id="5816176">-</span><span class="num" id="5816177">1</span><span class="op" id="5816178">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816181">return</span>&nbsp;<span class="op" id="5816188">&amp;</span><span class="ident" id="5816189">LineTable</span><span class="op" id="5816198">{</span><span class="ident" id="5816199">Data</span><span class="op" id="5816203">:</span>&nbsp;<span class="ident" id="5816205">data</span><span class="op" id="5816209">,</span>&nbsp;<span class="ident" id="5816211">PC</span><span class="op" id="5816213">:</span>&nbsp;<span class="ident" id="5816215">pc</span><span class="op" id="5816217">,</span>&nbsp;<span class="ident" id="5816219">Line</span><span class="op" id="5816223">:</span>&nbsp;<span class="ident" id="5816225">line</span><span class="op" id="5816229">}</span><br>
<span class="lineno"></span><span class="op" id="5816231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5816234">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5816301">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5816356">func</span>&nbsp;<span class="op" id="5816361">(</span><span class="ident" id="5816362">t</span>&nbsp;<span class="op" id="5816364">*</span><span class="ident" id="5816365">LineTable</span><span class="op" id="5816374">)</span>&nbsp;<span class="ident" id="5816376">PCToLine</span><span class="op" id="5816384">(</span><span class="ident" id="5816385">pc</span>&nbsp;<span class="ident" id="5816388">uint64</span><span class="op" id="5816394">)</span>&nbsp;<span class="builtintype" id="5816396">int</span>&nbsp;<span class="op" id="5816400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816403">if</span>&nbsp;<span class="ident" id="5816406">t</span><span class="op" id="5816407">.</span><span class="ident" id="5816408">isGo12</span><span class="op" id="5816414">(</span><span class="op" id="5816415">)</span>&nbsp;<span class="op" id="5816417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816421">return</span>&nbsp;<span class="ident" id="5816428">t</span><span class="op" id="5816429">.</span><span class="ident" id="5816430">go12PCToLine</span><span class="op" id="5816442">(</span><span class="ident" id="5816443">pc</span><span class="op" id="5816445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816451">_</span><span class="op" id="5816452">,</span>&nbsp;<span class="ident" id="5816454">_</span><span class="op" id="5816455">,</span>&nbsp;<span class="ident" id="5816457">line</span>&nbsp;<span class="op" id="5816462">:=</span>&nbsp;<span class="ident" id="5816465">t</span><span class="op" id="5816466">.</span><span class="ident" id="5816467">parse</span><span class="op" id="5816472">(</span><span class="ident" id="5816473">pc</span><span class="op" id="5816475">,</span>&nbsp;<span class="op" id="5816477">-</span><span class="num" id="5816478">1</span><span class="op" id="5816479">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816482">return</span>&nbsp;<span class="ident" id="5816489">line</span><br>
<span class="lineno"></span><span class="op" id="5816494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5816497">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5816564">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5816615">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5816670">func</span>&nbsp;<span class="op" id="5816675">(</span><span class="ident" id="5816676">t</span>&nbsp;<span class="op" id="5816678">*</span><span class="ident" id="5816679">LineTable</span><span class="op" id="5816688">)</span>&nbsp;<span class="ident" id="5816690">LineToPC</span><span class="op" id="5816698">(</span><span class="ident" id="5816699">line</span>&nbsp;<span class="builtintype" id="5816704">int</span><span class="op" id="5816707">,</span>&nbsp;<span class="ident" id="5816709">maxpc</span>&nbsp;<span class="ident" id="5816715">uint64</span><span class="op" id="5816721">)</span>&nbsp;<span class="ident" id="5816723">uint64</span>&nbsp;<span class="op" id="5816730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816733">if</span>&nbsp;<span class="ident" id="5816736">t</span><span class="op" id="5816737">.</span><span class="ident" id="5816738">isGo12</span><span class="op" id="5816744">(</span><span class="op" id="5816745">)</span>&nbsp;<span class="op" id="5816747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816751">return</span>&nbsp;<span class="num" id="5816758">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816761">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816764">_</span><span class="op" id="5816765">,</span>&nbsp;<span class="ident" id="5816767">pc</span><span class="op" id="5816769">,</span>&nbsp;<span class="ident" id="5816771">line1</span>&nbsp;<span class="op" id="5816777">:=</span>&nbsp;<span class="ident" id="5816780">t</span><span class="op" id="5816781">.</span><span class="ident" id="5816782">parse</span><span class="op" id="5816787">(</span><span class="ident" id="5816788">maxpc</span><span class="op" id="5816793">,</span>&nbsp;<span class="ident" id="5816795">line</span><span class="op" id="5816799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816802">if</span>&nbsp;<span class="ident" id="5816805">line1</span>&nbsp;<span class="op" id="5816811">!=</span>&nbsp;<span class="ident" id="5816814">line</span>&nbsp;<span class="op" id="5816819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816823">return</span>&nbsp;<span class="num" id="5816830">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5816836">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816900">return</span>&nbsp;<span class="ident" id="5816907">pc</span>&nbsp;<span class="op" id="5816910">-</span>&nbsp;<span class="ident" id="5816912">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5816923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5816926">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5816970">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5817008">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5817049">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5817080">func</span>&nbsp;<span class="ident" id="5817085">NewLineTable</span><span class="op" id="5817097">(</span><span class="ident" id="5817098">data</span>&nbsp;<span class="op" id="5817103">[</span><span class="op" id="5817104">]</span><span class="builtintype" id="5817105">byte</span><span class="op" id="5817109">,</span>&nbsp;<span class="ident" id="5817111">text</span>&nbsp;<span class="ident" id="5817116">uint64</span><span class="op" id="5817122">)</span>&nbsp;<span class="op" id="5817124">*</span><span class="ident" id="5817125">LineTable</span>&nbsp;<span class="op" id="5817135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817138">return</span>&nbsp;<span class="op" id="5817145">&amp;</span><span class="ident" id="5817146">LineTable</span><span class="op" id="5817155">{</span><span class="ident" id="5817156">Data</span><span class="op" id="5817160">:</span>&nbsp;<span class="ident" id="5817162">data</span><span class="op" id="5817166">,</span>&nbsp;<span class="ident" id="5817168">PC</span><span class="op" id="5817170">:</span>&nbsp;<span class="ident" id="5817172">text</span><span class="op" id="5817176">,</span>&nbsp;<span class="ident" id="5817178">Line</span><span class="op" id="5817182">:</span>&nbsp;<span class="num" id="5817184">0</span><span class="op" id="5817185">}</span><br>
<span class="lineno"></span><span class="op" id="5817187">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5817190">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5817221">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5817253">//</span><br>
<span class="lineno"></span><span class="comment" id="5817256">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5817323">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5817391">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5817465">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5817489">//</span><br>
<span class="lineno"></span><span class="comment" id="5817492">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5817562">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5817608">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5817676">func</span>&nbsp;<span class="op" id="5817681">(</span><span class="ident" id="5817682">t</span>&nbsp;<span class="op" id="5817684">*</span><span class="ident" id="5817685">LineTable</span><span class="op" id="5817694">)</span>&nbsp;<span class="ident" id="5817696">isGo12</span><span class="op" id="5817702">(</span><span class="op" id="5817703">)</span>&nbsp;<span class="builtintype" id="5817705">bool</span>&nbsp;<span class="op" id="5817710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817713">t</span><span class="op" id="5817714">.</span><span class="ident" id="5817715">go12Init</span><span class="op" id="5817723">(</span><span class="op" id="5817724">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817727">return</span>&nbsp;<span class="ident" id="5817734">t</span><span class="op" id="5817735">.</span><span class="ident" id="5817736">go12</span>&nbsp;<span class="op" id="5817741">==</span>&nbsp;<span class="num" id="5817744">1</span><br>
<span class="lineno"></span><span class="op" id="5817746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5817749">const</span>&nbsp;<span class="ident" id="5817755">go12magic</span>&nbsp;<span class="op" id="5817765">=</span>&nbsp;<span class="num" id="5817767">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5817779">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5817836">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5817893">func</span>&nbsp;<span class="op" id="5817898">(</span><span class="ident" id="5817899">t</span>&nbsp;<span class="op" id="5817901">*</span><span class="ident" id="5817902">LineTable</span><span class="op" id="5817911">)</span>&nbsp;<span class="builtintype" id="5817913">uintptr</span><span class="op" id="5817920">(</span><span class="ident" id="5817921">b</span>&nbsp;<span class="op" id="5817923">[</span><span class="op" id="5817924">]</span><span class="builtintype" id="5817925">byte</span><span class="op" id="5817929">)</span>&nbsp;<span class="ident" id="5817931">uint64</span>&nbsp;<span class="op" id="5817938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817941">if</span>&nbsp;<span class="ident" id="5817944">t</span><span class="op" id="5817945">.</span><span class="ident" id="5817946">ptrsize</span>&nbsp;<span class="op" id="5817954">==</span>&nbsp;<span class="num" id="5817957">4</span>&nbsp;<span class="op" id="5817959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817963">return</span>&nbsp;<span class="ident" id="5817970">uint64</span><span class="op" id="5817976">(</span><span class="ident" id="5817977">t</span><span class="op" id="5817978">.</span><span class="ident" id="5817979">binary</span><span class="op" id="5817985">.</span><span class="ident" id="5817986">Uint32</span><span class="op" id="5817992">(</span><span class="ident" id="5817993">b</span><span class="op" id="5817994">)</span><span class="op" id="5817995">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818001">return</span>&nbsp;<span class="ident" id="5818008">t</span><span class="op" id="5818009">.</span><span class="ident" id="5818010">binary</span><span class="op" id="5818016">.</span><span class="ident" id="5818017">Uint64</span><span class="op" id="5818023">(</span><span class="ident" id="5818024">b</span><span class="op" id="5818025">)</span><br>
<span class="lineno"></span><span class="op" id="5818027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5818030">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5818105">func</span>&nbsp;<span class="op" id="5818110">(</span><span class="ident" id="5818111">t</span>&nbsp;<span class="op" id="5818113">*</span><span class="ident" id="5818114">LineTable</span><span class="op" id="5818123">)</span>&nbsp;<span class="ident" id="5818125">go12Init</span><span class="op" id="5818133">(</span><span class="op" id="5818134">)</span>&nbsp;<span class="op" id="5818136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818139">t</span><span class="op" id="5818140">.</span><span class="ident" id="5818141">mu</span><span class="op" id="5818143">.</span><span class="ident" id="5818144">Lock</span><span class="op" id="5818148">(</span><span class="op" id="5818149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818152">defer</span>&nbsp;<span class="ident" id="5818158">t</span><span class="op" id="5818159">.</span><span class="ident" id="5818160">mu</span><span class="op" id="5818162">.</span><span class="ident" id="5818163">Unlock</span><span class="op" id="5818169">(</span><span class="op" id="5818170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818173">if</span>&nbsp;<span class="ident" id="5818176">t</span><span class="op" id="5818177">.</span><span class="ident" id="5818178">go12</span>&nbsp;<span class="op" id="5818183">!=</span>&nbsp;<span class="num" id="5818186">0</span>&nbsp;<span class="op" id="5818188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818192">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818204">defer</span>&nbsp;<span class="keyword" id="5818210">func</span><span class="op" id="5818214">(</span><span class="op" id="5818215">)</span>&nbsp;<span class="op" id="5818217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5818221">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5818286">recover</span><span class="op" id="5818293">(</span><span class="op" id="5818294">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818297">}</span><span class="op" id="5818298">(</span><span class="op" id="5818299">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5818303">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818372">t</span><span class="op" id="5818373">.</span><span class="ident" id="5818374">go12</span>&nbsp;<span class="op" id="5818379">=</span>&nbsp;<span class="op" id="5818381">-</span><span class="num" id="5818382">1</span>&nbsp;<span class="comment" id="5818384">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818422">if</span>&nbsp;<span class="builtinfunc" id="5818425">len</span><span class="op" id="5818428">(</span><span class="ident" id="5818429">t</span><span class="op" id="5818430">.</span><span class="ident" id="5818431">Data</span><span class="op" id="5818435">)</span>&nbsp;<span class="op" id="5818437">&lt;</span>&nbsp;<span class="num" id="5818439">16</span>&nbsp;<span class="op" id="5818442">||</span>&nbsp;<span class="ident" id="5818445">t</span><span class="op" id="5818446">.</span><span class="ident" id="5818447">Data</span><span class="op" id="5818451">[</span><span class="num" id="5818452">4</span><span class="op" id="5818453">]</span>&nbsp;<span class="op" id="5818455">!=</span>&nbsp;<span class="num" id="5818458">0</span>&nbsp;<span class="op" id="5818460">||</span>&nbsp;<span class="ident" id="5818463">t</span><span class="op" id="5818464">.</span><span class="ident" id="5818465">Data</span><span class="op" id="5818469">[</span><span class="num" id="5818470">5</span><span class="op" id="5818471">]</span>&nbsp;<span class="op" id="5818473">!=</span>&nbsp;<span class="num" id="5818476">0</span>&nbsp;<span class="op" id="5818478">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818483">(</span><span class="ident" id="5818484">t</span><span class="op" id="5818485">.</span><span class="ident" id="5818486">Data</span><span class="op" id="5818490">[</span><span class="num" id="5818491">6</span><span class="op" id="5818492">]</span>&nbsp;<span class="op" id="5818494">!=</span>&nbsp;<span class="num" id="5818497">1</span>&nbsp;<span class="op" id="5818499">&amp;&amp;</span>&nbsp;<span class="ident" id="5818502">t</span><span class="op" id="5818503">.</span><span class="ident" id="5818504">Data</span><span class="op" id="5818508">[</span><span class="num" id="5818509">6</span><span class="op" id="5818510">]</span>&nbsp;<span class="op" id="5818512">!=</span>&nbsp;<span class="num" id="5818515">4</span><span class="op" id="5818516">)</span>&nbsp;<span class="op" id="5818518">||</span>&nbsp;<span class="comment" id="5818521">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818537">(</span><span class="ident" id="5818538">t</span><span class="op" id="5818539">.</span><span class="ident" id="5818540">Data</span><span class="op" id="5818544">[</span><span class="num" id="5818545">7</span><span class="op" id="5818546">]</span>&nbsp;<span class="op" id="5818548">!=</span>&nbsp;<span class="num" id="5818551">4</span>&nbsp;<span class="op" id="5818553">&amp;&amp;</span>&nbsp;<span class="ident" id="5818556">t</span><span class="op" id="5818557">.</span><span class="ident" id="5818558">Data</span><span class="op" id="5818562">[</span><span class="num" id="5818563">7</span><span class="op" id="5818564">]</span>&nbsp;<span class="op" id="5818566">!=</span>&nbsp;<span class="num" id="5818569">8</span><span class="op" id="5818570">)</span>&nbsp;<span class="op" id="5818572">{</span>&nbsp;<span class="comment" id="5818574">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818592">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818604">switch</span>&nbsp;<span class="builtintype" id="5818611">uint32</span><span class="op" id="5818617">(</span><span class="ident" id="5818618">go12magic</span><span class="op" id="5818627">)</span>&nbsp;<span class="op" id="5818629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818632">case</span>&nbsp;<span class="ident" id="5818637">binary</span><span class="op" id="5818643">.</span><span class="ident" id="5818644">LittleEndian</span><span class="op" id="5818656">.</span><span class="ident" id="5818657">Uint32</span><span class="op" id="5818663">(</span><span class="ident" id="5818664">t</span><span class="op" id="5818665">.</span><span class="ident" id="5818666">Data</span><span class="op" id="5818670">)</span><span class="op" id="5818671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818675">t</span><span class="op" id="5818676">.</span><span class="ident" id="5818677">binary</span>&nbsp;<span class="op" id="5818684">=</span>&nbsp;<span class="ident" id="5818686">binary</span><span class="op" id="5818692">.</span><span class="ident" id="5818693">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818707">case</span>&nbsp;<span class="ident" id="5818712">binary</span><span class="op" id="5818718">.</span><span class="ident" id="5818719">BigEndian</span><span class="op" id="5818728">.</span><span class="ident" id="5818729">Uint32</span><span class="op" id="5818735">(</span><span class="ident" id="5818736">t</span><span class="op" id="5818737">.</span><span class="ident" id="5818738">Data</span><span class="op" id="5818742">)</span><span class="op" id="5818743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818747">t</span><span class="op" id="5818748">.</span><span class="ident" id="5818749">binary</span>&nbsp;<span class="op" id="5818756">=</span>&nbsp;<span class="ident" id="5818758">binary</span><span class="op" id="5818764">.</span><span class="ident" id="5818765">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818776">default</span><span class="op" id="5818783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818787">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818799">t</span><span class="op" id="5818800">.</span><span class="ident" id="5818801">quantum</span>&nbsp;<span class="op" id="5818809">=</span>&nbsp;<span class="builtintype" id="5818811">uint32</span><span class="op" id="5818817">(</span><span class="ident" id="5818818">t</span><span class="op" id="5818819">.</span><span class="ident" id="5818820">Data</span><span class="op" id="5818824">[</span><span class="num" id="5818825">6</span><span class="op" id="5818826">]</span><span class="op" id="5818827">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818830">t</span><span class="op" id="5818831">.</span><span class="ident" id="5818832">ptrsize</span>&nbsp;<span class="op" id="5818840">=</span>&nbsp;<span class="builtintype" id="5818842">uint32</span><span class="op" id="5818848">(</span><span class="ident" id="5818849">t</span><span class="op" id="5818850">.</span><span class="ident" id="5818851">Data</span><span class="op" id="5818855">[</span><span class="num" id="5818856">7</span><span class="op" id="5818857">]</span><span class="op" id="5818858">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818862">t</span><span class="op" id="5818863">.</span><span class="ident" id="5818864">nfunctab</span>&nbsp;<span class="op" id="5818873">=</span>&nbsp;<span class="builtintype" id="5818875">uint32</span><span class="op" id="5818881">(</span><span class="ident" id="5818882">t</span><span class="op" id="5818883">.</span><span class="builtintype" id="5818884">uintptr</span><span class="op" id="5818891">(</span><span class="ident" id="5818892">t</span><span class="op" id="5818893">.</span><span class="ident" id="5818894">Data</span><span class="op" id="5818898">[</span><span class="num" id="5818899">8</span><span class="op" id="5818900">:</span><span class="op" id="5818901">]</span><span class="op" id="5818902">)</span><span class="op" id="5818903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818906">t</span><span class="op" id="5818907">.</span><span class="ident" id="5818908">functab</span>&nbsp;<span class="op" id="5818916">=</span>&nbsp;<span class="ident" id="5818918">t</span><span class="op" id="5818919">.</span><span class="ident" id="5818920">Data</span><span class="op" id="5818924">[</span><span class="num" id="5818925">8</span><span class="op" id="5818926">+</span><span class="ident" id="5818927">t</span><span class="op" id="5818928">.</span><span class="ident" id="5818929">ptrsize</span><span class="op" id="5818936">:</span><span class="op" id="5818937">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818940">functabsize</span>&nbsp;<span class="op" id="5818952">:=</span>&nbsp;<span class="ident" id="5818955">t</span><span class="op" id="5818956">.</span><span class="ident" id="5818957">nfunctab</span><span class="op" id="5818965">*</span><span class="num" id="5818966">2</span><span class="op" id="5818967">*</span><span class="ident" id="5818968">t</span><span class="op" id="5818969">.</span><span class="ident" id="5818970">ptrsize</span>&nbsp;<span class="op" id="5818978">+</span>&nbsp;<span class="ident" id="5818980">t</span><span class="op" id="5818981">.</span><span class="ident" id="5818982">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818991">fileoff</span>&nbsp;<span class="op" id="5818999">:=</span>&nbsp;<span class="ident" id="5819002">t</span><span class="op" id="5819003">.</span><span class="ident" id="5819004">binary</span><span class="op" id="5819010">.</span><span class="ident" id="5819011">Uint32</span><span class="op" id="5819017">(</span><span class="ident" id="5819018">t</span><span class="op" id="5819019">.</span><span class="ident" id="5819020">functab</span><span class="op" id="5819027">[</span><span class="ident" id="5819028">functabsize</span><span class="op" id="5819039">:</span><span class="op" id="5819040">]</span><span class="op" id="5819041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819044">t</span><span class="op" id="5819045">.</span><span class="ident" id="5819046">functab</span>&nbsp;<span class="op" id="5819054">=</span>&nbsp;<span class="ident" id="5819056">t</span><span class="op" id="5819057">.</span><span class="ident" id="5819058">functab</span><span class="op" id="5819065">[</span><span class="op" id="5819066">:</span><span class="ident" id="5819067">functabsize</span><span class="op" id="5819078">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819081">t</span><span class="op" id="5819082">.</span><span class="ident" id="5819083">filetab</span>&nbsp;<span class="op" id="5819091">=</span>&nbsp;<span class="ident" id="5819093">t</span><span class="op" id="5819094">.</span><span class="ident" id="5819095">Data</span><span class="op" id="5819099">[</span><span class="ident" id="5819100">fileoff</span><span class="op" id="5819107">:</span><span class="op" id="5819108">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819111">t</span><span class="op" id="5819112">.</span><span class="ident" id="5819113">nfiletab</span>&nbsp;<span class="op" id="5819122">=</span>&nbsp;<span class="ident" id="5819124">t</span><span class="op" id="5819125">.</span><span class="ident" id="5819126">binary</span><span class="op" id="5819132">.</span><span class="ident" id="5819133">Uint32</span><span class="op" id="5819139">(</span><span class="ident" id="5819140">t</span><span class="op" id="5819141">.</span><span class="ident" id="5819142">filetab</span><span class="op" id="5819149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819152">t</span><span class="op" id="5819153">.</span><span class="ident" id="5819154">filetab</span>&nbsp;<span class="op" id="5819162">=</span>&nbsp;<span class="ident" id="5819164">t</span><span class="op" id="5819165">.</span><span class="ident" id="5819166">filetab</span><span class="op" id="5819173">[</span><span class="op" id="5819174">:</span><span class="ident" id="5819175">t</span><span class="op" id="5819176">.</span><span class="ident" id="5819177">nfiletab</span><span class="op" id="5819185">*</span><span class="num" id="5819186">4</span><span class="op" id="5819187">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819191">t</span><span class="op" id="5819192">.</span><span class="ident" id="5819193">go12</span>&nbsp;<span class="op" id="5819198">=</span>&nbsp;<span class="num" id="5819200">1</span>&nbsp;<span class="comment" id="5819202">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5819220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5819223">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5819297">func</span>&nbsp;<span class="op" id="5819302">(</span><span class="ident" id="5819303">t</span>&nbsp;<span class="op" id="5819305">*</span><span class="ident" id="5819306">LineTable</span><span class="op" id="5819315">)</span>&nbsp;<span class="ident" id="5819317">go12Funcs</span><span class="op" id="5819326">(</span><span class="op" id="5819327">)</span>&nbsp;<span class="op" id="5819329">[</span><span class="op" id="5819330">]</span><span class="ident" id="5819331">Func</span>&nbsp;<span class="op" id="5819336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819339">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819391">defer</span>&nbsp;<span class="keyword" id="5819397">func</span><span class="op" id="5819401">(</span><span class="op" id="5819402">)</span>&nbsp;<span class="op" id="5819404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5819408">recover</span><span class="op" id="5819415">(</span><span class="op" id="5819416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819419">}</span><span class="op" id="5819420">(</span><span class="op" id="5819421">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819425">n</span>&nbsp;<span class="op" id="5819427">:=</span>&nbsp;<span class="builtinfunc" id="5819430">len</span><span class="op" id="5819433">(</span><span class="ident" id="5819434">t</span><span class="op" id="5819435">.</span><span class="ident" id="5819436">functab</span><span class="op" id="5819443">)</span>&nbsp;<span class="op" id="5819445">/</span>&nbsp;<span class="builtintype" id="5819447">int</span><span class="op" id="5819450">(</span><span class="ident" id="5819451">t</span><span class="op" id="5819452">.</span><span class="ident" id="5819453">ptrsize</span><span class="op" id="5819460">)</span>&nbsp;<span class="op" id="5819462">/</span>&nbsp;<span class="num" id="5819464">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819467">funcs</span>&nbsp;<span class="op" id="5819473">:=</span>&nbsp;<span class="builtinfunc" id="5819476">make</span><span class="op" id="5819480">(</span><span class="op" id="5819481">[</span><span class="op" id="5819482">]</span><span class="ident" id="5819483">Func</span><span class="op" id="5819487">,</span>&nbsp;<span class="ident" id="5819489">n</span><span class="op" id="5819490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819493">for</span>&nbsp;<span class="ident" id="5819497">i</span>&nbsp;<span class="op" id="5819499">:=</span>&nbsp;<span class="keyword" id="5819502">range</span>&nbsp;<span class="ident" id="5819508">funcs</span>&nbsp;<span class="op" id="5819514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819518">f</span>&nbsp;<span class="op" id="5819520">:=</span>&nbsp;<span class="op" id="5819523">&amp;</span><span class="ident" id="5819524">funcs</span><span class="op" id="5819529">[</span><span class="ident" id="5819530">i</span><span class="op" id="5819531">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819535">f</span><span class="op" id="5819536">.</span><span class="ident" id="5819537">Entry</span>&nbsp;<span class="op" id="5819543">=</span>&nbsp;<span class="ident" id="5819545">uint64</span><span class="op" id="5819551">(</span><span class="ident" id="5819552">t</span><span class="op" id="5819553">.</span><span class="builtintype" id="5819554">uintptr</span><span class="op" id="5819561">(</span><span class="ident" id="5819562">t</span><span class="op" id="5819563">.</span><span class="ident" id="5819564">functab</span><span class="op" id="5819571">[</span><span class="num" id="5819572">2</span><span class="op" id="5819573">*</span><span class="ident" id="5819574">i</span><span class="op" id="5819575">*</span><span class="builtintype" id="5819576">int</span><span class="op" id="5819579">(</span><span class="ident" id="5819580">t</span><span class="op" id="5819581">.</span><span class="ident" id="5819582">ptrsize</span><span class="op" id="5819589">)</span><span class="op" id="5819590">:</span><span class="op" id="5819591">]</span><span class="op" id="5819592">)</span><span class="op" id="5819593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819597">f</span><span class="op" id="5819598">.</span><span class="ident" id="5819599">End</span>&nbsp;<span class="op" id="5819603">=</span>&nbsp;<span class="ident" id="5819605">uint64</span><span class="op" id="5819611">(</span><span class="ident" id="5819612">t</span><span class="op" id="5819613">.</span><span class="builtintype" id="5819614">uintptr</span><span class="op" id="5819621">(</span><span class="ident" id="5819622">t</span><span class="op" id="5819623">.</span><span class="ident" id="5819624">functab</span><span class="op" id="5819631">[</span><span class="op" id="5819632">(</span><span class="num" id="5819633">2</span><span class="op" id="5819634">*</span><span class="ident" id="5819635">i</span><span class="op" id="5819636">+</span><span class="num" id="5819637">2</span><span class="op" id="5819638">)</span><span class="op" id="5819639">*</span><span class="builtintype" id="5819640">int</span><span class="op" id="5819643">(</span><span class="ident" id="5819644">t</span><span class="op" id="5819645">.</span><span class="ident" id="5819646">ptrsize</span><span class="op" id="5819653">)</span><span class="op" id="5819654">:</span><span class="op" id="5819655">]</span><span class="op" id="5819656">)</span><span class="op" id="5819657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819661">info</span>&nbsp;<span class="op" id="5819666">:=</span>&nbsp;<span class="ident" id="5819669">t</span><span class="op" id="5819670">.</span><span class="ident" id="5819671">Data</span><span class="op" id="5819675">[</span><span class="ident" id="5819676">t</span><span class="op" id="5819677">.</span><span class="builtintype" id="5819678">uintptr</span><span class="op" id="5819685">(</span><span class="ident" id="5819686">t</span><span class="op" id="5819687">.</span><span class="ident" id="5819688">functab</span><span class="op" id="5819695">[</span><span class="op" id="5819696">(</span><span class="num" id="5819697">2</span><span class="op" id="5819698">*</span><span class="ident" id="5819699">i</span><span class="op" id="5819700">+</span><span class="num" id="5819701">1</span><span class="op" id="5819702">)</span><span class="op" id="5819703">*</span><span class="builtintype" id="5819704">int</span><span class="op" id="5819707">(</span><span class="ident" id="5819708">t</span><span class="op" id="5819709">.</span><span class="ident" id="5819710">ptrsize</span><span class="op" id="5819717">)</span><span class="op" id="5819718">:</span><span class="op" id="5819719">]</span><span class="op" id="5819720">)</span><span class="op" id="5819721">:</span><span class="op" id="5819722">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819726">f</span><span class="op" id="5819727">.</span><span class="ident" id="5819728">LineTable</span>&nbsp;<span class="op" id="5819738">=</span>&nbsp;<span class="ident" id="5819740">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819744">f</span><span class="op" id="5819745">.</span><span class="ident" id="5819746">FrameSize</span>&nbsp;<span class="op" id="5819756">=</span>&nbsp;<span class="builtintype" id="5819758">int</span><span class="op" id="5819761">(</span><span class="ident" id="5819762">t</span><span class="op" id="5819763">.</span><span class="ident" id="5819764">binary</span><span class="op" id="5819770">.</span><span class="ident" id="5819771">Uint32</span><span class="op" id="5819777">(</span><span class="ident" id="5819778">info</span><span class="op" id="5819782">[</span><span class="ident" id="5819783">t</span><span class="op" id="5819784">.</span><span class="ident" id="5819785">ptrsize</span><span class="op" id="5819792">+</span><span class="num" id="5819793">2</span><span class="op" id="5819794">*</span><span class="num" id="5819795">4</span><span class="op" id="5819796">:</span><span class="op" id="5819797">]</span><span class="op" id="5819798">)</span><span class="op" id="5819799">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819803">f</span><span class="op" id="5819804">.</span><span class="ident" id="5819805">Sym</span>&nbsp;<span class="op" id="5819809">=</span>&nbsp;<span class="op" id="5819811">&amp;</span><span class="ident" id="5819812">Sym</span><span class="op" id="5819815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819820">Value</span><span class="op" id="5819825">:</span>&nbsp;&nbsp;<span class="ident" id="5819828">f</span><span class="op" id="5819829">.</span><span class="ident" id="5819830">Entry</span><span class="op" id="5819835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819840">Type</span><span class="op" id="5819844">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5819848">&#39;T&#39;</span><span class="op" id="5819851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819856">Name</span><span class="op" id="5819860">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5819864">t</span><span class="op" id="5819865">.</span><span class="builtintype" id="5819866">string</span><span class="op" id="5819872">(</span><span class="ident" id="5819873">t</span><span class="op" id="5819874">.</span><span class="ident" id="5819875">binary</span><span class="op" id="5819881">.</span><span class="ident" id="5819882">Uint32</span><span class="op" id="5819888">(</span><span class="ident" id="5819889">info</span><span class="op" id="5819893">[</span><span class="ident" id="5819894">t</span><span class="op" id="5819895">.</span><span class="ident" id="5819896">ptrsize</span><span class="op" id="5819903">:</span><span class="op" id="5819904">]</span><span class="op" id="5819905">)</span><span class="op" id="5819906">)</span><span class="op" id="5819907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819912">GoType</span><span class="op" id="5819918">:</span>&nbsp;<span class="num" id="5819920">0</span><span class="op" id="5819921">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819926">Func</span><span class="op" id="5819930">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5819934">f</span><span class="op" id="5819935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819945">return</span>&nbsp;<span class="ident" id="5819952">funcs</span><br>
<span class="lineno"></span><span class="op" id="5819958">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5819961">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5820034">func</span>&nbsp;<span class="op" id="5820039">(</span><span class="ident" id="5820040">t</span>&nbsp;<span class="op" id="5820042">*</span><span class="ident" id="5820043">LineTable</span><span class="op" id="5820052">)</span>&nbsp;<span class="ident" id="5820054">findFunc</span><span class="op" id="5820062">(</span><span class="ident" id="5820063">pc</span>&nbsp;<span class="ident" id="5820066">uint64</span><span class="op" id="5820072">)</span>&nbsp;<span class="op" id="5820074">[</span><span class="op" id="5820075">]</span><span class="builtintype" id="5820076">byte</span>&nbsp;<span class="op" id="5820081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820084">if</span>&nbsp;<span class="ident" id="5820087">pc</span>&nbsp;<span class="op" id="5820090">&lt;</span>&nbsp;<span class="ident" id="5820092">t</span><span class="op" id="5820093">.</span><span class="builtintype" id="5820094">uintptr</span><span class="op" id="5820101">(</span><span class="ident" id="5820102">t</span><span class="op" id="5820103">.</span><span class="ident" id="5820104">functab</span><span class="op" id="5820111">)</span>&nbsp;<span class="op" id="5820113">||</span>&nbsp;<span class="ident" id="5820116">pc</span>&nbsp;<span class="op" id="5820119">&gt;=</span>&nbsp;<span class="ident" id="5820122">t</span><span class="op" id="5820123">.</span><span class="builtintype" id="5820124">uintptr</span><span class="op" id="5820131">(</span><span class="ident" id="5820132">t</span><span class="op" id="5820133">.</span><span class="ident" id="5820134">functab</span><span class="op" id="5820141">[</span><span class="builtinfunc" id="5820142">len</span><span class="op" id="5820145">(</span><span class="ident" id="5820146">t</span><span class="op" id="5820147">.</span><span class="ident" id="5820148">functab</span><span class="op" id="5820155">)</span><span class="op" id="5820156">-</span><span class="builtintype" id="5820157">int</span><span class="op" id="5820160">(</span><span class="ident" id="5820161">t</span><span class="op" id="5820162">.</span><span class="ident" id="5820163">ptrsize</span><span class="op" id="5820170">)</span><span class="op" id="5820171">:</span><span class="op" id="5820172">]</span><span class="op" id="5820173">)</span>&nbsp;<span class="op" id="5820175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820179">return</span>&nbsp;<span class="ident" id="5820186">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5820195">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5820254">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820319">f</span>&nbsp;<span class="op" id="5820321">:=</span>&nbsp;<span class="ident" id="5820324">t</span><span class="op" id="5820325">.</span><span class="ident" id="5820326">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820335">nf</span>&nbsp;<span class="op" id="5820338">:=</span>&nbsp;<span class="ident" id="5820341">t</span><span class="op" id="5820342">.</span><span class="ident" id="5820343">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820353">for</span>&nbsp;<span class="ident" id="5820357">nf</span>&nbsp;<span class="op" id="5820360">&gt;</span>&nbsp;<span class="num" id="5820362">0</span>&nbsp;<span class="op" id="5820364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820368">m</span>&nbsp;<span class="op" id="5820370">:=</span>&nbsp;<span class="ident" id="5820373">nf</span>&nbsp;<span class="op" id="5820376">/</span>&nbsp;<span class="num" id="5820378">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820382">fm</span>&nbsp;<span class="op" id="5820385">:=</span>&nbsp;<span class="ident" id="5820388">f</span><span class="op" id="5820389">[</span><span class="num" id="5820390">2</span><span class="op" id="5820391">*</span><span class="ident" id="5820392">t</span><span class="op" id="5820393">.</span><span class="ident" id="5820394">ptrsize</span><span class="op" id="5820401">*</span><span class="ident" id="5820402">m</span><span class="op" id="5820403">:</span><span class="op" id="5820404">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820408">if</span>&nbsp;<span class="ident" id="5820411">t</span><span class="op" id="5820412">.</span><span class="builtintype" id="5820413">uintptr</span><span class="op" id="5820420">(</span><span class="ident" id="5820421">fm</span><span class="op" id="5820423">)</span>&nbsp;<span class="op" id="5820425">&lt;=</span>&nbsp;<span class="ident" id="5820428">pc</span>&nbsp;<span class="op" id="5820431">&amp;&amp;</span>&nbsp;<span class="ident" id="5820434">pc</span>&nbsp;<span class="op" id="5820437">&lt;</span>&nbsp;<span class="ident" id="5820439">t</span><span class="op" id="5820440">.</span><span class="builtintype" id="5820441">uintptr</span><span class="op" id="5820448">(</span><span class="ident" id="5820449">fm</span><span class="op" id="5820451">[</span><span class="num" id="5820452">2</span><span class="op" id="5820453">*</span><span class="ident" id="5820454">t</span><span class="op" id="5820455">.</span><span class="ident" id="5820456">ptrsize</span><span class="op" id="5820463">:</span><span class="op" id="5820464">]</span><span class="op" id="5820465">)</span>&nbsp;<span class="op" id="5820467">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820472">return</span>&nbsp;<span class="ident" id="5820479">t</span><span class="op" id="5820480">.</span><span class="ident" id="5820481">Data</span><span class="op" id="5820485">[</span><span class="ident" id="5820486">t</span><span class="op" id="5820487">.</span><span class="builtintype" id="5820488">uintptr</span><span class="op" id="5820495">(</span><span class="ident" id="5820496">fm</span><span class="op" id="5820498">[</span><span class="ident" id="5820499">t</span><span class="op" id="5820500">.</span><span class="ident" id="5820501">ptrsize</span><span class="op" id="5820508">:</span><span class="op" id="5820509">]</span><span class="op" id="5820510">)</span><span class="op" id="5820511">:</span><span class="op" id="5820512">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820516">}</span>&nbsp;<span class="keyword" id="5820518">else</span>&nbsp;<span class="keyword" id="5820523">if</span>&nbsp;<span class="ident" id="5820526">pc</span>&nbsp;<span class="op" id="5820529">&lt;</span>&nbsp;<span class="ident" id="5820531">t</span><span class="op" id="5820532">.</span><span class="builtintype" id="5820533">uintptr</span><span class="op" id="5820540">(</span><span class="ident" id="5820541">fm</span><span class="op" id="5820543">)</span>&nbsp;<span class="op" id="5820545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820550">nf</span>&nbsp;<span class="op" id="5820553">=</span>&nbsp;<span class="ident" id="5820555">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820559">}</span>&nbsp;<span class="keyword" id="5820561">else</span>&nbsp;<span class="op" id="5820566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820571">f</span>&nbsp;<span class="op" id="5820573">=</span>&nbsp;<span class="ident" id="5820575">f</span><span class="op" id="5820576">[</span><span class="op" id="5820577">(</span><span class="ident" id="5820578">m</span><span class="op" id="5820579">+</span><span class="num" id="5820580">1</span><span class="op" id="5820581">)</span><span class="op" id="5820582">*</span><span class="num" id="5820583">2</span><span class="op" id="5820584">*</span><span class="ident" id="5820585">t</span><span class="op" id="5820586">.</span><span class="ident" id="5820587">ptrsize</span><span class="op" id="5820594">:</span><span class="op" id="5820595">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820600">nf</span>&nbsp;<span class="op" id="5820603">-=</span>&nbsp;<span class="ident" id="5820606">m</span>&nbsp;<span class="op" id="5820608">+</span>&nbsp;<span class="num" id="5820610">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820620">return</span>&nbsp;<span class="ident" id="5820627">nil</span><br>
<span class="lineno"></span><span class="op" id="5820631">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5820634">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5820695">func</span>&nbsp;<span class="op" id="5820700">(</span><span class="ident" id="5820701">t</span>&nbsp;<span class="op" id="5820703">*</span><span class="ident" id="5820704">LineTable</span><span class="op" id="5820713">)</span>&nbsp;<span class="ident" id="5820715">readvarint</span><span class="op" id="5820725">(</span><span class="ident" id="5820726">pp</span>&nbsp;<span class="op" id="5820729">*</span><span class="op" id="5820730">[</span><span class="op" id="5820731">]</span><span class="builtintype" id="5820732">byte</span><span class="op" id="5820736">)</span>&nbsp;<span class="builtintype" id="5820738">uint32</span>&nbsp;<span class="op" id="5820745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820748">var</span>&nbsp;<span class="ident" id="5820752">v</span><span class="op" id="5820753">,</span>&nbsp;<span class="ident" id="5820755">shift</span>&nbsp;<span class="builtintype" id="5820761">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820769">p</span>&nbsp;<span class="op" id="5820771">:=</span>&nbsp;<span class="op" id="5820774">*</span><span class="ident" id="5820775">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820779">for</span>&nbsp;<span class="ident" id="5820783">shift</span>&nbsp;<span class="op" id="5820789">=</span>&nbsp;<span class="num" id="5820791">0</span><span class="op" id="5820792">;</span>&nbsp;<span class="op" id="5820794">;</span>&nbsp;<span class="ident" id="5820796">shift</span>&nbsp;<span class="op" id="5820802">+=</span>&nbsp;<span class="num" id="5820805">7</span>&nbsp;<span class="op" id="5820807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820811">b</span>&nbsp;<span class="op" id="5820813">:=</span>&nbsp;<span class="ident" id="5820816">p</span><span class="op" id="5820817">[</span><span class="num" id="5820818">0</span><span class="op" id="5820819">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820823">p</span>&nbsp;<span class="op" id="5820825">=</span>&nbsp;<span class="ident" id="5820827">p</span><span class="op" id="5820828">[</span><span class="num" id="5820829">1</span><span class="op" id="5820830">:</span><span class="op" id="5820831">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820835">v</span>&nbsp;<span class="op" id="5820837">|=</span>&nbsp;<span class="op" id="5820840">(</span><span class="builtintype" id="5820841">uint32</span><span class="op" id="5820847">(</span><span class="ident" id="5820848">b</span><span class="op" id="5820849">)</span>&nbsp;<span class="op" id="5820851">&amp;</span>&nbsp;<span class="num" id="5820853">0x7F</span><span class="op" id="5820857">)</span>&nbsp;<span class="op" id="5820859">&lt;&lt;</span>&nbsp;<span class="ident" id="5820862">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820870">if</span>&nbsp;<span class="ident" id="5820873">b</span><span class="op" id="5820874">&amp;</span><span class="num" id="5820875">0x80</span>&nbsp;<span class="op" id="5820880">==</span>&nbsp;<span class="num" id="5820883">0</span>&nbsp;<span class="op" id="5820885">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820890">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820904">*</span><span class="ident" id="5820905">pp</span>&nbsp;<span class="op" id="5820908">=</span>&nbsp;<span class="ident" id="5820910">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820913">return</span>&nbsp;<span class="ident" id="5820920">v</span><br>
<span class="lineno">265</span><span class="op" id="5820922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5820925">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5820969">func</span>&nbsp;<span class="op" id="5820974">(</span><span class="ident" id="5820975">t</span>&nbsp;<span class="op" id="5820977">*</span><span class="ident" id="5820978">LineTable</span><span class="op" id="5820987">)</span>&nbsp;<span class="builtintype" id="5820989">string</span><span class="op" id="5820995">(</span><span class="ident" id="5820996">off</span>&nbsp;<span class="builtintype" id="5821000">uint32</span><span class="op" id="5821006">)</span>&nbsp;<span class="builtintype" id="5821008">string</span>&nbsp;<span class="op" id="5821015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821018">for</span>&nbsp;<span class="ident" id="5821022">i</span>&nbsp;<span class="op" id="5821024">:=</span>&nbsp;<span class="ident" id="5821027">off</span><span class="op" id="5821030">;</span>&nbsp;<span class="op" id="5821032">;</span>&nbsp;<span class="ident" id="5821034">i</span><span class="op" id="5821035">++</span>&nbsp;<span class="op" id="5821038">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821042">if</span>&nbsp;<span class="ident" id="5821045">t</span><span class="op" id="5821046">.</span><span class="ident" id="5821047">Data</span><span class="op" id="5821051">[</span><span class="ident" id="5821052">i</span><span class="op" id="5821053">]</span>&nbsp;<span class="op" id="5821055">==</span>&nbsp;<span class="num" id="5821058">0</span>&nbsp;<span class="op" id="5821060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821065">return</span>&nbsp;<span class="builtintype" id="5821072">string</span><span class="op" id="5821078">(</span><span class="ident" id="5821079">t</span><span class="op" id="5821080">.</span><span class="ident" id="5821081">Data</span><span class="op" id="5821085">[</span><span class="ident" id="5821086">off</span><span class="op" id="5821089">:</span><span class="ident" id="5821090">i</span><span class="op" id="5821091">]</span><span class="op" id="5821092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821099">}</span><br>
<span class="lineno"></span><span class="op" id="5821101">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5821104">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5821170">func</span>&nbsp;<span class="op" id="5821175">(</span><span class="ident" id="5821176">t</span>&nbsp;<span class="op" id="5821178">*</span><span class="ident" id="5821179">LineTable</span><span class="op" id="5821188">)</span>&nbsp;<span class="ident" id="5821190">step</span><span class="op" id="5821194">(</span><span class="ident" id="5821195">p</span>&nbsp;<span class="op" id="5821197">*</span><span class="op" id="5821198">[</span><span class="op" id="5821199">]</span><span class="builtintype" id="5821200">byte</span><span class="op" id="5821204">,</span>&nbsp;<span class="ident" id="5821206">pc</span>&nbsp;<span class="op" id="5821209">*</span><span class="ident" id="5821210">uint64</span><span class="op" id="5821216">,</span>&nbsp;<span class="ident" id="5821218">val</span>&nbsp;<span class="op" id="5821222">*</span><span class="builtintype" id="5821223">int32</span><span class="op" id="5821228">,</span>&nbsp;<span class="ident" id="5821230">first</span>&nbsp;<span class="builtintype" id="5821236">bool</span><span class="op" id="5821240">)</span>&nbsp;<span class="builtintype" id="5821242">bool</span>&nbsp;<span class="op" id="5821247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821250">uvdelta</span>&nbsp;<span class="op" id="5821258">:=</span>&nbsp;<span class="ident" id="5821261">t</span><span class="op" id="5821262">.</span><span class="ident" id="5821263">readvarint</span><span class="op" id="5821273">(</span><span class="ident" id="5821274">p</span><span class="op" id="5821275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821278">if</span>&nbsp;<span class="ident" id="5821281">uvdelta</span>&nbsp;<span class="op" id="5821289">==</span>&nbsp;<span class="num" id="5821292">0</span>&nbsp;<span class="op" id="5821294">&amp;&amp;</span>&nbsp;<span class="op" id="5821297">!</span><span class="ident" id="5821298">first</span>&nbsp;<span class="op" id="5821304">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821308">return</span>&nbsp;<span class="builtintype" id="5821315">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821325">if</span>&nbsp;<span class="ident" id="5821328">uvdelta</span><span class="op" id="5821335">&amp;</span><span class="num" id="5821336">1</span>&nbsp;<span class="op" id="5821338">!=</span>&nbsp;<span class="num" id="5821341">0</span>&nbsp;<span class="op" id="5821343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821347">uvdelta</span>&nbsp;<span class="op" id="5821355">=</span>&nbsp;<span class="op" id="5821357">^</span><span class="op" id="5821358">(</span><span class="ident" id="5821359">uvdelta</span>&nbsp;<span class="op" id="5821367">&gt;&gt;</span>&nbsp;<span class="num" id="5821370">1</span><span class="op" id="5821371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821374">}</span>&nbsp;<span class="keyword" id="5821376">else</span>&nbsp;<span class="op" id="5821381">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821385">uvdelta</span>&nbsp;<span class="op" id="5821393">&gt;&gt;=</span>&nbsp;<span class="num" id="5821397">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821403">vdelta</span>&nbsp;<span class="op" id="5821410">:=</span>&nbsp;<span class="builtintype" id="5821413">int32</span><span class="op" id="5821418">(</span><span class="ident" id="5821419">uvdelta</span><span class="op" id="5821426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821429">pcdelta</span>&nbsp;<span class="op" id="5821437">:=</span>&nbsp;<span class="ident" id="5821440">t</span><span class="op" id="5821441">.</span><span class="ident" id="5821442">readvarint</span><span class="op" id="5821452">(</span><span class="ident" id="5821453">p</span><span class="op" id="5821454">)</span>&nbsp;<span class="op" id="5821456">*</span>&nbsp;<span class="ident" id="5821458">t</span><span class="op" id="5821459">.</span><span class="ident" id="5821460">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821469">*</span><span class="ident" id="5821470">pc</span>&nbsp;<span class="op" id="5821473">+=</span>&nbsp;<span class="ident" id="5821476">uint64</span><span class="op" id="5821482">(</span><span class="ident" id="5821483">pcdelta</span><span class="op" id="5821490">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821493">*</span><span class="ident" id="5821494">val</span>&nbsp;<span class="op" id="5821498">+=</span>&nbsp;<span class="ident" id="5821501">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821509">return</span>&nbsp;<span class="builtintype" id="5821516">true</span><br>
<span class="lineno"></span><span class="op" id="5821521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5821524">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5821584">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5821645">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5821706">func</span>&nbsp;<span class="op" id="5821711">(</span><span class="ident" id="5821712">t</span>&nbsp;<span class="op" id="5821714">*</span><span class="ident" id="5821715">LineTable</span><span class="op" id="5821724">)</span>&nbsp;<span class="ident" id="5821726">pcvalue</span><span class="op" id="5821733">(</span><span class="ident" id="5821734">off</span>&nbsp;<span class="builtintype" id="5821738">uint32</span><span class="op" id="5821744">,</span>&nbsp;<span class="ident" id="5821746">entry</span><span class="op" id="5821751">,</span>&nbsp;<span class="ident" id="5821753">targetpc</span>&nbsp;<span class="ident" id="5821762">uint64</span><span class="op" id="5821768">)</span>&nbsp;<span class="builtintype" id="5821770">int32</span>&nbsp;<span class="op" id="5821776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821779">if</span>&nbsp;<span class="ident" id="5821782">off</span>&nbsp;<span class="op" id="5821786">==</span>&nbsp;<span class="num" id="5821789">0</span>&nbsp;<span class="op" id="5821791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821795">return</span>&nbsp;<span class="op" id="5821802">-</span><span class="num" id="5821803">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821809">p</span>&nbsp;<span class="op" id="5821811">:=</span>&nbsp;<span class="ident" id="5821814">t</span><span class="op" id="5821815">.</span><span class="ident" id="5821816">Data</span><span class="op" id="5821820">[</span><span class="ident" id="5821821">off</span><span class="op" id="5821824">:</span><span class="op" id="5821825">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821829">val</span>&nbsp;<span class="op" id="5821833">:=</span>&nbsp;<span class="builtintype" id="5821836">int32</span><span class="op" id="5821841">(</span><span class="op" id="5821842">-</span><span class="num" id="5821843">1</span><span class="op" id="5821844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821847">pc</span>&nbsp;<span class="op" id="5821850">:=</span>&nbsp;<span class="ident" id="5821853">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821860">for</span>&nbsp;<span class="ident" id="5821864">t</span><span class="op" id="5821865">.</span><span class="ident" id="5821866">step</span><span class="op" id="5821870">(</span><span class="op" id="5821871">&amp;</span><span class="ident" id="5821872">p</span><span class="op" id="5821873">,</span>&nbsp;<span class="op" id="5821875">&amp;</span><span class="ident" id="5821876">pc</span><span class="op" id="5821878">,</span>&nbsp;<span class="op" id="5821880">&amp;</span><span class="ident" id="5821881">val</span><span class="op" id="5821884">,</span>&nbsp;<span class="ident" id="5821886">pc</span>&nbsp;<span class="op" id="5821889">==</span>&nbsp;<span class="ident" id="5821892">entry</span><span class="op" id="5821897">)</span>&nbsp;<span class="op" id="5821899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821903">if</span>&nbsp;<span class="ident" id="5821906">targetpc</span>&nbsp;<span class="op" id="5821915">&lt;</span>&nbsp;<span class="ident" id="5821917">pc</span>&nbsp;<span class="op" id="5821920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821925">return</span>&nbsp;<span class="ident" id="5821932">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821941">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821944">return</span>&nbsp;<span class="op" id="5821951">-</span><span class="num" id="5821952">1</span><br>
<span class="lineno"></span><span class="op" id="5821954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5821957">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5822020">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5822076">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5822145">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5822216">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5822291">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5822368">func</span>&nbsp;<span class="op" id="5822373">(</span><span class="ident" id="5822374">t</span>&nbsp;<span class="op" id="5822376">*</span><span class="ident" id="5822377">LineTable</span><span class="op" id="5822386">)</span>&nbsp;<span class="ident" id="5822388">findFileLine</span><span class="op" id="5822400">(</span><span class="ident" id="5822401">entry</span>&nbsp;<span class="ident" id="5822407">uint64</span><span class="op" id="5822413">,</span>&nbsp;<span class="ident" id="5822415">filetab</span><span class="op" id="5822422">,</span>&nbsp;<span class="ident" id="5822424">linetab</span>&nbsp;<span class="builtintype" id="5822432">uint32</span><span class="op" id="5822438">,</span>&nbsp;<span class="ident" id="5822440">filenum</span><span class="op" id="5822447">,</span>&nbsp;<span class="ident" id="5822449">line</span>&nbsp;<span class="builtintype" id="5822454">int32</span><span class="op" id="5822459">)</span>&nbsp;<span class="ident" id="5822461">uint64</span>&nbsp;<span class="op" id="5822468">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822471">if</span>&nbsp;<span class="ident" id="5822474">filetab</span>&nbsp;<span class="op" id="5822482">==</span>&nbsp;<span class="num" id="5822485">0</span>&nbsp;<span class="op" id="5822487">||</span>&nbsp;<span class="ident" id="5822490">linetab</span>&nbsp;<span class="op" id="5822498">==</span>&nbsp;<span class="num" id="5822501">0</span>&nbsp;<span class="op" id="5822503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822507">return</span>&nbsp;<span class="num" id="5822514">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822521">fp</span>&nbsp;<span class="op" id="5822524">:=</span>&nbsp;<span class="ident" id="5822527">t</span><span class="op" id="5822528">.</span><span class="ident" id="5822529">Data</span><span class="op" id="5822533">[</span><span class="ident" id="5822534">filetab</span><span class="op" id="5822541">:</span><span class="op" id="5822542">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822545">fl</span>&nbsp;<span class="op" id="5822548">:=</span>&nbsp;<span class="ident" id="5822551">t</span><span class="op" id="5822552">.</span><span class="ident" id="5822553">Data</span><span class="op" id="5822557">[</span><span class="ident" id="5822558">linetab</span><span class="op" id="5822565">:</span><span class="op" id="5822566">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822569">fileVal</span>&nbsp;<span class="op" id="5822577">:=</span>&nbsp;<span class="builtintype" id="5822580">int32</span><span class="op" id="5822585">(</span><span class="op" id="5822586">-</span><span class="num" id="5822587">1</span><span class="op" id="5822588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822591">filePC</span>&nbsp;<span class="op" id="5822598">:=</span>&nbsp;<span class="ident" id="5822601">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822608">lineVal</span>&nbsp;<span class="op" id="5822616">:=</span>&nbsp;<span class="builtintype" id="5822619">int32</span><span class="op" id="5822624">(</span><span class="op" id="5822625">-</span><span class="num" id="5822626">1</span><span class="op" id="5822627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822630">linePC</span>&nbsp;<span class="op" id="5822637">:=</span>&nbsp;<span class="ident" id="5822640">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822647">fileStartPC</span>&nbsp;<span class="op" id="5822659">:=</span>&nbsp;<span class="ident" id="5822662">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822670">for</span>&nbsp;<span class="ident" id="5822674">t</span><span class="op" id="5822675">.</span><span class="ident" id="5822676">step</span><span class="op" id="5822680">(</span><span class="op" id="5822681">&amp;</span><span class="ident" id="5822682">fp</span><span class="op" id="5822684">,</span>&nbsp;<span class="op" id="5822686">&amp;</span><span class="ident" id="5822687">filePC</span><span class="op" id="5822693">,</span>&nbsp;<span class="op" id="5822695">&amp;</span><span class="ident" id="5822696">fileVal</span><span class="op" id="5822703">,</span>&nbsp;<span class="ident" id="5822705">filePC</span>&nbsp;<span class="op" id="5822712">==</span>&nbsp;<span class="ident" id="5822715">entry</span><span class="op" id="5822720">)</span>&nbsp;<span class="op" id="5822722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822726">if</span>&nbsp;<span class="ident" id="5822729">fileVal</span>&nbsp;<span class="op" id="5822737">==</span>&nbsp;<span class="ident" id="5822740">filenum</span>&nbsp;<span class="op" id="5822748">&amp;&amp;</span>&nbsp;<span class="ident" id="5822751">fileStartPC</span>&nbsp;<span class="op" id="5822763">&lt;</span>&nbsp;<span class="ident" id="5822765">filePC</span>&nbsp;<span class="op" id="5822772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822777">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822834">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822893">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822951">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822983">lineStartPC</span>&nbsp;<span class="op" id="5822995">:=</span>&nbsp;<span class="ident" id="5822998">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823008">for</span>&nbsp;<span class="ident" id="5823012">linePC</span>&nbsp;<span class="op" id="5823019">&lt;</span>&nbsp;<span class="ident" id="5823021">filePC</span>&nbsp;<span class="op" id="5823028">&amp;&amp;</span>&nbsp;<span class="ident" id="5823031">t</span><span class="op" id="5823032">.</span><span class="ident" id="5823033">step</span><span class="op" id="5823037">(</span><span class="op" id="5823038">&amp;</span><span class="ident" id="5823039">fl</span><span class="op" id="5823041">,</span>&nbsp;<span class="op" id="5823043">&amp;</span><span class="ident" id="5823044">linePC</span><span class="op" id="5823050">,</span>&nbsp;<span class="op" id="5823052">&amp;</span><span class="ident" id="5823053">lineVal</span><span class="op" id="5823060">,</span>&nbsp;<span class="ident" id="5823062">linePC</span>&nbsp;<span class="op" id="5823069">==</span>&nbsp;<span class="ident" id="5823072">entry</span><span class="op" id="5823077">)</span>&nbsp;<span class="op" id="5823079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823085">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823153">if</span>&nbsp;<span class="ident" id="5823156">lineVal</span>&nbsp;<span class="op" id="5823164">==</span>&nbsp;<span class="ident" id="5823167">line</span>&nbsp;<span class="op" id="5823172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823179">if</span>&nbsp;<span class="ident" id="5823182">fileStartPC</span>&nbsp;<span class="op" id="5823194">&lt;=</span>&nbsp;<span class="ident" id="5823197">lineStartPC</span>&nbsp;<span class="op" id="5823209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823217">return</span>&nbsp;<span class="ident" id="5823224">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823248">if</span>&nbsp;<span class="ident" id="5823251">fileStartPC</span>&nbsp;<span class="op" id="5823263">&lt;</span>&nbsp;<span class="ident" id="5823265">linePC</span>&nbsp;<span class="op" id="5823272">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823280">return</span>&nbsp;<span class="ident" id="5823287">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823316">lineStartPC</span>&nbsp;<span class="op" id="5823328">=</span>&nbsp;<span class="ident" id="5823330">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823340">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823348">fileStartPC</span>&nbsp;<span class="op" id="5823360">=</span>&nbsp;<span class="ident" id="5823362">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823373">return</span>&nbsp;<span class="num" id="5823380">0</span><br>
<span class="lineno"></span><span class="op" id="5823382">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5823385">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5823464">func</span>&nbsp;<span class="op" id="5823469">(</span><span class="ident" id="5823470">t</span>&nbsp;<span class="op" id="5823472">*</span><span class="ident" id="5823473">LineTable</span><span class="op" id="5823482">)</span>&nbsp;<span class="ident" id="5823484">go12PCToLine</span><span class="op" id="5823496">(</span><span class="ident" id="5823497">pc</span>&nbsp;<span class="ident" id="5823500">uint64</span><span class="op" id="5823506">)</span>&nbsp;<span class="op" id="5823508">(</span><span class="ident" id="5823509">line</span>&nbsp;<span class="builtintype" id="5823514">int</span><span class="op" id="5823517">)</span>&nbsp;<span class="op" id="5823519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823522">defer</span>&nbsp;<span class="keyword" id="5823528">func</span><span class="op" id="5823532">(</span><span class="op" id="5823533">)</span>&nbsp;<span class="op" id="5823535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823539">if</span>&nbsp;<span class="builtinfunc" id="5823542">recover</span><span class="op" id="5823549">(</span><span class="op" id="5823550">)</span>&nbsp;<span class="op" id="5823552">!=</span>&nbsp;<span class="ident" id="5823555">nil</span>&nbsp;<span class="op" id="5823559">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823564">line</span>&nbsp;<span class="op" id="5823569">=</span>&nbsp;<span class="op" id="5823571">-</span><span class="num" id="5823572">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823579">}</span><span class="op" id="5823580">(</span><span class="op" id="5823581">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823585">f</span>&nbsp;<span class="op" id="5823587">:=</span>&nbsp;<span class="ident" id="5823590">t</span><span class="op" id="5823591">.</span><span class="ident" id="5823592">findFunc</span><span class="op" id="5823600">(</span><span class="ident" id="5823601">pc</span><span class="op" id="5823603">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823606">if</span>&nbsp;<span class="ident" id="5823609">f</span>&nbsp;<span class="op" id="5823611">==</span>&nbsp;<span class="ident" id="5823614">nil</span>&nbsp;<span class="op" id="5823618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823622">return</span>&nbsp;<span class="op" id="5823629">-</span><span class="num" id="5823630">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823636">entry</span>&nbsp;<span class="op" id="5823642">:=</span>&nbsp;<span class="ident" id="5823645">t</span><span class="op" id="5823646">.</span><span class="builtintype" id="5823647">uintptr</span><span class="op" id="5823654">(</span><span class="ident" id="5823655">f</span><span class="op" id="5823656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823659">linetab</span>&nbsp;<span class="op" id="5823667">:=</span>&nbsp;<span class="ident" id="5823670">t</span><span class="op" id="5823671">.</span><span class="ident" id="5823672">binary</span><span class="op" id="5823678">.</span><span class="ident" id="5823679">Uint32</span><span class="op" id="5823685">(</span><span class="ident" id="5823686">f</span><span class="op" id="5823687">[</span><span class="ident" id="5823688">t</span><span class="op" id="5823689">.</span><span class="ident" id="5823690">ptrsize</span><span class="op" id="5823697">+</span><span class="num" id="5823698">5</span><span class="op" id="5823699">*</span><span class="num" id="5823700">4</span><span class="op" id="5823701">:</span><span class="op" id="5823702">]</span><span class="op" id="5823703">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823706">return</span>&nbsp;<span class="builtintype" id="5823713">int</span><span class="op" id="5823716">(</span><span class="ident" id="5823717">t</span><span class="op" id="5823718">.</span><span class="ident" id="5823719">pcvalue</span><span class="op" id="5823726">(</span><span class="ident" id="5823727">linetab</span><span class="op" id="5823734">,</span>&nbsp;<span class="ident" id="5823736">entry</span><span class="op" id="5823741">,</span>&nbsp;<span class="ident" id="5823743">pc</span><span class="op" id="5823745">)</span><span class="op" id="5823746">)</span><br>
<span class="lineno"></span><span class="op" id="5823748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5823751">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5823828">func</span>&nbsp;<span class="op" id="5823833">(</span><span class="ident" id="5823834">t</span>&nbsp;<span class="op" id="5823836">*</span><span class="ident" id="5823837">LineTable</span><span class="op" id="5823846">)</span>&nbsp;<span class="ident" id="5823848">go12PCToFile</span><span class="op" id="5823860">(</span><span class="ident" id="5823861">pc</span>&nbsp;<span class="ident" id="5823864">uint64</span><span class="op" id="5823870">)</span>&nbsp;<span class="op" id="5823872">(</span><span class="ident" id="5823873">file</span>&nbsp;<span class="builtintype" id="5823878">string</span><span class="op" id="5823884">)</span>&nbsp;<span class="op" id="5823886">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823889">defer</span>&nbsp;<span class="keyword" id="5823895">func</span><span class="op" id="5823899">(</span><span class="op" id="5823900">)</span>&nbsp;<span class="op" id="5823902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823906">if</span>&nbsp;<span class="builtinfunc" id="5823909">recover</span><span class="op" id="5823916">(</span><span class="op" id="5823917">)</span>&nbsp;<span class="op" id="5823919">!=</span>&nbsp;<span class="ident" id="5823922">nil</span>&nbsp;<span class="op" id="5823926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823931">file</span>&nbsp;<span class="op" id="5823936">=</span>&nbsp;<span class="string" id="5823938">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823946">}</span><span class="op" id="5823947">(</span><span class="op" id="5823948">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823952">f</span>&nbsp;<span class="op" id="5823954">:=</span>&nbsp;<span class="ident" id="5823957">t</span><span class="op" id="5823958">.</span><span class="ident" id="5823959">findFunc</span><span class="op" id="5823967">(</span><span class="ident" id="5823968">pc</span><span class="op" id="5823970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823973">if</span>&nbsp;<span class="ident" id="5823976">f</span>&nbsp;<span class="op" id="5823978">==</span>&nbsp;<span class="ident" id="5823981">nil</span>&nbsp;<span class="op" id="5823985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823989">return</span>&nbsp;<span class="string" id="5823996">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824000">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824003">entry</span>&nbsp;<span class="op" id="5824009">:=</span>&nbsp;<span class="ident" id="5824012">t</span><span class="op" id="5824013">.</span><span class="builtintype" id="5824014">uintptr</span><span class="op" id="5824021">(</span><span class="ident" id="5824022">f</span><span class="op" id="5824023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824026">filetab</span>&nbsp;<span class="op" id="5824034">:=</span>&nbsp;<span class="ident" id="5824037">t</span><span class="op" id="5824038">.</span><span class="ident" id="5824039">binary</span><span class="op" id="5824045">.</span><span class="ident" id="5824046">Uint32</span><span class="op" id="5824052">(</span><span class="ident" id="5824053">f</span><span class="op" id="5824054">[</span><span class="ident" id="5824055">t</span><span class="op" id="5824056">.</span><span class="ident" id="5824057">ptrsize</span><span class="op" id="5824064">+</span><span class="num" id="5824065">4</span><span class="op" id="5824066">*</span><span class="num" id="5824067">4</span><span class="op" id="5824068">:</span><span class="op" id="5824069">]</span><span class="op" id="5824070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824073">fno</span>&nbsp;<span class="op" id="5824077">:=</span>&nbsp;<span class="ident" id="5824080">t</span><span class="op" id="5824081">.</span><span class="ident" id="5824082">pcvalue</span><span class="op" id="5824089">(</span><span class="ident" id="5824090">filetab</span><span class="op" id="5824097">,</span>&nbsp;<span class="ident" id="5824099">entry</span><span class="op" id="5824104">,</span>&nbsp;<span class="ident" id="5824106">pc</span><span class="op" id="5824108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824111">if</span>&nbsp;<span class="ident" id="5824114">fno</span>&nbsp;<span class="op" id="5824118">&lt;=</span>&nbsp;<span class="num" id="5824121">0</span>&nbsp;<span class="op" id="5824123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824127">return</span>&nbsp;<span class="string" id="5824134">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824141">return</span>&nbsp;<span class="ident" id="5824148">t</span><span class="op" id="5824149">.</span><span class="builtintype" id="5824150">string</span><span class="op" id="5824156">(</span><span class="ident" id="5824157">t</span><span class="op" id="5824158">.</span><span class="ident" id="5824159">binary</span><span class="op" id="5824165">.</span><span class="ident" id="5824166">Uint32</span><span class="op" id="5824172">(</span><span class="ident" id="5824173">t</span><span class="op" id="5824174">.</span><span class="ident" id="5824175">filetab</span><span class="op" id="5824182">[</span><span class="num" id="5824183">4</span><span class="op" id="5824184">*</span><span class="ident" id="5824185">fno</span><span class="op" id="5824188">:</span><span class="op" id="5824189">]</span><span class="op" id="5824190">)</span><span class="op" id="5824191">)</span><br>
<span class="lineno"></span><span class="op" id="5824193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5824196">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5824285">func</span>&nbsp;<span class="op" id="5824290">(</span><span class="ident" id="5824291">t</span>&nbsp;<span class="op" id="5824293">*</span><span class="ident" id="5824294">LineTable</span><span class="op" id="5824303">)</span>&nbsp;<span class="ident" id="5824305">go12LineToPC</span><span class="op" id="5824317">(</span><span class="ident" id="5824318">file</span>&nbsp;<span class="builtintype" id="5824323">string</span><span class="op" id="5824329">,</span>&nbsp;<span class="ident" id="5824331">line</span>&nbsp;<span class="builtintype" id="5824336">int</span><span class="op" id="5824339">)</span>&nbsp;<span class="op" id="5824341">(</span><span class="ident" id="5824342">pc</span>&nbsp;<span class="ident" id="5824345">uint64</span><span class="op" id="5824351">)</span>&nbsp;<span class="op" id="5824353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824356">defer</span>&nbsp;<span class="keyword" id="5824362">func</span><span class="op" id="5824366">(</span><span class="op" id="5824367">)</span>&nbsp;<span class="op" id="5824369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824373">if</span>&nbsp;<span class="builtinfunc" id="5824376">recover</span><span class="op" id="5824383">(</span><span class="op" id="5824384">)</span>&nbsp;<span class="op" id="5824386">!=</span>&nbsp;<span class="ident" id="5824389">nil</span>&nbsp;<span class="op" id="5824393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824398">pc</span>&nbsp;<span class="op" id="5824401">=</span>&nbsp;<span class="num" id="5824403">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824407">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824410">}</span><span class="op" id="5824411">(</span><span class="op" id="5824412">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824416">t</span><span class="op" id="5824417">.</span><span class="ident" id="5824418">initFileMap</span><span class="op" id="5824429">(</span><span class="op" id="5824430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824433">filenum</span>&nbsp;<span class="op" id="5824441">:=</span>&nbsp;<span class="ident" id="5824444">t</span><span class="op" id="5824445">.</span><span class="ident" id="5824446">fileMap</span><span class="op" id="5824453">[</span><span class="ident" id="5824454">file</span><span class="op" id="5824458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824461">if</span>&nbsp;<span class="ident" id="5824464">filenum</span>&nbsp;<span class="op" id="5824472">==</span>&nbsp;<span class="num" id="5824475">0</span>&nbsp;<span class="op" id="5824477">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824481">return</span>&nbsp;<span class="num" id="5824488">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5824495">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5824519">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5824596">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824669">for</span>&nbsp;<span class="ident" id="5824673">i</span>&nbsp;<span class="op" id="5824675">:=</span>&nbsp;<span class="builtintype" id="5824678">uint32</span><span class="op" id="5824684">(</span><span class="num" id="5824685">0</span><span class="op" id="5824686">)</span><span class="op" id="5824687">;</span>&nbsp;<span class="ident" id="5824689">i</span>&nbsp;<span class="op" id="5824691">&lt;</span>&nbsp;<span class="ident" id="5824693">t</span><span class="op" id="5824694">.</span><span class="ident" id="5824695">nfunctab</span><span class="op" id="5824703">;</span>&nbsp;<span class="ident" id="5824705">i</span><span class="op" id="5824706">++</span>&nbsp;<span class="op" id="5824709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824713">f</span>&nbsp;<span class="op" id="5824715">:=</span>&nbsp;<span class="ident" id="5824718">t</span><span class="op" id="5824719">.</span><span class="ident" id="5824720">Data</span><span class="op" id="5824724">[</span><span class="ident" id="5824725">t</span><span class="op" id="5824726">.</span><span class="builtintype" id="5824727">uintptr</span><span class="op" id="5824734">(</span><span class="ident" id="5824735">t</span><span class="op" id="5824736">.</span><span class="ident" id="5824737">functab</span><span class="op" id="5824744">[</span><span class="num" id="5824745">2</span><span class="op" id="5824746">*</span><span class="ident" id="5824747">t</span><span class="op" id="5824748">.</span><span class="ident" id="5824749">ptrsize</span><span class="op" id="5824756">*</span><span class="ident" id="5824757">i</span><span class="op" id="5824758">+</span><span class="ident" id="5824759">t</span><span class="op" id="5824760">.</span><span class="ident" id="5824761">ptrsize</span><span class="op" id="5824768">:</span><span class="op" id="5824769">]</span><span class="op" id="5824770">)</span><span class="op" id="5824771">:</span><span class="op" id="5824772">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824776">entry</span>&nbsp;<span class="op" id="5824782">:=</span>&nbsp;<span class="ident" id="5824785">t</span><span class="op" id="5824786">.</span><span class="builtintype" id="5824787">uintptr</span><span class="op" id="5824794">(</span><span class="ident" id="5824795">f</span><span class="op" id="5824796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824800">filetab</span>&nbsp;<span class="op" id="5824808">:=</span>&nbsp;<span class="ident" id="5824811">t</span><span class="op" id="5824812">.</span><span class="ident" id="5824813">binary</span><span class="op" id="5824819">.</span><span class="ident" id="5824820">Uint32</span><span class="op" id="5824826">(</span><span class="ident" id="5824827">f</span><span class="op" id="5824828">[</span><span class="ident" id="5824829">t</span><span class="op" id="5824830">.</span><span class="ident" id="5824831">ptrsize</span><span class="op" id="5824838">+</span><span class="num" id="5824839">4</span><span class="op" id="5824840">*</span><span class="num" id="5824841">4</span><span class="op" id="5824842">:</span><span class="op" id="5824843">]</span><span class="op" id="5824844">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824848">linetab</span>&nbsp;<span class="op" id="5824856">:=</span>&nbsp;<span class="ident" id="5824859">t</span><span class="op" id="5824860">.</span><span class="ident" id="5824861">binary</span><span class="op" id="5824867">.</span><span class="ident" id="5824868">Uint32</span><span class="op" id="5824874">(</span><span class="ident" id="5824875">f</span><span class="op" id="5824876">[</span><span class="ident" id="5824877">t</span><span class="op" id="5824878">.</span><span class="ident" id="5824879">ptrsize</span><span class="op" id="5824886">+</span><span class="num" id="5824887">5</span><span class="op" id="5824888">*</span><span class="num" id="5824889">4</span><span class="op" id="5824890">:</span><span class="op" id="5824891">]</span><span class="op" id="5824892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824896">pc</span>&nbsp;<span class="op" id="5824899">:=</span>&nbsp;<span class="ident" id="5824902">t</span><span class="op" id="5824903">.</span><span class="ident" id="5824904">findFileLine</span><span class="op" id="5824916">(</span><span class="ident" id="5824917">entry</span><span class="op" id="5824922">,</span>&nbsp;<span class="ident" id="5824924">filetab</span><span class="op" id="5824931">,</span>&nbsp;<span class="ident" id="5824933">linetab</span><span class="op" id="5824940">,</span>&nbsp;<span class="builtintype" id="5824942">int32</span><span class="op" id="5824947">(</span><span class="ident" id="5824948">filenum</span><span class="op" id="5824955">)</span><span class="op" id="5824956">,</span>&nbsp;<span class="builtintype" id="5824958">int32</span><span class="op" id="5824963">(</span><span class="ident" id="5824964">line</span><span class="op" id="5824968">)</span><span class="op" id="5824969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824973">if</span>&nbsp;<span class="ident" id="5824976">pc</span>&nbsp;<span class="op" id="5824979">!=</span>&nbsp;<span class="num" id="5824982">0</span>&nbsp;<span class="op" id="5824984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824989">return</span>&nbsp;<span class="ident" id="5824996">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825001">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825007">return</span>&nbsp;<span class="num" id="5825014">0</span><br>
<span class="lineno"></span><span class="op" id="5825016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5825019">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5825085">func</span>&nbsp;<span class="op" id="5825090">(</span><span class="ident" id="5825091">t</span>&nbsp;<span class="op" id="5825093">*</span><span class="ident" id="5825094">LineTable</span><span class="op" id="5825103">)</span>&nbsp;<span class="ident" id="5825105">initFileMap</span><span class="op" id="5825116">(</span><span class="op" id="5825117">)</span>&nbsp;<span class="op" id="5825119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825122">t</span><span class="op" id="5825123">.</span><span class="ident" id="5825124">mu</span><span class="op" id="5825126">.</span><span class="ident" id="5825127">Lock</span><span class="op" id="5825131">(</span><span class="op" id="5825132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825135">defer</span>&nbsp;<span class="ident" id="5825141">t</span><span class="op" id="5825142">.</span><span class="ident" id="5825143">mu</span><span class="op" id="5825145">.</span><span class="ident" id="5825146">Unlock</span><span class="op" id="5825152">(</span><span class="op" id="5825153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825157">if</span>&nbsp;<span class="ident" id="5825160">t</span><span class="op" id="5825161">.</span><span class="ident" id="5825162">fileMap</span>&nbsp;<span class="op" id="5825170">!=</span>&nbsp;<span class="ident" id="5825173">nil</span>&nbsp;<span class="op" id="5825177">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825181">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825192">m</span>&nbsp;<span class="op" id="5825194">:=</span>&nbsp;<span class="builtinfunc" id="5825197">make</span><span class="op" id="5825201">(</span><span class="keyword" id="5825202">map</span><span class="op" id="5825205">[</span><span class="builtintype" id="5825206">string</span><span class="op" id="5825212">]</span><span class="builtintype" id="5825213">uint32</span><span class="op" id="5825219">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825223">for</span>&nbsp;<span class="ident" id="5825227">i</span>&nbsp;<span class="op" id="5825229">:=</span>&nbsp;<span class="builtintype" id="5825232">uint32</span><span class="op" id="5825238">(</span><span class="num" id="5825239">1</span><span class="op" id="5825240">)</span><span class="op" id="5825241">;</span>&nbsp;<span class="ident" id="5825243">i</span>&nbsp;<span class="op" id="5825245">&lt;</span>&nbsp;<span class="ident" id="5825247">t</span><span class="op" id="5825248">.</span><span class="ident" id="5825249">nfiletab</span><span class="op" id="5825257">;</span>&nbsp;<span class="ident" id="5825259">i</span><span class="op" id="5825260">++</span>&nbsp;<span class="op" id="5825263">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825267">s</span>&nbsp;<span class="op" id="5825269">:=</span>&nbsp;<span class="ident" id="5825272">t</span><span class="op" id="5825273">.</span><span class="builtintype" id="5825274">string</span><span class="op" id="5825280">(</span><span class="ident" id="5825281">t</span><span class="op" id="5825282">.</span><span class="ident" id="5825283">binary</span><span class="op" id="5825289">.</span><span class="ident" id="5825290">Uint32</span><span class="op" id="5825296">(</span><span class="ident" id="5825297">t</span><span class="op" id="5825298">.</span><span class="ident" id="5825299">filetab</span><span class="op" id="5825306">[</span><span class="num" id="5825307">4</span><span class="op" id="5825308">*</span><span class="ident" id="5825309">i</span><span class="op" id="5825310">:</span><span class="op" id="5825311">]</span><span class="op" id="5825312">)</span><span class="op" id="5825313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825317">m</span><span class="op" id="5825318">[</span><span class="ident" id="5825319">s</span><span class="op" id="5825320">]</span>&nbsp;<span class="op" id="5825322">=</span>&nbsp;<span class="ident" id="5825324">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825330">t</span><span class="op" id="5825331">.</span><span class="ident" id="5825332">fileMap</span>&nbsp;<span class="op" id="5825340">=</span>&nbsp;<span class="ident" id="5825342">m</span><br>
<span class="lineno"></span><span class="op" id="5825344">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5825347">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5825419">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5825496">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5825561">func</span>&nbsp;<span class="op" id="5825566">(</span><span class="ident" id="5825567">t</span>&nbsp;<span class="op" id="5825569">*</span><span class="ident" id="5825570">LineTable</span><span class="op" id="5825579">)</span>&nbsp;<span class="ident" id="5825581">go12MapFiles</span><span class="op" id="5825593">(</span><span class="ident" id="5825594">m</span>&nbsp;<span class="keyword" id="5825596">map</span><span class="op" id="5825599">[</span><span class="builtintype" id="5825600">string</span><span class="op" id="5825606">]</span><span class="op" id="5825607">*</span><span class="ident" id="5825608">Obj</span><span class="op" id="5825611">,</span>&nbsp;<span class="ident" id="5825613">obj</span>&nbsp;<span class="op" id="5825617">*</span><span class="ident" id="5825618">Obj</span><span class="op" id="5825621">)</span>&nbsp;<span class="op" id="5825623">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825626">defer</span>&nbsp;<span class="keyword" id="5825632">func</span><span class="op" id="5825636">(</span><span class="op" id="5825637">)</span>&nbsp;<span class="op" id="5825639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5825643">recover</span><span class="op" id="5825650">(</span><span class="op" id="5825651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825654">}</span><span class="op" id="5825655">(</span><span class="op" id="5825656">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825660">t</span><span class="op" id="5825661">.</span><span class="ident" id="5825662">initFileMap</span><span class="op" id="5825673">(</span><span class="op" id="5825674">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825677">for</span>&nbsp;<span class="ident" id="5825681">file</span>&nbsp;<span class="op" id="5825686">:=</span>&nbsp;<span class="keyword" id="5825689">range</span>&nbsp;<span class="ident" id="5825695">t</span><span class="op" id="5825696">.</span><span class="ident" id="5825697">fileMap</span>&nbsp;<span class="op" id="5825705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825709">m</span><span class="op" id="5825710">[</span><span class="ident" id="5825711">file</span><span class="op" id="5825715">]</span>&nbsp;<span class="op" id="5825717">=</span>&nbsp;<span class="ident" id="5825719">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825724">}</span><br>
<span class="lineno"></span><span class="op" id="5825726">}</span>
</div>
</body>
</html>
