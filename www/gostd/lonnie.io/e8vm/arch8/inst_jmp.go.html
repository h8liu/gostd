<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="4785891">package</span>&nbsp;<span class="ident" id="4785899">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4785906">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="4785943">type</span>&nbsp;<span class="ident" id="4785948">instJmp</span>&nbsp;<span class="keyword" id="4785956">struct</span><span class="op" id="4785962">{</span><span class="op" id="4785963">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="4785966">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="4786002">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="4786049">func</span>&nbsp;<span class="op" id="4786054">(</span><span class="ident" id="4786055">i</span>&nbsp;<span class="op" id="4786057">*</span><span class="ident" id="4786058">instJmp</span><span class="op" id="4786065">)</span>&nbsp;<span class="ident" id="4786067">I</span><span class="op" id="4786068">(</span><span class="ident" id="4786069">cpu</span>&nbsp;<span class="op" id="4786073">*</span><span class="ident" id="4786074">cpu</span><span class="op" id="4786077">,</span>&nbsp;<span class="ident" id="4786079">in</span>&nbsp;<span class="builtintype" id="4786082">uint32</span><span class="op" id="4786088">)</span>&nbsp;<span class="op" id="4786090">*</span><span class="ident" id="4786091">Excep</span>&nbsp;<span class="op" id="4786097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786100">op</span>&nbsp;<span class="op" id="4786103">:=</span>&nbsp;<span class="op" id="4786106">(</span><span class="ident" id="4786107">in</span>&nbsp;<span class="op" id="4786110">&gt;&gt;</span>&nbsp;<span class="num" id="4786113">30</span><span class="op" id="4786115">)</span>&nbsp;<span class="op" id="4786117">&amp;</span>&nbsp;<span class="num" id="4786119">0x3</span>&nbsp;<span class="comment" id="4786123">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786135">off</span>&nbsp;<span class="op" id="4786139">:=</span>&nbsp;<span class="ident" id="4786142">in</span>&nbsp;<span class="op" id="4786145">&amp;</span>&nbsp;<span class="num" id="4786147">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786160">pc</span>&nbsp;<span class="op" id="4786163">:=</span>&nbsp;<span class="ident" id="4786166">cpu</span><span class="op" id="4786169">.</span><span class="ident" id="4786170">regs</span><span class="op" id="4786174">[</span><span class="ident" id="4786175">PC</span><span class="op" id="4786177">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786180">to</span>&nbsp;<span class="op" id="4786183">:=</span>&nbsp;<span class="ident" id="4786186">pc</span>&nbsp;<span class="op" id="4786189">+</span>&nbsp;<span class="op" id="4786191">(</span><span class="ident" id="4786192">off</span>&nbsp;<span class="op" id="4786196">&lt;&lt;</span>&nbsp;<span class="num" id="4786199">2</span><span class="op" id="4786200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786204">switch</span>&nbsp;<span class="ident" id="4786211">op</span>&nbsp;<span class="op" id="4786214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786217">case</span>&nbsp;<span class="num" id="4786222">2</span><span class="op" id="4786223">:</span>&nbsp;<span class="comment" id="4786225">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4786232">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786250">case</span>&nbsp;<span class="num" id="4786255">3</span><span class="op" id="4786256">:</span>&nbsp;<span class="comment" id="4786258">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786267">cpu</span><span class="op" id="4786270">.</span><span class="ident" id="4786271">regs</span><span class="op" id="4786275">[</span><span class="ident" id="4786276">RET</span><span class="op" id="4786279">]</span>&nbsp;<span class="op" id="4786281">=</span>&nbsp;<span class="ident" id="4786283">pc</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786287">default</span><span class="op" id="4786294">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786298">return</span>&nbsp;<span class="ident" id="4786305">errInvalidInst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786325">cpu</span><span class="op" id="4786328">.</span><span class="ident" id="4786329">regs</span><span class="op" id="4786333">[</span><span class="ident" id="4786334">PC</span><span class="op" id="4786336">]</span>&nbsp;<span class="op" id="4786338">=</span>&nbsp;<span class="ident" id="4786340">to</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786344">return</span>&nbsp;<span class="ident" id="4786351">nil</span><br>
<span class="lineno"></span><span class="op" id="4786355">}</span>
</div>
</body>
</html>
