<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html" class="current">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6696208">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6696264">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6696318">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6696369">package</span>&nbsp;<span class="ident" id="6696377">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6696382">import</span>&nbsp;<span class="op" id="6696389">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696392">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696401">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696408">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696414">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696425">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696436">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6696447">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6696454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6696457">type</span>&nbsp;<span class="ident" id="6696462">resolveIPAddrTest</span>&nbsp;<span class="keyword" id="6696480">struct</span>&nbsp;<span class="op" id="6696487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6696490">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6696504">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6696512">litAddrOrName</span>&nbsp;<span class="builtintype" id="6696526">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6696534">addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696548">*</span><span class="ident" id="6696549"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6696557">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6696571">error</span><br>
<span class="lineno"></span><span class="op" id="6696577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6696580">var</span>&nbsp;<span class="ident" id="6696584">resolveIPAddrTests</span>&nbsp;<span class="op" id="6696603">=</span>&nbsp;<span class="op" id="6696605">[</span><span class="op" id="6696606">]</span><span class="ident" id="6696607"><a href="/gostd/net/ipraw_test.go.html#6696462">resolveIPAddrTest</a></span><span class="op" id="6696624">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696627">{</span><span class="string" id="6696628">&#34;ip&#34;</span><span class="op" id="6696632">,</span>&nbsp;<span class="string" id="6696634">&#34;127.0.0.1&#34;</span><span class="op" id="6696645">,</span>&nbsp;<span class="op" id="6696647">&amp;</span><span class="ident" id="6696648"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696654">{</span><span class="ident" id="6696655"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696657">:</span>&nbsp;<span class="ident" id="6696659"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6696663">(</span><span class="num" id="6696664">127</span><span class="op" id="6696667">,</span>&nbsp;<span class="num" id="6696669">0</span><span class="op" id="6696670">,</span>&nbsp;<span class="num" id="6696672">0</span><span class="op" id="6696673">,</span>&nbsp;<span class="num" id="6696675">1</span><span class="op" id="6696676">)</span><span class="op" id="6696677">}</span><span class="op" id="6696678">,</span>&nbsp;<span class="builtintype" id="6696680">nil</span><span class="op" id="6696683">}</span><span class="op" id="6696684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696687">{</span><span class="string" id="6696688">&#34;ip4&#34;</span><span class="op" id="6696693">,</span>&nbsp;<span class="string" id="6696695">&#34;127.0.0.1&#34;</span><span class="op" id="6696706">,</span>&nbsp;<span class="op" id="6696708">&amp;</span><span class="ident" id="6696709"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696715">{</span><span class="ident" id="6696716"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696718">:</span>&nbsp;<span class="ident" id="6696720"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6696724">(</span><span class="num" id="6696725">127</span><span class="op" id="6696728">,</span>&nbsp;<span class="num" id="6696730">0</span><span class="op" id="6696731">,</span>&nbsp;<span class="num" id="6696733">0</span><span class="op" id="6696734">,</span>&nbsp;<span class="num" id="6696736">1</span><span class="op" id="6696737">)</span><span class="op" id="6696738">}</span><span class="op" id="6696739">,</span>&nbsp;<span class="builtintype" id="6696741">nil</span><span class="op" id="6696744">}</span><span class="op" id="6696745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696748">{</span><span class="string" id="6696749">&#34;ip4:icmp&#34;</span><span class="op" id="6696759">,</span>&nbsp;<span class="string" id="6696761">&#34;127.0.0.1&#34;</span><span class="op" id="6696772">,</span>&nbsp;<span class="op" id="6696774">&amp;</span><span class="ident" id="6696775"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696781">{</span><span class="ident" id="6696782"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696784">:</span>&nbsp;<span class="ident" id="6696786"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6696790">(</span><span class="num" id="6696791">127</span><span class="op" id="6696794">,</span>&nbsp;<span class="num" id="6696796">0</span><span class="op" id="6696797">,</span>&nbsp;<span class="num" id="6696799">0</span><span class="op" id="6696800">,</span>&nbsp;<span class="num" id="6696802">1</span><span class="op" id="6696803">)</span><span class="op" id="6696804">}</span><span class="op" id="6696805">,</span>&nbsp;<span class="builtintype" id="6696807">nil</span><span class="op" id="6696810">}</span><span class="op" id="6696811">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696815">{</span><span class="string" id="6696816">&#34;ip&#34;</span><span class="op" id="6696820">,</span>&nbsp;<span class="string" id="6696822">&#34;::1&#34;</span><span class="op" id="6696827">,</span>&nbsp;<span class="op" id="6696829">&amp;</span><span class="ident" id="6696830"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696836">{</span><span class="ident" id="6696837"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696839">:</span>&nbsp;<span class="ident" id="6696841"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6696848">(</span><span class="string" id="6696849">&#34;::1&#34;</span><span class="op" id="6696854">)</span><span class="op" id="6696855">}</span><span class="op" id="6696856">,</span>&nbsp;<span class="builtintype" id="6696858">nil</span><span class="op" id="6696861">}</span><span class="op" id="6696862">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696865">{</span><span class="string" id="6696866">&#34;ip6&#34;</span><span class="op" id="6696871">,</span>&nbsp;<span class="string" id="6696873">&#34;::1&#34;</span><span class="op" id="6696878">,</span>&nbsp;<span class="op" id="6696880">&amp;</span><span class="ident" id="6696881"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696887">{</span><span class="ident" id="6696888"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696890">:</span>&nbsp;<span class="ident" id="6696892"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6696899">(</span><span class="string" id="6696900">&#34;::1&#34;</span><span class="op" id="6696905">)</span><span class="op" id="6696906">}</span><span class="op" id="6696907">,</span>&nbsp;<span class="builtintype" id="6696909">nil</span><span class="op" id="6696912">}</span><span class="op" id="6696913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696916">{</span><span class="string" id="6696917">&#34;ip6:ipv6-icmp&#34;</span><span class="op" id="6696932">,</span>&nbsp;<span class="string" id="6696934">&#34;::1&#34;</span><span class="op" id="6696939">,</span>&nbsp;<span class="op" id="6696941">&amp;</span><span class="ident" id="6696942"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6696948">{</span><span class="ident" id="6696949"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6696951">:</span>&nbsp;<span class="ident" id="6696953"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6696960">(</span><span class="string" id="6696961">&#34;::1&#34;</span><span class="op" id="6696966">)</span><span class="op" id="6696967">}</span><span class="op" id="6696968">,</span>&nbsp;<span class="builtintype" id="6696970">nil</span><span class="op" id="6696973">}</span><span class="op" id="6696974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6696977">{</span><span class="string" id="6696978">&#34;ip6:IPv6-ICMP&#34;</span><span class="op" id="6696993">,</span>&nbsp;<span class="string" id="6696995">&#34;::1&#34;</span><span class="op" id="6697000">,</span>&nbsp;<span class="op" id="6697002">&amp;</span><span class="ident" id="6697003"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697009">{</span><span class="ident" id="6697010"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697012">:</span>&nbsp;<span class="ident" id="6697014"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697021">(</span><span class="string" id="6697022">&#34;::1&#34;</span><span class="op" id="6697027">)</span><span class="op" id="6697028">}</span><span class="op" id="6697029">,</span>&nbsp;<span class="builtintype" id="6697031">nil</span><span class="op" id="6697034">}</span><span class="op" id="6697035">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697039">{</span><span class="string" id="6697040">&#34;ip&#34;</span><span class="op" id="6697044">,</span>&nbsp;<span class="string" id="6697046">&#34;::1%en0&#34;</span><span class="op" id="6697055">,</span>&nbsp;<span class="op" id="6697057">&amp;</span><span class="ident" id="6697058"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697064">{</span><span class="ident" id="6697065"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697067">:</span>&nbsp;<span class="ident" id="6697069"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697076">(</span><span class="string" id="6697077">&#34;::1&#34;</span><span class="op" id="6697082">)</span><span class="op" id="6697083">,</span>&nbsp;<span class="ident" id="6697085"><a href="/gostd/net/iprawsock.go.html#3301144">Zone</a></span><span class="op" id="6697089">:</span>&nbsp;<span class="string" id="6697091">&#34;en0&#34;</span><span class="op" id="6697096">}</span><span class="op" id="6697097">,</span>&nbsp;<span class="builtintype" id="6697099">nil</span><span class="op" id="6697102">}</span><span class="op" id="6697103">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697106">{</span><span class="string" id="6697107">&#34;ip6&#34;</span><span class="op" id="6697112">,</span>&nbsp;<span class="string" id="6697114">&#34;::1%911&#34;</span><span class="op" id="6697123">,</span>&nbsp;<span class="op" id="6697125">&amp;</span><span class="ident" id="6697126"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697132">{</span><span class="ident" id="6697133"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697135">:</span>&nbsp;<span class="ident" id="6697137"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697144">(</span><span class="string" id="6697145">&#34;::1&#34;</span><span class="op" id="6697150">)</span><span class="op" id="6697151">,</span>&nbsp;<span class="ident" id="6697153"><a href="/gostd/net/iprawsock.go.html#3301144">Zone</a></span><span class="op" id="6697157">:</span>&nbsp;<span class="string" id="6697159">&#34;911&#34;</span><span class="op" id="6697164">}</span><span class="op" id="6697165">,</span>&nbsp;<span class="builtintype" id="6697167">nil</span><span class="op" id="6697170">}</span><span class="op" id="6697171">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697175">{</span><span class="string" id="6697176">&#34;&#34;</span><span class="op" id="6697178">,</span>&nbsp;<span class="string" id="6697180">&#34;127.0.0.1&#34;</span><span class="op" id="6697191">,</span>&nbsp;<span class="op" id="6697193">&amp;</span><span class="ident" id="6697194"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697200">{</span><span class="ident" id="6697201"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697203">:</span>&nbsp;<span class="ident" id="6697205"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6697209">(</span><span class="num" id="6697210">127</span><span class="op" id="6697213">,</span>&nbsp;<span class="num" id="6697215">0</span><span class="op" id="6697216">,</span>&nbsp;<span class="num" id="6697218">0</span><span class="op" id="6697219">,</span>&nbsp;<span class="num" id="6697221">1</span><span class="op" id="6697222">)</span><span class="op" id="6697223">}</span><span class="op" id="6697224">,</span>&nbsp;<span class="builtintype" id="6697226">nil</span><span class="op" id="6697229">}</span><span class="op" id="6697230">,</span>&nbsp;<span class="comment" id="6697232">//&nbsp;Go&nbsp;1.0&nbsp;behavior</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697252">{</span><span class="string" id="6697253">&#34;&#34;</span><span class="op" id="6697255">,</span>&nbsp;<span class="string" id="6697257">&#34;::1&#34;</span><span class="op" id="6697262">,</span>&nbsp;<span class="op" id="6697264">&amp;</span><span class="ident" id="6697265"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697271">{</span><span class="ident" id="6697272"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697274">:</span>&nbsp;<span class="ident" id="6697276"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697283">(</span><span class="string" id="6697284">&#34;::1&#34;</span><span class="op" id="6697289">)</span><span class="op" id="6697290">}</span><span class="op" id="6697291">,</span>&nbsp;<span class="builtintype" id="6697293">nil</span><span class="op" id="6697296">}</span><span class="op" id="6697297">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6697309">//&nbsp;Go&nbsp;1.0&nbsp;behavior</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697330">{</span><span class="string" id="6697331">&#34;l2tp&#34;</span><span class="op" id="6697337">,</span>&nbsp;<span class="string" id="6697339">&#34;127.0.0.1&#34;</span><span class="op" id="6697350">,</span>&nbsp;<span class="builtintype" id="6697352">nil</span><span class="op" id="6697355">,</span>&nbsp;<span class="ident" id="6697357"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="6697376">(</span><span class="string" id="6697377">&#34;l2tp&#34;</span><span class="op" id="6697383">)</span><span class="op" id="6697384">}</span><span class="op" id="6697385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697388">{</span><span class="string" id="6697389">&#34;l2tp:gre&#34;</span><span class="op" id="6697399">,</span>&nbsp;<span class="string" id="6697401">&#34;127.0.0.1&#34;</span><span class="op" id="6697412">,</span>&nbsp;<span class="builtintype" id="6697414">nil</span><span class="op" id="6697417">,</span>&nbsp;<span class="ident" id="6697419"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="6697438">(</span><span class="string" id="6697439">&#34;l2tp:gre&#34;</span><span class="op" id="6697449">)</span><span class="op" id="6697450">}</span><span class="op" id="6697451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697454">{</span><span class="string" id="6697455">&#34;tcp&#34;</span><span class="op" id="6697460">,</span>&nbsp;<span class="string" id="6697462">&#34;1.2.3.4:123&#34;</span><span class="op" id="6697475">,</span>&nbsp;<span class="builtintype" id="6697477">nil</span><span class="op" id="6697480">,</span>&nbsp;<span class="ident" id="6697482"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="6697501">(</span><span class="string" id="6697502">&#34;tcp&#34;</span><span class="op" id="6697507">)</span><span class="op" id="6697508">}</span><span class="op" id="6697509">,</span><br>
<span class="lineno"></span><span class="op" id="6697511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6697514">func</span>&nbsp;<span class="ident" id="6697519">init</span><span class="op" id="6697523">(</span><span class="op" id="6697524">)</span>&nbsp;<span class="op" id="6697526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6697529">if</span>&nbsp;<span class="ident" id="6697532">ifi</span>&nbsp;<span class="op" id="6697536">:=</span>&nbsp;<span class="ident" id="6697539"><a href="/gostd/net/interface_test.go.html#6670502">loopbackInterface</a></span><span class="op" id="6697556">(</span><span class="op" id="6697557">)</span><span class="op" id="6697558">;</span>&nbsp;<span class="ident" id="6697560"><a href="/gostd/net/ipraw_test.go.html#6697532">ifi</a></span>&nbsp;<span class="op" id="6697564">!=</span>&nbsp;<span class="builtintype" id="6697567">nil</span>&nbsp;<span class="op" id="6697571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6697575">index</span>&nbsp;<span class="op" id="6697581">:=</span>&nbsp;<span class="ident" id="6697584"><a href="/gostd/net/ipraw_test.go.html#6696401">fmt</a></span><span class="op" id="6697587">.</span><span class="ident" id="6697588"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6697595">(</span><span class="string" id="6697596">&#34;%v&#34;</span><span class="op" id="6697600">,</span>&nbsp;<span class="ident" id="6697602"><a href="/gostd/net/ipraw_test.go.html#6697532">ifi</a></span><span class="op" id="6697605">.</span><span class="ident" id="6697606"><a href="/gostd/net/interface.go.html#3275485">Index</a></span><span class="op" id="6697611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6697615"><a href="/gostd/net/ipraw_test.go.html#6696584">resolveIPAddrTests</a></span>&nbsp;<span class="op" id="6697634">=</span>&nbsp;<span class="builtinfunc" id="6697636">append</span><span class="op" id="6697642">(</span><span class="ident" id="6697643"><a href="/gostd/net/ipraw_test.go.html#6696584">resolveIPAddrTests</a></span><span class="op" id="6697661">,</span>&nbsp;<span class="op" id="6697663">[</span><span class="op" id="6697664">]</span><span class="ident" id="6697665"><a href="/gostd/net/ipraw_test.go.html#6696462">resolveIPAddrTest</a></span><span class="op" id="6697682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697687">{</span><span class="string" id="6697688">&#34;ip6&#34;</span><span class="op" id="6697693">,</span>&nbsp;<span class="string" id="6697695">&#34;fe80::1%&#34;</span>&nbsp;<span class="op" id="6697706">+</span>&nbsp;<span class="ident" id="6697708"><a href="/gostd/net/ipraw_test.go.html#6697532">ifi</a></span><span class="op" id="6697711">.</span><span class="ident" id="6697712"><a href="/gostd/net/interface.go.html#3275627">Name</a></span><span class="op" id="6697716">,</span>&nbsp;<span class="op" id="6697718">&amp;</span><span class="ident" id="6697719"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697725">{</span><span class="ident" id="6697726"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697728">:</span>&nbsp;<span class="ident" id="6697730"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697737">(</span><span class="string" id="6697738">&#34;fe80::1&#34;</span><span class="op" id="6697747">)</span><span class="op" id="6697748">,</span>&nbsp;<span class="ident" id="6697750"><a href="/gostd/net/iprawsock.go.html#3301144">Zone</a></span><span class="op" id="6697754">:</span>&nbsp;<span class="ident" id="6697756"><a href="/gostd/net/ipsock.go.html#3317149">zoneToString</a></span><span class="op" id="6697768">(</span><span class="ident" id="6697769"><a href="/gostd/net/ipraw_test.go.html#6697532">ifi</a></span><span class="op" id="6697772">.</span><span class="ident" id="6697773"><a href="/gostd/net/interface.go.html#3275485">Index</a></span><span class="op" id="6697778">)</span><span class="op" id="6697779">}</span><span class="op" id="6697780">,</span>&nbsp;<span class="builtintype" id="6697782">nil</span><span class="op" id="6697785">}</span><span class="op" id="6697786">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697791">{</span><span class="string" id="6697792">&#34;ip6&#34;</span><span class="op" id="6697797">,</span>&nbsp;<span class="string" id="6697799">&#34;fe80::1%&#34;</span>&nbsp;<span class="op" id="6697810">+</span>&nbsp;<span class="ident" id="6697812"><a href="/gostd/net/ipraw_test.go.html#6697575">index</a></span><span class="op" id="6697817">,</span>&nbsp;<span class="op" id="6697819">&amp;</span><span class="ident" id="6697820"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6697826">{</span><span class="ident" id="6697827"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6697829">:</span>&nbsp;<span class="ident" id="6697831"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6697838">(</span><span class="string" id="6697839">&#34;fe80::1&#34;</span><span class="op" id="6697848">)</span><span class="op" id="6697849">,</span>&nbsp;<span class="ident" id="6697851"><a href="/gostd/net/iprawsock.go.html#3301144">Zone</a></span><span class="op" id="6697855">:</span>&nbsp;<span class="ident" id="6697857"><a href="/gostd/net/ipraw_test.go.html#6697575">index</a></span><span class="op" id="6697862">}</span><span class="op" id="6697863">,</span>&nbsp;<span class="builtintype" id="6697865">nil</span><span class="op" id="6697868">}</span><span class="op" id="6697869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697873">}</span><span class="op" id="6697874">...</span><span class="op" id="6697877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6697880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6697883">if</span>&nbsp;<span class="ident" id="6697886">ips</span><span class="op" id="6697889">,</span>&nbsp;<span class="ident" id="6697891">err</span>&nbsp;<span class="op" id="6697895">:=</span>&nbsp;<span class="ident" id="6697898"><a href="/gostd/net/lookup.go.html#3324041">LookupIP</a></span><span class="op" id="6697906">(</span><span class="string" id="6697907">&#34;localhost&#34;</span><span class="op" id="6697918">)</span><span class="op" id="6697919">;</span>&nbsp;<span class="ident" id="6697921"><a href="/gostd/net/ipraw_test.go.html#6697891">err</a></span>&nbsp;<span class="op" id="6697925">==</span>&nbsp;<span class="builtintype" id="6697928">nil</span>&nbsp;<span class="op" id="6697932">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6697935">len</span><span class="op" id="6697938">(</span><span class="ident" id="6697939"><a href="/gostd/net/ipraw_test.go.html#6697886">ips</a></span><span class="op" id="6697942">)</span>&nbsp;<span class="op" id="6697944">&gt;</span>&nbsp;<span class="num" id="6697946">1</span>&nbsp;<span class="op" id="6697948">&amp;&amp;</span>&nbsp;<span class="ident" id="6697951"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="6697964">&amp;&amp;</span>&nbsp;<span class="ident" id="6697967"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6697980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6697984"><a href="/gostd/net/ipraw_test.go.html#6696584">resolveIPAddrTests</a></span>&nbsp;<span class="op" id="6698003">=</span>&nbsp;<span class="builtinfunc" id="6698005">append</span><span class="op" id="6698011">(</span><span class="ident" id="6698012"><a href="/gostd/net/ipraw_test.go.html#6696584">resolveIPAddrTests</a></span><span class="op" id="6698030">,</span>&nbsp;<span class="op" id="6698032">[</span><span class="op" id="6698033">]</span><span class="ident" id="6698034"><a href="/gostd/net/ipraw_test.go.html#6696462">resolveIPAddrTest</a></span><span class="op" id="6698051">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698056">{</span><span class="string" id="6698057">&#34;ip&#34;</span><span class="op" id="6698061">,</span>&nbsp;<span class="string" id="6698063">&#34;localhost&#34;</span><span class="op" id="6698074">,</span>&nbsp;<span class="op" id="6698076">&amp;</span><span class="ident" id="6698077"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6698083">{</span><span class="ident" id="6698084"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6698086">:</span>&nbsp;<span class="ident" id="6698088"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6698092">(</span><span class="num" id="6698093">127</span><span class="op" id="6698096">,</span>&nbsp;<span class="num" id="6698098">0</span><span class="op" id="6698099">,</span>&nbsp;<span class="num" id="6698101">0</span><span class="op" id="6698102">,</span>&nbsp;<span class="num" id="6698104">1</span><span class="op" id="6698105">)</span><span class="op" id="6698106">}</span><span class="op" id="6698107">,</span>&nbsp;<span class="builtintype" id="6698109">nil</span><span class="op" id="6698112">}</span><span class="op" id="6698113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698118">{</span><span class="string" id="6698119">&#34;ip4&#34;</span><span class="op" id="6698124">,</span>&nbsp;<span class="string" id="6698126">&#34;localhost&#34;</span><span class="op" id="6698137">,</span>&nbsp;<span class="op" id="6698139">&amp;</span><span class="ident" id="6698140"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6698146">{</span><span class="ident" id="6698147"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6698149">:</span>&nbsp;<span class="ident" id="6698151"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6698155">(</span><span class="num" id="6698156">127</span><span class="op" id="6698159">,</span>&nbsp;<span class="num" id="6698161">0</span><span class="op" id="6698162">,</span>&nbsp;<span class="num" id="6698164">0</span><span class="op" id="6698165">,</span>&nbsp;<span class="num" id="6698167">1</span><span class="op" id="6698168">)</span><span class="op" id="6698169">}</span><span class="op" id="6698170">,</span>&nbsp;<span class="builtintype" id="6698172">nil</span><span class="op" id="6698175">}</span><span class="op" id="6698176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698181">{</span><span class="string" id="6698182">&#34;ip6&#34;</span><span class="op" id="6698187">,</span>&nbsp;<span class="string" id="6698189">&#34;localhost&#34;</span><span class="op" id="6698200">,</span>&nbsp;<span class="op" id="6698202">&amp;</span><span class="ident" id="6698203"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6698209">{</span><span class="ident" id="6698210"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6698212">:</span>&nbsp;<span class="ident" id="6698214"><a href="/gostd/net/ip.go.html#3287912">IPv6loopback</a></span><span class="op" id="6698226">}</span><span class="op" id="6698227">,</span>&nbsp;<span class="builtintype" id="6698229">nil</span><span class="op" id="6698232">}</span><span class="op" id="6698233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698237">}</span><span class="op" id="6698238">...</span><span class="op" id="6698241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698244">}</span><br>
<span class="lineno">60</span><span class="op" id="6698246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6698249">func</span>&nbsp;<span class="ident" id="6698254">skipRawSocketTest</span><span class="op" id="6698271">(</span><span class="ident" id="6698272">t</span>&nbsp;<span class="op" id="6698274">*</span><span class="ident" id="6698275"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6698282">.</span><span class="ident" id="6698283"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6698284">)</span>&nbsp;<span class="op" id="6698286">(</span><span class="ident" id="6698287">skip</span>&nbsp;<span class="builtintype" id="6698292">bool</span><span class="op" id="6698296">,</span>&nbsp;<span class="ident" id="6698298">skipmsg</span>&nbsp;<span class="builtintype" id="6698306">string</span><span class="op" id="6698312">)</span>&nbsp;<span class="op" id="6698314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698317"><a href="/gostd/net/ipraw_test.go.html#6698287">skip</a></span><span class="op" id="6698321">,</span>&nbsp;<span class="ident" id="6698323"><a href="/gostd/net/ipraw_test.go.html#6698298">skipmsg</a></span><span class="op" id="6698330">,</span>&nbsp;<span class="ident" id="6698332">err</span>&nbsp;<span class="op" id="6698336">:=</span>&nbsp;<span class="ident" id="6698339"><a href="/gostd/net/fd_unix.go.html#3269251">skipRawSocketTests</a></span><span class="op" id="6698357">(</span><span class="op" id="6698358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698361">if</span>&nbsp;<span class="ident" id="6698364"><a href="/gostd/net/ipraw_test.go.html#6698332">err</a></span>&nbsp;<span class="op" id="6698368">!=</span>&nbsp;<span class="builtintype" id="6698371">nil</span>&nbsp;<span class="op" id="6698375">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698379"><a href="/gostd/net/ipraw_test.go.html#6698272">t</a></span><span class="op" id="6698380">.</span><span class="ident" id="6698381"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6698386">(</span><span class="ident" id="6698387"><a href="/gostd/net/ipraw_test.go.html#6698332">err</a></span><span class="op" id="6698390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698396">return</span>&nbsp;<span class="ident" id="6698403"><a href="/gostd/net/ipraw_test.go.html#6698287">skip</a></span><span class="op" id="6698407">,</span>&nbsp;<span class="ident" id="6698409"><a href="/gostd/net/ipraw_test.go.html#6698298">skipmsg</a></span><br>
<span class="lineno"></span><span class="op" id="6698417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="6698420">func</span>&nbsp;<span class="ident" id="6698425">TestResolveIPAddr</span><span class="op" id="6698442">(</span><span class="ident" id="6698443">t</span>&nbsp;<span class="op" id="6698445">*</span><span class="ident" id="6698446"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6698453">.</span><span class="ident" id="6698454"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6698455">)</span>&nbsp;<span class="op" id="6698457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698460">switch</span>&nbsp;<span class="ident" id="6698467"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6698474">.</span><span class="ident" id="6698475"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6698480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698483">case</span>&nbsp;<span class="string" id="6698488">&#34;nacl&#34;</span><span class="op" id="6698494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698498"><a href="/gostd/net/ipraw_test.go.html#6698443">t</a></span><span class="op" id="6698499">.</span><span class="ident" id="6698500"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6698505">(</span><span class="string" id="6698506">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6698527">,</span>&nbsp;<span class="ident" id="6698529"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6698536">.</span><span class="ident" id="6698537"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6698541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698544">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698548">for</span>&nbsp;<span class="ident" id="6698552">_</span><span class="op" id="6698553">,</span>&nbsp;<span class="ident" id="6698555">tt</span>&nbsp;<span class="op" id="6698558">:=</span>&nbsp;<span class="keyword" id="6698561">range</span>&nbsp;<span class="ident" id="6698567"><a href="/gostd/net/ipraw_test.go.html#6696584">resolveIPAddrTests</a></span>&nbsp;<span class="op" id="6698586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698590">addr</span><span class="op" id="6698594">,</span>&nbsp;<span class="ident" id="6698596">err</span>&nbsp;<span class="op" id="6698600">:=</span>&nbsp;<span class="ident" id="6698603"><a href="/gostd/net/iprawsock.go.html#3301707">ResolveIPAddr</a></span><span class="op" id="6698616">(</span><span class="ident" id="6698617"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698619">.</span><span class="ident" id="6698620"><a href="/gostd/net/ipraw_test.go.html#6696490">net</a></span><span class="op" id="6698623">,</span>&nbsp;<span class="ident" id="6698625"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698627">.</span><span class="ident" id="6698628"><a href="/gostd/net/ipraw_test.go.html#6696512">litAddrOrName</a></span><span class="op" id="6698641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6698645">if</span>&nbsp;<span class="ident" id="6698648"><a href="/gostd/net/ipraw_test.go.html#6698596">err</a></span>&nbsp;<span class="op" id="6698652">!=</span>&nbsp;<span class="ident" id="6698655"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698657">.</span><span class="ident" id="6698658"><a href="/gostd/net/ipraw_test.go.html#6696557">err</a></span>&nbsp;<span class="op" id="6698662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698667"><a href="/gostd/net/ipraw_test.go.html#6698443">t</a></span><span class="op" id="6698668">.</span><span class="ident" id="6698669"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6698675">(</span><span class="string" id="6698676">&#34;ResolveIPAddr(%v,&nbsp;%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6698710">,</span>&nbsp;<span class="ident" id="6698712"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698714">.</span><span class="ident" id="6698715"><a href="/gostd/net/ipraw_test.go.html#6696490">net</a></span><span class="op" id="6698718">,</span>&nbsp;<span class="ident" id="6698720"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698722">.</span><span class="ident" id="6698723"><a href="/gostd/net/ipraw_test.go.html#6696512">litAddrOrName</a></span><span class="op" id="6698736">,</span>&nbsp;<span class="ident" id="6698738"><a href="/gostd/net/ipraw_test.go.html#6698596">err</a></span><span class="op" id="6698741">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698745">}</span>&nbsp;<span class="keyword" id="6698747">else</span>&nbsp;<span class="keyword" id="6698752">if</span>&nbsp;<span class="op" id="6698755">!</span><span class="ident" id="6698756"><a href="/gostd/net/ipraw_test.go.html#6696414">reflect</a></span><span class="op" id="6698763">.</span><span class="ident" id="6698764"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="6698773">(</span><span class="ident" id="6698774"><a href="/gostd/net/ipraw_test.go.html#6698590">addr</a></span><span class="op" id="6698778">,</span>&nbsp;<span class="ident" id="6698780"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698782">.</span><span class="ident" id="6698783"><a href="/gostd/net/ipraw_test.go.html#6696534">addr</a></span><span class="op" id="6698787">)</span>&nbsp;<span class="op" id="6698789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698794"><a href="/gostd/net/ipraw_test.go.html#6698443">t</a></span><span class="op" id="6698795">.</span><span class="ident" id="6698796"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6698802">(</span><span class="string" id="6698803">&#34;got&nbsp;%#v;&nbsp;expected&nbsp;%#v&#34;</span><span class="op" id="6698826">,</span>&nbsp;<span class="ident" id="6698828"><a href="/gostd/net/ipraw_test.go.html#6698590">addr</a></span><span class="op" id="6698832">,</span>&nbsp;<span class="ident" id="6698834"><a href="/gostd/net/ipraw_test.go.html#6698555">tt</a></span><span class="op" id="6698836">.</span><span class="ident" id="6698837"><a href="/gostd/net/ipraw_test.go.html#6696534">addr</a></span><span class="op" id="6698841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698848">}</span><br>
<span class="lineno"></span><span class="op" id="6698850">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="6698853">var</span>&nbsp;<span class="ident" id="6698857">icmpEchoTests</span>&nbsp;<span class="op" id="6698871">=</span>&nbsp;<span class="op" id="6698873">[</span><span class="op" id="6698874">]</span><span class="keyword" id="6698875">struct</span>&nbsp;<span class="op" id="6698882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698885">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6698891">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698899">laddr</span>&nbsp;<span class="builtintype" id="6698905">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6698913">raddr</span>&nbsp;<span class="builtintype" id="6698919">string</span><br>
<span class="lineno">90</span><span class="op" id="6698926">}</span><span class="op" id="6698927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698930">{</span><span class="string" id="6698931">&#34;ip4:icmp&#34;</span><span class="op" id="6698941">,</span>&nbsp;<span class="string" id="6698943">&#34;0.0.0.0&#34;</span><span class="op" id="6698952">,</span>&nbsp;<span class="string" id="6698954">&#34;127.0.0.1&#34;</span><span class="op" id="6698965">}</span><span class="op" id="6698966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6698969">{</span><span class="string" id="6698970">&#34;ip6:ipv6-icmp&#34;</span><span class="op" id="6698985">,</span>&nbsp;<span class="string" id="6698987">&#34;::&#34;</span><span class="op" id="6698991">,</span>&nbsp;<span class="string" id="6698993">&#34;::1&#34;</span><span class="op" id="6698998">}</span><span class="op" id="6698999">,</span><br>
<span class="lineno"></span><span class="op" id="6699001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6699004">func</span>&nbsp;<span class="ident" id="6699009">TestConnICMPEcho</span><span class="op" id="6699025">(</span><span class="ident" id="6699026">t</span>&nbsp;<span class="op" id="6699028">*</span><span class="ident" id="6699029"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6699036">.</span><span class="ident" id="6699037"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6699038">)</span>&nbsp;<span class="op" id="6699040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699043">if</span>&nbsp;<span class="ident" id="6699046">skip</span><span class="op" id="6699050">,</span>&nbsp;<span class="ident" id="6699052">skipmsg</span>&nbsp;<span class="op" id="6699060">:=</span>&nbsp;<span class="ident" id="6699063"><a href="/gostd/net/ipraw_test.go.html#6698254">skipRawSocketTest</a></span><span class="op" id="6699080">(</span><span class="ident" id="6699081"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699082">)</span><span class="op" id="6699083">;</span>&nbsp;<span class="ident" id="6699085"><a href="/gostd/net/ipraw_test.go.html#6699046">skip</a></span>&nbsp;<span class="op" id="6699090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699094"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699095">.</span><span class="ident" id="6699096"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6699100">(</span><span class="ident" id="6699101"><a href="/gostd/net/ipraw_test.go.html#6699052">skipmsg</a></span><span class="op" id="6699108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699115">for</span>&nbsp;<span class="ident" id="6699119">i</span><span class="op" id="6699120">,</span>&nbsp;<span class="ident" id="6699122">tt</span>&nbsp;<span class="op" id="6699125">:=</span>&nbsp;<span class="keyword" id="6699128">range</span>&nbsp;<span class="ident" id="6699134"><a href="/gostd/net/ipraw_test.go.html#6698857">icmpEchoTests</a></span>&nbsp;<span class="op" id="6699148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699152">net</span><span class="op" id="6699155">,</span>&nbsp;<span class="ident" id="6699157">_</span><span class="op" id="6699158">,</span>&nbsp;<span class="ident" id="6699160">err</span>&nbsp;<span class="op" id="6699164">:=</span>&nbsp;<span class="ident" id="6699167"><a href="/gostd/net/dial.go.html#3201440">parseNetwork</a></span><span class="op" id="6699179">(</span><span class="ident" id="6699180"><a href="/gostd/net/ipraw_test.go.html#6699122">tt</a></span><span class="op" id="6699182">.</span><span class="ident" id="6699183"><a href="/gostd/net/ipraw_test.go.html#6698885">net</a></span><span class="op" id="6699186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699190">if</span>&nbsp;<span class="ident" id="6699193"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6699197">!=</span>&nbsp;<span class="builtintype" id="6699200">nil</span>&nbsp;<span class="op" id="6699204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699209"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699210">.</span><span class="ident" id="6699211"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6699217">(</span><span class="string" id="6699218">&#34;parseNetwork&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6699243">,</span>&nbsp;<span class="ident" id="6699245"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span><span class="op" id="6699248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699252">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699256">if</span>&nbsp;<span class="ident" id="6699259"><a href="/gostd/net/ipraw_test.go.html#6699152">net</a></span>&nbsp;<span class="op" id="6699263">==</span>&nbsp;<span class="string" id="6699266">&#34;ip6&#34;</span>&nbsp;<span class="op" id="6699272">&amp;&amp;</span>&nbsp;<span class="op" id="6699275">!</span><span class="ident" id="6699276"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6699289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699294">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699310">c</span><span class="op" id="6699311">,</span>&nbsp;<span class="ident" id="6699313"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6699317">:=</span>&nbsp;<span class="ident" id="6699320"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6699324">(</span><span class="ident" id="6699325"><a href="/gostd/net/ipraw_test.go.html#6699122">tt</a></span><span class="op" id="6699327">.</span><span class="ident" id="6699328"><a href="/gostd/net/ipraw_test.go.html#6698885">net</a></span><span class="op" id="6699331">,</span>&nbsp;<span class="ident" id="6699333"><a href="/gostd/net/ipraw_test.go.html#6699122">tt</a></span><span class="op" id="6699335">.</span><span class="ident" id="6699336"><a href="/gostd/net/ipraw_test.go.html#6698913">raddr</a></span><span class="op" id="6699341">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699345">if</span>&nbsp;<span class="ident" id="6699348"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6699352">!=</span>&nbsp;<span class="builtintype" id="6699355">nil</span>&nbsp;<span class="op" id="6699359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699364"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699365">.</span><span class="ident" id="6699366"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6699372">(</span><span class="string" id="6699373">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6699390">,</span>&nbsp;<span class="ident" id="6699392"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span><span class="op" id="6699395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699403"><a href="/gostd/net/ipraw_test.go.html#6699310">c</a></span><span class="op" id="6699404">.</span><span class="ident" id="6699405"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6699416">(</span><span class="ident" id="6699417"><a href="/gostd/net/ipraw_test.go.html#6696447">time</a></span><span class="op" id="6699421">.</span><span class="ident" id="6699422"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6699425">(</span><span class="op" id="6699426">)</span><span class="op" id="6699427">.</span><span class="ident" id="6699428"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6699431">(</span><span class="num" id="6699432">100</span>&nbsp;<span class="op" id="6699436">*</span>&nbsp;<span class="ident" id="6699438"><a href="/gostd/net/ipraw_test.go.html#6696447">time</a></span><span class="op" id="6699442">.</span><span class="ident" id="6699443"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6699454">)</span><span class="op" id="6699455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699459">defer</span>&nbsp;<span class="ident" id="6699465"><a href="/gostd/net/ipraw_test.go.html#6699310">c</a></span><span class="op" id="6699466">.</span><span class="ident" id="6699467"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6699472">(</span><span class="op" id="6699473">)</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699478">typ</span>&nbsp;<span class="op" id="6699482">:=</span>&nbsp;<span class="ident" id="6699485"><a href="/gostd/net/mockicmp_test.go.html#6715289">icmpv4EchoRequest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699505">if</span>&nbsp;<span class="ident" id="6699508"><a href="/gostd/net/ipraw_test.go.html#6699152">net</a></span>&nbsp;<span class="op" id="6699512">==</span>&nbsp;<span class="string" id="6699515">&#34;ip6&#34;</span>&nbsp;<span class="op" id="6699521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699526"><a href="/gostd/net/ipraw_test.go.html#6699478">typ</a></span>&nbsp;<span class="op" id="6699530">=</span>&nbsp;<span class="ident" id="6699532"><a href="/gostd/net/mockicmp_test.go.html#6715335">icmpv6EchoRequest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699552">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699556">xid</span><span class="op" id="6699559">,</span>&nbsp;<span class="ident" id="6699561">xseq</span>&nbsp;<span class="op" id="6699566">:=</span>&nbsp;<span class="ident" id="6699569"><a href="/gostd/net/ipraw_test.go.html#6696408">os</a></span><span class="op" id="6699571">.</span><span class="ident" id="6699572"><a href="/gostd/os/exec.go.html#2435259">Getpid</a></span><span class="op" id="6699578">(</span><span class="op" id="6699579">)</span><span class="op" id="6699580">&amp;</span><span class="num" id="6699581">0xffff</span><span class="op" id="6699587">,</span>&nbsp;<span class="ident" id="6699589"><a href="/gostd/net/ipraw_test.go.html#6699119">i</a></span><span class="op" id="6699590">+</span><span class="num" id="6699591">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699595">wb</span><span class="op" id="6699597">,</span>&nbsp;<span class="ident" id="6699599"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6699603">:=</span>&nbsp;<span class="op" id="6699606">(</span><span class="op" id="6699607">&amp;</span><span class="ident" id="6699608"><a href="/gostd/net/mockicmp_test.go.html#6715435">icmpMessage</a></span><span class="op" id="6699619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699624"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span><span class="op" id="6699628">:</span>&nbsp;<span class="ident" id="6699630"><a href="/gostd/net/ipraw_test.go.html#6699478">typ</a></span><span class="op" id="6699633">,</span>&nbsp;<span class="ident" id="6699635"><a href="/gostd/net/mockicmp_test.go.html#6715491">Code</a></span><span class="op" id="6699639">:</span>&nbsp;<span class="num" id="6699641">0</span><span class="op" id="6699642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699647"><a href="/gostd/net/mockicmp_test.go.html#6715563">Body</a></span><span class="op" id="6699651">:</span>&nbsp;<span class="op" id="6699653">&amp;</span><span class="ident" id="6699654"><a href="/gostd/net/mockicmp_test.go.html#6717093">icmpEcho</a></span><span class="op" id="6699662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699668"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span><span class="op" id="6699670">:</span>&nbsp;<span class="ident" id="6699672"><a href="/gostd/net/ipraw_test.go.html#6699556">xid</a></span><span class="op" id="6699675">,</span>&nbsp;<span class="ident" id="6699677"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span><span class="op" id="6699680">:</span>&nbsp;<span class="ident" id="6699682"><a href="/gostd/net/ipraw_test.go.html#6699561">xseq</a></span><span class="op" id="6699686">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699692"><a href="/gostd/net/mockicmp_test.go.html#6717171">Data</a></span><span class="op" id="6699696">:</span>&nbsp;<span class="ident" id="6699698"><a href="/gostd/net/ipraw_test.go.html#6696392">bytes</a></span><span class="op" id="6699703">.</span><span class="ident" id="6699704"><a href="/gostd/bytes/bytes.go.html#1405494">Repeat</a></span><span class="op" id="6699710">(</span><span class="op" id="6699711">[</span><span class="op" id="6699712">]</span><span class="builtintype" id="6699713">byte</span><span class="op" id="6699717">(</span><span class="string" id="6699718">&#34;Go&nbsp;Go&nbsp;Gadget&nbsp;Ping!!!&#34;</span><span class="op" id="6699740">)</span><span class="op" id="6699741">,</span>&nbsp;<span class="num" id="6699743">3</span><span class="op" id="6699744">)</span><span class="op" id="6699745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699750">}</span><span class="op" id="6699751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699755">}</span><span class="op" id="6699756">)</span><span class="op" id="6699757">.</span><span class="ident" id="6699758"><a href="/gostd/net/mockicmp_test.go.html#6715835">Marshal</a></span><span class="op" id="6699765">(</span><span class="op" id="6699766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699770">if</span>&nbsp;<span class="ident" id="6699773"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6699777">!=</span>&nbsp;<span class="builtintype" id="6699780">nil</span>&nbsp;<span class="op" id="6699784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699789"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699790">.</span><span class="ident" id="6699791"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6699797">(</span><span class="string" id="6699798">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6699830">,</span>&nbsp;<span class="ident" id="6699832"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span><span class="op" id="6699835">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699843">if</span>&nbsp;<span class="ident" id="6699846">_</span><span class="op" id="6699847">,</span>&nbsp;<span class="ident" id="6699849">err</span>&nbsp;<span class="op" id="6699853">:=</span>&nbsp;<span class="ident" id="6699856"><a href="/gostd/net/ipraw_test.go.html#6699310">c</a></span><span class="op" id="6699857">.</span><span class="ident" id="6699858"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6699863">(</span><span class="ident" id="6699864"><a href="/gostd/net/ipraw_test.go.html#6699595">wb</a></span><span class="op" id="6699866">)</span><span class="op" id="6699867">;</span>&nbsp;<span class="ident" id="6699869"><a href="/gostd/net/ipraw_test.go.html#6699849">err</a></span>&nbsp;<span class="op" id="6699873">!=</span>&nbsp;<span class="builtintype" id="6699876">nil</span>&nbsp;<span class="op" id="6699880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699885"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6699886">.</span><span class="ident" id="6699887"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6699893">(</span><span class="string" id="6699894">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6699917">,</span>&nbsp;<span class="ident" id="6699919"><a href="/gostd/net/ipraw_test.go.html#6699849">err</a></span><span class="op" id="6699922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6699926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699930">var</span>&nbsp;<span class="ident" id="6699934">m</span>&nbsp;<span class="op" id="6699936">*</span><span class="ident" id="6699937"><a href="/gostd/net/mockicmp_test.go.html#6715435">icmpMessage</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6699951">rb</span>&nbsp;<span class="op" id="6699954">:=</span>&nbsp;<span class="builtinfunc" id="6699957">make</span><span class="op" id="6699961">(</span><span class="op" id="6699962">[</span><span class="op" id="6699963">]</span><span class="builtintype" id="6699964">byte</span><span class="op" id="6699968">,</span>&nbsp;<span class="num" id="6699970">20</span><span class="op" id="6699972">+</span><span class="builtinfunc" id="6699973">len</span><span class="op" id="6699976">(</span><span class="ident" id="6699977"><a href="/gostd/net/ipraw_test.go.html#6699595">wb</a></span><span class="op" id="6699979">)</span><span class="op" id="6699980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699984">for</span>&nbsp;<span class="op" id="6699988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6699993">if</span>&nbsp;<span class="ident" id="6699996">_</span><span class="op" id="6699997">,</span>&nbsp;<span class="ident" id="6699999">err</span>&nbsp;<span class="op" id="6700003">:=</span>&nbsp;<span class="ident" id="6700006"><a href="/gostd/net/ipraw_test.go.html#6699310">c</a></span><span class="op" id="6700007">.</span><span class="ident" id="6700008"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6700012">(</span><span class="ident" id="6700013"><a href="/gostd/net/ipraw_test.go.html#6699951">rb</a></span><span class="op" id="6700015">)</span><span class="op" id="6700016">;</span>&nbsp;<span class="ident" id="6700018"><a href="/gostd/net/ipraw_test.go.html#6699999">err</a></span>&nbsp;<span class="op" id="6700022">!=</span>&nbsp;<span class="builtintype" id="6700025">nil</span>&nbsp;<span class="op" id="6700029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700035"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6700036">.</span><span class="ident" id="6700037"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700043">(</span><span class="string" id="6700044">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6700066">,</span>&nbsp;<span class="ident" id="6700068"><a href="/gostd/net/ipraw_test.go.html#6699999">err</a></span><span class="op" id="6700071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700076">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700081">if</span>&nbsp;<span class="ident" id="6700084"><a href="/gostd/net/ipraw_test.go.html#6699152">net</a></span>&nbsp;<span class="op" id="6700088">==</span>&nbsp;<span class="string" id="6700091">&#34;ip4&#34;</span>&nbsp;<span class="op" id="6700097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700103"><a href="/gostd/net/ipraw_test.go.html#6699951">rb</a></span>&nbsp;<span class="op" id="6700106">=</span>&nbsp;<span class="ident" id="6700108"><a href="/gostd/net/ipraw_test.go.html#6702425">ipv4Payload</a></span><span class="op" id="6700119">(</span><span class="ident" id="6700120"><a href="/gostd/net/ipraw_test.go.html#6699951">rb</a></span><span class="op" id="6700122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700132">if</span>&nbsp;<span class="ident" id="6700135"><a href="/gostd/net/ipraw_test.go.html#6699934">m</a></span><span class="op" id="6700136">,</span>&nbsp;<span class="ident" id="6700138"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6700142">=</span>&nbsp;<span class="ident" id="6700144"><a href="/gostd/net/mockicmp_test.go.html#6716559">parseICMPMessage</a></span><span class="op" id="6700160">(</span><span class="ident" id="6700161"><a href="/gostd/net/ipraw_test.go.html#6699951">rb</a></span><span class="op" id="6700163">)</span><span class="op" id="6700164">;</span>&nbsp;<span class="ident" id="6700166"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span>&nbsp;<span class="op" id="6700170">!=</span>&nbsp;<span class="builtintype" id="6700173">nil</span>&nbsp;<span class="op" id="6700177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700183"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6700184">.</span><span class="ident" id="6700185"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700191">(</span><span class="string" id="6700192">&#34;parseICMPMessage&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6700221">,</span>&nbsp;<span class="ident" id="6700223"><a href="/gostd/net/ipraw_test.go.html#6699160">err</a></span><span class="op" id="6700226">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700236">switch</span>&nbsp;<span class="ident" id="6700243"><a href="/gostd/net/ipraw_test.go.html#6699934">m</a></span><span class="op" id="6700244">.</span><span class="ident" id="6700245"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span>&nbsp;<span class="op" id="6700250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700255">case</span>&nbsp;<span class="ident" id="6700260"><a href="/gostd/net/mockicmp_test.go.html#6715289">icmpv4EchoRequest</a></span><span class="op" id="6700277">,</span>&nbsp;<span class="ident" id="6700279"><a href="/gostd/net/mockicmp_test.go.html#6715335">icmpv6EchoRequest</a></span><span class="op" id="6700296">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700302">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700314">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700319">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700331">switch</span>&nbsp;<span class="ident" id="6700338">p</span>&nbsp;<span class="op" id="6700340">:=</span>&nbsp;<span class="ident" id="6700343"><a href="/gostd/net/ipraw_test.go.html#6699934">m</a></span><span class="op" id="6700344">.</span><span class="ident" id="6700345"><a href="/gostd/net/mockicmp_test.go.html#6715563">Body</a></span><span class="op" id="6700349">.</span><span class="op" id="6700350">(</span><span class="keyword" id="6700351">type</span><span class="op" id="6700355">)</span>&nbsp;<span class="op" id="6700357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700361">case</span>&nbsp;<span class="op" id="6700366">*</span><span class="ident" id="6700367"><a href="/gostd/net/mockicmp_test.go.html#6717093">icmpEcho</a></span><span class="op" id="6700375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700380">if</span>&nbsp;<span class="ident" id="6700383"><a href="/gostd/net/ipraw_test.go.html#6700338">p</a></span><span class="op" id="6700384">.</span><span class="ident" id="6700385"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span>&nbsp;<span class="op" id="6700388">!=</span>&nbsp;<span class="ident" id="6700391"><a href="/gostd/net/ipraw_test.go.html#6699556">xid</a></span>&nbsp;<span class="op" id="6700395">||</span>&nbsp;<span class="ident" id="6700398"><a href="/gostd/net/ipraw_test.go.html#6700338">p</a></span><span class="op" id="6700399">.</span><span class="ident" id="6700400"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span>&nbsp;<span class="op" id="6700404">!=</span>&nbsp;<span class="ident" id="6700407"><a href="/gostd/net/ipraw_test.go.html#6699561">xseq</a></span>&nbsp;<span class="op" id="6700412">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700418"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6700419">.</span><span class="ident" id="6700420"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700426">(</span><span class="string" id="6700427">&#34;got&nbsp;id=%v,&nbsp;seqnum=%v;&nbsp;expected&nbsp;id=%v,&nbsp;seqnum=%v&#34;</span><span class="op" id="6700476">,</span>&nbsp;<span class="ident" id="6700478"><a href="/gostd/net/ipraw_test.go.html#6700338">p</a></span><span class="op" id="6700479">.</span><span class="ident" id="6700480"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span><span class="op" id="6700482">,</span>&nbsp;<span class="ident" id="6700484"><a href="/gostd/net/ipraw_test.go.html#6700338">p</a></span><span class="op" id="6700485">.</span><span class="ident" id="6700486"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span><span class="op" id="6700489">,</span>&nbsp;<span class="ident" id="6700491"><a href="/gostd/net/ipraw_test.go.html#6699556">xid</a></span><span class="op" id="6700494">,</span>&nbsp;<span class="ident" id="6700496"><a href="/gostd/net/ipraw_test.go.html#6699561">xseq</a></span><span class="op" id="6700500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700509">default</span><span class="op" id="6700516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700521"><a href="/gostd/net/ipraw_test.go.html#6699026">t</a></span><span class="op" id="6700522">.</span><span class="ident" id="6700523"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700529">(</span><span class="string" id="6700530">&#34;got&nbsp;type=%v,&nbsp;code=%v;&nbsp;expected&nbsp;type=%v,&nbsp;code=%v&#34;</span><span class="op" id="6700579">,</span>&nbsp;<span class="ident" id="6700581"><a href="/gostd/net/ipraw_test.go.html#6699934">m</a></span><span class="op" id="6700582">.</span><span class="ident" id="6700583"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span><span class="op" id="6700587">,</span>&nbsp;<span class="ident" id="6700589"><a href="/gostd/net/ipraw_test.go.html#6699934">m</a></span><span class="op" id="6700590">.</span><span class="ident" id="6700591"><a href="/gostd/net/mockicmp_test.go.html#6715491">Code</a></span><span class="op" id="6700595">,</span>&nbsp;<span class="ident" id="6700597"><a href="/gostd/net/ipraw_test.go.html#6699478">typ</a></span><span class="op" id="6700600">,</span>&nbsp;<span class="num" id="6700602">0</span><span class="op" id="6700603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700607">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700610">}</span><br>
<span class="lineno"></span><span class="op" id="6700612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6700615">func</span>&nbsp;<span class="ident" id="6700620">TestPacketConnICMPEcho</span><span class="op" id="6700642">(</span><span class="ident" id="6700643">t</span>&nbsp;<span class="op" id="6700645">*</span><span class="ident" id="6700646"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6700653">.</span><span class="ident" id="6700654"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6700655">)</span>&nbsp;<span class="op" id="6700657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700660">if</span>&nbsp;<span class="ident" id="6700663">skip</span><span class="op" id="6700667">,</span>&nbsp;<span class="ident" id="6700669">skipmsg</span>&nbsp;<span class="op" id="6700677">:=</span>&nbsp;<span class="ident" id="6700680"><a href="/gostd/net/ipraw_test.go.html#6698254">skipRawSocketTest</a></span><span class="op" id="6700697">(</span><span class="ident" id="6700698"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6700699">)</span><span class="op" id="6700700">;</span>&nbsp;<span class="ident" id="6700702"><a href="/gostd/net/ipraw_test.go.html#6700663">skip</a></span>&nbsp;<span class="op" id="6700707">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700711"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6700712">.</span><span class="ident" id="6700713"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6700717">(</span><span class="ident" id="6700718"><a href="/gostd/net/ipraw_test.go.html#6700669">skipmsg</a></span><span class="op" id="6700725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700732">for</span>&nbsp;<span class="ident" id="6700736">i</span><span class="op" id="6700737">,</span>&nbsp;<span class="ident" id="6700739">tt</span>&nbsp;<span class="op" id="6700742">:=</span>&nbsp;<span class="keyword" id="6700745">range</span>&nbsp;<span class="ident" id="6700751"><a href="/gostd/net/ipraw_test.go.html#6698857">icmpEchoTests</a></span>&nbsp;<span class="op" id="6700765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700769">net</span><span class="op" id="6700772">,</span>&nbsp;<span class="ident" id="6700774">_</span><span class="op" id="6700775">,</span>&nbsp;<span class="ident" id="6700777">err</span>&nbsp;<span class="op" id="6700781">:=</span>&nbsp;<span class="ident" id="6700784"><a href="/gostd/net/dial.go.html#3201440">parseNetwork</a></span><span class="op" id="6700796">(</span><span class="ident" id="6700797"><a href="/gostd/net/ipraw_test.go.html#6700739">tt</a></span><span class="op" id="6700799">.</span><span class="ident" id="6700800"><a href="/gostd/net/ipraw_test.go.html#6698885">net</a></span><span class="op" id="6700803">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700807">if</span>&nbsp;<span class="ident" id="6700810"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6700814">!=</span>&nbsp;<span class="builtintype" id="6700817">nil</span>&nbsp;<span class="op" id="6700821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700826"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6700827">.</span><span class="ident" id="6700828"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700834">(</span><span class="string" id="6700835">&#34;parseNetwork&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6700860">,</span>&nbsp;<span class="ident" id="6700862"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span><span class="op" id="6700865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700873">if</span>&nbsp;<span class="ident" id="6700876"><a href="/gostd/net/ipraw_test.go.html#6700769">net</a></span>&nbsp;<span class="op" id="6700880">==</span>&nbsp;<span class="string" id="6700883">&#34;ip6&#34;</span>&nbsp;<span class="op" id="6700889">&amp;&amp;</span>&nbsp;<span class="op" id="6700892">!</span><span class="ident" id="6700893"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6700906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700911">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6700922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700927">c</span><span class="op" id="6700928">,</span>&nbsp;<span class="ident" id="6700930"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6700934">:=</span>&nbsp;<span class="ident" id="6700937"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6700949">(</span><span class="ident" id="6700950"><a href="/gostd/net/ipraw_test.go.html#6700739">tt</a></span><span class="op" id="6700952">.</span><span class="ident" id="6700953"><a href="/gostd/net/ipraw_test.go.html#6698885">net</a></span><span class="op" id="6700956">,</span>&nbsp;<span class="ident" id="6700958"><a href="/gostd/net/ipraw_test.go.html#6700739">tt</a></span><span class="op" id="6700960">.</span><span class="ident" id="6700961"><a href="/gostd/net/ipraw_test.go.html#6698899">laddr</a></span><span class="op" id="6700966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6700970">if</span>&nbsp;<span class="ident" id="6700973"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6700977">!=</span>&nbsp;<span class="builtintype" id="6700980">nil</span>&nbsp;<span class="op" id="6700984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6700989"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6700990">.</span><span class="ident" id="6700991"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6700997">(</span><span class="string" id="6700998">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6701023">,</span>&nbsp;<span class="ident" id="6701025"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span><span class="op" id="6701028">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701036"><a href="/gostd/net/ipraw_test.go.html#6700927">c</a></span><span class="op" id="6701037">.</span><span class="ident" id="6701038"><a href="/gostd/net/net.go.html#3339842">SetDeadline</a></span><span class="op" id="6701049">(</span><span class="ident" id="6701050"><a href="/gostd/net/ipraw_test.go.html#6696447">time</a></span><span class="op" id="6701054">.</span><span class="ident" id="6701055"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6701058">(</span><span class="op" id="6701059">)</span><span class="op" id="6701060">.</span><span class="ident" id="6701061"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6701064">(</span><span class="num" id="6701065">100</span>&nbsp;<span class="op" id="6701069">*</span>&nbsp;<span class="ident" id="6701071"><a href="/gostd/net/ipraw_test.go.html#6696447">time</a></span><span class="op" id="6701075">.</span><span class="ident" id="6701076"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6701087">)</span><span class="op" id="6701088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701092">defer</span>&nbsp;<span class="ident" id="6701098"><a href="/gostd/net/ipraw_test.go.html#6700927">c</a></span><span class="op" id="6701099">.</span><span class="ident" id="6701100"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6701105">(</span><span class="op" id="6701106">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701111">ra</span><span class="op" id="6701113">,</span>&nbsp;<span class="ident" id="6701115"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701119">:=</span>&nbsp;<span class="ident" id="6701122"><a href="/gostd/net/iprawsock.go.html#3301707">ResolveIPAddr</a></span><span class="op" id="6701135">(</span><span class="ident" id="6701136"><a href="/gostd/net/ipraw_test.go.html#6700739">tt</a></span><span class="op" id="6701138">.</span><span class="ident" id="6701139"><a href="/gostd/net/ipraw_test.go.html#6698885">net</a></span><span class="op" id="6701142">,</span>&nbsp;<span class="ident" id="6701144"><a href="/gostd/net/ipraw_test.go.html#6700739">tt</a></span><span class="op" id="6701146">.</span><span class="ident" id="6701147"><a href="/gostd/net/ipraw_test.go.html#6698913">raddr</a></span><span class="op" id="6701152">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701156">if</span>&nbsp;<span class="ident" id="6701159"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701163">!=</span>&nbsp;<span class="builtintype" id="6701166">nil</span>&nbsp;<span class="op" id="6701170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701175"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6701176">.</span><span class="ident" id="6701177"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6701183">(</span><span class="string" id="6701184">&#34;ResolveIPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6701210">,</span>&nbsp;<span class="ident" id="6701212"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span><span class="op" id="6701215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701223">typ</span>&nbsp;<span class="op" id="6701227">:=</span>&nbsp;<span class="ident" id="6701230"><a href="/gostd/net/mockicmp_test.go.html#6715289">icmpv4EchoRequest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701250">if</span>&nbsp;<span class="ident" id="6701253"><a href="/gostd/net/ipraw_test.go.html#6700769">net</a></span>&nbsp;<span class="op" id="6701257">==</span>&nbsp;<span class="string" id="6701260">&#34;ip6&#34;</span>&nbsp;<span class="op" id="6701266">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701271"><a href="/gostd/net/ipraw_test.go.html#6701223">typ</a></span>&nbsp;<span class="op" id="6701275">=</span>&nbsp;<span class="ident" id="6701277"><a href="/gostd/net/mockicmp_test.go.html#6715335">icmpv6EchoRequest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701301">xid</span><span class="op" id="6701304">,</span>&nbsp;<span class="ident" id="6701306">xseq</span>&nbsp;<span class="op" id="6701311">:=</span>&nbsp;<span class="ident" id="6701314"><a href="/gostd/net/ipraw_test.go.html#6696408">os</a></span><span class="op" id="6701316">.</span><span class="ident" id="6701317"><a href="/gostd/os/exec.go.html#2435259">Getpid</a></span><span class="op" id="6701323">(</span><span class="op" id="6701324">)</span><span class="op" id="6701325">&amp;</span><span class="num" id="6701326">0xffff</span><span class="op" id="6701332">,</span>&nbsp;<span class="ident" id="6701334"><a href="/gostd/net/ipraw_test.go.html#6700736">i</a></span><span class="op" id="6701335">+</span><span class="num" id="6701336">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701340">wb</span><span class="op" id="6701342">,</span>&nbsp;<span class="ident" id="6701344"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701348">:=</span>&nbsp;<span class="op" id="6701351">(</span><span class="op" id="6701352">&amp;</span><span class="ident" id="6701353"><a href="/gostd/net/mockicmp_test.go.html#6715435">icmpMessage</a></span><span class="op" id="6701364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701369"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span><span class="op" id="6701373">:</span>&nbsp;<span class="ident" id="6701375"><a href="/gostd/net/ipraw_test.go.html#6701223">typ</a></span><span class="op" id="6701378">,</span>&nbsp;<span class="ident" id="6701380"><a href="/gostd/net/mockicmp_test.go.html#6715491">Code</a></span><span class="op" id="6701384">:</span>&nbsp;<span class="num" id="6701386">0</span><span class="op" id="6701387">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701392"><a href="/gostd/net/mockicmp_test.go.html#6715563">Body</a></span><span class="op" id="6701396">:</span>&nbsp;<span class="op" id="6701398">&amp;</span><span class="ident" id="6701399"><a href="/gostd/net/mockicmp_test.go.html#6717093">icmpEcho</a></span><span class="op" id="6701407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701413"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span><span class="op" id="6701415">:</span>&nbsp;<span class="ident" id="6701417"><a href="/gostd/net/ipraw_test.go.html#6701301">xid</a></span><span class="op" id="6701420">,</span>&nbsp;<span class="ident" id="6701422"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span><span class="op" id="6701425">:</span>&nbsp;<span class="ident" id="6701427"><a href="/gostd/net/ipraw_test.go.html#6701306">xseq</a></span><span class="op" id="6701431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701437"><a href="/gostd/net/mockicmp_test.go.html#6717171">Data</a></span><span class="op" id="6701441">:</span>&nbsp;<span class="ident" id="6701443"><a href="/gostd/net/ipraw_test.go.html#6696392">bytes</a></span><span class="op" id="6701448">.</span><span class="ident" id="6701449"><a href="/gostd/bytes/bytes.go.html#1405494">Repeat</a></span><span class="op" id="6701455">(</span><span class="op" id="6701456">[</span><span class="op" id="6701457">]</span><span class="builtintype" id="6701458">byte</span><span class="op" id="6701462">(</span><span class="string" id="6701463">&#34;Go&nbsp;Go&nbsp;Gadget&nbsp;Ping!!!&#34;</span><span class="op" id="6701485">)</span><span class="op" id="6701486">,</span>&nbsp;<span class="num" id="6701488">3</span><span class="op" id="6701489">)</span><span class="op" id="6701490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701495">}</span><span class="op" id="6701496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701500">}</span><span class="op" id="6701501">)</span><span class="op" id="6701502">.</span><span class="ident" id="6701503"><a href="/gostd/net/mockicmp_test.go.html#6715835">Marshal</a></span><span class="op" id="6701510">(</span><span class="op" id="6701511">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701515">if</span>&nbsp;<span class="ident" id="6701518"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701522">!=</span>&nbsp;<span class="builtintype" id="6701525">nil</span>&nbsp;<span class="op" id="6701529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701534"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6701535">.</span><span class="ident" id="6701536"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6701542">(</span><span class="string" id="6701543">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6701575">,</span>&nbsp;<span class="ident" id="6701577"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span><span class="op" id="6701580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701588">if</span>&nbsp;<span class="ident" id="6701591">_</span><span class="op" id="6701592">,</span>&nbsp;<span class="ident" id="6701594">err</span>&nbsp;<span class="op" id="6701598">:=</span>&nbsp;<span class="ident" id="6701601"><a href="/gostd/net/ipraw_test.go.html#6700927">c</a></span><span class="op" id="6701602">.</span><span class="ident" id="6701603"><a href="/gostd/net/net.go.html#3339505">WriteTo</a></span><span class="op" id="6701610">(</span><span class="ident" id="6701611"><a href="/gostd/net/ipraw_test.go.html#6701340">wb</a></span><span class="op" id="6701613">,</span>&nbsp;<span class="ident" id="6701615"><a href="/gostd/net/ipraw_test.go.html#6701111">ra</a></span><span class="op" id="6701617">)</span><span class="op" id="6701618">;</span>&nbsp;<span class="ident" id="6701620"><a href="/gostd/net/ipraw_test.go.html#6701594">err</a></span>&nbsp;<span class="op" id="6701624">!=</span>&nbsp;<span class="builtintype" id="6701627">nil</span>&nbsp;<span class="op" id="6701631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701636"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6701637">.</span><span class="ident" id="6701638"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6701644">(</span><span class="string" id="6701645">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6701676">,</span>&nbsp;<span class="ident" id="6701678"><a href="/gostd/net/ipraw_test.go.html#6701594">err</a></span><span class="op" id="6701681">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701689">var</span>&nbsp;<span class="ident" id="6701693">m</span>&nbsp;<span class="op" id="6701695">*</span><span class="ident" id="6701696"><a href="/gostd/net/mockicmp_test.go.html#6715435">icmpMessage</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701710">rb</span>&nbsp;<span class="op" id="6701713">:=</span>&nbsp;<span class="builtinfunc" id="6701716">make</span><span class="op" id="6701720">(</span><span class="op" id="6701721">[</span><span class="op" id="6701722">]</span><span class="builtintype" id="6701723">byte</span><span class="op" id="6701727">,</span>&nbsp;<span class="num" id="6701729">20</span><span class="op" id="6701731">+</span><span class="builtinfunc" id="6701732">len</span><span class="op" id="6701735">(</span><span class="ident" id="6701736"><a href="/gostd/net/ipraw_test.go.html#6701340">wb</a></span><span class="op" id="6701738">)</span><span class="op" id="6701739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701743">for</span>&nbsp;<span class="op" id="6701747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701752">if</span>&nbsp;<span class="ident" id="6701755">_</span><span class="op" id="6701756">,</span>&nbsp;<span class="ident" id="6701758">_</span><span class="op" id="6701759">,</span>&nbsp;<span class="ident" id="6701761">err</span>&nbsp;<span class="op" id="6701765">:=</span>&nbsp;<span class="ident" id="6701768"><a href="/gostd/net/ipraw_test.go.html#6700927">c</a></span><span class="op" id="6701769">.</span><span class="ident" id="6701770"><a href="/gostd/net/net.go.html#3339190">ReadFrom</a></span><span class="op" id="6701778">(</span><span class="ident" id="6701779"><a href="/gostd/net/ipraw_test.go.html#6701710">rb</a></span><span class="op" id="6701781">)</span><span class="op" id="6701782">;</span>&nbsp;<span class="ident" id="6701784"><a href="/gostd/net/ipraw_test.go.html#6701761">err</a></span>&nbsp;<span class="op" id="6701788">!=</span>&nbsp;<span class="builtintype" id="6701791">nil</span>&nbsp;<span class="op" id="6701795">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701801"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6701802">.</span><span class="ident" id="6701803"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6701809">(</span><span class="string" id="6701810">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6701842">,</span>&nbsp;<span class="ident" id="6701844"><a href="/gostd/net/ipraw_test.go.html#6701761">err</a></span><span class="op" id="6701847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6701852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6701857">//&nbsp;See&nbsp;BUG&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6701880">//if&nbsp;net&nbsp;==&nbsp;&#34;ip4&#34;&nbsp;{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6701903">//&nbsp;&nbsp;&nbsp;&nbsp;rb&nbsp;=&nbsp;ipv4Payload(rb)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6701930">//}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6701937">if</span>&nbsp;<span class="ident" id="6701940"><a href="/gostd/net/ipraw_test.go.html#6701693">m</a></span><span class="op" id="6701941">,</span>&nbsp;<span class="ident" id="6701943"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701947">=</span>&nbsp;<span class="ident" id="6701949"><a href="/gostd/net/mockicmp_test.go.html#6716559">parseICMPMessage</a></span><span class="op" id="6701965">(</span><span class="ident" id="6701966"><a href="/gostd/net/ipraw_test.go.html#6701710">rb</a></span><span class="op" id="6701968">)</span><span class="op" id="6701969">;</span>&nbsp;<span class="ident" id="6701971"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span>&nbsp;<span class="op" id="6701975">!=</span>&nbsp;<span class="builtintype" id="6701978">nil</span>&nbsp;<span class="op" id="6701982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6701988"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6701989">.</span><span class="ident" id="6701990"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6701996">(</span><span class="string" id="6701997">&#34;parseICMPMessage&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6702026">,</span>&nbsp;<span class="ident" id="6702028"><a href="/gostd/net/ipraw_test.go.html#6700777">err</a></span><span class="op" id="6702031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702041">switch</span>&nbsp;<span class="ident" id="6702048"><a href="/gostd/net/ipraw_test.go.html#6701693">m</a></span><span class="op" id="6702049">.</span><span class="ident" id="6702050"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span>&nbsp;<span class="op" id="6702055">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702060">case</span>&nbsp;<span class="ident" id="6702065"><a href="/gostd/net/mockicmp_test.go.html#6715289">icmpv4EchoRequest</a></span><span class="op" id="6702082">,</span>&nbsp;<span class="ident" id="6702084"><a href="/gostd/net/mockicmp_test.go.html#6715335">icmpv6EchoRequest</a></span><span class="op" id="6702101">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702107">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702124">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702132">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702136">switch</span>&nbsp;<span class="ident" id="6702143">p</span>&nbsp;<span class="op" id="6702145">:=</span>&nbsp;<span class="ident" id="6702148"><a href="/gostd/net/ipraw_test.go.html#6701693">m</a></span><span class="op" id="6702149">.</span><span class="ident" id="6702150"><a href="/gostd/net/mockicmp_test.go.html#6715563">Body</a></span><span class="op" id="6702154">.</span><span class="op" id="6702155">(</span><span class="keyword" id="6702156">type</span><span class="op" id="6702160">)</span>&nbsp;<span class="op" id="6702162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702166">case</span>&nbsp;<span class="op" id="6702171">*</span><span class="ident" id="6702172"><a href="/gostd/net/mockicmp_test.go.html#6717093">icmpEcho</a></span><span class="op" id="6702180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702185">if</span>&nbsp;<span class="ident" id="6702188"><a href="/gostd/net/ipraw_test.go.html#6702143">p</a></span><span class="op" id="6702189">.</span><span class="ident" id="6702190"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span>&nbsp;<span class="op" id="6702193">!=</span>&nbsp;<span class="ident" id="6702196"><a href="/gostd/net/ipraw_test.go.html#6701301">xid</a></span>&nbsp;<span class="op" id="6702200">||</span>&nbsp;<span class="ident" id="6702203"><a href="/gostd/net/ipraw_test.go.html#6702143">p</a></span><span class="op" id="6702204">.</span><span class="ident" id="6702205"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span>&nbsp;<span class="op" id="6702209">!=</span>&nbsp;<span class="ident" id="6702212"><a href="/gostd/net/ipraw_test.go.html#6701306">xseq</a></span>&nbsp;<span class="op" id="6702217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702223"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6702224">.</span><span class="ident" id="6702225"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6702231">(</span><span class="string" id="6702232">&#34;got&nbsp;id=%v,&nbsp;seqnum=%v;&nbsp;expected&nbsp;id=%v,&nbsp;seqnum=%v&#34;</span><span class="op" id="6702281">,</span>&nbsp;<span class="ident" id="6702283"><a href="/gostd/net/ipraw_test.go.html#6702143">p</a></span><span class="op" id="6702284">.</span><span class="ident" id="6702285"><a href="/gostd/net/mockicmp_test.go.html#6717112">ID</a></span><span class="op" id="6702287">,</span>&nbsp;<span class="ident" id="6702289"><a href="/gostd/net/ipraw_test.go.html#6702143">p</a></span><span class="op" id="6702290">.</span><span class="ident" id="6702291"><a href="/gostd/net/mockicmp_test.go.html#6717139">Seq</a></span><span class="op" id="6702294">,</span>&nbsp;<span class="ident" id="6702296"><a href="/gostd/net/ipraw_test.go.html#6701301">xid</a></span><span class="op" id="6702299">,</span>&nbsp;<span class="ident" id="6702301"><a href="/gostd/net/ipraw_test.go.html#6701306">xseq</a></span><span class="op" id="6702305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702310">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702314">default</span><span class="op" id="6702321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702326"><a href="/gostd/net/ipraw_test.go.html#6700643">t</a></span><span class="op" id="6702327">.</span><span class="ident" id="6702328"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6702334">(</span><span class="string" id="6702335">&#34;got&nbsp;type=%v,&nbsp;code=%v;&nbsp;expected&nbsp;type=%v,&nbsp;code=%v&#34;</span><span class="op" id="6702384">,</span>&nbsp;<span class="ident" id="6702386"><a href="/gostd/net/ipraw_test.go.html#6701693">m</a></span><span class="op" id="6702387">.</span><span class="ident" id="6702388"><a href="/gostd/net/mockicmp_test.go.html#6715457">Type</a></span><span class="op" id="6702392">,</span>&nbsp;<span class="ident" id="6702394"><a href="/gostd/net/ipraw_test.go.html#6701693">m</a></span><span class="op" id="6702395">.</span><span class="ident" id="6702396"><a href="/gostd/net/mockicmp_test.go.html#6715491">Code</a></span><span class="op" id="6702400">,</span>&nbsp;<span class="ident" id="6702402"><a href="/gostd/net/ipraw_test.go.html#6701223">typ</a></span><span class="op" id="6702405">,</span>&nbsp;<span class="num" id="6702407">0</span><span class="op" id="6702408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702415">}</span><br>
<span class="lineno"></span><span class="op" id="6702417">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="6702420">func</span>&nbsp;<span class="ident" id="6702425">ipv4Payload</span><span class="op" id="6702436">(</span><span class="ident" id="6702437">b</span>&nbsp;<span class="op" id="6702439">[</span><span class="op" id="6702440">]</span><span class="builtintype" id="6702441">byte</span><span class="op" id="6702445">)</span>&nbsp;<span class="op" id="6702447">[</span><span class="op" id="6702448">]</span><span class="builtintype" id="6702449">byte</span>&nbsp;<span class="op" id="6702454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702457">if</span>&nbsp;<span class="builtinfunc" id="6702460">len</span><span class="op" id="6702463">(</span><span class="ident" id="6702464"><a href="/gostd/net/ipraw_test.go.html#6702437">b</a></span><span class="op" id="6702465">)</span>&nbsp;<span class="op" id="6702467">&lt;</span>&nbsp;<span class="num" id="6702469">20</span>&nbsp;<span class="op" id="6702472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702476">return</span>&nbsp;<span class="ident" id="6702483"><a href="/gostd/net/ipraw_test.go.html#6702437">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702486">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702489">hdrlen</span>&nbsp;<span class="op" id="6702496">:=</span>&nbsp;<span class="builtintype" id="6702499">int</span><span class="op" id="6702502">(</span><span class="ident" id="6702503"><a href="/gostd/net/ipraw_test.go.html#6702437">b</a></span><span class="op" id="6702504">[</span><span class="num" id="6702505">0</span><span class="op" id="6702506">]</span><span class="op" id="6702507">&amp;</span><span class="num" id="6702508">0x0f</span><span class="op" id="6702512">)</span>&nbsp;<span class="op" id="6702514">&lt;&lt;</span>&nbsp;<span class="num" id="6702517">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702520">return</span>&nbsp;<span class="ident" id="6702527"><a href="/gostd/net/ipraw_test.go.html#6702437">b</a></span><span class="op" id="6702528">[</span><span class="ident" id="6702529"><a href="/gostd/net/ipraw_test.go.html#6702489">hdrlen</a></span><span class="op" id="6702535">:</span><span class="op" id="6702536">]</span><br>
<span class="lineno"></span><span class="op" id="6702538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6702541">var</span>&nbsp;<span class="ident" id="6702545">ipConnLocalNameTests</span>&nbsp;<span class="op" id="6702566">=</span>&nbsp;<span class="op" id="6702568">[</span><span class="op" id="6702569">]</span><span class="keyword" id="6702570">struct</span>&nbsp;<span class="op" id="6702577">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702580">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6702586">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702594">laddr</span>&nbsp;<span class="op" id="6702600">*</span><span class="ident" id="6702601"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><br>
<span class="lineno"></span><span class="op" id="6702608">}</span><span class="op" id="6702609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702612">{</span><span class="string" id="6702613">&#34;ip4:icmp&#34;</span><span class="op" id="6702623">,</span>&nbsp;<span class="op" id="6702625">&amp;</span><span class="ident" id="6702626"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6702632">{</span><span class="ident" id="6702633"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6702635">:</span>&nbsp;<span class="ident" id="6702637"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6702641">(</span><span class="num" id="6702642">127</span><span class="op" id="6702645">,</span>&nbsp;<span class="num" id="6702647">0</span><span class="op" id="6702648">,</span>&nbsp;<span class="num" id="6702650">0</span><span class="op" id="6702651">,</span>&nbsp;<span class="num" id="6702653">1</span><span class="op" id="6702654">)</span><span class="op" id="6702655">}</span><span class="op" id="6702656">}</span><span class="op" id="6702657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702660">{</span><span class="string" id="6702661">&#34;ip4:icmp&#34;</span><span class="op" id="6702671">,</span>&nbsp;<span class="op" id="6702673">&amp;</span><span class="ident" id="6702674"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6702680">{</span><span class="op" id="6702681">}</span><span class="op" id="6702682">}</span><span class="op" id="6702683">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702686">{</span><span class="string" id="6702687">&#34;ip4:icmp&#34;</span><span class="op" id="6702697">,</span>&nbsp;<span class="builtintype" id="6702699">nil</span><span class="op" id="6702702">}</span><span class="op" id="6702703">,</span><br>
<span class="lineno"></span><span class="op" id="6702705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6702708">func</span>&nbsp;<span class="ident" id="6702713">TestIPConnLocalName</span><span class="op" id="6702732">(</span><span class="ident" id="6702733">t</span>&nbsp;<span class="op" id="6702735">*</span><span class="ident" id="6702736"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6702743">.</span><span class="ident" id="6702744"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6702745">)</span>&nbsp;<span class="op" id="6702747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702750">switch</span>&nbsp;<span class="ident" id="6702757"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6702764">.</span><span class="ident" id="6702765"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6702770">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702773">case</span>&nbsp;<span class="string" id="6702778">&#34;nacl&#34;</span><span class="op" id="6702784">,</span>&nbsp;<span class="string" id="6702786">&#34;plan9&#34;</span><span class="op" id="6702793">,</span>&nbsp;<span class="string" id="6702795">&#34;windows&#34;</span><span class="op" id="6702804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702808"><a href="/gostd/net/ipraw_test.go.html#6702733">t</a></span><span class="op" id="6702809">.</span><span class="ident" id="6702810"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6702815">(</span><span class="string" id="6702816">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6702837">,</span>&nbsp;<span class="ident" id="6702839"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6702846">.</span><span class="ident" id="6702847"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6702851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702854">default</span><span class="op" id="6702861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702865">if</span>&nbsp;<span class="ident" id="6702868"><a href="/gostd/net/ipraw_test.go.html#6696408">os</a></span><span class="op" id="6702870">.</span><span class="ident" id="6702871"><a href="/gostd/os/proc.go.html#2468979">Getuid</a></span><span class="op" id="6702877">(</span><span class="op" id="6702878">)</span>&nbsp;<span class="op" id="6702880">!=</span>&nbsp;<span class="num" id="6702883">0</span>&nbsp;<span class="op" id="6702885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702890"><a href="/gostd/net/ipraw_test.go.html#6702733">t</a></span><span class="op" id="6702891">.</span><span class="ident" id="6702892"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6702896">(</span><span class="string" id="6702897">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6702926">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6702933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6702937">for</span>&nbsp;<span class="ident" id="6702941">_</span><span class="op" id="6702942">,</span>&nbsp;<span class="ident" id="6702944">tt</span>&nbsp;<span class="op" id="6702947">:=</span>&nbsp;<span class="keyword" id="6702950">range</span>&nbsp;<span class="ident" id="6702956"><a href="/gostd/net/ipraw_test.go.html#6702545">ipConnLocalNameTests</a></span>&nbsp;<span class="op" id="6702977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6702981">c</span><span class="op" id="6702982">,</span>&nbsp;<span class="ident" id="6702984">err</span>&nbsp;<span class="op" id="6702988">:=</span>&nbsp;<span class="ident" id="6702991"><a href="/gostd/net/iprawsock_posix.go.html#3308696">ListenIP</a></span><span class="op" id="6702999">(</span><span class="ident" id="6703000"><a href="/gostd/net/ipraw_test.go.html#6702944">tt</a></span><span class="op" id="6703002">.</span><span class="ident" id="6703003"><a href="/gostd/net/ipraw_test.go.html#6702580">net</a></span><span class="op" id="6703006">,</span>&nbsp;<span class="ident" id="6703008"><a href="/gostd/net/ipraw_test.go.html#6702944">tt</a></span><span class="op" id="6703010">.</span><span class="ident" id="6703011"><a href="/gostd/net/ipraw_test.go.html#6702594">laddr</a></span><span class="op" id="6703016">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703020">if</span>&nbsp;<span class="ident" id="6703023"><a href="/gostd/net/ipraw_test.go.html#6702984">err</a></span>&nbsp;<span class="op" id="6703027">!=</span>&nbsp;<span class="builtintype" id="6703030">nil</span>&nbsp;<span class="op" id="6703034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703039"><a href="/gostd/net/ipraw_test.go.html#6702733">t</a></span><span class="op" id="6703040">.</span><span class="ident" id="6703041"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6703047">(</span><span class="string" id="6703048">&#34;ListenIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6703069">,</span>&nbsp;<span class="ident" id="6703071"><a href="/gostd/net/ipraw_test.go.html#6702984">err</a></span><span class="op" id="6703074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703082">defer</span>&nbsp;<span class="ident" id="6703088"><a href="/gostd/net/ipraw_test.go.html#6702981">c</a></span><span class="op" id="6703089">.</span><span class="ident" id="6703090"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6703095">(</span><span class="op" id="6703096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703100">if</span>&nbsp;<span class="ident" id="6703103">la</span>&nbsp;<span class="op" id="6703106">:=</span>&nbsp;<span class="ident" id="6703109"><a href="/gostd/net/ipraw_test.go.html#6702981">c</a></span><span class="op" id="6703110">.</span><span class="ident" id="6703111"><a href="/gostd/net/net.go.html#3336818">LocalAddr</a></span><span class="op" id="6703120">(</span><span class="op" id="6703121">)</span><span class="op" id="6703122">;</span>&nbsp;<span class="ident" id="6703124"><a href="/gostd/net/ipraw_test.go.html#6703103">la</a></span>&nbsp;<span class="op" id="6703127">==</span>&nbsp;<span class="builtintype" id="6703130">nil</span>&nbsp;<span class="op" id="6703134">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703139"><a href="/gostd/net/ipraw_test.go.html#6702733">t</a></span><span class="op" id="6703140">.</span><span class="ident" id="6703141"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6703146">(</span><span class="string" id="6703147">&#34;IPConn.LocalAddr&nbsp;failed&#34;</span><span class="op" id="6703172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703179">}</span><br>
<span class="lineno"></span><span class="op" id="6703181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="keyword" id="6703184">func</span>&nbsp;<span class="ident" id="6703189">TestIPConnRemoteName</span><span class="op" id="6703209">(</span><span class="ident" id="6703210">t</span>&nbsp;<span class="op" id="6703212">*</span><span class="ident" id="6703213"><a href="/gostd/net/ipraw_test.go.html#6696436">testing</a></span><span class="op" id="6703220">.</span><span class="ident" id="6703221"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6703222">)</span>&nbsp;<span class="op" id="6703224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703227">switch</span>&nbsp;<span class="ident" id="6703234"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6703241">.</span><span class="ident" id="6703242"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6703247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703250">case</span>&nbsp;<span class="string" id="6703255">&#34;plan9&#34;</span><span class="op" id="6703262">,</span>&nbsp;<span class="string" id="6703264">&#34;windows&#34;</span><span class="op" id="6703273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703277"><a href="/gostd/net/ipraw_test.go.html#6703210">t</a></span><span class="op" id="6703278">.</span><span class="ident" id="6703279"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6703284">(</span><span class="string" id="6703285">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6703306">,</span>&nbsp;<span class="ident" id="6703308"><a href="/gostd/net/ipraw_test.go.html#6696425">runtime</a></span><span class="op" id="6703315">.</span><span class="ident" id="6703316"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6703320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703323">default</span><span class="op" id="6703330">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703334">if</span>&nbsp;<span class="ident" id="6703337"><a href="/gostd/net/ipraw_test.go.html#6696408">os</a></span><span class="op" id="6703339">.</span><span class="ident" id="6703340"><a href="/gostd/os/proc.go.html#2468979">Getuid</a></span><span class="op" id="6703346">(</span><span class="op" id="6703347">)</span>&nbsp;<span class="op" id="6703349">!=</span>&nbsp;<span class="num" id="6703352">0</span>&nbsp;<span class="op" id="6703354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703359"><a href="/gostd/net/ipraw_test.go.html#6703210">t</a></span><span class="op" id="6703360">.</span><span class="ident" id="6703361"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6703365">(</span><span class="string" id="6703366">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6703395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703406">raddr</span>&nbsp;<span class="op" id="6703412">:=</span>&nbsp;<span class="op" id="6703415">&amp;</span><span class="ident" id="6703416"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6703422">{</span><span class="ident" id="6703423"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6703425">:</span>&nbsp;<span class="ident" id="6703427"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6703431">(</span><span class="num" id="6703432">127</span><span class="op" id="6703435">,</span>&nbsp;<span class="num" id="6703437">0</span><span class="op" id="6703438">,</span>&nbsp;<span class="num" id="6703440">0</span><span class="op" id="6703441">,</span>&nbsp;<span class="num" id="6703443">1</span><span class="op" id="6703444">)</span><span class="op" id="6703445">.</span><span class="ident" id="6703446"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="6703449">(</span><span class="op" id="6703450">)</span><span class="op" id="6703451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703454">c</span><span class="op" id="6703455">,</span>&nbsp;<span class="ident" id="6703457">err</span>&nbsp;<span class="op" id="6703461">:=</span>&nbsp;<span class="ident" id="6703464"><a href="/gostd/net/iprawsock_posix.go.html#3307657">DialIP</a></span><span class="op" id="6703470">(</span><span class="string" id="6703471">&#34;ip:tcp&#34;</span><span class="op" id="6703479">,</span>&nbsp;<span class="op" id="6703481">&amp;</span><span class="ident" id="6703482"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="6703488">{</span><span class="ident" id="6703489"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="6703491">:</span>&nbsp;<span class="ident" id="6703493"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="6703497">(</span><span class="num" id="6703498">127</span><span class="op" id="6703501">,</span>&nbsp;<span class="num" id="6703503">0</span><span class="op" id="6703504">,</span>&nbsp;<span class="num" id="6703506">0</span><span class="op" id="6703507">,</span>&nbsp;<span class="num" id="6703509">1</span><span class="op" id="6703510">)</span><span class="op" id="6703511">}</span><span class="op" id="6703512">,</span>&nbsp;<span class="ident" id="6703514"><a href="/gostd/net/ipraw_test.go.html#6703406">raddr</a></span><span class="op" id="6703519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703522">if</span>&nbsp;<span class="ident" id="6703525"><a href="/gostd/net/ipraw_test.go.html#6703457">err</a></span>&nbsp;<span class="op" id="6703529">!=</span>&nbsp;<span class="builtintype" id="6703532">nil</span>&nbsp;<span class="op" id="6703536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703540"><a href="/gostd/net/ipraw_test.go.html#6703210">t</a></span><span class="op" id="6703541">.</span><span class="ident" id="6703542"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6703548">(</span><span class="string" id="6703549">&#34;DialIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6703568">,</span>&nbsp;<span class="ident" id="6703570"><a href="/gostd/net/ipraw_test.go.html#6703457">err</a></span><span class="op" id="6703573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703576">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703579">defer</span>&nbsp;<span class="ident" id="6703585"><a href="/gostd/net/ipraw_test.go.html#6703454">c</a></span><span class="op" id="6703586">.</span><span class="ident" id="6703587"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6703592">(</span><span class="op" id="6703593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6703596">if</span>&nbsp;<span class="op" id="6703599">!</span><span class="ident" id="6703600"><a href="/gostd/net/ipraw_test.go.html#6696414">reflect</a></span><span class="op" id="6703607">.</span><span class="ident" id="6703608"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="6703617">(</span><span class="ident" id="6703618"><a href="/gostd/net/ipraw_test.go.html#6703406">raddr</a></span><span class="op" id="6703623">,</span>&nbsp;<span class="ident" id="6703625"><a href="/gostd/net/ipraw_test.go.html#6703454">c</a></span><span class="op" id="6703626">.</span><span class="ident" id="6703627"><a href="/gostd/net/net.go.html#3336954">RemoteAddr</a></span><span class="op" id="6703637">(</span><span class="op" id="6703638">)</span><span class="op" id="6703639">)</span>&nbsp;<span class="op" id="6703641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6703645"><a href="/gostd/net/ipraw_test.go.html#6703210">t</a></span><span class="op" id="6703646">.</span><span class="ident" id="6703647"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6703653">(</span><span class="string" id="6703654">&#34;got&nbsp;%#v,&nbsp;expected&nbsp;%#v&#34;</span><span class="op" id="6703677">,</span>&nbsp;<span class="ident" id="6703679"><a href="/gostd/net/ipraw_test.go.html#6703454">c</a></span><span class="op" id="6703680">.</span><span class="ident" id="6703681"><a href="/gostd/net/net.go.html#3336954">RemoteAddr</a></span><span class="op" id="6703691">(</span><span class="op" id="6703692">)</span><span class="op" id="6703693">,</span>&nbsp;<span class="ident" id="6703695"><a href="/gostd/net/ipraw_test.go.html#6703406">raddr</a></span><span class="op" id="6703700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6703703">}</span><br>
<span class="lineno"></span><span class="op" id="6703705">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
