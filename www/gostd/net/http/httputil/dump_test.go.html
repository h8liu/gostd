<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7717370">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7717425">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7717479">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7717530">package</span>&nbsp;<span class="ident" id="7717538">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7717548">import</span>&nbsp;<span class="op" id="7717555">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717558">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717567">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717574">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717580">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717593">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717605">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717616">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717627">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717638">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7717648">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7717651">type</span>&nbsp;<span class="ident" id="7717656">dumpTest</span>&nbsp;<span class="keyword" id="7717665">struct</span>&nbsp;<span class="op" id="7717672">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717675">Req</span>&nbsp;&nbsp;<span class="ident" id="7717680">http</span><span class="op" id="7717684">.</span><span class="ident" id="7717685">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717694">Body</span>&nbsp;<span class="keyword" id="7717699">interface</span><span class="op" id="7717708">{</span><span class="op" id="7717709">}</span>&nbsp;<span class="comment" id="7717711">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717777">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7717789">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717797">WantDumpOut</span>&nbsp;<span class="builtintype" id="7717809">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717817">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7717829">bool</span>&nbsp;<span class="comment" id="7717834">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7717882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7717885">var</span>&nbsp;<span class="ident" id="7717889">dumpTests</span>&nbsp;<span class="op" id="7717899">=</span>&nbsp;<span class="op" id="7717901">[</span><span class="op" id="7717902">]</span><span class="ident" id="7717903">dumpTest</span><span class="op" id="7717911">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717915">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717971">Req</span><span class="op" id="7717974">:</span>&nbsp;<span class="ident" id="7717976">http</span><span class="op" id="7717980">.</span><span class="ident" id="7717981">Request</span><span class="op" id="7717988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717993">Method</span><span class="op" id="7717999">:</span>&nbsp;<span class="string" id="7718001">&#34;GET&#34;</span><span class="op" id="7718006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718011">URL</span><span class="op" id="7718014">:</span>&nbsp;<span class="op" id="7718016">&amp;</span><span class="ident" id="7718017">url</span><span class="op" id="7718020">.</span><span class="ident" id="7718021">URL</span><span class="op" id="7718024">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718030">Scheme</span><span class="op" id="7718036">:</span>&nbsp;<span class="string" id="7718038">&#34;http&#34;</span><span class="op" id="7718044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718050">Host</span><span class="op" id="7718054">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7718058">&#34;www.google.com&#34;</span><span class="op" id="7718074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718080">Path</span><span class="op" id="7718084">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7718088">&#34;/search&#34;</span><span class="op" id="7718097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718102">}</span><span class="op" id="7718103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718108">ProtoMajor</span><span class="op" id="7718118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7718126">1</span><span class="op" id="7718127">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718132">ProtoMinor</span><span class="op" id="7718142">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7718150">1</span><span class="op" id="7718151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718156">TransferEncoding</span><span class="op" id="7718172">:</span>&nbsp;<span class="op" id="7718174">[</span><span class="op" id="7718175">]</span><span class="builtintype" id="7718176">string</span><span class="op" id="7718182">{</span><span class="string" id="7718183">&#34;chunked&#34;</span><span class="op" id="7718192">}</span><span class="op" id="7718193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718197">}</span><span class="op" id="7718198">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718203">Body</span><span class="op" id="7718207">:</span>&nbsp;<span class="op" id="7718209">[</span><span class="op" id="7718210">]</span><span class="builtintype" id="7718211">byte</span><span class="op" id="7718215">(</span><span class="string" id="7718216">&#34;abcdef&#34;</span><span class="op" id="7718224">)</span><span class="op" id="7718225">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718230">WantDump</span><span class="op" id="7718238">:</span>&nbsp;<span class="string" id="7718240">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7718267">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718272">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7718299">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718304">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7718341">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718346">chunk</span><span class="op" id="7718351">(</span><span class="string" id="7718352">&#34;abcdef&#34;</span><span class="op" id="7718360">)</span>&nbsp;<span class="op" id="7718362">+</span>&nbsp;<span class="ident" id="7718364">chunk</span><span class="op" id="7718369">(</span><span class="string" id="7718370">&#34;&#34;</span><span class="op" id="7718372">)</span><span class="op" id="7718373">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718376">}</span><span class="op" id="7718377">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718381">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718464">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718498">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718502">Req</span><span class="op" id="7718505">:</span>&nbsp;<span class="ident" id="7718507">http</span><span class="op" id="7718511">.</span><span class="ident" id="7718512">Request</span><span class="op" id="7718519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718524">Method</span><span class="op" id="7718530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7718536">&#34;GET&#34;</span><span class="op" id="7718541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718546">URL</span><span class="op" id="7718549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718558">mustParseURL</span><span class="op" id="7718570">(</span><span class="string" id="7718571">&#34;/foo&#34;</span><span class="op" id="7718577">)</span><span class="op" id="7718578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718583">ProtoMajor</span><span class="op" id="7718593">:</span>&nbsp;<span class="num" id="7718595">1</span><span class="op" id="7718596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718601">ProtoMinor</span><span class="op" id="7718611">:</span>&nbsp;<span class="num" id="7718613">0</span><span class="op" id="7718614">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718619">Header</span><span class="op" id="7718625">:</span>&nbsp;<span class="ident" id="7718627">http</span><span class="op" id="7718631">.</span><span class="ident" id="7718632">Header</span><span class="op" id="7718638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718644">&#34;X-Foo&#34;</span><span class="op" id="7718651">:</span>&nbsp;<span class="op" id="7718653">[</span><span class="op" id="7718654">]</span><span class="builtintype" id="7718655">string</span><span class="op" id="7718661">{</span><span class="string" id="7718662">&#34;X-Bar&#34;</span><span class="op" id="7718669">}</span><span class="op" id="7718670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718675">}</span><span class="op" id="7718676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718680">}</span><span class="op" id="7718681">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718686">WantDump</span><span class="op" id="7718694">:</span>&nbsp;<span class="string" id="7718696">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7718720">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718725">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7718747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718750">}</span><span class="op" id="7718751">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718755">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718759">Req</span><span class="op" id="7718762">:</span>&nbsp;<span class="op" id="7718764">*</span><span class="ident" id="7718765">mustNewRequest</span><span class="op" id="7718779">(</span><span class="string" id="7718780">&#34;GET&#34;</span><span class="op" id="7718785">,</span>&nbsp;<span class="string" id="7718787">&#34;http://example.com/foo&#34;</span><span class="op" id="7718811">,</span>&nbsp;<span class="ident" id="7718813">nil</span><span class="op" id="7718816">)</span><span class="op" id="7718817">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718822">WantDumpOut</span><span class="op" id="7718833">:</span>&nbsp;<span class="string" id="7718835">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7718859">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718864">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7718888">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718893">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7718931">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718936">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7718967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718970">}</span><span class="op" id="7718971">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718975">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719039">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719096">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719114">Req</span><span class="op" id="7719117">:</span>&nbsp;<span class="op" id="7719119">*</span><span class="ident" id="7719120">mustNewRequest</span><span class="op" id="7719134">(</span><span class="string" id="7719135">&#34;GET&#34;</span><span class="op" id="7719140">,</span>&nbsp;<span class="string" id="7719142">&#34;https://example.com/foo&#34;</span><span class="op" id="7719167">,</span>&nbsp;<span class="ident" id="7719169">nil</span><span class="op" id="7719172">)</span><span class="op" id="7719173">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719178">WantDumpOut</span><span class="op" id="7719189">:</span>&nbsp;<span class="string" id="7719191">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7719215">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719220">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7719244">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719249">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7719287">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719292">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7719323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719326">}</span><span class="op" id="7719327">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719331">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719389">Req</span><span class="op" id="7719392">:</span>&nbsp;<span class="ident" id="7719394">http</span><span class="op" id="7719398">.</span><span class="ident" id="7719399">Request</span><span class="op" id="7719406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719411">Method</span><span class="op" id="7719417">:</span>&nbsp;<span class="string" id="7719419">&#34;POST&#34;</span><span class="op" id="7719425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719430">URL</span><span class="op" id="7719433">:</span>&nbsp;<span class="op" id="7719435">&amp;</span><span class="ident" id="7719436">url</span><span class="op" id="7719439">.</span><span class="ident" id="7719440">URL</span><span class="op" id="7719443">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719449">Scheme</span><span class="op" id="7719455">:</span>&nbsp;<span class="string" id="7719457">&#34;http&#34;</span><span class="op" id="7719463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719469">Host</span><span class="op" id="7719473">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7719477">&#34;post.tld&#34;</span><span class="op" id="7719487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719493">Path</span><span class="op" id="7719497">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7719501">&#34;/&#34;</span><span class="op" id="7719504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719509">}</span><span class="op" id="7719510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719515">ContentLength</span><span class="op" id="7719528">:</span>&nbsp;<span class="num" id="7719530">6</span><span class="op" id="7719531">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719536">ProtoMajor</span><span class="op" id="7719546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7719551">1</span><span class="op" id="7719552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719557">ProtoMinor</span><span class="op" id="7719567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7719572">1</span><span class="op" id="7719573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719577">}</span><span class="op" id="7719578">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719583">Body</span><span class="op" id="7719587">:</span>&nbsp;<span class="op" id="7719589">[</span><span class="op" id="7719590">]</span><span class="builtintype" id="7719591">byte</span><span class="op" id="7719595">(</span><span class="string" id="7719596">&#34;abcdef&#34;</span><span class="op" id="7719604">)</span><span class="op" id="7719605">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719610">WantDumpOut</span><span class="op" id="7719621">:</span>&nbsp;<span class="string" id="7719623">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7719645">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719650">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7719671">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719676">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7719714">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719719">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7719743">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719748">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7719779">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719784">NoBody</span><span class="op" id="7719790">:</span>&nbsp;<span class="builtintype" id="7719792">true</span><span class="op" id="7719796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719799">}</span><span class="op" id="7719800">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719804">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719859">Req</span><span class="op" id="7719862">:</span>&nbsp;<span class="ident" id="7719864">http</span><span class="op" id="7719868">.</span><span class="ident" id="7719869">Request</span><span class="op" id="7719876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719881">Method</span><span class="op" id="7719887">:</span>&nbsp;<span class="string" id="7719889">&#34;POST&#34;</span><span class="op" id="7719895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719900">URL</span><span class="op" id="7719903">:</span>&nbsp;<span class="op" id="7719905">&amp;</span><span class="ident" id="7719906">url</span><span class="op" id="7719909">.</span><span class="ident" id="7719910">URL</span><span class="op" id="7719913">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719919">Scheme</span><span class="op" id="7719925">:</span>&nbsp;<span class="string" id="7719927">&#34;http&#34;</span><span class="op" id="7719933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719939">Host</span><span class="op" id="7719943">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7719947">&#34;post.tld&#34;</span><span class="op" id="7719957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719963">Path</span><span class="op" id="7719967">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7719971">&#34;/&#34;</span><span class="op" id="7719974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719979">}</span><span class="op" id="7719980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719985">ContentLength</span><span class="op" id="7719998">:</span>&nbsp;<span class="num" id="7720000">8193</span><span class="op" id="7720004">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720009">ProtoMajor</span><span class="op" id="7720019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720024">1</span><span class="op" id="7720025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720030">ProtoMinor</span><span class="op" id="7720040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720045">1</span><span class="op" id="7720046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720050">}</span><span class="op" id="7720051">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720056">Body</span><span class="op" id="7720060">:</span>&nbsp;<span class="ident" id="7720062">bytes</span><span class="op" id="7720067">.</span><span class="ident" id="7720068">Repeat</span><span class="op" id="7720074">(</span><span class="op" id="7720075">[</span><span class="op" id="7720076">]</span><span class="builtintype" id="7720077">byte</span><span class="op" id="7720081">(</span><span class="string" id="7720082">&#34;a&#34;</span><span class="op" id="7720085">)</span><span class="op" id="7720086">,</span>&nbsp;<span class="num" id="7720088">8193</span><span class="op" id="7720092">)</span><span class="op" id="7720093">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720098">WantDumpOut</span><span class="op" id="7720109">:</span>&nbsp;<span class="string" id="7720111">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7720133">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720138">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7720159">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720164">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7720202">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720207">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7720234">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720239">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7720271">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720276">strings</span><span class="op" id="7720283">.</span><span class="ident" id="7720284">Repeat</span><span class="op" id="7720290">(</span><span class="string" id="7720291">&#34;a&#34;</span><span class="op" id="7720294">,</span>&nbsp;<span class="num" id="7720296">8193</span><span class="op" id="7720300">)</span><span class="op" id="7720301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720304">}</span><span class="op" id="7720305">,</span><br>
<span class="lineno"></span><span class="op" id="7720307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7720310">func</span>&nbsp;<span class="ident" id="7720315">TestDumpRequest</span><span class="op" id="7720330">(</span><span class="ident" id="7720331">t</span>&nbsp;<span class="op" id="7720333">*</span><span class="ident" id="7720334">testing</span><span class="op" id="7720341">.</span><span class="ident" id="7720342">T</span><span class="op" id="7720343">)</span>&nbsp;<span class="op" id="7720345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720348">numg0</span>&nbsp;<span class="op" id="7720354">:=</span>&nbsp;<span class="ident" id="7720357">runtime</span><span class="op" id="7720364">.</span><span class="ident" id="7720365">NumGoroutine</span><span class="op" id="7720377">(</span><span class="op" id="7720378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720381">for</span>&nbsp;<span class="ident" id="7720385">i</span><span class="op" id="7720386">,</span>&nbsp;<span class="ident" id="7720388">tt</span>&nbsp;<span class="op" id="7720391">:=</span>&nbsp;<span class="keyword" id="7720394">range</span>&nbsp;<span class="ident" id="7720400">dumpTests</span>&nbsp;<span class="op" id="7720410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720414">setBody</span>&nbsp;<span class="op" id="7720422">:=</span>&nbsp;<span class="keyword" id="7720425">func</span><span class="op" id="7720429">(</span><span class="op" id="7720430">)</span>&nbsp;<span class="op" id="7720432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720437">if</span>&nbsp;<span class="ident" id="7720440">tt</span><span class="op" id="7720442">.</span><span class="ident" id="7720443">Body</span>&nbsp;<span class="op" id="7720448">==</span>&nbsp;<span class="ident" id="7720451">nil</span>&nbsp;<span class="op" id="7720455">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720461">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720476">switch</span>&nbsp;<span class="ident" id="7720483">b</span>&nbsp;<span class="op" id="7720485">:=</span>&nbsp;<span class="ident" id="7720488">tt</span><span class="op" id="7720490">.</span><span class="ident" id="7720491">Body</span><span class="op" id="7720495">.</span><span class="op" id="7720496">(</span><span class="keyword" id="7720497">type</span><span class="op" id="7720501">)</span>&nbsp;<span class="op" id="7720503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720508">case</span>&nbsp;<span class="op" id="7720513">[</span><span class="op" id="7720514">]</span><span class="builtintype" id="7720515">byte</span><span class="op" id="7720519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720525">tt</span><span class="op" id="7720527">.</span><span class="ident" id="7720528">Req</span><span class="op" id="7720531">.</span><span class="ident" id="7720532">Body</span>&nbsp;<span class="op" id="7720537">=</span>&nbsp;<span class="ident" id="7720539">ioutil</span><span class="op" id="7720545">.</span><span class="ident" id="7720546">NopCloser</span><span class="op" id="7720555">(</span><span class="ident" id="7720556">bytes</span><span class="op" id="7720561">.</span><span class="ident" id="7720562">NewReader</span><span class="op" id="7720571">(</span><span class="ident" id="7720572">b</span><span class="op" id="7720573">)</span><span class="op" id="7720574">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720579">case</span>&nbsp;<span class="keyword" id="7720584">func</span><span class="op" id="7720588">(</span><span class="op" id="7720589">)</span>&nbsp;<span class="ident" id="7720591">io</span><span class="op" id="7720593">.</span><span class="ident" id="7720594">ReadCloser</span><span class="op" id="7720604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720610">tt</span><span class="op" id="7720612">.</span><span class="ident" id="7720613">Req</span><span class="op" id="7720616">.</span><span class="ident" id="7720617">Body</span>&nbsp;<span class="op" id="7720622">=</span>&nbsp;<span class="ident" id="7720624">b</span><span class="op" id="7720625">(</span><span class="op" id="7720626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720631">default</span><span class="op" id="7720638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720644">t</span><span class="op" id="7720645">.</span><span class="ident" id="7720646">Fatalf</span><span class="op" id="7720652">(</span><span class="string" id="7720653">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7720686">,</span>&nbsp;<span class="ident" id="7720688">i</span><span class="op" id="7720689">,</span>&nbsp;<span class="ident" id="7720691">tt</span><span class="op" id="7720693">.</span><span class="ident" id="7720694">Body</span><span class="op" id="7720698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720703">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720711">setBody</span><span class="op" id="7720718">(</span><span class="op" id="7720719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720723">if</span>&nbsp;<span class="ident" id="7720726">tt</span><span class="op" id="7720728">.</span><span class="ident" id="7720729">Req</span><span class="op" id="7720732">.</span><span class="ident" id="7720733">Header</span>&nbsp;<span class="op" id="7720740">==</span>&nbsp;<span class="ident" id="7720743">nil</span>&nbsp;<span class="op" id="7720747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720752">tt</span><span class="op" id="7720754">.</span><span class="ident" id="7720755">Req</span><span class="op" id="7720758">.</span><span class="ident" id="7720759">Header</span>&nbsp;<span class="op" id="7720766">=</span>&nbsp;<span class="builtinfunc" id="7720768">make</span><span class="op" id="7720772">(</span><span class="ident" id="7720773">http</span><span class="op" id="7720777">.</span><span class="ident" id="7720778">Header</span><span class="op" id="7720784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720788">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720793">if</span>&nbsp;<span class="ident" id="7720796">tt</span><span class="op" id="7720798">.</span><span class="ident" id="7720799">WantDump</span>&nbsp;<span class="op" id="7720808">!=</span>&nbsp;<span class="string" id="7720811">&#34;&#34;</span>&nbsp;<span class="op" id="7720814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720819">setBody</span><span class="op" id="7720826">(</span><span class="op" id="7720827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720832">dump</span><span class="op" id="7720836">,</span>&nbsp;<span class="ident" id="7720838">err</span>&nbsp;<span class="op" id="7720842">:=</span>&nbsp;<span class="ident" id="7720845">DumpRequest</span><span class="op" id="7720856">(</span><span class="op" id="7720857">&amp;</span><span class="ident" id="7720858">tt</span><span class="op" id="7720860">.</span><span class="ident" id="7720861">Req</span><span class="op" id="7720864">,</span>&nbsp;<span class="op" id="7720866">!</span><span class="ident" id="7720867">tt</span><span class="op" id="7720869">.</span><span class="ident" id="7720870">NoBody</span><span class="op" id="7720876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720881">if</span>&nbsp;<span class="ident" id="7720884">err</span>&nbsp;<span class="op" id="7720888">!=</span>&nbsp;<span class="ident" id="7720891">nil</span>&nbsp;<span class="op" id="7720895">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720901">t</span><span class="op" id="7720902">.</span><span class="ident" id="7720903">Errorf</span><span class="op" id="7720909">(</span><span class="string" id="7720910">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7720931">,</span>&nbsp;<span class="ident" id="7720933">i</span><span class="op" id="7720934">,</span>&nbsp;<span class="ident" id="7720936">err</span><span class="op" id="7720939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720945">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720962">if</span>&nbsp;<span class="builtintype" id="7720965">string</span><span class="op" id="7720971">(</span><span class="ident" id="7720972">dump</span><span class="op" id="7720976">)</span>&nbsp;<span class="op" id="7720978">!=</span>&nbsp;<span class="ident" id="7720981">tt</span><span class="op" id="7720983">.</span><span class="ident" id="7720984">WantDump</span>&nbsp;<span class="op" id="7720993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720999">t</span><span class="op" id="7721000">.</span><span class="ident" id="7721001">Errorf</span><span class="op" id="7721007">(</span><span class="string" id="7721008">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7721052">,</span>&nbsp;<span class="ident" id="7721054">i</span><span class="op" id="7721055">,</span>&nbsp;<span class="ident" id="7721057">tt</span><span class="op" id="7721059">.</span><span class="ident" id="7721060">WantDump</span><span class="op" id="7721068">,</span>&nbsp;<span class="builtintype" id="7721070">string</span><span class="op" id="7721076">(</span><span class="ident" id="7721077">dump</span><span class="op" id="7721081">)</span><span class="op" id="7721082">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721088">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721109">if</span>&nbsp;<span class="ident" id="7721112">tt</span><span class="op" id="7721114">.</span><span class="ident" id="7721115">WantDumpOut</span>&nbsp;<span class="op" id="7721127">!=</span>&nbsp;<span class="string" id="7721130">&#34;&#34;</span>&nbsp;<span class="op" id="7721133">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721138">setBody</span><span class="op" id="7721145">(</span><span class="op" id="7721146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721151">dump</span><span class="op" id="7721155">,</span>&nbsp;<span class="ident" id="7721157">err</span>&nbsp;<span class="op" id="7721161">:=</span>&nbsp;<span class="ident" id="7721164">DumpRequestOut</span><span class="op" id="7721178">(</span><span class="op" id="7721179">&amp;</span><span class="ident" id="7721180">tt</span><span class="op" id="7721182">.</span><span class="ident" id="7721183">Req</span><span class="op" id="7721186">,</span>&nbsp;<span class="op" id="7721188">!</span><span class="ident" id="7721189">tt</span><span class="op" id="7721191">.</span><span class="ident" id="7721192">NoBody</span><span class="op" id="7721198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721203">if</span>&nbsp;<span class="ident" id="7721206">err</span>&nbsp;<span class="op" id="7721210">!=</span>&nbsp;<span class="ident" id="7721213">nil</span>&nbsp;<span class="op" id="7721217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721223">t</span><span class="op" id="7721224">.</span><span class="ident" id="7721225">Errorf</span><span class="op" id="7721231">(</span><span class="string" id="7721232">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7721256">,</span>&nbsp;<span class="ident" id="7721258">i</span><span class="op" id="7721259">,</span>&nbsp;<span class="ident" id="7721261">err</span><span class="op" id="7721264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721270">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721287">if</span>&nbsp;<span class="builtintype" id="7721290">string</span><span class="op" id="7721296">(</span><span class="ident" id="7721297">dump</span><span class="op" id="7721301">)</span>&nbsp;<span class="op" id="7721303">!=</span>&nbsp;<span class="ident" id="7721306">tt</span><span class="op" id="7721308">.</span><span class="ident" id="7721309">WantDumpOut</span>&nbsp;<span class="op" id="7721321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721327">t</span><span class="op" id="7721328">.</span><span class="ident" id="7721329">Errorf</span><span class="op" id="7721335">(</span><span class="string" id="7721336">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7721383">,</span>&nbsp;<span class="ident" id="7721385">i</span><span class="op" id="7721386">,</span>&nbsp;<span class="ident" id="7721388">tt</span><span class="op" id="7721390">.</span><span class="ident" id="7721391">WantDumpOut</span><span class="op" id="7721402">,</span>&nbsp;<span class="builtintype" id="7721404">string</span><span class="op" id="7721410">(</span><span class="ident" id="7721411">dump</span><span class="op" id="7721415">)</span><span class="op" id="7721416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721422">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721434">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721444">if</span>&nbsp;<span class="ident" id="7721447">dg</span>&nbsp;<span class="op" id="7721450">:=</span>&nbsp;<span class="ident" id="7721453">runtime</span><span class="op" id="7721460">.</span><span class="ident" id="7721461">NumGoroutine</span><span class="op" id="7721473">(</span><span class="op" id="7721474">)</span>&nbsp;<span class="op" id="7721476">-</span>&nbsp;<span class="ident" id="7721478">numg0</span><span class="op" id="7721483">;</span>&nbsp;<span class="ident" id="7721485">dg</span>&nbsp;<span class="op" id="7721488">&gt;</span>&nbsp;<span class="num" id="7721490">4</span>&nbsp;<span class="op" id="7721492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721496">buf</span>&nbsp;<span class="op" id="7721500">:=</span>&nbsp;<span class="builtinfunc" id="7721503">make</span><span class="op" id="7721507">(</span><span class="op" id="7721508">[</span><span class="op" id="7721509">]</span><span class="builtintype" id="7721510">byte</span><span class="op" id="7721514">,</span>&nbsp;<span class="num" id="7721516">4096</span><span class="op" id="7721520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721524">buf</span>&nbsp;<span class="op" id="7721528">=</span>&nbsp;<span class="ident" id="7721530">buf</span><span class="op" id="7721533">[</span><span class="op" id="7721534">:</span><span class="ident" id="7721535">runtime</span><span class="op" id="7721542">.</span><span class="ident" id="7721543">Stack</span><span class="op" id="7721548">(</span><span class="ident" id="7721549">buf</span><span class="op" id="7721552">,</span>&nbsp;<span class="builtintype" id="7721554">true</span><span class="op" id="7721558">)</span><span class="op" id="7721559">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721563">t</span><span class="op" id="7721564">.</span><span class="ident" id="7721565">Errorf</span><span class="op" id="7721571">(</span><span class="string" id="7721572">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7721629">,</span>&nbsp;<span class="ident" id="7721631">dg</span><span class="op" id="7721633">,</span>&nbsp;<span class="ident" id="7721635">buf</span><span class="op" id="7721638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721641">}</span><br>
<span class="lineno"></span><span class="op" id="7721643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721646">func</span>&nbsp;<span class="ident" id="7721651">chunk</span><span class="op" id="7721656">(</span><span class="ident" id="7721657">s</span>&nbsp;<span class="builtintype" id="7721659">string</span><span class="op" id="7721665">)</span>&nbsp;<span class="builtintype" id="7721667">string</span>&nbsp;<span class="op" id="7721674">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721677">return</span>&nbsp;<span class="ident" id="7721684">fmt</span><span class="op" id="7721687">.</span><span class="ident" id="7721688">Sprintf</span><span class="op" id="7721695">(</span><span class="string" id="7721696">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7721710">,</span>&nbsp;<span class="builtinfunc" id="7721712">len</span><span class="op" id="7721715">(</span><span class="ident" id="7721716">s</span><span class="op" id="7721717">)</span><span class="op" id="7721718">,</span>&nbsp;<span class="ident" id="7721720">s</span><span class="op" id="7721721">)</span><br>
<span class="lineno"></span><span class="op" id="7721723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721726">func</span>&nbsp;<span class="ident" id="7721731">mustParseURL</span><span class="op" id="7721743">(</span><span class="ident" id="7721744">s</span>&nbsp;<span class="builtintype" id="7721746">string</span><span class="op" id="7721752">)</span>&nbsp;<span class="op" id="7721754">*</span><span class="ident" id="7721755">url</span><span class="op" id="7721758">.</span><span class="ident" id="7721759">URL</span>&nbsp;<span class="op" id="7721763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721766">u</span><span class="op" id="7721767">,</span>&nbsp;<span class="ident" id="7721769">err</span>&nbsp;<span class="op" id="7721773">:=</span>&nbsp;<span class="ident" id="7721776">url</span><span class="op" id="7721779">.</span><span class="ident" id="7721780">Parse</span><span class="op" id="7721785">(</span><span class="ident" id="7721786">s</span><span class="op" id="7721787">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721790">if</span>&nbsp;<span class="ident" id="7721793">err</span>&nbsp;<span class="op" id="7721797">!=</span>&nbsp;<span class="ident" id="7721800">nil</span>&nbsp;<span class="op" id="7721804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7721808">panic</span><span class="op" id="7721813">(</span><span class="ident" id="7721814">fmt</span><span class="op" id="7721817">.</span><span class="ident" id="7721818">Sprintf</span><span class="op" id="7721825">(</span><span class="string" id="7721826">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7721852">,</span>&nbsp;<span class="ident" id="7721854">s</span><span class="op" id="7721855">,</span>&nbsp;<span class="ident" id="7721857">err</span><span class="op" id="7721860">)</span><span class="op" id="7721861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721867">return</span>&nbsp;<span class="ident" id="7721874">u</span><br>
<span class="lineno"></span><span class="op" id="7721876">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7721879">func</span>&nbsp;<span class="ident" id="7721884">mustNewRequest</span><span class="op" id="7721898">(</span><span class="ident" id="7721899">method</span><span class="op" id="7721905">,</span>&nbsp;<span class="ident" id="7721907">url</span>&nbsp;<span class="builtintype" id="7721911">string</span><span class="op" id="7721917">,</span>&nbsp;<span class="ident" id="7721919">body</span>&nbsp;<span class="ident" id="7721924">io</span><span class="op" id="7721926">.</span><span class="ident" id="7721927">Reader</span><span class="op" id="7721933">)</span>&nbsp;<span class="op" id="7721935">*</span><span class="ident" id="7721936">http</span><span class="op" id="7721940">.</span><span class="ident" id="7721941">Request</span>&nbsp;<span class="op" id="7721949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721952">req</span><span class="op" id="7721955">,</span>&nbsp;<span class="ident" id="7721957">err</span>&nbsp;<span class="op" id="7721961">:=</span>&nbsp;<span class="ident" id="7721964">http</span><span class="op" id="7721968">.</span><span class="ident" id="7721969">NewRequest</span><span class="op" id="7721979">(</span><span class="ident" id="7721980">method</span><span class="op" id="7721986">,</span>&nbsp;<span class="ident" id="7721988">url</span><span class="op" id="7721991">,</span>&nbsp;<span class="ident" id="7721993">body</span><span class="op" id="7721997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722000">if</span>&nbsp;<span class="ident" id="7722003">err</span>&nbsp;<span class="op" id="7722007">!=</span>&nbsp;<span class="ident" id="7722010">nil</span>&nbsp;<span class="op" id="7722014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7722018">panic</span><span class="op" id="7722023">(</span><span class="ident" id="7722024">fmt</span><span class="op" id="7722027">.</span><span class="ident" id="7722028">Sprintf</span><span class="op" id="7722035">(</span><span class="string" id="7722036">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7722069">,</span>&nbsp;<span class="ident" id="7722071">method</span><span class="op" id="7722077">,</span>&nbsp;<span class="ident" id="7722079">url</span><span class="op" id="7722082">,</span>&nbsp;<span class="ident" id="7722084">body</span><span class="op" id="7722088">,</span>&nbsp;<span class="ident" id="7722090">err</span><span class="op" id="7722093">)</span><span class="op" id="7722094">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722100">return</span>&nbsp;<span class="ident" id="7722107">req</span><br>
<span class="lineno"></span><span class="op" id="7722111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7722114">var</span>&nbsp;<span class="ident" id="7722118">dumpResTests</span>&nbsp;<span class="op" id="7722131">=</span>&nbsp;<span class="op" id="7722133">[</span><span class="op" id="7722134">]</span><span class="keyword" id="7722135">struct</span>&nbsp;<span class="op" id="7722142">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722145">res</span>&nbsp;&nbsp;<span class="op" id="7722150">*</span><span class="ident" id="7722151">http</span><span class="op" id="7722155">.</span><span class="ident" id="7722156">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722166">body</span>&nbsp;<span class="builtintype" id="7722171">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722177">want</span>&nbsp;<span class="builtintype" id="7722182">string</span><br>
<span class="lineno"></span><span class="op" id="7722189">}</span><span class="op" id="7722190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722193">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722197">res</span><span class="op" id="7722200">:</span>&nbsp;<span class="op" id="7722202">&amp;</span><span class="ident" id="7722203">http</span><span class="op" id="7722207">.</span><span class="ident" id="7722208">Response</span><span class="op" id="7722216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722221">Status</span><span class="op" id="7722227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722236">&#34;200&nbsp;OK&#34;</span><span class="op" id="7722244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722249">StatusCode</span><span class="op" id="7722259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722264">200</span><span class="op" id="7722267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722272">Proto</span><span class="op" id="7722277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722287">&#34;HTTP/1.1&#34;</span><span class="op" id="7722297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722302">ProtoMajor</span><span class="op" id="7722312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722317">1</span><span class="op" id="7722318">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722323">ProtoMinor</span><span class="op" id="7722333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722338">1</span><span class="op" id="7722339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722344">ContentLength</span><span class="op" id="7722357">:</span>&nbsp;<span class="num" id="7722359">50</span><span class="op" id="7722361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722366">Header</span><span class="op" id="7722372">:</span>&nbsp;<span class="ident" id="7722374">http</span><span class="op" id="7722378">.</span><span class="ident" id="7722379">Header</span><span class="op" id="7722385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722391">&#34;Foo&#34;</span><span class="op" id="7722396">:</span>&nbsp;<span class="op" id="7722398">[</span><span class="op" id="7722399">]</span><span class="builtintype" id="7722400">string</span><span class="op" id="7722406">{</span><span class="string" id="7722407">&#34;Bar&#34;</span><span class="op" id="7722412">}</span><span class="op" id="7722413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722418">}</span><span class="op" id="7722419">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722424">Body</span><span class="op" id="7722428">:</span>&nbsp;<span class="ident" id="7722430">ioutil</span><span class="op" id="7722436">.</span><span class="ident" id="7722437">NopCloser</span><span class="op" id="7722446">(</span><span class="ident" id="7722447">strings</span><span class="op" id="7722454">.</span><span class="ident" id="7722455">NewReader</span><span class="op" id="7722464">(</span><span class="string" id="7722465">&#34;foo&#34;</span><span class="op" id="7722470">)</span><span class="op" id="7722471">)</span><span class="op" id="7722472">,</span>&nbsp;<span class="comment" id="7722474">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722497">}</span><span class="op" id="7722498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722502">body</span><span class="op" id="7722506">:</span>&nbsp;<span class="builtintype" id="7722508">false</span><span class="op" id="7722513">,</span>&nbsp;<span class="comment" id="7722515">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722557">want</span><span class="op" id="7722561">:</span>&nbsp;<span class="string" id="7722563">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7722608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722611">}</span><span class="op" id="7722612">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722620">res</span><span class="op" id="7722623">:</span>&nbsp;<span class="op" id="7722625">&amp;</span><span class="ident" id="7722626">http</span><span class="op" id="7722630">.</span><span class="ident" id="7722631">Response</span><span class="op" id="7722639">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722644">Status</span><span class="op" id="7722650">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722659">&#34;200&nbsp;OK&#34;</span><span class="op" id="7722667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722672">StatusCode</span><span class="op" id="7722682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722687">200</span><span class="op" id="7722690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722695">Proto</span><span class="op" id="7722700">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722710">&#34;HTTP/1.1&#34;</span><span class="op" id="7722720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722725">ProtoMajor</span><span class="op" id="7722735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722740">1</span><span class="op" id="7722741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722746">ProtoMinor</span><span class="op" id="7722756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722761">1</span><span class="op" id="7722762">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722767">ContentLength</span><span class="op" id="7722780">:</span>&nbsp;<span class="num" id="7722782">3</span><span class="op" id="7722783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722788">Body</span><span class="op" id="7722792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7722803">ioutil</span><span class="op" id="7722809">.</span><span class="ident" id="7722810">NopCloser</span><span class="op" id="7722819">(</span><span class="ident" id="7722820">strings</span><span class="op" id="7722827">.</span><span class="ident" id="7722828">NewReader</span><span class="op" id="7722837">(</span><span class="string" id="7722838">&#34;foo&#34;</span><span class="op" id="7722843">)</span><span class="op" id="7722844">)</span><span class="op" id="7722845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722849">}</span><span class="op" id="7722850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722854">body</span><span class="op" id="7722858">:</span>&nbsp;<span class="builtintype" id="7722860">true</span><span class="op" id="7722864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722868">want</span><span class="op" id="7722872">:</span>&nbsp;<span class="string" id="7722874">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7722914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722917">}</span><span class="op" id="7722918">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722926">res</span><span class="op" id="7722929">:</span>&nbsp;<span class="op" id="7722931">&amp;</span><span class="ident" id="7722932">http</span><span class="op" id="7722936">.</span><span class="ident" id="7722937">Response</span><span class="op" id="7722945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722950">Status</span><span class="op" id="7722956">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722968">&#34;200&nbsp;OK&#34;</span><span class="op" id="7722976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722981">StatusCode</span><span class="op" id="7722991">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722999">200</span><span class="op" id="7723002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723007">Proto</span><span class="op" id="7723012">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7723025">&#34;HTTP/1.1&#34;</span><span class="op" id="7723035">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723040">ProtoMajor</span><span class="op" id="7723050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7723058">1</span><span class="op" id="7723059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723064">ProtoMinor</span><span class="op" id="7723074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7723082">1</span><span class="op" id="7723083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723088">ContentLength</span><span class="op" id="7723101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7723106">-</span><span class="num" id="7723107">1</span><span class="op" id="7723108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723113">Body</span><span class="op" id="7723117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7723131">ioutil</span><span class="op" id="7723137">.</span><span class="ident" id="7723138">NopCloser</span><span class="op" id="7723147">(</span><span class="ident" id="7723148">strings</span><span class="op" id="7723155">.</span><span class="ident" id="7723156">NewReader</span><span class="op" id="7723165">(</span><span class="string" id="7723166">&#34;foo&#34;</span><span class="op" id="7723171">)</span><span class="op" id="7723172">)</span><span class="op" id="7723173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723178">TransferEncoding</span><span class="op" id="7723194">:</span>&nbsp;<span class="op" id="7723196">[</span><span class="op" id="7723197">]</span><span class="builtintype" id="7723198">string</span><span class="op" id="7723204">{</span><span class="string" id="7723205">&#34;chunked&#34;</span><span class="op" id="7723214">}</span><span class="op" id="7723215">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723219">}</span><span class="op" id="7723220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723224">body</span><span class="op" id="7723228">:</span>&nbsp;<span class="builtintype" id="7723230">true</span><span class="op" id="7723234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723238">want</span><span class="op" id="7723242">:</span>&nbsp;<span class="string" id="7723244">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7723297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723300">}</span><span class="op" id="7723301">,</span><br>
<span class="lineno"></span><span class="op" id="7723303">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7723306">func</span>&nbsp;<span class="ident" id="7723311">TestDumpResponse</span><span class="op" id="7723327">(</span><span class="ident" id="7723328">t</span>&nbsp;<span class="op" id="7723330">*</span><span class="ident" id="7723331">testing</span><span class="op" id="7723338">.</span><span class="ident" id="7723339">T</span><span class="op" id="7723340">)</span>&nbsp;<span class="op" id="7723342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723345">for</span>&nbsp;<span class="ident" id="7723349">i</span><span class="op" id="7723350">,</span>&nbsp;<span class="ident" id="7723352">tt</span>&nbsp;<span class="op" id="7723355">:=</span>&nbsp;<span class="keyword" id="7723358">range</span>&nbsp;<span class="ident" id="7723364">dumpResTests</span>&nbsp;<span class="op" id="7723377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723381">gotb</span><span class="op" id="7723385">,</span>&nbsp;<span class="ident" id="7723387">err</span>&nbsp;<span class="op" id="7723391">:=</span>&nbsp;<span class="ident" id="7723394">DumpResponse</span><span class="op" id="7723406">(</span><span class="ident" id="7723407">tt</span><span class="op" id="7723409">.</span><span class="ident" id="7723410">res</span><span class="op" id="7723413">,</span>&nbsp;<span class="ident" id="7723415">tt</span><span class="op" id="7723417">.</span><span class="ident" id="7723418">body</span><span class="op" id="7723422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723426">if</span>&nbsp;<span class="ident" id="7723429">err</span>&nbsp;<span class="op" id="7723433">!=</span>&nbsp;<span class="ident" id="7723436">nil</span>&nbsp;<span class="op" id="7723440">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723445">t</span><span class="op" id="7723446">.</span><span class="ident" id="7723447">Errorf</span><span class="op" id="7723453">(</span><span class="string" id="7723454">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7723477">,</span>&nbsp;<span class="ident" id="7723479">i</span><span class="op" id="7723480">,</span>&nbsp;<span class="ident" id="7723482">err</span><span class="op" id="7723485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723490">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723505">got</span>&nbsp;<span class="op" id="7723509">:=</span>&nbsp;<span class="builtintype" id="7723512">string</span><span class="op" id="7723518">(</span><span class="ident" id="7723519">gotb</span><span class="op" id="7723523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723527">got</span>&nbsp;<span class="op" id="7723531">=</span>&nbsp;<span class="ident" id="7723533">strings</span><span class="op" id="7723540">.</span><span class="ident" id="7723541">TrimSpace</span><span class="op" id="7723550">(</span><span class="ident" id="7723551">got</span><span class="op" id="7723554">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723558">got</span>&nbsp;<span class="op" id="7723562">=</span>&nbsp;<span class="ident" id="7723564">strings</span><span class="op" id="7723571">.</span><span class="ident" id="7723572">Replace</span><span class="op" id="7723579">(</span><span class="ident" id="7723580">got</span><span class="op" id="7723583">,</span>&nbsp;<span class="string" id="7723585">&#34;\r&#34;</span><span class="op" id="7723589">,</span>&nbsp;<span class="string" id="7723591">&#34;&#34;</span><span class="op" id="7723593">,</span>&nbsp;<span class="op" id="7723595">-</span><span class="num" id="7723596">1</span><span class="op" id="7723597">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723602">if</span>&nbsp;<span class="ident" id="7723605">got</span>&nbsp;<span class="op" id="7723609">!=</span>&nbsp;<span class="ident" id="7723612">tt</span><span class="op" id="7723614">.</span><span class="ident" id="7723615">want</span>&nbsp;<span class="op" id="7723620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723625">t</span><span class="op" id="7723626">.</span><span class="ident" id="7723627">Errorf</span><span class="op" id="7723633">(</span><span class="string" id="7723634">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7723677">,</span>&nbsp;<span class="ident" id="7723679">i</span><span class="op" id="7723680">,</span>&nbsp;<span class="ident" id="7723682">got</span><span class="op" id="7723685">,</span>&nbsp;<span class="ident" id="7723687">tt</span><span class="op" id="7723689">.</span><span class="ident" id="7723690">want</span><span class="op" id="7723694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723698">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723701">}</span><br>
<span class="lineno"></span><span class="op" id="7723703">}</span>
</div>
</body>
</html>
