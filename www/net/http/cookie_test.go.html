<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7028175">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7028231">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7028285">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7028336">package</span>&nbsp;<span class="ident" id="7028344">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028350">import</span>&nbsp;<span class="op" id="7028357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028360">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028369">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028386">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028393">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028400">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028406">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028417">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028428">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028439">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7028446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028449">var</span>&nbsp;<span class="ident" id="7028453">writeSetCookiesTests</span>&nbsp;<span class="op" id="7028474">=</span>&nbsp;<span class="op" id="7028476">[</span><span class="op" id="7028477">]</span><span class="keyword" id="7028478">struct</span>&nbsp;<span class="op" id="7028485">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028488">Cookie</span>&nbsp;<span class="op" id="7028495">*</span><span class="ident" id="7028496"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028504">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7028511">string</span><br>
<span class="lineno"></span><span class="op" id="7028518">}</span><span class="op" id="7028519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028526">&amp;</span><span class="ident" id="7028527"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7028533">{</span><span class="ident" id="7028534">Name</span><span class="op" id="7028538">:</span>&nbsp;<span class="string" id="7028540">&#34;cookie-1&#34;</span><span class="op" id="7028550">,</span>&nbsp;<span class="ident" id="7028552">Value</span><span class="op" id="7028557">:</span>&nbsp;<span class="string" id="7028559">&#34;v$1&#34;</span><span class="op" id="7028564">}</span><span class="op" id="7028565">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028569">&#34;cookie-1=v$1&#34;</span><span class="op" id="7028583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028586">}</span><span class="op" id="7028587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028594">&amp;</span><span class="ident" id="7028595"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7028601">{</span><span class="ident" id="7028602">Name</span><span class="op" id="7028606">:</span>&nbsp;<span class="string" id="7028608">&#34;cookie-2&#34;</span><span class="op" id="7028618">,</span>&nbsp;<span class="ident" id="7028620">Value</span><span class="op" id="7028625">:</span>&nbsp;<span class="string" id="7028627">&#34;two&#34;</span><span class="op" id="7028632">,</span>&nbsp;<span class="ident" id="7028634">MaxAge</span><span class="op" id="7028640">:</span>&nbsp;<span class="num" id="7028642">3600</span><span class="op" id="7028646">}</span><span class="op" id="7028647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028651">&#34;cookie-2=two;&nbsp;Max-Age=3600&#34;</span><span class="op" id="7028679">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028682">}</span><span class="op" id="7028683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028690">&amp;</span><span class="ident" id="7028691"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7028697">{</span><span class="ident" id="7028698">Name</span><span class="op" id="7028702">:</span>&nbsp;<span class="string" id="7028704">&#34;cookie-3&#34;</span><span class="op" id="7028714">,</span>&nbsp;<span class="ident" id="7028716">Value</span><span class="op" id="7028721">:</span>&nbsp;<span class="string" id="7028723">&#34;three&#34;</span><span class="op" id="7028730">,</span>&nbsp;<span class="ident" id="7028732">Domain</span><span class="op" id="7028738">:</span>&nbsp;<span class="string" id="7028740">&#34;.example.com&#34;</span><span class="op" id="7028754">}</span><span class="op" id="7028755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028759">&#34;cookie-3=three;&nbsp;Domain=example.com&#34;</span><span class="op" id="7028795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028798">}</span><span class="op" id="7028799">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028806">&amp;</span><span class="ident" id="7028807"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7028813">{</span><span class="ident" id="7028814">Name</span><span class="op" id="7028818">:</span>&nbsp;<span class="string" id="7028820">&#34;cookie-4&#34;</span><span class="op" id="7028830">,</span>&nbsp;<span class="ident" id="7028832">Value</span><span class="op" id="7028837">:</span>&nbsp;<span class="string" id="7028839">&#34;four&#34;</span><span class="op" id="7028845">,</span>&nbsp;<span class="ident" id="7028847">Path</span><span class="op" id="7028851">:</span>&nbsp;<span class="string" id="7028853">&#34;/restricted/&#34;</span><span class="op" id="7028867">}</span><span class="op" id="7028868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028872">&#34;cookie-4=four;&nbsp;Path=/restricted/&#34;</span><span class="op" id="7028906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028909">}</span><span class="op" id="7028910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028913">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7028917">&amp;</span><span class="ident" id="7028918"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7028924">{</span><span class="ident" id="7028925">Name</span><span class="op" id="7028929">:</span>&nbsp;<span class="string" id="7028931">&#34;cookie-5&#34;</span><span class="op" id="7028941">,</span>&nbsp;<span class="ident" id="7028943">Value</span><span class="op" id="7028948">:</span>&nbsp;<span class="string" id="7028950">&#34;five&#34;</span><span class="op" id="7028956">,</span>&nbsp;<span class="ident" id="7028958">Domain</span><span class="op" id="7028964">:</span>&nbsp;<span class="string" id="7028966">&#34;wrong;bad.abc&#34;</span><span class="op" id="7028981">}</span><span class="op" id="7028982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7028986">&#34;cookie-5=five&#34;</span><span class="op" id="7029001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029004">}</span><span class="op" id="7029005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029012">&amp;</span><span class="ident" id="7029013"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029019">{</span><span class="ident" id="7029020">Name</span><span class="op" id="7029024">:</span>&nbsp;<span class="string" id="7029026">&#34;cookie-6&#34;</span><span class="op" id="7029036">,</span>&nbsp;<span class="ident" id="7029038">Value</span><span class="op" id="7029043">:</span>&nbsp;<span class="string" id="7029045">&#34;six&#34;</span><span class="op" id="7029050">,</span>&nbsp;<span class="ident" id="7029052">Domain</span><span class="op" id="7029058">:</span>&nbsp;<span class="string" id="7029060">&#34;bad-.abc&#34;</span><span class="op" id="7029070">}</span><span class="op" id="7029071">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029075">&#34;cookie-6=six&#34;</span><span class="op" id="7029089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029092">}</span><span class="op" id="7029093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029100">&amp;</span><span class="ident" id="7029101"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029107">{</span><span class="ident" id="7029108">Name</span><span class="op" id="7029112">:</span>&nbsp;<span class="string" id="7029114">&#34;cookie-7&#34;</span><span class="op" id="7029124">,</span>&nbsp;<span class="ident" id="7029126">Value</span><span class="op" id="7029131">:</span>&nbsp;<span class="string" id="7029133">&#34;seven&#34;</span><span class="op" id="7029140">,</span>&nbsp;<span class="ident" id="7029142">Domain</span><span class="op" id="7029148">:</span>&nbsp;<span class="string" id="7029150">&#34;127.0.0.1&#34;</span><span class="op" id="7029161">}</span><span class="op" id="7029162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029166">&#34;cookie-7=seven;&nbsp;Domain=127.0.0.1&#34;</span><span class="op" id="7029200">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029203">}</span><span class="op" id="7029204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029211">&amp;</span><span class="ident" id="7029212"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029218">{</span><span class="ident" id="7029219">Name</span><span class="op" id="7029223">:</span>&nbsp;<span class="string" id="7029225">&#34;cookie-8&#34;</span><span class="op" id="7029235">,</span>&nbsp;<span class="ident" id="7029237">Value</span><span class="op" id="7029242">:</span>&nbsp;<span class="string" id="7029244">&#34;eight&#34;</span><span class="op" id="7029251">,</span>&nbsp;<span class="ident" id="7029253">Domain</span><span class="op" id="7029259">:</span>&nbsp;<span class="string" id="7029261">&#34;::1&#34;</span><span class="op" id="7029266">}</span><span class="op" id="7029267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029271">&#34;cookie-8=eight&#34;</span><span class="op" id="7029287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029290">}</span><span class="op" id="7029291">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029294">//&nbsp;The&nbsp;&#34;special&#34;&nbsp;cookies&nbsp;have&nbsp;values&nbsp;containing&nbsp;commas&nbsp;or&nbsp;spaces&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029366">//&nbsp;are&nbsp;disallowed&nbsp;by&nbsp;RFC&nbsp;6265&nbsp;but&nbsp;are&nbsp;common&nbsp;in&nbsp;the&nbsp;wild.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029429">&amp;</span><span class="ident" id="7029430"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029436">{</span><span class="ident" id="7029437">Name</span><span class="op" id="7029441">:</span>&nbsp;<span class="string" id="7029443">&#34;special-1&#34;</span><span class="op" id="7029454">,</span>&nbsp;<span class="ident" id="7029456">Value</span><span class="op" id="7029461">:</span>&nbsp;<span class="string" id="7029463">&#34;a&nbsp;z&#34;</span><span class="op" id="7029468">}</span><span class="op" id="7029469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029473">`special-1=a&nbsp;z`</span><span class="op" id="7029488">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029491">}</span><span class="op" id="7029492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029499">&amp;</span><span class="ident" id="7029500"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029506">{</span><span class="ident" id="7029507">Name</span><span class="op" id="7029511">:</span>&nbsp;<span class="string" id="7029513">&#34;special-2&#34;</span><span class="op" id="7029524">,</span>&nbsp;<span class="ident" id="7029526">Value</span><span class="op" id="7029531">:</span>&nbsp;<span class="string" id="7029533">&#34;&nbsp;z&#34;</span><span class="op" id="7029537">}</span><span class="op" id="7029538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029542">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7029558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029561">}</span><span class="op" id="7029562">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029569">&amp;</span><span class="ident" id="7029570"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029576">{</span><span class="ident" id="7029577">Name</span><span class="op" id="7029581">:</span>&nbsp;<span class="string" id="7029583">&#34;special-3&#34;</span><span class="op" id="7029594">,</span>&nbsp;<span class="ident" id="7029596">Value</span><span class="op" id="7029601">:</span>&nbsp;<span class="string" id="7029603">&#34;a&nbsp;&#34;</span><span class="op" id="7029607">}</span><span class="op" id="7029608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029612">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7029628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029631">}</span><span class="op" id="7029632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029635">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029639">&amp;</span><span class="ident" id="7029640"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029646">{</span><span class="ident" id="7029647">Name</span><span class="op" id="7029651">:</span>&nbsp;<span class="string" id="7029653">&#34;special-4&#34;</span><span class="op" id="7029664">,</span>&nbsp;<span class="ident" id="7029666">Value</span><span class="op" id="7029671">:</span>&nbsp;<span class="string" id="7029673">&#34;&nbsp;&#34;</span><span class="op" id="7029676">}</span><span class="op" id="7029677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029681">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7029696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029699">}</span><span class="op" id="7029700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029707">&amp;</span><span class="ident" id="7029708"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029714">{</span><span class="ident" id="7029715">Name</span><span class="op" id="7029719">:</span>&nbsp;<span class="string" id="7029721">&#34;special-5&#34;</span><span class="op" id="7029732">,</span>&nbsp;<span class="ident" id="7029734">Value</span><span class="op" id="7029739">:</span>&nbsp;<span class="string" id="7029741">&#34;a,z&#34;</span><span class="op" id="7029746">}</span><span class="op" id="7029747">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029751">`special-5=a,z`</span><span class="op" id="7029766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029769">}</span><span class="op" id="7029770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029777">&amp;</span><span class="ident" id="7029778"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029784">{</span><span class="ident" id="7029785">Name</span><span class="op" id="7029789">:</span>&nbsp;<span class="string" id="7029791">&#34;special-6&#34;</span><span class="op" id="7029802">,</span>&nbsp;<span class="ident" id="7029804">Value</span><span class="op" id="7029809">:</span>&nbsp;<span class="string" id="7029811">&#34;,z&#34;</span><span class="op" id="7029815">}</span><span class="op" id="7029816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029820">`special-6=&#34;,z&#34;`</span><span class="op" id="7029836">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029839">}</span><span class="op" id="7029840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029847">&amp;</span><span class="ident" id="7029848"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029854">{</span><span class="ident" id="7029855">Name</span><span class="op" id="7029859">:</span>&nbsp;<span class="string" id="7029861">&#34;special-7&#34;</span><span class="op" id="7029872">,</span>&nbsp;<span class="ident" id="7029874">Value</span><span class="op" id="7029879">:</span>&nbsp;<span class="string" id="7029881">&#34;a,&#34;</span><span class="op" id="7029885">}</span><span class="op" id="7029886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029890">`special-7=&#34;a,&#34;`</span><span class="op" id="7029906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029909">}</span><span class="op" id="7029910">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029917">&amp;</span><span class="ident" id="7029918"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029924">{</span><span class="ident" id="7029925">Name</span><span class="op" id="7029929">:</span>&nbsp;<span class="string" id="7029931">&#34;special-8&#34;</span><span class="op" id="7029942">,</span>&nbsp;<span class="ident" id="7029944">Value</span><span class="op" id="7029949">:</span>&nbsp;<span class="string" id="7029951">&#34;,&#34;</span><span class="op" id="7029954">}</span><span class="op" id="7029955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7029959">`special-8=&#34;,&#34;`</span><span class="op" id="7029974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029977">}</span><span class="op" id="7029978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029981">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029985">&amp;</span><span class="ident" id="7029986"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7029992">{</span><span class="ident" id="7029993">Name</span><span class="op" id="7029997">:</span>&nbsp;<span class="string" id="7029999">&#34;empty-value&#34;</span><span class="op" id="7030012">,</span>&nbsp;<span class="ident" id="7030014">Value</span><span class="op" id="7030019">:</span>&nbsp;<span class="string" id="7030021">&#34;&#34;</span><span class="op" id="7030023">}</span><span class="op" id="7030024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7030028">`empty-value=`</span><span class="op" id="7030042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030045">}</span><span class="op" id="7030046">,</span><br>
<span class="lineno"></span><span class="op" id="7030048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7030051">func</span>&nbsp;<span class="ident" id="7030056">TestWriteSetCookies</span><span class="op" id="7030075">(</span><span class="ident" id="7030076">t</span>&nbsp;<span class="op" id="7030078">*</span><span class="ident" id="7030079"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7030086">.</span><span class="ident" id="7030087">T</span><span class="op" id="7030088">)</span>&nbsp;<span class="op" id="7030090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030093">defer</span>&nbsp;<span class="ident" id="7030099"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7030102">.</span><span class="ident" id="7030103">SetOutput</span><span class="op" id="7030112">(</span><span class="ident" id="7030113"><a href="/net/http/cookie_test.go.html#7028400">os</a></span><span class="op" id="7030115">.</span><span class="ident" id="7030116">Stderr</span><span class="op" id="7030122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030125">var</span>&nbsp;<span class="ident" id="7030129">logbuf</span>&nbsp;<span class="ident" id="7030136"><a href="/net/http/cookie_test.go.html#7028360">bytes</a></span><span class="op" id="7030141">.</span><span class="ident" id="7030142">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030150"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7030153">.</span><span class="ident" id="7030154">SetOutput</span><span class="op" id="7030163">(</span><span class="op" id="7030164">&amp;</span><span class="ident" id="7030165"><a href="/net/http/cookie_test.go.html#7030129">logbuf</a></span><span class="op" id="7030171">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030175">for</span>&nbsp;<span class="ident" id="7030179">i</span><span class="op" id="7030180">,</span>&nbsp;<span class="ident" id="7030182">tt</span>&nbsp;<span class="op" id="7030185">:=</span>&nbsp;<span class="keyword" id="7030188">range</span>&nbsp;<span class="ident" id="7030194"><a href="/net/http/cookie_test.go.html#7028453">writeSetCookiesTests</a></span>&nbsp;<span class="op" id="7030215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030219">if</span>&nbsp;<span class="ident" id="7030222">g</span><span class="op" id="7030223">,</span>&nbsp;<span class="ident" id="7030225">e</span>&nbsp;<span class="op" id="7030227">:=</span>&nbsp;<span class="ident" id="7030230"><a href="/net/http/cookie_test.go.html#7030182">tt</a></span><span class="op" id="7030232">.</span><span class="ident" id="7030233">Cookie</span><span class="op" id="7030239">.</span><span class="ident" id="7030240">String</span><span class="op" id="7030246">(</span><span class="op" id="7030247">)</span><span class="op" id="7030248">,</span>&nbsp;<span class="ident" id="7030250"><a href="/net/http/cookie_test.go.html#7030182">tt</a></span><span class="op" id="7030252">.</span><span class="ident" id="7030253">Raw</span><span class="op" id="7030256">;</span>&nbsp;<span class="ident" id="7030258"><a href="/net/http/cookie_test.go.html#7030222">g</a></span>&nbsp;<span class="op" id="7030260">!=</span>&nbsp;<span class="ident" id="7030263"><a href="/net/http/cookie_test.go.html#7030225">e</a></span>&nbsp;<span class="op" id="7030265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030270"><a href="/net/http/cookie_test.go.html#7030076">t</a></span><span class="op" id="7030271">.</span><span class="ident" id="7030272">Errorf</span><span class="op" id="7030278">(</span><span class="string" id="7030279">&#34;Test&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7030316">,</span>&nbsp;<span class="ident" id="7030318"><a href="/net/http/cookie_test.go.html#7030179">i</a></span><span class="op" id="7030319">,</span>&nbsp;<span class="ident" id="7030321"><a href="/net/http/cookie_test.go.html#7030225">e</a></span><span class="op" id="7030322">,</span>&nbsp;<span class="ident" id="7030324"><a href="/net/http/cookie_test.go.html#7030222">g</a></span><span class="op" id="7030325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030330">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030341">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030348">if</span>&nbsp;<span class="ident" id="7030351">got</span><span class="op" id="7030354">,</span>&nbsp;<span class="ident" id="7030356">sub</span>&nbsp;<span class="op" id="7030360">:=</span>&nbsp;<span class="ident" id="7030363"><a href="/net/http/cookie_test.go.html#7030129">logbuf</a></span><span class="op" id="7030369">.</span><span class="ident" id="7030370">String</span><span class="op" id="7030376">(</span><span class="op" id="7030377">)</span><span class="op" id="7030378">,</span>&nbsp;<span class="string" id="7030380">&#34;dropping&nbsp;domain&nbsp;attribute&#34;</span><span class="op" id="7030407">;</span>&nbsp;<span class="op" id="7030409">!</span><span class="ident" id="7030410"><a href="/net/http/cookie_test.go.html#7028417">strings</a></span><span class="op" id="7030417">.</span><span class="ident" id="7030418">Contains</span><span class="op" id="7030426">(</span><span class="ident" id="7030427"><a href="/net/http/cookie_test.go.html#7030351">got</a></span><span class="op" id="7030430">,</span>&nbsp;<span class="ident" id="7030432"><a href="/net/http/cookie_test.go.html#7030356">sub</a></span><span class="op" id="7030435">)</span>&nbsp;<span class="op" id="7030437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030441"><a href="/net/http/cookie_test.go.html#7030076">t</a></span><span class="op" id="7030442">.</span><span class="ident" id="7030443">Errorf</span><span class="op" id="7030449">(</span><span class="string" id="7030450">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7030497">,</span>&nbsp;<span class="ident" id="7030499"><a href="/net/http/cookie_test.go.html#7030356">sub</a></span><span class="op" id="7030502">,</span>&nbsp;<span class="ident" id="7030504"><a href="/net/http/cookie_test.go.html#7030351">got</a></span><span class="op" id="7030507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030510">}</span><br>
<span class="lineno">110</span><span class="op" id="7030512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7030515">type</span>&nbsp;<span class="ident" id="7030520">headerOnlyResponseWriter</span>&nbsp;<span class="ident" id="7030545"><a href="/net/http/header.go.html#3356649">Header</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7030553">func</span>&nbsp;<span class="op" id="7030558">(</span><span class="ident" id="7030559">ho</span>&nbsp;<span class="ident" id="7030562"><a href="/net/http/cookie_test.go.html#7030520">headerOnlyResponseWriter</a></span><span class="op" id="7030586">)</span>&nbsp;<span class="ident" id="7030588">Header</span><span class="op" id="7030594">(</span><span class="op" id="7030595">)</span>&nbsp;<span class="ident" id="7030597"><a href="/net/http/header.go.html#3356649">Header</a></span>&nbsp;<span class="op" id="7030604">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030607">return</span>&nbsp;<span class="ident" id="7030614"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7030620">(</span><span class="ident" id="7030621"><a href="/net/http/cookie_test.go.html#7030559">ho</a></span><span class="op" id="7030623">)</span><br>
<span class="lineno"></span><span class="op" id="7030625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7030628">func</span>&nbsp;<span class="op" id="7030633">(</span><span class="ident" id="7030634">ho</span>&nbsp;<span class="ident" id="7030637"><a href="/net/http/cookie_test.go.html#7030520">headerOnlyResponseWriter</a></span><span class="op" id="7030661">)</span>&nbsp;<span class="ident" id="7030663">Write</span><span class="op" id="7030668">(</span><span class="op" id="7030669">[</span><span class="op" id="7030670">]</span><span class="builtintype" id="7030671">byte</span><span class="op" id="7030675">)</span>&nbsp;<span class="op" id="7030677">(</span><span class="builtintype" id="7030678">int</span><span class="op" id="7030681">,</span>&nbsp;<span class="builtintype" id="7030683">error</span><span class="op" id="7030688">)</span>&nbsp;<span class="op" id="7030690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7030693">panic</span><span class="op" id="7030698">(</span><span class="string" id="7030699">&#34;NOIMPL&#34;</span><span class="op" id="7030707">)</span><br>
<span class="lineno">120</span><span class="op" id="7030709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7030712">func</span>&nbsp;<span class="op" id="7030717">(</span><span class="ident" id="7030718">ho</span>&nbsp;<span class="ident" id="7030721"><a href="/net/http/cookie_test.go.html#7030520">headerOnlyResponseWriter</a></span><span class="op" id="7030745">)</span>&nbsp;<span class="ident" id="7030747">WriteHeader</span><span class="op" id="7030758">(</span><span class="builtintype" id="7030759">int</span><span class="op" id="7030762">)</span>&nbsp;<span class="op" id="7030764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7030767">panic</span><span class="op" id="7030772">(</span><span class="string" id="7030773">&#34;NOIMPL&#34;</span><span class="op" id="7030781">)</span><br>
<span class="lineno"></span><span class="op" id="7030783">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7030786">func</span>&nbsp;<span class="ident" id="7030791">TestSetCookie</span><span class="op" id="7030804">(</span><span class="ident" id="7030805">t</span>&nbsp;<span class="op" id="7030807">*</span><span class="ident" id="7030808"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7030815">.</span><span class="ident" id="7030816">T</span><span class="op" id="7030817">)</span>&nbsp;<span class="op" id="7030819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030822">m</span>&nbsp;<span class="op" id="7030824">:=</span>&nbsp;<span class="builtinfunc" id="7030827">make</span><span class="op" id="7030831">(</span><span class="ident" id="7030832"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7030838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030841"><a href="/net/http/cookie.go.html#3328994">SetCookie</a></span><span class="op" id="7030850">(</span><span class="ident" id="7030851"><a href="/net/http/cookie_test.go.html#7030520">headerOnlyResponseWriter</a></span><span class="op" id="7030875">(</span><span class="ident" id="7030876"><a href="/net/http/cookie_test.go.html#7030822">m</a></span><span class="op" id="7030877">)</span><span class="op" id="7030878">,</span>&nbsp;<span class="op" id="7030880">&amp;</span><span class="ident" id="7030881"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7030887">{</span><span class="ident" id="7030888">Name</span><span class="op" id="7030892">:</span>&nbsp;<span class="string" id="7030894">&#34;cookie-1&#34;</span><span class="op" id="7030904">,</span>&nbsp;<span class="ident" id="7030906">Value</span><span class="op" id="7030911">:</span>&nbsp;<span class="string" id="7030913">&#34;one&#34;</span><span class="op" id="7030918">,</span>&nbsp;<span class="ident" id="7030920">Path</span><span class="op" id="7030924">:</span>&nbsp;<span class="string" id="7030926">&#34;/restricted/&#34;</span><span class="op" id="7030940">}</span><span class="op" id="7030941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030944"><a href="/net/http/cookie.go.html#3328994">SetCookie</a></span><span class="op" id="7030953">(</span><span class="ident" id="7030954"><a href="/net/http/cookie_test.go.html#7030520">headerOnlyResponseWriter</a></span><span class="op" id="7030978">(</span><span class="ident" id="7030979"><a href="/net/http/cookie_test.go.html#7030822">m</a></span><span class="op" id="7030980">)</span><span class="op" id="7030981">,</span>&nbsp;<span class="op" id="7030983">&amp;</span><span class="ident" id="7030984"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7030990">{</span><span class="ident" id="7030991">Name</span><span class="op" id="7030995">:</span>&nbsp;<span class="string" id="7030997">&#34;cookie-2&#34;</span><span class="op" id="7031007">,</span>&nbsp;<span class="ident" id="7031009">Value</span><span class="op" id="7031014">:</span>&nbsp;<span class="string" id="7031016">&#34;two&#34;</span><span class="op" id="7031021">,</span>&nbsp;<span class="ident" id="7031023">MaxAge</span><span class="op" id="7031029">:</span>&nbsp;<span class="num" id="7031031">3600</span><span class="op" id="7031035">}</span><span class="op" id="7031036">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031039">if</span>&nbsp;<span class="ident" id="7031042">l</span>&nbsp;<span class="op" id="7031044">:=</span>&nbsp;<span class="builtinfunc" id="7031047">len</span><span class="op" id="7031050">(</span><span class="ident" id="7031051"><a href="/net/http/cookie_test.go.html#7030822">m</a></span><span class="op" id="7031052">[</span><span class="string" id="7031053">&#34;Set-Cookie&#34;</span><span class="op" id="7031065">]</span><span class="op" id="7031066">)</span><span class="op" id="7031067">;</span>&nbsp;<span class="ident" id="7031069"><a href="/net/http/cookie_test.go.html#7031042">l</a></span>&nbsp;<span class="op" id="7031071">!=</span>&nbsp;<span class="num" id="7031074">2</span>&nbsp;<span class="op" id="7031076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031080"><a href="/net/http/cookie_test.go.html#7030805">t</a></span><span class="op" id="7031081">.</span><span class="ident" id="7031082">Fatalf</span><span class="op" id="7031088">(</span><span class="string" id="7031089">&#34;expected&nbsp;%d&nbsp;cookies,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7031118">,</span>&nbsp;<span class="num" id="7031120">2</span><span class="op" id="7031121">,</span>&nbsp;<span class="ident" id="7031123"><a href="/net/http/cookie_test.go.html#7031042">l</a></span><span class="op" id="7031124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031130">if</span>&nbsp;<span class="ident" id="7031133">g</span><span class="op" id="7031134">,</span>&nbsp;<span class="ident" id="7031136">e</span>&nbsp;<span class="op" id="7031138">:=</span>&nbsp;<span class="ident" id="7031141"><a href="/net/http/cookie_test.go.html#7030822">m</a></span><span class="op" id="7031142">[</span><span class="string" id="7031143">&#34;Set-Cookie&#34;</span><span class="op" id="7031155">]</span><span class="op" id="7031156">[</span><span class="num" id="7031157">0</span><span class="op" id="7031158">]</span><span class="op" id="7031159">,</span>&nbsp;<span class="string" id="7031161">&#34;cookie-1=one;&nbsp;Path=/restricted/&#34;</span><span class="op" id="7031194">;</span>&nbsp;<span class="ident" id="7031196"><a href="/net/http/cookie_test.go.html#7031133">g</a></span>&nbsp;<span class="op" id="7031198">!=</span>&nbsp;<span class="ident" id="7031201"><a href="/net/http/cookie_test.go.html#7031136">e</a></span>&nbsp;<span class="op" id="7031203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031207"><a href="/net/http/cookie_test.go.html#7030805">t</a></span><span class="op" id="7031208">.</span><span class="ident" id="7031209">Errorf</span><span class="op" id="7031215">(</span><span class="string" id="7031216">&#34;cookie&nbsp;#1:&nbsp;want&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7031244">,</span>&nbsp;<span class="ident" id="7031246"><a href="/net/http/cookie_test.go.html#7031136">e</a></span><span class="op" id="7031247">,</span>&nbsp;<span class="ident" id="7031249"><a href="/net/http/cookie_test.go.html#7031133">g</a></span><span class="op" id="7031250">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031256">if</span>&nbsp;<span class="ident" id="7031259">g</span><span class="op" id="7031260">,</span>&nbsp;<span class="ident" id="7031262">e</span>&nbsp;<span class="op" id="7031264">:=</span>&nbsp;<span class="ident" id="7031267"><a href="/net/http/cookie_test.go.html#7030822">m</a></span><span class="op" id="7031268">[</span><span class="string" id="7031269">&#34;Set-Cookie&#34;</span><span class="op" id="7031281">]</span><span class="op" id="7031282">[</span><span class="num" id="7031283">1</span><span class="op" id="7031284">]</span><span class="op" id="7031285">,</span>&nbsp;<span class="string" id="7031287">&#34;cookie-2=two;&nbsp;Max-Age=3600&#34;</span><span class="op" id="7031315">;</span>&nbsp;<span class="ident" id="7031317"><a href="/net/http/cookie_test.go.html#7031259">g</a></span>&nbsp;<span class="op" id="7031319">!=</span>&nbsp;<span class="ident" id="7031322"><a href="/net/http/cookie_test.go.html#7031262">e</a></span>&nbsp;<span class="op" id="7031324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031328"><a href="/net/http/cookie_test.go.html#7030805">t</a></span><span class="op" id="7031329">.</span><span class="ident" id="7031330">Errorf</span><span class="op" id="7031336">(</span><span class="string" id="7031337">&#34;cookie&nbsp;#2:&nbsp;want&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7031365">,</span>&nbsp;<span class="ident" id="7031367"><a href="/net/http/cookie_test.go.html#7031262">e</a></span><span class="op" id="7031368">,</span>&nbsp;<span class="ident" id="7031370"><a href="/net/http/cookie_test.go.html#7031259">g</a></span><span class="op" id="7031371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031374">}</span><br>
<span class="lineno"></span><span class="op" id="7031376">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7031379">var</span>&nbsp;<span class="ident" id="7031383">addCookieTests</span>&nbsp;<span class="op" id="7031398">=</span>&nbsp;<span class="op" id="7031400">[</span><span class="op" id="7031401">]</span><span class="keyword" id="7031402">struct</span>&nbsp;<span class="op" id="7031409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031412">Cookies</span>&nbsp;<span class="op" id="7031420">[</span><span class="op" id="7031421">]</span><span class="op" id="7031422">*</span><span class="ident" id="7031423"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031431">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7031439">string</span><br>
<span class="lineno"></span><span class="op" id="7031446">}</span><span class="op" id="7031447">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031454">[</span><span class="op" id="7031455">]</span><span class="op" id="7031456">*</span><span class="ident" id="7031457"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7031463">{</span><span class="op" id="7031464">}</span><span class="op" id="7031465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031469">&#34;&#34;</span><span class="op" id="7031471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031474">}</span><span class="op" id="7031475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031478">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031482">[</span><span class="op" id="7031483">]</span><span class="op" id="7031484">*</span><span class="ident" id="7031485"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7031491">{</span><span class="op" id="7031492">{</span><span class="ident" id="7031493">Name</span><span class="op" id="7031497">:</span>&nbsp;<span class="string" id="7031499">&#34;cookie-1&#34;</span><span class="op" id="7031509">,</span>&nbsp;<span class="ident" id="7031511">Value</span><span class="op" id="7031516">:</span>&nbsp;<span class="string" id="7031518">&#34;v$1&#34;</span><span class="op" id="7031523">}</span><span class="op" id="7031524">}</span><span class="op" id="7031525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031529">&#34;cookie-1=v$1&#34;</span><span class="op" id="7031543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031546">}</span><span class="op" id="7031547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031554">[</span><span class="op" id="7031555">]</span><span class="op" id="7031556">*</span><span class="ident" id="7031557"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7031563">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031568">{</span><span class="ident" id="7031569">Name</span><span class="op" id="7031573">:</span>&nbsp;<span class="string" id="7031575">&#34;cookie-1&#34;</span><span class="op" id="7031585">,</span>&nbsp;<span class="ident" id="7031587">Value</span><span class="op" id="7031592">:</span>&nbsp;<span class="string" id="7031594">&#34;v$1&#34;</span><span class="op" id="7031599">}</span><span class="op" id="7031600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031605">{</span><span class="ident" id="7031606">Name</span><span class="op" id="7031610">:</span>&nbsp;<span class="string" id="7031612">&#34;cookie-2&#34;</span><span class="op" id="7031622">,</span>&nbsp;<span class="ident" id="7031624">Value</span><span class="op" id="7031629">:</span>&nbsp;<span class="string" id="7031631">&#34;v$2&#34;</span><span class="op" id="7031636">}</span><span class="op" id="7031637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031642">{</span><span class="ident" id="7031643">Name</span><span class="op" id="7031647">:</span>&nbsp;<span class="string" id="7031649">&#34;cookie-3&#34;</span><span class="op" id="7031659">,</span>&nbsp;<span class="ident" id="7031661">Value</span><span class="op" id="7031666">:</span>&nbsp;<span class="string" id="7031668">&#34;v$3&#34;</span><span class="op" id="7031673">}</span><span class="op" id="7031674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031678">}</span><span class="op" id="7031679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031683">&#34;cookie-1=v$1;&nbsp;cookie-2=v$2;&nbsp;cookie-3=v$3&#34;</span><span class="op" id="7031725">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031728">}</span><span class="op" id="7031729">,</span><br>
<span class="lineno"></span><span class="op" id="7031731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7031734">func</span>&nbsp;<span class="ident" id="7031739">TestAddCookie</span><span class="op" id="7031752">(</span><span class="ident" id="7031753">t</span>&nbsp;<span class="op" id="7031755">*</span><span class="ident" id="7031756"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7031763">.</span><span class="ident" id="7031764">T</span><span class="op" id="7031765">)</span>&nbsp;<span class="op" id="7031767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031770">for</span>&nbsp;<span class="ident" id="7031774">i</span><span class="op" id="7031775">,</span>&nbsp;<span class="ident" id="7031777">tt</span>&nbsp;<span class="op" id="7031780">:=</span>&nbsp;<span class="keyword" id="7031783">range</span>&nbsp;<span class="ident" id="7031789"><a href="/net/http/cookie_test.go.html#7031383">addCookieTests</a></span>&nbsp;<span class="op" id="7031804">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031808">req</span><span class="op" id="7031811">,</span>&nbsp;<span class="ident" id="7031813">_</span>&nbsp;<span class="op" id="7031815">:=</span>&nbsp;<span class="ident" id="7031818"><a href="/net/http/request.go.html#3380061">NewRequest</a></span><span class="op" id="7031828">(</span><span class="string" id="7031829">&#34;GET&#34;</span><span class="op" id="7031834">,</span>&nbsp;<span class="string" id="7031836">&#34;http://example.com/&#34;</span><span class="op" id="7031857">,</span>&nbsp;<span class="ident" id="7031859">nil</span><span class="op" id="7031862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031866">for</span>&nbsp;<span class="ident" id="7031870">_</span><span class="op" id="7031871">,</span>&nbsp;<span class="ident" id="7031873">c</span>&nbsp;<span class="op" id="7031875">:=</span>&nbsp;<span class="keyword" id="7031878">range</span>&nbsp;<span class="ident" id="7031884"><a href="/net/http/cookie_test.go.html#7031777">tt</a></span><span class="op" id="7031886">.</span><span class="ident" id="7031887">Cookies</span>&nbsp;<span class="op" id="7031895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031900"><a href="/net/http/cookie_test.go.html#7031808">req</a></span><span class="op" id="7031903">.</span><span class="ident" id="7031904">AddCookie</span><span class="op" id="7031913">(</span><span class="ident" id="7031914"><a href="/net/http/cookie_test.go.html#7031873">c</a></span><span class="op" id="7031915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031923">if</span>&nbsp;<span class="ident" id="7031926">g</span>&nbsp;<span class="op" id="7031928">:=</span>&nbsp;<span class="ident" id="7031931"><a href="/net/http/cookie_test.go.html#7031808">req</a></span><span class="op" id="7031934">.</span><span class="ident" id="7031935">Header</span><span class="op" id="7031941">.</span><span class="ident" id="7031942">Get</span><span class="op" id="7031945">(</span><span class="string" id="7031946">&#34;Cookie&#34;</span><span class="op" id="7031954">)</span><span class="op" id="7031955">;</span>&nbsp;<span class="ident" id="7031957"><a href="/net/http/cookie_test.go.html#7031926">g</a></span>&nbsp;<span class="op" id="7031959">!=</span>&nbsp;<span class="ident" id="7031962"><a href="/net/http/cookie_test.go.html#7031777">tt</a></span><span class="op" id="7031964">.</span><span class="ident" id="7031965">Raw</span>&nbsp;<span class="op" id="7031969">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031974"><a href="/net/http/cookie_test.go.html#7031753">t</a></span><span class="op" id="7031975">.</span><span class="ident" id="7031976">Errorf</span><span class="op" id="7031982">(</span><span class="string" id="7031983">&#34;Test&nbsp;%d:\nwant:&nbsp;%s\n&nbsp;got:&nbsp;%s\n&#34;</span><span class="op" id="7032015">,</span>&nbsp;<span class="ident" id="7032017"><a href="/net/http/cookie_test.go.html#7031774">i</a></span><span class="op" id="7032018">,</span>&nbsp;<span class="ident" id="7032020"><a href="/net/http/cookie_test.go.html#7031777">tt</a></span><span class="op" id="7032022">.</span><span class="ident" id="7032023">Raw</span><span class="op" id="7032026">,</span>&nbsp;<span class="ident" id="7032028"><a href="/net/http/cookie_test.go.html#7031926">g</a></span><span class="op" id="7032029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032034">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032048">}</span><br>
<span class="lineno"></span><span class="op" id="7032050">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="7032053">var</span>&nbsp;<span class="ident" id="7032057">readSetCookiesTests</span>&nbsp;<span class="op" id="7032077">=</span>&nbsp;<span class="op" id="7032079">[</span><span class="op" id="7032080">]</span><span class="keyword" id="7032081">struct</span>&nbsp;<span class="op" id="7032088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032091">Header</span>&nbsp;&nbsp;<span class="ident" id="7032099"><a href="/net/http/header.go.html#3356649">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032107">Cookies</span>&nbsp;<span class="op" id="7032115">[</span><span class="op" id="7032116">]</span><span class="op" id="7032117">*</span><span class="ident" id="7032118"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><br>
<span class="lineno"></span><span class="op" id="7032125">}</span><span class="op" id="7032126">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032133"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7032139">{</span><span class="string" id="7032140">&#34;Set-Cookie&#34;</span><span class="op" id="7032152">:</span>&nbsp;<span class="op" id="7032154">{</span><span class="string" id="7032155">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7032169">}</span><span class="op" id="7032170">}</span><span class="op" id="7032171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032175">[</span><span class="op" id="7032176">]</span><span class="op" id="7032177">*</span><span class="ident" id="7032178"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7032184">{</span><span class="op" id="7032185">{</span><span class="ident" id="7032186">Name</span><span class="op" id="7032190">:</span>&nbsp;<span class="string" id="7032192">&#34;Cookie-1&#34;</span><span class="op" id="7032202">,</span>&nbsp;<span class="ident" id="7032204">Value</span><span class="op" id="7032209">:</span>&nbsp;<span class="string" id="7032211">&#34;v$1&#34;</span><span class="op" id="7032216">,</span>&nbsp;<span class="ident" id="7032218">Raw</span><span class="op" id="7032221">:</span>&nbsp;<span class="string" id="7032223">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7032237">}</span><span class="op" id="7032238">}</span><span class="op" id="7032239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032242">}</span><span class="op" id="7032243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032246">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032250"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7032256">{</span><span class="string" id="7032257">&#34;Set-Cookie&#34;</span><span class="op" id="7032269">:</span>&nbsp;<span class="op" id="7032271">{</span><span class="string" id="7032272">&#34;NID=99=YsDT5i3E-CXax-;&nbsp;expires=Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT;&nbsp;path=/;&nbsp;domain=.google.ch;&nbsp;HttpOnly&#34;</span><span class="op" id="7032371">}</span><span class="op" id="7032372">}</span><span class="op" id="7032373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032377">[</span><span class="op" id="7032378">]</span><span class="op" id="7032379">*</span><span class="ident" id="7032380"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7032386">{</span><span class="op" id="7032387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032392">Name</span><span class="op" id="7032396">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032404">&#34;NID&#34;</span><span class="op" id="7032409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032414">Value</span><span class="op" id="7032419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032426">&#34;99=YsDT5i3E-CXax-&#34;</span><span class="op" id="7032445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032450">Path</span><span class="op" id="7032454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032462">&#34;/&#34;</span><span class="op" id="7032465">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032470">Domain</span><span class="op" id="7032476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032482">&#34;.google.ch&#34;</span><span class="op" id="7032494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032499">HttpOnly</span><span class="op" id="7032507">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7032511">true</span><span class="op" id="7032515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032520">Expires</span><span class="op" id="7032527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7032532"><a href="/net/http/cookie_test.go.html#7028439">time</a></span><span class="op" id="7032536">.</span><span class="ident" id="7032537">Date</span><span class="op" id="7032541">(</span><span class="num" id="7032542">2011</span><span class="op" id="7032546">,</span>&nbsp;<span class="num" id="7032548">11</span><span class="op" id="7032550">,</span>&nbsp;<span class="num" id="7032552">23</span><span class="op" id="7032554">,</span>&nbsp;<span class="num" id="7032556">1</span><span class="op" id="7032557">,</span>&nbsp;<span class="num" id="7032559">5</span><span class="op" id="7032560">,</span>&nbsp;<span class="num" id="7032562">3</span><span class="op" id="7032563">,</span>&nbsp;<span class="num" id="7032565">0</span><span class="op" id="7032566">,</span>&nbsp;<span class="ident" id="7032568"><a href="/net/http/cookie_test.go.html#7028439">time</a></span><span class="op" id="7032572">.</span><span class="ident" id="7032573">UTC</span><span class="op" id="7032576">)</span><span class="op" id="7032577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032582">RawExpires</span><span class="op" id="7032592">:</span>&nbsp;<span class="string" id="7032594">&#34;Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT&#34;</span><span class="op" id="7032625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032630">Raw</span><span class="op" id="7032633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032642">&#34;NID=99=YsDT5i3E-CXax-;&nbsp;expires=Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT;&nbsp;path=/;&nbsp;domain=.google.ch;&nbsp;HttpOnly&#34;</span><span class="op" id="7032741">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032745">}</span><span class="op" id="7032746">}</span><span class="op" id="7032747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032750">}</span><span class="op" id="7032751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032758"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7032764">{</span><span class="string" id="7032765">&#34;Set-Cookie&#34;</span><span class="op" id="7032777">:</span>&nbsp;<span class="op" id="7032779">{</span><span class="string" id="7032780">&#34;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7032854">}</span><span class="op" id="7032855">}</span><span class="op" id="7032856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032860">[</span><span class="op" id="7032861">]</span><span class="op" id="7032862">*</span><span class="ident" id="7032863"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7032869">{</span><span class="op" id="7032870">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032875">Name</span><span class="op" id="7032879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032887">&#34;.ASPXAUTH&#34;</span><span class="op" id="7032898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032903">Value</span><span class="op" id="7032908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032915">&#34;7E3AA&#34;</span><span class="op" id="7032922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032927">Path</span><span class="op" id="7032931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7032939">&#34;/&#34;</span><span class="op" id="7032942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032947">Expires</span><span class="op" id="7032954">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7032959"><a href="/net/http/cookie_test.go.html#7028439">time</a></span><span class="op" id="7032963">.</span><span class="ident" id="7032964">Date</span><span class="op" id="7032968">(</span><span class="num" id="7032969">2012</span><span class="op" id="7032973">,</span>&nbsp;<span class="num" id="7032975">3</span><span class="op" id="7032976">,</span>&nbsp;<span class="num" id="7032978">7</span><span class="op" id="7032979">,</span>&nbsp;<span class="num" id="7032981">14</span><span class="op" id="7032983">,</span>&nbsp;<span class="num" id="7032985">25</span><span class="op" id="7032987">,</span>&nbsp;<span class="num" id="7032989">6</span><span class="op" id="7032990">,</span>&nbsp;<span class="num" id="7032992">0</span><span class="op" id="7032993">,</span>&nbsp;<span class="ident" id="7032995"><a href="/net/http/cookie_test.go.html#7028439">time</a></span><span class="op" id="7032999">.</span><span class="ident" id="7033000">UTC</span><span class="op" id="7033003">)</span><span class="op" id="7033004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033009">RawExpires</span><span class="op" id="7033019">:</span>&nbsp;<span class="string" id="7033021">&#34;Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT&#34;</span><span class="op" id="7033052">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033057">HttpOnly</span><span class="op" id="7033065">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7033069">true</span><span class="op" id="7033073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033078">Raw</span><span class="op" id="7033081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7033090">&#34;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7033164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033168">}</span><span class="op" id="7033169">}</span><span class="op" id="7033170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033173">}</span><span class="op" id="7033174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033177">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033181"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7033187">{</span><span class="string" id="7033188">&#34;Set-Cookie&#34;</span><span class="op" id="7033200">:</span>&nbsp;<span class="op" id="7033202">{</span><span class="string" id="7033203">&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7033244">}</span><span class="op" id="7033245">}</span><span class="op" id="7033246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033250">[</span><span class="op" id="7033251">]</span><span class="op" id="7033252">*</span><span class="ident" id="7033253"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7033259">{</span><span class="op" id="7033260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033265">Name</span><span class="op" id="7033269">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7033275">&#34;ASP.NET_SessionId&#34;</span><span class="op" id="7033294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033299">Value</span><span class="op" id="7033304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7033309">&#34;foo&#34;</span><span class="op" id="7033314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033319">Path</span><span class="op" id="7033323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7033329">&#34;/&#34;</span><span class="op" id="7033332">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033337">HttpOnly</span><span class="op" id="7033345">:</span>&nbsp;<span class="builtintype" id="7033347">true</span><span class="op" id="7033351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033356">Raw</span><span class="op" id="7033359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7033366">&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7033407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033411">}</span><span class="op" id="7033412">}</span><span class="op" id="7033413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033416">}</span><span class="op" id="7033417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033420">//&nbsp;Make&nbsp;sure&nbsp;we&nbsp;can&nbsp;properly&nbsp;read&nbsp;back&nbsp;the&nbsp;Set-Cookie&nbsp;headers&nbsp;we&nbsp;create</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033493">//&nbsp;for&nbsp;values&nbsp;containing&nbsp;spaces&nbsp;or&nbsp;commas:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033541"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7033547">{</span><span class="string" id="7033548">&#34;Set-Cookie&#34;</span><span class="op" id="7033560">:</span>&nbsp;<span class="op" id="7033562">{</span><span class="string" id="7033563">`special-1=a&nbsp;z`</span><span class="op" id="7033578">}</span><span class="op" id="7033579">}</span><span class="op" id="7033580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033584">[</span><span class="op" id="7033585">]</span><span class="op" id="7033586">*</span><span class="ident" id="7033587"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7033593">{</span><span class="op" id="7033594">{</span><span class="ident" id="7033595">Name</span><span class="op" id="7033599">:</span>&nbsp;<span class="string" id="7033601">&#34;special-1&#34;</span><span class="op" id="7033612">,</span>&nbsp;<span class="ident" id="7033614">Value</span><span class="op" id="7033619">:</span>&nbsp;<span class="string" id="7033621">&#34;a&nbsp;z&#34;</span><span class="op" id="7033626">,</span>&nbsp;<span class="ident" id="7033628">Raw</span><span class="op" id="7033631">:</span>&nbsp;<span class="string" id="7033633">`special-1=a&nbsp;z`</span><span class="op" id="7033648">}</span><span class="op" id="7033649">}</span><span class="op" id="7033650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033653">}</span><span class="op" id="7033654">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033661"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7033667">{</span><span class="string" id="7033668">&#34;Set-Cookie&#34;</span><span class="op" id="7033680">:</span>&nbsp;<span class="op" id="7033682">{</span><span class="string" id="7033683">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7033699">}</span><span class="op" id="7033700">}</span><span class="op" id="7033701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033705">[</span><span class="op" id="7033706">]</span><span class="op" id="7033707">*</span><span class="ident" id="7033708"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7033714">{</span><span class="op" id="7033715">{</span><span class="ident" id="7033716">Name</span><span class="op" id="7033720">:</span>&nbsp;<span class="string" id="7033722">&#34;special-2&#34;</span><span class="op" id="7033733">,</span>&nbsp;<span class="ident" id="7033735">Value</span><span class="op" id="7033740">:</span>&nbsp;<span class="string" id="7033742">&#34;&nbsp;z&#34;</span><span class="op" id="7033746">,</span>&nbsp;<span class="ident" id="7033748">Raw</span><span class="op" id="7033751">:</span>&nbsp;<span class="string" id="7033753">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7033769">}</span><span class="op" id="7033770">}</span><span class="op" id="7033771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033774">}</span><span class="op" id="7033775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033778">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033782"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7033788">{</span><span class="string" id="7033789">&#34;Set-Cookie&#34;</span><span class="op" id="7033801">:</span>&nbsp;<span class="op" id="7033803">{</span><span class="string" id="7033804">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7033820">}</span><span class="op" id="7033821">}</span><span class="op" id="7033822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033826">[</span><span class="op" id="7033827">]</span><span class="op" id="7033828">*</span><span class="ident" id="7033829"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7033835">{</span><span class="op" id="7033836">{</span><span class="ident" id="7033837">Name</span><span class="op" id="7033841">:</span>&nbsp;<span class="string" id="7033843">&#34;special-3&#34;</span><span class="op" id="7033854">,</span>&nbsp;<span class="ident" id="7033856">Value</span><span class="op" id="7033861">:</span>&nbsp;<span class="string" id="7033863">&#34;a&nbsp;&#34;</span><span class="op" id="7033867">,</span>&nbsp;<span class="ident" id="7033869">Raw</span><span class="op" id="7033872">:</span>&nbsp;<span class="string" id="7033874">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7033890">}</span><span class="op" id="7033891">}</span><span class="op" id="7033892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033895">}</span><span class="op" id="7033896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033903"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7033909">{</span><span class="string" id="7033910">&#34;Set-Cookie&#34;</span><span class="op" id="7033922">:</span>&nbsp;<span class="op" id="7033924">{</span><span class="string" id="7033925">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7033940">}</span><span class="op" id="7033941">}</span><span class="op" id="7033942">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033946">[</span><span class="op" id="7033947">]</span><span class="op" id="7033948">*</span><span class="ident" id="7033949"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7033955">{</span><span class="op" id="7033956">{</span><span class="ident" id="7033957">Name</span><span class="op" id="7033961">:</span>&nbsp;<span class="string" id="7033963">&#34;special-4&#34;</span><span class="op" id="7033974">,</span>&nbsp;<span class="ident" id="7033976">Value</span><span class="op" id="7033981">:</span>&nbsp;<span class="string" id="7033983">&#34;&nbsp;&#34;</span><span class="op" id="7033986">,</span>&nbsp;<span class="ident" id="7033988">Raw</span><span class="op" id="7033991">:</span>&nbsp;<span class="string" id="7033993">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7034008">}</span><span class="op" id="7034009">}</span><span class="op" id="7034010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034013">}</span><span class="op" id="7034014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034021"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7034027">{</span><span class="string" id="7034028">&#34;Set-Cookie&#34;</span><span class="op" id="7034040">:</span>&nbsp;<span class="op" id="7034042">{</span><span class="string" id="7034043">`special-5=a,z`</span><span class="op" id="7034058">}</span><span class="op" id="7034059">}</span><span class="op" id="7034060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034064">[</span><span class="op" id="7034065">]</span><span class="op" id="7034066">*</span><span class="ident" id="7034067"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7034073">{</span><span class="op" id="7034074">{</span><span class="ident" id="7034075">Name</span><span class="op" id="7034079">:</span>&nbsp;<span class="string" id="7034081">&#34;special-5&#34;</span><span class="op" id="7034092">,</span>&nbsp;<span class="ident" id="7034094">Value</span><span class="op" id="7034099">:</span>&nbsp;<span class="string" id="7034101">&#34;a,z&#34;</span><span class="op" id="7034106">,</span>&nbsp;<span class="ident" id="7034108">Raw</span><span class="op" id="7034111">:</span>&nbsp;<span class="string" id="7034113">`special-5=a,z`</span><span class="op" id="7034128">}</span><span class="op" id="7034129">}</span><span class="op" id="7034130">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034133">}</span><span class="op" id="7034134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034141"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7034147">{</span><span class="string" id="7034148">&#34;Set-Cookie&#34;</span><span class="op" id="7034160">:</span>&nbsp;<span class="op" id="7034162">{</span><span class="string" id="7034163">`special-6=&#34;,z&#34;`</span><span class="op" id="7034179">}</span><span class="op" id="7034180">}</span><span class="op" id="7034181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034185">[</span><span class="op" id="7034186">]</span><span class="op" id="7034187">*</span><span class="ident" id="7034188"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7034194">{</span><span class="op" id="7034195">{</span><span class="ident" id="7034196">Name</span><span class="op" id="7034200">:</span>&nbsp;<span class="string" id="7034202">&#34;special-6&#34;</span><span class="op" id="7034213">,</span>&nbsp;<span class="ident" id="7034215">Value</span><span class="op" id="7034220">:</span>&nbsp;<span class="string" id="7034222">&#34;,z&#34;</span><span class="op" id="7034226">,</span>&nbsp;<span class="ident" id="7034228">Raw</span><span class="op" id="7034231">:</span>&nbsp;<span class="string" id="7034233">`special-6=&#34;,z&#34;`</span><span class="op" id="7034249">}</span><span class="op" id="7034250">}</span><span class="op" id="7034251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034254">}</span><span class="op" id="7034255">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034262"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7034268">{</span><span class="string" id="7034269">&#34;Set-Cookie&#34;</span><span class="op" id="7034281">:</span>&nbsp;<span class="op" id="7034283">{</span><span class="string" id="7034284">`special-7=a,`</span><span class="op" id="7034298">}</span><span class="op" id="7034299">}</span><span class="op" id="7034300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034304">[</span><span class="op" id="7034305">]</span><span class="op" id="7034306">*</span><span class="ident" id="7034307"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7034313">{</span><span class="op" id="7034314">{</span><span class="ident" id="7034315">Name</span><span class="op" id="7034319">:</span>&nbsp;<span class="string" id="7034321">&#34;special-7&#34;</span><span class="op" id="7034332">,</span>&nbsp;<span class="ident" id="7034334">Value</span><span class="op" id="7034339">:</span>&nbsp;<span class="string" id="7034341">&#34;a,&#34;</span><span class="op" id="7034345">,</span>&nbsp;<span class="ident" id="7034347">Raw</span><span class="op" id="7034350">:</span>&nbsp;<span class="string" id="7034352">`special-7=a,`</span><span class="op" id="7034366">}</span><span class="op" id="7034367">}</span><span class="op" id="7034368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034371">}</span><span class="op" id="7034372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034375">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034379"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7034385">{</span><span class="string" id="7034386">&#34;Set-Cookie&#34;</span><span class="op" id="7034398">:</span>&nbsp;<span class="op" id="7034400">{</span><span class="string" id="7034401">`special-8=&#34;,&#34;`</span><span class="op" id="7034416">}</span><span class="op" id="7034417">}</span><span class="op" id="7034418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034422">[</span><span class="op" id="7034423">]</span><span class="op" id="7034424">*</span><span class="ident" id="7034425"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7034431">{</span><span class="op" id="7034432">{</span><span class="ident" id="7034433">Name</span><span class="op" id="7034437">:</span>&nbsp;<span class="string" id="7034439">&#34;special-8&#34;</span><span class="op" id="7034450">,</span>&nbsp;<span class="ident" id="7034452">Value</span><span class="op" id="7034457">:</span>&nbsp;<span class="string" id="7034459">&#34;,&#34;</span><span class="op" id="7034462">,</span>&nbsp;<span class="ident" id="7034464">Raw</span><span class="op" id="7034467">:</span>&nbsp;<span class="string" id="7034469">`special-8=&#34;,&#34;`</span><span class="op" id="7034484">}</span><span class="op" id="7034485">}</span><span class="op" id="7034486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034489">}</span><span class="op" id="7034490">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034494">//&nbsp;TODO(bradfitz):&nbsp;users&nbsp;have&nbsp;reported&nbsp;seeing&nbsp;this&nbsp;in&nbsp;the</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034553">//&nbsp;wild,&nbsp;but&nbsp;do&nbsp;browsers&nbsp;handle&nbsp;it?&nbsp;RFC&nbsp;6265&nbsp;just&nbsp;says&nbsp;&#34;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034616">//&nbsp;do&nbsp;that&#34;&nbsp;(section&nbsp;3)&nbsp;and&nbsp;then&nbsp;never&nbsp;mentions&nbsp;header&nbsp;folding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034680">//&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034691">//&nbsp;Header{&#34;Set-Cookie&#34;:&nbsp;{&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly,&nbsp;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;}},</span><br>
<span class="lineno"></span><span class="op" id="7034835">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="7034838">func</span>&nbsp;<span class="ident" id="7034843">toJSON</span><span class="op" id="7034849">(</span><span class="ident" id="7034850">v</span>&nbsp;<span class="keyword" id="7034852">interface</span><span class="op" id="7034861">{</span><span class="op" id="7034862">}</span><span class="op" id="7034863">)</span>&nbsp;<span class="builtintype" id="7034865">string</span>&nbsp;<span class="op" id="7034872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034875">b</span><span class="op" id="7034876">,</span>&nbsp;<span class="ident" id="7034878">err</span>&nbsp;<span class="op" id="7034882">:=</span>&nbsp;<span class="ident" id="7034885"><a href="/net/http/cookie_test.go.html#7028369">json</a></span><span class="op" id="7034889">.</span><span class="ident" id="7034890">Marshal</span><span class="op" id="7034897">(</span><span class="ident" id="7034898"><a href="/net/http/cookie_test.go.html#7034850">v</a></span><span class="op" id="7034899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034902">if</span>&nbsp;<span class="ident" id="7034905"><a href="/net/http/cookie_test.go.html#7034878">err</a></span>&nbsp;<span class="op" id="7034909">!=</span>&nbsp;<span class="ident" id="7034912">nil</span>&nbsp;<span class="op" id="7034916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034920">return</span>&nbsp;<span class="ident" id="7034927"><a href="/net/http/cookie_test.go.html#7028386">fmt</a></span><span class="op" id="7034930">.</span><span class="ident" id="7034931">Sprintf</span><span class="op" id="7034938">(</span><span class="string" id="7034939">&#34;%#v&#34;</span><span class="op" id="7034944">,</span>&nbsp;<span class="ident" id="7034946"><a href="/net/http/cookie_test.go.html#7034850">v</a></span><span class="op" id="7034947">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034953">return</span>&nbsp;<span class="builtintype" id="7034960">string</span><span class="op" id="7034966">(</span><span class="ident" id="7034967"><a href="/net/http/cookie_test.go.html#7034875">b</a></span><span class="op" id="7034968">)</span><br>
<span class="lineno"></span><span class="op" id="7034970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7034973">func</span>&nbsp;<span class="ident" id="7034978">TestReadSetCookies</span><span class="op" id="7034996">(</span><span class="ident" id="7034997">t</span>&nbsp;<span class="op" id="7034999">*</span><span class="ident" id="7035000"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7035007">.</span><span class="ident" id="7035008">T</span><span class="op" id="7035009">)</span>&nbsp;<span class="op" id="7035011">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035014">for</span>&nbsp;<span class="ident" id="7035018">i</span><span class="op" id="7035019">,</span>&nbsp;<span class="ident" id="7035021">tt</span>&nbsp;<span class="op" id="7035024">:=</span>&nbsp;<span class="keyword" id="7035027">range</span>&nbsp;<span class="ident" id="7035033"><a href="/net/http/cookie_test.go.html#7032057">readSetCookiesTests</a></span>&nbsp;<span class="op" id="7035053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035057">for</span>&nbsp;<span class="ident" id="7035061">n</span>&nbsp;<span class="op" id="7035063">:=</span>&nbsp;<span class="num" id="7035066">0</span><span class="op" id="7035067">;</span>&nbsp;<span class="ident" id="7035069"><a href="/net/http/cookie_test.go.html#7035061">n</a></span>&nbsp;<span class="op" id="7035071">&lt;</span>&nbsp;<span class="num" id="7035073">2</span><span class="op" id="7035074">;</span>&nbsp;<span class="ident" id="7035076"><a href="/net/http/cookie_test.go.html#7035061">n</a></span><span class="op" id="7035077">++</span>&nbsp;<span class="op" id="7035080">{</span>&nbsp;<span class="comment" id="7035082">//&nbsp;to&nbsp;verify&nbsp;readSetCookies&nbsp;doesn&#39;t&nbsp;mutate&nbsp;its&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035138">c</span>&nbsp;<span class="op" id="7035140">:=</span>&nbsp;<span class="ident" id="7035143"><a href="/net/http/cookie.go.html#3327095">readSetCookies</a></span><span class="op" id="7035157">(</span><span class="ident" id="7035158"><a href="/net/http/cookie_test.go.html#7035021">tt</a></span><span class="op" id="7035160">.</span><span class="ident" id="7035161">Header</span><span class="op" id="7035167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035172">if</span>&nbsp;<span class="op" id="7035175">!</span><span class="ident" id="7035176"><a href="/net/http/cookie_test.go.html#7028406">reflect</a></span><span class="op" id="7035183">.</span><span class="ident" id="7035184">DeepEqual</span><span class="op" id="7035193">(</span><span class="ident" id="7035194"><a href="/net/http/cookie_test.go.html#7035138">c</a></span><span class="op" id="7035195">,</span>&nbsp;<span class="ident" id="7035197"><a href="/net/http/cookie_test.go.html#7035021">tt</a></span><span class="op" id="7035199">.</span><span class="ident" id="7035200">Cookies</span><span class="op" id="7035207">)</span>&nbsp;<span class="op" id="7035209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035215"><a href="/net/http/cookie_test.go.html#7034997">t</a></span><span class="op" id="7035216">.</span><span class="ident" id="7035217">Errorf</span><span class="op" id="7035223">(</span><span class="string" id="7035224">&#34;#%d&nbsp;readSetCookies:&nbsp;have\n%s\nwant\n%s\n&#34;</span><span class="op" id="7035266">,</span>&nbsp;<span class="ident" id="7035268"><a href="/net/http/cookie_test.go.html#7035018">i</a></span><span class="op" id="7035269">,</span>&nbsp;<span class="ident" id="7035271"><a href="/net/http/cookie_test.go.html#7034843">toJSON</a></span><span class="op" id="7035277">(</span><span class="ident" id="7035278"><a href="/net/http/cookie_test.go.html#7035138">c</a></span><span class="op" id="7035279">)</span><span class="op" id="7035280">,</span>&nbsp;<span class="ident" id="7035282"><a href="/net/http/cookie_test.go.html#7034843">toJSON</a></span><span class="op" id="7035288">(</span><span class="ident" id="7035289"><a href="/net/http/cookie_test.go.html#7035021">tt</a></span><span class="op" id="7035291">.</span><span class="ident" id="7035292">Cookies</span><span class="op" id="7035299">)</span><span class="op" id="7035300">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035306">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035325">}</span><br>
<span class="lineno"></span><span class="op" id="7035327">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7035330">var</span>&nbsp;<span class="ident" id="7035334">readCookiesTests</span>&nbsp;<span class="op" id="7035351">=</span>&nbsp;<span class="op" id="7035353">[</span><span class="op" id="7035354">]</span><span class="keyword" id="7035355">struct</span>&nbsp;<span class="op" id="7035362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035365">Header</span>&nbsp;&nbsp;<span class="ident" id="7035373"><a href="/net/http/header.go.html#3356649">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035381">Filter</span>&nbsp;&nbsp;<span class="builtintype" id="7035389">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035397">Cookies</span>&nbsp;<span class="op" id="7035405">[</span><span class="op" id="7035406">]</span><span class="op" id="7035407">*</span><span class="ident" id="7035408"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><br>
<span class="lineno">285</span><span class="op" id="7035415">}</span><span class="op" id="7035416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035423"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7035429">{</span><span class="string" id="7035430">&#34;Cookie&#34;</span><span class="op" id="7035438">:</span>&nbsp;<span class="op" id="7035440">{</span><span class="string" id="7035441">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7035455">,</span>&nbsp;<span class="string" id="7035457">&#34;c2=v2&#34;</span><span class="op" id="7035464">}</span><span class="op" id="7035465">}</span><span class="op" id="7035466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7035470">&#34;&#34;</span><span class="op" id="7035472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035476">[</span><span class="op" id="7035477">]</span><span class="op" id="7035478">*</span><span class="ident" id="7035479"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7035485">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035490">{</span><span class="ident" id="7035491">Name</span><span class="op" id="7035495">:</span>&nbsp;<span class="string" id="7035497">&#34;Cookie-1&#34;</span><span class="op" id="7035507">,</span>&nbsp;<span class="ident" id="7035509">Value</span><span class="op" id="7035514">:</span>&nbsp;<span class="string" id="7035516">&#34;v$1&#34;</span><span class="op" id="7035521">}</span><span class="op" id="7035522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035527">{</span><span class="ident" id="7035528">Name</span><span class="op" id="7035532">:</span>&nbsp;<span class="string" id="7035534">&#34;c2&#34;</span><span class="op" id="7035538">,</span>&nbsp;<span class="ident" id="7035540">Value</span><span class="op" id="7035545">:</span>&nbsp;<span class="string" id="7035547">&#34;v2&#34;</span><span class="op" id="7035551">}</span><span class="op" id="7035552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035556">}</span><span class="op" id="7035557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035560">}</span><span class="op" id="7035561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035564">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035568"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7035574">{</span><span class="string" id="7035575">&#34;Cookie&#34;</span><span class="op" id="7035583">:</span>&nbsp;<span class="op" id="7035585">{</span><span class="string" id="7035586">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7035600">,</span>&nbsp;<span class="string" id="7035602">&#34;c2=v2&#34;</span><span class="op" id="7035609">}</span><span class="op" id="7035610">}</span><span class="op" id="7035611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7035615">&#34;c2&#34;</span><span class="op" id="7035619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035623">[</span><span class="op" id="7035624">]</span><span class="op" id="7035625">*</span><span class="ident" id="7035626"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7035632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035637">{</span><span class="ident" id="7035638">Name</span><span class="op" id="7035642">:</span>&nbsp;<span class="string" id="7035644">&#34;c2&#34;</span><span class="op" id="7035648">,</span>&nbsp;<span class="ident" id="7035650">Value</span><span class="op" id="7035655">:</span>&nbsp;<span class="string" id="7035657">&#34;v2&#34;</span><span class="op" id="7035661">}</span><span class="op" id="7035662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035666">}</span><span class="op" id="7035667">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035670">}</span><span class="op" id="7035671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035678"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7035684">{</span><span class="string" id="7035685">&#34;Cookie&#34;</span><span class="op" id="7035693">:</span>&nbsp;<span class="op" id="7035695">{</span><span class="string" id="7035696">&#34;Cookie-1=v$1;&nbsp;c2=v2&#34;</span><span class="op" id="7035717">}</span><span class="op" id="7035718">}</span><span class="op" id="7035719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7035723">&#34;&#34;</span><span class="op" id="7035725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035729">[</span><span class="op" id="7035730">]</span><span class="op" id="7035731">*</span><span class="ident" id="7035732"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7035738">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035743">{</span><span class="ident" id="7035744">Name</span><span class="op" id="7035748">:</span>&nbsp;<span class="string" id="7035750">&#34;Cookie-1&#34;</span><span class="op" id="7035760">,</span>&nbsp;<span class="ident" id="7035762">Value</span><span class="op" id="7035767">:</span>&nbsp;<span class="string" id="7035769">&#34;v$1&#34;</span><span class="op" id="7035774">}</span><span class="op" id="7035775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035780">{</span><span class="ident" id="7035781">Name</span><span class="op" id="7035785">:</span>&nbsp;<span class="string" id="7035787">&#34;c2&#34;</span><span class="op" id="7035791">,</span>&nbsp;<span class="ident" id="7035793">Value</span><span class="op" id="7035798">:</span>&nbsp;<span class="string" id="7035800">&#34;v2&#34;</span><span class="op" id="7035804">}</span><span class="op" id="7035805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035809">}</span><span class="op" id="7035810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035813">}</span><span class="op" id="7035814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035817">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035821"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7035827">{</span><span class="string" id="7035828">&#34;Cookie&#34;</span><span class="op" id="7035836">:</span>&nbsp;<span class="op" id="7035838">{</span><span class="string" id="7035839">&#34;Cookie-1=v$1;&nbsp;c2=v2&#34;</span><span class="op" id="7035860">}</span><span class="op" id="7035861">}</span><span class="op" id="7035862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7035866">&#34;c2&#34;</span><span class="op" id="7035870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035874">[</span><span class="op" id="7035875">]</span><span class="op" id="7035876">*</span><span class="ident" id="7035877"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7035883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035888">{</span><span class="ident" id="7035889">Name</span><span class="op" id="7035893">:</span>&nbsp;<span class="string" id="7035895">&#34;c2&#34;</span><span class="op" id="7035899">,</span>&nbsp;<span class="ident" id="7035901">Value</span><span class="op" id="7035906">:</span>&nbsp;<span class="string" id="7035908">&#34;v2&#34;</span><span class="op" id="7035912">}</span><span class="op" id="7035913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035917">}</span><span class="op" id="7035918">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035921">}</span><span class="op" id="7035922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035929"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7035935">{</span><span class="string" id="7035936">&#34;Cookie&#34;</span><span class="op" id="7035944">:</span>&nbsp;<span class="op" id="7035946">{</span><span class="string" id="7035947">`Cookie-1=&#34;v$1&#34;;&nbsp;c2=&#34;v2&#34;`</span><span class="op" id="7035972">}</span><span class="op" id="7035973">}</span><span class="op" id="7035974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7035978">&#34;&#34;</span><span class="op" id="7035980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035984">[</span><span class="op" id="7035985">]</span><span class="op" id="7035986">*</span><span class="ident" id="7035987"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7035993">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035998">{</span><span class="ident" id="7035999">Name</span><span class="op" id="7036003">:</span>&nbsp;<span class="string" id="7036005">&#34;Cookie-1&#34;</span><span class="op" id="7036015">,</span>&nbsp;<span class="ident" id="7036017">Value</span><span class="op" id="7036022">:</span>&nbsp;<span class="string" id="7036024">&#34;v$1&#34;</span><span class="op" id="7036029">}</span><span class="op" id="7036030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036035">{</span><span class="ident" id="7036036">Name</span><span class="op" id="7036040">:</span>&nbsp;<span class="string" id="7036042">&#34;c2&#34;</span><span class="op" id="7036046">,</span>&nbsp;<span class="ident" id="7036048">Value</span><span class="op" id="7036053">:</span>&nbsp;<span class="string" id="7036055">&#34;v2&#34;</span><span class="op" id="7036059">}</span><span class="op" id="7036060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036064">}</span><span class="op" id="7036065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036068">}</span><span class="op" id="7036069">,</span><br>
<span class="lineno"></span><span class="op" id="7036071">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="7036074">func</span>&nbsp;<span class="ident" id="7036079">TestReadCookies</span><span class="op" id="7036094">(</span><span class="ident" id="7036095">t</span>&nbsp;<span class="op" id="7036097">*</span><span class="ident" id="7036098"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7036105">.</span><span class="ident" id="7036106">T</span><span class="op" id="7036107">)</span>&nbsp;<span class="op" id="7036109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036112">for</span>&nbsp;<span class="ident" id="7036116">i</span><span class="op" id="7036117">,</span>&nbsp;<span class="ident" id="7036119">tt</span>&nbsp;<span class="op" id="7036122">:=</span>&nbsp;<span class="keyword" id="7036125">range</span>&nbsp;<span class="ident" id="7036131"><a href="/net/http/cookie_test.go.html#7035334">readCookiesTests</a></span>&nbsp;<span class="op" id="7036148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036152">for</span>&nbsp;<span class="ident" id="7036156">n</span>&nbsp;<span class="op" id="7036158">:=</span>&nbsp;<span class="num" id="7036161">0</span><span class="op" id="7036162">;</span>&nbsp;<span class="ident" id="7036164"><a href="/net/http/cookie_test.go.html#7036156">n</a></span>&nbsp;<span class="op" id="7036166">&lt;</span>&nbsp;<span class="num" id="7036168">2</span><span class="op" id="7036169">;</span>&nbsp;<span class="ident" id="7036171"><a href="/net/http/cookie_test.go.html#7036156">n</a></span><span class="op" id="7036172">++</span>&nbsp;<span class="op" id="7036175">{</span>&nbsp;<span class="comment" id="7036177">//&nbsp;to&nbsp;verify&nbsp;readCookies&nbsp;doesn&#39;t&nbsp;mutate&nbsp;its&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036230">c</span>&nbsp;<span class="op" id="7036232">:=</span>&nbsp;<span class="ident" id="7036235"><a href="/net/http/cookie.go.html#3330471">readCookies</a></span><span class="op" id="7036246">(</span><span class="ident" id="7036247"><a href="/net/http/cookie_test.go.html#7036119">tt</a></span><span class="op" id="7036249">.</span><span class="ident" id="7036250">Header</span><span class="op" id="7036256">,</span>&nbsp;<span class="ident" id="7036258"><a href="/net/http/cookie_test.go.html#7036119">tt</a></span><span class="op" id="7036260">.</span><span class="ident" id="7036261">Filter</span><span class="op" id="7036267">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036272">if</span>&nbsp;<span class="op" id="7036275">!</span><span class="ident" id="7036276"><a href="/net/http/cookie_test.go.html#7028406">reflect</a></span><span class="op" id="7036283">.</span><span class="ident" id="7036284">DeepEqual</span><span class="op" id="7036293">(</span><span class="ident" id="7036294"><a href="/net/http/cookie_test.go.html#7036230">c</a></span><span class="op" id="7036295">,</span>&nbsp;<span class="ident" id="7036297"><a href="/net/http/cookie_test.go.html#7036119">tt</a></span><span class="op" id="7036299">.</span><span class="ident" id="7036300">Cookies</span><span class="op" id="7036307">)</span>&nbsp;<span class="op" id="7036309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036315"><a href="/net/http/cookie_test.go.html#7036095">t</a></span><span class="op" id="7036316">.</span><span class="ident" id="7036317">Errorf</span><span class="op" id="7036323">(</span><span class="string" id="7036324">&#34;#%d&nbsp;readCookies:\nhave:&nbsp;%s\nwant:&nbsp;%s\n&#34;</span><span class="op" id="7036364">,</span>&nbsp;<span class="ident" id="7036366"><a href="/net/http/cookie_test.go.html#7036116">i</a></span><span class="op" id="7036367">,</span>&nbsp;<span class="ident" id="7036369"><a href="/net/http/cookie_test.go.html#7034843">toJSON</a></span><span class="op" id="7036375">(</span><span class="ident" id="7036376"><a href="/net/http/cookie_test.go.html#7036230">c</a></span><span class="op" id="7036377">)</span><span class="op" id="7036378">,</span>&nbsp;<span class="ident" id="7036380"><a href="/net/http/cookie_test.go.html#7034843">toJSON</a></span><span class="op" id="7036386">(</span><span class="ident" id="7036387"><a href="/net/http/cookie_test.go.html#7036119">tt</a></span><span class="op" id="7036389">.</span><span class="ident" id="7036390">Cookies</span><span class="op" id="7036397">)</span><span class="op" id="7036398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036404">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036420">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036423">}</span><br>
<span class="lineno"></span><span class="op" id="7036425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7036428">func</span>&nbsp;<span class="ident" id="7036433">TestSetCookieDoubleQuotes</span><span class="op" id="7036458">(</span><span class="ident" id="7036459">t</span>&nbsp;<span class="op" id="7036461">*</span><span class="ident" id="7036462"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7036469">.</span><span class="ident" id="7036470">T</span><span class="op" id="7036471">)</span>&nbsp;<span class="op" id="7036473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036476">res</span>&nbsp;<span class="op" id="7036480">:=</span>&nbsp;<span class="op" id="7036483">&amp;</span><span class="ident" id="7036484"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7036492">{</span><span class="ident" id="7036493">Header</span><span class="op" id="7036499">:</span>&nbsp;<span class="ident" id="7036501"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7036507">{</span><span class="op" id="7036508">}</span><span class="op" id="7036509">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036512"><a href="/net/http/cookie_test.go.html#7036476">res</a></span><span class="op" id="7036515">.</span><span class="ident" id="7036516">Header</span><span class="op" id="7036522">.</span><span class="ident" id="7036523">Add</span><span class="op" id="7036526">(</span><span class="string" id="7036527">&#34;Set-Cookie&#34;</span><span class="op" id="7036539">,</span>&nbsp;<span class="string" id="7036541">`quoted0=none;&nbsp;max-age=30`</span><span class="op" id="7036567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036570"><a href="/net/http/cookie_test.go.html#7036476">res</a></span><span class="op" id="7036573">.</span><span class="ident" id="7036574">Header</span><span class="op" id="7036580">.</span><span class="ident" id="7036581">Add</span><span class="op" id="7036584">(</span><span class="string" id="7036585">&#34;Set-Cookie&#34;</span><span class="op" id="7036597">,</span>&nbsp;<span class="string" id="7036599">`quoted1=&#34;cookieValue&#34;;&nbsp;max-age=31`</span><span class="op" id="7036634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036637"><a href="/net/http/cookie_test.go.html#7036476">res</a></span><span class="op" id="7036640">.</span><span class="ident" id="7036641">Header</span><span class="op" id="7036647">.</span><span class="ident" id="7036648">Add</span><span class="op" id="7036651">(</span><span class="string" id="7036652">&#34;Set-Cookie&#34;</span><span class="op" id="7036664">,</span>&nbsp;<span class="string" id="7036666">`quoted2=cookieAV;&nbsp;max-age=&#34;32&#34;`</span><span class="op" id="7036698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036701"><a href="/net/http/cookie_test.go.html#7036476">res</a></span><span class="op" id="7036704">.</span><span class="ident" id="7036705">Header</span><span class="op" id="7036711">.</span><span class="ident" id="7036712">Add</span><span class="op" id="7036715">(</span><span class="string" id="7036716">&#34;Set-Cookie&#34;</span><span class="op" id="7036728">,</span>&nbsp;<span class="string" id="7036730">`quoted3=&#34;both&#34;;&nbsp;max-age=&#34;33&#34;`</span><span class="op" id="7036760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036763">got</span>&nbsp;<span class="op" id="7036767">:=</span>&nbsp;<span class="ident" id="7036770"><a href="/net/http/cookie_test.go.html#7036476">res</a></span><span class="op" id="7036773">.</span><span class="ident" id="7036774">Cookies</span><span class="op" id="7036781">(</span><span class="op" id="7036782">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036785">want</span>&nbsp;<span class="op" id="7036790">:=</span>&nbsp;<span class="op" id="7036793">[</span><span class="op" id="7036794">]</span><span class="op" id="7036795">*</span><span class="ident" id="7036796"><a href="/net/http/cookie.go.html#3326529">Cookie</a></span><span class="op" id="7036802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036806">{</span><span class="ident" id="7036807">Name</span><span class="op" id="7036811">:</span>&nbsp;<span class="string" id="7036813">&#34;quoted0&#34;</span><span class="op" id="7036822">,</span>&nbsp;<span class="ident" id="7036824">Value</span><span class="op" id="7036829">:</span>&nbsp;<span class="string" id="7036831">&#34;none&#34;</span><span class="op" id="7036837">,</span>&nbsp;<span class="ident" id="7036839">MaxAge</span><span class="op" id="7036845">:</span>&nbsp;<span class="num" id="7036847">30</span><span class="op" id="7036849">}</span><span class="op" id="7036850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036854">{</span><span class="ident" id="7036855">Name</span><span class="op" id="7036859">:</span>&nbsp;<span class="string" id="7036861">&#34;quoted1&#34;</span><span class="op" id="7036870">,</span>&nbsp;<span class="ident" id="7036872">Value</span><span class="op" id="7036877">:</span>&nbsp;<span class="string" id="7036879">&#34;cookieValue&#34;</span><span class="op" id="7036892">,</span>&nbsp;<span class="ident" id="7036894">MaxAge</span><span class="op" id="7036900">:</span>&nbsp;<span class="num" id="7036902">31</span><span class="op" id="7036904">}</span><span class="op" id="7036905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036909">{</span><span class="ident" id="7036910">Name</span><span class="op" id="7036914">:</span>&nbsp;<span class="string" id="7036916">&#34;quoted2&#34;</span><span class="op" id="7036925">,</span>&nbsp;<span class="ident" id="7036927">Value</span><span class="op" id="7036932">:</span>&nbsp;<span class="string" id="7036934">&#34;cookieAV&#34;</span><span class="op" id="7036944">}</span><span class="op" id="7036945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036949">{</span><span class="ident" id="7036950">Name</span><span class="op" id="7036954">:</span>&nbsp;<span class="string" id="7036956">&#34;quoted3&#34;</span><span class="op" id="7036965">,</span>&nbsp;<span class="ident" id="7036967">Value</span><span class="op" id="7036972">:</span>&nbsp;<span class="string" id="7036974">&#34;both&#34;</span><span class="op" id="7036980">}</span><span class="op" id="7036981">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036987">if</span>&nbsp;<span class="builtinfunc" id="7036990">len</span><span class="op" id="7036993">(</span><span class="ident" id="7036994"><a href="/net/http/cookie_test.go.html#7036763">got</a></span><span class="op" id="7036997">)</span>&nbsp;<span class="op" id="7036999">!=</span>&nbsp;<span class="builtinfunc" id="7037002">len</span><span class="op" id="7037005">(</span><span class="ident" id="7037006"><a href="/net/http/cookie_test.go.html#7036785">want</a></span><span class="op" id="7037010">)</span>&nbsp;<span class="op" id="7037012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037016"><a href="/net/http/cookie_test.go.html#7036459">t</a></span><span class="op" id="7037017">.</span><span class="ident" id="7037018">Fatal</span><span class="op" id="7037023">(</span><span class="string" id="7037024">&#34;got&nbsp;%d&nbsp;cookies,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7037049">,</span>&nbsp;<span class="builtinfunc" id="7037051">len</span><span class="op" id="7037054">(</span><span class="ident" id="7037055"><a href="/net/http/cookie_test.go.html#7036763">got</a></span><span class="op" id="7037058">)</span><span class="op" id="7037059">,</span>&nbsp;<span class="builtinfunc" id="7037061">len</span><span class="op" id="7037064">(</span><span class="ident" id="7037065"><a href="/net/http/cookie_test.go.html#7036785">want</a></span><span class="op" id="7037069">)</span><span class="op" id="7037070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037076">for</span>&nbsp;<span class="ident" id="7037080">i</span><span class="op" id="7037081">,</span>&nbsp;<span class="ident" id="7037083">w</span>&nbsp;<span class="op" id="7037085">:=</span>&nbsp;<span class="keyword" id="7037088">range</span>&nbsp;<span class="ident" id="7037094"><a href="/net/http/cookie_test.go.html#7036785">want</a></span>&nbsp;<span class="op" id="7037099">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037103">g</span>&nbsp;<span class="op" id="7037105">:=</span>&nbsp;<span class="ident" id="7037108"><a href="/net/http/cookie_test.go.html#7036763">got</a></span><span class="op" id="7037111">[</span><span class="ident" id="7037112"><a href="/net/http/cookie_test.go.html#7037080">i</a></span><span class="op" id="7037113">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037117">if</span>&nbsp;<span class="ident" id="7037120"><a href="/net/http/cookie_test.go.html#7037103">g</a></span><span class="op" id="7037121">.</span><span class="ident" id="7037122">Name</span>&nbsp;<span class="op" id="7037127">!=</span>&nbsp;<span class="ident" id="7037130"><a href="/net/http/cookie_test.go.html#7037083">w</a></span><span class="op" id="7037131">.</span><span class="ident" id="7037132">Name</span>&nbsp;<span class="op" id="7037137">||</span>&nbsp;<span class="ident" id="7037140"><a href="/net/http/cookie_test.go.html#7037103">g</a></span><span class="op" id="7037141">.</span><span class="ident" id="7037142">Value</span>&nbsp;<span class="op" id="7037148">!=</span>&nbsp;<span class="ident" id="7037151"><a href="/net/http/cookie_test.go.html#7037083">w</a></span><span class="op" id="7037152">.</span><span class="ident" id="7037153">Value</span>&nbsp;<span class="op" id="7037159">||</span>&nbsp;<span class="ident" id="7037162"><a href="/net/http/cookie_test.go.html#7037103">g</a></span><span class="op" id="7037163">.</span><span class="ident" id="7037164">MaxAge</span>&nbsp;<span class="op" id="7037171">!=</span>&nbsp;<span class="ident" id="7037174"><a href="/net/http/cookie_test.go.html#7037083">w</a></span><span class="op" id="7037175">.</span><span class="ident" id="7037176">MaxAge</span>&nbsp;<span class="op" id="7037183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037188"><a href="/net/http/cookie_test.go.html#7036459">t</a></span><span class="op" id="7037189">.</span><span class="ident" id="7037190">Errorf</span><span class="op" id="7037196">(</span><span class="string" id="7037197">&#34;cookie&nbsp;#%d:\ngot&nbsp;&nbsp;%v\nwant&nbsp;%v&#34;</span><span class="op" id="7037228">,</span>&nbsp;<span class="ident" id="7037230"><a href="/net/http/cookie_test.go.html#7037080">i</a></span><span class="op" id="7037231">,</span>&nbsp;<span class="ident" id="7037233"><a href="/net/http/cookie_test.go.html#7037103">g</a></span><span class="op" id="7037234">,</span>&nbsp;<span class="ident" id="7037236"><a href="/net/http/cookie_test.go.html#7037083">w</a></span><span class="op" id="7037237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037244">}</span><br>
<span class="lineno">360</span><span class="op" id="7037246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7037249">func</span>&nbsp;<span class="ident" id="7037254">TestCookieSanitizeValue</span><span class="op" id="7037277">(</span><span class="ident" id="7037278">t</span>&nbsp;<span class="op" id="7037280">*</span><span class="ident" id="7037281"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7037288">.</span><span class="ident" id="7037289">T</span><span class="op" id="7037290">)</span>&nbsp;<span class="op" id="7037292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037295">defer</span>&nbsp;<span class="ident" id="7037301"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7037304">.</span><span class="ident" id="7037305">SetOutput</span><span class="op" id="7037314">(</span><span class="ident" id="7037315"><a href="/net/http/cookie_test.go.html#7028400">os</a></span><span class="op" id="7037317">.</span><span class="ident" id="7037318">Stderr</span><span class="op" id="7037324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037327">var</span>&nbsp;<span class="ident" id="7037331">logbuf</span>&nbsp;<span class="ident" id="7037338"><a href="/net/http/cookie_test.go.html#7028360">bytes</a></span><span class="op" id="7037343">.</span><span class="ident" id="7037344">Buffer</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037352"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7037355">.</span><span class="ident" id="7037356">SetOutput</span><span class="op" id="7037365">(</span><span class="op" id="7037366">&amp;</span><span class="ident" id="7037367"><a href="/net/http/cookie_test.go.html#7037331">logbuf</a></span><span class="op" id="7037373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037377">tests</span>&nbsp;<span class="op" id="7037383">:=</span>&nbsp;<span class="op" id="7037386">[</span><span class="op" id="7037387">]</span><span class="keyword" id="7037388">struct</span>&nbsp;<span class="op" id="7037395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037399">in</span><span class="op" id="7037401">,</span>&nbsp;<span class="ident" id="7037403">want</span>&nbsp;<span class="builtintype" id="7037408">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037416">}</span><span class="op" id="7037417">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037421">{</span><span class="string" id="7037422">&#34;foo&#34;</span><span class="op" id="7037427">,</span>&nbsp;<span class="string" id="7037429">&#34;foo&#34;</span><span class="op" id="7037434">}</span><span class="op" id="7037435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037439">{</span><span class="string" id="7037440">&#34;foo;bar&#34;</span><span class="op" id="7037449">,</span>&nbsp;<span class="string" id="7037451">&#34;foobar&#34;</span><span class="op" id="7037459">}</span><span class="op" id="7037460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037464">{</span><span class="string" id="7037465">&#34;foo\\bar&#34;</span><span class="op" id="7037475">,</span>&nbsp;<span class="string" id="7037477">&#34;foobar&#34;</span><span class="op" id="7037485">}</span><span class="op" id="7037486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037490">{</span><span class="string" id="7037491">&#34;foo\&#34;bar&#34;</span><span class="op" id="7037501">,</span>&nbsp;<span class="string" id="7037503">&#34;foobar&#34;</span><span class="op" id="7037511">}</span><span class="op" id="7037512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037516">{</span><span class="string" id="7037517">&#34;\x00\x7e\x7f\x80&#34;</span><span class="op" id="7037535">,</span>&nbsp;<span class="string" id="7037537">&#34;\x7e&#34;</span><span class="op" id="7037543">}</span><span class="op" id="7037544">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037548">{</span><span class="string" id="7037549">`&#34;withquotes&#34;`</span><span class="op" id="7037563">,</span>&nbsp;<span class="string" id="7037565">&#34;withquotes&#34;</span><span class="op" id="7037577">}</span><span class="op" id="7037578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037582">{</span><span class="string" id="7037583">&#34;a&nbsp;z&#34;</span><span class="op" id="7037588">,</span>&nbsp;<span class="string" id="7037590">&#34;a&nbsp;z&#34;</span><span class="op" id="7037595">}</span><span class="op" id="7037596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037600">{</span><span class="string" id="7037601">&#34;&nbsp;z&#34;</span><span class="op" id="7037605">,</span>&nbsp;<span class="string" id="7037607">`&#34;&nbsp;z&#34;`</span><span class="op" id="7037613">}</span><span class="op" id="7037614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037618">{</span><span class="string" id="7037619">&#34;a&nbsp;&#34;</span><span class="op" id="7037623">,</span>&nbsp;<span class="string" id="7037625">`&#34;a&nbsp;&#34;`</span><span class="op" id="7037631">}</span><span class="op" id="7037632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037635">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037638">for</span>&nbsp;<span class="ident" id="7037642">_</span><span class="op" id="7037643">,</span>&nbsp;<span class="ident" id="7037645">tt</span>&nbsp;<span class="op" id="7037648">:=</span>&nbsp;<span class="keyword" id="7037651">range</span>&nbsp;<span class="ident" id="7037657"><a href="/net/http/cookie_test.go.html#7037377">tests</a></span>&nbsp;<span class="op" id="7037663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037667">if</span>&nbsp;<span class="ident" id="7037670">got</span>&nbsp;<span class="op" id="7037674">:=</span>&nbsp;<span class="ident" id="7037677"><a href="/net/http/cookie.go.html#3333387">sanitizeCookieValue</a></span><span class="op" id="7037696">(</span><span class="ident" id="7037697"><a href="/net/http/cookie_test.go.html#7037645">tt</a></span><span class="op" id="7037699">.</span><span class="ident" id="7037700">in</span><span class="op" id="7037702">)</span><span class="op" id="7037703">;</span>&nbsp;<span class="ident" id="7037705"><a href="/net/http/cookie_test.go.html#7037670">got</a></span>&nbsp;<span class="op" id="7037709">!=</span>&nbsp;<span class="ident" id="7037712"><a href="/net/http/cookie_test.go.html#7037645">tt</a></span><span class="op" id="7037714">.</span><span class="ident" id="7037715">want</span>&nbsp;<span class="op" id="7037720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037725"><a href="/net/http/cookie_test.go.html#7037278">t</a></span><span class="op" id="7037726">.</span><span class="ident" id="7037727">Errorf</span><span class="op" id="7037733">(</span><span class="string" id="7037734">&#34;sanitizeCookieValue(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7037773">,</span>&nbsp;<span class="ident" id="7037775"><a href="/net/http/cookie_test.go.html#7037645">tt</a></span><span class="op" id="7037777">.</span><span class="ident" id="7037778">in</span><span class="op" id="7037780">,</span>&nbsp;<span class="ident" id="7037782"><a href="/net/http/cookie_test.go.html#7037670">got</a></span><span class="op" id="7037785">,</span>&nbsp;<span class="ident" id="7037787"><a href="/net/http/cookie_test.go.html#7037645">tt</a></span><span class="op" id="7037789">.</span><span class="ident" id="7037790">want</span><span class="op" id="7037794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037801">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037805">if</span>&nbsp;<span class="ident" id="7037808">got</span><span class="op" id="7037811">,</span>&nbsp;<span class="ident" id="7037813">sub</span>&nbsp;<span class="op" id="7037817">:=</span>&nbsp;<span class="ident" id="7037820"><a href="/net/http/cookie_test.go.html#7037331">logbuf</a></span><span class="op" id="7037826">.</span><span class="ident" id="7037827">String</span><span class="op" id="7037833">(</span><span class="op" id="7037834">)</span><span class="op" id="7037835">,</span>&nbsp;<span class="string" id="7037837">&#34;dropping&nbsp;invalid&nbsp;bytes&#34;</span><span class="op" id="7037861">;</span>&nbsp;<span class="op" id="7037863">!</span><span class="ident" id="7037864"><a href="/net/http/cookie_test.go.html#7028417">strings</a></span><span class="op" id="7037871">.</span><span class="ident" id="7037872">Contains</span><span class="op" id="7037880">(</span><span class="ident" id="7037881"><a href="/net/http/cookie_test.go.html#7037808">got</a></span><span class="op" id="7037884">,</span>&nbsp;<span class="ident" id="7037886"><a href="/net/http/cookie_test.go.html#7037813">sub</a></span><span class="op" id="7037889">)</span>&nbsp;<span class="op" id="7037891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037895"><a href="/net/http/cookie_test.go.html#7037278">t</a></span><span class="op" id="7037896">.</span><span class="ident" id="7037897">Errorf</span><span class="op" id="7037903">(</span><span class="string" id="7037904">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7037951">,</span>&nbsp;<span class="ident" id="7037953"><a href="/net/http/cookie_test.go.html#7037813">sub</a></span><span class="op" id="7037956">,</span>&nbsp;<span class="ident" id="7037958"><a href="/net/http/cookie_test.go.html#7037808">got</a></span><span class="op" id="7037961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037964">}</span><br>
<span class="lineno"></span><span class="op" id="7037966">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7037969">func</span>&nbsp;<span class="ident" id="7037974">TestCookieSanitizePath</span><span class="op" id="7037996">(</span><span class="ident" id="7037997">t</span>&nbsp;<span class="op" id="7037999">*</span><span class="ident" id="7038000"><a href="/net/http/cookie_test.go.html#7028428">testing</a></span><span class="op" id="7038007">.</span><span class="ident" id="7038008">T</span><span class="op" id="7038009">)</span>&nbsp;<span class="op" id="7038011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038014">defer</span>&nbsp;<span class="ident" id="7038020"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7038023">.</span><span class="ident" id="7038024">SetOutput</span><span class="op" id="7038033">(</span><span class="ident" id="7038034"><a href="/net/http/cookie_test.go.html#7028400">os</a></span><span class="op" id="7038036">.</span><span class="ident" id="7038037">Stderr</span><span class="op" id="7038043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038046">var</span>&nbsp;<span class="ident" id="7038050">logbuf</span>&nbsp;<span class="ident" id="7038057"><a href="/net/http/cookie_test.go.html#7028360">bytes</a></span><span class="op" id="7038062">.</span><span class="ident" id="7038063">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038071"><a href="/net/http/cookie_test.go.html#7028393">log</a></span><span class="op" id="7038074">.</span><span class="ident" id="7038075">SetOutput</span><span class="op" id="7038084">(</span><span class="op" id="7038085">&amp;</span><span class="ident" id="7038086"><a href="/net/http/cookie_test.go.html#7038050">logbuf</a></span><span class="op" id="7038092">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038096">tests</span>&nbsp;<span class="op" id="7038102">:=</span>&nbsp;<span class="op" id="7038105">[</span><span class="op" id="7038106">]</span><span class="keyword" id="7038107">struct</span>&nbsp;<span class="op" id="7038114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038118">in</span><span class="op" id="7038120">,</span>&nbsp;<span class="ident" id="7038122">want</span>&nbsp;<span class="builtintype" id="7038127">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038135">}</span><span class="op" id="7038136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038140">{</span><span class="string" id="7038141">&#34;/path&#34;</span><span class="op" id="7038148">,</span>&nbsp;<span class="string" id="7038150">&#34;/path&#34;</span><span class="op" id="7038157">}</span><span class="op" id="7038158">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038162">{</span><span class="string" id="7038163">&#34;/path&nbsp;with&nbsp;space/&#34;</span><span class="op" id="7038182">,</span>&nbsp;<span class="string" id="7038184">&#34;/path&nbsp;with&nbsp;space/&#34;</span><span class="op" id="7038203">}</span><span class="op" id="7038204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038208">{</span><span class="string" id="7038209">&#34;/just;no;semicolon\x00orstuff/&#34;</span><span class="op" id="7038241">,</span>&nbsp;<span class="string" id="7038243">&#34;/justnosemicolonorstuff/&#34;</span><span class="op" id="7038269">}</span><span class="op" id="7038270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038276">for</span>&nbsp;<span class="ident" id="7038280">_</span><span class="op" id="7038281">,</span>&nbsp;<span class="ident" id="7038283">tt</span>&nbsp;<span class="op" id="7038286">:=</span>&nbsp;<span class="keyword" id="7038289">range</span>&nbsp;<span class="ident" id="7038295"><a href="/net/http/cookie_test.go.html#7038096">tests</a></span>&nbsp;<span class="op" id="7038301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038305">if</span>&nbsp;<span class="ident" id="7038308">got</span>&nbsp;<span class="op" id="7038312">:=</span>&nbsp;<span class="ident" id="7038315"><a href="/net/http/cookie.go.html#3333846">sanitizeCookiePath</a></span><span class="op" id="7038333">(</span><span class="ident" id="7038334"><a href="/net/http/cookie_test.go.html#7038283">tt</a></span><span class="op" id="7038336">.</span><span class="ident" id="7038337">in</span><span class="op" id="7038339">)</span><span class="op" id="7038340">;</span>&nbsp;<span class="ident" id="7038342"><a href="/net/http/cookie_test.go.html#7038308">got</a></span>&nbsp;<span class="op" id="7038346">!=</span>&nbsp;<span class="ident" id="7038349"><a href="/net/http/cookie_test.go.html#7038283">tt</a></span><span class="op" id="7038351">.</span><span class="ident" id="7038352">want</span>&nbsp;<span class="op" id="7038357">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038362"><a href="/net/http/cookie_test.go.html#7037997">t</a></span><span class="op" id="7038363">.</span><span class="ident" id="7038364">Errorf</span><span class="op" id="7038370">(</span><span class="string" id="7038371">&#34;sanitizeCookiePath(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7038409">,</span>&nbsp;<span class="ident" id="7038411"><a href="/net/http/cookie_test.go.html#7038283">tt</a></span><span class="op" id="7038413">.</span><span class="ident" id="7038414">in</span><span class="op" id="7038416">,</span>&nbsp;<span class="ident" id="7038418"><a href="/net/http/cookie_test.go.html#7038308">got</a></span><span class="op" id="7038421">,</span>&nbsp;<span class="ident" id="7038423"><a href="/net/http/cookie_test.go.html#7038283">tt</a></span><span class="op" id="7038425">.</span><span class="ident" id="7038426">want</span><span class="op" id="7038430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038441">if</span>&nbsp;<span class="ident" id="7038444">got</span><span class="op" id="7038447">,</span>&nbsp;<span class="ident" id="7038449">sub</span>&nbsp;<span class="op" id="7038453">:=</span>&nbsp;<span class="ident" id="7038456"><a href="/net/http/cookie_test.go.html#7038050">logbuf</a></span><span class="op" id="7038462">.</span><span class="ident" id="7038463">String</span><span class="op" id="7038469">(</span><span class="op" id="7038470">)</span><span class="op" id="7038471">,</span>&nbsp;<span class="string" id="7038473">&#34;dropping&nbsp;invalid&nbsp;bytes&#34;</span><span class="op" id="7038497">;</span>&nbsp;<span class="op" id="7038499">!</span><span class="ident" id="7038500"><a href="/net/http/cookie_test.go.html#7028417">strings</a></span><span class="op" id="7038507">.</span><span class="ident" id="7038508">Contains</span><span class="op" id="7038516">(</span><span class="ident" id="7038517"><a href="/net/http/cookie_test.go.html#7038444">got</a></span><span class="op" id="7038520">,</span>&nbsp;<span class="ident" id="7038522"><a href="/net/http/cookie_test.go.html#7038449">sub</a></span><span class="op" id="7038525">)</span>&nbsp;<span class="op" id="7038527">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038531"><a href="/net/http/cookie_test.go.html#7037997">t</a></span><span class="op" id="7038532">.</span><span class="ident" id="7038533">Errorf</span><span class="op" id="7038539">(</span><span class="string" id="7038540">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7038587">,</span>&nbsp;<span class="ident" id="7038589"><a href="/net/http/cookie_test.go.html#7038449">sub</a></span><span class="op" id="7038592">,</span>&nbsp;<span class="ident" id="7038594"><a href="/net/http/cookie_test.go.html#7038444">got</a></span><span class="op" id="7038597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038600">}</span><br>
<span class="lineno"></span><span class="op" id="7038602">}</span>
</div>
</body>
</html>
