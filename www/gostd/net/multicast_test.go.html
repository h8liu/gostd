<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8267577">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8267632">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8267686">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8267737">package</span>&nbsp;<span class="ident" id="8267745">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8267750">import</span>&nbsp;<span class="op" id="8267757">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8267760">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8267767">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8267773">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8267784">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8267794">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8267797">var</span>&nbsp;<span class="ident" id="8267801">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="8267828">=</span>&nbsp;<span class="op" id="8267830">[</span><span class="op" id="8267831">]</span><span class="keyword" id="8267832">struct</span>&nbsp;<span class="op" id="8267839">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267842">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8267848">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267856">gaddr</span>&nbsp;<span class="op" id="8267862">*</span><span class="ident" id="8267863">UDPAddr</span>&nbsp;<span class="comment" id="8267871">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="8267887">}</span><span class="op" id="8267888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267891">{</span><span class="string" id="8267892">&#34;udp&#34;</span><span class="op" id="8267897">,</span>&nbsp;<span class="op" id="8267899">&amp;</span><span class="ident" id="8267900">UDPAddr</span><span class="op" id="8267907">{</span><span class="ident" id="8267908">IP</span><span class="op" id="8267910">:</span>&nbsp;<span class="ident" id="8267912">IPv4</span><span class="op" id="8267916">(</span><span class="num" id="8267917">224</span><span class="op" id="8267920">,</span>&nbsp;<span class="num" id="8267922">0</span><span class="op" id="8267923">,</span>&nbsp;<span class="num" id="8267925">0</span><span class="op" id="8267926">,</span>&nbsp;<span class="num" id="8267928">254</span><span class="op" id="8267931">)</span><span class="op" id="8267932">,</span>&nbsp;<span class="ident" id="8267934">Port</span><span class="op" id="8267938">:</span>&nbsp;<span class="num" id="8267940">12345</span><span class="op" id="8267945">}</span><span class="op" id="8267946">}</span><span class="op" id="8267947">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267951">{</span><span class="string" id="8267952">&#34;udp4&#34;</span><span class="op" id="8267958">,</span>&nbsp;<span class="op" id="8267960">&amp;</span><span class="ident" id="8267961">UDPAddr</span><span class="op" id="8267968">{</span><span class="ident" id="8267969">IP</span><span class="op" id="8267971">:</span>&nbsp;<span class="ident" id="8267973">IPv4</span><span class="op" id="8267977">(</span><span class="num" id="8267978">224</span><span class="op" id="8267981">,</span>&nbsp;<span class="num" id="8267983">0</span><span class="op" id="8267984">,</span>&nbsp;<span class="num" id="8267986">0</span><span class="op" id="8267987">,</span>&nbsp;<span class="num" id="8267989">254</span><span class="op" id="8267992">)</span><span class="op" id="8267993">,</span>&nbsp;<span class="ident" id="8267995">Port</span><span class="op" id="8267999">:</span>&nbsp;<span class="num" id="8268001">12345</span><span class="op" id="8268006">}</span><span class="op" id="8268007">}</span><span class="op" id="8268008">,</span><br>
<span class="lineno"></span><span class="op" id="8268010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8268013">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="8268083">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="8268154">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="8268163">func</span>&nbsp;<span class="ident" id="8268168">TestIPv4MulticastListener</span><span class="op" id="8268193">(</span><span class="ident" id="8268194">t</span>&nbsp;<span class="op" id="8268196">*</span><span class="ident" id="8268197">testing</span><span class="op" id="8268204">.</span><span class="ident" id="8268205">T</span><span class="op" id="8268206">)</span>&nbsp;<span class="op" id="8268208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268211">switch</span>&nbsp;<span class="ident" id="8268218">runtime</span><span class="op" id="8268225">.</span><span class="ident" id="8268226">GOOS</span>&nbsp;<span class="op" id="8268231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268234">case</span>&nbsp;<span class="string" id="8268239">&#34;android&#34;</span><span class="op" id="8268248">,</span>&nbsp;<span class="string" id="8268250">&#34;nacl&#34;</span><span class="op" id="8268256">,</span>&nbsp;<span class="string" id="8268258">&#34;plan9&#34;</span><span class="op" id="8268265">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268269">t</span><span class="op" id="8268270">.</span><span class="ident" id="8268271">Skipf</span><span class="op" id="8268276">(</span><span class="string" id="8268277">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8268298">,</span>&nbsp;<span class="ident" id="8268300">runtime</span><span class="op" id="8268307">.</span><span class="ident" id="8268308">GOOS</span><span class="op" id="8268312">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268315">case</span>&nbsp;<span class="string" id="8268320">&#34;solaris&#34;</span><span class="op" id="8268329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268333">t</span><span class="op" id="8268334">.</span><span class="ident" id="8268335">Skipf</span><span class="op" id="8268340">(</span><span class="string" id="8268341">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="8268383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268390">closer</span>&nbsp;<span class="op" id="8268397">:=</span>&nbsp;<span class="keyword" id="8268400">func</span><span class="op" id="8268404">(</span><span class="ident" id="8268405">cs</span>&nbsp;<span class="op" id="8268408">[</span><span class="op" id="8268409">]</span><span class="op" id="8268410">*</span><span class="ident" id="8268411">UDPConn</span><span class="op" id="8268418">)</span>&nbsp;<span class="op" id="8268420">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268424">for</span>&nbsp;<span class="ident" id="8268428">_</span><span class="op" id="8268429">,</span>&nbsp;<span class="ident" id="8268431">c</span>&nbsp;<span class="op" id="8268433">:=</span>&nbsp;<span class="keyword" id="8268436">range</span>&nbsp;<span class="ident" id="8268442">cs</span>&nbsp;<span class="op" id="8268445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268450">if</span>&nbsp;<span class="ident" id="8268453">c</span>&nbsp;<span class="op" id="8268455">!=</span>&nbsp;<span class="ident" id="8268458">nil</span>&nbsp;<span class="op" id="8268462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268468">c</span><span class="op" id="8268469">.</span><span class="ident" id="8268470">Close</span><span class="op" id="8268475">(</span><span class="op" id="8268476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268485">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268492">for</span>&nbsp;<span class="ident" id="8268496">_</span><span class="op" id="8268497">,</span>&nbsp;<span class="ident" id="8268499">ifi</span>&nbsp;<span class="op" id="8268503">:=</span>&nbsp;<span class="keyword" id="8268506">range</span>&nbsp;<span class="op" id="8268512">[</span><span class="op" id="8268513">]</span><span class="op" id="8268514">*</span><span class="ident" id="8268515">Interface</span><span class="op" id="8268524">{</span><span class="ident" id="8268525">loopbackInterface</span><span class="op" id="8268542">(</span><span class="op" id="8268543">)</span><span class="op" id="8268544">,</span>&nbsp;<span class="ident" id="8268546">nil</span><span class="op" id="8268549">}</span>&nbsp;<span class="op" id="8268551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268555">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268611">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268664">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268714">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268766">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268784">if</span>&nbsp;<span class="ident" id="8268787">ifi</span>&nbsp;<span class="op" id="8268791">==</span>&nbsp;<span class="ident" id="8268794">nil</span>&nbsp;<span class="op" id="8268798">&amp;&amp;</span>&nbsp;<span class="op" id="8268801">!</span><span class="op" id="8268802">*</span><span class="ident" id="8268803">testExternal</span>&nbsp;<span class="op" id="8268816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268821">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268836">for</span>&nbsp;<span class="ident" id="8268840">_</span><span class="op" id="8268841">,</span>&nbsp;<span class="ident" id="8268843">tt</span>&nbsp;<span class="op" id="8268846">:=</span>&nbsp;<span class="keyword" id="8268849">range</span>&nbsp;<span class="ident" id="8268855">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="8268882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268887">var</span>&nbsp;<span class="ident" id="8268891">err</span>&nbsp;<span class="builtintype" id="8268895">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268904">cs</span>&nbsp;<span class="op" id="8268907">:=</span>&nbsp;<span class="builtinfunc" id="8268910">make</span><span class="op" id="8268914">(</span><span class="op" id="8268915">[</span><span class="op" id="8268916">]</span><span class="op" id="8268917">*</span><span class="ident" id="8268918">UDPConn</span><span class="op" id="8268925">,</span>&nbsp;<span class="num" id="8268927">2</span><span class="op" id="8268928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268933">if</span>&nbsp;<span class="ident" id="8268936">cs</span><span class="op" id="8268938">[</span><span class="num" id="8268939">0</span><span class="op" id="8268940">]</span><span class="op" id="8268941">,</span>&nbsp;<span class="ident" id="8268943">err</span>&nbsp;<span class="op" id="8268947">=</span>&nbsp;<span class="ident" id="8268949">ListenMulticastUDP</span><span class="op" id="8268967">(</span><span class="ident" id="8268968">tt</span><span class="op" id="8268970">.</span><span class="ident" id="8268971">net</span><span class="op" id="8268974">,</span>&nbsp;<span class="ident" id="8268976">ifi</span><span class="op" id="8268979">,</span>&nbsp;<span class="ident" id="8268981">tt</span><span class="op" id="8268983">.</span><span class="ident" id="8268984">gaddr</span><span class="op" id="8268989">)</span><span class="op" id="8268990">;</span>&nbsp;<span class="ident" id="8268992">err</span>&nbsp;<span class="op" id="8268996">!=</span>&nbsp;<span class="ident" id="8268999">nil</span>&nbsp;<span class="op" id="8269003">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269009">t</span><span class="op" id="8269010">.</span><span class="ident" id="8269011">Fatalf</span><span class="op" id="8269017">(</span><span class="string" id="8269018">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8269061">,</span>&nbsp;<span class="ident" id="8269063">ifi</span><span class="op" id="8269066">,</span>&nbsp;<span class="ident" id="8269068">err</span><span class="op" id="8269071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269081">if</span>&nbsp;<span class="ident" id="8269084">err</span>&nbsp;<span class="op" id="8269088">:=</span>&nbsp;<span class="ident" id="8269091">checkMulticastListener</span><span class="op" id="8269113">(</span><span class="ident" id="8269114">cs</span><span class="op" id="8269116">[</span><span class="num" id="8269117">0</span><span class="op" id="8269118">]</span><span class="op" id="8269119">,</span>&nbsp;<span class="ident" id="8269121">tt</span><span class="op" id="8269123">.</span><span class="ident" id="8269124">gaddr</span><span class="op" id="8269129">.</span><span class="ident" id="8269130">IP</span><span class="op" id="8269132">)</span><span class="op" id="8269133">;</span>&nbsp;<span class="ident" id="8269135">err</span>&nbsp;<span class="op" id="8269139">!=</span>&nbsp;<span class="ident" id="8269142">nil</span>&nbsp;<span class="op" id="8269146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269152">closer</span><span class="op" id="8269158">(</span><span class="ident" id="8269159">cs</span><span class="op" id="8269161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269167">t</span><span class="op" id="8269168">.</span><span class="ident" id="8269169">Fatal</span><span class="op" id="8269174">(</span><span class="ident" id="8269175">err</span><span class="op" id="8269178">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269188">if</span>&nbsp;<span class="ident" id="8269191">cs</span><span class="op" id="8269193">[</span><span class="num" id="8269194">1</span><span class="op" id="8269195">]</span><span class="op" id="8269196">,</span>&nbsp;<span class="ident" id="8269198">err</span>&nbsp;<span class="op" id="8269202">=</span>&nbsp;<span class="ident" id="8269204">ListenMulticastUDP</span><span class="op" id="8269222">(</span><span class="ident" id="8269223">tt</span><span class="op" id="8269225">.</span><span class="ident" id="8269226">net</span><span class="op" id="8269229">,</span>&nbsp;<span class="ident" id="8269231">ifi</span><span class="op" id="8269234">,</span>&nbsp;<span class="ident" id="8269236">tt</span><span class="op" id="8269238">.</span><span class="ident" id="8269239">gaddr</span><span class="op" id="8269244">)</span><span class="op" id="8269245">;</span>&nbsp;<span class="ident" id="8269247">err</span>&nbsp;<span class="op" id="8269251">!=</span>&nbsp;<span class="ident" id="8269254">nil</span>&nbsp;<span class="op" id="8269258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269264">closer</span><span class="op" id="8269270">(</span><span class="ident" id="8269271">cs</span><span class="op" id="8269273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269279">t</span><span class="op" id="8269280">.</span><span class="ident" id="8269281">Fatalf</span><span class="op" id="8269287">(</span><span class="string" id="8269288">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8269332">,</span>&nbsp;<span class="ident" id="8269334">ifi</span><span class="op" id="8269337">,</span>&nbsp;<span class="ident" id="8269339">err</span><span class="op" id="8269342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269347">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269352">if</span>&nbsp;<span class="ident" id="8269355">err</span>&nbsp;<span class="op" id="8269359">:=</span>&nbsp;<span class="ident" id="8269362">checkMulticastListener</span><span class="op" id="8269384">(</span><span class="ident" id="8269385">cs</span><span class="op" id="8269387">[</span><span class="num" id="8269388">1</span><span class="op" id="8269389">]</span><span class="op" id="8269390">,</span>&nbsp;<span class="ident" id="8269392">tt</span><span class="op" id="8269394">.</span><span class="ident" id="8269395">gaddr</span><span class="op" id="8269400">.</span><span class="ident" id="8269401">IP</span><span class="op" id="8269403">)</span><span class="op" id="8269404">;</span>&nbsp;<span class="ident" id="8269406">err</span>&nbsp;<span class="op" id="8269410">!=</span>&nbsp;<span class="ident" id="8269413">nil</span>&nbsp;<span class="op" id="8269417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269423">closer</span><span class="op" id="8269429">(</span><span class="ident" id="8269430">cs</span><span class="op" id="8269432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269438">t</span><span class="op" id="8269439">.</span><span class="ident" id="8269440">Fatal</span><span class="op" id="8269445">(</span><span class="ident" id="8269446">err</span><span class="op" id="8269449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269459">closer</span><span class="op" id="8269465">(</span><span class="ident" id="8269466">cs</span><span class="op" id="8269468">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269475">}</span><br>
<span class="lineno"></span><span class="op" id="8269477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8269480">var</span>&nbsp;<span class="ident" id="8269484">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="8269511">=</span>&nbsp;<span class="op" id="8269513">[</span><span class="op" id="8269514">]</span><span class="keyword" id="8269515">struct</span>&nbsp;<span class="op" id="8269522">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269525">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8269531">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269539">gaddr</span>&nbsp;<span class="op" id="8269545">*</span><span class="ident" id="8269546">UDPAddr</span>&nbsp;<span class="comment" id="8269554">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="8269570">}</span><span class="op" id="8269571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269574">{</span><span class="string" id="8269575">&#34;udp&#34;</span><span class="op" id="8269580">,</span>&nbsp;<span class="op" id="8269582">&amp;</span><span class="ident" id="8269583">UDPAddr</span><span class="op" id="8269590">{</span><span class="ident" id="8269591">IP</span><span class="op" id="8269593">:</span>&nbsp;<span class="ident" id="8269595">ParseIP</span><span class="op" id="8269602">(</span><span class="string" id="8269603">&#34;ff01::114&#34;</span><span class="op" id="8269614">)</span><span class="op" id="8269615">,</span>&nbsp;<span class="ident" id="8269617">Port</span><span class="op" id="8269621">:</span>&nbsp;<span class="num" id="8269623">12345</span><span class="op" id="8269628">}</span><span class="op" id="8269629">}</span><span class="op" id="8269630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269633">{</span><span class="string" id="8269634">&#34;udp&#34;</span><span class="op" id="8269639">,</span>&nbsp;<span class="op" id="8269641">&amp;</span><span class="ident" id="8269642">UDPAddr</span><span class="op" id="8269649">{</span><span class="ident" id="8269650">IP</span><span class="op" id="8269652">:</span>&nbsp;<span class="ident" id="8269654">ParseIP</span><span class="op" id="8269661">(</span><span class="string" id="8269662">&#34;ff02::114&#34;</span><span class="op" id="8269673">)</span><span class="op" id="8269674">,</span>&nbsp;<span class="ident" id="8269676">Port</span><span class="op" id="8269680">:</span>&nbsp;<span class="num" id="8269682">12345</span><span class="op" id="8269687">}</span><span class="op" id="8269688">}</span><span class="op" id="8269689">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269692">{</span><span class="string" id="8269693">&#34;udp&#34;</span><span class="op" id="8269698">,</span>&nbsp;<span class="op" id="8269700">&amp;</span><span class="ident" id="8269701">UDPAddr</span><span class="op" id="8269708">{</span><span class="ident" id="8269709">IP</span><span class="op" id="8269711">:</span>&nbsp;<span class="ident" id="8269713">ParseIP</span><span class="op" id="8269720">(</span><span class="string" id="8269721">&#34;ff04::114&#34;</span><span class="op" id="8269732">)</span><span class="op" id="8269733">,</span>&nbsp;<span class="ident" id="8269735">Port</span><span class="op" id="8269739">:</span>&nbsp;<span class="num" id="8269741">12345</span><span class="op" id="8269746">}</span><span class="op" id="8269747">}</span><span class="op" id="8269748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269751">{</span><span class="string" id="8269752">&#34;udp&#34;</span><span class="op" id="8269757">,</span>&nbsp;<span class="op" id="8269759">&amp;</span><span class="ident" id="8269760">UDPAddr</span><span class="op" id="8269767">{</span><span class="ident" id="8269768">IP</span><span class="op" id="8269770">:</span>&nbsp;<span class="ident" id="8269772">ParseIP</span><span class="op" id="8269779">(</span><span class="string" id="8269780">&#34;ff05::114&#34;</span><span class="op" id="8269791">)</span><span class="op" id="8269792">,</span>&nbsp;<span class="ident" id="8269794">Port</span><span class="op" id="8269798">:</span>&nbsp;<span class="num" id="8269800">12345</span><span class="op" id="8269805">}</span><span class="op" id="8269806">}</span><span class="op" id="8269807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269810">{</span><span class="string" id="8269811">&#34;udp&#34;</span><span class="op" id="8269816">,</span>&nbsp;<span class="op" id="8269818">&amp;</span><span class="ident" id="8269819">UDPAddr</span><span class="op" id="8269826">{</span><span class="ident" id="8269827">IP</span><span class="op" id="8269829">:</span>&nbsp;<span class="ident" id="8269831">ParseIP</span><span class="op" id="8269838">(</span><span class="string" id="8269839">&#34;ff08::114&#34;</span><span class="op" id="8269850">)</span><span class="op" id="8269851">,</span>&nbsp;<span class="ident" id="8269853">Port</span><span class="op" id="8269857">:</span>&nbsp;<span class="num" id="8269859">12345</span><span class="op" id="8269864">}</span><span class="op" id="8269865">}</span><span class="op" id="8269866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269869">{</span><span class="string" id="8269870">&#34;udp&#34;</span><span class="op" id="8269875">,</span>&nbsp;<span class="op" id="8269877">&amp;</span><span class="ident" id="8269878">UDPAddr</span><span class="op" id="8269885">{</span><span class="ident" id="8269886">IP</span><span class="op" id="8269888">:</span>&nbsp;<span class="ident" id="8269890">ParseIP</span><span class="op" id="8269897">(</span><span class="string" id="8269898">&#34;ff0e::114&#34;</span><span class="op" id="8269909">)</span><span class="op" id="8269910">,</span>&nbsp;<span class="ident" id="8269912">Port</span><span class="op" id="8269916">:</span>&nbsp;<span class="num" id="8269918">12345</span><span class="op" id="8269923">}</span><span class="op" id="8269924">}</span><span class="op" id="8269925">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269929">{</span><span class="string" id="8269930">&#34;udp6&#34;</span><span class="op" id="8269936">,</span>&nbsp;<span class="op" id="8269938">&amp;</span><span class="ident" id="8269939">UDPAddr</span><span class="op" id="8269946">{</span><span class="ident" id="8269947">IP</span><span class="op" id="8269949">:</span>&nbsp;<span class="ident" id="8269951">ParseIP</span><span class="op" id="8269958">(</span><span class="string" id="8269959">&#34;ff01::114&#34;</span><span class="op" id="8269970">)</span><span class="op" id="8269971">,</span>&nbsp;<span class="ident" id="8269973">Port</span><span class="op" id="8269977">:</span>&nbsp;<span class="num" id="8269979">12345</span><span class="op" id="8269984">}</span><span class="op" id="8269985">}</span><span class="op" id="8269986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269989">{</span><span class="string" id="8269990">&#34;udp6&#34;</span><span class="op" id="8269996">,</span>&nbsp;<span class="op" id="8269998">&amp;</span><span class="ident" id="8269999">UDPAddr</span><span class="op" id="8270006">{</span><span class="ident" id="8270007">IP</span><span class="op" id="8270009">:</span>&nbsp;<span class="ident" id="8270011">ParseIP</span><span class="op" id="8270018">(</span><span class="string" id="8270019">&#34;ff02::114&#34;</span><span class="op" id="8270030">)</span><span class="op" id="8270031">,</span>&nbsp;<span class="ident" id="8270033">Port</span><span class="op" id="8270037">:</span>&nbsp;<span class="num" id="8270039">12345</span><span class="op" id="8270044">}</span><span class="op" id="8270045">}</span><span class="op" id="8270046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270049">{</span><span class="string" id="8270050">&#34;udp6&#34;</span><span class="op" id="8270056">,</span>&nbsp;<span class="op" id="8270058">&amp;</span><span class="ident" id="8270059">UDPAddr</span><span class="op" id="8270066">{</span><span class="ident" id="8270067">IP</span><span class="op" id="8270069">:</span>&nbsp;<span class="ident" id="8270071">ParseIP</span><span class="op" id="8270078">(</span><span class="string" id="8270079">&#34;ff04::114&#34;</span><span class="op" id="8270090">)</span><span class="op" id="8270091">,</span>&nbsp;<span class="ident" id="8270093">Port</span><span class="op" id="8270097">:</span>&nbsp;<span class="num" id="8270099">12345</span><span class="op" id="8270104">}</span><span class="op" id="8270105">}</span><span class="op" id="8270106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270109">{</span><span class="string" id="8270110">&#34;udp6&#34;</span><span class="op" id="8270116">,</span>&nbsp;<span class="op" id="8270118">&amp;</span><span class="ident" id="8270119">UDPAddr</span><span class="op" id="8270126">{</span><span class="ident" id="8270127">IP</span><span class="op" id="8270129">:</span>&nbsp;<span class="ident" id="8270131">ParseIP</span><span class="op" id="8270138">(</span><span class="string" id="8270139">&#34;ff05::114&#34;</span><span class="op" id="8270150">)</span><span class="op" id="8270151">,</span>&nbsp;<span class="ident" id="8270153">Port</span><span class="op" id="8270157">:</span>&nbsp;<span class="num" id="8270159">12345</span><span class="op" id="8270164">}</span><span class="op" id="8270165">}</span><span class="op" id="8270166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270169">{</span><span class="string" id="8270170">&#34;udp6&#34;</span><span class="op" id="8270176">,</span>&nbsp;<span class="op" id="8270178">&amp;</span><span class="ident" id="8270179">UDPAddr</span><span class="op" id="8270186">{</span><span class="ident" id="8270187">IP</span><span class="op" id="8270189">:</span>&nbsp;<span class="ident" id="8270191">ParseIP</span><span class="op" id="8270198">(</span><span class="string" id="8270199">&#34;ff08::114&#34;</span><span class="op" id="8270210">)</span><span class="op" id="8270211">,</span>&nbsp;<span class="ident" id="8270213">Port</span><span class="op" id="8270217">:</span>&nbsp;<span class="num" id="8270219">12345</span><span class="op" id="8270224">}</span><span class="op" id="8270225">}</span><span class="op" id="8270226">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270229">{</span><span class="string" id="8270230">&#34;udp6&#34;</span><span class="op" id="8270236">,</span>&nbsp;<span class="op" id="8270238">&amp;</span><span class="ident" id="8270239">UDPAddr</span><span class="op" id="8270246">{</span><span class="ident" id="8270247">IP</span><span class="op" id="8270249">:</span>&nbsp;<span class="ident" id="8270251">ParseIP</span><span class="op" id="8270258">(</span><span class="string" id="8270259">&#34;ff0e::114&#34;</span><span class="op" id="8270270">)</span><span class="op" id="8270271">,</span>&nbsp;<span class="ident" id="8270273">Port</span><span class="op" id="8270277">:</span>&nbsp;<span class="num" id="8270279">12345</span><span class="op" id="8270284">}</span><span class="op" id="8270285">}</span><span class="op" id="8270286">,</span><br>
<span class="lineno"></span><span class="op" id="8270288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8270291">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="8270361">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="8270432">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="8270441">func</span>&nbsp;<span class="ident" id="8270446">TestIPv6MulticastListener</span><span class="op" id="8270471">(</span><span class="ident" id="8270472">t</span>&nbsp;<span class="op" id="8270474">*</span><span class="ident" id="8270475">testing</span><span class="op" id="8270482">.</span><span class="ident" id="8270483">T</span><span class="op" id="8270484">)</span>&nbsp;<span class="op" id="8270486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270489">switch</span>&nbsp;<span class="ident" id="8270496">runtime</span><span class="op" id="8270503">.</span><span class="ident" id="8270504">GOOS</span>&nbsp;<span class="op" id="8270509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270512">case</span>&nbsp;<span class="string" id="8270517">&#34;plan9&#34;</span><span class="op" id="8270524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270528">t</span><span class="op" id="8270529">.</span><span class="ident" id="8270530">Skipf</span><span class="op" id="8270535">(</span><span class="string" id="8270536">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8270557">,</span>&nbsp;<span class="ident" id="8270559">runtime</span><span class="op" id="8270566">.</span><span class="ident" id="8270567">GOOS</span><span class="op" id="8270571">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270574">case</span>&nbsp;<span class="string" id="8270579">&#34;solaris&#34;</span><span class="op" id="8270588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270592">t</span><span class="op" id="8270593">.</span><span class="ident" id="8270594">Skipf</span><span class="op" id="8270599">(</span><span class="string" id="8270600">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="8270642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270648">if</span>&nbsp;<span class="op" id="8270651">!</span><span class="ident" id="8270652">supportsIPv6</span>&nbsp;<span class="op" id="8270665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270669">t</span><span class="op" id="8270670">.</span><span class="ident" id="8270671">Skip</span><span class="op" id="8270675">(</span><span class="string" id="8270676">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="8270699">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270705">if</span>&nbsp;<span class="ident" id="8270708">os</span><span class="op" id="8270710">.</span><span class="ident" id="8270711">Getuid</span><span class="op" id="8270717">(</span><span class="op" id="8270718">)</span>&nbsp;<span class="op" id="8270720">!=</span>&nbsp;<span class="num" id="8270723">0</span>&nbsp;<span class="op" id="8270725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270729">t</span><span class="op" id="8270730">.</span><span class="ident" id="8270731">Skip</span><span class="op" id="8270735">(</span><span class="string" id="8270736">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8270765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270772">closer</span>&nbsp;<span class="op" id="8270779">:=</span>&nbsp;<span class="keyword" id="8270782">func</span><span class="op" id="8270786">(</span><span class="ident" id="8270787">cs</span>&nbsp;<span class="op" id="8270790">[</span><span class="op" id="8270791">]</span><span class="op" id="8270792">*</span><span class="ident" id="8270793">UDPConn</span><span class="op" id="8270800">)</span>&nbsp;<span class="op" id="8270802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270806">for</span>&nbsp;<span class="ident" id="8270810">_</span><span class="op" id="8270811">,</span>&nbsp;<span class="ident" id="8270813">c</span>&nbsp;<span class="op" id="8270815">:=</span>&nbsp;<span class="keyword" id="8270818">range</span>&nbsp;<span class="ident" id="8270824">cs</span>&nbsp;<span class="op" id="8270827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270832">if</span>&nbsp;<span class="ident" id="8270835">c</span>&nbsp;<span class="op" id="8270837">!=</span>&nbsp;<span class="ident" id="8270840">nil</span>&nbsp;<span class="op" id="8270844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270850">c</span><span class="op" id="8270851">.</span><span class="ident" id="8270852">Close</span><span class="op" id="8270857">(</span><span class="op" id="8270858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270863">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270874">for</span>&nbsp;<span class="ident" id="8270878">_</span><span class="op" id="8270879">,</span>&nbsp;<span class="ident" id="8270881">ifi</span>&nbsp;<span class="op" id="8270885">:=</span>&nbsp;<span class="keyword" id="8270888">range</span>&nbsp;<span class="op" id="8270894">[</span><span class="op" id="8270895">]</span><span class="op" id="8270896">*</span><span class="ident" id="8270897">Interface</span><span class="op" id="8270906">{</span><span class="ident" id="8270907">loopbackInterface</span><span class="op" id="8270924">(</span><span class="op" id="8270925">)</span><span class="op" id="8270926">,</span>&nbsp;<span class="ident" id="8270928">nil</span><span class="op" id="8270931">}</span>&nbsp;<span class="op" id="8270933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8270937">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8270993">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8271046">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8271096">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8271148">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271166">if</span>&nbsp;<span class="ident" id="8271169">ifi</span>&nbsp;<span class="op" id="8271173">==</span>&nbsp;<span class="ident" id="8271176">nil</span>&nbsp;<span class="op" id="8271180">&amp;&amp;</span>&nbsp;<span class="op" id="8271183">(</span><span class="op" id="8271184">!</span><span class="op" id="8271185">*</span><span class="ident" id="8271186">testExternal</span>&nbsp;<span class="op" id="8271199">||</span>&nbsp;<span class="op" id="8271202">!</span><span class="op" id="8271203">*</span><span class="ident" id="8271204">testIPv6</span><span class="op" id="8271212">)</span>&nbsp;<span class="op" id="8271214">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271219">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271234">for</span>&nbsp;<span class="ident" id="8271238">_</span><span class="op" id="8271239">,</span>&nbsp;<span class="ident" id="8271241">tt</span>&nbsp;<span class="op" id="8271244">:=</span>&nbsp;<span class="keyword" id="8271247">range</span>&nbsp;<span class="ident" id="8271253">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="8271280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271285">var</span>&nbsp;<span class="ident" id="8271289">err</span>&nbsp;<span class="builtintype" id="8271293">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271302">cs</span>&nbsp;<span class="op" id="8271305">:=</span>&nbsp;<span class="builtinfunc" id="8271308">make</span><span class="op" id="8271312">(</span><span class="op" id="8271313">[</span><span class="op" id="8271314">]</span><span class="op" id="8271315">*</span><span class="ident" id="8271316">UDPConn</span><span class="op" id="8271323">,</span>&nbsp;<span class="num" id="8271325">2</span><span class="op" id="8271326">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271331">if</span>&nbsp;<span class="ident" id="8271334">cs</span><span class="op" id="8271336">[</span><span class="num" id="8271337">0</span><span class="op" id="8271338">]</span><span class="op" id="8271339">,</span>&nbsp;<span class="ident" id="8271341">err</span>&nbsp;<span class="op" id="8271345">=</span>&nbsp;<span class="ident" id="8271347">ListenMulticastUDP</span><span class="op" id="8271365">(</span><span class="ident" id="8271366">tt</span><span class="op" id="8271368">.</span><span class="ident" id="8271369">net</span><span class="op" id="8271372">,</span>&nbsp;<span class="ident" id="8271374">ifi</span><span class="op" id="8271377">,</span>&nbsp;<span class="ident" id="8271379">tt</span><span class="op" id="8271381">.</span><span class="ident" id="8271382">gaddr</span><span class="op" id="8271387">)</span><span class="op" id="8271388">;</span>&nbsp;<span class="ident" id="8271390">err</span>&nbsp;<span class="op" id="8271394">!=</span>&nbsp;<span class="ident" id="8271397">nil</span>&nbsp;<span class="op" id="8271401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271407">t</span><span class="op" id="8271408">.</span><span class="ident" id="8271409">Fatalf</span><span class="op" id="8271415">(</span><span class="string" id="8271416">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8271459">,</span>&nbsp;<span class="ident" id="8271461">ifi</span><span class="op" id="8271464">,</span>&nbsp;<span class="ident" id="8271466">err</span><span class="op" id="8271469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271479">if</span>&nbsp;<span class="ident" id="8271482">err</span>&nbsp;<span class="op" id="8271486">:=</span>&nbsp;<span class="ident" id="8271489">checkMulticastListener</span><span class="op" id="8271511">(</span><span class="ident" id="8271512">cs</span><span class="op" id="8271514">[</span><span class="num" id="8271515">0</span><span class="op" id="8271516">]</span><span class="op" id="8271517">,</span>&nbsp;<span class="ident" id="8271519">tt</span><span class="op" id="8271521">.</span><span class="ident" id="8271522">gaddr</span><span class="op" id="8271527">.</span><span class="ident" id="8271528">IP</span><span class="op" id="8271530">)</span><span class="op" id="8271531">;</span>&nbsp;<span class="ident" id="8271533">err</span>&nbsp;<span class="op" id="8271537">!=</span>&nbsp;<span class="ident" id="8271540">nil</span>&nbsp;<span class="op" id="8271544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271550">closer</span><span class="op" id="8271556">(</span><span class="ident" id="8271557">cs</span><span class="op" id="8271559">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271565">t</span><span class="op" id="8271566">.</span><span class="ident" id="8271567">Fatal</span><span class="op" id="8271572">(</span><span class="ident" id="8271573">err</span><span class="op" id="8271576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271586">if</span>&nbsp;<span class="ident" id="8271589">cs</span><span class="op" id="8271591">[</span><span class="num" id="8271592">1</span><span class="op" id="8271593">]</span><span class="op" id="8271594">,</span>&nbsp;<span class="ident" id="8271596">err</span>&nbsp;<span class="op" id="8271600">=</span>&nbsp;<span class="ident" id="8271602">ListenMulticastUDP</span><span class="op" id="8271620">(</span><span class="ident" id="8271621">tt</span><span class="op" id="8271623">.</span><span class="ident" id="8271624">net</span><span class="op" id="8271627">,</span>&nbsp;<span class="ident" id="8271629">ifi</span><span class="op" id="8271632">,</span>&nbsp;<span class="ident" id="8271634">tt</span><span class="op" id="8271636">.</span><span class="ident" id="8271637">gaddr</span><span class="op" id="8271642">)</span><span class="op" id="8271643">;</span>&nbsp;<span class="ident" id="8271645">err</span>&nbsp;<span class="op" id="8271649">!=</span>&nbsp;<span class="ident" id="8271652">nil</span>&nbsp;<span class="op" id="8271656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271662">closer</span><span class="op" id="8271668">(</span><span class="ident" id="8271669">cs</span><span class="op" id="8271671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271677">t</span><span class="op" id="8271678">.</span><span class="ident" id="8271679">Fatalf</span><span class="op" id="8271685">(</span><span class="string" id="8271686">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8271730">,</span>&nbsp;<span class="ident" id="8271732">ifi</span><span class="op" id="8271735">,</span>&nbsp;<span class="ident" id="8271737">err</span><span class="op" id="8271740">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271750">if</span>&nbsp;<span class="ident" id="8271753">err</span>&nbsp;<span class="op" id="8271757">:=</span>&nbsp;<span class="ident" id="8271760">checkMulticastListener</span><span class="op" id="8271782">(</span><span class="ident" id="8271783">cs</span><span class="op" id="8271785">[</span><span class="num" id="8271786">1</span><span class="op" id="8271787">]</span><span class="op" id="8271788">,</span>&nbsp;<span class="ident" id="8271790">tt</span><span class="op" id="8271792">.</span><span class="ident" id="8271793">gaddr</span><span class="op" id="8271798">.</span><span class="ident" id="8271799">IP</span><span class="op" id="8271801">)</span><span class="op" id="8271802">;</span>&nbsp;<span class="ident" id="8271804">err</span>&nbsp;<span class="op" id="8271808">!=</span>&nbsp;<span class="ident" id="8271811">nil</span>&nbsp;<span class="op" id="8271815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271821">closer</span><span class="op" id="8271827">(</span><span class="ident" id="8271828">cs</span><span class="op" id="8271830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271836">t</span><span class="op" id="8271837">.</span><span class="ident" id="8271838">Fatal</span><span class="op" id="8271843">(</span><span class="ident" id="8271844">err</span><span class="op" id="8271847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271852">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8271857">closer</span><span class="op" id="8271863">(</span><span class="ident" id="8271864">cs</span><span class="op" id="8271866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8271873">}</span><br>
<span class="lineno"></span><span class="op" id="8271875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8271878">func</span>&nbsp;<span class="ident" id="8271883">checkMulticastListener</span><span class="op" id="8271905">(</span><span class="ident" id="8271906">c</span>&nbsp;<span class="op" id="8271908">*</span><span class="ident" id="8271909">UDPConn</span><span class="op" id="8271916">,</span>&nbsp;<span class="ident" id="8271918">ip</span>&nbsp;<span class="ident" id="8271921">IP</span><span class="op" id="8271923">)</span>&nbsp;<span class="builtintype" id="8271925">error</span>&nbsp;<span class="op" id="8271931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271934">if</span>&nbsp;<span class="ident" id="8271937">ok</span><span class="op" id="8271939">,</span>&nbsp;<span class="ident" id="8271941">err</span>&nbsp;<span class="op" id="8271945">:=</span>&nbsp;<span class="ident" id="8271948">multicastRIBContains</span><span class="op" id="8271968">(</span><span class="ident" id="8271969">ip</span><span class="op" id="8271971">)</span><span class="op" id="8271972">;</span>&nbsp;<span class="ident" id="8271974">err</span>&nbsp;<span class="op" id="8271978">!=</span>&nbsp;<span class="ident" id="8271981">nil</span>&nbsp;<span class="op" id="8271985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8271989">return</span>&nbsp;<span class="ident" id="8271996">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272001">}</span>&nbsp;<span class="keyword" id="8272003">else</span>&nbsp;<span class="keyword" id="8272008">if</span>&nbsp;<span class="op" id="8272011">!</span><span class="ident" id="8272012">ok</span>&nbsp;<span class="op" id="8272015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272019">return</span>&nbsp;<span class="ident" id="8272026">fmt</span><span class="op" id="8272029">.</span><span class="ident" id="8272030">Errorf</span><span class="op" id="8272036">(</span><span class="string" id="8272037">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="8272068">,</span>&nbsp;<span class="ident" id="8272070">ip</span><span class="op" id="8272072">.</span><span class="ident" id="8272073">String</span><span class="op" id="8272079">(</span><span class="op" id="8272080">)</span><span class="op" id="8272081">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8272087">la</span>&nbsp;<span class="op" id="8272090">:=</span>&nbsp;<span class="ident" id="8272093">c</span><span class="op" id="8272094">.</span><span class="ident" id="8272095">LocalAddr</span><span class="op" id="8272104">(</span><span class="op" id="8272105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272108">if</span>&nbsp;<span class="ident" id="8272111">la</span><span class="op" id="8272113">,</span>&nbsp;<span class="ident" id="8272115">ok</span>&nbsp;<span class="op" id="8272118">:=</span>&nbsp;<span class="ident" id="8272121">la</span><span class="op" id="8272123">.</span><span class="op" id="8272124">(</span><span class="op" id="8272125">*</span><span class="ident" id="8272126">UDPAddr</span><span class="op" id="8272133">)</span><span class="op" id="8272134">;</span>&nbsp;<span class="op" id="8272136">!</span><span class="ident" id="8272137">ok</span>&nbsp;<span class="op" id="8272140">||</span>&nbsp;<span class="ident" id="8272143">la</span><span class="op" id="8272145">.</span><span class="ident" id="8272146">Port</span>&nbsp;<span class="op" id="8272151">==</span>&nbsp;<span class="num" id="8272154">0</span>&nbsp;<span class="op" id="8272156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272160">return</span>&nbsp;<span class="ident" id="8272167">fmt</span><span class="op" id="8272170">.</span><span class="ident" id="8272171">Errorf</span><span class="op" id="8272177">(</span><span class="string" id="8272178">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="8272239">,</span>&nbsp;<span class="ident" id="8272241">la</span><span class="op" id="8272243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272246">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272249">return</span>&nbsp;<span class="ident" id="8272256">nil</span><br>
<span class="lineno"></span><span class="op" id="8272260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8272263">func</span>&nbsp;<span class="ident" id="8272268">multicastRIBContains</span><span class="op" id="8272288">(</span><span class="ident" id="8272289">ip</span>&nbsp;<span class="ident" id="8272292">IP</span><span class="op" id="8272294">)</span>&nbsp;<span class="op" id="8272296">(</span><span class="builtintype" id="8272297">bool</span><span class="op" id="8272301">,</span>&nbsp;<span class="builtintype" id="8272303">error</span><span class="op" id="8272308">)</span>&nbsp;<span class="op" id="8272310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272313">switch</span>&nbsp;<span class="ident" id="8272320">runtime</span><span class="op" id="8272327">.</span><span class="ident" id="8272328">GOOS</span>&nbsp;<span class="op" id="8272333">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272336">case</span>&nbsp;<span class="string" id="8272341">&#34;dragonfly&#34;</span><span class="op" id="8272352">,</span>&nbsp;<span class="string" id="8272354">&#34;netbsd&#34;</span><span class="op" id="8272362">,</span>&nbsp;<span class="string" id="8272364">&#34;openbsd&#34;</span><span class="op" id="8272373">,</span>&nbsp;<span class="string" id="8272375">&#34;plan9&#34;</span><span class="op" id="8272382">,</span>&nbsp;<span class="string" id="8272384">&#34;solaris&#34;</span><span class="op" id="8272393">,</span>&nbsp;<span class="string" id="8272395">&#34;windows&#34;</span><span class="op" id="8272404">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272408">return</span>&nbsp;<span class="builtintype" id="8272415">true</span><span class="op" id="8272419">,</span>&nbsp;<span class="ident" id="8272421">nil</span>&nbsp;<span class="comment" id="8272425">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272449">case</span>&nbsp;<span class="string" id="8272454">&#34;linux&#34;</span><span class="op" id="8272461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272465">if</span>&nbsp;<span class="ident" id="8272468">runtime</span><span class="op" id="8272475">.</span><span class="ident" id="8272476">GOARCH</span>&nbsp;<span class="op" id="8272483">==</span>&nbsp;<span class="string" id="8272486">&#34;arm&#34;</span>&nbsp;<span class="op" id="8272492">||</span>&nbsp;<span class="ident" id="8272495">runtime</span><span class="op" id="8272502">.</span><span class="ident" id="8272503">GOARCH</span>&nbsp;<span class="op" id="8272510">==</span>&nbsp;<span class="string" id="8272513">&#34;alpha&#34;</span>&nbsp;<span class="op" id="8272521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272526">return</span>&nbsp;<span class="builtintype" id="8272533">true</span><span class="op" id="8272537">,</span>&nbsp;<span class="ident" id="8272539">nil</span>&nbsp;<span class="comment" id="8272543">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8272574">ift</span><span class="op" id="8272577">,</span>&nbsp;<span class="ident" id="8272579">err</span>&nbsp;<span class="op" id="8272583">:=</span>&nbsp;<span class="ident" id="8272586">Interfaces</span><span class="op" id="8272596">(</span><span class="op" id="8272597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272600">if</span>&nbsp;<span class="ident" id="8272603">err</span>&nbsp;<span class="op" id="8272607">!=</span>&nbsp;<span class="ident" id="8272610">nil</span>&nbsp;<span class="op" id="8272614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272618">return</span>&nbsp;<span class="builtintype" id="8272625">false</span><span class="op" id="8272630">,</span>&nbsp;<span class="ident" id="8272632">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272640">for</span>&nbsp;<span class="ident" id="8272644">_</span><span class="op" id="8272645">,</span>&nbsp;<span class="ident" id="8272647">ifi</span>&nbsp;<span class="op" id="8272651">:=</span>&nbsp;<span class="keyword" id="8272654">range</span>&nbsp;<span class="ident" id="8272660">ift</span>&nbsp;<span class="op" id="8272664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8272668">ifmat</span><span class="op" id="8272673">,</span>&nbsp;<span class="ident" id="8272675">err</span>&nbsp;<span class="op" id="8272679">:=</span>&nbsp;<span class="ident" id="8272682">ifi</span><span class="op" id="8272685">.</span><span class="ident" id="8272686">MulticastAddrs</span><span class="op" id="8272700">(</span><span class="op" id="8272701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272705">if</span>&nbsp;<span class="ident" id="8272708">err</span>&nbsp;<span class="op" id="8272712">!=</span>&nbsp;<span class="ident" id="8272715">nil</span>&nbsp;<span class="op" id="8272719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272724">return</span>&nbsp;<span class="builtintype" id="8272731">false</span><span class="op" id="8272736">,</span>&nbsp;<span class="ident" id="8272738">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272748">for</span>&nbsp;<span class="ident" id="8272752">_</span><span class="op" id="8272753">,</span>&nbsp;<span class="ident" id="8272755">ifma</span>&nbsp;<span class="op" id="8272760">:=</span>&nbsp;<span class="keyword" id="8272763">range</span>&nbsp;<span class="ident" id="8272769">ifmat</span>&nbsp;<span class="op" id="8272775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272780">if</span>&nbsp;<span class="ident" id="8272783">ifma</span><span class="op" id="8272787">.</span><span class="op" id="8272788">(</span><span class="op" id="8272789">*</span><span class="ident" id="8272790">IPAddr</span><span class="op" id="8272796">)</span><span class="op" id="8272797">.</span><span class="ident" id="8272798">IP</span><span class="op" id="8272800">.</span><span class="ident" id="8272801">Equal</span><span class="op" id="8272806">(</span><span class="ident" id="8272807">ip</span><span class="op" id="8272809">)</span>&nbsp;<span class="op" id="8272811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272817">return</span>&nbsp;<span class="builtintype" id="8272824">true</span><span class="op" id="8272828">,</span>&nbsp;<span class="ident" id="8272830">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272837">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8272844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8272847">return</span>&nbsp;<span class="builtintype" id="8272854">false</span><span class="op" id="8272859">,</span>&nbsp;<span class="ident" id="8272861">nil</span><br>
<span class="lineno"></span><span class="op" id="8272865">}</span>
</div>
</body>
</html>
