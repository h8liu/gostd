<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html" class="current">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2306600">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2306655">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2306709">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2306760">//&nbsp;Package&nbsp;strings&nbsp;implements&nbsp;simple&nbsp;functions&nbsp;to&nbsp;manipulate&nbsp;strings.</span><br>
<span class="lineno"></span><span class="keyword" id="2306830">package</span>&nbsp;<span class="ident" id="2306838">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2306847">import</span>&nbsp;<span class="op" id="2306854">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2306857">&#34;unicode&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2306868">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2306883">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2306886">//&nbsp;explode&nbsp;splits&nbsp;s&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;UTF-8&nbsp;sequences,&nbsp;one&nbsp;per&nbsp;Unicode&nbsp;character&nbsp;(still&nbsp;strings)&nbsp;up&nbsp;to&nbsp;a&nbsp;maximum&nbsp;of&nbsp;n&nbsp;(n&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;no&nbsp;limit).</span><br>
<span class="lineno"></span><span class="comment" id="2307027">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequences&nbsp;become&nbsp;correct&nbsp;encodings&nbsp;of&nbsp;U+FFF8.</span><br>
<span class="lineno">15</span><span class="keyword" id="2307090">func</span>&nbsp;<span class="ident" id="2307095">explode</span><span class="op" id="2307102">(</span><span class="ident" id="2307103">s</span>&nbsp;<span class="builtintype" id="2307105">string</span><span class="op" id="2307111">,</span>&nbsp;<span class="ident" id="2307113">n</span>&nbsp;<span class="builtintype" id="2307115">int</span><span class="op" id="2307118">)</span>&nbsp;<span class="op" id="2307120">[</span><span class="op" id="2307121">]</span><span class="builtintype" id="2307122">string</span>&nbsp;<span class="op" id="2307129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307132">if</span>&nbsp;<span class="ident" id="2307135">n</span>&nbsp;<span class="op" id="2307137">==</span>&nbsp;<span class="num" id="2307140">0</span>&nbsp;<span class="op" id="2307142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307146">return</span>&nbsp;<span class="builtintype" id="2307153">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307161">l</span>&nbsp;<span class="op" id="2307163">:=</span>&nbsp;<span class="ident" id="2307166">utf8</span><span class="op" id="2307170">.</span><span class="ident" id="2307171">RuneCountInString</span><span class="op" id="2307188">(</span><span class="ident" id="2307189">s</span><span class="op" id="2307190">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307193">if</span>&nbsp;<span class="ident" id="2307196">n</span>&nbsp;<span class="op" id="2307198">&lt;=</span>&nbsp;<span class="num" id="2307201">0</span>&nbsp;<span class="op" id="2307203">||</span>&nbsp;<span class="ident" id="2307206">n</span>&nbsp;<span class="op" id="2307208">&gt;</span>&nbsp;<span class="ident" id="2307210">l</span>&nbsp;<span class="op" id="2307212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307216">n</span>&nbsp;<span class="op" id="2307218">=</span>&nbsp;<span class="ident" id="2307220">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307226">a</span>&nbsp;<span class="op" id="2307228">:=</span>&nbsp;<span class="builtinfunc" id="2307231">make</span><span class="op" id="2307235">(</span><span class="op" id="2307236">[</span><span class="op" id="2307237">]</span><span class="builtintype" id="2307238">string</span><span class="op" id="2307244">,</span>&nbsp;<span class="ident" id="2307246">n</span><span class="op" id="2307247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307250">var</span>&nbsp;<span class="ident" id="2307254">size</span>&nbsp;<span class="builtintype" id="2307259">int</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307264">var</span>&nbsp;<span class="ident" id="2307268">ch</span>&nbsp;<span class="builtintype" id="2307271">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307277">i</span><span class="op" id="2307278">,</span>&nbsp;<span class="ident" id="2307280">cur</span>&nbsp;<span class="op" id="2307284">:=</span>&nbsp;<span class="num" id="2307287">0</span><span class="op" id="2307288">,</span>&nbsp;<span class="num" id="2307290">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307293">for</span>&nbsp;<span class="op" id="2307297">;</span>&nbsp;<span class="ident" id="2307299">i</span><span class="op" id="2307300">+</span><span class="num" id="2307301">1</span>&nbsp;<span class="op" id="2307303">&lt;</span>&nbsp;<span class="ident" id="2307305">n</span><span class="op" id="2307306">;</span>&nbsp;<span class="ident" id="2307308">i</span><span class="op" id="2307309">++</span>&nbsp;<span class="op" id="2307312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307316">ch</span><span class="op" id="2307318">,</span>&nbsp;<span class="ident" id="2307320">size</span>&nbsp;<span class="op" id="2307325">=</span>&nbsp;<span class="ident" id="2307327">utf8</span><span class="op" id="2307331">.</span><span class="ident" id="2307332">DecodeRuneInString</span><span class="op" id="2307350">(</span><span class="ident" id="2307351">s</span><span class="op" id="2307352">[</span><span class="ident" id="2307353">cur</span><span class="op" id="2307356">:</span><span class="op" id="2307357">]</span><span class="op" id="2307358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307362">if</span>&nbsp;<span class="ident" id="2307365">ch</span>&nbsp;<span class="op" id="2307368">==</span>&nbsp;<span class="ident" id="2307371">utf8</span><span class="op" id="2307375">.</span><span class="ident" id="2307376">RuneError</span>&nbsp;<span class="op" id="2307386">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307391">a</span><span class="op" id="2307392">[</span><span class="ident" id="2307393">i</span><span class="op" id="2307394">]</span>&nbsp;<span class="op" id="2307396">=</span>&nbsp;<span class="builtintype" id="2307398">string</span><span class="op" id="2307404">(</span><span class="ident" id="2307405">utf8</span><span class="op" id="2307409">.</span><span class="ident" id="2307410">RuneError</span><span class="op" id="2307419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307423">}</span>&nbsp;<span class="keyword" id="2307425">else</span>&nbsp;<span class="op" id="2307430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307435">a</span><span class="op" id="2307436">[</span><span class="ident" id="2307437">i</span><span class="op" id="2307438">]</span>&nbsp;<span class="op" id="2307440">=</span>&nbsp;<span class="ident" id="2307442">s</span><span class="op" id="2307443">[</span><span class="ident" id="2307444">cur</span>&nbsp;<span class="op" id="2307448">:</span>&nbsp;<span class="ident" id="2307450">cur</span><span class="op" id="2307453">+</span><span class="ident" id="2307454">size</span><span class="op" id="2307458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307466">cur</span>&nbsp;<span class="op" id="2307470">+=</span>&nbsp;<span class="ident" id="2307473">size</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2307482">//&nbsp;add&nbsp;the&nbsp;rest,&nbsp;if&nbsp;there&nbsp;is&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307516">if</span>&nbsp;<span class="ident" id="2307519">cur</span>&nbsp;<span class="op" id="2307523">&lt;</span>&nbsp;<span class="builtinfunc" id="2307525">len</span><span class="op" id="2307528">(</span><span class="ident" id="2307529">s</span><span class="op" id="2307530">)</span>&nbsp;<span class="op" id="2307532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307536">a</span><span class="op" id="2307537">[</span><span class="ident" id="2307538">i</span><span class="op" id="2307539">]</span>&nbsp;<span class="op" id="2307541">=</span>&nbsp;<span class="ident" id="2307543">s</span><span class="op" id="2307544">[</span><span class="ident" id="2307545">cur</span><span class="op" id="2307548">:</span><span class="op" id="2307549">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307552">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307555">return</span>&nbsp;<span class="ident" id="2307562">a</span><br>
<span class="lineno"></span><span class="op" id="2307564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2307567">//&nbsp;primeRK&nbsp;is&nbsp;the&nbsp;prime&nbsp;base&nbsp;used&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2307626">const</span>&nbsp;<span class="ident" id="2307632">primeRK</span>&nbsp;<span class="op" id="2307640">=</span>&nbsp;<span class="num" id="2307642">16777619</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2307652">//&nbsp;hashStr&nbsp;returns&nbsp;the&nbsp;hash&nbsp;and&nbsp;the&nbsp;appropriate&nbsp;multiplicative</span><br>
<span class="lineno"></span><span class="comment" id="2307715">//&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2307758">func</span>&nbsp;<span class="ident" id="2307763">hashStr</span><span class="op" id="2307770">(</span><span class="ident" id="2307771">sep</span>&nbsp;<span class="builtintype" id="2307775">string</span><span class="op" id="2307781">)</span>&nbsp;<span class="op" id="2307783">(</span><span class="builtintype" id="2307784">uint32</span><span class="op" id="2307790">,</span>&nbsp;<span class="builtintype" id="2307792">uint32</span><span class="op" id="2307798">)</span>&nbsp;<span class="op" id="2307800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307803">hash</span>&nbsp;<span class="op" id="2307808">:=</span>&nbsp;<span class="builtintype" id="2307811">uint32</span><span class="op" id="2307817">(</span><span class="num" id="2307818">0</span><span class="op" id="2307819">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307822">for</span>&nbsp;<span class="ident" id="2307826">i</span>&nbsp;<span class="op" id="2307828">:=</span>&nbsp;<span class="num" id="2307831">0</span><span class="op" id="2307832">;</span>&nbsp;<span class="ident" id="2307834">i</span>&nbsp;<span class="op" id="2307836">&lt;</span>&nbsp;<span class="builtinfunc" id="2307838">len</span><span class="op" id="2307841">(</span><span class="ident" id="2307842">sep</span><span class="op" id="2307845">)</span><span class="op" id="2307846">;</span>&nbsp;<span class="ident" id="2307848">i</span><span class="op" id="2307849">++</span>&nbsp;<span class="op" id="2307852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307856">hash</span>&nbsp;<span class="op" id="2307861">=</span>&nbsp;<span class="ident" id="2307863">hash</span><span class="op" id="2307867">*</span><span class="ident" id="2307868">primeRK</span>&nbsp;<span class="op" id="2307876">+</span>&nbsp;<span class="builtintype" id="2307878">uint32</span><span class="op" id="2307884">(</span><span class="ident" id="2307885">sep</span><span class="op" id="2307888">[</span><span class="ident" id="2307889">i</span><span class="op" id="2307890">]</span><span class="op" id="2307891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307897">var</span>&nbsp;<span class="ident" id="2307901">pow</span><span class="op" id="2307904">,</span>&nbsp;<span class="ident" id="2307906">sq</span>&nbsp;<span class="builtintype" id="2307909">uint32</span>&nbsp;<span class="op" id="2307916">=</span>&nbsp;<span class="num" id="2307918">1</span><span class="op" id="2307919">,</span>&nbsp;<span class="ident" id="2307921">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307930">for</span>&nbsp;<span class="ident" id="2307934">i</span>&nbsp;<span class="op" id="2307936">:=</span>&nbsp;<span class="builtinfunc" id="2307939">len</span><span class="op" id="2307942">(</span><span class="ident" id="2307943">sep</span><span class="op" id="2307946">)</span><span class="op" id="2307947">;</span>&nbsp;<span class="ident" id="2307949">i</span>&nbsp;<span class="op" id="2307951">&gt;</span>&nbsp;<span class="num" id="2307953">0</span><span class="op" id="2307954">;</span>&nbsp;<span class="ident" id="2307956">i</span>&nbsp;<span class="op" id="2307958">&gt;&gt;=</span>&nbsp;<span class="num" id="2307962">1</span>&nbsp;<span class="op" id="2307964">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307968">if</span>&nbsp;<span class="ident" id="2307971">i</span><span class="op" id="2307972">&amp;</span><span class="num" id="2307973">1</span>&nbsp;<span class="op" id="2307975">!=</span>&nbsp;<span class="num" id="2307978">0</span>&nbsp;<span class="op" id="2307980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307985">pow</span>&nbsp;<span class="op" id="2307989">*=</span>&nbsp;<span class="ident" id="2307992">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308001">sq</span>&nbsp;<span class="op" id="2308004">*=</span>&nbsp;<span class="ident" id="2308007">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308011">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308014">return</span>&nbsp;<span class="ident" id="2308021">hash</span><span class="op" id="2308025">,</span>&nbsp;<span class="ident" id="2308027">pow</span><br>
<span class="lineno"></span><span class="op" id="2308031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308034">//&nbsp;hashStrRev&nbsp;returns&nbsp;the&nbsp;hash&nbsp;of&nbsp;the&nbsp;reverse&nbsp;of&nbsp;sep&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2308095">//&nbsp;appropriate&nbsp;multiplicative&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno">65</span><span class="keyword" id="2308165">func</span>&nbsp;<span class="ident" id="2308170">hashStrRev</span><span class="op" id="2308180">(</span><span class="ident" id="2308181">sep</span>&nbsp;<span class="builtintype" id="2308185">string</span><span class="op" id="2308191">)</span>&nbsp;<span class="op" id="2308193">(</span><span class="builtintype" id="2308194">uint32</span><span class="op" id="2308200">,</span>&nbsp;<span class="builtintype" id="2308202">uint32</span><span class="op" id="2308208">)</span>&nbsp;<span class="op" id="2308210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308213">hash</span>&nbsp;<span class="op" id="2308218">:=</span>&nbsp;<span class="builtintype" id="2308221">uint32</span><span class="op" id="2308227">(</span><span class="num" id="2308228">0</span><span class="op" id="2308229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308232">for</span>&nbsp;<span class="ident" id="2308236">i</span>&nbsp;<span class="op" id="2308238">:=</span>&nbsp;<span class="builtinfunc" id="2308241">len</span><span class="op" id="2308244">(</span><span class="ident" id="2308245">sep</span><span class="op" id="2308248">)</span>&nbsp;<span class="op" id="2308250">-</span>&nbsp;<span class="num" id="2308252">1</span><span class="op" id="2308253">;</span>&nbsp;<span class="ident" id="2308255">i</span>&nbsp;<span class="op" id="2308257">&gt;=</span>&nbsp;<span class="num" id="2308260">0</span><span class="op" id="2308261">;</span>&nbsp;<span class="ident" id="2308263">i</span><span class="op" id="2308264">--</span>&nbsp;<span class="op" id="2308267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308271">hash</span>&nbsp;<span class="op" id="2308276">=</span>&nbsp;<span class="ident" id="2308278">hash</span><span class="op" id="2308282">*</span><span class="ident" id="2308283">primeRK</span>&nbsp;<span class="op" id="2308291">+</span>&nbsp;<span class="builtintype" id="2308293">uint32</span><span class="op" id="2308299">(</span><span class="ident" id="2308300">sep</span><span class="op" id="2308303">[</span><span class="ident" id="2308304">i</span><span class="op" id="2308305">]</span><span class="op" id="2308306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308309">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308312">var</span>&nbsp;<span class="ident" id="2308316">pow</span><span class="op" id="2308319">,</span>&nbsp;<span class="ident" id="2308321">sq</span>&nbsp;<span class="builtintype" id="2308324">uint32</span>&nbsp;<span class="op" id="2308331">=</span>&nbsp;<span class="num" id="2308333">1</span><span class="op" id="2308334">,</span>&nbsp;<span class="ident" id="2308336">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308345">for</span>&nbsp;<span class="ident" id="2308349">i</span>&nbsp;<span class="op" id="2308351">:=</span>&nbsp;<span class="builtinfunc" id="2308354">len</span><span class="op" id="2308357">(</span><span class="ident" id="2308358">sep</span><span class="op" id="2308361">)</span><span class="op" id="2308362">;</span>&nbsp;<span class="ident" id="2308364">i</span>&nbsp;<span class="op" id="2308366">&gt;</span>&nbsp;<span class="num" id="2308368">0</span><span class="op" id="2308369">;</span>&nbsp;<span class="ident" id="2308371">i</span>&nbsp;<span class="op" id="2308373">&gt;&gt;=</span>&nbsp;<span class="num" id="2308377">1</span>&nbsp;<span class="op" id="2308379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308383">if</span>&nbsp;<span class="ident" id="2308386">i</span><span class="op" id="2308387">&amp;</span><span class="num" id="2308388">1</span>&nbsp;<span class="op" id="2308390">!=</span>&nbsp;<span class="num" id="2308393">0</span>&nbsp;<span class="op" id="2308395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308400">pow</span>&nbsp;<span class="op" id="2308404">*=</span>&nbsp;<span class="ident" id="2308407">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308412">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308416">sq</span>&nbsp;<span class="op" id="2308419">*=</span>&nbsp;<span class="ident" id="2308422">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308429">return</span>&nbsp;<span class="ident" id="2308436">hash</span><span class="op" id="2308440">,</span>&nbsp;<span class="ident" id="2308442">pow</span><br>
<span class="lineno"></span><span class="op" id="2308446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2308449">//&nbsp;Count&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;sep&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2308518">func</span>&nbsp;<span class="ident" id="2308523">Count</span><span class="op" id="2308528">(</span><span class="ident" id="2308529">s</span><span class="op" id="2308530">,</span>&nbsp;<span class="ident" id="2308532">sep</span>&nbsp;<span class="builtintype" id="2308536">string</span><span class="op" id="2308542">)</span>&nbsp;<span class="builtintype" id="2308544">int</span>&nbsp;<span class="op" id="2308548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308551">n</span>&nbsp;<span class="op" id="2308553">:=</span>&nbsp;<span class="num" id="2308556">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308559">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308577">switch</span>&nbsp;<span class="op" id="2308584">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308587">case</span>&nbsp;<span class="builtinfunc" id="2308592">len</span><span class="op" id="2308595">(</span><span class="ident" id="2308596">sep</span><span class="op" id="2308599">)</span>&nbsp;<span class="op" id="2308601">==</span>&nbsp;<span class="num" id="2308604">0</span><span class="op" id="2308605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308609">return</span>&nbsp;<span class="ident" id="2308616">utf8</span><span class="op" id="2308620">.</span><span class="ident" id="2308621">RuneCountInString</span><span class="op" id="2308638">(</span><span class="ident" id="2308639">s</span><span class="op" id="2308640">)</span>&nbsp;<span class="op" id="2308642">+</span>&nbsp;<span class="num" id="2308644">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308647">case</span>&nbsp;<span class="builtinfunc" id="2308652">len</span><span class="op" id="2308655">(</span><span class="ident" id="2308656">sep</span><span class="op" id="2308659">)</span>&nbsp;<span class="op" id="2308661">==</span>&nbsp;<span class="num" id="2308664">1</span><span class="op" id="2308665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308669">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308705">c</span>&nbsp;<span class="op" id="2308707">:=</span>&nbsp;<span class="ident" id="2308710">sep</span><span class="op" id="2308713">[</span><span class="num" id="2308714">0</span><span class="op" id="2308715">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308719">for</span>&nbsp;<span class="ident" id="2308723">i</span>&nbsp;<span class="op" id="2308725">:=</span>&nbsp;<span class="num" id="2308728">0</span><span class="op" id="2308729">;</span>&nbsp;<span class="ident" id="2308731">i</span>&nbsp;<span class="op" id="2308733">&lt;</span>&nbsp;<span class="builtinfunc" id="2308735">len</span><span class="op" id="2308738">(</span><span class="ident" id="2308739">s</span><span class="op" id="2308740">)</span><span class="op" id="2308741">;</span>&nbsp;<span class="ident" id="2308743">i</span><span class="op" id="2308744">++</span>&nbsp;<span class="op" id="2308747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308752">if</span>&nbsp;<span class="ident" id="2308755">s</span><span class="op" id="2308756">[</span><span class="ident" id="2308757">i</span><span class="op" id="2308758">]</span>&nbsp;<span class="op" id="2308760">==</span>&nbsp;<span class="ident" id="2308763">c</span>&nbsp;<span class="op" id="2308765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308771">n</span><span class="op" id="2308772">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308782">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308786">return</span>&nbsp;<span class="ident" id="2308793">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308796">case</span>&nbsp;<span class="builtinfunc" id="2308801">len</span><span class="op" id="2308804">(</span><span class="ident" id="2308805">sep</span><span class="op" id="2308808">)</span>&nbsp;<span class="op" id="2308810">&gt;</span>&nbsp;<span class="builtinfunc" id="2308812">len</span><span class="op" id="2308815">(</span><span class="ident" id="2308816">s</span><span class="op" id="2308817">)</span><span class="op" id="2308818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308822">return</span>&nbsp;<span class="num" id="2308829">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308832">case</span>&nbsp;<span class="builtinfunc" id="2308837">len</span><span class="op" id="2308840">(</span><span class="ident" id="2308841">sep</span><span class="op" id="2308844">)</span>&nbsp;<span class="op" id="2308846">==</span>&nbsp;<span class="builtinfunc" id="2308849">len</span><span class="op" id="2308852">(</span><span class="ident" id="2308853">s</span><span class="op" id="2308854">)</span><span class="op" id="2308855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308859">if</span>&nbsp;<span class="ident" id="2308862">sep</span>&nbsp;<span class="op" id="2308866">==</span>&nbsp;<span class="ident" id="2308869">s</span>&nbsp;<span class="op" id="2308871">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308876">return</span>&nbsp;<span class="num" id="2308883">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308891">return</span>&nbsp;<span class="num" id="2308898">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2308901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308904">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308926">hashsep</span><span class="op" id="2308933">,</span>&nbsp;<span class="ident" id="2308935">pow</span>&nbsp;<span class="op" id="2308939">:=</span>&nbsp;<span class="ident" id="2308942">hashStr</span><span class="op" id="2308949">(</span><span class="ident" id="2308950">sep</span><span class="op" id="2308953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308956">h</span>&nbsp;<span class="op" id="2308958">:=</span>&nbsp;<span class="builtintype" id="2308961">uint32</span><span class="op" id="2308967">(</span><span class="num" id="2308968">0</span><span class="op" id="2308969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308972">for</span>&nbsp;<span class="ident" id="2308976">i</span>&nbsp;<span class="op" id="2308978">:=</span>&nbsp;<span class="num" id="2308981">0</span><span class="op" id="2308982">;</span>&nbsp;<span class="ident" id="2308984">i</span>&nbsp;<span class="op" id="2308986">&lt;</span>&nbsp;<span class="builtinfunc" id="2308988">len</span><span class="op" id="2308991">(</span><span class="ident" id="2308992">sep</span><span class="op" id="2308995">)</span><span class="op" id="2308996">;</span>&nbsp;<span class="ident" id="2308998">i</span><span class="op" id="2308999">++</span>&nbsp;<span class="op" id="2309002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309006">h</span>&nbsp;<span class="op" id="2309008">=</span>&nbsp;<span class="ident" id="2309010">h</span><span class="op" id="2309011">*</span><span class="ident" id="2309012">primeRK</span>&nbsp;<span class="op" id="2309020">+</span>&nbsp;<span class="builtintype" id="2309022">uint32</span><span class="op" id="2309028">(</span><span class="ident" id="2309029">s</span><span class="op" id="2309030">[</span><span class="ident" id="2309031">i</span><span class="op" id="2309032">]</span><span class="op" id="2309033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2309036">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309039">lastmatch</span>&nbsp;<span class="op" id="2309049">:=</span>&nbsp;<span class="num" id="2309052">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309055">if</span>&nbsp;<span class="ident" id="2309058">h</span>&nbsp;<span class="op" id="2309060">==</span>&nbsp;<span class="ident" id="2309063">hashsep</span>&nbsp;<span class="op" id="2309071">&amp;&amp;</span>&nbsp;<span class="ident" id="2309074">s</span><span class="op" id="2309075">[</span><span class="op" id="2309076">:</span><span class="builtinfunc" id="2309077">len</span><span class="op" id="2309080">(</span><span class="ident" id="2309081">sep</span><span class="op" id="2309084">)</span><span class="op" id="2309085">]</span>&nbsp;<span class="op" id="2309087">==</span>&nbsp;<span class="ident" id="2309090">sep</span>&nbsp;<span class="op" id="2309094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309098">n</span><span class="op" id="2309099">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309104">lastmatch</span>&nbsp;<span class="op" id="2309114">=</span>&nbsp;<span class="builtinfunc" id="2309116">len</span><span class="op" id="2309119">(</span><span class="ident" id="2309120">sep</span><span class="op" id="2309123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2309126">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309129">for</span>&nbsp;<span class="ident" id="2309133">i</span>&nbsp;<span class="op" id="2309135">:=</span>&nbsp;<span class="builtinfunc" id="2309138">len</span><span class="op" id="2309141">(</span><span class="ident" id="2309142">sep</span><span class="op" id="2309145">)</span><span class="op" id="2309146">;</span>&nbsp;<span class="ident" id="2309148">i</span>&nbsp;<span class="op" id="2309150">&lt;</span>&nbsp;<span class="builtinfunc" id="2309152">len</span><span class="op" id="2309155">(</span><span class="ident" id="2309156">s</span><span class="op" id="2309157">)</span><span class="op" id="2309158">;</span>&nbsp;<span class="op" id="2309160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309164">h</span>&nbsp;<span class="op" id="2309166">*=</span>&nbsp;<span class="ident" id="2309169">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309179">h</span>&nbsp;<span class="op" id="2309181">+=</span>&nbsp;<span class="builtintype" id="2309184">uint32</span><span class="op" id="2309190">(</span><span class="ident" id="2309191">s</span><span class="op" id="2309192">[</span><span class="ident" id="2309193">i</span><span class="op" id="2309194">]</span><span class="op" id="2309195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309199">h</span>&nbsp;<span class="op" id="2309201">-=</span>&nbsp;<span class="ident" id="2309204">pow</span>&nbsp;<span class="op" id="2309208">*</span>&nbsp;<span class="builtintype" id="2309210">uint32</span><span class="op" id="2309216">(</span><span class="ident" id="2309217">s</span><span class="op" id="2309218">[</span><span class="ident" id="2309219">i</span><span class="op" id="2309220">-</span><span class="builtinfunc" id="2309221">len</span><span class="op" id="2309224">(</span><span class="ident" id="2309225">sep</span><span class="op" id="2309228">)</span><span class="op" id="2309229">]</span><span class="op" id="2309230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309234">i</span><span class="op" id="2309235">++</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309240">if</span>&nbsp;<span class="ident" id="2309243">h</span>&nbsp;<span class="op" id="2309245">==</span>&nbsp;<span class="ident" id="2309248">hashsep</span>&nbsp;<span class="op" id="2309256">&amp;&amp;</span>&nbsp;<span class="ident" id="2309259">lastmatch</span>&nbsp;<span class="op" id="2309269">&lt;=</span>&nbsp;<span class="ident" id="2309272">i</span><span class="op" id="2309273">-</span><span class="builtinfunc" id="2309274">len</span><span class="op" id="2309277">(</span><span class="ident" id="2309278">sep</span><span class="op" id="2309281">)</span>&nbsp;<span class="op" id="2309283">&amp;&amp;</span>&nbsp;<span class="ident" id="2309286">s</span><span class="op" id="2309287">[</span><span class="ident" id="2309288">i</span><span class="op" id="2309289">-</span><span class="builtinfunc" id="2309290">len</span><span class="op" id="2309293">(</span><span class="ident" id="2309294">sep</span><span class="op" id="2309297">)</span><span class="op" id="2309298">:</span><span class="ident" id="2309299">i</span><span class="op" id="2309300">]</span>&nbsp;<span class="op" id="2309302">==</span>&nbsp;<span class="ident" id="2309305">sep</span>&nbsp;<span class="op" id="2309309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309314">n</span><span class="op" id="2309315">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309321">lastmatch</span>&nbsp;<span class="op" id="2309331">=</span>&nbsp;<span class="ident" id="2309333">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2309337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2309340">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309343">return</span>&nbsp;<span class="ident" id="2309350">n</span><br>
<span class="lineno"></span><span class="op" id="2309352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309355">//&nbsp;Contains&nbsp;returns&nbsp;true&nbsp;if&nbsp;substr&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2309403">func</span>&nbsp;<span class="ident" id="2309408">Contains</span><span class="op" id="2309416">(</span><span class="ident" id="2309417">s</span><span class="op" id="2309418">,</span>&nbsp;<span class="ident" id="2309420">substr</span>&nbsp;<span class="builtintype" id="2309427">string</span><span class="op" id="2309433">)</span>&nbsp;<span class="builtintype" id="2309435">bool</span>&nbsp;<span class="op" id="2309440">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309443">return</span>&nbsp;<span class="ident" id="2309450">Index</span><span class="op" id="2309455">(</span><span class="ident" id="2309456">s</span><span class="op" id="2309457">,</span>&nbsp;<span class="ident" id="2309459">substr</span><span class="op" id="2309465">)</span>&nbsp;<span class="op" id="2309467">&gt;=</span>&nbsp;<span class="num" id="2309470">0</span><br>
<span class="lineno"></span><span class="op" id="2309472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309475">//&nbsp;ContainsAny&nbsp;returns&nbsp;true&nbsp;if&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;in&nbsp;chars&nbsp;are&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2309553">func</span>&nbsp;<span class="ident" id="2309558">ContainsAny</span><span class="op" id="2309569">(</span><span class="ident" id="2309570">s</span><span class="op" id="2309571">,</span>&nbsp;<span class="ident" id="2309573">chars</span>&nbsp;<span class="builtintype" id="2309579">string</span><span class="op" id="2309585">)</span>&nbsp;<span class="builtintype" id="2309587">bool</span>&nbsp;<span class="op" id="2309592">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309595">return</span>&nbsp;<span class="ident" id="2309602">IndexAny</span><span class="op" id="2309610">(</span><span class="ident" id="2309611">s</span><span class="op" id="2309612">,</span>&nbsp;<span class="ident" id="2309614">chars</span><span class="op" id="2309619">)</span>&nbsp;<span class="op" id="2309621">&gt;=</span>&nbsp;<span class="num" id="2309624">0</span><br>
<span class="lineno"></span><span class="op" id="2309626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309629">//&nbsp;ContainsRune&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2309699">func</span>&nbsp;<span class="ident" id="2309704">ContainsRune</span><span class="op" id="2309716">(</span><span class="ident" id="2309717">s</span>&nbsp;<span class="builtintype" id="2309719">string</span><span class="op" id="2309725">,</span>&nbsp;<span class="ident" id="2309727">r</span>&nbsp;<span class="builtintype" id="2309729">rune</span><span class="op" id="2309733">)</span>&nbsp;<span class="builtintype" id="2309735">bool</span>&nbsp;<span class="op" id="2309740">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309743">return</span>&nbsp;<span class="ident" id="2309750">IndexRune</span><span class="op" id="2309759">(</span><span class="ident" id="2309760">s</span><span class="op" id="2309761">,</span>&nbsp;<span class="ident" id="2309763">r</span><span class="op" id="2309764">)</span>&nbsp;<span class="op" id="2309766">&gt;=</span>&nbsp;<span class="num" id="2309769">0</span><br>
<span class="lineno"></span><span class="op" id="2309771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309774">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2309870">func</span>&nbsp;<span class="ident" id="2309875">Index</span><span class="op" id="2309880">(</span><span class="ident" id="2309881">s</span><span class="op" id="2309882">,</span>&nbsp;<span class="ident" id="2309884">sep</span>&nbsp;<span class="builtintype" id="2309888">string</span><span class="op" id="2309894">)</span>&nbsp;<span class="builtintype" id="2309896">int</span>&nbsp;<span class="op" id="2309900">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309903">n</span>&nbsp;<span class="op" id="2309905">:=</span>&nbsp;<span class="builtinfunc" id="2309908">len</span><span class="op" id="2309911">(</span><span class="ident" id="2309912">sep</span><span class="op" id="2309915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309918">switch</span>&nbsp;<span class="op" id="2309925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309928">case</span>&nbsp;<span class="ident" id="2309933">n</span>&nbsp;<span class="op" id="2309935">==</span>&nbsp;<span class="num" id="2309938">0</span><span class="op" id="2309939">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309943">return</span>&nbsp;<span class="num" id="2309950">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309953">case</span>&nbsp;<span class="ident" id="2309958">n</span>&nbsp;<span class="op" id="2309960">==</span>&nbsp;<span class="num" id="2309963">1</span><span class="op" id="2309964">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309968">return</span>&nbsp;<span class="ident" id="2309975">IndexByte</span><span class="op" id="2309984">(</span><span class="ident" id="2309985">s</span><span class="op" id="2309986">,</span>&nbsp;<span class="ident" id="2309988">sep</span><span class="op" id="2309991">[</span><span class="num" id="2309992">0</span><span class="op" id="2309993">]</span><span class="op" id="2309994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309997">case</span>&nbsp;<span class="ident" id="2310002">n</span>&nbsp;<span class="op" id="2310004">==</span>&nbsp;<span class="builtinfunc" id="2310007">len</span><span class="op" id="2310010">(</span><span class="ident" id="2310011">s</span><span class="op" id="2310012">)</span><span class="op" id="2310013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310017">if</span>&nbsp;<span class="ident" id="2310020">sep</span>&nbsp;<span class="op" id="2310024">==</span>&nbsp;<span class="ident" id="2310027">s</span>&nbsp;<span class="op" id="2310029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310034">return</span>&nbsp;<span class="num" id="2310041">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310045">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310049">return</span>&nbsp;<span class="op" id="2310056">-</span><span class="num" id="2310057">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310060">case</span>&nbsp;<span class="ident" id="2310065">n</span>&nbsp;<span class="op" id="2310067">&gt;</span>&nbsp;<span class="builtinfunc" id="2310069">len</span><span class="op" id="2310072">(</span><span class="ident" id="2310073">s</span><span class="op" id="2310074">)</span><span class="op" id="2310075">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310079">return</span>&nbsp;<span class="op" id="2310086">-</span><span class="num" id="2310087">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310093">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310115">hashsep</span><span class="op" id="2310122">,</span>&nbsp;<span class="ident" id="2310124">pow</span>&nbsp;<span class="op" id="2310128">:=</span>&nbsp;<span class="ident" id="2310131">hashStr</span><span class="op" id="2310138">(</span><span class="ident" id="2310139">sep</span><span class="op" id="2310142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310145">var</span>&nbsp;<span class="ident" id="2310149">h</span>&nbsp;<span class="builtintype" id="2310151">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310159">for</span>&nbsp;<span class="ident" id="2310163">i</span>&nbsp;<span class="op" id="2310165">:=</span>&nbsp;<span class="num" id="2310168">0</span><span class="op" id="2310169">;</span>&nbsp;<span class="ident" id="2310171">i</span>&nbsp;<span class="op" id="2310173">&lt;</span>&nbsp;<span class="ident" id="2310175">n</span><span class="op" id="2310176">;</span>&nbsp;<span class="ident" id="2310178">i</span><span class="op" id="2310179">++</span>&nbsp;<span class="op" id="2310182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310186">h</span>&nbsp;<span class="op" id="2310188">=</span>&nbsp;<span class="ident" id="2310190">h</span><span class="op" id="2310191">*</span><span class="ident" id="2310192">primeRK</span>&nbsp;<span class="op" id="2310200">+</span>&nbsp;<span class="builtintype" id="2310202">uint32</span><span class="op" id="2310208">(</span><span class="ident" id="2310209">s</span><span class="op" id="2310210">[</span><span class="ident" id="2310211">i</span><span class="op" id="2310212">]</span><span class="op" id="2310213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310216">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310219">if</span>&nbsp;<span class="ident" id="2310222">h</span>&nbsp;<span class="op" id="2310224">==</span>&nbsp;<span class="ident" id="2310227">hashsep</span>&nbsp;<span class="op" id="2310235">&amp;&amp;</span>&nbsp;<span class="ident" id="2310238">s</span><span class="op" id="2310239">[</span><span class="op" id="2310240">:</span><span class="ident" id="2310241">n</span><span class="op" id="2310242">]</span>&nbsp;<span class="op" id="2310244">==</span>&nbsp;<span class="ident" id="2310247">sep</span>&nbsp;<span class="op" id="2310251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310255">return</span>&nbsp;<span class="num" id="2310262">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310268">for</span>&nbsp;<span class="ident" id="2310272">i</span>&nbsp;<span class="op" id="2310274">:=</span>&nbsp;<span class="ident" id="2310277">n</span><span class="op" id="2310278">;</span>&nbsp;<span class="ident" id="2310280">i</span>&nbsp;<span class="op" id="2310282">&lt;</span>&nbsp;<span class="builtinfunc" id="2310284">len</span><span class="op" id="2310287">(</span><span class="ident" id="2310288">s</span><span class="op" id="2310289">)</span><span class="op" id="2310290">;</span>&nbsp;<span class="op" id="2310292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310296">h</span>&nbsp;<span class="op" id="2310298">*=</span>&nbsp;<span class="ident" id="2310301">primeRK</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310311">h</span>&nbsp;<span class="op" id="2310313">+=</span>&nbsp;<span class="builtintype" id="2310316">uint32</span><span class="op" id="2310322">(</span><span class="ident" id="2310323">s</span><span class="op" id="2310324">[</span><span class="ident" id="2310325">i</span><span class="op" id="2310326">]</span><span class="op" id="2310327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310331">h</span>&nbsp;<span class="op" id="2310333">-=</span>&nbsp;<span class="ident" id="2310336">pow</span>&nbsp;<span class="op" id="2310340">*</span>&nbsp;<span class="builtintype" id="2310342">uint32</span><span class="op" id="2310348">(</span><span class="ident" id="2310349">s</span><span class="op" id="2310350">[</span><span class="ident" id="2310351">i</span><span class="op" id="2310352">-</span><span class="ident" id="2310353">n</span><span class="op" id="2310354">]</span><span class="op" id="2310355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310359">i</span><span class="op" id="2310360">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310365">if</span>&nbsp;<span class="ident" id="2310368">h</span>&nbsp;<span class="op" id="2310370">==</span>&nbsp;<span class="ident" id="2310373">hashsep</span>&nbsp;<span class="op" id="2310381">&amp;&amp;</span>&nbsp;<span class="ident" id="2310384">s</span><span class="op" id="2310385">[</span><span class="ident" id="2310386">i</span><span class="op" id="2310387">-</span><span class="ident" id="2310388">n</span><span class="op" id="2310389">:</span><span class="ident" id="2310390">i</span><span class="op" id="2310391">]</span>&nbsp;<span class="op" id="2310393">==</span>&nbsp;<span class="ident" id="2310396">sep</span>&nbsp;<span class="op" id="2310400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310405">return</span>&nbsp;<span class="ident" id="2310412">i</span>&nbsp;<span class="op" id="2310414">-</span>&nbsp;<span class="ident" id="2310416">n</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310426">return</span>&nbsp;<span class="op" id="2310433">-</span><span class="num" id="2310434">1</span><br>
<span class="lineno"></span><span class="op" id="2310436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2310439">//&nbsp;LastIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2310538">func</span>&nbsp;<span class="ident" id="2310543">LastIndex</span><span class="op" id="2310552">(</span><span class="ident" id="2310553">s</span><span class="op" id="2310554">,</span>&nbsp;<span class="ident" id="2310556">sep</span>&nbsp;<span class="builtintype" id="2310560">string</span><span class="op" id="2310566">)</span>&nbsp;<span class="builtintype" id="2310568">int</span>&nbsp;<span class="op" id="2310572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310575">n</span>&nbsp;<span class="op" id="2310577">:=</span>&nbsp;<span class="builtinfunc" id="2310580">len</span><span class="op" id="2310583">(</span><span class="ident" id="2310584">sep</span><span class="op" id="2310587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310590">switch</span>&nbsp;<span class="op" id="2310597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310600">case</span>&nbsp;<span class="ident" id="2310605">n</span>&nbsp;<span class="op" id="2310607">==</span>&nbsp;<span class="num" id="2310610">0</span><span class="op" id="2310611">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310615">return</span>&nbsp;<span class="builtinfunc" id="2310622">len</span><span class="op" id="2310625">(</span><span class="ident" id="2310626">s</span><span class="op" id="2310627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310630">case</span>&nbsp;<span class="ident" id="2310635">n</span>&nbsp;<span class="op" id="2310637">==</span>&nbsp;<span class="num" id="2310640">1</span><span class="op" id="2310641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310645">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310681">c</span>&nbsp;<span class="op" id="2310683">:=</span>&nbsp;<span class="ident" id="2310686">sep</span><span class="op" id="2310689">[</span><span class="num" id="2310690">0</span><span class="op" id="2310691">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310695">for</span>&nbsp;<span class="ident" id="2310699">i</span>&nbsp;<span class="op" id="2310701">:=</span>&nbsp;<span class="builtinfunc" id="2310704">len</span><span class="op" id="2310707">(</span><span class="ident" id="2310708">s</span><span class="op" id="2310709">)</span>&nbsp;<span class="op" id="2310711">-</span>&nbsp;<span class="num" id="2310713">1</span><span class="op" id="2310714">;</span>&nbsp;<span class="ident" id="2310716">i</span>&nbsp;<span class="op" id="2310718">&gt;=</span>&nbsp;<span class="num" id="2310721">0</span><span class="op" id="2310722">;</span>&nbsp;<span class="ident" id="2310724">i</span><span class="op" id="2310725">--</span>&nbsp;<span class="op" id="2310728">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310733">if</span>&nbsp;<span class="ident" id="2310736">s</span><span class="op" id="2310737">[</span><span class="ident" id="2310738">i</span><span class="op" id="2310739">]</span>&nbsp;<span class="op" id="2310741">==</span>&nbsp;<span class="ident" id="2310744">c</span>&nbsp;<span class="op" id="2310746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310752">return</span>&nbsp;<span class="ident" id="2310759">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310772">return</span>&nbsp;<span class="op" id="2310779">-</span><span class="num" id="2310780">1</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310783">case</span>&nbsp;<span class="ident" id="2310788">n</span>&nbsp;<span class="op" id="2310790">==</span>&nbsp;<span class="builtinfunc" id="2310793">len</span><span class="op" id="2310796">(</span><span class="ident" id="2310797">s</span><span class="op" id="2310798">)</span><span class="op" id="2310799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310803">if</span>&nbsp;<span class="ident" id="2310806">sep</span>&nbsp;<span class="op" id="2310810">==</span>&nbsp;<span class="ident" id="2310813">s</span>&nbsp;<span class="op" id="2310815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310820">return</span>&nbsp;<span class="num" id="2310827">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310835">return</span>&nbsp;<span class="op" id="2310842">-</span><span class="num" id="2310843">1</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310846">case</span>&nbsp;<span class="ident" id="2310851">n</span>&nbsp;<span class="op" id="2310853">&gt;</span>&nbsp;<span class="builtinfunc" id="2310855">len</span><span class="op" id="2310858">(</span><span class="ident" id="2310859">s</span><span class="op" id="2310860">)</span><span class="op" id="2310861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310865">return</span>&nbsp;<span class="op" id="2310872">-</span><span class="num" id="2310873">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310879">//&nbsp;Rabin-Karp&nbsp;search&nbsp;from&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310928">hashsep</span><span class="op" id="2310935">,</span>&nbsp;<span class="ident" id="2310937">pow</span>&nbsp;<span class="op" id="2310941">:=</span>&nbsp;<span class="ident" id="2310944">hashStrRev</span><span class="op" id="2310954">(</span><span class="ident" id="2310955">sep</span><span class="op" id="2310958">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310961">last</span>&nbsp;<span class="op" id="2310966">:=</span>&nbsp;<span class="builtinfunc" id="2310969">len</span><span class="op" id="2310972">(</span><span class="ident" id="2310973">s</span><span class="op" id="2310974">)</span>&nbsp;<span class="op" id="2310976">-</span>&nbsp;<span class="ident" id="2310978">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310981">var</span>&nbsp;<span class="ident" id="2310985">h</span>&nbsp;<span class="builtintype" id="2310987">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310995">for</span>&nbsp;<span class="ident" id="2310999">i</span>&nbsp;<span class="op" id="2311001">:=</span>&nbsp;<span class="builtinfunc" id="2311004">len</span><span class="op" id="2311007">(</span><span class="ident" id="2311008">s</span><span class="op" id="2311009">)</span>&nbsp;<span class="op" id="2311011">-</span>&nbsp;<span class="num" id="2311013">1</span><span class="op" id="2311014">;</span>&nbsp;<span class="ident" id="2311016">i</span>&nbsp;<span class="op" id="2311018">&gt;=</span>&nbsp;<span class="ident" id="2311021">last</span><span class="op" id="2311025">;</span>&nbsp;<span class="ident" id="2311027">i</span><span class="op" id="2311028">--</span>&nbsp;<span class="op" id="2311031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311035">h</span>&nbsp;<span class="op" id="2311037">=</span>&nbsp;<span class="ident" id="2311039">h</span><span class="op" id="2311040">*</span><span class="ident" id="2311041">primeRK</span>&nbsp;<span class="op" id="2311049">+</span>&nbsp;<span class="builtintype" id="2311051">uint32</span><span class="op" id="2311057">(</span><span class="ident" id="2311058">s</span><span class="op" id="2311059">[</span><span class="ident" id="2311060">i</span><span class="op" id="2311061">]</span><span class="op" id="2311062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311065">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311068">if</span>&nbsp;<span class="ident" id="2311071">h</span>&nbsp;<span class="op" id="2311073">==</span>&nbsp;<span class="ident" id="2311076">hashsep</span>&nbsp;<span class="op" id="2311084">&amp;&amp;</span>&nbsp;<span class="ident" id="2311087">s</span><span class="op" id="2311088">[</span><span class="ident" id="2311089">last</span><span class="op" id="2311093">:</span><span class="op" id="2311094">]</span>&nbsp;<span class="op" id="2311096">==</span>&nbsp;<span class="ident" id="2311099">sep</span>&nbsp;<span class="op" id="2311103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311107">return</span>&nbsp;<span class="ident" id="2311114">last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311123">for</span>&nbsp;<span class="ident" id="2311127">i</span>&nbsp;<span class="op" id="2311129">:=</span>&nbsp;<span class="ident" id="2311132">last</span>&nbsp;<span class="op" id="2311137">-</span>&nbsp;<span class="num" id="2311139">1</span><span class="op" id="2311140">;</span>&nbsp;<span class="ident" id="2311142">i</span>&nbsp;<span class="op" id="2311144">&gt;=</span>&nbsp;<span class="num" id="2311147">0</span><span class="op" id="2311148">;</span>&nbsp;<span class="ident" id="2311150">i</span><span class="op" id="2311151">--</span>&nbsp;<span class="op" id="2311154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311158">h</span>&nbsp;<span class="op" id="2311160">*=</span>&nbsp;<span class="ident" id="2311163">primeRK</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311173">h</span>&nbsp;<span class="op" id="2311175">+=</span>&nbsp;<span class="builtintype" id="2311178">uint32</span><span class="op" id="2311184">(</span><span class="ident" id="2311185">s</span><span class="op" id="2311186">[</span><span class="ident" id="2311187">i</span><span class="op" id="2311188">]</span><span class="op" id="2311189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311193">h</span>&nbsp;<span class="op" id="2311195">-=</span>&nbsp;<span class="ident" id="2311198">pow</span>&nbsp;<span class="op" id="2311202">*</span>&nbsp;<span class="builtintype" id="2311204">uint32</span><span class="op" id="2311210">(</span><span class="ident" id="2311211">s</span><span class="op" id="2311212">[</span><span class="ident" id="2311213">i</span><span class="op" id="2311214">+</span><span class="ident" id="2311215">n</span><span class="op" id="2311216">]</span><span class="op" id="2311217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311221">if</span>&nbsp;<span class="ident" id="2311224">h</span>&nbsp;<span class="op" id="2311226">==</span>&nbsp;<span class="ident" id="2311229">hashsep</span>&nbsp;<span class="op" id="2311237">&amp;&amp;</span>&nbsp;<span class="ident" id="2311240">s</span><span class="op" id="2311241">[</span><span class="ident" id="2311242">i</span><span class="op" id="2311243">:</span><span class="ident" id="2311244">i</span><span class="op" id="2311245">+</span><span class="ident" id="2311246">n</span><span class="op" id="2311247">]</span>&nbsp;<span class="op" id="2311249">==</span>&nbsp;<span class="ident" id="2311252">sep</span>&nbsp;<span class="op" id="2311256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311261">return</span>&nbsp;<span class="ident" id="2311268">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311272">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311278">return</span>&nbsp;<span class="op" id="2311285">-</span><span class="num" id="2311286">1</span><br>
<span class="lineno"></span><span class="op" id="2311288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2311291">//&nbsp;IndexRune&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno">225</span><span class="comment" id="2311370">//&nbsp;r,&nbsp;or&nbsp;-1&nbsp;if&nbsp;rune&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2311411">func</span>&nbsp;<span class="ident" id="2311416">IndexRune</span><span class="op" id="2311425">(</span><span class="ident" id="2311426">s</span>&nbsp;<span class="builtintype" id="2311428">string</span><span class="op" id="2311434">,</span>&nbsp;<span class="ident" id="2311436">r</span>&nbsp;<span class="builtintype" id="2311438">rune</span><span class="op" id="2311442">)</span>&nbsp;<span class="builtintype" id="2311444">int</span>&nbsp;<span class="op" id="2311448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311451">switch</span>&nbsp;<span class="op" id="2311458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311461">case</span>&nbsp;<span class="ident" id="2311466">r</span>&nbsp;<span class="op" id="2311468">&lt;</span>&nbsp;<span class="ident" id="2311470">utf8</span><span class="op" id="2311474">.</span><span class="ident" id="2311475">RuneSelf</span><span class="op" id="2311483">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311487">return</span>&nbsp;<span class="ident" id="2311494">IndexByte</span><span class="op" id="2311503">(</span><span class="ident" id="2311504">s</span><span class="op" id="2311505">,</span>&nbsp;<span class="builtintype" id="2311507">byte</span><span class="op" id="2311511">(</span><span class="ident" id="2311512">r</span><span class="op" id="2311513">)</span><span class="op" id="2311514">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311517">default</span><span class="op" id="2311524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311528">for</span>&nbsp;<span class="ident" id="2311532">i</span><span class="op" id="2311533">,</span>&nbsp;<span class="ident" id="2311535">c</span>&nbsp;<span class="op" id="2311537">:=</span>&nbsp;<span class="keyword" id="2311540">range</span>&nbsp;<span class="ident" id="2311546">s</span>&nbsp;<span class="op" id="2311548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311553">if</span>&nbsp;<span class="ident" id="2311556">c</span>&nbsp;<span class="op" id="2311558">==</span>&nbsp;<span class="ident" id="2311561">r</span>&nbsp;<span class="op" id="2311563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311569">return</span>&nbsp;<span class="ident" id="2311576">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311581">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311591">return</span>&nbsp;<span class="op" id="2311598">-</span><span class="num" id="2311599">1</span><br>
<span class="lineno"></span><span class="op" id="2311601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="comment" id="2311604">//&nbsp;IndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="2311682">//&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2311761">func</span>&nbsp;<span class="ident" id="2311766">IndexAny</span><span class="op" id="2311774">(</span><span class="ident" id="2311775">s</span><span class="op" id="2311776">,</span>&nbsp;<span class="ident" id="2311778">chars</span>&nbsp;<span class="builtintype" id="2311784">string</span><span class="op" id="2311790">)</span>&nbsp;<span class="builtintype" id="2311792">int</span>&nbsp;<span class="op" id="2311796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311799">if</span>&nbsp;<span class="builtinfunc" id="2311802">len</span><span class="op" id="2311805">(</span><span class="ident" id="2311806">chars</span><span class="op" id="2311811">)</span>&nbsp;<span class="op" id="2311813">&gt;</span>&nbsp;<span class="num" id="2311815">0</span>&nbsp;<span class="op" id="2311817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311821">for</span>&nbsp;<span class="ident" id="2311825">i</span><span class="op" id="2311826">,</span>&nbsp;<span class="ident" id="2311828">c</span>&nbsp;<span class="op" id="2311830">:=</span>&nbsp;<span class="keyword" id="2311833">range</span>&nbsp;<span class="ident" id="2311839">s</span>&nbsp;<span class="op" id="2311841">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311846">for</span>&nbsp;<span class="ident" id="2311850">_</span><span class="op" id="2311851">,</span>&nbsp;<span class="ident" id="2311853">m</span>&nbsp;<span class="op" id="2311855">:=</span>&nbsp;<span class="keyword" id="2311858">range</span>&nbsp;<span class="ident" id="2311864">chars</span>&nbsp;<span class="op" id="2311870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311876">if</span>&nbsp;<span class="ident" id="2311879">c</span>&nbsp;<span class="op" id="2311881">==</span>&nbsp;<span class="ident" id="2311884">m</span>&nbsp;<span class="op" id="2311886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311893">return</span>&nbsp;<span class="ident" id="2311900">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311911">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311921">return</span>&nbsp;<span class="op" id="2311928">-</span><span class="num" id="2311929">1</span><br>
<span class="lineno"></span><span class="op" id="2311931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="2311934">//&nbsp;LastIndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="2312009">//&nbsp;point&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2312080">//&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2312097">func</span>&nbsp;<span class="ident" id="2312102">LastIndexAny</span><span class="op" id="2312114">(</span><span class="ident" id="2312115">s</span><span class="op" id="2312116">,</span>&nbsp;<span class="ident" id="2312118">chars</span>&nbsp;<span class="builtintype" id="2312124">string</span><span class="op" id="2312130">)</span>&nbsp;<span class="builtintype" id="2312132">int</span>&nbsp;<span class="op" id="2312136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312139">if</span>&nbsp;<span class="builtinfunc" id="2312142">len</span><span class="op" id="2312145">(</span><span class="ident" id="2312146">chars</span><span class="op" id="2312151">)</span>&nbsp;<span class="op" id="2312153">&gt;</span>&nbsp;<span class="num" id="2312155">0</span>&nbsp;<span class="op" id="2312157">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312161">for</span>&nbsp;<span class="ident" id="2312165">i</span>&nbsp;<span class="op" id="2312167">:=</span>&nbsp;<span class="builtinfunc" id="2312170">len</span><span class="op" id="2312173">(</span><span class="ident" id="2312174">s</span><span class="op" id="2312175">)</span><span class="op" id="2312176">;</span>&nbsp;<span class="ident" id="2312178">i</span>&nbsp;<span class="op" id="2312180">&gt;</span>&nbsp;<span class="num" id="2312182">0</span><span class="op" id="2312183">;</span>&nbsp;<span class="op" id="2312185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2312190">rune</span><span class="op" id="2312194">,</span>&nbsp;<span class="ident" id="2312196">size</span>&nbsp;<span class="op" id="2312201">:=</span>&nbsp;<span class="ident" id="2312204">utf8</span><span class="op" id="2312208">.</span><span class="ident" id="2312209">DecodeLastRuneInString</span><span class="op" id="2312231">(</span><span class="ident" id="2312232">s</span><span class="op" id="2312233">[</span><span class="num" id="2312234">0</span><span class="op" id="2312235">:</span><span class="ident" id="2312236">i</span><span class="op" id="2312237">]</span><span class="op" id="2312238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312243">i</span>&nbsp;<span class="op" id="2312245">-=</span>&nbsp;<span class="ident" id="2312248">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312256">for</span>&nbsp;<span class="ident" id="2312260">_</span><span class="op" id="2312261">,</span>&nbsp;<span class="ident" id="2312263">m</span>&nbsp;<span class="op" id="2312265">:=</span>&nbsp;<span class="keyword" id="2312268">range</span>&nbsp;<span class="ident" id="2312274">chars</span>&nbsp;<span class="op" id="2312280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312286">if</span>&nbsp;<span class="builtintype" id="2312289">rune</span>&nbsp;<span class="op" id="2312294">==</span>&nbsp;<span class="ident" id="2312297">m</span>&nbsp;<span class="op" id="2312299">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312306">return</span>&nbsp;<span class="ident" id="2312313">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312331">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312334">return</span>&nbsp;<span class="op" id="2312341">-</span><span class="num" id="2312342">1</span><br>
<span class="lineno"></span><span class="op" id="2312344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2312347">//&nbsp;Generic&nbsp;split:&nbsp;splits&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep,</span><br>
<span class="lineno"></span><span class="comment" id="2312400">//&nbsp;including&nbsp;sepSave&nbsp;bytes&nbsp;of&nbsp;sep&nbsp;in&nbsp;the&nbsp;subarrays.</span><br>
<span class="lineno">275</span><span class="keyword" id="2312452">func</span>&nbsp;<span class="ident" id="2312457">genSplit</span><span class="op" id="2312465">(</span><span class="ident" id="2312466">s</span><span class="op" id="2312467">,</span>&nbsp;<span class="ident" id="2312469">sep</span>&nbsp;<span class="builtintype" id="2312473">string</span><span class="op" id="2312479">,</span>&nbsp;<span class="ident" id="2312481">sepSave</span><span class="op" id="2312488">,</span>&nbsp;<span class="ident" id="2312490">n</span>&nbsp;<span class="builtintype" id="2312492">int</span><span class="op" id="2312495">)</span>&nbsp;<span class="op" id="2312497">[</span><span class="op" id="2312498">]</span><span class="builtintype" id="2312499">string</span>&nbsp;<span class="op" id="2312506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312509">if</span>&nbsp;<span class="ident" id="2312512">n</span>&nbsp;<span class="op" id="2312514">==</span>&nbsp;<span class="num" id="2312517">0</span>&nbsp;<span class="op" id="2312519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312523">return</span>&nbsp;<span class="builtintype" id="2312530">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312538">if</span>&nbsp;<span class="ident" id="2312541">sep</span>&nbsp;<span class="op" id="2312545">==</span>&nbsp;<span class="string" id="2312548">&#34;&#34;</span>&nbsp;<span class="op" id="2312551">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312555">return</span>&nbsp;<span class="ident" id="2312562">explode</span><span class="op" id="2312569">(</span><span class="ident" id="2312570">s</span><span class="op" id="2312571">,</span>&nbsp;<span class="ident" id="2312573">n</span><span class="op" id="2312574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312580">if</span>&nbsp;<span class="ident" id="2312583">n</span>&nbsp;<span class="op" id="2312585">&lt;</span>&nbsp;<span class="num" id="2312587">0</span>&nbsp;<span class="op" id="2312589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312593">n</span>&nbsp;<span class="op" id="2312595">=</span>&nbsp;<span class="ident" id="2312597">Count</span><span class="op" id="2312602">(</span><span class="ident" id="2312603">s</span><span class="op" id="2312604">,</span>&nbsp;<span class="ident" id="2312606">sep</span><span class="op" id="2312609">)</span>&nbsp;<span class="op" id="2312611">+</span>&nbsp;<span class="num" id="2312613">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312616">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312619">c</span>&nbsp;<span class="op" id="2312621">:=</span>&nbsp;<span class="ident" id="2312624">sep</span><span class="op" id="2312627">[</span><span class="num" id="2312628">0</span><span class="op" id="2312629">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312632">start</span>&nbsp;<span class="op" id="2312638">:=</span>&nbsp;<span class="num" id="2312641">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312644">a</span>&nbsp;<span class="op" id="2312646">:=</span>&nbsp;<span class="builtinfunc" id="2312649">make</span><span class="op" id="2312653">(</span><span class="op" id="2312654">[</span><span class="op" id="2312655">]</span><span class="builtintype" id="2312656">string</span><span class="op" id="2312662">,</span>&nbsp;<span class="ident" id="2312664">n</span><span class="op" id="2312665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312668">na</span>&nbsp;<span class="op" id="2312671">:=</span>&nbsp;<span class="num" id="2312674">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312677">for</span>&nbsp;<span class="ident" id="2312681">i</span>&nbsp;<span class="op" id="2312683">:=</span>&nbsp;<span class="num" id="2312686">0</span><span class="op" id="2312687">;</span>&nbsp;<span class="ident" id="2312689">i</span><span class="op" id="2312690">+</span><span class="builtinfunc" id="2312691">len</span><span class="op" id="2312694">(</span><span class="ident" id="2312695">sep</span><span class="op" id="2312698">)</span>&nbsp;<span class="op" id="2312700">&lt;=</span>&nbsp;<span class="builtinfunc" id="2312703">len</span><span class="op" id="2312706">(</span><span class="ident" id="2312707">s</span><span class="op" id="2312708">)</span>&nbsp;<span class="op" id="2312710">&amp;&amp;</span>&nbsp;<span class="ident" id="2312713">na</span><span class="op" id="2312715">+</span><span class="num" id="2312716">1</span>&nbsp;<span class="op" id="2312718">&lt;</span>&nbsp;<span class="ident" id="2312720">n</span><span class="op" id="2312721">;</span>&nbsp;<span class="ident" id="2312723">i</span><span class="op" id="2312724">++</span>&nbsp;<span class="op" id="2312727">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312731">if</span>&nbsp;<span class="ident" id="2312734">s</span><span class="op" id="2312735">[</span><span class="ident" id="2312736">i</span><span class="op" id="2312737">]</span>&nbsp;<span class="op" id="2312739">==</span>&nbsp;<span class="ident" id="2312742">c</span>&nbsp;<span class="op" id="2312744">&amp;&amp;</span>&nbsp;<span class="op" id="2312747">(</span><span class="builtinfunc" id="2312748">len</span><span class="op" id="2312751">(</span><span class="ident" id="2312752">sep</span><span class="op" id="2312755">)</span>&nbsp;<span class="op" id="2312757">==</span>&nbsp;<span class="num" id="2312760">1</span>&nbsp;<span class="op" id="2312762">||</span>&nbsp;<span class="ident" id="2312765">s</span><span class="op" id="2312766">[</span><span class="ident" id="2312767">i</span><span class="op" id="2312768">:</span><span class="ident" id="2312769">i</span><span class="op" id="2312770">+</span><span class="builtinfunc" id="2312771">len</span><span class="op" id="2312774">(</span><span class="ident" id="2312775">sep</span><span class="op" id="2312778">)</span><span class="op" id="2312779">]</span>&nbsp;<span class="op" id="2312781">==</span>&nbsp;<span class="ident" id="2312784">sep</span><span class="op" id="2312787">)</span>&nbsp;<span class="op" id="2312789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312794">a</span><span class="op" id="2312795">[</span><span class="ident" id="2312796">na</span><span class="op" id="2312798">]</span>&nbsp;<span class="op" id="2312800">=</span>&nbsp;<span class="ident" id="2312802">s</span><span class="op" id="2312803">[</span><span class="ident" id="2312804">start</span>&nbsp;<span class="op" id="2312810">:</span>&nbsp;<span class="ident" id="2312812">i</span><span class="op" id="2312813">+</span><span class="ident" id="2312814">sepSave</span><span class="op" id="2312821">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312826">na</span><span class="op" id="2312828">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312834">start</span>&nbsp;<span class="op" id="2312840">=</span>&nbsp;<span class="ident" id="2312842">i</span>&nbsp;<span class="op" id="2312844">+</span>&nbsp;<span class="builtinfunc" id="2312846">len</span><span class="op" id="2312849">(</span><span class="ident" id="2312850">sep</span><span class="op" id="2312853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312858">i</span>&nbsp;<span class="op" id="2312860">+=</span>&nbsp;<span class="builtinfunc" id="2312863">len</span><span class="op" id="2312866">(</span><span class="ident" id="2312867">sep</span><span class="op" id="2312870">)</span>&nbsp;<span class="op" id="2312872">-</span>&nbsp;<span class="num" id="2312874">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312884">a</span><span class="op" id="2312885">[</span><span class="ident" id="2312886">na</span><span class="op" id="2312888">]</span>&nbsp;<span class="op" id="2312890">=</span>&nbsp;<span class="ident" id="2312892">s</span><span class="op" id="2312893">[</span><span class="ident" id="2312894">start</span><span class="op" id="2312899">:</span><span class="op" id="2312900">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312903">return</span>&nbsp;<span class="ident" id="2312910">a</span><span class="op" id="2312911">[</span><span class="num" id="2312912">0</span>&nbsp;<span class="op" id="2312914">:</span>&nbsp;<span class="ident" id="2312916">na</span><span class="op" id="2312918">+</span><span class="num" id="2312919">1</span><span class="op" id="2312920">]</span><br>
<span class="lineno"></span><span class="op" id="2312922">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2312925">//&nbsp;SplitN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2313000">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2313044">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2313105">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">305</span><span class="comment" id="2313165">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2313249">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2313298">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2313325">func</span>&nbsp;<span class="ident" id="2313330">SplitN</span><span class="op" id="2313336">(</span><span class="ident" id="2313337">s</span><span class="op" id="2313338">,</span>&nbsp;<span class="ident" id="2313340">sep</span>&nbsp;<span class="builtintype" id="2313344">string</span><span class="op" id="2313350">,</span>&nbsp;<span class="ident" id="2313352">n</span>&nbsp;<span class="builtintype" id="2313354">int</span><span class="op" id="2313357">)</span>&nbsp;<span class="op" id="2313359">[</span><span class="op" id="2313360">]</span><span class="builtintype" id="2313361">string</span>&nbsp;<span class="op" id="2313368">{</span>&nbsp;<span class="keyword" id="2313370">return</span>&nbsp;<span class="ident" id="2313377">genSplit</span><span class="op" id="2313385">(</span><span class="ident" id="2313386">s</span><span class="op" id="2313387">,</span>&nbsp;<span class="ident" id="2313389">sep</span><span class="op" id="2313392">,</span>&nbsp;<span class="num" id="2313394">0</span><span class="op" id="2313395">,</span>&nbsp;<span class="ident" id="2313397">n</span><span class="op" id="2313398">)</span>&nbsp;<span class="op" id="2313400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2313403">//&nbsp;SplitAfterN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2313474">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2313514">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfterN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2313580">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno"></span><span class="comment" id="2313640">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno">315</span><span class="comment" id="2313724">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2313773">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2313800">func</span>&nbsp;<span class="ident" id="2313805">SplitAfterN</span><span class="op" id="2313816">(</span><span class="ident" id="2313817">s</span><span class="op" id="2313818">,</span>&nbsp;<span class="ident" id="2313820">sep</span>&nbsp;<span class="builtintype" id="2313824">string</span><span class="op" id="2313830">,</span>&nbsp;<span class="ident" id="2313832">n</span>&nbsp;<span class="builtintype" id="2313834">int</span><span class="op" id="2313837">)</span>&nbsp;<span class="op" id="2313839">[</span><span class="op" id="2313840">]</span><span class="builtintype" id="2313841">string</span>&nbsp;<span class="op" id="2313848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313851">return</span>&nbsp;<span class="ident" id="2313858">genSplit</span><span class="op" id="2313866">(</span><span class="ident" id="2313867">s</span><span class="op" id="2313868">,</span>&nbsp;<span class="ident" id="2313870">sep</span><span class="op" id="2313873">,</span>&nbsp;<span class="builtinfunc" id="2313875">len</span><span class="op" id="2313878">(</span><span class="ident" id="2313879">sep</span><span class="op" id="2313882">)</span><span class="op" id="2313883">,</span>&nbsp;<span class="ident" id="2313885">n</span><span class="op" id="2313886">)</span><br>
<span class="lineno"></span><span class="op" id="2313888">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="2313891">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2313969">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2314013">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;Split&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2314073">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno">325</span><span class="keyword" id="2314123">func</span>&nbsp;<span class="ident" id="2314128">Split</span><span class="op" id="2314133">(</span><span class="ident" id="2314134">s</span><span class="op" id="2314135">,</span>&nbsp;<span class="ident" id="2314137">sep</span>&nbsp;<span class="builtintype" id="2314141">string</span><span class="op" id="2314147">)</span>&nbsp;<span class="op" id="2314149">[</span><span class="op" id="2314150">]</span><span class="builtintype" id="2314151">string</span>&nbsp;<span class="op" id="2314158">{</span>&nbsp;<span class="keyword" id="2314160">return</span>&nbsp;<span class="ident" id="2314167">genSplit</span><span class="op" id="2314175">(</span><span class="ident" id="2314176">s</span><span class="op" id="2314177">,</span>&nbsp;<span class="ident" id="2314179">sep</span><span class="op" id="2314182">,</span>&nbsp;<span class="num" id="2314184">0</span><span class="op" id="2314185">,</span>&nbsp;<span class="op" id="2314187">-</span><span class="num" id="2314188">1</span><span class="op" id="2314189">)</span>&nbsp;<span class="op" id="2314191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2314194">//&nbsp;SplitAfter&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2314268">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2314308">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfter&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno">330</span><span class="comment" id="2314373">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitAfterN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="2314428">func</span>&nbsp;<span class="ident" id="2314433">SplitAfter</span><span class="op" id="2314443">(</span><span class="ident" id="2314444">s</span><span class="op" id="2314445">,</span>&nbsp;<span class="ident" id="2314447">sep</span>&nbsp;<span class="builtintype" id="2314451">string</span><span class="op" id="2314457">)</span>&nbsp;<span class="op" id="2314459">[</span><span class="op" id="2314460">]</span><span class="builtintype" id="2314461">string</span>&nbsp;<span class="op" id="2314468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314471">return</span>&nbsp;<span class="ident" id="2314478">genSplit</span><span class="op" id="2314486">(</span><span class="ident" id="2314487">s</span><span class="op" id="2314488">,</span>&nbsp;<span class="ident" id="2314490">sep</span><span class="op" id="2314493">,</span>&nbsp;<span class="builtinfunc" id="2314495">len</span><span class="op" id="2314498">(</span><span class="ident" id="2314499">sep</span><span class="op" id="2314502">)</span><span class="op" id="2314503">,</span>&nbsp;<span class="op" id="2314505">-</span><span class="num" id="2314506">1</span><span class="op" id="2314507">)</span><br>
<span class="lineno"></span><span class="op" id="2314509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="2314512">//&nbsp;Fields&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="2314602">//&nbsp;characters,&nbsp;as&nbsp;defined&nbsp;by&nbsp;unicode.IsSpace,&nbsp;returning&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="2314692">//&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2314738">func</span>&nbsp;<span class="ident" id="2314743">Fields</span><span class="op" id="2314749">(</span><span class="ident" id="2314750">s</span>&nbsp;<span class="builtintype" id="2314752">string</span><span class="op" id="2314758">)</span>&nbsp;<span class="op" id="2314760">[</span><span class="op" id="2314761">]</span><span class="builtintype" id="2314762">string</span>&nbsp;<span class="op" id="2314769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314772">return</span>&nbsp;<span class="ident" id="2314779">FieldsFunc</span><span class="op" id="2314789">(</span><span class="ident" id="2314790">s</span><span class="op" id="2314791">,</span>&nbsp;<span class="ident" id="2314793">unicode</span><span class="op" id="2314800">.</span><span class="ident" id="2314801">IsSpace</span><span class="op" id="2314808">)</span><br>
<span class="lineno">340</span><span class="op" id="2314810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2314813">//&nbsp;FieldsFunc&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;at&nbsp;each&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)</span><br>
<span class="lineno"></span><span class="comment" id="2314900">//&nbsp;and&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;slices&nbsp;of&nbsp;s.&nbsp;If&nbsp;all&nbsp;code&nbsp;points&nbsp;in&nbsp;s&nbsp;satisfy&nbsp;f(c)&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2314984">//&nbsp;string&nbsp;is&nbsp;empty,&nbsp;an&nbsp;empty&nbsp;slice&nbsp;is&nbsp;returned.</span><br>
<span class="lineno">345</span><span class="comment" id="2315032">//&nbsp;FieldsFunc&nbsp;makes&nbsp;no&nbsp;guarantees&nbsp;about&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;it&nbsp;calls&nbsp;f(c).</span><br>
<span class="lineno"></span><span class="comment" id="2315106">//&nbsp;If&nbsp;f&nbsp;does&nbsp;not&nbsp;return&nbsp;consistent&nbsp;results&nbsp;for&nbsp;a&nbsp;given&nbsp;c,&nbsp;FieldsFunc&nbsp;may&nbsp;crash.</span><br>
<span class="lineno"></span><span class="keyword" id="2315186">func</span>&nbsp;<span class="ident" id="2315191">FieldsFunc</span><span class="op" id="2315201">(</span><span class="ident" id="2315202">s</span>&nbsp;<span class="builtintype" id="2315204">string</span><span class="op" id="2315210">,</span>&nbsp;<span class="ident" id="2315212">f</span>&nbsp;<span class="keyword" id="2315214">func</span><span class="op" id="2315218">(</span><span class="builtintype" id="2315219">rune</span><span class="op" id="2315223">)</span>&nbsp;<span class="builtintype" id="2315225">bool</span><span class="op" id="2315229">)</span>&nbsp;<span class="op" id="2315231">[</span><span class="op" id="2315232">]</span><span class="builtintype" id="2315233">string</span>&nbsp;<span class="op" id="2315240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2315243">//&nbsp;First&nbsp;count&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315271">n</span>&nbsp;<span class="op" id="2315273">:=</span>&nbsp;<span class="num" id="2315276">0</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315279">inField</span>&nbsp;<span class="op" id="2315287">:=</span>&nbsp;<span class="builtintype" id="2315290">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315297">for</span>&nbsp;<span class="ident" id="2315301">_</span><span class="op" id="2315302">,</span>&nbsp;<span class="builtintype" id="2315304">rune</span>&nbsp;<span class="op" id="2315309">:=</span>&nbsp;<span class="keyword" id="2315312">range</span>&nbsp;<span class="ident" id="2315318">s</span>&nbsp;<span class="op" id="2315320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315324">wasInField</span>&nbsp;<span class="op" id="2315335">:=</span>&nbsp;<span class="ident" id="2315338">inField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315348">inField</span>&nbsp;<span class="op" id="2315356">=</span>&nbsp;<span class="op" id="2315358">!</span><span class="ident" id="2315359">f</span><span class="op" id="2315360">(</span><span class="builtintype" id="2315361">rune</span><span class="op" id="2315365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315369">if</span>&nbsp;<span class="ident" id="2315372">inField</span>&nbsp;<span class="op" id="2315380">&amp;&amp;</span>&nbsp;<span class="op" id="2315383">!</span><span class="ident" id="2315384">wasInField</span>&nbsp;<span class="op" id="2315395">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315400">n</span><span class="op" id="2315401">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2315413">//&nbsp;Now&nbsp;create&nbsp;them.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315434">a</span>&nbsp;<span class="op" id="2315436">:=</span>&nbsp;<span class="builtinfunc" id="2315439">make</span><span class="op" id="2315443">(</span><span class="op" id="2315444">[</span><span class="op" id="2315445">]</span><span class="builtintype" id="2315446">string</span><span class="op" id="2315452">,</span>&nbsp;<span class="ident" id="2315454">n</span><span class="op" id="2315455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315458">na</span>&nbsp;<span class="op" id="2315461">:=</span>&nbsp;<span class="num" id="2315464">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315467">fieldStart</span>&nbsp;<span class="op" id="2315478">:=</span>&nbsp;<span class="op" id="2315481">-</span><span class="num" id="2315482">1</span>&nbsp;<span class="comment" id="2315484">//&nbsp;Set&nbsp;to&nbsp;-1&nbsp;when&nbsp;looking&nbsp;for&nbsp;start&nbsp;of&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315531">for</span>&nbsp;<span class="ident" id="2315535">i</span><span class="op" id="2315536">,</span>&nbsp;<span class="builtintype" id="2315538">rune</span>&nbsp;<span class="op" id="2315543">:=</span>&nbsp;<span class="keyword" id="2315546">range</span>&nbsp;<span class="ident" id="2315552">s</span>&nbsp;<span class="op" id="2315554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315558">if</span>&nbsp;<span class="ident" id="2315561">f</span><span class="op" id="2315562">(</span><span class="builtintype" id="2315563">rune</span><span class="op" id="2315567">)</span>&nbsp;<span class="op" id="2315569">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315574">if</span>&nbsp;<span class="ident" id="2315577">fieldStart</span>&nbsp;<span class="op" id="2315588">&gt;=</span>&nbsp;<span class="num" id="2315591">0</span>&nbsp;<span class="op" id="2315593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315599">a</span><span class="op" id="2315600">[</span><span class="ident" id="2315601">na</span><span class="op" id="2315603">]</span>&nbsp;<span class="op" id="2315605">=</span>&nbsp;<span class="ident" id="2315607">s</span><span class="op" id="2315608">[</span><span class="ident" id="2315609">fieldStart</span><span class="op" id="2315619">:</span><span class="ident" id="2315620">i</span><span class="op" id="2315621">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315627">na</span><span class="op" id="2315629">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315636">fieldStart</span>&nbsp;<span class="op" id="2315647">=</span>&nbsp;<span class="op" id="2315649">-</span><span class="num" id="2315650">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315655">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315659">}</span>&nbsp;<span class="keyword" id="2315661">else</span>&nbsp;<span class="keyword" id="2315666">if</span>&nbsp;<span class="ident" id="2315669">fieldStart</span>&nbsp;<span class="op" id="2315680">==</span>&nbsp;<span class="op" id="2315683">-</span><span class="num" id="2315684">1</span>&nbsp;<span class="op" id="2315686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315691">fieldStart</span>&nbsp;<span class="op" id="2315702">=</span>&nbsp;<span class="ident" id="2315704">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315714">if</span>&nbsp;<span class="ident" id="2315717">fieldStart</span>&nbsp;<span class="op" id="2315728">&gt;=</span>&nbsp;<span class="num" id="2315731">0</span>&nbsp;<span class="op" id="2315733">{</span>&nbsp;<span class="comment" id="2315735">//&nbsp;Last&nbsp;field&nbsp;might&nbsp;end&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2315769">a</span><span class="op" id="2315770">[</span><span class="ident" id="2315771">na</span><span class="op" id="2315773">]</span>&nbsp;<span class="op" id="2315775">=</span>&nbsp;<span class="ident" id="2315777">s</span><span class="op" id="2315778">[</span><span class="ident" id="2315779">fieldStart</span><span class="op" id="2315789">:</span><span class="op" id="2315790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2315796">return</span>&nbsp;<span class="ident" id="2315803">a</span><br>
<span class="lineno"></span><span class="op" id="2315805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="comment" id="2315808">//&nbsp;Join&nbsp;concatenates&nbsp;the&nbsp;elements&nbsp;of&nbsp;a&nbsp;to&nbsp;create&nbsp;a&nbsp;single&nbsp;string.&nbsp;&nbsp;&nbsp;The&nbsp;separator&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2315897">//&nbsp;sep&nbsp;is&nbsp;placed&nbsp;between&nbsp;elements&nbsp;in&nbsp;the&nbsp;resulting&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2315956">func</span>&nbsp;<span class="ident" id="2315961">Join</span><span class="op" id="2315965">(</span><span class="ident" id="2315966">a</span>&nbsp;<span class="op" id="2315968">[</span><span class="op" id="2315969">]</span><span class="builtintype" id="2315970">string</span><span class="op" id="2315976">,</span>&nbsp;<span class="ident" id="2315978">sep</span>&nbsp;<span class="builtintype" id="2315982">string</span><span class="op" id="2315988">)</span>&nbsp;<span class="builtintype" id="2315990">string</span>&nbsp;<span class="op" id="2315997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316000">if</span>&nbsp;<span class="builtinfunc" id="2316003">len</span><span class="op" id="2316006">(</span><span class="ident" id="2316007">a</span><span class="op" id="2316008">)</span>&nbsp;<span class="op" id="2316010">==</span>&nbsp;<span class="num" id="2316013">0</span>&nbsp;<span class="op" id="2316015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316019">return</span>&nbsp;<span class="string" id="2316026">&#34;&#34;</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316033">if</span>&nbsp;<span class="builtinfunc" id="2316036">len</span><span class="op" id="2316039">(</span><span class="ident" id="2316040">a</span><span class="op" id="2316041">)</span>&nbsp;<span class="op" id="2316043">==</span>&nbsp;<span class="num" id="2316046">1</span>&nbsp;<span class="op" id="2316048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316052">return</span>&nbsp;<span class="ident" id="2316059">a</span><span class="op" id="2316060">[</span><span class="num" id="2316061">0</span><span class="op" id="2316062">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316068">n</span>&nbsp;<span class="op" id="2316070">:=</span>&nbsp;<span class="builtinfunc" id="2316073">len</span><span class="op" id="2316076">(</span><span class="ident" id="2316077">sep</span><span class="op" id="2316080">)</span>&nbsp;<span class="op" id="2316082">*</span>&nbsp;<span class="op" id="2316084">(</span><span class="builtinfunc" id="2316085">len</span><span class="op" id="2316088">(</span><span class="ident" id="2316089">a</span><span class="op" id="2316090">)</span>&nbsp;<span class="op" id="2316092">-</span>&nbsp;<span class="num" id="2316094">1</span><span class="op" id="2316095">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316098">for</span>&nbsp;<span class="ident" id="2316102">i</span>&nbsp;<span class="op" id="2316104">:=</span>&nbsp;<span class="num" id="2316107">0</span><span class="op" id="2316108">;</span>&nbsp;<span class="ident" id="2316110">i</span>&nbsp;<span class="op" id="2316112">&lt;</span>&nbsp;<span class="builtinfunc" id="2316114">len</span><span class="op" id="2316117">(</span><span class="ident" id="2316118">a</span><span class="op" id="2316119">)</span><span class="op" id="2316120">;</span>&nbsp;<span class="ident" id="2316122">i</span><span class="op" id="2316123">++</span>&nbsp;<span class="op" id="2316126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316130">n</span>&nbsp;<span class="op" id="2316132">+=</span>&nbsp;<span class="builtinfunc" id="2316135">len</span><span class="op" id="2316138">(</span><span class="ident" id="2316139">a</span><span class="op" id="2316140">[</span><span class="ident" id="2316141">i</span><span class="op" id="2316142">]</span><span class="op" id="2316143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316150">b</span>&nbsp;<span class="op" id="2316152">:=</span>&nbsp;<span class="builtinfunc" id="2316155">make</span><span class="op" id="2316159">(</span><span class="op" id="2316160">[</span><span class="op" id="2316161">]</span><span class="builtintype" id="2316162">byte</span><span class="op" id="2316166">,</span>&nbsp;<span class="ident" id="2316168">n</span><span class="op" id="2316169">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316172">bp</span>&nbsp;<span class="op" id="2316175">:=</span>&nbsp;<span class="builtinfunc" id="2316178">copy</span><span class="op" id="2316182">(</span><span class="ident" id="2316183">b</span><span class="op" id="2316184">,</span>&nbsp;<span class="ident" id="2316186">a</span><span class="op" id="2316187">[</span><span class="num" id="2316188">0</span><span class="op" id="2316189">]</span><span class="op" id="2316190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316193">for</span>&nbsp;<span class="ident" id="2316197">_</span><span class="op" id="2316198">,</span>&nbsp;<span class="ident" id="2316200">s</span>&nbsp;<span class="op" id="2316202">:=</span>&nbsp;<span class="keyword" id="2316205">range</span>&nbsp;<span class="ident" id="2316211">a</span><span class="op" id="2316212">[</span><span class="num" id="2316213">1</span><span class="op" id="2316214">:</span><span class="op" id="2316215">]</span>&nbsp;<span class="op" id="2316217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316221">bp</span>&nbsp;<span class="op" id="2316224">+=</span>&nbsp;<span class="builtinfunc" id="2316227">copy</span><span class="op" id="2316231">(</span><span class="ident" id="2316232">b</span><span class="op" id="2316233">[</span><span class="ident" id="2316234">bp</span><span class="op" id="2316236">:</span><span class="op" id="2316237">]</span><span class="op" id="2316238">,</span>&nbsp;<span class="ident" id="2316240">sep</span><span class="op" id="2316243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2316247">bp</span>&nbsp;<span class="op" id="2316250">+=</span>&nbsp;<span class="builtinfunc" id="2316253">copy</span><span class="op" id="2316257">(</span><span class="ident" id="2316258">b</span><span class="op" id="2316259">[</span><span class="ident" id="2316260">bp</span><span class="op" id="2316262">:</span><span class="op" id="2316263">]</span><span class="op" id="2316264">,</span>&nbsp;<span class="ident" id="2316266">s</span><span class="op" id="2316267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316270">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316273">return</span>&nbsp;<span class="builtintype" id="2316280">string</span><span class="op" id="2316286">(</span><span class="ident" id="2316287">b</span><span class="op" id="2316288">)</span><br>
<span class="lineno"></span><span class="op" id="2316290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316293">//&nbsp;HasPrefix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;begins&nbsp;with&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="2316353">func</span>&nbsp;<span class="ident" id="2316358">HasPrefix</span><span class="op" id="2316367">(</span><span class="ident" id="2316368">s</span><span class="op" id="2316369">,</span>&nbsp;<span class="ident" id="2316371">prefix</span>&nbsp;<span class="builtintype" id="2316378">string</span><span class="op" id="2316384">)</span>&nbsp;<span class="builtintype" id="2316386">bool</span>&nbsp;<span class="op" id="2316391">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316394">return</span>&nbsp;<span class="builtinfunc" id="2316401">len</span><span class="op" id="2316404">(</span><span class="ident" id="2316405">s</span><span class="op" id="2316406">)</span>&nbsp;<span class="op" id="2316408">&gt;=</span>&nbsp;<span class="builtinfunc" id="2316411">len</span><span class="op" id="2316414">(</span><span class="ident" id="2316415">prefix</span><span class="op" id="2316421">)</span>&nbsp;<span class="op" id="2316423">&amp;&amp;</span>&nbsp;<span class="ident" id="2316426">s</span><span class="op" id="2316427">[</span><span class="num" id="2316428">0</span><span class="op" id="2316429">:</span><span class="builtinfunc" id="2316430">len</span><span class="op" id="2316433">(</span><span class="ident" id="2316434">prefix</span><span class="op" id="2316440">)</span><span class="op" id="2316441">]</span>&nbsp;<span class="op" id="2316443">==</span>&nbsp;<span class="ident" id="2316446">prefix</span><br>
<span class="lineno"></span><span class="op" id="2316453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316456">//&nbsp;HasSuffix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;ends&nbsp;with&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="2316514">func</span>&nbsp;<span class="ident" id="2316519">HasSuffix</span><span class="op" id="2316528">(</span><span class="ident" id="2316529">s</span><span class="op" id="2316530">,</span>&nbsp;<span class="ident" id="2316532">suffix</span>&nbsp;<span class="builtintype" id="2316539">string</span><span class="op" id="2316545">)</span>&nbsp;<span class="builtintype" id="2316547">bool</span>&nbsp;<span class="op" id="2316552">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2316555">return</span>&nbsp;<span class="builtinfunc" id="2316562">len</span><span class="op" id="2316565">(</span><span class="ident" id="2316566">s</span><span class="op" id="2316567">)</span>&nbsp;<span class="op" id="2316569">&gt;=</span>&nbsp;<span class="builtinfunc" id="2316572">len</span><span class="op" id="2316575">(</span><span class="ident" id="2316576">suffix</span><span class="op" id="2316582">)</span>&nbsp;<span class="op" id="2316584">&amp;&amp;</span>&nbsp;<span class="ident" id="2316587">s</span><span class="op" id="2316588">[</span><span class="builtinfunc" id="2316589">len</span><span class="op" id="2316592">(</span><span class="ident" id="2316593">s</span><span class="op" id="2316594">)</span><span class="op" id="2316595">-</span><span class="builtinfunc" id="2316596">len</span><span class="op" id="2316599">(</span><span class="ident" id="2316600">suffix</span><span class="op" id="2316606">)</span><span class="op" id="2316607">:</span><span class="op" id="2316608">]</span>&nbsp;<span class="op" id="2316610">==</span>&nbsp;<span class="ident" id="2316613">suffix</span><br>
<span class="lineno"></span><span class="op" id="2316620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316623">//&nbsp;Map&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;its&nbsp;characters&nbsp;modified</span><br>
<span class="lineno"></span><span class="comment" id="2316694">//&nbsp;according&nbsp;to&nbsp;the&nbsp;mapping&nbsp;function.&nbsp;If&nbsp;mapping&nbsp;returns&nbsp;a&nbsp;negative&nbsp;value,&nbsp;the&nbsp;character&nbsp;is</span><br>
<span class="lineno">415</span><span class="comment" id="2316786">//&nbsp;dropped&nbsp;from&nbsp;the&nbsp;string&nbsp;with&nbsp;no&nbsp;replacement.</span><br>
<span class="lineno"></span><span class="keyword" id="2316834">func</span>&nbsp;<span class="ident" id="2316839">Map</span><span class="op" id="2316842">(</span><span class="ident" id="2316843">mapping</span>&nbsp;<span class="keyword" id="2316851">func</span><span class="op" id="2316855">(</span><span class="builtintype" id="2316856">rune</span><span class="op" id="2316860">)</span>&nbsp;<span class="builtintype" id="2316862">rune</span><span class="op" id="2316866">,</span>&nbsp;<span class="ident" id="2316868">s</span>&nbsp;<span class="builtintype" id="2316870">string</span><span class="op" id="2316876">)</span>&nbsp;<span class="builtintype" id="2316878">string</span>&nbsp;<span class="op" id="2316885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2316888">//&nbsp;In&nbsp;the&nbsp;worst&nbsp;case,&nbsp;the&nbsp;string&nbsp;can&nbsp;grow&nbsp;when&nbsp;mapped,&nbsp;making</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2316951">//&nbsp;things&nbsp;unpleasant.&nbsp;&nbsp;But&nbsp;it&#39;s&nbsp;so&nbsp;rare&nbsp;we&nbsp;barge&nbsp;in&nbsp;assuming&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2317018">//&nbsp;fine.&nbsp;&nbsp;It&nbsp;could&nbsp;also&nbsp;shrink&nbsp;but&nbsp;that&nbsp;falls&nbsp;out&nbsp;naturally.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317080">maxbytes</span>&nbsp;<span class="op" id="2317089">:=</span>&nbsp;<span class="builtinfunc" id="2317092">len</span><span class="op" id="2317095">(</span><span class="ident" id="2317096">s</span><span class="op" id="2317097">)</span>&nbsp;<span class="comment" id="2317099">//&nbsp;length&nbsp;of&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317115">nbytes</span>&nbsp;<span class="op" id="2317122">:=</span>&nbsp;<span class="num" id="2317125">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2317134">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;encoded&nbsp;in&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2317167">//&nbsp;The&nbsp;output&nbsp;buffer&nbsp;b&nbsp;is&nbsp;initialized&nbsp;on&nbsp;demand,&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2317227">//&nbsp;time&nbsp;a&nbsp;character&nbsp;differs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317257">var</span>&nbsp;<span class="ident" id="2317261">b</span>&nbsp;<span class="op" id="2317263">[</span><span class="op" id="2317264">]</span><span class="builtintype" id="2317265">byte</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317272">for</span>&nbsp;<span class="ident" id="2317276">i</span><span class="op" id="2317277">,</span>&nbsp;<span class="ident" id="2317279">c</span>&nbsp;<span class="op" id="2317281">:=</span>&nbsp;<span class="keyword" id="2317284">range</span>&nbsp;<span class="ident" id="2317290">s</span>&nbsp;<span class="op" id="2317292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317296">r</span>&nbsp;<span class="op" id="2317298">:=</span>&nbsp;<span class="ident" id="2317301">mapping</span><span class="op" id="2317308">(</span><span class="ident" id="2317309">c</span><span class="op" id="2317310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317314">if</span>&nbsp;<span class="ident" id="2317317">b</span>&nbsp;<span class="op" id="2317319">==</span>&nbsp;<span class="builtintype" id="2317322">nil</span>&nbsp;<span class="op" id="2317326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317331">if</span>&nbsp;<span class="ident" id="2317334">r</span>&nbsp;<span class="op" id="2317336">==</span>&nbsp;<span class="ident" id="2317339">c</span>&nbsp;<span class="op" id="2317341">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317347">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317364">b</span>&nbsp;<span class="op" id="2317366">=</span>&nbsp;<span class="builtinfunc" id="2317368">make</span><span class="op" id="2317372">(</span><span class="op" id="2317373">[</span><span class="op" id="2317374">]</span><span class="builtintype" id="2317375">byte</span><span class="op" id="2317379">,</span>&nbsp;<span class="ident" id="2317381">maxbytes</span><span class="op" id="2317389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317394">nbytes</span>&nbsp;<span class="op" id="2317401">=</span>&nbsp;<span class="builtinfunc" id="2317403">copy</span><span class="op" id="2317407">(</span><span class="ident" id="2317408">b</span><span class="op" id="2317409">,</span>&nbsp;<span class="ident" id="2317411">s</span><span class="op" id="2317412">[</span><span class="op" id="2317413">:</span><span class="ident" id="2317414">i</span><span class="op" id="2317415">]</span><span class="op" id="2317416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317420">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317424">if</span>&nbsp;<span class="ident" id="2317427">r</span>&nbsp;<span class="op" id="2317429">&gt;=</span>&nbsp;<span class="num" id="2317432">0</span>&nbsp;<span class="op" id="2317434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317439">wid</span>&nbsp;<span class="op" id="2317443">:=</span>&nbsp;<span class="num" id="2317446">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317451">if</span>&nbsp;<span class="ident" id="2317454">r</span>&nbsp;<span class="op" id="2317456">&gt;=</span>&nbsp;<span class="ident" id="2317459">utf8</span><span class="op" id="2317463">.</span><span class="ident" id="2317464">RuneSelf</span>&nbsp;<span class="op" id="2317473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317479">wid</span>&nbsp;<span class="op" id="2317483">=</span>&nbsp;<span class="ident" id="2317485">utf8</span><span class="op" id="2317489">.</span><span class="ident" id="2317490">RuneLen</span><span class="op" id="2317497">(</span><span class="ident" id="2317498">r</span><span class="op" id="2317499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317504">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317509">if</span>&nbsp;<span class="ident" id="2317512">nbytes</span><span class="op" id="2317518">+</span><span class="ident" id="2317519">wid</span>&nbsp;<span class="op" id="2317523">&gt;</span>&nbsp;<span class="ident" id="2317525">maxbytes</span>&nbsp;<span class="op" id="2317534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2317540">//&nbsp;Grow&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317564">maxbytes</span>&nbsp;<span class="op" id="2317573">=</span>&nbsp;<span class="ident" id="2317575">maxbytes</span><span class="op" id="2317583">*</span><span class="num" id="2317584">2</span>&nbsp;<span class="op" id="2317586">+</span>&nbsp;<span class="ident" id="2317588">utf8</span><span class="op" id="2317592">.</span><span class="ident" id="2317593">UTFMax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317604">nb</span>&nbsp;<span class="op" id="2317607">:=</span>&nbsp;<span class="builtinfunc" id="2317610">make</span><span class="op" id="2317614">(</span><span class="op" id="2317615">[</span><span class="op" id="2317616">]</span><span class="builtintype" id="2317617">byte</span><span class="op" id="2317621">,</span>&nbsp;<span class="ident" id="2317623">maxbytes</span><span class="op" id="2317631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2317637">copy</span><span class="op" id="2317641">(</span><span class="ident" id="2317642">nb</span><span class="op" id="2317644">,</span>&nbsp;<span class="ident" id="2317646">b</span><span class="op" id="2317647">[</span><span class="num" id="2317648">0</span><span class="op" id="2317649">:</span><span class="ident" id="2317650">nbytes</span><span class="op" id="2317656">]</span><span class="op" id="2317657">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317663">b</span>&nbsp;<span class="op" id="2317665">=</span>&nbsp;<span class="ident" id="2317667">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317678">nbytes</span>&nbsp;<span class="op" id="2317685">+=</span>&nbsp;<span class="ident" id="2317688">utf8</span><span class="op" id="2317692">.</span><span class="ident" id="2317693">EncodeRune</span><span class="op" id="2317703">(</span><span class="ident" id="2317704">b</span><span class="op" id="2317705">[</span><span class="ident" id="2317706">nbytes</span><span class="op" id="2317712">:</span><span class="ident" id="2317713">maxbytes</span><span class="op" id="2317721">]</span><span class="op" id="2317722">,</span>&nbsp;<span class="ident" id="2317724">r</span><span class="op" id="2317725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317732">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317735">if</span>&nbsp;<span class="ident" id="2317738">b</span>&nbsp;<span class="op" id="2317740">==</span>&nbsp;<span class="builtintype" id="2317743">nil</span>&nbsp;<span class="op" id="2317747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317751">return</span>&nbsp;<span class="ident" id="2317758">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2317761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317764">return</span>&nbsp;<span class="builtintype" id="2317771">string</span><span class="op" id="2317777">(</span><span class="ident" id="2317778">b</span><span class="op" id="2317779">[</span><span class="num" id="2317780">0</span><span class="op" id="2317781">:</span><span class="ident" id="2317782">nbytes</span><span class="op" id="2317788">]</span><span class="op" id="2317789">)</span><br>
<span class="lineno"></span><span class="op" id="2317791">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="2317794">//&nbsp;Repeat&nbsp;returns&nbsp;a&nbsp;new&nbsp;string&nbsp;consisting&nbsp;of&nbsp;count&nbsp;copies&nbsp;of&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2317869">func</span>&nbsp;<span class="ident" id="2317874">Repeat</span><span class="op" id="2317880">(</span><span class="ident" id="2317881">s</span>&nbsp;<span class="builtintype" id="2317883">string</span><span class="op" id="2317889">,</span>&nbsp;<span class="ident" id="2317891">count</span>&nbsp;<span class="builtintype" id="2317897">int</span><span class="op" id="2317900">)</span>&nbsp;<span class="builtintype" id="2317902">string</span>&nbsp;<span class="op" id="2317909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317912">b</span>&nbsp;<span class="op" id="2317914">:=</span>&nbsp;<span class="builtinfunc" id="2317917">make</span><span class="op" id="2317921">(</span><span class="op" id="2317922">[</span><span class="op" id="2317923">]</span><span class="builtintype" id="2317924">byte</span><span class="op" id="2317928">,</span>&nbsp;<span class="builtinfunc" id="2317930">len</span><span class="op" id="2317933">(</span><span class="ident" id="2317934">s</span><span class="op" id="2317935">)</span><span class="op" id="2317936">*</span><span class="ident" id="2317937">count</span><span class="op" id="2317942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2317945">bp</span>&nbsp;<span class="op" id="2317948">:=</span>&nbsp;<span class="builtinfunc" id="2317951">copy</span><span class="op" id="2317955">(</span><span class="ident" id="2317956">b</span><span class="op" id="2317957">,</span>&nbsp;<span class="ident" id="2317959">s</span><span class="op" id="2317960">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2317963">for</span>&nbsp;<span class="ident" id="2317967">bp</span>&nbsp;<span class="op" id="2317970">&lt;</span>&nbsp;<span class="builtinfunc" id="2317972">len</span><span class="op" id="2317975">(</span><span class="ident" id="2317976">b</span><span class="op" id="2317977">)</span>&nbsp;<span class="op" id="2317979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2317983">copy</span><span class="op" id="2317987">(</span><span class="ident" id="2317988">b</span><span class="op" id="2317989">[</span><span class="ident" id="2317990">bp</span><span class="op" id="2317992">:</span><span class="op" id="2317993">]</span><span class="op" id="2317994">,</span>&nbsp;<span class="ident" id="2317996">b</span><span class="op" id="2317997">[</span><span class="op" id="2317998">:</span><span class="ident" id="2317999">bp</span><span class="op" id="2318001">]</span><span class="op" id="2318002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2318006">bp</span>&nbsp;<span class="op" id="2318009">*=</span>&nbsp;<span class="num" id="2318012">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2318015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2318018">return</span>&nbsp;<span class="builtintype" id="2318025">string</span><span class="op" id="2318031">(</span><span class="ident" id="2318032">b</span><span class="op" id="2318033">)</span><br>
<span class="lineno">465</span><span class="op" id="2318035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2318038">//&nbsp;ToUpper&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;upper&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2318133">func</span>&nbsp;<span class="ident" id="2318138">ToUpper</span><span class="op" id="2318145">(</span><span class="ident" id="2318146">s</span>&nbsp;<span class="builtintype" id="2318148">string</span><span class="op" id="2318154">)</span>&nbsp;<span class="builtintype" id="2318156">string</span>&nbsp;<span class="op" id="2318163">{</span>&nbsp;<span class="keyword" id="2318165">return</span>&nbsp;<span class="ident" id="2318172">Map</span><span class="op" id="2318175">(</span><span class="ident" id="2318176">unicode</span><span class="op" id="2318183">.</span><span class="ident" id="2318184">ToUpper</span><span class="op" id="2318191">,</span>&nbsp;<span class="ident" id="2318193">s</span><span class="op" id="2318194">)</span>&nbsp;<span class="op" id="2318196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span><span class="comment" id="2318199">//&nbsp;ToLower&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2318294">func</span>&nbsp;<span class="ident" id="2318299">ToLower</span><span class="op" id="2318306">(</span><span class="ident" id="2318307">s</span>&nbsp;<span class="builtintype" id="2318309">string</span><span class="op" id="2318315">)</span>&nbsp;<span class="builtintype" id="2318317">string</span>&nbsp;<span class="op" id="2318324">{</span>&nbsp;<span class="keyword" id="2318326">return</span>&nbsp;<span class="ident" id="2318333">Map</span><span class="op" id="2318336">(</span><span class="ident" id="2318337">unicode</span><span class="op" id="2318344">.</span><span class="ident" id="2318345">ToLower</span><span class="op" id="2318352">,</span>&nbsp;<span class="ident" id="2318354">s</span><span class="op" id="2318355">)</span>&nbsp;<span class="op" id="2318357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2318360">//&nbsp;ToTitle&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2318455">func</span>&nbsp;<span class="ident" id="2318460">ToTitle</span><span class="op" id="2318467">(</span><span class="ident" id="2318468">s</span>&nbsp;<span class="builtintype" id="2318470">string</span><span class="op" id="2318476">)</span>&nbsp;<span class="builtintype" id="2318478">string</span>&nbsp;<span class="op" id="2318485">{</span>&nbsp;<span class="keyword" id="2318487">return</span>&nbsp;<span class="ident" id="2318494">Map</span><span class="op" id="2318497">(</span><span class="ident" id="2318498">unicode</span><span class="op" id="2318505">.</span><span class="ident" id="2318506">ToTitle</span><span class="op" id="2318513">,</span>&nbsp;<span class="ident" id="2318515">s</span><span class="op" id="2318516">)</span>&nbsp;<span class="op" id="2318518">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="2318521">//&nbsp;ToUpperSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2318611">//&nbsp;upper&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2318671">func</span>&nbsp;<span class="ident" id="2318676">ToUpperSpecial</span><span class="op" id="2318690">(</span><span class="ident" id="2318691">_case</span>&nbsp;<span class="ident" id="2318697">unicode</span><span class="op" id="2318704">.</span><span class="ident" id="2318705">SpecialCase</span><span class="op" id="2318716">,</span>&nbsp;<span class="ident" id="2318718">s</span>&nbsp;<span class="builtintype" id="2318720">string</span><span class="op" id="2318726">)</span>&nbsp;<span class="builtintype" id="2318728">string</span>&nbsp;<span class="op" id="2318735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2318738">return</span>&nbsp;<span class="ident" id="2318745">Map</span><span class="op" id="2318748">(</span><span class="keyword" id="2318749">func</span><span class="op" id="2318753">(</span><span class="ident" id="2318754">r</span>&nbsp;<span class="builtintype" id="2318756">rune</span><span class="op" id="2318760">)</span>&nbsp;<span class="builtintype" id="2318762">rune</span>&nbsp;<span class="op" id="2318767">{</span>&nbsp;<span class="keyword" id="2318769">return</span>&nbsp;<span class="ident" id="2318776">_case</span><span class="op" id="2318781">.</span><span class="ident" id="2318782">ToUpper</span><span class="op" id="2318789">(</span><span class="ident" id="2318790">r</span><span class="op" id="2318791">)</span>&nbsp;<span class="op" id="2318793">}</span><span class="op" id="2318794">,</span>&nbsp;<span class="ident" id="2318796">s</span><span class="op" id="2318797">)</span><br>
<span class="lineno">480</span><span class="op" id="2318799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2318802">//&nbsp;ToLowerSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2318892">//&nbsp;lower&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2318952">func</span>&nbsp;<span class="ident" id="2318957">ToLowerSpecial</span><span class="op" id="2318971">(</span><span class="ident" id="2318972">_case</span>&nbsp;<span class="ident" id="2318978">unicode</span><span class="op" id="2318985">.</span><span class="ident" id="2318986">SpecialCase</span><span class="op" id="2318997">,</span>&nbsp;<span class="ident" id="2318999">s</span>&nbsp;<span class="builtintype" id="2319001">string</span><span class="op" id="2319007">)</span>&nbsp;<span class="builtintype" id="2319009">string</span>&nbsp;<span class="op" id="2319016">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319019">return</span>&nbsp;<span class="ident" id="2319026">Map</span><span class="op" id="2319029">(</span><span class="keyword" id="2319030">func</span><span class="op" id="2319034">(</span><span class="ident" id="2319035">r</span>&nbsp;<span class="builtintype" id="2319037">rune</span><span class="op" id="2319041">)</span>&nbsp;<span class="builtintype" id="2319043">rune</span>&nbsp;<span class="op" id="2319048">{</span>&nbsp;<span class="keyword" id="2319050">return</span>&nbsp;<span class="ident" id="2319057">_case</span><span class="op" id="2319062">.</span><span class="ident" id="2319063">ToLower</span><span class="op" id="2319070">(</span><span class="ident" id="2319071">r</span><span class="op" id="2319072">)</span>&nbsp;<span class="op" id="2319074">}</span><span class="op" id="2319075">,</span>&nbsp;<span class="ident" id="2319077">s</span><span class="op" id="2319078">)</span><br>
<span class="lineno"></span><span class="op" id="2319080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319083">//&nbsp;ToTitleSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2319173">//&nbsp;title&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno">490</span><span class="keyword" id="2319233">func</span>&nbsp;<span class="ident" id="2319238">ToTitleSpecial</span><span class="op" id="2319252">(</span><span class="ident" id="2319253">_case</span>&nbsp;<span class="ident" id="2319259">unicode</span><span class="op" id="2319266">.</span><span class="ident" id="2319267">SpecialCase</span><span class="op" id="2319278">,</span>&nbsp;<span class="ident" id="2319280">s</span>&nbsp;<span class="builtintype" id="2319282">string</span><span class="op" id="2319288">)</span>&nbsp;<span class="builtintype" id="2319290">string</span>&nbsp;<span class="op" id="2319297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319300">return</span>&nbsp;<span class="ident" id="2319307">Map</span><span class="op" id="2319310">(</span><span class="keyword" id="2319311">func</span><span class="op" id="2319315">(</span><span class="ident" id="2319316">r</span>&nbsp;<span class="builtintype" id="2319318">rune</span><span class="op" id="2319322">)</span>&nbsp;<span class="builtintype" id="2319324">rune</span>&nbsp;<span class="op" id="2319329">{</span>&nbsp;<span class="keyword" id="2319331">return</span>&nbsp;<span class="ident" id="2319338">_case</span><span class="op" id="2319343">.</span><span class="ident" id="2319344">ToTitle</span><span class="op" id="2319351">(</span><span class="ident" id="2319352">r</span><span class="op" id="2319353">)</span>&nbsp;<span class="op" id="2319355">}</span><span class="op" id="2319356">,</span>&nbsp;<span class="ident" id="2319358">s</span><span class="op" id="2319359">)</span><br>
<span class="lineno"></span><span class="op" id="2319361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319364">//&nbsp;isSeparator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;rune&nbsp;could&nbsp;mark&nbsp;a&nbsp;word&nbsp;boundary.</span><br>
<span class="lineno">495</span><span class="comment" id="2319432">//&nbsp;TODO:&nbsp;update&nbsp;when&nbsp;package&nbsp;unicode&nbsp;captures&nbsp;more&nbsp;of&nbsp;the&nbsp;properties.</span><br>
<span class="lineno"></span><span class="keyword" id="2319502">func</span>&nbsp;<span class="ident" id="2319507">isSeparator</span><span class="op" id="2319518">(</span><span class="ident" id="2319519">r</span>&nbsp;<span class="builtintype" id="2319521">rune</span><span class="op" id="2319525">)</span>&nbsp;<span class="builtintype" id="2319527">bool</span>&nbsp;<span class="op" id="2319532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2319535">//&nbsp;ASCII&nbsp;alphanumerics&nbsp;and&nbsp;underscore&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319593">if</span>&nbsp;<span class="ident" id="2319596">r</span>&nbsp;<span class="op" id="2319598">&lt;=</span>&nbsp;<span class="num" id="2319601">0x7F</span>&nbsp;<span class="op" id="2319606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319610">switch</span>&nbsp;<span class="op" id="2319617">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319621">case</span>&nbsp;<span class="string" id="2319626">&#39;0&#39;</span>&nbsp;<span class="op" id="2319630">&lt;=</span>&nbsp;<span class="ident" id="2319633">r</span>&nbsp;<span class="op" id="2319635">&amp;&amp;</span>&nbsp;<span class="ident" id="2319638">r</span>&nbsp;<span class="op" id="2319640">&lt;=</span>&nbsp;<span class="string" id="2319643">&#39;9&#39;</span><span class="op" id="2319646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319651">return</span>&nbsp;<span class="builtintype" id="2319658">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319666">case</span>&nbsp;<span class="string" id="2319671">&#39;a&#39;</span>&nbsp;<span class="op" id="2319675">&lt;=</span>&nbsp;<span class="ident" id="2319678">r</span>&nbsp;<span class="op" id="2319680">&amp;&amp;</span>&nbsp;<span class="ident" id="2319683">r</span>&nbsp;<span class="op" id="2319685">&lt;=</span>&nbsp;<span class="string" id="2319688">&#39;z&#39;</span><span class="op" id="2319691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319696">return</span>&nbsp;<span class="builtintype" id="2319703">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319711">case</span>&nbsp;<span class="string" id="2319716">&#39;A&#39;</span>&nbsp;<span class="op" id="2319720">&lt;=</span>&nbsp;<span class="ident" id="2319723">r</span>&nbsp;<span class="op" id="2319725">&amp;&amp;</span>&nbsp;<span class="ident" id="2319728">r</span>&nbsp;<span class="op" id="2319730">&lt;=</span>&nbsp;<span class="string" id="2319733">&#39;Z&#39;</span><span class="op" id="2319736">:</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319741">return</span>&nbsp;<span class="builtintype" id="2319748">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319756">case</span>&nbsp;<span class="ident" id="2319761">r</span>&nbsp;<span class="op" id="2319763">==</span>&nbsp;<span class="string" id="2319766">&#39;_&#39;</span><span class="op" id="2319769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319774">return</span>&nbsp;<span class="builtintype" id="2319781">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2319789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319793">return</span>&nbsp;<span class="builtintype" id="2319800">true</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2319806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2319809">//&nbsp;Letters&nbsp;and&nbsp;digits&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319851">if</span>&nbsp;<span class="ident" id="2319854">unicode</span><span class="op" id="2319861">.</span><span class="ident" id="2319862">IsLetter</span><span class="op" id="2319870">(</span><span class="ident" id="2319871">r</span><span class="op" id="2319872">)</span>&nbsp;<span class="op" id="2319874">||</span>&nbsp;<span class="ident" id="2319877">unicode</span><span class="op" id="2319884">.</span><span class="ident" id="2319885">IsDigit</span><span class="op" id="2319892">(</span><span class="ident" id="2319893">r</span><span class="op" id="2319894">)</span>&nbsp;<span class="op" id="2319896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319900">return</span>&nbsp;<span class="builtintype" id="2319907">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2319914">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2319917">//&nbsp;Otherwise,&nbsp;all&nbsp;we&nbsp;can&nbsp;do&nbsp;for&nbsp;now&nbsp;is&nbsp;treat&nbsp;spaces&nbsp;as&nbsp;separators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2319985">return</span>&nbsp;<span class="ident" id="2319992">unicode</span><span class="op" id="2319999">.</span><span class="ident" id="2320000">IsSpace</span><span class="op" id="2320007">(</span><span class="ident" id="2320008">r</span><span class="op" id="2320009">)</span><br>
<span class="lineno"></span><span class="op" id="2320011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2320014">//&nbsp;Title&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;that&nbsp;begin&nbsp;words</span><br>
<span class="lineno">520</span><span class="comment" id="2320096">//&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2320127">//</span><br>
<span class="lineno"></span><span class="comment" id="2320130">//&nbsp;BUG:&nbsp;The&nbsp;rule&nbsp;Title&nbsp;uses&nbsp;for&nbsp;word&nbsp;boundaries&nbsp;does&nbsp;not&nbsp;handle&nbsp;Unicode&nbsp;punctuation&nbsp;properly.</span><br>
<span class="lineno"></span><span class="keyword" id="2320224">func</span>&nbsp;<span class="ident" id="2320229">Title</span><span class="op" id="2320234">(</span><span class="ident" id="2320235">s</span>&nbsp;<span class="builtintype" id="2320237">string</span><span class="op" id="2320243">)</span>&nbsp;<span class="builtintype" id="2320245">string</span>&nbsp;<span class="op" id="2320252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2320255">//&nbsp;Use&nbsp;a&nbsp;closure&nbsp;here&nbsp;to&nbsp;remember&nbsp;state.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2320297">//&nbsp;Hackish&nbsp;but&nbsp;effective.&nbsp;Depends&nbsp;on&nbsp;Map&nbsp;scanning&nbsp;in&nbsp;order&nbsp;and&nbsp;calling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2320369">//&nbsp;the&nbsp;closure&nbsp;once&nbsp;per&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320400">prev</span>&nbsp;<span class="op" id="2320405">:=</span>&nbsp;<span class="string" id="2320408">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320413">return</span>&nbsp;<span class="ident" id="2320420">Map</span><span class="op" id="2320423">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320427">func</span><span class="op" id="2320431">(</span><span class="ident" id="2320432">r</span>&nbsp;<span class="builtintype" id="2320434">rune</span><span class="op" id="2320438">)</span>&nbsp;<span class="builtintype" id="2320440">rune</span>&nbsp;<span class="op" id="2320445">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320450">if</span>&nbsp;<span class="ident" id="2320453">isSeparator</span><span class="op" id="2320464">(</span><span class="ident" id="2320465">prev</span><span class="op" id="2320469">)</span>&nbsp;<span class="op" id="2320471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320477">prev</span>&nbsp;<span class="op" id="2320482">=</span>&nbsp;<span class="ident" id="2320484">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320490">return</span>&nbsp;<span class="ident" id="2320497">unicode</span><span class="op" id="2320504">.</span><span class="ident" id="2320505">ToTitle</span><span class="op" id="2320512">(</span><span class="ident" id="2320513">r</span><span class="op" id="2320514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2320519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320524">prev</span>&nbsp;<span class="op" id="2320529">=</span>&nbsp;<span class="ident" id="2320531">r</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320536">return</span>&nbsp;<span class="ident" id="2320543">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2320547">}</span><span class="op" id="2320548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320552">s</span><span class="op" id="2320553">)</span><br>
<span class="lineno"></span><span class="op" id="2320555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">540</span><span class="comment" id="2320558">//&nbsp;TrimLeftFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2320623">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2320673">func</span>&nbsp;<span class="ident" id="2320678">TrimLeftFunc</span><span class="op" id="2320690">(</span><span class="ident" id="2320691">s</span>&nbsp;<span class="builtintype" id="2320693">string</span><span class="op" id="2320699">,</span>&nbsp;<span class="ident" id="2320701">f</span>&nbsp;<span class="keyword" id="2320703">func</span><span class="op" id="2320707">(</span><span class="builtintype" id="2320708">rune</span><span class="op" id="2320712">)</span>&nbsp;<span class="builtintype" id="2320714">bool</span><span class="op" id="2320718">)</span>&nbsp;<span class="builtintype" id="2320720">string</span>&nbsp;<span class="op" id="2320727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320730">i</span>&nbsp;<span class="op" id="2320732">:=</span>&nbsp;<span class="ident" id="2320735">indexFunc</span><span class="op" id="2320744">(</span><span class="ident" id="2320745">s</span><span class="op" id="2320746">,</span>&nbsp;<span class="ident" id="2320748">f</span><span class="op" id="2320749">,</span>&nbsp;<span class="builtintype" id="2320751">false</span><span class="op" id="2320756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320759">if</span>&nbsp;<span class="ident" id="2320762">i</span>&nbsp;<span class="op" id="2320764">==</span>&nbsp;<span class="op" id="2320767">-</span><span class="num" id="2320768">1</span>&nbsp;<span class="op" id="2320770">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320774">return</span>&nbsp;<span class="string" id="2320781">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2320785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2320788">return</span>&nbsp;<span class="ident" id="2320795">s</span><span class="op" id="2320796">[</span><span class="ident" id="2320797">i</span><span class="op" id="2320798">:</span><span class="op" id="2320799">]</span><br>
<span class="lineno"></span><span class="op" id="2320801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="2320804">//&nbsp;TrimRightFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2320871">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2320921">func</span>&nbsp;<span class="ident" id="2320926">TrimRightFunc</span><span class="op" id="2320939">(</span><span class="ident" id="2320940">s</span>&nbsp;<span class="builtintype" id="2320942">string</span><span class="op" id="2320948">,</span>&nbsp;<span class="ident" id="2320950">f</span>&nbsp;<span class="keyword" id="2320952">func</span><span class="op" id="2320956">(</span><span class="builtintype" id="2320957">rune</span><span class="op" id="2320961">)</span>&nbsp;<span class="builtintype" id="2320963">bool</span><span class="op" id="2320967">)</span>&nbsp;<span class="builtintype" id="2320969">string</span>&nbsp;<span class="op" id="2320976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2320979">i</span>&nbsp;<span class="op" id="2320981">:=</span>&nbsp;<span class="ident" id="2320984">lastIndexFunc</span><span class="op" id="2320997">(</span><span class="ident" id="2320998">s</span><span class="op" id="2320999">,</span>&nbsp;<span class="ident" id="2321001">f</span><span class="op" id="2321002">,</span>&nbsp;<span class="builtintype" id="2321004">false</span><span class="op" id="2321009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321012">if</span>&nbsp;<span class="ident" id="2321015">i</span>&nbsp;<span class="op" id="2321017">&gt;=</span>&nbsp;<span class="num" id="2321020">0</span>&nbsp;<span class="op" id="2321022">&amp;&amp;</span>&nbsp;<span class="ident" id="2321025">s</span><span class="op" id="2321026">[</span><span class="ident" id="2321027">i</span><span class="op" id="2321028">]</span>&nbsp;<span class="op" id="2321030">&gt;=</span>&nbsp;<span class="ident" id="2321033">utf8</span><span class="op" id="2321037">.</span><span class="ident" id="2321038">RuneSelf</span>&nbsp;<span class="op" id="2321047">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321051">_</span><span class="op" id="2321052">,</span>&nbsp;<span class="ident" id="2321054">wid</span>&nbsp;<span class="op" id="2321058">:=</span>&nbsp;<span class="ident" id="2321061">utf8</span><span class="op" id="2321065">.</span><span class="ident" id="2321066">DecodeRuneInString</span><span class="op" id="2321084">(</span><span class="ident" id="2321085">s</span><span class="op" id="2321086">[</span><span class="ident" id="2321087">i</span><span class="op" id="2321088">:</span><span class="op" id="2321089">]</span><span class="op" id="2321090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321094">i</span>&nbsp;<span class="op" id="2321096">+=</span>&nbsp;<span class="ident" id="2321099">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2321104">}</span>&nbsp;<span class="keyword" id="2321106">else</span>&nbsp;<span class="op" id="2321111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321115">i</span><span class="op" id="2321116">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2321120">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321123">return</span>&nbsp;<span class="ident" id="2321130">s</span><span class="op" id="2321131">[</span><span class="num" id="2321132">0</span><span class="op" id="2321133">:</span><span class="ident" id="2321134">i</span><span class="op" id="2321135">]</span><br>
<span class="lineno"></span><span class="op" id="2321137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2321140">//&nbsp;TrimFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2321201">//&nbsp;and&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno">565</span><span class="keyword" id="2321264">func</span>&nbsp;<span class="ident" id="2321269">TrimFunc</span><span class="op" id="2321277">(</span><span class="ident" id="2321278">s</span>&nbsp;<span class="builtintype" id="2321280">string</span><span class="op" id="2321286">,</span>&nbsp;<span class="ident" id="2321288">f</span>&nbsp;<span class="keyword" id="2321290">func</span><span class="op" id="2321294">(</span><span class="builtintype" id="2321295">rune</span><span class="op" id="2321299">)</span>&nbsp;<span class="builtintype" id="2321301">bool</span><span class="op" id="2321305">)</span>&nbsp;<span class="builtintype" id="2321307">string</span>&nbsp;<span class="op" id="2321314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321317">return</span>&nbsp;<span class="ident" id="2321324">TrimRightFunc</span><span class="op" id="2321337">(</span><span class="ident" id="2321338">TrimLeftFunc</span><span class="op" id="2321350">(</span><span class="ident" id="2321351">s</span><span class="op" id="2321352">,</span>&nbsp;<span class="ident" id="2321354">f</span><span class="op" id="2321355">)</span><span class="op" id="2321356">,</span>&nbsp;<span class="ident" id="2321358">f</span><span class="op" id="2321359">)</span><br>
<span class="lineno"></span><span class="op" id="2321361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2321364">//&nbsp;IndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;first&nbsp;Unicode</span><br>
<span class="lineno">570</span><span class="comment" id="2321423">//&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2321472">func</span>&nbsp;<span class="ident" id="2321477">IndexFunc</span><span class="op" id="2321486">(</span><span class="ident" id="2321487">s</span>&nbsp;<span class="builtintype" id="2321489">string</span><span class="op" id="2321495">,</span>&nbsp;<span class="ident" id="2321497">f</span>&nbsp;<span class="keyword" id="2321499">func</span><span class="op" id="2321503">(</span><span class="builtintype" id="2321504">rune</span><span class="op" id="2321508">)</span>&nbsp;<span class="builtintype" id="2321510">bool</span><span class="op" id="2321514">)</span>&nbsp;<span class="builtintype" id="2321516">int</span>&nbsp;<span class="op" id="2321520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321523">return</span>&nbsp;<span class="ident" id="2321530">indexFunc</span><span class="op" id="2321539">(</span><span class="ident" id="2321540">s</span><span class="op" id="2321541">,</span>&nbsp;<span class="ident" id="2321543">f</span><span class="op" id="2321544">,</span>&nbsp;<span class="builtintype" id="2321546">true</span><span class="op" id="2321550">)</span><br>
<span class="lineno"></span><span class="op" id="2321552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2321555">//&nbsp;LastIndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="2321609">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2321666">func</span>&nbsp;<span class="ident" id="2321671">LastIndexFunc</span><span class="op" id="2321684">(</span><span class="ident" id="2321685">s</span>&nbsp;<span class="builtintype" id="2321687">string</span><span class="op" id="2321693">,</span>&nbsp;<span class="ident" id="2321695">f</span>&nbsp;<span class="keyword" id="2321697">func</span><span class="op" id="2321701">(</span><span class="builtintype" id="2321702">rune</span><span class="op" id="2321706">)</span>&nbsp;<span class="builtintype" id="2321708">bool</span><span class="op" id="2321712">)</span>&nbsp;<span class="builtintype" id="2321714">int</span>&nbsp;<span class="op" id="2321718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321721">return</span>&nbsp;<span class="ident" id="2321728">lastIndexFunc</span><span class="op" id="2321741">(</span><span class="ident" id="2321742">s</span><span class="op" id="2321743">,</span>&nbsp;<span class="ident" id="2321745">f</span><span class="op" id="2321746">,</span>&nbsp;<span class="builtintype" id="2321748">true</span><span class="op" id="2321752">)</span><br>
<span class="lineno"></span><span class="op" id="2321754">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2321757">//&nbsp;indexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;IndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2321810">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2321866">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2321879">func</span>&nbsp;<span class="ident" id="2321884">indexFunc</span><span class="op" id="2321893">(</span><span class="ident" id="2321894">s</span>&nbsp;<span class="builtintype" id="2321896">string</span><span class="op" id="2321902">,</span>&nbsp;<span class="ident" id="2321904">f</span>&nbsp;<span class="keyword" id="2321906">func</span><span class="op" id="2321910">(</span><span class="builtintype" id="2321911">rune</span><span class="op" id="2321915">)</span>&nbsp;<span class="builtintype" id="2321917">bool</span><span class="op" id="2321921">,</span>&nbsp;<span class="ident" id="2321923">truth</span>&nbsp;<span class="builtintype" id="2321929">bool</span><span class="op" id="2321933">)</span>&nbsp;<span class="builtintype" id="2321935">int</span>&nbsp;<span class="op" id="2321939">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321942">start</span>&nbsp;<span class="op" id="2321948">:=</span>&nbsp;<span class="num" id="2321951">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321954">for</span>&nbsp;<span class="ident" id="2321958">start</span>&nbsp;<span class="op" id="2321964">&lt;</span>&nbsp;<span class="builtinfunc" id="2321966">len</span><span class="op" id="2321969">(</span><span class="ident" id="2321970">s</span><span class="op" id="2321971">)</span>&nbsp;<span class="op" id="2321973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321977">wid</span>&nbsp;<span class="op" id="2321981">:=</span>&nbsp;<span class="num" id="2321984">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321988">r</span>&nbsp;<span class="op" id="2321990">:=</span>&nbsp;<span class="builtintype" id="2321993">rune</span><span class="op" id="2321997">(</span><span class="ident" id="2321998">s</span><span class="op" id="2321999">[</span><span class="ident" id="2322000">start</span><span class="op" id="2322005">]</span><span class="op" id="2322006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322010">if</span>&nbsp;<span class="ident" id="2322013">r</span>&nbsp;<span class="op" id="2322015">&gt;=</span>&nbsp;<span class="ident" id="2322018">utf8</span><span class="op" id="2322022">.</span><span class="ident" id="2322023">RuneSelf</span>&nbsp;<span class="op" id="2322032">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2322037">r</span><span class="op" id="2322038">,</span>&nbsp;<span class="ident" id="2322040">wid</span>&nbsp;<span class="op" id="2322044">=</span>&nbsp;<span class="ident" id="2322046">utf8</span><span class="op" id="2322050">.</span><span class="ident" id="2322051">DecodeRuneInString</span><span class="op" id="2322069">(</span><span class="ident" id="2322070">s</span><span class="op" id="2322071">[</span><span class="ident" id="2322072">start</span><span class="op" id="2322077">:</span><span class="op" id="2322078">]</span><span class="op" id="2322079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322087">if</span>&nbsp;<span class="ident" id="2322090">f</span><span class="op" id="2322091">(</span><span class="ident" id="2322092">r</span><span class="op" id="2322093">)</span>&nbsp;<span class="op" id="2322095">==</span>&nbsp;<span class="ident" id="2322098">truth</span>&nbsp;<span class="op" id="2322104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322109">return</span>&nbsp;<span class="ident" id="2322116">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322124">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2322128">start</span>&nbsp;<span class="op" id="2322134">+=</span>&nbsp;<span class="ident" id="2322137">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322145">return</span>&nbsp;<span class="op" id="2322152">-</span><span class="num" id="2322153">1</span><br>
<span class="lineno"></span><span class="op" id="2322155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="2322158">//&nbsp;lastIndexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;LastIndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2322219">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2322275">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2322288">func</span>&nbsp;<span class="ident" id="2322293">lastIndexFunc</span><span class="op" id="2322306">(</span><span class="ident" id="2322307">s</span>&nbsp;<span class="builtintype" id="2322309">string</span><span class="op" id="2322315">,</span>&nbsp;<span class="ident" id="2322317">f</span>&nbsp;<span class="keyword" id="2322319">func</span><span class="op" id="2322323">(</span><span class="builtintype" id="2322324">rune</span><span class="op" id="2322328">)</span>&nbsp;<span class="builtintype" id="2322330">bool</span><span class="op" id="2322334">,</span>&nbsp;<span class="ident" id="2322336">truth</span>&nbsp;<span class="builtintype" id="2322342">bool</span><span class="op" id="2322346">)</span>&nbsp;<span class="builtintype" id="2322348">int</span>&nbsp;<span class="op" id="2322352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322355">for</span>&nbsp;<span class="ident" id="2322359">i</span>&nbsp;<span class="op" id="2322361">:=</span>&nbsp;<span class="builtinfunc" id="2322364">len</span><span class="op" id="2322367">(</span><span class="ident" id="2322368">s</span><span class="op" id="2322369">)</span><span class="op" id="2322370">;</span>&nbsp;<span class="ident" id="2322372">i</span>&nbsp;<span class="op" id="2322374">&gt;</span>&nbsp;<span class="num" id="2322376">0</span><span class="op" id="2322377">;</span>&nbsp;<span class="op" id="2322379">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2322383">r</span><span class="op" id="2322384">,</span>&nbsp;<span class="ident" id="2322386">size</span>&nbsp;<span class="op" id="2322391">:=</span>&nbsp;<span class="ident" id="2322394">utf8</span><span class="op" id="2322398">.</span><span class="ident" id="2322399">DecodeLastRuneInString</span><span class="op" id="2322421">(</span><span class="ident" id="2322422">s</span><span class="op" id="2322423">[</span><span class="num" id="2322424">0</span><span class="op" id="2322425">:</span><span class="ident" id="2322426">i</span><span class="op" id="2322427">]</span><span class="op" id="2322428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2322432">i</span>&nbsp;<span class="op" id="2322434">-=</span>&nbsp;<span class="ident" id="2322437">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322444">if</span>&nbsp;<span class="ident" id="2322447">f</span><span class="op" id="2322448">(</span><span class="ident" id="2322449">r</span><span class="op" id="2322450">)</span>&nbsp;<span class="op" id="2322452">==</span>&nbsp;<span class="ident" id="2322455">truth</span>&nbsp;<span class="op" id="2322461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322466">return</span>&nbsp;<span class="ident" id="2322473">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322477">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322483">return</span>&nbsp;<span class="op" id="2322490">-</span><span class="num" id="2322491">1</span><br>
<span class="lineno"></span><span class="op" id="2322493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2322496">func</span>&nbsp;<span class="ident" id="2322501">makeCutsetFunc</span><span class="op" id="2322515">(</span><span class="ident" id="2322516">cutset</span>&nbsp;<span class="builtintype" id="2322523">string</span><span class="op" id="2322529">)</span>&nbsp;<span class="keyword" id="2322531">func</span><span class="op" id="2322535">(</span><span class="builtintype" id="2322536">rune</span><span class="op" id="2322540">)</span>&nbsp;<span class="builtintype" id="2322542">bool</span>&nbsp;<span class="op" id="2322547">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322550">return</span>&nbsp;<span class="keyword" id="2322557">func</span><span class="op" id="2322561">(</span><span class="ident" id="2322562">r</span>&nbsp;<span class="builtintype" id="2322564">rune</span><span class="op" id="2322568">)</span>&nbsp;<span class="builtintype" id="2322570">bool</span>&nbsp;<span class="op" id="2322575">{</span>&nbsp;<span class="keyword" id="2322577">return</span>&nbsp;<span class="ident" id="2322584">IndexRune</span><span class="op" id="2322593">(</span><span class="ident" id="2322594">cutset</span><span class="op" id="2322600">,</span>&nbsp;<span class="ident" id="2322602">r</span><span class="op" id="2322603">)</span>&nbsp;<span class="op" id="2322605">&gt;=</span>&nbsp;<span class="num" id="2322608">0</span>&nbsp;<span class="op" id="2322610">}</span><br>
<span class="lineno"></span><span class="op" id="2322612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2322615">//&nbsp;Trim&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2322676">//&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno">620</span><span class="keyword" id="2322737">func</span>&nbsp;<span class="ident" id="2322742">Trim</span><span class="op" id="2322746">(</span><span class="ident" id="2322747">s</span>&nbsp;<span class="builtintype" id="2322749">string</span><span class="op" id="2322755">,</span>&nbsp;<span class="ident" id="2322757">cutset</span>&nbsp;<span class="builtintype" id="2322764">string</span><span class="op" id="2322770">)</span>&nbsp;<span class="builtintype" id="2322772">string</span>&nbsp;<span class="op" id="2322779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322782">if</span>&nbsp;<span class="ident" id="2322785">s</span>&nbsp;<span class="op" id="2322787">==</span>&nbsp;<span class="string" id="2322790">&#34;&#34;</span>&nbsp;<span class="op" id="2322793">||</span>&nbsp;<span class="ident" id="2322796">cutset</span>&nbsp;<span class="op" id="2322803">==</span>&nbsp;<span class="string" id="2322806">&#34;&#34;</span>&nbsp;<span class="op" id="2322809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322813">return</span>&nbsp;<span class="ident" id="2322820">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322826">return</span>&nbsp;<span class="ident" id="2322833">TrimFunc</span><span class="op" id="2322841">(</span><span class="ident" id="2322842">s</span><span class="op" id="2322843">,</span>&nbsp;<span class="ident" id="2322845">makeCutsetFunc</span><span class="op" id="2322859">(</span><span class="ident" id="2322860">cutset</span><span class="op" id="2322866">)</span><span class="op" id="2322867">)</span><br>
<span class="lineno">625</span><span class="op" id="2322869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2322872">//&nbsp;TrimLeft&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2322933">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2322985">func</span>&nbsp;<span class="ident" id="2322990">TrimLeft</span><span class="op" id="2322998">(</span><span class="ident" id="2322999">s</span>&nbsp;<span class="builtintype" id="2323001">string</span><span class="op" id="2323007">,</span>&nbsp;<span class="ident" id="2323009">cutset</span>&nbsp;<span class="builtintype" id="2323016">string</span><span class="op" id="2323022">)</span>&nbsp;<span class="builtintype" id="2323024">string</span>&nbsp;<span class="op" id="2323031">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323034">if</span>&nbsp;<span class="ident" id="2323037">s</span>&nbsp;<span class="op" id="2323039">==</span>&nbsp;<span class="string" id="2323042">&#34;&#34;</span>&nbsp;<span class="op" id="2323045">||</span>&nbsp;<span class="ident" id="2323048">cutset</span>&nbsp;<span class="op" id="2323055">==</span>&nbsp;<span class="string" id="2323058">&#34;&#34;</span>&nbsp;<span class="op" id="2323061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323065">return</span>&nbsp;<span class="ident" id="2323072">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323078">return</span>&nbsp;<span class="ident" id="2323085">TrimLeftFunc</span><span class="op" id="2323097">(</span><span class="ident" id="2323098">s</span><span class="op" id="2323099">,</span>&nbsp;<span class="ident" id="2323101">makeCutsetFunc</span><span class="op" id="2323115">(</span><span class="ident" id="2323116">cutset</span><span class="op" id="2323122">)</span><span class="op" id="2323123">)</span><br>
<span class="lineno"></span><span class="op" id="2323125">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="2323128">//&nbsp;TrimRight&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2323192">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2323244">func</span>&nbsp;<span class="ident" id="2323249">TrimRight</span><span class="op" id="2323258">(</span><span class="ident" id="2323259">s</span>&nbsp;<span class="builtintype" id="2323261">string</span><span class="op" id="2323267">,</span>&nbsp;<span class="ident" id="2323269">cutset</span>&nbsp;<span class="builtintype" id="2323276">string</span><span class="op" id="2323282">)</span>&nbsp;<span class="builtintype" id="2323284">string</span>&nbsp;<span class="op" id="2323291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323294">if</span>&nbsp;<span class="ident" id="2323297">s</span>&nbsp;<span class="op" id="2323299">==</span>&nbsp;<span class="string" id="2323302">&#34;&#34;</span>&nbsp;<span class="op" id="2323305">||</span>&nbsp;<span class="ident" id="2323308">cutset</span>&nbsp;<span class="op" id="2323315">==</span>&nbsp;<span class="string" id="2323318">&#34;&#34;</span>&nbsp;<span class="op" id="2323321">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323325">return</span>&nbsp;<span class="ident" id="2323332">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323338">return</span>&nbsp;<span class="ident" id="2323345">TrimRightFunc</span><span class="op" id="2323358">(</span><span class="ident" id="2323359">s</span><span class="op" id="2323360">,</span>&nbsp;<span class="ident" id="2323362">makeCutsetFunc</span><span class="op" id="2323376">(</span><span class="ident" id="2323377">cutset</span><span class="op" id="2323383">)</span><span class="op" id="2323384">)</span><br>
<span class="lineno"></span><span class="op" id="2323386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="2323389">//&nbsp;TrimSpace&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2323452">//&nbsp;and&nbsp;trailing&nbsp;white&nbsp;space&nbsp;removed,&nbsp;as&nbsp;defined&nbsp;by&nbsp;Unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="2323512">func</span>&nbsp;<span class="ident" id="2323517">TrimSpace</span><span class="op" id="2323526">(</span><span class="ident" id="2323527">s</span>&nbsp;<span class="builtintype" id="2323529">string</span><span class="op" id="2323535">)</span>&nbsp;<span class="builtintype" id="2323537">string</span>&nbsp;<span class="op" id="2323544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323547">return</span>&nbsp;<span class="ident" id="2323554">TrimFunc</span><span class="op" id="2323562">(</span><span class="ident" id="2323563">s</span><span class="op" id="2323564">,</span>&nbsp;<span class="ident" id="2323566">unicode</span><span class="op" id="2323573">.</span><span class="ident" id="2323574">IsSpace</span><span class="op" id="2323581">)</span><br>
<span class="lineno"></span><span class="op" id="2323583">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span><span class="comment" id="2323586">//&nbsp;TrimPrefix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;leading&nbsp;prefix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2323654">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;start&nbsp;with&nbsp;prefix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2323714">func</span>&nbsp;<span class="ident" id="2323719">TrimPrefix</span><span class="op" id="2323729">(</span><span class="ident" id="2323730">s</span><span class="op" id="2323731">,</span>&nbsp;<span class="ident" id="2323733">prefix</span>&nbsp;<span class="builtintype" id="2323740">string</span><span class="op" id="2323746">)</span>&nbsp;<span class="builtintype" id="2323748">string</span>&nbsp;<span class="op" id="2323755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323758">if</span>&nbsp;<span class="ident" id="2323761">HasPrefix</span><span class="op" id="2323770">(</span><span class="ident" id="2323771">s</span><span class="op" id="2323772">,</span>&nbsp;<span class="ident" id="2323774">prefix</span><span class="op" id="2323780">)</span>&nbsp;<span class="op" id="2323782">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323786">return</span>&nbsp;<span class="ident" id="2323793">s</span><span class="op" id="2323794">[</span><span class="builtinfunc" id="2323795">len</span><span class="op" id="2323798">(</span><span class="ident" id="2323799">prefix</span><span class="op" id="2323805">)</span><span class="op" id="2323806">:</span><span class="op" id="2323807">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323813">return</span>&nbsp;<span class="ident" id="2323820">s</span><br>
<span class="lineno"></span><span class="op" id="2323822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="2323825">//&nbsp;TrimSuffix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;trailing&nbsp;suffix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2323894">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;end&nbsp;with&nbsp;suffix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2323952">func</span>&nbsp;<span class="ident" id="2323957">TrimSuffix</span><span class="op" id="2323967">(</span><span class="ident" id="2323968">s</span><span class="op" id="2323969">,</span>&nbsp;<span class="ident" id="2323971">suffix</span>&nbsp;<span class="builtintype" id="2323978">string</span><span class="op" id="2323984">)</span>&nbsp;<span class="builtintype" id="2323986">string</span>&nbsp;<span class="op" id="2323993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323996">if</span>&nbsp;<span class="ident" id="2323999">HasSuffix</span><span class="op" id="2324008">(</span><span class="ident" id="2324009">s</span><span class="op" id="2324010">,</span>&nbsp;<span class="ident" id="2324012">suffix</span><span class="op" id="2324018">)</span>&nbsp;<span class="op" id="2324020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324024">return</span>&nbsp;<span class="ident" id="2324031">s</span><span class="op" id="2324032">[</span><span class="op" id="2324033">:</span><span class="builtinfunc" id="2324034">len</span><span class="op" id="2324037">(</span><span class="ident" id="2324038">s</span><span class="op" id="2324039">)</span><span class="op" id="2324040">-</span><span class="builtinfunc" id="2324041">len</span><span class="op" id="2324044">(</span><span class="ident" id="2324045">suffix</span><span class="op" id="2324051">)</span><span class="op" id="2324052">]</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324058">return</span>&nbsp;<span class="ident" id="2324065">s</span><br>
<span class="lineno"></span><span class="op" id="2324067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2324070">//&nbsp;Replace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;the&nbsp;first&nbsp;n</span><br>
<span class="lineno">670</span><span class="comment" id="2324129">//&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;old&nbsp;replaced&nbsp;by&nbsp;new.</span><br>
<span class="lineno"></span><span class="comment" id="2324182">//&nbsp;If&nbsp;old&nbsp;is&nbsp;empty,&nbsp;it&nbsp;matches&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2324244">//&nbsp;and&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence,&nbsp;yielding&nbsp;up&nbsp;to&nbsp;k+1&nbsp;replacements</span><br>
<span class="lineno"></span><span class="comment" id="2324310">//&nbsp;for&nbsp;a&nbsp;k-rune&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2324334">//&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;there&nbsp;is&nbsp;no&nbsp;limit&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno">675</span><span class="keyword" id="2324396">func</span>&nbsp;<span class="ident" id="2324401">Replace</span><span class="op" id="2324408">(</span><span class="ident" id="2324409">s</span><span class="op" id="2324410">,</span>&nbsp;<span class="ident" id="2324412">old</span><span class="op" id="2324415">,</span>&nbsp;<span class="builtinfunc" id="2324417">new</span>&nbsp;<span class="builtintype" id="2324421">string</span><span class="op" id="2324427">,</span>&nbsp;<span class="ident" id="2324429">n</span>&nbsp;<span class="builtintype" id="2324431">int</span><span class="op" id="2324434">)</span>&nbsp;<span class="builtintype" id="2324436">string</span>&nbsp;<span class="op" id="2324443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324446">if</span>&nbsp;<span class="ident" id="2324449">old</span>&nbsp;<span class="op" id="2324453">==</span>&nbsp;<span class="builtinfunc" id="2324456">new</span>&nbsp;<span class="op" id="2324460">||</span>&nbsp;<span class="ident" id="2324463">n</span>&nbsp;<span class="op" id="2324465">==</span>&nbsp;<span class="num" id="2324468">0</span>&nbsp;<span class="op" id="2324470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324474">return</span>&nbsp;<span class="ident" id="2324481">s</span>&nbsp;<span class="comment" id="2324483">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2324508">//&nbsp;Compute&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324544">if</span>&nbsp;<span class="ident" id="2324547">m</span>&nbsp;<span class="op" id="2324549">:=</span>&nbsp;<span class="ident" id="2324552">Count</span><span class="op" id="2324557">(</span><span class="ident" id="2324558">s</span><span class="op" id="2324559">,</span>&nbsp;<span class="ident" id="2324561">old</span><span class="op" id="2324564">)</span><span class="op" id="2324565">;</span>&nbsp;<span class="ident" id="2324567">m</span>&nbsp;<span class="op" id="2324569">==</span>&nbsp;<span class="num" id="2324572">0</span>&nbsp;<span class="op" id="2324574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324578">return</span>&nbsp;<span class="ident" id="2324585">s</span>&nbsp;<span class="comment" id="2324587">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324608">}</span>&nbsp;<span class="keyword" id="2324610">else</span>&nbsp;<span class="keyword" id="2324615">if</span>&nbsp;<span class="ident" id="2324618">n</span>&nbsp;<span class="op" id="2324620">&lt;</span>&nbsp;<span class="num" id="2324622">0</span>&nbsp;<span class="op" id="2324624">||</span>&nbsp;<span class="ident" id="2324627">m</span>&nbsp;<span class="op" id="2324629">&lt;</span>&nbsp;<span class="ident" id="2324631">n</span>&nbsp;<span class="op" id="2324633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324637">n</span>&nbsp;<span class="op" id="2324639">=</span>&nbsp;<span class="ident" id="2324641">m</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2324648">//&nbsp;Apply&nbsp;replacements&nbsp;to&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324682">t</span>&nbsp;<span class="op" id="2324684">:=</span>&nbsp;<span class="builtinfunc" id="2324687">make</span><span class="op" id="2324691">(</span><span class="op" id="2324692">[</span><span class="op" id="2324693">]</span><span class="builtintype" id="2324694">byte</span><span class="op" id="2324698">,</span>&nbsp;<span class="builtinfunc" id="2324700">len</span><span class="op" id="2324703">(</span><span class="ident" id="2324704">s</span><span class="op" id="2324705">)</span><span class="op" id="2324706">+</span><span class="ident" id="2324707">n</span><span class="op" id="2324708">*</span><span class="op" id="2324709">(</span><span class="builtinfunc" id="2324710">len</span><span class="op" id="2324713">(</span><span class="builtinfunc" id="2324714">new</span><span class="op" id="2324717">)</span><span class="op" id="2324718">-</span><span class="builtinfunc" id="2324719">len</span><span class="op" id="2324722">(</span><span class="ident" id="2324723">old</span><span class="op" id="2324726">)</span><span class="op" id="2324727">)</span><span class="op" id="2324728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324731">w</span>&nbsp;<span class="op" id="2324733">:=</span>&nbsp;<span class="num" id="2324736">0</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324739">start</span>&nbsp;<span class="op" id="2324745">:=</span>&nbsp;<span class="num" id="2324748">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324751">for</span>&nbsp;<span class="ident" id="2324755">i</span>&nbsp;<span class="op" id="2324757">:=</span>&nbsp;<span class="num" id="2324760">0</span><span class="op" id="2324761">;</span>&nbsp;<span class="ident" id="2324763">i</span>&nbsp;<span class="op" id="2324765">&lt;</span>&nbsp;<span class="ident" id="2324767">n</span><span class="op" id="2324768">;</span>&nbsp;<span class="ident" id="2324770">i</span><span class="op" id="2324771">++</span>&nbsp;<span class="op" id="2324774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324778">j</span>&nbsp;<span class="op" id="2324780">:=</span>&nbsp;<span class="ident" id="2324783">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324791">if</span>&nbsp;<span class="builtinfunc" id="2324794">len</span><span class="op" id="2324797">(</span><span class="ident" id="2324798">old</span><span class="op" id="2324801">)</span>&nbsp;<span class="op" id="2324803">==</span>&nbsp;<span class="num" id="2324806">0</span>&nbsp;<span class="op" id="2324808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324813">if</span>&nbsp;<span class="ident" id="2324816">i</span>&nbsp;<span class="op" id="2324818">&gt;</span>&nbsp;<span class="num" id="2324820">0</span>&nbsp;<span class="op" id="2324822">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324828">_</span><span class="op" id="2324829">,</span>&nbsp;<span class="ident" id="2324831">wid</span>&nbsp;<span class="op" id="2324835">:=</span>&nbsp;<span class="ident" id="2324838">utf8</span><span class="op" id="2324842">.</span><span class="ident" id="2324843">DecodeRuneInString</span><span class="op" id="2324861">(</span><span class="ident" id="2324862">s</span><span class="op" id="2324863">[</span><span class="ident" id="2324864">start</span><span class="op" id="2324869">:</span><span class="op" id="2324870">]</span><span class="op" id="2324871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324877">j</span>&nbsp;<span class="op" id="2324879">+=</span>&nbsp;<span class="ident" id="2324882">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324893">}</span>&nbsp;<span class="keyword" id="2324895">else</span>&nbsp;<span class="op" id="2324900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324905">j</span>&nbsp;<span class="op" id="2324907">+=</span>&nbsp;<span class="ident" id="2324910">Index</span><span class="op" id="2324915">(</span><span class="ident" id="2324916">s</span><span class="op" id="2324917">[</span><span class="ident" id="2324918">start</span><span class="op" id="2324923">:</span><span class="op" id="2324924">]</span><span class="op" id="2324925">,</span>&nbsp;<span class="ident" id="2324927">old</span><span class="op" id="2324930">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2324934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324938">w</span>&nbsp;<span class="op" id="2324940">+=</span>&nbsp;<span class="builtinfunc" id="2324943">copy</span><span class="op" id="2324947">(</span><span class="ident" id="2324948">t</span><span class="op" id="2324949">[</span><span class="ident" id="2324950">w</span><span class="op" id="2324951">:</span><span class="op" id="2324952">]</span><span class="op" id="2324953">,</span>&nbsp;<span class="ident" id="2324955">s</span><span class="op" id="2324956">[</span><span class="ident" id="2324957">start</span><span class="op" id="2324962">:</span><span class="ident" id="2324963">j</span><span class="op" id="2324964">]</span><span class="op" id="2324965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324969">w</span>&nbsp;<span class="op" id="2324971">+=</span>&nbsp;<span class="builtinfunc" id="2324974">copy</span><span class="op" id="2324978">(</span><span class="ident" id="2324979">t</span><span class="op" id="2324980">[</span><span class="ident" id="2324981">w</span><span class="op" id="2324982">:</span><span class="op" id="2324983">]</span><span class="op" id="2324984">,</span>&nbsp;<span class="builtinfunc" id="2324986">new</span><span class="op" id="2324989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324993">start</span>&nbsp;<span class="op" id="2324999">=</span>&nbsp;<span class="ident" id="2325001">j</span>&nbsp;<span class="op" id="2325003">+</span>&nbsp;<span class="builtinfunc" id="2325005">len</span><span class="op" id="2325008">(</span><span class="ident" id="2325009">old</span><span class="op" id="2325012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325015">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325018">w</span>&nbsp;<span class="op" id="2325020">+=</span>&nbsp;<span class="builtinfunc" id="2325023">copy</span><span class="op" id="2325027">(</span><span class="ident" id="2325028">t</span><span class="op" id="2325029">[</span><span class="ident" id="2325030">w</span><span class="op" id="2325031">:</span><span class="op" id="2325032">]</span><span class="op" id="2325033">,</span>&nbsp;<span class="ident" id="2325035">s</span><span class="op" id="2325036">[</span><span class="ident" id="2325037">start</span><span class="op" id="2325042">:</span><span class="op" id="2325043">]</span><span class="op" id="2325044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325047">return</span>&nbsp;<span class="builtintype" id="2325054">string</span><span class="op" id="2325060">(</span><span class="ident" id="2325061">t</span><span class="op" id="2325062">[</span><span class="num" id="2325063">0</span><span class="op" id="2325064">:</span><span class="ident" id="2325065">w</span><span class="op" id="2325066">]</span><span class="op" id="2325067">)</span><br>
<span class="lineno"></span><span class="op" id="2325069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2325072">//&nbsp;EqualFold&nbsp;reports&nbsp;whether&nbsp;s&nbsp;and&nbsp;t,&nbsp;interpreted&nbsp;as&nbsp;UTF-8&nbsp;strings,</span><br>
<span class="lineno">710</span><span class="comment" id="2325140">//&nbsp;are&nbsp;equal&nbsp;under&nbsp;Unicode&nbsp;case-folding.</span><br>
<span class="lineno"></span><span class="keyword" id="2325181">func</span>&nbsp;<span class="ident" id="2325186">EqualFold</span><span class="op" id="2325195">(</span><span class="ident" id="2325196">s</span><span class="op" id="2325197">,</span>&nbsp;<span class="ident" id="2325199">t</span>&nbsp;<span class="builtintype" id="2325201">string</span><span class="op" id="2325207">)</span>&nbsp;<span class="builtintype" id="2325209">bool</span>&nbsp;<span class="op" id="2325214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325217">for</span>&nbsp;<span class="ident" id="2325221">s</span>&nbsp;<span class="op" id="2325223">!=</span>&nbsp;<span class="string" id="2325226">&#34;&#34;</span>&nbsp;<span class="op" id="2325229">&amp;&amp;</span>&nbsp;<span class="ident" id="2325232">t</span>&nbsp;<span class="op" id="2325234">!=</span>&nbsp;<span class="string" id="2325237">&#34;&#34;</span>&nbsp;<span class="op" id="2325240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325244">//&nbsp;Extract&nbsp;first&nbsp;rune&nbsp;from&nbsp;each&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325286">var</span>&nbsp;<span class="ident" id="2325290">sr</span><span class="op" id="2325292">,</span>&nbsp;<span class="ident" id="2325294">tr</span>&nbsp;<span class="builtintype" id="2325297">rune</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325304">if</span>&nbsp;<span class="ident" id="2325307">s</span><span class="op" id="2325308">[</span><span class="num" id="2325309">0</span><span class="op" id="2325310">]</span>&nbsp;<span class="op" id="2325312">&lt;</span>&nbsp;<span class="ident" id="2325314">utf8</span><span class="op" id="2325318">.</span><span class="ident" id="2325319">RuneSelf</span>&nbsp;<span class="op" id="2325328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325333">sr</span><span class="op" id="2325335">,</span>&nbsp;<span class="ident" id="2325337">s</span>&nbsp;<span class="op" id="2325339">=</span>&nbsp;<span class="builtintype" id="2325341">rune</span><span class="op" id="2325345">(</span><span class="ident" id="2325346">s</span><span class="op" id="2325347">[</span><span class="num" id="2325348">0</span><span class="op" id="2325349">]</span><span class="op" id="2325350">)</span><span class="op" id="2325351">,</span>&nbsp;<span class="ident" id="2325353">s</span><span class="op" id="2325354">[</span><span class="num" id="2325355">1</span><span class="op" id="2325356">:</span><span class="op" id="2325357">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325361">}</span>&nbsp;<span class="keyword" id="2325363">else</span>&nbsp;<span class="op" id="2325368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325373">r</span><span class="op" id="2325374">,</span>&nbsp;<span class="ident" id="2325376">size</span>&nbsp;<span class="op" id="2325381">:=</span>&nbsp;<span class="ident" id="2325384">utf8</span><span class="op" id="2325388">.</span><span class="ident" id="2325389">DecodeRuneInString</span><span class="op" id="2325407">(</span><span class="ident" id="2325408">s</span><span class="op" id="2325409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325414">sr</span><span class="op" id="2325416">,</span>&nbsp;<span class="ident" id="2325418">s</span>&nbsp;<span class="op" id="2325420">=</span>&nbsp;<span class="ident" id="2325422">r</span><span class="op" id="2325423">,</span>&nbsp;<span class="ident" id="2325425">s</span><span class="op" id="2325426">[</span><span class="ident" id="2325427">size</span><span class="op" id="2325431">:</span><span class="op" id="2325432">]</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325440">if</span>&nbsp;<span class="ident" id="2325443">t</span><span class="op" id="2325444">[</span><span class="num" id="2325445">0</span><span class="op" id="2325446">]</span>&nbsp;<span class="op" id="2325448">&lt;</span>&nbsp;<span class="ident" id="2325450">utf8</span><span class="op" id="2325454">.</span><span class="ident" id="2325455">RuneSelf</span>&nbsp;<span class="op" id="2325464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325469">tr</span><span class="op" id="2325471">,</span>&nbsp;<span class="ident" id="2325473">t</span>&nbsp;<span class="op" id="2325475">=</span>&nbsp;<span class="builtintype" id="2325477">rune</span><span class="op" id="2325481">(</span><span class="ident" id="2325482">t</span><span class="op" id="2325483">[</span><span class="num" id="2325484">0</span><span class="op" id="2325485">]</span><span class="op" id="2325486">)</span><span class="op" id="2325487">,</span>&nbsp;<span class="ident" id="2325489">t</span><span class="op" id="2325490">[</span><span class="num" id="2325491">1</span><span class="op" id="2325492">:</span><span class="op" id="2325493">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325497">}</span>&nbsp;<span class="keyword" id="2325499">else</span>&nbsp;<span class="op" id="2325504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325509">r</span><span class="op" id="2325510">,</span>&nbsp;<span class="ident" id="2325512">size</span>&nbsp;<span class="op" id="2325517">:=</span>&nbsp;<span class="ident" id="2325520">utf8</span><span class="op" id="2325524">.</span><span class="ident" id="2325525">DecodeRuneInString</span><span class="op" id="2325543">(</span><span class="ident" id="2325544">t</span><span class="op" id="2325545">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325550">tr</span><span class="op" id="2325552">,</span>&nbsp;<span class="ident" id="2325554">t</span>&nbsp;<span class="op" id="2325556">=</span>&nbsp;<span class="ident" id="2325558">r</span><span class="op" id="2325559">,</span>&nbsp;<span class="ident" id="2325561">t</span><span class="op" id="2325562">[</span><span class="ident" id="2325563">size</span><span class="op" id="2325567">:</span><span class="op" id="2325568">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325577">//&nbsp;If&nbsp;they&nbsp;match,&nbsp;keep&nbsp;going;&nbsp;if&nbsp;not,&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325632">//&nbsp;Easy&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325648">if</span>&nbsp;<span class="ident" id="2325651">tr</span>&nbsp;<span class="op" id="2325654">==</span>&nbsp;<span class="ident" id="2325657">sr</span>&nbsp;<span class="op" id="2325660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325665">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325681">//&nbsp;Make&nbsp;sr&nbsp;&lt;&nbsp;tr&nbsp;to&nbsp;simplify&nbsp;what&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325725">if</span>&nbsp;<span class="ident" id="2325728">tr</span>&nbsp;<span class="op" id="2325731">&lt;</span>&nbsp;<span class="ident" id="2325733">sr</span>&nbsp;<span class="op" id="2325736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325741">tr</span><span class="op" id="2325743">,</span>&nbsp;<span class="ident" id="2325745">sr</span>&nbsp;<span class="op" id="2325748">=</span>&nbsp;<span class="ident" id="2325750">sr</span><span class="op" id="2325752">,</span>&nbsp;<span class="ident" id="2325754">tr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325763">//&nbsp;Fast&nbsp;check&nbsp;for&nbsp;ASCII.</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325790">if</span>&nbsp;<span class="ident" id="2325793">tr</span>&nbsp;<span class="op" id="2325796">&lt;</span>&nbsp;<span class="ident" id="2325798">utf8</span><span class="op" id="2325802">.</span><span class="ident" id="2325803">RuneSelf</span>&nbsp;<span class="op" id="2325812">&amp;&amp;</span>&nbsp;<span class="string" id="2325815">&#39;A&#39;</span>&nbsp;<span class="op" id="2325819">&lt;=</span>&nbsp;<span class="ident" id="2325822">sr</span>&nbsp;<span class="op" id="2325825">&amp;&amp;</span>&nbsp;<span class="ident" id="2325828">sr</span>&nbsp;<span class="op" id="2325831">&lt;=</span>&nbsp;<span class="string" id="2325834">&#39;Z&#39;</span>&nbsp;<span class="op" id="2325838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325843">//&nbsp;ASCII,&nbsp;and&nbsp;sr&nbsp;is&nbsp;upper&nbsp;case.&nbsp;&nbsp;tr&nbsp;must&nbsp;be&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325902">if</span>&nbsp;<span class="ident" id="2325905">tr</span>&nbsp;<span class="op" id="2325908">==</span>&nbsp;<span class="ident" id="2325911">sr</span><span class="op" id="2325913">+</span><span class="string" id="2325914">&#39;a&#39;</span><span class="op" id="2325917">-</span><span class="string" id="2325918">&#39;A&#39;</span>&nbsp;<span class="op" id="2325922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325928">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325940">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325945">return</span>&nbsp;<span class="builtintype" id="2325952">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325965">//&nbsp;General&nbsp;case.&nbsp;&nbsp;SimpleFold(x)&nbsp;returns&nbsp;the&nbsp;next&nbsp;equivalent&nbsp;rune&nbsp;&gt;&nbsp;x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2326036">//&nbsp;or&nbsp;wraps&nbsp;around&nbsp;to&nbsp;smaller&nbsp;values.</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326076">r</span>&nbsp;<span class="op" id="2326078">:=</span>&nbsp;<span class="ident" id="2326081">unicode</span><span class="op" id="2326088">.</span><span class="ident" id="2326089">SimpleFold</span><span class="op" id="2326099">(</span><span class="ident" id="2326100">sr</span><span class="op" id="2326102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326106">for</span>&nbsp;<span class="ident" id="2326110">r</span>&nbsp;<span class="op" id="2326112">!=</span>&nbsp;<span class="ident" id="2326115">sr</span>&nbsp;<span class="op" id="2326118">&amp;&amp;</span>&nbsp;<span class="ident" id="2326121">r</span>&nbsp;<span class="op" id="2326123">&lt;</span>&nbsp;<span class="ident" id="2326125">tr</span>&nbsp;<span class="op" id="2326128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326133">r</span>&nbsp;<span class="op" id="2326135">=</span>&nbsp;<span class="ident" id="2326137">unicode</span><span class="op" id="2326144">.</span><span class="ident" id="2326145">SimpleFold</span><span class="op" id="2326155">(</span><span class="ident" id="2326156">r</span><span class="op" id="2326157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326165">if</span>&nbsp;<span class="ident" id="2326168">r</span>&nbsp;<span class="op" id="2326170">==</span>&nbsp;<span class="ident" id="2326173">tr</span>&nbsp;<span class="op" id="2326176">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326181">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326196">return</span>&nbsp;<span class="builtintype" id="2326203">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2326214">//&nbsp;One&nbsp;string&nbsp;is&nbsp;empty.&nbsp;&nbsp;Are&nbsp;both?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326250">return</span>&nbsp;<span class="ident" id="2326257">s</span>&nbsp;<span class="op" id="2326259">==</span>&nbsp;<span class="ident" id="2326262">t</span><br>
<span class="lineno"></span><span class="op" id="2326264">}</span>
</div>
</body>
</html>
