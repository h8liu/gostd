<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6382947">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6383002">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6383056">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6383107">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6383175">//</span><br>
<span class="lineno"></span><span class="comment" id="6383178">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6383256">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6383331">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6383381">//</span><br>
<span class="lineno"></span><span class="comment" id="6383384">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6383408">//</span><br>
<span class="lineno"></span><span class="comment" id="6383411">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6383457">//</span><br>
<span class="lineno">15</span><span class="comment" id="6383460">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6383528">//</span><br>
<span class="lineno"></span><span class="comment" id="6383531">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6383610">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6383675">//</span><br>
<span class="lineno">20</span><span class="comment" id="6383678">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6383747">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6383817">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6383827">//</span><br>
<span class="lineno"></span><span class="comment" id="6383830">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6383845">//</span><br>
<span class="lineno"></span><span class="comment" id="6383848">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6383880">//</span><br>
<span class="lineno"></span><span class="comment" id="6383883">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6383908">//</span><br>
<span class="lineno">30</span><span class="comment" id="6383911">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6383948">//</span><br>
<span class="lineno"></span><span class="comment" id="6383951">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6384021">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6384064">//</span><br>
<span class="lineno">35</span><span class="comment" id="6384067">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6384114">//</span><br>
<span class="lineno"></span><span class="comment" id="6384117">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6384131">//</span><br>
<span class="lineno"></span><span class="comment" id="6384134">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6384180">//</span><br>
<span class="lineno"></span><span class="comment" id="6384183">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6384240">//</span><br>
<span class="lineno"></span><span class="comment" id="6384243">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6384258">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6384281">//</span><br>
<span class="lineno"></span><span class="comment" id="6384284">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6384298">//</span><br>
<span class="lineno"></span><span class="comment" id="6384301">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6384317">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6384342">package</span>&nbsp;<span class="ident" id="6384350">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6384355">import</span>&nbsp;<span class="op" id="6384362">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384365">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384374">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384383">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384393">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384400">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6384406">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6384416">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6384419">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6384467">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6384515">type</span>&nbsp;<span class="ident" id="6384520">ParseError</span>&nbsp;<span class="keyword" id="6384531">struct</span>&nbsp;<span class="op" id="6384538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384541">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6384548">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6384554">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384588">Column</span>&nbsp;<span class="builtintype" id="6384595">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6384601">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384650">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6384657">error</span>&nbsp;<span class="comment" id="6384663">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6384683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6384686">func</span>&nbsp;<span class="op" id="6384691">(</span><span class="ident" id="6384692">e</span>&nbsp;<span class="op" id="6384694">*</span><span class="ident" id="6384695">ParseError</span><span class="op" id="6384705">)</span>&nbsp;<span class="ident" id="6384707">Error</span><span class="op" id="6384712">(</span><span class="op" id="6384713">)</span>&nbsp;<span class="builtintype" id="6384715">string</span>&nbsp;<span class="op" id="6384722">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384725">return</span>&nbsp;<span class="ident" id="6384732">fmt</span><span class="op" id="6384735">.</span><span class="ident" id="6384736">Sprintf</span><span class="op" id="6384743">(</span><span class="string" id="6384744">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6384768">,</span>&nbsp;<span class="ident" id="6384770">e</span><span class="op" id="6384771">.</span><span class="ident" id="6384772">Line</span><span class="op" id="6384776">,</span>&nbsp;<span class="ident" id="6384778">e</span><span class="op" id="6384779">.</span><span class="ident" id="6384780">Column</span><span class="op" id="6384786">,</span>&nbsp;<span class="ident" id="6384788">e</span><span class="op" id="6384789">.</span><span class="ident" id="6384790">Err</span><span class="op" id="6384793">)</span><br>
<span class="lineno"></span><span class="op" id="6384795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6384798">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6384863">var</span>&nbsp;<span class="op" id="6384867">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384870">ErrTrailingComma</span>&nbsp;<span class="op" id="6384887">=</span>&nbsp;<span class="ident" id="6384889">errors</span><span class="op" id="6384895">.</span><span class="ident" id="6384896">New</span><span class="op" id="6384899">(</span><span class="string" id="6384900">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6384932">)</span>&nbsp;<span class="comment" id="6384934">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384953">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6384970">=</span>&nbsp;<span class="ident" id="6384972">errors</span><span class="op" id="6384978">.</span><span class="ident" id="6384979">New</span><span class="op" id="6384982">(</span><span class="string" id="6384983">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6385012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385015">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6385032">=</span>&nbsp;<span class="ident" id="6385034">errors</span><span class="op" id="6385040">.</span><span class="ident" id="6385041">New</span><span class="op" id="6385044">(</span><span class="string" id="6385045">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6385069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385072">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6385089">=</span>&nbsp;<span class="ident" id="6385091">errors</span><span class="op" id="6385097">.</span><span class="ident" id="6385098">New</span><span class="op" id="6385101">(</span><span class="string" id="6385102">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6385134">)</span><br>
<span class="lineno"></span><span class="op" id="6385136">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6385139">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6385190">//</span><br>
<span class="lineno"></span><span class="comment" id="6385193">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6385269">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6385343">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6385377">//</span><br>
<span class="lineno"></span><span class="comment" id="6385380">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6385434">//</span><br>
<span class="lineno"></span><span class="comment" id="6385437">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6385510">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6385544">//</span><br>
<span class="lineno"></span><span class="comment" id="6385547">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6385611">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6385689">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6385762">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6385837">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6385895">//</span><br>
<span class="lineno"></span><span class="comment" id="6385898">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6385970">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6386021">//</span><br>
<span class="lineno"></span><span class="comment" id="6386024">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6386099">type</span>&nbsp;<span class="ident" id="6386104">Reader</span>&nbsp;<span class="keyword" id="6386111">struct</span>&nbsp;<span class="op" id="6386118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386121">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386138">rune</span>&nbsp;<span class="comment" id="6386143">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386189">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386206">rune</span>&nbsp;<span class="comment" id="6386211">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386251">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6386268">int</span>&nbsp;&nbsp;<span class="comment" id="6386273">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386314">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386331">bool</span>&nbsp;<span class="comment" id="6386336">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386358">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386375">bool</span>&nbsp;<span class="comment" id="6386380">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386426">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6386443">bool</span>&nbsp;<span class="comment" id="6386448">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386471">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386488">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386493">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386510">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386515">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6386532">*</span><span class="ident" id="6386533">bufio</span><span class="op" id="6386538">.</span><span class="ident" id="6386539">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386547">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6386564">bytes</span><span class="op" id="6386569">.</span><span class="ident" id="6386570">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6386577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6386580">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6386633">func</span>&nbsp;<span class="ident" id="6386638">NewReader</span><span class="op" id="6386647">(</span><span class="ident" id="6386648">r</span>&nbsp;<span class="ident" id="6386650">io</span><span class="op" id="6386652">.</span><span class="ident" id="6386653">Reader</span><span class="op" id="6386659">)</span>&nbsp;<span class="op" id="6386661">*</span><span class="ident" id="6386662">Reader</span>&nbsp;<span class="op" id="6386669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386672">return</span>&nbsp;<span class="op" id="6386679">&amp;</span><span class="ident" id="6386680">Reader</span><span class="op" id="6386686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386690">Comma</span><span class="op" id="6386695">:</span>&nbsp;<span class="string" id="6386697">&#39;,&#39;</span><span class="op" id="6386700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386704">r</span><span class="op" id="6386705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6386711">bufio</span><span class="op" id="6386716">.</span><span class="ident" id="6386717">NewReader</span><span class="op" id="6386726">(</span><span class="ident" id="6386727">r</span><span class="op" id="6386728">)</span><span class="op" id="6386729">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386732">}</span><br>
<span class="lineno"></span><span class="op" id="6386734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386737">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6386785">func</span>&nbsp;<span class="op" id="6386790">(</span><span class="ident" id="6386791">r</span>&nbsp;<span class="op" id="6386793">*</span><span class="ident" id="6386794">Reader</span><span class="op" id="6386800">)</span>&nbsp;<span class="builtintype" id="6386802">error</span><span class="op" id="6386807">(</span><span class="ident" id="6386808">err</span>&nbsp;<span class="builtintype" id="6386812">error</span><span class="op" id="6386817">)</span>&nbsp;<span class="builtintype" id="6386819">error</span>&nbsp;<span class="op" id="6386825">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386828">return</span>&nbsp;<span class="op" id="6386835">&amp;</span><span class="ident" id="6386836">ParseError</span><span class="op" id="6386846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386850">Line</span><span class="op" id="6386854">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6386858">r</span><span class="op" id="6386859">.</span><span class="ident" id="6386860">line</span><span class="op" id="6386864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386868">Column</span><span class="op" id="6386874">:</span>&nbsp;<span class="ident" id="6386876">r</span><span class="op" id="6386877">.</span><span class="ident" id="6386878">column</span><span class="op" id="6386884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386888">Err</span><span class="op" id="6386891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6386896">err</span><span class="op" id="6386899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386902">}</span><br>
<span class="lineno">130</span><span class="op" id="6386904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386907">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6386984">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6387018">func</span>&nbsp;<span class="op" id="6387023">(</span><span class="ident" id="6387024">r</span>&nbsp;<span class="op" id="6387026">*</span><span class="ident" id="6387027">Reader</span><span class="op" id="6387033">)</span>&nbsp;<span class="ident" id="6387035">Read</span><span class="op" id="6387039">(</span><span class="op" id="6387040">)</span>&nbsp;<span class="op" id="6387042">(</span><span class="ident" id="6387043">record</span>&nbsp;<span class="op" id="6387050">[</span><span class="op" id="6387051">]</span><span class="builtintype" id="6387052">string</span><span class="op" id="6387058">,</span>&nbsp;<span class="ident" id="6387060">err</span>&nbsp;<span class="builtintype" id="6387064">error</span><span class="op" id="6387069">)</span>&nbsp;<span class="op" id="6387071">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387074">for</span>&nbsp;<span class="op" id="6387078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387082">record</span><span class="op" id="6387088">,</span>&nbsp;<span class="ident" id="6387090">err</span>&nbsp;<span class="op" id="6387094">=</span>&nbsp;<span class="ident" id="6387096">r</span><span class="op" id="6387097">.</span><span class="ident" id="6387098">parseRecord</span><span class="op" id="6387109">(</span><span class="op" id="6387110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387114">if</span>&nbsp;<span class="ident" id="6387117">record</span>&nbsp;<span class="op" id="6387124">!=</span>&nbsp;<span class="ident" id="6387127">nil</span>&nbsp;<span class="op" id="6387131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387136">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387144">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387148">if</span>&nbsp;<span class="ident" id="6387151">err</span>&nbsp;<span class="op" id="6387155">!=</span>&nbsp;<span class="ident" id="6387158">nil</span>&nbsp;<span class="op" id="6387162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387167">return</span>&nbsp;<span class="ident" id="6387174">nil</span><span class="op" id="6387177">,</span>&nbsp;<span class="ident" id="6387179">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387192">if</span>&nbsp;<span class="ident" id="6387195">r</span><span class="op" id="6387196">.</span><span class="ident" id="6387197">FieldsPerRecord</span>&nbsp;<span class="op" id="6387213">&gt;</span>&nbsp;<span class="num" id="6387215">0</span>&nbsp;<span class="op" id="6387217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387221">if</span>&nbsp;<span class="builtinfunc" id="6387224">len</span><span class="op" id="6387227">(</span><span class="ident" id="6387228">record</span><span class="op" id="6387234">)</span>&nbsp;<span class="op" id="6387236">!=</span>&nbsp;<span class="ident" id="6387239">r</span><span class="op" id="6387240">.</span><span class="ident" id="6387241">FieldsPerRecord</span>&nbsp;<span class="op" id="6387257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387262">r</span><span class="op" id="6387263">.</span><span class="ident" id="6387264">column</span>&nbsp;<span class="op" id="6387271">=</span>&nbsp;<span class="num" id="6387273">0</span>&nbsp;<span class="comment" id="6387275">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387307">return</span>&nbsp;<span class="ident" id="6387314">record</span><span class="op" id="6387320">,</span>&nbsp;<span class="ident" id="6387322">r</span><span class="op" id="6387323">.</span><span class="builtintype" id="6387324">error</span><span class="op" id="6387329">(</span><span class="ident" id="6387330">ErrFieldCount</span><span class="op" id="6387343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387347">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387350">}</span>&nbsp;<span class="keyword" id="6387352">else</span>&nbsp;<span class="keyword" id="6387357">if</span>&nbsp;<span class="ident" id="6387360">r</span><span class="op" id="6387361">.</span><span class="ident" id="6387362">FieldsPerRecord</span>&nbsp;<span class="op" id="6387378">==</span>&nbsp;<span class="num" id="6387381">0</span>&nbsp;<span class="op" id="6387383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387387">r</span><span class="op" id="6387388">.</span><span class="ident" id="6387389">FieldsPerRecord</span>&nbsp;<span class="op" id="6387405">=</span>&nbsp;<span class="builtinfunc" id="6387407">len</span><span class="op" id="6387410">(</span><span class="ident" id="6387411">record</span><span class="op" id="6387417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387423">return</span>&nbsp;<span class="ident" id="6387430">record</span><span class="op" id="6387436">,</span>&nbsp;<span class="ident" id="6387438">nil</span><br>
<span class="lineno"></span><span class="op" id="6387442">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6387445">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6387496">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6387533">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6387609">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6387687">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6387700">func</span>&nbsp;<span class="op" id="6387705">(</span><span class="ident" id="6387706">r</span>&nbsp;<span class="op" id="6387708">*</span><span class="ident" id="6387709">Reader</span><span class="op" id="6387715">)</span>&nbsp;<span class="ident" id="6387717">ReadAll</span><span class="op" id="6387724">(</span><span class="op" id="6387725">)</span>&nbsp;<span class="op" id="6387727">(</span><span class="ident" id="6387728">records</span>&nbsp;<span class="op" id="6387736">[</span><span class="op" id="6387737">]</span><span class="op" id="6387738">[</span><span class="op" id="6387739">]</span><span class="builtintype" id="6387740">string</span><span class="op" id="6387746">,</span>&nbsp;<span class="ident" id="6387748">err</span>&nbsp;<span class="builtintype" id="6387752">error</span><span class="op" id="6387757">)</span>&nbsp;<span class="op" id="6387759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387762">for</span>&nbsp;<span class="op" id="6387766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387770">record</span><span class="op" id="6387776">,</span>&nbsp;<span class="ident" id="6387778">err</span>&nbsp;<span class="op" id="6387782">:=</span>&nbsp;<span class="ident" id="6387785">r</span><span class="op" id="6387786">.</span><span class="ident" id="6387787">Read</span><span class="op" id="6387791">(</span><span class="op" id="6387792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387796">if</span>&nbsp;<span class="ident" id="6387799">err</span>&nbsp;<span class="op" id="6387803">==</span>&nbsp;<span class="ident" id="6387806">io</span><span class="op" id="6387808">.</span><span class="ident" id="6387809">EOF</span>&nbsp;<span class="op" id="6387813">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387818">return</span>&nbsp;<span class="ident" id="6387825">records</span><span class="op" id="6387832">,</span>&nbsp;<span class="ident" id="6387834">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387844">if</span>&nbsp;<span class="ident" id="6387847">err</span>&nbsp;<span class="op" id="6387851">!=</span>&nbsp;<span class="ident" id="6387854">nil</span>&nbsp;<span class="op" id="6387858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387863">return</span>&nbsp;<span class="ident" id="6387870">nil</span><span class="op" id="6387873">,</span>&nbsp;<span class="ident" id="6387875">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387881">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387885">records</span>&nbsp;<span class="op" id="6387893">=</span>&nbsp;<span class="builtinfunc" id="6387895">append</span><span class="op" id="6387901">(</span><span class="ident" id="6387902">records</span><span class="op" id="6387909">,</span>&nbsp;<span class="ident" id="6387911">record</span><span class="op" id="6387917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387920">}</span><br>
<span class="lineno"></span><span class="op" id="6387922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6387925">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6387997">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6388073">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6388116">func</span>&nbsp;<span class="op" id="6388121">(</span><span class="ident" id="6388122">r</span>&nbsp;<span class="op" id="6388124">*</span><span class="ident" id="6388125">Reader</span><span class="op" id="6388131">)</span>&nbsp;<span class="ident" id="6388133">readRune</span><span class="op" id="6388141">(</span><span class="op" id="6388142">)</span>&nbsp;<span class="op" id="6388144">(</span><span class="builtintype" id="6388145">rune</span><span class="op" id="6388149">,</span>&nbsp;<span class="builtintype" id="6388151">error</span><span class="op" id="6388156">)</span>&nbsp;<span class="op" id="6388158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388161">r1</span><span class="op" id="6388163">,</span>&nbsp;<span class="ident" id="6388165">_</span><span class="op" id="6388166">,</span>&nbsp;<span class="ident" id="6388168">err</span>&nbsp;<span class="op" id="6388172">:=</span>&nbsp;<span class="ident" id="6388175">r</span><span class="op" id="6388176">.</span><span class="ident" id="6388177">r</span><span class="op" id="6388178">.</span><span class="ident" id="6388179">ReadRune</span><span class="op" id="6388187">(</span><span class="op" id="6388188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388192">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388255">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388317">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388383">if</span>&nbsp;<span class="ident" id="6388386">r1</span>&nbsp;<span class="op" id="6388389">==</span>&nbsp;<span class="string" id="6388392">&#39;\r&#39;</span>&nbsp;<span class="op" id="6388397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388401">r1</span><span class="op" id="6388403">,</span>&nbsp;<span class="ident" id="6388405">_</span><span class="op" id="6388406">,</span>&nbsp;<span class="ident" id="6388408">err</span>&nbsp;<span class="op" id="6388412">=</span>&nbsp;<span class="ident" id="6388414">r</span><span class="op" id="6388415">.</span><span class="ident" id="6388416">r</span><span class="op" id="6388417">.</span><span class="ident" id="6388418">ReadRune</span><span class="op" id="6388426">(</span><span class="op" id="6388427">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388431">if</span>&nbsp;<span class="ident" id="6388434">err</span>&nbsp;<span class="op" id="6388438">==</span>&nbsp;<span class="ident" id="6388441">nil</span>&nbsp;<span class="op" id="6388445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388450">if</span>&nbsp;<span class="ident" id="6388453">r1</span>&nbsp;<span class="op" id="6388456">!=</span>&nbsp;<span class="string" id="6388459">&#39;\n&#39;</span>&nbsp;<span class="op" id="6388464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388470">r</span><span class="op" id="6388471">.</span><span class="ident" id="6388472">r</span><span class="op" id="6388473">.</span><span class="ident" id="6388474">UnreadRune</span><span class="op" id="6388484">(</span><span class="op" id="6388485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388491">r1</span>&nbsp;<span class="op" id="6388494">=</span>&nbsp;<span class="string" id="6388496">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388504">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388514">r</span><span class="op" id="6388515">.</span><span class="ident" id="6388516">column</span><span class="op" id="6388522">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388526">return</span>&nbsp;<span class="ident" id="6388533">r1</span><span class="op" id="6388535">,</span>&nbsp;<span class="ident" id="6388537">err</span><br>
<span class="lineno"></span><span class="op" id="6388541">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6388544">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6388615">func</span>&nbsp;<span class="op" id="6388620">(</span><span class="ident" id="6388621">r</span>&nbsp;<span class="op" id="6388623">*</span><span class="ident" id="6388624">Reader</span><span class="op" id="6388630">)</span>&nbsp;<span class="ident" id="6388632">skip</span><span class="op" id="6388636">(</span><span class="ident" id="6388637">delim</span>&nbsp;<span class="builtintype" id="6388643">rune</span><span class="op" id="6388647">)</span>&nbsp;<span class="builtintype" id="6388649">error</span>&nbsp;<span class="op" id="6388655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388658">for</span>&nbsp;<span class="op" id="6388662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388666">r1</span><span class="op" id="6388668">,</span>&nbsp;<span class="ident" id="6388670">err</span>&nbsp;<span class="op" id="6388674">:=</span>&nbsp;<span class="ident" id="6388677">r</span><span class="op" id="6388678">.</span><span class="ident" id="6388679">readRune</span><span class="op" id="6388687">(</span><span class="op" id="6388688">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388692">if</span>&nbsp;<span class="ident" id="6388695">err</span>&nbsp;<span class="op" id="6388699">!=</span>&nbsp;<span class="ident" id="6388702">nil</span>&nbsp;<span class="op" id="6388706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388711">return</span>&nbsp;<span class="ident" id="6388718">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388728">if</span>&nbsp;<span class="ident" id="6388731">r1</span>&nbsp;<span class="op" id="6388734">==</span>&nbsp;<span class="ident" id="6388737">delim</span>&nbsp;<span class="op" id="6388743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388748">return</span>&nbsp;<span class="ident" id="6388755">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388764">}</span><br>
<span class="lineno"></span><span class="op" id="6388766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6388769">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6388829">func</span>&nbsp;<span class="op" id="6388834">(</span><span class="ident" id="6388835">r</span>&nbsp;<span class="op" id="6388837">*</span><span class="ident" id="6388838">Reader</span><span class="op" id="6388844">)</span>&nbsp;<span class="ident" id="6388846">parseRecord</span><span class="op" id="6388857">(</span><span class="op" id="6388858">)</span>&nbsp;<span class="op" id="6388860">(</span><span class="ident" id="6388861">fields</span>&nbsp;<span class="op" id="6388868">[</span><span class="op" id="6388869">]</span><span class="builtintype" id="6388870">string</span><span class="op" id="6388876">,</span>&nbsp;<span class="ident" id="6388878">err</span>&nbsp;<span class="builtintype" id="6388882">error</span><span class="op" id="6388887">)</span>&nbsp;<span class="op" id="6388889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388892">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388953">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6389011">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389082">r</span><span class="op" id="6389083">.</span><span class="ident" id="6389084">line</span><span class="op" id="6389088">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389092">r</span><span class="op" id="6389093">.</span><span class="ident" id="6389094">column</span>&nbsp;<span class="op" id="6389101">=</span>&nbsp;<span class="op" id="6389103">-</span><span class="num" id="6389104">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6389108">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6389168">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6389231">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389266">r1</span><span class="op" id="6389268">,</span>&nbsp;<span class="ident" id="6389270">_</span><span class="op" id="6389271">,</span>&nbsp;<span class="ident" id="6389273">err</span>&nbsp;<span class="op" id="6389277">:=</span>&nbsp;<span class="ident" id="6389280">r</span><span class="op" id="6389281">.</span><span class="ident" id="6389282">r</span><span class="op" id="6389283">.</span><span class="ident" id="6389284">ReadRune</span><span class="op" id="6389292">(</span><span class="op" id="6389293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389296">if</span>&nbsp;<span class="ident" id="6389299">err</span>&nbsp;<span class="op" id="6389303">!=</span>&nbsp;<span class="ident" id="6389306">nil</span>&nbsp;<span class="op" id="6389310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389314">return</span>&nbsp;<span class="ident" id="6389321">nil</span><span class="op" id="6389324">,</span>&nbsp;<span class="ident" id="6389326">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389331">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389335">if</span>&nbsp;<span class="ident" id="6389338">r</span><span class="op" id="6389339">.</span><span class="ident" id="6389340">Comment</span>&nbsp;<span class="op" id="6389348">!=</span>&nbsp;<span class="num" id="6389351">0</span>&nbsp;<span class="op" id="6389353">&amp;&amp;</span>&nbsp;<span class="ident" id="6389356">r1</span>&nbsp;<span class="op" id="6389359">==</span>&nbsp;<span class="ident" id="6389362">r</span><span class="op" id="6389363">.</span><span class="ident" id="6389364">Comment</span>&nbsp;<span class="op" id="6389372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389376">return</span>&nbsp;<span class="ident" id="6389383">nil</span><span class="op" id="6389386">,</span>&nbsp;<span class="ident" id="6389388">r</span><span class="op" id="6389389">.</span><span class="ident" id="6389390">skip</span><span class="op" id="6389394">(</span><span class="string" id="6389395">&#39;\n&#39;</span><span class="op" id="6389399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389405">r</span><span class="op" id="6389406">.</span><span class="ident" id="6389407">r</span><span class="op" id="6389408">.</span><span class="ident" id="6389409">UnreadRune</span><span class="op" id="6389419">(</span><span class="op" id="6389420">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6389424">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389470">for</span>&nbsp;<span class="op" id="6389474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389478">haveField</span><span class="op" id="6389487">,</span>&nbsp;<span class="ident" id="6389489">delim</span><span class="op" id="6389494">,</span>&nbsp;<span class="ident" id="6389496">err</span>&nbsp;<span class="op" id="6389500">:=</span>&nbsp;<span class="ident" id="6389503">r</span><span class="op" id="6389504">.</span><span class="ident" id="6389505">parseField</span><span class="op" id="6389515">(</span><span class="op" id="6389516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389520">if</span>&nbsp;<span class="ident" id="6389523">haveField</span>&nbsp;<span class="op" id="6389533">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389538">fields</span>&nbsp;<span class="op" id="6389545">=</span>&nbsp;<span class="builtinfunc" id="6389547">append</span><span class="op" id="6389553">(</span><span class="ident" id="6389554">fields</span><span class="op" id="6389560">,</span>&nbsp;<span class="ident" id="6389562">r</span><span class="op" id="6389563">.</span><span class="ident" id="6389564">field</span><span class="op" id="6389569">.</span><span class="ident" id="6389570">String</span><span class="op" id="6389576">(</span><span class="op" id="6389577">)</span><span class="op" id="6389578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389586">if</span>&nbsp;<span class="ident" id="6389589">delim</span>&nbsp;<span class="op" id="6389595">==</span>&nbsp;<span class="string" id="6389598">&#39;\n&#39;</span>&nbsp;<span class="op" id="6389603">||</span>&nbsp;<span class="ident" id="6389606">err</span>&nbsp;<span class="op" id="6389610">==</span>&nbsp;<span class="ident" id="6389613">io</span><span class="op" id="6389615">.</span><span class="ident" id="6389616">EOF</span>&nbsp;<span class="op" id="6389620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389625">return</span>&nbsp;<span class="ident" id="6389632">fields</span><span class="op" id="6389638">,</span>&nbsp;<span class="ident" id="6389640">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389646">}</span>&nbsp;<span class="keyword" id="6389648">else</span>&nbsp;<span class="keyword" id="6389653">if</span>&nbsp;<span class="ident" id="6389656">err</span>&nbsp;<span class="op" id="6389660">!=</span>&nbsp;<span class="ident" id="6389663">nil</span>&nbsp;<span class="op" id="6389667">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389672">return</span>&nbsp;<span class="ident" id="6389679">nil</span><span class="op" id="6389682">,</span>&nbsp;<span class="ident" id="6389684">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389693">}</span><br>
<span class="lineno"></span><span class="op" id="6389695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6389698">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6389768">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6389843">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6389865">func</span>&nbsp;<span class="op" id="6389870">(</span><span class="ident" id="6389871">r</span>&nbsp;<span class="op" id="6389873">*</span><span class="ident" id="6389874">Reader</span><span class="op" id="6389880">)</span>&nbsp;<span class="ident" id="6389882">parseField</span><span class="op" id="6389892">(</span><span class="op" id="6389893">)</span>&nbsp;<span class="op" id="6389895">(</span><span class="ident" id="6389896">haveField</span>&nbsp;<span class="builtintype" id="6389906">bool</span><span class="op" id="6389910">,</span>&nbsp;<span class="ident" id="6389912">delim</span>&nbsp;<span class="builtintype" id="6389918">rune</span><span class="op" id="6389922">,</span>&nbsp;<span class="ident" id="6389924">err</span>&nbsp;<span class="builtintype" id="6389928">error</span><span class="op" id="6389933">)</span>&nbsp;<span class="op" id="6389935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389938">r</span><span class="op" id="6389939">.</span><span class="ident" id="6389940">field</span><span class="op" id="6389945">.</span><span class="ident" id="6389946">Reset</span><span class="op" id="6389951">(</span><span class="op" id="6389952">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389956">r1</span><span class="op" id="6389958">,</span>&nbsp;<span class="ident" id="6389960">err</span>&nbsp;<span class="op" id="6389964">:=</span>&nbsp;<span class="ident" id="6389967">r</span><span class="op" id="6389968">.</span><span class="ident" id="6389969">readRune</span><span class="op" id="6389977">(</span><span class="op" id="6389978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389981">for</span>&nbsp;<span class="ident" id="6389985">err</span>&nbsp;<span class="op" id="6389989">==</span>&nbsp;<span class="ident" id="6389992">nil</span>&nbsp;<span class="op" id="6389996">&amp;&amp;</span>&nbsp;<span class="ident" id="6389999">r</span><span class="op" id="6390000">.</span><span class="ident" id="6390001">TrimLeadingSpace</span>&nbsp;<span class="op" id="6390018">&amp;&amp;</span>&nbsp;<span class="ident" id="6390021">r1</span>&nbsp;<span class="op" id="6390024">!=</span>&nbsp;<span class="string" id="6390027">&#39;\n&#39;</span>&nbsp;<span class="op" id="6390032">&amp;&amp;</span>&nbsp;<span class="ident" id="6390035">unicode</span><span class="op" id="6390042">.</span><span class="ident" id="6390043">IsSpace</span><span class="op" id="6390050">(</span><span class="ident" id="6390051">r1</span><span class="op" id="6390053">)</span>&nbsp;<span class="op" id="6390055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390059">r1</span><span class="op" id="6390061">,</span>&nbsp;<span class="ident" id="6390063">err</span>&nbsp;<span class="op" id="6390067">=</span>&nbsp;<span class="ident" id="6390069">r</span><span class="op" id="6390070">.</span><span class="ident" id="6390071">readRune</span><span class="op" id="6390079">(</span><span class="op" id="6390080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390083">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390087">if</span>&nbsp;<span class="ident" id="6390090">err</span>&nbsp;<span class="op" id="6390094">==</span>&nbsp;<span class="ident" id="6390097">io</span><span class="op" id="6390099">.</span><span class="ident" id="6390100">EOF</span>&nbsp;<span class="op" id="6390104">&amp;&amp;</span>&nbsp;<span class="ident" id="6390107">r</span><span class="op" id="6390108">.</span><span class="ident" id="6390109">column</span>&nbsp;<span class="op" id="6390116">!=</span>&nbsp;<span class="num" id="6390119">0</span>&nbsp;<span class="op" id="6390121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390125">return</span>&nbsp;<span class="builtintype" id="6390132">true</span><span class="op" id="6390136">,</span>&nbsp;<span class="num" id="6390138">0</span><span class="op" id="6390139">,</span>&nbsp;<span class="ident" id="6390141">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390149">if</span>&nbsp;<span class="ident" id="6390152">err</span>&nbsp;<span class="op" id="6390156">!=</span>&nbsp;<span class="ident" id="6390159">nil</span>&nbsp;<span class="op" id="6390163">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390167">return</span>&nbsp;<span class="builtintype" id="6390174">false</span><span class="op" id="6390179">,</span>&nbsp;<span class="num" id="6390181">0</span><span class="op" id="6390182">,</span>&nbsp;<span class="ident" id="6390184">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390193">switch</span>&nbsp;<span class="ident" id="6390200">r1</span>&nbsp;<span class="op" id="6390203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390206">case</span>&nbsp;<span class="ident" id="6390211">r</span><span class="op" id="6390212">.</span><span class="ident" id="6390213">Comma</span><span class="op" id="6390218">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390222">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390244">case</span>&nbsp;<span class="string" id="6390249">&#39;\n&#39;</span><span class="op" id="6390253">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390257">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390308">if</span>&nbsp;<span class="ident" id="6390311">r</span><span class="op" id="6390312">.</span><span class="ident" id="6390313">column</span>&nbsp;<span class="op" id="6390320">==</span>&nbsp;<span class="num" id="6390323">0</span>&nbsp;<span class="op" id="6390325">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390330">return</span>&nbsp;<span class="builtintype" id="6390337">false</span><span class="op" id="6390342">,</span>&nbsp;<span class="ident" id="6390344">r1</span><span class="op" id="6390346">,</span>&nbsp;<span class="ident" id="6390348">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390358">return</span>&nbsp;<span class="builtintype" id="6390365">true</span><span class="op" id="6390369">,</span>&nbsp;<span class="ident" id="6390371">r1</span><span class="op" id="6390373">,</span>&nbsp;<span class="ident" id="6390375">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390381">case</span>&nbsp;<span class="string" id="6390386">&#39;&#34;&#39;</span><span class="op" id="6390389">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390393">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390410">Quoted</span><span class="op" id="6390416">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390420">for</span>&nbsp;<span class="op" id="6390424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390429">r1</span><span class="op" id="6390431">,</span>&nbsp;<span class="ident" id="6390433">err</span>&nbsp;<span class="op" id="6390437">=</span>&nbsp;<span class="ident" id="6390439">r</span><span class="op" id="6390440">.</span><span class="ident" id="6390441">readRune</span><span class="op" id="6390449">(</span><span class="op" id="6390450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390455">if</span>&nbsp;<span class="ident" id="6390458">err</span>&nbsp;<span class="op" id="6390462">!=</span>&nbsp;<span class="ident" id="6390465">nil</span>&nbsp;<span class="op" id="6390469">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390475">if</span>&nbsp;<span class="ident" id="6390478">err</span>&nbsp;<span class="op" id="6390482">==</span>&nbsp;<span class="ident" id="6390485">io</span><span class="op" id="6390487">.</span><span class="ident" id="6390488">EOF</span>&nbsp;<span class="op" id="6390492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390499">if</span>&nbsp;<span class="ident" id="6390502">r</span><span class="op" id="6390503">.</span><span class="ident" id="6390504">LazyQuotes</span>&nbsp;<span class="op" id="6390515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390523">return</span>&nbsp;<span class="builtintype" id="6390530">true</span><span class="op" id="6390534">,</span>&nbsp;<span class="num" id="6390536">0</span><span class="op" id="6390537">,</span>&nbsp;<span class="ident" id="6390539">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390555">return</span>&nbsp;<span class="builtintype" id="6390562">false</span><span class="op" id="6390567">,</span>&nbsp;<span class="num" id="6390569">0</span><span class="op" id="6390570">,</span>&nbsp;<span class="ident" id="6390572">r</span><span class="op" id="6390573">.</span><span class="builtintype" id="6390574">error</span><span class="op" id="6390579">(</span><span class="ident" id="6390580">ErrQuote</span><span class="op" id="6390588">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390600">return</span>&nbsp;<span class="builtintype" id="6390607">false</span><span class="op" id="6390612">,</span>&nbsp;<span class="num" id="6390614">0</span><span class="op" id="6390615">,</span>&nbsp;<span class="ident" id="6390617">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390629">switch</span>&nbsp;<span class="ident" id="6390636">r1</span>&nbsp;<span class="op" id="6390639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390644">case</span>&nbsp;<span class="string" id="6390649">&#39;&#34;&#39;</span><span class="op" id="6390652">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390658">r1</span><span class="op" id="6390660">,</span>&nbsp;<span class="ident" id="6390662">err</span>&nbsp;<span class="op" id="6390666">=</span>&nbsp;<span class="ident" id="6390668">r</span><span class="op" id="6390669">.</span><span class="ident" id="6390670">readRune</span><span class="op" id="6390678">(</span><span class="op" id="6390679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390685">if</span>&nbsp;<span class="ident" id="6390688">err</span>&nbsp;<span class="op" id="6390692">!=</span>&nbsp;<span class="ident" id="6390695">nil</span>&nbsp;<span class="op" id="6390699">||</span>&nbsp;<span class="ident" id="6390702">r1</span>&nbsp;<span class="op" id="6390705">==</span>&nbsp;<span class="ident" id="6390708">r</span><span class="op" id="6390709">.</span><span class="ident" id="6390710">Comma</span>&nbsp;<span class="op" id="6390716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390723">break</span>&nbsp;<span class="ident" id="6390729">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390746">if</span>&nbsp;<span class="ident" id="6390749">r1</span>&nbsp;<span class="op" id="6390752">==</span>&nbsp;<span class="string" id="6390755">&#39;\n&#39;</span>&nbsp;<span class="op" id="6390760">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390767">return</span>&nbsp;<span class="builtintype" id="6390774">true</span><span class="op" id="6390778">,</span>&nbsp;<span class="ident" id="6390780">r1</span><span class="op" id="6390782">,</span>&nbsp;<span class="ident" id="6390784">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390798">if</span>&nbsp;<span class="ident" id="6390801">r1</span>&nbsp;<span class="op" id="6390804">!=</span>&nbsp;<span class="string" id="6390807">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6390811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390818">if</span>&nbsp;<span class="op" id="6390821">!</span><span class="ident" id="6390822">r</span><span class="op" id="6390823">.</span><span class="ident" id="6390824">LazyQuotes</span>&nbsp;<span class="op" id="6390835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390843">r</span><span class="op" id="6390844">.</span><span class="ident" id="6390845">column</span><span class="op" id="6390851">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390860">return</span>&nbsp;<span class="builtintype" id="6390867">false</span><span class="op" id="6390872">,</span>&nbsp;<span class="num" id="6390874">0</span><span class="op" id="6390875">,</span>&nbsp;<span class="ident" id="6390877">r</span><span class="op" id="6390878">.</span><span class="builtintype" id="6390879">error</span><span class="op" id="6390884">(</span><span class="ident" id="6390885">ErrQuote</span><span class="op" id="6390893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390907">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390937">r</span><span class="op" id="6390938">.</span><span class="ident" id="6390939">field</span><span class="op" id="6390944">.</span><span class="ident" id="6390945">WriteRune</span><span class="op" id="6390954">(</span><span class="string" id="6390955">&#39;&#34;&#39;</span><span class="op" id="6390958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390964">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390969">case</span>&nbsp;<span class="string" id="6390974">&#39;\n&#39;</span><span class="op" id="6390978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390984">r</span><span class="op" id="6390985">.</span><span class="ident" id="6390986">line</span><span class="op" id="6390990">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390997">r</span><span class="op" id="6390998">.</span><span class="ident" id="6390999">column</span>&nbsp;<span class="op" id="6391006">=</span>&nbsp;<span class="op" id="6391008">-</span><span class="num" id="6391009">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391019">r</span><span class="op" id="6391020">.</span><span class="ident" id="6391021">field</span><span class="op" id="6391026">.</span><span class="ident" id="6391027">WriteRune</span><span class="op" id="6391036">(</span><span class="ident" id="6391037">r1</span><span class="op" id="6391039">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391047">default</span><span class="op" id="6391054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6391058">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391078">for</span>&nbsp;<span class="op" id="6391082">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391087">r</span><span class="op" id="6391088">.</span><span class="ident" id="6391089">field</span><span class="op" id="6391094">.</span><span class="ident" id="6391095">WriteRune</span><span class="op" id="6391104">(</span><span class="ident" id="6391105">r1</span><span class="op" id="6391107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391112">r1</span><span class="op" id="6391114">,</span>&nbsp;<span class="ident" id="6391116">err</span>&nbsp;<span class="op" id="6391120">=</span>&nbsp;<span class="ident" id="6391122">r</span><span class="op" id="6391123">.</span><span class="ident" id="6391124">readRune</span><span class="op" id="6391132">(</span><span class="op" id="6391133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391138">if</span>&nbsp;<span class="ident" id="6391141">err</span>&nbsp;<span class="op" id="6391145">!=</span>&nbsp;<span class="ident" id="6391148">nil</span>&nbsp;<span class="op" id="6391152">||</span>&nbsp;<span class="ident" id="6391155">r1</span>&nbsp;<span class="op" id="6391158">==</span>&nbsp;<span class="ident" id="6391161">r</span><span class="op" id="6391162">.</span><span class="ident" id="6391163">Comma</span>&nbsp;<span class="op" id="6391169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391175">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391184">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391189">if</span>&nbsp;<span class="ident" id="6391192">r1</span>&nbsp;<span class="op" id="6391195">==</span>&nbsp;<span class="string" id="6391198">&#39;\n&#39;</span>&nbsp;<span class="op" id="6391203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391209">return</span>&nbsp;<span class="builtintype" id="6391216">true</span><span class="op" id="6391220">,</span>&nbsp;<span class="ident" id="6391222">r1</span><span class="op" id="6391224">,</span>&nbsp;<span class="ident" id="6391226">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391238">if</span>&nbsp;<span class="op" id="6391241">!</span><span class="ident" id="6391242">r</span><span class="op" id="6391243">.</span><span class="ident" id="6391244">LazyQuotes</span>&nbsp;<span class="op" id="6391255">&amp;&amp;</span>&nbsp;<span class="ident" id="6391258">r1</span>&nbsp;<span class="op" id="6391261">==</span>&nbsp;<span class="string" id="6391264">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6391268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391274">return</span>&nbsp;<span class="builtintype" id="6391281">false</span><span class="op" id="6391286">,</span>&nbsp;<span class="num" id="6391288">0</span><span class="op" id="6391289">,</span>&nbsp;<span class="ident" id="6391291">r</span><span class="op" id="6391292">.</span><span class="builtintype" id="6391293">error</span><span class="op" id="6391298">(</span><span class="ident" id="6391299">ErrBareQuote</span><span class="op" id="6391311">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391327">if</span>&nbsp;<span class="ident" id="6391330">err</span>&nbsp;<span class="op" id="6391334">!=</span>&nbsp;<span class="ident" id="6391337">nil</span>&nbsp;<span class="op" id="6391341">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391345">if</span>&nbsp;<span class="ident" id="6391348">err</span>&nbsp;<span class="op" id="6391352">==</span>&nbsp;<span class="ident" id="6391355">io</span><span class="op" id="6391357">.</span><span class="ident" id="6391358">EOF</span>&nbsp;<span class="op" id="6391362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391367">return</span>&nbsp;<span class="builtintype" id="6391374">true</span><span class="op" id="6391378">,</span>&nbsp;<span class="num" id="6391380">0</span><span class="op" id="6391381">,</span>&nbsp;<span class="ident" id="6391383">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391393">return</span>&nbsp;<span class="builtintype" id="6391400">false</span><span class="op" id="6391405">,</span>&nbsp;<span class="num" id="6391407">0</span><span class="op" id="6391408">,</span>&nbsp;<span class="ident" id="6391410">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391415">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391419">return</span>&nbsp;<span class="builtintype" id="6391426">true</span><span class="op" id="6391430">,</span>&nbsp;<span class="ident" id="6391432">r1</span><span class="op" id="6391434">,</span>&nbsp;<span class="ident" id="6391436">nil</span><br>
<span class="lineno"></span><span class="op" id="6391440">}</span>
</div>
</body>
</html>
