<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3112614">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3112670">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3112724">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3112775">package</span>&nbsp;<span class="ident" id="3112783">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3112791">import</span>&nbsp;<span class="op" id="3112798">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112801">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112807">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112824">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112835">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112843">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3112850">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3112853">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3112877">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3112943">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3113011">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3113037">var</span>&nbsp;<span class="ident" id="3113041">rand</span>&nbsp;<span class="builtintype" id="3113046">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3113053">var</span>&nbsp;<span class="ident" id="3113057">randmu</span>&nbsp;<span class="ident" id="3113064">sync</span><span class="op" id="3113068">.</span><span class="ident" id="3113069">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3113076">func</span>&nbsp;<span class="ident" id="3113081">reseed</span><span class="op" id="3113087">(</span><span class="op" id="3113088">)</span>&nbsp;<span class="builtintype" id="3113090">uint32</span>&nbsp;<span class="op" id="3113097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113100">return</span>&nbsp;<span class="builtintype" id="3113107">uint32</span><span class="op" id="3113113">(</span><span class="ident" id="3113114">time</span><span class="op" id="3113118">.</span><span class="ident" id="3113119">Now</span><span class="op" id="3113122">(</span><span class="op" id="3113123">)</span><span class="op" id="3113124">.</span><span class="ident" id="3113125">UnixNano</span><span class="op" id="3113133">(</span><span class="op" id="3113134">)</span>&nbsp;<span class="op" id="3113136">+</span>&nbsp;<span class="ident" id="3113138">int64</span><span class="op" id="3113143">(</span><span class="ident" id="3113144">os</span><span class="op" id="3113146">.</span><span class="ident" id="3113147">Getpid</span><span class="op" id="3113153">(</span><span class="op" id="3113154">)</span><span class="op" id="3113155">)</span><span class="op" id="3113156">)</span><br>
<span class="lineno"></span><span class="op" id="3113158">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3113161">func</span>&nbsp;<span class="ident" id="3113166">nextSuffix</span><span class="op" id="3113176">(</span><span class="op" id="3113177">)</span>&nbsp;<span class="builtintype" id="3113179">string</span>&nbsp;<span class="op" id="3113186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113189">randmu</span><span class="op" id="3113195">.</span><span class="ident" id="3113196">Lock</span><span class="op" id="3113200">(</span><span class="op" id="3113201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113204">r</span>&nbsp;<span class="op" id="3113206">:=</span>&nbsp;<span class="ident" id="3113209">rand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113215">if</span>&nbsp;<span class="ident" id="3113218">r</span>&nbsp;<span class="op" id="3113220">==</span>&nbsp;<span class="num" id="3113223">0</span>&nbsp;<span class="op" id="3113225">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113229">r</span>&nbsp;<span class="op" id="3113231">=</span>&nbsp;<span class="ident" id="3113233">reseed</span><span class="op" id="3113239">(</span><span class="op" id="3113240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3113243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113246">r</span>&nbsp;<span class="op" id="3113248">=</span>&nbsp;<span class="ident" id="3113250">r</span><span class="op" id="3113251">*</span><span class="num" id="3113252">1664525</span>&nbsp;<span class="op" id="3113260">+</span>&nbsp;<span class="num" id="3113262">1013904223</span>&nbsp;<span class="comment" id="3113273">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113310">rand</span>&nbsp;<span class="op" id="3113315">=</span>&nbsp;<span class="ident" id="3113317">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113320">randmu</span><span class="op" id="3113326">.</span><span class="ident" id="3113327">Unlock</span><span class="op" id="3113333">(</span><span class="op" id="3113334">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113337">return</span>&nbsp;<span class="ident" id="3113344">strconv</span><span class="op" id="3113351">.</span><span class="ident" id="3113352">Itoa</span><span class="op" id="3113356">(</span><span class="builtintype" id="3113357">int</span><span class="op" id="3113360">(</span><span class="num" id="3113361">1e9</span>&nbsp;<span class="op" id="3113365">+</span>&nbsp;<span class="ident" id="3113367">r</span><span class="op" id="3113368">%</span><span class="num" id="3113369">1e9</span><span class="op" id="3113372">)</span><span class="op" id="3113373">)</span><span class="op" id="3113374">[</span><span class="num" id="3113375">1</span><span class="op" id="3113376">:</span><span class="op" id="3113377">]</span><br>
<span class="lineno"></span><span class="op" id="3113379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3113382">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3113444">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3113509">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3113561">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3113628">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3113669">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3113722">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3113785">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3113857">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3113902">func</span>&nbsp;<span class="ident" id="3113907">TempFile</span><span class="op" id="3113915">(</span><span class="ident" id="3113916">dir</span><span class="op" id="3113919">,</span>&nbsp;<span class="ident" id="3113921">prefix</span>&nbsp;<span class="builtintype" id="3113928">string</span><span class="op" id="3113934">)</span>&nbsp;<span class="op" id="3113936">(</span><span class="ident" id="3113937">f</span>&nbsp;<span class="op" id="3113939">*</span><span class="ident" id="3113940">os</span><span class="op" id="3113942">.</span><span class="ident" id="3113943">File</span><span class="op" id="3113947">,</span>&nbsp;<span class="ident" id="3113949">err</span>&nbsp;<span class="builtintype" id="3113953">error</span><span class="op" id="3113958">)</span>&nbsp;<span class="op" id="3113960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113963">if</span>&nbsp;<span class="ident" id="3113966">dir</span>&nbsp;<span class="op" id="3113970">==</span>&nbsp;<span class="string" id="3113973">&#34;&#34;</span>&nbsp;<span class="op" id="3113976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113980">dir</span>&nbsp;<span class="op" id="3113984">=</span>&nbsp;<span class="ident" id="3113986">os</span><span class="op" id="3113988">.</span><span class="ident" id="3113989">TempDir</span><span class="op" id="3113996">(</span><span class="op" id="3113997">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114004">nconflict</span>&nbsp;<span class="op" id="3114014">:=</span>&nbsp;<span class="num" id="3114017">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114020">for</span>&nbsp;<span class="ident" id="3114024">i</span>&nbsp;<span class="op" id="3114026">:=</span>&nbsp;<span class="num" id="3114029">0</span><span class="op" id="3114030">;</span>&nbsp;<span class="ident" id="3114032">i</span>&nbsp;<span class="op" id="3114034">&lt;</span>&nbsp;<span class="num" id="3114036">10000</span><span class="op" id="3114041">;</span>&nbsp;<span class="ident" id="3114043">i</span><span class="op" id="3114044">++</span>&nbsp;<span class="op" id="3114047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114051">name</span>&nbsp;<span class="op" id="3114056">:=</span>&nbsp;<span class="ident" id="3114059">filepath</span><span class="op" id="3114067">.</span><span class="ident" id="3114068">Join</span><span class="op" id="3114072">(</span><span class="ident" id="3114073">dir</span><span class="op" id="3114076">,</span>&nbsp;<span class="ident" id="3114078">prefix</span><span class="op" id="3114084">+</span><span class="ident" id="3114085">nextSuffix</span><span class="op" id="3114095">(</span><span class="op" id="3114096">)</span><span class="op" id="3114097">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114101">f</span><span class="op" id="3114102">,</span>&nbsp;<span class="ident" id="3114104">err</span>&nbsp;<span class="op" id="3114108">=</span>&nbsp;<span class="ident" id="3114110">os</span><span class="op" id="3114112">.</span><span class="ident" id="3114113">OpenFile</span><span class="op" id="3114121">(</span><span class="ident" id="3114122">name</span><span class="op" id="3114126">,</span>&nbsp;<span class="ident" id="3114128">os</span><span class="op" id="3114130">.</span><span class="ident" id="3114131">O_RDWR</span><span class="op" id="3114137">|</span><span class="ident" id="3114138">os</span><span class="op" id="3114140">.</span><span class="ident" id="3114141">O_CREATE</span><span class="op" id="3114149">|</span><span class="ident" id="3114150">os</span><span class="op" id="3114152">.</span><span class="ident" id="3114153">O_EXCL</span><span class="op" id="3114159">,</span>&nbsp;<span class="num" id="3114161">0600</span><span class="op" id="3114165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114169">if</span>&nbsp;<span class="ident" id="3114172">os</span><span class="op" id="3114174">.</span><span class="ident" id="3114175">IsExist</span><span class="op" id="3114182">(</span><span class="ident" id="3114183">err</span><span class="op" id="3114186">)</span>&nbsp;<span class="op" id="3114188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114193">if</span>&nbsp;<span class="ident" id="3114196">nconflict</span><span class="op" id="3114205">++</span><span class="op" id="3114207">;</span>&nbsp;<span class="ident" id="3114209">nconflict</span>&nbsp;<span class="op" id="3114219">&gt;</span>&nbsp;<span class="num" id="3114221">10</span>&nbsp;<span class="op" id="3114224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114230">rand</span>&nbsp;<span class="op" id="3114235">=</span>&nbsp;<span class="ident" id="3114237">reseed</span><span class="op" id="3114243">(</span><span class="op" id="3114244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114249">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114254">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114269">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114279">return</span><br>
<span class="lineno">65</span><span class="op" id="3114286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3114289">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3114355">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3114420">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3114484">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3114543">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3114595">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3114669">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3114719">func</span>&nbsp;<span class="ident" id="3114724">TempDir</span><span class="op" id="3114731">(</span><span class="ident" id="3114732">dir</span><span class="op" id="3114735">,</span>&nbsp;<span class="ident" id="3114737">prefix</span>&nbsp;<span class="builtintype" id="3114744">string</span><span class="op" id="3114750">)</span>&nbsp;<span class="op" id="3114752">(</span><span class="ident" id="3114753">name</span>&nbsp;<span class="builtintype" id="3114758">string</span><span class="op" id="3114764">,</span>&nbsp;<span class="ident" id="3114766">err</span>&nbsp;<span class="builtintype" id="3114770">error</span><span class="op" id="3114775">)</span>&nbsp;<span class="op" id="3114777">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114780">if</span>&nbsp;<span class="ident" id="3114783">dir</span>&nbsp;<span class="op" id="3114787">==</span>&nbsp;<span class="string" id="3114790">&#34;&#34;</span>&nbsp;<span class="op" id="3114793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114797">dir</span>&nbsp;<span class="op" id="3114801">=</span>&nbsp;<span class="ident" id="3114803">os</span><span class="op" id="3114805">.</span><span class="ident" id="3114806">TempDir</span><span class="op" id="3114813">(</span><span class="op" id="3114814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114821">nconflict</span>&nbsp;<span class="op" id="3114831">:=</span>&nbsp;<span class="num" id="3114834">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114837">for</span>&nbsp;<span class="ident" id="3114841">i</span>&nbsp;<span class="op" id="3114843">:=</span>&nbsp;<span class="num" id="3114846">0</span><span class="op" id="3114847">;</span>&nbsp;<span class="ident" id="3114849">i</span>&nbsp;<span class="op" id="3114851">&lt;</span>&nbsp;<span class="num" id="3114853">10000</span><span class="op" id="3114858">;</span>&nbsp;<span class="ident" id="3114860">i</span><span class="op" id="3114861">++</span>&nbsp;<span class="op" id="3114864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114868">try</span>&nbsp;<span class="op" id="3114872">:=</span>&nbsp;<span class="ident" id="3114875">filepath</span><span class="op" id="3114883">.</span><span class="ident" id="3114884">Join</span><span class="op" id="3114888">(</span><span class="ident" id="3114889">dir</span><span class="op" id="3114892">,</span>&nbsp;<span class="ident" id="3114894">prefix</span><span class="op" id="3114900">+</span><span class="ident" id="3114901">nextSuffix</span><span class="op" id="3114911">(</span><span class="op" id="3114912">)</span><span class="op" id="3114913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114917">err</span>&nbsp;<span class="op" id="3114921">=</span>&nbsp;<span class="ident" id="3114923">os</span><span class="op" id="3114925">.</span><span class="ident" id="3114926">Mkdir</span><span class="op" id="3114931">(</span><span class="ident" id="3114932">try</span><span class="op" id="3114935">,</span>&nbsp;<span class="num" id="3114937">0700</span><span class="op" id="3114941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114945">if</span>&nbsp;<span class="ident" id="3114948">os</span><span class="op" id="3114950">.</span><span class="ident" id="3114951">IsExist</span><span class="op" id="3114958">(</span><span class="ident" id="3114959">err</span><span class="op" id="3114962">)</span>&nbsp;<span class="op" id="3114964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114969">if</span>&nbsp;<span class="ident" id="3114972">nconflict</span><span class="op" id="3114981">++</span><span class="op" id="3114983">;</span>&nbsp;<span class="ident" id="3114985">nconflict</span>&nbsp;<span class="op" id="3114995">&gt;</span>&nbsp;<span class="num" id="3114997">10</span>&nbsp;<span class="op" id="3115000">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115006">rand</span>&nbsp;<span class="op" id="3115011">=</span>&nbsp;<span class="ident" id="3115013">reseed</span><span class="op" id="3115019">(</span><span class="op" id="3115020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115030">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115045">if</span>&nbsp;<span class="ident" id="3115048">err</span>&nbsp;<span class="op" id="3115052">==</span>&nbsp;<span class="ident" id="3115055">nil</span>&nbsp;<span class="op" id="3115059">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115064">name</span>&nbsp;<span class="op" id="3115069">=</span>&nbsp;<span class="ident" id="3115071">try</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115081">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115091">return</span><br>
<span class="lineno">95</span><span class="op" id="3115098">}</span>
</div>
</body>
</html>
