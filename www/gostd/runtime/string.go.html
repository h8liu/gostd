<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1721782">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1721837">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1721891">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1721942">package</span>&nbsp;<span class="ident" id="1721950">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1721959">import</span>&nbsp;<span class="op" id="1721966">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1721969">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1721978">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1721981">func</span>&nbsp;<span class="ident" id="1721986">concatstrings</span><span class="op" id="1721999">(</span><span class="ident" id="1722000">a</span>&nbsp;<span class="op" id="1722002">[</span><span class="op" id="1722003">]</span><span class="builtintype" id="1722004">string</span><span class="op" id="1722010">)</span>&nbsp;<span class="builtintype" id="1722012">string</span>&nbsp;<span class="op" id="1722019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722022">idx</span>&nbsp;<span class="op" id="1722026">:=</span>&nbsp;<span class="num" id="1722029">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722032">l</span>&nbsp;<span class="op" id="1722034">:=</span>&nbsp;<span class="num" id="1722037">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722040">count</span>&nbsp;<span class="op" id="1722046">:=</span>&nbsp;<span class="num" id="1722049">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722052">for</span>&nbsp;<span class="ident" id="1722056">i</span><span class="op" id="1722057">,</span>&nbsp;<span class="ident" id="1722059">x</span>&nbsp;<span class="op" id="1722061">:=</span>&nbsp;<span class="keyword" id="1722064">range</span>&nbsp;<span class="ident" id="1722070">a</span>&nbsp;<span class="op" id="1722072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722076">n</span>&nbsp;<span class="op" id="1722078">:=</span>&nbsp;<span class="builtinfunc" id="1722081">len</span><span class="op" id="1722084">(</span><span class="ident" id="1722085">x</span><span class="op" id="1722086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722090">if</span>&nbsp;<span class="ident" id="1722093">n</span>&nbsp;<span class="op" id="1722095">==</span>&nbsp;<span class="num" id="1722098">0</span>&nbsp;<span class="op" id="1722100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722105">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722116">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722120">if</span>&nbsp;<span class="ident" id="1722123">l</span><span class="op" id="1722124">+</span><span class="ident" id="1722125">n</span>&nbsp;<span class="op" id="1722127">&lt;</span>&nbsp;<span class="ident" id="1722129">l</span>&nbsp;<span class="op" id="1722131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722136">gothrow</span><span class="op" id="1722143">(</span><span class="string" id="1722144">&#34;string&nbsp;concatenation&nbsp;too&nbsp;long&#34;</span><span class="op" id="1722175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722183">l</span>&nbsp;<span class="op" id="1722185">+=</span>&nbsp;<span class="ident" id="1722188">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722192">count</span><span class="op" id="1722197">++</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722202">idx</span>&nbsp;<span class="op" id="1722206">=</span>&nbsp;<span class="ident" id="1722208">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722214">if</span>&nbsp;<span class="ident" id="1722217">count</span>&nbsp;<span class="op" id="1722223">==</span>&nbsp;<span class="num" id="1722226">0</span>&nbsp;<span class="op" id="1722228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722232">return</span>&nbsp;<span class="string" id="1722239">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722243">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722246">if</span>&nbsp;<span class="ident" id="1722249">count</span>&nbsp;<span class="op" id="1722255">==</span>&nbsp;<span class="num" id="1722258">1</span>&nbsp;<span class="op" id="1722260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722264">return</span>&nbsp;<span class="ident" id="1722271">a</span><span class="op" id="1722272">[</span><span class="ident" id="1722273">idx</span><span class="op" id="1722276">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722282">s</span><span class="op" id="1722283">,</span>&nbsp;<span class="ident" id="1722285">b</span>&nbsp;<span class="op" id="1722287">:=</span>&nbsp;<span class="ident" id="1722290">rawstring</span><span class="op" id="1722299">(</span><span class="ident" id="1722300">l</span><span class="op" id="1722301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722304">l</span>&nbsp;<span class="op" id="1722306">=</span>&nbsp;<span class="num" id="1722308">0</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722311">for</span>&nbsp;<span class="ident" id="1722315">_</span><span class="op" id="1722316">,</span>&nbsp;<span class="ident" id="1722318">x</span>&nbsp;<span class="op" id="1722320">:=</span>&nbsp;<span class="keyword" id="1722323">range</span>&nbsp;<span class="ident" id="1722329">a</span>&nbsp;<span class="op" id="1722331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1722335">copy</span><span class="op" id="1722339">(</span><span class="ident" id="1722340">b</span><span class="op" id="1722341">[</span><span class="ident" id="1722342">l</span><span class="op" id="1722343">:</span><span class="op" id="1722344">]</span><span class="op" id="1722345">,</span>&nbsp;<span class="ident" id="1722347">x</span><span class="op" id="1722348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722352">l</span>&nbsp;<span class="op" id="1722354">+=</span>&nbsp;<span class="builtinfunc" id="1722357">len</span><span class="op" id="1722360">(</span><span class="ident" id="1722361">x</span><span class="op" id="1722362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722368">return</span>&nbsp;<span class="ident" id="1722375">s</span><br>
<span class="lineno">40</span><span class="op" id="1722377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1722380">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1722393">func</span>&nbsp;<span class="ident" id="1722398">concatstring2</span><span class="op" id="1722411">(</span><span class="ident" id="1722412">a</span>&nbsp;<span class="op" id="1722414">[</span><span class="num" id="1722415">2</span><span class="op" id="1722416">]</span><span class="builtintype" id="1722417">string</span><span class="op" id="1722423">)</span>&nbsp;<span class="builtintype" id="1722425">string</span>&nbsp;<span class="op" id="1722432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722435">return</span>&nbsp;<span class="ident" id="1722442">concatstrings</span><span class="op" id="1722455">(</span><span class="ident" id="1722456">a</span><span class="op" id="1722457">[</span><span class="op" id="1722458">:</span><span class="op" id="1722459">]</span><span class="op" id="1722460">)</span><br>
<span class="lineno">45</span><span class="op" id="1722462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1722465">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1722478">func</span>&nbsp;<span class="ident" id="1722483">concatstring3</span><span class="op" id="1722496">(</span><span class="ident" id="1722497">a</span>&nbsp;<span class="op" id="1722499">[</span><span class="num" id="1722500">3</span><span class="op" id="1722501">]</span><span class="builtintype" id="1722502">string</span><span class="op" id="1722508">)</span>&nbsp;<span class="builtintype" id="1722510">string</span>&nbsp;<span class="op" id="1722517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722520">return</span>&nbsp;<span class="ident" id="1722527">concatstrings</span><span class="op" id="1722540">(</span><span class="ident" id="1722541">a</span><span class="op" id="1722542">[</span><span class="op" id="1722543">:</span><span class="op" id="1722544">]</span><span class="op" id="1722545">)</span><br>
<span class="lineno">50</span><span class="op" id="1722547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1722550">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1722563">func</span>&nbsp;<span class="ident" id="1722568">concatstring4</span><span class="op" id="1722581">(</span><span class="ident" id="1722582">a</span>&nbsp;<span class="op" id="1722584">[</span><span class="num" id="1722585">4</span><span class="op" id="1722586">]</span><span class="builtintype" id="1722587">string</span><span class="op" id="1722593">)</span>&nbsp;<span class="builtintype" id="1722595">string</span>&nbsp;<span class="op" id="1722602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722605">return</span>&nbsp;<span class="ident" id="1722612">concatstrings</span><span class="op" id="1722625">(</span><span class="ident" id="1722626">a</span><span class="op" id="1722627">[</span><span class="op" id="1722628">:</span><span class="op" id="1722629">]</span><span class="op" id="1722630">)</span><br>
<span class="lineno">55</span><span class="op" id="1722632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1722635">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1722648">func</span>&nbsp;<span class="ident" id="1722653">concatstring5</span><span class="op" id="1722666">(</span><span class="ident" id="1722667">a</span>&nbsp;<span class="op" id="1722669">[</span><span class="num" id="1722670">5</span><span class="op" id="1722671">]</span><span class="builtintype" id="1722672">string</span><span class="op" id="1722678">)</span>&nbsp;<span class="builtintype" id="1722680">string</span>&nbsp;<span class="op" id="1722687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722690">return</span>&nbsp;<span class="ident" id="1722697">concatstrings</span><span class="op" id="1722710">(</span><span class="ident" id="1722711">a</span><span class="op" id="1722712">[</span><span class="op" id="1722713">:</span><span class="op" id="1722714">]</span><span class="op" id="1722715">)</span><br>
<span class="lineno">60</span><span class="op" id="1722717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1722720">func</span>&nbsp;<span class="ident" id="1722725">slicebytetostring</span><span class="op" id="1722742">(</span><span class="ident" id="1722743">b</span>&nbsp;<span class="op" id="1722745">[</span><span class="op" id="1722746">]</span><span class="builtintype" id="1722747">byte</span><span class="op" id="1722751">)</span>&nbsp;<span class="builtintype" id="1722753">string</span>&nbsp;<span class="op" id="1722760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722763">if</span>&nbsp;<span class="ident" id="1722766">raceenabled</span>&nbsp;<span class="op" id="1722778">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1722781">len</span><span class="op" id="1722784">(</span><span class="ident" id="1722785">b</span><span class="op" id="1722786">)</span>&nbsp;<span class="op" id="1722788">&gt;</span>&nbsp;<span class="num" id="1722790">0</span>&nbsp;<span class="op" id="1722792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722796">racereadrangepc</span><span class="op" id="1722811">(</span><span class="ident" id="1722812">unsafe</span><span class="op" id="1722818">.</span><span class="ident" id="1722819">Pointer</span><span class="op" id="1722826">(</span><span class="op" id="1722827">&amp;</span><span class="ident" id="1722828">b</span><span class="op" id="1722829">[</span><span class="num" id="1722830">0</span><span class="op" id="1722831">]</span><span class="op" id="1722832">)</span><span class="op" id="1722833">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1722838">uintptr</span><span class="op" id="1722845">(</span><span class="builtinfunc" id="1722846">len</span><span class="op" id="1722849">(</span><span class="ident" id="1722850">b</span><span class="op" id="1722851">)</span><span class="op" id="1722852">)</span><span class="op" id="1722853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722858">getcallerpc</span><span class="op" id="1722869">(</span><span class="ident" id="1722870">unsafe</span><span class="op" id="1722876">.</span><span class="ident" id="1722877">Pointer</span><span class="op" id="1722884">(</span><span class="op" id="1722885">&amp;</span><span class="ident" id="1722886">b</span><span class="op" id="1722887">)</span><span class="op" id="1722888">)</span><span class="op" id="1722889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722894">funcPC</span><span class="op" id="1722900">(</span><span class="ident" id="1722901">slicebytetostring</span><span class="op" id="1722918">)</span><span class="op" id="1722919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1722922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1722925">s</span><span class="op" id="1722926">,</span>&nbsp;<span class="ident" id="1722928">c</span>&nbsp;<span class="op" id="1722930">:=</span>&nbsp;<span class="ident" id="1722933">rawstring</span><span class="op" id="1722942">(</span><span class="builtinfunc" id="1722943">len</span><span class="op" id="1722946">(</span><span class="ident" id="1722947">b</span><span class="op" id="1722948">)</span><span class="op" id="1722949">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1722952">copy</span><span class="op" id="1722956">(</span><span class="ident" id="1722957">c</span><span class="op" id="1722958">,</span>&nbsp;<span class="ident" id="1722960">b</span><span class="op" id="1722961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1722964">return</span>&nbsp;<span class="ident" id="1722971">s</span><br>
<span class="lineno"></span><span class="op" id="1722973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1722976">func</span>&nbsp;<span class="ident" id="1722981">slicebytetostringtmp</span><span class="op" id="1723001">(</span><span class="ident" id="1723002">b</span>&nbsp;<span class="op" id="1723004">[</span><span class="op" id="1723005">]</span><span class="builtintype" id="1723006">byte</span><span class="op" id="1723010">)</span>&nbsp;<span class="builtintype" id="1723012">string</span>&nbsp;<span class="op" id="1723019">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723022">//&nbsp;Return&nbsp;a&nbsp;&#34;string&#34;&nbsp;referring&nbsp;to&nbsp;the&nbsp;actual&nbsp;[]byte&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723082">//&nbsp;This&nbsp;is&nbsp;only&nbsp;for&nbsp;use&nbsp;by&nbsp;internal&nbsp;compiler&nbsp;optimizations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723142">//&nbsp;that&nbsp;know&nbsp;that&nbsp;the&nbsp;string&nbsp;form&nbsp;will&nbsp;be&nbsp;discarded&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723202">//&nbsp;the&nbsp;calling&nbsp;goroutine&nbsp;could&nbsp;possibly&nbsp;modify&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723263">//&nbsp;slice&nbsp;or&nbsp;synchronize&nbsp;with&nbsp;another&nbsp;goroutine.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723312">//&nbsp;Today,&nbsp;the&nbsp;only&nbsp;such&nbsp;case&nbsp;is&nbsp;a&nbsp;m[string(k)]&nbsp;lookup&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723373">//&nbsp;m&nbsp;is&nbsp;a&nbsp;string-keyed&nbsp;map&nbsp;and&nbsp;k&nbsp;is&nbsp;a&nbsp;[]byte.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1723421">if</span>&nbsp;<span class="ident" id="1723424">raceenabled</span>&nbsp;<span class="op" id="1723436">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1723439">len</span><span class="op" id="1723442">(</span><span class="ident" id="1723443">b</span><span class="op" id="1723444">)</span>&nbsp;<span class="op" id="1723446">&gt;</span>&nbsp;<span class="num" id="1723448">0</span>&nbsp;<span class="op" id="1723450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723454">racereadrangepc</span><span class="op" id="1723469">(</span><span class="ident" id="1723470">unsafe</span><span class="op" id="1723476">.</span><span class="ident" id="1723477">Pointer</span><span class="op" id="1723484">(</span><span class="op" id="1723485">&amp;</span><span class="ident" id="1723486">b</span><span class="op" id="1723487">[</span><span class="num" id="1723488">0</span><span class="op" id="1723489">]</span><span class="op" id="1723490">)</span><span class="op" id="1723491">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1723496">uintptr</span><span class="op" id="1723503">(</span><span class="builtinfunc" id="1723504">len</span><span class="op" id="1723507">(</span><span class="ident" id="1723508">b</span><span class="op" id="1723509">)</span><span class="op" id="1723510">)</span><span class="op" id="1723511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723516">getcallerpc</span><span class="op" id="1723527">(</span><span class="ident" id="1723528">unsafe</span><span class="op" id="1723534">.</span><span class="ident" id="1723535">Pointer</span><span class="op" id="1723542">(</span><span class="op" id="1723543">&amp;</span><span class="ident" id="1723544">b</span><span class="op" id="1723545">)</span><span class="op" id="1723546">)</span><span class="op" id="1723547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723552">funcPC</span><span class="op" id="1723558">(</span><span class="ident" id="1723559">slicebytetostringtmp</span><span class="op" id="1723579">)</span><span class="op" id="1723580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1723583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1723586">return</span>&nbsp;<span class="op" id="1723593">*</span><span class="op" id="1723594">(</span><span class="op" id="1723595">*</span><span class="builtintype" id="1723596">string</span><span class="op" id="1723602">)</span><span class="op" id="1723603">(</span><span class="ident" id="1723604">unsafe</span><span class="op" id="1723610">.</span><span class="ident" id="1723611">Pointer</span><span class="op" id="1723618">(</span><span class="op" id="1723619">&amp;</span><span class="ident" id="1723620">b</span><span class="op" id="1723621">)</span><span class="op" id="1723622">)</span><br>
<span class="lineno">90</span><span class="op" id="1723624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1723627">func</span>&nbsp;<span class="ident" id="1723632">stringtoslicebyte</span><span class="op" id="1723649">(</span><span class="ident" id="1723650">s</span>&nbsp;<span class="builtintype" id="1723652">string</span><span class="op" id="1723658">)</span>&nbsp;<span class="op" id="1723660">[</span><span class="op" id="1723661">]</span><span class="builtintype" id="1723662">byte</span>&nbsp;<span class="op" id="1723667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723670">b</span>&nbsp;<span class="op" id="1723672">:=</span>&nbsp;<span class="ident" id="1723675">rawbyteslice</span><span class="op" id="1723687">(</span><span class="builtinfunc" id="1723688">len</span><span class="op" id="1723691">(</span><span class="ident" id="1723692">s</span><span class="op" id="1723693">)</span><span class="op" id="1723694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1723697">copy</span><span class="op" id="1723701">(</span><span class="ident" id="1723702">b</span><span class="op" id="1723703">,</span>&nbsp;<span class="ident" id="1723705">s</span><span class="op" id="1723706">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1723709">return</span>&nbsp;<span class="ident" id="1723716">b</span><br>
<span class="lineno"></span><span class="op" id="1723718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1723721">func</span>&nbsp;<span class="ident" id="1723726">stringtoslicerune</span><span class="op" id="1723743">(</span><span class="ident" id="1723744">s</span>&nbsp;<span class="builtintype" id="1723746">string</span><span class="op" id="1723752">)</span>&nbsp;<span class="op" id="1723754">[</span><span class="op" id="1723755">]</span><span class="builtintype" id="1723756">rune</span>&nbsp;<span class="op" id="1723761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723764">//&nbsp;two&nbsp;passes.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1723780">//&nbsp;unlike&nbsp;slicerunetostring,&nbsp;no&nbsp;race&nbsp;because&nbsp;strings&nbsp;are&nbsp;immutable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723849">n</span>&nbsp;<span class="op" id="1723851">:=</span>&nbsp;<span class="num" id="1723854">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723857">t</span>&nbsp;<span class="op" id="1723859">:=</span>&nbsp;<span class="ident" id="1723862">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1723865">for</span>&nbsp;<span class="builtinfunc" id="1723869">len</span><span class="op" id="1723872">(</span><span class="ident" id="1723873">s</span><span class="op" id="1723874">)</span>&nbsp;<span class="op" id="1723876">&gt;</span>&nbsp;<span class="num" id="1723878">0</span>&nbsp;<span class="op" id="1723880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723884">_</span><span class="op" id="1723885">,</span>&nbsp;<span class="ident" id="1723887">k</span>&nbsp;<span class="op" id="1723889">:=</span>&nbsp;<span class="ident" id="1723892">charntorune</span><span class="op" id="1723903">(</span><span class="ident" id="1723904">s</span><span class="op" id="1723905">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723909">s</span>&nbsp;<span class="op" id="1723911">=</span>&nbsp;<span class="ident" id="1723913">s</span><span class="op" id="1723914">[</span><span class="ident" id="1723915">k</span><span class="op" id="1723916">:</span><span class="op" id="1723917">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723921">n</span><span class="op" id="1723922">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1723926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723929">a</span>&nbsp;<span class="op" id="1723931">:=</span>&nbsp;<span class="ident" id="1723934">rawruneslice</span><span class="op" id="1723946">(</span><span class="ident" id="1723947">n</span><span class="op" id="1723948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723951">n</span>&nbsp;<span class="op" id="1723953">=</span>&nbsp;<span class="num" id="1723955">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1723958">for</span>&nbsp;<span class="builtinfunc" id="1723962">len</span><span class="op" id="1723965">(</span><span class="ident" id="1723966">t</span><span class="op" id="1723967">)</span>&nbsp;<span class="op" id="1723969">&gt;</span>&nbsp;<span class="num" id="1723971">0</span>&nbsp;<span class="op" id="1723973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1723977">r</span><span class="op" id="1723978">,</span>&nbsp;<span class="ident" id="1723980">k</span>&nbsp;<span class="op" id="1723982">:=</span>&nbsp;<span class="ident" id="1723985">charntorune</span><span class="op" id="1723996">(</span><span class="ident" id="1723997">t</span><span class="op" id="1723998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724002">t</span>&nbsp;<span class="op" id="1724004">=</span>&nbsp;<span class="ident" id="1724006">t</span><span class="op" id="1724007">[</span><span class="ident" id="1724008">k</span><span class="op" id="1724009">:</span><span class="op" id="1724010">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724014">a</span><span class="op" id="1724015">[</span><span class="ident" id="1724016">n</span><span class="op" id="1724017">]</span>&nbsp;<span class="op" id="1724019">=</span>&nbsp;<span class="ident" id="1724021">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724025">n</span><span class="op" id="1724026">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724033">return</span>&nbsp;<span class="ident" id="1724040">a</span><br>
<span class="lineno"></span><span class="op" id="1724042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1724045">func</span>&nbsp;<span class="ident" id="1724050">slicerunetostring</span><span class="op" id="1724067">(</span><span class="ident" id="1724068">a</span>&nbsp;<span class="op" id="1724070">[</span><span class="op" id="1724071">]</span><span class="builtintype" id="1724072">rune</span><span class="op" id="1724076">)</span>&nbsp;<span class="builtintype" id="1724078">string</span>&nbsp;<span class="op" id="1724085">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724088">if</span>&nbsp;<span class="ident" id="1724091">raceenabled</span>&nbsp;<span class="op" id="1724103">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1724106">len</span><span class="op" id="1724109">(</span><span class="ident" id="1724110">a</span><span class="op" id="1724111">)</span>&nbsp;<span class="op" id="1724113">&gt;</span>&nbsp;<span class="num" id="1724115">0</span>&nbsp;<span class="op" id="1724117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724121">racereadrangepc</span><span class="op" id="1724136">(</span><span class="ident" id="1724137">unsafe</span><span class="op" id="1724143">.</span><span class="ident" id="1724144">Pointer</span><span class="op" id="1724151">(</span><span class="op" id="1724152">&amp;</span><span class="ident" id="1724153">a</span><span class="op" id="1724154">[</span><span class="num" id="1724155">0</span><span class="op" id="1724156">]</span><span class="op" id="1724157">)</span><span class="op" id="1724158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1724163">uintptr</span><span class="op" id="1724170">(</span><span class="builtinfunc" id="1724171">len</span><span class="op" id="1724174">(</span><span class="ident" id="1724175">a</span><span class="op" id="1724176">)</span><span class="op" id="1724177">)</span><span class="op" id="1724178">*</span><span class="ident" id="1724179">unsafe</span><span class="op" id="1724185">.</span><span class="ident" id="1724186">Sizeof</span><span class="op" id="1724192">(</span><span class="ident" id="1724193">a</span><span class="op" id="1724194">[</span><span class="num" id="1724195">0</span><span class="op" id="1724196">]</span><span class="op" id="1724197">)</span><span class="op" id="1724198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724203">getcallerpc</span><span class="op" id="1724214">(</span><span class="ident" id="1724215">unsafe</span><span class="op" id="1724221">.</span><span class="ident" id="1724222">Pointer</span><span class="op" id="1724229">(</span><span class="op" id="1724230">&amp;</span><span class="ident" id="1724231">a</span><span class="op" id="1724232">)</span><span class="op" id="1724233">)</span><span class="op" id="1724234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724239">funcPC</span><span class="op" id="1724245">(</span><span class="ident" id="1724246">slicerunetostring</span><span class="op" id="1724263">)</span><span class="op" id="1724264">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724270">var</span>&nbsp;<span class="ident" id="1724274">dum</span>&nbsp;<span class="op" id="1724278">[</span><span class="num" id="1724279">4</span><span class="op" id="1724280">]</span><span class="builtintype" id="1724281">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724287">size1</span>&nbsp;<span class="op" id="1724293">:=</span>&nbsp;<span class="num" id="1724296">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724299">for</span>&nbsp;<span class="ident" id="1724303">_</span><span class="op" id="1724304">,</span>&nbsp;<span class="ident" id="1724306">r</span>&nbsp;<span class="op" id="1724308">:=</span>&nbsp;<span class="keyword" id="1724311">range</span>&nbsp;<span class="ident" id="1724317">a</span>&nbsp;<span class="op" id="1724319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724323">size1</span>&nbsp;<span class="op" id="1724329">+=</span>&nbsp;<span class="ident" id="1724332">runetochar</span><span class="op" id="1724342">(</span><span class="ident" id="1724343">dum</span><span class="op" id="1724346">[</span><span class="op" id="1724347">:</span><span class="op" id="1724348">]</span><span class="op" id="1724349">,</span>&nbsp;<span class="ident" id="1724351">r</span><span class="op" id="1724352">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724358">s</span><span class="op" id="1724359">,</span>&nbsp;<span class="ident" id="1724361">b</span>&nbsp;<span class="op" id="1724363">:=</span>&nbsp;<span class="ident" id="1724366">rawstring</span><span class="op" id="1724375">(</span><span class="ident" id="1724376">size1</span>&nbsp;<span class="op" id="1724382">+</span>&nbsp;<span class="num" id="1724384">3</span><span class="op" id="1724385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724388">size2</span>&nbsp;<span class="op" id="1724394">:=</span>&nbsp;<span class="num" id="1724397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724400">for</span>&nbsp;<span class="ident" id="1724404">_</span><span class="op" id="1724405">,</span>&nbsp;<span class="ident" id="1724407">r</span>&nbsp;<span class="op" id="1724409">:=</span>&nbsp;<span class="keyword" id="1724412">range</span>&nbsp;<span class="ident" id="1724418">a</span>&nbsp;<span class="op" id="1724420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1724424">//&nbsp;check&nbsp;for&nbsp;race</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724444">if</span>&nbsp;<span class="ident" id="1724447">size2</span>&nbsp;<span class="op" id="1724453">&gt;=</span>&nbsp;<span class="ident" id="1724456">size1</span>&nbsp;<span class="op" id="1724462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724467">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724479">size2</span>&nbsp;<span class="op" id="1724485">+=</span>&nbsp;<span class="ident" id="1724488">runetochar</span><span class="op" id="1724498">(</span><span class="ident" id="1724499">b</span><span class="op" id="1724500">[</span><span class="ident" id="1724501">size2</span><span class="op" id="1724506">:</span><span class="op" id="1724507">]</span><span class="op" id="1724508">,</span>&nbsp;<span class="ident" id="1724510">r</span><span class="op" id="1724511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724514">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724517">return</span>&nbsp;<span class="ident" id="1724524">s</span><span class="op" id="1724525">[</span><span class="op" id="1724526">:</span><span class="ident" id="1724527">size2</span><span class="op" id="1724532">]</span><br>
<span class="lineno"></span><span class="op" id="1724534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1724537">type</span>&nbsp;<span class="ident" id="1724542">stringStruct</span>&nbsp;<span class="keyword" id="1724555">struct</span>&nbsp;<span class="op" id="1724562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724565">str</span>&nbsp;<span class="ident" id="1724569">unsafe</span><span class="op" id="1724575">.</span><span class="ident" id="1724576">Pointer</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1724585">len</span>&nbsp;<span class="builtintype" id="1724589">int</span><br>
<span class="lineno"></span><span class="op" id="1724593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1724596">func</span>&nbsp;<span class="ident" id="1724601">intstring</span><span class="op" id="1724610">(</span><span class="ident" id="1724611">v</span>&nbsp;<span class="ident" id="1724613">int64</span><span class="op" id="1724618">)</span>&nbsp;<span class="builtintype" id="1724620">string</span>&nbsp;<span class="op" id="1724627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724630">s</span><span class="op" id="1724631">,</span>&nbsp;<span class="ident" id="1724633">b</span>&nbsp;<span class="op" id="1724635">:=</span>&nbsp;<span class="ident" id="1724638">rawstring</span><span class="op" id="1724647">(</span><span class="num" id="1724648">4</span><span class="op" id="1724649">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724652">n</span>&nbsp;<span class="op" id="1724654">:=</span>&nbsp;<span class="ident" id="1724657">runetochar</span><span class="op" id="1724667">(</span><span class="ident" id="1724668">b</span><span class="op" id="1724669">,</span>&nbsp;<span class="builtintype" id="1724671">rune</span><span class="op" id="1724675">(</span><span class="ident" id="1724676">v</span><span class="op" id="1724677">)</span><span class="op" id="1724678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724681">return</span>&nbsp;<span class="ident" id="1724688">s</span><span class="op" id="1724689">[</span><span class="op" id="1724690">:</span><span class="ident" id="1724691">n</span><span class="op" id="1724692">]</span><br>
<span class="lineno"></span><span class="op" id="1724694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1724697">//&nbsp;stringiter&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;next</span><br>
<span class="lineno">155</span><span class="comment" id="1724741">//&nbsp;rune&nbsp;after&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k].</span><br>
<span class="lineno"></span><span class="keyword" id="1724785">func</span>&nbsp;<span class="ident" id="1724790">stringiter</span><span class="op" id="1724800">(</span><span class="ident" id="1724801">s</span>&nbsp;<span class="builtintype" id="1724803">string</span><span class="op" id="1724809">,</span>&nbsp;<span class="ident" id="1724811">k</span>&nbsp;<span class="builtintype" id="1724813">int</span><span class="op" id="1724816">)</span>&nbsp;<span class="builtintype" id="1724818">int</span>&nbsp;<span class="op" id="1724822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724825">if</span>&nbsp;<span class="ident" id="1724828">k</span>&nbsp;<span class="op" id="1724830">&gt;=</span>&nbsp;<span class="builtinfunc" id="1724833">len</span><span class="op" id="1724836">(</span><span class="ident" id="1724837">s</span><span class="op" id="1724838">)</span>&nbsp;<span class="op" id="1724840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1724844">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724871">return</span>&nbsp;<span class="num" id="1724878">0</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724885">c</span>&nbsp;<span class="op" id="1724887">:=</span>&nbsp;<span class="ident" id="1724890">s</span><span class="op" id="1724891">[</span><span class="ident" id="1724892">k</span><span class="op" id="1724893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724896">if</span>&nbsp;<span class="ident" id="1724899">c</span>&nbsp;<span class="op" id="1724901">&lt;</span>&nbsp;<span class="ident" id="1724903">runeself</span>&nbsp;<span class="op" id="1724912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724916">return</span>&nbsp;<span class="ident" id="1724923">k</span>&nbsp;<span class="op" id="1724925">+</span>&nbsp;<span class="num" id="1724927">1</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1724930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1724934">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1724954">_</span><span class="op" id="1724955">,</span>&nbsp;<span class="ident" id="1724957">n</span>&nbsp;<span class="op" id="1724959">:=</span>&nbsp;<span class="ident" id="1724962">charntorune</span><span class="op" id="1724973">(</span><span class="ident" id="1724974">s</span><span class="op" id="1724975">[</span><span class="ident" id="1724976">k</span><span class="op" id="1724977">:</span><span class="op" id="1724978">]</span><span class="op" id="1724979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1724982">return</span>&nbsp;<span class="ident" id="1724989">k</span>&nbsp;<span class="op" id="1724991">+</span>&nbsp;<span class="ident" id="1724993">n</span><br>
<span class="lineno">170</span><span class="op" id="1724995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1724998">//&nbsp;stringiter2&nbsp;returns&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k]</span><br>
<span class="lineno"></span><span class="comment" id="1725050">//&nbsp;and&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;next&nbsp;rune&nbsp;starts.</span><br>
<span class="lineno"></span><span class="keyword" id="1725095">func</span>&nbsp;<span class="ident" id="1725100">stringiter2</span><span class="op" id="1725111">(</span><span class="ident" id="1725112">s</span>&nbsp;<span class="builtintype" id="1725114">string</span><span class="op" id="1725120">,</span>&nbsp;<span class="ident" id="1725122">k</span>&nbsp;<span class="builtintype" id="1725124">int</span><span class="op" id="1725127">)</span>&nbsp;<span class="op" id="1725129">(</span><span class="builtintype" id="1725130">int</span><span class="op" id="1725133">,</span>&nbsp;<span class="builtintype" id="1725135">rune</span><span class="op" id="1725139">)</span>&nbsp;<span class="op" id="1725141">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725144">if</span>&nbsp;<span class="ident" id="1725147">k</span>&nbsp;<span class="op" id="1725149">&gt;=</span>&nbsp;<span class="builtinfunc" id="1725152">len</span><span class="op" id="1725155">(</span><span class="ident" id="1725156">s</span><span class="op" id="1725157">)</span>&nbsp;<span class="op" id="1725159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1725163">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725190">return</span>&nbsp;<span class="num" id="1725197">0</span><span class="op" id="1725198">,</span>&nbsp;<span class="num" id="1725200">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725207">c</span>&nbsp;<span class="op" id="1725209">:=</span>&nbsp;<span class="ident" id="1725212">s</span><span class="op" id="1725213">[</span><span class="ident" id="1725214">k</span><span class="op" id="1725215">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725218">if</span>&nbsp;<span class="ident" id="1725221">c</span>&nbsp;<span class="op" id="1725223">&lt;</span>&nbsp;<span class="ident" id="1725225">runeself</span>&nbsp;<span class="op" id="1725234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725238">return</span>&nbsp;<span class="ident" id="1725245">k</span>&nbsp;<span class="op" id="1725247">+</span>&nbsp;<span class="num" id="1725249">1</span><span class="op" id="1725250">,</span>&nbsp;<span class="builtintype" id="1725252">rune</span><span class="op" id="1725256">(</span><span class="ident" id="1725257">c</span><span class="op" id="1725258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1725265">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725285">r</span><span class="op" id="1725286">,</span>&nbsp;<span class="ident" id="1725288">n</span>&nbsp;<span class="op" id="1725290">:=</span>&nbsp;<span class="ident" id="1725293">charntorune</span><span class="op" id="1725304">(</span><span class="ident" id="1725305">s</span><span class="op" id="1725306">[</span><span class="ident" id="1725307">k</span><span class="op" id="1725308">:</span><span class="op" id="1725309">]</span><span class="op" id="1725310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725313">return</span>&nbsp;<span class="ident" id="1725320">k</span>&nbsp;<span class="op" id="1725322">+</span>&nbsp;<span class="ident" id="1725324">n</span><span class="op" id="1725325">,</span>&nbsp;<span class="ident" id="1725327">r</span><br>
<span class="lineno"></span><span class="op" id="1725329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="1725332">//&nbsp;rawstring&nbsp;allocates&nbsp;storage&nbsp;for&nbsp;a&nbsp;new&nbsp;string.&nbsp;The&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="1725394">//&nbsp;string&nbsp;and&nbsp;byte&nbsp;slice&nbsp;both&nbsp;refer&nbsp;to&nbsp;the&nbsp;same&nbsp;storage.</span><br>
<span class="lineno"></span><span class="comment" id="1725451">//&nbsp;The&nbsp;storage&nbsp;is&nbsp;not&nbsp;zeroed.&nbsp;Callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1725500">//&nbsp;b&nbsp;to&nbsp;set&nbsp;the&nbsp;string&nbsp;contents&nbsp;and&nbsp;then&nbsp;drop&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="1725549">func</span>&nbsp;<span class="ident" id="1725554">rawstring</span><span class="op" id="1725563">(</span><span class="ident" id="1725564">size</span>&nbsp;<span class="builtintype" id="1725569">int</span><span class="op" id="1725572">)</span>&nbsp;<span class="op" id="1725574">(</span><span class="ident" id="1725575">s</span>&nbsp;<span class="builtintype" id="1725577">string</span><span class="op" id="1725583">,</span>&nbsp;<span class="ident" id="1725585">b</span>&nbsp;<span class="op" id="1725587">[</span><span class="op" id="1725588">]</span><span class="builtintype" id="1725589">byte</span><span class="op" id="1725593">)</span>&nbsp;<span class="op" id="1725595">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725598">p</span>&nbsp;<span class="op" id="1725600">:=</span>&nbsp;<span class="ident" id="1725603">mallocgc</span><span class="op" id="1725611">(</span><span class="builtintype" id="1725612">uintptr</span><span class="op" id="1725619">(</span><span class="ident" id="1725620">size</span><span class="op" id="1725624">)</span><span class="op" id="1725625">,</span>&nbsp;<span class="ident" id="1725627">nil</span><span class="op" id="1725630">,</span>&nbsp;<span class="ident" id="1725632">flagNoScan</span><span class="op" id="1725642">|</span><span class="ident" id="1725643">flagNoZero</span><span class="op" id="1725653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725657">(</span><span class="op" id="1725658">*</span><span class="ident" id="1725659">stringStruct</span><span class="op" id="1725671">)</span><span class="op" id="1725672">(</span><span class="ident" id="1725673">unsafe</span><span class="op" id="1725679">.</span><span class="ident" id="1725680">Pointer</span><span class="op" id="1725687">(</span><span class="op" id="1725688">&amp;</span><span class="ident" id="1725689">s</span><span class="op" id="1725690">)</span><span class="op" id="1725691">)</span><span class="op" id="1725692">.</span><span class="ident" id="1725693">str</span>&nbsp;<span class="op" id="1725697">=</span>&nbsp;<span class="ident" id="1725699">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725702">(</span><span class="op" id="1725703">*</span><span class="ident" id="1725704">stringStruct</span><span class="op" id="1725716">)</span><span class="op" id="1725717">(</span><span class="ident" id="1725718">unsafe</span><span class="op" id="1725724">.</span><span class="ident" id="1725725">Pointer</span><span class="op" id="1725732">(</span><span class="op" id="1725733">&amp;</span><span class="ident" id="1725734">s</span><span class="op" id="1725735">)</span><span class="op" id="1725736">)</span><span class="op" id="1725737">.</span><span class="builtinfunc" id="1725738">len</span>&nbsp;<span class="op" id="1725742">=</span>&nbsp;<span class="ident" id="1725744">size</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725751">(</span><span class="op" id="1725752">*</span><span class="ident" id="1725753">slice</span><span class="op" id="1725758">)</span><span class="op" id="1725759">(</span><span class="ident" id="1725760">unsafe</span><span class="op" id="1725766">.</span><span class="ident" id="1725767">Pointer</span><span class="op" id="1725774">(</span><span class="op" id="1725775">&amp;</span><span class="ident" id="1725776">b</span><span class="op" id="1725777">)</span><span class="op" id="1725778">)</span><span class="op" id="1725779">.</span><span class="ident" id="1725780">array</span>&nbsp;<span class="op" id="1725786">=</span>&nbsp;<span class="op" id="1725788">(</span><span class="op" id="1725789">*</span><span class="builtintype" id="1725790">uint8</span><span class="op" id="1725795">)</span><span class="op" id="1725796">(</span><span class="ident" id="1725797">p</span><span class="op" id="1725798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725801">(</span><span class="op" id="1725802">*</span><span class="ident" id="1725803">slice</span><span class="op" id="1725808">)</span><span class="op" id="1725809">(</span><span class="ident" id="1725810">unsafe</span><span class="op" id="1725816">.</span><span class="ident" id="1725817">Pointer</span><span class="op" id="1725824">(</span><span class="op" id="1725825">&amp;</span><span class="ident" id="1725826">b</span><span class="op" id="1725827">)</span><span class="op" id="1725828">)</span><span class="op" id="1725829">.</span><span class="builtinfunc" id="1725830">len</span>&nbsp;<span class="op" id="1725834">=</span>&nbsp;<span class="builtintype" id="1725836">uint</span><span class="op" id="1725840">(</span><span class="ident" id="1725841">size</span><span class="op" id="1725845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1725848">(</span><span class="op" id="1725849">*</span><span class="ident" id="1725850">slice</span><span class="op" id="1725855">)</span><span class="op" id="1725856">(</span><span class="ident" id="1725857">unsafe</span><span class="op" id="1725863">.</span><span class="ident" id="1725864">Pointer</span><span class="op" id="1725871">(</span><span class="op" id="1725872">&amp;</span><span class="ident" id="1725873">b</span><span class="op" id="1725874">)</span><span class="op" id="1725875">)</span><span class="op" id="1725876">.</span><span class="builtinfunc" id="1725877">cap</span>&nbsp;<span class="op" id="1725881">=</span>&nbsp;<span class="builtintype" id="1725883">uint</span><span class="op" id="1725887">(</span><span class="ident" id="1725888">size</span><span class="op" id="1725892">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725896">for</span>&nbsp;<span class="op" id="1725900">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725904">ms</span>&nbsp;<span class="op" id="1725907">:=</span>&nbsp;<span class="ident" id="1725910">maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725922">if</span>&nbsp;<span class="builtintype" id="1725925">uintptr</span><span class="op" id="1725932">(</span><span class="ident" id="1725933">size</span><span class="op" id="1725937">)</span>&nbsp;<span class="op" id="1725939">&lt;=</span>&nbsp;<span class="builtintype" id="1725942">uintptr</span><span class="op" id="1725949">(</span><span class="ident" id="1725950">ms</span><span class="op" id="1725952">)</span>&nbsp;<span class="op" id="1725954">||</span>&nbsp;<span class="ident" id="1725957">casuintptr</span><span class="op" id="1725967">(</span><span class="op" id="1725968">(</span><span class="op" id="1725969">*</span><span class="builtintype" id="1725970">uintptr</span><span class="op" id="1725977">)</span><span class="op" id="1725978">(</span><span class="ident" id="1725979">unsafe</span><span class="op" id="1725985">.</span><span class="ident" id="1725986">Pointer</span><span class="op" id="1725993">(</span><span class="op" id="1725994">&amp;</span><span class="ident" id="1725995">maxstring</span><span class="op" id="1726004">)</span><span class="op" id="1726005">)</span><span class="op" id="1726006">,</span>&nbsp;<span class="builtintype" id="1726008">uintptr</span><span class="op" id="1726015">(</span><span class="ident" id="1726016">ms</span><span class="op" id="1726018">)</span><span class="op" id="1726019">,</span>&nbsp;<span class="builtintype" id="1726021">uintptr</span><span class="op" id="1726028">(</span><span class="ident" id="1726029">size</span><span class="op" id="1726033">)</span><span class="op" id="1726034">)</span>&nbsp;<span class="op" id="1726036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726041">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726053">}</span><br>
<span class="lineno">210</span><span class="op" id="1726055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1726058">//&nbsp;rawbyteslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;byte&nbsp;slice.&nbsp;The&nbsp;byte&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1726132">func</span>&nbsp;<span class="ident" id="1726137">rawbyteslice</span><span class="op" id="1726149">(</span><span class="ident" id="1726150">size</span>&nbsp;<span class="builtintype" id="1726155">int</span><span class="op" id="1726158">)</span>&nbsp;<span class="op" id="1726160">(</span><span class="ident" id="1726161">b</span>&nbsp;<span class="op" id="1726163">[</span><span class="op" id="1726164">]</span><span class="builtintype" id="1726165">byte</span><span class="op" id="1726169">)</span>&nbsp;<span class="op" id="1726171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1726174">cap</span>&nbsp;<span class="op" id="1726178">:=</span>&nbsp;<span class="ident" id="1726181">goroundupsize</span><span class="op" id="1726194">(</span><span class="builtintype" id="1726195">uintptr</span><span class="op" id="1726202">(</span><span class="ident" id="1726203">size</span><span class="op" id="1726207">)</span><span class="op" id="1726208">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726211">p</span>&nbsp;<span class="op" id="1726213">:=</span>&nbsp;<span class="ident" id="1726216">mallocgc</span><span class="op" id="1726224">(</span><span class="builtinfunc" id="1726225">cap</span><span class="op" id="1726228">,</span>&nbsp;<span class="ident" id="1726230">nil</span><span class="op" id="1726233">,</span>&nbsp;<span class="ident" id="1726235">flagNoScan</span><span class="op" id="1726245">|</span><span class="ident" id="1726246">flagNoZero</span><span class="op" id="1726256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726259">if</span>&nbsp;<span class="builtinfunc" id="1726262">cap</span>&nbsp;<span class="op" id="1726266">!=</span>&nbsp;<span class="builtintype" id="1726269">uintptr</span><span class="op" id="1726276">(</span><span class="ident" id="1726277">size</span><span class="op" id="1726281">)</span>&nbsp;<span class="op" id="1726283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726287">memclr</span><span class="op" id="1726293">(</span><span class="ident" id="1726294">add</span><span class="op" id="1726297">(</span><span class="ident" id="1726298">p</span><span class="op" id="1726299">,</span>&nbsp;<span class="builtintype" id="1726301">uintptr</span><span class="op" id="1726308">(</span><span class="ident" id="1726309">size</span><span class="op" id="1726313">)</span><span class="op" id="1726314">)</span><span class="op" id="1726315">,</span>&nbsp;<span class="builtinfunc" id="1726317">cap</span><span class="op" id="1726320">-</span><span class="builtintype" id="1726321">uintptr</span><span class="op" id="1726328">(</span><span class="ident" id="1726329">size</span><span class="op" id="1726333">)</span><span class="op" id="1726334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726341">(</span><span class="op" id="1726342">*</span><span class="ident" id="1726343">slice</span><span class="op" id="1726348">)</span><span class="op" id="1726349">(</span><span class="ident" id="1726350">unsafe</span><span class="op" id="1726356">.</span><span class="ident" id="1726357">Pointer</span><span class="op" id="1726364">(</span><span class="op" id="1726365">&amp;</span><span class="ident" id="1726366">b</span><span class="op" id="1726367">)</span><span class="op" id="1726368">)</span><span class="op" id="1726369">.</span><span class="ident" id="1726370">array</span>&nbsp;<span class="op" id="1726376">=</span>&nbsp;<span class="op" id="1726378">(</span><span class="op" id="1726379">*</span><span class="builtintype" id="1726380">uint8</span><span class="op" id="1726385">)</span><span class="op" id="1726386">(</span><span class="ident" id="1726387">p</span><span class="op" id="1726388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726391">(</span><span class="op" id="1726392">*</span><span class="ident" id="1726393">slice</span><span class="op" id="1726398">)</span><span class="op" id="1726399">(</span><span class="ident" id="1726400">unsafe</span><span class="op" id="1726406">.</span><span class="ident" id="1726407">Pointer</span><span class="op" id="1726414">(</span><span class="op" id="1726415">&amp;</span><span class="ident" id="1726416">b</span><span class="op" id="1726417">)</span><span class="op" id="1726418">)</span><span class="op" id="1726419">.</span><span class="builtinfunc" id="1726420">len</span>&nbsp;<span class="op" id="1726424">=</span>&nbsp;<span class="builtintype" id="1726426">uint</span><span class="op" id="1726430">(</span><span class="ident" id="1726431">size</span><span class="op" id="1726435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726438">(</span><span class="op" id="1726439">*</span><span class="ident" id="1726440">slice</span><span class="op" id="1726445">)</span><span class="op" id="1726446">(</span><span class="ident" id="1726447">unsafe</span><span class="op" id="1726453">.</span><span class="ident" id="1726454">Pointer</span><span class="op" id="1726461">(</span><span class="op" id="1726462">&amp;</span><span class="ident" id="1726463">b</span><span class="op" id="1726464">)</span><span class="op" id="1726465">)</span><span class="op" id="1726466">.</span><span class="builtinfunc" id="1726467">cap</span>&nbsp;<span class="op" id="1726471">=</span>&nbsp;<span class="builtintype" id="1726473">uint</span><span class="op" id="1726477">(</span><span class="builtinfunc" id="1726478">cap</span><span class="op" id="1726481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726484">return</span><br>
<span class="lineno"></span><span class="op" id="1726491">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1726494">//&nbsp;rawruneslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;rune&nbsp;slice.&nbsp;The&nbsp;rune&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1726568">func</span>&nbsp;<span class="ident" id="1726573">rawruneslice</span><span class="op" id="1726585">(</span><span class="ident" id="1726586">size</span>&nbsp;<span class="builtintype" id="1726591">int</span><span class="op" id="1726594">)</span>&nbsp;<span class="op" id="1726596">(</span><span class="ident" id="1726597">b</span>&nbsp;<span class="op" id="1726599">[</span><span class="op" id="1726600">]</span><span class="builtintype" id="1726601">rune</span><span class="op" id="1726605">)</span>&nbsp;<span class="op" id="1726607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726610">if</span>&nbsp;<span class="builtintype" id="1726613">uintptr</span><span class="op" id="1726620">(</span><span class="ident" id="1726621">size</span><span class="op" id="1726625">)</span>&nbsp;<span class="op" id="1726627">&gt;</span>&nbsp;<span class="ident" id="1726629">maxmem</span><span class="op" id="1726635">/</span><span class="num" id="1726636">4</span>&nbsp;<span class="op" id="1726638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726642">gothrow</span><span class="op" id="1726649">(</span><span class="string" id="1726650">&#34;out&nbsp;of&nbsp;memory&#34;</span><span class="op" id="1726665">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726671">mem</span>&nbsp;<span class="op" id="1726675">:=</span>&nbsp;<span class="ident" id="1726678">goroundupsize</span><span class="op" id="1726691">(</span><span class="builtintype" id="1726692">uintptr</span><span class="op" id="1726699">(</span><span class="ident" id="1726700">size</span><span class="op" id="1726704">)</span>&nbsp;<span class="op" id="1726706">*</span>&nbsp;<span class="num" id="1726708">4</span><span class="op" id="1726709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726712">p</span>&nbsp;<span class="op" id="1726714">:=</span>&nbsp;<span class="ident" id="1726717">mallocgc</span><span class="op" id="1726725">(</span><span class="ident" id="1726726">mem</span><span class="op" id="1726729">,</span>&nbsp;<span class="ident" id="1726731">nil</span><span class="op" id="1726734">,</span>&nbsp;<span class="ident" id="1726736">flagNoScan</span><span class="op" id="1726746">|</span><span class="ident" id="1726747">flagNoZero</span><span class="op" id="1726757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726760">if</span>&nbsp;<span class="ident" id="1726763">mem</span>&nbsp;<span class="op" id="1726767">!=</span>&nbsp;<span class="builtintype" id="1726770">uintptr</span><span class="op" id="1726777">(</span><span class="ident" id="1726778">size</span><span class="op" id="1726782">)</span><span class="op" id="1726783">*</span><span class="num" id="1726784">4</span>&nbsp;<span class="op" id="1726786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726790">memclr</span><span class="op" id="1726796">(</span><span class="ident" id="1726797">add</span><span class="op" id="1726800">(</span><span class="ident" id="1726801">p</span><span class="op" id="1726802">,</span>&nbsp;<span class="builtintype" id="1726804">uintptr</span><span class="op" id="1726811">(</span><span class="ident" id="1726812">size</span><span class="op" id="1726816">)</span><span class="op" id="1726817">*</span><span class="num" id="1726818">4</span><span class="op" id="1726819">)</span><span class="op" id="1726820">,</span>&nbsp;<span class="ident" id="1726822">mem</span><span class="op" id="1726825">-</span><span class="builtintype" id="1726826">uintptr</span><span class="op" id="1726833">(</span><span class="ident" id="1726834">size</span><span class="op" id="1726838">)</span><span class="op" id="1726839">*</span><span class="num" id="1726840">4</span><span class="op" id="1726841">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726848">(</span><span class="op" id="1726849">*</span><span class="ident" id="1726850">slice</span><span class="op" id="1726855">)</span><span class="op" id="1726856">(</span><span class="ident" id="1726857">unsafe</span><span class="op" id="1726863">.</span><span class="ident" id="1726864">Pointer</span><span class="op" id="1726871">(</span><span class="op" id="1726872">&amp;</span><span class="ident" id="1726873">b</span><span class="op" id="1726874">)</span><span class="op" id="1726875">)</span><span class="op" id="1726876">.</span><span class="ident" id="1726877">array</span>&nbsp;<span class="op" id="1726883">=</span>&nbsp;<span class="op" id="1726885">(</span><span class="op" id="1726886">*</span><span class="builtintype" id="1726887">uint8</span><span class="op" id="1726892">)</span><span class="op" id="1726893">(</span><span class="ident" id="1726894">p</span><span class="op" id="1726895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726898">(</span><span class="op" id="1726899">*</span><span class="ident" id="1726900">slice</span><span class="op" id="1726905">)</span><span class="op" id="1726906">(</span><span class="ident" id="1726907">unsafe</span><span class="op" id="1726913">.</span><span class="ident" id="1726914">Pointer</span><span class="op" id="1726921">(</span><span class="op" id="1726922">&amp;</span><span class="ident" id="1726923">b</span><span class="op" id="1726924">)</span><span class="op" id="1726925">)</span><span class="op" id="1726926">.</span><span class="builtinfunc" id="1726927">len</span>&nbsp;<span class="op" id="1726931">=</span>&nbsp;<span class="builtintype" id="1726933">uint</span><span class="op" id="1726937">(</span><span class="ident" id="1726938">size</span><span class="op" id="1726942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1726945">(</span><span class="op" id="1726946">*</span><span class="ident" id="1726947">slice</span><span class="op" id="1726952">)</span><span class="op" id="1726953">(</span><span class="ident" id="1726954">unsafe</span><span class="op" id="1726960">.</span><span class="ident" id="1726961">Pointer</span><span class="op" id="1726968">(</span><span class="op" id="1726969">&amp;</span><span class="ident" id="1726970">b</span><span class="op" id="1726971">)</span><span class="op" id="1726972">)</span><span class="op" id="1726973">.</span><span class="builtinfunc" id="1726974">cap</span>&nbsp;<span class="op" id="1726978">=</span>&nbsp;<span class="builtintype" id="1726980">uint</span><span class="op" id="1726984">(</span><span class="ident" id="1726985">mem</span>&nbsp;<span class="op" id="1726989">/</span>&nbsp;<span class="num" id="1726991">4</span><span class="op" id="1726992">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726995">return</span><br>
<span class="lineno"></span><span class="op" id="1727002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1727005">//&nbsp;used&nbsp;by&nbsp;cmd/cgo</span><br>
<span class="lineno"></span><span class="keyword" id="1727024">func</span>&nbsp;<span class="ident" id="1727029">gobytes</span><span class="op" id="1727036">(</span><span class="ident" id="1727037">p</span>&nbsp;<span class="op" id="1727039">*</span><span class="builtintype" id="1727040">byte</span><span class="op" id="1727044">,</span>&nbsp;<span class="ident" id="1727046">n</span>&nbsp;<span class="builtintype" id="1727048">int</span><span class="op" id="1727051">)</span>&nbsp;<span class="op" id="1727053">[</span><span class="op" id="1727054">]</span><span class="builtintype" id="1727055">byte</span>&nbsp;<span class="op" id="1727060">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727063">if</span>&nbsp;<span class="ident" id="1727066">n</span>&nbsp;<span class="op" id="1727068">==</span>&nbsp;<span class="num" id="1727071">0</span>&nbsp;<span class="op" id="1727073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727077">return</span>&nbsp;<span class="builtinfunc" id="1727084">make</span><span class="op" id="1727088">(</span><span class="op" id="1727089">[</span><span class="op" id="1727090">]</span><span class="builtintype" id="1727091">byte</span><span class="op" id="1727095">,</span>&nbsp;<span class="num" id="1727097">0</span><span class="op" id="1727098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727104">x</span>&nbsp;<span class="op" id="1727106">:=</span>&nbsp;<span class="builtinfunc" id="1727109">make</span><span class="op" id="1727113">(</span><span class="op" id="1727114">[</span><span class="op" id="1727115">]</span><span class="builtintype" id="1727116">byte</span><span class="op" id="1727120">,</span>&nbsp;<span class="ident" id="1727122">n</span><span class="op" id="1727123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727126">memmove</span><span class="op" id="1727133">(</span><span class="ident" id="1727134">unsafe</span><span class="op" id="1727140">.</span><span class="ident" id="1727141">Pointer</span><span class="op" id="1727148">(</span><span class="op" id="1727149">&amp;</span><span class="ident" id="1727150">x</span><span class="op" id="1727151">[</span><span class="num" id="1727152">0</span><span class="op" id="1727153">]</span><span class="op" id="1727154">)</span><span class="op" id="1727155">,</span>&nbsp;<span class="ident" id="1727157">unsafe</span><span class="op" id="1727163">.</span><span class="ident" id="1727164">Pointer</span><span class="op" id="1727171">(</span><span class="ident" id="1727172">p</span><span class="op" id="1727173">)</span><span class="op" id="1727174">,</span>&nbsp;<span class="builtintype" id="1727176">uintptr</span><span class="op" id="1727183">(</span><span class="ident" id="1727184">n</span><span class="op" id="1727185">)</span><span class="op" id="1727186">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727189">return</span>&nbsp;<span class="ident" id="1727196">x</span><br>
<span class="lineno"></span><span class="op" id="1727198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1727201">func</span>&nbsp;<span class="ident" id="1727206">gostringsize</span><span class="op" id="1727218">(</span><span class="ident" id="1727219">n</span>&nbsp;<span class="builtintype" id="1727221">int</span><span class="op" id="1727224">)</span>&nbsp;<span class="builtintype" id="1727226">string</span>&nbsp;<span class="op" id="1727233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727236">s</span><span class="op" id="1727237">,</span>&nbsp;<span class="ident" id="1727239">_</span>&nbsp;<span class="op" id="1727241">:=</span>&nbsp;<span class="ident" id="1727244">rawstring</span><span class="op" id="1727253">(</span><span class="ident" id="1727254">n</span><span class="op" id="1727255">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727258">return</span>&nbsp;<span class="ident" id="1727265">s</span><br>
<span class="lineno"></span><span class="op" id="1727267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1727270">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1727284">func</span>&nbsp;<span class="ident" id="1727289">findnull</span><span class="op" id="1727297">(</span><span class="op" id="1727298">*</span><span class="builtintype" id="1727299">byte</span><span class="op" id="1727303">)</span>&nbsp;<span class="builtintype" id="1727305">int</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="1727310">func</span>&nbsp;<span class="ident" id="1727315">gostring</span><span class="op" id="1727323">(</span><span class="ident" id="1727324">p</span>&nbsp;<span class="op" id="1727326">*</span><span class="builtintype" id="1727327">byte</span><span class="op" id="1727331">)</span>&nbsp;<span class="builtintype" id="1727333">string</span>&nbsp;<span class="op" id="1727340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727343">l</span>&nbsp;<span class="op" id="1727345">:=</span>&nbsp;<span class="ident" id="1727348">findnull</span><span class="op" id="1727356">(</span><span class="ident" id="1727357">p</span><span class="op" id="1727358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727361">if</span>&nbsp;<span class="ident" id="1727364">l</span>&nbsp;<span class="op" id="1727366">==</span>&nbsp;<span class="num" id="1727369">0</span>&nbsp;<span class="op" id="1727371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727375">return</span>&nbsp;<span class="string" id="1727382">&#34;&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727389">s</span><span class="op" id="1727390">,</span>&nbsp;<span class="ident" id="1727392">b</span>&nbsp;<span class="op" id="1727394">:=</span>&nbsp;<span class="ident" id="1727397">rawstring</span><span class="op" id="1727406">(</span><span class="ident" id="1727407">l</span><span class="op" id="1727408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727411">memmove</span><span class="op" id="1727418">(</span><span class="ident" id="1727419">unsafe</span><span class="op" id="1727425">.</span><span class="ident" id="1727426">Pointer</span><span class="op" id="1727433">(</span><span class="op" id="1727434">&amp;</span><span class="ident" id="1727435">b</span><span class="op" id="1727436">[</span><span class="num" id="1727437">0</span><span class="op" id="1727438">]</span><span class="op" id="1727439">)</span><span class="op" id="1727440">,</span>&nbsp;<span class="ident" id="1727442">unsafe</span><span class="op" id="1727448">.</span><span class="ident" id="1727449">Pointer</span><span class="op" id="1727456">(</span><span class="ident" id="1727457">p</span><span class="op" id="1727458">)</span><span class="op" id="1727459">,</span>&nbsp;<span class="builtintype" id="1727461">uintptr</span><span class="op" id="1727468">(</span><span class="ident" id="1727469">l</span><span class="op" id="1727470">)</span><span class="op" id="1727471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727474">return</span>&nbsp;<span class="ident" id="1727481">s</span><br>
<span class="lineno"></span><span class="op" id="1727483">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="1727486">func</span>&nbsp;<span class="ident" id="1727491">gostringn</span><span class="op" id="1727500">(</span><span class="ident" id="1727501">p</span>&nbsp;<span class="op" id="1727503">*</span><span class="builtintype" id="1727504">byte</span><span class="op" id="1727508">,</span>&nbsp;<span class="ident" id="1727510">l</span>&nbsp;<span class="builtintype" id="1727512">int</span><span class="op" id="1727515">)</span>&nbsp;<span class="builtintype" id="1727517">string</span>&nbsp;<span class="op" id="1727524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727527">if</span>&nbsp;<span class="ident" id="1727530">l</span>&nbsp;<span class="op" id="1727532">==</span>&nbsp;<span class="num" id="1727535">0</span>&nbsp;<span class="op" id="1727537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727541">return</span>&nbsp;<span class="string" id="1727548">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727552">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727555">s</span><span class="op" id="1727556">,</span>&nbsp;<span class="ident" id="1727558">b</span>&nbsp;<span class="op" id="1727560">:=</span>&nbsp;<span class="ident" id="1727563">rawstring</span><span class="op" id="1727572">(</span><span class="ident" id="1727573">l</span><span class="op" id="1727574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727577">memmove</span><span class="op" id="1727584">(</span><span class="ident" id="1727585">unsafe</span><span class="op" id="1727591">.</span><span class="ident" id="1727592">Pointer</span><span class="op" id="1727599">(</span><span class="op" id="1727600">&amp;</span><span class="ident" id="1727601">b</span><span class="op" id="1727602">[</span><span class="num" id="1727603">0</span><span class="op" id="1727604">]</span><span class="op" id="1727605">)</span><span class="op" id="1727606">,</span>&nbsp;<span class="ident" id="1727608">unsafe</span><span class="op" id="1727614">.</span><span class="ident" id="1727615">Pointer</span><span class="op" id="1727622">(</span><span class="ident" id="1727623">p</span><span class="op" id="1727624">)</span><span class="op" id="1727625">,</span>&nbsp;<span class="builtintype" id="1727627">uintptr</span><span class="op" id="1727634">(</span><span class="ident" id="1727635">l</span><span class="op" id="1727636">)</span><span class="op" id="1727637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727640">return</span>&nbsp;<span class="ident" id="1727647">s</span><br>
<span class="lineno"></span><span class="op" id="1727649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="1727652">func</span>&nbsp;<span class="ident" id="1727657">index</span><span class="op" id="1727662">(</span><span class="ident" id="1727663">s</span><span class="op" id="1727664">,</span>&nbsp;<span class="ident" id="1727666">t</span>&nbsp;<span class="builtintype" id="1727668">string</span><span class="op" id="1727674">)</span>&nbsp;<span class="builtintype" id="1727676">int</span>&nbsp;<span class="op" id="1727680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727683">if</span>&nbsp;<span class="builtinfunc" id="1727686">len</span><span class="op" id="1727689">(</span><span class="ident" id="1727690">t</span><span class="op" id="1727691">)</span>&nbsp;<span class="op" id="1727693">==</span>&nbsp;<span class="num" id="1727696">0</span>&nbsp;<span class="op" id="1727698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727702">return</span>&nbsp;<span class="num" id="1727709">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727715">for</span>&nbsp;<span class="ident" id="1727719">i</span>&nbsp;<span class="op" id="1727721">:=</span>&nbsp;<span class="num" id="1727724">0</span><span class="op" id="1727725">;</span>&nbsp;<span class="ident" id="1727727">i</span>&nbsp;<span class="op" id="1727729">&lt;</span>&nbsp;<span class="builtinfunc" id="1727731">len</span><span class="op" id="1727734">(</span><span class="ident" id="1727735">s</span><span class="op" id="1727736">)</span><span class="op" id="1727737">;</span>&nbsp;<span class="ident" id="1727739">i</span><span class="op" id="1727740">++</span>&nbsp;<span class="op" id="1727743">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727747">if</span>&nbsp;<span class="ident" id="1727750">s</span><span class="op" id="1727751">[</span><span class="ident" id="1727752">i</span><span class="op" id="1727753">]</span>&nbsp;<span class="op" id="1727755">==</span>&nbsp;<span class="ident" id="1727758">t</span><span class="op" id="1727759">[</span><span class="num" id="1727760">0</span><span class="op" id="1727761">]</span>&nbsp;<span class="op" id="1727763">&amp;&amp;</span>&nbsp;<span class="ident" id="1727766">hasprefix</span><span class="op" id="1727775">(</span><span class="ident" id="1727776">s</span><span class="op" id="1727777">[</span><span class="ident" id="1727778">i</span><span class="op" id="1727779">:</span><span class="op" id="1727780">]</span><span class="op" id="1727781">,</span>&nbsp;<span class="ident" id="1727783">t</span><span class="op" id="1727784">)</span>&nbsp;<span class="op" id="1727786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727791">return</span>&nbsp;<span class="ident" id="1727798">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727808">return</span>&nbsp;<span class="op" id="1727815">-</span><span class="num" id="1727816">1</span><br>
<span class="lineno">290</span><span class="op" id="1727818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1727821">func</span>&nbsp;<span class="ident" id="1727826">contains</span><span class="op" id="1727834">(</span><span class="ident" id="1727835">s</span><span class="op" id="1727836">,</span>&nbsp;<span class="ident" id="1727838">t</span>&nbsp;<span class="builtintype" id="1727840">string</span><span class="op" id="1727846">)</span>&nbsp;<span class="builtintype" id="1727848">bool</span>&nbsp;<span class="op" id="1727853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727856">return</span>&nbsp;<span class="ident" id="1727863">index</span><span class="op" id="1727868">(</span><span class="ident" id="1727869">s</span><span class="op" id="1727870">,</span>&nbsp;<span class="ident" id="1727872">t</span><span class="op" id="1727873">)</span>&nbsp;<span class="op" id="1727875">&gt;=</span>&nbsp;<span class="num" id="1727878">0</span><br>
<span class="lineno"></span><span class="op" id="1727880">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span><span class="keyword" id="1727883">func</span>&nbsp;<span class="ident" id="1727888">hasprefix</span><span class="op" id="1727897">(</span><span class="ident" id="1727898">s</span><span class="op" id="1727899">,</span>&nbsp;<span class="ident" id="1727901">t</span>&nbsp;<span class="builtintype" id="1727903">string</span><span class="op" id="1727909">)</span>&nbsp;<span class="builtintype" id="1727911">bool</span>&nbsp;<span class="op" id="1727916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727919">return</span>&nbsp;<span class="builtinfunc" id="1727926">len</span><span class="op" id="1727929">(</span><span class="ident" id="1727930">s</span><span class="op" id="1727931">)</span>&nbsp;<span class="op" id="1727933">&gt;=</span>&nbsp;<span class="builtinfunc" id="1727936">len</span><span class="op" id="1727939">(</span><span class="ident" id="1727940">t</span><span class="op" id="1727941">)</span>&nbsp;<span class="op" id="1727943">&amp;&amp;</span>&nbsp;<span class="ident" id="1727946">s</span><span class="op" id="1727947">[</span><span class="op" id="1727948">:</span><span class="builtinfunc" id="1727949">len</span><span class="op" id="1727952">(</span><span class="ident" id="1727953">t</span><span class="op" id="1727954">)</span><span class="op" id="1727955">]</span>&nbsp;<span class="op" id="1727957">==</span>&nbsp;<span class="ident" id="1727960">t</span><br>
<span class="lineno"></span><span class="op" id="1727962">}</span>
</div>
</body>
</html>
