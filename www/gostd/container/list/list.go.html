<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html" class="current">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4084266">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4084321">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4084375">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4084426">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4084475">//</span><br>
<span class="lineno"></span><span class="comment" id="4084478">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4084526">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4084574">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4084607">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4084612">//</span><br>
<span class="lineno"></span><span class="keyword" id="4084615">package</span>&nbsp;<span class="ident" id="4084623">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4084629">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4084672">type</span>&nbsp;<span class="ident" id="4084677">Element</span>&nbsp;<span class="keyword" id="4084685">struct</span>&nbsp;<span class="op" id="4084692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4084695">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4084765">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4084836">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4084906">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4084977">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085002">next</span><span class="op" id="4085006">,</span>&nbsp;<span class="ident" id="4085008">prev</span>&nbsp;<span class="op" id="4085013">*</span><span class="ident" id="4085014">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085024">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085068">list</span>&nbsp;<span class="op" id="4085073">*</span><span class="ident" id="4085074">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085081">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085121">Value</span>&nbsp;<span class="keyword" id="4085127">interface</span><span class="op" id="4085136">{</span><span class="op" id="4085137">}</span><br>
<span class="lineno"></span><span class="op" id="4085139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4085142">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4085188">func</span>&nbsp;<span class="op" id="4085193">(</span><span class="ident" id="4085194">e</span>&nbsp;<span class="op" id="4085196">*</span><span class="ident" id="4085197">Element</span><span class="op" id="4085204">)</span>&nbsp;<span class="ident" id="4085206">Next</span><span class="op" id="4085210">(</span><span class="op" id="4085211">)</span>&nbsp;<span class="op" id="4085213">*</span><span class="ident" id="4085214">Element</span>&nbsp;<span class="op" id="4085222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085225">if</span>&nbsp;<span class="ident" id="4085228">p</span>&nbsp;<span class="op" id="4085230">:=</span>&nbsp;<span class="ident" id="4085233">e</span><span class="op" id="4085234">.</span><span class="ident" id="4085235">next</span><span class="op" id="4085239">;</span>&nbsp;<span class="ident" id="4085241">e</span><span class="op" id="4085242">.</span><span class="ident" id="4085243">list</span>&nbsp;<span class="op" id="4085248">!=</span>&nbsp;<span class="ident" id="4085251">nil</span>&nbsp;<span class="op" id="4085255">&amp;&amp;</span>&nbsp;<span class="ident" id="4085258">p</span>&nbsp;<span class="op" id="4085260">!=</span>&nbsp;<span class="op" id="4085263">&amp;</span><span class="ident" id="4085264">e</span><span class="op" id="4085265">.</span><span class="ident" id="4085266">list</span><span class="op" id="4085270">.</span><span class="ident" id="4085271">root</span>&nbsp;<span class="op" id="4085276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085280">return</span>&nbsp;<span class="ident" id="4085287">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4085290">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085293">return</span>&nbsp;<span class="ident" id="4085300">nil</span><br>
<span class="lineno"></span><span class="op" id="4085304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4085307">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4085357">func</span>&nbsp;<span class="op" id="4085362">(</span><span class="ident" id="4085363">e</span>&nbsp;<span class="op" id="4085365">*</span><span class="ident" id="4085366">Element</span><span class="op" id="4085373">)</span>&nbsp;<span class="ident" id="4085375">Prev</span><span class="op" id="4085379">(</span><span class="op" id="4085380">)</span>&nbsp;<span class="op" id="4085382">*</span><span class="ident" id="4085383">Element</span>&nbsp;<span class="op" id="4085391">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085394">if</span>&nbsp;<span class="ident" id="4085397">p</span>&nbsp;<span class="op" id="4085399">:=</span>&nbsp;<span class="ident" id="4085402">e</span><span class="op" id="4085403">.</span><span class="ident" id="4085404">prev</span><span class="op" id="4085408">;</span>&nbsp;<span class="ident" id="4085410">e</span><span class="op" id="4085411">.</span><span class="ident" id="4085412">list</span>&nbsp;<span class="op" id="4085417">!=</span>&nbsp;<span class="ident" id="4085420">nil</span>&nbsp;<span class="op" id="4085424">&amp;&amp;</span>&nbsp;<span class="ident" id="4085427">p</span>&nbsp;<span class="op" id="4085429">!=</span>&nbsp;<span class="op" id="4085432">&amp;</span><span class="ident" id="4085433">e</span><span class="op" id="4085434">.</span><span class="ident" id="4085435">list</span><span class="op" id="4085439">.</span><span class="ident" id="4085440">root</span>&nbsp;<span class="op" id="4085445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085449">return</span>&nbsp;<span class="ident" id="4085456">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4085459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085462">return</span>&nbsp;<span class="ident" id="4085469">nil</span><br>
<span class="lineno"></span><span class="op" id="4085473">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4085476">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4085517">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4085575">type</span>&nbsp;<span class="ident" id="4085580">List</span>&nbsp;<span class="keyword" id="4085585">struct</span>&nbsp;<span class="op" id="4085592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085595">root</span>&nbsp;<span class="ident" id="4085600">Element</span>&nbsp;<span class="comment" id="4085608">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4085681">len</span>&nbsp;&nbsp;<span class="builtintype" id="4085686">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4085694">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4085751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4085754">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4085792">func</span>&nbsp;<span class="op" id="4085797">(</span><span class="ident" id="4085798">l</span>&nbsp;<span class="op" id="4085800">*</span><span class="ident" id="4085801">List</span><span class="op" id="4085805">)</span>&nbsp;<span class="ident" id="4085807">Init</span><span class="op" id="4085811">(</span><span class="op" id="4085812">)</span>&nbsp;<span class="op" id="4085814">*</span><span class="ident" id="4085815">List</span>&nbsp;<span class="op" id="4085820">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085823">l</span><span class="op" id="4085824">.</span><span class="ident" id="4085825">root</span><span class="op" id="4085829">.</span><span class="ident" id="4085830">next</span>&nbsp;<span class="op" id="4085835">=</span>&nbsp;<span class="op" id="4085837">&amp;</span><span class="ident" id="4085838">l</span><span class="op" id="4085839">.</span><span class="ident" id="4085840">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085846">l</span><span class="op" id="4085847">.</span><span class="ident" id="4085848">root</span><span class="op" id="4085852">.</span><span class="ident" id="4085853">prev</span>&nbsp;<span class="op" id="4085858">=</span>&nbsp;<span class="op" id="4085860">&amp;</span><span class="ident" id="4085861">l</span><span class="op" id="4085862">.</span><span class="ident" id="4085863">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085869">l</span><span class="op" id="4085870">.</span><span class="builtinfunc" id="4085871">len</span>&nbsp;<span class="op" id="4085875">=</span>&nbsp;<span class="num" id="4085877">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085880">return</span>&nbsp;<span class="ident" id="4085887">l</span><br>
<span class="lineno"></span><span class="op" id="4085889">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4085892">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4085928">func</span>&nbsp;<span class="ident" id="4085933">New</span><span class="op" id="4085936">(</span><span class="op" id="4085937">)</span>&nbsp;<span class="op" id="4085939">*</span><span class="ident" id="4085940">List</span>&nbsp;<span class="op" id="4085945">{</span>&nbsp;<span class="keyword" id="4085947">return</span>&nbsp;<span class="builtinfunc" id="4085954">new</span><span class="op" id="4085957">(</span><span class="ident" id="4085958">List</span><span class="op" id="4085962">)</span><span class="op" id="4085963">.</span><span class="ident" id="4085964">Init</span><span class="op" id="4085968">(</span><span class="op" id="4085969">)</span>&nbsp;<span class="op" id="4085971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4085974">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4086023">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4086050">func</span>&nbsp;<span class="op" id="4086055">(</span><span class="ident" id="4086056">l</span>&nbsp;<span class="op" id="4086058">*</span><span class="ident" id="4086059">List</span><span class="op" id="4086063">)</span>&nbsp;<span class="ident" id="4086065">Len</span><span class="op" id="4086068">(</span><span class="op" id="4086069">)</span>&nbsp;<span class="builtintype" id="4086071">int</span>&nbsp;<span class="op" id="4086075">{</span>&nbsp;<span class="keyword" id="4086077">return</span>&nbsp;<span class="ident" id="4086084">l</span><span class="op" id="4086085">.</span><span class="builtinfunc" id="4086086">len</span>&nbsp;<span class="op" id="4086090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086093">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4086146">func</span>&nbsp;<span class="op" id="4086151">(</span><span class="ident" id="4086152">l</span>&nbsp;<span class="op" id="4086154">*</span><span class="ident" id="4086155">List</span><span class="op" id="4086159">)</span>&nbsp;<span class="ident" id="4086161">Front</span><span class="op" id="4086166">(</span><span class="op" id="4086167">)</span>&nbsp;<span class="op" id="4086169">*</span><span class="ident" id="4086170">Element</span>&nbsp;<span class="op" id="4086178">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086181">if</span>&nbsp;<span class="ident" id="4086184">l</span><span class="op" id="4086185">.</span><span class="builtinfunc" id="4086186">len</span>&nbsp;<span class="op" id="4086190">==</span>&nbsp;<span class="num" id="4086193">0</span>&nbsp;<span class="op" id="4086195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086199">return</span>&nbsp;<span class="ident" id="4086206">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4086211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086214">return</span>&nbsp;<span class="ident" id="4086221">l</span><span class="op" id="4086222">.</span><span class="ident" id="4086223">root</span><span class="op" id="4086227">.</span><span class="ident" id="4086228">next</span><br>
<span class="lineno"></span><span class="op" id="4086233">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4086236">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4086287">func</span>&nbsp;<span class="op" id="4086292">(</span><span class="ident" id="4086293">l</span>&nbsp;<span class="op" id="4086295">*</span><span class="ident" id="4086296">List</span><span class="op" id="4086300">)</span>&nbsp;<span class="ident" id="4086302">Back</span><span class="op" id="4086306">(</span><span class="op" id="4086307">)</span>&nbsp;<span class="op" id="4086309">*</span><span class="ident" id="4086310">Element</span>&nbsp;<span class="op" id="4086318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086321">if</span>&nbsp;<span class="ident" id="4086324">l</span><span class="op" id="4086325">.</span><span class="builtinfunc" id="4086326">len</span>&nbsp;<span class="op" id="4086330">==</span>&nbsp;<span class="num" id="4086333">0</span>&nbsp;<span class="op" id="4086335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086339">return</span>&nbsp;<span class="ident" id="4086346">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4086351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086354">return</span>&nbsp;<span class="ident" id="4086361">l</span><span class="op" id="4086362">.</span><span class="ident" id="4086363">root</span><span class="op" id="4086367">.</span><span class="ident" id="4086368">prev</span><br>
<span class="lineno"></span><span class="op" id="4086373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086376">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4086426">func</span>&nbsp;<span class="op" id="4086431">(</span><span class="ident" id="4086432">l</span>&nbsp;<span class="op" id="4086434">*</span><span class="ident" id="4086435">List</span><span class="op" id="4086439">)</span>&nbsp;<span class="ident" id="4086441">lazyInit</span><span class="op" id="4086449">(</span><span class="op" id="4086450">)</span>&nbsp;<span class="op" id="4086452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086455">if</span>&nbsp;<span class="ident" id="4086458">l</span><span class="op" id="4086459">.</span><span class="ident" id="4086460">root</span><span class="op" id="4086464">.</span><span class="ident" id="4086465">next</span>&nbsp;<span class="op" id="4086470">==</span>&nbsp;<span class="ident" id="4086473">nil</span>&nbsp;<span class="op" id="4086477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086481">l</span><span class="op" id="4086482">.</span><span class="ident" id="4086483">Init</span><span class="op" id="4086487">(</span><span class="op" id="4086488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4086491">}</span><br>
<span class="lineno"></span><span class="op" id="4086493">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4086496">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4086559">func</span>&nbsp;<span class="op" id="4086564">(</span><span class="ident" id="4086565">l</span>&nbsp;<span class="op" id="4086567">*</span><span class="ident" id="4086568">List</span><span class="op" id="4086572">)</span>&nbsp;<span class="ident" id="4086574">insert</span><span class="op" id="4086580">(</span><span class="ident" id="4086581">e</span><span class="op" id="4086582">,</span>&nbsp;<span class="ident" id="4086584">at</span>&nbsp;<span class="op" id="4086587">*</span><span class="ident" id="4086588">Element</span><span class="op" id="4086595">)</span>&nbsp;<span class="op" id="4086597">*</span><span class="ident" id="4086598">Element</span>&nbsp;<span class="op" id="4086606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086609">n</span>&nbsp;<span class="op" id="4086611">:=</span>&nbsp;<span class="ident" id="4086614">at</span><span class="op" id="4086616">.</span><span class="ident" id="4086617">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086623">at</span><span class="op" id="4086625">.</span><span class="ident" id="4086626">next</span>&nbsp;<span class="op" id="4086631">=</span>&nbsp;<span class="ident" id="4086633">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086636">e</span><span class="op" id="4086637">.</span><span class="ident" id="4086638">prev</span>&nbsp;<span class="op" id="4086643">=</span>&nbsp;<span class="ident" id="4086645">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086649">e</span><span class="op" id="4086650">.</span><span class="ident" id="4086651">next</span>&nbsp;<span class="op" id="4086656">=</span>&nbsp;<span class="ident" id="4086658">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086661">n</span><span class="op" id="4086662">.</span><span class="ident" id="4086663">prev</span>&nbsp;<span class="op" id="4086668">=</span>&nbsp;<span class="ident" id="4086670">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086673">e</span><span class="op" id="4086674">.</span><span class="ident" id="4086675">list</span>&nbsp;<span class="op" id="4086680">=</span>&nbsp;<span class="ident" id="4086682">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086685">l</span><span class="op" id="4086686">.</span><span class="builtinfunc" id="4086687">len</span><span class="op" id="4086690">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086694">return</span>&nbsp;<span class="ident" id="4086701">e</span><br>
<span class="lineno"></span><span class="op" id="4086703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086706">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4086782">func</span>&nbsp;<span class="op" id="4086787">(</span><span class="ident" id="4086788">l</span>&nbsp;<span class="op" id="4086790">*</span><span class="ident" id="4086791">List</span><span class="op" id="4086795">)</span>&nbsp;<span class="ident" id="4086797">insertValue</span><span class="op" id="4086808">(</span><span class="ident" id="4086809">v</span>&nbsp;<span class="keyword" id="4086811">interface</span><span class="op" id="4086820">{</span><span class="op" id="4086821">}</span><span class="op" id="4086822">,</span>&nbsp;<span class="ident" id="4086824">at</span>&nbsp;<span class="op" id="4086827">*</span><span class="ident" id="4086828">Element</span><span class="op" id="4086835">)</span>&nbsp;<span class="op" id="4086837">*</span><span class="ident" id="4086838">Element</span>&nbsp;<span class="op" id="4086846">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086849">return</span>&nbsp;<span class="ident" id="4086856">l</span><span class="op" id="4086857">.</span><span class="ident" id="4086858">insert</span><span class="op" id="4086864">(</span><span class="op" id="4086865">&amp;</span><span class="ident" id="4086866">Element</span><span class="op" id="4086873">{</span><span class="ident" id="4086874">Value</span><span class="op" id="4086879">:</span>&nbsp;<span class="ident" id="4086881">v</span><span class="op" id="4086882">}</span><span class="op" id="4086883">,</span>&nbsp;<span class="ident" id="4086885">at</span><span class="op" id="4086887">)</span><br>
<span class="lineno"></span><span class="op" id="4086889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086892">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4086960">func</span>&nbsp;<span class="op" id="4086965">(</span><span class="ident" id="4086966">l</span>&nbsp;<span class="op" id="4086968">*</span><span class="ident" id="4086969">List</span><span class="op" id="4086973">)</span>&nbsp;<span class="ident" id="4086975">remove</span><span class="op" id="4086981">(</span><span class="ident" id="4086982">e</span>&nbsp;<span class="op" id="4086984">*</span><span class="ident" id="4086985">Element</span><span class="op" id="4086992">)</span>&nbsp;<span class="op" id="4086994">*</span><span class="ident" id="4086995">Element</span>&nbsp;<span class="op" id="4087003">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087006">e</span><span class="op" id="4087007">.</span><span class="ident" id="4087008">prev</span><span class="op" id="4087012">.</span><span class="ident" id="4087013">next</span>&nbsp;<span class="op" id="4087018">=</span>&nbsp;<span class="ident" id="4087020">e</span><span class="op" id="4087021">.</span><span class="ident" id="4087022">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087028">e</span><span class="op" id="4087029">.</span><span class="ident" id="4087030">next</span><span class="op" id="4087034">.</span><span class="ident" id="4087035">prev</span>&nbsp;<span class="op" id="4087040">=</span>&nbsp;<span class="ident" id="4087042">e</span><span class="op" id="4087043">.</span><span class="ident" id="4087044">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087050">e</span><span class="op" id="4087051">.</span><span class="ident" id="4087052">next</span>&nbsp;<span class="op" id="4087057">=</span>&nbsp;<span class="ident" id="4087059">nil</span>&nbsp;<span class="comment" id="4087063">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087086">e</span><span class="op" id="4087087">.</span><span class="ident" id="4087088">prev</span>&nbsp;<span class="op" id="4087093">=</span>&nbsp;<span class="ident" id="4087095">nil</span>&nbsp;<span class="comment" id="4087099">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087122">e</span><span class="op" id="4087123">.</span><span class="ident" id="4087124">list</span>&nbsp;<span class="op" id="4087129">=</span>&nbsp;<span class="ident" id="4087131">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087136">l</span><span class="op" id="4087137">.</span><span class="builtinfunc" id="4087138">len</span><span class="op" id="4087141">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087145">return</span>&nbsp;<span class="ident" id="4087152">e</span><br>
<span class="lineno"></span><span class="op" id="4087154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4087157">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4087214">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4087255">func</span>&nbsp;<span class="op" id="4087260">(</span><span class="ident" id="4087261">l</span>&nbsp;<span class="op" id="4087263">*</span><span class="ident" id="4087264">List</span><span class="op" id="4087268">)</span>&nbsp;<span class="ident" id="4087270">Remove</span><span class="op" id="4087276">(</span><span class="ident" id="4087277">e</span>&nbsp;<span class="op" id="4087279">*</span><span class="ident" id="4087280">Element</span><span class="op" id="4087287">)</span>&nbsp;<span class="keyword" id="4087289">interface</span><span class="op" id="4087298">{</span><span class="op" id="4087299">}</span>&nbsp;<span class="op" id="4087301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087304">if</span>&nbsp;<span class="ident" id="4087307">e</span><span class="op" id="4087308">.</span><span class="ident" id="4087309">list</span>&nbsp;<span class="op" id="4087314">==</span>&nbsp;<span class="ident" id="4087317">l</span>&nbsp;<span class="op" id="4087319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4087323">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4087393">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087461">l</span><span class="op" id="4087462">.</span><span class="ident" id="4087463">remove</span><span class="op" id="4087469">(</span><span class="ident" id="4087470">e</span><span class="op" id="4087471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4087474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087477">return</span>&nbsp;<span class="ident" id="4087484">e</span><span class="op" id="4087485">.</span><span class="ident" id="4087486">Value</span><br>
<span class="lineno"></span><span class="op" id="4087492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4087495">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4087583">func</span>&nbsp;<span class="op" id="4087588">(</span><span class="ident" id="4087589">l</span>&nbsp;<span class="op" id="4087591">*</span><span class="ident" id="4087592">List</span><span class="op" id="4087596">)</span>&nbsp;<span class="ident" id="4087598">PushFront</span><span class="op" id="4087607">(</span><span class="ident" id="4087608">v</span>&nbsp;<span class="keyword" id="4087610">interface</span><span class="op" id="4087619">{</span><span class="op" id="4087620">}</span><span class="op" id="4087621">)</span>&nbsp;<span class="op" id="4087623">*</span><span class="ident" id="4087624">Element</span>&nbsp;<span class="op" id="4087632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087635">l</span><span class="op" id="4087636">.</span><span class="ident" id="4087637">lazyInit</span><span class="op" id="4087645">(</span><span class="op" id="4087646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087649">return</span>&nbsp;<span class="ident" id="4087656">l</span><span class="op" id="4087657">.</span><span class="ident" id="4087658">insertValue</span><span class="op" id="4087669">(</span><span class="ident" id="4087670">v</span><span class="op" id="4087671">,</span>&nbsp;<span class="op" id="4087673">&amp;</span><span class="ident" id="4087674">l</span><span class="op" id="4087675">.</span><span class="ident" id="4087676">root</span><span class="op" id="4087680">)</span><br>
<span class="lineno"></span><span class="op" id="4087682">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4087685">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4087771">func</span>&nbsp;<span class="op" id="4087776">(</span><span class="ident" id="4087777">l</span>&nbsp;<span class="op" id="4087779">*</span><span class="ident" id="4087780">List</span><span class="op" id="4087784">)</span>&nbsp;<span class="ident" id="4087786">PushBack</span><span class="op" id="4087794">(</span><span class="ident" id="4087795">v</span>&nbsp;<span class="keyword" id="4087797">interface</span><span class="op" id="4087806">{</span><span class="op" id="4087807">}</span><span class="op" id="4087808">)</span>&nbsp;<span class="op" id="4087810">*</span><span class="ident" id="4087811">Element</span>&nbsp;<span class="op" id="4087819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087822">l</span><span class="op" id="4087823">.</span><span class="ident" id="4087824">lazyInit</span><span class="op" id="4087832">(</span><span class="op" id="4087833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087836">return</span>&nbsp;<span class="ident" id="4087843">l</span><span class="op" id="4087844">.</span><span class="ident" id="4087845">insertValue</span><span class="op" id="4087856">(</span><span class="ident" id="4087857">v</span><span class="op" id="4087858">,</span>&nbsp;<span class="ident" id="4087860">l</span><span class="op" id="4087861">.</span><span class="ident" id="4087862">root</span><span class="op" id="4087866">.</span><span class="ident" id="4087867">prev</span><span class="op" id="4087871">)</span><br>
<span class="lineno">140</span><span class="op" id="4087873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4087876">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4087968">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4088029">func</span>&nbsp;<span class="op" id="4088034">(</span><span class="ident" id="4088035">l</span>&nbsp;<span class="op" id="4088037">*</span><span class="ident" id="4088038">List</span><span class="op" id="4088042">)</span>&nbsp;<span class="ident" id="4088044">InsertBefore</span><span class="op" id="4088056">(</span><span class="ident" id="4088057">v</span>&nbsp;<span class="keyword" id="4088059">interface</span><span class="op" id="4088068">{</span><span class="op" id="4088069">}</span><span class="op" id="4088070">,</span>&nbsp;<span class="ident" id="4088072">mark</span>&nbsp;<span class="op" id="4088077">*</span><span class="ident" id="4088078">Element</span><span class="op" id="4088085">)</span>&nbsp;<span class="op" id="4088087">*</span><span class="ident" id="4088088">Element</span>&nbsp;<span class="op" id="4088096">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088099">if</span>&nbsp;<span class="ident" id="4088102">mark</span><span class="op" id="4088106">.</span><span class="ident" id="4088107">list</span>&nbsp;<span class="op" id="4088112">!=</span>&nbsp;<span class="ident" id="4088115">l</span>&nbsp;<span class="op" id="4088117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088121">return</span>&nbsp;<span class="ident" id="4088128">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088136">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088193">return</span>&nbsp;<span class="ident" id="4088200">l</span><span class="op" id="4088201">.</span><span class="ident" id="4088202">insertValue</span><span class="op" id="4088213">(</span><span class="ident" id="4088214">v</span><span class="op" id="4088215">,</span>&nbsp;<span class="ident" id="4088217">mark</span><span class="op" id="4088221">.</span><span class="ident" id="4088222">prev</span><span class="op" id="4088226">)</span><br>
<span class="lineno">150</span><span class="op" id="4088228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088231">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4088321">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4088382">func</span>&nbsp;<span class="op" id="4088387">(</span><span class="ident" id="4088388">l</span>&nbsp;<span class="op" id="4088390">*</span><span class="ident" id="4088391">List</span><span class="op" id="4088395">)</span>&nbsp;<span class="ident" id="4088397">InsertAfter</span><span class="op" id="4088408">(</span><span class="ident" id="4088409">v</span>&nbsp;<span class="keyword" id="4088411">interface</span><span class="op" id="4088420">{</span><span class="op" id="4088421">}</span><span class="op" id="4088422">,</span>&nbsp;<span class="ident" id="4088424">mark</span>&nbsp;<span class="op" id="4088429">*</span><span class="ident" id="4088430">Element</span><span class="op" id="4088437">)</span>&nbsp;<span class="op" id="4088439">*</span><span class="ident" id="4088440">Element</span>&nbsp;<span class="op" id="4088448">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088451">if</span>&nbsp;<span class="ident" id="4088454">mark</span><span class="op" id="4088458">.</span><span class="ident" id="4088459">list</span>&nbsp;<span class="op" id="4088464">!=</span>&nbsp;<span class="ident" id="4088467">l</span>&nbsp;<span class="op" id="4088469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088473">return</span>&nbsp;<span class="ident" id="4088480">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088488">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088545">return</span>&nbsp;<span class="ident" id="4088552">l</span><span class="op" id="4088553">.</span><span class="ident" id="4088554">insertValue</span><span class="op" id="4088565">(</span><span class="ident" id="4088566">v</span><span class="op" id="4088567">,</span>&nbsp;<span class="ident" id="4088569">mark</span><span class="op" id="4088573">)</span><br>
<span class="lineno">160</span><span class="op" id="4088575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088578">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4088633">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4088691">func</span>&nbsp;<span class="op" id="4088696">(</span><span class="ident" id="4088697">l</span>&nbsp;<span class="op" id="4088699">*</span><span class="ident" id="4088700">List</span><span class="op" id="4088704">)</span>&nbsp;<span class="ident" id="4088706">MoveToFront</span><span class="op" id="4088717">(</span><span class="ident" id="4088718">e</span>&nbsp;<span class="op" id="4088720">*</span><span class="ident" id="4088721">Element</span><span class="op" id="4088728">)</span>&nbsp;<span class="op" id="4088730">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088733">if</span>&nbsp;<span class="ident" id="4088736">e</span><span class="op" id="4088737">.</span><span class="ident" id="4088738">list</span>&nbsp;<span class="op" id="4088743">!=</span>&nbsp;<span class="ident" id="4088746">l</span>&nbsp;<span class="op" id="4088748">||</span>&nbsp;<span class="ident" id="4088751">l</span><span class="op" id="4088752">.</span><span class="ident" id="4088753">root</span><span class="op" id="4088757">.</span><span class="ident" id="4088758">next</span>&nbsp;<span class="op" id="4088763">==</span>&nbsp;<span class="ident" id="4088766">e</span>&nbsp;<span class="op" id="4088768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088772">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088783">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088840">l</span><span class="op" id="4088841">.</span><span class="ident" id="4088842">insert</span><span class="op" id="4088848">(</span><span class="ident" id="4088849">l</span><span class="op" id="4088850">.</span><span class="ident" id="4088851">remove</span><span class="op" id="4088857">(</span><span class="ident" id="4088858">e</span><span class="op" id="4088859">)</span><span class="op" id="4088860">,</span>&nbsp;<span class="op" id="4088862">&amp;</span><span class="ident" id="4088863">l</span><span class="op" id="4088864">.</span><span class="ident" id="4088865">root</span><span class="op" id="4088869">)</span><br>
<span class="lineno">170</span><span class="op" id="4088871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088874">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4088927">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4088985">func</span>&nbsp;<span class="op" id="4088990">(</span><span class="ident" id="4088991">l</span>&nbsp;<span class="op" id="4088993">*</span><span class="ident" id="4088994">List</span><span class="op" id="4088998">)</span>&nbsp;<span class="ident" id="4089000">MoveToBack</span><span class="op" id="4089010">(</span><span class="ident" id="4089011">e</span>&nbsp;<span class="op" id="4089013">*</span><span class="ident" id="4089014">Element</span><span class="op" id="4089021">)</span>&nbsp;<span class="op" id="4089023">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089026">if</span>&nbsp;<span class="ident" id="4089029">e</span><span class="op" id="4089030">.</span><span class="ident" id="4089031">list</span>&nbsp;<span class="op" id="4089036">!=</span>&nbsp;<span class="ident" id="4089039">l</span>&nbsp;<span class="op" id="4089041">||</span>&nbsp;<span class="ident" id="4089044">l</span><span class="op" id="4089045">.</span><span class="ident" id="4089046">root</span><span class="op" id="4089050">.</span><span class="ident" id="4089051">prev</span>&nbsp;<span class="op" id="4089056">==</span>&nbsp;<span class="ident" id="4089059">e</span>&nbsp;<span class="op" id="4089061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089065">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4089076">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089133">l</span><span class="op" id="4089134">.</span><span class="ident" id="4089135">insert</span><span class="op" id="4089141">(</span><span class="ident" id="4089142">l</span><span class="op" id="4089143">.</span><span class="ident" id="4089144">remove</span><span class="op" id="4089150">(</span><span class="ident" id="4089151">e</span><span class="op" id="4089152">)</span><span class="op" id="4089153">,</span>&nbsp;<span class="ident" id="4089155">l</span><span class="op" id="4089156">.</span><span class="ident" id="4089157">root</span><span class="op" id="4089161">.</span><span class="ident" id="4089162">prev</span><span class="op" id="4089166">)</span><br>
<span class="lineno">180</span><span class="op" id="4089168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4089171">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4089234">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4089314">func</span>&nbsp;<span class="op" id="4089319">(</span><span class="ident" id="4089320">l</span>&nbsp;<span class="op" id="4089322">*</span><span class="ident" id="4089323">List</span><span class="op" id="4089327">)</span>&nbsp;<span class="ident" id="4089329">MoveBefore</span><span class="op" id="4089339">(</span><span class="ident" id="4089340">e</span><span class="op" id="4089341">,</span>&nbsp;<span class="ident" id="4089343">mark</span>&nbsp;<span class="op" id="4089348">*</span><span class="ident" id="4089349">Element</span><span class="op" id="4089356">)</span>&nbsp;<span class="op" id="4089358">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089361">if</span>&nbsp;<span class="ident" id="4089364">e</span><span class="op" id="4089365">.</span><span class="ident" id="4089366">list</span>&nbsp;<span class="op" id="4089371">!=</span>&nbsp;<span class="ident" id="4089374">l</span>&nbsp;<span class="op" id="4089376">||</span>&nbsp;<span class="ident" id="4089379">e</span>&nbsp;<span class="op" id="4089381">==</span>&nbsp;<span class="ident" id="4089384">mark</span>&nbsp;<span class="op" id="4089389">||</span>&nbsp;<span class="ident" id="4089392">mark</span><span class="op" id="4089396">.</span><span class="ident" id="4089397">list</span>&nbsp;<span class="op" id="4089402">!=</span>&nbsp;<span class="ident" id="4089405">l</span>&nbsp;<span class="op" id="4089407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089411">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089422">l</span><span class="op" id="4089423">.</span><span class="ident" id="4089424">insert</span><span class="op" id="4089430">(</span><span class="ident" id="4089431">l</span><span class="op" id="4089432">.</span><span class="ident" id="4089433">remove</span><span class="op" id="4089439">(</span><span class="ident" id="4089440">e</span><span class="op" id="4089441">)</span><span class="op" id="4089442">,</span>&nbsp;<span class="ident" id="4089444">mark</span><span class="op" id="4089448">.</span><span class="ident" id="4089449">prev</span><span class="op" id="4089453">)</span><br>
<span class="lineno"></span><span class="op" id="4089455">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4089458">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4089519">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4089599">func</span>&nbsp;<span class="op" id="4089604">(</span><span class="ident" id="4089605">l</span>&nbsp;<span class="op" id="4089607">*</span><span class="ident" id="4089608">List</span><span class="op" id="4089612">)</span>&nbsp;<span class="ident" id="4089614">MoveAfter</span><span class="op" id="4089623">(</span><span class="ident" id="4089624">e</span><span class="op" id="4089625">,</span>&nbsp;<span class="ident" id="4089627">mark</span>&nbsp;<span class="op" id="4089632">*</span><span class="ident" id="4089633">Element</span><span class="op" id="4089640">)</span>&nbsp;<span class="op" id="4089642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089645">if</span>&nbsp;<span class="ident" id="4089648">e</span><span class="op" id="4089649">.</span><span class="ident" id="4089650">list</span>&nbsp;<span class="op" id="4089655">!=</span>&nbsp;<span class="ident" id="4089658">l</span>&nbsp;<span class="op" id="4089660">||</span>&nbsp;<span class="ident" id="4089663">e</span>&nbsp;<span class="op" id="4089665">==</span>&nbsp;<span class="ident" id="4089668">mark</span>&nbsp;<span class="op" id="4089673">||</span>&nbsp;<span class="ident" id="4089676">mark</span><span class="op" id="4089680">.</span><span class="ident" id="4089681">list</span>&nbsp;<span class="op" id="4089686">!=</span>&nbsp;<span class="ident" id="4089689">l</span>&nbsp;<span class="op" id="4089691">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089695">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089706">l</span><span class="op" id="4089707">.</span><span class="ident" id="4089708">insert</span><span class="op" id="4089714">(</span><span class="ident" id="4089715">l</span><span class="op" id="4089716">.</span><span class="ident" id="4089717">remove</span><span class="op" id="4089723">(</span><span class="ident" id="4089724">e</span><span class="op" id="4089725">)</span><span class="op" id="4089726">,</span>&nbsp;<span class="ident" id="4089728">mark</span><span class="op" id="4089732">)</span><br>
<span class="lineno"></span><span class="op" id="4089734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4089737">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4089808">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4089850">func</span>&nbsp;<span class="op" id="4089855">(</span><span class="ident" id="4089856">l</span>&nbsp;<span class="op" id="4089858">*</span><span class="ident" id="4089859">List</span><span class="op" id="4089863">)</span>&nbsp;<span class="ident" id="4089865">PushBackList</span><span class="op" id="4089877">(</span><span class="ident" id="4089878">other</span>&nbsp;<span class="op" id="4089884">*</span><span class="ident" id="4089885">List</span><span class="op" id="4089889">)</span>&nbsp;<span class="op" id="4089891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089894">l</span><span class="op" id="4089895">.</span><span class="ident" id="4089896">lazyInit</span><span class="op" id="4089904">(</span><span class="op" id="4089905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089908">for</span>&nbsp;<span class="ident" id="4089912">i</span><span class="op" id="4089913">,</span>&nbsp;<span class="ident" id="4089915">e</span>&nbsp;<span class="op" id="4089917">:=</span>&nbsp;<span class="ident" id="4089920">other</span><span class="op" id="4089925">.</span><span class="ident" id="4089926">Len</span><span class="op" id="4089929">(</span><span class="op" id="4089930">)</span><span class="op" id="4089931">,</span>&nbsp;<span class="ident" id="4089933">other</span><span class="op" id="4089938">.</span><span class="ident" id="4089939">Front</span><span class="op" id="4089944">(</span><span class="op" id="4089945">)</span><span class="op" id="4089946">;</span>&nbsp;<span class="ident" id="4089948">i</span>&nbsp;<span class="op" id="4089950">&gt;</span>&nbsp;<span class="num" id="4089952">0</span><span class="op" id="4089953">;</span>&nbsp;<span class="ident" id="4089955">i</span><span class="op" id="4089956">,</span>&nbsp;<span class="ident" id="4089958">e</span>&nbsp;<span class="op" id="4089960">=</span>&nbsp;<span class="ident" id="4089962">i</span><span class="op" id="4089963">-</span><span class="num" id="4089964">1</span><span class="op" id="4089965">,</span>&nbsp;<span class="ident" id="4089967">e</span><span class="op" id="4089968">.</span><span class="ident" id="4089969">Next</span><span class="op" id="4089973">(</span><span class="op" id="4089974">)</span>&nbsp;<span class="op" id="4089976">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089980">l</span><span class="op" id="4089981">.</span><span class="ident" id="4089982">insertValue</span><span class="op" id="4089993">(</span><span class="ident" id="4089994">e</span><span class="op" id="4089995">.</span><span class="ident" id="4089996">Value</span><span class="op" id="4090001">,</span>&nbsp;<span class="ident" id="4090003">l</span><span class="op" id="4090004">.</span><span class="ident" id="4090005">root</span><span class="op" id="4090009">.</span><span class="ident" id="4090010">prev</span><span class="op" id="4090014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090017">}</span><br>
<span class="lineno"></span><span class="op" id="4090019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090022">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4090095">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4090137">func</span>&nbsp;<span class="op" id="4090142">(</span><span class="ident" id="4090143">l</span>&nbsp;<span class="op" id="4090145">*</span><span class="ident" id="4090146">List</span><span class="op" id="4090150">)</span>&nbsp;<span class="ident" id="4090152">PushFrontList</span><span class="op" id="4090165">(</span><span class="ident" id="4090166">other</span>&nbsp;<span class="op" id="4090172">*</span><span class="ident" id="4090173">List</span><span class="op" id="4090177">)</span>&nbsp;<span class="op" id="4090179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090182">l</span><span class="op" id="4090183">.</span><span class="ident" id="4090184">lazyInit</span><span class="op" id="4090192">(</span><span class="op" id="4090193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090196">for</span>&nbsp;<span class="ident" id="4090200">i</span><span class="op" id="4090201">,</span>&nbsp;<span class="ident" id="4090203">e</span>&nbsp;<span class="op" id="4090205">:=</span>&nbsp;<span class="ident" id="4090208">other</span><span class="op" id="4090213">.</span><span class="ident" id="4090214">Len</span><span class="op" id="4090217">(</span><span class="op" id="4090218">)</span><span class="op" id="4090219">,</span>&nbsp;<span class="ident" id="4090221">other</span><span class="op" id="4090226">.</span><span class="ident" id="4090227">Back</span><span class="op" id="4090231">(</span><span class="op" id="4090232">)</span><span class="op" id="4090233">;</span>&nbsp;<span class="ident" id="4090235">i</span>&nbsp;<span class="op" id="4090237">&gt;</span>&nbsp;<span class="num" id="4090239">0</span><span class="op" id="4090240">;</span>&nbsp;<span class="ident" id="4090242">i</span><span class="op" id="4090243">,</span>&nbsp;<span class="ident" id="4090245">e</span>&nbsp;<span class="op" id="4090247">=</span>&nbsp;<span class="ident" id="4090249">i</span><span class="op" id="4090250">-</span><span class="num" id="4090251">1</span><span class="op" id="4090252">,</span>&nbsp;<span class="ident" id="4090254">e</span><span class="op" id="4090255">.</span><span class="ident" id="4090256">Prev</span><span class="op" id="4090260">(</span><span class="op" id="4090261">)</span>&nbsp;<span class="op" id="4090263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090267">l</span><span class="op" id="4090268">.</span><span class="ident" id="4090269">insertValue</span><span class="op" id="4090280">(</span><span class="ident" id="4090281">e</span><span class="op" id="4090282">.</span><span class="ident" id="4090283">Value</span><span class="op" id="4090288">,</span>&nbsp;<span class="op" id="4090290">&amp;</span><span class="ident" id="4090291">l</span><span class="op" id="4090292">.</span><span class="ident" id="4090293">root</span><span class="op" id="4090297">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090300">}</span><br>
<span class="lineno"></span><span class="op" id="4090302">}</span>
</div>
</body>
</html>
