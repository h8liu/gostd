<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html" class="current">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4756083">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4756138">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4756192">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4756243">package</span>&nbsp;<span class="ident" id="4756251">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4756260">import</span>&nbsp;<span class="op" id="4756267">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4756270">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4756277">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4756289">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4756295">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="4756302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756305">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="4756363">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4756421">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="4756482">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="4756493">//</span><br>
<span class="lineno"></span><span class="keyword" id="4756496">type</span>&nbsp;<span class="ident" id="4756501">Error</span>&nbsp;<span class="keyword" id="4756507">struct</span>&nbsp;<span class="op" id="4756514">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756517">Pos</span>&nbsp;<span class="ident" id="4756521">token</span><span class="op" id="4756526">.</span><span class="ident" id="4756527">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756537">Msg</span>&nbsp;<span class="builtintype" id="4756541">string</span><br>
<span class="lineno"></span><span class="op" id="4756548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756551">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="4756592">func</span>&nbsp;<span class="op" id="4756597">(</span><span class="ident" id="4756598">e</span>&nbsp;<span class="ident" id="4756600">Error</span><span class="op" id="4756605">)</span>&nbsp;<span class="ident" id="4756607">Error</span><span class="op" id="4756612">(</span><span class="op" id="4756613">)</span>&nbsp;<span class="builtintype" id="4756615">string</span>&nbsp;<span class="op" id="4756622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756625">if</span>&nbsp;<span class="ident" id="4756628">e</span><span class="op" id="4756629">.</span><span class="ident" id="4756630">Pos</span><span class="op" id="4756633">.</span><span class="ident" id="4756634">Filename</span>&nbsp;<span class="op" id="4756643">!=</span>&nbsp;<span class="string" id="4756646">&#34;&#34;</span>&nbsp;<span class="op" id="4756649">||</span>&nbsp;<span class="ident" id="4756652">e</span><span class="op" id="4756653">.</span><span class="ident" id="4756654">Pos</span><span class="op" id="4756657">.</span><span class="ident" id="4756658">IsValid</span><span class="op" id="4756665">(</span><span class="op" id="4756666">)</span>&nbsp;<span class="op" id="4756668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756672">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756710">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756770">return</span>&nbsp;<span class="ident" id="4756777">e</span><span class="op" id="4756778">.</span><span class="ident" id="4756779">Pos</span><span class="op" id="4756782">.</span><span class="ident" id="4756783">String</span><span class="op" id="4756789">(</span><span class="op" id="4756790">)</span>&nbsp;<span class="op" id="4756792">+</span>&nbsp;<span class="string" id="4756794">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4756799">+</span>&nbsp;<span class="ident" id="4756801">e</span><span class="op" id="4756802">.</span><span class="ident" id="4756803">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756811">return</span>&nbsp;<span class="ident" id="4756818">e</span><span class="op" id="4756819">.</span><span class="ident" id="4756820">Msg</span><br>
<span class="lineno"></span><span class="op" id="4756824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756827">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="4756862">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4756933">//</span><br>
<span class="lineno"></span><span class="keyword" id="4756936">type</span>&nbsp;<span class="ident" id="4756941">ErrorList</span>&nbsp;<span class="op" id="4756951">[</span><span class="op" id="4756952">]</span><span class="op" id="4756953">*</span><span class="ident" id="4756954">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756961">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="4757037">func</span>&nbsp;<span class="op" id="4757042">(</span><span class="ident" id="4757043">p</span>&nbsp;<span class="op" id="4757045">*</span><span class="ident" id="4757046">ErrorList</span><span class="op" id="4757055">)</span>&nbsp;<span class="ident" id="4757057">Add</span><span class="op" id="4757060">(</span><span class="ident" id="4757061">pos</span>&nbsp;<span class="ident" id="4757065">token</span><span class="op" id="4757070">.</span><span class="ident" id="4757071">Position</span><span class="op" id="4757079">,</span>&nbsp;<span class="ident" id="4757081">msg</span>&nbsp;<span class="builtintype" id="4757085">string</span><span class="op" id="4757091">)</span>&nbsp;<span class="op" id="4757093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757096">*</span><span class="ident" id="4757097">p</span>&nbsp;<span class="op" id="4757099">=</span>&nbsp;<span class="builtinfunc" id="4757101">append</span><span class="op" id="4757107">(</span><span class="op" id="4757108">*</span><span class="ident" id="4757109">p</span><span class="op" id="4757110">,</span>&nbsp;<span class="op" id="4757112">&amp;</span><span class="ident" id="4757113">Error</span><span class="op" id="4757118">{</span><span class="ident" id="4757119">pos</span><span class="op" id="4757122">,</span>&nbsp;<span class="ident" id="4757124">msg</span><span class="op" id="4757127">}</span><span class="op" id="4757128">)</span><br>
<span class="lineno"></span><span class="op" id="4757130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757133">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="4757176">func</span>&nbsp;<span class="op" id="4757181">(</span><span class="ident" id="4757182">p</span>&nbsp;<span class="op" id="4757184">*</span><span class="ident" id="4757185">ErrorList</span><span class="op" id="4757194">)</span>&nbsp;<span class="ident" id="4757196">Reset</span><span class="op" id="4757201">(</span><span class="op" id="4757202">)</span>&nbsp;<span class="op" id="4757204">{</span>&nbsp;<span class="op" id="4757206">*</span><span class="ident" id="4757207">p</span>&nbsp;<span class="op" id="4757209">=</span>&nbsp;<span class="op" id="4757211">(</span><span class="op" id="4757212">*</span><span class="ident" id="4757213">p</span><span class="op" id="4757214">)</span><span class="op" id="4757215">[</span><span class="num" id="4757216">0</span><span class="op" id="4757217">:</span><span class="num" id="4757218">0</span><span class="op" id="4757219">]</span>&nbsp;<span class="op" id="4757221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757224">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="4757268">func</span>&nbsp;<span class="op" id="4757273">(</span><span class="ident" id="4757274">p</span>&nbsp;<span class="ident" id="4757276">ErrorList</span><span class="op" id="4757285">)</span>&nbsp;<span class="ident" id="4757287">Len</span><span class="op" id="4757290">(</span><span class="op" id="4757291">)</span>&nbsp;<span class="builtintype" id="4757293">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4757302">{</span>&nbsp;<span class="keyword" id="4757304">return</span>&nbsp;<span class="builtinfunc" id="4757311">len</span><span class="op" id="4757314">(</span><span class="ident" id="4757315">p</span><span class="op" id="4757316">)</span>&nbsp;<span class="op" id="4757318">}</span><br>
<span class="lineno"></span><span class="keyword" id="4757320">func</span>&nbsp;<span class="op" id="4757325">(</span><span class="ident" id="4757326">p</span>&nbsp;<span class="ident" id="4757328">ErrorList</span><span class="op" id="4757337">)</span>&nbsp;<span class="ident" id="4757339">Swap</span><span class="op" id="4757343">(</span><span class="ident" id="4757344">i</span><span class="op" id="4757345">,</span>&nbsp;<span class="ident" id="4757347">j</span>&nbsp;<span class="builtintype" id="4757349">int</span><span class="op" id="4757352">)</span>&nbsp;<span class="op" id="4757354">{</span>&nbsp;<span class="ident" id="4757356">p</span><span class="op" id="4757357">[</span><span class="ident" id="4757358">i</span><span class="op" id="4757359">]</span><span class="op" id="4757360">,</span>&nbsp;<span class="ident" id="4757362">p</span><span class="op" id="4757363">[</span><span class="ident" id="4757364">j</span><span class="op" id="4757365">]</span>&nbsp;<span class="op" id="4757367">=</span>&nbsp;<span class="ident" id="4757369">p</span><span class="op" id="4757370">[</span><span class="ident" id="4757371">j</span><span class="op" id="4757372">]</span><span class="op" id="4757373">,</span>&nbsp;<span class="ident" id="4757375">p</span><span class="op" id="4757376">[</span><span class="ident" id="4757377">i</span><span class="op" id="4757378">]</span>&nbsp;<span class="op" id="4757380">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4757383">func</span>&nbsp;<span class="op" id="4757388">(</span><span class="ident" id="4757389">p</span>&nbsp;<span class="ident" id="4757391">ErrorList</span><span class="op" id="4757400">)</span>&nbsp;<span class="ident" id="4757402">Less</span><span class="op" id="4757406">(</span><span class="ident" id="4757407">i</span><span class="op" id="4757408">,</span>&nbsp;<span class="ident" id="4757410">j</span>&nbsp;<span class="builtintype" id="4757412">int</span><span class="op" id="4757415">)</span>&nbsp;<span class="builtintype" id="4757417">bool</span>&nbsp;<span class="op" id="4757422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757425">e</span>&nbsp;<span class="op" id="4757427">:=</span>&nbsp;<span class="op" id="4757430">&amp;</span><span class="ident" id="4757431">p</span><span class="op" id="4757432">[</span><span class="ident" id="4757433">i</span><span class="op" id="4757434">]</span><span class="op" id="4757435">.</span><span class="ident" id="4757436">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757441">f</span>&nbsp;<span class="op" id="4757443">:=</span>&nbsp;<span class="op" id="4757446">&amp;</span><span class="ident" id="4757447">p</span><span class="op" id="4757448">[</span><span class="ident" id="4757449">j</span><span class="op" id="4757450">]</span><span class="op" id="4757451">.</span><span class="ident" id="4757452">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4757457">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4757531">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4757604">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757619">if</span>&nbsp;<span class="ident" id="4757622">e</span><span class="op" id="4757623">.</span><span class="ident" id="4757624">Filename</span>&nbsp;<span class="op" id="4757633">&lt;</span>&nbsp;<span class="ident" id="4757635">f</span><span class="op" id="4757636">.</span><span class="ident" id="4757637">Filename</span>&nbsp;<span class="op" id="4757646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757650">return</span>&nbsp;<span class="builtintype" id="4757657">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757663">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757666">if</span>&nbsp;<span class="ident" id="4757669">e</span><span class="op" id="4757670">.</span><span class="ident" id="4757671">Filename</span>&nbsp;<span class="op" id="4757680">==</span>&nbsp;<span class="ident" id="4757683">f</span><span class="op" id="4757684">.</span><span class="ident" id="4757685">Filename</span>&nbsp;<span class="op" id="4757694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757698">if</span>&nbsp;<span class="ident" id="4757701">e</span><span class="op" id="4757702">.</span><span class="ident" id="4757703">Line</span>&nbsp;<span class="op" id="4757708">&lt;</span>&nbsp;<span class="ident" id="4757710">f</span><span class="op" id="4757711">.</span><span class="ident" id="4757712">Line</span>&nbsp;<span class="op" id="4757717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757722">return</span>&nbsp;<span class="builtintype" id="4757729">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757740">if</span>&nbsp;<span class="ident" id="4757743">e</span><span class="op" id="4757744">.</span><span class="ident" id="4757745">Line</span>&nbsp;<span class="op" id="4757750">==</span>&nbsp;<span class="ident" id="4757753">f</span><span class="op" id="4757754">.</span><span class="ident" id="4757755">Line</span>&nbsp;<span class="op" id="4757760">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757765">return</span>&nbsp;<span class="ident" id="4757772">e</span><span class="op" id="4757773">.</span><span class="ident" id="4757774">Column</span>&nbsp;<span class="op" id="4757781">&lt;</span>&nbsp;<span class="ident" id="4757783">f</span><span class="op" id="4757784">.</span><span class="ident" id="4757785">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757800">return</span>&nbsp;<span class="builtintype" id="4757807">false</span><br>
<span class="lineno"></span><span class="op" id="4757813">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="4757816">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="4757883">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="4757950">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="4757960">//</span><br>
<span class="lineno">75</span><span class="keyword" id="4757963">func</span>&nbsp;<span class="op" id="4757968">(</span><span class="ident" id="4757969">p</span>&nbsp;<span class="ident" id="4757971">ErrorList</span><span class="op" id="4757980">)</span>&nbsp;<span class="ident" id="4757982">Sort</span><span class="op" id="4757986">(</span><span class="op" id="4757987">)</span>&nbsp;<span class="op" id="4757989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757992">sort</span><span class="op" id="4757996">.</span><span class="ident" id="4757997">Sort</span><span class="op" id="4758001">(</span><span class="ident" id="4758002">p</span><span class="op" id="4758003">)</span><br>
<span class="lineno"></span><span class="op" id="4758005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758008">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="4758092">func</span>&nbsp;<span class="op" id="4758097">(</span><span class="ident" id="4758098">p</span>&nbsp;<span class="op" id="4758100">*</span><span class="ident" id="4758101">ErrorList</span><span class="op" id="4758110">)</span>&nbsp;<span class="ident" id="4758112">RemoveMultiples</span><span class="op" id="4758127">(</span><span class="op" id="4758128">)</span>&nbsp;<span class="op" id="4758130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758133">sort</span><span class="op" id="4758137">.</span><span class="ident" id="4758138">Sort</span><span class="op" id="4758142">(</span><span class="ident" id="4758143">p</span><span class="op" id="4758144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758147">var</span>&nbsp;<span class="ident" id="4758151">last</span>&nbsp;<span class="ident" id="4758156">token</span><span class="op" id="4758161">.</span><span class="ident" id="4758162">Position</span>&nbsp;<span class="comment" id="4758171">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758220">i</span>&nbsp;<span class="op" id="4758222">:=</span>&nbsp;<span class="num" id="4758225">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758228">for</span>&nbsp;<span class="ident" id="4758232">_</span><span class="op" id="4758233">,</span>&nbsp;<span class="ident" id="4758235">e</span>&nbsp;<span class="op" id="4758237">:=</span>&nbsp;<span class="keyword" id="4758240">range</span>&nbsp;<span class="op" id="4758246">*</span><span class="ident" id="4758247">p</span>&nbsp;<span class="op" id="4758249">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758253">if</span>&nbsp;<span class="ident" id="4758256">e</span><span class="op" id="4758257">.</span><span class="ident" id="4758258">Pos</span><span class="op" id="4758261">.</span><span class="ident" id="4758262">Filename</span>&nbsp;<span class="op" id="4758271">!=</span>&nbsp;<span class="ident" id="4758274">last</span><span class="op" id="4758278">.</span><span class="ident" id="4758279">Filename</span>&nbsp;<span class="op" id="4758288">||</span>&nbsp;<span class="ident" id="4758291">e</span><span class="op" id="4758292">.</span><span class="ident" id="4758293">Pos</span><span class="op" id="4758296">.</span><span class="ident" id="4758297">Line</span>&nbsp;<span class="op" id="4758302">!=</span>&nbsp;<span class="ident" id="4758305">last</span><span class="op" id="4758309">.</span><span class="ident" id="4758310">Line</span>&nbsp;<span class="op" id="4758315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758320">last</span>&nbsp;<span class="op" id="4758325">=</span>&nbsp;<span class="ident" id="4758327">e</span><span class="op" id="4758328">.</span><span class="ident" id="4758329">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758336">(</span><span class="op" id="4758337">*</span><span class="ident" id="4758338">p</span><span class="op" id="4758339">)</span><span class="op" id="4758340">[</span><span class="ident" id="4758341">i</span><span class="op" id="4758342">]</span>&nbsp;<span class="op" id="4758344">=</span>&nbsp;<span class="ident" id="4758346">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758351">i</span><span class="op" id="4758352">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758357">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758363">(</span><span class="op" id="4758364">*</span><span class="ident" id="4758365">p</span><span class="op" id="4758366">)</span>&nbsp;<span class="op" id="4758368">=</span>&nbsp;<span class="op" id="4758370">(</span><span class="op" id="4758371">*</span><span class="ident" id="4758372">p</span><span class="op" id="4758373">)</span><span class="op" id="4758374">[</span><span class="num" id="4758375">0</span><span class="op" id="4758376">:</span><span class="ident" id="4758377">i</span><span class="op" id="4758378">]</span><br>
<span class="lineno"></span><span class="op" id="4758380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758383">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="4758431">func</span>&nbsp;<span class="op" id="4758436">(</span><span class="ident" id="4758437">p</span>&nbsp;<span class="ident" id="4758439">ErrorList</span><span class="op" id="4758448">)</span>&nbsp;<span class="ident" id="4758450">Error</span><span class="op" id="4758455">(</span><span class="op" id="4758456">)</span>&nbsp;<span class="builtintype" id="4758458">string</span>&nbsp;<span class="op" id="4758465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758468">switch</span>&nbsp;<span class="builtinfunc" id="4758475">len</span><span class="op" id="4758478">(</span><span class="ident" id="4758479">p</span><span class="op" id="4758480">)</span>&nbsp;<span class="op" id="4758482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758485">case</span>&nbsp;<span class="num" id="4758490">0</span><span class="op" id="4758491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758495">return</span>&nbsp;<span class="string" id="4758502">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758515">case</span>&nbsp;<span class="num" id="4758520">1</span><span class="op" id="4758521">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758525">return</span>&nbsp;<span class="ident" id="4758532">p</span><span class="op" id="4758533">[</span><span class="num" id="4758534">0</span><span class="op" id="4758535">]</span><span class="op" id="4758536">.</span><span class="ident" id="4758537">Error</span><span class="op" id="4758542">(</span><span class="op" id="4758543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758549">return</span>&nbsp;<span class="ident" id="4758556">fmt</span><span class="op" id="4758559">.</span><span class="ident" id="4758560">Sprintf</span><span class="op" id="4758567">(</span><span class="string" id="4758568">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="4758593">,</span>&nbsp;<span class="ident" id="4758595">p</span><span class="op" id="4758596">[</span><span class="num" id="4758597">0</span><span class="op" id="4758598">]</span><span class="op" id="4758599">,</span>&nbsp;<span class="builtinfunc" id="4758601">len</span><span class="op" id="4758604">(</span><span class="ident" id="4758605">p</span><span class="op" id="4758606">)</span><span class="op" id="4758607">-</span><span class="num" id="4758608">1</span><span class="op" id="4758609">)</span><br>
<span class="lineno"></span><span class="op" id="4758611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4758614">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4758669">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4758711">func</span>&nbsp;<span class="op" id="4758716">(</span><span class="ident" id="4758717">p</span>&nbsp;<span class="ident" id="4758719">ErrorList</span><span class="op" id="4758728">)</span>&nbsp;<span class="ident" id="4758730">Err</span><span class="op" id="4758733">(</span><span class="op" id="4758734">)</span>&nbsp;<span class="builtintype" id="4758736">error</span>&nbsp;<span class="op" id="4758742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758745">if</span>&nbsp;<span class="builtinfunc" id="4758748">len</span><span class="op" id="4758751">(</span><span class="ident" id="4758752">p</span><span class="op" id="4758753">)</span>&nbsp;<span class="op" id="4758755">==</span>&nbsp;<span class="num" id="4758758">0</span>&nbsp;<span class="op" id="4758760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758764">return</span>&nbsp;<span class="ident" id="4758771">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758779">return</span>&nbsp;<span class="ident" id="4758786">p</span><br>
<span class="lineno"></span><span class="op" id="4758788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758791">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="4758862">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4758933">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4758962">//</span><br>
<span class="lineno"></span><span class="keyword" id="4758965">func</span>&nbsp;<span class="ident" id="4758970">PrintError</span><span class="op" id="4758980">(</span><span class="ident" id="4758981">w</span>&nbsp;<span class="ident" id="4758983">io</span><span class="op" id="4758985">.</span><span class="ident" id="4758986">Writer</span><span class="op" id="4758992">,</span>&nbsp;<span class="ident" id="4758994">err</span>&nbsp;<span class="builtintype" id="4758998">error</span><span class="op" id="4759003">)</span>&nbsp;<span class="op" id="4759005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759008">if</span>&nbsp;<span class="ident" id="4759011">list</span><span class="op" id="4759015">,</span>&nbsp;<span class="ident" id="4759017">ok</span>&nbsp;<span class="op" id="4759020">:=</span>&nbsp;<span class="ident" id="4759023">err</span><span class="op" id="4759026">.</span><span class="op" id="4759027">(</span><span class="ident" id="4759028">ErrorList</span><span class="op" id="4759037">)</span><span class="op" id="4759038">;</span>&nbsp;<span class="ident" id="4759040">ok</span>&nbsp;<span class="op" id="4759043">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759047">for</span>&nbsp;<span class="ident" id="4759051">_</span><span class="op" id="4759052">,</span>&nbsp;<span class="ident" id="4759054">e</span>&nbsp;<span class="op" id="4759056">:=</span>&nbsp;<span class="keyword" id="4759059">range</span>&nbsp;<span class="ident" id="4759065">list</span>&nbsp;<span class="op" id="4759070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759075">fmt</span><span class="op" id="4759078">.</span><span class="ident" id="4759079">Fprintf</span><span class="op" id="4759086">(</span><span class="ident" id="4759087">w</span><span class="op" id="4759088">,</span>&nbsp;<span class="string" id="4759090">&#34;%s\n&#34;</span><span class="op" id="4759096">,</span>&nbsp;<span class="ident" id="4759098">e</span><span class="op" id="4759099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759106">}</span>&nbsp;<span class="keyword" id="4759108">else</span>&nbsp;<span class="keyword" id="4759113">if</span>&nbsp;<span class="ident" id="4759116">err</span>&nbsp;<span class="op" id="4759120">!=</span>&nbsp;<span class="ident" id="4759123">nil</span>&nbsp;<span class="op" id="4759127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759131">fmt</span><span class="op" id="4759134">.</span><span class="ident" id="4759135">Fprintf</span><span class="op" id="4759142">(</span><span class="ident" id="4759143">w</span><span class="op" id="4759144">,</span>&nbsp;<span class="string" id="4759146">&#34;%s\n&#34;</span><span class="op" id="4759152">,</span>&nbsp;<span class="ident" id="4759154">err</span><span class="op" id="4759157">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759160">}</span><br>
<span class="lineno"></span><span class="op" id="4759162">}</span>
</div>
</body>
</html>
