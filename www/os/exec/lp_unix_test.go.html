<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7819384">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7819440">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7819494">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7819545">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7819610">package</span>&nbsp;<span class="ident" id="7819618">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7819624">import</span>&nbsp;<span class="op" id="7819631">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7819634">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7819647">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7819653">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7819663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7819666">func</span>&nbsp;<span class="ident" id="7819671">TestLookPathUnixEmptyPath</span><span class="op" id="7819696">(</span><span class="ident" id="7819697">t</span>&nbsp;<span class="op" id="7819699">*</span><span class="ident" id="7819700"><a href="/os/exec/lp_unix_test.go.html#7819653">testing</a></span><span class="op" id="7819707">.</span><span class="ident" id="7819708">T</span><span class="op" id="7819709">)</span>&nbsp;<span class="op" id="7819711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819714">tmp</span><span class="op" id="7819717">,</span>&nbsp;<span class="ident" id="7819719">err</span>&nbsp;<span class="op" id="7819723">:=</span>&nbsp;<span class="ident" id="7819726"><a href="/os/exec/lp_unix_test.go.html#7819634">ioutil</a></span><span class="op" id="7819732">.</span><span class="ident" id="7819733">TempDir</span><span class="op" id="7819740">(</span><span class="string" id="7819741">&#34;&#34;</span><span class="op" id="7819743">,</span>&nbsp;<span class="string" id="7819745">&#34;TestLookPathUnixEmptyPath&#34;</span><span class="op" id="7819772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7819775">if</span>&nbsp;<span class="ident" id="7819778"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7819782">!=</span>&nbsp;<span class="ident" id="7819785">nil</span>&nbsp;<span class="op" id="7819789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819793"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7819794">.</span><span class="ident" id="7819795">Fatal</span><span class="op" id="7819800">(</span><span class="string" id="7819801">&#34;TempDir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7819819">,</span>&nbsp;<span class="ident" id="7819821"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7819824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7819827">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7819830">defer</span>&nbsp;<span class="ident" id="7819836"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7819838">.</span><span class="ident" id="7819839">RemoveAll</span><span class="op" id="7819848">(</span><span class="ident" id="7819849"><a href="/os/exec/lp_unix_test.go.html#7819714">tmp</a></span><span class="op" id="7819852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819855">wd</span><span class="op" id="7819857">,</span>&nbsp;<span class="ident" id="7819859"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7819863">:=</span>&nbsp;<span class="ident" id="7819866"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7819868">.</span><span class="ident" id="7819869">Getwd</span><span class="op" id="7819874">(</span><span class="op" id="7819875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7819878">if</span>&nbsp;<span class="ident" id="7819881"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7819885">!=</span>&nbsp;<span class="ident" id="7819888">nil</span>&nbsp;<span class="op" id="7819892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819896"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7819897">.</span><span class="ident" id="7819898">Fatal</span><span class="op" id="7819903">(</span><span class="string" id="7819904">&#34;Getwd&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7819920">,</span>&nbsp;<span class="ident" id="7819922"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7819925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7819928">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819931"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7819935">=</span>&nbsp;<span class="ident" id="7819937"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7819939">.</span><span class="ident" id="7819940">Chdir</span><span class="op" id="7819945">(</span><span class="ident" id="7819946"><a href="/os/exec/lp_unix_test.go.html#7819714">tmp</a></span><span class="op" id="7819949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7819952">if</span>&nbsp;<span class="ident" id="7819955"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7819959">!=</span>&nbsp;<span class="ident" id="7819962">nil</span>&nbsp;<span class="op" id="7819966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7819970"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7819971">.</span><span class="ident" id="7819972">Fatal</span><span class="op" id="7819977">(</span><span class="string" id="7819978">&#34;Chdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7819994">,</span>&nbsp;<span class="ident" id="7819996"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7819999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820005">defer</span>&nbsp;<span class="ident" id="7820011"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820013">.</span><span class="ident" id="7820014">Chdir</span><span class="op" id="7820019">(</span><span class="ident" id="7820020"><a href="/os/exec/lp_unix_test.go.html#7819855">wd</a></span><span class="op" id="7820022">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820026">f</span><span class="op" id="7820027">,</span>&nbsp;<span class="ident" id="7820029"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820033">:=</span>&nbsp;<span class="ident" id="7820036"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820038">.</span><span class="ident" id="7820039">OpenFile</span><span class="op" id="7820047">(</span><span class="string" id="7820048">&#34;exec_me&#34;</span><span class="op" id="7820057">,</span>&nbsp;<span class="ident" id="7820059"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820061">.</span><span class="ident" id="7820062">O_CREATE</span><span class="op" id="7820070">|</span><span class="ident" id="7820071"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820073">.</span><span class="ident" id="7820074">O_EXCL</span><span class="op" id="7820080">,</span>&nbsp;<span class="num" id="7820082">0700</span><span class="op" id="7820086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820089">if</span>&nbsp;<span class="ident" id="7820092"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820096">!=</span>&nbsp;<span class="ident" id="7820099">nil</span>&nbsp;<span class="op" id="7820103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820107"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7820108">.</span><span class="ident" id="7820109">Fatal</span><span class="op" id="7820114">(</span><span class="string" id="7820115">&#34;OpenFile&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7820134">,</span>&nbsp;<span class="ident" id="7820136"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7820139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820142">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820145"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820149">=</span>&nbsp;<span class="ident" id="7820151"><a href="/os/exec/lp_unix_test.go.html#7820026">f</a></span><span class="op" id="7820152">.</span><span class="ident" id="7820153">Close</span><span class="op" id="7820158">(</span><span class="op" id="7820159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820162">if</span>&nbsp;<span class="ident" id="7820165"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820169">!=</span>&nbsp;<span class="ident" id="7820172">nil</span>&nbsp;<span class="op" id="7820176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820180"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7820181">.</span><span class="ident" id="7820182">Fatal</span><span class="op" id="7820187">(</span><span class="string" id="7820188">&#34;Close&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7820204">,</span>&nbsp;<span class="ident" id="7820206"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7820209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820216">pathenv</span>&nbsp;<span class="op" id="7820224">:=</span>&nbsp;<span class="ident" id="7820227"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820229">.</span><span class="ident" id="7820230">Getenv</span><span class="op" id="7820236">(</span><span class="string" id="7820237">&#34;PATH&#34;</span><span class="op" id="7820243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820246">defer</span>&nbsp;<span class="ident" id="7820252"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820254">.</span><span class="ident" id="7820255">Setenv</span><span class="op" id="7820261">(</span><span class="string" id="7820262">&#34;PATH&#34;</span><span class="op" id="7820268">,</span>&nbsp;<span class="ident" id="7820270"><a href="/os/exec/lp_unix_test.go.html#7820216">pathenv</a></span><span class="op" id="7820277">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820281"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820285">=</span>&nbsp;<span class="ident" id="7820287"><a href="/os/exec/lp_unix_test.go.html#7819647">os</a></span><span class="op" id="7820289">.</span><span class="ident" id="7820290">Setenv</span><span class="op" id="7820296">(</span><span class="string" id="7820297">&#34;PATH&#34;</span><span class="op" id="7820303">,</span>&nbsp;<span class="string" id="7820305">&#34;&#34;</span><span class="op" id="7820307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820310">if</span>&nbsp;<span class="ident" id="7820313"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820317">!=</span>&nbsp;<span class="ident" id="7820320">nil</span>&nbsp;<span class="op" id="7820324">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820328"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7820329">.</span><span class="ident" id="7820330">Fatal</span><span class="op" id="7820335">(</span><span class="string" id="7820336">&#34;Setenv&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7820353">,</span>&nbsp;<span class="ident" id="7820355"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span><span class="op" id="7820358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820365">path</span><span class="op" id="7820369">,</span>&nbsp;<span class="ident" id="7820371"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820375">:=</span>&nbsp;<span class="ident" id="7820378"><a href="/os/exec/lp_unix.go.html#6167264">LookPath</a></span><span class="op" id="7820386">(</span><span class="string" id="7820387">&#34;exec_me&#34;</span><span class="op" id="7820396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820399">if</span>&nbsp;<span class="ident" id="7820402"><a href="/os/exec/lp_unix_test.go.html#7819719">err</a></span>&nbsp;<span class="op" id="7820406">==</span>&nbsp;<span class="ident" id="7820409">nil</span>&nbsp;<span class="op" id="7820413">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820417"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7820418">.</span><span class="ident" id="7820419">Fatal</span><span class="op" id="7820424">(</span><span class="string" id="7820425">&#34;LookPath&nbsp;found&nbsp;exec_me&nbsp;in&nbsp;empty&nbsp;$PATH&#34;</span><span class="op" id="7820464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7820470">if</span>&nbsp;<span class="ident" id="7820473"><a href="/os/exec/lp_unix_test.go.html#7820365">path</a></span>&nbsp;<span class="op" id="7820478">!=</span>&nbsp;<span class="string" id="7820481">&#34;&#34;</span>&nbsp;<span class="op" id="7820484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820488"><a href="/os/exec/lp_unix_test.go.html#7819697">t</a></span><span class="op" id="7820489">.</span><span class="ident" id="7820490">Fatalf</span><span class="op" id="7820496">(</span><span class="string" id="7820497">&#34;LookPath&nbsp;path&nbsp;==&nbsp;%q&nbsp;when&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="7820534">,</span>&nbsp;<span class="ident" id="7820536"><a href="/os/exec/lp_unix_test.go.html#7820365">path</a></span><span class="op" id="7820540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820543">}</span><br>
<span class="lineno">55</span><span class="op" id="7820545">}</span>
</div>
</body>
</html>
