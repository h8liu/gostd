<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5515817">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5515873">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5515927">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5515978">//&nbsp;Package&nbsp;plan9obj&nbsp;implements&nbsp;access&nbsp;to&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5516046">package</span>&nbsp;<span class="ident" id="5516054">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5516064">import</span>&nbsp;<span class="op" id="5516071">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516074">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516093">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516103">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516110">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516116">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5516121">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5516124">//&nbsp;A&nbsp;FileHeader&nbsp;represents&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="5516179">type</span>&nbsp;<span class="ident" id="5516184">FileHeader</span>&nbsp;<span class="keyword" id="5516195">struct</span>&nbsp;<span class="op" id="5516202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516205">Magic</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516217">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516225">Bss</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516237">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516245">Entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516257">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516265">PtrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516277">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516282">LoadAddress</span>&nbsp;<span class="ident" id="5516294">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516302">HdrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516314">uint64</span><br>
<span class="lineno"></span><span class="op" id="5516321">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5516324">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5516372">type</span>&nbsp;<span class="ident" id="5516377">File</span>&nbsp;<span class="keyword" id="5516382">struct</span>&nbsp;<span class="op" id="5516389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516392">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516404">Sections</span>&nbsp;<span class="op" id="5516413">[</span><span class="op" id="5516414">]</span><span class="op" id="5516415">*</span><span class="ident" id="5516416">Section</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516425">closer</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5516434">io</span><span class="op" id="5516436">.</span><span class="ident" id="5516437">Closer</span><br>
<span class="lineno"></span><span class="op" id="5516444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5516447">//&nbsp;A&nbsp;SectionHeader&nbsp;represents&nbsp;a&nbsp;single&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="5516515">//&nbsp;This&nbsp;structure&nbsp;doesn&#39;t&nbsp;exist&nbsp;on-disk,&nbsp;but&nbsp;eases&nbsp;navigation</span><br>
<span class="lineno">35</span><span class="comment" id="5516577">//&nbsp;through&nbsp;the&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5516605">type</span>&nbsp;<span class="ident" id="5516610">SectionHeader</span>&nbsp;<span class="keyword" id="5516624">struct</span>&nbsp;<span class="op" id="5516631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516634">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516641">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516649">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516656">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516664">Offset</span>&nbsp;<span class="builtintype" id="5516671">uint32</span><br>
<span class="lineno">40</span><span class="op" id="5516678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5516681">//&nbsp;A&nbsp;Section&nbsp;represents&nbsp;a&nbsp;single&nbsp;section&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5516746">type</span>&nbsp;<span class="ident" id="5516751">Section</span>&nbsp;<span class="keyword" id="5516759">struct</span>&nbsp;<span class="op" id="5516766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516769">SectionHeader</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516785">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516823">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516863">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516898">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516946">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516996">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517020">io</span><span class="op" id="5517022">.</span><span class="ident" id="5517023">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517033">sr</span>&nbsp;<span class="op" id="5517036">*</span><span class="ident" id="5517037">io</span><span class="op" id="5517039">.</span><span class="ident" id="5517040">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5517054">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="5517057">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5517125">func</span>&nbsp;<span class="op" id="5517130">(</span><span class="ident" id="5517131">s</span>&nbsp;<span class="op" id="5517133">*</span><span class="ident" id="5517134">Section</span><span class="op" id="5517141">)</span>&nbsp;<span class="ident" id="5517143">Data</span><span class="op" id="5517147">(</span><span class="op" id="5517148">)</span>&nbsp;<span class="op" id="5517150">(</span><span class="op" id="5517151">[</span><span class="op" id="5517152">]</span><span class="builtintype" id="5517153">byte</span><span class="op" id="5517157">,</span>&nbsp;<span class="builtintype" id="5517159">error</span><span class="op" id="5517164">)</span>&nbsp;<span class="op" id="5517166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517169">dat</span>&nbsp;<span class="op" id="5517173">:=</span>&nbsp;<span class="builtinfunc" id="5517176">make</span><span class="op" id="5517180">(</span><span class="op" id="5517181">[</span><span class="op" id="5517182">]</span><span class="builtintype" id="5517183">byte</span><span class="op" id="5517187">,</span>&nbsp;<span class="ident" id="5517189">s</span><span class="op" id="5517190">.</span><span class="ident" id="5517191">sr</span><span class="op" id="5517193">.</span><span class="ident" id="5517194">Size</span><span class="op" id="5517198">(</span><span class="op" id="5517199">)</span><span class="op" id="5517200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517203">n</span><span class="op" id="5517204">,</span>&nbsp;<span class="ident" id="5517206">err</span>&nbsp;<span class="op" id="5517210">:=</span>&nbsp;<span class="ident" id="5517213">s</span><span class="op" id="5517214">.</span><span class="ident" id="5517215">sr</span><span class="op" id="5517217">.</span><span class="ident" id="5517218">ReadAt</span><span class="op" id="5517224">(</span><span class="ident" id="5517225">dat</span><span class="op" id="5517228">,</span>&nbsp;<span class="num" id="5517230">0</span><span class="op" id="5517231">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517234">if</span>&nbsp;<span class="ident" id="5517237">n</span>&nbsp;<span class="op" id="5517239">==</span>&nbsp;<span class="builtinfunc" id="5517242">len</span><span class="op" id="5517245">(</span><span class="ident" id="5517246">dat</span><span class="op" id="5517249">)</span>&nbsp;<span class="op" id="5517251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517255">err</span>&nbsp;<span class="op" id="5517259">=</span>&nbsp;<span class="ident" id="5517261">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5517266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517269">return</span>&nbsp;<span class="ident" id="5517276">dat</span><span class="op" id="5517279">[</span><span class="num" id="5517280">0</span><span class="op" id="5517281">:</span><span class="ident" id="5517282">n</span><span class="op" id="5517283">]</span><span class="op" id="5517284">,</span>&nbsp;<span class="ident" id="5517286">err</span><br>
<span class="lineno"></span><span class="op" id="5517290">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="5517293">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5517360">func</span>&nbsp;<span class="op" id="5517365">(</span><span class="ident" id="5517366">s</span>&nbsp;<span class="op" id="5517368">*</span><span class="ident" id="5517369">Section</span><span class="op" id="5517376">)</span>&nbsp;<span class="ident" id="5517378">Open</span><span class="op" id="5517382">(</span><span class="op" id="5517383">)</span>&nbsp;<span class="ident" id="5517385">io</span><span class="op" id="5517387">.</span><span class="ident" id="5517388">ReadSeeker</span>&nbsp;<span class="op" id="5517399">{</span>&nbsp;<span class="keyword" id="5517401">return</span>&nbsp;<span class="ident" id="5517408">io</span><span class="op" id="5517410">.</span><span class="ident" id="5517411">NewSectionReader</span><span class="op" id="5517427">(</span><span class="ident" id="5517428">s</span><span class="op" id="5517429">.</span><span class="ident" id="5517430">sr</span><span class="op" id="5517432">,</span>&nbsp;<span class="num" id="5517434">0</span><span class="op" id="5517435">,</span>&nbsp;<span class="num" id="5517437">1</span><span class="op" id="5517438">&lt;&lt;</span><span class="num" id="5517440">63</span><span class="op" id="5517442">-</span><span class="num" id="5517443">1</span><span class="op" id="5517444">)</span>&nbsp;<span class="op" id="5517446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517449">//&nbsp;A&nbsp;Symbol&nbsp;represents&nbsp;an&nbsp;entry&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;symbol&nbsp;table&nbsp;section.</span><br>
<span class="lineno">70</span><span class="keyword" id="5517521">type</span>&nbsp;<span class="ident" id="5517526">Sym</span>&nbsp;<span class="keyword" id="5517530">struct</span>&nbsp;<span class="op" id="5517537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517540">Value</span>&nbsp;<span class="ident" id="5517546">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517554">Type</span>&nbsp;&nbsp;<span class="builtintype" id="5517560">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517566">Name</span>&nbsp;&nbsp;<span class="builtintype" id="5517572">string</span><br>
<span class="lineno"></span><span class="op" id="5517579">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5517582">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5517613">//&nbsp;formatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5517676">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5517727">type</span>&nbsp;<span class="ident" id="5517732">formatError</span>&nbsp;<span class="keyword" id="5517744">struct</span>&nbsp;<span class="op" id="5517751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517754">off</span>&nbsp;<span class="builtintype" id="5517758">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517763">msg</span>&nbsp;<span class="builtintype" id="5517767">string</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517775">val</span>&nbsp;<span class="keyword" id="5517779">interface</span><span class="op" id="5517788">{</span><span class="op" id="5517789">}</span><br>
<span class="lineno"></span><span class="op" id="5517791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5517794">func</span>&nbsp;<span class="op" id="5517799">(</span><span class="ident" id="5517800">e</span>&nbsp;<span class="op" id="5517802">*</span><span class="ident" id="5517803">formatError</span><span class="op" id="5517814">)</span>&nbsp;<span class="ident" id="5517816">Error</span><span class="op" id="5517821">(</span><span class="op" id="5517822">)</span>&nbsp;<span class="builtintype" id="5517824">string</span>&nbsp;<span class="op" id="5517831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517834">msg</span>&nbsp;<span class="op" id="5517838">:=</span>&nbsp;<span class="ident" id="5517841">e</span><span class="op" id="5517842">.</span><span class="ident" id="5517843">msg</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517848">if</span>&nbsp;<span class="ident" id="5517851">e</span><span class="op" id="5517852">.</span><span class="ident" id="5517853">val</span>&nbsp;<span class="op" id="5517857">!=</span>&nbsp;<span class="ident" id="5517860">nil</span>&nbsp;<span class="op" id="5517864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517868">msg</span>&nbsp;<span class="op" id="5517872">+=</span>&nbsp;<span class="ident" id="5517875">fmt</span><span class="op" id="5517878">.</span><span class="ident" id="5517879">Sprintf</span><span class="op" id="5517886">(</span><span class="string" id="5517887">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5517894">,</span>&nbsp;<span class="ident" id="5517896">e</span><span class="op" id="5517897">.</span><span class="ident" id="5517898">val</span><span class="op" id="5517901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5517904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517907">msg</span>&nbsp;<span class="op" id="5517911">+=</span>&nbsp;<span class="ident" id="5517914">fmt</span><span class="op" id="5517917">.</span><span class="ident" id="5517918">Sprintf</span><span class="op" id="5517925">(</span><span class="string" id="5517926">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5517950">,</span>&nbsp;<span class="ident" id="5517952">e</span><span class="op" id="5517953">.</span><span class="ident" id="5517954">off</span><span class="op" id="5517957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517960">return</span>&nbsp;<span class="ident" id="5517967">msg</span><br>
<span class="lineno">95</span><span class="op" id="5517971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517974">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5518067">func</span>&nbsp;<span class="ident" id="5518072">Open</span><span class="op" id="5518076">(</span><span class="ident" id="5518077">name</span>&nbsp;<span class="builtintype" id="5518082">string</span><span class="op" id="5518088">)</span>&nbsp;<span class="op" id="5518090">(</span><span class="op" id="5518091">*</span><span class="ident" id="5518092">File</span><span class="op" id="5518096">,</span>&nbsp;<span class="builtintype" id="5518098">error</span><span class="op" id="5518103">)</span>&nbsp;<span class="op" id="5518105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518108">f</span><span class="op" id="5518109">,</span>&nbsp;<span class="ident" id="5518111">err</span>&nbsp;<span class="op" id="5518115">:=</span>&nbsp;<span class="ident" id="5518118">os</span><span class="op" id="5518120">.</span><span class="ident" id="5518121">Open</span><span class="op" id="5518125">(</span><span class="ident" id="5518126">name</span><span class="op" id="5518130">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518133">if</span>&nbsp;<span class="ident" id="5518136">err</span>&nbsp;<span class="op" id="5518140">!=</span>&nbsp;<span class="ident" id="5518143">nil</span>&nbsp;<span class="op" id="5518147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518151">return</span>&nbsp;<span class="ident" id="5518158">nil</span><span class="op" id="5518161">,</span>&nbsp;<span class="ident" id="5518163">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5518168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518171">ff</span><span class="op" id="5518173">,</span>&nbsp;<span class="ident" id="5518175">err</span>&nbsp;<span class="op" id="5518179">:=</span>&nbsp;<span class="ident" id="5518182">NewFile</span><span class="op" id="5518189">(</span><span class="ident" id="5518190">f</span><span class="op" id="5518191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518194">if</span>&nbsp;<span class="ident" id="5518197">err</span>&nbsp;<span class="op" id="5518201">!=</span>&nbsp;<span class="ident" id="5518204">nil</span>&nbsp;<span class="op" id="5518208">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518212">f</span><span class="op" id="5518213">.</span><span class="ident" id="5518214">Close</span><span class="op" id="5518219">(</span><span class="op" id="5518220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518224">return</span>&nbsp;<span class="ident" id="5518231">nil</span><span class="op" id="5518234">,</span>&nbsp;<span class="ident" id="5518236">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5518241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518244">ff</span><span class="op" id="5518246">.</span><span class="ident" id="5518247">closer</span>&nbsp;<span class="op" id="5518254">=</span>&nbsp;<span class="ident" id="5518256">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518259">return</span>&nbsp;<span class="ident" id="5518266">ff</span><span class="op" id="5518268">,</span>&nbsp;<span class="ident" id="5518270">nil</span><br>
<span class="lineno">110</span><span class="op" id="5518274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5518277">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5518303">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5518370">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">115</span><span class="keyword" id="5518394">func</span>&nbsp;<span class="op" id="5518399">(</span><span class="ident" id="5518400">f</span>&nbsp;<span class="op" id="5518402">*</span><span class="ident" id="5518403">File</span><span class="op" id="5518407">)</span>&nbsp;<span class="ident" id="5518409">Close</span><span class="op" id="5518414">(</span><span class="op" id="5518415">)</span>&nbsp;<span class="builtintype" id="5518417">error</span>&nbsp;<span class="op" id="5518423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518426">var</span>&nbsp;<span class="ident" id="5518430">err</span>&nbsp;<span class="builtintype" id="5518434">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518441">if</span>&nbsp;<span class="ident" id="5518444">f</span><span class="op" id="5518445">.</span><span class="ident" id="5518446">closer</span>&nbsp;<span class="op" id="5518453">!=</span>&nbsp;<span class="ident" id="5518456">nil</span>&nbsp;<span class="op" id="5518460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518464">err</span>&nbsp;<span class="op" id="5518468">=</span>&nbsp;<span class="ident" id="5518470">f</span><span class="op" id="5518471">.</span><span class="ident" id="5518472">closer</span><span class="op" id="5518478">.</span><span class="ident" id="5518479">Close</span><span class="op" id="5518484">(</span><span class="op" id="5518485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518489">f</span><span class="op" id="5518490">.</span><span class="ident" id="5518491">closer</span>&nbsp;<span class="op" id="5518498">=</span>&nbsp;<span class="ident" id="5518500">nil</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5518505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518508">return</span>&nbsp;<span class="ident" id="5518515">err</span><br>
<span class="lineno"></span><span class="op" id="5518519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5518522">func</span>&nbsp;<span class="ident" id="5518527">parseMagic</span><span class="op" id="5518537">(</span><span class="ident" id="5518538">magic</span>&nbsp;<span class="op" id="5518544">[</span><span class="op" id="5518545">]</span><span class="builtintype" id="5518546">byte</span><span class="op" id="5518550">)</span>&nbsp;<span class="op" id="5518552">(</span><span class="builtintype" id="5518553">uint32</span><span class="op" id="5518559">,</span>&nbsp;<span class="builtintype" id="5518561">error</span><span class="op" id="5518566">)</span>&nbsp;<span class="op" id="5518568">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518571">m</span>&nbsp;<span class="op" id="5518573">:=</span>&nbsp;<span class="ident" id="5518576">binary</span><span class="op" id="5518582">.</span><span class="ident" id="5518583">BigEndian</span><span class="op" id="5518592">.</span><span class="ident" id="5518593">Uint32</span><span class="op" id="5518599">(</span><span class="ident" id="5518600">magic</span><span class="op" id="5518605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518608">switch</span>&nbsp;<span class="ident" id="5518615">m</span>&nbsp;<span class="op" id="5518617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518620">case</span>&nbsp;<span class="ident" id="5518625">Magic386</span><span class="op" id="5518633">,</span>&nbsp;<span class="ident" id="5518635">MagicAMD64</span><span class="op" id="5518645">,</span>&nbsp;<span class="ident" id="5518647">MagicARM</span><span class="op" id="5518655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518659">return</span>&nbsp;<span class="ident" id="5518666">m</span><span class="op" id="5518667">,</span>&nbsp;<span class="ident" id="5518669">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5518674">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518677">return</span>&nbsp;<span class="num" id="5518684">0</span><span class="op" id="5518685">,</span>&nbsp;<span class="op" id="5518687">&amp;</span><span class="ident" id="5518688">formatError</span><span class="op" id="5518699">{</span><span class="num" id="5518700">0</span><span class="op" id="5518701">,</span>&nbsp;<span class="string" id="5518703">&#34;bad&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5518721">,</span>&nbsp;<span class="ident" id="5518723">magic</span><span class="op" id="5518728">}</span><br>
<span class="lineno"></span><span class="op" id="5518730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5518733">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno"></span><span class="comment" id="5518818">//&nbsp;The&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">135</span><span class="keyword" id="5518891">func</span>&nbsp;<span class="ident" id="5518896">NewFile</span><span class="op" id="5518903">(</span><span class="ident" id="5518904">r</span>&nbsp;<span class="ident" id="5518906">io</span><span class="op" id="5518908">.</span><span class="ident" id="5518909">ReaderAt</span><span class="op" id="5518917">)</span>&nbsp;<span class="op" id="5518919">(</span><span class="op" id="5518920">*</span><span class="ident" id="5518921">File</span><span class="op" id="5518925">,</span>&nbsp;<span class="builtintype" id="5518927">error</span><span class="op" id="5518932">)</span>&nbsp;<span class="op" id="5518934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518937">sr</span>&nbsp;<span class="op" id="5518940">:=</span>&nbsp;<span class="ident" id="5518943">io</span><span class="op" id="5518945">.</span><span class="ident" id="5518946">NewSectionReader</span><span class="op" id="5518962">(</span><span class="ident" id="5518963">r</span><span class="op" id="5518964">,</span>&nbsp;<span class="num" id="5518966">0</span><span class="op" id="5518967">,</span>&nbsp;<span class="num" id="5518969">1</span><span class="op" id="5518970">&lt;&lt;</span><span class="num" id="5518972">63</span><span class="op" id="5518974">-</span><span class="num" id="5518975">1</span><span class="op" id="5518976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5518979">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Plan&nbsp;9&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519012">var</span>&nbsp;<span class="ident" id="5519016">magic</span>&nbsp;<span class="op" id="5519022">[</span><span class="num" id="5519023">4</span><span class="op" id="5519024">]</span><span class="builtintype" id="5519025">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519031">if</span>&nbsp;<span class="ident" id="5519034">_</span><span class="op" id="5519035">,</span>&nbsp;<span class="ident" id="5519037">err</span>&nbsp;<span class="op" id="5519041">:=</span>&nbsp;<span class="ident" id="5519044">r</span><span class="op" id="5519045">.</span><span class="ident" id="5519046">ReadAt</span><span class="op" id="5519052">(</span><span class="ident" id="5519053">magic</span><span class="op" id="5519058">[</span><span class="op" id="5519059">:</span><span class="op" id="5519060">]</span><span class="op" id="5519061">,</span>&nbsp;<span class="num" id="5519063">0</span><span class="op" id="5519064">)</span><span class="op" id="5519065">;</span>&nbsp;<span class="ident" id="5519067">err</span>&nbsp;<span class="op" id="5519071">!=</span>&nbsp;<span class="ident" id="5519074">nil</span>&nbsp;<span class="op" id="5519078">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519082">return</span>&nbsp;<span class="ident" id="5519089">nil</span><span class="op" id="5519092">,</span>&nbsp;<span class="ident" id="5519094">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519102">_</span><span class="op" id="5519103">,</span>&nbsp;<span class="ident" id="5519105">err</span>&nbsp;<span class="op" id="5519109">:=</span>&nbsp;<span class="ident" id="5519112">parseMagic</span><span class="op" id="5519122">(</span><span class="ident" id="5519123">magic</span><span class="op" id="5519128">[</span><span class="op" id="5519129">:</span><span class="op" id="5519130">]</span><span class="op" id="5519131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519134">if</span>&nbsp;<span class="ident" id="5519137">err</span>&nbsp;<span class="op" id="5519141">!=</span>&nbsp;<span class="ident" id="5519144">nil</span>&nbsp;<span class="op" id="5519148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519152">return</span>&nbsp;<span class="ident" id="5519159">nil</span><span class="op" id="5519162">,</span>&nbsp;<span class="ident" id="5519164">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519173">ph</span>&nbsp;<span class="op" id="5519176">:=</span>&nbsp;<span class="builtinfunc" id="5519179">new</span><span class="op" id="5519182">(</span><span class="ident" id="5519183">prog</span><span class="op" id="5519187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519190">if</span>&nbsp;<span class="ident" id="5519193">err</span>&nbsp;<span class="op" id="5519197">:=</span>&nbsp;<span class="ident" id="5519200">binary</span><span class="op" id="5519206">.</span><span class="ident" id="5519207">Read</span><span class="op" id="5519211">(</span><span class="ident" id="5519212">sr</span><span class="op" id="5519214">,</span>&nbsp;<span class="ident" id="5519216">binary</span><span class="op" id="5519222">.</span><span class="ident" id="5519223">BigEndian</span><span class="op" id="5519232">,</span>&nbsp;<span class="ident" id="5519234">ph</span><span class="op" id="5519236">)</span><span class="op" id="5519237">;</span>&nbsp;<span class="ident" id="5519239">err</span>&nbsp;<span class="op" id="5519243">!=</span>&nbsp;<span class="ident" id="5519246">nil</span>&nbsp;<span class="op" id="5519250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519254">return</span>&nbsp;<span class="ident" id="5519261">nil</span><span class="op" id="5519264">,</span>&nbsp;<span class="ident" id="5519266">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519275">f</span>&nbsp;<span class="op" id="5519277">:=</span>&nbsp;<span class="op" id="5519280">&amp;</span><span class="ident" id="5519281">File</span><span class="op" id="5519285">{</span><span class="ident" id="5519286">FileHeader</span><span class="op" id="5519296">:</span>&nbsp;<span class="ident" id="5519298">FileHeader</span><span class="op" id="5519308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519312">Magic</span><span class="op" id="5519317">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5519325">ph</span><span class="op" id="5519327">.</span><span class="ident" id="5519328">Magic</span><span class="op" id="5519333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519337">Bss</span><span class="op" id="5519340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5519350">ph</span><span class="op" id="5519352">.</span><span class="ident" id="5519353">Bss</span><span class="op" id="5519356">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519360">Entry</span><span class="op" id="5519365">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5519373">uint64</span><span class="op" id="5519379">(</span><span class="ident" id="5519380">ph</span><span class="op" id="5519382">.</span><span class="ident" id="5519383">Entry</span><span class="op" id="5519388">)</span><span class="op" id="5519389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519393">PtrSize</span><span class="op" id="5519400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5519406">4</span><span class="op" id="5519407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519411">LoadAddress</span><span class="op" id="5519422">:</span>&nbsp;<span class="num" id="5519424">0x1000</span><span class="op" id="5519430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519434">HdrSize</span><span class="op" id="5519441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5519447">4</span>&nbsp;<span class="op" id="5519449">*</span>&nbsp;<span class="num" id="5519451">8</span><span class="op" id="5519452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519455">}</span><span class="op" id="5519456">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519460">if</span>&nbsp;<span class="ident" id="5519463">ph</span><span class="op" id="5519465">.</span><span class="ident" id="5519466">Magic</span><span class="op" id="5519471">&amp;</span><span class="ident" id="5519472">Magic64</span>&nbsp;<span class="op" id="5519480">!=</span>&nbsp;<span class="num" id="5519483">0</span>&nbsp;<span class="op" id="5519485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519489">if</span>&nbsp;<span class="ident" id="5519492">err</span>&nbsp;<span class="op" id="5519496">:=</span>&nbsp;<span class="ident" id="5519499">binary</span><span class="op" id="5519505">.</span><span class="ident" id="5519506">Read</span><span class="op" id="5519510">(</span><span class="ident" id="5519511">sr</span><span class="op" id="5519513">,</span>&nbsp;<span class="ident" id="5519515">binary</span><span class="op" id="5519521">.</span><span class="ident" id="5519522">BigEndian</span><span class="op" id="5519531">,</span>&nbsp;<span class="op" id="5519533">&amp;</span><span class="ident" id="5519534">f</span><span class="op" id="5519535">.</span><span class="ident" id="5519536">Entry</span><span class="op" id="5519541">)</span><span class="op" id="5519542">;</span>&nbsp;<span class="ident" id="5519544">err</span>&nbsp;<span class="op" id="5519548">!=</span>&nbsp;<span class="ident" id="5519551">nil</span>&nbsp;<span class="op" id="5519555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519560">return</span>&nbsp;<span class="ident" id="5519567">nil</span><span class="op" id="5519570">,</span>&nbsp;<span class="ident" id="5519572">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519578">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519582">f</span><span class="op" id="5519583">.</span><span class="ident" id="5519584">PtrSize</span>&nbsp;<span class="op" id="5519592">=</span>&nbsp;<span class="num" id="5519594">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519598">f</span><span class="op" id="5519599">.</span><span class="ident" id="5519600">LoadAddress</span>&nbsp;<span class="op" id="5519612">=</span>&nbsp;<span class="num" id="5519614">0x200000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519625">f</span><span class="op" id="5519626">.</span><span class="ident" id="5519627">HdrSize</span>&nbsp;<span class="op" id="5519635">+=</span>&nbsp;<span class="num" id="5519638">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519645">var</span>&nbsp;<span class="ident" id="5519649">sects</span>&nbsp;<span class="op" id="5519655">=</span>&nbsp;<span class="op" id="5519657">[</span><span class="op" id="5519658">]</span><span class="keyword" id="5519659">struct</span>&nbsp;<span class="op" id="5519666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519670">name</span>&nbsp;<span class="builtintype" id="5519675">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519684">size</span>&nbsp;<span class="builtintype" id="5519689">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519697">}</span><span class="op" id="5519698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519702">{</span><span class="string" id="5519703">&#34;text&#34;</span><span class="op" id="5519709">,</span>&nbsp;<span class="ident" id="5519711">ph</span><span class="op" id="5519713">.</span><span class="ident" id="5519714">Text</span><span class="op" id="5519718">}</span><span class="op" id="5519719">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519723">{</span><span class="string" id="5519724">&#34;data&#34;</span><span class="op" id="5519730">,</span>&nbsp;<span class="ident" id="5519732">ph</span><span class="op" id="5519734">.</span><span class="ident" id="5519735">Data</span><span class="op" id="5519739">}</span><span class="op" id="5519740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519744">{</span><span class="string" id="5519745">&#34;syms&#34;</span><span class="op" id="5519751">,</span>&nbsp;<span class="ident" id="5519753">ph</span><span class="op" id="5519755">.</span><span class="ident" id="5519756">Syms</span><span class="op" id="5519760">}</span><span class="op" id="5519761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519765">{</span><span class="string" id="5519766">&#34;spsz&#34;</span><span class="op" id="5519772">,</span>&nbsp;<span class="ident" id="5519774">ph</span><span class="op" id="5519776">.</span><span class="ident" id="5519777">Spsz</span><span class="op" id="5519781">}</span><span class="op" id="5519782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519786">{</span><span class="string" id="5519787">&#34;pcsz&#34;</span><span class="op" id="5519793">,</span>&nbsp;<span class="ident" id="5519795">ph</span><span class="op" id="5519797">.</span><span class="ident" id="5519798">Pcsz</span><span class="op" id="5519802">}</span><span class="op" id="5519803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519806">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519810">f</span><span class="op" id="5519811">.</span><span class="ident" id="5519812">Sections</span>&nbsp;<span class="op" id="5519821">=</span>&nbsp;<span class="builtinfunc" id="5519823">make</span><span class="op" id="5519827">(</span><span class="op" id="5519828">[</span><span class="op" id="5519829">]</span><span class="op" id="5519830">*</span><span class="ident" id="5519831">Section</span><span class="op" id="5519838">,</span>&nbsp;<span class="num" id="5519840">5</span><span class="op" id="5519841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519845">off</span>&nbsp;<span class="op" id="5519849">:=</span>&nbsp;<span class="builtintype" id="5519852">uint32</span><span class="op" id="5519858">(</span><span class="ident" id="5519859">f</span><span class="op" id="5519860">.</span><span class="ident" id="5519861">HdrSize</span><span class="op" id="5519868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519872">for</span>&nbsp;<span class="ident" id="5519876">i</span><span class="op" id="5519877">,</span>&nbsp;<span class="ident" id="5519879">sect</span>&nbsp;<span class="op" id="5519884">:=</span>&nbsp;<span class="keyword" id="5519887">range</span>&nbsp;<span class="ident" id="5519893">sects</span>&nbsp;<span class="op" id="5519899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519903">s</span>&nbsp;<span class="op" id="5519905">:=</span>&nbsp;<span class="builtinfunc" id="5519908">new</span><span class="op" id="5519911">(</span><span class="ident" id="5519912">Section</span><span class="op" id="5519919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519923">s</span><span class="op" id="5519924">.</span><span class="ident" id="5519925">SectionHeader</span>&nbsp;<span class="op" id="5519939">=</span>&nbsp;<span class="ident" id="5519941">SectionHeader</span><span class="op" id="5519954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519959">Name</span><span class="op" id="5519963">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5519967">sect</span><span class="op" id="5519971">.</span><span class="ident" id="5519972">name</span><span class="op" id="5519976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519981">Size</span><span class="op" id="5519985">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5519989">sect</span><span class="op" id="5519993">.</span><span class="ident" id="5519994">size</span><span class="op" id="5519998">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520003">Offset</span><span class="op" id="5520009">:</span>&nbsp;<span class="ident" id="5520011">off</span><span class="op" id="5520014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520022">off</span>&nbsp;<span class="op" id="5520026">+=</span>&nbsp;<span class="ident" id="5520029">sect</span><span class="op" id="5520033">.</span><span class="ident" id="5520034">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520041">s</span><span class="op" id="5520042">.</span><span class="ident" id="5520043">sr</span>&nbsp;<span class="op" id="5520046">=</span>&nbsp;<span class="ident" id="5520048">io</span><span class="op" id="5520050">.</span><span class="ident" id="5520051">NewSectionReader</span><span class="op" id="5520067">(</span><span class="ident" id="5520068">r</span><span class="op" id="5520069">,</span>&nbsp;<span class="ident" id="5520071">int64</span><span class="op" id="5520076">(</span><span class="ident" id="5520077">s</span><span class="op" id="5520078">.</span><span class="ident" id="5520079">Offset</span><span class="op" id="5520085">)</span><span class="op" id="5520086">,</span>&nbsp;<span class="ident" id="5520088">int64</span><span class="op" id="5520093">(</span><span class="ident" id="5520094">s</span><span class="op" id="5520095">.</span><span class="ident" id="5520096">Size</span><span class="op" id="5520100">)</span><span class="op" id="5520101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520105">s</span><span class="op" id="5520106">.</span><span class="ident" id="5520107">ReaderAt</span>&nbsp;<span class="op" id="5520116">=</span>&nbsp;<span class="ident" id="5520118">s</span><span class="op" id="5520119">.</span><span class="ident" id="5520120">sr</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520125">f</span><span class="op" id="5520126">.</span><span class="ident" id="5520127">Sections</span><span class="op" id="5520135">[</span><span class="ident" id="5520136">i</span><span class="op" id="5520137">]</span>&nbsp;<span class="op" id="5520139">=</span>&nbsp;<span class="ident" id="5520141">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520148">return</span>&nbsp;<span class="ident" id="5520155">f</span><span class="op" id="5520156">,</span>&nbsp;<span class="ident" id="5520158">nil</span><br>
<span class="lineno"></span><span class="op" id="5520162">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5520165">func</span>&nbsp;<span class="ident" id="5520170">walksymtab</span><span class="op" id="5520180">(</span><span class="ident" id="5520181">data</span>&nbsp;<span class="op" id="5520186">[</span><span class="op" id="5520187">]</span><span class="builtintype" id="5520188">byte</span><span class="op" id="5520192">,</span>&nbsp;<span class="ident" id="5520194">ptrsz</span>&nbsp;<span class="builtintype" id="5520200">int</span><span class="op" id="5520203">,</span>&nbsp;<span class="ident" id="5520205">fn</span>&nbsp;<span class="keyword" id="5520208">func</span><span class="op" id="5520212">(</span><span class="ident" id="5520213">sym</span><span class="op" id="5520216">)</span>&nbsp;<span class="builtintype" id="5520218">error</span><span class="op" id="5520223">)</span>&nbsp;<span class="builtintype" id="5520225">error</span>&nbsp;<span class="op" id="5520231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520234">var</span>&nbsp;<span class="ident" id="5520238">order</span>&nbsp;<span class="ident" id="5520244">binary</span><span class="op" id="5520250">.</span><span class="ident" id="5520251">ByteOrder</span>&nbsp;<span class="op" id="5520261">=</span>&nbsp;<span class="ident" id="5520263">binary</span><span class="op" id="5520269">.</span><span class="ident" id="5520270">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520281">var</span>&nbsp;<span class="ident" id="5520285">s</span>&nbsp;<span class="ident" id="5520287">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520292">p</span>&nbsp;<span class="op" id="5520294">:=</span>&nbsp;<span class="ident" id="5520297">data</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520303">for</span>&nbsp;<span class="builtinfunc" id="5520307">len</span><span class="op" id="5520310">(</span><span class="ident" id="5520311">p</span><span class="op" id="5520312">)</span>&nbsp;<span class="op" id="5520314">&gt;=</span>&nbsp;<span class="num" id="5520317">4</span>&nbsp;<span class="op" id="5520319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5520323">//&nbsp;Symbol&nbsp;type,&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520348">if</span>&nbsp;<span class="builtinfunc" id="5520351">len</span><span class="op" id="5520354">(</span><span class="ident" id="5520355">p</span><span class="op" id="5520356">)</span>&nbsp;<span class="op" id="5520358">&lt;</span>&nbsp;<span class="ident" id="5520360">ptrsz</span>&nbsp;<span class="op" id="5520366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520371">return</span>&nbsp;<span class="op" id="5520378">&amp;</span><span class="ident" id="5520379">formatError</span><span class="op" id="5520390">{</span><span class="builtinfunc" id="5520391">len</span><span class="op" id="5520394">(</span><span class="ident" id="5520395">data</span><span class="op" id="5520399">)</span><span class="op" id="5520400">,</span>&nbsp;<span class="string" id="5520402">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5520418">,</span>&nbsp;<span class="ident" id="5520420">nil</span><span class="op" id="5520423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520427">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5520431">//&nbsp;fixed-width&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520454">if</span>&nbsp;<span class="ident" id="5520457">ptrsz</span>&nbsp;<span class="op" id="5520463">==</span>&nbsp;<span class="num" id="5520466">8</span>&nbsp;<span class="op" id="5520468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520473">s</span><span class="op" id="5520474">.</span><span class="ident" id="5520475">value</span>&nbsp;<span class="op" id="5520481">=</span>&nbsp;<span class="ident" id="5520483">order</span><span class="op" id="5520488">.</span><span class="ident" id="5520489">Uint64</span><span class="op" id="5520495">(</span><span class="ident" id="5520496">p</span><span class="op" id="5520497">[</span><span class="num" id="5520498">0</span><span class="op" id="5520499">:</span><span class="num" id="5520500">8</span><span class="op" id="5520501">]</span><span class="op" id="5520502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520507">p</span>&nbsp;<span class="op" id="5520509">=</span>&nbsp;<span class="ident" id="5520511">p</span><span class="op" id="5520512">[</span><span class="num" id="5520513">8</span><span class="op" id="5520514">:</span><span class="op" id="5520515">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520519">}</span>&nbsp;<span class="keyword" id="5520521">else</span>&nbsp;<span class="op" id="5520526">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520531">s</span><span class="op" id="5520532">.</span><span class="ident" id="5520533">value</span>&nbsp;<span class="op" id="5520539">=</span>&nbsp;<span class="ident" id="5520541">uint64</span><span class="op" id="5520547">(</span><span class="ident" id="5520548">order</span><span class="op" id="5520553">.</span><span class="ident" id="5520554">Uint32</span><span class="op" id="5520560">(</span><span class="ident" id="5520561">p</span><span class="op" id="5520562">[</span><span class="num" id="5520563">0</span><span class="op" id="5520564">:</span><span class="num" id="5520565">4</span><span class="op" id="5520566">]</span><span class="op" id="5520567">)</span><span class="op" id="5520568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520573">p</span>&nbsp;<span class="op" id="5520575">=</span>&nbsp;<span class="ident" id="5520577">p</span><span class="op" id="5520578">[</span><span class="num" id="5520579">4</span><span class="op" id="5520580">:</span><span class="op" id="5520581">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520590">var</span>&nbsp;<span class="ident" id="5520594">typ</span>&nbsp;<span class="builtintype" id="5520598">byte</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520605">typ</span>&nbsp;<span class="op" id="5520609">=</span>&nbsp;<span class="ident" id="5520611">p</span><span class="op" id="5520612">[</span><span class="num" id="5520613">0</span><span class="op" id="5520614">]</span>&nbsp;<span class="op" id="5520616">&amp;</span>&nbsp;<span class="num" id="5520618">0x7F</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520625">s</span><span class="op" id="5520626">.</span><span class="ident" id="5520627">typ</span>&nbsp;<span class="op" id="5520631">=</span>&nbsp;<span class="ident" id="5520633">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520639">p</span>&nbsp;<span class="op" id="5520641">=</span>&nbsp;<span class="ident" id="5520643">p</span><span class="op" id="5520644">[</span><span class="num" id="5520645">1</span><span class="op" id="5520646">:</span><span class="op" id="5520647">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5520652">//&nbsp;Name.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520663">var</span>&nbsp;<span class="ident" id="5520667">i</span>&nbsp;<span class="builtintype" id="5520669">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520675">var</span>&nbsp;<span class="ident" id="5520679">nnul</span>&nbsp;<span class="builtintype" id="5520684">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520690">for</span>&nbsp;<span class="ident" id="5520694">i</span>&nbsp;<span class="op" id="5520696">=</span>&nbsp;<span class="num" id="5520698">0</span><span class="op" id="5520699">;</span>&nbsp;<span class="ident" id="5520701">i</span>&nbsp;<span class="op" id="5520703">&lt;</span>&nbsp;<span class="builtinfunc" id="5520705">len</span><span class="op" id="5520708">(</span><span class="ident" id="5520709">p</span><span class="op" id="5520710">)</span><span class="op" id="5520711">;</span>&nbsp;<span class="ident" id="5520713">i</span><span class="op" id="5520714">++</span>&nbsp;<span class="op" id="5520717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520722">if</span>&nbsp;<span class="ident" id="5520725">p</span><span class="op" id="5520726">[</span><span class="ident" id="5520727">i</span><span class="op" id="5520728">]</span>&nbsp;<span class="op" id="5520730">==</span>&nbsp;<span class="num" id="5520733">0</span>&nbsp;<span class="op" id="5520735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520741">nnul</span>&nbsp;<span class="op" id="5520746">=</span>&nbsp;<span class="num" id="5520748">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520754">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520771">switch</span>&nbsp;<span class="ident" id="5520778">typ</span>&nbsp;<span class="op" id="5520782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520786">case</span>&nbsp;<span class="string" id="5520791">&#39;z&#39;</span><span class="op" id="5520794">,</span>&nbsp;<span class="string" id="5520796">&#39;Z&#39;</span><span class="op" id="5520799">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520804">p</span>&nbsp;<span class="op" id="5520806">=</span>&nbsp;<span class="ident" id="5520808">p</span><span class="op" id="5520809">[</span><span class="ident" id="5520810">i</span><span class="op" id="5520811">+</span><span class="ident" id="5520812">nnul</span><span class="op" id="5520816">:</span><span class="op" id="5520817">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520822">for</span>&nbsp;<span class="ident" id="5520826">i</span>&nbsp;<span class="op" id="5520828">=</span>&nbsp;<span class="num" id="5520830">0</span><span class="op" id="5520831">;</span>&nbsp;<span class="ident" id="5520833">i</span><span class="op" id="5520834">+</span><span class="num" id="5520835">2</span>&nbsp;<span class="op" id="5520837">&lt;=</span>&nbsp;<span class="builtinfunc" id="5520840">len</span><span class="op" id="5520843">(</span><span class="ident" id="5520844">p</span><span class="op" id="5520845">)</span><span class="op" id="5520846">;</span>&nbsp;<span class="ident" id="5520848">i</span>&nbsp;<span class="op" id="5520850">+=</span>&nbsp;<span class="num" id="5520853">2</span>&nbsp;<span class="op" id="5520855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520861">if</span>&nbsp;<span class="ident" id="5520864">p</span><span class="op" id="5520865">[</span><span class="ident" id="5520866">i</span><span class="op" id="5520867">]</span>&nbsp;<span class="op" id="5520869">==</span>&nbsp;<span class="num" id="5520872">0</span>&nbsp;<span class="op" id="5520874">&amp;&amp;</span>&nbsp;<span class="ident" id="5520877">p</span><span class="op" id="5520878">[</span><span class="ident" id="5520879">i</span><span class="op" id="5520880">+</span><span class="num" id="5520881">1</span><span class="op" id="5520882">]</span>&nbsp;<span class="op" id="5520884">==</span>&nbsp;<span class="num" id="5520887">0</span>&nbsp;<span class="op" id="5520889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520896">nnul</span>&nbsp;<span class="op" id="5520901">=</span>&nbsp;<span class="num" id="5520903">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520910">break</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520933">if</span>&nbsp;<span class="builtinfunc" id="5520936">len</span><span class="op" id="5520939">(</span><span class="ident" id="5520940">p</span><span class="op" id="5520941">)</span>&nbsp;<span class="op" id="5520943">&lt;</span>&nbsp;<span class="ident" id="5520945">i</span><span class="op" id="5520946">+</span><span class="ident" id="5520947">nnul</span>&nbsp;<span class="op" id="5520952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520957">return</span>&nbsp;<span class="op" id="5520964">&amp;</span><span class="ident" id="5520965">formatError</span><span class="op" id="5520976">{</span><span class="builtinfunc" id="5520977">len</span><span class="op" id="5520980">(</span><span class="ident" id="5520981">data</span><span class="op" id="5520985">)</span><span class="op" id="5520986">,</span>&nbsp;<span class="string" id="5520988">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5521004">,</span>&nbsp;<span class="ident" id="5521006">nil</span><span class="op" id="5521009">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521017">s</span><span class="op" id="5521018">.</span><span class="ident" id="5521019">name</span>&nbsp;<span class="op" id="5521024">=</span>&nbsp;<span class="ident" id="5521026">p</span><span class="op" id="5521027">[</span><span class="num" id="5521028">0</span><span class="op" id="5521029">:</span><span class="ident" id="5521030">i</span><span class="op" id="5521031">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521035">i</span>&nbsp;<span class="op" id="5521037">+=</span>&nbsp;<span class="ident" id="5521040">nnul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521047">p</span>&nbsp;<span class="op" id="5521049">=</span>&nbsp;<span class="ident" id="5521051">p</span><span class="op" id="5521052">[</span><span class="ident" id="5521053">i</span><span class="op" id="5521054">:</span><span class="op" id="5521055">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521060">fn</span><span class="op" id="5521062">(</span><span class="ident" id="5521063">s</span><span class="op" id="5521064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521070">return</span>&nbsp;<span class="ident" id="5521077">nil</span><br>
<span class="lineno"></span><span class="op" id="5521081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="5521084">//&nbsp;NewTable&nbsp;decodes&nbsp;the&nbsp;Go&nbsp;symbol&nbsp;table&nbsp;in&nbsp;data,</span><br>
<span class="lineno"></span><span class="comment" id="5521133">//&nbsp;returning&nbsp;an&nbsp;in-memory&nbsp;representation.</span><br>
<span class="lineno"></span><span class="keyword" id="5521175">func</span>&nbsp;<span class="ident" id="5521180">newTable</span><span class="op" id="5521188">(</span><span class="ident" id="5521189">symtab</span>&nbsp;<span class="op" id="5521196">[</span><span class="op" id="5521197">]</span><span class="builtintype" id="5521198">byte</span><span class="op" id="5521202">,</span>&nbsp;<span class="ident" id="5521204">ptrsz</span>&nbsp;<span class="builtintype" id="5521210">int</span><span class="op" id="5521213">)</span>&nbsp;<span class="op" id="5521215">(</span><span class="op" id="5521216">[</span><span class="op" id="5521217">]</span><span class="ident" id="5521218">Sym</span><span class="op" id="5521221">,</span>&nbsp;<span class="builtintype" id="5521223">error</span><span class="op" id="5521228">)</span>&nbsp;<span class="op" id="5521230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521233">var</span>&nbsp;<span class="ident" id="5521237">n</span>&nbsp;<span class="builtintype" id="5521239">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521244">err</span>&nbsp;<span class="op" id="5521248">:=</span>&nbsp;<span class="ident" id="5521251">walksymtab</span><span class="op" id="5521261">(</span><span class="ident" id="5521262">symtab</span><span class="op" id="5521268">,</span>&nbsp;<span class="ident" id="5521270">ptrsz</span><span class="op" id="5521275">,</span>&nbsp;<span class="keyword" id="5521277">func</span><span class="op" id="5521281">(</span><span class="ident" id="5521282">s</span>&nbsp;<span class="ident" id="5521284">sym</span><span class="op" id="5521287">)</span>&nbsp;<span class="builtintype" id="5521289">error</span>&nbsp;<span class="op" id="5521295">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521299">n</span><span class="op" id="5521300">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521305">return</span>&nbsp;<span class="ident" id="5521312">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521317">}</span><span class="op" id="5521318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521321">if</span>&nbsp;<span class="ident" id="5521324">err</span>&nbsp;<span class="op" id="5521328">!=</span>&nbsp;<span class="ident" id="5521331">nil</span>&nbsp;<span class="op" id="5521335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521339">return</span>&nbsp;<span class="ident" id="5521346">nil</span><span class="op" id="5521349">,</span>&nbsp;<span class="ident" id="5521351">err</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521360">fname</span>&nbsp;<span class="op" id="5521366">:=</span>&nbsp;<span class="builtinfunc" id="5521369">make</span><span class="op" id="5521373">(</span><span class="keyword" id="5521374">map</span><span class="op" id="5521377">[</span><span class="builtintype" id="5521378">uint16</span><span class="op" id="5521384">]</span><span class="builtintype" id="5521385">string</span><span class="op" id="5521391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521394">syms</span>&nbsp;<span class="op" id="5521399">:=</span>&nbsp;<span class="builtinfunc" id="5521402">make</span><span class="op" id="5521406">(</span><span class="op" id="5521407">[</span><span class="op" id="5521408">]</span><span class="ident" id="5521409">Sym</span><span class="op" id="5521412">,</span>&nbsp;<span class="num" id="5521414">0</span><span class="op" id="5521415">,</span>&nbsp;<span class="ident" id="5521417">n</span><span class="op" id="5521418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521421">err</span>&nbsp;<span class="op" id="5521425">=</span>&nbsp;<span class="ident" id="5521427">walksymtab</span><span class="op" id="5521437">(</span><span class="ident" id="5521438">symtab</span><span class="op" id="5521444">,</span>&nbsp;<span class="ident" id="5521446">ptrsz</span><span class="op" id="5521451">,</span>&nbsp;<span class="keyword" id="5521453">func</span><span class="op" id="5521457">(</span><span class="ident" id="5521458">s</span>&nbsp;<span class="ident" id="5521460">sym</span><span class="op" id="5521463">)</span>&nbsp;<span class="builtintype" id="5521465">error</span>&nbsp;<span class="op" id="5521471">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521475">n</span>&nbsp;<span class="op" id="5521477">:=</span>&nbsp;<span class="builtinfunc" id="5521480">len</span><span class="op" id="5521483">(</span><span class="ident" id="5521484">syms</span><span class="op" id="5521488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521492">syms</span>&nbsp;<span class="op" id="5521497">=</span>&nbsp;<span class="ident" id="5521499">syms</span><span class="op" id="5521503">[</span><span class="num" id="5521504">0</span>&nbsp;<span class="op" id="5521506">:</span>&nbsp;<span class="ident" id="5521508">n</span><span class="op" id="5521509">+</span><span class="num" id="5521510">1</span><span class="op" id="5521511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521515">ts</span>&nbsp;<span class="op" id="5521518">:=</span>&nbsp;<span class="op" id="5521521">&amp;</span><span class="ident" id="5521522">syms</span><span class="op" id="5521526">[</span><span class="ident" id="5521527">n</span><span class="op" id="5521528">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521532">ts</span><span class="op" id="5521534">.</span><span class="ident" id="5521535">Type</span>&nbsp;<span class="op" id="5521540">=</span>&nbsp;<span class="builtintype" id="5521542">rune</span><span class="op" id="5521546">(</span><span class="ident" id="5521547">s</span><span class="op" id="5521548">.</span><span class="ident" id="5521549">typ</span><span class="op" id="5521552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521556">ts</span><span class="op" id="5521558">.</span><span class="ident" id="5521559">Value</span>&nbsp;<span class="op" id="5521565">=</span>&nbsp;<span class="ident" id="5521567">s</span><span class="op" id="5521568">.</span><span class="ident" id="5521569">value</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521577">switch</span>&nbsp;<span class="ident" id="5521584">s</span><span class="op" id="5521585">.</span><span class="ident" id="5521586">typ</span>&nbsp;<span class="op" id="5521590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521594">default</span><span class="op" id="5521601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521606">ts</span><span class="op" id="5521608">.</span><span class="ident" id="5521609">Name</span>&nbsp;<span class="op" id="5521614">=</span>&nbsp;<span class="builtintype" id="5521616">string</span><span class="op" id="5521622">(</span><span class="ident" id="5521623">s</span><span class="op" id="5521624">.</span><span class="ident" id="5521625">name</span><span class="op" id="5521629">[</span><span class="op" id="5521630">:</span><span class="op" id="5521631">]</span><span class="op" id="5521632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521636">case</span>&nbsp;<span class="string" id="5521641">&#39;z&#39;</span><span class="op" id="5521644">,</span>&nbsp;<span class="string" id="5521646">&#39;Z&#39;</span><span class="op" id="5521649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521654">for</span>&nbsp;<span class="ident" id="5521658">i</span>&nbsp;<span class="op" id="5521660">:=</span>&nbsp;<span class="num" id="5521663">0</span><span class="op" id="5521664">;</span>&nbsp;<span class="ident" id="5521666">i</span>&nbsp;<span class="op" id="5521668">&lt;</span>&nbsp;<span class="builtinfunc" id="5521670">len</span><span class="op" id="5521673">(</span><span class="ident" id="5521674">s</span><span class="op" id="5521675">.</span><span class="ident" id="5521676">name</span><span class="op" id="5521680">)</span><span class="op" id="5521681">;</span>&nbsp;<span class="ident" id="5521683">i</span>&nbsp;<span class="op" id="5521685">+=</span>&nbsp;<span class="num" id="5521688">2</span>&nbsp;<span class="op" id="5521690">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521696">eltIdx</span>&nbsp;<span class="op" id="5521703">:=</span>&nbsp;<span class="ident" id="5521706">binary</span><span class="op" id="5521712">.</span><span class="ident" id="5521713">BigEndian</span><span class="op" id="5521722">.</span><span class="ident" id="5521723">Uint16</span><span class="op" id="5521729">(</span><span class="ident" id="5521730">s</span><span class="op" id="5521731">.</span><span class="ident" id="5521732">name</span><span class="op" id="5521736">[</span><span class="ident" id="5521737">i</span>&nbsp;<span class="op" id="5521739">:</span>&nbsp;<span class="ident" id="5521741">i</span><span class="op" id="5521742">+</span><span class="num" id="5521743">2</span><span class="op" id="5521744">]</span><span class="op" id="5521745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521751">elt</span><span class="op" id="5521754">,</span>&nbsp;<span class="ident" id="5521756">ok</span>&nbsp;<span class="op" id="5521759">:=</span>&nbsp;<span class="ident" id="5521762">fname</span><span class="op" id="5521767">[</span><span class="ident" id="5521768">eltIdx</span><span class="op" id="5521774">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521780">if</span>&nbsp;<span class="op" id="5521783">!</span><span class="ident" id="5521784">ok</span>&nbsp;<span class="op" id="5521787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521794">return</span>&nbsp;<span class="op" id="5521801">&amp;</span><span class="ident" id="5521802">formatError</span><span class="op" id="5521813">{</span><span class="op" id="5521814">-</span><span class="num" id="5521815">1</span><span class="op" id="5521816">,</span>&nbsp;<span class="string" id="5521818">&#34;bad&nbsp;filename&nbsp;code&#34;</span><span class="op" id="5521837">,</span>&nbsp;<span class="ident" id="5521839">eltIdx</span><span class="op" id="5521845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521851">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521857">if</span>&nbsp;<span class="ident" id="5521860">n</span>&nbsp;<span class="op" id="5521862">:=</span>&nbsp;<span class="builtinfunc" id="5521865">len</span><span class="op" id="5521868">(</span><span class="ident" id="5521869">ts</span><span class="op" id="5521871">.</span><span class="ident" id="5521872">Name</span><span class="op" id="5521876">)</span><span class="op" id="5521877">;</span>&nbsp;<span class="ident" id="5521879">n</span>&nbsp;<span class="op" id="5521881">&gt;</span>&nbsp;<span class="num" id="5521883">0</span>&nbsp;<span class="op" id="5521885">&amp;&amp;</span>&nbsp;<span class="ident" id="5521888">ts</span><span class="op" id="5521890">.</span><span class="ident" id="5521891">Name</span><span class="op" id="5521895">[</span><span class="ident" id="5521896">n</span><span class="op" id="5521897">-</span><span class="num" id="5521898">1</span><span class="op" id="5521899">]</span>&nbsp;<span class="op" id="5521901">!=</span>&nbsp;<span class="string" id="5521904">&#39;/&#39;</span>&nbsp;<span class="op" id="5521908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521915">ts</span><span class="op" id="5521917">.</span><span class="ident" id="5521918">Name</span>&nbsp;<span class="op" id="5521923">+=</span>&nbsp;<span class="string" id="5521926">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521940">ts</span><span class="op" id="5521942">.</span><span class="ident" id="5521943">Name</span>&nbsp;<span class="op" id="5521948">+=</span>&nbsp;<span class="ident" id="5521951">elt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521958">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521966">switch</span>&nbsp;<span class="ident" id="5521973">s</span><span class="op" id="5521974">.</span><span class="ident" id="5521975">typ</span>&nbsp;<span class="op" id="5521979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521983">case</span>&nbsp;<span class="string" id="5521988">&#39;f&#39;</span><span class="op" id="5521991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521996">fname</span><span class="op" id="5522001">[</span><span class="builtintype" id="5522002">uint16</span><span class="op" id="5522008">(</span><span class="ident" id="5522009">s</span><span class="op" id="5522010">.</span><span class="ident" id="5522011">value</span><span class="op" id="5522016">)</span><span class="op" id="5522017">]</span>&nbsp;<span class="op" id="5522019">=</span>&nbsp;<span class="ident" id="5522021">ts</span><span class="op" id="5522023">.</span><span class="ident" id="5522024">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522031">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522035">return</span>&nbsp;<span class="ident" id="5522042">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522047">}</span><span class="op" id="5522048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522051">if</span>&nbsp;<span class="ident" id="5522054">err</span>&nbsp;<span class="op" id="5522058">!=</span>&nbsp;<span class="ident" id="5522061">nil</span>&nbsp;<span class="op" id="5522065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522069">return</span>&nbsp;<span class="ident" id="5522076">nil</span><span class="op" id="5522079">,</span>&nbsp;<span class="ident" id="5522081">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522086">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522090">return</span>&nbsp;<span class="ident" id="5522097">syms</span><span class="op" id="5522101">,</span>&nbsp;<span class="ident" id="5522103">nil</span><br>
<span class="lineno"></span><span class="op" id="5522107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5522110">//&nbsp;Symbols&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;table&nbsp;for&nbsp;f.</span><br>
<span class="lineno">305</span><span class="keyword" id="5522153">func</span>&nbsp;<span class="op" id="5522158">(</span><span class="ident" id="5522159">f</span>&nbsp;<span class="op" id="5522161">*</span><span class="ident" id="5522162">File</span><span class="op" id="5522166">)</span>&nbsp;<span class="ident" id="5522168">Symbols</span><span class="op" id="5522175">(</span><span class="op" id="5522176">)</span>&nbsp;<span class="op" id="5522178">(</span><span class="op" id="5522179">[</span><span class="op" id="5522180">]</span><span class="ident" id="5522181">Sym</span><span class="op" id="5522184">,</span>&nbsp;<span class="builtintype" id="5522186">error</span><span class="op" id="5522191">)</span>&nbsp;<span class="op" id="5522193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522196">symtabSection</span>&nbsp;<span class="op" id="5522210">:=</span>&nbsp;<span class="ident" id="5522213">f</span><span class="op" id="5522214">.</span><span class="ident" id="5522215">Section</span><span class="op" id="5522222">(</span><span class="string" id="5522223">&#34;syms&#34;</span><span class="op" id="5522229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522232">if</span>&nbsp;<span class="ident" id="5522235">symtabSection</span>&nbsp;<span class="op" id="5522249">==</span>&nbsp;<span class="ident" id="5522252">nil</span>&nbsp;<span class="op" id="5522256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522260">return</span>&nbsp;<span class="ident" id="5522267">nil</span><span class="op" id="5522270">,</span>&nbsp;<span class="ident" id="5522272">errors</span><span class="op" id="5522278">.</span><span class="ident" id="5522279">New</span><span class="op" id="5522282">(</span><span class="string" id="5522283">&#34;no&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5522302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522305">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522309">symtab</span><span class="op" id="5522315">,</span>&nbsp;<span class="ident" id="5522317">err</span>&nbsp;<span class="op" id="5522321">:=</span>&nbsp;<span class="ident" id="5522324">symtabSection</span><span class="op" id="5522337">.</span><span class="ident" id="5522338">Data</span><span class="op" id="5522342">(</span><span class="op" id="5522343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522346">if</span>&nbsp;<span class="ident" id="5522349">err</span>&nbsp;<span class="op" id="5522353">!=</span>&nbsp;<span class="ident" id="5522356">nil</span>&nbsp;<span class="op" id="5522360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522364">return</span>&nbsp;<span class="ident" id="5522371">nil</span><span class="op" id="5522374">,</span>&nbsp;<span class="ident" id="5522376">errors</span><span class="op" id="5522382">.</span><span class="ident" id="5522383">New</span><span class="op" id="5522386">(</span><span class="string" id="5522387">&#34;cannot&nbsp;load&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5522415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522418">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522422">return</span>&nbsp;<span class="ident" id="5522429">newTable</span><span class="op" id="5522437">(</span><span class="ident" id="5522438">symtab</span><span class="op" id="5522444">,</span>&nbsp;<span class="ident" id="5522446">f</span><span class="op" id="5522447">.</span><span class="ident" id="5522448">PtrSize</span><span class="op" id="5522455">)</span><br>
<span class="lineno"></span><span class="op" id="5522457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5522460">//&nbsp;Section&nbsp;returns&nbsp;a&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno">320</span><span class="comment" id="5522528">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5522547">func</span>&nbsp;<span class="op" id="5522552">(</span><span class="ident" id="5522553">f</span>&nbsp;<span class="op" id="5522555">*</span><span class="ident" id="5522556">File</span><span class="op" id="5522560">)</span>&nbsp;<span class="ident" id="5522562">Section</span><span class="op" id="5522569">(</span><span class="ident" id="5522570">name</span>&nbsp;<span class="builtintype" id="5522575">string</span><span class="op" id="5522581">)</span>&nbsp;<span class="op" id="5522583">*</span><span class="ident" id="5522584">Section</span>&nbsp;<span class="op" id="5522592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522595">for</span>&nbsp;<span class="ident" id="5522599">_</span><span class="op" id="5522600">,</span>&nbsp;<span class="ident" id="5522602">s</span>&nbsp;<span class="op" id="5522604">:=</span>&nbsp;<span class="keyword" id="5522607">range</span>&nbsp;<span class="ident" id="5522613">f</span><span class="op" id="5522614">.</span><span class="ident" id="5522615">Sections</span>&nbsp;<span class="op" id="5522624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522628">if</span>&nbsp;<span class="ident" id="5522631">s</span><span class="op" id="5522632">.</span><span class="ident" id="5522633">Name</span>&nbsp;<span class="op" id="5522638">==</span>&nbsp;<span class="ident" id="5522641">name</span>&nbsp;<span class="op" id="5522646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522651">return</span>&nbsp;<span class="ident" id="5522658">s</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522668">return</span>&nbsp;<span class="ident" id="5522675">nil</span><br>
<span class="lineno"></span><span class="op" id="5522679">}</span>
</div>
</body>
</html>
