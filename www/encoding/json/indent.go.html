<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4782484">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4782540">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4782594">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4782645">package</span>&nbsp;<span class="ident" id="4782653">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782659">import</span>&nbsp;<span class="string" id="4782666">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782675">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="4782727">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="4782769">func</span>&nbsp;<span class="ident" id="4782774">Compact</span><span class="op" id="4782781">(</span><span class="ident" id="4782782">dst</span>&nbsp;<span class="op" id="4782786">*</span><span class="ident" id="4782787"><a href="/encoding/json/indent.go.html#4782666">bytes</a></span><span class="op" id="4782792">.</span><span class="ident" id="4782793">Buffer</span><span class="op" id="4782799">,</span>&nbsp;<span class="ident" id="4782801">src</span>&nbsp;<span class="op" id="4782805">[</span><span class="op" id="4782806">]</span><span class="builtintype" id="4782807">byte</span><span class="op" id="4782811">)</span>&nbsp;<span class="builtintype" id="4782813">error</span>&nbsp;<span class="op" id="4782819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782822">return</span>&nbsp;<span class="ident" id="4782829"><a href="/encoding/json/indent.go.html#4782862">compact</a></span><span class="op" id="4782836">(</span><span class="ident" id="4782837"><a href="/encoding/json/indent.go.html#4782782">dst</a></span><span class="op" id="4782840">,</span>&nbsp;<span class="ident" id="4782842"><a href="/encoding/json/indent.go.html#4782801">src</a></span><span class="op" id="4782845">,</span>&nbsp;<span class="builtintype" id="4782847">false</span><span class="op" id="4782852">)</span><br>
<span class="lineno"></span><span class="op" id="4782854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4782857">func</span>&nbsp;<span class="ident" id="4782862">compact</span><span class="op" id="4782869">(</span><span class="ident" id="4782870">dst</span>&nbsp;<span class="op" id="4782874">*</span><span class="ident" id="4782875"><a href="/encoding/json/indent.go.html#4782666">bytes</a></span><span class="op" id="4782880">.</span><span class="ident" id="4782881">Buffer</span><span class="op" id="4782887">,</span>&nbsp;<span class="ident" id="4782889">src</span>&nbsp;<span class="op" id="4782893">[</span><span class="op" id="4782894">]</span><span class="builtintype" id="4782895">byte</span><span class="op" id="4782899">,</span>&nbsp;<span class="ident" id="4782901">escape</span>&nbsp;<span class="builtintype" id="4782908">bool</span><span class="op" id="4782912">)</span>&nbsp;<span class="builtintype" id="4782914">error</span>&nbsp;<span class="op" id="4782920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782923">origLen</span>&nbsp;<span class="op" id="4782931">:=</span>&nbsp;<span class="ident" id="4782934"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4782937">.</span><span class="ident" id="4782938">Len</span><span class="op" id="4782941">(</span><span class="op" id="4782942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782945">var</span>&nbsp;<span class="ident" id="4782949">scan</span>&nbsp;<span class="ident" id="4782954"><a href="/encoding/json/scanner.go.html#4788105">scanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782963"><a href="/encoding/json/indent.go.html#4782949">scan</a></span><span class="op" id="4782967">.</span><span class="ident" id="4782968">reset</span><span class="op" id="4782973">(</span><span class="op" id="4782974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782977">start</span>&nbsp;<span class="op" id="4782983">:=</span>&nbsp;<span class="num" id="4782986">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782989">for</span>&nbsp;<span class="ident" id="4782993">i</span><span class="op" id="4782994">,</span>&nbsp;<span class="ident" id="4782996">c</span>&nbsp;<span class="op" id="4782998">:=</span>&nbsp;<span class="keyword" id="4783001">range</span>&nbsp;<span class="ident" id="4783007"><a href="/encoding/json/indent.go.html#4782889">src</a></span>&nbsp;<span class="op" id="4783011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783015">if</span>&nbsp;<span class="ident" id="4783018"><a href="/encoding/json/indent.go.html#4782901">escape</a></span>&nbsp;<span class="op" id="4783025">&amp;&amp;</span>&nbsp;<span class="op" id="4783028">(</span><span class="ident" id="4783029"><a href="/encoding/json/indent.go.html#4782996">c</a></span>&nbsp;<span class="op" id="4783031">==</span>&nbsp;<span class="string" id="4783034">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="4783038">||</span>&nbsp;<span class="ident" id="4783041"><a href="/encoding/json/indent.go.html#4782996">c</a></span>&nbsp;<span class="op" id="4783043">==</span>&nbsp;<span class="string" id="4783046">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4783050">||</span>&nbsp;<span class="ident" id="4783053"><a href="/encoding/json/indent.go.html#4782996">c</a></span>&nbsp;<span class="op" id="4783055">==</span>&nbsp;<span class="string" id="4783058">&#39;&amp;&#39;</span><span class="op" id="4783061">)</span>&nbsp;<span class="op" id="4783063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783068">if</span>&nbsp;<span class="ident" id="4783071"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783077">&lt;</span>&nbsp;<span class="ident" id="4783079"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783087"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783090">.</span><span class="ident" id="4783091">Write</span><span class="op" id="4783096">(</span><span class="ident" id="4783097"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783100">[</span><span class="ident" id="4783101"><a href="/encoding/json/indent.go.html#4782977">start</a></span><span class="op" id="4783106">:</span><span class="ident" id="4783107"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783108">]</span><span class="op" id="4783109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783114">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783119"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783122">.</span><span class="ident" id="4783123">WriteString</span><span class="op" id="4783134">(</span><span class="string" id="4783135">`\u00`</span><span class="op" id="4783141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783146"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783149">.</span><span class="ident" id="4783150">WriteByte</span><span class="op" id="4783159">(</span><span class="ident" id="4783160"><a href="/encoding/json/encode.go.html#4756457">hex</a></span><span class="op" id="4783163">[</span><span class="ident" id="4783164"><a href="/encoding/json/indent.go.html#4782996">c</a></span><span class="op" id="4783165">&gt;&gt;</span><span class="num" id="4783167">4</span><span class="op" id="4783168">]</span><span class="op" id="4783169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783174"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783177">.</span><span class="ident" id="4783178">WriteByte</span><span class="op" id="4783187">(</span><span class="ident" id="4783188"><a href="/encoding/json/encode.go.html#4756457">hex</a></span><span class="op" id="4783191">[</span><span class="ident" id="4783192"><a href="/encoding/json/indent.go.html#4782996">c</a></span><span class="op" id="4783193">&amp;</span><span class="num" id="4783194">0xF</span><span class="op" id="4783197">]</span><span class="op" id="4783198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783203"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783209">=</span>&nbsp;<span class="ident" id="4783211"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783213">+</span>&nbsp;<span class="num" id="4783215">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783219">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783223">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783279">if</span>&nbsp;<span class="ident" id="4783282"><a href="/encoding/json/indent.go.html#4782996">c</a></span>&nbsp;<span class="op" id="4783284">==</span>&nbsp;<span class="num" id="4783287">0xE2</span>&nbsp;<span class="op" id="4783292">&amp;&amp;</span>&nbsp;<span class="ident" id="4783295"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783296">+</span><span class="num" id="4783297">2</span>&nbsp;<span class="op" id="4783299">&lt;</span>&nbsp;<span class="builtinfunc" id="4783301">len</span><span class="op" id="4783304">(</span><span class="ident" id="4783305"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783308">)</span>&nbsp;<span class="op" id="4783310">&amp;&amp;</span>&nbsp;<span class="ident" id="4783313"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783316">[</span><span class="ident" id="4783317"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783318">+</span><span class="num" id="4783319">1</span><span class="op" id="4783320">]</span>&nbsp;<span class="op" id="4783322">==</span>&nbsp;<span class="num" id="4783325">0x80</span>&nbsp;<span class="op" id="4783330">&amp;&amp;</span>&nbsp;<span class="ident" id="4783333"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783336">[</span><span class="ident" id="4783337"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783338">+</span><span class="num" id="4783339">2</span><span class="op" id="4783340">]</span><span class="op" id="4783341">&amp;^</span><span class="num" id="4783343">1</span>&nbsp;<span class="op" id="4783345">==</span>&nbsp;<span class="num" id="4783348">0xA8</span>&nbsp;<span class="op" id="4783353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783358">if</span>&nbsp;<span class="ident" id="4783361"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783367">&lt;</span>&nbsp;<span class="ident" id="4783369"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783377"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783380">.</span><span class="ident" id="4783381">Write</span><span class="op" id="4783386">(</span><span class="ident" id="4783387"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783390">[</span><span class="ident" id="4783391"><a href="/encoding/json/indent.go.html#4782977">start</a></span><span class="op" id="4783396">:</span><span class="ident" id="4783397"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783398">]</span><span class="op" id="4783399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783404">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783409"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783412">.</span><span class="ident" id="4783413">WriteString</span><span class="op" id="4783424">(</span><span class="string" id="4783425">`\u202`</span><span class="op" id="4783432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783437"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783440">.</span><span class="ident" id="4783441">WriteByte</span><span class="op" id="4783450">(</span><span class="ident" id="4783451"><a href="/encoding/json/encode.go.html#4756457">hex</a></span><span class="op" id="4783454">[</span><span class="ident" id="4783455"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783458">[</span><span class="ident" id="4783459"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783460">+</span><span class="num" id="4783461">2</span><span class="op" id="4783462">]</span><span class="op" id="4783463">&amp;</span><span class="num" id="4783464">0xF</span><span class="op" id="4783467">]</span><span class="op" id="4783468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783473"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783479">=</span>&nbsp;<span class="ident" id="4783481"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783483">+</span>&nbsp;<span class="num" id="4783485">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783493">v</span>&nbsp;<span class="op" id="4783495">:=</span>&nbsp;<span class="ident" id="4783498"><a href="/encoding/json/indent.go.html#4782949">scan</a></span><span class="op" id="4783502">.</span><span class="ident" id="4783503">step</span><span class="op" id="4783507">(</span><span class="op" id="4783508">&amp;</span><span class="ident" id="4783509"><a href="/encoding/json/indent.go.html#4782949">scan</a></span><span class="op" id="4783513">,</span>&nbsp;<span class="builtintype" id="4783515">int</span><span class="op" id="4783518">(</span><span class="ident" id="4783519"><a href="/encoding/json/indent.go.html#4782996">c</a></span><span class="op" id="4783520">)</span><span class="op" id="4783521">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783525">if</span>&nbsp;<span class="ident" id="4783528"><a href="/encoding/json/indent.go.html#4783493">v</a></span>&nbsp;<span class="op" id="4783530">&gt;=</span>&nbsp;<span class="ident" id="4783533"><a href="/encoding/json/scanner.go.html#4789710">scanSkipSpace</a></span>&nbsp;<span class="op" id="4783547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783552">if</span>&nbsp;<span class="ident" id="4783555"><a href="/encoding/json/indent.go.html#4783493">v</a></span>&nbsp;<span class="op" id="4783557">==</span>&nbsp;<span class="ident" id="4783560"><a href="/encoding/json/scanner.go.html#4789894">scanError</a></span>&nbsp;<span class="op" id="4783570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783576">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783590">if</span>&nbsp;<span class="ident" id="4783593"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783599">&lt;</span>&nbsp;<span class="ident" id="4783601"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783603">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783609"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783612">.</span><span class="ident" id="4783613">Write</span><span class="op" id="4783618">(</span><span class="ident" id="4783619"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783622">[</span><span class="ident" id="4783623"><a href="/encoding/json/indent.go.html#4782977">start</a></span><span class="op" id="4783628">:</span><span class="ident" id="4783629"><a href="/encoding/json/indent.go.html#4782993">i</a></span><span class="op" id="4783630">]</span><span class="op" id="4783631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783641"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783647">=</span>&nbsp;<span class="ident" id="4783649"><a href="/encoding/json/indent.go.html#4782993">i</a></span>&nbsp;<span class="op" id="4783651">+</span>&nbsp;<span class="num" id="4783653">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783660">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783663">if</span>&nbsp;<span class="ident" id="4783666"><a href="/encoding/json/indent.go.html#4782949">scan</a></span><span class="op" id="4783670">.</span><span class="ident" id="4783671">eof</span><span class="op" id="4783674">(</span><span class="op" id="4783675">)</span>&nbsp;<span class="op" id="4783677">==</span>&nbsp;<span class="ident" id="4783680"><a href="/encoding/json/scanner.go.html#4789894">scanError</a></span>&nbsp;<span class="op" id="4783690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783694"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783697">.</span><span class="ident" id="4783698">Truncate</span><span class="op" id="4783706">(</span><span class="ident" id="4783707"><a href="/encoding/json/indent.go.html#4782923">origLen</a></span><span class="op" id="4783714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783718">return</span>&nbsp;<span class="ident" id="4783725"><a href="/encoding/json/indent.go.html#4782949">scan</a></span><span class="op" id="4783729">.</span><span class="ident" id="4783730">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783738">if</span>&nbsp;<span class="ident" id="4783741"><a href="/encoding/json/indent.go.html#4782977">start</a></span>&nbsp;<span class="op" id="4783747">&lt;</span>&nbsp;<span class="builtinfunc" id="4783749">len</span><span class="op" id="4783752">(</span><span class="ident" id="4783753"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783756">)</span>&nbsp;<span class="op" id="4783758">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783762"><a href="/encoding/json/indent.go.html#4782870">dst</a></span><span class="op" id="4783765">.</span><span class="ident" id="4783766">Write</span><span class="op" id="4783771">(</span><span class="ident" id="4783772"><a href="/encoding/json/indent.go.html#4782889">src</a></span><span class="op" id="4783775">[</span><span class="ident" id="4783776"><a href="/encoding/json/indent.go.html#4782977">start</a></span><span class="op" id="4783781">:</span><span class="op" id="4783782">]</span><span class="op" id="4783783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783789">return</span>&nbsp;<span class="ident" id="4783796">nil</span><br>
<span class="lineno"></span><span class="op" id="4783800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4783803">func</span>&nbsp;<span class="ident" id="4783808">newline</span><span class="op" id="4783815">(</span><span class="ident" id="4783816">dst</span>&nbsp;<span class="op" id="4783820">*</span><span class="ident" id="4783821"><a href="/encoding/json/indent.go.html#4782666">bytes</a></span><span class="op" id="4783826">.</span><span class="ident" id="4783827">Buffer</span><span class="op" id="4783833">,</span>&nbsp;<span class="ident" id="4783835">prefix</span><span class="op" id="4783841">,</span>&nbsp;<span class="ident" id="4783843">indent</span>&nbsp;<span class="builtintype" id="4783850">string</span><span class="op" id="4783856">,</span>&nbsp;<span class="ident" id="4783858">depth</span>&nbsp;<span class="builtintype" id="4783864">int</span><span class="op" id="4783867">)</span>&nbsp;<span class="op" id="4783869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783872"><a href="/encoding/json/indent.go.html#4783816">dst</a></span><span class="op" id="4783875">.</span><span class="ident" id="4783876">WriteByte</span><span class="op" id="4783885">(</span><span class="string" id="4783886">&#39;\n&#39;</span><span class="op" id="4783890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783893"><a href="/encoding/json/indent.go.html#4783816">dst</a></span><span class="op" id="4783896">.</span><span class="ident" id="4783897">WriteString</span><span class="op" id="4783908">(</span><span class="ident" id="4783909"><a href="/encoding/json/indent.go.html#4783835">prefix</a></span><span class="op" id="4783915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783918">for</span>&nbsp;<span class="ident" id="4783922">i</span>&nbsp;<span class="op" id="4783924">:=</span>&nbsp;<span class="num" id="4783927">0</span><span class="op" id="4783928">;</span>&nbsp;<span class="ident" id="4783930"><a href="/encoding/json/indent.go.html#4783922">i</a></span>&nbsp;<span class="op" id="4783932">&lt;</span>&nbsp;<span class="ident" id="4783934"><a href="/encoding/json/indent.go.html#4783858">depth</a></span><span class="op" id="4783939">;</span>&nbsp;<span class="ident" id="4783941"><a href="/encoding/json/indent.go.html#4783922">i</a></span><span class="op" id="4783942">++</span>&nbsp;<span class="op" id="4783945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783949"><a href="/encoding/json/indent.go.html#4783816">dst</a></span><span class="op" id="4783952">.</span><span class="ident" id="4783953">WriteString</span><span class="op" id="4783964">(</span><span class="ident" id="4783965"><a href="/encoding/json/indent.go.html#4783843">indent</a></span><span class="op" id="4783971">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783974">}</span><br>
<span class="lineno"></span><span class="op" id="4783976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783979">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="4784046">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="4784105">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="4784168">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="4784226">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="4784289">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4784349">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="4784402">func</span>&nbsp;<span class="ident" id="4784407">Indent</span><span class="op" id="4784413">(</span><span class="ident" id="4784414">dst</span>&nbsp;<span class="op" id="4784418">*</span><span class="ident" id="4784419"><a href="/encoding/json/indent.go.html#4782666">bytes</a></span><span class="op" id="4784424">.</span><span class="ident" id="4784425">Buffer</span><span class="op" id="4784431">,</span>&nbsp;<span class="ident" id="4784433">src</span>&nbsp;<span class="op" id="4784437">[</span><span class="op" id="4784438">]</span><span class="builtintype" id="4784439">byte</span><span class="op" id="4784443">,</span>&nbsp;<span class="ident" id="4784445">prefix</span><span class="op" id="4784451">,</span>&nbsp;<span class="ident" id="4784453">indent</span>&nbsp;<span class="builtintype" id="4784460">string</span><span class="op" id="4784466">)</span>&nbsp;<span class="builtintype" id="4784468">error</span>&nbsp;<span class="op" id="4784474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784477">origLen</span>&nbsp;<span class="op" id="4784485">:=</span>&nbsp;<span class="ident" id="4784488"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4784491">.</span><span class="ident" id="4784492">Len</span><span class="op" id="4784495">(</span><span class="op" id="4784496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784499">var</span>&nbsp;<span class="ident" id="4784503">scan</span>&nbsp;<span class="ident" id="4784508"><a href="/encoding/json/scanner.go.html#4788105">scanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784517"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4784521">.</span><span class="ident" id="4784522">reset</span><span class="op" id="4784527">(</span><span class="op" id="4784528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784531">needIndent</span>&nbsp;<span class="op" id="4784542">:=</span>&nbsp;<span class="builtintype" id="4784545">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784552">depth</span>&nbsp;<span class="op" id="4784558">:=</span>&nbsp;<span class="num" id="4784561">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784564">for</span>&nbsp;<span class="ident" id="4784568">_</span><span class="op" id="4784569">,</span>&nbsp;<span class="ident" id="4784571">c</span>&nbsp;<span class="op" id="4784573">:=</span>&nbsp;<span class="keyword" id="4784576">range</span>&nbsp;<span class="ident" id="4784582"><a href="/encoding/json/indent.go.html#4784433">src</a></span>&nbsp;<span class="op" id="4784586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784590"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4784594">.</span><span class="ident" id="4784595">bytes</span><span class="op" id="4784600">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784605">v</span>&nbsp;<span class="op" id="4784607">:=</span>&nbsp;<span class="ident" id="4784610"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4784614">.</span><span class="ident" id="4784615">step</span><span class="op" id="4784619">(</span><span class="op" id="4784620">&amp;</span><span class="ident" id="4784621"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4784625">,</span>&nbsp;<span class="builtintype" id="4784627">int</span><span class="op" id="4784630">(</span><span class="ident" id="4784631"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4784632">)</span><span class="op" id="4784633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784637">if</span>&nbsp;<span class="ident" id="4784640"><a href="/encoding/json/indent.go.html#4784605">v</a></span>&nbsp;<span class="op" id="4784642">==</span>&nbsp;<span class="ident" id="4784645"><a href="/encoding/json/scanner.go.html#4789710">scanSkipSpace</a></span>&nbsp;<span class="op" id="4784659">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784679">if</span>&nbsp;<span class="ident" id="4784682"><a href="/encoding/json/indent.go.html#4784605">v</a></span>&nbsp;<span class="op" id="4784684">==</span>&nbsp;<span class="ident" id="4784687"><a href="/encoding/json/scanner.go.html#4789894">scanError</a></span>&nbsp;<span class="op" id="4784697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784702">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784710">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784714">if</span>&nbsp;<span class="ident" id="4784717"><a href="/encoding/json/indent.go.html#4784531">needIndent</a></span>&nbsp;<span class="op" id="4784728">&amp;&amp;</span>&nbsp;<span class="ident" id="4784731"><a href="/encoding/json/indent.go.html#4784605">v</a></span>&nbsp;<span class="op" id="4784733">!=</span>&nbsp;<span class="ident" id="4784736"><a href="/encoding/json/scanner.go.html#4789464">scanEndObject</a></span>&nbsp;<span class="op" id="4784750">&amp;&amp;</span>&nbsp;<span class="ident" id="4784753"><a href="/encoding/json/indent.go.html#4784605">v</a></span>&nbsp;<span class="op" id="4784755">!=</span>&nbsp;<span class="ident" id="4784758"><a href="/encoding/json/scanner.go.html#4789635">scanEndArray</a></span>&nbsp;<span class="op" id="4784771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784776"><a href="/encoding/json/indent.go.html#4784531">needIndent</a></span>&nbsp;<span class="op" id="4784787">=</span>&nbsp;<span class="builtintype" id="4784789">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784798"><a href="/encoding/json/indent.go.html#4784552">depth</a></span><span class="op" id="4784803">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784809"><a href="/encoding/json/indent.go.html#4783808">newline</a></span><span class="op" id="4784816">(</span><span class="ident" id="4784817"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4784820">,</span>&nbsp;<span class="ident" id="4784822"><a href="/encoding/json/indent.go.html#4784445">prefix</a></span><span class="op" id="4784828">,</span>&nbsp;<span class="ident" id="4784830"><a href="/encoding/json/indent.go.html#4784453">indent</a></span><span class="op" id="4784836">,</span>&nbsp;<span class="ident" id="4784838"><a href="/encoding/json/indent.go.html#4784552">depth</a></span><span class="op" id="4784843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784847">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784852">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784895">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784952">if</span>&nbsp;<span class="ident" id="4784955"><a href="/encoding/json/indent.go.html#4784605">v</a></span>&nbsp;<span class="op" id="4784957">==</span>&nbsp;<span class="ident" id="4784960"><a href="/encoding/json/scanner.go.html#4789179">scanContinue</a></span>&nbsp;<span class="op" id="4784973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784978"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4784981">.</span><span class="ident" id="4784982">WriteByte</span><span class="op" id="4784991">(</span><span class="ident" id="4784992"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4784993">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784998">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4785014">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785056">switch</span>&nbsp;<span class="ident" id="4785063"><a href="/encoding/json/indent.go.html#4784571">c</a></span>&nbsp;<span class="op" id="4785065">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785069">case</span>&nbsp;<span class="string" id="4785074">&#39;{&#39;</span><span class="op" id="4785077">,</span>&nbsp;<span class="string" id="4785079">&#39;[&#39;</span><span class="op" id="4785082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4785087">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785165"><a href="/encoding/json/indent.go.html#4784531">needIndent</a></span>&nbsp;<span class="op" id="4785176">=</span>&nbsp;<span class="builtintype" id="4785178">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785186"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785189">.</span><span class="ident" id="4785190">WriteByte</span><span class="op" id="4785199">(</span><span class="ident" id="4785200"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4785201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785206">case</span>&nbsp;<span class="string" id="4785211">&#39;,&#39;</span><span class="op" id="4785214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785219"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785222">.</span><span class="ident" id="4785223">WriteByte</span><span class="op" id="4785232">(</span><span class="ident" id="4785233"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4785234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785239"><a href="/encoding/json/indent.go.html#4783808">newline</a></span><span class="op" id="4785246">(</span><span class="ident" id="4785247"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785250">,</span>&nbsp;<span class="ident" id="4785252"><a href="/encoding/json/indent.go.html#4784445">prefix</a></span><span class="op" id="4785258">,</span>&nbsp;<span class="ident" id="4785260"><a href="/encoding/json/indent.go.html#4784453">indent</a></span><span class="op" id="4785266">,</span>&nbsp;<span class="ident" id="4785268"><a href="/encoding/json/indent.go.html#4784552">depth</a></span><span class="op" id="4785273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785278">case</span>&nbsp;<span class="string" id="4785283">&#39;:&#39;</span><span class="op" id="4785286">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785291"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785294">.</span><span class="ident" id="4785295">WriteByte</span><span class="op" id="4785304">(</span><span class="ident" id="4785305"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4785306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785311"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785314">.</span><span class="ident" id="4785315">WriteByte</span><span class="op" id="4785324">(</span><span class="string" id="4785325">&#39;&nbsp;&#39;</span><span class="op" id="4785328">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785333">case</span>&nbsp;<span class="string" id="4785338">&#39;}&#39;</span><span class="op" id="4785341">,</span>&nbsp;<span class="string" id="4785343">&#39;]&#39;</span><span class="op" id="4785346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785351">if</span>&nbsp;<span class="ident" id="4785354"><a href="/encoding/json/indent.go.html#4784531">needIndent</a></span>&nbsp;<span class="op" id="4785365">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4785371">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785416"><a href="/encoding/json/indent.go.html#4784531">needIndent</a></span>&nbsp;<span class="op" id="4785427">=</span>&nbsp;<span class="builtintype" id="4785429">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785438">}</span>&nbsp;<span class="keyword" id="4785440">else</span>&nbsp;<span class="op" id="4785445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785451"><a href="/encoding/json/indent.go.html#4784552">depth</a></span><span class="op" id="4785456">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785463"><a href="/encoding/json/indent.go.html#4783808">newline</a></span><span class="op" id="4785470">(</span><span class="ident" id="4785471"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785474">,</span>&nbsp;<span class="ident" id="4785476"><a href="/encoding/json/indent.go.html#4784445">prefix</a></span><span class="op" id="4785482">,</span>&nbsp;<span class="ident" id="4785484"><a href="/encoding/json/indent.go.html#4784453">indent</a></span><span class="op" id="4785490">,</span>&nbsp;<span class="ident" id="4785492"><a href="/encoding/json/indent.go.html#4784552">depth</a></span><span class="op" id="4785497">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785507"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785510">.</span><span class="ident" id="4785511">WriteByte</span><span class="op" id="4785520">(</span><span class="ident" id="4785521"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4785522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785527">default</span><span class="op" id="4785534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785539"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785542">.</span><span class="ident" id="4785543">WriteByte</span><span class="op" id="4785552">(</span><span class="ident" id="4785553"><a href="/encoding/json/indent.go.html#4784571">c</a></span><span class="op" id="4785554">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785564">if</span>&nbsp;<span class="ident" id="4785567"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4785571">.</span><span class="ident" id="4785572">eof</span><span class="op" id="4785575">(</span><span class="op" id="4785576">)</span>&nbsp;<span class="op" id="4785578">==</span>&nbsp;<span class="ident" id="4785581"><a href="/encoding/json/scanner.go.html#4789894">scanError</a></span>&nbsp;<span class="op" id="4785591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785595"><a href="/encoding/json/indent.go.html#4784414">dst</a></span><span class="op" id="4785598">.</span><span class="ident" id="4785599">Truncate</span><span class="op" id="4785607">(</span><span class="ident" id="4785608"><a href="/encoding/json/indent.go.html#4784477">origLen</a></span><span class="op" id="4785615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785619">return</span>&nbsp;<span class="ident" id="4785626"><a href="/encoding/json/indent.go.html#4784503">scan</a></span><span class="op" id="4785630">.</span><span class="ident" id="4785631">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785639">return</span>&nbsp;<span class="ident" id="4785646">nil</span><br>
<span class="lineno"></span><span class="op" id="4785650">}</span>
</div>
</body>
</html>
