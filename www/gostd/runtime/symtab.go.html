<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1918788">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1918843">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1918897">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1918948">package</span>&nbsp;<span class="ident" id="1918956">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1918965">import</span>&nbsp;<span class="string" id="1918972">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1918982">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1919066">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1919149">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1919176">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1919251">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1919309">type</span>&nbsp;<span class="ident" id="1919314">Func</span>&nbsp;<span class="keyword" id="1919319">struct</span>&nbsp;<span class="op" id="1919326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919329">opaque</span>&nbsp;<span class="keyword" id="1919336">struct</span><span class="op" id="1919342">{</span><span class="op" id="1919343">}</span>&nbsp;<span class="comment" id="1919345">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1919389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1919392">func</span>&nbsp;<span class="op" id="1919397">(</span><span class="ident" id="1919398">f</span>&nbsp;<span class="op" id="1919400">*</span><span class="ident" id="1919401">Func</span><span class="op" id="1919405">)</span>&nbsp;<span class="ident" id="1919407">raw</span><span class="op" id="1919410">(</span><span class="op" id="1919411">)</span>&nbsp;<span class="op" id="1919413">*</span><span class="ident" id="1919414">_func</span>&nbsp;<span class="op" id="1919420">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1919423">return</span>&nbsp;<span class="op" id="1919430">(</span><span class="op" id="1919431">*</span><span class="ident" id="1919432">_func</span><span class="op" id="1919437">)</span><span class="op" id="1919438">(</span><span class="ident" id="1919439">unsafe</span><span class="op" id="1919445">.</span><span class="ident" id="1919446">Pointer</span><span class="op" id="1919453">(</span><span class="ident" id="1919454">f</span><span class="op" id="1919455">)</span><span class="op" id="1919456">)</span><br>
<span class="lineno"></span><span class="op" id="1919458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1919461">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1919475">const</span>&nbsp;<span class="op" id="1919481">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919484">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1919512">=</span>&nbsp;<span class="num" id="1919514">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919517">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1919545">=</span>&nbsp;<span class="num" id="1919547">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919550">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1919578">=</span>&nbsp;<span class="num" id="1919580">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919583">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1919611">=</span>&nbsp;<span class="num" id="1919613">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919616">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1919644">=</span>&nbsp;<span class="num" id="1919646">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919649">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1919677">=</span>&nbsp;<span class="op" id="1919679">-</span><span class="num" id="1919680">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1919691">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1919694">var</span>&nbsp;<span class="op" id="1919698">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919701">pclntable</span>&nbsp;<span class="op" id="1919711">[</span><span class="op" id="1919712">]</span><span class="builtintype" id="1919713">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919719">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1919729">[</span><span class="op" id="1919730">]</span><span class="ident" id="1919731">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919740">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1919750">[</span><span class="op" id="1919751">]</span><span class="builtintype" id="1919752">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919761">pclntab</span><span class="op" id="1919768">,</span>&nbsp;<span class="ident" id="1919770">epclntab</span>&nbsp;<span class="keyword" id="1919779">struct</span><span class="op" id="1919785">{</span><span class="op" id="1919786">}</span>&nbsp;<span class="comment" id="1919788">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1919806">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1919809">type</span>&nbsp;<span class="ident" id="1919814">functab</span>&nbsp;<span class="keyword" id="1919822">struct</span>&nbsp;<span class="op" id="1919829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919832">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1919840">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1919849">funcoff</span>&nbsp;<span class="builtintype" id="1919857">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1919865">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1919868">func</span>&nbsp;<span class="ident" id="1919873">symtabinit</span><span class="op" id="1919883">(</span><span class="op" id="1919884">)</span>&nbsp;<span class="op" id="1919886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1919889">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1919945">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1919995">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920045">pcln</span>&nbsp;<span class="op" id="1920050">:=</span>&nbsp;<span class="op" id="1920053">(</span><span class="op" id="1920054">*</span><span class="op" id="1920055">[</span><span class="num" id="1920056">8</span><span class="op" id="1920057">]</span><span class="builtintype" id="1920058">byte</span><span class="op" id="1920062">)</span><span class="op" id="1920063">(</span><span class="ident" id="1920064">unsafe</span><span class="op" id="1920070">.</span><span class="ident" id="1920071">Pointer</span><span class="op" id="1920078">(</span><span class="op" id="1920079">&amp;</span><span class="ident" id="1920080">pclntab</span><span class="op" id="1920087">)</span><span class="op" id="1920088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920091">pcln32</span>&nbsp;<span class="op" id="1920098">:=</span>&nbsp;<span class="op" id="1920101">(</span><span class="op" id="1920102">*</span><span class="op" id="1920103">[</span><span class="num" id="1920104">2</span><span class="op" id="1920105">]</span><span class="builtintype" id="1920106">uint32</span><span class="op" id="1920112">)</span><span class="op" id="1920113">(</span><span class="ident" id="1920114">unsafe</span><span class="op" id="1920120">.</span><span class="ident" id="1920121">Pointer</span><span class="op" id="1920128">(</span><span class="op" id="1920129">&amp;</span><span class="ident" id="1920130">pclntab</span><span class="op" id="1920137">)</span><span class="op" id="1920138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1920141">if</span>&nbsp;<span class="ident" id="1920144">pcln32</span><span class="op" id="1920150">[</span><span class="num" id="1920151">0</span><span class="op" id="1920152">]</span>&nbsp;<span class="op" id="1920154">!=</span>&nbsp;<span class="num" id="1920157">0xfffffffb</span>&nbsp;<span class="op" id="1920168">||</span>&nbsp;<span class="ident" id="1920171">pcln</span><span class="op" id="1920175">[</span><span class="num" id="1920176">4</span><span class="op" id="1920177">]</span>&nbsp;<span class="op" id="1920179">!=</span>&nbsp;<span class="num" id="1920182">0</span>&nbsp;<span class="op" id="1920184">||</span>&nbsp;<span class="ident" id="1920187">pcln</span><span class="op" id="1920191">[</span><span class="num" id="1920192">5</span><span class="op" id="1920193">]</span>&nbsp;<span class="op" id="1920195">!=</span>&nbsp;<span class="num" id="1920198">0</span>&nbsp;<span class="op" id="1920200">||</span>&nbsp;<span class="ident" id="1920203">pcln</span><span class="op" id="1920207">[</span><span class="num" id="1920208">6</span><span class="op" id="1920209">]</span>&nbsp;<span class="op" id="1920211">!=</span>&nbsp;<span class="ident" id="1920214">_PCQuantum</span>&nbsp;<span class="op" id="1920225">||</span>&nbsp;<span class="ident" id="1920228">pcln</span><span class="op" id="1920232">[</span><span class="num" id="1920233">7</span><span class="op" id="1920234">]</span>&nbsp;<span class="op" id="1920236">!=</span>&nbsp;<span class="ident" id="1920239">ptrSize</span>&nbsp;<span class="op" id="1920247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1920251">println</span><span class="op" id="1920258">(</span><span class="string" id="1920259">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1920299">,</span>&nbsp;<span class="ident" id="1920301">hex</span><span class="op" id="1920304">(</span><span class="ident" id="1920305">pcln32</span><span class="op" id="1920311">[</span><span class="num" id="1920312">0</span><span class="op" id="1920313">]</span><span class="op" id="1920314">)</span><span class="op" id="1920315">,</span>&nbsp;<span class="ident" id="1920317">hex</span><span class="op" id="1920320">(</span><span class="ident" id="1920321">pcln</span><span class="op" id="1920325">[</span><span class="num" id="1920326">4</span><span class="op" id="1920327">]</span><span class="op" id="1920328">)</span><span class="op" id="1920329">,</span>&nbsp;<span class="ident" id="1920331">hex</span><span class="op" id="1920334">(</span><span class="ident" id="1920335">pcln</span><span class="op" id="1920339">[</span><span class="num" id="1920340">5</span><span class="op" id="1920341">]</span><span class="op" id="1920342">)</span><span class="op" id="1920343">,</span>&nbsp;<span class="ident" id="1920345">hex</span><span class="op" id="1920348">(</span><span class="ident" id="1920349">pcln</span><span class="op" id="1920353">[</span><span class="num" id="1920354">6</span><span class="op" id="1920355">]</span><span class="op" id="1920356">)</span><span class="op" id="1920357">,</span>&nbsp;<span class="ident" id="1920359">hex</span><span class="op" id="1920362">(</span><span class="ident" id="1920363">pcln</span><span class="op" id="1920367">[</span><span class="num" id="1920368">7</span><span class="op" id="1920369">]</span><span class="op" id="1920370">)</span><span class="op" id="1920371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920375">gothrow</span><span class="op" id="1920382">(</span><span class="string" id="1920383">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1920416">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1920419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1920423">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920469">sp</span>&nbsp;<span class="op" id="1920472">:=</span>&nbsp;<span class="op" id="1920475">(</span><span class="op" id="1920476">*</span><span class="ident" id="1920477">sliceStruct</span><span class="op" id="1920488">)</span><span class="op" id="1920489">(</span><span class="ident" id="1920490">unsafe</span><span class="op" id="1920496">.</span><span class="ident" id="1920497">Pointer</span><span class="op" id="1920504">(</span><span class="op" id="1920505">&amp;</span><span class="ident" id="1920506">pclntable</span><span class="op" id="1920515">)</span><span class="op" id="1920516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920519">sp</span><span class="op" id="1920521">.</span><span class="ident" id="1920522">array</span>&nbsp;<span class="op" id="1920528">=</span>&nbsp;<span class="ident" id="1920530">unsafe</span><span class="op" id="1920536">.</span><span class="ident" id="1920537">Pointer</span><span class="op" id="1920544">(</span><span class="op" id="1920545">&amp;</span><span class="ident" id="1920546">pclntab</span><span class="op" id="1920553">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920556">sp</span><span class="op" id="1920558">.</span><span class="builtinfunc" id="1920559">len</span>&nbsp;<span class="op" id="1920563">=</span>&nbsp;<span class="builtintype" id="1920565">int</span><span class="op" id="1920568">(</span><span class="builtintype" id="1920569">uintptr</span><span class="op" id="1920576">(</span><span class="ident" id="1920577">unsafe</span><span class="op" id="1920583">.</span><span class="ident" id="1920584">Pointer</span><span class="op" id="1920591">(</span><span class="op" id="1920592">&amp;</span><span class="ident" id="1920593">epclntab</span><span class="op" id="1920601">)</span><span class="op" id="1920602">)</span>&nbsp;<span class="op" id="1920604">-</span>&nbsp;<span class="builtintype" id="1920606">uintptr</span><span class="op" id="1920613">(</span><span class="ident" id="1920614">unsafe</span><span class="op" id="1920620">.</span><span class="ident" id="1920621">Pointer</span><span class="op" id="1920628">(</span><span class="op" id="1920629">&amp;</span><span class="ident" id="1920630">pclntab</span><span class="op" id="1920637">)</span><span class="op" id="1920638">)</span><span class="op" id="1920639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920642">sp</span><span class="op" id="1920644">.</span><span class="builtinfunc" id="1920645">cap</span>&nbsp;<span class="op" id="1920649">=</span>&nbsp;<span class="ident" id="1920651">sp</span><span class="op" id="1920653">.</span><span class="builtinfunc" id="1920654">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1920660">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920718">nftab</span>&nbsp;<span class="op" id="1920724">:=</span>&nbsp;<span class="builtintype" id="1920727">int</span><span class="op" id="1920730">(</span><span class="op" id="1920731">*</span><span class="op" id="1920732">(</span><span class="op" id="1920733">*</span><span class="builtintype" id="1920734">uintptr</span><span class="op" id="1920741">)</span><span class="op" id="1920742">(</span><span class="ident" id="1920743">add</span><span class="op" id="1920746">(</span><span class="ident" id="1920747">unsafe</span><span class="op" id="1920753">.</span><span class="ident" id="1920754">Pointer</span><span class="op" id="1920761">(</span><span class="ident" id="1920762">pcln</span><span class="op" id="1920766">)</span><span class="op" id="1920767">,</span>&nbsp;<span class="num" id="1920769">8</span><span class="op" id="1920770">)</span><span class="op" id="1920771">)</span><span class="op" id="1920772">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920775">p</span>&nbsp;<span class="op" id="1920777">:=</span>&nbsp;<span class="ident" id="1920780">add</span><span class="op" id="1920783">(</span><span class="ident" id="1920784">unsafe</span><span class="op" id="1920790">.</span><span class="ident" id="1920791">Pointer</span><span class="op" id="1920798">(</span><span class="ident" id="1920799">pcln</span><span class="op" id="1920803">)</span><span class="op" id="1920804">,</span>&nbsp;<span class="num" id="1920806">8</span><span class="op" id="1920807">+</span><span class="ident" id="1920808">ptrSize</span><span class="op" id="1920815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920818">sp</span>&nbsp;<span class="op" id="1920821">=</span>&nbsp;<span class="op" id="1920823">(</span><span class="op" id="1920824">*</span><span class="ident" id="1920825">sliceStruct</span><span class="op" id="1920836">)</span><span class="op" id="1920837">(</span><span class="ident" id="1920838">unsafe</span><span class="op" id="1920844">.</span><span class="ident" id="1920845">Pointer</span><span class="op" id="1920852">(</span><span class="op" id="1920853">&amp;</span><span class="ident" id="1920854">ftab</span><span class="op" id="1920858">)</span><span class="op" id="1920859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920862">sp</span><span class="op" id="1920864">.</span><span class="ident" id="1920865">array</span>&nbsp;<span class="op" id="1920871">=</span>&nbsp;<span class="ident" id="1920873">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920876">sp</span><span class="op" id="1920878">.</span><span class="builtinfunc" id="1920879">len</span>&nbsp;<span class="op" id="1920883">=</span>&nbsp;<span class="ident" id="1920885">nftab</span>&nbsp;<span class="op" id="1920891">+</span>&nbsp;<span class="num" id="1920893">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1920896">sp</span><span class="op" id="1920898">.</span><span class="builtinfunc" id="1920899">cap</span>&nbsp;<span class="op" id="1920903">=</span>&nbsp;<span class="ident" id="1920905">sp</span><span class="op" id="1920907">.</span><span class="builtinfunc" id="1920908">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1920913">for</span>&nbsp;<span class="ident" id="1920917">i</span>&nbsp;<span class="op" id="1920919">:=</span>&nbsp;<span class="num" id="1920922">0</span><span class="op" id="1920923">;</span>&nbsp;<span class="ident" id="1920925">i</span>&nbsp;<span class="op" id="1920927">&lt;</span>&nbsp;<span class="ident" id="1920929">nftab</span><span class="op" id="1920934">;</span>&nbsp;<span class="ident" id="1920936">i</span><span class="op" id="1920937">++</span>&nbsp;<span class="op" id="1920940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1920944">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1921028">if</span>&nbsp;<span class="ident" id="1921031">ftab</span><span class="op" id="1921035">[</span><span class="ident" id="1921036">i</span><span class="op" id="1921037">]</span><span class="op" id="1921038">.</span><span class="ident" id="1921039">entry</span>&nbsp;<span class="op" id="1921045">&gt;</span>&nbsp;<span class="ident" id="1921047">ftab</span><span class="op" id="1921051">[</span><span class="ident" id="1921052">i</span><span class="op" id="1921053">+</span><span class="num" id="1921054">1</span><span class="op" id="1921055">]</span><span class="op" id="1921056">.</span><span class="ident" id="1921057">entry</span>&nbsp;<span class="op" id="1921063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921068">f1</span>&nbsp;<span class="op" id="1921071">:=</span>&nbsp;<span class="op" id="1921074">(</span><span class="op" id="1921075">*</span><span class="ident" id="1921076">_func</span><span class="op" id="1921081">)</span><span class="op" id="1921082">(</span><span class="ident" id="1921083">unsafe</span><span class="op" id="1921089">.</span><span class="ident" id="1921090">Pointer</span><span class="op" id="1921097">(</span><span class="op" id="1921098">&amp;</span><span class="ident" id="1921099">pclntable</span><span class="op" id="1921108">[</span><span class="ident" id="1921109">ftab</span><span class="op" id="1921113">[</span><span class="ident" id="1921114">i</span><span class="op" id="1921115">]</span><span class="op" id="1921116">.</span><span class="ident" id="1921117">funcoff</span><span class="op" id="1921124">]</span><span class="op" id="1921125">)</span><span class="op" id="1921126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921131">f2</span>&nbsp;<span class="op" id="1921134">:=</span>&nbsp;<span class="op" id="1921137">(</span><span class="op" id="1921138">*</span><span class="ident" id="1921139">_func</span><span class="op" id="1921144">)</span><span class="op" id="1921145">(</span><span class="ident" id="1921146">unsafe</span><span class="op" id="1921152">.</span><span class="ident" id="1921153">Pointer</span><span class="op" id="1921160">(</span><span class="op" id="1921161">&amp;</span><span class="ident" id="1921162">pclntable</span><span class="op" id="1921171">[</span><span class="ident" id="1921172">ftab</span><span class="op" id="1921176">[</span><span class="ident" id="1921177">i</span><span class="op" id="1921178">+</span><span class="num" id="1921179">1</span><span class="op" id="1921180">]</span><span class="op" id="1921181">.</span><span class="ident" id="1921182">funcoff</span><span class="op" id="1921189">]</span><span class="op" id="1921190">)</span><span class="op" id="1921191">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921196">f2name</span>&nbsp;<span class="op" id="1921203">:=</span>&nbsp;<span class="string" id="1921206">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1921215">if</span>&nbsp;<span class="ident" id="1921218">i</span><span class="op" id="1921219">+</span><span class="num" id="1921220">1</span>&nbsp;<span class="op" id="1921222">&lt;</span>&nbsp;<span class="ident" id="1921224">nftab</span>&nbsp;<span class="op" id="1921230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921236">f2name</span>&nbsp;<span class="op" id="1921243">=</span>&nbsp;<span class="ident" id="1921245">gofuncname</span><span class="op" id="1921255">(</span><span class="ident" id="1921256">f2</span><span class="op" id="1921258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1921263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1921268">println</span><span class="op" id="1921275">(</span><span class="string" id="1921276">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1921330">,</span>&nbsp;<span class="ident" id="1921332">hex</span><span class="op" id="1921335">(</span><span class="ident" id="1921336">ftab</span><span class="op" id="1921340">[</span><span class="ident" id="1921341">i</span><span class="op" id="1921342">]</span><span class="op" id="1921343">.</span><span class="ident" id="1921344">entry</span><span class="op" id="1921349">)</span><span class="op" id="1921350">,</span>&nbsp;<span class="ident" id="1921352">gofuncname</span><span class="op" id="1921362">(</span><span class="ident" id="1921363">f1</span><span class="op" id="1921365">)</span><span class="op" id="1921366">,</span>&nbsp;<span class="string" id="1921368">&#34;&gt;&#34;</span><span class="op" id="1921371">,</span>&nbsp;<span class="ident" id="1921373">hex</span><span class="op" id="1921376">(</span><span class="ident" id="1921377">ftab</span><span class="op" id="1921381">[</span><span class="ident" id="1921382">i</span><span class="op" id="1921383">+</span><span class="num" id="1921384">1</span><span class="op" id="1921385">]</span><span class="op" id="1921386">.</span><span class="ident" id="1921387">entry</span><span class="op" id="1921392">)</span><span class="op" id="1921393">,</span>&nbsp;<span class="ident" id="1921395">f2name</span><span class="op" id="1921401">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1921406">for</span>&nbsp;<span class="ident" id="1921410">j</span>&nbsp;<span class="op" id="1921412">:=</span>&nbsp;<span class="num" id="1921415">0</span><span class="op" id="1921416">;</span>&nbsp;<span class="ident" id="1921418">j</span>&nbsp;<span class="op" id="1921420">&lt;=</span>&nbsp;<span class="ident" id="1921423">i</span><span class="op" id="1921424">;</span>&nbsp;<span class="ident" id="1921426">j</span><span class="op" id="1921427">++</span>&nbsp;<span class="op" id="1921430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1921436">print</span><span class="op" id="1921441">(</span><span class="string" id="1921442">&#34;\t&#34;</span><span class="op" id="1921446">,</span>&nbsp;<span class="ident" id="1921448">hex</span><span class="op" id="1921451">(</span><span class="ident" id="1921452">ftab</span><span class="op" id="1921456">[</span><span class="ident" id="1921457">j</span><span class="op" id="1921458">]</span><span class="op" id="1921459">.</span><span class="ident" id="1921460">entry</span><span class="op" id="1921465">)</span><span class="op" id="1921466">,</span>&nbsp;<span class="string" id="1921468">&#34;&nbsp;&#34;</span><span class="op" id="1921471">,</span>&nbsp;<span class="ident" id="1921473">gofuncname</span><span class="op" id="1921483">(</span><span class="op" id="1921484">(</span><span class="op" id="1921485">*</span><span class="ident" id="1921486">_func</span><span class="op" id="1921491">)</span><span class="op" id="1921492">(</span><span class="ident" id="1921493">unsafe</span><span class="op" id="1921499">.</span><span class="ident" id="1921500">Pointer</span><span class="op" id="1921507">(</span><span class="op" id="1921508">&amp;</span><span class="ident" id="1921509">pclntable</span><span class="op" id="1921518">[</span><span class="ident" id="1921519">ftab</span><span class="op" id="1921523">[</span><span class="ident" id="1921524">j</span><span class="op" id="1921525">]</span><span class="op" id="1921526">.</span><span class="ident" id="1921527">funcoff</span><span class="op" id="1921534">]</span><span class="op" id="1921535">)</span><span class="op" id="1921536">)</span><span class="op" id="1921537">)</span><span class="op" id="1921538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1921543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921548">gothrow</span><span class="op" id="1921555">(</span><span class="string" id="1921556">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1921586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1921590">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1921593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1921597">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1921654">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1921713">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921743">sp</span>&nbsp;<span class="op" id="1921746">=</span>&nbsp;<span class="op" id="1921748">(</span><span class="op" id="1921749">*</span><span class="ident" id="1921750">sliceStruct</span><span class="op" id="1921761">)</span><span class="op" id="1921762">(</span><span class="ident" id="1921763">unsafe</span><span class="op" id="1921769">.</span><span class="ident" id="1921770">Pointer</span><span class="op" id="1921777">(</span><span class="op" id="1921778">&amp;</span><span class="ident" id="1921779">filetab</span><span class="op" id="1921786">)</span><span class="op" id="1921787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921790">end</span>&nbsp;<span class="op" id="1921794">:=</span>&nbsp;<span class="ident" id="1921797">unsafe</span><span class="op" id="1921803">.</span><span class="ident" id="1921804">Pointer</span><span class="op" id="1921811">(</span><span class="op" id="1921812">&amp;</span><span class="ident" id="1921813">ftab</span><span class="op" id="1921817">[</span><span class="ident" id="1921818">nftab</span><span class="op" id="1921823">]</span><span class="op" id="1921824">.</span><span class="ident" id="1921825">funcoff</span><span class="op" id="1921832">)</span>&nbsp;<span class="comment" id="1921834">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921855">fileoffset</span>&nbsp;<span class="op" id="1921866">:=</span>&nbsp;<span class="op" id="1921869">*</span><span class="op" id="1921870">(</span><span class="op" id="1921871">*</span><span class="builtintype" id="1921872">uint32</span><span class="op" id="1921878">)</span><span class="op" id="1921879">(</span><span class="ident" id="1921880">end</span><span class="op" id="1921883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1921886">sp</span><span class="op" id="1921888">.</span><span class="ident" id="1921889">array</span>&nbsp;<span class="op" id="1921895">=</span>&nbsp;<span class="ident" id="1921897">unsafe</span><span class="op" id="1921903">.</span><span class="ident" id="1921904">Pointer</span><span class="op" id="1921911">(</span><span class="op" id="1921912">&amp;</span><span class="ident" id="1921913">pclntable</span><span class="op" id="1921922">[</span><span class="ident" id="1921923">fileoffset</span><span class="op" id="1921933">]</span><span class="op" id="1921934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1921937">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1921978">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922024">sp</span><span class="op" id="1922026">.</span><span class="builtinfunc" id="1922027">len</span>&nbsp;<span class="op" id="1922031">=</span>&nbsp;<span class="num" id="1922033">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922036">sp</span><span class="op" id="1922038">.</span><span class="builtinfunc" id="1922039">cap</span>&nbsp;<span class="op" id="1922043">=</span>&nbsp;<span class="num" id="1922045">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922048">sp</span><span class="op" id="1922050">.</span><span class="builtinfunc" id="1922051">len</span>&nbsp;<span class="op" id="1922055">=</span>&nbsp;<span class="builtintype" id="1922057">int</span><span class="op" id="1922060">(</span><span class="ident" id="1922061">filetab</span><span class="op" id="1922068">[</span><span class="num" id="1922069">0</span><span class="op" id="1922070">]</span><span class="op" id="1922071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922074">sp</span><span class="op" id="1922076">.</span><span class="builtinfunc" id="1922077">cap</span>&nbsp;<span class="op" id="1922081">=</span>&nbsp;<span class="ident" id="1922083">sp</span><span class="op" id="1922085">.</span><span class="builtinfunc" id="1922086">len</span><br>
<span class="lineno">100</span><span class="op" id="1922090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1922093">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1922164">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1922211">func</span>&nbsp;<span class="ident" id="1922216">FuncForPC</span><span class="op" id="1922225">(</span><span class="ident" id="1922226">pc</span>&nbsp;<span class="builtintype" id="1922229">uintptr</span><span class="op" id="1922236">)</span>&nbsp;<span class="op" id="1922238">*</span><span class="ident" id="1922239">Func</span>&nbsp;<span class="op" id="1922244">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922247">return</span>&nbsp;<span class="op" id="1922254">(</span><span class="op" id="1922255">*</span><span class="ident" id="1922256">Func</span><span class="op" id="1922260">)</span><span class="op" id="1922261">(</span><span class="ident" id="1922262">unsafe</span><span class="op" id="1922268">.</span><span class="ident" id="1922269">Pointer</span><span class="op" id="1922276">(</span><span class="ident" id="1922277">findfunc</span><span class="op" id="1922285">(</span><span class="ident" id="1922286">pc</span><span class="op" id="1922288">)</span><span class="op" id="1922289">)</span><span class="op" id="1922290">)</span><br>
<span class="lineno"></span><span class="op" id="1922292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1922295">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1922337">func</span>&nbsp;<span class="op" id="1922342">(</span><span class="ident" id="1922343">f</span>&nbsp;<span class="op" id="1922345">*</span><span class="ident" id="1922346">Func</span><span class="op" id="1922350">)</span>&nbsp;<span class="ident" id="1922352">Name</span><span class="op" id="1922356">(</span><span class="op" id="1922357">)</span>&nbsp;<span class="builtintype" id="1922359">string</span>&nbsp;<span class="op" id="1922366">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922369">return</span>&nbsp;<span class="ident" id="1922376">gofuncname</span><span class="op" id="1922386">(</span><span class="ident" id="1922387">f</span><span class="op" id="1922388">.</span><span class="ident" id="1922389">raw</span><span class="op" id="1922392">(</span><span class="op" id="1922393">)</span><span class="op" id="1922394">)</span><br>
<span class="lineno"></span><span class="op" id="1922396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1922399">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1922451">func</span>&nbsp;<span class="op" id="1922456">(</span><span class="ident" id="1922457">f</span>&nbsp;<span class="op" id="1922459">*</span><span class="ident" id="1922460">Func</span><span class="op" id="1922464">)</span>&nbsp;<span class="ident" id="1922466">Entry</span><span class="op" id="1922471">(</span><span class="op" id="1922472">)</span>&nbsp;<span class="builtintype" id="1922474">uintptr</span>&nbsp;<span class="op" id="1922482">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922485">return</span>&nbsp;<span class="ident" id="1922492">f</span><span class="op" id="1922493">.</span><span class="ident" id="1922494">raw</span><span class="op" id="1922497">(</span><span class="op" id="1922498">)</span><span class="op" id="1922499">.</span><span class="ident" id="1922500">entry</span><br>
<span class="lineno"></span><span class="op" id="1922506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1922509">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1922566">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1922622">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1922680">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1922701">func</span>&nbsp;<span class="op" id="1922706">(</span><span class="ident" id="1922707">f</span>&nbsp;<span class="op" id="1922709">*</span><span class="ident" id="1922710">Func</span><span class="op" id="1922714">)</span>&nbsp;<span class="ident" id="1922716">FileLine</span><span class="op" id="1922724">(</span><span class="ident" id="1922725">pc</span>&nbsp;<span class="builtintype" id="1922728">uintptr</span><span class="op" id="1922735">)</span>&nbsp;<span class="op" id="1922737">(</span><span class="ident" id="1922738">file</span>&nbsp;<span class="builtintype" id="1922743">string</span><span class="op" id="1922749">,</span>&nbsp;<span class="ident" id="1922751">line</span>&nbsp;<span class="builtintype" id="1922756">int</span><span class="op" id="1922759">)</span>&nbsp;<span class="op" id="1922761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1922764">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1922831">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1922895">line</span>&nbsp;<span class="op" id="1922900">=</span>&nbsp;<span class="builtintype" id="1922902">int</span><span class="op" id="1922905">(</span><span class="ident" id="1922906">funcline1</span><span class="op" id="1922915">(</span><span class="ident" id="1922916">f</span><span class="op" id="1922917">.</span><span class="ident" id="1922918">raw</span><span class="op" id="1922921">(</span><span class="op" id="1922922">)</span><span class="op" id="1922923">,</span>&nbsp;<span class="ident" id="1922925">pc</span><span class="op" id="1922927">,</span>&nbsp;<span class="op" id="1922929">&amp;</span><span class="ident" id="1922930">file</span><span class="op" id="1922934">,</span>&nbsp;<span class="builtintype" id="1922936">false</span><span class="op" id="1922941">)</span><span class="op" id="1922942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1922945">return</span>&nbsp;<span class="ident" id="1922952">file</span><span class="op" id="1922956">,</span>&nbsp;<span class="ident" id="1922958">line</span><br>
<span class="lineno"></span><span class="op" id="1922963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1922966">func</span>&nbsp;<span class="ident" id="1922971">findfunc</span><span class="op" id="1922979">(</span><span class="ident" id="1922980">pc</span>&nbsp;<span class="builtintype" id="1922983">uintptr</span><span class="op" id="1922990">)</span>&nbsp;<span class="op" id="1922992">*</span><span class="ident" id="1922993">_func</span>&nbsp;<span class="op" id="1922999">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923002">if</span>&nbsp;<span class="builtinfunc" id="1923005">len</span><span class="op" id="1923008">(</span><span class="ident" id="1923009">ftab</span><span class="op" id="1923013">)</span>&nbsp;<span class="op" id="1923015">==</span>&nbsp;<span class="num" id="1923018">0</span>&nbsp;<span class="op" id="1923020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923024">return</span>&nbsp;<span class="ident" id="1923031">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923040">if</span>&nbsp;<span class="ident" id="1923043">pc</span>&nbsp;<span class="op" id="1923046">&lt;</span>&nbsp;<span class="ident" id="1923048">ftab</span><span class="op" id="1923052">[</span><span class="num" id="1923053">0</span><span class="op" id="1923054">]</span><span class="op" id="1923055">.</span><span class="ident" id="1923056">entry</span>&nbsp;<span class="op" id="1923062">||</span>&nbsp;<span class="ident" id="1923065">pc</span>&nbsp;<span class="op" id="1923068">&gt;=</span>&nbsp;<span class="ident" id="1923071">ftab</span><span class="op" id="1923075">[</span><span class="builtinfunc" id="1923076">len</span><span class="op" id="1923079">(</span><span class="ident" id="1923080">ftab</span><span class="op" id="1923084">)</span><span class="op" id="1923085">-</span><span class="num" id="1923086">1</span><span class="op" id="1923087">]</span><span class="op" id="1923088">.</span><span class="ident" id="1923089">entry</span>&nbsp;<span class="op" id="1923095">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923099">return</span>&nbsp;<span class="ident" id="1923106">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923115">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923164">lo</span>&nbsp;<span class="op" id="1923167">:=</span>&nbsp;<span class="num" id="1923170">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923173">nf</span>&nbsp;<span class="op" id="1923176">:=</span>&nbsp;<span class="builtinfunc" id="1923179">len</span><span class="op" id="1923182">(</span><span class="ident" id="1923183">ftab</span><span class="op" id="1923187">)</span>&nbsp;<span class="op" id="1923189">-</span>&nbsp;<span class="num" id="1923191">1</span>&nbsp;<span class="comment" id="1923193">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923220">for</span>&nbsp;<span class="ident" id="1923224">nf</span>&nbsp;<span class="op" id="1923227">&gt;</span>&nbsp;<span class="num" id="1923229">0</span>&nbsp;<span class="op" id="1923231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923235">n</span>&nbsp;<span class="op" id="1923237">:=</span>&nbsp;<span class="ident" id="1923240">nf</span>&nbsp;<span class="op" id="1923243">/</span>&nbsp;<span class="num" id="1923245">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923249">f</span>&nbsp;<span class="op" id="1923251">:=</span>&nbsp;<span class="op" id="1923254">&amp;</span><span class="ident" id="1923255">ftab</span><span class="op" id="1923259">[</span><span class="ident" id="1923260">lo</span><span class="op" id="1923262">+</span><span class="ident" id="1923263">n</span><span class="op" id="1923264">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923268">if</span>&nbsp;<span class="ident" id="1923271">f</span><span class="op" id="1923272">.</span><span class="ident" id="1923273">entry</span>&nbsp;<span class="op" id="1923279">&lt;=</span>&nbsp;<span class="ident" id="1923282">pc</span>&nbsp;<span class="op" id="1923285">&amp;&amp;</span>&nbsp;<span class="ident" id="1923288">pc</span>&nbsp;<span class="op" id="1923291">&lt;</span>&nbsp;<span class="ident" id="1923293">ftab</span><span class="op" id="1923297">[</span><span class="ident" id="1923298">lo</span><span class="op" id="1923300">+</span><span class="ident" id="1923301">n</span><span class="op" id="1923302">+</span><span class="num" id="1923303">1</span><span class="op" id="1923304">]</span><span class="op" id="1923305">.</span><span class="ident" id="1923306">entry</span>&nbsp;<span class="op" id="1923312">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923317">return</span>&nbsp;<span class="op" id="1923324">(</span><span class="op" id="1923325">*</span><span class="ident" id="1923326">_func</span><span class="op" id="1923331">)</span><span class="op" id="1923332">(</span><span class="ident" id="1923333">unsafe</span><span class="op" id="1923339">.</span><span class="ident" id="1923340">Pointer</span><span class="op" id="1923347">(</span><span class="op" id="1923348">&amp;</span><span class="ident" id="1923349">pclntable</span><span class="op" id="1923358">[</span><span class="ident" id="1923359">f</span><span class="op" id="1923360">.</span><span class="ident" id="1923361">funcoff</span><span class="op" id="1923368">]</span><span class="op" id="1923369">)</span><span class="op" id="1923370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923374">}</span>&nbsp;<span class="keyword" id="1923376">else</span>&nbsp;<span class="keyword" id="1923381">if</span>&nbsp;<span class="ident" id="1923384">pc</span>&nbsp;<span class="op" id="1923387">&lt;</span>&nbsp;<span class="ident" id="1923389">f</span><span class="op" id="1923390">.</span><span class="ident" id="1923391">entry</span>&nbsp;<span class="op" id="1923397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923402">nf</span>&nbsp;<span class="op" id="1923405">=</span>&nbsp;<span class="ident" id="1923407">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923411">}</span>&nbsp;<span class="keyword" id="1923413">else</span>&nbsp;<span class="op" id="1923418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923423">lo</span>&nbsp;<span class="op" id="1923426">+=</span>&nbsp;<span class="ident" id="1923429">n</span>&nbsp;<span class="op" id="1923431">+</span>&nbsp;<span class="num" id="1923433">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923438">nf</span>&nbsp;<span class="op" id="1923441">-=</span>&nbsp;<span class="ident" id="1923444">n</span>&nbsp;<span class="op" id="1923446">+</span>&nbsp;<span class="num" id="1923448">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923459">gothrow</span><span class="op" id="1923466">(</span><span class="string" id="1923467">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1923499">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923502">return</span>&nbsp;<span class="ident" id="1923509">nil</span><br>
<span class="lineno"></span><span class="op" id="1923513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1923516">func</span>&nbsp;<span class="ident" id="1923521">pcvalue</span><span class="op" id="1923528">(</span><span class="ident" id="1923529">f</span>&nbsp;<span class="op" id="1923531">*</span><span class="ident" id="1923532">_func</span><span class="op" id="1923537">,</span>&nbsp;<span class="ident" id="1923539">off</span>&nbsp;<span class="builtintype" id="1923543">int32</span><span class="op" id="1923548">,</span>&nbsp;<span class="ident" id="1923550">targetpc</span>&nbsp;<span class="builtintype" id="1923559">uintptr</span><span class="op" id="1923566">,</span>&nbsp;<span class="ident" id="1923568">strict</span>&nbsp;<span class="builtintype" id="1923575">bool</span><span class="op" id="1923579">)</span>&nbsp;<span class="builtintype" id="1923581">int32</span>&nbsp;<span class="op" id="1923587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923590">if</span>&nbsp;<span class="ident" id="1923593">off</span>&nbsp;<span class="op" id="1923597">==</span>&nbsp;<span class="num" id="1923600">0</span>&nbsp;<span class="op" id="1923602">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923606">return</span>&nbsp;<span class="op" id="1923613">-</span><span class="num" id="1923614">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923620">p</span>&nbsp;<span class="op" id="1923622">:=</span>&nbsp;<span class="ident" id="1923625">pclntable</span><span class="op" id="1923634">[</span><span class="ident" id="1923635">off</span><span class="op" id="1923638">:</span><span class="op" id="1923639">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923642">pc</span>&nbsp;<span class="op" id="1923645">:=</span>&nbsp;<span class="ident" id="1923648">f</span><span class="op" id="1923649">.</span><span class="ident" id="1923650">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923657">val</span>&nbsp;<span class="op" id="1923661">:=</span>&nbsp;<span class="builtintype" id="1923664">int32</span><span class="op" id="1923669">(</span><span class="op" id="1923670">-</span><span class="num" id="1923671">1</span><span class="op" id="1923672">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923675">for</span>&nbsp;<span class="op" id="1923679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923683">var</span>&nbsp;<span class="ident" id="1923687">ok</span>&nbsp;<span class="builtintype" id="1923690">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1923697">p</span><span class="op" id="1923698">,</span>&nbsp;<span class="ident" id="1923700">ok</span>&nbsp;<span class="op" id="1923703">=</span>&nbsp;<span class="ident" id="1923705">step</span><span class="op" id="1923709">(</span><span class="ident" id="1923710">p</span><span class="op" id="1923711">,</span>&nbsp;<span class="op" id="1923713">&amp;</span><span class="ident" id="1923714">pc</span><span class="op" id="1923716">,</span>&nbsp;<span class="op" id="1923718">&amp;</span><span class="ident" id="1923719">val</span><span class="op" id="1923722">,</span>&nbsp;<span class="ident" id="1923724">pc</span>&nbsp;<span class="op" id="1923727">==</span>&nbsp;<span class="ident" id="1923730">f</span><span class="op" id="1923731">.</span><span class="ident" id="1923732">entry</span><span class="op" id="1923737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923741">if</span>&nbsp;<span class="op" id="1923744">!</span><span class="ident" id="1923745">ok</span>&nbsp;<span class="op" id="1923748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923753">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923765">if</span>&nbsp;<span class="ident" id="1923768">targetpc</span>&nbsp;<span class="op" id="1923777">&lt;</span>&nbsp;<span class="ident" id="1923779">pc</span>&nbsp;<span class="op" id="1923782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923787">return</span>&nbsp;<span class="ident" id="1923794">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923803">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923807">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1923878">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923910">if</span>&nbsp;<span class="ident" id="1923913">panicking</span>&nbsp;<span class="op" id="1923923">!=</span>&nbsp;<span class="num" id="1923926">0</span>&nbsp;<span class="op" id="1923928">||</span>&nbsp;<span class="op" id="1923931">!</span><span class="ident" id="1923932">strict</span>&nbsp;<span class="op" id="1923939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1923943">return</span>&nbsp;<span class="op" id="1923950">-</span><span class="num" id="1923951">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1923954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1923958">print</span><span class="op" id="1923963">(</span><span class="string" id="1923964">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1924002">,</span>&nbsp;<span class="ident" id="1924004">gofuncname</span><span class="op" id="1924014">(</span><span class="ident" id="1924015">f</span><span class="op" id="1924016">)</span><span class="op" id="1924017">,</span>&nbsp;<span class="string" id="1924019">&#34;&nbsp;pc=&#34;</span><span class="op" id="1924025">,</span>&nbsp;<span class="ident" id="1924027">hex</span><span class="op" id="1924030">(</span><span class="ident" id="1924031">pc</span><span class="op" id="1924033">)</span><span class="op" id="1924034">,</span>&nbsp;<span class="string" id="1924036">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1924048">,</span>&nbsp;<span class="ident" id="1924050">hex</span><span class="op" id="1924053">(</span><span class="ident" id="1924054">targetpc</span><span class="op" id="1924062">)</span><span class="op" id="1924063">,</span>&nbsp;<span class="string" id="1924065">&#34;&nbsp;tab=&#34;</span><span class="op" id="1924072">,</span>&nbsp;<span class="ident" id="1924074">p</span><span class="op" id="1924075">,</span>&nbsp;<span class="string" id="1924077">&#34;\n&#34;</span><span class="op" id="1924081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924085">p</span>&nbsp;<span class="op" id="1924087">=</span>&nbsp;<span class="ident" id="1924089">pclntable</span><span class="op" id="1924098">[</span><span class="ident" id="1924099">off</span><span class="op" id="1924102">:</span><span class="op" id="1924103">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924106">pc</span>&nbsp;<span class="op" id="1924109">=</span>&nbsp;<span class="ident" id="1924111">f</span><span class="op" id="1924112">.</span><span class="ident" id="1924113">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924120">val</span>&nbsp;<span class="op" id="1924124">=</span>&nbsp;<span class="op" id="1924126">-</span><span class="num" id="1924127">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924130">for</span>&nbsp;<span class="op" id="1924134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924138">var</span>&nbsp;<span class="ident" id="1924142">ok</span>&nbsp;<span class="builtintype" id="1924145">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924152">p</span><span class="op" id="1924153">,</span>&nbsp;<span class="ident" id="1924155">ok</span>&nbsp;<span class="op" id="1924158">=</span>&nbsp;<span class="ident" id="1924160">step</span><span class="op" id="1924164">(</span><span class="ident" id="1924165">p</span><span class="op" id="1924166">,</span>&nbsp;<span class="op" id="1924168">&amp;</span><span class="ident" id="1924169">pc</span><span class="op" id="1924171">,</span>&nbsp;<span class="op" id="1924173">&amp;</span><span class="ident" id="1924174">val</span><span class="op" id="1924177">,</span>&nbsp;<span class="ident" id="1924179">pc</span>&nbsp;<span class="op" id="1924182">==</span>&nbsp;<span class="ident" id="1924185">f</span><span class="op" id="1924186">.</span><span class="ident" id="1924187">entry</span><span class="op" id="1924192">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924196">if</span>&nbsp;<span class="op" id="1924199">!</span><span class="ident" id="1924200">ok</span>&nbsp;<span class="op" id="1924203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924208">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1924220">print</span><span class="op" id="1924225">(</span><span class="string" id="1924226">&#34;\tvalue=&#34;</span><span class="op" id="1924236">,</span>&nbsp;<span class="ident" id="1924238">val</span><span class="op" id="1924241">,</span>&nbsp;<span class="string" id="1924243">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1924255">,</span>&nbsp;<span class="ident" id="1924257">hex</span><span class="op" id="1924260">(</span><span class="ident" id="1924261">pc</span><span class="op" id="1924263">)</span><span class="op" id="1924264">,</span>&nbsp;<span class="string" id="1924266">&#34;\n&#34;</span><span class="op" id="1924270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924273">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924277">gothrow</span><span class="op" id="1924284">(</span><span class="string" id="1924285">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1924315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924318">return</span>&nbsp;<span class="op" id="1924325">-</span><span class="num" id="1924326">1</span><br>
<span class="lineno"></span><span class="op" id="1924328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1924331">func</span>&nbsp;<span class="ident" id="1924336">funcname</span><span class="op" id="1924344">(</span><span class="ident" id="1924345">f</span>&nbsp;<span class="op" id="1924347">*</span><span class="ident" id="1924348">_func</span><span class="op" id="1924353">)</span>&nbsp;<span class="op" id="1924355">*</span><span class="builtintype" id="1924356">byte</span>&nbsp;<span class="op" id="1924361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924364">if</span>&nbsp;<span class="ident" id="1924367">f</span>&nbsp;<span class="op" id="1924369">==</span>&nbsp;<span class="ident" id="1924372">nil</span>&nbsp;<span class="op" id="1924376">||</span>&nbsp;<span class="ident" id="1924379">f</span><span class="op" id="1924380">.</span><span class="ident" id="1924381">nameoff</span>&nbsp;<span class="op" id="1924389">==</span>&nbsp;<span class="num" id="1924392">0</span>&nbsp;<span class="op" id="1924394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924398">return</span>&nbsp;<span class="ident" id="1924405">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924413">return</span>&nbsp;<span class="op" id="1924420">(</span><span class="op" id="1924421">*</span><span class="builtintype" id="1924422">byte</span><span class="op" id="1924426">)</span><span class="op" id="1924427">(</span><span class="ident" id="1924428">unsafe</span><span class="op" id="1924434">.</span><span class="ident" id="1924435">Pointer</span><span class="op" id="1924442">(</span><span class="op" id="1924443">&amp;</span><span class="ident" id="1924444">pclntable</span><span class="op" id="1924453">[</span><span class="ident" id="1924454">f</span><span class="op" id="1924455">.</span><span class="ident" id="1924456">nameoff</span><span class="op" id="1924463">]</span><span class="op" id="1924464">)</span><span class="op" id="1924465">)</span><br>
<span class="lineno">205</span><span class="op" id="1924467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1924470">func</span>&nbsp;<span class="ident" id="1924475">gofuncname</span><span class="op" id="1924485">(</span><span class="ident" id="1924486">f</span>&nbsp;<span class="op" id="1924488">*</span><span class="ident" id="1924489">_func</span><span class="op" id="1924494">)</span>&nbsp;<span class="builtintype" id="1924496">string</span>&nbsp;<span class="op" id="1924503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924506">return</span>&nbsp;<span class="ident" id="1924513">gostringnocopy</span><span class="op" id="1924527">(</span><span class="ident" id="1924528">funcname</span><span class="op" id="1924536">(</span><span class="ident" id="1924537">f</span><span class="op" id="1924538">)</span><span class="op" id="1924539">)</span><br>
<span class="lineno"></span><span class="op" id="1924541">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1924544">func</span>&nbsp;<span class="ident" id="1924549">funcline1</span><span class="op" id="1924558">(</span><span class="ident" id="1924559">f</span>&nbsp;<span class="op" id="1924561">*</span><span class="ident" id="1924562">_func</span><span class="op" id="1924567">,</span>&nbsp;<span class="ident" id="1924569">targetpc</span>&nbsp;<span class="builtintype" id="1924578">uintptr</span><span class="op" id="1924585">,</span>&nbsp;<span class="ident" id="1924587">file</span>&nbsp;<span class="op" id="1924592">*</span><span class="builtintype" id="1924593">string</span><span class="op" id="1924599">,</span>&nbsp;<span class="ident" id="1924601">strict</span>&nbsp;<span class="builtintype" id="1924608">bool</span><span class="op" id="1924612">)</span>&nbsp;<span class="builtintype" id="1924614">int32</span>&nbsp;<span class="op" id="1924620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924623">*</span><span class="ident" id="1924624">file</span>&nbsp;<span class="op" id="1924629">=</span>&nbsp;<span class="string" id="1924631">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924636">fileno</span>&nbsp;<span class="op" id="1924643">:=</span>&nbsp;<span class="builtintype" id="1924646">int</span><span class="op" id="1924649">(</span><span class="ident" id="1924650">pcvalue</span><span class="op" id="1924657">(</span><span class="ident" id="1924658">f</span><span class="op" id="1924659">,</span>&nbsp;<span class="ident" id="1924661">f</span><span class="op" id="1924662">.</span><span class="ident" id="1924663">pcfile</span><span class="op" id="1924669">,</span>&nbsp;<span class="ident" id="1924671">targetpc</span><span class="op" id="1924679">,</span>&nbsp;<span class="ident" id="1924681">strict</span><span class="op" id="1924687">)</span><span class="op" id="1924688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1924691">line</span>&nbsp;<span class="op" id="1924696">:=</span>&nbsp;<span class="ident" id="1924699">pcvalue</span><span class="op" id="1924706">(</span><span class="ident" id="1924707">f</span><span class="op" id="1924708">,</span>&nbsp;<span class="ident" id="1924710">f</span><span class="op" id="1924711">.</span><span class="ident" id="1924712">pcln</span><span class="op" id="1924716">,</span>&nbsp;<span class="ident" id="1924718">targetpc</span><span class="op" id="1924726">,</span>&nbsp;<span class="ident" id="1924728">strict</span><span class="op" id="1924734">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924737">if</span>&nbsp;<span class="ident" id="1924740">fileno</span>&nbsp;<span class="op" id="1924747">==</span>&nbsp;<span class="op" id="1924750">-</span><span class="num" id="1924751">1</span>&nbsp;<span class="op" id="1924753">||</span>&nbsp;<span class="ident" id="1924756">line</span>&nbsp;<span class="op" id="1924761">==</span>&nbsp;<span class="op" id="1924764">-</span><span class="num" id="1924765">1</span>&nbsp;<span class="op" id="1924767">||</span>&nbsp;<span class="ident" id="1924770">fileno</span>&nbsp;<span class="op" id="1924777">&gt;=</span>&nbsp;<span class="builtinfunc" id="1924780">len</span><span class="op" id="1924783">(</span><span class="ident" id="1924784">filetab</span><span class="op" id="1924791">)</span>&nbsp;<span class="op" id="1924793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1924797">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924908">return</span>&nbsp;<span class="num" id="1924915">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1924921">*</span><span class="ident" id="1924922">file</span>&nbsp;<span class="op" id="1924927">=</span>&nbsp;<span class="ident" id="1924929">gostringnocopy</span><span class="op" id="1924943">(</span><span class="op" id="1924944">&amp;</span><span class="ident" id="1924945">pclntable</span><span class="op" id="1924954">[</span><span class="ident" id="1924955">filetab</span><span class="op" id="1924962">[</span><span class="ident" id="1924963">fileno</span><span class="op" id="1924969">]</span><span class="op" id="1924970">]</span><span class="op" id="1924971">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1924974">return</span>&nbsp;<span class="ident" id="1924981">line</span><br>
<span class="lineno"></span><span class="op" id="1924986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1924989">func</span>&nbsp;<span class="ident" id="1924994">funcline</span><span class="op" id="1925002">(</span><span class="ident" id="1925003">f</span>&nbsp;<span class="op" id="1925005">*</span><span class="ident" id="1925006">_func</span><span class="op" id="1925011">,</span>&nbsp;<span class="ident" id="1925013">targetpc</span>&nbsp;<span class="builtintype" id="1925022">uintptr</span><span class="op" id="1925029">,</span>&nbsp;<span class="ident" id="1925031">file</span>&nbsp;<span class="op" id="1925036">*</span><span class="builtintype" id="1925037">string</span><span class="op" id="1925043">)</span>&nbsp;<span class="builtintype" id="1925045">int32</span>&nbsp;<span class="op" id="1925051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925054">return</span>&nbsp;<span class="ident" id="1925061">funcline1</span><span class="op" id="1925070">(</span><span class="ident" id="1925071">f</span><span class="op" id="1925072">,</span>&nbsp;<span class="ident" id="1925074">targetpc</span><span class="op" id="1925082">,</span>&nbsp;<span class="ident" id="1925084">file</span><span class="op" id="1925088">,</span>&nbsp;<span class="builtintype" id="1925090">true</span><span class="op" id="1925094">)</span><br>
<span class="lineno">225</span><span class="op" id="1925096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1925099">func</span>&nbsp;<span class="ident" id="1925104">funcspdelta</span><span class="op" id="1925115">(</span><span class="ident" id="1925116">f</span>&nbsp;<span class="op" id="1925118">*</span><span class="ident" id="1925119">_func</span><span class="op" id="1925124">,</span>&nbsp;<span class="ident" id="1925126">targetpc</span>&nbsp;<span class="builtintype" id="1925135">uintptr</span><span class="op" id="1925142">)</span>&nbsp;<span class="builtintype" id="1925144">int32</span>&nbsp;<span class="op" id="1925150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1925153">x</span>&nbsp;<span class="op" id="1925155">:=</span>&nbsp;<span class="ident" id="1925158">pcvalue</span><span class="op" id="1925165">(</span><span class="ident" id="1925166">f</span><span class="op" id="1925167">,</span>&nbsp;<span class="ident" id="1925169">f</span><span class="op" id="1925170">.</span><span class="ident" id="1925171">pcsp</span><span class="op" id="1925175">,</span>&nbsp;<span class="ident" id="1925177">targetpc</span><span class="op" id="1925185">,</span>&nbsp;<span class="builtintype" id="1925187">true</span><span class="op" id="1925191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925194">if</span>&nbsp;<span class="ident" id="1925197">x</span><span class="op" id="1925198">&amp;</span><span class="op" id="1925199">(</span><span class="ident" id="1925200">ptrSize</span><span class="op" id="1925207">-</span><span class="num" id="1925208">1</span><span class="op" id="1925209">)</span>&nbsp;<span class="op" id="1925211">!=</span>&nbsp;<span class="num" id="1925214">0</span>&nbsp;<span class="op" id="1925216">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1925220">print</span><span class="op" id="1925225">(</span><span class="string" id="1925226">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1925244">,</span>&nbsp;<span class="ident" id="1925246">hex</span><span class="op" id="1925249">(</span><span class="ident" id="1925250">f</span><span class="op" id="1925251">.</span><span class="ident" id="1925252">entry</span><span class="op" id="1925257">)</span><span class="op" id="1925258">,</span>&nbsp;<span class="string" id="1925260">&#34;&nbsp;&#34;</span><span class="op" id="1925263">,</span>&nbsp;<span class="ident" id="1925265">hex</span><span class="op" id="1925268">(</span><span class="ident" id="1925269">targetpc</span><span class="op" id="1925277">)</span><span class="op" id="1925278">,</span>&nbsp;<span class="string" id="1925280">&#34;&nbsp;&#34;</span><span class="op" id="1925283">,</span>&nbsp;<span class="ident" id="1925285">hex</span><span class="op" id="1925288">(</span><span class="ident" id="1925289">f</span><span class="op" id="1925290">.</span><span class="ident" id="1925291">pcsp</span><span class="op" id="1925295">)</span><span class="op" id="1925296">,</span>&nbsp;<span class="string" id="1925298">&#34;&nbsp;&#34;</span><span class="op" id="1925301">,</span>&nbsp;<span class="ident" id="1925303">x</span><span class="op" id="1925304">,</span>&nbsp;<span class="string" id="1925306">&#34;\n&#34;</span><span class="op" id="1925310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1925313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925316">return</span>&nbsp;<span class="ident" id="1925323">x</span><br>
<span class="lineno"></span><span class="op" id="1925325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1925328">func</span>&nbsp;<span class="ident" id="1925333">pcdatavalue</span><span class="op" id="1925344">(</span><span class="ident" id="1925345">f</span>&nbsp;<span class="op" id="1925347">*</span><span class="ident" id="1925348">_func</span><span class="op" id="1925353">,</span>&nbsp;<span class="ident" id="1925355">table</span>&nbsp;<span class="builtintype" id="1925361">int32</span><span class="op" id="1925366">,</span>&nbsp;<span class="ident" id="1925368">targetpc</span>&nbsp;<span class="builtintype" id="1925377">uintptr</span><span class="op" id="1925384">)</span>&nbsp;<span class="builtintype" id="1925386">int32</span>&nbsp;<span class="op" id="1925392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925395">if</span>&nbsp;<span class="ident" id="1925398">table</span>&nbsp;<span class="op" id="1925404">&lt;</span>&nbsp;<span class="num" id="1925406">0</span>&nbsp;<span class="op" id="1925408">||</span>&nbsp;<span class="ident" id="1925411">table</span>&nbsp;<span class="op" id="1925417">&gt;=</span>&nbsp;<span class="ident" id="1925420">f</span><span class="op" id="1925421">.</span><span class="ident" id="1925422">npcdata</span>&nbsp;<span class="op" id="1925430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925434">return</span>&nbsp;<span class="op" id="1925441">-</span><span class="num" id="1925442">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1925445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1925448">off</span>&nbsp;<span class="op" id="1925452">:=</span>&nbsp;<span class="op" id="1925455">*</span><span class="op" id="1925456">(</span><span class="op" id="1925457">*</span><span class="builtintype" id="1925458">int32</span><span class="op" id="1925463">)</span><span class="op" id="1925464">(</span><span class="ident" id="1925465">add</span><span class="op" id="1925468">(</span><span class="ident" id="1925469">unsafe</span><span class="op" id="1925475">.</span><span class="ident" id="1925476">Pointer</span><span class="op" id="1925483">(</span><span class="op" id="1925484">&amp;</span><span class="ident" id="1925485">f</span><span class="op" id="1925486">.</span><span class="ident" id="1925487">nfuncdata</span><span class="op" id="1925496">)</span><span class="op" id="1925497">,</span>&nbsp;<span class="ident" id="1925499">unsafe</span><span class="op" id="1925505">.</span><span class="ident" id="1925506">Sizeof</span><span class="op" id="1925512">(</span><span class="ident" id="1925513">f</span><span class="op" id="1925514">.</span><span class="ident" id="1925515">nfuncdata</span><span class="op" id="1925524">)</span><span class="op" id="1925525">+</span><span class="builtintype" id="1925526">uintptr</span><span class="op" id="1925533">(</span><span class="ident" id="1925534">table</span><span class="op" id="1925539">)</span><span class="op" id="1925540">*</span><span class="num" id="1925541">4</span><span class="op" id="1925542">)</span><span class="op" id="1925543">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925546">return</span>&nbsp;<span class="ident" id="1925553">pcvalue</span><span class="op" id="1925560">(</span><span class="ident" id="1925561">f</span><span class="op" id="1925562">,</span>&nbsp;<span class="ident" id="1925564">off</span><span class="op" id="1925567">,</span>&nbsp;<span class="ident" id="1925569">targetpc</span><span class="op" id="1925577">,</span>&nbsp;<span class="builtintype" id="1925579">true</span><span class="op" id="1925583">)</span><br>
<span class="lineno"></span><span class="op" id="1925585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1925588">func</span>&nbsp;<span class="ident" id="1925593">funcdata</span><span class="op" id="1925601">(</span><span class="ident" id="1925602">f</span>&nbsp;<span class="op" id="1925604">*</span><span class="ident" id="1925605">_func</span><span class="op" id="1925610">,</span>&nbsp;<span class="ident" id="1925612">i</span>&nbsp;<span class="builtintype" id="1925614">int32</span><span class="op" id="1925619">)</span>&nbsp;<span class="ident" id="1925621">unsafe</span><span class="op" id="1925627">.</span><span class="ident" id="1925628">Pointer</span>&nbsp;<span class="op" id="1925636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925639">if</span>&nbsp;<span class="ident" id="1925642">i</span>&nbsp;<span class="op" id="1925644">&lt;</span>&nbsp;<span class="num" id="1925646">0</span>&nbsp;<span class="op" id="1925648">||</span>&nbsp;<span class="ident" id="1925651">i</span>&nbsp;<span class="op" id="1925653">&gt;=</span>&nbsp;<span class="ident" id="1925656">f</span><span class="op" id="1925657">.</span><span class="ident" id="1925658">nfuncdata</span>&nbsp;<span class="op" id="1925668">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925672">return</span>&nbsp;<span class="ident" id="1925679">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1925684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1925687">p</span>&nbsp;<span class="op" id="1925689">:=</span>&nbsp;<span class="ident" id="1925692">add</span><span class="op" id="1925695">(</span><span class="ident" id="1925696">unsafe</span><span class="op" id="1925702">.</span><span class="ident" id="1925703">Pointer</span><span class="op" id="1925710">(</span><span class="op" id="1925711">&amp;</span><span class="ident" id="1925712">f</span><span class="op" id="1925713">.</span><span class="ident" id="1925714">nfuncdata</span><span class="op" id="1925723">)</span><span class="op" id="1925724">,</span>&nbsp;<span class="ident" id="1925726">unsafe</span><span class="op" id="1925732">.</span><span class="ident" id="1925733">Sizeof</span><span class="op" id="1925739">(</span><span class="ident" id="1925740">f</span><span class="op" id="1925741">.</span><span class="ident" id="1925742">nfuncdata</span><span class="op" id="1925751">)</span><span class="op" id="1925752">+</span><span class="builtintype" id="1925753">uintptr</span><span class="op" id="1925760">(</span><span class="ident" id="1925761">f</span><span class="op" id="1925762">.</span><span class="ident" id="1925763">npcdata</span><span class="op" id="1925770">)</span><span class="op" id="1925771">*</span><span class="num" id="1925772">4</span><span class="op" id="1925773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925776">if</span>&nbsp;<span class="ident" id="1925779">ptrSize</span>&nbsp;<span class="op" id="1925787">==</span>&nbsp;<span class="num" id="1925790">8</span>&nbsp;<span class="op" id="1925792">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1925795">uintptr</span><span class="op" id="1925802">(</span><span class="ident" id="1925803">p</span><span class="op" id="1925804">)</span><span class="op" id="1925805">&amp;</span><span class="num" id="1925806">4</span>&nbsp;<span class="op" id="1925808">!=</span>&nbsp;<span class="num" id="1925811">0</span>&nbsp;<span class="op" id="1925813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925817">if</span>&nbsp;<span class="builtintype" id="1925820">uintptr</span><span class="op" id="1925827">(</span><span class="ident" id="1925828">unsafe</span><span class="op" id="1925834">.</span><span class="ident" id="1925835">Pointer</span><span class="op" id="1925842">(</span><span class="ident" id="1925843">f</span><span class="op" id="1925844">)</span><span class="op" id="1925845">)</span><span class="op" id="1925846">&amp;</span><span class="num" id="1925847">4</span>&nbsp;<span class="op" id="1925849">!=</span>&nbsp;<span class="num" id="1925852">0</span>&nbsp;<span class="op" id="1925854">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1925859">println</span><span class="op" id="1925866">(</span><span class="string" id="1925867">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1925893">,</span>&nbsp;<span class="ident" id="1925895">f</span><span class="op" id="1925896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1925900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1925904">p</span>&nbsp;<span class="op" id="1925906">=</span>&nbsp;<span class="ident" id="1925908">add</span><span class="op" id="1925911">(</span><span class="ident" id="1925912">p</span><span class="op" id="1925913">,</span>&nbsp;<span class="num" id="1925915">4</span><span class="op" id="1925916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1925919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1925922">return</span>&nbsp;<span class="op" id="1925929">*</span><span class="op" id="1925930">(</span><span class="op" id="1925931">*</span><span class="ident" id="1925932">unsafe</span><span class="op" id="1925938">.</span><span class="ident" id="1925939">Pointer</span><span class="op" id="1925946">)</span><span class="op" id="1925947">(</span><span class="ident" id="1925948">add</span><span class="op" id="1925951">(</span><span class="ident" id="1925952">p</span><span class="op" id="1925953">,</span>&nbsp;<span class="builtintype" id="1925955">uintptr</span><span class="op" id="1925962">(</span><span class="ident" id="1925963">i</span><span class="op" id="1925964">)</span><span class="op" id="1925965">*</span><span class="ident" id="1925966">ptrSize</span><span class="op" id="1925973">)</span><span class="op" id="1925974">)</span><br>
<span class="lineno">255</span><span class="op" id="1925976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1925979">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1926045">func</span>&nbsp;<span class="ident" id="1926050">step</span><span class="op" id="1926054">(</span><span class="ident" id="1926055">p</span>&nbsp;<span class="op" id="1926057">[</span><span class="op" id="1926058">]</span><span class="builtintype" id="1926059">byte</span><span class="op" id="1926063">,</span>&nbsp;<span class="ident" id="1926065">pc</span>&nbsp;<span class="op" id="1926068">*</span><span class="builtintype" id="1926069">uintptr</span><span class="op" id="1926076">,</span>&nbsp;<span class="ident" id="1926078">val</span>&nbsp;<span class="op" id="1926082">*</span><span class="builtintype" id="1926083">int32</span><span class="op" id="1926088">,</span>&nbsp;<span class="ident" id="1926090">first</span>&nbsp;<span class="builtintype" id="1926096">bool</span><span class="op" id="1926100">)</span>&nbsp;<span class="op" id="1926102">(</span><span class="ident" id="1926103">newp</span>&nbsp;<span class="op" id="1926108">[</span><span class="op" id="1926109">]</span><span class="builtintype" id="1926110">byte</span><span class="op" id="1926114">,</span>&nbsp;<span class="ident" id="1926116">ok</span>&nbsp;<span class="builtintype" id="1926119">bool</span><span class="op" id="1926123">)</span>&nbsp;<span class="op" id="1926125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926128">p</span><span class="op" id="1926129">,</span>&nbsp;<span class="ident" id="1926131">uvdelta</span>&nbsp;<span class="op" id="1926139">:=</span>&nbsp;<span class="ident" id="1926142">readvarint</span><span class="op" id="1926152">(</span><span class="ident" id="1926153">p</span><span class="op" id="1926154">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926157">if</span>&nbsp;<span class="ident" id="1926160">uvdelta</span>&nbsp;<span class="op" id="1926168">==</span>&nbsp;<span class="num" id="1926171">0</span>&nbsp;<span class="op" id="1926173">&amp;&amp;</span>&nbsp;<span class="op" id="1926176">!</span><span class="ident" id="1926177">first</span>&nbsp;<span class="op" id="1926183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926187">return</span>&nbsp;<span class="ident" id="1926194">nil</span><span class="op" id="1926197">,</span>&nbsp;<span class="builtintype" id="1926199">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926209">if</span>&nbsp;<span class="ident" id="1926212">uvdelta</span><span class="op" id="1926219">&amp;</span><span class="num" id="1926220">1</span>&nbsp;<span class="op" id="1926222">!=</span>&nbsp;<span class="num" id="1926225">0</span>&nbsp;<span class="op" id="1926227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926231">uvdelta</span>&nbsp;<span class="op" id="1926239">=</span>&nbsp;<span class="op" id="1926241">^</span><span class="op" id="1926242">(</span><span class="ident" id="1926243">uvdelta</span>&nbsp;<span class="op" id="1926251">&gt;&gt;</span>&nbsp;<span class="num" id="1926254">1</span><span class="op" id="1926255">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926258">}</span>&nbsp;<span class="keyword" id="1926260">else</span>&nbsp;<span class="op" id="1926265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926269">uvdelta</span>&nbsp;<span class="op" id="1926277">&gt;&gt;=</span>&nbsp;<span class="num" id="1926281">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926287">vdelta</span>&nbsp;<span class="op" id="1926294">:=</span>&nbsp;<span class="builtintype" id="1926297">int32</span><span class="op" id="1926302">(</span><span class="ident" id="1926303">uvdelta</span><span class="op" id="1926310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926313">p</span><span class="op" id="1926314">,</span>&nbsp;<span class="ident" id="1926316">pcdelta</span>&nbsp;<span class="op" id="1926324">:=</span>&nbsp;<span class="ident" id="1926327">readvarint</span><span class="op" id="1926337">(</span><span class="ident" id="1926338">p</span><span class="op" id="1926339">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926342">*</span><span class="ident" id="1926343">pc</span>&nbsp;<span class="op" id="1926346">+=</span>&nbsp;<span class="builtintype" id="1926349">uintptr</span><span class="op" id="1926356">(</span><span class="ident" id="1926357">pcdelta</span>&nbsp;<span class="op" id="1926365">*</span>&nbsp;<span class="ident" id="1926367">_PCQuantum</span><span class="op" id="1926377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926380">*</span><span class="ident" id="1926381">val</span>&nbsp;<span class="op" id="1926385">+=</span>&nbsp;<span class="ident" id="1926388">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926396">return</span>&nbsp;<span class="ident" id="1926403">p</span><span class="op" id="1926404">,</span>&nbsp;<span class="builtintype" id="1926406">true</span><br>
<span class="lineno"></span><span class="op" id="1926411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1926414">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1926451">func</span>&nbsp;<span class="ident" id="1926456">readvarint</span><span class="op" id="1926466">(</span><span class="ident" id="1926467">p</span>&nbsp;<span class="op" id="1926469">[</span><span class="op" id="1926470">]</span><span class="builtintype" id="1926471">byte</span><span class="op" id="1926475">)</span>&nbsp;<span class="op" id="1926477">(</span><span class="ident" id="1926478">newp</span>&nbsp;<span class="op" id="1926483">[</span><span class="op" id="1926484">]</span><span class="builtintype" id="1926485">byte</span><span class="op" id="1926489">,</span>&nbsp;<span class="ident" id="1926491">val</span>&nbsp;<span class="builtintype" id="1926495">uint32</span><span class="op" id="1926501">)</span>&nbsp;<span class="op" id="1926503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926506">var</span>&nbsp;<span class="ident" id="1926510">v</span><span class="op" id="1926511">,</span>&nbsp;<span class="ident" id="1926513">shift</span>&nbsp;<span class="builtintype" id="1926519">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926527">for</span>&nbsp;<span class="op" id="1926531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926535">b</span>&nbsp;<span class="op" id="1926537">:=</span>&nbsp;<span class="ident" id="1926540">p</span><span class="op" id="1926541">[</span><span class="num" id="1926542">0</span><span class="op" id="1926543">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926547">p</span>&nbsp;<span class="op" id="1926549">=</span>&nbsp;<span class="ident" id="1926551">p</span><span class="op" id="1926552">[</span><span class="num" id="1926553">1</span><span class="op" id="1926554">:</span><span class="op" id="1926555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926559">v</span>&nbsp;<span class="op" id="1926561">|=</span>&nbsp;<span class="op" id="1926564">(</span><span class="builtintype" id="1926565">uint32</span><span class="op" id="1926571">(</span><span class="ident" id="1926572">b</span><span class="op" id="1926573">)</span>&nbsp;<span class="op" id="1926575">&amp;</span>&nbsp;<span class="num" id="1926577">0x7F</span><span class="op" id="1926581">)</span>&nbsp;<span class="op" id="1926583">&lt;&lt;</span>&nbsp;<span class="ident" id="1926586">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926594">if</span>&nbsp;<span class="ident" id="1926597">b</span><span class="op" id="1926598">&amp;</span><span class="num" id="1926599">0x80</span>&nbsp;<span class="op" id="1926604">==</span>&nbsp;<span class="num" id="1926607">0</span>&nbsp;<span class="op" id="1926609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926614">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926622">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1926626">shift</span>&nbsp;<span class="op" id="1926632">+=</span>&nbsp;<span class="num" id="1926635">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1926638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1926641">return</span>&nbsp;<span class="ident" id="1926648">p</span><span class="op" id="1926649">,</span>&nbsp;<span class="ident" id="1926651">v</span><br>
<span class="lineno"></span><span class="op" id="1926653">}</span>
</div>
</body>
</html>
