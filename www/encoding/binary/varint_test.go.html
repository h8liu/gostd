<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7695976">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7696031">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7696085">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7696136">package</span>&nbsp;<span class="ident" id="7696144">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696152">import</span>&nbsp;<span class="op" id="7696159">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7696162">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7696171">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7696177">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7696187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696190">func</span>&nbsp;<span class="ident" id="7696195">testConstant</span><span class="op" id="7696207">(</span><span class="ident" id="7696208">t</span>&nbsp;<span class="op" id="7696210">*</span><span class="ident" id="7696211">testing</span><span class="op" id="7696218">.</span><span class="ident" id="7696219">T</span><span class="op" id="7696220">,</span>&nbsp;<span class="ident" id="7696222">w</span>&nbsp;<span class="builtintype" id="7696224">uint</span><span class="op" id="7696228">,</span>&nbsp;<span class="ident" id="7696230">max</span>&nbsp;<span class="builtintype" id="7696234">int</span><span class="op" id="7696237">)</span>&nbsp;<span class="op" id="7696239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696242">buf</span>&nbsp;<span class="op" id="7696246">:=</span>&nbsp;<span class="builtinfunc" id="7696249">make</span><span class="op" id="7696253">(</span><span class="op" id="7696254">[</span><span class="op" id="7696255">]</span><span class="builtintype" id="7696256">byte</span><span class="op" id="7696260">,</span>&nbsp;<span class="ident" id="7696262">MaxVarintLen64</span><span class="op" id="7696276">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696279">n</span>&nbsp;<span class="op" id="7696281">:=</span>&nbsp;<span class="ident" id="7696284">PutUvarint</span><span class="op" id="7696294">(</span><span class="ident" id="7696295">buf</span><span class="op" id="7696298">,</span>&nbsp;<span class="num" id="7696300">1</span><span class="op" id="7696301">&lt;&lt;</span><span class="ident" id="7696303">w</span><span class="op" id="7696304">-</span><span class="num" id="7696305">1</span><span class="op" id="7696306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696309">if</span>&nbsp;<span class="ident" id="7696312">n</span>&nbsp;<span class="op" id="7696314">!=</span>&nbsp;<span class="ident" id="7696317">max</span>&nbsp;<span class="op" id="7696321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696325">t</span><span class="op" id="7696326">.</span><span class="ident" id="7696327">Errorf</span><span class="op" id="7696333">(</span><span class="string" id="7696334">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7696364">,</span>&nbsp;<span class="ident" id="7696366">w</span><span class="op" id="7696367">,</span>&nbsp;<span class="ident" id="7696369">max</span><span class="op" id="7696372">,</span>&nbsp;<span class="ident" id="7696374">n</span><span class="op" id="7696375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696378">}</span><br>
<span class="lineno"></span><span class="op" id="7696380">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7696383">func</span>&nbsp;<span class="ident" id="7696388">TestConstants</span><span class="op" id="7696401">(</span><span class="ident" id="7696402">t</span>&nbsp;<span class="op" id="7696404">*</span><span class="ident" id="7696405">testing</span><span class="op" id="7696412">.</span><span class="ident" id="7696413">T</span><span class="op" id="7696414">)</span>&nbsp;<span class="op" id="7696416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696419">testConstant</span><span class="op" id="7696431">(</span><span class="ident" id="7696432">t</span><span class="op" id="7696433">,</span>&nbsp;<span class="num" id="7696435">16</span><span class="op" id="7696437">,</span>&nbsp;<span class="ident" id="7696439">MaxVarintLen16</span><span class="op" id="7696453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696456">testConstant</span><span class="op" id="7696468">(</span><span class="ident" id="7696469">t</span><span class="op" id="7696470">,</span>&nbsp;<span class="num" id="7696472">32</span><span class="op" id="7696474">,</span>&nbsp;<span class="ident" id="7696476">MaxVarintLen32</span><span class="op" id="7696490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696493">testConstant</span><span class="op" id="7696505">(</span><span class="ident" id="7696506">t</span><span class="op" id="7696507">,</span>&nbsp;<span class="num" id="7696509">64</span><span class="op" id="7696511">,</span>&nbsp;<span class="ident" id="7696513">MaxVarintLen64</span><span class="op" id="7696527">)</span><br>
<span class="lineno">25</span><span class="op" id="7696529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696532">func</span>&nbsp;<span class="ident" id="7696537">testVarint</span><span class="op" id="7696547">(</span><span class="ident" id="7696548">t</span>&nbsp;<span class="op" id="7696550">*</span><span class="ident" id="7696551">testing</span><span class="op" id="7696558">.</span><span class="ident" id="7696559">T</span><span class="op" id="7696560">,</span>&nbsp;<span class="ident" id="7696562">x</span>&nbsp;<span class="ident" id="7696564">int64</span><span class="op" id="7696569">)</span>&nbsp;<span class="op" id="7696571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696574">buf</span>&nbsp;<span class="op" id="7696578">:=</span>&nbsp;<span class="builtinfunc" id="7696581">make</span><span class="op" id="7696585">(</span><span class="op" id="7696586">[</span><span class="op" id="7696587">]</span><span class="builtintype" id="7696588">byte</span><span class="op" id="7696592">,</span>&nbsp;<span class="ident" id="7696594">MaxVarintLen64</span><span class="op" id="7696608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696611">n</span>&nbsp;<span class="op" id="7696613">:=</span>&nbsp;<span class="ident" id="7696616">PutVarint</span><span class="op" id="7696625">(</span><span class="ident" id="7696626">buf</span><span class="op" id="7696629">,</span>&nbsp;<span class="ident" id="7696631">x</span><span class="op" id="7696632">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696635">y</span><span class="op" id="7696636">,</span>&nbsp;<span class="ident" id="7696638">m</span>&nbsp;<span class="op" id="7696640">:=</span>&nbsp;<span class="ident" id="7696643">Varint</span><span class="op" id="7696649">(</span><span class="ident" id="7696650">buf</span><span class="op" id="7696653">[</span><span class="num" id="7696654">0</span><span class="op" id="7696655">:</span><span class="ident" id="7696656">n</span><span class="op" id="7696657">]</span><span class="op" id="7696658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696661">if</span>&nbsp;<span class="ident" id="7696664">x</span>&nbsp;<span class="op" id="7696666">!=</span>&nbsp;<span class="ident" id="7696669">y</span>&nbsp;<span class="op" id="7696671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696675">t</span><span class="op" id="7696676">.</span><span class="ident" id="7696677">Errorf</span><span class="op" id="7696683">(</span><span class="string" id="7696684">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7696704">,</span>&nbsp;<span class="ident" id="7696706">x</span><span class="op" id="7696707">,</span>&nbsp;<span class="ident" id="7696709">y</span><span class="op" id="7696710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696716">if</span>&nbsp;<span class="ident" id="7696719">n</span>&nbsp;<span class="op" id="7696721">!=</span>&nbsp;<span class="ident" id="7696724">m</span>&nbsp;<span class="op" id="7696726">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696730">t</span><span class="op" id="7696731">.</span><span class="ident" id="7696732">Errorf</span><span class="op" id="7696738">(</span><span class="string" id="7696739">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7696772">,</span>&nbsp;<span class="ident" id="7696774">x</span><span class="op" id="7696775">,</span>&nbsp;<span class="ident" id="7696777">m</span><span class="op" id="7696778">,</span>&nbsp;<span class="ident" id="7696780">n</span><span class="op" id="7696781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696788">y</span><span class="op" id="7696789">,</span>&nbsp;<span class="ident" id="7696791">err</span>&nbsp;<span class="op" id="7696795">:=</span>&nbsp;<span class="ident" id="7696798">ReadVarint</span><span class="op" id="7696808">(</span><span class="ident" id="7696809">bytes</span><span class="op" id="7696814">.</span><span class="ident" id="7696815">NewReader</span><span class="op" id="7696824">(</span><span class="ident" id="7696825">buf</span><span class="op" id="7696828">)</span><span class="op" id="7696829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696832">if</span>&nbsp;<span class="ident" id="7696835">err</span>&nbsp;<span class="op" id="7696839">!=</span>&nbsp;<span class="ident" id="7696842">nil</span>&nbsp;<span class="op" id="7696846">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696850">t</span><span class="op" id="7696851">.</span><span class="ident" id="7696852">Errorf</span><span class="op" id="7696858">(</span><span class="string" id="7696859">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7696879">,</span>&nbsp;<span class="ident" id="7696881">x</span><span class="op" id="7696882">,</span>&nbsp;<span class="ident" id="7696884">err</span><span class="op" id="7696887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696893">if</span>&nbsp;<span class="ident" id="7696896">x</span>&nbsp;<span class="op" id="7696898">!=</span>&nbsp;<span class="ident" id="7696901">y</span>&nbsp;<span class="op" id="7696903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696907">t</span><span class="op" id="7696908">.</span><span class="ident" id="7696909">Errorf</span><span class="op" id="7696915">(</span><span class="string" id="7696916">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7696940">,</span>&nbsp;<span class="ident" id="7696942">x</span><span class="op" id="7696943">,</span>&nbsp;<span class="ident" id="7696945">y</span><span class="op" id="7696946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696949">}</span><br>
<span class="lineno">45</span><span class="op" id="7696951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696954">func</span>&nbsp;<span class="ident" id="7696959">testUvarint</span><span class="op" id="7696970">(</span><span class="ident" id="7696971">t</span>&nbsp;<span class="op" id="7696973">*</span><span class="ident" id="7696974">testing</span><span class="op" id="7696981">.</span><span class="ident" id="7696982">T</span><span class="op" id="7696983">,</span>&nbsp;<span class="ident" id="7696985">x</span>&nbsp;<span class="ident" id="7696987">uint64</span><span class="op" id="7696993">)</span>&nbsp;<span class="op" id="7696995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696998">buf</span>&nbsp;<span class="op" id="7697002">:=</span>&nbsp;<span class="builtinfunc" id="7697005">make</span><span class="op" id="7697009">(</span><span class="op" id="7697010">[</span><span class="op" id="7697011">]</span><span class="builtintype" id="7697012">byte</span><span class="op" id="7697016">,</span>&nbsp;<span class="ident" id="7697018">MaxVarintLen64</span><span class="op" id="7697032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697035">n</span>&nbsp;<span class="op" id="7697037">:=</span>&nbsp;<span class="ident" id="7697040">PutUvarint</span><span class="op" id="7697050">(</span><span class="ident" id="7697051">buf</span><span class="op" id="7697054">,</span>&nbsp;<span class="ident" id="7697056">x</span><span class="op" id="7697057">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697060">y</span><span class="op" id="7697061">,</span>&nbsp;<span class="ident" id="7697063">m</span>&nbsp;<span class="op" id="7697065">:=</span>&nbsp;<span class="ident" id="7697068">Uvarint</span><span class="op" id="7697075">(</span><span class="ident" id="7697076">buf</span><span class="op" id="7697079">[</span><span class="num" id="7697080">0</span><span class="op" id="7697081">:</span><span class="ident" id="7697082">n</span><span class="op" id="7697083">]</span><span class="op" id="7697084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697087">if</span>&nbsp;<span class="ident" id="7697090">x</span>&nbsp;<span class="op" id="7697092">!=</span>&nbsp;<span class="ident" id="7697095">y</span>&nbsp;<span class="op" id="7697097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697101">t</span><span class="op" id="7697102">.</span><span class="ident" id="7697103">Errorf</span><span class="op" id="7697109">(</span><span class="string" id="7697110">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7697131">,</span>&nbsp;<span class="ident" id="7697133">x</span><span class="op" id="7697134">,</span>&nbsp;<span class="ident" id="7697136">y</span><span class="op" id="7697137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697143">if</span>&nbsp;<span class="ident" id="7697146">n</span>&nbsp;<span class="op" id="7697148">!=</span>&nbsp;<span class="ident" id="7697151">m</span>&nbsp;<span class="op" id="7697153">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697157">t</span><span class="op" id="7697158">.</span><span class="ident" id="7697159">Errorf</span><span class="op" id="7697165">(</span><span class="string" id="7697166">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7697200">,</span>&nbsp;<span class="ident" id="7697202">x</span><span class="op" id="7697203">,</span>&nbsp;<span class="ident" id="7697205">m</span><span class="op" id="7697206">,</span>&nbsp;<span class="ident" id="7697208">n</span><span class="op" id="7697209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697216">y</span><span class="op" id="7697217">,</span>&nbsp;<span class="ident" id="7697219">err</span>&nbsp;<span class="op" id="7697223">:=</span>&nbsp;<span class="ident" id="7697226">ReadUvarint</span><span class="op" id="7697237">(</span><span class="ident" id="7697238">bytes</span><span class="op" id="7697243">.</span><span class="ident" id="7697244">NewReader</span><span class="op" id="7697253">(</span><span class="ident" id="7697254">buf</span><span class="op" id="7697257">)</span><span class="op" id="7697258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697261">if</span>&nbsp;<span class="ident" id="7697264">err</span>&nbsp;<span class="op" id="7697268">!=</span>&nbsp;<span class="ident" id="7697271">nil</span>&nbsp;<span class="op" id="7697275">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697279">t</span><span class="op" id="7697280">.</span><span class="ident" id="7697281">Errorf</span><span class="op" id="7697287">(</span><span class="string" id="7697288">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7697309">,</span>&nbsp;<span class="ident" id="7697311">x</span><span class="op" id="7697312">,</span>&nbsp;<span class="ident" id="7697314">err</span><span class="op" id="7697317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697323">if</span>&nbsp;<span class="ident" id="7697326">x</span>&nbsp;<span class="op" id="7697328">!=</span>&nbsp;<span class="ident" id="7697331">y</span>&nbsp;<span class="op" id="7697333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697337">t</span><span class="op" id="7697338">.</span><span class="ident" id="7697339">Errorf</span><span class="op" id="7697345">(</span><span class="string" id="7697346">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7697371">,</span>&nbsp;<span class="ident" id="7697373">x</span><span class="op" id="7697374">,</span>&nbsp;<span class="ident" id="7697376">y</span><span class="op" id="7697377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697380">}</span><br>
<span class="lineno">65</span><span class="op" id="7697382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697385">var</span>&nbsp;<span class="ident" id="7697389">tests</span>&nbsp;<span class="op" id="7697395">=</span>&nbsp;<span class="op" id="7697397">[</span><span class="op" id="7697398">]</span><span class="ident" id="7697399">int64</span><span class="op" id="7697404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697407">-</span><span class="num" id="7697408">1</span>&nbsp;<span class="op" id="7697410">&lt;&lt;</span>&nbsp;<span class="num" id="7697413">63</span><span class="op" id="7697415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697418">-</span><span class="num" id="7697419">1</span><span class="op" id="7697420">&lt;&lt;</span><span class="num" id="7697422">63</span>&nbsp;<span class="op" id="7697425">+</span>&nbsp;<span class="num" id="7697427">1</span><span class="op" id="7697428">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697431">-</span><span class="num" id="7697432">1</span><span class="op" id="7697433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697436">0</span><span class="op" id="7697437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697440">1</span><span class="op" id="7697441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697444">2</span><span class="op" id="7697445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697448">10</span><span class="op" id="7697450">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697453">20</span><span class="op" id="7697455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697458">63</span><span class="op" id="7697460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697463">64</span><span class="op" id="7697465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697468">65</span><span class="op" id="7697470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697473">127</span><span class="op" id="7697476">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697479">128</span><span class="op" id="7697482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697485">129</span><span class="op" id="7697488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697491">255</span><span class="op" id="7697494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697497">256</span><span class="op" id="7697500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697503">257</span><span class="op" id="7697506">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7697509">1</span><span class="op" id="7697510">&lt;&lt;</span><span class="num" id="7697512">63</span>&nbsp;<span class="op" id="7697515">-</span>&nbsp;<span class="num" id="7697517">1</span><span class="op" id="7697518">,</span><br>
<span class="lineno"></span><span class="op" id="7697520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697523">func</span>&nbsp;<span class="ident" id="7697528">TestVarint</span><span class="op" id="7697538">(</span><span class="ident" id="7697539">t</span>&nbsp;<span class="op" id="7697541">*</span><span class="ident" id="7697542">testing</span><span class="op" id="7697549">.</span><span class="ident" id="7697550">T</span><span class="op" id="7697551">)</span>&nbsp;<span class="op" id="7697553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697556">for</span>&nbsp;<span class="ident" id="7697560">_</span><span class="op" id="7697561">,</span>&nbsp;<span class="ident" id="7697563">x</span>&nbsp;<span class="op" id="7697565">:=</span>&nbsp;<span class="keyword" id="7697568">range</span>&nbsp;<span class="ident" id="7697574">tests</span>&nbsp;<span class="op" id="7697580">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697584">testVarint</span><span class="op" id="7697594">(</span><span class="ident" id="7697595">t</span><span class="op" id="7697596">,</span>&nbsp;<span class="ident" id="7697598">x</span><span class="op" id="7697599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697603">testVarint</span><span class="op" id="7697613">(</span><span class="ident" id="7697614">t</span><span class="op" id="7697615">,</span>&nbsp;<span class="op" id="7697617">-</span><span class="ident" id="7697618">x</span><span class="op" id="7697619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697625">for</span>&nbsp;<span class="ident" id="7697629">x</span>&nbsp;<span class="op" id="7697631">:=</span>&nbsp;<span class="ident" id="7697634">int64</span><span class="op" id="7697639">(</span><span class="num" id="7697640">0x7</span><span class="op" id="7697643">)</span><span class="op" id="7697644">;</span>&nbsp;<span class="ident" id="7697646">x</span>&nbsp;<span class="op" id="7697648">!=</span>&nbsp;<span class="num" id="7697651">0</span><span class="op" id="7697652">;</span>&nbsp;<span class="ident" id="7697654">x</span>&nbsp;<span class="op" id="7697656">&lt;&lt;=</span>&nbsp;<span class="num" id="7697660">1</span>&nbsp;<span class="op" id="7697662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697666">testVarint</span><span class="op" id="7697676">(</span><span class="ident" id="7697677">t</span><span class="op" id="7697678">,</span>&nbsp;<span class="ident" id="7697680">x</span><span class="op" id="7697681">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697685">testVarint</span><span class="op" id="7697695">(</span><span class="ident" id="7697696">t</span><span class="op" id="7697697">,</span>&nbsp;<span class="op" id="7697699">-</span><span class="ident" id="7697700">x</span><span class="op" id="7697701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697704">}</span><br>
<span class="lineno"></span><span class="op" id="7697706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697709">func</span>&nbsp;<span class="ident" id="7697714">TestUvarint</span><span class="op" id="7697725">(</span><span class="ident" id="7697726">t</span>&nbsp;<span class="op" id="7697728">*</span><span class="ident" id="7697729">testing</span><span class="op" id="7697736">.</span><span class="ident" id="7697737">T</span><span class="op" id="7697738">)</span>&nbsp;<span class="op" id="7697740">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697743">for</span>&nbsp;<span class="ident" id="7697747">_</span><span class="op" id="7697748">,</span>&nbsp;<span class="ident" id="7697750">x</span>&nbsp;<span class="op" id="7697752">:=</span>&nbsp;<span class="keyword" id="7697755">range</span>&nbsp;<span class="ident" id="7697761">tests</span>&nbsp;<span class="op" id="7697767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697771">testUvarint</span><span class="op" id="7697782">(</span><span class="ident" id="7697783">t</span><span class="op" id="7697784">,</span>&nbsp;<span class="ident" id="7697786">uint64</span><span class="op" id="7697792">(</span><span class="ident" id="7697793">x</span><span class="op" id="7697794">)</span><span class="op" id="7697795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697801">for</span>&nbsp;<span class="ident" id="7697805">x</span>&nbsp;<span class="op" id="7697807">:=</span>&nbsp;<span class="ident" id="7697810">uint64</span><span class="op" id="7697816">(</span><span class="num" id="7697817">0x7</span><span class="op" id="7697820">)</span><span class="op" id="7697821">;</span>&nbsp;<span class="ident" id="7697823">x</span>&nbsp;<span class="op" id="7697825">!=</span>&nbsp;<span class="num" id="7697828">0</span><span class="op" id="7697829">;</span>&nbsp;<span class="ident" id="7697831">x</span>&nbsp;<span class="op" id="7697833">&lt;&lt;=</span>&nbsp;<span class="num" id="7697837">1</span>&nbsp;<span class="op" id="7697839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697843">testUvarint</span><span class="op" id="7697854">(</span><span class="ident" id="7697855">t</span><span class="op" id="7697856">,</span>&nbsp;<span class="ident" id="7697858">x</span><span class="op" id="7697859">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697862">}</span><br>
<span class="lineno"></span><span class="op" id="7697864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697867">func</span>&nbsp;<span class="ident" id="7697872">TestBufferTooSmall</span><span class="op" id="7697890">(</span><span class="ident" id="7697891">t</span>&nbsp;<span class="op" id="7697893">*</span><span class="ident" id="7697894">testing</span><span class="op" id="7697901">.</span><span class="ident" id="7697902">T</span><span class="op" id="7697903">)</span>&nbsp;<span class="op" id="7697905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697908">buf</span>&nbsp;<span class="op" id="7697912">:=</span>&nbsp;<span class="op" id="7697915">[</span><span class="op" id="7697916">]</span><span class="builtintype" id="7697917">byte</span><span class="op" id="7697921">{</span><span class="num" id="7697922">0x80</span><span class="op" id="7697926">,</span>&nbsp;<span class="num" id="7697928">0x80</span><span class="op" id="7697932">,</span>&nbsp;<span class="num" id="7697934">0x80</span><span class="op" id="7697938">,</span>&nbsp;<span class="num" id="7697940">0x80</span><span class="op" id="7697944">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697947">for</span>&nbsp;<span class="ident" id="7697951">i</span>&nbsp;<span class="op" id="7697953">:=</span>&nbsp;<span class="num" id="7697956">0</span><span class="op" id="7697957">;</span>&nbsp;<span class="ident" id="7697959">i</span>&nbsp;<span class="op" id="7697961">&lt;=</span>&nbsp;<span class="builtinfunc" id="7697964">len</span><span class="op" id="7697967">(</span><span class="ident" id="7697968">buf</span><span class="op" id="7697971">)</span><span class="op" id="7697972">;</span>&nbsp;<span class="ident" id="7697974">i</span><span class="op" id="7697975">++</span>&nbsp;<span class="op" id="7697978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697982">buf</span>&nbsp;<span class="op" id="7697986">:=</span>&nbsp;<span class="ident" id="7697989">buf</span><span class="op" id="7697992">[</span><span class="num" id="7697993">0</span><span class="op" id="7697994">:</span><span class="ident" id="7697995">i</span><span class="op" id="7697996">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698000">x</span><span class="op" id="7698001">,</span>&nbsp;<span class="ident" id="7698003">n</span>&nbsp;<span class="op" id="7698005">:=</span>&nbsp;<span class="ident" id="7698008">Uvarint</span><span class="op" id="7698015">(</span><span class="ident" id="7698016">buf</span><span class="op" id="7698019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698023">if</span>&nbsp;<span class="ident" id="7698026">x</span>&nbsp;<span class="op" id="7698028">!=</span>&nbsp;<span class="num" id="7698031">0</span>&nbsp;<span class="op" id="7698033">||</span>&nbsp;<span class="ident" id="7698036">n</span>&nbsp;<span class="op" id="7698038">!=</span>&nbsp;<span class="num" id="7698041">0</span>&nbsp;<span class="op" id="7698043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698048">t</span><span class="op" id="7698049">.</span><span class="ident" id="7698050">Errorf</span><span class="op" id="7698056">(</span><span class="string" id="7698057">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7698090">,</span>&nbsp;<span class="ident" id="7698092">buf</span><span class="op" id="7698095">,</span>&nbsp;<span class="ident" id="7698097">x</span><span class="op" id="7698098">,</span>&nbsp;<span class="ident" id="7698100">n</span><span class="op" id="7698101">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698110">x</span><span class="op" id="7698111">,</span>&nbsp;<span class="ident" id="7698113">err</span>&nbsp;<span class="op" id="7698117">:=</span>&nbsp;<span class="ident" id="7698120">ReadUvarint</span><span class="op" id="7698131">(</span><span class="ident" id="7698132">bytes</span><span class="op" id="7698137">.</span><span class="ident" id="7698138">NewReader</span><span class="op" id="7698147">(</span><span class="ident" id="7698148">buf</span><span class="op" id="7698151">)</span><span class="op" id="7698152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698156">if</span>&nbsp;<span class="ident" id="7698159">x</span>&nbsp;<span class="op" id="7698161">!=</span>&nbsp;<span class="num" id="7698164">0</span>&nbsp;<span class="op" id="7698166">||</span>&nbsp;<span class="ident" id="7698169">err</span>&nbsp;<span class="op" id="7698173">!=</span>&nbsp;<span class="ident" id="7698176">io</span><span class="op" id="7698178">.</span><span class="ident" id="7698179">EOF</span>&nbsp;<span class="op" id="7698183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698188">t</span><span class="op" id="7698189">.</span><span class="ident" id="7698190">Errorf</span><span class="op" id="7698196">(</span><span class="string" id="7698197">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7698236">,</span>&nbsp;<span class="ident" id="7698238">buf</span><span class="op" id="7698241">,</span>&nbsp;<span class="ident" id="7698243">x</span><span class="op" id="7698244">,</span>&nbsp;<span class="ident" id="7698246">err</span><span class="op" id="7698249">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698256">}</span><br>
<span class="lineno"></span><span class="op" id="7698258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7698261">func</span>&nbsp;<span class="ident" id="7698266">testOverflow</span><span class="op" id="7698278">(</span><span class="ident" id="7698279">t</span>&nbsp;<span class="op" id="7698281">*</span><span class="ident" id="7698282">testing</span><span class="op" id="7698289">.</span><span class="ident" id="7698290">T</span><span class="op" id="7698291">,</span>&nbsp;<span class="ident" id="7698293">buf</span>&nbsp;<span class="op" id="7698297">[</span><span class="op" id="7698298">]</span><span class="builtintype" id="7698299">byte</span><span class="op" id="7698303">,</span>&nbsp;<span class="ident" id="7698305">n0</span>&nbsp;<span class="builtintype" id="7698308">int</span><span class="op" id="7698311">,</span>&nbsp;<span class="ident" id="7698313">err0</span>&nbsp;<span class="builtintype" id="7698318">error</span><span class="op" id="7698323">)</span>&nbsp;<span class="op" id="7698325">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698328">x</span><span class="op" id="7698329">,</span>&nbsp;<span class="ident" id="7698331">n</span>&nbsp;<span class="op" id="7698333">:=</span>&nbsp;<span class="ident" id="7698336">Uvarint</span><span class="op" id="7698343">(</span><span class="ident" id="7698344">buf</span><span class="op" id="7698347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698350">if</span>&nbsp;<span class="ident" id="7698353">x</span>&nbsp;<span class="op" id="7698355">!=</span>&nbsp;<span class="num" id="7698358">0</span>&nbsp;<span class="op" id="7698360">||</span>&nbsp;<span class="ident" id="7698363">n</span>&nbsp;<span class="op" id="7698365">!=</span>&nbsp;<span class="ident" id="7698368">n0</span>&nbsp;<span class="op" id="7698371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698375">t</span><span class="op" id="7698376">.</span><span class="ident" id="7698377">Errorf</span><span class="op" id="7698383">(</span><span class="string" id="7698384">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7698429">,</span>&nbsp;<span class="ident" id="7698431">buf</span><span class="op" id="7698434">,</span>&nbsp;<span class="ident" id="7698436">x</span><span class="op" id="7698437">,</span>&nbsp;<span class="ident" id="7698439">n</span><span class="op" id="7698440">,</span>&nbsp;<span class="ident" id="7698442">n0</span><span class="op" id="7698444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698451">x</span><span class="op" id="7698452">,</span>&nbsp;<span class="ident" id="7698454">err</span>&nbsp;<span class="op" id="7698458">:=</span>&nbsp;<span class="ident" id="7698461">ReadUvarint</span><span class="op" id="7698472">(</span><span class="ident" id="7698473">bytes</span><span class="op" id="7698478">.</span><span class="ident" id="7698479">NewReader</span><span class="op" id="7698488">(</span><span class="ident" id="7698489">buf</span><span class="op" id="7698492">)</span><span class="op" id="7698493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698496">if</span>&nbsp;<span class="ident" id="7698499">x</span>&nbsp;<span class="op" id="7698501">!=</span>&nbsp;<span class="num" id="7698504">0</span>&nbsp;<span class="op" id="7698506">||</span>&nbsp;<span class="ident" id="7698509">err</span>&nbsp;<span class="op" id="7698513">!=</span>&nbsp;<span class="ident" id="7698516">err0</span>&nbsp;<span class="op" id="7698521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698525">t</span><span class="op" id="7698526">.</span><span class="ident" id="7698527">Errorf</span><span class="op" id="7698533">(</span><span class="string" id="7698534">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7698585">,</span>&nbsp;<span class="ident" id="7698587">buf</span><span class="op" id="7698590">,</span>&nbsp;<span class="ident" id="7698592">x</span><span class="op" id="7698593">,</span>&nbsp;<span class="ident" id="7698595">err</span><span class="op" id="7698598">,</span>&nbsp;<span class="ident" id="7698600">err0</span><span class="op" id="7698604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698607">}</span><br>
<span class="lineno"></span><span class="op" id="7698609">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7698612">func</span>&nbsp;<span class="ident" id="7698617">TestOverflow</span><span class="op" id="7698629">(</span><span class="ident" id="7698630">t</span>&nbsp;<span class="op" id="7698632">*</span><span class="ident" id="7698633">testing</span><span class="op" id="7698640">.</span><span class="ident" id="7698641">T</span><span class="op" id="7698642">)</span>&nbsp;<span class="op" id="7698644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698647">testOverflow</span><span class="op" id="7698659">(</span><span class="ident" id="7698660">t</span><span class="op" id="7698661">,</span>&nbsp;<span class="op" id="7698663">[</span><span class="op" id="7698664">]</span><span class="builtintype" id="7698665">byte</span><span class="op" id="7698669">{</span><span class="num" id="7698670">0x80</span><span class="op" id="7698674">,</span>&nbsp;<span class="num" id="7698676">0x80</span><span class="op" id="7698680">,</span>&nbsp;<span class="num" id="7698682">0x80</span><span class="op" id="7698686">,</span>&nbsp;<span class="num" id="7698688">0x80</span><span class="op" id="7698692">,</span>&nbsp;<span class="num" id="7698694">0x80</span><span class="op" id="7698698">,</span>&nbsp;<span class="num" id="7698700">0x80</span><span class="op" id="7698704">,</span>&nbsp;<span class="num" id="7698706">0x80</span><span class="op" id="7698710">,</span>&nbsp;<span class="num" id="7698712">0x80</span><span class="op" id="7698716">,</span>&nbsp;<span class="num" id="7698718">0x80</span><span class="op" id="7698722">,</span>&nbsp;<span class="num" id="7698724">0x2</span><span class="op" id="7698727">}</span><span class="op" id="7698728">,</span>&nbsp;<span class="op" id="7698730">-</span><span class="num" id="7698731">10</span><span class="op" id="7698733">,</span>&nbsp;<span class="ident" id="7698735">overflow</span><span class="op" id="7698743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698746">testOverflow</span><span class="op" id="7698758">(</span><span class="ident" id="7698759">t</span><span class="op" id="7698760">,</span>&nbsp;<span class="op" id="7698762">[</span><span class="op" id="7698763">]</span><span class="builtintype" id="7698764">byte</span><span class="op" id="7698768">{</span><span class="num" id="7698769">0x80</span><span class="op" id="7698773">,</span>&nbsp;<span class="num" id="7698775">0x80</span><span class="op" id="7698779">,</span>&nbsp;<span class="num" id="7698781">0x80</span><span class="op" id="7698785">,</span>&nbsp;<span class="num" id="7698787">0x80</span><span class="op" id="7698791">,</span>&nbsp;<span class="num" id="7698793">0x80</span><span class="op" id="7698797">,</span>&nbsp;<span class="num" id="7698799">0x80</span><span class="op" id="7698803">,</span>&nbsp;<span class="num" id="7698805">0x80</span><span class="op" id="7698809">,</span>&nbsp;<span class="num" id="7698811">0x80</span><span class="op" id="7698815">,</span>&nbsp;<span class="num" id="7698817">0x80</span><span class="op" id="7698821">,</span>&nbsp;<span class="num" id="7698823">0x80</span><span class="op" id="7698827">,</span>&nbsp;<span class="num" id="7698829">0x80</span><span class="op" id="7698833">,</span>&nbsp;<span class="num" id="7698835">0x80</span><span class="op" id="7698839">,</span>&nbsp;<span class="num" id="7698841">0x1</span><span class="op" id="7698844">,</span>&nbsp;<span class="num" id="7698846">0</span><span class="op" id="7698847">,</span>&nbsp;<span class="num" id="7698849">0</span><span class="op" id="7698850">}</span><span class="op" id="7698851">,</span>&nbsp;<span class="op" id="7698853">-</span><span class="num" id="7698854">13</span><span class="op" id="7698856">,</span>&nbsp;<span class="ident" id="7698858">overflow</span><span class="op" id="7698866">)</span><br>
<span class="lineno"></span><span class="op" id="7698868">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7698871">func</span>&nbsp;<span class="ident" id="7698876">TestNonCanonicalZero</span><span class="op" id="7698896">(</span><span class="ident" id="7698897">t</span>&nbsp;<span class="op" id="7698899">*</span><span class="ident" id="7698900">testing</span><span class="op" id="7698907">.</span><span class="ident" id="7698908">T</span><span class="op" id="7698909">)</span>&nbsp;<span class="op" id="7698911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698914">buf</span>&nbsp;<span class="op" id="7698918">:=</span>&nbsp;<span class="op" id="7698921">[</span><span class="op" id="7698922">]</span><span class="builtintype" id="7698923">byte</span><span class="op" id="7698927">{</span><span class="num" id="7698928">0x80</span><span class="op" id="7698932">,</span>&nbsp;<span class="num" id="7698934">0x80</span><span class="op" id="7698938">,</span>&nbsp;<span class="num" id="7698940">0x80</span><span class="op" id="7698944">,</span>&nbsp;<span class="num" id="7698946">0</span><span class="op" id="7698947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698950">x</span><span class="op" id="7698951">,</span>&nbsp;<span class="ident" id="7698953">n</span>&nbsp;<span class="op" id="7698955">:=</span>&nbsp;<span class="ident" id="7698958">Uvarint</span><span class="op" id="7698965">(</span><span class="ident" id="7698966">buf</span><span class="op" id="7698969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698972">if</span>&nbsp;<span class="ident" id="7698975">x</span>&nbsp;<span class="op" id="7698977">!=</span>&nbsp;<span class="num" id="7698980">0</span>&nbsp;<span class="op" id="7698982">||</span>&nbsp;<span class="ident" id="7698985">n</span>&nbsp;<span class="op" id="7698987">!=</span>&nbsp;<span class="num" id="7698990">4</span>&nbsp;<span class="op" id="7698992">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698996">t</span><span class="op" id="7698997">.</span><span class="ident" id="7698998">Errorf</span><span class="op" id="7699004">(</span><span class="string" id="7699005">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7699049">,</span>&nbsp;<span class="ident" id="7699051">buf</span><span class="op" id="7699054">,</span>&nbsp;<span class="ident" id="7699056">x</span><span class="op" id="7699057">,</span>&nbsp;<span class="ident" id="7699059">n</span><span class="op" id="7699060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699064">}</span><br>
<span class="lineno"></span><span class="op" id="7699066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7699069">func</span>&nbsp;<span class="ident" id="7699074">BenchmarkPutUvarint32</span><span class="op" id="7699095">(</span><span class="ident" id="7699096">b</span>&nbsp;<span class="op" id="7699098">*</span><span class="ident" id="7699099">testing</span><span class="op" id="7699106">.</span><span class="ident" id="7699107">B</span><span class="op" id="7699108">)</span>&nbsp;<span class="op" id="7699110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699113">buf</span>&nbsp;<span class="op" id="7699117">:=</span>&nbsp;<span class="builtinfunc" id="7699120">make</span><span class="op" id="7699124">(</span><span class="op" id="7699125">[</span><span class="op" id="7699126">]</span><span class="builtintype" id="7699127">byte</span><span class="op" id="7699131">,</span>&nbsp;<span class="ident" id="7699133">MaxVarintLen32</span><span class="op" id="7699147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699150">b</span><span class="op" id="7699151">.</span><span class="ident" id="7699152">SetBytes</span><span class="op" id="7699160">(</span><span class="num" id="7699161">4</span><span class="op" id="7699162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699165">for</span>&nbsp;<span class="ident" id="7699169">i</span>&nbsp;<span class="op" id="7699171">:=</span>&nbsp;<span class="num" id="7699174">0</span><span class="op" id="7699175">;</span>&nbsp;<span class="ident" id="7699177">i</span>&nbsp;<span class="op" id="7699179">&lt;</span>&nbsp;<span class="ident" id="7699181">b</span><span class="op" id="7699182">.</span><span class="ident" id="7699183">N</span><span class="op" id="7699184">;</span>&nbsp;<span class="ident" id="7699186">i</span><span class="op" id="7699187">++</span>&nbsp;<span class="op" id="7699190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699194">for</span>&nbsp;<span class="ident" id="7699198">j</span>&nbsp;<span class="op" id="7699200">:=</span>&nbsp;<span class="builtintype" id="7699203">uint</span><span class="op" id="7699207">(</span><span class="num" id="7699208">0</span><span class="op" id="7699209">)</span><span class="op" id="7699210">;</span>&nbsp;<span class="ident" id="7699212">j</span>&nbsp;<span class="op" id="7699214">&lt;</span>&nbsp;<span class="ident" id="7699216">MaxVarintLen32</span><span class="op" id="7699230">;</span>&nbsp;<span class="ident" id="7699232">j</span><span class="op" id="7699233">++</span>&nbsp;<span class="op" id="7699236">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699241">PutUvarint</span><span class="op" id="7699251">(</span><span class="ident" id="7699252">buf</span><span class="op" id="7699255">,</span>&nbsp;<span class="num" id="7699257">1</span><span class="op" id="7699258">&lt;&lt;</span><span class="op" id="7699260">(</span><span class="ident" id="7699261">j</span><span class="op" id="7699262">*</span><span class="num" id="7699263">7</span><span class="op" id="7699264">)</span><span class="op" id="7699265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699272">}</span><br>
<span class="lineno"></span><span class="op" id="7699274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7699277">func</span>&nbsp;<span class="ident" id="7699282">BenchmarkPutUvarint64</span><span class="op" id="7699303">(</span><span class="ident" id="7699304">b</span>&nbsp;<span class="op" id="7699306">*</span><span class="ident" id="7699307">testing</span><span class="op" id="7699314">.</span><span class="ident" id="7699315">B</span><span class="op" id="7699316">)</span>&nbsp;<span class="op" id="7699318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699321">buf</span>&nbsp;<span class="op" id="7699325">:=</span>&nbsp;<span class="builtinfunc" id="7699328">make</span><span class="op" id="7699332">(</span><span class="op" id="7699333">[</span><span class="op" id="7699334">]</span><span class="builtintype" id="7699335">byte</span><span class="op" id="7699339">,</span>&nbsp;<span class="ident" id="7699341">MaxVarintLen64</span><span class="op" id="7699355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699358">b</span><span class="op" id="7699359">.</span><span class="ident" id="7699360">SetBytes</span><span class="op" id="7699368">(</span><span class="num" id="7699369">8</span><span class="op" id="7699370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699373">for</span>&nbsp;<span class="ident" id="7699377">i</span>&nbsp;<span class="op" id="7699379">:=</span>&nbsp;<span class="num" id="7699382">0</span><span class="op" id="7699383">;</span>&nbsp;<span class="ident" id="7699385">i</span>&nbsp;<span class="op" id="7699387">&lt;</span>&nbsp;<span class="ident" id="7699389">b</span><span class="op" id="7699390">.</span><span class="ident" id="7699391">N</span><span class="op" id="7699392">;</span>&nbsp;<span class="ident" id="7699394">i</span><span class="op" id="7699395">++</span>&nbsp;<span class="op" id="7699398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699402">for</span>&nbsp;<span class="ident" id="7699406">j</span>&nbsp;<span class="op" id="7699408">:=</span>&nbsp;<span class="builtintype" id="7699411">uint</span><span class="op" id="7699415">(</span><span class="num" id="7699416">0</span><span class="op" id="7699417">)</span><span class="op" id="7699418">;</span>&nbsp;<span class="ident" id="7699420">j</span>&nbsp;<span class="op" id="7699422">&lt;</span>&nbsp;<span class="ident" id="7699424">MaxVarintLen64</span><span class="op" id="7699438">;</span>&nbsp;<span class="ident" id="7699440">j</span><span class="op" id="7699441">++</span>&nbsp;<span class="op" id="7699444">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699449">PutUvarint</span><span class="op" id="7699459">(</span><span class="ident" id="7699460">buf</span><span class="op" id="7699463">,</span>&nbsp;<span class="num" id="7699465">1</span><span class="op" id="7699466">&lt;&lt;</span><span class="op" id="7699468">(</span><span class="ident" id="7699469">j</span><span class="op" id="7699470">*</span><span class="num" id="7699471">7</span><span class="op" id="7699472">)</span><span class="op" id="7699473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699480">}</span><br>
<span class="lineno"></span><span class="op" id="7699482">}</span>
</div>
</body>
</html>
