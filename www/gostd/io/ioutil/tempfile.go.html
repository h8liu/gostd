<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html" class="current">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3768490">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3768546">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3768600">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3768651">package</span>&nbsp;<span class="ident" id="3768659">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3768667">import</span>&nbsp;<span class="op" id="3768674">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3768677">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3768683">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3768700">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3768711">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3768719">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3768726">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3768729">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3768753">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3768819">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3768887">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3768913">var</span>&nbsp;<span class="ident" id="3768917">rand</span>&nbsp;<span class="builtintype" id="3768922">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3768929">var</span>&nbsp;<span class="ident" id="3768933">randmu</span>&nbsp;<span class="ident" id="3768940"><a href="/gostd/io/ioutil/tempfile.go.html#3768711">sync</a></span><span class="op" id="3768944">.</span><span class="ident" id="3768945"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3768952">func</span>&nbsp;<span class="ident" id="3768957">reseed</span><span class="op" id="3768963">(</span><span class="op" id="3768964">)</span>&nbsp;<span class="builtintype" id="3768966">uint32</span>&nbsp;<span class="op" id="3768973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3768976">return</span>&nbsp;<span class="builtintype" id="3768983">uint32</span><span class="op" id="3768989">(</span><span class="ident" id="3768990"><a href="/gostd/io/ioutil/tempfile.go.html#3768719">time</a></span><span class="op" id="3768994">.</span><span class="ident" id="3768995"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="3768998">(</span><span class="op" id="3768999">)</span><span class="op" id="3769000">.</span><span class="ident" id="3769001"><a href="/gostd/time/time.go.html#2744495">UnixNano</a></span><span class="op" id="3769009">(</span><span class="op" id="3769010">)</span>&nbsp;<span class="op" id="3769012">+</span>&nbsp;<span class="builtintype" id="3769014">int64</span><span class="op" id="3769019">(</span><span class="ident" id="3769020"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3769022">.</span><span class="ident" id="3769023"><a href="/gostd/os/exec.go.html#2435259">Getpid</a></span><span class="op" id="3769029">(</span><span class="op" id="3769030">)</span><span class="op" id="3769031">)</span><span class="op" id="3769032">)</span><br>
<span class="lineno"></span><span class="op" id="3769034">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3769037">func</span>&nbsp;<span class="ident" id="3769042">nextSuffix</span><span class="op" id="3769052">(</span><span class="op" id="3769053">)</span>&nbsp;<span class="builtintype" id="3769055">string</span>&nbsp;<span class="op" id="3769062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769065"><a href="/gostd/io/ioutil/tempfile.go.html#3768933">randmu</a></span><span class="op" id="3769071">.</span><span class="ident" id="3769072"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="3769076">(</span><span class="op" id="3769077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769080">r</span>&nbsp;<span class="op" id="3769082">:=</span>&nbsp;<span class="ident" id="3769085"><a href="/gostd/io/ioutil/tempfile.go.html#3768917">rand</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3769091">if</span>&nbsp;<span class="ident" id="3769094"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span>&nbsp;<span class="op" id="3769096">==</span>&nbsp;<span class="num" id="3769099">0</span>&nbsp;<span class="op" id="3769101">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769105"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span>&nbsp;<span class="op" id="3769107">=</span>&nbsp;<span class="ident" id="3769109"><a href="/gostd/io/ioutil/tempfile.go.html#3768957">reseed</a></span><span class="op" id="3769115">(</span><span class="op" id="3769116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3769119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769122"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span>&nbsp;<span class="op" id="3769124">=</span>&nbsp;<span class="ident" id="3769126"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span><span class="op" id="3769127">*</span><span class="num" id="3769128">1664525</span>&nbsp;<span class="op" id="3769136">+</span>&nbsp;<span class="num" id="3769138">1013904223</span>&nbsp;<span class="comment" id="3769149">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769186"><a href="/gostd/io/ioutil/tempfile.go.html#3768917">rand</a></span>&nbsp;<span class="op" id="3769191">=</span>&nbsp;<span class="ident" id="3769193"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769196"><a href="/gostd/io/ioutil/tempfile.go.html#3768933">randmu</a></span><span class="op" id="3769202">.</span><span class="ident" id="3769203"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="3769209">(</span><span class="op" id="3769210">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3769213">return</span>&nbsp;<span class="ident" id="3769220"><a href="/gostd/io/ioutil/tempfile.go.html#3768700">strconv</a></span><span class="op" id="3769227">.</span><span class="ident" id="3769228"><a href="/gostd/strconv/itoa.go.html#2407288">Itoa</a></span><span class="op" id="3769232">(</span><span class="builtintype" id="3769233">int</span><span class="op" id="3769236">(</span><span class="num" id="3769237">1e9</span>&nbsp;<span class="op" id="3769241">+</span>&nbsp;<span class="ident" id="3769243"><a href="/gostd/io/ioutil/tempfile.go.html#3769080">r</a></span><span class="op" id="3769244">%</span><span class="num" id="3769245">1e9</span><span class="op" id="3769248">)</span><span class="op" id="3769249">)</span><span class="op" id="3769250">[</span><span class="num" id="3769251">1</span><span class="op" id="3769252">:</span><span class="op" id="3769253">]</span><br>
<span class="lineno"></span><span class="op" id="3769255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3769258">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3769320">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3769385">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3769437">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3769504">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3769545">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3769598">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3769661">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3769733">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3769778">func</span>&nbsp;<span class="ident" id="3769783">TempFile</span><span class="op" id="3769791">(</span><span class="ident" id="3769792">dir</span><span class="op" id="3769795">,</span>&nbsp;<span class="ident" id="3769797">prefix</span>&nbsp;<span class="builtintype" id="3769804">string</span><span class="op" id="3769810">)</span>&nbsp;<span class="op" id="3769812">(</span><span class="ident" id="3769813">f</span>&nbsp;<span class="op" id="3769815">*</span><span class="ident" id="3769816"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3769818">.</span><span class="ident" id="3769819"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3769823">,</span>&nbsp;<span class="ident" id="3769825">err</span>&nbsp;<span class="builtintype" id="3769829">error</span><span class="op" id="3769834">)</span>&nbsp;<span class="op" id="3769836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3769839">if</span>&nbsp;<span class="ident" id="3769842"><a href="/gostd/io/ioutil/tempfile.go.html#3769792">dir</a></span>&nbsp;<span class="op" id="3769846">==</span>&nbsp;<span class="string" id="3769849">&#34;&#34;</span>&nbsp;<span class="op" id="3769852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769856"><a href="/gostd/io/ioutil/tempfile.go.html#3769792">dir</a></span>&nbsp;<span class="op" id="3769860">=</span>&nbsp;<span class="ident" id="3769862"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3769864">.</span><span class="ident" id="3769865"><a href="/gostd/os/file_unix.go.html#2460659">TempDir</a></span><span class="op" id="3769872">(</span><span class="op" id="3769873">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3769876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769880">nconflict</span>&nbsp;<span class="op" id="3769890">:=</span>&nbsp;<span class="num" id="3769893">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3769896">for</span>&nbsp;<span class="ident" id="3769900">i</span>&nbsp;<span class="op" id="3769902">:=</span>&nbsp;<span class="num" id="3769905">0</span><span class="op" id="3769906">;</span>&nbsp;<span class="ident" id="3769908"><a href="/gostd/io/ioutil/tempfile.go.html#3769900">i</a></span>&nbsp;<span class="op" id="3769910">&lt;</span>&nbsp;<span class="num" id="3769912">10000</span><span class="op" id="3769917">;</span>&nbsp;<span class="ident" id="3769919"><a href="/gostd/io/ioutil/tempfile.go.html#3769900">i</a></span><span class="op" id="3769920">++</span>&nbsp;<span class="op" id="3769923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769927">name</span>&nbsp;<span class="op" id="3769932">:=</span>&nbsp;<span class="ident" id="3769935"><a href="/gostd/io/ioutil/tempfile.go.html#3768683">filepath</a></span><span class="op" id="3769943">.</span><span class="ident" id="3769944"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="3769948">(</span><span class="ident" id="3769949"><a href="/gostd/io/ioutil/tempfile.go.html#3769792">dir</a></span><span class="op" id="3769952">,</span>&nbsp;<span class="ident" id="3769954"><a href="/gostd/io/ioutil/tempfile.go.html#3769797">prefix</a></span><span class="op" id="3769960">+</span><span class="ident" id="3769961"><a href="/gostd/io/ioutil/tempfile.go.html#3769042">nextSuffix</a></span><span class="op" id="3769971">(</span><span class="op" id="3769972">)</span><span class="op" id="3769973">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3769977"><a href="/gostd/io/ioutil/tempfile.go.html#3769813">f</a></span><span class="op" id="3769978">,</span>&nbsp;<span class="ident" id="3769980"><a href="/gostd/io/ioutil/tempfile.go.html#3769825">err</a></span>&nbsp;<span class="op" id="3769984">=</span>&nbsp;<span class="ident" id="3769986"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3769988">.</span><span class="ident" id="3769989"><a href="/gostd/os/file_unix.go.html#2454095">OpenFile</a></span><span class="op" id="3769997">(</span><span class="ident" id="3769998"><a href="/gostd/io/ioutil/tempfile.go.html#3769927">name</a></span><span class="op" id="3770002">,</span>&nbsp;<span class="ident" id="3770004"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770006">.</span><span class="ident" id="3770007"><a href="/gostd/os/file.go.html#2442177">O_RDWR</a></span><span class="op" id="3770013">|</span><span class="ident" id="3770014"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770016">.</span><span class="ident" id="3770017"><a href="/gostd/os/file.go.html#2442313">O_CREATE</a></span><span class="op" id="3770025">|</span><span class="ident" id="3770026"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770028">.</span><span class="ident" id="3770029"><a href="/gostd/os/file.go.html#2442383">O_EXCL</a></span><span class="op" id="3770035">,</span>&nbsp;<span class="num" id="3770037">0600</span><span class="op" id="3770041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770045">if</span>&nbsp;<span class="ident" id="3770048"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770050">.</span><span class="ident" id="3770051"><a href="/gostd/os/error.go.html#2431784">IsExist</a></span><span class="op" id="3770058">(</span><span class="ident" id="3770059"><a href="/gostd/io/ioutil/tempfile.go.html#3769825">err</a></span><span class="op" id="3770062">)</span>&nbsp;<span class="op" id="3770064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770069">if</span>&nbsp;<span class="ident" id="3770072"><a href="/gostd/io/ioutil/tempfile.go.html#3769880">nconflict</a></span><span class="op" id="3770081">++</span><span class="op" id="3770083">;</span>&nbsp;<span class="ident" id="3770085"><a href="/gostd/io/ioutil/tempfile.go.html#3769880">nconflict</a></span>&nbsp;<span class="op" id="3770095">&gt;</span>&nbsp;<span class="num" id="3770097">10</span>&nbsp;<span class="op" id="3770100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770106"><a href="/gostd/io/ioutil/tempfile.go.html#3768917">rand</a></span>&nbsp;<span class="op" id="3770111">=</span>&nbsp;<span class="ident" id="3770113"><a href="/gostd/io/ioutil/tempfile.go.html#3768957">reseed</a></span><span class="op" id="3770119">(</span><span class="op" id="3770120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770125">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770130">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770145">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770155">return</span><br>
<span class="lineno">65</span><span class="op" id="3770162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3770165">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3770231">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3770296">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3770360">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3770419">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3770471">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3770545">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3770595">func</span>&nbsp;<span class="ident" id="3770600">TempDir</span><span class="op" id="3770607">(</span><span class="ident" id="3770608">dir</span><span class="op" id="3770611">,</span>&nbsp;<span class="ident" id="3770613">prefix</span>&nbsp;<span class="builtintype" id="3770620">string</span><span class="op" id="3770626">)</span>&nbsp;<span class="op" id="3770628">(</span><span class="ident" id="3770629">name</span>&nbsp;<span class="builtintype" id="3770634">string</span><span class="op" id="3770640">,</span>&nbsp;<span class="ident" id="3770642">err</span>&nbsp;<span class="builtintype" id="3770646">error</span><span class="op" id="3770651">)</span>&nbsp;<span class="op" id="3770653">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770656">if</span>&nbsp;<span class="ident" id="3770659"><a href="/gostd/io/ioutil/tempfile.go.html#3770608">dir</a></span>&nbsp;<span class="op" id="3770663">==</span>&nbsp;<span class="string" id="3770666">&#34;&#34;</span>&nbsp;<span class="op" id="3770669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770673"><a href="/gostd/io/ioutil/tempfile.go.html#3770608">dir</a></span>&nbsp;<span class="op" id="3770677">=</span>&nbsp;<span class="ident" id="3770679"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770681">.</span><span class="ident" id="3770682"><a href="/gostd/os/file_unix.go.html#2460659">TempDir</a></span><span class="op" id="3770689">(</span><span class="op" id="3770690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770697">nconflict</span>&nbsp;<span class="op" id="3770707">:=</span>&nbsp;<span class="num" id="3770710">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770713">for</span>&nbsp;<span class="ident" id="3770717">i</span>&nbsp;<span class="op" id="3770719">:=</span>&nbsp;<span class="num" id="3770722">0</span><span class="op" id="3770723">;</span>&nbsp;<span class="ident" id="3770725"><a href="/gostd/io/ioutil/tempfile.go.html#3770717">i</a></span>&nbsp;<span class="op" id="3770727">&lt;</span>&nbsp;<span class="num" id="3770729">10000</span><span class="op" id="3770734">;</span>&nbsp;<span class="ident" id="3770736"><a href="/gostd/io/ioutil/tempfile.go.html#3770717">i</a></span><span class="op" id="3770737">++</span>&nbsp;<span class="op" id="3770740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770744">try</span>&nbsp;<span class="op" id="3770748">:=</span>&nbsp;<span class="ident" id="3770751"><a href="/gostd/io/ioutil/tempfile.go.html#3768683">filepath</a></span><span class="op" id="3770759">.</span><span class="ident" id="3770760"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="3770764">(</span><span class="ident" id="3770765"><a href="/gostd/io/ioutil/tempfile.go.html#3770608">dir</a></span><span class="op" id="3770768">,</span>&nbsp;<span class="ident" id="3770770"><a href="/gostd/io/ioutil/tempfile.go.html#3770613">prefix</a></span><span class="op" id="3770776">+</span><span class="ident" id="3770777"><a href="/gostd/io/ioutil/tempfile.go.html#3769042">nextSuffix</a></span><span class="op" id="3770787">(</span><span class="op" id="3770788">)</span><span class="op" id="3770789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770793"><a href="/gostd/io/ioutil/tempfile.go.html#3770642">err</a></span>&nbsp;<span class="op" id="3770797">=</span>&nbsp;<span class="ident" id="3770799"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770801">.</span><span class="ident" id="3770802"><a href="/gostd/os/file.go.html#2445908">Mkdir</a></span><span class="op" id="3770807">(</span><span class="ident" id="3770808"><a href="/gostd/io/ioutil/tempfile.go.html#3770744">try</a></span><span class="op" id="3770811">,</span>&nbsp;<span class="num" id="3770813">0700</span><span class="op" id="3770817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770821">if</span>&nbsp;<span class="ident" id="3770824"><a href="/gostd/io/ioutil/tempfile.go.html#3768677">os</a></span><span class="op" id="3770826">.</span><span class="ident" id="3770827"><a href="/gostd/os/error.go.html#2431784">IsExist</a></span><span class="op" id="3770834">(</span><span class="ident" id="3770835"><a href="/gostd/io/ioutil/tempfile.go.html#3770642">err</a></span><span class="op" id="3770838">)</span>&nbsp;<span class="op" id="3770840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770845">if</span>&nbsp;<span class="ident" id="3770848"><a href="/gostd/io/ioutil/tempfile.go.html#3770697">nconflict</a></span><span class="op" id="3770857">++</span><span class="op" id="3770859">;</span>&nbsp;<span class="ident" id="3770861"><a href="/gostd/io/ioutil/tempfile.go.html#3770697">nconflict</a></span>&nbsp;<span class="op" id="3770871">&gt;</span>&nbsp;<span class="num" id="3770873">10</span>&nbsp;<span class="op" id="3770876">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770882"><a href="/gostd/io/ioutil/tempfile.go.html#3768917">rand</a></span>&nbsp;<span class="op" id="3770887">=</span>&nbsp;<span class="ident" id="3770889"><a href="/gostd/io/ioutil/tempfile.go.html#3768957">reseed</a></span><span class="op" id="3770895">(</span><span class="op" id="3770896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770906">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770921">if</span>&nbsp;<span class="ident" id="3770924"><a href="/gostd/io/ioutil/tempfile.go.html#3770642">err</a></span>&nbsp;<span class="op" id="3770928">==</span>&nbsp;<span class="builtintype" id="3770931">nil</span>&nbsp;<span class="op" id="3770935">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3770940"><a href="/gostd/io/ioutil/tempfile.go.html#3770629">name</a></span>&nbsp;<span class="op" id="3770945">=</span>&nbsp;<span class="ident" id="3770947"><a href="/gostd/io/ioutil/tempfile.go.html#3770744">try</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770957">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3770964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3770967">return</span><br>
<span class="lineno">95</span><span class="op" id="3770974">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
