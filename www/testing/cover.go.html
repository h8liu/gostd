<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6472126">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6472181">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6472235">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6472286">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6472317">package</span>&nbsp;<span class="ident" id="6472325">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6472334">import</span>&nbsp;<span class="op" id="6472341">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472344">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472351">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6472357">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="6472371">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6472374">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="6472440">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6472519">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6472584">type</span>&nbsp;<span class="ident" id="6472589">CoverBlock</span>&nbsp;<span class="keyword" id="6472600">struct</span>&nbsp;<span class="op" id="6472607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472610">Line0</span>&nbsp;<span class="builtintype" id="6472616">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472624">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="6472630">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472638">Line1</span>&nbsp;<span class="builtintype" id="6472644">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472652">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="6472658">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472666">Stmts</span>&nbsp;<span class="builtintype" id="6472672">uint16</span><br>
<span class="lineno"></span><span class="op" id="6472679">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6472682">var</span>&nbsp;<span class="ident" id="6472686">cover</span>&nbsp;<span class="ident" id="6472692"><a href="/testing/cover.go.html#6472907">Cover</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6472699">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="6472758">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="6472837">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6472902">type</span>&nbsp;<span class="ident" id="6472907">Cover</span>&nbsp;<span class="keyword" id="6472913">struct</span>&nbsp;<span class="op" id="6472920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472923">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6472939">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472947">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6472963">map</span><span class="op" id="6472966">[</span><span class="builtintype" id="6472967">string</span><span class="op" id="6472973">]</span><span class="op" id="6472974">[</span><span class="op" id="6472975">]</span><span class="builtintype" id="6472976">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472984">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6473000">map</span><span class="op" id="6473003">[</span><span class="builtintype" id="6473004">string</span><span class="op" id="6473010">]</span><span class="op" id="6473011">[</span><span class="op" id="6473012">]</span><span class="ident" id="6473013"><a href="/testing/cover.go.html#6472589">CoverBlock</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473025">CoveredPackages</span>&nbsp;<span class="builtintype" id="6473041">string</span><br>
<span class="lineno"></span><span class="op" id="6473048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6473051">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="6473132">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="6473183">//</span><br>
<span class="lineno"></span><span class="comment" id="6473186">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6473273">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="6473348">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6473425">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="6473445">func</span>&nbsp;<span class="ident" id="6473450">Coverage</span><span class="op" id="6473458">(</span><span class="op" id="6473459">)</span>&nbsp;<span class="builtintype" id="6473461">float64</span>&nbsp;<span class="op" id="6473469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473472">var</span>&nbsp;<span class="ident" id="6473476">n</span><span class="op" id="6473477">,</span>&nbsp;<span class="ident" id="6473479">d</span>&nbsp;<span class="ident" id="6473481">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473488">for</span>&nbsp;<span class="ident" id="6473492">_</span><span class="op" id="6473493">,</span>&nbsp;<span class="ident" id="6473495">counters</span>&nbsp;<span class="op" id="6473504">:=</span>&nbsp;<span class="keyword" id="6473507">range</span>&nbsp;<span class="ident" id="6473513"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6473518">.</span><span class="ident" id="6473519">Counters</span>&nbsp;<span class="op" id="6473528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473532">for</span>&nbsp;<span class="ident" id="6473536">i</span>&nbsp;<span class="op" id="6473538">:=</span>&nbsp;<span class="keyword" id="6473541">range</span>&nbsp;<span class="ident" id="6473547"><a href="/testing/cover.go.html#6473495">counters</a></span>&nbsp;<span class="op" id="6473556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473561">if</span>&nbsp;<span class="ident" id="6473564"><a href="/testing/cover.go.html#6472357">atomic</a></span><span class="op" id="6473570">.</span><span class="ident" id="6473571">LoadUint32</span><span class="op" id="6473581">(</span><span class="op" id="6473582">&amp;</span><span class="ident" id="6473583"><a href="/testing/cover.go.html#6473495">counters</a></span><span class="op" id="6473591">[</span><span class="ident" id="6473592"><a href="/testing/cover.go.html#6473536">i</a></span><span class="op" id="6473593">]</span><span class="op" id="6473594">)</span>&nbsp;<span class="op" id="6473596">&gt;</span>&nbsp;<span class="num" id="6473598">0</span>&nbsp;<span class="op" id="6473600">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473606"><a href="/testing/cover.go.html#6473476">n</a></span><span class="op" id="6473607">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473618"><a href="/testing/cover.go.html#6473479">d</a></span><span class="op" id="6473619">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473627">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473630">if</span>&nbsp;<span class="ident" id="6473633"><a href="/testing/cover.go.html#6473479">d</a></span>&nbsp;<span class="op" id="6473635">==</span>&nbsp;<span class="num" id="6473638">0</span>&nbsp;<span class="op" id="6473640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473644">return</span>&nbsp;<span class="num" id="6473651">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473657">return</span>&nbsp;<span class="builtintype" id="6473664">float64</span><span class="op" id="6473671">(</span><span class="ident" id="6473672"><a href="/testing/cover.go.html#6473476">n</a></span><span class="op" id="6473673">)</span>&nbsp;<span class="op" id="6473675">/</span>&nbsp;<span class="builtintype" id="6473677">float64</span><span class="op" id="6473684">(</span><span class="ident" id="6473685"><a href="/testing/cover.go.html#6473479">d</a></span><span class="op" id="6473686">)</span><br>
<span class="lineno"></span><span class="op" id="6473688">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6473691">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="6473762">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6473843">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6473908">func</span>&nbsp;<span class="ident" id="6473913">RegisterCover</span><span class="op" id="6473926">(</span><span class="ident" id="6473927">c</span>&nbsp;<span class="ident" id="6473929"><a href="/testing/cover.go.html#6472907">Cover</a></span><span class="op" id="6473934">)</span>&nbsp;<span class="op" id="6473936">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473939"><a href="/testing/cover.go.html#6472686">cover</a></span>&nbsp;<span class="op" id="6473945">=</span>&nbsp;<span class="ident" id="6473947"><a href="/testing/cover.go.html#6473927">c</a></span><br>
<span class="lineno"></span><span class="op" id="6473949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6473952">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="6474021">func</span>&nbsp;<span class="ident" id="6474026">mustBeNil</span><span class="op" id="6474035">(</span><span class="ident" id="6474036">err</span>&nbsp;<span class="builtintype" id="6474040">error</span><span class="op" id="6474045">)</span>&nbsp;<span class="op" id="6474047">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474050">if</span>&nbsp;<span class="ident" id="6474053"><a href="/testing/cover.go.html#6474036">err</a></span>&nbsp;<span class="op" id="6474057">!=</span>&nbsp;<span class="ident" id="6474060">nil</span>&nbsp;<span class="op" id="6474064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474068"><a href="/testing/cover.go.html#6472344">fmt</a></span><span class="op" id="6474071">.</span><span class="ident" id="6474072">Fprintf</span><span class="op" id="6474079">(</span><span class="ident" id="6474080"><a href="/testing/cover.go.html#6472351">os</a></span><span class="op" id="6474082">.</span><span class="ident" id="6474083">Stderr</span><span class="op" id="6474089">,</span>&nbsp;<span class="string" id="6474091">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6474106">,</span>&nbsp;<span class="ident" id="6474108"><a href="/testing/cover.go.html#6474036">err</a></span><span class="op" id="6474111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474115"><a href="/testing/cover.go.html#6472351">os</a></span><span class="op" id="6474117">.</span><span class="ident" id="6474118">Exit</span><span class="op" id="6474122">(</span><span class="num" id="6474123">2</span><span class="op" id="6474124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474127">}</span><br>
<span class="lineno"></span><span class="op" id="6474129">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6474132">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="6474223">func</span>&nbsp;<span class="ident" id="6474228">coverReport</span><span class="op" id="6474239">(</span><span class="op" id="6474240">)</span>&nbsp;<span class="op" id="6474242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474245">var</span>&nbsp;<span class="ident" id="6474249">f</span>&nbsp;<span class="op" id="6474251">*</span><span class="ident" id="6474252"><a href="/testing/cover.go.html#6472351">os</a></span><span class="op" id="6474254">.</span><span class="ident" id="6474255">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474261">var</span>&nbsp;<span class="ident" id="6474265">err</span>&nbsp;<span class="builtintype" id="6474269">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474276">if</span>&nbsp;<span class="op" id="6474279">*</span><span class="ident" id="6474280"><a href="/testing/testing.go.html#6483340">coverProfile</a></span>&nbsp;<span class="op" id="6474293">!=</span>&nbsp;<span class="string" id="6474296">&#34;&#34;</span>&nbsp;<span class="op" id="6474299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474303"><a href="/testing/cover.go.html#6474249">f</a></span><span class="op" id="6474304">,</span>&nbsp;<span class="ident" id="6474306"><a href="/testing/cover.go.html#6474265">err</a></span>&nbsp;<span class="op" id="6474310">=</span>&nbsp;<span class="ident" id="6474312"><a href="/testing/cover.go.html#6472351">os</a></span><span class="op" id="6474314">.</span><span class="ident" id="6474315">Create</span><span class="op" id="6474321">(</span><span class="ident" id="6474322"><a href="/testing/testing.go.html#6497877">toOutputDir</a></span><span class="op" id="6474333">(</span><span class="op" id="6474334">*</span><span class="ident" id="6474335"><a href="/testing/testing.go.html#6483340">coverProfile</a></span><span class="op" id="6474347">)</span><span class="op" id="6474348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474352"><a href="/testing/cover.go.html#6474026">mustBeNil</a></span><span class="op" id="6474361">(</span><span class="ident" id="6474362"><a href="/testing/cover.go.html#6474265">err</a></span><span class="op" id="6474365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474369"><a href="/testing/cover.go.html#6472344">fmt</a></span><span class="op" id="6474372">.</span><span class="ident" id="6474373">Fprintf</span><span class="op" id="6474380">(</span><span class="ident" id="6474381"><a href="/testing/cover.go.html#6474249">f</a></span><span class="op" id="6474382">,</span>&nbsp;<span class="string" id="6474384">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="6474396">,</span>&nbsp;<span class="ident" id="6474398"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6474403">.</span><span class="ident" id="6474404">Mode</span><span class="op" id="6474408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474412">defer</span>&nbsp;<span class="keyword" id="6474418">func</span><span class="op" id="6474422">(</span><span class="op" id="6474423">)</span>&nbsp;<span class="op" id="6474425">{</span>&nbsp;<span class="ident" id="6474427"><a href="/testing/cover.go.html#6474026">mustBeNil</a></span><span class="op" id="6474436">(</span><span class="ident" id="6474437"><a href="/testing/cover.go.html#6474249">f</a></span><span class="op" id="6474438">.</span><span class="ident" id="6474439">Close</span><span class="op" id="6474444">(</span><span class="op" id="6474445">)</span><span class="op" id="6474446">)</span>&nbsp;<span class="op" id="6474448">}</span><span class="op" id="6474449">(</span><span class="op" id="6474450">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474457">var</span>&nbsp;<span class="ident" id="6474461">active</span><span class="op" id="6474467">,</span>&nbsp;<span class="ident" id="6474469">total</span>&nbsp;<span class="ident" id="6474475">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474482">var</span>&nbsp;<span class="ident" id="6474486">count</span>&nbsp;<span class="builtintype" id="6474492">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474500">for</span>&nbsp;<span class="ident" id="6474504">name</span><span class="op" id="6474508">,</span>&nbsp;<span class="ident" id="6474510">counts</span>&nbsp;<span class="op" id="6474517">:=</span>&nbsp;<span class="keyword" id="6474520">range</span>&nbsp;<span class="ident" id="6474526"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6474531">.</span><span class="ident" id="6474532">Counters</span>&nbsp;<span class="op" id="6474541">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474545">blocks</span>&nbsp;<span class="op" id="6474552">:=</span>&nbsp;<span class="ident" id="6474555"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6474560">.</span><span class="ident" id="6474561">Blocks</span><span class="op" id="6474567">[</span><span class="ident" id="6474568"><a href="/testing/cover.go.html#6474504">name</a></span><span class="op" id="6474572">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474576">for</span>&nbsp;<span class="ident" id="6474580">i</span>&nbsp;<span class="op" id="6474582">:=</span>&nbsp;<span class="keyword" id="6474585">range</span>&nbsp;<span class="ident" id="6474591"><a href="/testing/cover.go.html#6474510">counts</a></span>&nbsp;<span class="op" id="6474598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474603">stmts</span>&nbsp;<span class="op" id="6474609">:=</span>&nbsp;<span class="ident" id="6474612">int64</span><span class="op" id="6474617">(</span><span class="ident" id="6474618"><a href="/testing/cover.go.html#6474545">blocks</a></span><span class="op" id="6474624">[</span><span class="ident" id="6474625"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474626">]</span><span class="op" id="6474627">.</span><span class="ident" id="6474628">Stmts</span><span class="op" id="6474633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474638"><a href="/testing/cover.go.html#6474469">total</a></span>&nbsp;<span class="op" id="6474644">+=</span>&nbsp;<span class="ident" id="6474647"><a href="/testing/cover.go.html#6474603">stmts</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474656"><a href="/testing/cover.go.html#6474486">count</a></span>&nbsp;<span class="op" id="6474662">=</span>&nbsp;<span class="ident" id="6474664"><a href="/testing/cover.go.html#6472357">atomic</a></span><span class="op" id="6474670">.</span><span class="ident" id="6474671">LoadUint32</span><span class="op" id="6474681">(</span><span class="op" id="6474682">&amp;</span><span class="ident" id="6474683"><a href="/testing/cover.go.html#6474510">counts</a></span><span class="op" id="6474689">[</span><span class="ident" id="6474690"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474691">]</span><span class="op" id="6474692">)</span>&nbsp;<span class="comment" id="6474694">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474718">if</span>&nbsp;<span class="ident" id="6474721"><a href="/testing/cover.go.html#6474486">count</a></span>&nbsp;<span class="op" id="6474727">&gt;</span>&nbsp;<span class="num" id="6474729">0</span>&nbsp;<span class="op" id="6474731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474737"><a href="/testing/cover.go.html#6474461">active</a></span>&nbsp;<span class="op" id="6474744">+=</span>&nbsp;<span class="ident" id="6474747"><a href="/testing/cover.go.html#6474603">stmts</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474761">if</span>&nbsp;<span class="ident" id="6474764"><a href="/testing/cover.go.html#6474249">f</a></span>&nbsp;<span class="op" id="6474766">!=</span>&nbsp;<span class="ident" id="6474769">nil</span>&nbsp;<span class="op" id="6474773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474779">_</span><span class="op" id="6474780">,</span>&nbsp;<span class="ident" id="6474782">err</span>&nbsp;<span class="op" id="6474786">:=</span>&nbsp;<span class="ident" id="6474789"><a href="/testing/cover.go.html#6472344">fmt</a></span><span class="op" id="6474792">.</span><span class="ident" id="6474793">Fprintf</span><span class="op" id="6474800">(</span><span class="ident" id="6474801"><a href="/testing/cover.go.html#6474249">f</a></span><span class="op" id="6474802">,</span>&nbsp;<span class="string" id="6474804">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="6474828">,</span>&nbsp;<span class="ident" id="6474830"><a href="/testing/cover.go.html#6474504">name</a></span><span class="op" id="6474834">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474841"><a href="/testing/cover.go.html#6474545">blocks</a></span><span class="op" id="6474847">[</span><span class="ident" id="6474848"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474849">]</span><span class="op" id="6474850">.</span><span class="ident" id="6474851">Line0</span><span class="op" id="6474856">,</span>&nbsp;<span class="ident" id="6474858"><a href="/testing/cover.go.html#6474545">blocks</a></span><span class="op" id="6474864">[</span><span class="ident" id="6474865"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474866">]</span><span class="op" id="6474867">.</span><span class="ident" id="6474868">Col0</span><span class="op" id="6474872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474879"><a href="/testing/cover.go.html#6474545">blocks</a></span><span class="op" id="6474885">[</span><span class="ident" id="6474886"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474887">]</span><span class="op" id="6474888">.</span><span class="ident" id="6474889">Line1</span><span class="op" id="6474894">,</span>&nbsp;<span class="ident" id="6474896"><a href="/testing/cover.go.html#6474545">blocks</a></span><span class="op" id="6474902">[</span><span class="ident" id="6474903"><a href="/testing/cover.go.html#6474580">i</a></span><span class="op" id="6474904">]</span><span class="op" id="6474905">.</span><span class="ident" id="6474906">Col1</span><span class="op" id="6474910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474917"><a href="/testing/cover.go.html#6474603">stmts</a></span><span class="op" id="6474922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474929"><a href="/testing/cover.go.html#6474486">count</a></span><span class="op" id="6474934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474940"><a href="/testing/cover.go.html#6474026">mustBeNil</a></span><span class="op" id="6474949">(</span><span class="ident" id="6474950"><a href="/testing/cover.go.html#6474782">err</a></span><span class="op" id="6474953">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474968">if</span>&nbsp;<span class="ident" id="6474971"><a href="/testing/cover.go.html#6474469">total</a></span>&nbsp;<span class="op" id="6474977">==</span>&nbsp;<span class="num" id="6474980">0</span>&nbsp;<span class="op" id="6474982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474986"><a href="/testing/cover.go.html#6474469">total</a></span>&nbsp;<span class="op" id="6474992">=</span>&nbsp;<span class="num" id="6474994">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475000"><a href="/testing/cover.go.html#6472344">fmt</a></span><span class="op" id="6475003">.</span><span class="ident" id="6475004">Printf</span><span class="op" id="6475010">(</span><span class="string" id="6475011">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="6475047">,</span>&nbsp;<span class="num" id="6475049">100</span><span class="op" id="6475052">*</span><span class="builtintype" id="6475053">float64</span><span class="op" id="6475060">(</span><span class="ident" id="6475061"><a href="/testing/cover.go.html#6474461">active</a></span><span class="op" id="6475067">)</span><span class="op" id="6475068">/</span><span class="builtintype" id="6475069">float64</span><span class="op" id="6475076">(</span><span class="ident" id="6475077"><a href="/testing/cover.go.html#6474469">total</a></span><span class="op" id="6475082">)</span><span class="op" id="6475083">,</span>&nbsp;<span class="ident" id="6475085"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6475090">.</span><span class="ident" id="6475091">CoveredPackages</span><span class="op" id="6475106">)</span><br>
<span class="lineno"></span><span class="op" id="6475108">}</span>
</div>
</body>
</html>
