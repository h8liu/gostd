<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2130294">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2130349">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2130403">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2130454">package</span>&nbsp;<span class="ident" id="2130462">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2130468">//&nbsp;Ldexp&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;Frexp.</span><br>
<span class="lineno"></span><span class="comment" id="2130502">//&nbsp;It&nbsp;returns&nbsp;frac&nbsp;×&nbsp;2**exp.</span><br>
<span class="lineno"></span><span class="comment" id="2130532">//</span><br>
<span class="lineno">10</span><span class="comment" id="2130535">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2130557">//&nbsp;&nbsp;&nbsp;&nbspLdexp(±0,&nbsp;exp)&nbsp;=&nbsp;±0</span><br>
<span class="lineno"></span><span class="comment" id="2130582">//&nbsp;&nbsp;&nbsp;&nbspLdexp(±Inf,&nbsp;exp)&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span><span class="comment" id="2130611">//&nbsp;&nbsp;&nbsp;&nbspLdexp(NaN,&nbsp;exp)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="2130636">func</span>&nbsp;<span class="ident" id="2130641">Ldexp</span><span class="op" id="2130646">(</span><span class="ident" id="2130647">frac</span>&nbsp;<span class="builtintype" id="2130652">float64</span><span class="op" id="2130659">,</span>&nbsp;<span class="ident" id="2130661">exp</span>&nbsp;<span class="builtintype" id="2130665">int</span><span class="op" id="2130668">)</span>&nbsp;<span class="builtintype" id="2130670">float64</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="2130679">func</span>&nbsp;<span class="ident" id="2130684">ldexp</span><span class="op" id="2130689">(</span><span class="ident" id="2130690">frac</span>&nbsp;<span class="builtintype" id="2130695">float64</span><span class="op" id="2130702">,</span>&nbsp;<span class="ident" id="2130704">exp</span>&nbsp;<span class="builtintype" id="2130708">int</span><span class="op" id="2130711">)</span>&nbsp;<span class="builtintype" id="2130713">float64</span>&nbsp;<span class="op" id="2130721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2130724">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130742">switch</span>&nbsp;<span class="op" id="2130749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130752">case</span>&nbsp;<span class="ident" id="2130757">frac</span>&nbsp;<span class="op" id="2130762">==</span>&nbsp;<span class="num" id="2130765">0</span><span class="op" id="2130766">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130770">return</span>&nbsp;<span class="ident" id="2130777">frac</span>&nbsp;<span class="comment" id="2130782">//&nbsp;correctly&nbsp;return&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130806">case</span>&nbsp;<span class="ident" id="2130811">IsInf</span><span class="op" id="2130816">(</span><span class="ident" id="2130817">frac</span><span class="op" id="2130821">,</span>&nbsp;<span class="num" id="2130823">0</span><span class="op" id="2130824">)</span>&nbsp;<span class="op" id="2130826">||</span>&nbsp;<span class="ident" id="2130829">IsNaN</span><span class="op" id="2130834">(</span><span class="ident" id="2130835">frac</span><span class="op" id="2130839">)</span><span class="op" id="2130840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130844">return</span>&nbsp;<span class="ident" id="2130851">frac</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2130857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2130860">frac</span><span class="op" id="2130864">,</span>&nbsp;<span class="ident" id="2130866">e</span>&nbsp;<span class="op" id="2130868">:=</span>&nbsp;<span class="ident" id="2130871">normalize</span><span class="op" id="2130880">(</span><span class="ident" id="2130881">frac</span><span class="op" id="2130885">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2130888">exp</span>&nbsp;<span class="op" id="2130892">+=</span>&nbsp;<span class="ident" id="2130895">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2130898">x</span>&nbsp;<span class="op" id="2130900">:=</span>&nbsp;<span class="ident" id="2130903">Float64bits</span><span class="op" id="2130914">(</span><span class="ident" id="2130915">frac</span><span class="op" id="2130919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2130922">exp</span>&nbsp;<span class="op" id="2130926">+=</span>&nbsp;<span class="builtintype" id="2130929">int</span><span class="op" id="2130932">(</span><span class="ident" id="2130933">x</span><span class="op" id="2130934">&gt;&gt;</span><span class="ident" id="2130936">shift</span><span class="op" id="2130941">)</span><span class="op" id="2130942">&amp;</span><span class="ident" id="2130943">mask</span>&nbsp;<span class="op" id="2130948">-</span>&nbsp;<span class="ident" id="2130950">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130956">if</span>&nbsp;<span class="ident" id="2130959">exp</span>&nbsp;<span class="op" id="2130963">&lt;</span>&nbsp;<span class="op" id="2130965">-</span><span class="num" id="2130966">1074</span>&nbsp;<span class="op" id="2130971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2130975">return</span>&nbsp;<span class="ident" id="2130982">Copysign</span><span class="op" id="2130990">(</span><span class="num" id="2130991">0</span><span class="op" id="2130992">,</span>&nbsp;<span class="ident" id="2130994">frac</span><span class="op" id="2130998">)</span>&nbsp;<span class="comment" id="2131000">//&nbsp;underflow</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2131014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131017">if</span>&nbsp;<span class="ident" id="2131020">exp</span>&nbsp;<span class="op" id="2131024">&gt;</span>&nbsp;<span class="num" id="2131026">1023</span>&nbsp;<span class="op" id="2131031">{</span>&nbsp;<span class="comment" id="2131033">//&nbsp;overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131047">if</span>&nbsp;<span class="ident" id="2131050">frac</span>&nbsp;<span class="op" id="2131055">&lt;</span>&nbsp;<span class="num" id="2131057">0</span>&nbsp;<span class="op" id="2131059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131064">return</span>&nbsp;<span class="ident" id="2131071">Inf</span><span class="op" id="2131074">(</span><span class="op" id="2131075">-</span><span class="num" id="2131076">1</span><span class="op" id="2131077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2131081">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131085">return</span>&nbsp;<span class="ident" id="2131092">Inf</span><span class="op" id="2131095">(</span><span class="num" id="2131096">1</span><span class="op" id="2131097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2131100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131103">var</span>&nbsp;<span class="ident" id="2131107">m</span>&nbsp;<span class="builtintype" id="2131109">float64</span>&nbsp;<span class="op" id="2131117">=</span>&nbsp;<span class="num" id="2131119">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131122">if</span>&nbsp;<span class="ident" id="2131125">exp</span>&nbsp;<span class="op" id="2131129">&lt;</span>&nbsp;<span class="op" id="2131131">-</span><span class="num" id="2131132">1022</span>&nbsp;<span class="op" id="2131137">{</span>&nbsp;<span class="comment" id="2131139">//&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2131153">exp</span>&nbsp;<span class="op" id="2131157">+=</span>&nbsp;<span class="num" id="2131160">52</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2131165">m</span>&nbsp;<span class="op" id="2131167">=</span>&nbsp;<span class="num" id="2131169">1.0</span>&nbsp;<span class="op" id="2131173">/</span>&nbsp;<span class="op" id="2131175">(</span><span class="num" id="2131176">1</span>&nbsp;<span class="op" id="2131178">&lt;&lt;</span>&nbsp;<span class="num" id="2131181">52</span><span class="op" id="2131183">)</span>&nbsp;<span class="comment" id="2131185">//&nbsp;2**-52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2131196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2131199">x</span>&nbsp;<span class="op" id="2131201">&amp;^=</span>&nbsp;<span class="ident" id="2131205">mask</span>&nbsp;<span class="op" id="2131210">&lt;&lt;</span>&nbsp;<span class="ident" id="2131213">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2131220">x</span>&nbsp;<span class="op" id="2131222">|=</span>&nbsp;<span class="ident" id="2131225">uint64</span><span class="op" id="2131231">(</span><span class="ident" id="2131232">exp</span><span class="op" id="2131235">+</span><span class="ident" id="2131236">bias</span><span class="op" id="2131240">)</span>&nbsp;<span class="op" id="2131242">&lt;&lt;</span>&nbsp;<span class="ident" id="2131245">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2131252">return</span>&nbsp;<span class="ident" id="2131259">m</span>&nbsp;<span class="op" id="2131261">*</span>&nbsp;<span class="ident" id="2131263">Float64frombits</span><span class="op" id="2131278">(</span><span class="ident" id="2131279">x</span><span class="op" id="2131280">)</span><br>
<span class="lineno">45</span><span class="op" id="2131282">}</span>
</div>
</body>
</html>
