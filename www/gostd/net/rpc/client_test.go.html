<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html" class="current">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6615362">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6615417">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6615471">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6615522">package</span>&nbsp;<span class="ident" id="6615530">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6615535">import</span>&nbsp;<span class="op" id="6615542">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615545">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615555">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615562">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615569">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615580">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6615591">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6615601">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6615604">type</span>&nbsp;<span class="ident" id="6615609">shutdownCodec</span>&nbsp;<span class="keyword" id="6615623">struct</span>&nbsp;<span class="op" id="6615630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615633">responded</span>&nbsp;<span class="keyword" id="6615643">chan</span>&nbsp;<span class="builtintype" id="6615648">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615653">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6615663">bool</span><br>
<span class="lineno"></span><span class="op" id="6615668">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6615671">func</span>&nbsp;<span class="op" id="6615676">(</span><span class="ident" id="6615677">c</span>&nbsp;<span class="op" id="6615679">*</span><span class="ident" id="6615680">shutdownCodec</span><span class="op" id="6615693">)</span>&nbsp;<span class="ident" id="6615695">WriteRequest</span><span class="op" id="6615707">(</span><span class="op" id="6615708">*</span><span class="ident" id="6615709">Request</span><span class="op" id="6615716">,</span>&nbsp;<span class="keyword" id="6615718">interface</span><span class="op" id="6615727">{</span><span class="op" id="6615728">}</span><span class="op" id="6615729">)</span>&nbsp;<span class="builtintype" id="6615731">error</span>&nbsp;<span class="op" id="6615737">{</span>&nbsp;<span class="keyword" id="6615739">return</span>&nbsp;<span class="builtintype" id="6615746">nil</span>&nbsp;<span class="op" id="6615750">}</span><br>
<span class="lineno"></span><span class="keyword" id="6615752">func</span>&nbsp;<span class="op" id="6615757">(</span><span class="ident" id="6615758">c</span>&nbsp;<span class="op" id="6615760">*</span><span class="ident" id="6615761">shutdownCodec</span><span class="op" id="6615774">)</span>&nbsp;<span class="ident" id="6615776">ReadResponseBody</span><span class="op" id="6615792">(</span><span class="keyword" id="6615793">interface</span><span class="op" id="6615802">{</span><span class="op" id="6615803">}</span><span class="op" id="6615804">)</span>&nbsp;<span class="builtintype" id="6615806">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615818">{</span>&nbsp;<span class="keyword" id="6615820">return</span>&nbsp;<span class="builtintype" id="6615827">nil</span>&nbsp;<span class="op" id="6615831">}</span><br>
<span class="lineno"></span><span class="keyword" id="6615833">func</span>&nbsp;<span class="op" id="6615838">(</span><span class="ident" id="6615839">c</span>&nbsp;<span class="op" id="6615841">*</span><span class="ident" id="6615842">shutdownCodec</span><span class="op" id="6615855">)</span>&nbsp;<span class="ident" id="6615857">ReadResponseHeader</span><span class="op" id="6615875">(</span><span class="op" id="6615876">*</span><span class="ident" id="6615877">Response</span><span class="op" id="6615885">)</span>&nbsp;<span class="builtintype" id="6615887">error</span>&nbsp;<span class="op" id="6615893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615896">c</span><span class="op" id="6615897">.</span><span class="ident" id="6615898">responded</span>&nbsp;<span class="op" id="6615908">&lt;-</span>&nbsp;<span class="num" id="6615911">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615914">return</span>&nbsp;<span class="ident" id="6615921">errors</span><span class="op" id="6615927">.</span><span class="ident" id="6615928">New</span><span class="op" id="6615931">(</span><span class="string" id="6615932">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="6615966">)</span><br>
<span class="lineno"></span><span class="op" id="6615968">}</span><br>
<span class="lineno"></span><span class="keyword" id="6615970">func</span>&nbsp;<span class="op" id="6615975">(</span><span class="ident" id="6615976">c</span>&nbsp;<span class="op" id="6615978">*</span><span class="ident" id="6615979">shutdownCodec</span><span class="op" id="6615992">)</span>&nbsp;<span class="ident" id="6615994">Close</span><span class="op" id="6615999">(</span><span class="op" id="6616000">)</span>&nbsp;<span class="builtintype" id="6616002">error</span>&nbsp;<span class="op" id="6616008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616011">c</span><span class="op" id="6616012">.</span><span class="ident" id="6616013">closed</span>&nbsp;<span class="op" id="6616020">=</span>&nbsp;<span class="builtintype" id="6616022">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616028">return</span>&nbsp;<span class="builtintype" id="6616035">nil</span><br>
<span class="lineno">30</span><span class="op" id="6616039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616042">func</span>&nbsp;<span class="ident" id="6616047">TestCloseCodec</span><span class="op" id="6616061">(</span><span class="ident" id="6616062">t</span>&nbsp;<span class="op" id="6616064">*</span><span class="ident" id="6616065">testing</span><span class="op" id="6616072">.</span><span class="ident" id="6616073">T</span><span class="op" id="6616074">)</span>&nbsp;<span class="op" id="6616076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616079">codec</span>&nbsp;<span class="op" id="6616085">:=</span>&nbsp;<span class="op" id="6616088">&amp;</span><span class="ident" id="6616089">shutdownCodec</span><span class="op" id="6616102">{</span><span class="ident" id="6616103">responded</span><span class="op" id="6616112">:</span>&nbsp;<span class="builtinfunc" id="6616114">make</span><span class="op" id="6616118">(</span><span class="keyword" id="6616119">chan</span>&nbsp;<span class="builtintype" id="6616124">int</span><span class="op" id="6616127">)</span><span class="op" id="6616128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616131">client</span>&nbsp;<span class="op" id="6616138">:=</span>&nbsp;<span class="ident" id="6616141">NewClientWithCodec</span><span class="op" id="6616159">(</span><span class="ident" id="6616160">codec</span><span class="op" id="6616165">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616168">&lt;-</span><span class="ident" id="6616170">codec</span><span class="op" id="6616175">.</span><span class="ident" id="6616176">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616187">client</span><span class="op" id="6616193">.</span><span class="ident" id="6616194">Close</span><span class="op" id="6616199">(</span><span class="op" id="6616200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616203">if</span>&nbsp;<span class="op" id="6616206">!</span><span class="ident" id="6616207">codec</span><span class="op" id="6616212">.</span><span class="ident" id="6616213">closed</span>&nbsp;<span class="op" id="6616220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616224">t</span><span class="op" id="6616225">.</span><span class="ident" id="6616226">Error</span><span class="op" id="6616231">(</span><span class="string" id="6616232">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="6616266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616269">}</span><br>
<span class="lineno">40</span><span class="op" id="6616271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6616274">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616340">type</span>&nbsp;<span class="ident" id="6616345">R</span>&nbsp;<span class="keyword" id="6616347">struct</span>&nbsp;<span class="op" id="6616354">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616357">msg</span>&nbsp;<span class="op" id="6616361">[</span><span class="op" id="6616362">]</span><span class="builtintype" id="6616363">byte</span>&nbsp;<span class="comment" id="6616368">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="6616414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616417">type</span>&nbsp;<span class="ident" id="6616422">S</span>&nbsp;<span class="keyword" id="6616424">struct</span><span class="op" id="6616430">{</span><span class="op" id="6616431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6616434">func</span>&nbsp;<span class="op" id="6616439">(</span><span class="ident" id="6616440">s</span>&nbsp;<span class="op" id="6616442">*</span><span class="ident" id="6616443">S</span><span class="op" id="6616444">)</span>&nbsp;<span class="ident" id="6616446">Recv</span><span class="op" id="6616450">(</span><span class="ident" id="6616451">nul</span>&nbsp;<span class="op" id="6616455">*</span><span class="keyword" id="6616456">struct</span><span class="op" id="6616462">{</span><span class="op" id="6616463">}</span><span class="op" id="6616464">,</span>&nbsp;<span class="ident" id="6616466">reply</span>&nbsp;<span class="op" id="6616472">*</span><span class="ident" id="6616473">R</span><span class="op" id="6616474">)</span>&nbsp;<span class="builtintype" id="6616476">error</span>&nbsp;<span class="op" id="6616482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616485">*</span><span class="ident" id="6616486">reply</span>&nbsp;<span class="op" id="6616492">=</span>&nbsp;<span class="ident" id="6616494">R</span><span class="op" id="6616495">{</span><span class="op" id="6616496">[</span><span class="op" id="6616497">]</span><span class="builtintype" id="6616498">byte</span><span class="op" id="6616502">(</span><span class="string" id="6616503">&#34;foo&#34;</span><span class="op" id="6616508">)</span><span class="op" id="6616509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616512">return</span>&nbsp;<span class="builtintype" id="6616519">nil</span><br>
<span class="lineno"></span><span class="op" id="6616523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="6616526">func</span>&nbsp;<span class="ident" id="6616531">TestGobError</span><span class="op" id="6616543">(</span><span class="ident" id="6616544">t</span>&nbsp;<span class="op" id="6616546">*</span><span class="ident" id="6616547">testing</span><span class="op" id="6616554">.</span><span class="ident" id="6616555">T</span><span class="op" id="6616556">)</span>&nbsp;<span class="op" id="6616558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616561">if</span>&nbsp;<span class="ident" id="6616564">runtime</span><span class="op" id="6616571">.</span><span class="ident" id="6616572">GOOS</span>&nbsp;<span class="op" id="6616577">==</span>&nbsp;<span class="string" id="6616580">&#34;plan9&#34;</span>&nbsp;<span class="op" id="6616588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616592">t</span><span class="op" id="6616593">.</span><span class="ident" id="6616594">Skip</span><span class="op" id="6616598">(</span><span class="string" id="6616599">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="6616648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616654">defer</span>&nbsp;<span class="keyword" id="6616660">func</span><span class="op" id="6616664">(</span><span class="op" id="6616665">)</span>&nbsp;<span class="op" id="6616667">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616671">err</span>&nbsp;<span class="op" id="6616675">:=</span>&nbsp;<span class="builtinfunc" id="6616678">recover</span><span class="op" id="6616685">(</span><span class="op" id="6616686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616690">if</span>&nbsp;<span class="ident" id="6616693">err</span>&nbsp;<span class="op" id="6616697">==</span>&nbsp;<span class="builtintype" id="6616700">nil</span>&nbsp;<span class="op" id="6616704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616709">t</span><span class="op" id="6616710">.</span><span class="ident" id="6616711">Fatal</span><span class="op" id="6616716">(</span><span class="string" id="6616717">&#34;no&nbsp;error&#34;</span><span class="op" id="6616727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616735">if</span>&nbsp;<span class="op" id="6616738">!</span><span class="ident" id="6616739">strings</span><span class="op" id="6616746">.</span><span class="ident" id="6616747">Contains</span><span class="op" id="6616755">(</span><span class="string" id="6616756">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="6616774">,</span>&nbsp;<span class="ident" id="6616776">err</span><span class="op" id="6616779">.</span><span class="op" id="6616780">(</span><span class="builtintype" id="6616781">error</span><span class="op" id="6616786">)</span><span class="op" id="6616787">.</span><span class="ident" id="6616788">Error</span><span class="op" id="6616793">(</span><span class="op" id="6616794">)</span><span class="op" id="6616795">)</span>&nbsp;<span class="op" id="6616797">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616802">t</span><span class="op" id="6616803">.</span><span class="ident" id="6616804">Fatal</span><span class="op" id="6616809">(</span><span class="string" id="6616810">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="6616844">,</span>&nbsp;<span class="ident" id="6616846">err</span><span class="op" id="6616849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616856">}</span><span class="op" id="6616857">(</span><span class="op" id="6616858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616861">Register</span><span class="op" id="6616869">(</span><span class="builtinfunc" id="6616870">new</span><span class="op" id="6616873">(</span><span class="ident" id="6616874">S</span><span class="op" id="6616875">)</span><span class="op" id="6616876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616880">listen</span><span class="op" id="6616886">,</span>&nbsp;<span class="ident" id="6616888">err</span>&nbsp;<span class="op" id="6616892">:=</span>&nbsp;<span class="ident" id="6616895">net</span><span class="op" id="6616898">.</span><span class="ident" id="6616899">Listen</span><span class="op" id="6616905">(</span><span class="string" id="6616906">&#34;tcp&#34;</span><span class="op" id="6616911">,</span>&nbsp;<span class="string" id="6616913">&#34;127.0.0.1:0&#34;</span><span class="op" id="6616926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616929">if</span>&nbsp;<span class="ident" id="6616932">err</span>&nbsp;<span class="op" id="6616936">!=</span>&nbsp;<span class="builtintype" id="6616939">nil</span>&nbsp;<span class="op" id="6616943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6616947">panic</span><span class="op" id="6616952">(</span><span class="ident" id="6616953">err</span><span class="op" id="6616956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616962">go</span>&nbsp;<span class="ident" id="6616965">Accept</span><span class="op" id="6616971">(</span><span class="ident" id="6616972">listen</span><span class="op" id="6616978">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616982">client</span><span class="op" id="6616988">,</span>&nbsp;<span class="ident" id="6616990">err</span>&nbsp;<span class="op" id="6616994">:=</span>&nbsp;<span class="ident" id="6616997">Dial</span><span class="op" id="6617001">(</span><span class="string" id="6617002">&#34;tcp&#34;</span><span class="op" id="6617007">,</span>&nbsp;<span class="ident" id="6617009">listen</span><span class="op" id="6617015">.</span><span class="ident" id="6617016">Addr</span><span class="op" id="6617020">(</span><span class="op" id="6617021">)</span><span class="op" id="6617022">.</span><span class="ident" id="6617023">String</span><span class="op" id="6617029">(</span><span class="op" id="6617030">)</span><span class="op" id="6617031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617034">if</span>&nbsp;<span class="ident" id="6617037">err</span>&nbsp;<span class="op" id="6617041">!=</span>&nbsp;<span class="builtintype" id="6617044">nil</span>&nbsp;<span class="op" id="6617048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6617052">panic</span><span class="op" id="6617057">(</span><span class="ident" id="6617058">err</span><span class="op" id="6617061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617064">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617068">var</span>&nbsp;<span class="ident" id="6617072">reply</span>&nbsp;<span class="ident" id="6617078">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617085">err</span>&nbsp;<span class="op" id="6617089">=</span>&nbsp;<span class="ident" id="6617091">client</span><span class="op" id="6617097">.</span><span class="ident" id="6617098">Call</span><span class="op" id="6617102">(</span><span class="string" id="6617103">&#34;S.Recv&#34;</span><span class="op" id="6617111">,</span>&nbsp;<span class="op" id="6617113">&amp;</span><span class="keyword" id="6617114">struct</span><span class="op" id="6617120">{</span><span class="op" id="6617121">}</span><span class="op" id="6617122">{</span><span class="op" id="6617123">}</span><span class="op" id="6617124">,</span>&nbsp;<span class="op" id="6617126">&amp;</span><span class="ident" id="6617127">reply</span><span class="op" id="6617132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617135">if</span>&nbsp;<span class="ident" id="6617138">err</span>&nbsp;<span class="op" id="6617142">!=</span>&nbsp;<span class="builtintype" id="6617145">nil</span>&nbsp;<span class="op" id="6617149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6617153">panic</span><span class="op" id="6617158">(</span><span class="ident" id="6617159">err</span><span class="op" id="6617162">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617169">fmt</span><span class="op" id="6617172">.</span><span class="ident" id="6617173">Printf</span><span class="op" id="6617179">(</span><span class="string" id="6617180">&#34;%#v\n&#34;</span><span class="op" id="6617187">,</span>&nbsp;<span class="ident" id="6617189">reply</span><span class="op" id="6617194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617197">client</span><span class="op" id="6617203">.</span><span class="ident" id="6617204">Close</span><span class="op" id="6617209">(</span><span class="op" id="6617210">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617214">listen</span><span class="op" id="6617220">.</span><span class="ident" id="6617221">Close</span><span class="op" id="6617226">(</span><span class="op" id="6617227">)</span><br>
<span class="lineno"></span><span class="op" id="6617229">}</span>
</div>
</body>
</html>
