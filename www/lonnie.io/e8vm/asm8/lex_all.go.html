<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5817109">package</span>&nbsp;<span class="ident" id="5817117">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5817123">import</span>&nbsp;<span class="op" id="5817130">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5817133">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5817140">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5817162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5817165">func</span>&nbsp;<span class="ident" id="5817170">lexAsm8</span><span class="op" id="5817177">(</span><span class="ident" id="5817178">x</span>&nbsp;<span class="op" id="5817180">*</span><span class="ident" id="5817181">lex8</span><span class="op" id="5817185">.</span><span class="ident" id="5817186">Lexer</span><span class="op" id="5817191">)</span>&nbsp;<span class="op" id="5817193">*</span><span class="ident" id="5817194">lex8</span><span class="op" id="5817198">.</span><span class="ident" id="5817199">Token</span>&nbsp;<span class="op" id="5817205">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817208">r</span>&nbsp;<span class="op" id="5817210">:=</span>&nbsp;<span class="ident" id="5817213">x</span><span class="op" id="5817214">.</span><span class="ident" id="5817215">Rune</span><span class="op" id="5817219">(</span><span class="op" id="5817220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817223">if</span>&nbsp;<span class="ident" id="5817226">x</span><span class="op" id="5817227">.</span><span class="ident" id="5817228">IsWhite</span><span class="op" id="5817235">(</span><span class="ident" id="5817236">r</span><span class="op" id="5817237">)</span>&nbsp;<span class="op" id="5817239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5817243">panic</span><span class="op" id="5817248">(</span><span class="string" id="5817249">&#34;incorrect&nbsp;token&nbsp;start&#34;</span><span class="op" id="5817272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817279">switch</span>&nbsp;<span class="ident" id="5817286">r</span>&nbsp;<span class="op" id="5817288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817291">case</span>&nbsp;<span class="string" id="5817296">&#39;\n&#39;</span><span class="op" id="5817300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817304">x</span><span class="op" id="5817305">.</span><span class="ident" id="5817306">Next</span><span class="op" id="5817310">(</span><span class="op" id="5817311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817315">return</span>&nbsp;<span class="ident" id="5817322">x</span><span class="op" id="5817323">.</span><span class="ident" id="5817324">MakeToken</span><span class="op" id="5817333">(</span><span class="ident" id="5817334">Endl</span><span class="op" id="5817338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817341">case</span>&nbsp;<span class="string" id="5817346">&#39;{&#39;</span><span class="op" id="5817349">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817353">x</span><span class="op" id="5817354">.</span><span class="ident" id="5817355">Next</span><span class="op" id="5817359">(</span><span class="op" id="5817360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817364">return</span>&nbsp;<span class="ident" id="5817371">x</span><span class="op" id="5817372">.</span><span class="ident" id="5817373">MakeToken</span><span class="op" id="5817382">(</span><span class="ident" id="5817383">Lbrace</span><span class="op" id="5817389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817392">case</span>&nbsp;<span class="string" id="5817397">&#39;}&#39;</span><span class="op" id="5817400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817404">x</span><span class="op" id="5817405">.</span><span class="ident" id="5817406">Next</span><span class="op" id="5817410">(</span><span class="op" id="5817411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817415">return</span>&nbsp;<span class="ident" id="5817422">x</span><span class="op" id="5817423">.</span><span class="ident" id="5817424">MakeToken</span><span class="op" id="5817433">(</span><span class="ident" id="5817434">Rbrace</span><span class="op" id="5817440">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817443">case</span>&nbsp;<span class="string" id="5817448">&#39;/&#39;</span><span class="op" id="5817451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817455">return</span>&nbsp;<span class="ident" id="5817462">lexComment</span><span class="op" id="5817472">(</span><span class="ident" id="5817473">x</span><span class="op" id="5817474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817477">case</span>&nbsp;<span class="string" id="5817482">&#39;&#34;&#39;</span><span class="op" id="5817485">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817489">return</span>&nbsp;<span class="ident" id="5817496">lexString</span><span class="op" id="5817505">(</span><span class="ident" id="5817506">x</span><span class="op" id="5817507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817510">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817514">if</span>&nbsp;<span class="ident" id="5817517">isOperandChar</span><span class="op" id="5817530">(</span><span class="ident" id="5817531">r</span><span class="op" id="5817532">)</span>&nbsp;<span class="op" id="5817534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817538">return</span>&nbsp;<span class="ident" id="5817545">lexOperand</span><span class="op" id="5817555">(</span><span class="ident" id="5817556">x</span><span class="op" id="5817557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817564">x</span><span class="op" id="5817565">.</span><span class="ident" id="5817566">Err</span><span class="op" id="5817569">(</span><span class="string" id="5817570">&#34;illegal&nbsp;char&nbsp;%q&#34;</span><span class="op" id="5817587">,</span>&nbsp;<span class="ident" id="5817589">r</span><span class="op" id="5817590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817593">x</span><span class="op" id="5817594">.</span><span class="ident" id="5817595">Next</span><span class="op" id="5817599">(</span><span class="op" id="5817600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817603">return</span>&nbsp;<span class="ident" id="5817610">x</span><span class="op" id="5817611">.</span><span class="ident" id="5817612">MakeToken</span><span class="op" id="5817621">(</span><span class="ident" id="5817622">lex8</span><span class="op" id="5817626">.</span><span class="ident" id="5817627">Illegal</span><span class="op" id="5817634">)</span><br>
<span class="lineno"></span><span class="op" id="5817636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="5817639">//&nbsp;NewLexer&nbsp;creates&nbsp;a&nbsp;new&nbsp;lexer&nbsp;of&nbsp;a&nbsp;file&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="5817689">func</span>&nbsp;<span class="ident" id="5817694">newLexer</span><span class="op" id="5817702">(</span><span class="ident" id="5817703">file</span>&nbsp;<span class="builtintype" id="5817708">string</span><span class="op" id="5817714">,</span>&nbsp;<span class="ident" id="5817716">r</span>&nbsp;<span class="ident" id="5817718">io</span><span class="op" id="5817720">.</span><span class="ident" id="5817721">ReadCloser</span><span class="op" id="5817731">)</span>&nbsp;<span class="op" id="5817733">*</span><span class="ident" id="5817734">lex8</span><span class="op" id="5817738">.</span><span class="ident" id="5817739">Lexer</span>&nbsp;<span class="op" id="5817745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817748">ret</span>&nbsp;<span class="op" id="5817752">:=</span>&nbsp;<span class="ident" id="5817755">lex8</span><span class="op" id="5817759">.</span><span class="ident" id="5817760">NewLexer</span><span class="op" id="5817768">(</span><span class="ident" id="5817769">file</span><span class="op" id="5817773">,</span>&nbsp;<span class="ident" id="5817775">r</span><span class="op" id="5817776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817779">ret</span><span class="op" id="5817782">.</span><span class="ident" id="5817783">LexFunc</span>&nbsp;<span class="op" id="5817791">=</span>&nbsp;<span class="ident" id="5817793">lexAsm8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817802">return</span>&nbsp;<span class="ident" id="5817809">ret</span><br>
<span class="lineno">45</span><span class="op" id="5817813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5817816">//&nbsp;Tokens&nbsp;parses&nbsp;a&nbsp;file&nbsp;in&nbsp;a&nbsp;token&nbsp;array</span><br>
<span class="lineno"></span><span class="keyword" id="5817857">func</span>&nbsp;<span class="ident" id="5817862">Tokens</span><span class="op" id="5817868">(</span><span class="ident" id="5817869">f</span>&nbsp;<span class="builtintype" id="5817871">string</span><span class="op" id="5817877">,</span>&nbsp;<span class="ident" id="5817879">r</span>&nbsp;<span class="ident" id="5817881">io</span><span class="op" id="5817883">.</span><span class="ident" id="5817884">ReadCloser</span><span class="op" id="5817894">)</span>&nbsp;<span class="op" id="5817896">(</span><span class="op" id="5817897">[</span><span class="op" id="5817898">]</span><span class="op" id="5817899">*</span><span class="ident" id="5817900">lex8</span><span class="op" id="5817904">.</span><span class="ident" id="5817905">Token</span><span class="op" id="5817910">,</span>&nbsp;<span class="op" id="5817912">[</span><span class="op" id="5817913">]</span><span class="op" id="5817914">*</span><span class="ident" id="5817915">lex8</span><span class="op" id="5817919">.</span><span class="ident" id="5817920">Error</span><span class="op" id="5817925">)</span>&nbsp;<span class="op" id="5817927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817930">x</span>&nbsp;<span class="op" id="5817932">:=</span>&nbsp;<span class="ident" id="5817935">newLexer</span><span class="op" id="5817943">(</span><span class="ident" id="5817944">f</span><span class="op" id="5817945">,</span>&nbsp;<span class="ident" id="5817947">r</span><span class="op" id="5817948">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817952">var</span>&nbsp;<span class="ident" id="5817956">ret</span>&nbsp;<span class="op" id="5817960">[</span><span class="op" id="5817961">]</span><span class="op" id="5817962">*</span><span class="ident" id="5817963">lex8</span><span class="op" id="5817967">.</span><span class="ident" id="5817968">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817976">for</span>&nbsp;<span class="op" id="5817980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817984">t</span>&nbsp;<span class="op" id="5817986">:=</span>&nbsp;<span class="ident" id="5817989">x</span><span class="op" id="5817990">.</span><span class="ident" id="5817991">Token</span><span class="op" id="5817996">(</span><span class="op" id="5817997">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818001">ret</span>&nbsp;<span class="op" id="5818005">=</span>&nbsp;<span class="builtinfunc" id="5818007">append</span><span class="op" id="5818013">(</span><span class="ident" id="5818014">ret</span><span class="op" id="5818017">,</span>&nbsp;<span class="ident" id="5818019">t</span><span class="op" id="5818020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818024">if</span>&nbsp;<span class="ident" id="5818027">t</span><span class="op" id="5818028">.</span><span class="ident" id="5818029">Type</span>&nbsp;<span class="op" id="5818034">==</span>&nbsp;<span class="ident" id="5818037">lex8</span><span class="op" id="5818041">.</span><span class="ident" id="5818042">EOF</span>&nbsp;<span class="op" id="5818046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818062">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818066">errs</span>&nbsp;<span class="op" id="5818071">:=</span>&nbsp;<span class="ident" id="5818074">x</span><span class="op" id="5818075">.</span><span class="ident" id="5818076">Errs</span><span class="op" id="5818080">(</span><span class="op" id="5818081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818084">if</span>&nbsp;<span class="ident" id="5818087">errs</span>&nbsp;<span class="op" id="5818092">!=</span>&nbsp;<span class="ident" id="5818095">nil</span>&nbsp;<span class="op" id="5818099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818103">return</span>&nbsp;<span class="ident" id="5818110">nil</span><span class="op" id="5818113">,</span>&nbsp;<span class="ident" id="5818115">errs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818121">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818125">return</span>&nbsp;<span class="ident" id="5818132">ret</span><span class="op" id="5818135">,</span>&nbsp;<span class="ident" id="5818137">nil</span><br>
<span class="lineno"></span><span class="op" id="5818141">}</span>
</div>
</body>
</html>
