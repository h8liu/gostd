<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7671622">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7671678">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7671732">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7671783">package</span>&nbsp;<span class="ident" id="7671791">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671801">import</span>&nbsp;<span class="op" id="7671808">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671811">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671822">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7671832">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671835">type</span>&nbsp;<span class="ident" id="7671840">fileTest</span>&nbsp;<span class="keyword" id="7671849">struct</span>&nbsp;<span class="op" id="7671856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671859">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7671868">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671876">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7671885">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671897">sections</span>&nbsp;<span class="op" id="7671906">[</span><span class="op" id="7671907">]</span><span class="op" id="7671908">*</span><span class="ident" id="7671909">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="7671923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671926">var</span>&nbsp;<span class="ident" id="7671930">fileTests</span>&nbsp;<span class="op" id="7671940">=</span>&nbsp;<span class="op" id="7671942">[</span><span class="op" id="7671943">]</span><span class="ident" id="7671944">fileTest</span><span class="op" id="7671952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671955">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671959">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="7671984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671988">FileHeader</span><span class="op" id="7671998">{</span><span class="ident" id="7671999">Magic386</span><span class="op" id="7672007">,</span>&nbsp;<span class="num" id="7672009">0x324</span><span class="op" id="7672014">,</span>&nbsp;<span class="num" id="7672016">0x14</span><span class="op" id="7672020">,</span>&nbsp;<span class="num" id="7672022">4</span><span class="op" id="7672023">,</span>&nbsp;<span class="num" id="7672025">0x1000</span><span class="op" id="7672031">,</span>&nbsp;<span class="num" id="7672033">32</span><span class="op" id="7672035">}</span><span class="op" id="7672036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672040">[</span><span class="op" id="7672041">]</span><span class="op" id="7672042">*</span><span class="ident" id="7672043">SectionHeader</span><span class="op" id="7672056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672061">{</span><span class="string" id="7672062">&#34;text&#34;</span><span class="op" id="7672068">,</span>&nbsp;<span class="num" id="7672070">0x4c5f</span><span class="op" id="7672076">,</span>&nbsp;<span class="num" id="7672078">0x20</span><span class="op" id="7672082">}</span><span class="op" id="7672083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672088">{</span><span class="string" id="7672089">&#34;data&#34;</span><span class="op" id="7672095">,</span>&nbsp;<span class="num" id="7672097">0x94c</span><span class="op" id="7672102">,</span>&nbsp;<span class="num" id="7672104">0x4c7f</span><span class="op" id="7672110">}</span><span class="op" id="7672111">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672116">{</span><span class="string" id="7672117">&#34;syms&#34;</span><span class="op" id="7672123">,</span>&nbsp;<span class="num" id="7672125">0x2c2b</span><span class="op" id="7672131">,</span>&nbsp;<span class="num" id="7672133">0x55cb</span><span class="op" id="7672139">}</span><span class="op" id="7672140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672145">{</span><span class="string" id="7672146">&#34;spsz&#34;</span><span class="op" id="7672152">,</span>&nbsp;<span class="num" id="7672154">0x0</span><span class="op" id="7672157">,</span>&nbsp;<span class="num" id="7672159">0x81f6</span><span class="op" id="7672165">}</span><span class="op" id="7672166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672171">{</span><span class="string" id="7672172">&#34;pcsz&#34;</span><span class="op" id="7672178">,</span>&nbsp;<span class="num" id="7672180">0xf7a</span><span class="op" id="7672185">,</span>&nbsp;<span class="num" id="7672187">0x81f6</span><span class="op" id="7672193">}</span><span class="op" id="7672194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672198">}</span><span class="op" id="7672199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672202">}</span><span class="op" id="7672203">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7672210">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="7672237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672241">FileHeader</span><span class="op" id="7672251">{</span><span class="ident" id="7672252">MagicAMD64</span><span class="op" id="7672262">,</span>&nbsp;<span class="num" id="7672264">0x618</span><span class="op" id="7672269">,</span>&nbsp;<span class="num" id="7672271">0x13</span><span class="op" id="7672275">,</span>&nbsp;<span class="num" id="7672277">8</span><span class="op" id="7672278">,</span>&nbsp;<span class="num" id="7672280">0x200000</span><span class="op" id="7672288">,</span>&nbsp;<span class="num" id="7672290">40</span><span class="op" id="7672292">}</span><span class="op" id="7672293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672297">[</span><span class="op" id="7672298">]</span><span class="op" id="7672299">*</span><span class="ident" id="7672300">SectionHeader</span><span class="op" id="7672313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672318">{</span><span class="string" id="7672319">&#34;text&#34;</span><span class="op" id="7672325">,</span>&nbsp;<span class="num" id="7672327">0x4213</span><span class="op" id="7672333">,</span>&nbsp;<span class="num" id="7672335">0x28</span><span class="op" id="7672339">}</span><span class="op" id="7672340">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672345">{</span><span class="string" id="7672346">&#34;data&#34;</span><span class="op" id="7672352">,</span>&nbsp;<span class="num" id="7672354">0xa80</span><span class="op" id="7672359">,</span>&nbsp;<span class="num" id="7672361">0x423b</span><span class="op" id="7672367">}</span><span class="op" id="7672368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672373">{</span><span class="string" id="7672374">&#34;syms&#34;</span><span class="op" id="7672380">,</span>&nbsp;<span class="num" id="7672382">0x2c8c</span><span class="op" id="7672388">,</span>&nbsp;<span class="num" id="7672390">0x4cbb</span><span class="op" id="7672396">}</span><span class="op" id="7672397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672402">{</span><span class="string" id="7672403">&#34;spsz&#34;</span><span class="op" id="7672409">,</span>&nbsp;<span class="num" id="7672411">0x0</span><span class="op" id="7672414">,</span>&nbsp;<span class="num" id="7672416">0x7947</span><span class="op" id="7672422">}</span><span class="op" id="7672423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672428">{</span><span class="string" id="7672429">&#34;pcsz&#34;</span><span class="op" id="7672435">,</span>&nbsp;<span class="num" id="7672437">0xca0</span><span class="op" id="7672442">,</span>&nbsp;<span class="num" id="7672444">0x7947</span><span class="op" id="7672450">}</span><span class="op" id="7672451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672455">}</span><span class="op" id="7672456">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672459">}</span><span class="op" id="7672460">,</span><br>
<span class="lineno"></span><span class="op" id="7672462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7672465">func</span>&nbsp;<span class="ident" id="7672470">TestOpen</span><span class="op" id="7672478">(</span><span class="ident" id="7672479">t</span>&nbsp;<span class="op" id="7672481">*</span><span class="ident" id="7672482">testing</span><span class="op" id="7672489">.</span><span class="ident" id="7672490">T</span><span class="op" id="7672491">)</span>&nbsp;<span class="op" id="7672493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672496">for</span>&nbsp;<span class="ident" id="7672500">i</span>&nbsp;<span class="op" id="7672502">:=</span>&nbsp;<span class="keyword" id="7672505">range</span>&nbsp;<span class="ident" id="7672511">fileTests</span>&nbsp;<span class="op" id="7672521">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672525">tt</span>&nbsp;<span class="op" id="7672528">:=</span>&nbsp;<span class="op" id="7672531">&amp;</span><span class="ident" id="7672532">fileTests</span><span class="op" id="7672541">[</span><span class="ident" id="7672542">i</span><span class="op" id="7672543">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672548">f</span><span class="op" id="7672549">,</span>&nbsp;<span class="ident" id="7672551">err</span>&nbsp;<span class="op" id="7672555">:=</span>&nbsp;<span class="ident" id="7672558">Open</span><span class="op" id="7672562">(</span><span class="ident" id="7672563">tt</span><span class="op" id="7672565">.</span><span class="ident" id="7672566">file</span><span class="op" id="7672570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672574">if</span>&nbsp;<span class="ident" id="7672577">err</span>&nbsp;<span class="op" id="7672581">!=</span>&nbsp;<span class="ident" id="7672584">nil</span>&nbsp;<span class="op" id="7672588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672593">t</span><span class="op" id="7672594">.</span><span class="ident" id="7672595">Error</span><span class="op" id="7672600">(</span><span class="ident" id="7672601">err</span><span class="op" id="7672604">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672609">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672624">if</span>&nbsp;<span class="op" id="7672627">!</span><span class="ident" id="7672628">reflect</span><span class="op" id="7672635">.</span><span class="ident" id="7672636">DeepEqual</span><span class="op" id="7672645">(</span><span class="ident" id="7672646">f</span><span class="op" id="7672647">.</span><span class="ident" id="7672648">FileHeader</span><span class="op" id="7672658">,</span>&nbsp;<span class="ident" id="7672660">tt</span><span class="op" id="7672662">.</span><span class="ident" id="7672663">hdr</span><span class="op" id="7672666">)</span>&nbsp;<span class="op" id="7672668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672673">t</span><span class="op" id="7672674">.</span><span class="ident" id="7672675">Errorf</span><span class="op" id="7672681">(</span><span class="string" id="7672682">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7672718">,</span>&nbsp;<span class="ident" id="7672720">tt</span><span class="op" id="7672722">.</span><span class="ident" id="7672723">file</span><span class="op" id="7672727">,</span>&nbsp;<span class="ident" id="7672729">f</span><span class="op" id="7672730">.</span><span class="ident" id="7672731">FileHeader</span><span class="op" id="7672741">,</span>&nbsp;<span class="ident" id="7672743">tt</span><span class="op" id="7672745">.</span><span class="ident" id="7672746">hdr</span><span class="op" id="7672749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672754">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672770">for</span>&nbsp;<span class="ident" id="7672774">i</span><span class="op" id="7672775">,</span>&nbsp;<span class="ident" id="7672777">sh</span>&nbsp;<span class="op" id="7672780">:=</span>&nbsp;<span class="keyword" id="7672783">range</span>&nbsp;<span class="ident" id="7672789">f</span><span class="op" id="7672790">.</span><span class="ident" id="7672791">Sections</span>&nbsp;<span class="op" id="7672800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672805">if</span>&nbsp;<span class="ident" id="7672808">i</span>&nbsp;<span class="op" id="7672810">&gt;=</span>&nbsp;<span class="builtinfunc" id="7672813">len</span><span class="op" id="7672816">(</span><span class="ident" id="7672817">tt</span><span class="op" id="7672819">.</span><span class="ident" id="7672820">sections</span><span class="op" id="7672828">)</span>&nbsp;<span class="op" id="7672830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672836">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672850">have</span>&nbsp;<span class="op" id="7672855">:=</span>&nbsp;<span class="op" id="7672858">&amp;</span><span class="ident" id="7672859">sh</span><span class="op" id="7672861">.</span><span class="ident" id="7672862">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672879">want</span>&nbsp;<span class="op" id="7672884">:=</span>&nbsp;<span class="ident" id="7672887">tt</span><span class="op" id="7672889">.</span><span class="ident" id="7672890">sections</span><span class="op" id="7672898">[</span><span class="ident" id="7672899">i</span><span class="op" id="7672900">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672905">if</span>&nbsp;<span class="op" id="7672908">!</span><span class="ident" id="7672909">reflect</span><span class="op" id="7672916">.</span><span class="ident" id="7672917">DeepEqual</span><span class="op" id="7672926">(</span><span class="ident" id="7672927">have</span><span class="op" id="7672931">,</span>&nbsp;<span class="ident" id="7672933">want</span><span class="op" id="7672937">)</span>&nbsp;<span class="op" id="7672939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672945">t</span><span class="op" id="7672946">.</span><span class="ident" id="7672947">Errorf</span><span class="op" id="7672953">(</span><span class="string" id="7672954">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7673002">,</span>&nbsp;<span class="ident" id="7673004">tt</span><span class="op" id="7673006">.</span><span class="ident" id="7673007">file</span><span class="op" id="7673011">,</span>&nbsp;<span class="ident" id="7673013">i</span><span class="op" id="7673014">,</span>&nbsp;<span class="ident" id="7673016">have</span><span class="op" id="7673020">,</span>&nbsp;<span class="ident" id="7673022">want</span><span class="op" id="7673026">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673039">tn</span>&nbsp;<span class="op" id="7673042">:=</span>&nbsp;<span class="builtinfunc" id="7673045">len</span><span class="op" id="7673048">(</span><span class="ident" id="7673049">tt</span><span class="op" id="7673051">.</span><span class="ident" id="7673052">sections</span><span class="op" id="7673060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673064">fn</span>&nbsp;<span class="op" id="7673067">:=</span>&nbsp;<span class="builtinfunc" id="7673070">len</span><span class="op" id="7673073">(</span><span class="ident" id="7673074">f</span><span class="op" id="7673075">.</span><span class="ident" id="7673076">Sections</span><span class="op" id="7673084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673088">if</span>&nbsp;<span class="ident" id="7673091">tn</span>&nbsp;<span class="op" id="7673094">!=</span>&nbsp;<span class="ident" id="7673097">fn</span>&nbsp;<span class="op" id="7673100">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673105">t</span><span class="op" id="7673106">.</span><span class="ident" id="7673107">Errorf</span><span class="op" id="7673113">(</span><span class="string" id="7673114">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7673152">,</span>&nbsp;<span class="ident" id="7673154">tt</span><span class="op" id="7673156">.</span><span class="ident" id="7673157">file</span><span class="op" id="7673161">,</span>&nbsp;<span class="ident" id="7673163">fn</span><span class="op" id="7673165">,</span>&nbsp;<span class="ident" id="7673167">tn</span><span class="op" id="7673169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673176">}</span><br>
<span class="lineno"></span><span class="op" id="7673178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7673181">func</span>&nbsp;<span class="ident" id="7673186">TestOpenFailure</span><span class="op" id="7673201">(</span><span class="ident" id="7673202">t</span>&nbsp;<span class="op" id="7673204">*</span><span class="ident" id="7673205">testing</span><span class="op" id="7673212">.</span><span class="ident" id="7673213">T</span><span class="op" id="7673214">)</span>&nbsp;<span class="op" id="7673216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673219">filename</span>&nbsp;<span class="op" id="7673228">:=</span>&nbsp;<span class="string" id="7673231">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7673244">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673272">_</span><span class="op" id="7673273">,</span>&nbsp;<span class="ident" id="7673275">err</span>&nbsp;<span class="op" id="7673279">:=</span>&nbsp;<span class="ident" id="7673282">Open</span><span class="op" id="7673286">(</span><span class="ident" id="7673287">filename</span><span class="op" id="7673295">)</span>&nbsp;<span class="comment" id="7673297">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673313">if</span>&nbsp;<span class="ident" id="7673316">err</span>&nbsp;<span class="op" id="7673320">==</span>&nbsp;<span class="ident" id="7673323">nil</span>&nbsp;<span class="op" id="7673327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673331">t</span><span class="op" id="7673332">.</span><span class="ident" id="7673333">Errorf</span><span class="op" id="7673339">(</span><span class="string" id="7673340">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="7673373">,</span>&nbsp;<span class="ident" id="7673375">filename</span><span class="op" id="7673383">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673386">}</span><br>
<span class="lineno"></span><span class="op" id="7673388">}</span>
</div>
</body>
</html>
