<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html" class="current">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6623529">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6623585">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6623639">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6623690">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6623747">package</span>&nbsp;<span class="ident" id="6623755">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6623760">import</span>&nbsp;<span class="op" id="6623767">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6623770">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6623776">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6623787">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6623798">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6623809">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6623816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6623819">type</span>&nbsp;<span class="ident" id="6623824">testInterface</span>&nbsp;<span class="keyword" id="6623838">struct</span>&nbsp;<span class="op" id="6623845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623848">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6623861">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623869">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6623882">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623890">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6623903">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623911">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6623924">[</span><span class="op" id="6623925">]</span><span class="op" id="6623926">*</span><span class="ident" id="6623927">exec</span><span class="op" id="6623931">.</span><span class="ident" id="6623932">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6623937">teardownCmds</span>&nbsp;<span class="op" id="6623950">[</span><span class="op" id="6623951">]</span><span class="op" id="6623952">*</span><span class="ident" id="6623953">exec</span><span class="op" id="6623957">.</span><span class="ident" id="6623958">Cmd</span><br>
<span class="lineno"></span><span class="op" id="6623962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6623965">func</span>&nbsp;<span class="op" id="6623970">(</span><span class="ident" id="6623971">ti</span>&nbsp;<span class="op" id="6623974">*</span><span class="ident" id="6623975">testInterface</span><span class="op" id="6623988">)</span>&nbsp;<span class="ident" id="6623990">setup</span><span class="op" id="6623995">(</span><span class="op" id="6623996">)</span>&nbsp;<span class="builtintype" id="6623998">error</span>&nbsp;<span class="op" id="6624004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624007">for</span>&nbsp;<span class="ident" id="6624011">_</span><span class="op" id="6624012">,</span>&nbsp;<span class="ident" id="6624014">cmd</span>&nbsp;<span class="op" id="6624018">:=</span>&nbsp;<span class="keyword" id="6624021">range</span>&nbsp;<span class="ident" id="6624027">ti</span><span class="op" id="6624029">.</span><span class="ident" id="6624030">setupCmds</span>&nbsp;<span class="op" id="6624040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624044">if</span>&nbsp;<span class="ident" id="6624047">err</span>&nbsp;<span class="op" id="6624051">:=</span>&nbsp;<span class="ident" id="6624054">cmd</span><span class="op" id="6624057">.</span><span class="ident" id="6624058">Run</span><span class="op" id="6624061">(</span><span class="op" id="6624062">)</span><span class="op" id="6624063">;</span>&nbsp;<span class="ident" id="6624065">err</span>&nbsp;<span class="op" id="6624069">!=</span>&nbsp;<span class="ident" id="6624072">nil</span>&nbsp;<span class="op" id="6624076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624081">return</span>&nbsp;<span class="ident" id="6624088">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624094">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624100">return</span>&nbsp;<span class="ident" id="6624107">nil</span><br>
<span class="lineno"></span><span class="op" id="6624111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6624114">func</span>&nbsp;<span class="op" id="6624119">(</span><span class="ident" id="6624120">ti</span>&nbsp;<span class="op" id="6624123">*</span><span class="ident" id="6624124">testInterface</span><span class="op" id="6624137">)</span>&nbsp;<span class="ident" id="6624139">teardown</span><span class="op" id="6624147">(</span><span class="op" id="6624148">)</span>&nbsp;<span class="builtintype" id="6624150">error</span>&nbsp;<span class="op" id="6624156">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624159">for</span>&nbsp;<span class="ident" id="6624163">_</span><span class="op" id="6624164">,</span>&nbsp;<span class="ident" id="6624166">cmd</span>&nbsp;<span class="op" id="6624170">:=</span>&nbsp;<span class="keyword" id="6624173">range</span>&nbsp;<span class="ident" id="6624179">ti</span><span class="op" id="6624181">.</span><span class="ident" id="6624182">teardownCmds</span>&nbsp;<span class="op" id="6624195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624199">if</span>&nbsp;<span class="ident" id="6624202">err</span>&nbsp;<span class="op" id="6624206">:=</span>&nbsp;<span class="ident" id="6624209">cmd</span><span class="op" id="6624212">.</span><span class="ident" id="6624213">Run</span><span class="op" id="6624216">(</span><span class="op" id="6624217">)</span><span class="op" id="6624218">;</span>&nbsp;<span class="ident" id="6624220">err</span>&nbsp;<span class="op" id="6624224">!=</span>&nbsp;<span class="ident" id="6624227">nil</span>&nbsp;<span class="op" id="6624231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624236">return</span>&nbsp;<span class="ident" id="6624243">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624252">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624255">return</span>&nbsp;<span class="ident" id="6624262">nil</span><br>
<span class="lineno"></span><span class="op" id="6624266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6624269">func</span>&nbsp;<span class="ident" id="6624274">TestPointToPointInterface</span><span class="op" id="6624299">(</span><span class="ident" id="6624300">t</span>&nbsp;<span class="op" id="6624302">*</span><span class="ident" id="6624303">testing</span><span class="op" id="6624310">.</span><span class="ident" id="6624311">T</span><span class="op" id="6624312">)</span>&nbsp;<span class="op" id="6624314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624317">if</span>&nbsp;<span class="ident" id="6624320">testing</span><span class="op" id="6624327">.</span><span class="ident" id="6624328">Short</span><span class="op" id="6624333">(</span><span class="op" id="6624334">)</span>&nbsp;<span class="op" id="6624336">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624340">t</span><span class="op" id="6624341">.</span><span class="ident" id="6624342">Skip</span><span class="op" id="6624346">(</span><span class="string" id="6624347">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6624376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624382">switch</span>&nbsp;<span class="op" id="6624389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624392">case</span>&nbsp;<span class="ident" id="6624397">runtime</span><span class="op" id="6624404">.</span><span class="ident" id="6624405">GOOS</span>&nbsp;<span class="op" id="6624410">==</span>&nbsp;<span class="string" id="6624413">&#34;darwin&#34;</span><span class="op" id="6624421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624425">t</span><span class="op" id="6624426">.</span><span class="ident" id="6624427">Skipf</span><span class="op" id="6624432">(</span><span class="string" id="6624433">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6624459">,</span>&nbsp;<span class="ident" id="6624461">runtime</span><span class="op" id="6624468">.</span><span class="ident" id="6624469">GOOS</span><span class="op" id="6624473">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624479">if</span>&nbsp;<span class="ident" id="6624482">os</span><span class="op" id="6624484">.</span><span class="ident" id="6624485">Getuid</span><span class="op" id="6624491">(</span><span class="op" id="6624492">)</span>&nbsp;<span class="op" id="6624494">!=</span>&nbsp;<span class="num" id="6624497">0</span>&nbsp;<span class="op" id="6624499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624503">t</span><span class="op" id="6624504">.</span><span class="ident" id="6624505">Skip</span><span class="op" id="6624509">(</span><span class="string" id="6624510">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6624539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624546">local</span><span class="op" id="6624551">,</span>&nbsp;<span class="ident" id="6624553">remote</span>&nbsp;<span class="op" id="6624560">:=</span>&nbsp;<span class="string" id="6624563">&#34;169.254.0.1&#34;</span><span class="op" id="6624576">,</span>&nbsp;<span class="string" id="6624578">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624595">ip</span>&nbsp;<span class="op" id="6624598">:=</span>&nbsp;<span class="ident" id="6624601">ParseIP</span><span class="op" id="6624608">(</span><span class="ident" id="6624609">remote</span><span class="op" id="6624615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624618">for</span>&nbsp;<span class="ident" id="6624622">i</span>&nbsp;<span class="op" id="6624624">:=</span>&nbsp;<span class="num" id="6624627">0</span><span class="op" id="6624628">;</span>&nbsp;<span class="ident" id="6624630">i</span>&nbsp;<span class="op" id="6624632">&lt;</span>&nbsp;<span class="num" id="6624634">3</span><span class="op" id="6624635">;</span>&nbsp;<span class="ident" id="6624637">i</span><span class="op" id="6624638">++</span>&nbsp;<span class="op" id="6624641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624645">ti</span>&nbsp;<span class="op" id="6624648">:=</span>&nbsp;<span class="op" id="6624651">&amp;</span><span class="ident" id="6624652">testInterface</span><span class="op" id="6624665">{</span><span class="op" id="6624666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624670">if</span>&nbsp;<span class="ident" id="6624673">err</span>&nbsp;<span class="op" id="6624677">:=</span>&nbsp;<span class="ident" id="6624680">ti</span><span class="op" id="6624682">.</span><span class="ident" id="6624683">setPointToPoint</span><span class="op" id="6624698">(</span><span class="num" id="6624699">5963</span><span class="op" id="6624703">+</span><span class="ident" id="6624704">i</span><span class="op" id="6624705">,</span>&nbsp;<span class="ident" id="6624707">local</span><span class="op" id="6624712">,</span>&nbsp;<span class="ident" id="6624714">remote</span><span class="op" id="6624720">)</span><span class="op" id="6624721">;</span>&nbsp;<span class="ident" id="6624723">err</span>&nbsp;<span class="op" id="6624727">!=</span>&nbsp;<span class="ident" id="6624730">nil</span>&nbsp;<span class="op" id="6624734">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624739">t</span><span class="op" id="6624740">.</span><span class="ident" id="6624741">Skipf</span><span class="op" id="6624746">(</span><span class="string" id="6624747">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="6624783">,</span>&nbsp;<span class="ident" id="6624785">err</span><span class="op" id="6624788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624796">if</span>&nbsp;<span class="ident" id="6624799">err</span>&nbsp;<span class="op" id="6624803">:=</span>&nbsp;<span class="ident" id="6624806">ti</span><span class="op" id="6624808">.</span><span class="ident" id="6624809">setup</span><span class="op" id="6624814">(</span><span class="op" id="6624815">)</span><span class="op" id="6624816">;</span>&nbsp;<span class="ident" id="6624818">err</span>&nbsp;<span class="op" id="6624822">!=</span>&nbsp;<span class="ident" id="6624825">nil</span>&nbsp;<span class="op" id="6624829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624834">t</span><span class="op" id="6624835">.</span><span class="ident" id="6624836">Fatalf</span><span class="op" id="6624842">(</span><span class="string" id="6624843">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6624875">,</span>&nbsp;<span class="ident" id="6624877">err</span><span class="op" id="6624880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624884">}</span>&nbsp;<span class="keyword" id="6624886">else</span>&nbsp;<span class="op" id="6624891">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624896">time</span><span class="op" id="6624900">.</span><span class="ident" id="6624901">Sleep</span><span class="op" id="6624906">(</span><span class="num" id="6624907">3</span>&nbsp;<span class="op" id="6624909">*</span>&nbsp;<span class="ident" id="6624911">time</span><span class="op" id="6624915">.</span><span class="ident" id="6624916">Millisecond</span><span class="op" id="6624927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6624931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624935">ift</span><span class="op" id="6624938">,</span>&nbsp;<span class="ident" id="6624940">err</span>&nbsp;<span class="op" id="6624944">:=</span>&nbsp;<span class="ident" id="6624947">Interfaces</span><span class="op" id="6624957">(</span><span class="op" id="6624958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6624962">if</span>&nbsp;<span class="ident" id="6624965">err</span>&nbsp;<span class="op" id="6624969">!=</span>&nbsp;<span class="ident" id="6624972">nil</span>&nbsp;<span class="op" id="6624976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624981">ti</span><span class="op" id="6624983">.</span><span class="ident" id="6624984">teardown</span><span class="op" id="6624992">(</span><span class="op" id="6624993">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6624998">t</span><span class="op" id="6624999">.</span><span class="ident" id="6625000">Fatalf</span><span class="op" id="6625006">(</span><span class="string" id="6625007">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6625030">,</span>&nbsp;<span class="ident" id="6625032">err</span><span class="op" id="6625035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625043">for</span>&nbsp;<span class="ident" id="6625047">_</span><span class="op" id="6625048">,</span>&nbsp;<span class="ident" id="6625050">ifi</span>&nbsp;<span class="op" id="6625054">:=</span>&nbsp;<span class="keyword" id="6625057">range</span>&nbsp;<span class="ident" id="6625063">ift</span>&nbsp;<span class="op" id="6625067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625072">if</span>&nbsp;<span class="ident" id="6625075">ti</span><span class="op" id="6625077">.</span><span class="ident" id="6625078">name</span>&nbsp;<span class="op" id="6625083">==</span>&nbsp;<span class="ident" id="6625086">ifi</span><span class="op" id="6625089">.</span><span class="ident" id="6625090">Name</span>&nbsp;<span class="op" id="6625095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625101">ifat</span><span class="op" id="6625105">,</span>&nbsp;<span class="ident" id="6625107">err</span>&nbsp;<span class="op" id="6625111">:=</span>&nbsp;<span class="ident" id="6625114">ifi</span><span class="op" id="6625117">.</span><span class="ident" id="6625118">Addrs</span><span class="op" id="6625123">(</span><span class="op" id="6625124">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625130">if</span>&nbsp;<span class="ident" id="6625133">err</span>&nbsp;<span class="op" id="6625137">!=</span>&nbsp;<span class="ident" id="6625140">nil</span>&nbsp;<span class="op" id="6625144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625151">ti</span><span class="op" id="6625153">.</span><span class="ident" id="6625154">teardown</span><span class="op" id="6625162">(</span><span class="op" id="6625163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625170">t</span><span class="op" id="6625171">.</span><span class="ident" id="6625172">Fatalf</span><span class="op" id="6625178">(</span><span class="string" id="6625179">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6625207">,</span>&nbsp;<span class="ident" id="6625209">err</span><span class="op" id="6625212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625224">for</span>&nbsp;<span class="ident" id="6625228">_</span><span class="op" id="6625229">,</span>&nbsp;<span class="ident" id="6625231">ifa</span>&nbsp;<span class="op" id="6625235">:=</span>&nbsp;<span class="keyword" id="6625238">range</span>&nbsp;<span class="ident" id="6625244">ifat</span>&nbsp;<span class="op" id="6625249">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625256">if</span>&nbsp;<span class="ident" id="6625259">ip</span><span class="op" id="6625261">.</span><span class="ident" id="6625262">Equal</span><span class="op" id="6625267">(</span><span class="ident" id="6625268">ifa</span><span class="op" id="6625271">.</span><span class="op" id="6625272">(</span><span class="op" id="6625273">*</span><span class="ident" id="6625274">IPNet</span><span class="op" id="6625279">)</span><span class="op" id="6625280">.</span><span class="ident" id="6625281">IP</span><span class="op" id="6625283">)</span>&nbsp;<span class="op" id="6625285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625293">ti</span><span class="op" id="6625295">.</span><span class="ident" id="6625296">teardown</span><span class="op" id="6625304">(</span><span class="op" id="6625305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625313">t</span><span class="op" id="6625314">.</span><span class="ident" id="6625315">Fatalf</span><span class="op" id="6625321">(</span><span class="string" id="6625322">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6625339">,</span>&nbsp;<span class="ident" id="6625341">ip</span><span class="op" id="6625343">,</span>&nbsp;<span class="ident" id="6625345">local</span><span class="op" id="6625350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625363">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625376">if</span>&nbsp;<span class="ident" id="6625379">err</span>&nbsp;<span class="op" id="6625383">:=</span>&nbsp;<span class="ident" id="6625386">ti</span><span class="op" id="6625388">.</span><span class="ident" id="6625389">teardown</span><span class="op" id="6625397">(</span><span class="op" id="6625398">)</span><span class="op" id="6625399">;</span>&nbsp;<span class="ident" id="6625401">err</span>&nbsp;<span class="op" id="6625405">!=</span>&nbsp;<span class="ident" id="6625408">nil</span>&nbsp;<span class="op" id="6625412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625417">t</span><span class="op" id="6625418">.</span><span class="ident" id="6625419">Fatalf</span><span class="op" id="6625425">(</span><span class="string" id="6625426">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6625461">,</span>&nbsp;<span class="ident" id="6625463">err</span><span class="op" id="6625466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625470">}</span>&nbsp;<span class="keyword" id="6625472">else</span>&nbsp;<span class="op" id="6625477">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625482">time</span><span class="op" id="6625486">.</span><span class="ident" id="6625487">Sleep</span><span class="op" id="6625492">(</span><span class="num" id="6625493">3</span>&nbsp;<span class="op" id="6625495">*</span>&nbsp;<span class="ident" id="6625497">time</span><span class="op" id="6625501">.</span><span class="ident" id="6625502">Millisecond</span><span class="op" id="6625513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625520">}</span><br>
<span class="lineno"></span><span class="op" id="6625522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6625525">func</span>&nbsp;<span class="ident" id="6625530">TestInterfaceArrivalAndDeparture</span><span class="op" id="6625562">(</span><span class="ident" id="6625563">t</span>&nbsp;<span class="op" id="6625565">*</span><span class="ident" id="6625566">testing</span><span class="op" id="6625573">.</span><span class="ident" id="6625574">T</span><span class="op" id="6625575">)</span>&nbsp;<span class="op" id="6625577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625580">if</span>&nbsp;<span class="ident" id="6625583">testing</span><span class="op" id="6625590">.</span><span class="ident" id="6625591">Short</span><span class="op" id="6625596">(</span><span class="op" id="6625597">)</span>&nbsp;<span class="op" id="6625599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625603">t</span><span class="op" id="6625604">.</span><span class="ident" id="6625605">Skip</span><span class="op" id="6625609">(</span><span class="string" id="6625610">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6625639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625645">if</span>&nbsp;<span class="ident" id="6625648">os</span><span class="op" id="6625650">.</span><span class="ident" id="6625651">Getuid</span><span class="op" id="6625657">(</span><span class="op" id="6625658">)</span>&nbsp;<span class="op" id="6625660">!=</span>&nbsp;<span class="num" id="6625663">0</span>&nbsp;<span class="op" id="6625665">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625669">t</span><span class="op" id="6625670">.</span><span class="ident" id="6625671">Skip</span><span class="op" id="6625675">(</span><span class="string" id="6625676">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6625705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625712">for</span>&nbsp;<span class="ident" id="6625716">i</span>&nbsp;<span class="op" id="6625718">:=</span>&nbsp;<span class="num" id="6625721">0</span><span class="op" id="6625722">;</span>&nbsp;<span class="ident" id="6625724">i</span>&nbsp;<span class="op" id="6625726">&lt;</span>&nbsp;<span class="num" id="6625728">3</span><span class="op" id="6625729">;</span>&nbsp;<span class="ident" id="6625731">i</span><span class="op" id="6625732">++</span>&nbsp;<span class="op" id="6625735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625739">ift1</span><span class="op" id="6625743">,</span>&nbsp;<span class="ident" id="6625745">err</span>&nbsp;<span class="op" id="6625749">:=</span>&nbsp;<span class="ident" id="6625752">Interfaces</span><span class="op" id="6625762">(</span><span class="op" id="6625763">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625767">if</span>&nbsp;<span class="ident" id="6625770">err</span>&nbsp;<span class="op" id="6625774">!=</span>&nbsp;<span class="ident" id="6625777">nil</span>&nbsp;<span class="op" id="6625781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625786">t</span><span class="op" id="6625787">.</span><span class="ident" id="6625788">Fatalf</span><span class="op" id="6625794">(</span><span class="string" id="6625795">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6625818">,</span>&nbsp;<span class="ident" id="6625820">err</span><span class="op" id="6625823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625831">ti</span>&nbsp;<span class="op" id="6625834">:=</span>&nbsp;<span class="op" id="6625837">&amp;</span><span class="ident" id="6625838">testInterface</span><span class="op" id="6625851">{</span><span class="op" id="6625852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625856">if</span>&nbsp;<span class="ident" id="6625859">err</span>&nbsp;<span class="op" id="6625863">:=</span>&nbsp;<span class="ident" id="6625866">ti</span><span class="op" id="6625868">.</span><span class="ident" id="6625869">setBroadcast</span><span class="op" id="6625881">(</span><span class="num" id="6625882">5682</span>&nbsp;<span class="op" id="6625887">+</span>&nbsp;<span class="ident" id="6625889">i</span><span class="op" id="6625890">)</span><span class="op" id="6625891">;</span>&nbsp;<span class="ident" id="6625893">err</span>&nbsp;<span class="op" id="6625897">!=</span>&nbsp;<span class="ident" id="6625900">nil</span>&nbsp;<span class="op" id="6625904">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6625909">t</span><span class="op" id="6625910">.</span><span class="ident" id="6625911">Skipf</span><span class="op" id="6625916">(</span><span class="string" id="6625917">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="6625953">,</span>&nbsp;<span class="ident" id="6625955">err</span><span class="op" id="6625958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6625962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6625966">if</span>&nbsp;<span class="ident" id="6625969">err</span>&nbsp;<span class="op" id="6625973">:=</span>&nbsp;<span class="ident" id="6625976">ti</span><span class="op" id="6625978">.</span><span class="ident" id="6625979">setup</span><span class="op" id="6625984">(</span><span class="op" id="6625985">)</span><span class="op" id="6625986">;</span>&nbsp;<span class="ident" id="6625988">err</span>&nbsp;<span class="op" id="6625992">!=</span>&nbsp;<span class="ident" id="6625995">nil</span>&nbsp;<span class="op" id="6625999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626004">t</span><span class="op" id="6626005">.</span><span class="ident" id="6626006">Fatalf</span><span class="op" id="6626012">(</span><span class="string" id="6626013">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6626045">,</span>&nbsp;<span class="ident" id="6626047">err</span><span class="op" id="6626050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626054">}</span>&nbsp;<span class="keyword" id="6626056">else</span>&nbsp;<span class="op" id="6626061">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626066">time</span><span class="op" id="6626070">.</span><span class="ident" id="6626071">Sleep</span><span class="op" id="6626076">(</span><span class="num" id="6626077">3</span>&nbsp;<span class="op" id="6626079">*</span>&nbsp;<span class="ident" id="6626081">time</span><span class="op" id="6626085">.</span><span class="ident" id="6626086">Millisecond</span><span class="op" id="6626097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626105">ift2</span><span class="op" id="6626109">,</span>&nbsp;<span class="ident" id="6626111">err</span>&nbsp;<span class="op" id="6626115">:=</span>&nbsp;<span class="ident" id="6626118">Interfaces</span><span class="op" id="6626128">(</span><span class="op" id="6626129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626133">if</span>&nbsp;<span class="ident" id="6626136">err</span>&nbsp;<span class="op" id="6626140">!=</span>&nbsp;<span class="ident" id="6626143">nil</span>&nbsp;<span class="op" id="6626147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626152">ti</span><span class="op" id="6626154">.</span><span class="ident" id="6626155">teardown</span><span class="op" id="6626163">(</span><span class="op" id="6626164">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626169">t</span><span class="op" id="6626170">.</span><span class="ident" id="6626171">Fatalf</span><span class="op" id="6626177">(</span><span class="string" id="6626178">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6626201">,</span>&nbsp;<span class="ident" id="6626203">err</span><span class="op" id="6626206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626214">if</span>&nbsp;<span class="builtinfunc" id="6626217">len</span><span class="op" id="6626220">(</span><span class="ident" id="6626221">ift2</span><span class="op" id="6626225">)</span>&nbsp;<span class="op" id="6626227">&lt;=</span>&nbsp;<span class="builtinfunc" id="6626230">len</span><span class="op" id="6626233">(</span><span class="ident" id="6626234">ift1</span><span class="op" id="6626238">)</span>&nbsp;<span class="op" id="6626240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626245">for</span>&nbsp;<span class="ident" id="6626249">_</span><span class="op" id="6626250">,</span>&nbsp;<span class="ident" id="6626252">ifi</span>&nbsp;<span class="op" id="6626256">:=</span>&nbsp;<span class="keyword" id="6626259">range</span>&nbsp;<span class="ident" id="6626265">ift1</span>&nbsp;<span class="op" id="6626270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626276">t</span><span class="op" id="6626277">.</span><span class="ident" id="6626278">Logf</span><span class="op" id="6626282">(</span><span class="string" id="6626283">&#34;before:&nbsp;%v&#34;</span><span class="op" id="6626295">,</span>&nbsp;<span class="ident" id="6626297">ifi</span><span class="op" id="6626300">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626310">for</span>&nbsp;<span class="ident" id="6626314">_</span><span class="op" id="6626315">,</span>&nbsp;<span class="ident" id="6626317">ifi</span>&nbsp;<span class="op" id="6626321">:=</span>&nbsp;<span class="keyword" id="6626324">range</span>&nbsp;<span class="ident" id="6626330">ift2</span>&nbsp;<span class="op" id="6626335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626341">t</span><span class="op" id="6626342">.</span><span class="ident" id="6626343">Logf</span><span class="op" id="6626347">(</span><span class="string" id="6626348">&#34;after:&nbsp;%v&#34;</span><span class="op" id="6626359">,</span>&nbsp;<span class="ident" id="6626361">ifi</span><span class="op" id="6626364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626374">ti</span><span class="op" id="6626376">.</span><span class="ident" id="6626377">teardown</span><span class="op" id="6626385">(</span><span class="op" id="6626386">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626391">t</span><span class="op" id="6626392">.</span><span class="ident" id="6626393">Fatalf</span><span class="op" id="6626399">(</span><span class="string" id="6626400">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="6626420">,</span>&nbsp;<span class="builtinfunc" id="6626422">len</span><span class="op" id="6626425">(</span><span class="ident" id="6626426">ift2</span><span class="op" id="6626430">)</span><span class="op" id="6626431">,</span>&nbsp;<span class="builtinfunc" id="6626433">len</span><span class="op" id="6626436">(</span><span class="ident" id="6626437">ift1</span><span class="op" id="6626441">)</span><span class="op" id="6626442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626450">if</span>&nbsp;<span class="ident" id="6626453">err</span>&nbsp;<span class="op" id="6626457">:=</span>&nbsp;<span class="ident" id="6626460">ti</span><span class="op" id="6626462">.</span><span class="ident" id="6626463">teardown</span><span class="op" id="6626471">(</span><span class="op" id="6626472">)</span><span class="op" id="6626473">;</span>&nbsp;<span class="ident" id="6626475">err</span>&nbsp;<span class="op" id="6626479">!=</span>&nbsp;<span class="ident" id="6626482">nil</span>&nbsp;<span class="op" id="6626486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626491">t</span><span class="op" id="6626492">.</span><span class="ident" id="6626493">Fatalf</span><span class="op" id="6626499">(</span><span class="string" id="6626500">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6626535">,</span>&nbsp;<span class="ident" id="6626537">err</span><span class="op" id="6626540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626544">}</span>&nbsp;<span class="keyword" id="6626546">else</span>&nbsp;<span class="op" id="6626551">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626556">time</span><span class="op" id="6626560">.</span><span class="ident" id="6626561">Sleep</span><span class="op" id="6626566">(</span><span class="num" id="6626567">3</span>&nbsp;<span class="op" id="6626569">*</span>&nbsp;<span class="ident" id="6626571">time</span><span class="op" id="6626575">.</span><span class="ident" id="6626576">Millisecond</span><span class="op" id="6626587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626595">ift3</span><span class="op" id="6626599">,</span>&nbsp;<span class="ident" id="6626601">err</span>&nbsp;<span class="op" id="6626605">:=</span>&nbsp;<span class="ident" id="6626608">Interfaces</span><span class="op" id="6626618">(</span><span class="op" id="6626619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626623">if</span>&nbsp;<span class="ident" id="6626626">err</span>&nbsp;<span class="op" id="6626630">!=</span>&nbsp;<span class="ident" id="6626633">nil</span>&nbsp;<span class="op" id="6626637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626642">t</span><span class="op" id="6626643">.</span><span class="ident" id="6626644">Fatalf</span><span class="op" id="6626650">(</span><span class="string" id="6626651">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6626674">,</span>&nbsp;<span class="ident" id="6626676">err</span><span class="op" id="6626679">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626687">if</span>&nbsp;<span class="builtinfunc" id="6626690">len</span><span class="op" id="6626693">(</span><span class="ident" id="6626694">ift3</span><span class="op" id="6626698">)</span>&nbsp;<span class="op" id="6626700">&gt;=</span>&nbsp;<span class="builtinfunc" id="6626703">len</span><span class="op" id="6626706">(</span><span class="ident" id="6626707">ift2</span><span class="op" id="6626711">)</span>&nbsp;<span class="op" id="6626713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626718">for</span>&nbsp;<span class="ident" id="6626722">_</span><span class="op" id="6626723">,</span>&nbsp;<span class="ident" id="6626725">ifi</span>&nbsp;<span class="op" id="6626729">:=</span>&nbsp;<span class="keyword" id="6626732">range</span>&nbsp;<span class="ident" id="6626738">ift2</span>&nbsp;<span class="op" id="6626743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626749">t</span><span class="op" id="6626750">.</span><span class="ident" id="6626751">Logf</span><span class="op" id="6626755">(</span><span class="string" id="6626756">&#34;before:&nbsp;%v&#34;</span><span class="op" id="6626768">,</span>&nbsp;<span class="ident" id="6626770">ifi</span><span class="op" id="6626773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626778">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6626783">for</span>&nbsp;<span class="ident" id="6626787">_</span><span class="op" id="6626788">,</span>&nbsp;<span class="ident" id="6626790">ifi</span>&nbsp;<span class="op" id="6626794">:=</span>&nbsp;<span class="keyword" id="6626797">range</span>&nbsp;<span class="ident" id="6626803">ift3</span>&nbsp;<span class="op" id="6626808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626814">t</span><span class="op" id="6626815">.</span><span class="ident" id="6626816">Logf</span><span class="op" id="6626820">(</span><span class="string" id="6626821">&#34;after:&nbsp;%v&#34;</span><span class="op" id="6626832">,</span>&nbsp;<span class="ident" id="6626834">ifi</span><span class="op" id="6626837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6626847">t</span><span class="op" id="6626848">.</span><span class="ident" id="6626849">Fatalf</span><span class="op" id="6626855">(</span><span class="string" id="6626856">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="6626876">,</span>&nbsp;<span class="builtinfunc" id="6626878">len</span><span class="op" id="6626881">(</span><span class="ident" id="6626882">ift3</span><span class="op" id="6626886">)</span><span class="op" id="6626887">,</span>&nbsp;<span class="builtinfunc" id="6626889">len</span><span class="op" id="6626892">(</span><span class="ident" id="6626893">ift2</span><span class="op" id="6626897">)</span><span class="op" id="6626898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626902">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6626905">}</span><br>
<span class="lineno"></span><span class="op" id="6626907">}</span>
</div>
</body>
</html>
