<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>fmt</h2>
<ul>
<li><a href="/gostd/fmt/doc.go.html">doc.go</a></li>
<li><a href="/gostd/fmt/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/fmt/fmt_test.go.html">fmt_test.go</a></li>
<li><a href="/gostd/fmt/format.go.html">format.go</a></li>
<li><a href="/gostd/fmt/print.go.html">print.go</a></li>
<li><a href="/gostd/fmt/scan.go.html" class="current">scan.go</a></li>
<li><a href="/gostd/fmt/scan_test.go.html">scan_test.go</a></li>
<li><a href="/gostd/fmt/stringer_test.go.html">stringer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2426105">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2426160">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2426214">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2426265">package</span>&nbsp;<span class="ident" id="2426273">fmt</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2426278">import</span>&nbsp;<span class="op" id="2426285">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426288">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426298">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426304">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426312">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426318">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426329">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426340">&#34;sync&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2426348">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2426363">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2426366">//&nbsp;runeUnreader&nbsp;is&nbsp;the&nbsp;interface&nbsp;to&nbsp;something&nbsp;that&nbsp;can&nbsp;unread&nbsp;runes.</span><br>
<span class="lineno"></span><span class="comment" id="2426435">//&nbsp;If&nbsp;the&nbsp;object&nbsp;provided&nbsp;to&nbsp;Scan&nbsp;does&nbsp;not&nbsp;satisfy&nbsp;this&nbsp;interface,</span><br>
<span class="lineno">20</span><span class="comment" id="2426502">//&nbsp;a&nbsp;local&nbsp;buffer&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;back&nbsp;up&nbsp;the&nbsp;input,&nbsp;but&nbsp;its&nbsp;contents</span><br>
<span class="lineno"></span><span class="comment" id="2426572">//&nbsp;will&nbsp;be&nbsp;lost&nbsp;when&nbsp;Scan&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="2426607">type</span>&nbsp;<span class="ident" id="2426612">runeUnreader</span>&nbsp;<span class="keyword" id="2426625">interface</span>&nbsp;<span class="op" id="2426635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2426638">UnreadRune</span><span class="op" id="2426648">(</span><span class="op" id="2426649">)</span>&nbsp;<span class="builtintype" id="2426651">error</span><br>
<span class="lineno"></span><span class="op" id="2426657">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="2426660">//&nbsp;ScanState&nbsp;represents&nbsp;the&nbsp;scanner&nbsp;state&nbsp;passed&nbsp;to&nbsp;custom&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="comment" id="2426729">//&nbsp;Scanners&nbsp;may&nbsp;do&nbsp;rune-at-a-time&nbsp;scanning&nbsp;or&nbsp;ask&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="2426793">//&nbsp;to&nbsp;discover&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2426840">type</span>&nbsp;<span class="ident" id="2426845">ScanState</span>&nbsp;<span class="keyword" id="2426855">interface</span>&nbsp;<span class="op" id="2426865">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2426868">//&nbsp;ReadRune&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;(Unicode&nbsp;code&nbsp;point)&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2426938">//&nbsp;If&nbsp;invoked&nbsp;during&nbsp;Scanln,&nbsp;Fscanln,&nbsp;or&nbsp;Sscanln,&nbsp;ReadRune()&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427005">//&nbsp;return&nbsp;EOF&nbsp;after&nbsp;returning&nbsp;the&nbsp;first&nbsp;&#39;\n&#39;&nbsp;or&nbsp;when&nbsp;reading&nbsp;beyond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427074">//&nbsp;the&nbsp;specified&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427099">ReadRune</span><span class="op" id="2427107">(</span><span class="op" id="2427108">)</span>&nbsp;<span class="op" id="2427110">(</span><span class="ident" id="2427111">r</span>&nbsp;<span class="builtintype" id="2427113">rune</span><span class="op" id="2427117">,</span>&nbsp;<span class="ident" id="2427119">size</span>&nbsp;<span class="builtintype" id="2427124">int</span><span class="op" id="2427127">,</span>&nbsp;<span class="ident" id="2427129">err</span>&nbsp;<span class="builtintype" id="2427133">error</span><span class="op" id="2427138">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427141">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427214">UnreadRune</span><span class="op" id="2427224">(</span><span class="op" id="2427225">)</span>&nbsp;<span class="builtintype" id="2427227">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427234">//&nbsp;SkipSpace&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input.&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427304">//&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427379">//&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as&nbsp;EOF.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427412">SkipSpace</span><span class="op" id="2427421">(</span><span class="op" id="2427422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427425">//&nbsp;Token&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input&nbsp;if&nbsp;skipSpace&nbsp;is&nbsp;true,&nbsp;then&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427499">//&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c).&nbsp;&nbsp;If&nbsp;f&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427563">//&nbsp;!unicode.IsSpace(c)&nbsp;is&nbsp;used;&nbsp;that&nbsp;is,&nbsp;the&nbsp;token&nbsp;will&nbsp;hold&nbsp;non-space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427635">//&nbsp;characters.&nbsp;&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427708">//&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427781">//&nbsp;EOF.&nbsp;&nbsp;The&nbsp;returned&nbsp;slice&nbsp;points&nbsp;to&nbsp;shared&nbsp;data&nbsp;that&nbsp;may&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427856">//&nbsp;by&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;Token,&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;Scan&nbsp;function&nbsp;using&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2427933">//&nbsp;as&nbsp;input,&nbsp;or&nbsp;when&nbsp;the&nbsp;calling&nbsp;Scan&nbsp;method&nbsp;returns.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2427988">Token</span><span class="op" id="2427993">(</span><span class="ident" id="2427994">skipSpace</span>&nbsp;<span class="builtintype" id="2428004">bool</span><span class="op" id="2428008">,</span>&nbsp;<span class="ident" id="2428010">f</span>&nbsp;<span class="keyword" id="2428012">func</span><span class="op" id="2428016">(</span><span class="builtintype" id="2428017">rune</span><span class="op" id="2428021">)</span>&nbsp;<span class="builtintype" id="2428023">bool</span><span class="op" id="2428027">)</span>&nbsp;<span class="op" id="2428029">(</span><span class="ident" id="2428030">token</span>&nbsp;<span class="op" id="2428036">[</span><span class="op" id="2428037">]</span><span class="builtintype" id="2428038">byte</span><span class="op" id="2428042">,</span>&nbsp;<span class="ident" id="2428044">err</span>&nbsp;<span class="builtintype" id="2428048">error</span><span class="op" id="2428053">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428056">//&nbsp;Width&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;width&nbsp;option&nbsp;and&nbsp;whether&nbsp;it&nbsp;has&nbsp;been&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428133">//&nbsp;The&nbsp;unit&nbsp;is&nbsp;Unicode&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428170">Width</span><span class="op" id="2428175">(</span><span class="op" id="2428176">)</span>&nbsp;<span class="op" id="2428178">(</span><span class="ident" id="2428179">wid</span>&nbsp;<span class="builtintype" id="2428183">int</span><span class="op" id="2428186">,</span>&nbsp;<span class="ident" id="2428188">ok</span>&nbsp;<span class="builtintype" id="2428191">bool</span><span class="op" id="2428195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428198">//&nbsp;Because&nbsp;ReadRune&nbsp;is&nbsp;implemented&nbsp;by&nbsp;the&nbsp;interface,&nbsp;Read&nbsp;should&nbsp;never&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428273">//&nbsp;called&nbsp;by&nbsp;the&nbsp;scanning&nbsp;routines&nbsp;and&nbsp;a&nbsp;valid&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2428339">//&nbsp;ScanState&nbsp;may&nbsp;choose&nbsp;always&nbsp;to&nbsp;return&nbsp;an&nbsp;error&nbsp;from&nbsp;Read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428401">Read</span><span class="op" id="2428405">(</span><span class="ident" id="2428406">buf</span>&nbsp;<span class="op" id="2428410">[</span><span class="op" id="2428411">]</span><span class="builtintype" id="2428412">byte</span><span class="op" id="2428416">)</span>&nbsp;<span class="op" id="2428418">(</span><span class="ident" id="2428419">n</span>&nbsp;<span class="builtintype" id="2428421">int</span><span class="op" id="2428424">,</span>&nbsp;<span class="ident" id="2428426">err</span>&nbsp;<span class="builtintype" id="2428430">error</span><span class="op" id="2428435">)</span><br>
<span class="lineno"></span><span class="op" id="2428437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2428440">//&nbsp;Scanner&nbsp;is&nbsp;implemented&nbsp;by&nbsp;any&nbsp;value&nbsp;that&nbsp;has&nbsp;a&nbsp;Scan&nbsp;method,&nbsp;which&nbsp;scans</span><br>
<span class="lineno">60</span><span class="comment" id="2428515">//&nbsp;the&nbsp;input&nbsp;for&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;value&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2428591">//&nbsp;receiver,&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;be&nbsp;useful.&nbsp;&nbsp;The&nbsp;Scan&nbsp;method&nbsp;is&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="2428669">//&nbsp;for&nbsp;any&nbsp;argument&nbsp;to&nbsp;Scan,&nbsp;Scanf,&nbsp;or&nbsp;Scanln&nbsp;that&nbsp;implements&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2428735">type</span>&nbsp;<span class="ident" id="2428740">Scanner</span>&nbsp;<span class="keyword" id="2428748">interface</span>&nbsp;<span class="op" id="2428758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2428761">Scan</span><span class="op" id="2428765">(</span><span class="ident" id="2428766">state</span>&nbsp;<span class="ident" id="2428772">ScanState</span><span class="op" id="2428781">,</span>&nbsp;<span class="ident" id="2428783">verb</span>&nbsp;<span class="builtintype" id="2428788">rune</span><span class="op" id="2428792">)</span>&nbsp;<span class="builtintype" id="2428794">error</span><br>
<span class="lineno">65</span><span class="op" id="2428800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2428803">//&nbsp;Scan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="2428867">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count</span><br>
<span class="lineno"></span><span class="comment" id="2428936">//&nbsp;as&nbsp;space.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno">70</span><span class="comment" id="2429003">//&nbsp;If&nbsp;that&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2429073">func</span>&nbsp;<span class="ident" id="2429078">Scan</span><span class="op" id="2429082">(</span><span class="ident" id="2429083">a</span>&nbsp;<span class="op" id="2429085">...</span><span class="keyword" id="2429088">interface</span><span class="op" id="2429097">{</span><span class="op" id="2429098">}</span><span class="op" id="2429099">)</span>&nbsp;<span class="op" id="2429101">(</span><span class="ident" id="2429102">n</span>&nbsp;<span class="builtintype" id="2429104">int</span><span class="op" id="2429107">,</span>&nbsp;<span class="ident" id="2429109">err</span>&nbsp;<span class="builtintype" id="2429113">error</span><span class="op" id="2429118">)</span>&nbsp;<span class="op" id="2429120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429123">return</span>&nbsp;<span class="ident" id="2429130">Fscan</span><span class="op" id="2429135">(</span><span class="ident" id="2429136">os</span><span class="op" id="2429138">.</span><span class="ident" id="2429139">Stdin</span><span class="op" id="2429144">,</span>&nbsp;<span class="ident" id="2429146">a</span><span class="op" id="2429147">...</span><span class="op" id="2429150">)</span><br>
<span class="lineno"></span><span class="op" id="2429152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2429155">//&nbsp;Scanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Scan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2429221">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2429277">func</span>&nbsp;<span class="ident" id="2429282">Scanln</span><span class="op" id="2429288">(</span><span class="ident" id="2429289">a</span>&nbsp;<span class="op" id="2429291">...</span><span class="keyword" id="2429294">interface</span><span class="op" id="2429303">{</span><span class="op" id="2429304">}</span><span class="op" id="2429305">)</span>&nbsp;<span class="op" id="2429307">(</span><span class="ident" id="2429308">n</span>&nbsp;<span class="builtintype" id="2429310">int</span><span class="op" id="2429313">,</span>&nbsp;<span class="ident" id="2429315">err</span>&nbsp;<span class="builtintype" id="2429319">error</span><span class="op" id="2429324">)</span>&nbsp;<span class="op" id="2429326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429329">return</span>&nbsp;<span class="ident" id="2429336">Fscanln</span><span class="op" id="2429343">(</span><span class="ident" id="2429344">os</span><span class="op" id="2429346">.</span><span class="ident" id="2429347">Stdin</span><span class="op" id="2429352">,</span>&nbsp;<span class="ident" id="2429354">a</span><span class="op" id="2429355">...</span><span class="op" id="2429358">)</span><br>
<span class="lineno"></span><span class="op" id="2429360">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="2429363">//&nbsp;Scanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="2429428">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2429497">//&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="2429566">func</span>&nbsp;<span class="ident" id="2429571">Scanf</span><span class="op" id="2429576">(</span><span class="ident" id="2429577">format</span>&nbsp;<span class="builtintype" id="2429584">string</span><span class="op" id="2429590">,</span>&nbsp;<span class="ident" id="2429592">a</span>&nbsp;<span class="op" id="2429594">...</span><span class="keyword" id="2429597">interface</span><span class="op" id="2429606">{</span><span class="op" id="2429607">}</span><span class="op" id="2429608">)</span>&nbsp;<span class="op" id="2429610">(</span><span class="ident" id="2429611">n</span>&nbsp;<span class="builtintype" id="2429613">int</span><span class="op" id="2429616">,</span>&nbsp;<span class="ident" id="2429618">err</span>&nbsp;<span class="builtintype" id="2429622">error</span><span class="op" id="2429627">)</span>&nbsp;<span class="op" id="2429629">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429632">return</span>&nbsp;<span class="ident" id="2429639">Fscanf</span><span class="op" id="2429645">(</span><span class="ident" id="2429646">os</span><span class="op" id="2429648">.</span><span class="ident" id="2429649">Stdin</span><span class="op" id="2429654">,</span>&nbsp;<span class="ident" id="2429656">format</span><span class="op" id="2429662">,</span>&nbsp;<span class="ident" id="2429664">a</span><span class="op" id="2429665">...</span><span class="op" id="2429668">)</span><br>
<span class="lineno"></span><span class="op" id="2429670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2429673">type</span>&nbsp;<span class="ident" id="2429678">stringReader</span>&nbsp;<span class="builtintype" id="2429691">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="2429699">func</span>&nbsp;<span class="op" id="2429704">(</span><span class="ident" id="2429705">r</span>&nbsp;<span class="op" id="2429707">*</span><span class="ident" id="2429708">stringReader</span><span class="op" id="2429720">)</span>&nbsp;<span class="ident" id="2429722">Read</span><span class="op" id="2429726">(</span><span class="ident" id="2429727">b</span>&nbsp;<span class="op" id="2429729">[</span><span class="op" id="2429730">]</span><span class="builtintype" id="2429731">byte</span><span class="op" id="2429735">)</span>&nbsp;<span class="op" id="2429737">(</span><span class="ident" id="2429738">n</span>&nbsp;<span class="builtintype" id="2429740">int</span><span class="op" id="2429743">,</span>&nbsp;<span class="ident" id="2429745">err</span>&nbsp;<span class="builtintype" id="2429749">error</span><span class="op" id="2429754">)</span>&nbsp;<span class="op" id="2429756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2429759">n</span>&nbsp;<span class="op" id="2429761">=</span>&nbsp;<span class="builtinfunc" id="2429763">copy</span><span class="op" id="2429767">(</span><span class="ident" id="2429768">b</span><span class="op" id="2429769">,</span>&nbsp;<span class="op" id="2429771">*</span><span class="ident" id="2429772">r</span><span class="op" id="2429773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2429776">*</span><span class="ident" id="2429777">r</span>&nbsp;<span class="op" id="2429779">=</span>&nbsp;<span class="op" id="2429781">(</span><span class="op" id="2429782">*</span><span class="ident" id="2429783">r</span><span class="op" id="2429784">)</span><span class="op" id="2429785">[</span><span class="ident" id="2429786">n</span><span class="op" id="2429787">:</span><span class="op" id="2429788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429791">if</span>&nbsp;<span class="ident" id="2429794">n</span>&nbsp;<span class="op" id="2429796">==</span>&nbsp;<span class="num" id="2429799">0</span>&nbsp;<span class="op" id="2429801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2429805">err</span>&nbsp;<span class="op" id="2429809">=</span>&nbsp;<span class="ident" id="2429811">io</span><span class="op" id="2429813">.</span><span class="ident" id="2429814">EOF</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2429819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2429822">return</span><br>
<span class="lineno"></span><span class="op" id="2429829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2429832">//&nbsp;Sscan&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno">100</span><span class="comment" id="2429903">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2429970">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="2430040">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2430094">func</span>&nbsp;<span class="ident" id="2430099">Sscan</span><span class="op" id="2430104">(</span><span class="ident" id="2430105">str</span>&nbsp;<span class="builtintype" id="2430109">string</span><span class="op" id="2430115">,</span>&nbsp;<span class="ident" id="2430117">a</span>&nbsp;<span class="op" id="2430119">...</span><span class="keyword" id="2430122">interface</span><span class="op" id="2430131">{</span><span class="op" id="2430132">}</span><span class="op" id="2430133">)</span>&nbsp;<span class="op" id="2430135">(</span><span class="ident" id="2430136">n</span>&nbsp;<span class="builtintype" id="2430138">int</span><span class="op" id="2430141">,</span>&nbsp;<span class="ident" id="2430143">err</span>&nbsp;<span class="builtintype" id="2430147">error</span><span class="op" id="2430152">)</span>&nbsp;<span class="op" id="2430154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2430157">return</span>&nbsp;<span class="ident" id="2430164">Fscan</span><span class="op" id="2430169">(</span><span class="op" id="2430170">(</span><span class="op" id="2430171">*</span><span class="ident" id="2430172">stringReader</span><span class="op" id="2430184">)</span><span class="op" id="2430185">(</span><span class="op" id="2430186">&amp;</span><span class="ident" id="2430187">str</span><span class="op" id="2430190">)</span><span class="op" id="2430191">,</span>&nbsp;<span class="ident" id="2430193">a</span><span class="op" id="2430194">...</span><span class="op" id="2430197">)</span><br>
<span class="lineno">105</span><span class="op" id="2430199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2430202">//&nbsp;Sscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Sscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2430270">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2430326">func</span>&nbsp;<span class="ident" id="2430331">Sscanln</span><span class="op" id="2430338">(</span><span class="ident" id="2430339">str</span>&nbsp;<span class="builtintype" id="2430343">string</span><span class="op" id="2430349">,</span>&nbsp;<span class="ident" id="2430351">a</span>&nbsp;<span class="op" id="2430353">...</span><span class="keyword" id="2430356">interface</span><span class="op" id="2430365">{</span><span class="op" id="2430366">}</span><span class="op" id="2430367">)</span>&nbsp;<span class="op" id="2430369">(</span><span class="ident" id="2430370">n</span>&nbsp;<span class="builtintype" id="2430372">int</span><span class="op" id="2430375">,</span>&nbsp;<span class="ident" id="2430377">err</span>&nbsp;<span class="builtintype" id="2430381">error</span><span class="op" id="2430386">)</span>&nbsp;<span class="op" id="2430388">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2430391">return</span>&nbsp;<span class="ident" id="2430398">Fscanln</span><span class="op" id="2430405">(</span><span class="op" id="2430406">(</span><span class="op" id="2430407">*</span><span class="ident" id="2430408">stringReader</span><span class="op" id="2430420">)</span><span class="op" id="2430421">(</span><span class="op" id="2430422">&amp;</span><span class="ident" id="2430423">str</span><span class="op" id="2430426">)</span><span class="op" id="2430427">,</span>&nbsp;<span class="ident" id="2430429">a</span><span class="op" id="2430430">...</span><span class="op" id="2430433">)</span><br>
<span class="lineno"></span><span class="op" id="2430435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2430438">//&nbsp;Sscanf&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2430510">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno">115</span><span class="comment" id="2430579">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="2430631">func</span>&nbsp;<span class="ident" id="2430636">Sscanf</span><span class="op" id="2430642">(</span><span class="ident" id="2430643">str</span>&nbsp;<span class="builtintype" id="2430647">string</span><span class="op" id="2430653">,</span>&nbsp;<span class="ident" id="2430655">format</span>&nbsp;<span class="builtintype" id="2430662">string</span><span class="op" id="2430668">,</span>&nbsp;<span class="ident" id="2430670">a</span>&nbsp;<span class="op" id="2430672">...</span><span class="keyword" id="2430675">interface</span><span class="op" id="2430684">{</span><span class="op" id="2430685">}</span><span class="op" id="2430686">)</span>&nbsp;<span class="op" id="2430688">(</span><span class="ident" id="2430689">n</span>&nbsp;<span class="builtintype" id="2430691">int</span><span class="op" id="2430694">,</span>&nbsp;<span class="ident" id="2430696">err</span>&nbsp;<span class="builtintype" id="2430700">error</span><span class="op" id="2430705">)</span>&nbsp;<span class="op" id="2430707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2430710">return</span>&nbsp;<span class="ident" id="2430717">Fscanf</span><span class="op" id="2430723">(</span><span class="op" id="2430724">(</span><span class="op" id="2430725">*</span><span class="ident" id="2430726">stringReader</span><span class="op" id="2430738">)</span><span class="op" id="2430739">(</span><span class="op" id="2430740">&amp;</span><span class="ident" id="2430741">str</span><span class="op" id="2430744">)</span><span class="op" id="2430745">,</span>&nbsp;<span class="ident" id="2430747">format</span><span class="op" id="2430753">,</span>&nbsp;<span class="ident" id="2430755">a</span><span class="op" id="2430756">...</span><span class="op" id="2430759">)</span><br>
<span class="lineno"></span><span class="op" id="2430761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="2430764">//&nbsp;Fscan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2430832">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2430899">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="2430969">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2431023">func</span>&nbsp;<span class="ident" id="2431028">Fscan</span><span class="op" id="2431033">(</span><span class="ident" id="2431034">r</span>&nbsp;<span class="ident" id="2431036">io</span><span class="op" id="2431038">.</span><span class="ident" id="2431039">Reader</span><span class="op" id="2431045">,</span>&nbsp;<span class="ident" id="2431047">a</span>&nbsp;<span class="op" id="2431049">...</span><span class="keyword" id="2431052">interface</span><span class="op" id="2431061">{</span><span class="op" id="2431062">}</span><span class="op" id="2431063">)</span>&nbsp;<span class="op" id="2431065">(</span><span class="ident" id="2431066">n</span>&nbsp;<span class="builtintype" id="2431068">int</span><span class="op" id="2431071">,</span>&nbsp;<span class="ident" id="2431073">err</span>&nbsp;<span class="builtintype" id="2431077">error</span><span class="op" id="2431082">)</span>&nbsp;<span class="op" id="2431084">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431087">s</span><span class="op" id="2431088">,</span>&nbsp;<span class="ident" id="2431090">old</span>&nbsp;<span class="op" id="2431094">:=</span>&nbsp;<span class="ident" id="2431097">newScanState</span><span class="op" id="2431109">(</span><span class="ident" id="2431110">r</span><span class="op" id="2431111">,</span>&nbsp;<span class="builtintype" id="2431113">true</span><span class="op" id="2431117">,</span>&nbsp;<span class="builtintype" id="2431119">false</span><span class="op" id="2431124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431127">n</span><span class="op" id="2431128">,</span>&nbsp;<span class="ident" id="2431130">err</span>&nbsp;<span class="op" id="2431134">=</span>&nbsp;<span class="ident" id="2431136">s</span><span class="op" id="2431137">.</span><span class="ident" id="2431138">doScan</span><span class="op" id="2431144">(</span><span class="ident" id="2431145">a</span><span class="op" id="2431146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431149">s</span><span class="op" id="2431150">.</span><span class="ident" id="2431151">free</span><span class="op" id="2431155">(</span><span class="ident" id="2431156">old</span><span class="op" id="2431159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2431162">return</span><br>
<span class="lineno"></span><span class="op" id="2431169">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="2431172">//&nbsp;Fscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Fscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2431240">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2431296">func</span>&nbsp;<span class="ident" id="2431301">Fscanln</span><span class="op" id="2431308">(</span><span class="ident" id="2431309">r</span>&nbsp;<span class="ident" id="2431311">io</span><span class="op" id="2431313">.</span><span class="ident" id="2431314">Reader</span><span class="op" id="2431320">,</span>&nbsp;<span class="ident" id="2431322">a</span>&nbsp;<span class="op" id="2431324">...</span><span class="keyword" id="2431327">interface</span><span class="op" id="2431336">{</span><span class="op" id="2431337">}</span><span class="op" id="2431338">)</span>&nbsp;<span class="op" id="2431340">(</span><span class="ident" id="2431341">n</span>&nbsp;<span class="builtintype" id="2431343">int</span><span class="op" id="2431346">,</span>&nbsp;<span class="ident" id="2431348">err</span>&nbsp;<span class="builtintype" id="2431352">error</span><span class="op" id="2431357">)</span>&nbsp;<span class="op" id="2431359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431362">s</span><span class="op" id="2431363">,</span>&nbsp;<span class="ident" id="2431365">old</span>&nbsp;<span class="op" id="2431369">:=</span>&nbsp;<span class="ident" id="2431372">newScanState</span><span class="op" id="2431384">(</span><span class="ident" id="2431385">r</span><span class="op" id="2431386">,</span>&nbsp;<span class="builtintype" id="2431388">false</span><span class="op" id="2431393">,</span>&nbsp;<span class="builtintype" id="2431395">true</span><span class="op" id="2431399">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431402">n</span><span class="op" id="2431403">,</span>&nbsp;<span class="ident" id="2431405">err</span>&nbsp;<span class="op" id="2431409">=</span>&nbsp;<span class="ident" id="2431411">s</span><span class="op" id="2431412">.</span><span class="ident" id="2431413">doScan</span><span class="op" id="2431419">(</span><span class="ident" id="2431420">a</span><span class="op" id="2431421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431424">s</span><span class="op" id="2431425">.</span><span class="ident" id="2431426">free</span><span class="op" id="2431430">(</span><span class="ident" id="2431431">old</span><span class="op" id="2431434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2431437">return</span><br>
<span class="lineno"></span><span class="op" id="2431444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="2431447">//&nbsp;Fscanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2431516">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2431585">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="2431637">func</span>&nbsp;<span class="ident" id="2431642">Fscanf</span><span class="op" id="2431648">(</span><span class="ident" id="2431649">r</span>&nbsp;<span class="ident" id="2431651">io</span><span class="op" id="2431653">.</span><span class="ident" id="2431654">Reader</span><span class="op" id="2431660">,</span>&nbsp;<span class="ident" id="2431662">format</span>&nbsp;<span class="builtintype" id="2431669">string</span><span class="op" id="2431675">,</span>&nbsp;<span class="ident" id="2431677">a</span>&nbsp;<span class="op" id="2431679">...</span><span class="keyword" id="2431682">interface</span><span class="op" id="2431691">{</span><span class="op" id="2431692">}</span><span class="op" id="2431693">)</span>&nbsp;<span class="op" id="2431695">(</span><span class="ident" id="2431696">n</span>&nbsp;<span class="builtintype" id="2431698">int</span><span class="op" id="2431701">,</span>&nbsp;<span class="ident" id="2431703">err</span>&nbsp;<span class="builtintype" id="2431707">error</span><span class="op" id="2431712">)</span>&nbsp;<span class="op" id="2431714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431717">s</span><span class="op" id="2431718">,</span>&nbsp;<span class="ident" id="2431720">old</span>&nbsp;<span class="op" id="2431724">:=</span>&nbsp;<span class="ident" id="2431727">newScanState</span><span class="op" id="2431739">(</span><span class="ident" id="2431740">r</span><span class="op" id="2431741">,</span>&nbsp;<span class="builtintype" id="2431743">false</span><span class="op" id="2431748">,</span>&nbsp;<span class="builtintype" id="2431750">false</span><span class="op" id="2431755">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431758">n</span><span class="op" id="2431759">,</span>&nbsp;<span class="ident" id="2431761">err</span>&nbsp;<span class="op" id="2431765">=</span>&nbsp;<span class="ident" id="2431767">s</span><span class="op" id="2431768">.</span><span class="ident" id="2431769">doScanf</span><span class="op" id="2431776">(</span><span class="ident" id="2431777">format</span><span class="op" id="2431783">,</span>&nbsp;<span class="ident" id="2431785">a</span><span class="op" id="2431786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431789">s</span><span class="op" id="2431790">.</span><span class="ident" id="2431791">free</span><span class="op" id="2431795">(</span><span class="ident" id="2431796">old</span><span class="op" id="2431799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2431802">return</span><br>
<span class="lineno"></span><span class="op" id="2431809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="2431812">//&nbsp;scanError&nbsp;represents&nbsp;an&nbsp;error&nbsp;generated&nbsp;by&nbsp;the&nbsp;scanning&nbsp;software.</span><br>
<span class="lineno"></span><span class="comment" id="2431881">//&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;unique&nbsp;signature&nbsp;to&nbsp;identify&nbsp;such&nbsp;errors&nbsp;when&nbsp;recovering.</span><br>
<span class="lineno"></span><span class="keyword" id="2431957">type</span>&nbsp;<span class="ident" id="2431962">scanError</span>&nbsp;<span class="keyword" id="2431972">struct</span>&nbsp;<span class="op" id="2431979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2431982">err</span>&nbsp;<span class="builtintype" id="2431986">error</span><br>
<span class="lineno"></span><span class="op" id="2431992">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="2431995">const</span>&nbsp;<span class="ident" id="2432001">eof</span>&nbsp;<span class="op" id="2432005">=</span>&nbsp;<span class="op" id="2432007">-</span><span class="num" id="2432008">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2432011">//&nbsp;ss&nbsp;is&nbsp;the&nbsp;internal&nbsp;implementation&nbsp;of&nbsp;ScanState.</span><br>
<span class="lineno"></span><span class="keyword" id="2432062">type</span>&nbsp;<span class="ident" id="2432067">ss</span>&nbsp;<span class="keyword" id="2432070">struct</span>&nbsp;<span class="op" id="2432077">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432080">rr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432089">io</span><span class="op" id="2432091">.</span><span class="ident" id="2432092">RuneReader</span>&nbsp;<span class="comment" id="2432103">//&nbsp;where&nbsp;to&nbsp;read&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432127">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432136">buffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2432150">//&nbsp;token&nbsp;accumulator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432172">peekRune</span>&nbsp;<span class="builtintype" id="2432181">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2432195">//&nbsp;one-rune&nbsp;lookahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432218">prevRune</span>&nbsp;<span class="builtintype" id="2432227">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2432241">//&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432276">count</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432285">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2432299">//&nbsp;runes&nbsp;consumed&nbsp;so&nbsp;far.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432326">atEOF</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432335">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2432349">//&nbsp;already&nbsp;read&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432370">ssave</span><br>
<span class="lineno"></span><span class="op" id="2432376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2432379">//&nbsp;ssave&nbsp;holds&nbsp;the&nbsp;parts&nbsp;of&nbsp;ss&nbsp;that&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno">170</span><span class="comment" id="2432426">//&nbsp;saved&nbsp;and&nbsp;restored&nbsp;on&nbsp;recursive&nbsp;scans.</span><br>
<span class="lineno"></span><span class="keyword" id="2432468">type</span>&nbsp;<span class="ident" id="2432473">ssave</span>&nbsp;<span class="keyword" id="2432479">struct</span>&nbsp;<span class="op" id="2432486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432489">validSave</span>&nbsp;<span class="builtintype" id="2432499">bool</span>&nbsp;<span class="comment" id="2432504">//&nbsp;is&nbsp;or&nbsp;was&nbsp;a&nbsp;part&nbsp;of&nbsp;an&nbsp;actual&nbsp;ss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432542">nlIsEnd</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432552">bool</span>&nbsp;<span class="comment" id="2432557">//&nbsp;whether&nbsp;newline&nbsp;terminates&nbsp;scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432593">nlIsSpace</span>&nbsp;<span class="builtintype" id="2432603">bool</span>&nbsp;<span class="comment" id="2432608">//&nbsp;whether&nbsp;newline&nbsp;counts&nbsp;as&nbsp;white&nbsp;space</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432650">argLimit</span>&nbsp;&nbsp;<span class="builtintype" id="2432660">int</span>&nbsp;&nbsp;<span class="comment" id="2432665">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count&nbsp;for&nbsp;this&nbsp;arg;&nbsp;argLimit&nbsp;&lt;=&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432723">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432733">int</span>&nbsp;&nbsp;<span class="comment" id="2432738">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2432765">maxWid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2432775">int</span>&nbsp;&nbsp;<span class="comment" id="2432780">//&nbsp;width&nbsp;of&nbsp;this&nbsp;arg.</span><br>
<span class="lineno"></span><span class="op" id="2432802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2432805">//&nbsp;The&nbsp;Read&nbsp;method&nbsp;is&nbsp;only&nbsp;in&nbsp;ScanState&nbsp;so&nbsp;that&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="2432863">//&nbsp;satisfies&nbsp;io.Reader.&nbsp;It&nbsp;will&nbsp;never&nbsp;be&nbsp;called&nbsp;when&nbsp;used&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2432924">//&nbsp;intended,&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;make&nbsp;it&nbsp;actually&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="2432983">func</span>&nbsp;<span class="op" id="2432988">(</span><span class="ident" id="2432989">s</span>&nbsp;<span class="op" id="2432991">*</span><span class="ident" id="2432992">ss</span><span class="op" id="2432994">)</span>&nbsp;<span class="ident" id="2432996">Read</span><span class="op" id="2433000">(</span><span class="ident" id="2433001">buf</span>&nbsp;<span class="op" id="2433005">[</span><span class="op" id="2433006">]</span><span class="builtintype" id="2433007">byte</span><span class="op" id="2433011">)</span>&nbsp;<span class="op" id="2433013">(</span><span class="ident" id="2433014">n</span>&nbsp;<span class="builtintype" id="2433016">int</span><span class="op" id="2433019">,</span>&nbsp;<span class="ident" id="2433021">err</span>&nbsp;<span class="builtintype" id="2433025">error</span><span class="op" id="2433030">)</span>&nbsp;<span class="op" id="2433032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433035">return</span>&nbsp;<span class="num" id="2433042">0</span><span class="op" id="2433043">,</span>&nbsp;<span class="ident" id="2433045">errors</span><span class="op" id="2433051">.</span><span class="ident" id="2433052">New</span><span class="op" id="2433055">(</span><span class="string" id="2433056">&#34;ScanState&#39;s&nbsp;Read&nbsp;should&nbsp;not&nbsp;be&nbsp;called.&nbsp;Use&nbsp;ReadRune&#34;</span><span class="op" id="2433109">)</span><br>
<span class="lineno">185</span><span class="op" id="2433111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2433114">func</span>&nbsp;<span class="op" id="2433119">(</span><span class="ident" id="2433120">s</span>&nbsp;<span class="op" id="2433122">*</span><span class="ident" id="2433123">ss</span><span class="op" id="2433125">)</span>&nbsp;<span class="ident" id="2433127">ReadRune</span><span class="op" id="2433135">(</span><span class="op" id="2433136">)</span>&nbsp;<span class="op" id="2433138">(</span><span class="ident" id="2433139">r</span>&nbsp;<span class="builtintype" id="2433141">rune</span><span class="op" id="2433145">,</span>&nbsp;<span class="ident" id="2433147">size</span>&nbsp;<span class="builtintype" id="2433152">int</span><span class="op" id="2433155">,</span>&nbsp;<span class="ident" id="2433157">err</span>&nbsp;<span class="builtintype" id="2433161">error</span><span class="op" id="2433166">)</span>&nbsp;<span class="op" id="2433168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433171">if</span>&nbsp;<span class="ident" id="2433174">s</span><span class="op" id="2433175">.</span><span class="ident" id="2433176">peekRune</span>&nbsp;<span class="op" id="2433185">&gt;=</span>&nbsp;<span class="num" id="2433188">0</span>&nbsp;<span class="op" id="2433190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433194">s</span><span class="op" id="2433195">.</span><span class="ident" id="2433196">count</span><span class="op" id="2433201">++</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433206">r</span>&nbsp;<span class="op" id="2433208">=</span>&nbsp;<span class="ident" id="2433210">s</span><span class="op" id="2433211">.</span><span class="ident" id="2433212">peekRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433223">size</span>&nbsp;<span class="op" id="2433228">=</span>&nbsp;<span class="ident" id="2433230">utf8</span><span class="op" id="2433234">.</span><span class="ident" id="2433235">RuneLen</span><span class="op" id="2433242">(</span><span class="ident" id="2433243">r</span><span class="op" id="2433244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433248">s</span><span class="op" id="2433249">.</span><span class="ident" id="2433250">prevRune</span>&nbsp;<span class="op" id="2433259">=</span>&nbsp;<span class="ident" id="2433261">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433265">s</span><span class="op" id="2433266">.</span><span class="ident" id="2433267">peekRune</span>&nbsp;<span class="op" id="2433276">=</span>&nbsp;<span class="op" id="2433278">-</span><span class="num" id="2433279">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433283">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433294">if</span>&nbsp;<span class="ident" id="2433297">s</span><span class="op" id="2433298">.</span><span class="ident" id="2433299">atEOF</span>&nbsp;<span class="op" id="2433305">||</span>&nbsp;<span class="ident" id="2433308">s</span><span class="op" id="2433309">.</span><span class="ident" id="2433310">nlIsEnd</span>&nbsp;<span class="op" id="2433318">&amp;&amp;</span>&nbsp;<span class="ident" id="2433321">s</span><span class="op" id="2433322">.</span><span class="ident" id="2433323">prevRune</span>&nbsp;<span class="op" id="2433332">==</span>&nbsp;<span class="string" id="2433335">&#39;\n&#39;</span>&nbsp;<span class="op" id="2433340">||</span>&nbsp;<span class="ident" id="2433343">s</span><span class="op" id="2433344">.</span><span class="ident" id="2433345">count</span>&nbsp;<span class="op" id="2433351">&gt;=</span>&nbsp;<span class="ident" id="2433354">s</span><span class="op" id="2433355">.</span><span class="ident" id="2433356">argLimit</span>&nbsp;<span class="op" id="2433365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433369">err</span>&nbsp;<span class="op" id="2433373">=</span>&nbsp;<span class="ident" id="2433375">io</span><span class="op" id="2433377">.</span><span class="ident" id="2433378">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433384">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433392">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433396">r</span><span class="op" id="2433397">,</span>&nbsp;<span class="ident" id="2433399">size</span><span class="op" id="2433403">,</span>&nbsp;<span class="ident" id="2433405">err</span>&nbsp;<span class="op" id="2433409">=</span>&nbsp;<span class="ident" id="2433411">s</span><span class="op" id="2433412">.</span><span class="ident" id="2433413">rr</span><span class="op" id="2433415">.</span><span class="ident" id="2433416">ReadRune</span><span class="op" id="2433424">(</span><span class="op" id="2433425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433428">if</span>&nbsp;<span class="ident" id="2433431">err</span>&nbsp;<span class="op" id="2433435">==</span>&nbsp;<span class="builtintype" id="2433438">nil</span>&nbsp;<span class="op" id="2433442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433446">s</span><span class="op" id="2433447">.</span><span class="ident" id="2433448">count</span><span class="op" id="2433453">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433458">s</span><span class="op" id="2433459">.</span><span class="ident" id="2433460">prevRune</span>&nbsp;<span class="op" id="2433469">=</span>&nbsp;<span class="ident" id="2433471">r</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433474">}</span>&nbsp;<span class="keyword" id="2433476">else</span>&nbsp;<span class="keyword" id="2433481">if</span>&nbsp;<span class="ident" id="2433484">err</span>&nbsp;<span class="op" id="2433488">==</span>&nbsp;<span class="ident" id="2433491">io</span><span class="op" id="2433493">.</span><span class="ident" id="2433494">EOF</span>&nbsp;<span class="op" id="2433498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433502">s</span><span class="op" id="2433503">.</span><span class="ident" id="2433504">atEOF</span>&nbsp;<span class="op" id="2433510">=</span>&nbsp;<span class="builtintype" id="2433512">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433521">return</span><br>
<span class="lineno"></span><span class="op" id="2433528">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="2433531">func</span>&nbsp;<span class="op" id="2433536">(</span><span class="ident" id="2433537">s</span>&nbsp;<span class="op" id="2433539">*</span><span class="ident" id="2433540">ss</span><span class="op" id="2433542">)</span>&nbsp;<span class="ident" id="2433544">Width</span><span class="op" id="2433549">(</span><span class="op" id="2433550">)</span>&nbsp;<span class="op" id="2433552">(</span><span class="ident" id="2433553">wid</span>&nbsp;<span class="builtintype" id="2433557">int</span><span class="op" id="2433560">,</span>&nbsp;<span class="ident" id="2433562">ok</span>&nbsp;<span class="builtintype" id="2433565">bool</span><span class="op" id="2433569">)</span>&nbsp;<span class="op" id="2433571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433574">if</span>&nbsp;<span class="ident" id="2433577">s</span><span class="op" id="2433578">.</span><span class="ident" id="2433579">maxWid</span>&nbsp;<span class="op" id="2433586">==</span>&nbsp;<span class="ident" id="2433589">hugeWid</span>&nbsp;<span class="op" id="2433597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433601">return</span>&nbsp;<span class="num" id="2433608">0</span><span class="op" id="2433609">,</span>&nbsp;<span class="builtintype" id="2433611">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433618">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433621">return</span>&nbsp;<span class="ident" id="2433628">s</span><span class="op" id="2433629">.</span><span class="ident" id="2433630">maxWid</span><span class="op" id="2433636">,</span>&nbsp;<span class="builtintype" id="2433638">true</span><br>
<span class="lineno"></span><span class="op" id="2433643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2433646">//&nbsp;The&nbsp;public&nbsp;method&nbsp;returns&nbsp;an&nbsp;error;&nbsp;this&nbsp;private&nbsp;one&nbsp;panics.</span><br>
<span class="lineno"></span><span class="comment" id="2433710">//&nbsp;If&nbsp;getRune&nbsp;reaches&nbsp;EOF,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;EOF&nbsp;(-1).</span><br>
<span class="lineno">220</span><span class="keyword" id="2433767">func</span>&nbsp;<span class="op" id="2433772">(</span><span class="ident" id="2433773">s</span>&nbsp;<span class="op" id="2433775">*</span><span class="ident" id="2433776">ss</span><span class="op" id="2433778">)</span>&nbsp;<span class="ident" id="2433780">getRune</span><span class="op" id="2433787">(</span><span class="op" id="2433788">)</span>&nbsp;<span class="op" id="2433790">(</span><span class="ident" id="2433791">r</span>&nbsp;<span class="builtintype" id="2433793">rune</span><span class="op" id="2433797">)</span>&nbsp;<span class="op" id="2433799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433802">r</span><span class="op" id="2433803">,</span>&nbsp;<span class="ident" id="2433805">_</span><span class="op" id="2433806">,</span>&nbsp;<span class="ident" id="2433808">err</span>&nbsp;<span class="op" id="2433812">:=</span>&nbsp;<span class="ident" id="2433815">s</span><span class="op" id="2433816">.</span><span class="ident" id="2433817">ReadRune</span><span class="op" id="2433825">(</span><span class="op" id="2433826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433829">if</span>&nbsp;<span class="ident" id="2433832">err</span>&nbsp;<span class="op" id="2433836">!=</span>&nbsp;<span class="builtintype" id="2433839">nil</span>&nbsp;<span class="op" id="2433843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433847">if</span>&nbsp;<span class="ident" id="2433850">err</span>&nbsp;<span class="op" id="2433854">==</span>&nbsp;<span class="ident" id="2433857">io</span><span class="op" id="2433859">.</span><span class="ident" id="2433860">EOF</span>&nbsp;<span class="op" id="2433864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433869">return</span>&nbsp;<span class="ident" id="2433876">eof</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2433886">s</span><span class="op" id="2433887">.</span><span class="builtintype" id="2433888">error</span><span class="op" id="2433893">(</span><span class="ident" id="2433894">err</span><span class="op" id="2433897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2433900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2433903">return</span><br>
<span class="lineno"></span><span class="op" id="2433910">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2433913">//&nbsp;mustReadRune&nbsp;turns&nbsp;io.EOF&nbsp;into&nbsp;a&nbsp;panic(io.ErrUnexpectedEOF).</span><br>
<span class="lineno"></span><span class="comment" id="2433977">//&nbsp;It&nbsp;is&nbsp;called&nbsp;in&nbsp;cases&nbsp;such&nbsp;as&nbsp;string&nbsp;scanning&nbsp;where&nbsp;an&nbsp;EOF&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2434044">//&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="2434061">func</span>&nbsp;<span class="op" id="2434066">(</span><span class="ident" id="2434067">s</span>&nbsp;<span class="op" id="2434069">*</span><span class="ident" id="2434070">ss</span><span class="op" id="2434072">)</span>&nbsp;<span class="ident" id="2434074">mustReadRune</span><span class="op" id="2434086">(</span><span class="op" id="2434087">)</span>&nbsp;<span class="op" id="2434089">(</span><span class="ident" id="2434090">r</span>&nbsp;<span class="builtintype" id="2434092">rune</span><span class="op" id="2434096">)</span>&nbsp;<span class="op" id="2434098">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434101">r</span>&nbsp;<span class="op" id="2434103">=</span>&nbsp;<span class="ident" id="2434105">s</span><span class="op" id="2434106">.</span><span class="ident" id="2434107">getRune</span><span class="op" id="2434114">(</span><span class="op" id="2434115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434118">if</span>&nbsp;<span class="ident" id="2434121">r</span>&nbsp;<span class="op" id="2434123">==</span>&nbsp;<span class="ident" id="2434126">eof</span>&nbsp;<span class="op" id="2434130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434134">s</span><span class="op" id="2434135">.</span><span class="builtintype" id="2434136">error</span><span class="op" id="2434141">(</span><span class="ident" id="2434142">io</span><span class="op" id="2434144">.</span><span class="ident" id="2434145">ErrUnexpectedEOF</span><span class="op" id="2434161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434167">return</span><br>
<span class="lineno">240</span><span class="op" id="2434174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2434177">func</span>&nbsp;<span class="op" id="2434182">(</span><span class="ident" id="2434183">s</span>&nbsp;<span class="op" id="2434185">*</span><span class="ident" id="2434186">ss</span><span class="op" id="2434188">)</span>&nbsp;<span class="ident" id="2434190">UnreadRune</span><span class="op" id="2434200">(</span><span class="op" id="2434201">)</span>&nbsp;<span class="builtintype" id="2434203">error</span>&nbsp;<span class="op" id="2434209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434212">if</span>&nbsp;<span class="ident" id="2434215">u</span><span class="op" id="2434216">,</span>&nbsp;<span class="ident" id="2434218">ok</span>&nbsp;<span class="op" id="2434221">:=</span>&nbsp;<span class="ident" id="2434224">s</span><span class="op" id="2434225">.</span><span class="ident" id="2434226">rr</span><span class="op" id="2434228">.</span><span class="op" id="2434229">(</span><span class="ident" id="2434230">runeUnreader</span><span class="op" id="2434242">)</span><span class="op" id="2434243">;</span>&nbsp;<span class="ident" id="2434245">ok</span>&nbsp;<span class="op" id="2434248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434252">u</span><span class="op" id="2434253">.</span><span class="ident" id="2434254">UnreadRune</span><span class="op" id="2434264">(</span><span class="op" id="2434265">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434268">}</span>&nbsp;<span class="keyword" id="2434270">else</span>&nbsp;<span class="op" id="2434275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434279">s</span><span class="op" id="2434280">.</span><span class="ident" id="2434281">peekRune</span>&nbsp;<span class="op" id="2434290">=</span>&nbsp;<span class="ident" id="2434292">s</span><span class="op" id="2434293">.</span><span class="ident" id="2434294">prevRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434307">s</span><span class="op" id="2434308">.</span><span class="ident" id="2434309">prevRune</span>&nbsp;<span class="op" id="2434318">=</span>&nbsp;<span class="op" id="2434320">-</span><span class="num" id="2434321">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434324">s</span><span class="op" id="2434325">.</span><span class="ident" id="2434326">count</span><span class="op" id="2434331">--</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434335">return</span>&nbsp;<span class="builtintype" id="2434342">nil</span><br>
<span class="lineno"></span><span class="op" id="2434346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2434349">func</span>&nbsp;<span class="op" id="2434354">(</span><span class="ident" id="2434355">s</span>&nbsp;<span class="op" id="2434357">*</span><span class="ident" id="2434358">ss</span><span class="op" id="2434360">)</span>&nbsp;<span class="builtintype" id="2434362">error</span><span class="op" id="2434367">(</span><span class="ident" id="2434368">err</span>&nbsp;<span class="builtintype" id="2434372">error</span><span class="op" id="2434377">)</span>&nbsp;<span class="op" id="2434379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2434382">panic</span><span class="op" id="2434387">(</span><span class="ident" id="2434388">scanError</span><span class="op" id="2434397">{</span><span class="ident" id="2434398">err</span><span class="op" id="2434401">}</span><span class="op" id="2434402">)</span><br>
<span class="lineno">255</span><span class="op" id="2434404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2434407">func</span>&nbsp;<span class="op" id="2434412">(</span><span class="ident" id="2434413">s</span>&nbsp;<span class="op" id="2434415">*</span><span class="ident" id="2434416">ss</span><span class="op" id="2434418">)</span>&nbsp;<span class="ident" id="2434420">errorString</span><span class="op" id="2434431">(</span><span class="ident" id="2434432">err</span>&nbsp;<span class="builtintype" id="2434436">string</span><span class="op" id="2434442">)</span>&nbsp;<span class="op" id="2434444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2434447">panic</span><span class="op" id="2434452">(</span><span class="ident" id="2434453">scanError</span><span class="op" id="2434462">{</span><span class="ident" id="2434463">errors</span><span class="op" id="2434469">.</span><span class="ident" id="2434470">New</span><span class="op" id="2434473">(</span><span class="ident" id="2434474">err</span><span class="op" id="2434477">)</span><span class="op" id="2434478">}</span><span class="op" id="2434479">)</span><br>
<span class="lineno"></span><span class="op" id="2434481">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="2434484">func</span>&nbsp;<span class="op" id="2434489">(</span><span class="ident" id="2434490">s</span>&nbsp;<span class="op" id="2434492">*</span><span class="ident" id="2434493">ss</span><span class="op" id="2434495">)</span>&nbsp;<span class="ident" id="2434497">Token</span><span class="op" id="2434502">(</span><span class="ident" id="2434503">skipSpace</span>&nbsp;<span class="builtintype" id="2434513">bool</span><span class="op" id="2434517">,</span>&nbsp;<span class="ident" id="2434519">f</span>&nbsp;<span class="keyword" id="2434521">func</span><span class="op" id="2434525">(</span><span class="builtintype" id="2434526">rune</span><span class="op" id="2434530">)</span>&nbsp;<span class="builtintype" id="2434532">bool</span><span class="op" id="2434536">)</span>&nbsp;<span class="op" id="2434538">(</span><span class="ident" id="2434539">tok</span>&nbsp;<span class="op" id="2434543">[</span><span class="op" id="2434544">]</span><span class="builtintype" id="2434545">byte</span><span class="op" id="2434549">,</span>&nbsp;<span class="ident" id="2434551">err</span>&nbsp;<span class="builtintype" id="2434555">error</span><span class="op" id="2434560">)</span>&nbsp;<span class="op" id="2434562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434565">defer</span>&nbsp;<span class="keyword" id="2434571">func</span><span class="op" id="2434575">(</span><span class="op" id="2434576">)</span>&nbsp;<span class="op" id="2434578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434582">if</span>&nbsp;<span class="ident" id="2434585">e</span>&nbsp;<span class="op" id="2434587">:=</span>&nbsp;<span class="builtinfunc" id="2434590">recover</span><span class="op" id="2434597">(</span><span class="op" id="2434598">)</span><span class="op" id="2434599">;</span>&nbsp;<span class="ident" id="2434601">e</span>&nbsp;<span class="op" id="2434603">!=</span>&nbsp;<span class="builtintype" id="2434606">nil</span>&nbsp;<span class="op" id="2434610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434615">if</span>&nbsp;<span class="ident" id="2434618">se</span><span class="op" id="2434620">,</span>&nbsp;<span class="ident" id="2434622">ok</span>&nbsp;<span class="op" id="2434625">:=</span>&nbsp;<span class="ident" id="2434628">e</span><span class="op" id="2434629">.</span><span class="op" id="2434630">(</span><span class="ident" id="2434631">scanError</span><span class="op" id="2434640">)</span><span class="op" id="2434641">;</span>&nbsp;<span class="ident" id="2434643">ok</span>&nbsp;<span class="op" id="2434646">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434652">err</span>&nbsp;<span class="op" id="2434656">=</span>&nbsp;<span class="ident" id="2434658">se</span><span class="op" id="2434660">.</span><span class="ident" id="2434661">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434668">}</span>&nbsp;<span class="keyword" id="2434670">else</span>&nbsp;<span class="op" id="2434675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2434681">panic</span><span class="op" id="2434686">(</span><span class="ident" id="2434687">e</span><span class="op" id="2434688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434697">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434700">}</span><span class="op" id="2434701">(</span><span class="op" id="2434702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434705">if</span>&nbsp;<span class="ident" id="2434708">f</span>&nbsp;<span class="op" id="2434710">==</span>&nbsp;<span class="builtintype" id="2434713">nil</span>&nbsp;<span class="op" id="2434717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434721">f</span>&nbsp;<span class="op" id="2434723">=</span>&nbsp;<span class="ident" id="2434725">notSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434738">s</span><span class="op" id="2434739">.</span><span class="ident" id="2434740">buf</span>&nbsp;<span class="op" id="2434744">=</span>&nbsp;<span class="ident" id="2434746">s</span><span class="op" id="2434747">.</span><span class="ident" id="2434748">buf</span><span class="op" id="2434751">[</span><span class="op" id="2434752">:</span><span class="num" id="2434753">0</span><span class="op" id="2434754">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2434757">tok</span>&nbsp;<span class="op" id="2434761">=</span>&nbsp;<span class="ident" id="2434763">s</span><span class="op" id="2434764">.</span><span class="ident" id="2434765">token</span><span class="op" id="2434770">(</span><span class="ident" id="2434771">skipSpace</span><span class="op" id="2434780">,</span>&nbsp;<span class="ident" id="2434782">f</span><span class="op" id="2434783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2434786">return</span><br>
<span class="lineno"></span><span class="op" id="2434793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2434796">//&nbsp;space&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;unicode.White_Space&nbsp;ranges,</span><br>
<span class="lineno">280</span><span class="comment" id="2434850">//&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="2434892">var</span>&nbsp;<span class="ident" id="2434896">space</span>&nbsp;<span class="op" id="2434902">=</span>&nbsp;<span class="op" id="2434904">[</span><span class="op" id="2434905">]</span><span class="op" id="2434906">[</span><span class="num" id="2434907">2</span><span class="op" id="2434908">]</span><span class="builtintype" id="2434909">uint16</span><span class="op" id="2434915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434918">{</span><span class="num" id="2434919">0x0009</span><span class="op" id="2434925">,</span>&nbsp;<span class="num" id="2434927">0x000d</span><span class="op" id="2434933">}</span><span class="op" id="2434934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434937">{</span><span class="num" id="2434938">0x0020</span><span class="op" id="2434944">,</span>&nbsp;<span class="num" id="2434946">0x0020</span><span class="op" id="2434952">}</span><span class="op" id="2434953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434956">{</span><span class="num" id="2434957">0x0085</span><span class="op" id="2434963">,</span>&nbsp;<span class="num" id="2434965">0x0085</span><span class="op" id="2434971">}</span><span class="op" id="2434972">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434975">{</span><span class="num" id="2434976">0x00a0</span><span class="op" id="2434982">,</span>&nbsp;<span class="num" id="2434984">0x00a0</span><span class="op" id="2434990">}</span><span class="op" id="2434991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2434994">{</span><span class="num" id="2434995">0x1680</span><span class="op" id="2435001">,</span>&nbsp;<span class="num" id="2435003">0x1680</span><span class="op" id="2435009">}</span><span class="op" id="2435010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435013">{</span><span class="num" id="2435014">0x2000</span><span class="op" id="2435020">,</span>&nbsp;<span class="num" id="2435022">0x200a</span><span class="op" id="2435028">}</span><span class="op" id="2435029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435032">{</span><span class="num" id="2435033">0x2028</span><span class="op" id="2435039">,</span>&nbsp;<span class="num" id="2435041">0x2029</span><span class="op" id="2435047">}</span><span class="op" id="2435048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435051">{</span><span class="num" id="2435052">0x202f</span><span class="op" id="2435058">,</span>&nbsp;<span class="num" id="2435060">0x202f</span><span class="op" id="2435066">}</span><span class="op" id="2435067">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435070">{</span><span class="num" id="2435071">0x205f</span><span class="op" id="2435077">,</span>&nbsp;<span class="num" id="2435079">0x205f</span><span class="op" id="2435085">}</span><span class="op" id="2435086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435089">{</span><span class="num" id="2435090">0x3000</span><span class="op" id="2435096">,</span>&nbsp;<span class="num" id="2435098">0x3000</span><span class="op" id="2435104">}</span><span class="op" id="2435105">,</span><br>
<span class="lineno"></span><span class="op" id="2435107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2435110">func</span>&nbsp;<span class="ident" id="2435115">isSpace</span><span class="op" id="2435122">(</span><span class="ident" id="2435123">r</span>&nbsp;<span class="builtintype" id="2435125">rune</span><span class="op" id="2435129">)</span>&nbsp;<span class="builtintype" id="2435131">bool</span>&nbsp;<span class="op" id="2435136">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435139">if</span>&nbsp;<span class="ident" id="2435142">r</span>&nbsp;<span class="op" id="2435144">&gt;=</span>&nbsp;<span class="num" id="2435147">1</span><span class="op" id="2435148">&lt;&lt;</span><span class="num" id="2435150">16</span>&nbsp;<span class="op" id="2435153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435157">return</span>&nbsp;<span class="builtintype" id="2435164">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435174">rx</span>&nbsp;<span class="op" id="2435177">:=</span>&nbsp;<span class="builtintype" id="2435180">uint16</span><span class="op" id="2435186">(</span><span class="ident" id="2435187">r</span><span class="op" id="2435188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435191">for</span>&nbsp;<span class="ident" id="2435195">_</span><span class="op" id="2435196">,</span>&nbsp;<span class="ident" id="2435198">rng</span>&nbsp;<span class="op" id="2435202">:=</span>&nbsp;<span class="keyword" id="2435205">range</span>&nbsp;<span class="ident" id="2435211">space</span>&nbsp;<span class="op" id="2435217">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435221">if</span>&nbsp;<span class="ident" id="2435224">rx</span>&nbsp;<span class="op" id="2435227">&lt;</span>&nbsp;<span class="ident" id="2435229">rng</span><span class="op" id="2435232">[</span><span class="num" id="2435233">0</span><span class="op" id="2435234">]</span>&nbsp;<span class="op" id="2435236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435241">return</span>&nbsp;<span class="builtintype" id="2435248">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435260">if</span>&nbsp;<span class="ident" id="2435263">rx</span>&nbsp;<span class="op" id="2435266">&lt;=</span>&nbsp;<span class="ident" id="2435269">rng</span><span class="op" id="2435272">[</span><span class="num" id="2435273">1</span><span class="op" id="2435274">]</span>&nbsp;<span class="op" id="2435276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435281">return</span>&nbsp;<span class="builtintype" id="2435288">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435301">return</span>&nbsp;<span class="builtintype" id="2435308">false</span><br>
<span class="lineno"></span><span class="op" id="2435314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2435317">//&nbsp;notSpace&nbsp;is&nbsp;the&nbsp;default&nbsp;scanning&nbsp;function&nbsp;used&nbsp;in&nbsp;Token.</span><br>
<span class="lineno"></span><span class="keyword" id="2435377">func</span>&nbsp;<span class="ident" id="2435382">notSpace</span><span class="op" id="2435390">(</span><span class="ident" id="2435391">r</span>&nbsp;<span class="builtintype" id="2435393">rune</span><span class="op" id="2435397">)</span>&nbsp;<span class="builtintype" id="2435399">bool</span>&nbsp;<span class="op" id="2435404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2435407">return</span>&nbsp;<span class="op" id="2435414">!</span><span class="ident" id="2435415">isSpace</span><span class="op" id="2435422">(</span><span class="ident" id="2435423">r</span><span class="op" id="2435424">)</span><br>
<span class="lineno"></span><span class="op" id="2435426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="comment" id="2435429">//&nbsp;SkipSpace&nbsp;provides&nbsp;Scan&nbsp;methods&nbsp;the&nbsp;ability&nbsp;to&nbsp;skip&nbsp;space&nbsp;and&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="2435502">//&nbsp;characters&nbsp;in&nbsp;keeping&nbsp;with&nbsp;the&nbsp;current&nbsp;scanning&nbsp;mode&nbsp;set&nbsp;by&nbsp;format&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="2435580">//&nbsp;and&nbsp;Scan/Scanln.</span><br>
<span class="lineno"></span><span class="keyword" id="2435600">func</span>&nbsp;<span class="op" id="2435605">(</span><span class="ident" id="2435606">s</span>&nbsp;<span class="op" id="2435608">*</span><span class="ident" id="2435609">ss</span><span class="op" id="2435611">)</span>&nbsp;<span class="ident" id="2435613">SkipSpace</span><span class="op" id="2435622">(</span><span class="op" id="2435623">)</span>&nbsp;<span class="op" id="2435625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435628">s</span><span class="op" id="2435629">.</span><span class="ident" id="2435630">skipSpace</span><span class="op" id="2435639">(</span><span class="builtintype" id="2435640">false</span><span class="op" id="2435645">)</span><br>
<span class="lineno">320</span><span class="op" id="2435647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2435650">//&nbsp;readRune&nbsp;is&nbsp;a&nbsp;structure&nbsp;to&nbsp;enable&nbsp;reading&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;points</span><br>
<span class="lineno"></span><span class="comment" id="2435721">//&nbsp;from&nbsp;an&nbsp;io.Reader.&nbsp;&nbsp;It&nbsp;is&nbsp;used&nbsp;if&nbsp;the&nbsp;Reader&nbsp;given&nbsp;to&nbsp;the&nbsp;scanner&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2435795">//&nbsp;not&nbsp;already&nbsp;implement&nbsp;io.RuneReader.</span><br>
<span class="lineno">325</span><span class="keyword" id="2435835">type</span>&nbsp;<span class="ident" id="2435840">readRune</span>&nbsp;<span class="keyword" id="2435849">struct</span>&nbsp;<span class="op" id="2435856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435859">reader</span>&nbsp;&nbsp;<span class="ident" id="2435867">io</span><span class="op" id="2435869">.</span><span class="ident" id="2435870">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435878">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2435886">[</span><span class="ident" id="2435887">utf8</span><span class="op" id="2435891">.</span><span class="ident" id="2435892">UTFMax</span><span class="op" id="2435898">]</span><span class="builtintype" id="2435899">byte</span>&nbsp;<span class="comment" id="2435904">//&nbsp;used&nbsp;only&nbsp;inside&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2435934">pending</span>&nbsp;<span class="builtintype" id="2435942">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2435960">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;pendBuf;&nbsp;only&nbsp;&gt;0&nbsp;for&nbsp;bad&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436014">pendBuf</span>&nbsp;<span class="op" id="2436022">[</span><span class="ident" id="2436023">utf8</span><span class="op" id="2436027">.</span><span class="ident" id="2436028">UTFMax</span><span class="op" id="2436034">]</span><span class="builtintype" id="2436035">byte</span>&nbsp;<span class="comment" id="2436040">//&nbsp;bytes&nbsp;left&nbsp;over</span><br>
<span class="lineno">330</span><span class="op" id="2436059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436062">//&nbsp;readByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;which&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2436125">//&nbsp;left&nbsp;over&nbsp;from&nbsp;a&nbsp;previous&nbsp;read&nbsp;if&nbsp;the&nbsp;UTF-8&nbsp;was&nbsp;ill-formed.</span><br>
<span class="lineno"></span><span class="keyword" id="2436188">func</span>&nbsp;<span class="op" id="2436193">(</span><span class="ident" id="2436194">r</span>&nbsp;<span class="op" id="2436196">*</span><span class="ident" id="2436197">readRune</span><span class="op" id="2436205">)</span>&nbsp;<span class="ident" id="2436207">readByte</span><span class="op" id="2436215">(</span><span class="op" id="2436216">)</span>&nbsp;<span class="op" id="2436218">(</span><span class="ident" id="2436219">b</span>&nbsp;<span class="builtintype" id="2436221">byte</span><span class="op" id="2436225">,</span>&nbsp;<span class="ident" id="2436227">err</span>&nbsp;<span class="builtintype" id="2436231">error</span><span class="op" id="2436236">)</span>&nbsp;<span class="op" id="2436238">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436241">if</span>&nbsp;<span class="ident" id="2436244">r</span><span class="op" id="2436245">.</span><span class="ident" id="2436246">pending</span>&nbsp;<span class="op" id="2436254">&gt;</span>&nbsp;<span class="num" id="2436256">0</span>&nbsp;<span class="op" id="2436258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436262">b</span>&nbsp;<span class="op" id="2436264">=</span>&nbsp;<span class="ident" id="2436266">r</span><span class="op" id="2436267">.</span><span class="ident" id="2436268">pendBuf</span><span class="op" id="2436275">[</span><span class="num" id="2436276">0</span><span class="op" id="2436277">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2436281">copy</span><span class="op" id="2436285">(</span><span class="ident" id="2436286">r</span><span class="op" id="2436287">.</span><span class="ident" id="2436288">pendBuf</span><span class="op" id="2436295">[</span><span class="num" id="2436296">0</span><span class="op" id="2436297">:</span><span class="op" id="2436298">]</span><span class="op" id="2436299">,</span>&nbsp;<span class="ident" id="2436301">r</span><span class="op" id="2436302">.</span><span class="ident" id="2436303">pendBuf</span><span class="op" id="2436310">[</span><span class="num" id="2436311">1</span><span class="op" id="2436312">:</span><span class="op" id="2436313">]</span><span class="op" id="2436314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436318">r</span><span class="op" id="2436319">.</span><span class="ident" id="2436320">pending</span><span class="op" id="2436327">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436332">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436343">n</span><span class="op" id="2436344">,</span>&nbsp;<span class="ident" id="2436346">err</span>&nbsp;<span class="op" id="2436350">:=</span>&nbsp;<span class="ident" id="2436353">io</span><span class="op" id="2436355">.</span><span class="ident" id="2436356">ReadFull</span><span class="op" id="2436364">(</span><span class="ident" id="2436365">r</span><span class="op" id="2436366">.</span><span class="ident" id="2436367">reader</span><span class="op" id="2436373">,</span>&nbsp;<span class="ident" id="2436375">r</span><span class="op" id="2436376">.</span><span class="ident" id="2436377">pendBuf</span><span class="op" id="2436384">[</span><span class="num" id="2436385">0</span><span class="op" id="2436386">:</span><span class="num" id="2436387">1</span><span class="op" id="2436388">]</span><span class="op" id="2436389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436392">if</span>&nbsp;<span class="ident" id="2436395">n</span>&nbsp;<span class="op" id="2436397">!=</span>&nbsp;<span class="num" id="2436400">1</span>&nbsp;<span class="op" id="2436402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436406">return</span>&nbsp;<span class="num" id="2436413">0</span><span class="op" id="2436414">,</span>&nbsp;<span class="ident" id="2436416">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436421">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436424">return</span>&nbsp;<span class="ident" id="2436431">r</span><span class="op" id="2436432">.</span><span class="ident" id="2436433">pendBuf</span><span class="op" id="2436440">[</span><span class="num" id="2436441">0</span><span class="op" id="2436442">]</span><span class="op" id="2436443">,</span>&nbsp;<span class="ident" id="2436445">err</span><br>
<span class="lineno"></span><span class="op" id="2436449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436452">//&nbsp;unread&nbsp;saves&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="2436497">func</span>&nbsp;<span class="op" id="2436502">(</span><span class="ident" id="2436503">r</span>&nbsp;<span class="op" id="2436505">*</span><span class="ident" id="2436506">readRune</span><span class="op" id="2436514">)</span>&nbsp;<span class="ident" id="2436516">unread</span><span class="op" id="2436522">(</span><span class="ident" id="2436523">buf</span>&nbsp;<span class="op" id="2436527">[</span><span class="op" id="2436528">]</span><span class="builtintype" id="2436529">byte</span><span class="op" id="2436533">)</span>&nbsp;<span class="op" id="2436535">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2436538">copy</span><span class="op" id="2436542">(</span><span class="ident" id="2436543">r</span><span class="op" id="2436544">.</span><span class="ident" id="2436545">pendBuf</span><span class="op" id="2436552">[</span><span class="ident" id="2436553">r</span><span class="op" id="2436554">.</span><span class="ident" id="2436555">pending</span><span class="op" id="2436562">:</span><span class="op" id="2436563">]</span><span class="op" id="2436564">,</span>&nbsp;<span class="ident" id="2436566">buf</span><span class="op" id="2436569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436572">r</span><span class="op" id="2436573">.</span><span class="ident" id="2436574">pending</span>&nbsp;<span class="op" id="2436582">+=</span>&nbsp;<span class="builtinfunc" id="2436585">len</span><span class="op" id="2436588">(</span><span class="ident" id="2436589">buf</span><span class="op" id="2436592">)</span><br>
<span class="lineno"></span><span class="op" id="2436594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2436597">//&nbsp;ReadRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;point&nbsp;from&nbsp;the</span><br>
<span class="lineno">355</span><span class="comment" id="2436660">//&nbsp;io.Reader&nbsp;inside&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="2436683">func</span>&nbsp;<span class="op" id="2436688">(</span><span class="ident" id="2436689">r</span>&nbsp;<span class="op" id="2436691">*</span><span class="ident" id="2436692">readRune</span><span class="op" id="2436700">)</span>&nbsp;<span class="ident" id="2436702">ReadRune</span><span class="op" id="2436710">(</span><span class="op" id="2436711">)</span>&nbsp;<span class="op" id="2436713">(</span><span class="ident" id="2436714">rr</span>&nbsp;<span class="builtintype" id="2436717">rune</span><span class="op" id="2436721">,</span>&nbsp;<span class="ident" id="2436723">size</span>&nbsp;<span class="builtintype" id="2436728">int</span><span class="op" id="2436731">,</span>&nbsp;<span class="ident" id="2436733">err</span>&nbsp;<span class="builtintype" id="2436737">error</span><span class="op" id="2436742">)</span>&nbsp;<span class="op" id="2436744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436747">r</span><span class="op" id="2436748">.</span><span class="ident" id="2436749">buf</span><span class="op" id="2436752">[</span><span class="num" id="2436753">0</span><span class="op" id="2436754">]</span><span class="op" id="2436755">,</span>&nbsp;<span class="ident" id="2436757">err</span>&nbsp;<span class="op" id="2436761">=</span>&nbsp;<span class="ident" id="2436763">r</span><span class="op" id="2436764">.</span><span class="ident" id="2436765">readByte</span><span class="op" id="2436773">(</span><span class="op" id="2436774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436777">if</span>&nbsp;<span class="ident" id="2436780">err</span>&nbsp;<span class="op" id="2436784">!=</span>&nbsp;<span class="builtintype" id="2436787">nil</span>&nbsp;<span class="op" id="2436791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436795">return</span>&nbsp;<span class="num" id="2436802">0</span><span class="op" id="2436803">,</span>&nbsp;<span class="num" id="2436805">0</span><span class="op" id="2436806">,</span>&nbsp;<span class="ident" id="2436808">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436816">if</span>&nbsp;<span class="ident" id="2436819">r</span><span class="op" id="2436820">.</span><span class="ident" id="2436821">buf</span><span class="op" id="2436824">[</span><span class="num" id="2436825">0</span><span class="op" id="2436826">]</span>&nbsp;<span class="op" id="2436828">&lt;</span>&nbsp;<span class="ident" id="2436830">utf8</span><span class="op" id="2436834">.</span><span class="ident" id="2436835">RuneSelf</span>&nbsp;<span class="op" id="2436844">{</span>&nbsp;<span class="comment" id="2436846">//&nbsp;fast&nbsp;check&nbsp;for&nbsp;common&nbsp;ASCII&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436884">rr</span>&nbsp;<span class="op" id="2436887">=</span>&nbsp;<span class="builtintype" id="2436889">rune</span><span class="op" id="2436893">(</span><span class="ident" id="2436894">r</span><span class="op" id="2436895">.</span><span class="ident" id="2436896">buf</span><span class="op" id="2436899">[</span><span class="num" id="2436900">0</span><span class="op" id="2436901">]</span><span class="op" id="2436902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2436906">size</span>&nbsp;<span class="op" id="2436911">=</span>&nbsp;<span class="num" id="2436913">1</span>&nbsp;<span class="comment" id="2436915">//&nbsp;Known&nbsp;to&nbsp;be&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436935">return</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2436943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436946">var</span>&nbsp;<span class="ident" id="2436950">n</span>&nbsp;<span class="builtintype" id="2436952">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2436957">for</span>&nbsp;<span class="ident" id="2436961">n</span>&nbsp;<span class="op" id="2436963">=</span>&nbsp;<span class="num" id="2436965">1</span><span class="op" id="2436966">;</span>&nbsp;<span class="op" id="2436968">!</span><span class="ident" id="2436969">utf8</span><span class="op" id="2436973">.</span><span class="ident" id="2436974">FullRune</span><span class="op" id="2436982">(</span><span class="ident" id="2436983">r</span><span class="op" id="2436984">.</span><span class="ident" id="2436985">buf</span><span class="op" id="2436988">[</span><span class="num" id="2436989">0</span><span class="op" id="2436990">:</span><span class="ident" id="2436991">n</span><span class="op" id="2436992">]</span><span class="op" id="2436993">)</span><span class="op" id="2436994">;</span>&nbsp;<span class="ident" id="2436996">n</span><span class="op" id="2436997">++</span>&nbsp;<span class="op" id="2437000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437004">r</span><span class="op" id="2437005">.</span><span class="ident" id="2437006">buf</span><span class="op" id="2437009">[</span><span class="ident" id="2437010">n</span><span class="op" id="2437011">]</span><span class="op" id="2437012">,</span>&nbsp;<span class="ident" id="2437014">err</span>&nbsp;<span class="op" id="2437018">=</span>&nbsp;<span class="ident" id="2437020">r</span><span class="op" id="2437021">.</span><span class="ident" id="2437022">readByte</span><span class="op" id="2437030">(</span><span class="op" id="2437031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437035">if</span>&nbsp;<span class="ident" id="2437038">err</span>&nbsp;<span class="op" id="2437042">!=</span>&nbsp;<span class="builtintype" id="2437045">nil</span>&nbsp;<span class="op" id="2437049">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437054">if</span>&nbsp;<span class="ident" id="2437057">err</span>&nbsp;<span class="op" id="2437061">==</span>&nbsp;<span class="ident" id="2437064">io</span><span class="op" id="2437066">.</span><span class="ident" id="2437067">EOF</span>&nbsp;<span class="op" id="2437071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437077">err</span>&nbsp;<span class="op" id="2437081">=</span>&nbsp;<span class="builtintype" id="2437083">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437091">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437105">return</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437120">rr</span><span class="op" id="2437122">,</span>&nbsp;<span class="ident" id="2437124">size</span>&nbsp;<span class="op" id="2437129">=</span>&nbsp;<span class="ident" id="2437131">utf8</span><span class="op" id="2437135">.</span><span class="ident" id="2437136">DecodeRune</span><span class="op" id="2437146">(</span><span class="ident" id="2437147">r</span><span class="op" id="2437148">.</span><span class="ident" id="2437149">buf</span><span class="op" id="2437152">[</span><span class="num" id="2437153">0</span><span class="op" id="2437154">:</span><span class="ident" id="2437155">n</span><span class="op" id="2437156">]</span><span class="op" id="2437157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437160">if</span>&nbsp;<span class="ident" id="2437163">size</span>&nbsp;<span class="op" id="2437168">&lt;</span>&nbsp;<span class="ident" id="2437170">n</span>&nbsp;<span class="op" id="2437172">{</span>&nbsp;<span class="comment" id="2437174">//&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437188">r</span><span class="op" id="2437189">.</span><span class="ident" id="2437190">unread</span><span class="op" id="2437196">(</span><span class="ident" id="2437197">r</span><span class="op" id="2437198">.</span><span class="ident" id="2437199">buf</span><span class="op" id="2437202">[</span><span class="ident" id="2437203">size</span><span class="op" id="2437207">:</span><span class="ident" id="2437208">n</span><span class="op" id="2437209">]</span><span class="op" id="2437210">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437216">return</span><br>
<span class="lineno"></span><span class="op" id="2437223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2437226">var</span>&nbsp;<span class="ident" id="2437230">ssFree</span>&nbsp;<span class="op" id="2437237">=</span>&nbsp;<span class="ident" id="2437239">sync</span><span class="op" id="2437243">.</span><span class="ident" id="2437244">Pool</span><span class="op" id="2437248">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437251">New</span><span class="op" id="2437254">:</span>&nbsp;<span class="keyword" id="2437256">func</span><span class="op" id="2437260">(</span><span class="op" id="2437261">)</span>&nbsp;<span class="keyword" id="2437263">interface</span><span class="op" id="2437272">{</span><span class="op" id="2437273">}</span>&nbsp;<span class="op" id="2437275">{</span>&nbsp;<span class="keyword" id="2437277">return</span>&nbsp;<span class="builtinfunc" id="2437284">new</span><span class="op" id="2437287">(</span><span class="ident" id="2437288">ss</span><span class="op" id="2437290">)</span>&nbsp;<span class="op" id="2437292">}</span><span class="op" id="2437293">,</span><br>
<span class="lineno"></span><span class="op" id="2437295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2437298">//&nbsp;newScanState&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ss&nbsp;struct&nbsp;or&nbsp;grab&nbsp;a&nbsp;cached&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="2437362">func</span>&nbsp;<span class="ident" id="2437367">newScanState</span><span class="op" id="2437379">(</span><span class="ident" id="2437380">r</span>&nbsp;<span class="ident" id="2437382">io</span><span class="op" id="2437384">.</span><span class="ident" id="2437385">Reader</span><span class="op" id="2437391">,</span>&nbsp;<span class="ident" id="2437393">nlIsSpace</span><span class="op" id="2437402">,</span>&nbsp;<span class="ident" id="2437404">nlIsEnd</span>&nbsp;<span class="builtintype" id="2437412">bool</span><span class="op" id="2437416">)</span>&nbsp;<span class="op" id="2437418">(</span><span class="ident" id="2437419">s</span>&nbsp;<span class="op" id="2437421">*</span><span class="ident" id="2437422">ss</span><span class="op" id="2437424">,</span>&nbsp;<span class="ident" id="2437426">old</span>&nbsp;<span class="ident" id="2437430">ssave</span><span class="op" id="2437435">)</span>&nbsp;<span class="op" id="2437437">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2437440">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;is&nbsp;a&nbsp;*ss,&nbsp;then&nbsp;we&#39;ve&nbsp;got&nbsp;a&nbsp;recursive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2437495">//&nbsp;call&nbsp;to&nbsp;Scan,&nbsp;so&nbsp;re-use&nbsp;the&nbsp;scan&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437539">s</span><span class="op" id="2437540">,</span>&nbsp;<span class="ident" id="2437542">ok</span>&nbsp;<span class="op" id="2437545">:=</span>&nbsp;<span class="ident" id="2437548">r</span><span class="op" id="2437549">.</span><span class="op" id="2437550">(</span><span class="op" id="2437551">*</span><span class="ident" id="2437552">ss</span><span class="op" id="2437554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437557">if</span>&nbsp;<span class="ident" id="2437560">ok</span>&nbsp;<span class="op" id="2437563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437567">old</span>&nbsp;<span class="op" id="2437571">=</span>&nbsp;<span class="ident" id="2437573">s</span><span class="op" id="2437574">.</span><span class="ident" id="2437575">ssave</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437583">s</span><span class="op" id="2437584">.</span><span class="ident" id="2437585">limit</span>&nbsp;<span class="op" id="2437591">=</span>&nbsp;<span class="ident" id="2437593">s</span><span class="op" id="2437594">.</span><span class="ident" id="2437595">argLimit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437606">s</span><span class="op" id="2437607">.</span><span class="ident" id="2437608">nlIsEnd</span>&nbsp;<span class="op" id="2437616">=</span>&nbsp;<span class="ident" id="2437618">nlIsEnd</span>&nbsp;<span class="op" id="2437626">||</span>&nbsp;<span class="ident" id="2437629">s</span><span class="op" id="2437630">.</span><span class="ident" id="2437631">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437641">s</span><span class="op" id="2437642">.</span><span class="ident" id="2437643">nlIsSpace</span>&nbsp;<span class="op" id="2437653">=</span>&nbsp;<span class="ident" id="2437655">nlIsSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437667">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437675">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437679">s</span>&nbsp;<span class="op" id="2437681">=</span>&nbsp;<span class="ident" id="2437683">ssFree</span><span class="op" id="2437689">.</span><span class="ident" id="2437690">Get</span><span class="op" id="2437693">(</span><span class="op" id="2437694">)</span><span class="op" id="2437695">.</span><span class="op" id="2437696">(</span><span class="op" id="2437697">*</span><span class="ident" id="2437698">ss</span><span class="op" id="2437700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437703">if</span>&nbsp;<span class="ident" id="2437706">rr</span><span class="op" id="2437708">,</span>&nbsp;<span class="ident" id="2437710">ok</span>&nbsp;<span class="op" id="2437713">:=</span>&nbsp;<span class="ident" id="2437716">r</span><span class="op" id="2437717">.</span><span class="op" id="2437718">(</span><span class="ident" id="2437719">io</span><span class="op" id="2437721">.</span><span class="ident" id="2437722">RuneReader</span><span class="op" id="2437732">)</span><span class="op" id="2437733">;</span>&nbsp;<span class="ident" id="2437735">ok</span>&nbsp;<span class="op" id="2437738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437742">s</span><span class="op" id="2437743">.</span><span class="ident" id="2437744">rr</span>&nbsp;<span class="op" id="2437747">=</span>&nbsp;<span class="ident" id="2437749">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437753">}</span>&nbsp;<span class="keyword" id="2437755">else</span>&nbsp;<span class="op" id="2437760">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437764">s</span><span class="op" id="2437765">.</span><span class="ident" id="2437766">rr</span>&nbsp;<span class="op" id="2437769">=</span>&nbsp;<span class="op" id="2437771">&amp;</span><span class="ident" id="2437772">readRune</span><span class="op" id="2437780">{</span><span class="ident" id="2437781">reader</span><span class="op" id="2437787">:</span>&nbsp;<span class="ident" id="2437789">r</span><span class="op" id="2437790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2437793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437796">s</span><span class="op" id="2437797">.</span><span class="ident" id="2437798">nlIsSpace</span>&nbsp;<span class="op" id="2437808">=</span>&nbsp;<span class="ident" id="2437810">nlIsSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437821">s</span><span class="op" id="2437822">.</span><span class="ident" id="2437823">nlIsEnd</span>&nbsp;<span class="op" id="2437831">=</span>&nbsp;<span class="ident" id="2437833">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437842">s</span><span class="op" id="2437843">.</span><span class="ident" id="2437844">prevRune</span>&nbsp;<span class="op" id="2437853">=</span>&nbsp;<span class="op" id="2437855">-</span><span class="num" id="2437856">1</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437859">s</span><span class="op" id="2437860">.</span><span class="ident" id="2437861">peekRune</span>&nbsp;<span class="op" id="2437870">=</span>&nbsp;<span class="op" id="2437872">-</span><span class="num" id="2437873">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437876">s</span><span class="op" id="2437877">.</span><span class="ident" id="2437878">atEOF</span>&nbsp;<span class="op" id="2437884">=</span>&nbsp;<span class="builtintype" id="2437886">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437893">s</span><span class="op" id="2437894">.</span><span class="ident" id="2437895">limit</span>&nbsp;<span class="op" id="2437901">=</span>&nbsp;<span class="ident" id="2437903">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437912">s</span><span class="op" id="2437913">.</span><span class="ident" id="2437914">argLimit</span>&nbsp;<span class="op" id="2437923">=</span>&nbsp;<span class="ident" id="2437925">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437934">s</span><span class="op" id="2437935">.</span><span class="ident" id="2437936">maxWid</span>&nbsp;<span class="op" id="2437943">=</span>&nbsp;<span class="ident" id="2437945">hugeWid</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437954">s</span><span class="op" id="2437955">.</span><span class="ident" id="2437956">validSave</span>&nbsp;<span class="op" id="2437966">=</span>&nbsp;<span class="builtintype" id="2437968">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2437974">s</span><span class="op" id="2437975">.</span><span class="ident" id="2437976">count</span>&nbsp;<span class="op" id="2437982">=</span>&nbsp;<span class="num" id="2437984">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2437987">return</span><br>
<span class="lineno"></span><span class="op" id="2437994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2437997">//&nbsp;free&nbsp;saves&nbsp;used&nbsp;ss&nbsp;structs&nbsp;in&nbsp;ssFree;&nbsp;avoid&nbsp;an&nbsp;allocation&nbsp;per&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="keyword" id="2438074">func</span>&nbsp;<span class="op" id="2438079">(</span><span class="ident" id="2438080">s</span>&nbsp;<span class="op" id="2438082">*</span><span class="ident" id="2438083">ss</span><span class="op" id="2438085">)</span>&nbsp;<span class="ident" id="2438087">free</span><span class="op" id="2438091">(</span><span class="ident" id="2438092">old</span>&nbsp;<span class="ident" id="2438096">ssave</span><span class="op" id="2438101">)</span>&nbsp;<span class="op" id="2438103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2438106">//&nbsp;If&nbsp;it&nbsp;was&nbsp;used&nbsp;recursively,&nbsp;just&nbsp;restore&nbsp;the&nbsp;old&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438166">if</span>&nbsp;<span class="ident" id="2438169">old</span><span class="op" id="2438172">.</span><span class="ident" id="2438173">validSave</span>&nbsp;<span class="op" id="2438183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438187">s</span><span class="op" id="2438188">.</span><span class="ident" id="2438189">ssave</span>&nbsp;<span class="op" id="2438195">=</span>&nbsp;<span class="ident" id="2438197">old</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438203">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2438214">//&nbsp;Don&#39;t&nbsp;hold&nbsp;on&nbsp;to&nbsp;ss&nbsp;structs&nbsp;with&nbsp;large&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438266">if</span>&nbsp;<span class="builtinfunc" id="2438269">cap</span><span class="op" id="2438272">(</span><span class="ident" id="2438273">s</span><span class="op" id="2438274">.</span><span class="ident" id="2438275">buf</span><span class="op" id="2438278">)</span>&nbsp;<span class="op" id="2438280">&gt;</span>&nbsp;<span class="num" id="2438282">1024</span>&nbsp;<span class="op" id="2438287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438291">return</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438302">s</span><span class="op" id="2438303">.</span><span class="ident" id="2438304">buf</span>&nbsp;<span class="op" id="2438308">=</span>&nbsp;<span class="ident" id="2438310">s</span><span class="op" id="2438311">.</span><span class="ident" id="2438312">buf</span><span class="op" id="2438315">[</span><span class="op" id="2438316">:</span><span class="num" id="2438317">0</span><span class="op" id="2438318">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438321">s</span><span class="op" id="2438322">.</span><span class="ident" id="2438323">rr</span>&nbsp;<span class="op" id="2438326">=</span>&nbsp;<span class="builtintype" id="2438328">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438333">ssFree</span><span class="op" id="2438339">.</span><span class="ident" id="2438340">Put</span><span class="op" id="2438343">(</span><span class="ident" id="2438344">s</span><span class="op" id="2438345">)</span><br>
<span class="lineno"></span><span class="op" id="2438347">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="2438350">//&nbsp;skipSpace&nbsp;skips&nbsp;spaces&nbsp;and&nbsp;maybe&nbsp;newlines.</span><br>
<span class="lineno"></span><span class="keyword" id="2438396">func</span>&nbsp;<span class="op" id="2438401">(</span><span class="ident" id="2438402">s</span>&nbsp;<span class="op" id="2438404">*</span><span class="ident" id="2438405">ss</span><span class="op" id="2438407">)</span>&nbsp;<span class="ident" id="2438409">skipSpace</span><span class="op" id="2438418">(</span><span class="ident" id="2438419">stopAtNewline</span>&nbsp;<span class="builtintype" id="2438433">bool</span><span class="op" id="2438437">)</span>&nbsp;<span class="op" id="2438439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438442">for</span>&nbsp;<span class="op" id="2438446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438450">r</span>&nbsp;<span class="op" id="2438452">:=</span>&nbsp;<span class="ident" id="2438455">s</span><span class="op" id="2438456">.</span><span class="ident" id="2438457">getRune</span><span class="op" id="2438464">(</span><span class="op" id="2438465">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438469">if</span>&nbsp;<span class="ident" id="2438472">r</span>&nbsp;<span class="op" id="2438474">==</span>&nbsp;<span class="ident" id="2438477">eof</span>&nbsp;<span class="op" id="2438481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438486">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438499">if</span>&nbsp;<span class="ident" id="2438502">r</span>&nbsp;<span class="op" id="2438504">==</span>&nbsp;<span class="string" id="2438507">&#39;\r&#39;</span>&nbsp;<span class="op" id="2438512">&amp;&amp;</span>&nbsp;<span class="ident" id="2438515">s</span><span class="op" id="2438516">.</span><span class="ident" id="2438517">peek</span><span class="op" id="2438521">(</span><span class="string" id="2438522">&#34;\n&#34;</span><span class="op" id="2438526">)</span>&nbsp;<span class="op" id="2438528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438533">continue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438548">if</span>&nbsp;<span class="ident" id="2438551">r</span>&nbsp;<span class="op" id="2438553">==</span>&nbsp;<span class="string" id="2438556">&#39;\n&#39;</span>&nbsp;<span class="op" id="2438561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438566">if</span>&nbsp;<span class="ident" id="2438569">stopAtNewline</span>&nbsp;<span class="op" id="2438583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438589">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438598">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438603">if</span>&nbsp;<span class="ident" id="2438606">s</span><span class="op" id="2438607">.</span><span class="ident" id="2438608">nlIsSpace</span>&nbsp;<span class="op" id="2438618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438624">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438641">s</span><span class="op" id="2438642">.</span><span class="ident" id="2438643">errorString</span><span class="op" id="2438654">(</span><span class="string" id="2438655">&#34;unexpected&nbsp;newline&#34;</span><span class="op" id="2438675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438680">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438693">if</span>&nbsp;<span class="op" id="2438696">!</span><span class="ident" id="2438697">isSpace</span><span class="op" id="2438704">(</span><span class="ident" id="2438705">r</span><span class="op" id="2438706">)</span>&nbsp;<span class="op" id="2438708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2438713">s</span><span class="op" id="2438714">.</span><span class="ident" id="2438715">UnreadRune</span><span class="op" id="2438725">(</span><span class="op" id="2438726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438731">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438739">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2438742">}</span><br>
<span class="lineno"></span><span class="op" id="2438744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2438747">//&nbsp;token&nbsp;returns&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;string&nbsp;from&nbsp;the&nbsp;input.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2438816">//&nbsp;skips&nbsp;white&nbsp;space.&nbsp;&nbsp;For&nbsp;Scanln,&nbsp;it&nbsp;stops&nbsp;at&nbsp;newlines.&nbsp;&nbsp;For&nbsp;Scan,</span><br>
<span class="lineno">465</span><span class="comment" id="2438884">//&nbsp;newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno"></span><span class="keyword" id="2438919">func</span>&nbsp;<span class="op" id="2438924">(</span><span class="ident" id="2438925">s</span>&nbsp;<span class="op" id="2438927">*</span><span class="ident" id="2438928">ss</span><span class="op" id="2438930">)</span>&nbsp;<span class="ident" id="2438932">token</span><span class="op" id="2438937">(</span><span class="ident" id="2438938">skipSpace</span>&nbsp;<span class="builtintype" id="2438948">bool</span><span class="op" id="2438952">,</span>&nbsp;<span class="ident" id="2438954">f</span>&nbsp;<span class="keyword" id="2438956">func</span><span class="op" id="2438960">(</span><span class="builtintype" id="2438961">rune</span><span class="op" id="2438965">)</span>&nbsp;<span class="builtintype" id="2438967">bool</span><span class="op" id="2438971">)</span>&nbsp;<span class="op" id="2438973">[</span><span class="op" id="2438974">]</span><span class="builtintype" id="2438975">byte</span>&nbsp;<span class="op" id="2438980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2438983">if</span>&nbsp;<span class="ident" id="2438986">skipSpace</span>&nbsp;<span class="op" id="2438996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439000">s</span><span class="op" id="2439001">.</span><span class="ident" id="2439002">skipSpace</span><span class="op" id="2439011">(</span><span class="builtintype" id="2439012">false</span><span class="op" id="2439017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439020">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2439023">//&nbsp;read&nbsp;until&nbsp;white&nbsp;space&nbsp;or&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439061">for</span>&nbsp;<span class="op" id="2439065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439069">r</span>&nbsp;<span class="op" id="2439071">:=</span>&nbsp;<span class="ident" id="2439074">s</span><span class="op" id="2439075">.</span><span class="ident" id="2439076">getRune</span><span class="op" id="2439083">(</span><span class="op" id="2439084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439088">if</span>&nbsp;<span class="ident" id="2439091">r</span>&nbsp;<span class="op" id="2439093">==</span>&nbsp;<span class="ident" id="2439096">eof</span>&nbsp;<span class="op" id="2439100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439105">break</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439117">if</span>&nbsp;<span class="op" id="2439120">!</span><span class="ident" id="2439121">f</span><span class="op" id="2439122">(</span><span class="ident" id="2439123">r</span><span class="op" id="2439124">)</span>&nbsp;<span class="op" id="2439126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439131">s</span><span class="op" id="2439132">.</span><span class="ident" id="2439133">UnreadRune</span><span class="op" id="2439143">(</span><span class="op" id="2439144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439149">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439157">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439161">s</span><span class="op" id="2439162">.</span><span class="ident" id="2439163">buf</span><span class="op" id="2439166">.</span><span class="ident" id="2439167">WriteRune</span><span class="op" id="2439176">(</span><span class="ident" id="2439177">r</span><span class="op" id="2439178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439184">return</span>&nbsp;<span class="ident" id="2439191">s</span><span class="op" id="2439192">.</span><span class="ident" id="2439193">buf</span><br>
<span class="lineno"></span><span class="op" id="2439197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="2439200">var</span>&nbsp;<span class="ident" id="2439204">complexError</span>&nbsp;<span class="op" id="2439217">=</span>&nbsp;<span class="ident" id="2439219">errors</span><span class="op" id="2439225">.</span><span class="ident" id="2439226">New</span><span class="op" id="2439229">(</span><span class="string" id="2439230">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;complex&nbsp;number&#34;</span><span class="op" id="2439268">)</span><br>
<span class="lineno"></span><span class="keyword" id="2439270">var</span>&nbsp;<span class="ident" id="2439274">boolError</span>&nbsp;<span class="op" id="2439284">=</span>&nbsp;<span class="ident" id="2439286">errors</span><span class="op" id="2439292">.</span><span class="ident" id="2439293">New</span><span class="op" id="2439296">(</span><span class="string" id="2439297">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;boolean&#34;</span><span class="op" id="2439328">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2439331">func</span>&nbsp;<span class="ident" id="2439336">indexRune</span><span class="op" id="2439345">(</span><span class="ident" id="2439346">s</span>&nbsp;<span class="builtintype" id="2439348">string</span><span class="op" id="2439354">,</span>&nbsp;<span class="ident" id="2439356">r</span>&nbsp;<span class="builtintype" id="2439358">rune</span><span class="op" id="2439362">)</span>&nbsp;<span class="builtintype" id="2439364">int</span>&nbsp;<span class="op" id="2439368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439371">for</span>&nbsp;<span class="ident" id="2439375">i</span><span class="op" id="2439376">,</span>&nbsp;<span class="ident" id="2439378">c</span>&nbsp;<span class="op" id="2439380">:=</span>&nbsp;<span class="keyword" id="2439383">range</span>&nbsp;<span class="ident" id="2439389">s</span>&nbsp;<span class="op" id="2439391">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439395">if</span>&nbsp;<span class="ident" id="2439398">c</span>&nbsp;<span class="op" id="2439400">==</span>&nbsp;<span class="ident" id="2439403">r</span>&nbsp;<span class="op" id="2439405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439410">return</span>&nbsp;<span class="ident" id="2439417">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439427">return</span>&nbsp;<span class="op" id="2439434">-</span><span class="num" id="2439435">1</span><br>
<span class="lineno">495</span><span class="op" id="2439437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2439440">//&nbsp;consume&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2439528">//&nbsp;If&nbsp;accept&nbsp;is&nbsp;true,&nbsp;it&nbsp;puts&nbsp;the&nbsp;character&nbsp;into&nbsp;the&nbsp;input&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2439594">func</span>&nbsp;<span class="op" id="2439599">(</span><span class="ident" id="2439600">s</span>&nbsp;<span class="op" id="2439602">*</span><span class="ident" id="2439603">ss</span><span class="op" id="2439605">)</span>&nbsp;<span class="ident" id="2439607">consume</span><span class="op" id="2439614">(</span><span class="ident" id="2439615">ok</span>&nbsp;<span class="builtintype" id="2439618">string</span><span class="op" id="2439624">,</span>&nbsp;<span class="ident" id="2439626">accept</span>&nbsp;<span class="builtintype" id="2439633">bool</span><span class="op" id="2439637">)</span>&nbsp;<span class="builtintype" id="2439639">bool</span>&nbsp;<span class="op" id="2439644">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439647">r</span>&nbsp;<span class="op" id="2439649">:=</span>&nbsp;<span class="ident" id="2439652">s</span><span class="op" id="2439653">.</span><span class="ident" id="2439654">getRune</span><span class="op" id="2439661">(</span><span class="op" id="2439662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439665">if</span>&nbsp;<span class="ident" id="2439668">r</span>&nbsp;<span class="op" id="2439670">==</span>&nbsp;<span class="ident" id="2439673">eof</span>&nbsp;<span class="op" id="2439677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439681">return</span>&nbsp;<span class="builtintype" id="2439688">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439698">if</span>&nbsp;<span class="ident" id="2439701">indexRune</span><span class="op" id="2439710">(</span><span class="ident" id="2439711">ok</span><span class="op" id="2439713">,</span>&nbsp;<span class="ident" id="2439715">r</span><span class="op" id="2439716">)</span>&nbsp;<span class="op" id="2439718">&gt;=</span>&nbsp;<span class="num" id="2439721">0</span>&nbsp;<span class="op" id="2439723">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439727">if</span>&nbsp;<span class="ident" id="2439730">accept</span>&nbsp;<span class="op" id="2439737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439742">s</span><span class="op" id="2439743">.</span><span class="ident" id="2439744">buf</span><span class="op" id="2439747">.</span><span class="ident" id="2439748">WriteRune</span><span class="op" id="2439757">(</span><span class="ident" id="2439758">r</span><span class="op" id="2439759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439767">return</span>&nbsp;<span class="builtintype" id="2439774">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439780">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439783">if</span>&nbsp;<span class="ident" id="2439786">r</span>&nbsp;<span class="op" id="2439788">!=</span>&nbsp;<span class="ident" id="2439791">eof</span>&nbsp;<span class="op" id="2439795">&amp;&amp;</span>&nbsp;<span class="ident" id="2439798">accept</span>&nbsp;<span class="op" id="2439805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439809">s</span><span class="op" id="2439810">.</span><span class="ident" id="2439811">UnreadRune</span><span class="op" id="2439821">(</span><span class="op" id="2439822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2439825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439828">return</span>&nbsp;<span class="builtintype" id="2439835">false</span><br>
<span class="lineno"></span><span class="op" id="2439841">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="2439844">//&nbsp;peek&nbsp;reports&nbsp;whether&nbsp;the&nbsp;next&nbsp;character&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string,&nbsp;without&nbsp;consuming&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2439930">func</span>&nbsp;<span class="op" id="2439935">(</span><span class="ident" id="2439936">s</span>&nbsp;<span class="op" id="2439938">*</span><span class="ident" id="2439939">ss</span><span class="op" id="2439941">)</span>&nbsp;<span class="ident" id="2439943">peek</span><span class="op" id="2439947">(</span><span class="ident" id="2439948">ok</span>&nbsp;<span class="builtintype" id="2439951">string</span><span class="op" id="2439957">)</span>&nbsp;<span class="builtintype" id="2439959">bool</span>&nbsp;<span class="op" id="2439964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2439967">r</span>&nbsp;<span class="op" id="2439969">:=</span>&nbsp;<span class="ident" id="2439972">s</span><span class="op" id="2439973">.</span><span class="ident" id="2439974">getRune</span><span class="op" id="2439981">(</span><span class="op" id="2439982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2439985">if</span>&nbsp;<span class="ident" id="2439988">r</span>&nbsp;<span class="op" id="2439990">!=</span>&nbsp;<span class="ident" id="2439993">eof</span>&nbsp;<span class="op" id="2439997">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2440001">s</span><span class="op" id="2440002">.</span><span class="ident" id="2440003">UnreadRune</span><span class="op" id="2440013">(</span><span class="op" id="2440014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2440017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440020">return</span>&nbsp;<span class="ident" id="2440027">indexRune</span><span class="op" id="2440036">(</span><span class="ident" id="2440037">ok</span><span class="op" id="2440039">,</span>&nbsp;<span class="ident" id="2440041">r</span><span class="op" id="2440042">)</span>&nbsp;<span class="op" id="2440044">&gt;=</span>&nbsp;<span class="num" id="2440047">0</span><br>
<span class="lineno"></span><span class="op" id="2440049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="keyword" id="2440052">func</span>&nbsp;<span class="op" id="2440057">(</span><span class="ident" id="2440058">s</span>&nbsp;<span class="op" id="2440060">*</span><span class="ident" id="2440061">ss</span><span class="op" id="2440063">)</span>&nbsp;<span class="ident" id="2440065">notEOF</span><span class="op" id="2440071">(</span><span class="op" id="2440072">)</span>&nbsp;<span class="op" id="2440074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2440077">//&nbsp;Guarantee&nbsp;there&nbsp;is&nbsp;data&nbsp;to&nbsp;be&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440117">if</span>&nbsp;<span class="ident" id="2440120">r</span>&nbsp;<span class="op" id="2440122">:=</span>&nbsp;<span class="ident" id="2440125">s</span><span class="op" id="2440126">.</span><span class="ident" id="2440127">getRune</span><span class="op" id="2440134">(</span><span class="op" id="2440135">)</span><span class="op" id="2440136">;</span>&nbsp;<span class="ident" id="2440138">r</span>&nbsp;<span class="op" id="2440140">==</span>&nbsp;<span class="ident" id="2440143">eof</span>&nbsp;<span class="op" id="2440147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2440151">panic</span><span class="op" id="2440156">(</span><span class="ident" id="2440157">io</span><span class="op" id="2440159">.</span><span class="ident" id="2440160">EOF</span><span class="op" id="2440163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2440166">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2440169">s</span><span class="op" id="2440170">.</span><span class="ident" id="2440171">UnreadRune</span><span class="op" id="2440181">(</span><span class="op" id="2440182">)</span><br>
<span class="lineno"></span><span class="op" id="2440184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2440187">//&nbsp;accept&nbsp;checks&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.&nbsp;&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;byte&nbsp;(sic)&nbsp;in&nbsp;the&nbsp;string,&nbsp;it&nbsp;puts&nbsp;it&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2440287">//&nbsp;buffer&nbsp;and&nbsp;returns&nbsp;true.&nbsp;Otherwise&nbsp;it&nbsp;return&nbsp;false.</span><br>
<span class="lineno">535</span><span class="keyword" id="2440342">func</span>&nbsp;<span class="op" id="2440347">(</span><span class="ident" id="2440348">s</span>&nbsp;<span class="op" id="2440350">*</span><span class="ident" id="2440351">ss</span><span class="op" id="2440353">)</span>&nbsp;<span class="ident" id="2440355">accept</span><span class="op" id="2440361">(</span><span class="ident" id="2440362">ok</span>&nbsp;<span class="builtintype" id="2440365">string</span><span class="op" id="2440371">)</span>&nbsp;<span class="builtintype" id="2440373">bool</span>&nbsp;<span class="op" id="2440378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440381">return</span>&nbsp;<span class="ident" id="2440388">s</span><span class="op" id="2440389">.</span><span class="ident" id="2440390">consume</span><span class="op" id="2440397">(</span><span class="ident" id="2440398">ok</span><span class="op" id="2440400">,</span>&nbsp;<span class="builtintype" id="2440402">true</span><span class="op" id="2440406">)</span><br>
<span class="lineno"></span><span class="op" id="2440408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2440411">//&nbsp;okVerb&nbsp;verifies&nbsp;that&nbsp;the&nbsp;verb&nbsp;is&nbsp;present&nbsp;in&nbsp;the&nbsp;list,&nbsp;setting&nbsp;s.err&nbsp;appropriately&nbsp;if&nbsp;not.</span><br>
<span class="lineno">540</span><span class="keyword" id="2440504">func</span>&nbsp;<span class="op" id="2440509">(</span><span class="ident" id="2440510">s</span>&nbsp;<span class="op" id="2440512">*</span><span class="ident" id="2440513">ss</span><span class="op" id="2440515">)</span>&nbsp;<span class="ident" id="2440517">okVerb</span><span class="op" id="2440523">(</span><span class="ident" id="2440524">verb</span>&nbsp;<span class="builtintype" id="2440529">rune</span><span class="op" id="2440533">,</span>&nbsp;<span class="ident" id="2440535">okVerbs</span><span class="op" id="2440542">,</span>&nbsp;<span class="ident" id="2440544">typ</span>&nbsp;<span class="builtintype" id="2440548">string</span><span class="op" id="2440554">)</span>&nbsp;<span class="builtintype" id="2440556">bool</span>&nbsp;<span class="op" id="2440561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440564">for</span>&nbsp;<span class="ident" id="2440568">_</span><span class="op" id="2440569">,</span>&nbsp;<span class="ident" id="2440571">v</span>&nbsp;<span class="op" id="2440573">:=</span>&nbsp;<span class="keyword" id="2440576">range</span>&nbsp;<span class="ident" id="2440582">okVerbs</span>&nbsp;<span class="op" id="2440590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440594">if</span>&nbsp;<span class="ident" id="2440597">v</span>&nbsp;<span class="op" id="2440599">==</span>&nbsp;<span class="ident" id="2440602">verb</span>&nbsp;<span class="op" id="2440607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440612">return</span>&nbsp;<span class="builtintype" id="2440619">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2440626">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2440629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2440632">s</span><span class="op" id="2440633">.</span><span class="ident" id="2440634">errorString</span><span class="op" id="2440645">(</span><span class="string" id="2440646">&#34;bad&nbsp;verb&nbsp;%&#34;</span>&nbsp;<span class="op" id="2440659">+</span>&nbsp;<span class="builtintype" id="2440661">string</span><span class="op" id="2440667">(</span><span class="ident" id="2440668">verb</span><span class="op" id="2440672">)</span>&nbsp;<span class="op" id="2440674">+</span>&nbsp;<span class="string" id="2440676">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2440684">+</span>&nbsp;<span class="ident" id="2440686">typ</span><span class="op" id="2440689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440692">return</span>&nbsp;<span class="builtintype" id="2440699">false</span><br>
<span class="lineno"></span><span class="op" id="2440705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="2440708">//&nbsp;scanBool&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2440784">func</span>&nbsp;<span class="op" id="2440789">(</span><span class="ident" id="2440790">s</span>&nbsp;<span class="op" id="2440792">*</span><span class="ident" id="2440793">ss</span><span class="op" id="2440795">)</span>&nbsp;<span class="ident" id="2440797">scanBool</span><span class="op" id="2440805">(</span><span class="ident" id="2440806">verb</span>&nbsp;<span class="builtintype" id="2440811">rune</span><span class="op" id="2440815">)</span>&nbsp;<span class="builtintype" id="2440817">bool</span>&nbsp;<span class="op" id="2440822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2440825">s</span><span class="op" id="2440826">.</span><span class="ident" id="2440827">skipSpace</span><span class="op" id="2440836">(</span><span class="builtintype" id="2440837">false</span><span class="op" id="2440842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2440845">s</span><span class="op" id="2440846">.</span><span class="ident" id="2440847">notEOF</span><span class="op" id="2440853">(</span><span class="op" id="2440854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440857">if</span>&nbsp;<span class="op" id="2440860">!</span><span class="ident" id="2440861">s</span><span class="op" id="2440862">.</span><span class="ident" id="2440863">okVerb</span><span class="op" id="2440869">(</span><span class="ident" id="2440870">verb</span><span class="op" id="2440874">,</span>&nbsp;<span class="string" id="2440876">&#34;tv&#34;</span><span class="op" id="2440880">,</span>&nbsp;<span class="string" id="2440882">&#34;boolean&#34;</span><span class="op" id="2440891">)</span>&nbsp;<span class="op" id="2440893">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440897">return</span>&nbsp;<span class="builtintype" id="2440904">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2440911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2440914">//&nbsp;Syntax-checking&nbsp;a&nbsp;boolean&nbsp;is&nbsp;annoying.&nbsp;&nbsp;We&#39;re&nbsp;not&nbsp;fastidious&nbsp;about&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2440991">switch</span>&nbsp;<span class="ident" id="2440998">s</span><span class="op" id="2440999">.</span><span class="ident" id="2441000">getRune</span><span class="op" id="2441007">(</span><span class="op" id="2441008">)</span>&nbsp;<span class="op" id="2441010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441013">case</span>&nbsp;<span class="string" id="2441018">&#39;0&#39;</span><span class="op" id="2441021">:</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441025">return</span>&nbsp;<span class="builtintype" id="2441032">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441039">case</span>&nbsp;<span class="string" id="2441044">&#39;1&#39;</span><span class="op" id="2441047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441051">return</span>&nbsp;<span class="builtintype" id="2441058">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441064">case</span>&nbsp;<span class="string" id="2441069">&#39;t&#39;</span><span class="op" id="2441072">,</span>&nbsp;<span class="string" id="2441074">&#39;T&#39;</span><span class="op" id="2441077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441081">if</span>&nbsp;<span class="ident" id="2441084">s</span><span class="op" id="2441085">.</span><span class="ident" id="2441086">accept</span><span class="op" id="2441092">(</span><span class="string" id="2441093">&#34;rR&#34;</span><span class="op" id="2441097">)</span>&nbsp;<span class="op" id="2441099">&amp;&amp;</span>&nbsp;<span class="op" id="2441102">(</span><span class="op" id="2441103">!</span><span class="ident" id="2441104">s</span><span class="op" id="2441105">.</span><span class="ident" id="2441106">accept</span><span class="op" id="2441112">(</span><span class="string" id="2441113">&#34;uU&#34;</span><span class="op" id="2441117">)</span>&nbsp;<span class="op" id="2441119">||</span>&nbsp;<span class="op" id="2441122">!</span><span class="ident" id="2441123">s</span><span class="op" id="2441124">.</span><span class="ident" id="2441125">accept</span><span class="op" id="2441131">(</span><span class="string" id="2441132">&#34;eE&#34;</span><span class="op" id="2441136">)</span><span class="op" id="2441137">)</span>&nbsp;<span class="op" id="2441139">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441144">s</span><span class="op" id="2441145">.</span><span class="builtintype" id="2441146">error</span><span class="op" id="2441151">(</span><span class="ident" id="2441152">boolError</span><span class="op" id="2441161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441169">return</span>&nbsp;<span class="builtintype" id="2441176">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441182">case</span>&nbsp;<span class="string" id="2441187">&#39;f&#39;</span><span class="op" id="2441190">,</span>&nbsp;<span class="string" id="2441192">&#39;F&#39;</span><span class="op" id="2441195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441199">if</span>&nbsp;<span class="ident" id="2441202">s</span><span class="op" id="2441203">.</span><span class="ident" id="2441204">accept</span><span class="op" id="2441210">(</span><span class="string" id="2441211">&#34;aA&#34;</span><span class="op" id="2441215">)</span>&nbsp;<span class="op" id="2441217">&amp;&amp;</span>&nbsp;<span class="op" id="2441220">(</span><span class="op" id="2441221">!</span><span class="ident" id="2441222">s</span><span class="op" id="2441223">.</span><span class="ident" id="2441224">accept</span><span class="op" id="2441230">(</span><span class="string" id="2441231">&#34;lL&#34;</span><span class="op" id="2441235">)</span>&nbsp;<span class="op" id="2441237">||</span>&nbsp;<span class="op" id="2441240">!</span><span class="ident" id="2441241">s</span><span class="op" id="2441242">.</span><span class="ident" id="2441243">accept</span><span class="op" id="2441249">(</span><span class="string" id="2441250">&#34;sS&#34;</span><span class="op" id="2441254">)</span>&nbsp;<span class="op" id="2441256">||</span>&nbsp;<span class="op" id="2441259">!</span><span class="ident" id="2441260">s</span><span class="op" id="2441261">.</span><span class="ident" id="2441262">accept</span><span class="op" id="2441268">(</span><span class="string" id="2441269">&#34;eE&#34;</span><span class="op" id="2441273">)</span><span class="op" id="2441274">)</span>&nbsp;<span class="op" id="2441276">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441281">s</span><span class="op" id="2441282">.</span><span class="builtintype" id="2441283">error</span><span class="op" id="2441288">(</span><span class="ident" id="2441289">boolError</span><span class="op" id="2441298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441306">return</span>&nbsp;<span class="builtintype" id="2441313">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441323">return</span>&nbsp;<span class="builtintype" id="2441330">false</span><br>
<span class="lineno">575</span><span class="op" id="2441336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2441339">//&nbsp;Numerical&nbsp;elements</span><br>
<span class="lineno"></span><span class="keyword" id="2441361">const</span>&nbsp;<span class="op" id="2441367">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441370">binaryDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441388">=</span>&nbsp;<span class="string" id="2441390">&#34;01&#34;</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441396">octalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441414">=</span>&nbsp;<span class="string" id="2441416">&#34;01234567&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441428">decimalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441446">=</span>&nbsp;<span class="string" id="2441448">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441462">hexadecimalDigits</span>&nbsp;<span class="op" id="2441480">=</span>&nbsp;<span class="string" id="2441482">&#34;0123456789aAbBcCdDeEfF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441508">sign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441526">=</span>&nbsp;<span class="string" id="2441528">&#34;+-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441534">period</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441552">=</span>&nbsp;<span class="string" id="2441554">&#34;.&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441559">exponent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441577">=</span>&nbsp;<span class="string" id="2441579">&#34;eEp&#34;</span><br>
<span class="lineno"></span><span class="op" id="2441585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2441588">//&nbsp;getBase&nbsp;returns&nbsp;the&nbsp;numeric&nbsp;base&nbsp;represented&nbsp;by&nbsp;the&nbsp;verb&nbsp;and&nbsp;its&nbsp;digit&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2441670">func</span>&nbsp;<span class="op" id="2441675">(</span><span class="ident" id="2441676">s</span>&nbsp;<span class="op" id="2441678">*</span><span class="ident" id="2441679">ss</span><span class="op" id="2441681">)</span>&nbsp;<span class="ident" id="2441683">getBase</span><span class="op" id="2441690">(</span><span class="ident" id="2441691">verb</span>&nbsp;<span class="builtintype" id="2441696">rune</span><span class="op" id="2441700">)</span>&nbsp;<span class="op" id="2441702">(</span><span class="ident" id="2441703">base</span>&nbsp;<span class="builtintype" id="2441708">int</span><span class="op" id="2441711">,</span>&nbsp;<span class="ident" id="2441713">digits</span>&nbsp;<span class="builtintype" id="2441720">string</span><span class="op" id="2441726">)</span>&nbsp;<span class="op" id="2441728">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441731">s</span><span class="op" id="2441732">.</span><span class="ident" id="2441733">okVerb</span><span class="op" id="2441739">(</span><span class="ident" id="2441740">verb</span><span class="op" id="2441744">,</span>&nbsp;<span class="string" id="2441746">&#34;bdoUxXv&#34;</span><span class="op" id="2441755">,</span>&nbsp;<span class="string" id="2441757">&#34;integer&#34;</span><span class="op" id="2441766">)</span>&nbsp;<span class="comment" id="2441768">//&nbsp;sets&nbsp;s.err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441783">base</span>&nbsp;<span class="op" id="2441788">=</span>&nbsp;<span class="num" id="2441790">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441794">digits</span>&nbsp;<span class="op" id="2441801">=</span>&nbsp;<span class="ident" id="2441803">decimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441818">switch</span>&nbsp;<span class="ident" id="2441825">verb</span>&nbsp;<span class="op" id="2441830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441833">case</span>&nbsp;<span class="string" id="2441838">&#39;b&#39;</span><span class="op" id="2441841">:</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441845">base</span>&nbsp;<span class="op" id="2441850">=</span>&nbsp;<span class="num" id="2441852">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441856">digits</span>&nbsp;<span class="op" id="2441863">=</span>&nbsp;<span class="ident" id="2441865">binaryDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441879">case</span>&nbsp;<span class="string" id="2441884">&#39;o&#39;</span><span class="op" id="2441887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441891">base</span>&nbsp;<span class="op" id="2441896">=</span>&nbsp;<span class="num" id="2441898">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441902">digits</span>&nbsp;<span class="op" id="2441909">=</span>&nbsp;<span class="ident" id="2441911">octalDigits</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441924">case</span>&nbsp;<span class="string" id="2441929">&#39;x&#39;</span><span class="op" id="2441932">,</span>&nbsp;<span class="string" id="2441934">&#39;X&#39;</span><span class="op" id="2441937">,</span>&nbsp;<span class="string" id="2441939">&#39;U&#39;</span><span class="op" id="2441942">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441946">base</span>&nbsp;<span class="op" id="2441951">=</span>&nbsp;<span class="num" id="2441953">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2441958">digits</span>&nbsp;<span class="op" id="2441965">=</span>&nbsp;<span class="ident" id="2441967">hexadecimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2441986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2441989">return</span><br>
<span class="lineno">605</span><span class="op" id="2441996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2441999">//&nbsp;scanNumber&nbsp;returns&nbsp;the&nbsp;numerical&nbsp;string&nbsp;with&nbsp;specified&nbsp;digits&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="keyword" id="2442079">func</span>&nbsp;<span class="op" id="2442084">(</span><span class="ident" id="2442085">s</span>&nbsp;<span class="op" id="2442087">*</span><span class="ident" id="2442088">ss</span><span class="op" id="2442090">)</span>&nbsp;<span class="ident" id="2442092">scanNumber</span><span class="op" id="2442102">(</span><span class="ident" id="2442103">digits</span>&nbsp;<span class="builtintype" id="2442110">string</span><span class="op" id="2442116">,</span>&nbsp;<span class="ident" id="2442118">haveDigits</span>&nbsp;<span class="builtintype" id="2442129">bool</span><span class="op" id="2442133">)</span>&nbsp;<span class="builtintype" id="2442135">string</span>&nbsp;<span class="op" id="2442142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442145">if</span>&nbsp;<span class="op" id="2442148">!</span><span class="ident" id="2442149">haveDigits</span>&nbsp;<span class="op" id="2442160">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442164">s</span><span class="op" id="2442165">.</span><span class="ident" id="2442166">notEOF</span><span class="op" id="2442172">(</span><span class="op" id="2442173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442177">if</span>&nbsp;<span class="op" id="2442180">!</span><span class="ident" id="2442181">s</span><span class="op" id="2442182">.</span><span class="ident" id="2442183">accept</span><span class="op" id="2442189">(</span><span class="ident" id="2442190">digits</span><span class="op" id="2442196">)</span>&nbsp;<span class="op" id="2442198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442203">s</span><span class="op" id="2442204">.</span><span class="ident" id="2442205">errorString</span><span class="op" id="2442216">(</span><span class="string" id="2442217">&#34;expected&nbsp;integer&#34;</span><span class="op" id="2442235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2442239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2442242">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442245">for</span>&nbsp;<span class="ident" id="2442249">s</span><span class="op" id="2442250">.</span><span class="ident" id="2442251">accept</span><span class="op" id="2442257">(</span><span class="ident" id="2442258">digits</span><span class="op" id="2442264">)</span>&nbsp;<span class="op" id="2442266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2442269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442272">return</span>&nbsp;<span class="builtintype" id="2442279">string</span><span class="op" id="2442285">(</span><span class="ident" id="2442286">s</span><span class="op" id="2442287">.</span><span class="ident" id="2442288">buf</span><span class="op" id="2442291">)</span><br>
<span class="lineno"></span><span class="op" id="2442293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2442296">//&nbsp;scanRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;value&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="2442350">func</span>&nbsp;<span class="op" id="2442355">(</span><span class="ident" id="2442356">s</span>&nbsp;<span class="op" id="2442358">*</span><span class="ident" id="2442359">ss</span><span class="op" id="2442361">)</span>&nbsp;<span class="ident" id="2442363">scanRune</span><span class="op" id="2442371">(</span><span class="ident" id="2442372">bitSize</span>&nbsp;<span class="builtintype" id="2442380">int</span><span class="op" id="2442383">)</span>&nbsp;<span class="builtintype" id="2442385">int64</span>&nbsp;<span class="op" id="2442391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442394">s</span><span class="op" id="2442395">.</span><span class="ident" id="2442396">notEOF</span><span class="op" id="2442402">(</span><span class="op" id="2442403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442406">r</span>&nbsp;<span class="op" id="2442408">:=</span>&nbsp;<span class="builtintype" id="2442411">int64</span><span class="op" id="2442416">(</span><span class="ident" id="2442417">s</span><span class="op" id="2442418">.</span><span class="ident" id="2442419">getRune</span><span class="op" id="2442426">(</span><span class="op" id="2442427">)</span><span class="op" id="2442428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442431">n</span>&nbsp;<span class="op" id="2442433">:=</span>&nbsp;<span class="builtintype" id="2442436">uint</span><span class="op" id="2442440">(</span><span class="ident" id="2442441">bitSize</span><span class="op" id="2442448">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442451">x</span>&nbsp;<span class="op" id="2442453">:=</span>&nbsp;<span class="op" id="2442456">(</span><span class="ident" id="2442457">r</span>&nbsp;<span class="op" id="2442459">&lt;&lt;</span>&nbsp;<span class="op" id="2442462">(</span><span class="num" id="2442463">64</span>&nbsp;<span class="op" id="2442466">-</span>&nbsp;<span class="ident" id="2442468">n</span><span class="op" id="2442469">)</span><span class="op" id="2442470">)</span>&nbsp;<span class="op" id="2442472">&gt;&gt;</span>&nbsp;<span class="op" id="2442475">(</span><span class="num" id="2442476">64</span>&nbsp;<span class="op" id="2442479">-</span>&nbsp;<span class="ident" id="2442481">n</span><span class="op" id="2442482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442485">if</span>&nbsp;<span class="ident" id="2442488">x</span>&nbsp;<span class="op" id="2442490">!=</span>&nbsp;<span class="ident" id="2442493">r</span>&nbsp;<span class="op" id="2442495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442499">s</span><span class="op" id="2442500">.</span><span class="ident" id="2442501">errorString</span><span class="op" id="2442512">(</span><span class="string" id="2442513">&#34;overflow&nbsp;on&nbsp;character&nbsp;value&nbsp;&#34;</span>&nbsp;<span class="op" id="2442544">+</span>&nbsp;<span class="builtintype" id="2442546">string</span><span class="op" id="2442552">(</span><span class="ident" id="2442553">r</span><span class="op" id="2442554">)</span><span class="op" id="2442555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2442558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442561">return</span>&nbsp;<span class="ident" id="2442568">r</span><br>
<span class="lineno">630</span><span class="op" id="2442570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2442573">//&nbsp;scanBasePrefix&nbsp;reports&nbsp;whether&nbsp;the&nbsp;integer&nbsp;begins&nbsp;with&nbsp;a&nbsp;0&nbsp;or&nbsp;0x,</span><br>
<span class="lineno"></span><span class="comment" id="2442642">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;base,&nbsp;digit&nbsp;string,&nbsp;and&nbsp;whether&nbsp;a&nbsp;zero&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2442711">//&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;the&nbsp;verb&nbsp;is&nbsp;%v.</span><br>
<span class="lineno">635</span><span class="keyword" id="2442751">func</span>&nbsp;<span class="op" id="2442756">(</span><span class="ident" id="2442757">s</span>&nbsp;<span class="op" id="2442759">*</span><span class="ident" id="2442760">ss</span><span class="op" id="2442762">)</span>&nbsp;<span class="ident" id="2442764">scanBasePrefix</span><span class="op" id="2442778">(</span><span class="op" id="2442779">)</span>&nbsp;<span class="op" id="2442781">(</span><span class="ident" id="2442782">base</span>&nbsp;<span class="builtintype" id="2442787">int</span><span class="op" id="2442790">,</span>&nbsp;<span class="ident" id="2442792">digits</span>&nbsp;<span class="builtintype" id="2442799">string</span><span class="op" id="2442805">,</span>&nbsp;<span class="ident" id="2442807">found</span>&nbsp;<span class="builtintype" id="2442813">bool</span><span class="op" id="2442817">)</span>&nbsp;<span class="op" id="2442819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442822">if</span>&nbsp;<span class="op" id="2442825">!</span><span class="ident" id="2442826">s</span><span class="op" id="2442827">.</span><span class="ident" id="2442828">peek</span><span class="op" id="2442832">(</span><span class="string" id="2442833">&#34;0&#34;</span><span class="op" id="2442836">)</span>&nbsp;<span class="op" id="2442838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2442842">return</span>&nbsp;<span class="num" id="2442849">10</span><span class="op" id="2442851">,</span>&nbsp;<span class="ident" id="2442853">decimalDigits</span><span class="op" id="2442866">,</span>&nbsp;<span class="builtintype" id="2442868">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2442875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442878">s</span><span class="op" id="2442879">.</span><span class="ident" id="2442880">accept</span><span class="op" id="2442886">(</span><span class="string" id="2442887">&#34;0&#34;</span><span class="op" id="2442890">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442893">found</span>&nbsp;<span class="op" id="2442899">=</span>&nbsp;<span class="builtintype" id="2442901">true</span>&nbsp;<span class="comment" id="2442906">//&nbsp;We&#39;ve&nbsp;put&nbsp;a&nbsp;digit&nbsp;into&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2442951">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;&#39;0&#39;&nbsp;&amp;&amp;&nbsp;&#39;0x&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2442985">base</span><span class="op" id="2442989">,</span>&nbsp;<span class="ident" id="2442991">digits</span>&nbsp;<span class="op" id="2442998">=</span>&nbsp;<span class="num" id="2443000">8</span><span class="op" id="2443001">,</span>&nbsp;<span class="ident" id="2443003">octalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443016">if</span>&nbsp;<span class="ident" id="2443019">s</span><span class="op" id="2443020">.</span><span class="ident" id="2443021">peek</span><span class="op" id="2443025">(</span><span class="string" id="2443026">&#34;xX&#34;</span><span class="op" id="2443030">)</span>&nbsp;<span class="op" id="2443032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443036">s</span><span class="op" id="2443037">.</span><span class="ident" id="2443038">consume</span><span class="op" id="2443045">(</span><span class="string" id="2443046">&#34;xX&#34;</span><span class="op" id="2443050">,</span>&nbsp;<span class="builtintype" id="2443052">false</span><span class="op" id="2443057">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443061">base</span><span class="op" id="2443065">,</span>&nbsp;<span class="ident" id="2443067">digits</span>&nbsp;<span class="op" id="2443074">=</span>&nbsp;<span class="num" id="2443076">16</span><span class="op" id="2443078">,</span>&nbsp;<span class="ident" id="2443080">hexadecimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443102">return</span><br>
<span class="lineno"></span><span class="op" id="2443109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="2443112">//&nbsp;scanInt&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;integer&nbsp;represented&nbsp;by&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="2443180">//&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno"></span><span class="keyword" id="2443244">func</span>&nbsp;<span class="op" id="2443249">(</span><span class="ident" id="2443250">s</span>&nbsp;<span class="op" id="2443252">*</span><span class="ident" id="2443253">ss</span><span class="op" id="2443255">)</span>&nbsp;<span class="ident" id="2443257">scanInt</span><span class="op" id="2443264">(</span><span class="ident" id="2443265">verb</span>&nbsp;<span class="builtintype" id="2443270">rune</span><span class="op" id="2443274">,</span>&nbsp;<span class="ident" id="2443276">bitSize</span>&nbsp;<span class="builtintype" id="2443284">int</span><span class="op" id="2443287">)</span>&nbsp;<span class="builtintype" id="2443289">int64</span>&nbsp;<span class="op" id="2443295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443298">if</span>&nbsp;<span class="ident" id="2443301">verb</span>&nbsp;<span class="op" id="2443306">==</span>&nbsp;<span class="string" id="2443309">&#39;c&#39;</span>&nbsp;<span class="op" id="2443313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443317">return</span>&nbsp;<span class="ident" id="2443324">s</span><span class="op" id="2443325">.</span><span class="ident" id="2443326">scanRune</span><span class="op" id="2443334">(</span><span class="ident" id="2443335">bitSize</span><span class="op" id="2443342">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443348">s</span><span class="op" id="2443349">.</span><span class="ident" id="2443350">skipSpace</span><span class="op" id="2443359">(</span><span class="builtintype" id="2443360">false</span><span class="op" id="2443365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443368">s</span><span class="op" id="2443369">.</span><span class="ident" id="2443370">notEOF</span><span class="op" id="2443376">(</span><span class="op" id="2443377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443380">base</span><span class="op" id="2443384">,</span>&nbsp;<span class="ident" id="2443386">digits</span>&nbsp;<span class="op" id="2443393">:=</span>&nbsp;<span class="ident" id="2443396">s</span><span class="op" id="2443397">.</span><span class="ident" id="2443398">getBase</span><span class="op" id="2443405">(</span><span class="ident" id="2443406">verb</span><span class="op" id="2443410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443413">haveDigits</span>&nbsp;<span class="op" id="2443424">:=</span>&nbsp;<span class="builtintype" id="2443427">false</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443434">if</span>&nbsp;<span class="ident" id="2443437">verb</span>&nbsp;<span class="op" id="2443442">==</span>&nbsp;<span class="string" id="2443445">&#39;U&#39;</span>&nbsp;<span class="op" id="2443449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443453">if</span>&nbsp;<span class="op" id="2443456">!</span><span class="ident" id="2443457">s</span><span class="op" id="2443458">.</span><span class="ident" id="2443459">consume</span><span class="op" id="2443466">(</span><span class="string" id="2443467">&#34;U&#34;</span><span class="op" id="2443470">,</span>&nbsp;<span class="builtintype" id="2443472">false</span><span class="op" id="2443477">)</span>&nbsp;<span class="op" id="2443479">||</span>&nbsp;<span class="op" id="2443482">!</span><span class="ident" id="2443483">s</span><span class="op" id="2443484">.</span><span class="ident" id="2443485">consume</span><span class="op" id="2443492">(</span><span class="string" id="2443493">&#34;+&#34;</span><span class="op" id="2443496">,</span>&nbsp;<span class="builtintype" id="2443498">false</span><span class="op" id="2443503">)</span>&nbsp;<span class="op" id="2443505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443510">s</span><span class="op" id="2443511">.</span><span class="ident" id="2443512">errorString</span><span class="op" id="2443523">(</span><span class="string" id="2443524">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="2443545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443552">}</span>&nbsp;<span class="keyword" id="2443554">else</span>&nbsp;<span class="op" id="2443559">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443563">s</span><span class="op" id="2443564">.</span><span class="ident" id="2443565">accept</span><span class="op" id="2443571">(</span><span class="ident" id="2443572">sign</span><span class="op" id="2443576">)</span>&nbsp;<span class="comment" id="2443578">//&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;sign,&nbsp;it&nbsp;will&nbsp;be&nbsp;left&nbsp;in&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443639">if</span>&nbsp;<span class="ident" id="2443642">verb</span>&nbsp;<span class="op" id="2443647">==</span>&nbsp;<span class="string" id="2443650">&#39;v&#39;</span>&nbsp;<span class="op" id="2443654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443659">base</span><span class="op" id="2443663">,</span>&nbsp;<span class="ident" id="2443665">digits</span><span class="op" id="2443671">,</span>&nbsp;<span class="ident" id="2443673">haveDigits</span>&nbsp;<span class="op" id="2443684">=</span>&nbsp;<span class="ident" id="2443686">s</span><span class="op" id="2443687">.</span><span class="ident" id="2443688">scanBasePrefix</span><span class="op" id="2443702">(</span><span class="op" id="2443703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443710">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443713">tok</span>&nbsp;<span class="op" id="2443717">:=</span>&nbsp;<span class="ident" id="2443720">s</span><span class="op" id="2443721">.</span><span class="ident" id="2443722">scanNumber</span><span class="op" id="2443732">(</span><span class="ident" id="2443733">digits</span><span class="op" id="2443739">,</span>&nbsp;<span class="ident" id="2443741">haveDigits</span><span class="op" id="2443751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443754">i</span><span class="op" id="2443755">,</span>&nbsp;<span class="ident" id="2443757">err</span>&nbsp;<span class="op" id="2443761">:=</span>&nbsp;<span class="ident" id="2443764">strconv</span><span class="op" id="2443771">.</span><span class="ident" id="2443772">ParseInt</span><span class="op" id="2443780">(</span><span class="ident" id="2443781">tok</span><span class="op" id="2443784">,</span>&nbsp;<span class="ident" id="2443786">base</span><span class="op" id="2443790">,</span>&nbsp;<span class="num" id="2443792">64</span><span class="op" id="2443794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443797">if</span>&nbsp;<span class="ident" id="2443800">err</span>&nbsp;<span class="op" id="2443804">!=</span>&nbsp;<span class="builtintype" id="2443807">nil</span>&nbsp;<span class="op" id="2443811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443815">s</span><span class="op" id="2443816">.</span><span class="builtintype" id="2443817">error</span><span class="op" id="2443822">(</span><span class="ident" id="2443823">err</span><span class="op" id="2443826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443829">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443832">n</span>&nbsp;<span class="op" id="2443834">:=</span>&nbsp;<span class="builtintype" id="2443837">uint</span><span class="op" id="2443841">(</span><span class="ident" id="2443842">bitSize</span><span class="op" id="2443849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443852">x</span>&nbsp;<span class="op" id="2443854">:=</span>&nbsp;<span class="op" id="2443857">(</span><span class="ident" id="2443858">i</span>&nbsp;<span class="op" id="2443860">&lt;&lt;</span>&nbsp;<span class="op" id="2443863">(</span><span class="num" id="2443864">64</span>&nbsp;<span class="op" id="2443867">-</span>&nbsp;<span class="ident" id="2443869">n</span><span class="op" id="2443870">)</span><span class="op" id="2443871">)</span>&nbsp;<span class="op" id="2443873">&gt;&gt;</span>&nbsp;<span class="op" id="2443876">(</span><span class="num" id="2443877">64</span>&nbsp;<span class="op" id="2443880">-</span>&nbsp;<span class="ident" id="2443882">n</span><span class="op" id="2443883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443886">if</span>&nbsp;<span class="ident" id="2443889">x</span>&nbsp;<span class="op" id="2443891">!=</span>&nbsp;<span class="ident" id="2443894">i</span>&nbsp;<span class="op" id="2443896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2443900">s</span><span class="op" id="2443901">.</span><span class="ident" id="2443902">errorString</span><span class="op" id="2443913">(</span><span class="string" id="2443914">&#34;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="2443943">+</span>&nbsp;<span class="ident" id="2443945">tok</span><span class="op" id="2443948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2443951">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2443954">return</span>&nbsp;<span class="ident" id="2443961">i</span><br>
<span class="lineno"></span><span class="op" id="2443963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2443966">//&nbsp;scanUint&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="2444032">//&nbsp;by&nbsp;the&nbsp;next&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno">685</span><span class="keyword" id="2444108">func</span>&nbsp;<span class="op" id="2444113">(</span><span class="ident" id="2444114">s</span>&nbsp;<span class="op" id="2444116">*</span><span class="ident" id="2444117">ss</span><span class="op" id="2444119">)</span>&nbsp;<span class="ident" id="2444121">scanUint</span><span class="op" id="2444129">(</span><span class="ident" id="2444130">verb</span>&nbsp;<span class="builtintype" id="2444135">rune</span><span class="op" id="2444139">,</span>&nbsp;<span class="ident" id="2444141">bitSize</span>&nbsp;<span class="builtintype" id="2444149">int</span><span class="op" id="2444152">)</span>&nbsp;<span class="builtintype" id="2444154">uint64</span>&nbsp;<span class="op" id="2444161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444164">if</span>&nbsp;<span class="ident" id="2444167">verb</span>&nbsp;<span class="op" id="2444172">==</span>&nbsp;<span class="string" id="2444175">&#39;c&#39;</span>&nbsp;<span class="op" id="2444179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444183">return</span>&nbsp;<span class="builtintype" id="2444190">uint64</span><span class="op" id="2444196">(</span><span class="ident" id="2444197">s</span><span class="op" id="2444198">.</span><span class="ident" id="2444199">scanRune</span><span class="op" id="2444207">(</span><span class="ident" id="2444208">bitSize</span><span class="op" id="2444215">)</span><span class="op" id="2444216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444222">s</span><span class="op" id="2444223">.</span><span class="ident" id="2444224">skipSpace</span><span class="op" id="2444233">(</span><span class="builtintype" id="2444234">false</span><span class="op" id="2444239">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444242">s</span><span class="op" id="2444243">.</span><span class="ident" id="2444244">notEOF</span><span class="op" id="2444250">(</span><span class="op" id="2444251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444254">base</span><span class="op" id="2444258">,</span>&nbsp;<span class="ident" id="2444260">digits</span>&nbsp;<span class="op" id="2444267">:=</span>&nbsp;<span class="ident" id="2444270">s</span><span class="op" id="2444271">.</span><span class="ident" id="2444272">getBase</span><span class="op" id="2444279">(</span><span class="ident" id="2444280">verb</span><span class="op" id="2444284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444287">haveDigits</span>&nbsp;<span class="op" id="2444298">:=</span>&nbsp;<span class="builtintype" id="2444301">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444308">if</span>&nbsp;<span class="ident" id="2444311">verb</span>&nbsp;<span class="op" id="2444316">==</span>&nbsp;<span class="string" id="2444319">&#39;U&#39;</span>&nbsp;<span class="op" id="2444323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444327">if</span>&nbsp;<span class="op" id="2444330">!</span><span class="ident" id="2444331">s</span><span class="op" id="2444332">.</span><span class="ident" id="2444333">consume</span><span class="op" id="2444340">(</span><span class="string" id="2444341">&#34;U&#34;</span><span class="op" id="2444344">,</span>&nbsp;<span class="builtintype" id="2444346">false</span><span class="op" id="2444351">)</span>&nbsp;<span class="op" id="2444353">||</span>&nbsp;<span class="op" id="2444356">!</span><span class="ident" id="2444357">s</span><span class="op" id="2444358">.</span><span class="ident" id="2444359">consume</span><span class="op" id="2444366">(</span><span class="string" id="2444367">&#34;+&#34;</span><span class="op" id="2444370">,</span>&nbsp;<span class="builtintype" id="2444372">false</span><span class="op" id="2444377">)</span>&nbsp;<span class="op" id="2444379">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444384">s</span><span class="op" id="2444385">.</span><span class="ident" id="2444386">errorString</span><span class="op" id="2444397">(</span><span class="string" id="2444398">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="2444419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444426">}</span>&nbsp;<span class="keyword" id="2444428">else</span>&nbsp;<span class="keyword" id="2444433">if</span>&nbsp;<span class="ident" id="2444436">verb</span>&nbsp;<span class="op" id="2444441">==</span>&nbsp;<span class="string" id="2444444">&#39;v&#39;</span>&nbsp;<span class="op" id="2444448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444452">base</span><span class="op" id="2444456">,</span>&nbsp;<span class="ident" id="2444458">digits</span><span class="op" id="2444464">,</span>&nbsp;<span class="ident" id="2444466">haveDigits</span>&nbsp;<span class="op" id="2444477">=</span>&nbsp;<span class="ident" id="2444479">s</span><span class="op" id="2444480">.</span><span class="ident" id="2444481">scanBasePrefix</span><span class="op" id="2444495">(</span><span class="op" id="2444496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444499">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444502">tok</span>&nbsp;<span class="op" id="2444506">:=</span>&nbsp;<span class="ident" id="2444509">s</span><span class="op" id="2444510">.</span><span class="ident" id="2444511">scanNumber</span><span class="op" id="2444521">(</span><span class="ident" id="2444522">digits</span><span class="op" id="2444528">,</span>&nbsp;<span class="ident" id="2444530">haveDigits</span><span class="op" id="2444540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444543">i</span><span class="op" id="2444544">,</span>&nbsp;<span class="ident" id="2444546">err</span>&nbsp;<span class="op" id="2444550">:=</span>&nbsp;<span class="ident" id="2444553">strconv</span><span class="op" id="2444560">.</span><span class="ident" id="2444561">ParseUint</span><span class="op" id="2444570">(</span><span class="ident" id="2444571">tok</span><span class="op" id="2444574">,</span>&nbsp;<span class="ident" id="2444576">base</span><span class="op" id="2444580">,</span>&nbsp;<span class="num" id="2444582">64</span><span class="op" id="2444584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444587">if</span>&nbsp;<span class="ident" id="2444590">err</span>&nbsp;<span class="op" id="2444594">!=</span>&nbsp;<span class="builtintype" id="2444597">nil</span>&nbsp;<span class="op" id="2444601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444605">s</span><span class="op" id="2444606">.</span><span class="builtintype" id="2444607">error</span><span class="op" id="2444612">(</span><span class="ident" id="2444613">err</span><span class="op" id="2444616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444619">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444622">n</span>&nbsp;<span class="op" id="2444624">:=</span>&nbsp;<span class="builtintype" id="2444627">uint</span><span class="op" id="2444631">(</span><span class="ident" id="2444632">bitSize</span><span class="op" id="2444639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444642">x</span>&nbsp;<span class="op" id="2444644">:=</span>&nbsp;<span class="op" id="2444647">(</span><span class="ident" id="2444648">i</span>&nbsp;<span class="op" id="2444650">&lt;&lt;</span>&nbsp;<span class="op" id="2444653">(</span><span class="num" id="2444654">64</span>&nbsp;<span class="op" id="2444657">-</span>&nbsp;<span class="ident" id="2444659">n</span><span class="op" id="2444660">)</span><span class="op" id="2444661">)</span>&nbsp;<span class="op" id="2444663">&gt;&gt;</span>&nbsp;<span class="op" id="2444666">(</span><span class="num" id="2444667">64</span>&nbsp;<span class="op" id="2444670">-</span>&nbsp;<span class="ident" id="2444672">n</span><span class="op" id="2444673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444676">if</span>&nbsp;<span class="ident" id="2444679">x</span>&nbsp;<span class="op" id="2444681">!=</span>&nbsp;<span class="ident" id="2444684">i</span>&nbsp;<span class="op" id="2444686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2444690">s</span><span class="op" id="2444691">.</span><span class="ident" id="2444692">errorString</span><span class="op" id="2444703">(</span><span class="string" id="2444704">&#34;unsigned&nbsp;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="2444742">+</span>&nbsp;<span class="ident" id="2444744">tok</span><span class="op" id="2444747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2444750">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2444753">return</span>&nbsp;<span class="ident" id="2444760">i</span><br>
<span class="lineno"></span><span class="op" id="2444762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2444765">//&nbsp;floatToken&nbsp;returns&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;starting&nbsp;here,&nbsp;no&nbsp;longer&nbsp;than&nbsp;swid</span><br>
<span class="lineno"></span><span class="comment" id="2444848">//&nbsp;if&nbsp;the&nbsp;width&nbsp;is&nbsp;specified.&nbsp;It&#39;s&nbsp;not&nbsp;rigorous&nbsp;about&nbsp;syntax&nbsp;because&nbsp;it&nbsp;doesn&#39;t&nbsp;check&nbsp;that</span><br>
<span class="lineno">715</span><span class="comment" id="2444939">//&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;some&nbsp;digits,&nbsp;but&nbsp;Atof&nbsp;will&nbsp;do&nbsp;that.</span><br>
<span class="lineno"></span><span class="keyword" id="2444995">func</span>&nbsp;<span class="op" id="2445000">(</span><span class="ident" id="2445001">s</span>&nbsp;<span class="op" id="2445003">*</span><span class="ident" id="2445004">ss</span><span class="op" id="2445006">)</span>&nbsp;<span class="ident" id="2445008">floatToken</span><span class="op" id="2445018">(</span><span class="op" id="2445019">)</span>&nbsp;<span class="builtintype" id="2445021">string</span>&nbsp;<span class="op" id="2445028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445031">s</span><span class="op" id="2445032">.</span><span class="ident" id="2445033">buf</span>&nbsp;<span class="op" id="2445037">=</span>&nbsp;<span class="ident" id="2445039">s</span><span class="op" id="2445040">.</span><span class="ident" id="2445041">buf</span><span class="op" id="2445044">[</span><span class="op" id="2445045">:</span><span class="num" id="2445046">0</span><span class="op" id="2445047">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445050">//&nbsp;NaN?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445059">if</span>&nbsp;<span class="ident" id="2445062">s</span><span class="op" id="2445063">.</span><span class="ident" id="2445064">accept</span><span class="op" id="2445070">(</span><span class="string" id="2445071">&#34;nN&#34;</span><span class="op" id="2445075">)</span>&nbsp;<span class="op" id="2445077">&amp;&amp;</span>&nbsp;<span class="ident" id="2445080">s</span><span class="op" id="2445081">.</span><span class="ident" id="2445082">accept</span><span class="op" id="2445088">(</span><span class="string" id="2445089">&#34;aA&#34;</span><span class="op" id="2445093">)</span>&nbsp;<span class="op" id="2445095">&amp;&amp;</span>&nbsp;<span class="ident" id="2445098">s</span><span class="op" id="2445099">.</span><span class="ident" id="2445100">accept</span><span class="op" id="2445106">(</span><span class="string" id="2445107">&#34;nN&#34;</span><span class="op" id="2445111">)</span>&nbsp;<span class="op" id="2445113">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445117">return</span>&nbsp;<span class="builtintype" id="2445124">string</span><span class="op" id="2445130">(</span><span class="ident" id="2445131">s</span><span class="op" id="2445132">.</span><span class="ident" id="2445133">buf</span><span class="op" id="2445136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445142">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445160">s</span><span class="op" id="2445161">.</span><span class="ident" id="2445162">accept</span><span class="op" id="2445168">(</span><span class="ident" id="2445169">sign</span><span class="op" id="2445173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445176">//&nbsp;Inf?</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445185">if</span>&nbsp;<span class="ident" id="2445188">s</span><span class="op" id="2445189">.</span><span class="ident" id="2445190">accept</span><span class="op" id="2445196">(</span><span class="string" id="2445197">&#34;iI&#34;</span><span class="op" id="2445201">)</span>&nbsp;<span class="op" id="2445203">&amp;&amp;</span>&nbsp;<span class="ident" id="2445206">s</span><span class="op" id="2445207">.</span><span class="ident" id="2445208">accept</span><span class="op" id="2445214">(</span><span class="string" id="2445215">&#34;nN&#34;</span><span class="op" id="2445219">)</span>&nbsp;<span class="op" id="2445221">&amp;&amp;</span>&nbsp;<span class="ident" id="2445224">s</span><span class="op" id="2445225">.</span><span class="ident" id="2445226">accept</span><span class="op" id="2445232">(</span><span class="string" id="2445233">&#34;fF&#34;</span><span class="op" id="2445237">)</span>&nbsp;<span class="op" id="2445239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445243">return</span>&nbsp;<span class="builtintype" id="2445250">string</span><span class="op" id="2445256">(</span><span class="ident" id="2445257">s</span><span class="op" id="2445258">.</span><span class="ident" id="2445259">buf</span><span class="op" id="2445262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445268">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445280">for</span>&nbsp;<span class="ident" id="2445284">s</span><span class="op" id="2445285">.</span><span class="ident" id="2445286">accept</span><span class="op" id="2445292">(</span><span class="ident" id="2445293">decimalDigits</span><span class="op" id="2445306">)</span>&nbsp;<span class="op" id="2445308">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445314">//&nbsp;decimal&nbsp;point?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445333">if</span>&nbsp;<span class="ident" id="2445336">s</span><span class="op" id="2445337">.</span><span class="ident" id="2445338">accept</span><span class="op" id="2445344">(</span><span class="ident" id="2445345">period</span><span class="op" id="2445351">)</span>&nbsp;<span class="op" id="2445353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445357">//&nbsp;fraction?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445372">for</span>&nbsp;<span class="ident" id="2445376">s</span><span class="op" id="2445377">.</span><span class="ident" id="2445378">accept</span><span class="op" id="2445384">(</span><span class="ident" id="2445385">decimalDigits</span><span class="op" id="2445398">)</span>&nbsp;<span class="op" id="2445400">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445410">//&nbsp;exponent?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445424">if</span>&nbsp;<span class="ident" id="2445427">s</span><span class="op" id="2445428">.</span><span class="ident" id="2445429">accept</span><span class="op" id="2445435">(</span><span class="ident" id="2445436">exponent</span><span class="op" id="2445444">)</span>&nbsp;<span class="op" id="2445446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445450">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445469">s</span><span class="op" id="2445470">.</span><span class="ident" id="2445471">accept</span><span class="op" id="2445477">(</span><span class="ident" id="2445478">sign</span><span class="op" id="2445482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445486">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445499">for</span>&nbsp;<span class="ident" id="2445503">s</span><span class="op" id="2445504">.</span><span class="ident" id="2445505">accept</span><span class="op" id="2445511">(</span><span class="ident" id="2445512">decimalDigits</span><span class="op" id="2445525">)</span>&nbsp;<span class="op" id="2445527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2445534">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445537">return</span>&nbsp;<span class="builtintype" id="2445544">string</span><span class="op" id="2445550">(</span><span class="ident" id="2445551">s</span><span class="op" id="2445552">.</span><span class="ident" id="2445553">buf</span><span class="op" id="2445556">)</span><br>
<span class="lineno"></span><span class="op" id="2445558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2445561">//&nbsp;complexTokens&nbsp;returns&nbsp;the&nbsp;real&nbsp;and&nbsp;imaginary&nbsp;parts&nbsp;of&nbsp;the&nbsp;complex&nbsp;number&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="comment" id="2445652">//&nbsp;The&nbsp;number&nbsp;might&nbsp;be&nbsp;parenthesized&nbsp;and&nbsp;has&nbsp;the&nbsp;format&nbsp;(N+Ni)&nbsp;where&nbsp;N&nbsp;is&nbsp;a&nbsp;floating-point</span><br>
<span class="lineno">750</span><span class="comment" id="2445743">//&nbsp;number&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;spaces&nbsp;within.</span><br>
<span class="lineno"></span><span class="keyword" id="2445785">func</span>&nbsp;<span class="op" id="2445790">(</span><span class="ident" id="2445791">s</span>&nbsp;<span class="op" id="2445793">*</span><span class="ident" id="2445794">ss</span><span class="op" id="2445796">)</span>&nbsp;<span class="ident" id="2445798">complexTokens</span><span class="op" id="2445811">(</span><span class="op" id="2445812">)</span>&nbsp;<span class="op" id="2445814">(</span><span class="builtinfunc" id="2445815">real</span><span class="op" id="2445819">,</span>&nbsp;<span class="builtinfunc" id="2445821">imag</span>&nbsp;<span class="builtintype" id="2445826">string</span><span class="op" id="2445832">)</span>&nbsp;<span class="op" id="2445834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445837">//&nbsp;TODO:&nbsp;accept&nbsp;N&nbsp;and&nbsp;Ni&nbsp;independently?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445878">parens</span>&nbsp;<span class="op" id="2445885">:=</span>&nbsp;<span class="ident" id="2445888">s</span><span class="op" id="2445889">.</span><span class="ident" id="2445890">accept</span><span class="op" id="2445896">(</span><span class="string" id="2445897">&#34;(&#34;</span><span class="op" id="2445900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2445903">real</span>&nbsp;<span class="op" id="2445908">=</span>&nbsp;<span class="ident" id="2445910">s</span><span class="op" id="2445911">.</span><span class="ident" id="2445912">floatToken</span><span class="op" id="2445922">(</span><span class="op" id="2445923">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445926">s</span><span class="op" id="2445927">.</span><span class="ident" id="2445928">buf</span>&nbsp;<span class="op" id="2445932">=</span>&nbsp;<span class="ident" id="2445934">s</span><span class="op" id="2445935">.</span><span class="ident" id="2445936">buf</span><span class="op" id="2445939">[</span><span class="op" id="2445940">:</span><span class="num" id="2445941">0</span><span class="op" id="2445942">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2445945">//&nbsp;Must&nbsp;now&nbsp;have&nbsp;a&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2445971">if</span>&nbsp;<span class="op" id="2445974">!</span><span class="ident" id="2445975">s</span><span class="op" id="2445976">.</span><span class="ident" id="2445977">accept</span><span class="op" id="2445983">(</span><span class="string" id="2445984">&#34;+-&#34;</span><span class="op" id="2445988">)</span>&nbsp;<span class="op" id="2445990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2445994">s</span><span class="op" id="2445995">.</span><span class="builtintype" id="2445996">error</span><span class="op" id="2446001">(</span><span class="ident" id="2446002">complexError</span><span class="op" id="2446014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446017">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2446020">//&nbsp;Sign&nbsp;is&nbsp;now&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446046">imagSign</span>&nbsp;<span class="op" id="2446055">:=</span>&nbsp;<span class="builtintype" id="2446058">string</span><span class="op" id="2446064">(</span><span class="ident" id="2446065">s</span><span class="op" id="2446066">.</span><span class="ident" id="2446067">buf</span><span class="op" id="2446070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2446073">imag</span>&nbsp;<span class="op" id="2446078">=</span>&nbsp;<span class="ident" id="2446080">s</span><span class="op" id="2446081">.</span><span class="ident" id="2446082">floatToken</span><span class="op" id="2446092">(</span><span class="op" id="2446093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446096">if</span>&nbsp;<span class="op" id="2446099">!</span><span class="ident" id="2446100">s</span><span class="op" id="2446101">.</span><span class="ident" id="2446102">accept</span><span class="op" id="2446108">(</span><span class="string" id="2446109">&#34;i&#34;</span><span class="op" id="2446112">)</span>&nbsp;<span class="op" id="2446114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446118">s</span><span class="op" id="2446119">.</span><span class="builtintype" id="2446120">error</span><span class="op" id="2446125">(</span><span class="ident" id="2446126">complexError</span><span class="op" id="2446138">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446144">if</span>&nbsp;<span class="ident" id="2446147">parens</span>&nbsp;<span class="op" id="2446154">&amp;&amp;</span>&nbsp;<span class="op" id="2446157">!</span><span class="ident" id="2446158">s</span><span class="op" id="2446159">.</span><span class="ident" id="2446160">accept</span><span class="op" id="2446166">(</span><span class="string" id="2446167">&#34;)&#34;</span><span class="op" id="2446170">)</span>&nbsp;<span class="op" id="2446172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446176">s</span><span class="op" id="2446177">.</span><span class="builtintype" id="2446178">error</span><span class="op" id="2446183">(</span><span class="ident" id="2446184">complexError</span><span class="op" id="2446196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446202">return</span>&nbsp;<span class="builtinfunc" id="2446209">real</span><span class="op" id="2446213">,</span>&nbsp;<span class="ident" id="2446215">imagSign</span>&nbsp;<span class="op" id="2446224">+</span>&nbsp;<span class="builtinfunc" id="2446226">imag</span><br>
<span class="lineno">770</span><span class="op" id="2446231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2446234">//&nbsp;convertFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;to&nbsp;a&nbsp;float64value.</span><br>
<span class="lineno"></span><span class="keyword" id="2446289">func</span>&nbsp;<span class="op" id="2446294">(</span><span class="ident" id="2446295">s</span>&nbsp;<span class="op" id="2446297">*</span><span class="ident" id="2446298">ss</span><span class="op" id="2446300">)</span>&nbsp;<span class="ident" id="2446302">convertFloat</span><span class="op" id="2446314">(</span><span class="ident" id="2446315">str</span>&nbsp;<span class="builtintype" id="2446319">string</span><span class="op" id="2446325">,</span>&nbsp;<span class="ident" id="2446327">n</span>&nbsp;<span class="builtintype" id="2446329">int</span><span class="op" id="2446332">)</span>&nbsp;<span class="builtintype" id="2446334">float64</span>&nbsp;<span class="op" id="2446342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446345">if</span>&nbsp;<span class="ident" id="2446348">p</span>&nbsp;<span class="op" id="2446350">:=</span>&nbsp;<span class="ident" id="2446353">indexRune</span><span class="op" id="2446362">(</span><span class="ident" id="2446363">str</span><span class="op" id="2446366">,</span>&nbsp;<span class="string" id="2446368">&#39;p&#39;</span><span class="op" id="2446371">)</span><span class="op" id="2446372">;</span>&nbsp;<span class="ident" id="2446374">p</span>&nbsp;<span class="op" id="2446376">&gt;=</span>&nbsp;<span class="num" id="2446379">0</span>&nbsp;<span class="op" id="2446381">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2446385">//&nbsp;Atof&nbsp;doesn&#39;t&nbsp;handle&nbsp;power-of-2&nbsp;exponents,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2446432">//&nbsp;but&nbsp;they&#39;re&nbsp;easy&nbsp;to&nbsp;evaluate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446467">f</span><span class="op" id="2446468">,</span>&nbsp;<span class="ident" id="2446470">err</span>&nbsp;<span class="op" id="2446474">:=</span>&nbsp;<span class="ident" id="2446477">strconv</span><span class="op" id="2446484">.</span><span class="ident" id="2446485">ParseFloat</span><span class="op" id="2446495">(</span><span class="ident" id="2446496">str</span><span class="op" id="2446499">[</span><span class="op" id="2446500">:</span><span class="ident" id="2446501">p</span><span class="op" id="2446502">]</span><span class="op" id="2446503">,</span>&nbsp;<span class="ident" id="2446505">n</span><span class="op" id="2446506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446510">if</span>&nbsp;<span class="ident" id="2446513">err</span>&nbsp;<span class="op" id="2446517">!=</span>&nbsp;<span class="builtintype" id="2446520">nil</span>&nbsp;<span class="op" id="2446524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2446529">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446563">if</span>&nbsp;<span class="ident" id="2446566">e</span><span class="op" id="2446567">,</span>&nbsp;<span class="ident" id="2446569">ok</span>&nbsp;<span class="op" id="2446572">:=</span>&nbsp;<span class="ident" id="2446575">err</span><span class="op" id="2446578">.</span><span class="op" id="2446579">(</span><span class="op" id="2446580">*</span><span class="ident" id="2446581">strconv</span><span class="op" id="2446588">.</span><span class="ident" id="2446589">NumError</span><span class="op" id="2446597">)</span><span class="op" id="2446598">;</span>&nbsp;<span class="ident" id="2446600">ok</span>&nbsp;<span class="op" id="2446603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446609">e</span><span class="op" id="2446610">.</span><span class="ident" id="2446611">Num</span>&nbsp;<span class="op" id="2446615">=</span>&nbsp;<span class="ident" id="2446617">str</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446629">s</span><span class="op" id="2446630">.</span><span class="builtintype" id="2446631">error</span><span class="op" id="2446636">(</span><span class="ident" id="2446637">err</span><span class="op" id="2446640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446644">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446648">m</span><span class="op" id="2446649">,</span>&nbsp;<span class="ident" id="2446651">err</span>&nbsp;<span class="op" id="2446655">:=</span>&nbsp;<span class="ident" id="2446658">strconv</span><span class="op" id="2446665">.</span><span class="ident" id="2446666">Atoi</span><span class="op" id="2446670">(</span><span class="ident" id="2446671">str</span><span class="op" id="2446674">[</span><span class="ident" id="2446675">p</span><span class="op" id="2446676">+</span><span class="num" id="2446677">1</span><span class="op" id="2446678">:</span><span class="op" id="2446679">]</span><span class="op" id="2446680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446684">if</span>&nbsp;<span class="ident" id="2446687">err</span>&nbsp;<span class="op" id="2446691">!=</span>&nbsp;<span class="builtintype" id="2446694">nil</span>&nbsp;<span class="op" id="2446698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2446703">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446737">if</span>&nbsp;<span class="ident" id="2446740">e</span><span class="op" id="2446741">,</span>&nbsp;<span class="ident" id="2446743">ok</span>&nbsp;<span class="op" id="2446746">:=</span>&nbsp;<span class="ident" id="2446749">err</span><span class="op" id="2446752">.</span><span class="op" id="2446753">(</span><span class="op" id="2446754">*</span><span class="ident" id="2446755">strconv</span><span class="op" id="2446762">.</span><span class="ident" id="2446763">NumError</span><span class="op" id="2446771">)</span><span class="op" id="2446772">;</span>&nbsp;<span class="ident" id="2446774">ok</span>&nbsp;<span class="op" id="2446777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446783">e</span><span class="op" id="2446784">.</span><span class="ident" id="2446785">Num</span>&nbsp;<span class="op" id="2446789">=</span>&nbsp;<span class="ident" id="2446791">str</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446803">s</span><span class="op" id="2446804">.</span><span class="builtintype" id="2446805">error</span><span class="op" id="2446810">(</span><span class="ident" id="2446811">err</span><span class="op" id="2446814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446822">return</span>&nbsp;<span class="ident" id="2446829">math</span><span class="op" id="2446833">.</span><span class="ident" id="2446834">Ldexp</span><span class="op" id="2446839">(</span><span class="ident" id="2446840">f</span><span class="op" id="2446841">,</span>&nbsp;<span class="ident" id="2446843">m</span><span class="op" id="2446844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446847">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446850">f</span><span class="op" id="2446851">,</span>&nbsp;<span class="ident" id="2446853">err</span>&nbsp;<span class="op" id="2446857">:=</span>&nbsp;<span class="ident" id="2446860">strconv</span><span class="op" id="2446867">.</span><span class="ident" id="2446868">ParseFloat</span><span class="op" id="2446878">(</span><span class="ident" id="2446879">str</span><span class="op" id="2446882">,</span>&nbsp;<span class="ident" id="2446884">n</span><span class="op" id="2446885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446888">if</span>&nbsp;<span class="ident" id="2446891">err</span>&nbsp;<span class="op" id="2446895">!=</span>&nbsp;<span class="builtintype" id="2446898">nil</span>&nbsp;<span class="op" id="2446902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2446906">s</span><span class="op" id="2446907">.</span><span class="builtintype" id="2446908">error</span><span class="op" id="2446913">(</span><span class="ident" id="2446914">err</span><span class="op" id="2446917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2446920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2446923">return</span>&nbsp;<span class="ident" id="2446930">f</span><br>
<span class="lineno">800</span><span class="op" id="2446932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2446935">//&nbsp;convertComplex&nbsp;converts&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;a&nbsp;complex128&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2447000">//&nbsp;The&nbsp;atof&nbsp;argument&nbsp;is&nbsp;a&nbsp;type-specific&nbsp;reader&nbsp;for&nbsp;the&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2447072">//&nbsp;If&nbsp;we&#39;re&nbsp;reading&nbsp;complex64,&nbsp;atof&nbsp;will&nbsp;parse&nbsp;float32s&nbsp;and&nbsp;convert&nbsp;them</span><br>
<span class="lineno">805</span><span class="comment" id="2447145">//&nbsp;to&nbsp;float64&#39;s&nbsp;to&nbsp;avoid&nbsp;reproducing&nbsp;this&nbsp;code&nbsp;for&nbsp;each&nbsp;complex&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2447215">func</span>&nbsp;<span class="op" id="2447220">(</span><span class="ident" id="2447221">s</span>&nbsp;<span class="op" id="2447223">*</span><span class="ident" id="2447224">ss</span><span class="op" id="2447226">)</span>&nbsp;<span class="ident" id="2447228">scanComplex</span><span class="op" id="2447239">(</span><span class="ident" id="2447240">verb</span>&nbsp;<span class="builtintype" id="2447245">rune</span><span class="op" id="2447249">,</span>&nbsp;<span class="ident" id="2447251">n</span>&nbsp;<span class="builtintype" id="2447253">int</span><span class="op" id="2447256">)</span>&nbsp;<span class="builtintype" id="2447258">complex128</span>&nbsp;<span class="op" id="2447269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447272">if</span>&nbsp;<span class="op" id="2447275">!</span><span class="ident" id="2447276">s</span><span class="op" id="2447277">.</span><span class="ident" id="2447278">okVerb</span><span class="op" id="2447284">(</span><span class="ident" id="2447285">verb</span><span class="op" id="2447289">,</span>&nbsp;<span class="ident" id="2447291">floatVerbs</span><span class="op" id="2447301">,</span>&nbsp;<span class="string" id="2447303">&#34;complex&#34;</span><span class="op" id="2447312">)</span>&nbsp;<span class="op" id="2447314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447318">return</span>&nbsp;<span class="num" id="2447325">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2447328">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447331">s</span><span class="op" id="2447332">.</span><span class="ident" id="2447333">skipSpace</span><span class="op" id="2447342">(</span><span class="builtintype" id="2447343">false</span><span class="op" id="2447348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447351">s</span><span class="op" id="2447352">.</span><span class="ident" id="2447353">notEOF</span><span class="op" id="2447359">(</span><span class="op" id="2447360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447363">sreal</span><span class="op" id="2447368">,</span>&nbsp;<span class="ident" id="2447370">simag</span>&nbsp;<span class="op" id="2447376">:=</span>&nbsp;<span class="ident" id="2447379">s</span><span class="op" id="2447380">.</span><span class="ident" id="2447381">complexTokens</span><span class="op" id="2447394">(</span><span class="op" id="2447395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2447398">real</span>&nbsp;<span class="op" id="2447403">:=</span>&nbsp;<span class="ident" id="2447406">s</span><span class="op" id="2447407">.</span><span class="ident" id="2447408">convertFloat</span><span class="op" id="2447420">(</span><span class="ident" id="2447421">sreal</span><span class="op" id="2447426">,</span>&nbsp;<span class="ident" id="2447428">n</span><span class="op" id="2447429">/</span><span class="num" id="2447430">2</span><span class="op" id="2447431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2447434">imag</span>&nbsp;<span class="op" id="2447439">:=</span>&nbsp;<span class="ident" id="2447442">s</span><span class="op" id="2447443">.</span><span class="ident" id="2447444">convertFloat</span><span class="op" id="2447456">(</span><span class="ident" id="2447457">simag</span><span class="op" id="2447462">,</span>&nbsp;<span class="ident" id="2447464">n</span><span class="op" id="2447465">/</span><span class="num" id="2447466">2</span><span class="op" id="2447467">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447470">return</span>&nbsp;<span class="builtinfunc" id="2447477">complex</span><span class="op" id="2447484">(</span><span class="builtinfunc" id="2447485">real</span><span class="op" id="2447489">,</span>&nbsp;<span class="builtinfunc" id="2447491">imag</span><span class="op" id="2447495">)</span><br>
<span class="lineno"></span><span class="op" id="2447497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2447500">//&nbsp;convertString&nbsp;returns&nbsp;the&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="2447578">//&nbsp;The&nbsp;format&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;determined&nbsp;by&nbsp;the&nbsp;verb.</span><br>
<span class="lineno">820</span><span class="keyword" id="2447632">func</span>&nbsp;<span class="op" id="2447637">(</span><span class="ident" id="2447638">s</span>&nbsp;<span class="op" id="2447640">*</span><span class="ident" id="2447641">ss</span><span class="op" id="2447643">)</span>&nbsp;<span class="ident" id="2447645">convertString</span><span class="op" id="2447658">(</span><span class="ident" id="2447659">verb</span>&nbsp;<span class="builtintype" id="2447664">rune</span><span class="op" id="2447668">)</span>&nbsp;<span class="op" id="2447670">(</span><span class="ident" id="2447671">str</span>&nbsp;<span class="builtintype" id="2447675">string</span><span class="op" id="2447681">)</span>&nbsp;<span class="op" id="2447683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447686">if</span>&nbsp;<span class="op" id="2447689">!</span><span class="ident" id="2447690">s</span><span class="op" id="2447691">.</span><span class="ident" id="2447692">okVerb</span><span class="op" id="2447698">(</span><span class="ident" id="2447699">verb</span><span class="op" id="2447703">,</span>&nbsp;<span class="string" id="2447705">&#34;svqx&#34;</span><span class="op" id="2447711">,</span>&nbsp;<span class="string" id="2447713">&#34;string&#34;</span><span class="op" id="2447721">)</span>&nbsp;<span class="op" id="2447723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447727">return</span>&nbsp;<span class="string" id="2447734">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2447738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447741">s</span><span class="op" id="2447742">.</span><span class="ident" id="2447743">skipSpace</span><span class="op" id="2447752">(</span><span class="builtintype" id="2447753">false</span><span class="op" id="2447758">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447761">s</span><span class="op" id="2447762">.</span><span class="ident" id="2447763">notEOF</span><span class="op" id="2447769">(</span><span class="op" id="2447770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447773">switch</span>&nbsp;<span class="ident" id="2447780">verb</span>&nbsp;<span class="op" id="2447785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447788">case</span>&nbsp;<span class="string" id="2447793">&#39;q&#39;</span><span class="op" id="2447796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447800">str</span>&nbsp;<span class="op" id="2447804">=</span>&nbsp;<span class="ident" id="2447806">s</span><span class="op" id="2447807">.</span><span class="ident" id="2447808">quotedString</span><span class="op" id="2447820">(</span><span class="op" id="2447821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447824">case</span>&nbsp;<span class="string" id="2447829">&#39;x&#39;</span><span class="op" id="2447832">:</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447836">str</span>&nbsp;<span class="op" id="2447840">=</span>&nbsp;<span class="ident" id="2447842">s</span><span class="op" id="2447843">.</span><span class="ident" id="2447844">hexString</span><span class="op" id="2447853">(</span><span class="op" id="2447854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447857">default</span><span class="op" id="2447864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2447868">str</span>&nbsp;<span class="op" id="2447872">=</span>&nbsp;<span class="builtintype" id="2447874">string</span><span class="op" id="2447880">(</span><span class="ident" id="2447881">s</span><span class="op" id="2447882">.</span><span class="ident" id="2447883">token</span><span class="op" id="2447888">(</span><span class="builtintype" id="2447889">true</span><span class="op" id="2447893">,</span>&nbsp;<span class="ident" id="2447895">notSpace</span><span class="op" id="2447903">)</span><span class="op" id="2447904">)</span>&nbsp;<span class="comment" id="2447906">//&nbsp;%s&nbsp;and&nbsp;%v&nbsp;just&nbsp;return&nbsp;the&nbsp;next&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2447946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2447949">return</span><br>
<span class="lineno">835</span><span class="op" id="2447956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2447959">//&nbsp;quotedString&nbsp;returns&nbsp;the&nbsp;double-&nbsp;or&nbsp;back-quoted&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="2448059">func</span>&nbsp;<span class="op" id="2448064">(</span><span class="ident" id="2448065">s</span>&nbsp;<span class="op" id="2448067">*</span><span class="ident" id="2448068">ss</span><span class="op" id="2448070">)</span>&nbsp;<span class="ident" id="2448072">quotedString</span><span class="op" id="2448084">(</span><span class="op" id="2448085">)</span>&nbsp;<span class="builtintype" id="2448087">string</span>&nbsp;<span class="op" id="2448094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448097">s</span><span class="op" id="2448098">.</span><span class="ident" id="2448099">notEOF</span><span class="op" id="2448105">(</span><span class="op" id="2448106">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448109">quote</span>&nbsp;<span class="op" id="2448115">:=</span>&nbsp;<span class="ident" id="2448118">s</span><span class="op" id="2448119">.</span><span class="ident" id="2448120">getRune</span><span class="op" id="2448127">(</span><span class="op" id="2448128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448131">switch</span>&nbsp;<span class="ident" id="2448138">quote</span>&nbsp;<span class="op" id="2448144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448147">case</span>&nbsp;<span class="string" id="2448152">&#39;`&#39;</span><span class="op" id="2448155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2448159">//&nbsp;Back-quoted:&nbsp;Anything&nbsp;goes&nbsp;until&nbsp;EOF&nbsp;or&nbsp;back&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448216">for</span>&nbsp;<span class="op" id="2448220">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448225">r</span>&nbsp;<span class="op" id="2448227">:=</span>&nbsp;<span class="ident" id="2448230">s</span><span class="op" id="2448231">.</span><span class="ident" id="2448232">mustReadRune</span><span class="op" id="2448244">(</span><span class="op" id="2448245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448250">if</span>&nbsp;<span class="ident" id="2448253">r</span>&nbsp;<span class="op" id="2448255">==</span>&nbsp;<span class="ident" id="2448258">quote</span>&nbsp;<span class="op" id="2448264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448270">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448284">s</span><span class="op" id="2448285">.</span><span class="ident" id="2448286">buf</span><span class="op" id="2448289">.</span><span class="ident" id="2448290">WriteRune</span><span class="op" id="2448299">(</span><span class="ident" id="2448300">r</span><span class="op" id="2448301">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448309">return</span>&nbsp;<span class="builtintype" id="2448316">string</span><span class="op" id="2448322">(</span><span class="ident" id="2448323">s</span><span class="op" id="2448324">.</span><span class="ident" id="2448325">buf</span><span class="op" id="2448328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448331">case</span>&nbsp;<span class="string" id="2448336">&#39;&#34;&#39;</span><span class="op" id="2448339">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2448343">//&nbsp;Double-quoted:&nbsp;Include&nbsp;the&nbsp;quotes&nbsp;and&nbsp;let&nbsp;strconv.Unquote&nbsp;do&nbsp;the&nbsp;backslash&nbsp;escapes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448432">s</span><span class="op" id="2448433">.</span><span class="ident" id="2448434">buf</span><span class="op" id="2448437">.</span><span class="ident" id="2448438">WriteRune</span><span class="op" id="2448447">(</span><span class="ident" id="2448448">quote</span><span class="op" id="2448453">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448457">for</span>&nbsp;<span class="op" id="2448461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448466">r</span>&nbsp;<span class="op" id="2448468">:=</span>&nbsp;<span class="ident" id="2448471">s</span><span class="op" id="2448472">.</span><span class="ident" id="2448473">mustReadRune</span><span class="op" id="2448485">(</span><span class="op" id="2448486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448491">s</span><span class="op" id="2448492">.</span><span class="ident" id="2448493">buf</span><span class="op" id="2448496">.</span><span class="ident" id="2448497">WriteRune</span><span class="op" id="2448506">(</span><span class="ident" id="2448507">r</span><span class="op" id="2448508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448513">if</span>&nbsp;<span class="ident" id="2448516">r</span>&nbsp;<span class="op" id="2448518">==</span>&nbsp;<span class="string" id="2448521">&#39;\\&#39;</span>&nbsp;<span class="op" id="2448526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2448532">//&nbsp;In&nbsp;a&nbsp;legal&nbsp;backslash&nbsp;escape,&nbsp;no&nbsp;matter&nbsp;how&nbsp;long,&nbsp;only&nbsp;the&nbsp;character</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2448607">//&nbsp;immediately&nbsp;after&nbsp;the&nbsp;escape&nbsp;can&nbsp;itself&nbsp;be&nbsp;a&nbsp;backslash&nbsp;or&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2448679">//&nbsp;Thus&nbsp;we&nbsp;only&nbsp;need&nbsp;to&nbsp;protect&nbsp;the&nbsp;first&nbsp;character&nbsp;after&nbsp;the&nbsp;backslash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448756">s</span><span class="op" id="2448757">.</span><span class="ident" id="2448758">buf</span><span class="op" id="2448761">.</span><span class="ident" id="2448762">WriteRune</span><span class="op" id="2448771">(</span><span class="ident" id="2448772">s</span><span class="op" id="2448773">.</span><span class="ident" id="2448774">mustReadRune</span><span class="op" id="2448786">(</span><span class="op" id="2448787">)</span><span class="op" id="2448788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448793">}</span>&nbsp;<span class="keyword" id="2448795">else</span>&nbsp;<span class="keyword" id="2448800">if</span>&nbsp;<span class="ident" id="2448803">r</span>&nbsp;<span class="op" id="2448805">==</span>&nbsp;<span class="string" id="2448808">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="2448812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448818">break</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448835">result</span><span class="op" id="2448841">,</span>&nbsp;<span class="ident" id="2448843">err</span>&nbsp;<span class="op" id="2448847">:=</span>&nbsp;<span class="ident" id="2448850">strconv</span><span class="op" id="2448857">.</span><span class="ident" id="2448858">Unquote</span><span class="op" id="2448865">(</span><span class="builtintype" id="2448866">string</span><span class="op" id="2448872">(</span><span class="ident" id="2448873">s</span><span class="op" id="2448874">.</span><span class="ident" id="2448875">buf</span><span class="op" id="2448878">)</span><span class="op" id="2448879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448883">if</span>&nbsp;<span class="ident" id="2448886">err</span>&nbsp;<span class="op" id="2448890">!=</span>&nbsp;<span class="builtintype" id="2448893">nil</span>&nbsp;<span class="op" id="2448897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448902">s</span><span class="op" id="2448903">.</span><span class="builtintype" id="2448904">error</span><span class="op" id="2448909">(</span><span class="ident" id="2448910">err</span><span class="op" id="2448913">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448921">return</span>&nbsp;<span class="ident" id="2448928">result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448936">default</span><span class="op" id="2448943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2448947">s</span><span class="op" id="2448948">.</span><span class="ident" id="2448949">errorString</span><span class="op" id="2448960">(</span><span class="string" id="2448961">&#34;expected&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="2448985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2448988">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2448991">return</span>&nbsp;<span class="string" id="2448998">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2449001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2449004">//&nbsp;hexDigit&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;hexadecimal&nbsp;digit</span><br>
<span class="lineno"></span><span class="keyword" id="2449059">func</span>&nbsp;<span class="op" id="2449064">(</span><span class="ident" id="2449065">s</span>&nbsp;<span class="op" id="2449067">*</span><span class="ident" id="2449068">ss</span><span class="op" id="2449070">)</span>&nbsp;<span class="ident" id="2449072">hexDigit</span><span class="op" id="2449080">(</span><span class="ident" id="2449081">d</span>&nbsp;<span class="builtintype" id="2449083">rune</span><span class="op" id="2449087">)</span>&nbsp;<span class="builtintype" id="2449089">int</span>&nbsp;<span class="op" id="2449093">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449096">digit</span>&nbsp;<span class="op" id="2449102">:=</span>&nbsp;<span class="builtintype" id="2449105">int</span><span class="op" id="2449108">(</span><span class="ident" id="2449109">d</span><span class="op" id="2449110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449113">switch</span>&nbsp;<span class="ident" id="2449120">digit</span>&nbsp;<span class="op" id="2449126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449129">case</span>&nbsp;<span class="string" id="2449134">&#39;0&#39;</span><span class="op" id="2449137">,</span>&nbsp;<span class="string" id="2449139">&#39;1&#39;</span><span class="op" id="2449142">,</span>&nbsp;<span class="string" id="2449144">&#39;2&#39;</span><span class="op" id="2449147">,</span>&nbsp;<span class="string" id="2449149">&#39;3&#39;</span><span class="op" id="2449152">,</span>&nbsp;<span class="string" id="2449154">&#39;4&#39;</span><span class="op" id="2449157">,</span>&nbsp;<span class="string" id="2449159">&#39;5&#39;</span><span class="op" id="2449162">,</span>&nbsp;<span class="string" id="2449164">&#39;6&#39;</span><span class="op" id="2449167">,</span>&nbsp;<span class="string" id="2449169">&#39;7&#39;</span><span class="op" id="2449172">,</span>&nbsp;<span class="string" id="2449174">&#39;8&#39;</span><span class="op" id="2449177">,</span>&nbsp;<span class="string" id="2449179">&#39;9&#39;</span><span class="op" id="2449182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449186">return</span>&nbsp;<span class="ident" id="2449193">digit</span>&nbsp;<span class="op" id="2449199">-</span>&nbsp;<span class="string" id="2449201">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449206">case</span>&nbsp;<span class="string" id="2449211">&#39;a&#39;</span><span class="op" id="2449214">,</span>&nbsp;<span class="string" id="2449216">&#39;b&#39;</span><span class="op" id="2449219">,</span>&nbsp;<span class="string" id="2449221">&#39;c&#39;</span><span class="op" id="2449224">,</span>&nbsp;<span class="string" id="2449226">&#39;d&#39;</span><span class="op" id="2449229">,</span>&nbsp;<span class="string" id="2449231">&#39;e&#39;</span><span class="op" id="2449234">,</span>&nbsp;<span class="string" id="2449236">&#39;f&#39;</span><span class="op" id="2449239">:</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449243">return</span>&nbsp;<span class="num" id="2449250">10</span>&nbsp;<span class="op" id="2449253">+</span>&nbsp;<span class="ident" id="2449255">digit</span>&nbsp;<span class="op" id="2449261">-</span>&nbsp;<span class="string" id="2449263">&#39;a&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449268">case</span>&nbsp;<span class="string" id="2449273">&#39;A&#39;</span><span class="op" id="2449276">,</span>&nbsp;<span class="string" id="2449278">&#39;B&#39;</span><span class="op" id="2449281">,</span>&nbsp;<span class="string" id="2449283">&#39;C&#39;</span><span class="op" id="2449286">,</span>&nbsp;<span class="string" id="2449288">&#39;D&#39;</span><span class="op" id="2449291">,</span>&nbsp;<span class="string" id="2449293">&#39;E&#39;</span><span class="op" id="2449296">,</span>&nbsp;<span class="string" id="2449298">&#39;F&#39;</span><span class="op" id="2449301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449305">return</span>&nbsp;<span class="num" id="2449312">10</span>&nbsp;<span class="op" id="2449315">+</span>&nbsp;<span class="ident" id="2449317">digit</span>&nbsp;<span class="op" id="2449323">-</span>&nbsp;<span class="string" id="2449325">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2449330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449333">s</span><span class="op" id="2449334">.</span><span class="ident" id="2449335">errorString</span><span class="op" id="2449346">(</span><span class="string" id="2449347">&#34;illegal&nbsp;hex&nbsp;digit&#34;</span><span class="op" id="2449366">)</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449369">return</span>&nbsp;<span class="num" id="2449376">0</span><br>
<span class="lineno"></span><span class="op" id="2449378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2449381">//&nbsp;hexByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;hex-encoded&nbsp;(two-character)&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="2449458">//&nbsp;There&nbsp;must&nbsp;be&nbsp;either&nbsp;two&nbsp;hexadecimal&nbsp;digits&nbsp;or&nbsp;a&nbsp;space&nbsp;character&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">895</span><span class="keyword" id="2449540">func</span>&nbsp;<span class="op" id="2449545">(</span><span class="ident" id="2449546">s</span>&nbsp;<span class="op" id="2449548">*</span><span class="ident" id="2449549">ss</span><span class="op" id="2449551">)</span>&nbsp;<span class="ident" id="2449553">hexByte</span><span class="op" id="2449560">(</span><span class="op" id="2449561">)</span>&nbsp;<span class="op" id="2449563">(</span><span class="ident" id="2449564">b</span>&nbsp;<span class="builtintype" id="2449566">byte</span><span class="op" id="2449570">,</span>&nbsp;<span class="ident" id="2449572">ok</span>&nbsp;<span class="builtintype" id="2449575">bool</span><span class="op" id="2449579">)</span>&nbsp;<span class="op" id="2449581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449584">rune1</span>&nbsp;<span class="op" id="2449590">:=</span>&nbsp;<span class="ident" id="2449593">s</span><span class="op" id="2449594">.</span><span class="ident" id="2449595">getRune</span><span class="op" id="2449602">(</span><span class="op" id="2449603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449606">if</span>&nbsp;<span class="ident" id="2449609">rune1</span>&nbsp;<span class="op" id="2449615">==</span>&nbsp;<span class="ident" id="2449618">eof</span>&nbsp;<span class="op" id="2449622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449626">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2449634">}</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449637">if</span>&nbsp;<span class="ident" id="2449640">isSpace</span><span class="op" id="2449647">(</span><span class="ident" id="2449648">rune1</span><span class="op" id="2449653">)</span>&nbsp;<span class="op" id="2449655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449659">s</span><span class="op" id="2449660">.</span><span class="ident" id="2449661">UnreadRune</span><span class="op" id="2449671">(</span><span class="op" id="2449672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449676">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2449684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449687">rune2</span>&nbsp;<span class="op" id="2449693">:=</span>&nbsp;<span class="ident" id="2449696">s</span><span class="op" id="2449697">.</span><span class="ident" id="2449698">mustReadRune</span><span class="op" id="2449710">(</span><span class="op" id="2449711">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449714">return</span>&nbsp;<span class="builtintype" id="2449721">byte</span><span class="op" id="2449725">(</span><span class="ident" id="2449726">s</span><span class="op" id="2449727">.</span><span class="ident" id="2449728">hexDigit</span><span class="op" id="2449736">(</span><span class="ident" id="2449737">rune1</span><span class="op" id="2449742">)</span><span class="op" id="2449743">&lt;&lt;</span><span class="num" id="2449745">4</span>&nbsp;<span class="op" id="2449747">|</span>&nbsp;<span class="ident" id="2449749">s</span><span class="op" id="2449750">.</span><span class="ident" id="2449751">hexDigit</span><span class="op" id="2449759">(</span><span class="ident" id="2449760">rune2</span><span class="op" id="2449765">)</span><span class="op" id="2449766">)</span><span class="op" id="2449767">,</span>&nbsp;<span class="builtintype" id="2449769">true</span><br>
<span class="lineno"></span><span class="op" id="2449774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2449777">//&nbsp;hexString&nbsp;returns&nbsp;the&nbsp;space-delimited&nbsp;hexpair-encoded&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2449842">func</span>&nbsp;<span class="op" id="2449847">(</span><span class="ident" id="2449848">s</span>&nbsp;<span class="op" id="2449850">*</span><span class="ident" id="2449851">ss</span><span class="op" id="2449853">)</span>&nbsp;<span class="ident" id="2449855">hexString</span><span class="op" id="2449864">(</span><span class="op" id="2449865">)</span>&nbsp;<span class="builtintype" id="2449867">string</span>&nbsp;<span class="op" id="2449874">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449877">s</span><span class="op" id="2449878">.</span><span class="ident" id="2449879">notEOF</span><span class="op" id="2449885">(</span><span class="op" id="2449886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449889">for</span>&nbsp;<span class="op" id="2449893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449897">b</span><span class="op" id="2449898">,</span>&nbsp;<span class="ident" id="2449900">ok</span>&nbsp;<span class="op" id="2449903">:=</span>&nbsp;<span class="ident" id="2449906">s</span><span class="op" id="2449907">.</span><span class="ident" id="2449908">hexByte</span><span class="op" id="2449915">(</span><span class="op" id="2449916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449920">if</span>&nbsp;<span class="op" id="2449923">!</span><span class="ident" id="2449924">ok</span>&nbsp;<span class="op" id="2449927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449932">break</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2449940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449944">s</span><span class="op" id="2449945">.</span><span class="ident" id="2449946">buf</span><span class="op" id="2449949">.</span><span class="ident" id="2449950">WriteByte</span><span class="op" id="2449959">(</span><span class="ident" id="2449960">b</span><span class="op" id="2449961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2449964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2449967">if</span>&nbsp;<span class="builtinfunc" id="2449970">len</span><span class="op" id="2449973">(</span><span class="ident" id="2449974">s</span><span class="op" id="2449975">.</span><span class="ident" id="2449976">buf</span><span class="op" id="2449979">)</span>&nbsp;<span class="op" id="2449981">==</span>&nbsp;<span class="num" id="2449984">0</span>&nbsp;<span class="op" id="2449986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2449990">s</span><span class="op" id="2449991">.</span><span class="ident" id="2449992">errorString</span><span class="op" id="2450003">(</span><span class="string" id="2450004">&#34;no&nbsp;hex&nbsp;data&nbsp;for&nbsp;%x&nbsp;string&#34;</span><span class="op" id="2450031">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450035">return</span>&nbsp;<span class="string" id="2450042">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450049">return</span>&nbsp;<span class="builtintype" id="2450056">string</span><span class="op" id="2450062">(</span><span class="ident" id="2450063">s</span><span class="op" id="2450064">.</span><span class="ident" id="2450065">buf</span><span class="op" id="2450068">)</span><br>
<span class="lineno"></span><span class="op" id="2450070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="keyword" id="2450073">const</span>&nbsp;<span class="ident" id="2450079">floatVerbs</span>&nbsp;<span class="op" id="2450090">=</span>&nbsp;<span class="string" id="2450092">&#34;beEfFgGv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2450104">const</span>&nbsp;<span class="ident" id="2450110">hugeWid</span>&nbsp;<span class="op" id="2450118">=</span>&nbsp;<span class="num" id="2450120">1</span>&nbsp;<span class="op" id="2450122">&lt;&lt;</span>&nbsp;<span class="num" id="2450125">30</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2450129">//&nbsp;scanOne&nbsp;scans&nbsp;a&nbsp;single&nbsp;value,&nbsp;deriving&nbsp;the&nbsp;scanner&nbsp;from&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;argument.</span><br>
<span class="lineno">930</span><span class="keyword" id="2450214">func</span>&nbsp;<span class="op" id="2450219">(</span><span class="ident" id="2450220">s</span>&nbsp;<span class="op" id="2450222">*</span><span class="ident" id="2450223">ss</span><span class="op" id="2450225">)</span>&nbsp;<span class="ident" id="2450227">scanOne</span><span class="op" id="2450234">(</span><span class="ident" id="2450235">verb</span>&nbsp;<span class="builtintype" id="2450240">rune</span><span class="op" id="2450244">,</span>&nbsp;<span class="ident" id="2450246">arg</span>&nbsp;<span class="keyword" id="2450250">interface</span><span class="op" id="2450259">{</span><span class="op" id="2450260">}</span><span class="op" id="2450261">)</span>&nbsp;<span class="op" id="2450263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2450266">s</span><span class="op" id="2450267">.</span><span class="ident" id="2450268">buf</span>&nbsp;<span class="op" id="2450272">=</span>&nbsp;<span class="ident" id="2450274">s</span><span class="op" id="2450275">.</span><span class="ident" id="2450276">buf</span><span class="op" id="2450279">[</span><span class="op" id="2450280">:</span><span class="num" id="2450281">0</span><span class="op" id="2450282">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450285">var</span>&nbsp;<span class="ident" id="2450289">err</span>&nbsp;<span class="builtintype" id="2450293">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2450300">//&nbsp;If&nbsp;the&nbsp;parameter&nbsp;has&nbsp;its&nbsp;own&nbsp;Scan&nbsp;method,&nbsp;use&nbsp;that.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450356">if</span>&nbsp;<span class="ident" id="2450359">v</span><span class="op" id="2450360">,</span>&nbsp;<span class="ident" id="2450362">ok</span>&nbsp;<span class="op" id="2450365">:=</span>&nbsp;<span class="ident" id="2450368">arg</span><span class="op" id="2450371">.</span><span class="op" id="2450372">(</span><span class="ident" id="2450373">Scanner</span><span class="op" id="2450380">)</span><span class="op" id="2450381">;</span>&nbsp;<span class="ident" id="2450383">ok</span>&nbsp;<span class="op" id="2450386">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2450390">err</span>&nbsp;<span class="op" id="2450394">=</span>&nbsp;<span class="ident" id="2450396">v</span><span class="op" id="2450397">.</span><span class="ident" id="2450398">Scan</span><span class="op" id="2450402">(</span><span class="ident" id="2450403">s</span><span class="op" id="2450404">,</span>&nbsp;<span class="ident" id="2450406">verb</span><span class="op" id="2450410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450414">if</span>&nbsp;<span class="ident" id="2450417">err</span>&nbsp;<span class="op" id="2450421">!=</span>&nbsp;<span class="builtintype" id="2450424">nil</span>&nbsp;<span class="op" id="2450428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450433">if</span>&nbsp;<span class="ident" id="2450436">err</span>&nbsp;<span class="op" id="2450440">==</span>&nbsp;<span class="ident" id="2450443">io</span><span class="op" id="2450445">.</span><span class="ident" id="2450446">EOF</span>&nbsp;<span class="op" id="2450450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2450456">err</span>&nbsp;<span class="op" id="2450460">=</span>&nbsp;<span class="ident" id="2450462">io</span><span class="op" id="2450464">.</span><span class="ident" id="2450465">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450485">}</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2450490">s</span><span class="op" id="2450491">.</span><span class="builtintype" id="2450492">error</span><span class="op" id="2450497">(</span><span class="ident" id="2450498">err</span><span class="op" id="2450501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450509">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450521">switch</span>&nbsp;<span class="ident" id="2450528">v</span>&nbsp;<span class="op" id="2450530">:=</span>&nbsp;<span class="ident" id="2450533">arg</span><span class="op" id="2450536">.</span><span class="op" id="2450537">(</span><span class="keyword" id="2450538">type</span><span class="op" id="2450542">)</span>&nbsp;<span class="op" id="2450544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450547">case</span>&nbsp;<span class="op" id="2450552">*</span><span class="builtintype" id="2450553">bool</span><span class="op" id="2450557">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450561">*</span><span class="ident" id="2450562">v</span>&nbsp;<span class="op" id="2450564">=</span>&nbsp;<span class="ident" id="2450566">s</span><span class="op" id="2450567">.</span><span class="ident" id="2450568">scanBool</span><span class="op" id="2450576">(</span><span class="ident" id="2450577">verb</span><span class="op" id="2450581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450584">case</span>&nbsp;<span class="op" id="2450589">*</span><span class="builtintype" id="2450590">complex64</span><span class="op" id="2450599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450603">*</span><span class="ident" id="2450604">v</span>&nbsp;<span class="op" id="2450606">=</span>&nbsp;<span class="builtintype" id="2450608">complex64</span><span class="op" id="2450617">(</span><span class="ident" id="2450618">s</span><span class="op" id="2450619">.</span><span class="ident" id="2450620">scanComplex</span><span class="op" id="2450631">(</span><span class="ident" id="2450632">verb</span><span class="op" id="2450636">,</span>&nbsp;<span class="num" id="2450638">64</span><span class="op" id="2450640">)</span><span class="op" id="2450641">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450644">case</span>&nbsp;<span class="op" id="2450649">*</span><span class="builtintype" id="2450650">complex128</span><span class="op" id="2450660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450664">*</span><span class="ident" id="2450665">v</span>&nbsp;<span class="op" id="2450667">=</span>&nbsp;<span class="ident" id="2450669">s</span><span class="op" id="2450670">.</span><span class="ident" id="2450671">scanComplex</span><span class="op" id="2450682">(</span><span class="ident" id="2450683">verb</span><span class="op" id="2450687">,</span>&nbsp;<span class="num" id="2450689">128</span><span class="op" id="2450692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450695">case</span>&nbsp;<span class="op" id="2450700">*</span><span class="builtintype" id="2450701">int</span><span class="op" id="2450704">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450708">*</span><span class="ident" id="2450709">v</span>&nbsp;<span class="op" id="2450711">=</span>&nbsp;<span class="builtintype" id="2450713">int</span><span class="op" id="2450716">(</span><span class="ident" id="2450717">s</span><span class="op" id="2450718">.</span><span class="ident" id="2450719">scanInt</span><span class="op" id="2450726">(</span><span class="ident" id="2450727">verb</span><span class="op" id="2450731">,</span>&nbsp;<span class="ident" id="2450733">intBits</span><span class="op" id="2450740">)</span><span class="op" id="2450741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450744">case</span>&nbsp;<span class="op" id="2450749">*</span><span class="builtintype" id="2450750">int8</span><span class="op" id="2450754">:</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450758">*</span><span class="ident" id="2450759">v</span>&nbsp;<span class="op" id="2450761">=</span>&nbsp;<span class="builtintype" id="2450763">int8</span><span class="op" id="2450767">(</span><span class="ident" id="2450768">s</span><span class="op" id="2450769">.</span><span class="ident" id="2450770">scanInt</span><span class="op" id="2450777">(</span><span class="ident" id="2450778">verb</span><span class="op" id="2450782">,</span>&nbsp;<span class="num" id="2450784">8</span><span class="op" id="2450785">)</span><span class="op" id="2450786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450789">case</span>&nbsp;<span class="op" id="2450794">*</span><span class="builtintype" id="2450795">int16</span><span class="op" id="2450800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450804">*</span><span class="ident" id="2450805">v</span>&nbsp;<span class="op" id="2450807">=</span>&nbsp;<span class="builtintype" id="2450809">int16</span><span class="op" id="2450814">(</span><span class="ident" id="2450815">s</span><span class="op" id="2450816">.</span><span class="ident" id="2450817">scanInt</span><span class="op" id="2450824">(</span><span class="ident" id="2450825">verb</span><span class="op" id="2450829">,</span>&nbsp;<span class="num" id="2450831">16</span><span class="op" id="2450833">)</span><span class="op" id="2450834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450837">case</span>&nbsp;<span class="op" id="2450842">*</span><span class="builtintype" id="2450843">int32</span><span class="op" id="2450848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450852">*</span><span class="ident" id="2450853">v</span>&nbsp;<span class="op" id="2450855">=</span>&nbsp;<span class="builtintype" id="2450857">int32</span><span class="op" id="2450862">(</span><span class="ident" id="2450863">s</span><span class="op" id="2450864">.</span><span class="ident" id="2450865">scanInt</span><span class="op" id="2450872">(</span><span class="ident" id="2450873">verb</span><span class="op" id="2450877">,</span>&nbsp;<span class="num" id="2450879">32</span><span class="op" id="2450881">)</span><span class="op" id="2450882">)</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450885">case</span>&nbsp;<span class="op" id="2450890">*</span><span class="builtintype" id="2450891">int64</span><span class="op" id="2450896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450900">*</span><span class="ident" id="2450901">v</span>&nbsp;<span class="op" id="2450903">=</span>&nbsp;<span class="ident" id="2450905">s</span><span class="op" id="2450906">.</span><span class="ident" id="2450907">scanInt</span><span class="op" id="2450914">(</span><span class="ident" id="2450915">verb</span><span class="op" id="2450919">,</span>&nbsp;<span class="num" id="2450921">64</span><span class="op" id="2450923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450926">case</span>&nbsp;<span class="op" id="2450931">*</span><span class="builtintype" id="2450932">uint</span><span class="op" id="2450936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450940">*</span><span class="ident" id="2450941">v</span>&nbsp;<span class="op" id="2450943">=</span>&nbsp;<span class="builtintype" id="2450945">uint</span><span class="op" id="2450949">(</span><span class="ident" id="2450950">s</span><span class="op" id="2450951">.</span><span class="ident" id="2450952">scanUint</span><span class="op" id="2450960">(</span><span class="ident" id="2450961">verb</span><span class="op" id="2450965">,</span>&nbsp;<span class="ident" id="2450967">intBits</span><span class="op" id="2450974">)</span><span class="op" id="2450975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2450978">case</span>&nbsp;<span class="op" id="2450983">*</span><span class="builtintype" id="2450984">uint8</span><span class="op" id="2450989">:</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2450993">*</span><span class="ident" id="2450994">v</span>&nbsp;<span class="op" id="2450996">=</span>&nbsp;<span class="builtintype" id="2450998">uint8</span><span class="op" id="2451003">(</span><span class="ident" id="2451004">s</span><span class="op" id="2451005">.</span><span class="ident" id="2451006">scanUint</span><span class="op" id="2451014">(</span><span class="ident" id="2451015">verb</span><span class="op" id="2451019">,</span>&nbsp;<span class="num" id="2451021">8</span><span class="op" id="2451022">)</span><span class="op" id="2451023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451026">case</span>&nbsp;<span class="op" id="2451031">*</span><span class="builtintype" id="2451032">uint16</span><span class="op" id="2451038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451042">*</span><span class="ident" id="2451043">v</span>&nbsp;<span class="op" id="2451045">=</span>&nbsp;<span class="builtintype" id="2451047">uint16</span><span class="op" id="2451053">(</span><span class="ident" id="2451054">s</span><span class="op" id="2451055">.</span><span class="ident" id="2451056">scanUint</span><span class="op" id="2451064">(</span><span class="ident" id="2451065">verb</span><span class="op" id="2451069">,</span>&nbsp;<span class="num" id="2451071">16</span><span class="op" id="2451073">)</span><span class="op" id="2451074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451077">case</span>&nbsp;<span class="op" id="2451082">*</span><span class="builtintype" id="2451083">uint32</span><span class="op" id="2451089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451093">*</span><span class="ident" id="2451094">v</span>&nbsp;<span class="op" id="2451096">=</span>&nbsp;<span class="builtintype" id="2451098">uint32</span><span class="op" id="2451104">(</span><span class="ident" id="2451105">s</span><span class="op" id="2451106">.</span><span class="ident" id="2451107">scanUint</span><span class="op" id="2451115">(</span><span class="ident" id="2451116">verb</span><span class="op" id="2451120">,</span>&nbsp;<span class="num" id="2451122">32</span><span class="op" id="2451124">)</span><span class="op" id="2451125">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451128">case</span>&nbsp;<span class="op" id="2451133">*</span><span class="builtintype" id="2451134">uint64</span><span class="op" id="2451140">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451144">*</span><span class="ident" id="2451145">v</span>&nbsp;<span class="op" id="2451147">=</span>&nbsp;<span class="ident" id="2451149">s</span><span class="op" id="2451150">.</span><span class="ident" id="2451151">scanUint</span><span class="op" id="2451159">(</span><span class="ident" id="2451160">verb</span><span class="op" id="2451164">,</span>&nbsp;<span class="num" id="2451166">64</span><span class="op" id="2451168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451171">case</span>&nbsp;<span class="op" id="2451176">*</span><span class="builtintype" id="2451177">uintptr</span><span class="op" id="2451184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451188">*</span><span class="ident" id="2451189">v</span>&nbsp;<span class="op" id="2451191">=</span>&nbsp;<span class="builtintype" id="2451193">uintptr</span><span class="op" id="2451200">(</span><span class="ident" id="2451201">s</span><span class="op" id="2451202">.</span><span class="ident" id="2451203">scanUint</span><span class="op" id="2451211">(</span><span class="ident" id="2451212">verb</span><span class="op" id="2451216">,</span>&nbsp;<span class="ident" id="2451218">uintptrBits</span><span class="op" id="2451229">)</span><span class="op" id="2451230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2451233">//&nbsp;Floats&nbsp;are&nbsp;tricky&nbsp;because&nbsp;you&nbsp;want&nbsp;to&nbsp;scan&nbsp;in&nbsp;the&nbsp;precision&nbsp;of&nbsp;the&nbsp;result,&nbsp;not</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2451316">//&nbsp;scan&nbsp;in&nbsp;high&nbsp;precision&nbsp;and&nbsp;convert,&nbsp;in&nbsp;order&nbsp;to&nbsp;preserve&nbsp;the&nbsp;correct&nbsp;error&nbsp;condition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451406">case</span>&nbsp;<span class="op" id="2451411">*</span><span class="builtintype" id="2451412">float32</span><span class="op" id="2451419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451423">if</span>&nbsp;<span class="ident" id="2451426">s</span><span class="op" id="2451427">.</span><span class="ident" id="2451428">okVerb</span><span class="op" id="2451434">(</span><span class="ident" id="2451435">verb</span><span class="op" id="2451439">,</span>&nbsp;<span class="ident" id="2451441">floatVerbs</span><span class="op" id="2451451">,</span>&nbsp;<span class="string" id="2451453">&#34;float32&#34;</span><span class="op" id="2451462">)</span>&nbsp;<span class="op" id="2451464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451469">s</span><span class="op" id="2451470">.</span><span class="ident" id="2451471">skipSpace</span><span class="op" id="2451480">(</span><span class="builtintype" id="2451481">false</span><span class="op" id="2451486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451491">s</span><span class="op" id="2451492">.</span><span class="ident" id="2451493">notEOF</span><span class="op" id="2451499">(</span><span class="op" id="2451500">)</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451505">*</span><span class="ident" id="2451506">v</span>&nbsp;<span class="op" id="2451508">=</span>&nbsp;<span class="builtintype" id="2451510">float32</span><span class="op" id="2451517">(</span><span class="ident" id="2451518">s</span><span class="op" id="2451519">.</span><span class="ident" id="2451520">convertFloat</span><span class="op" id="2451532">(</span><span class="ident" id="2451533">s</span><span class="op" id="2451534">.</span><span class="ident" id="2451535">floatToken</span><span class="op" id="2451545">(</span><span class="op" id="2451546">)</span><span class="op" id="2451547">,</span>&nbsp;<span class="num" id="2451549">32</span><span class="op" id="2451551">)</span><span class="op" id="2451552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451559">case</span>&nbsp;<span class="op" id="2451564">*</span><span class="builtintype" id="2451565">float64</span><span class="op" id="2451572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451576">if</span>&nbsp;<span class="ident" id="2451579">s</span><span class="op" id="2451580">.</span><span class="ident" id="2451581">okVerb</span><span class="op" id="2451587">(</span><span class="ident" id="2451588">verb</span><span class="op" id="2451592">,</span>&nbsp;<span class="ident" id="2451594">floatVerbs</span><span class="op" id="2451604">,</span>&nbsp;<span class="string" id="2451606">&#34;float64&#34;</span><span class="op" id="2451615">)</span>&nbsp;<span class="op" id="2451617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451622">s</span><span class="op" id="2451623">.</span><span class="ident" id="2451624">skipSpace</span><span class="op" id="2451633">(</span><span class="builtintype" id="2451634">false</span><span class="op" id="2451639">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451644">s</span><span class="op" id="2451645">.</span><span class="ident" id="2451646">notEOF</span><span class="op" id="2451652">(</span><span class="op" id="2451653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451658">*</span><span class="ident" id="2451659">v</span>&nbsp;<span class="op" id="2451661">=</span>&nbsp;<span class="ident" id="2451663">s</span><span class="op" id="2451664">.</span><span class="ident" id="2451665">convertFloat</span><span class="op" id="2451677">(</span><span class="ident" id="2451678">s</span><span class="op" id="2451679">.</span><span class="ident" id="2451680">floatToken</span><span class="op" id="2451690">(</span><span class="op" id="2451691">)</span><span class="op" id="2451692">,</span>&nbsp;<span class="num" id="2451694">64</span><span class="op" id="2451696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451703">case</span>&nbsp;<span class="op" id="2451708">*</span><span class="builtintype" id="2451709">string</span><span class="op" id="2451715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451719">*</span><span class="ident" id="2451720">v</span>&nbsp;<span class="op" id="2451722">=</span>&nbsp;<span class="ident" id="2451724">s</span><span class="op" id="2451725">.</span><span class="ident" id="2451726">convertString</span><span class="op" id="2451739">(</span><span class="ident" id="2451740">verb</span><span class="op" id="2451744">)</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451747">case</span>&nbsp;<span class="op" id="2451752">*</span><span class="op" id="2451753">[</span><span class="op" id="2451754">]</span><span class="builtintype" id="2451755">byte</span><span class="op" id="2451759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2451763">//&nbsp;We&nbsp;scan&nbsp;to&nbsp;string&nbsp;and&nbsp;convert&nbsp;so&nbsp;we&nbsp;get&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2451828">//&nbsp;If&nbsp;we&nbsp;scanned&nbsp;to&nbsp;bytes,&nbsp;the&nbsp;slice&nbsp;would&nbsp;point&nbsp;at&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2451894">*</span><span class="ident" id="2451895">v</span>&nbsp;<span class="op" id="2451897">=</span>&nbsp;<span class="op" id="2451899">[</span><span class="op" id="2451900">]</span><span class="builtintype" id="2451901">byte</span><span class="op" id="2451905">(</span><span class="ident" id="2451906">s</span><span class="op" id="2451907">.</span><span class="ident" id="2451908">convertString</span><span class="op" id="2451921">(</span><span class="ident" id="2451922">verb</span><span class="op" id="2451926">)</span><span class="op" id="2451927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451930">default</span><span class="op" id="2451937">:</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451941">val</span>&nbsp;<span class="op" id="2451945">:=</span>&nbsp;<span class="ident" id="2451948">reflect</span><span class="op" id="2451955">.</span><span class="ident" id="2451956">ValueOf</span><span class="op" id="2451963">(</span><span class="ident" id="2451964">v</span><span class="op" id="2451965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2451969">ptr</span>&nbsp;<span class="op" id="2451973">:=</span>&nbsp;<span class="ident" id="2451976">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2451982">if</span>&nbsp;<span class="ident" id="2451985">ptr</span><span class="op" id="2451988">.</span><span class="ident" id="2451989">Kind</span><span class="op" id="2451993">(</span><span class="op" id="2451994">)</span>&nbsp;<span class="op" id="2451996">!=</span>&nbsp;<span class="ident" id="2451999">reflect</span><span class="op" id="2452006">.</span><span class="ident" id="2452007">Ptr</span>&nbsp;<span class="op" id="2452011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452016">s</span><span class="op" id="2452017">.</span><span class="ident" id="2452018">errorString</span><span class="op" id="2452029">(</span><span class="string" id="2452030">&#34;type&nbsp;not&nbsp;a&nbsp;pointer:&nbsp;&#34;</span>&nbsp;<span class="op" id="2452053">+</span>&nbsp;<span class="ident" id="2452055">val</span><span class="op" id="2452058">.</span><span class="ident" id="2452059">Type</span><span class="op" id="2452063">(</span><span class="op" id="2452064">)</span><span class="op" id="2452065">.</span><span class="ident" id="2452066">String</span><span class="op" id="2452072">(</span><span class="op" id="2452073">)</span><span class="op" id="2452074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452079">return</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2452088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452092">switch</span>&nbsp;<span class="ident" id="2452099">v</span>&nbsp;<span class="op" id="2452101">:=</span>&nbsp;<span class="ident" id="2452104">ptr</span><span class="op" id="2452107">.</span><span class="ident" id="2452108">Elem</span><span class="op" id="2452112">(</span><span class="op" id="2452113">)</span><span class="op" id="2452114">;</span>&nbsp;<span class="ident" id="2452116">v</span><span class="op" id="2452117">.</span><span class="ident" id="2452118">Kind</span><span class="op" id="2452122">(</span><span class="op" id="2452123">)</span>&nbsp;<span class="op" id="2452125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452129">case</span>&nbsp;<span class="ident" id="2452134">reflect</span><span class="op" id="2452141">.</span><span class="ident" id="2452142">Bool</span><span class="op" id="2452146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452151">v</span><span class="op" id="2452152">.</span><span class="ident" id="2452153">SetBool</span><span class="op" id="2452160">(</span><span class="ident" id="2452161">s</span><span class="op" id="2452162">.</span><span class="ident" id="2452163">scanBool</span><span class="op" id="2452171">(</span><span class="ident" id="2452172">verb</span><span class="op" id="2452176">)</span><span class="op" id="2452177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452181">case</span>&nbsp;<span class="ident" id="2452186">reflect</span><span class="op" id="2452193">.</span><span class="ident" id="2452194">Int</span><span class="op" id="2452197">,</span>&nbsp;<span class="ident" id="2452199">reflect</span><span class="op" id="2452206">.</span><span class="ident" id="2452207">Int8</span><span class="op" id="2452211">,</span>&nbsp;<span class="ident" id="2452213">reflect</span><span class="op" id="2452220">.</span><span class="ident" id="2452221">Int16</span><span class="op" id="2452226">,</span>&nbsp;<span class="ident" id="2452228">reflect</span><span class="op" id="2452235">.</span><span class="ident" id="2452236">Int32</span><span class="op" id="2452241">,</span>&nbsp;<span class="ident" id="2452243">reflect</span><span class="op" id="2452250">.</span><span class="ident" id="2452251">Int64</span><span class="op" id="2452256">:</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452261">v</span><span class="op" id="2452262">.</span><span class="ident" id="2452263">SetInt</span><span class="op" id="2452269">(</span><span class="ident" id="2452270">s</span><span class="op" id="2452271">.</span><span class="ident" id="2452272">scanInt</span><span class="op" id="2452279">(</span><span class="ident" id="2452280">verb</span><span class="op" id="2452284">,</span>&nbsp;<span class="ident" id="2452286">v</span><span class="op" id="2452287">.</span><span class="ident" id="2452288">Type</span><span class="op" id="2452292">(</span><span class="op" id="2452293">)</span><span class="op" id="2452294">.</span><span class="ident" id="2452295">Bits</span><span class="op" id="2452299">(</span><span class="op" id="2452300">)</span><span class="op" id="2452301">)</span><span class="op" id="2452302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452306">case</span>&nbsp;<span class="ident" id="2452311">reflect</span><span class="op" id="2452318">.</span><span class="ident" id="2452319">Uint</span><span class="op" id="2452323">,</span>&nbsp;<span class="ident" id="2452325">reflect</span><span class="op" id="2452332">.</span><span class="ident" id="2452333">Uint8</span><span class="op" id="2452338">,</span>&nbsp;<span class="ident" id="2452340">reflect</span><span class="op" id="2452347">.</span><span class="ident" id="2452348">Uint16</span><span class="op" id="2452354">,</span>&nbsp;<span class="ident" id="2452356">reflect</span><span class="op" id="2452363">.</span><span class="ident" id="2452364">Uint32</span><span class="op" id="2452370">,</span>&nbsp;<span class="ident" id="2452372">reflect</span><span class="op" id="2452379">.</span><span class="ident" id="2452380">Uint64</span><span class="op" id="2452386">,</span>&nbsp;<span class="ident" id="2452388">reflect</span><span class="op" id="2452395">.</span><span class="ident" id="2452396">Uintptr</span><span class="op" id="2452403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452408">v</span><span class="op" id="2452409">.</span><span class="ident" id="2452410">SetUint</span><span class="op" id="2452417">(</span><span class="ident" id="2452418">s</span><span class="op" id="2452419">.</span><span class="ident" id="2452420">scanUint</span><span class="op" id="2452428">(</span><span class="ident" id="2452429">verb</span><span class="op" id="2452433">,</span>&nbsp;<span class="ident" id="2452435">v</span><span class="op" id="2452436">.</span><span class="ident" id="2452437">Type</span><span class="op" id="2452441">(</span><span class="op" id="2452442">)</span><span class="op" id="2452443">.</span><span class="ident" id="2452444">Bits</span><span class="op" id="2452448">(</span><span class="op" id="2452449">)</span><span class="op" id="2452450">)</span><span class="op" id="2452451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452455">case</span>&nbsp;<span class="ident" id="2452460">reflect</span><span class="op" id="2452467">.</span><span class="ident" id="2452468">String</span><span class="op" id="2452474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452479">v</span><span class="op" id="2452480">.</span><span class="ident" id="2452481">SetString</span><span class="op" id="2452490">(</span><span class="ident" id="2452491">s</span><span class="op" id="2452492">.</span><span class="ident" id="2452493">convertString</span><span class="op" id="2452506">(</span><span class="ident" id="2452507">verb</span><span class="op" id="2452511">)</span><span class="op" id="2452512">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452516">case</span>&nbsp;<span class="ident" id="2452521">reflect</span><span class="op" id="2452528">.</span><span class="ident" id="2452529">Slice</span><span class="op" id="2452534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2452539">//&nbsp;For&nbsp;now,&nbsp;can&nbsp;only&nbsp;handle&nbsp;(renamed)&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452588">typ</span>&nbsp;<span class="op" id="2452592">:=</span>&nbsp;<span class="ident" id="2452595">v</span><span class="op" id="2452596">.</span><span class="ident" id="2452597">Type</span><span class="op" id="2452601">(</span><span class="op" id="2452602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452607">if</span>&nbsp;<span class="ident" id="2452610">typ</span><span class="op" id="2452613">.</span><span class="ident" id="2452614">Elem</span><span class="op" id="2452618">(</span><span class="op" id="2452619">)</span><span class="op" id="2452620">.</span><span class="ident" id="2452621">Kind</span><span class="op" id="2452625">(</span><span class="op" id="2452626">)</span>&nbsp;<span class="op" id="2452628">!=</span>&nbsp;<span class="ident" id="2452631">reflect</span><span class="op" id="2452638">.</span><span class="ident" id="2452639">Uint8</span>&nbsp;<span class="op" id="2452645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452651">s</span><span class="op" id="2452652">.</span><span class="ident" id="2452653">errorString</span><span class="op" id="2452664">(</span><span class="string" id="2452665">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="2452685">+</span>&nbsp;<span class="ident" id="2452687">val</span><span class="op" id="2452690">.</span><span class="ident" id="2452691">Type</span><span class="op" id="2452695">(</span><span class="op" id="2452696">)</span><span class="op" id="2452697">.</span><span class="ident" id="2452698">String</span><span class="op" id="2452704">(</span><span class="op" id="2452705">)</span><span class="op" id="2452706">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2452711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452716">str</span>&nbsp;<span class="op" id="2452720">:=</span>&nbsp;<span class="ident" id="2452723">s</span><span class="op" id="2452724">.</span><span class="ident" id="2452725">convertString</span><span class="op" id="2452738">(</span><span class="ident" id="2452739">verb</span><span class="op" id="2452743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452748">v</span><span class="op" id="2452749">.</span><span class="ident" id="2452750">Set</span><span class="op" id="2452753">(</span><span class="ident" id="2452754">reflect</span><span class="op" id="2452761">.</span><span class="ident" id="2452762">MakeSlice</span><span class="op" id="2452771">(</span><span class="ident" id="2452772">typ</span><span class="op" id="2452775">,</span>&nbsp;<span class="builtinfunc" id="2452777">len</span><span class="op" id="2452780">(</span><span class="ident" id="2452781">str</span><span class="op" id="2452784">)</span><span class="op" id="2452785">,</span>&nbsp;<span class="builtinfunc" id="2452787">len</span><span class="op" id="2452790">(</span><span class="ident" id="2452791">str</span><span class="op" id="2452794">)</span><span class="op" id="2452795">)</span><span class="op" id="2452796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452801">for</span>&nbsp;<span class="ident" id="2452805">i</span>&nbsp;<span class="op" id="2452807">:=</span>&nbsp;<span class="num" id="2452810">0</span><span class="op" id="2452811">;</span>&nbsp;<span class="ident" id="2452813">i</span>&nbsp;<span class="op" id="2452815">&lt;</span>&nbsp;<span class="builtinfunc" id="2452817">len</span><span class="op" id="2452820">(</span><span class="ident" id="2452821">str</span><span class="op" id="2452824">)</span><span class="op" id="2452825">;</span>&nbsp;<span class="ident" id="2452827">i</span><span class="op" id="2452828">++</span>&nbsp;<span class="op" id="2452831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452837">v</span><span class="op" id="2452838">.</span><span class="ident" id="2452839">Index</span><span class="op" id="2452844">(</span><span class="ident" id="2452845">i</span><span class="op" id="2452846">)</span><span class="op" id="2452847">.</span><span class="ident" id="2452848">SetUint</span><span class="op" id="2452855">(</span><span class="builtintype" id="2452856">uint64</span><span class="op" id="2452862">(</span><span class="ident" id="2452863">str</span><span class="op" id="2452866">[</span><span class="ident" id="2452867">i</span><span class="op" id="2452868">]</span><span class="op" id="2452869">)</span><span class="op" id="2452870">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2452875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2452879">case</span>&nbsp;<span class="ident" id="2452884">reflect</span><span class="op" id="2452891">.</span><span class="ident" id="2452892">Float32</span><span class="op" id="2452899">,</span>&nbsp;<span class="ident" id="2452901">reflect</span><span class="op" id="2452908">.</span><span class="ident" id="2452909">Float64</span><span class="op" id="2452916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452921">s</span><span class="op" id="2452922">.</span><span class="ident" id="2452923">skipSpace</span><span class="op" id="2452932">(</span><span class="builtintype" id="2452933">false</span><span class="op" id="2452938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452943">s</span><span class="op" id="2452944">.</span><span class="ident" id="2452945">notEOF</span><span class="op" id="2452951">(</span><span class="op" id="2452952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2452957">v</span><span class="op" id="2452958">.</span><span class="ident" id="2452959">SetFloat</span><span class="op" id="2452967">(</span><span class="ident" id="2452968">s</span><span class="op" id="2452969">.</span><span class="ident" id="2452970">convertFloat</span><span class="op" id="2452982">(</span><span class="ident" id="2452983">s</span><span class="op" id="2452984">.</span><span class="ident" id="2452985">floatToken</span><span class="op" id="2452995">(</span><span class="op" id="2452996">)</span><span class="op" id="2452997">,</span>&nbsp;<span class="ident" id="2452999">v</span><span class="op" id="2453000">.</span><span class="ident" id="2453001">Type</span><span class="op" id="2453005">(</span><span class="op" id="2453006">)</span><span class="op" id="2453007">.</span><span class="ident" id="2453008">Bits</span><span class="op" id="2453012">(</span><span class="op" id="2453013">)</span><span class="op" id="2453014">)</span><span class="op" id="2453015">)</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453019">case</span>&nbsp;<span class="ident" id="2453024">reflect</span><span class="op" id="2453031">.</span><span class="ident" id="2453032">Complex64</span><span class="op" id="2453041">,</span>&nbsp;<span class="ident" id="2453043">reflect</span><span class="op" id="2453050">.</span><span class="ident" id="2453051">Complex128</span><span class="op" id="2453061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453066">v</span><span class="op" id="2453067">.</span><span class="ident" id="2453068">SetComplex</span><span class="op" id="2453078">(</span><span class="ident" id="2453079">s</span><span class="op" id="2453080">.</span><span class="ident" id="2453081">scanComplex</span><span class="op" id="2453092">(</span><span class="ident" id="2453093">verb</span><span class="op" id="2453097">,</span>&nbsp;<span class="ident" id="2453099">v</span><span class="op" id="2453100">.</span><span class="ident" id="2453101">Type</span><span class="op" id="2453105">(</span><span class="op" id="2453106">)</span><span class="op" id="2453107">.</span><span class="ident" id="2453108">Bits</span><span class="op" id="2453112">(</span><span class="op" id="2453113">)</span><span class="op" id="2453114">)</span><span class="op" id="2453115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453119">default</span><span class="op" id="2453126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453131">s</span><span class="op" id="2453132">.</span><span class="ident" id="2453133">errorString</span><span class="op" id="2453144">(</span><span class="string" id="2453145">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="2453165">+</span>&nbsp;<span class="ident" id="2453167">val</span><span class="op" id="2453170">.</span><span class="ident" id="2453171">Type</span><span class="op" id="2453175">(</span><span class="op" id="2453176">)</span><span class="op" id="2453177">.</span><span class="ident" id="2453178">String</span><span class="op" id="2453184">(</span><span class="op" id="2453185">)</span><span class="op" id="2453186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453190">}</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453193">}</span><br>
<span class="lineno"></span><span class="op" id="2453195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2453198">//&nbsp;errorHandler&nbsp;turns&nbsp;local&nbsp;panics&nbsp;into&nbsp;error&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="2453253">func</span>&nbsp;<span class="ident" id="2453258">errorHandler</span><span class="op" id="2453270">(</span><span class="ident" id="2453271">errp</span>&nbsp;<span class="op" id="2453276">*</span><span class="builtintype" id="2453277">error</span><span class="op" id="2453282">)</span>&nbsp;<span class="op" id="2453284">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453287">if</span>&nbsp;<span class="ident" id="2453290">e</span>&nbsp;<span class="op" id="2453292">:=</span>&nbsp;<span class="builtinfunc" id="2453295">recover</span><span class="op" id="2453302">(</span><span class="op" id="2453303">)</span><span class="op" id="2453304">;</span>&nbsp;<span class="ident" id="2453306">e</span>&nbsp;<span class="op" id="2453308">!=</span>&nbsp;<span class="builtintype" id="2453311">nil</span>&nbsp;<span class="op" id="2453315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453319">if</span>&nbsp;<span class="ident" id="2453322">se</span><span class="op" id="2453324">,</span>&nbsp;<span class="ident" id="2453326">ok</span>&nbsp;<span class="op" id="2453329">:=</span>&nbsp;<span class="ident" id="2453332">e</span><span class="op" id="2453333">.</span><span class="op" id="2453334">(</span><span class="ident" id="2453335">scanError</span><span class="op" id="2453344">)</span><span class="op" id="2453345">;</span>&nbsp;<span class="ident" id="2453347">ok</span>&nbsp;<span class="op" id="2453350">{</span>&nbsp;<span class="comment" id="2453352">//&nbsp;catch&nbsp;local&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453376">*</span><span class="ident" id="2453377">errp</span>&nbsp;<span class="op" id="2453382">=</span>&nbsp;<span class="ident" id="2453384">se</span><span class="op" id="2453386">.</span><span class="ident" id="2453387">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453393">}</span>&nbsp;<span class="keyword" id="2453395">else</span>&nbsp;<span class="keyword" id="2453400">if</span>&nbsp;<span class="ident" id="2453403">eof</span><span class="op" id="2453406">,</span>&nbsp;<span class="ident" id="2453408">ok</span>&nbsp;<span class="op" id="2453411">:=</span>&nbsp;<span class="ident" id="2453414">e</span><span class="op" id="2453415">.</span><span class="op" id="2453416">(</span><span class="builtintype" id="2453417">error</span><span class="op" id="2453422">)</span><span class="op" id="2453423">;</span>&nbsp;<span class="ident" id="2453425">ok</span>&nbsp;<span class="op" id="2453428">&amp;&amp;</span>&nbsp;<span class="ident" id="2453431">eof</span>&nbsp;<span class="op" id="2453435">==</span>&nbsp;<span class="ident" id="2453438">io</span><span class="op" id="2453440">.</span><span class="ident" id="2453441">EOF</span>&nbsp;<span class="op" id="2453445">{</span>&nbsp;<span class="comment" id="2453447">//&nbsp;out&nbsp;of&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453466">*</span><span class="ident" id="2453467">errp</span>&nbsp;<span class="op" id="2453472">=</span>&nbsp;<span class="ident" id="2453474">eof</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453480">}</span>&nbsp;<span class="keyword" id="2453482">else</span>&nbsp;<span class="op" id="2453487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2453492">panic</span><span class="op" id="2453497">(</span><span class="ident" id="2453498">e</span><span class="op" id="2453499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453506">}</span><br>
<span class="lineno"></span><span class="op" id="2453508">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="2453511">//&nbsp;doScan&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;for&nbsp;scanning&nbsp;without&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2453578">func</span>&nbsp;<span class="op" id="2453583">(</span><span class="ident" id="2453584">s</span>&nbsp;<span class="op" id="2453586">*</span><span class="ident" id="2453587">ss</span><span class="op" id="2453589">)</span>&nbsp;<span class="ident" id="2453591">doScan</span><span class="op" id="2453597">(</span><span class="ident" id="2453598">a</span>&nbsp;<span class="op" id="2453600">[</span><span class="op" id="2453601">]</span><span class="keyword" id="2453602">interface</span><span class="op" id="2453611">{</span><span class="op" id="2453612">}</span><span class="op" id="2453613">)</span>&nbsp;<span class="op" id="2453615">(</span><span class="ident" id="2453616">numProcessed</span>&nbsp;<span class="builtintype" id="2453629">int</span><span class="op" id="2453632">,</span>&nbsp;<span class="ident" id="2453634">err</span>&nbsp;<span class="builtintype" id="2453638">error</span><span class="op" id="2453643">)</span>&nbsp;<span class="op" id="2453645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453648">defer</span>&nbsp;<span class="ident" id="2453654">errorHandler</span><span class="op" id="2453666">(</span><span class="op" id="2453667">&amp;</span><span class="ident" id="2453668">err</span><span class="op" id="2453671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453674">for</span>&nbsp;<span class="ident" id="2453678">_</span><span class="op" id="2453679">,</span>&nbsp;<span class="ident" id="2453681">arg</span>&nbsp;<span class="op" id="2453685">:=</span>&nbsp;<span class="keyword" id="2453688">range</span>&nbsp;<span class="ident" id="2453694">a</span>&nbsp;<span class="op" id="2453696">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453700">s</span><span class="op" id="2453701">.</span><span class="ident" id="2453702">scanOne</span><span class="op" id="2453709">(</span><span class="string" id="2453710">&#39;v&#39;</span><span class="op" id="2453713">,</span>&nbsp;<span class="ident" id="2453715">arg</span><span class="op" id="2453718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453722">numProcessed</span><span class="op" id="2453734">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2453741">//&nbsp;Check&nbsp;for&nbsp;newline&nbsp;if&nbsp;required.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453776">if</span>&nbsp;<span class="op" id="2453779">!</span><span class="ident" id="2453780">s</span><span class="op" id="2453781">.</span><span class="ident" id="2453782">nlIsSpace</span>&nbsp;<span class="op" id="2453792">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453796">for</span>&nbsp;<span class="op" id="2453800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453805">r</span>&nbsp;<span class="op" id="2453807">:=</span>&nbsp;<span class="ident" id="2453810">s</span><span class="op" id="2453811">.</span><span class="ident" id="2453812">getRune</span><span class="op" id="2453819">(</span><span class="op" id="2453820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453825">if</span>&nbsp;<span class="ident" id="2453828">r</span>&nbsp;<span class="op" id="2453830">==</span>&nbsp;<span class="string" id="2453833">&#39;\n&#39;</span>&nbsp;<span class="op" id="2453838">||</span>&nbsp;<span class="ident" id="2453841">r</span>&nbsp;<span class="op" id="2453843">==</span>&nbsp;<span class="ident" id="2453846">eof</span>&nbsp;<span class="op" id="2453850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453856">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453865">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453870">if</span>&nbsp;<span class="op" id="2453873">!</span><span class="ident" id="2453874">isSpace</span><span class="op" id="2453881">(</span><span class="ident" id="2453882">r</span><span class="op" id="2453883">)</span>&nbsp;<span class="op" id="2453885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2453891">s</span><span class="op" id="2453892">.</span><span class="ident" id="2453893">errorString</span><span class="op" id="2453904">(</span><span class="string" id="2453905">&#34;expected&nbsp;newline&#34;</span><span class="op" id="2453923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453929">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453942">}</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2453945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2453948">return</span><br>
<span class="lineno"></span><span class="op" id="2453955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2453958">//&nbsp;advance&nbsp;determines&nbsp;whether&nbsp;the&nbsp;next&nbsp;characters&nbsp;in&nbsp;the&nbsp;input&nbsp;match</span><br>
<span class="lineno">1070</span><span class="comment" id="2454027">//&nbsp;those&nbsp;of&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;(sic)&nbsp;consumed</span><br>
<span class="lineno"></span><span class="comment" id="2454098">//&nbsp;in&nbsp;the&nbsp;format.&nbsp;Newlines&nbsp;included,&nbsp;all&nbsp;runs&nbsp;of&nbsp;space&nbsp;characters&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2454167">//&nbsp;either&nbsp;input&nbsp;or&nbsp;format&nbsp;behave&nbsp;as&nbsp;a&nbsp;single&nbsp;space.&nbsp;This&nbsp;routine&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="2454237">//&nbsp;handles&nbsp;the&nbsp;%%&nbsp;case.&nbsp;&nbsp;If&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;zero,&nbsp;either&nbsp;format</span><br>
<span class="lineno"></span><span class="comment" id="2454305">//&nbsp;starts&nbsp;with&nbsp;a&nbsp;%&nbsp;(with&nbsp;no&nbsp;following&nbsp;%)&nbsp;or&nbsp;the&nbsp;input&nbsp;is&nbsp;empty.</span><br>
<span class="lineno">1075</span><span class="comment" id="2454369">//&nbsp;If&nbsp;it&nbsp;is&nbsp;negative,&nbsp;the&nbsp;input&nbsp;did&nbsp;not&nbsp;match&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2454427">func</span>&nbsp;<span class="op" id="2454432">(</span><span class="ident" id="2454433">s</span>&nbsp;<span class="op" id="2454435">*</span><span class="ident" id="2454436">ss</span><span class="op" id="2454438">)</span>&nbsp;<span class="ident" id="2454440">advance</span><span class="op" id="2454447">(</span><span class="ident" id="2454448">format</span>&nbsp;<span class="builtintype" id="2454455">string</span><span class="op" id="2454461">)</span>&nbsp;<span class="op" id="2454463">(</span><span class="ident" id="2454464">i</span>&nbsp;<span class="builtintype" id="2454466">int</span><span class="op" id="2454469">)</span>&nbsp;<span class="op" id="2454471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454474">for</span>&nbsp;<span class="ident" id="2454478">i</span>&nbsp;<span class="op" id="2454480">&lt;</span>&nbsp;<span class="builtinfunc" id="2454482">len</span><span class="op" id="2454485">(</span><span class="ident" id="2454486">format</span><span class="op" id="2454492">)</span>&nbsp;<span class="op" id="2454494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454498">fmtc</span><span class="op" id="2454502">,</span>&nbsp;<span class="ident" id="2454504">w</span>&nbsp;<span class="op" id="2454506">:=</span>&nbsp;<span class="ident" id="2454509">utf8</span><span class="op" id="2454513">.</span><span class="ident" id="2454514">DecodeRuneInString</span><span class="op" id="2454532">(</span><span class="ident" id="2454533">format</span><span class="op" id="2454539">[</span><span class="ident" id="2454540">i</span><span class="op" id="2454541">:</span><span class="op" id="2454542">]</span><span class="op" id="2454543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454547">if</span>&nbsp;<span class="ident" id="2454550">fmtc</span>&nbsp;<span class="op" id="2454555">==</span>&nbsp;<span class="string" id="2454558">&#39;%&#39;</span>&nbsp;<span class="op" id="2454562">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454567">//&nbsp;%%&nbsp;acts&nbsp;like&nbsp;a&nbsp;real&nbsp;percent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454601">nextc</span><span class="op" id="2454606">,</span>&nbsp;<span class="ident" id="2454608">_</span>&nbsp;<span class="op" id="2454610">:=</span>&nbsp;<span class="ident" id="2454613">utf8</span><span class="op" id="2454617">.</span><span class="ident" id="2454618">DecodeRuneInString</span><span class="op" id="2454636">(</span><span class="ident" id="2454637">format</span><span class="op" id="2454643">[</span><span class="ident" id="2454644">i</span><span class="op" id="2454645">+</span><span class="ident" id="2454646">w</span><span class="op" id="2454647">:</span><span class="op" id="2454648">]</span><span class="op" id="2454649">)</span>&nbsp;<span class="comment" id="2454651">//&nbsp;will&nbsp;not&nbsp;match&nbsp;%&nbsp;if&nbsp;string&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454693">if</span>&nbsp;<span class="ident" id="2454696">nextc</span>&nbsp;<span class="op" id="2454702">!=</span>&nbsp;<span class="string" id="2454705">&#39;%&#39;</span>&nbsp;<span class="op" id="2454709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454715">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454725">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454730">i</span>&nbsp;<span class="op" id="2454732">+=</span>&nbsp;<span class="ident" id="2454735">w</span>&nbsp;<span class="comment" id="2454737">//&nbsp;skip&nbsp;the&nbsp;first&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454763">sawSpace</span>&nbsp;<span class="op" id="2454772">:=</span>&nbsp;<span class="builtintype" id="2454775">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454783">for</span>&nbsp;<span class="ident" id="2454787">isSpace</span><span class="op" id="2454794">(</span><span class="ident" id="2454795">fmtc</span><span class="op" id="2454799">)</span>&nbsp;<span class="op" id="2454801">&amp;&amp;</span>&nbsp;<span class="ident" id="2454804">i</span>&nbsp;<span class="op" id="2454806">&lt;</span>&nbsp;<span class="builtinfunc" id="2454808">len</span><span class="op" id="2454811">(</span><span class="ident" id="2454812">format</span><span class="op" id="2454818">)</span>&nbsp;<span class="op" id="2454820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454825">sawSpace</span>&nbsp;<span class="op" id="2454834">=</span>&nbsp;<span class="builtintype" id="2454836">true</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454844">i</span>&nbsp;<span class="op" id="2454846">+=</span>&nbsp;<span class="ident" id="2454849">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2454854">fmtc</span><span class="op" id="2454858">,</span>&nbsp;<span class="ident" id="2454860">w</span>&nbsp;<span class="op" id="2454862">=</span>&nbsp;<span class="ident" id="2454864">utf8</span><span class="op" id="2454868">.</span><span class="ident" id="2454869">DecodeRuneInString</span><span class="op" id="2454887">(</span><span class="ident" id="2454888">format</span><span class="op" id="2454894">[</span><span class="ident" id="2454895">i</span><span class="op" id="2454896">:</span><span class="op" id="2454897">]</span><span class="op" id="2454898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2454902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2454906">if</span>&nbsp;<span class="ident" id="2454909">sawSpace</span>&nbsp;<span class="op" id="2454918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454923">//&nbsp;There&nbsp;was&nbsp;space&nbsp;in&nbsp;the&nbsp;format,&nbsp;so&nbsp;there&nbsp;should&nbsp;be&nbsp;space&nbsp;(EOF)</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2454991">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455011">inputc</span>&nbsp;<span class="op" id="2455018">:=</span>&nbsp;<span class="ident" id="2455021">s</span><span class="op" id="2455022">.</span><span class="ident" id="2455023">getRune</span><span class="op" id="2455030">(</span><span class="op" id="2455031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455036">if</span>&nbsp;<span class="ident" id="2455039">inputc</span>&nbsp;<span class="op" id="2455046">==</span>&nbsp;<span class="ident" id="2455049">eof</span>&nbsp;<span class="op" id="2455053">||</span>&nbsp;<span class="ident" id="2455056">inputc</span>&nbsp;<span class="op" id="2455063">==</span>&nbsp;<span class="string" id="2455066">&#39;\n&#39;</span>&nbsp;<span class="op" id="2455071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2455077">//&nbsp;If&nbsp;we&#39;ve&nbsp;reached&nbsp;a&nbsp;newline,&nbsp;stop&nbsp;now;&nbsp;don&#39;t&nbsp;read&nbsp;ahead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455140">return</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455155">if</span>&nbsp;<span class="op" id="2455158">!</span><span class="ident" id="2455159">isSpace</span><span class="op" id="2455166">(</span><span class="ident" id="2455167">inputc</span><span class="op" id="2455173">)</span>&nbsp;<span class="op" id="2455175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2455181">//&nbsp;Space&nbsp;in&nbsp;format&nbsp;but&nbsp;not&nbsp;in&nbsp;input:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455228">s</span><span class="op" id="2455229">.</span><span class="ident" id="2455230">errorString</span><span class="op" id="2455241">(</span><span class="string" id="2455242">&#34;expected&nbsp;space&nbsp;in&nbsp;input&nbsp;to&nbsp;match&nbsp;format&#34;</span><span class="op" id="2455283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455288">}</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455293">s</span><span class="op" id="2455294">.</span><span class="ident" id="2455295">skipSpace</span><span class="op" id="2455304">(</span><span class="builtintype" id="2455305">true</span><span class="op" id="2455309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455314">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455329">inputc</span>&nbsp;<span class="op" id="2455336">:=</span>&nbsp;<span class="ident" id="2455339">s</span><span class="op" id="2455340">.</span><span class="ident" id="2455341">mustReadRune</span><span class="op" id="2455353">(</span><span class="op" id="2455354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455358">if</span>&nbsp;<span class="ident" id="2455361">fmtc</span>&nbsp;<span class="op" id="2455366">!=</span>&nbsp;<span class="ident" id="2455369">inputc</span>&nbsp;<span class="op" id="2455376">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455381">s</span><span class="op" id="2455382">.</span><span class="ident" id="2455383">UnreadRune</span><span class="op" id="2455393">(</span><span class="op" id="2455394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455399">return</span>&nbsp;<span class="op" id="2455406">-</span><span class="num" id="2455407">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455415">i</span>&nbsp;<span class="op" id="2455417">+=</span>&nbsp;<span class="ident" id="2455420">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455423">}</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455426">return</span><br>
<span class="lineno"></span><span class="op" id="2455433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2455436">//&nbsp;doScanf&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;when&nbsp;scanning&nbsp;with&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2455502">//&nbsp;&nbsp;At&nbsp;the&nbsp;moment,&nbsp;it&nbsp;handles&nbsp;only&nbsp;pointers&nbsp;to&nbsp;basic&nbsp;types.</span><br>
<span class="lineno">1120</span><span class="keyword" id="2455562">func</span>&nbsp;<span class="op" id="2455567">(</span><span class="ident" id="2455568">s</span>&nbsp;<span class="op" id="2455570">*</span><span class="ident" id="2455571">ss</span><span class="op" id="2455573">)</span>&nbsp;<span class="ident" id="2455575">doScanf</span><span class="op" id="2455582">(</span><span class="ident" id="2455583">format</span>&nbsp;<span class="builtintype" id="2455590">string</span><span class="op" id="2455596">,</span>&nbsp;<span class="ident" id="2455598">a</span>&nbsp;<span class="op" id="2455600">[</span><span class="op" id="2455601">]</span><span class="keyword" id="2455602">interface</span><span class="op" id="2455611">{</span><span class="op" id="2455612">}</span><span class="op" id="2455613">)</span>&nbsp;<span class="op" id="2455615">(</span><span class="ident" id="2455616">numProcessed</span>&nbsp;<span class="builtintype" id="2455629">int</span><span class="op" id="2455632">,</span>&nbsp;<span class="ident" id="2455634">err</span>&nbsp;<span class="builtintype" id="2455638">error</span><span class="op" id="2455643">)</span>&nbsp;<span class="op" id="2455645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455648">defer</span>&nbsp;<span class="ident" id="2455654">errorHandler</span><span class="op" id="2455666">(</span><span class="op" id="2455667">&amp;</span><span class="ident" id="2455668">err</span><span class="op" id="2455671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455674">end</span>&nbsp;<span class="op" id="2455678">:=</span>&nbsp;<span class="builtinfunc" id="2455681">len</span><span class="op" id="2455684">(</span><span class="ident" id="2455685">format</span><span class="op" id="2455691">)</span>&nbsp;<span class="op" id="2455693">-</span>&nbsp;<span class="num" id="2455695">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2455698">//&nbsp;We&nbsp;process&nbsp;one&nbsp;item&nbsp;per&nbsp;non-trivial&nbsp;format</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455745">for</span>&nbsp;<span class="ident" id="2455749">i</span>&nbsp;<span class="op" id="2455751">:=</span>&nbsp;<span class="num" id="2455754">0</span><span class="op" id="2455755">;</span>&nbsp;<span class="ident" id="2455757">i</span>&nbsp;<span class="op" id="2455759">&lt;=</span>&nbsp;<span class="ident" id="2455762">end</span><span class="op" id="2455765">;</span>&nbsp;<span class="op" id="2455767">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455771">w</span>&nbsp;<span class="op" id="2455773">:=</span>&nbsp;<span class="ident" id="2455776">s</span><span class="op" id="2455777">.</span><span class="ident" id="2455778">advance</span><span class="op" id="2455785">(</span><span class="ident" id="2455786">format</span><span class="op" id="2455792">[</span><span class="ident" id="2455793">i</span><span class="op" id="2455794">:</span><span class="op" id="2455795">]</span><span class="op" id="2455796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455800">if</span>&nbsp;<span class="ident" id="2455803">w</span>&nbsp;<span class="op" id="2455805">&gt;</span>&nbsp;<span class="num" id="2455807">0</span>&nbsp;<span class="op" id="2455809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2455814">i</span>&nbsp;<span class="op" id="2455816">+=</span>&nbsp;<span class="ident" id="2455819">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455824">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2455835">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2455839">//&nbsp;Either&nbsp;we&nbsp;failed&nbsp;to&nbsp;advance,&nbsp;we&nbsp;have&nbsp;a&nbsp;percent&nbsp;character,&nbsp;or&nbsp;we&nbsp;ran&nbsp;out&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455926">if</span>&nbsp;<span class="ident" id="2455929">format</span><span class="op" id="2455935">[</span><span class="ident" id="2455936">i</span><span class="op" id="2455937">]</span>&nbsp;<span class="op" id="2455939">!=</span>&nbsp;<span class="string" id="2455942">&#39;%&#39;</span>&nbsp;<span class="op" id="2455946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2455951">//&nbsp;Can&#39;t&nbsp;advance&nbsp;format.&nbsp;&nbsp;Why&nbsp;not?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2455989">if</span>&nbsp;<span class="ident" id="2455992">w</span>&nbsp;<span class="op" id="2455994">&lt;</span>&nbsp;<span class="num" id="2455996">0</span>&nbsp;<span class="op" id="2455998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456004">s</span><span class="op" id="2456005">.</span><span class="ident" id="2456006">errorString</span><span class="op" id="2456017">(</span><span class="string" id="2456018">&#34;input&nbsp;does&nbsp;not&nbsp;match&nbsp;format&#34;</span><span class="op" id="2456047">)</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2456057">//&nbsp;Otherwise&nbsp;at&nbsp;EOF;&nbsp;&#34;too&nbsp;many&nbsp;operands&#34;&nbsp;error&nbsp;handled&nbsp;below</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456121">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456133">i</span><span class="op" id="2456134">++</span>&nbsp;<span class="comment" id="2456137">//&nbsp;%&nbsp;is&nbsp;one&nbsp;byte</span><br>
<span class="lineno">1140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2456157">//&nbsp;do&nbsp;we&nbsp;have&nbsp;20&nbsp;(width)?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456185">var</span>&nbsp;<span class="ident" id="2456189">widPresent</span>&nbsp;<span class="builtintype" id="2456200">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456207">s</span><span class="op" id="2456208">.</span><span class="ident" id="2456209">maxWid</span><span class="op" id="2456215">,</span>&nbsp;<span class="ident" id="2456217">widPresent</span><span class="op" id="2456227">,</span>&nbsp;<span class="ident" id="2456229">i</span>&nbsp;<span class="op" id="2456231">=</span>&nbsp;<span class="ident" id="2456233">parsenum</span><span class="op" id="2456241">(</span><span class="ident" id="2456242">format</span><span class="op" id="2456248">,</span>&nbsp;<span class="ident" id="2456250">i</span><span class="op" id="2456251">,</span>&nbsp;<span class="ident" id="2456253">end</span><span class="op" id="2456256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456260">if</span>&nbsp;<span class="op" id="2456263">!</span><span class="ident" id="2456264">widPresent</span>&nbsp;<span class="op" id="2456275">{</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456280">s</span><span class="op" id="2456281">.</span><span class="ident" id="2456282">maxWid</span>&nbsp;<span class="op" id="2456289">=</span>&nbsp;<span class="ident" id="2456291">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456305">s</span><span class="op" id="2456306">.</span><span class="ident" id="2456307">argLimit</span>&nbsp;<span class="op" id="2456316">=</span>&nbsp;<span class="ident" id="2456318">s</span><span class="op" id="2456319">.</span><span class="ident" id="2456320">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456328">if</span>&nbsp;<span class="ident" id="2456331">f</span>&nbsp;<span class="op" id="2456333">:=</span>&nbsp;<span class="ident" id="2456336">s</span><span class="op" id="2456337">.</span><span class="ident" id="2456338">count</span>&nbsp;<span class="op" id="2456344">+</span>&nbsp;<span class="ident" id="2456346">s</span><span class="op" id="2456347">.</span><span class="ident" id="2456348">maxWid</span><span class="op" id="2456354">;</span>&nbsp;<span class="ident" id="2456356">f</span>&nbsp;<span class="op" id="2456358">&lt;</span>&nbsp;<span class="ident" id="2456360">s</span><span class="op" id="2456361">.</span><span class="ident" id="2456362">argLimit</span>&nbsp;<span class="op" id="2456371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456376">s</span><span class="op" id="2456377">.</span><span class="ident" id="2456378">argLimit</span>&nbsp;<span class="op" id="2456387">=</span>&nbsp;<span class="ident" id="2456389">f</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456398">c</span><span class="op" id="2456399">,</span>&nbsp;<span class="ident" id="2456401">w</span>&nbsp;<span class="op" id="2456403">:=</span>&nbsp;<span class="ident" id="2456406">utf8</span><span class="op" id="2456410">.</span><span class="ident" id="2456411">DecodeRuneInString</span><span class="op" id="2456429">(</span><span class="ident" id="2456430">format</span><span class="op" id="2456436">[</span><span class="ident" id="2456437">i</span><span class="op" id="2456438">:</span><span class="op" id="2456439">]</span><span class="op" id="2456440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456444">i</span>&nbsp;<span class="op" id="2456446">+=</span>&nbsp;<span class="ident" id="2456449">w</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456454">if</span>&nbsp;<span class="ident" id="2456457">numProcessed</span>&nbsp;<span class="op" id="2456470">&gt;=</span>&nbsp;<span class="builtinfunc" id="2456473">len</span><span class="op" id="2456476">(</span><span class="ident" id="2456477">a</span><span class="op" id="2456478">)</span>&nbsp;<span class="op" id="2456480">{</span>&nbsp;<span class="comment" id="2456482">//&nbsp;out&nbsp;of&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456504">s</span><span class="op" id="2456505">.</span><span class="ident" id="2456506">errorString</span><span class="op" id="2456517">(</span><span class="string" id="2456518">&#34;too&nbsp;few&nbsp;operands&nbsp;for&nbsp;format&nbsp;%&#34;</span>&nbsp;<span class="op" id="2456550">+</span>&nbsp;<span class="ident" id="2456552">format</span><span class="op" id="2456558">[</span><span class="ident" id="2456559">i</span><span class="op" id="2456560">-</span><span class="ident" id="2456561">w</span><span class="op" id="2456562">:</span><span class="op" id="2456563">]</span><span class="op" id="2456564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456569">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456581">arg</span>&nbsp;<span class="op" id="2456585">:=</span>&nbsp;<span class="ident" id="2456588">a</span><span class="op" id="2456589">[</span><span class="ident" id="2456590">numProcessed</span><span class="op" id="2456602">]</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456607">s</span><span class="op" id="2456608">.</span><span class="ident" id="2456609">scanOne</span><span class="op" id="2456616">(</span><span class="ident" id="2456617">c</span><span class="op" id="2456618">,</span>&nbsp;<span class="ident" id="2456620">arg</span><span class="op" id="2456623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456627">numProcessed</span><span class="op" id="2456639">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456644">s</span><span class="op" id="2456645">.</span><span class="ident" id="2456646">argLimit</span>&nbsp;<span class="op" id="2456655">=</span>&nbsp;<span class="ident" id="2456657">s</span><span class="op" id="2456658">.</span><span class="ident" id="2456659">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456666">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456669">if</span>&nbsp;<span class="ident" id="2456672">numProcessed</span>&nbsp;<span class="op" id="2456685">&lt;</span>&nbsp;<span class="builtinfunc" id="2456687">len</span><span class="op" id="2456690">(</span><span class="ident" id="2456691">a</span><span class="op" id="2456692">)</span>&nbsp;<span class="op" id="2456694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2456698">s</span><span class="op" id="2456699">.</span><span class="ident" id="2456700">errorString</span><span class="op" id="2456711">(</span><span class="string" id="2456712">&#34;too&nbsp;many&nbsp;operands&#34;</span><span class="op" id="2456731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2456734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2456737">return</span><br>
<span class="lineno"></span><span class="op" id="2456744">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
