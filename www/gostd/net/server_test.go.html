<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8468956">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8469011">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8469065">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8469116">package</span>&nbsp;<span class="ident" id="8469124">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8469129">import</span>&nbsp;<span class="op" id="8469136">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469139">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469147">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469153">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469159">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469170">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8469181">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8469188">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8469191">func</span>&nbsp;<span class="ident" id="8469196">skipServerTest</span><span class="op" id="8469210">(</span><span class="ident" id="8469211">net</span><span class="op" id="8469214">,</span>&nbsp;<span class="ident" id="8469216">unixsotype</span><span class="op" id="8469226">,</span>&nbsp;<span class="ident" id="8469228">addr</span>&nbsp;<span class="builtintype" id="8469233">string</span><span class="op" id="8469239">,</span>&nbsp;<span class="ident" id="8469241">ipv6</span><span class="op" id="8469245">,</span>&nbsp;<span class="ident" id="8469247">ipv4map</span><span class="op" id="8469254">,</span>&nbsp;<span class="ident" id="8469256">linuxOnly</span>&nbsp;<span class="builtintype" id="8469266">bool</span><span class="op" id="8469270">)</span>&nbsp;<span class="builtintype" id="8469272">bool</span>&nbsp;<span class="op" id="8469277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469280">switch</span>&nbsp;<span class="ident" id="8469287">runtime</span><span class="op" id="8469294">.</span><span class="ident" id="8469295">GOOS</span>&nbsp;<span class="op" id="8469300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469303">case</span>&nbsp;<span class="string" id="8469308">&#34;linux&#34;</span><span class="op" id="8469315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469318">case</span>&nbsp;<span class="string" id="8469323">&#34;nacl&#34;</span><span class="op" id="8469329">,</span>&nbsp;<span class="string" id="8469331">&#34;plan9&#34;</span><span class="op" id="8469338">,</span>&nbsp;<span class="string" id="8469340">&#34;windows&#34;</span><span class="op" id="8469349">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8469353">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469414">if</span>&nbsp;<span class="ident" id="8469417">net</span>&nbsp;<span class="op" id="8469421">==</span>&nbsp;<span class="ident" id="8469424">unixsotype</span>&nbsp;<span class="op" id="8469435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469440">return</span>&nbsp;<span class="builtintype" id="8469447">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469457">default</span><span class="op" id="8469464">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469468">if</span>&nbsp;<span class="ident" id="8469471">net</span>&nbsp;<span class="op" id="8469475">==</span>&nbsp;<span class="ident" id="8469478">unixsotype</span>&nbsp;<span class="op" id="8469489">&amp;&amp;</span>&nbsp;<span class="ident" id="8469492">linuxOnly</span>&nbsp;<span class="op" id="8469502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469507">return</span>&nbsp;<span class="builtintype" id="8469514">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469527">switch</span>&nbsp;<span class="ident" id="8469534">addr</span>&nbsp;<span class="op" id="8469539">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469542">case</span>&nbsp;<span class="string" id="8469547">&#34;&#34;</span><span class="op" id="8469549">,</span>&nbsp;<span class="string" id="8469551">&#34;0.0.0.0&#34;</span><span class="op" id="8469560">,</span>&nbsp;<span class="string" id="8469562">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8469580">,</span>&nbsp;<span class="string" id="8469582">&#34;[::]&#34;</span><span class="op" id="8469588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469592">if</span>&nbsp;<span class="ident" id="8469595">testing</span><span class="op" id="8469602">.</span><span class="ident" id="8469603">Short</span><span class="op" id="8469608">(</span><span class="op" id="8469609">)</span>&nbsp;<span class="op" id="8469611">||</span>&nbsp;<span class="op" id="8469614">!</span><span class="op" id="8469615">*</span><span class="ident" id="8469616">testExternal</span>&nbsp;<span class="op" id="8469629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469634">return</span>&nbsp;<span class="builtintype" id="8469641">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469651">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469654">if</span>&nbsp;<span class="ident" id="8469657">ipv6</span>&nbsp;<span class="op" id="8469662">&amp;&amp;</span>&nbsp;<span class="op" id="8469665">!</span><span class="ident" id="8469666">supportsIPv6</span>&nbsp;<span class="op" id="8469679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469683">return</span>&nbsp;<span class="builtintype" id="8469690">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469699">if</span>&nbsp;<span class="ident" id="8469702">ipv4map</span>&nbsp;<span class="op" id="8469710">&amp;&amp;</span>&nbsp;<span class="op" id="8469713">!</span><span class="ident" id="8469714">supportsIPv4map</span>&nbsp;<span class="op" id="8469730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469734">return</span>&nbsp;<span class="builtintype" id="8469741">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8469747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8469750">return</span>&nbsp;<span class="builtintype" id="8469757">false</span><br>
<span class="lineno"></span><span class="op" id="8469763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8469766">var</span>&nbsp;<span class="ident" id="8469770">streamConnServerTests</span>&nbsp;<span class="op" id="8469792">=</span>&nbsp;<span class="op" id="8469794">[</span><span class="op" id="8469795">]</span><span class="keyword" id="8469796">struct</span>&nbsp;<span class="op" id="8469803">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469806">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469816">string</span>&nbsp;<span class="comment" id="8469823">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469839">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469849">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469857">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469867">string</span>&nbsp;<span class="comment" id="8469874">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469890">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469900">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469908">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469918">bool</span>&nbsp;<span class="comment" id="8469923">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8469964">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8469974">bool</span>&nbsp;<span class="comment" id="8469979">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8470025">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8470035">bool</span>&nbsp;<span class="comment" id="8470040">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8470065">linuxOnly</span>&nbsp;<span class="builtintype" id="8470075">bool</span>&nbsp;<span class="comment" id="8470080">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8470134">}</span><span class="op" id="8470135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470138">{</span><span class="ident" id="8470139">snet</span><span class="op" id="8470143">:</span>&nbsp;<span class="string" id="8470145">&#34;tcp&#34;</span><span class="op" id="8470150">,</span>&nbsp;<span class="ident" id="8470152">saddr</span><span class="op" id="8470157">:</span>&nbsp;<span class="string" id="8470159">&#34;&#34;</span><span class="op" id="8470161">,</span>&nbsp;<span class="ident" id="8470163">cnet</span><span class="op" id="8470167">:</span>&nbsp;<span class="string" id="8470169">&#34;tcp&#34;</span><span class="op" id="8470174">,</span>&nbsp;<span class="ident" id="8470176">caddr</span><span class="op" id="8470181">:</span>&nbsp;<span class="string" id="8470183">&#34;127.0.0.1&#34;</span><span class="op" id="8470194">}</span><span class="op" id="8470195">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470198">{</span><span class="ident" id="8470199">snet</span><span class="op" id="8470203">:</span>&nbsp;<span class="string" id="8470205">&#34;tcp&#34;</span><span class="op" id="8470210">,</span>&nbsp;<span class="ident" id="8470212">saddr</span><span class="op" id="8470217">:</span>&nbsp;<span class="string" id="8470219">&#34;0.0.0.0&#34;</span><span class="op" id="8470228">,</span>&nbsp;<span class="ident" id="8470230">cnet</span><span class="op" id="8470234">:</span>&nbsp;<span class="string" id="8470236">&#34;tcp&#34;</span><span class="op" id="8470241">,</span>&nbsp;<span class="ident" id="8470243">caddr</span><span class="op" id="8470248">:</span>&nbsp;<span class="string" id="8470250">&#34;127.0.0.1&#34;</span><span class="op" id="8470261">}</span><span class="op" id="8470262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470265">{</span><span class="ident" id="8470266">snet</span><span class="op" id="8470270">:</span>&nbsp;<span class="string" id="8470272">&#34;tcp&#34;</span><span class="op" id="8470277">,</span>&nbsp;<span class="ident" id="8470279">saddr</span><span class="op" id="8470284">:</span>&nbsp;<span class="string" id="8470286">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8470304">,</span>&nbsp;<span class="ident" id="8470306">cnet</span><span class="op" id="8470310">:</span>&nbsp;<span class="string" id="8470312">&#34;tcp&#34;</span><span class="op" id="8470317">,</span>&nbsp;<span class="ident" id="8470319">caddr</span><span class="op" id="8470324">:</span>&nbsp;<span class="string" id="8470326">&#34;127.0.0.1&#34;</span><span class="op" id="8470337">}</span><span class="op" id="8470338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470341">{</span><span class="ident" id="8470342">snet</span><span class="op" id="8470346">:</span>&nbsp;<span class="string" id="8470348">&#34;tcp&#34;</span><span class="op" id="8470353">,</span>&nbsp;<span class="ident" id="8470355">saddr</span><span class="op" id="8470360">:</span>&nbsp;<span class="string" id="8470362">&#34;[::]&#34;</span><span class="op" id="8470368">,</span>&nbsp;<span class="ident" id="8470370">cnet</span><span class="op" id="8470374">:</span>&nbsp;<span class="string" id="8470376">&#34;tcp&#34;</span><span class="op" id="8470381">,</span>&nbsp;<span class="ident" id="8470383">caddr</span><span class="op" id="8470388">:</span>&nbsp;<span class="string" id="8470390">&#34;[::1]&#34;</span><span class="op" id="8470397">,</span>&nbsp;<span class="ident" id="8470399">ipv6</span><span class="op" id="8470403">:</span>&nbsp;<span class="builtintype" id="8470405">true</span><span class="op" id="8470409">}</span><span class="op" id="8470410">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470414">{</span><span class="ident" id="8470415">snet</span><span class="op" id="8470419">:</span>&nbsp;<span class="string" id="8470421">&#34;tcp&#34;</span><span class="op" id="8470426">,</span>&nbsp;<span class="ident" id="8470428">saddr</span><span class="op" id="8470433">:</span>&nbsp;<span class="string" id="8470435">&#34;&#34;</span><span class="op" id="8470437">,</span>&nbsp;<span class="ident" id="8470439">cnet</span><span class="op" id="8470443">:</span>&nbsp;<span class="string" id="8470445">&#34;tcp&#34;</span><span class="op" id="8470450">,</span>&nbsp;<span class="ident" id="8470452">caddr</span><span class="op" id="8470457">:</span>&nbsp;<span class="string" id="8470459">&#34;[::1]&#34;</span><span class="op" id="8470466">,</span>&nbsp;<span class="ident" id="8470468">ipv4map</span><span class="op" id="8470475">:</span>&nbsp;<span class="builtintype" id="8470477">true</span><span class="op" id="8470481">}</span><span class="op" id="8470482">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470485">{</span><span class="ident" id="8470486">snet</span><span class="op" id="8470490">:</span>&nbsp;<span class="string" id="8470492">&#34;tcp&#34;</span><span class="op" id="8470497">,</span>&nbsp;<span class="ident" id="8470499">saddr</span><span class="op" id="8470504">:</span>&nbsp;<span class="string" id="8470506">&#34;0.0.0.0&#34;</span><span class="op" id="8470515">,</span>&nbsp;<span class="ident" id="8470517">cnet</span><span class="op" id="8470521">:</span>&nbsp;<span class="string" id="8470523">&#34;tcp&#34;</span><span class="op" id="8470528">,</span>&nbsp;<span class="ident" id="8470530">caddr</span><span class="op" id="8470535">:</span>&nbsp;<span class="string" id="8470537">&#34;[::1]&#34;</span><span class="op" id="8470544">,</span>&nbsp;<span class="ident" id="8470546">ipv4map</span><span class="op" id="8470553">:</span>&nbsp;<span class="builtintype" id="8470555">true</span><span class="op" id="8470559">}</span><span class="op" id="8470560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470563">{</span><span class="ident" id="8470564">snet</span><span class="op" id="8470568">:</span>&nbsp;<span class="string" id="8470570">&#34;tcp&#34;</span><span class="op" id="8470575">,</span>&nbsp;<span class="ident" id="8470577">saddr</span><span class="op" id="8470582">:</span>&nbsp;<span class="string" id="8470584">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8470602">,</span>&nbsp;<span class="ident" id="8470604">cnet</span><span class="op" id="8470608">:</span>&nbsp;<span class="string" id="8470610">&#34;tcp&#34;</span><span class="op" id="8470615">,</span>&nbsp;<span class="ident" id="8470617">caddr</span><span class="op" id="8470622">:</span>&nbsp;<span class="string" id="8470624">&#34;[::1]&#34;</span><span class="op" id="8470631">,</span>&nbsp;<span class="ident" id="8470633">ipv4map</span><span class="op" id="8470640">:</span>&nbsp;<span class="builtintype" id="8470642">true</span><span class="op" id="8470646">}</span><span class="op" id="8470647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470650">{</span><span class="ident" id="8470651">snet</span><span class="op" id="8470655">:</span>&nbsp;<span class="string" id="8470657">&#34;tcp&#34;</span><span class="op" id="8470662">,</span>&nbsp;<span class="ident" id="8470664">saddr</span><span class="op" id="8470669">:</span>&nbsp;<span class="string" id="8470671">&#34;[::]&#34;</span><span class="op" id="8470677">,</span>&nbsp;<span class="ident" id="8470679">cnet</span><span class="op" id="8470683">:</span>&nbsp;<span class="string" id="8470685">&#34;tcp&#34;</span><span class="op" id="8470690">,</span>&nbsp;<span class="ident" id="8470692">caddr</span><span class="op" id="8470697">:</span>&nbsp;<span class="string" id="8470699">&#34;127.0.0.1&#34;</span><span class="op" id="8470710">,</span>&nbsp;<span class="ident" id="8470712">ipv4map</span><span class="op" id="8470719">:</span>&nbsp;<span class="builtintype" id="8470721">true</span><span class="op" id="8470725">}</span><span class="op" id="8470726">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470730">{</span><span class="ident" id="8470731">snet</span><span class="op" id="8470735">:</span>&nbsp;<span class="string" id="8470737">&#34;tcp&#34;</span><span class="op" id="8470742">,</span>&nbsp;<span class="ident" id="8470744">saddr</span><span class="op" id="8470749">:</span>&nbsp;<span class="string" id="8470751">&#34;&#34;</span><span class="op" id="8470753">,</span>&nbsp;<span class="ident" id="8470755">cnet</span><span class="op" id="8470759">:</span>&nbsp;<span class="string" id="8470761">&#34;tcp4&#34;</span><span class="op" id="8470767">,</span>&nbsp;<span class="ident" id="8470769">caddr</span><span class="op" id="8470774">:</span>&nbsp;<span class="string" id="8470776">&#34;127.0.0.1&#34;</span><span class="op" id="8470787">}</span><span class="op" id="8470788">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470791">{</span><span class="ident" id="8470792">snet</span><span class="op" id="8470796">:</span>&nbsp;<span class="string" id="8470798">&#34;tcp&#34;</span><span class="op" id="8470803">,</span>&nbsp;<span class="ident" id="8470805">saddr</span><span class="op" id="8470810">:</span>&nbsp;<span class="string" id="8470812">&#34;0.0.0.0&#34;</span><span class="op" id="8470821">,</span>&nbsp;<span class="ident" id="8470823">cnet</span><span class="op" id="8470827">:</span>&nbsp;<span class="string" id="8470829">&#34;tcp4&#34;</span><span class="op" id="8470835">,</span>&nbsp;<span class="ident" id="8470837">caddr</span><span class="op" id="8470842">:</span>&nbsp;<span class="string" id="8470844">&#34;127.0.0.1&#34;</span><span class="op" id="8470855">}</span><span class="op" id="8470856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470859">{</span><span class="ident" id="8470860">snet</span><span class="op" id="8470864">:</span>&nbsp;<span class="string" id="8470866">&#34;tcp&#34;</span><span class="op" id="8470871">,</span>&nbsp;<span class="ident" id="8470873">saddr</span><span class="op" id="8470878">:</span>&nbsp;<span class="string" id="8470880">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8470898">,</span>&nbsp;<span class="ident" id="8470900">cnet</span><span class="op" id="8470904">:</span>&nbsp;<span class="string" id="8470906">&#34;tcp4&#34;</span><span class="op" id="8470912">,</span>&nbsp;<span class="ident" id="8470914">caddr</span><span class="op" id="8470919">:</span>&nbsp;<span class="string" id="8470921">&#34;127.0.0.1&#34;</span><span class="op" id="8470932">}</span><span class="op" id="8470933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470936">{</span><span class="ident" id="8470937">snet</span><span class="op" id="8470941">:</span>&nbsp;<span class="string" id="8470943">&#34;tcp&#34;</span><span class="op" id="8470948">,</span>&nbsp;<span class="ident" id="8470950">saddr</span><span class="op" id="8470955">:</span>&nbsp;<span class="string" id="8470957">&#34;[::]&#34;</span><span class="op" id="8470963">,</span>&nbsp;<span class="ident" id="8470965">cnet</span><span class="op" id="8470969">:</span>&nbsp;<span class="string" id="8470971">&#34;tcp6&#34;</span><span class="op" id="8470977">,</span>&nbsp;<span class="ident" id="8470979">caddr</span><span class="op" id="8470984">:</span>&nbsp;<span class="string" id="8470986">&#34;[::1]&#34;</span><span class="op" id="8470993">,</span>&nbsp;<span class="ident" id="8470995">ipv6</span><span class="op" id="8470999">:</span>&nbsp;<span class="builtintype" id="8471001">true</span><span class="op" id="8471005">}</span><span class="op" id="8471006">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471010">{</span><span class="ident" id="8471011">snet</span><span class="op" id="8471015">:</span>&nbsp;<span class="string" id="8471017">&#34;tcp&#34;</span><span class="op" id="8471022">,</span>&nbsp;<span class="ident" id="8471024">saddr</span><span class="op" id="8471029">:</span>&nbsp;<span class="string" id="8471031">&#34;&#34;</span><span class="op" id="8471033">,</span>&nbsp;<span class="ident" id="8471035">cnet</span><span class="op" id="8471039">:</span>&nbsp;<span class="string" id="8471041">&#34;tcp6&#34;</span><span class="op" id="8471047">,</span>&nbsp;<span class="ident" id="8471049">caddr</span><span class="op" id="8471054">:</span>&nbsp;<span class="string" id="8471056">&#34;[::1]&#34;</span><span class="op" id="8471063">,</span>&nbsp;<span class="ident" id="8471065">ipv4map</span><span class="op" id="8471072">:</span>&nbsp;<span class="builtintype" id="8471074">true</span><span class="op" id="8471078">}</span><span class="op" id="8471079">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471082">{</span><span class="ident" id="8471083">snet</span><span class="op" id="8471087">:</span>&nbsp;<span class="string" id="8471089">&#34;tcp&#34;</span><span class="op" id="8471094">,</span>&nbsp;<span class="ident" id="8471096">saddr</span><span class="op" id="8471101">:</span>&nbsp;<span class="string" id="8471103">&#34;0.0.0.0&#34;</span><span class="op" id="8471112">,</span>&nbsp;<span class="ident" id="8471114">cnet</span><span class="op" id="8471118">:</span>&nbsp;<span class="string" id="8471120">&#34;tcp6&#34;</span><span class="op" id="8471126">,</span>&nbsp;<span class="ident" id="8471128">caddr</span><span class="op" id="8471133">:</span>&nbsp;<span class="string" id="8471135">&#34;[::1]&#34;</span><span class="op" id="8471142">,</span>&nbsp;<span class="ident" id="8471144">ipv4map</span><span class="op" id="8471151">:</span>&nbsp;<span class="builtintype" id="8471153">true</span><span class="op" id="8471157">}</span><span class="op" id="8471158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471161">{</span><span class="ident" id="8471162">snet</span><span class="op" id="8471166">:</span>&nbsp;<span class="string" id="8471168">&#34;tcp&#34;</span><span class="op" id="8471173">,</span>&nbsp;<span class="ident" id="8471175">saddr</span><span class="op" id="8471180">:</span>&nbsp;<span class="string" id="8471182">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8471200">,</span>&nbsp;<span class="ident" id="8471202">cnet</span><span class="op" id="8471206">:</span>&nbsp;<span class="string" id="8471208">&#34;tcp6&#34;</span><span class="op" id="8471214">,</span>&nbsp;<span class="ident" id="8471216">caddr</span><span class="op" id="8471221">:</span>&nbsp;<span class="string" id="8471223">&#34;[::1]&#34;</span><span class="op" id="8471230">,</span>&nbsp;<span class="ident" id="8471232">ipv4map</span><span class="op" id="8471239">:</span>&nbsp;<span class="builtintype" id="8471241">true</span><span class="op" id="8471245">}</span><span class="op" id="8471246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471249">{</span><span class="ident" id="8471250">snet</span><span class="op" id="8471254">:</span>&nbsp;<span class="string" id="8471256">&#34;tcp&#34;</span><span class="op" id="8471261">,</span>&nbsp;<span class="ident" id="8471263">saddr</span><span class="op" id="8471268">:</span>&nbsp;<span class="string" id="8471270">&#34;[::]&#34;</span><span class="op" id="8471276">,</span>&nbsp;<span class="ident" id="8471278">cnet</span><span class="op" id="8471282">:</span>&nbsp;<span class="string" id="8471284">&#34;tcp4&#34;</span><span class="op" id="8471290">,</span>&nbsp;<span class="ident" id="8471292">caddr</span><span class="op" id="8471297">:</span>&nbsp;<span class="string" id="8471299">&#34;127.0.0.1&#34;</span><span class="op" id="8471310">,</span>&nbsp;<span class="ident" id="8471312">ipv4map</span><span class="op" id="8471319">:</span>&nbsp;<span class="builtintype" id="8471321">true</span><span class="op" id="8471325">}</span><span class="op" id="8471326">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471330">{</span><span class="ident" id="8471331">snet</span><span class="op" id="8471335">:</span>&nbsp;<span class="string" id="8471337">&#34;tcp&#34;</span><span class="op" id="8471342">,</span>&nbsp;<span class="ident" id="8471344">saddr</span><span class="op" id="8471349">:</span>&nbsp;<span class="string" id="8471351">&#34;127.0.0.1&#34;</span><span class="op" id="8471362">,</span>&nbsp;<span class="ident" id="8471364">cnet</span><span class="op" id="8471368">:</span>&nbsp;<span class="string" id="8471370">&#34;tcp&#34;</span><span class="op" id="8471375">,</span>&nbsp;<span class="ident" id="8471377">caddr</span><span class="op" id="8471382">:</span>&nbsp;<span class="string" id="8471384">&#34;127.0.0.1&#34;</span><span class="op" id="8471395">}</span><span class="op" id="8471396">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471399">{</span><span class="ident" id="8471400">snet</span><span class="op" id="8471404">:</span>&nbsp;<span class="string" id="8471406">&#34;tcp&#34;</span><span class="op" id="8471411">,</span>&nbsp;<span class="ident" id="8471413">saddr</span><span class="op" id="8471418">:</span>&nbsp;<span class="string" id="8471420">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8471440">,</span>&nbsp;<span class="ident" id="8471442">cnet</span><span class="op" id="8471446">:</span>&nbsp;<span class="string" id="8471448">&#34;tcp&#34;</span><span class="op" id="8471453">,</span>&nbsp;<span class="ident" id="8471455">caddr</span><span class="op" id="8471460">:</span>&nbsp;<span class="string" id="8471462">&#34;127.0.0.1&#34;</span><span class="op" id="8471473">}</span><span class="op" id="8471474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471477">{</span><span class="ident" id="8471478">snet</span><span class="op" id="8471482">:</span>&nbsp;<span class="string" id="8471484">&#34;tcp&#34;</span><span class="op" id="8471489">,</span>&nbsp;<span class="ident" id="8471491">saddr</span><span class="op" id="8471496">:</span>&nbsp;<span class="string" id="8471498">&#34;[::1]&#34;</span><span class="op" id="8471505">,</span>&nbsp;<span class="ident" id="8471507">cnet</span><span class="op" id="8471511">:</span>&nbsp;<span class="string" id="8471513">&#34;tcp&#34;</span><span class="op" id="8471518">,</span>&nbsp;<span class="ident" id="8471520">caddr</span><span class="op" id="8471525">:</span>&nbsp;<span class="string" id="8471527">&#34;[::1]&#34;</span><span class="op" id="8471534">,</span>&nbsp;<span class="ident" id="8471536">ipv6</span><span class="op" id="8471540">:</span>&nbsp;<span class="builtintype" id="8471542">true</span><span class="op" id="8471546">}</span><span class="op" id="8471547">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471551">{</span><span class="ident" id="8471552">snet</span><span class="op" id="8471556">:</span>&nbsp;<span class="string" id="8471558">&#34;tcp4&#34;</span><span class="op" id="8471564">,</span>&nbsp;<span class="ident" id="8471566">saddr</span><span class="op" id="8471571">:</span>&nbsp;<span class="string" id="8471573">&#34;&#34;</span><span class="op" id="8471575">,</span>&nbsp;<span class="ident" id="8471577">cnet</span><span class="op" id="8471581">:</span>&nbsp;<span class="string" id="8471583">&#34;tcp4&#34;</span><span class="op" id="8471589">,</span>&nbsp;<span class="ident" id="8471591">caddr</span><span class="op" id="8471596">:</span>&nbsp;<span class="string" id="8471598">&#34;127.0.0.1&#34;</span><span class="op" id="8471609">}</span><span class="op" id="8471610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471613">{</span><span class="ident" id="8471614">snet</span><span class="op" id="8471618">:</span>&nbsp;<span class="string" id="8471620">&#34;tcp4&#34;</span><span class="op" id="8471626">,</span>&nbsp;<span class="ident" id="8471628">saddr</span><span class="op" id="8471633">:</span>&nbsp;<span class="string" id="8471635">&#34;0.0.0.0&#34;</span><span class="op" id="8471644">,</span>&nbsp;<span class="ident" id="8471646">cnet</span><span class="op" id="8471650">:</span>&nbsp;<span class="string" id="8471652">&#34;tcp4&#34;</span><span class="op" id="8471658">,</span>&nbsp;<span class="ident" id="8471660">caddr</span><span class="op" id="8471665">:</span>&nbsp;<span class="string" id="8471667">&#34;127.0.0.1&#34;</span><span class="op" id="8471678">}</span><span class="op" id="8471679">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471682">{</span><span class="ident" id="8471683">snet</span><span class="op" id="8471687">:</span>&nbsp;<span class="string" id="8471689">&#34;tcp4&#34;</span><span class="op" id="8471695">,</span>&nbsp;<span class="ident" id="8471697">saddr</span><span class="op" id="8471702">:</span>&nbsp;<span class="string" id="8471704">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8471722">,</span>&nbsp;<span class="ident" id="8471724">cnet</span><span class="op" id="8471728">:</span>&nbsp;<span class="string" id="8471730">&#34;tcp4&#34;</span><span class="op" id="8471736">,</span>&nbsp;<span class="ident" id="8471738">caddr</span><span class="op" id="8471743">:</span>&nbsp;<span class="string" id="8471745">&#34;127.0.0.1&#34;</span><span class="op" id="8471756">}</span><span class="op" id="8471757">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471761">{</span><span class="ident" id="8471762">snet</span><span class="op" id="8471766">:</span>&nbsp;<span class="string" id="8471768">&#34;tcp4&#34;</span><span class="op" id="8471774">,</span>&nbsp;<span class="ident" id="8471776">saddr</span><span class="op" id="8471781">:</span>&nbsp;<span class="string" id="8471783">&#34;127.0.0.1&#34;</span><span class="op" id="8471794">,</span>&nbsp;<span class="ident" id="8471796">cnet</span><span class="op" id="8471800">:</span>&nbsp;<span class="string" id="8471802">&#34;tcp4&#34;</span><span class="op" id="8471808">,</span>&nbsp;<span class="ident" id="8471810">caddr</span><span class="op" id="8471815">:</span>&nbsp;<span class="string" id="8471817">&#34;127.0.0.1&#34;</span><span class="op" id="8471828">}</span><span class="op" id="8471829">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471833">{</span><span class="ident" id="8471834">snet</span><span class="op" id="8471838">:</span>&nbsp;<span class="string" id="8471840">&#34;tcp6&#34;</span><span class="op" id="8471846">,</span>&nbsp;<span class="ident" id="8471848">saddr</span><span class="op" id="8471853">:</span>&nbsp;<span class="string" id="8471855">&#34;&#34;</span><span class="op" id="8471857">,</span>&nbsp;<span class="ident" id="8471859">cnet</span><span class="op" id="8471863">:</span>&nbsp;<span class="string" id="8471865">&#34;tcp6&#34;</span><span class="op" id="8471871">,</span>&nbsp;<span class="ident" id="8471873">caddr</span><span class="op" id="8471878">:</span>&nbsp;<span class="string" id="8471880">&#34;[::1]&#34;</span><span class="op" id="8471887">,</span>&nbsp;<span class="ident" id="8471889">ipv6</span><span class="op" id="8471893">:</span>&nbsp;<span class="builtintype" id="8471895">true</span><span class="op" id="8471899">}</span><span class="op" id="8471900">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471903">{</span><span class="ident" id="8471904">snet</span><span class="op" id="8471908">:</span>&nbsp;<span class="string" id="8471910">&#34;tcp6&#34;</span><span class="op" id="8471916">,</span>&nbsp;<span class="ident" id="8471918">saddr</span><span class="op" id="8471923">:</span>&nbsp;<span class="string" id="8471925">&#34;[::]&#34;</span><span class="op" id="8471931">,</span>&nbsp;<span class="ident" id="8471933">cnet</span><span class="op" id="8471937">:</span>&nbsp;<span class="string" id="8471939">&#34;tcp6&#34;</span><span class="op" id="8471945">,</span>&nbsp;<span class="ident" id="8471947">caddr</span><span class="op" id="8471952">:</span>&nbsp;<span class="string" id="8471954">&#34;[::1]&#34;</span><span class="op" id="8471961">,</span>&nbsp;<span class="ident" id="8471963">ipv6</span><span class="op" id="8471967">:</span>&nbsp;<span class="builtintype" id="8471969">true</span><span class="op" id="8471973">}</span><span class="op" id="8471974">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471978">{</span><span class="ident" id="8471979">snet</span><span class="op" id="8471983">:</span>&nbsp;<span class="string" id="8471985">&#34;tcp6&#34;</span><span class="op" id="8471991">,</span>&nbsp;<span class="ident" id="8471993">saddr</span><span class="op" id="8471998">:</span>&nbsp;<span class="string" id="8472000">&#34;[::1]&#34;</span><span class="op" id="8472007">,</span>&nbsp;<span class="ident" id="8472009">cnet</span><span class="op" id="8472013">:</span>&nbsp;<span class="string" id="8472015">&#34;tcp6&#34;</span><span class="op" id="8472021">,</span>&nbsp;<span class="ident" id="8472023">caddr</span><span class="op" id="8472028">:</span>&nbsp;<span class="string" id="8472030">&#34;[::1]&#34;</span><span class="op" id="8472037">,</span>&nbsp;<span class="ident" id="8472039">ipv6</span><span class="op" id="8472043">:</span>&nbsp;<span class="builtintype" id="8472045">true</span><span class="op" id="8472049">}</span><span class="op" id="8472050">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472054">{</span><span class="ident" id="8472055">snet</span><span class="op" id="8472059">:</span>&nbsp;<span class="string" id="8472061">&#34;unix&#34;</span><span class="op" id="8472067">,</span>&nbsp;<span class="ident" id="8472069">saddr</span><span class="op" id="8472074">:</span>&nbsp;<span class="ident" id="8472076">testUnixAddr</span><span class="op" id="8472088">(</span><span class="op" id="8472089">)</span><span class="op" id="8472090">,</span>&nbsp;<span class="ident" id="8472092">cnet</span><span class="op" id="8472096">:</span>&nbsp;<span class="string" id="8472098">&#34;unix&#34;</span><span class="op" id="8472104">,</span>&nbsp;<span class="ident" id="8472106">caddr</span><span class="op" id="8472111">:</span>&nbsp;<span class="ident" id="8472113">testUnixAddr</span><span class="op" id="8472125">(</span><span class="op" id="8472126">)</span><span class="op" id="8472127">}</span><span class="op" id="8472128">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472131">{</span><span class="ident" id="8472132">snet</span><span class="op" id="8472136">:</span>&nbsp;<span class="string" id="8472138">&#34;unix&#34;</span><span class="op" id="8472144">,</span>&nbsp;<span class="ident" id="8472146">saddr</span><span class="op" id="8472151">:</span>&nbsp;<span class="string" id="8472153">&#34;@gotest2/net&#34;</span><span class="op" id="8472167">,</span>&nbsp;<span class="ident" id="8472169">cnet</span><span class="op" id="8472173">:</span>&nbsp;<span class="string" id="8472175">&#34;unix&#34;</span><span class="op" id="8472181">,</span>&nbsp;<span class="ident" id="8472183">caddr</span><span class="op" id="8472188">:</span>&nbsp;<span class="string" id="8472190">&#34;@gotest2/net.local&#34;</span><span class="op" id="8472210">,</span>&nbsp;<span class="ident" id="8472212">linuxOnly</span><span class="op" id="8472221">:</span>&nbsp;<span class="builtintype" id="8472223">true</span><span class="op" id="8472227">}</span><span class="op" id="8472228">,</span><br>
<span class="lineno"></span><span class="op" id="8472230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8472233">func</span>&nbsp;<span class="ident" id="8472238">TestStreamConnServer</span><span class="op" id="8472258">(</span><span class="ident" id="8472259">t</span>&nbsp;<span class="op" id="8472261">*</span><span class="ident" id="8472262">testing</span><span class="op" id="8472269">.</span><span class="ident" id="8472270">T</span><span class="op" id="8472271">)</span>&nbsp;<span class="op" id="8472273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472276">for</span>&nbsp;<span class="ident" id="8472280">_</span><span class="op" id="8472281">,</span>&nbsp;<span class="ident" id="8472283">tt</span>&nbsp;<span class="op" id="8472286">:=</span>&nbsp;<span class="keyword" id="8472289">range</span>&nbsp;<span class="ident" id="8472295">streamConnServerTests</span>&nbsp;<span class="op" id="8472317">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472321">if</span>&nbsp;<span class="ident" id="8472324">skipServerTest</span><span class="op" id="8472338">(</span><span class="ident" id="8472339">tt</span><span class="op" id="8472341">.</span><span class="ident" id="8472342">snet</span><span class="op" id="8472346">,</span>&nbsp;<span class="string" id="8472348">&#34;unix&#34;</span><span class="op" id="8472354">,</span>&nbsp;<span class="ident" id="8472356">tt</span><span class="op" id="8472358">.</span><span class="ident" id="8472359">saddr</span><span class="op" id="8472364">,</span>&nbsp;<span class="ident" id="8472366">tt</span><span class="op" id="8472368">.</span><span class="ident" id="8472369">ipv6</span><span class="op" id="8472373">,</span>&nbsp;<span class="ident" id="8472375">tt</span><span class="op" id="8472377">.</span><span class="ident" id="8472378">ipv4map</span><span class="op" id="8472385">,</span>&nbsp;<span class="ident" id="8472387">tt</span><span class="op" id="8472389">.</span><span class="ident" id="8472390">linuxOnly</span><span class="op" id="8472399">)</span>&nbsp;<span class="op" id="8472401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472406">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472422">listening</span>&nbsp;<span class="op" id="8472432">:=</span>&nbsp;<span class="builtinfunc" id="8472435">make</span><span class="op" id="8472439">(</span><span class="keyword" id="8472440">chan</span>&nbsp;<span class="builtintype" id="8472445">string</span><span class="op" id="8472451">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472455">done</span>&nbsp;<span class="op" id="8472460">:=</span>&nbsp;<span class="builtinfunc" id="8472463">make</span><span class="op" id="8472467">(</span><span class="keyword" id="8472468">chan</span>&nbsp;<span class="builtintype" id="8472473">int</span><span class="op" id="8472476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472480">switch</span>&nbsp;<span class="ident" id="8472487">tt</span><span class="op" id="8472489">.</span><span class="ident" id="8472490">snet</span>&nbsp;<span class="op" id="8472495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472499">case</span>&nbsp;<span class="string" id="8472504">&#34;tcp&#34;</span><span class="op" id="8472509">,</span>&nbsp;<span class="string" id="8472511">&#34;tcp4&#34;</span><span class="op" id="8472517">,</span>&nbsp;<span class="string" id="8472519">&#34;tcp6&#34;</span><span class="op" id="8472525">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472530">tt</span><span class="op" id="8472532">.</span><span class="ident" id="8472533">saddr</span>&nbsp;<span class="op" id="8472539">+=</span>&nbsp;<span class="string" id="8472542">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472549">case</span>&nbsp;<span class="string" id="8472554">&#34;unix&#34;</span><span class="op" id="8472560">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472565">os</span><span class="op" id="8472567">.</span><span class="ident" id="8472568">Remove</span><span class="op" id="8472574">(</span><span class="ident" id="8472575">tt</span><span class="op" id="8472577">.</span><span class="ident" id="8472578">saddr</span><span class="op" id="8472583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472588">os</span><span class="op" id="8472590">.</span><span class="ident" id="8472591">Remove</span><span class="op" id="8472597">(</span><span class="ident" id="8472598">tt</span><span class="op" id="8472600">.</span><span class="ident" id="8472601">caddr</span><span class="op" id="8472606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472615">go</span>&nbsp;<span class="ident" id="8472618">runStreamConnServer</span><span class="op" id="8472637">(</span><span class="ident" id="8472638">t</span><span class="op" id="8472639">,</span>&nbsp;<span class="ident" id="8472641">tt</span><span class="op" id="8472643">.</span><span class="ident" id="8472644">snet</span><span class="op" id="8472648">,</span>&nbsp;<span class="ident" id="8472650">tt</span><span class="op" id="8472652">.</span><span class="ident" id="8472653">saddr</span><span class="op" id="8472658">,</span>&nbsp;<span class="ident" id="8472660">listening</span><span class="op" id="8472669">,</span>&nbsp;<span class="ident" id="8472671">done</span><span class="op" id="8472675">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472679">taddr</span>&nbsp;<span class="op" id="8472685">:=</span>&nbsp;<span class="op" id="8472688">&lt;-</span><span class="ident" id="8472690">listening</span>&nbsp;<span class="comment" id="8472700">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472731">switch</span>&nbsp;<span class="ident" id="8472738">tt</span><span class="op" id="8472740">.</span><span class="ident" id="8472741">cnet</span>&nbsp;<span class="op" id="8472746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472750">case</span>&nbsp;<span class="string" id="8472755">&#34;tcp&#34;</span><span class="op" id="8472760">,</span>&nbsp;<span class="string" id="8472762">&#34;tcp4&#34;</span><span class="op" id="8472768">,</span>&nbsp;<span class="string" id="8472770">&#34;tcp6&#34;</span><span class="op" id="8472776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472781">_</span><span class="op" id="8472782">,</span>&nbsp;<span class="ident" id="8472784">port</span><span class="op" id="8472788">,</span>&nbsp;<span class="ident" id="8472790">err</span>&nbsp;<span class="op" id="8472794">:=</span>&nbsp;<span class="ident" id="8472797">SplitHostPort</span><span class="op" id="8472810">(</span><span class="ident" id="8472811">taddr</span><span class="op" id="8472816">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472821">if</span>&nbsp;<span class="ident" id="8472824">err</span>&nbsp;<span class="op" id="8472828">!=</span>&nbsp;<span class="ident" id="8472831">nil</span>&nbsp;<span class="op" id="8472835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472841">t</span><span class="op" id="8472842">.</span><span class="ident" id="8472843">Fatalf</span><span class="op" id="8472849">(</span><span class="string" id="8472850">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8472880">,</span>&nbsp;<span class="ident" id="8472882">taddr</span><span class="op" id="8472887">,</span>&nbsp;<span class="ident" id="8472889">err</span><span class="op" id="8472892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472902">taddr</span>&nbsp;<span class="op" id="8472908">=</span>&nbsp;<span class="ident" id="8472910">tt</span><span class="op" id="8472912">.</span><span class="ident" id="8472913">caddr</span>&nbsp;<span class="op" id="8472919">+</span>&nbsp;<span class="string" id="8472921">&#34;:&#34;</span>&nbsp;<span class="op" id="8472925">+</span>&nbsp;<span class="ident" id="8472927">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472934">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472939">runStreamConnClient</span><span class="op" id="8472958">(</span><span class="ident" id="8472959">t</span><span class="op" id="8472960">,</span>&nbsp;<span class="ident" id="8472962">tt</span><span class="op" id="8472964">.</span><span class="ident" id="8472965">cnet</span><span class="op" id="8472969">,</span>&nbsp;<span class="ident" id="8472971">taddr</span><span class="op" id="8472976">,</span>&nbsp;<span class="ident" id="8472978">tt</span><span class="op" id="8472980">.</span><span class="ident" id="8472981">empty</span><span class="op" id="8472986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472990">&lt;-</span><span class="ident" id="8472992">done</span>&nbsp;<span class="comment" id="8472997">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473028">switch</span>&nbsp;<span class="ident" id="8473035">tt</span><span class="op" id="8473037">.</span><span class="ident" id="8473038">snet</span>&nbsp;<span class="op" id="8473043">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473047">case</span>&nbsp;<span class="string" id="8473052">&#34;unix&#34;</span><span class="op" id="8473058">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473063">os</span><span class="op" id="8473065">.</span><span class="ident" id="8473066">Remove</span><span class="op" id="8473072">(</span><span class="ident" id="8473073">tt</span><span class="op" id="8473075">.</span><span class="ident" id="8473076">saddr</span><span class="op" id="8473081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473086">os</span><span class="op" id="8473088">.</span><span class="ident" id="8473089">Remove</span><span class="op" id="8473095">(</span><span class="ident" id="8473096">tt</span><span class="op" id="8473098">.</span><span class="ident" id="8473099">caddr</span><span class="op" id="8473104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473111">}</span><br>
<span class="lineno">130</span><span class="op" id="8473113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8473116">var</span>&nbsp;<span class="ident" id="8473120">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8473145">=</span>&nbsp;<span class="op" id="8473147">[</span><span class="op" id="8473148">]</span><span class="keyword" id="8473149">struct</span>&nbsp;<span class="op" id="8473156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473159">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8473169">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473177">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8473187">string</span>&nbsp;<span class="comment" id="8473194">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473213">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8473223">string</span>&nbsp;<span class="comment" id="8473230">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473249">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8473259">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8473266">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473291">linuxOnly</span>&nbsp;<span class="builtintype" id="8473301">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8473308">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8473362">}</span><span class="op" id="8473363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473366">{</span><span class="ident" id="8473367">net</span><span class="op" id="8473370">:</span>&nbsp;<span class="string" id="8473372">&#34;unixpacket&#34;</span><span class="op" id="8473384">,</span>&nbsp;<span class="ident" id="8473386">saddr</span><span class="op" id="8473391">:</span>&nbsp;<span class="ident" id="8473393">testUnixAddr</span><span class="op" id="8473405">(</span><span class="op" id="8473406">)</span><span class="op" id="8473407">,</span>&nbsp;<span class="ident" id="8473409">caddr</span><span class="op" id="8473414">:</span>&nbsp;<span class="ident" id="8473416">testUnixAddr</span><span class="op" id="8473428">(</span><span class="op" id="8473429">)</span><span class="op" id="8473430">}</span><span class="op" id="8473431">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473434">{</span><span class="ident" id="8473435">net</span><span class="op" id="8473438">:</span>&nbsp;<span class="string" id="8473440">&#34;unixpacket&#34;</span><span class="op" id="8473452">,</span>&nbsp;<span class="ident" id="8473454">saddr</span><span class="op" id="8473459">:</span>&nbsp;<span class="string" id="8473461">&#34;@gotest4/net&#34;</span><span class="op" id="8473475">,</span>&nbsp;<span class="ident" id="8473477">caddr</span><span class="op" id="8473482">:</span>&nbsp;<span class="string" id="8473484">&#34;@gotest4/net.local&#34;</span><span class="op" id="8473504">,</span>&nbsp;<span class="ident" id="8473506">linuxOnly</span><span class="op" id="8473515">:</span>&nbsp;<span class="builtintype" id="8473517">true</span><span class="op" id="8473521">}</span><span class="op" id="8473522">,</span><br>
<span class="lineno"></span><span class="op" id="8473524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8473527">func</span>&nbsp;<span class="ident" id="8473532">TestSeqpacketConnServer</span><span class="op" id="8473555">(</span><span class="ident" id="8473556">t</span>&nbsp;<span class="op" id="8473558">*</span><span class="ident" id="8473559">testing</span><span class="op" id="8473566">.</span><span class="ident" id="8473567">T</span><span class="op" id="8473568">)</span>&nbsp;<span class="op" id="8473570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473573">switch</span>&nbsp;<span class="ident" id="8473580">runtime</span><span class="op" id="8473587">.</span><span class="ident" id="8473588">GOOS</span>&nbsp;<span class="op" id="8473593">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473596">case</span>&nbsp;<span class="string" id="8473601">&#34;darwin&#34;</span><span class="op" id="8473609">,</span>&nbsp;<span class="string" id="8473611">&#34;nacl&#34;</span><span class="op" id="8473617">,</span>&nbsp;<span class="string" id="8473619">&#34;openbsd&#34;</span><span class="op" id="8473628">,</span>&nbsp;<span class="string" id="8473630">&#34;plan9&#34;</span><span class="op" id="8473637">,</span>&nbsp;<span class="string" id="8473639">&#34;windows&#34;</span><span class="op" id="8473648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473652">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473665">case</span>&nbsp;<span class="string" id="8473670">&#34;freebsd&#34;</span><span class="op" id="8473679">:</span>&nbsp;<span class="comment" id="8473681">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473723">t</span><span class="op" id="8473724">.</span><span class="ident" id="8473725">Skipf</span><span class="op" id="8473730">(</span><span class="string" id="8473731">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8473752">,</span>&nbsp;<span class="ident" id="8473754">runtime</span><span class="op" id="8473761">.</span><span class="ident" id="8473762">GOOS</span><span class="op" id="8473766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473769">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473773">for</span>&nbsp;<span class="ident" id="8473777">_</span><span class="op" id="8473778">,</span>&nbsp;<span class="ident" id="8473780">tt</span>&nbsp;<span class="op" id="8473783">:=</span>&nbsp;<span class="keyword" id="8473786">range</span>&nbsp;<span class="ident" id="8473792">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8473817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473821">if</span>&nbsp;<span class="ident" id="8473824">runtime</span><span class="op" id="8473831">.</span><span class="ident" id="8473832">GOOS</span>&nbsp;<span class="op" id="8473837">!=</span>&nbsp;<span class="string" id="8473840">&#34;linux&#34;</span>&nbsp;<span class="op" id="8473848">&amp;&amp;</span>&nbsp;<span class="ident" id="8473851">tt</span><span class="op" id="8473853">.</span><span class="ident" id="8473854">linuxOnly</span>&nbsp;<span class="op" id="8473864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473869">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473880">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473884">listening</span>&nbsp;<span class="op" id="8473894">:=</span>&nbsp;<span class="builtinfunc" id="8473897">make</span><span class="op" id="8473901">(</span><span class="keyword" id="8473902">chan</span>&nbsp;<span class="builtintype" id="8473907">string</span><span class="op" id="8473913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473917">done</span>&nbsp;<span class="op" id="8473922">:=</span>&nbsp;<span class="builtinfunc" id="8473925">make</span><span class="op" id="8473929">(</span><span class="keyword" id="8473930">chan</span>&nbsp;<span class="builtintype" id="8473935">int</span><span class="op" id="8473938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473942">switch</span>&nbsp;<span class="ident" id="8473949">tt</span><span class="op" id="8473951">.</span><span class="ident" id="8473952">net</span>&nbsp;<span class="op" id="8473956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473960">case</span>&nbsp;<span class="string" id="8473965">&#34;unixpacket&#34;</span><span class="op" id="8473977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473982">os</span><span class="op" id="8473984">.</span><span class="ident" id="8473985">Remove</span><span class="op" id="8473991">(</span><span class="ident" id="8473992">tt</span><span class="op" id="8473994">.</span><span class="ident" id="8473995">saddr</span><span class="op" id="8474000">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474005">os</span><span class="op" id="8474007">.</span><span class="ident" id="8474008">Remove</span><span class="op" id="8474014">(</span><span class="ident" id="8474015">tt</span><span class="op" id="8474017">.</span><span class="ident" id="8474018">caddr</span><span class="op" id="8474023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474032">go</span>&nbsp;<span class="ident" id="8474035">runStreamConnServer</span><span class="op" id="8474054">(</span><span class="ident" id="8474055">t</span><span class="op" id="8474056">,</span>&nbsp;<span class="ident" id="8474058">tt</span><span class="op" id="8474060">.</span><span class="ident" id="8474061">net</span><span class="op" id="8474064">,</span>&nbsp;<span class="ident" id="8474066">tt</span><span class="op" id="8474068">.</span><span class="ident" id="8474069">saddr</span><span class="op" id="8474074">,</span>&nbsp;<span class="ident" id="8474076">listening</span><span class="op" id="8474085">,</span>&nbsp;<span class="ident" id="8474087">done</span><span class="op" id="8474091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474095">taddr</span>&nbsp;<span class="op" id="8474101">:=</span>&nbsp;<span class="op" id="8474104">&lt;-</span><span class="ident" id="8474106">listening</span>&nbsp;<span class="comment" id="8474116">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474147">runStreamConnClient</span><span class="op" id="8474166">(</span><span class="ident" id="8474167">t</span><span class="op" id="8474168">,</span>&nbsp;<span class="ident" id="8474170">tt</span><span class="op" id="8474172">.</span><span class="ident" id="8474173">net</span><span class="op" id="8474176">,</span>&nbsp;<span class="ident" id="8474178">taddr</span><span class="op" id="8474183">,</span>&nbsp;<span class="ident" id="8474185">tt</span><span class="op" id="8474187">.</span><span class="ident" id="8474188">empty</span><span class="op" id="8474193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474197">&lt;-</span><span class="ident" id="8474199">done</span>&nbsp;<span class="comment" id="8474204">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474235">switch</span>&nbsp;<span class="ident" id="8474242">tt</span><span class="op" id="8474244">.</span><span class="ident" id="8474245">net</span>&nbsp;<span class="op" id="8474249">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474253">case</span>&nbsp;<span class="string" id="8474258">&#34;unixpacket&#34;</span><span class="op" id="8474270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474275">os</span><span class="op" id="8474277">.</span><span class="ident" id="8474278">Remove</span><span class="op" id="8474284">(</span><span class="ident" id="8474285">tt</span><span class="op" id="8474287">.</span><span class="ident" id="8474288">saddr</span><span class="op" id="8474293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474298">os</span><span class="op" id="8474300">.</span><span class="ident" id="8474301">Remove</span><span class="op" id="8474307">(</span><span class="ident" id="8474308">tt</span><span class="op" id="8474310">.</span><span class="ident" id="8474311">caddr</span><span class="op" id="8474316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474323">}</span><br>
<span class="lineno">175</span><span class="op" id="8474325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8474328">func</span>&nbsp;<span class="ident" id="8474333">runStreamConnServer</span><span class="op" id="8474352">(</span><span class="ident" id="8474353">t</span>&nbsp;<span class="op" id="8474355">*</span><span class="ident" id="8474356">testing</span><span class="op" id="8474363">.</span><span class="ident" id="8474364">T</span><span class="op" id="8474365">,</span>&nbsp;<span class="ident" id="8474367">net</span><span class="op" id="8474370">,</span>&nbsp;<span class="ident" id="8474372">laddr</span>&nbsp;<span class="builtintype" id="8474378">string</span><span class="op" id="8474384">,</span>&nbsp;<span class="ident" id="8474386">listening</span>&nbsp;<span class="keyword" id="8474396">chan</span><span class="op" id="8474400">&lt;-</span>&nbsp;<span class="builtintype" id="8474403">string</span><span class="op" id="8474409">,</span>&nbsp;<span class="ident" id="8474411">done</span>&nbsp;<span class="keyword" id="8474416">chan</span><span class="op" id="8474420">&lt;-</span>&nbsp;<span class="builtintype" id="8474423">int</span><span class="op" id="8474426">)</span>&nbsp;<span class="op" id="8474428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474431">defer</span>&nbsp;<span class="builtinfunc" id="8474437">close</span><span class="op" id="8474442">(</span><span class="ident" id="8474443">done</span><span class="op" id="8474447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474450">l</span><span class="op" id="8474451">,</span>&nbsp;<span class="ident" id="8474453">err</span>&nbsp;<span class="op" id="8474457">:=</span>&nbsp;<span class="ident" id="8474460">Listen</span><span class="op" id="8474466">(</span><span class="ident" id="8474467">net</span><span class="op" id="8474470">,</span>&nbsp;<span class="ident" id="8474472">laddr</span><span class="op" id="8474477">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474480">if</span>&nbsp;<span class="ident" id="8474483">err</span>&nbsp;<span class="op" id="8474487">!=</span>&nbsp;<span class="ident" id="8474490">nil</span>&nbsp;<span class="op" id="8474494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474498">t</span><span class="op" id="8474499">.</span><span class="ident" id="8474500">Errorf</span><span class="op" id="8474506">(</span><span class="string" id="8474507">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8474534">,</span>&nbsp;<span class="ident" id="8474536">net</span><span class="op" id="8474539">,</span>&nbsp;<span class="ident" id="8474541">laddr</span><span class="op" id="8474546">,</span>&nbsp;<span class="ident" id="8474548">err</span><span class="op" id="8474551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474555">listening</span>&nbsp;<span class="op" id="8474565">&lt;-</span>&nbsp;<span class="string" id="8474568">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474578">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474586">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474589">defer</span>&nbsp;<span class="ident" id="8474595">l</span><span class="op" id="8474596">.</span><span class="ident" id="8474597">Close</span><span class="op" id="8474602">(</span><span class="op" id="8474603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474606">listening</span>&nbsp;<span class="op" id="8474616">&lt;-</span>&nbsp;<span class="ident" id="8474619">l</span><span class="op" id="8474620">.</span><span class="ident" id="8474621">Addr</span><span class="op" id="8474625">(</span><span class="op" id="8474626">)</span><span class="op" id="8474627">.</span><span class="ident" id="8474628">String</span><span class="op" id="8474634">(</span><span class="op" id="8474635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474639">echo</span>&nbsp;<span class="op" id="8474644">:=</span>&nbsp;<span class="keyword" id="8474647">func</span><span class="op" id="8474651">(</span><span class="ident" id="8474652">rw</span>&nbsp;<span class="ident" id="8474655">io</span><span class="op" id="8474657">.</span><span class="ident" id="8474658">ReadWriter</span><span class="op" id="8474668">,</span>&nbsp;<span class="ident" id="8474670">done</span>&nbsp;<span class="keyword" id="8474675">chan</span><span class="op" id="8474679">&lt;-</span>&nbsp;<span class="builtintype" id="8474682">int</span><span class="op" id="8474685">)</span>&nbsp;<span class="op" id="8474687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474691">buf</span>&nbsp;<span class="op" id="8474695">:=</span>&nbsp;<span class="builtinfunc" id="8474698">make</span><span class="op" id="8474702">(</span><span class="op" id="8474703">[</span><span class="op" id="8474704">]</span><span class="builtintype" id="8474705">byte</span><span class="op" id="8474709">,</span>&nbsp;<span class="num" id="8474711">1024</span><span class="op" id="8474715">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474719">for</span>&nbsp;<span class="op" id="8474723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474728">n</span><span class="op" id="8474729">,</span>&nbsp;<span class="ident" id="8474731">err</span>&nbsp;<span class="op" id="8474735">:=</span>&nbsp;<span class="ident" id="8474738">rw</span><span class="op" id="8474740">.</span><span class="ident" id="8474741">Read</span><span class="op" id="8474745">(</span><span class="ident" id="8474746">buf</span><span class="op" id="8474749">[</span><span class="num" id="8474750">0</span><span class="op" id="8474751">:</span><span class="op" id="8474752">]</span><span class="op" id="8474753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474758">if</span>&nbsp;<span class="ident" id="8474761">err</span>&nbsp;<span class="op" id="8474765">!=</span>&nbsp;<span class="ident" id="8474768">nil</span>&nbsp;<span class="op" id="8474772">||</span>&nbsp;<span class="ident" id="8474775">n</span>&nbsp;<span class="op" id="8474777">==</span>&nbsp;<span class="num" id="8474780">0</span>&nbsp;<span class="op" id="8474782">||</span>&nbsp;<span class="builtintype" id="8474785">string</span><span class="op" id="8474791">(</span><span class="ident" id="8474792">buf</span><span class="op" id="8474795">[</span><span class="op" id="8474796">:</span><span class="ident" id="8474797">n</span><span class="op" id="8474798">]</span><span class="op" id="8474799">)</span>&nbsp;<span class="op" id="8474801">==</span>&nbsp;<span class="string" id="8474804">&#34;END&#34;</span>&nbsp;<span class="op" id="8474810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474816">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474825">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474830">rw</span><span class="op" id="8474832">.</span><span class="ident" id="8474833">Write</span><span class="op" id="8474838">(</span><span class="ident" id="8474839">buf</span><span class="op" id="8474842">[</span><span class="num" id="8474843">0</span><span class="op" id="8474844">:</span><span class="ident" id="8474845">n</span><span class="op" id="8474846">]</span><span class="op" id="8474847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8474855">close</span><span class="op" id="8474860">(</span><span class="ident" id="8474861">done</span><span class="op" id="8474865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="8474871">run</span><span class="op" id="8474874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474877">for</span>&nbsp;<span class="op" id="8474881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474885">c</span><span class="op" id="8474886">,</span>&nbsp;<span class="ident" id="8474888">err</span>&nbsp;<span class="op" id="8474892">:=</span>&nbsp;<span class="ident" id="8474895">l</span><span class="op" id="8474896">.</span><span class="ident" id="8474897">Accept</span><span class="op" id="8474903">(</span><span class="op" id="8474904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474908">if</span>&nbsp;<span class="ident" id="8474911">err</span>&nbsp;<span class="op" id="8474915">!=</span>&nbsp;<span class="ident" id="8474918">nil</span>&nbsp;<span class="op" id="8474922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474927">t</span><span class="op" id="8474928">.</span><span class="ident" id="8474929">Logf</span><span class="op" id="8474933">(</span><span class="string" id="8474934">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8474953">,</span>&nbsp;<span class="ident" id="8474955">err</span><span class="op" id="8474958">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474963">continue</span>&nbsp;<span class="ident" id="8474972">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474982">echodone</span>&nbsp;<span class="op" id="8474991">:=</span>&nbsp;<span class="builtinfunc" id="8474994">make</span><span class="op" id="8474998">(</span><span class="keyword" id="8474999">chan</span>&nbsp;<span class="builtintype" id="8475004">int</span><span class="op" id="8475007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475011">go</span>&nbsp;<span class="ident" id="8475014">echo</span><span class="op" id="8475018">(</span><span class="ident" id="8475019">c</span><span class="op" id="8475020">,</span>&nbsp;<span class="ident" id="8475022">echodone</span><span class="op" id="8475030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475034">&lt;-</span><span class="ident" id="8475036">echodone</span>&nbsp;<span class="comment" id="8475045">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475073">c</span><span class="op" id="8475074">.</span><span class="ident" id="8475075">Close</span><span class="op" id="8475080">(</span><span class="op" id="8475081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475085">break</span>&nbsp;<span class="ident" id="8475091">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475096">}</span><br>
<span class="lineno"></span><span class="op" id="8475098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8475101">func</span>&nbsp;<span class="ident" id="8475106">runStreamConnClient</span><span class="op" id="8475125">(</span><span class="ident" id="8475126">t</span>&nbsp;<span class="op" id="8475128">*</span><span class="ident" id="8475129">testing</span><span class="op" id="8475136">.</span><span class="ident" id="8475137">T</span><span class="op" id="8475138">,</span>&nbsp;<span class="ident" id="8475140">net</span><span class="op" id="8475143">,</span>&nbsp;<span class="ident" id="8475145">taddr</span>&nbsp;<span class="builtintype" id="8475151">string</span><span class="op" id="8475157">,</span>&nbsp;<span class="ident" id="8475159">isEmpty</span>&nbsp;<span class="builtintype" id="8475167">bool</span><span class="op" id="8475171">)</span>&nbsp;<span class="op" id="8475173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475176">c</span><span class="op" id="8475177">,</span>&nbsp;<span class="ident" id="8475179">err</span>&nbsp;<span class="op" id="8475183">:=</span>&nbsp;<span class="ident" id="8475186">Dial</span><span class="op" id="8475190">(</span><span class="ident" id="8475191">net</span><span class="op" id="8475194">,</span>&nbsp;<span class="ident" id="8475196">taddr</span><span class="op" id="8475201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475204">if</span>&nbsp;<span class="ident" id="8475207">err</span>&nbsp;<span class="op" id="8475211">!=</span>&nbsp;<span class="ident" id="8475214">nil</span>&nbsp;<span class="op" id="8475218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475222">t</span><span class="op" id="8475223">.</span><span class="ident" id="8475224">Fatalf</span><span class="op" id="8475230">(</span><span class="string" id="8475231">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8475256">,</span>&nbsp;<span class="ident" id="8475258">net</span><span class="op" id="8475261">,</span>&nbsp;<span class="ident" id="8475263">taddr</span><span class="op" id="8475268">,</span>&nbsp;<span class="ident" id="8475270">err</span><span class="op" id="8475273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475276">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475279">defer</span>&nbsp;<span class="ident" id="8475285">c</span><span class="op" id="8475286">.</span><span class="ident" id="8475287">Close</span><span class="op" id="8475292">(</span><span class="op" id="8475293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475296">c</span><span class="op" id="8475297">.</span><span class="ident" id="8475298">SetReadDeadline</span><span class="op" id="8475313">(</span><span class="ident" id="8475314">time</span><span class="op" id="8475318">.</span><span class="ident" id="8475319">Now</span><span class="op" id="8475322">(</span><span class="op" id="8475323">)</span><span class="op" id="8475324">.</span><span class="ident" id="8475325">Add</span><span class="op" id="8475328">(</span><span class="num" id="8475329">1</span>&nbsp;<span class="op" id="8475331">*</span>&nbsp;<span class="ident" id="8475333">time</span><span class="op" id="8475337">.</span><span class="ident" id="8475338">Second</span><span class="op" id="8475344">)</span><span class="op" id="8475345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475349">var</span>&nbsp;<span class="ident" id="8475353">wb</span>&nbsp;<span class="op" id="8475356">[</span><span class="op" id="8475357">]</span><span class="builtintype" id="8475358">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475364">if</span>&nbsp;<span class="op" id="8475367">!</span><span class="ident" id="8475368">isEmpty</span>&nbsp;<span class="op" id="8475376">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475380">wb</span>&nbsp;<span class="op" id="8475383">=</span>&nbsp;<span class="op" id="8475385">[</span><span class="op" id="8475386">]</span><span class="builtintype" id="8475387">byte</span><span class="op" id="8475391">(</span><span class="string" id="8475392">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8475420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475426">if</span>&nbsp;<span class="ident" id="8475429">n</span><span class="op" id="8475430">,</span>&nbsp;<span class="ident" id="8475432">err</span>&nbsp;<span class="op" id="8475436">:=</span>&nbsp;<span class="ident" id="8475439">c</span><span class="op" id="8475440">.</span><span class="ident" id="8475441">Write</span><span class="op" id="8475446">(</span><span class="ident" id="8475447">wb</span><span class="op" id="8475449">)</span><span class="op" id="8475450">;</span>&nbsp;<span class="ident" id="8475452">err</span>&nbsp;<span class="op" id="8475456">!=</span>&nbsp;<span class="ident" id="8475459">nil</span>&nbsp;<span class="op" id="8475463">||</span>&nbsp;<span class="ident" id="8475466">n</span>&nbsp;<span class="op" id="8475468">!=</span>&nbsp;<span class="builtinfunc" id="8475471">len</span><span class="op" id="8475474">(</span><span class="ident" id="8475475">wb</span><span class="op" id="8475477">)</span>&nbsp;<span class="op" id="8475479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475483">t</span><span class="op" id="8475484">.</span><span class="ident" id="8475485">Fatalf</span><span class="op" id="8475491">(</span><span class="string" id="8475492">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8475530">,</span>&nbsp;<span class="ident" id="8475532">n</span><span class="op" id="8475533">,</span>&nbsp;<span class="ident" id="8475535">err</span><span class="op" id="8475538">,</span>&nbsp;<span class="builtinfunc" id="8475540">len</span><span class="op" id="8475543">(</span><span class="ident" id="8475544">wb</span><span class="op" id="8475546">)</span><span class="op" id="8475547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475550">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475554">rb</span>&nbsp;<span class="op" id="8475557">:=</span>&nbsp;<span class="builtinfunc" id="8475560">make</span><span class="op" id="8475564">(</span><span class="op" id="8475565">[</span><span class="op" id="8475566">]</span><span class="builtintype" id="8475567">byte</span><span class="op" id="8475571">,</span>&nbsp;<span class="num" id="8475573">1024</span><span class="op" id="8475577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475580">if</span>&nbsp;<span class="ident" id="8475583">n</span><span class="op" id="8475584">,</span>&nbsp;<span class="ident" id="8475586">err</span>&nbsp;<span class="op" id="8475590">:=</span>&nbsp;<span class="ident" id="8475593">c</span><span class="op" id="8475594">.</span><span class="ident" id="8475595">Read</span><span class="op" id="8475599">(</span><span class="ident" id="8475600">rb</span><span class="op" id="8475602">[</span><span class="num" id="8475603">0</span><span class="op" id="8475604">:</span><span class="op" id="8475605">]</span><span class="op" id="8475606">)</span><span class="op" id="8475607">;</span>&nbsp;<span class="ident" id="8475609">err</span>&nbsp;<span class="op" id="8475613">!=</span>&nbsp;<span class="ident" id="8475616">nil</span>&nbsp;<span class="op" id="8475620">||</span>&nbsp;<span class="ident" id="8475623">n</span>&nbsp;<span class="op" id="8475625">!=</span>&nbsp;<span class="builtinfunc" id="8475628">len</span><span class="op" id="8475631">(</span><span class="ident" id="8475632">wb</span><span class="op" id="8475634">)</span>&nbsp;<span class="op" id="8475636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475640">t</span><span class="op" id="8475641">.</span><span class="ident" id="8475642">Fatalf</span><span class="op" id="8475648">(</span><span class="string" id="8475649">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8475686">,</span>&nbsp;<span class="ident" id="8475688">n</span><span class="op" id="8475689">,</span>&nbsp;<span class="ident" id="8475691">err</span><span class="op" id="8475694">,</span>&nbsp;<span class="builtinfunc" id="8475696">len</span><span class="op" id="8475699">(</span><span class="ident" id="8475700">wb</span><span class="op" id="8475702">)</span><span class="op" id="8475703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475706">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475710">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475751">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475803">switch</span>&nbsp;<span class="ident" id="8475810">net</span>&nbsp;<span class="op" id="8475814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475817">case</span>&nbsp;<span class="string" id="8475822">&#34;unixpacket&#34;</span><span class="op" id="8475834">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475838">c</span><span class="op" id="8475839">.</span><span class="ident" id="8475840">Write</span><span class="op" id="8475845">(</span><span class="op" id="8475846">[</span><span class="op" id="8475847">]</span><span class="builtintype" id="8475848">byte</span><span class="op" id="8475852">(</span><span class="string" id="8475853">&#34;END&#34;</span><span class="op" id="8475858">)</span><span class="op" id="8475859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475862">}</span><br>
<span class="lineno"></span><span class="op" id="8475864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8475867">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="8475910">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="8475961">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="8476013">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="8476043">var</span>&nbsp;<span class="ident" id="8476047">testDatagram</span>&nbsp;<span class="op" id="8476060">=</span>&nbsp;<span class="ident" id="8476062">flag</span><span class="op" id="8476066">.</span><span class="ident" id="8476067">Bool</span><span class="op" id="8476071">(</span><span class="string" id="8476072">&#34;datagram&#34;</span><span class="op" id="8476082">,</span>&nbsp;<span class="builtintype" id="8476084">false</span><span class="op" id="8476089">,</span>&nbsp;<span class="string" id="8476091">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="8476125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8476128">var</span>&nbsp;<span class="ident" id="8476132">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8476162">=</span>&nbsp;<span class="op" id="8476164">[</span><span class="op" id="8476165">]</span><span class="keyword" id="8476166">struct</span>&nbsp;<span class="op" id="8476173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476176">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476186">string</span>&nbsp;<span class="comment" id="8476193">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476209">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476219">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476227">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476237">string</span>&nbsp;<span class="comment" id="8476244">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476260">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476270">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476278">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476288">bool</span>&nbsp;<span class="comment" id="8476293">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476334">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476344">bool</span>&nbsp;<span class="comment" id="8476349">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476395">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476405">bool</span>&nbsp;<span class="comment" id="8476410">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476441">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8476451">bool</span>&nbsp;<span class="comment" id="8476456">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476481">linuxOnly</span>&nbsp;<span class="builtintype" id="8476491">bool</span>&nbsp;<span class="comment" id="8476496">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="8476550">}</span><span class="op" id="8476551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476554">{</span><span class="ident" id="8476555">snet</span><span class="op" id="8476559">:</span>&nbsp;<span class="string" id="8476561">&#34;udp&#34;</span><span class="op" id="8476566">,</span>&nbsp;<span class="ident" id="8476568">saddr</span><span class="op" id="8476573">:</span>&nbsp;<span class="string" id="8476575">&#34;&#34;</span><span class="op" id="8476577">,</span>&nbsp;<span class="ident" id="8476579">cnet</span><span class="op" id="8476583">:</span>&nbsp;<span class="string" id="8476585">&#34;udp&#34;</span><span class="op" id="8476590">,</span>&nbsp;<span class="ident" id="8476592">caddr</span><span class="op" id="8476597">:</span>&nbsp;<span class="string" id="8476599">&#34;127.0.0.1&#34;</span><span class="op" id="8476610">}</span><span class="op" id="8476611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476614">{</span><span class="ident" id="8476615">snet</span><span class="op" id="8476619">:</span>&nbsp;<span class="string" id="8476621">&#34;udp&#34;</span><span class="op" id="8476626">,</span>&nbsp;<span class="ident" id="8476628">saddr</span><span class="op" id="8476633">:</span>&nbsp;<span class="string" id="8476635">&#34;0.0.0.0&#34;</span><span class="op" id="8476644">,</span>&nbsp;<span class="ident" id="8476646">cnet</span><span class="op" id="8476650">:</span>&nbsp;<span class="string" id="8476652">&#34;udp&#34;</span><span class="op" id="8476657">,</span>&nbsp;<span class="ident" id="8476659">caddr</span><span class="op" id="8476664">:</span>&nbsp;<span class="string" id="8476666">&#34;127.0.0.1&#34;</span><span class="op" id="8476677">}</span><span class="op" id="8476678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476681">{</span><span class="ident" id="8476682">snet</span><span class="op" id="8476686">:</span>&nbsp;<span class="string" id="8476688">&#34;udp&#34;</span><span class="op" id="8476693">,</span>&nbsp;<span class="ident" id="8476695">saddr</span><span class="op" id="8476700">:</span>&nbsp;<span class="string" id="8476702">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8476720">,</span>&nbsp;<span class="ident" id="8476722">cnet</span><span class="op" id="8476726">:</span>&nbsp;<span class="string" id="8476728">&#34;udp&#34;</span><span class="op" id="8476733">,</span>&nbsp;<span class="ident" id="8476735">caddr</span><span class="op" id="8476740">:</span>&nbsp;<span class="string" id="8476742">&#34;127.0.0.1&#34;</span><span class="op" id="8476753">}</span><span class="op" id="8476754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476757">{</span><span class="ident" id="8476758">snet</span><span class="op" id="8476762">:</span>&nbsp;<span class="string" id="8476764">&#34;udp&#34;</span><span class="op" id="8476769">,</span>&nbsp;<span class="ident" id="8476771">saddr</span><span class="op" id="8476776">:</span>&nbsp;<span class="string" id="8476778">&#34;[::]&#34;</span><span class="op" id="8476784">,</span>&nbsp;<span class="ident" id="8476786">cnet</span><span class="op" id="8476790">:</span>&nbsp;<span class="string" id="8476792">&#34;udp&#34;</span><span class="op" id="8476797">,</span>&nbsp;<span class="ident" id="8476799">caddr</span><span class="op" id="8476804">:</span>&nbsp;<span class="string" id="8476806">&#34;[::1]&#34;</span><span class="op" id="8476813">,</span>&nbsp;<span class="ident" id="8476815">ipv6</span><span class="op" id="8476819">:</span>&nbsp;<span class="builtintype" id="8476821">true</span><span class="op" id="8476825">}</span><span class="op" id="8476826">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476830">{</span><span class="ident" id="8476831">snet</span><span class="op" id="8476835">:</span>&nbsp;<span class="string" id="8476837">&#34;udp&#34;</span><span class="op" id="8476842">,</span>&nbsp;<span class="ident" id="8476844">saddr</span><span class="op" id="8476849">:</span>&nbsp;<span class="string" id="8476851">&#34;&#34;</span><span class="op" id="8476853">,</span>&nbsp;<span class="ident" id="8476855">cnet</span><span class="op" id="8476859">:</span>&nbsp;<span class="string" id="8476861">&#34;udp&#34;</span><span class="op" id="8476866">,</span>&nbsp;<span class="ident" id="8476868">caddr</span><span class="op" id="8476873">:</span>&nbsp;<span class="string" id="8476875">&#34;[::1]&#34;</span><span class="op" id="8476882">,</span>&nbsp;<span class="ident" id="8476884">ipv4map</span><span class="op" id="8476891">:</span>&nbsp;<span class="builtintype" id="8476893">true</span><span class="op" id="8476897">}</span><span class="op" id="8476898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476901">{</span><span class="ident" id="8476902">snet</span><span class="op" id="8476906">:</span>&nbsp;<span class="string" id="8476908">&#34;udp&#34;</span><span class="op" id="8476913">,</span>&nbsp;<span class="ident" id="8476915">saddr</span><span class="op" id="8476920">:</span>&nbsp;<span class="string" id="8476922">&#34;0.0.0.0&#34;</span><span class="op" id="8476931">,</span>&nbsp;<span class="ident" id="8476933">cnet</span><span class="op" id="8476937">:</span>&nbsp;<span class="string" id="8476939">&#34;udp&#34;</span><span class="op" id="8476944">,</span>&nbsp;<span class="ident" id="8476946">caddr</span><span class="op" id="8476951">:</span>&nbsp;<span class="string" id="8476953">&#34;[::1]&#34;</span><span class="op" id="8476960">,</span>&nbsp;<span class="ident" id="8476962">ipv4map</span><span class="op" id="8476969">:</span>&nbsp;<span class="builtintype" id="8476971">true</span><span class="op" id="8476975">}</span><span class="op" id="8476976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476979">{</span><span class="ident" id="8476980">snet</span><span class="op" id="8476984">:</span>&nbsp;<span class="string" id="8476986">&#34;udp&#34;</span><span class="op" id="8476991">,</span>&nbsp;<span class="ident" id="8476993">saddr</span><span class="op" id="8476998">:</span>&nbsp;<span class="string" id="8477000">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8477018">,</span>&nbsp;<span class="ident" id="8477020">cnet</span><span class="op" id="8477024">:</span>&nbsp;<span class="string" id="8477026">&#34;udp&#34;</span><span class="op" id="8477031">,</span>&nbsp;<span class="ident" id="8477033">caddr</span><span class="op" id="8477038">:</span>&nbsp;<span class="string" id="8477040">&#34;[::1]&#34;</span><span class="op" id="8477047">,</span>&nbsp;<span class="ident" id="8477049">ipv4map</span><span class="op" id="8477056">:</span>&nbsp;<span class="builtintype" id="8477058">true</span><span class="op" id="8477062">}</span><span class="op" id="8477063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477066">{</span><span class="ident" id="8477067">snet</span><span class="op" id="8477071">:</span>&nbsp;<span class="string" id="8477073">&#34;udp&#34;</span><span class="op" id="8477078">,</span>&nbsp;<span class="ident" id="8477080">saddr</span><span class="op" id="8477085">:</span>&nbsp;<span class="string" id="8477087">&#34;[::]&#34;</span><span class="op" id="8477093">,</span>&nbsp;<span class="ident" id="8477095">cnet</span><span class="op" id="8477099">:</span>&nbsp;<span class="string" id="8477101">&#34;udp&#34;</span><span class="op" id="8477106">,</span>&nbsp;<span class="ident" id="8477108">caddr</span><span class="op" id="8477113">:</span>&nbsp;<span class="string" id="8477115">&#34;127.0.0.1&#34;</span><span class="op" id="8477126">,</span>&nbsp;<span class="ident" id="8477128">ipv4map</span><span class="op" id="8477135">:</span>&nbsp;<span class="builtintype" id="8477137">true</span><span class="op" id="8477141">}</span><span class="op" id="8477142">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477146">{</span><span class="ident" id="8477147">snet</span><span class="op" id="8477151">:</span>&nbsp;<span class="string" id="8477153">&#34;udp&#34;</span><span class="op" id="8477158">,</span>&nbsp;<span class="ident" id="8477160">saddr</span><span class="op" id="8477165">:</span>&nbsp;<span class="string" id="8477167">&#34;&#34;</span><span class="op" id="8477169">,</span>&nbsp;<span class="ident" id="8477171">cnet</span><span class="op" id="8477175">:</span>&nbsp;<span class="string" id="8477177">&#34;udp4&#34;</span><span class="op" id="8477183">,</span>&nbsp;<span class="ident" id="8477185">caddr</span><span class="op" id="8477190">:</span>&nbsp;<span class="string" id="8477192">&#34;127.0.0.1&#34;</span><span class="op" id="8477203">}</span><span class="op" id="8477204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477207">{</span><span class="ident" id="8477208">snet</span><span class="op" id="8477212">:</span>&nbsp;<span class="string" id="8477214">&#34;udp&#34;</span><span class="op" id="8477219">,</span>&nbsp;<span class="ident" id="8477221">saddr</span><span class="op" id="8477226">:</span>&nbsp;<span class="string" id="8477228">&#34;0.0.0.0&#34;</span><span class="op" id="8477237">,</span>&nbsp;<span class="ident" id="8477239">cnet</span><span class="op" id="8477243">:</span>&nbsp;<span class="string" id="8477245">&#34;udp4&#34;</span><span class="op" id="8477251">,</span>&nbsp;<span class="ident" id="8477253">caddr</span><span class="op" id="8477258">:</span>&nbsp;<span class="string" id="8477260">&#34;127.0.0.1&#34;</span><span class="op" id="8477271">}</span><span class="op" id="8477272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477275">{</span><span class="ident" id="8477276">snet</span><span class="op" id="8477280">:</span>&nbsp;<span class="string" id="8477282">&#34;udp&#34;</span><span class="op" id="8477287">,</span>&nbsp;<span class="ident" id="8477289">saddr</span><span class="op" id="8477294">:</span>&nbsp;<span class="string" id="8477296">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8477314">,</span>&nbsp;<span class="ident" id="8477316">cnet</span><span class="op" id="8477320">:</span>&nbsp;<span class="string" id="8477322">&#34;udp4&#34;</span><span class="op" id="8477328">,</span>&nbsp;<span class="ident" id="8477330">caddr</span><span class="op" id="8477335">:</span>&nbsp;<span class="string" id="8477337">&#34;127.0.0.1&#34;</span><span class="op" id="8477348">}</span><span class="op" id="8477349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477352">{</span><span class="ident" id="8477353">snet</span><span class="op" id="8477357">:</span>&nbsp;<span class="string" id="8477359">&#34;udp&#34;</span><span class="op" id="8477364">,</span>&nbsp;<span class="ident" id="8477366">saddr</span><span class="op" id="8477371">:</span>&nbsp;<span class="string" id="8477373">&#34;[::]&#34;</span><span class="op" id="8477379">,</span>&nbsp;<span class="ident" id="8477381">cnet</span><span class="op" id="8477385">:</span>&nbsp;<span class="string" id="8477387">&#34;udp6&#34;</span><span class="op" id="8477393">,</span>&nbsp;<span class="ident" id="8477395">caddr</span><span class="op" id="8477400">:</span>&nbsp;<span class="string" id="8477402">&#34;[::1]&#34;</span><span class="op" id="8477409">,</span>&nbsp;<span class="ident" id="8477411">ipv6</span><span class="op" id="8477415">:</span>&nbsp;<span class="builtintype" id="8477417">true</span><span class="op" id="8477421">}</span><span class="op" id="8477422">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477426">{</span><span class="ident" id="8477427">snet</span><span class="op" id="8477431">:</span>&nbsp;<span class="string" id="8477433">&#34;udp&#34;</span><span class="op" id="8477438">,</span>&nbsp;<span class="ident" id="8477440">saddr</span><span class="op" id="8477445">:</span>&nbsp;<span class="string" id="8477447">&#34;&#34;</span><span class="op" id="8477449">,</span>&nbsp;<span class="ident" id="8477451">cnet</span><span class="op" id="8477455">:</span>&nbsp;<span class="string" id="8477457">&#34;udp6&#34;</span><span class="op" id="8477463">,</span>&nbsp;<span class="ident" id="8477465">caddr</span><span class="op" id="8477470">:</span>&nbsp;<span class="string" id="8477472">&#34;[::1]&#34;</span><span class="op" id="8477479">,</span>&nbsp;<span class="ident" id="8477481">ipv4map</span><span class="op" id="8477488">:</span>&nbsp;<span class="builtintype" id="8477490">true</span><span class="op" id="8477494">}</span><span class="op" id="8477495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477498">{</span><span class="ident" id="8477499">snet</span><span class="op" id="8477503">:</span>&nbsp;<span class="string" id="8477505">&#34;udp&#34;</span><span class="op" id="8477510">,</span>&nbsp;<span class="ident" id="8477512">saddr</span><span class="op" id="8477517">:</span>&nbsp;<span class="string" id="8477519">&#34;0.0.0.0&#34;</span><span class="op" id="8477528">,</span>&nbsp;<span class="ident" id="8477530">cnet</span><span class="op" id="8477534">:</span>&nbsp;<span class="string" id="8477536">&#34;udp6&#34;</span><span class="op" id="8477542">,</span>&nbsp;<span class="ident" id="8477544">caddr</span><span class="op" id="8477549">:</span>&nbsp;<span class="string" id="8477551">&#34;[::1]&#34;</span><span class="op" id="8477558">,</span>&nbsp;<span class="ident" id="8477560">ipv4map</span><span class="op" id="8477567">:</span>&nbsp;<span class="builtintype" id="8477569">true</span><span class="op" id="8477573">}</span><span class="op" id="8477574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477577">{</span><span class="ident" id="8477578">snet</span><span class="op" id="8477582">:</span>&nbsp;<span class="string" id="8477584">&#34;udp&#34;</span><span class="op" id="8477589">,</span>&nbsp;<span class="ident" id="8477591">saddr</span><span class="op" id="8477596">:</span>&nbsp;<span class="string" id="8477598">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8477616">,</span>&nbsp;<span class="ident" id="8477618">cnet</span><span class="op" id="8477622">:</span>&nbsp;<span class="string" id="8477624">&#34;udp6&#34;</span><span class="op" id="8477630">,</span>&nbsp;<span class="ident" id="8477632">caddr</span><span class="op" id="8477637">:</span>&nbsp;<span class="string" id="8477639">&#34;[::1]&#34;</span><span class="op" id="8477646">,</span>&nbsp;<span class="ident" id="8477648">ipv4map</span><span class="op" id="8477655">:</span>&nbsp;<span class="builtintype" id="8477657">true</span><span class="op" id="8477661">}</span><span class="op" id="8477662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477665">{</span><span class="ident" id="8477666">snet</span><span class="op" id="8477670">:</span>&nbsp;<span class="string" id="8477672">&#34;udp&#34;</span><span class="op" id="8477677">,</span>&nbsp;<span class="ident" id="8477679">saddr</span><span class="op" id="8477684">:</span>&nbsp;<span class="string" id="8477686">&#34;[::]&#34;</span><span class="op" id="8477692">,</span>&nbsp;<span class="ident" id="8477694">cnet</span><span class="op" id="8477698">:</span>&nbsp;<span class="string" id="8477700">&#34;udp4&#34;</span><span class="op" id="8477706">,</span>&nbsp;<span class="ident" id="8477708">caddr</span><span class="op" id="8477713">:</span>&nbsp;<span class="string" id="8477715">&#34;127.0.0.1&#34;</span><span class="op" id="8477726">,</span>&nbsp;<span class="ident" id="8477728">ipv4map</span><span class="op" id="8477735">:</span>&nbsp;<span class="builtintype" id="8477737">true</span><span class="op" id="8477741">}</span><span class="op" id="8477742">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477746">{</span><span class="ident" id="8477747">snet</span><span class="op" id="8477751">:</span>&nbsp;<span class="string" id="8477753">&#34;udp&#34;</span><span class="op" id="8477758">,</span>&nbsp;<span class="ident" id="8477760">saddr</span><span class="op" id="8477765">:</span>&nbsp;<span class="string" id="8477767">&#34;127.0.0.1&#34;</span><span class="op" id="8477778">,</span>&nbsp;<span class="ident" id="8477780">cnet</span><span class="op" id="8477784">:</span>&nbsp;<span class="string" id="8477786">&#34;udp&#34;</span><span class="op" id="8477791">,</span>&nbsp;<span class="ident" id="8477793">caddr</span><span class="op" id="8477798">:</span>&nbsp;<span class="string" id="8477800">&#34;127.0.0.1&#34;</span><span class="op" id="8477811">}</span><span class="op" id="8477812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477815">{</span><span class="ident" id="8477816">snet</span><span class="op" id="8477820">:</span>&nbsp;<span class="string" id="8477822">&#34;udp&#34;</span><span class="op" id="8477827">,</span>&nbsp;<span class="ident" id="8477829">saddr</span><span class="op" id="8477834">:</span>&nbsp;<span class="string" id="8477836">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8477856">,</span>&nbsp;<span class="ident" id="8477858">cnet</span><span class="op" id="8477862">:</span>&nbsp;<span class="string" id="8477864">&#34;udp&#34;</span><span class="op" id="8477869">,</span>&nbsp;<span class="ident" id="8477871">caddr</span><span class="op" id="8477876">:</span>&nbsp;<span class="string" id="8477878">&#34;127.0.0.1&#34;</span><span class="op" id="8477889">}</span><span class="op" id="8477890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477893">{</span><span class="ident" id="8477894">snet</span><span class="op" id="8477898">:</span>&nbsp;<span class="string" id="8477900">&#34;udp&#34;</span><span class="op" id="8477905">,</span>&nbsp;<span class="ident" id="8477907">saddr</span><span class="op" id="8477912">:</span>&nbsp;<span class="string" id="8477914">&#34;[::1]&#34;</span><span class="op" id="8477921">,</span>&nbsp;<span class="ident" id="8477923">cnet</span><span class="op" id="8477927">:</span>&nbsp;<span class="string" id="8477929">&#34;udp&#34;</span><span class="op" id="8477934">,</span>&nbsp;<span class="ident" id="8477936">caddr</span><span class="op" id="8477941">:</span>&nbsp;<span class="string" id="8477943">&#34;[::1]&#34;</span><span class="op" id="8477950">,</span>&nbsp;<span class="ident" id="8477952">ipv6</span><span class="op" id="8477956">:</span>&nbsp;<span class="builtintype" id="8477958">true</span><span class="op" id="8477962">}</span><span class="op" id="8477963">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477967">{</span><span class="ident" id="8477968">snet</span><span class="op" id="8477972">:</span>&nbsp;<span class="string" id="8477974">&#34;udp4&#34;</span><span class="op" id="8477980">,</span>&nbsp;<span class="ident" id="8477982">saddr</span><span class="op" id="8477987">:</span>&nbsp;<span class="string" id="8477989">&#34;&#34;</span><span class="op" id="8477991">,</span>&nbsp;<span class="ident" id="8477993">cnet</span><span class="op" id="8477997">:</span>&nbsp;<span class="string" id="8477999">&#34;udp4&#34;</span><span class="op" id="8478005">,</span>&nbsp;<span class="ident" id="8478007">caddr</span><span class="op" id="8478012">:</span>&nbsp;<span class="string" id="8478014">&#34;127.0.0.1&#34;</span><span class="op" id="8478025">}</span><span class="op" id="8478026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478029">{</span><span class="ident" id="8478030">snet</span><span class="op" id="8478034">:</span>&nbsp;<span class="string" id="8478036">&#34;udp4&#34;</span><span class="op" id="8478042">,</span>&nbsp;<span class="ident" id="8478044">saddr</span><span class="op" id="8478049">:</span>&nbsp;<span class="string" id="8478051">&#34;0.0.0.0&#34;</span><span class="op" id="8478060">,</span>&nbsp;<span class="ident" id="8478062">cnet</span><span class="op" id="8478066">:</span>&nbsp;<span class="string" id="8478068">&#34;udp4&#34;</span><span class="op" id="8478074">,</span>&nbsp;<span class="ident" id="8478076">caddr</span><span class="op" id="8478081">:</span>&nbsp;<span class="string" id="8478083">&#34;127.0.0.1&#34;</span><span class="op" id="8478094">}</span><span class="op" id="8478095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478098">{</span><span class="ident" id="8478099">snet</span><span class="op" id="8478103">:</span>&nbsp;<span class="string" id="8478105">&#34;udp4&#34;</span><span class="op" id="8478111">,</span>&nbsp;<span class="ident" id="8478113">saddr</span><span class="op" id="8478118">:</span>&nbsp;<span class="string" id="8478120">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8478138">,</span>&nbsp;<span class="ident" id="8478140">cnet</span><span class="op" id="8478144">:</span>&nbsp;<span class="string" id="8478146">&#34;udp4&#34;</span><span class="op" id="8478152">,</span>&nbsp;<span class="ident" id="8478154">caddr</span><span class="op" id="8478159">:</span>&nbsp;<span class="string" id="8478161">&#34;127.0.0.1&#34;</span><span class="op" id="8478172">}</span><span class="op" id="8478173">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478177">{</span><span class="ident" id="8478178">snet</span><span class="op" id="8478182">:</span>&nbsp;<span class="string" id="8478184">&#34;udp4&#34;</span><span class="op" id="8478190">,</span>&nbsp;<span class="ident" id="8478192">saddr</span><span class="op" id="8478197">:</span>&nbsp;<span class="string" id="8478199">&#34;127.0.0.1&#34;</span><span class="op" id="8478210">,</span>&nbsp;<span class="ident" id="8478212">cnet</span><span class="op" id="8478216">:</span>&nbsp;<span class="string" id="8478218">&#34;udp4&#34;</span><span class="op" id="8478224">,</span>&nbsp;<span class="ident" id="8478226">caddr</span><span class="op" id="8478231">:</span>&nbsp;<span class="string" id="8478233">&#34;127.0.0.1&#34;</span><span class="op" id="8478244">}</span><span class="op" id="8478245">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478249">{</span><span class="ident" id="8478250">snet</span><span class="op" id="8478254">:</span>&nbsp;<span class="string" id="8478256">&#34;udp6&#34;</span><span class="op" id="8478262">,</span>&nbsp;<span class="ident" id="8478264">saddr</span><span class="op" id="8478269">:</span>&nbsp;<span class="string" id="8478271">&#34;&#34;</span><span class="op" id="8478273">,</span>&nbsp;<span class="ident" id="8478275">cnet</span><span class="op" id="8478279">:</span>&nbsp;<span class="string" id="8478281">&#34;udp6&#34;</span><span class="op" id="8478287">,</span>&nbsp;<span class="ident" id="8478289">caddr</span><span class="op" id="8478294">:</span>&nbsp;<span class="string" id="8478296">&#34;[::1]&#34;</span><span class="op" id="8478303">,</span>&nbsp;<span class="ident" id="8478305">ipv6</span><span class="op" id="8478309">:</span>&nbsp;<span class="builtintype" id="8478311">true</span><span class="op" id="8478315">}</span><span class="op" id="8478316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478319">{</span><span class="ident" id="8478320">snet</span><span class="op" id="8478324">:</span>&nbsp;<span class="string" id="8478326">&#34;udp6&#34;</span><span class="op" id="8478332">,</span>&nbsp;<span class="ident" id="8478334">saddr</span><span class="op" id="8478339">:</span>&nbsp;<span class="string" id="8478341">&#34;[::]&#34;</span><span class="op" id="8478347">,</span>&nbsp;<span class="ident" id="8478349">cnet</span><span class="op" id="8478353">:</span>&nbsp;<span class="string" id="8478355">&#34;udp6&#34;</span><span class="op" id="8478361">,</span>&nbsp;<span class="ident" id="8478363">caddr</span><span class="op" id="8478368">:</span>&nbsp;<span class="string" id="8478370">&#34;[::1]&#34;</span><span class="op" id="8478377">,</span>&nbsp;<span class="ident" id="8478379">ipv6</span><span class="op" id="8478383">:</span>&nbsp;<span class="builtintype" id="8478385">true</span><span class="op" id="8478389">}</span><span class="op" id="8478390">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478394">{</span><span class="ident" id="8478395">snet</span><span class="op" id="8478399">:</span>&nbsp;<span class="string" id="8478401">&#34;udp6&#34;</span><span class="op" id="8478407">,</span>&nbsp;<span class="ident" id="8478409">saddr</span><span class="op" id="8478414">:</span>&nbsp;<span class="string" id="8478416">&#34;[::1]&#34;</span><span class="op" id="8478423">,</span>&nbsp;<span class="ident" id="8478425">cnet</span><span class="op" id="8478429">:</span>&nbsp;<span class="string" id="8478431">&#34;udp6&#34;</span><span class="op" id="8478437">,</span>&nbsp;<span class="ident" id="8478439">caddr</span><span class="op" id="8478444">:</span>&nbsp;<span class="string" id="8478446">&#34;[::1]&#34;</span><span class="op" id="8478453">,</span>&nbsp;<span class="ident" id="8478455">ipv6</span><span class="op" id="8478459">:</span>&nbsp;<span class="builtintype" id="8478461">true</span><span class="op" id="8478465">}</span><span class="op" id="8478466">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478470">{</span><span class="ident" id="8478471">snet</span><span class="op" id="8478475">:</span>&nbsp;<span class="string" id="8478477">&#34;udp&#34;</span><span class="op" id="8478482">,</span>&nbsp;<span class="ident" id="8478484">saddr</span><span class="op" id="8478489">:</span>&nbsp;<span class="string" id="8478491">&#34;127.0.0.1&#34;</span><span class="op" id="8478502">,</span>&nbsp;<span class="ident" id="8478504">cnet</span><span class="op" id="8478508">:</span>&nbsp;<span class="string" id="8478510">&#34;udp&#34;</span><span class="op" id="8478515">,</span>&nbsp;<span class="ident" id="8478517">caddr</span><span class="op" id="8478522">:</span>&nbsp;<span class="string" id="8478524">&#34;127.0.0.1&#34;</span><span class="op" id="8478535">,</span>&nbsp;<span class="ident" id="8478537">dial</span><span class="op" id="8478541">:</span>&nbsp;<span class="builtintype" id="8478543">true</span><span class="op" id="8478547">}</span><span class="op" id="8478548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478551">{</span><span class="ident" id="8478552">snet</span><span class="op" id="8478556">:</span>&nbsp;<span class="string" id="8478558">&#34;udp&#34;</span><span class="op" id="8478563">,</span>&nbsp;<span class="ident" id="8478565">saddr</span><span class="op" id="8478570">:</span>&nbsp;<span class="string" id="8478572">&#34;127.0.0.1&#34;</span><span class="op" id="8478583">,</span>&nbsp;<span class="ident" id="8478585">cnet</span><span class="op" id="8478589">:</span>&nbsp;<span class="string" id="8478591">&#34;udp&#34;</span><span class="op" id="8478596">,</span>&nbsp;<span class="ident" id="8478598">caddr</span><span class="op" id="8478603">:</span>&nbsp;<span class="string" id="8478605">&#34;127.0.0.1&#34;</span><span class="op" id="8478616">,</span>&nbsp;<span class="ident" id="8478618">empty</span><span class="op" id="8478623">:</span>&nbsp;<span class="builtintype" id="8478625">true</span><span class="op" id="8478629">}</span><span class="op" id="8478630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478633">{</span><span class="ident" id="8478634">snet</span><span class="op" id="8478638">:</span>&nbsp;<span class="string" id="8478640">&#34;udp&#34;</span><span class="op" id="8478645">,</span>&nbsp;<span class="ident" id="8478647">saddr</span><span class="op" id="8478652">:</span>&nbsp;<span class="string" id="8478654">&#34;127.0.0.1&#34;</span><span class="op" id="8478665">,</span>&nbsp;<span class="ident" id="8478667">cnet</span><span class="op" id="8478671">:</span>&nbsp;<span class="string" id="8478673">&#34;udp&#34;</span><span class="op" id="8478678">,</span>&nbsp;<span class="ident" id="8478680">caddr</span><span class="op" id="8478685">:</span>&nbsp;<span class="string" id="8478687">&#34;127.0.0.1&#34;</span><span class="op" id="8478698">,</span>&nbsp;<span class="ident" id="8478700">dial</span><span class="op" id="8478704">:</span>&nbsp;<span class="builtintype" id="8478706">true</span><span class="op" id="8478710">,</span>&nbsp;<span class="ident" id="8478712">empty</span><span class="op" id="8478717">:</span>&nbsp;<span class="builtintype" id="8478719">true</span><span class="op" id="8478723">}</span><span class="op" id="8478724">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478728">{</span><span class="ident" id="8478729">snet</span><span class="op" id="8478733">:</span>&nbsp;<span class="string" id="8478735">&#34;udp&#34;</span><span class="op" id="8478740">,</span>&nbsp;<span class="ident" id="8478742">saddr</span><span class="op" id="8478747">:</span>&nbsp;<span class="string" id="8478749">&#34;[::1]&#34;</span><span class="op" id="8478756">,</span>&nbsp;<span class="ident" id="8478758">cnet</span><span class="op" id="8478762">:</span>&nbsp;<span class="string" id="8478764">&#34;udp&#34;</span><span class="op" id="8478769">,</span>&nbsp;<span class="ident" id="8478771">caddr</span><span class="op" id="8478776">:</span>&nbsp;<span class="string" id="8478778">&#34;[::1]&#34;</span><span class="op" id="8478785">,</span>&nbsp;<span class="ident" id="8478787">ipv6</span><span class="op" id="8478791">:</span>&nbsp;<span class="builtintype" id="8478793">true</span><span class="op" id="8478797">,</span>&nbsp;<span class="ident" id="8478799">dial</span><span class="op" id="8478803">:</span>&nbsp;<span class="builtintype" id="8478805">true</span><span class="op" id="8478809">}</span><span class="op" id="8478810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478813">{</span><span class="ident" id="8478814">snet</span><span class="op" id="8478818">:</span>&nbsp;<span class="string" id="8478820">&#34;udp&#34;</span><span class="op" id="8478825">,</span>&nbsp;<span class="ident" id="8478827">saddr</span><span class="op" id="8478832">:</span>&nbsp;<span class="string" id="8478834">&#34;[::1]&#34;</span><span class="op" id="8478841">,</span>&nbsp;<span class="ident" id="8478843">cnet</span><span class="op" id="8478847">:</span>&nbsp;<span class="string" id="8478849">&#34;udp&#34;</span><span class="op" id="8478854">,</span>&nbsp;<span class="ident" id="8478856">caddr</span><span class="op" id="8478861">:</span>&nbsp;<span class="string" id="8478863">&#34;[::1]&#34;</span><span class="op" id="8478870">,</span>&nbsp;<span class="ident" id="8478872">ipv6</span><span class="op" id="8478876">:</span>&nbsp;<span class="builtintype" id="8478878">true</span><span class="op" id="8478882">,</span>&nbsp;<span class="ident" id="8478884">empty</span><span class="op" id="8478889">:</span>&nbsp;<span class="builtintype" id="8478891">true</span><span class="op" id="8478895">}</span><span class="op" id="8478896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478899">{</span><span class="ident" id="8478900">snet</span><span class="op" id="8478904">:</span>&nbsp;<span class="string" id="8478906">&#34;udp&#34;</span><span class="op" id="8478911">,</span>&nbsp;<span class="ident" id="8478913">saddr</span><span class="op" id="8478918">:</span>&nbsp;<span class="string" id="8478920">&#34;[::1]&#34;</span><span class="op" id="8478927">,</span>&nbsp;<span class="ident" id="8478929">cnet</span><span class="op" id="8478933">:</span>&nbsp;<span class="string" id="8478935">&#34;udp&#34;</span><span class="op" id="8478940">,</span>&nbsp;<span class="ident" id="8478942">caddr</span><span class="op" id="8478947">:</span>&nbsp;<span class="string" id="8478949">&#34;[::1]&#34;</span><span class="op" id="8478956">,</span>&nbsp;<span class="ident" id="8478958">ipv6</span><span class="op" id="8478962">:</span>&nbsp;<span class="builtintype" id="8478964">true</span><span class="op" id="8478968">,</span>&nbsp;<span class="ident" id="8478970">dial</span><span class="op" id="8478974">:</span>&nbsp;<span class="builtintype" id="8478976">true</span><span class="op" id="8478980">,</span>&nbsp;<span class="ident" id="8478982">empty</span><span class="op" id="8478987">:</span>&nbsp;<span class="builtintype" id="8478989">true</span><span class="op" id="8478993">}</span><span class="op" id="8478994">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478998">{</span><span class="ident" id="8478999">snet</span><span class="op" id="8479003">:</span>&nbsp;<span class="string" id="8479005">&#34;unixgram&#34;</span><span class="op" id="8479015">,</span>&nbsp;<span class="ident" id="8479017">saddr</span><span class="op" id="8479022">:</span>&nbsp;<span class="ident" id="8479024">testUnixAddr</span><span class="op" id="8479036">(</span><span class="op" id="8479037">)</span><span class="op" id="8479038">,</span>&nbsp;<span class="ident" id="8479040">cnet</span><span class="op" id="8479044">:</span>&nbsp;<span class="string" id="8479046">&#34;unixgram&#34;</span><span class="op" id="8479056">,</span>&nbsp;<span class="ident" id="8479058">caddr</span><span class="op" id="8479063">:</span>&nbsp;<span class="ident" id="8479065">testUnixAddr</span><span class="op" id="8479077">(</span><span class="op" id="8479078">)</span><span class="op" id="8479079">}</span><span class="op" id="8479080">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479083">{</span><span class="ident" id="8479084">snet</span><span class="op" id="8479088">:</span>&nbsp;<span class="string" id="8479090">&#34;unixgram&#34;</span><span class="op" id="8479100">,</span>&nbsp;<span class="ident" id="8479102">saddr</span><span class="op" id="8479107">:</span>&nbsp;<span class="ident" id="8479109">testUnixAddr</span><span class="op" id="8479121">(</span><span class="op" id="8479122">)</span><span class="op" id="8479123">,</span>&nbsp;<span class="ident" id="8479125">cnet</span><span class="op" id="8479129">:</span>&nbsp;<span class="string" id="8479131">&#34;unixgram&#34;</span><span class="op" id="8479141">,</span>&nbsp;<span class="ident" id="8479143">caddr</span><span class="op" id="8479148">:</span>&nbsp;<span class="ident" id="8479150">testUnixAddr</span><span class="op" id="8479162">(</span><span class="op" id="8479163">)</span><span class="op" id="8479164">,</span>&nbsp;<span class="ident" id="8479166">dial</span><span class="op" id="8479170">:</span>&nbsp;<span class="builtintype" id="8479172">true</span><span class="op" id="8479176">}</span><span class="op" id="8479177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479180">{</span><span class="ident" id="8479181">snet</span><span class="op" id="8479185">:</span>&nbsp;<span class="string" id="8479187">&#34;unixgram&#34;</span><span class="op" id="8479197">,</span>&nbsp;<span class="ident" id="8479199">saddr</span><span class="op" id="8479204">:</span>&nbsp;<span class="ident" id="8479206">testUnixAddr</span><span class="op" id="8479218">(</span><span class="op" id="8479219">)</span><span class="op" id="8479220">,</span>&nbsp;<span class="ident" id="8479222">cnet</span><span class="op" id="8479226">:</span>&nbsp;<span class="string" id="8479228">&#34;unixgram&#34;</span><span class="op" id="8479238">,</span>&nbsp;<span class="ident" id="8479240">caddr</span><span class="op" id="8479245">:</span>&nbsp;<span class="ident" id="8479247">testUnixAddr</span><span class="op" id="8479259">(</span><span class="op" id="8479260">)</span><span class="op" id="8479261">,</span>&nbsp;<span class="ident" id="8479263">empty</span><span class="op" id="8479268">:</span>&nbsp;<span class="builtintype" id="8479270">true</span><span class="op" id="8479274">}</span><span class="op" id="8479275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479278">{</span><span class="ident" id="8479279">snet</span><span class="op" id="8479283">:</span>&nbsp;<span class="string" id="8479285">&#34;unixgram&#34;</span><span class="op" id="8479295">,</span>&nbsp;<span class="ident" id="8479297">saddr</span><span class="op" id="8479302">:</span>&nbsp;<span class="ident" id="8479304">testUnixAddr</span><span class="op" id="8479316">(</span><span class="op" id="8479317">)</span><span class="op" id="8479318">,</span>&nbsp;<span class="ident" id="8479320">cnet</span><span class="op" id="8479324">:</span>&nbsp;<span class="string" id="8479326">&#34;unixgram&#34;</span><span class="op" id="8479336">,</span>&nbsp;<span class="ident" id="8479338">caddr</span><span class="op" id="8479343">:</span>&nbsp;<span class="ident" id="8479345">testUnixAddr</span><span class="op" id="8479357">(</span><span class="op" id="8479358">)</span><span class="op" id="8479359">,</span>&nbsp;<span class="ident" id="8479361">dial</span><span class="op" id="8479365">:</span>&nbsp;<span class="builtintype" id="8479367">true</span><span class="op" id="8479371">,</span>&nbsp;<span class="ident" id="8479373">empty</span><span class="op" id="8479378">:</span>&nbsp;<span class="builtintype" id="8479380">true</span><span class="op" id="8479384">}</span><span class="op" id="8479385">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479389">{</span><span class="ident" id="8479390">snet</span><span class="op" id="8479394">:</span>&nbsp;<span class="string" id="8479396">&#34;unixgram&#34;</span><span class="op" id="8479406">,</span>&nbsp;<span class="ident" id="8479408">saddr</span><span class="op" id="8479413">:</span>&nbsp;<span class="string" id="8479415">&#34;@gotest6/net&#34;</span><span class="op" id="8479429">,</span>&nbsp;<span class="ident" id="8479431">cnet</span><span class="op" id="8479435">:</span>&nbsp;<span class="string" id="8479437">&#34;unixgram&#34;</span><span class="op" id="8479447">,</span>&nbsp;<span class="ident" id="8479449">caddr</span><span class="op" id="8479454">:</span>&nbsp;<span class="string" id="8479456">&#34;@gotest6/net.local&#34;</span><span class="op" id="8479476">,</span>&nbsp;<span class="ident" id="8479478">linuxOnly</span><span class="op" id="8479487">:</span>&nbsp;<span class="builtintype" id="8479489">true</span><span class="op" id="8479493">}</span><span class="op" id="8479494">,</span><br>
<span class="lineno">310</span><span class="op" id="8479496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479499">func</span>&nbsp;<span class="ident" id="8479504">TestDatagramPacketConnServer</span><span class="op" id="8479532">(</span><span class="ident" id="8479533">t</span>&nbsp;<span class="op" id="8479535">*</span><span class="ident" id="8479536">testing</span><span class="op" id="8479543">.</span><span class="ident" id="8479544">T</span><span class="op" id="8479545">)</span>&nbsp;<span class="op" id="8479547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479550">if</span>&nbsp;<span class="op" id="8479553">!</span><span class="op" id="8479554">*</span><span class="ident" id="8479555">testDatagram</span>&nbsp;<span class="op" id="8479568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479572">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479584">for</span>&nbsp;<span class="ident" id="8479588">_</span><span class="op" id="8479589">,</span>&nbsp;<span class="ident" id="8479591">tt</span>&nbsp;<span class="op" id="8479594">:=</span>&nbsp;<span class="keyword" id="8479597">range</span>&nbsp;<span class="ident" id="8479603">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8479633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479637">if</span>&nbsp;<span class="ident" id="8479640">skipServerTest</span><span class="op" id="8479654">(</span><span class="ident" id="8479655">tt</span><span class="op" id="8479657">.</span><span class="ident" id="8479658">snet</span><span class="op" id="8479662">,</span>&nbsp;<span class="string" id="8479664">&#34;unixgram&#34;</span><span class="op" id="8479674">,</span>&nbsp;<span class="ident" id="8479676">tt</span><span class="op" id="8479678">.</span><span class="ident" id="8479679">saddr</span><span class="op" id="8479684">,</span>&nbsp;<span class="ident" id="8479686">tt</span><span class="op" id="8479688">.</span><span class="ident" id="8479689">ipv6</span><span class="op" id="8479693">,</span>&nbsp;<span class="ident" id="8479695">tt</span><span class="op" id="8479697">.</span><span class="ident" id="8479698">ipv4map</span><span class="op" id="8479705">,</span>&nbsp;<span class="ident" id="8479707">tt</span><span class="op" id="8479709">.</span><span class="ident" id="8479710">linuxOnly</span><span class="op" id="8479719">)</span>&nbsp;<span class="op" id="8479721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479726">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479742">listening</span>&nbsp;<span class="op" id="8479752">:=</span>&nbsp;<span class="builtinfunc" id="8479755">make</span><span class="op" id="8479759">(</span><span class="keyword" id="8479760">chan</span>&nbsp;<span class="builtintype" id="8479765">string</span><span class="op" id="8479771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479775">done</span>&nbsp;<span class="op" id="8479780">:=</span>&nbsp;<span class="builtinfunc" id="8479783">make</span><span class="op" id="8479787">(</span><span class="keyword" id="8479788">chan</span>&nbsp;<span class="builtintype" id="8479793">int</span><span class="op" id="8479796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479800">switch</span>&nbsp;<span class="ident" id="8479807">tt</span><span class="op" id="8479809">.</span><span class="ident" id="8479810">snet</span>&nbsp;<span class="op" id="8479815">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479819">case</span>&nbsp;<span class="string" id="8479824">&#34;udp&#34;</span><span class="op" id="8479829">,</span>&nbsp;<span class="string" id="8479831">&#34;udp4&#34;</span><span class="op" id="8479837">,</span>&nbsp;<span class="string" id="8479839">&#34;udp6&#34;</span><span class="op" id="8479845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479850">tt</span><span class="op" id="8479852">.</span><span class="ident" id="8479853">saddr</span>&nbsp;<span class="op" id="8479859">+=</span>&nbsp;<span class="string" id="8479862">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479869">case</span>&nbsp;<span class="string" id="8479874">&#34;unixgram&#34;</span><span class="op" id="8479884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479889">os</span><span class="op" id="8479891">.</span><span class="ident" id="8479892">Remove</span><span class="op" id="8479898">(</span><span class="ident" id="8479899">tt</span><span class="op" id="8479901">.</span><span class="ident" id="8479902">saddr</span><span class="op" id="8479907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479912">os</span><span class="op" id="8479914">.</span><span class="ident" id="8479915">Remove</span><span class="op" id="8479921">(</span><span class="ident" id="8479922">tt</span><span class="op" id="8479924">.</span><span class="ident" id="8479925">caddr</span><span class="op" id="8479930">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479939">go</span>&nbsp;<span class="ident" id="8479942">runDatagramPacketConnServer</span><span class="op" id="8479969">(</span><span class="ident" id="8479970">t</span><span class="op" id="8479971">,</span>&nbsp;<span class="ident" id="8479973">tt</span><span class="op" id="8479975">.</span><span class="ident" id="8479976">snet</span><span class="op" id="8479980">,</span>&nbsp;<span class="ident" id="8479982">tt</span><span class="op" id="8479984">.</span><span class="ident" id="8479985">saddr</span><span class="op" id="8479990">,</span>&nbsp;<span class="ident" id="8479992">listening</span><span class="op" id="8480001">,</span>&nbsp;<span class="ident" id="8480003">done</span><span class="op" id="8480007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480011">taddr</span>&nbsp;<span class="op" id="8480017">:=</span>&nbsp;<span class="op" id="8480020">&lt;-</span><span class="ident" id="8480022">listening</span>&nbsp;<span class="comment" id="8480032">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480063">switch</span>&nbsp;<span class="ident" id="8480070">tt</span><span class="op" id="8480072">.</span><span class="ident" id="8480073">cnet</span>&nbsp;<span class="op" id="8480078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480082">case</span>&nbsp;<span class="string" id="8480087">&#34;udp&#34;</span><span class="op" id="8480092">,</span>&nbsp;<span class="string" id="8480094">&#34;udp4&#34;</span><span class="op" id="8480100">,</span>&nbsp;<span class="string" id="8480102">&#34;udp6&#34;</span><span class="op" id="8480108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480113">_</span><span class="op" id="8480114">,</span>&nbsp;<span class="ident" id="8480116">port</span><span class="op" id="8480120">,</span>&nbsp;<span class="ident" id="8480122">err</span>&nbsp;<span class="op" id="8480126">:=</span>&nbsp;<span class="ident" id="8480129">SplitHostPort</span><span class="op" id="8480142">(</span><span class="ident" id="8480143">taddr</span><span class="op" id="8480148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480153">if</span>&nbsp;<span class="ident" id="8480156">err</span>&nbsp;<span class="op" id="8480160">!=</span>&nbsp;<span class="ident" id="8480163">nil</span>&nbsp;<span class="op" id="8480167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480173">t</span><span class="op" id="8480174">.</span><span class="ident" id="8480175">Fatalf</span><span class="op" id="8480181">(</span><span class="string" id="8480182">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8480212">,</span>&nbsp;<span class="ident" id="8480214">taddr</span><span class="op" id="8480219">,</span>&nbsp;<span class="ident" id="8480221">err</span><span class="op" id="8480224">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480234">taddr</span>&nbsp;<span class="op" id="8480240">=</span>&nbsp;<span class="ident" id="8480242">tt</span><span class="op" id="8480244">.</span><span class="ident" id="8480245">caddr</span>&nbsp;<span class="op" id="8480251">+</span>&nbsp;<span class="string" id="8480253">&#34;:&#34;</span>&nbsp;<span class="op" id="8480257">+</span>&nbsp;<span class="ident" id="8480259">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480267">tt</span><span class="op" id="8480269">.</span><span class="ident" id="8480270">caddr</span>&nbsp;<span class="op" id="8480276">+=</span>&nbsp;<span class="string" id="8480279">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480290">if</span>&nbsp;<span class="ident" id="8480293">tt</span><span class="op" id="8480295">.</span><span class="ident" id="8480296">dial</span>&nbsp;<span class="op" id="8480301">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480306">runDatagramConnClient</span><span class="op" id="8480327">(</span><span class="ident" id="8480328">t</span><span class="op" id="8480329">,</span>&nbsp;<span class="ident" id="8480331">tt</span><span class="op" id="8480333">.</span><span class="ident" id="8480334">cnet</span><span class="op" id="8480338">,</span>&nbsp;<span class="ident" id="8480340">tt</span><span class="op" id="8480342">.</span><span class="ident" id="8480343">caddr</span><span class="op" id="8480348">,</span>&nbsp;<span class="ident" id="8480350">taddr</span><span class="op" id="8480355">,</span>&nbsp;<span class="ident" id="8480357">tt</span><span class="op" id="8480359">.</span><span class="ident" id="8480360">empty</span><span class="op" id="8480365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480369">}</span>&nbsp;<span class="keyword" id="8480371">else</span>&nbsp;<span class="op" id="8480376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480381">runDatagramPacketConnClient</span><span class="op" id="8480408">(</span><span class="ident" id="8480409">t</span><span class="op" id="8480410">,</span>&nbsp;<span class="ident" id="8480412">tt</span><span class="op" id="8480414">.</span><span class="ident" id="8480415">cnet</span><span class="op" id="8480419">,</span>&nbsp;<span class="ident" id="8480421">tt</span><span class="op" id="8480423">.</span><span class="ident" id="8480424">caddr</span><span class="op" id="8480429">,</span>&nbsp;<span class="ident" id="8480431">taddr</span><span class="op" id="8480436">,</span>&nbsp;<span class="ident" id="8480438">tt</span><span class="op" id="8480440">.</span><span class="ident" id="8480441">empty</span><span class="op" id="8480446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480454">&lt;-</span><span class="ident" id="8480456">done</span>&nbsp;<span class="comment" id="8480461">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480486">&lt;-</span><span class="ident" id="8480488">done</span>&nbsp;<span class="comment" id="8480493">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480524">switch</span>&nbsp;<span class="ident" id="8480531">tt</span><span class="op" id="8480533">.</span><span class="ident" id="8480534">snet</span>&nbsp;<span class="op" id="8480539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480543">case</span>&nbsp;<span class="string" id="8480548">&#34;unixgram&#34;</span><span class="op" id="8480558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480563">os</span><span class="op" id="8480565">.</span><span class="ident" id="8480566">Remove</span><span class="op" id="8480572">(</span><span class="ident" id="8480573">tt</span><span class="op" id="8480575">.</span><span class="ident" id="8480576">saddr</span><span class="op" id="8480581">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480586">os</span><span class="op" id="8480588">.</span><span class="ident" id="8480589">Remove</span><span class="op" id="8480595">(</span><span class="ident" id="8480596">tt</span><span class="op" id="8480598">.</span><span class="ident" id="8480599">caddr</span><span class="op" id="8480604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480611">}</span><br>
<span class="lineno"></span><span class="op" id="8480613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="8480616">func</span>&nbsp;<span class="ident" id="8480621">runDatagramPacketConnServer</span><span class="op" id="8480648">(</span><span class="ident" id="8480649">t</span>&nbsp;<span class="op" id="8480651">*</span><span class="ident" id="8480652">testing</span><span class="op" id="8480659">.</span><span class="ident" id="8480660">T</span><span class="op" id="8480661">,</span>&nbsp;<span class="ident" id="8480663">net</span><span class="op" id="8480666">,</span>&nbsp;<span class="ident" id="8480668">laddr</span>&nbsp;<span class="builtintype" id="8480674">string</span><span class="op" id="8480680">,</span>&nbsp;<span class="ident" id="8480682">listening</span>&nbsp;<span class="keyword" id="8480692">chan</span><span class="op" id="8480696">&lt;-</span>&nbsp;<span class="builtintype" id="8480699">string</span><span class="op" id="8480705">,</span>&nbsp;<span class="ident" id="8480707">done</span>&nbsp;<span class="keyword" id="8480712">chan</span><span class="op" id="8480716">&lt;-</span>&nbsp;<span class="builtintype" id="8480719">int</span><span class="op" id="8480722">)</span>&nbsp;<span class="op" id="8480724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480727">c</span><span class="op" id="8480728">,</span>&nbsp;<span class="ident" id="8480730">err</span>&nbsp;<span class="op" id="8480734">:=</span>&nbsp;<span class="ident" id="8480737">ListenPacket</span><span class="op" id="8480749">(</span><span class="ident" id="8480750">net</span><span class="op" id="8480753">,</span>&nbsp;<span class="ident" id="8480755">laddr</span><span class="op" id="8480760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480763">if</span>&nbsp;<span class="ident" id="8480766">err</span>&nbsp;<span class="op" id="8480770">!=</span>&nbsp;<span class="ident" id="8480773">nil</span>&nbsp;<span class="op" id="8480777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480781">t</span><span class="op" id="8480782">.</span><span class="ident" id="8480783">Errorf</span><span class="op" id="8480789">(</span><span class="string" id="8480790">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8480823">,</span>&nbsp;<span class="ident" id="8480825">net</span><span class="op" id="8480828">,</span>&nbsp;<span class="ident" id="8480830">laddr</span><span class="op" id="8480835">,</span>&nbsp;<span class="ident" id="8480837">err</span><span class="op" id="8480840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480844">listening</span>&nbsp;<span class="op" id="8480854">&lt;-</span>&nbsp;<span class="string" id="8480857">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480867">done</span>&nbsp;<span class="op" id="8480872">&lt;-</span>&nbsp;<span class="num" id="8480875">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480879">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480890">defer</span>&nbsp;<span class="ident" id="8480896">c</span><span class="op" id="8480897">.</span><span class="ident" id="8480898">Close</span><span class="op" id="8480903">(</span><span class="op" id="8480904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480907">listening</span>&nbsp;<span class="op" id="8480917">&lt;-</span>&nbsp;<span class="ident" id="8480920">c</span><span class="op" id="8480921">.</span><span class="ident" id="8480922">LocalAddr</span><span class="op" id="8480931">(</span><span class="op" id="8480932">)</span><span class="op" id="8480933">.</span><span class="ident" id="8480934">String</span><span class="op" id="8480940">(</span><span class="op" id="8480941">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480945">buf</span>&nbsp;<span class="op" id="8480949">:=</span>&nbsp;<span class="builtinfunc" id="8480952">make</span><span class="op" id="8480956">(</span><span class="op" id="8480957">[</span><span class="op" id="8480958">]</span><span class="builtintype" id="8480959">byte</span><span class="op" id="8480963">,</span>&nbsp;<span class="num" id="8480965">1024</span><span class="op" id="8480969">)</span><br>
<span class="lineno"></span><span class="ident" id="8480971">run</span><span class="op" id="8480974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480977">for</span>&nbsp;<span class="op" id="8480981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480985">c</span><span class="op" id="8480986">.</span><span class="ident" id="8480987">SetReadDeadline</span><span class="op" id="8481002">(</span><span class="ident" id="8481003">time</span><span class="op" id="8481007">.</span><span class="ident" id="8481008">Now</span><span class="op" id="8481011">(</span><span class="op" id="8481012">)</span><span class="op" id="8481013">.</span><span class="ident" id="8481014">Add</span><span class="op" id="8481017">(</span><span class="num" id="8481018">10</span>&nbsp;<span class="op" id="8481021">*</span>&nbsp;<span class="ident" id="8481023">time</span><span class="op" id="8481027">.</span><span class="ident" id="8481028">Millisecond</span><span class="op" id="8481039">)</span><span class="op" id="8481040">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481044">n</span><span class="op" id="8481045">,</span>&nbsp;<span class="ident" id="8481047">ra</span><span class="op" id="8481049">,</span>&nbsp;<span class="ident" id="8481051">err</span>&nbsp;<span class="op" id="8481055">:=</span>&nbsp;<span class="ident" id="8481058">c</span><span class="op" id="8481059">.</span><span class="ident" id="8481060">ReadFrom</span><span class="op" id="8481068">(</span><span class="ident" id="8481069">buf</span><span class="op" id="8481072">[</span><span class="num" id="8481073">0</span><span class="op" id="8481074">:</span><span class="op" id="8481075">]</span><span class="op" id="8481076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481080">if</span>&nbsp;<span class="ident" id="8481083">nerr</span><span class="op" id="8481087">,</span>&nbsp;<span class="ident" id="8481089">ok</span>&nbsp;<span class="op" id="8481092">:=</span>&nbsp;<span class="ident" id="8481095">err</span><span class="op" id="8481098">.</span><span class="op" id="8481099">(</span><span class="ident" id="8481100">Error</span><span class="op" id="8481105">)</span><span class="op" id="8481106">;</span>&nbsp;<span class="ident" id="8481108">ok</span>&nbsp;<span class="op" id="8481111">&amp;&amp;</span>&nbsp;<span class="ident" id="8481114">nerr</span><span class="op" id="8481118">.</span><span class="ident" id="8481119">Timeout</span><span class="op" id="8481126">(</span><span class="op" id="8481127">)</span>&nbsp;<span class="op" id="8481129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481134">select</span>&nbsp;<span class="op" id="8481141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481146">case</span>&nbsp;<span class="ident" id="8481151">done</span>&nbsp;<span class="op" id="8481156">&lt;-</span>&nbsp;<span class="num" id="8481159">1</span><span class="op" id="8481160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481166">break</span>&nbsp;<span class="ident" id="8481172">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481179">default</span><span class="op" id="8481186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481192">continue</span>&nbsp;<span class="ident" id="8481201">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481216">if</span>&nbsp;<span class="ident" id="8481219">err</span>&nbsp;<span class="op" id="8481223">!=</span>&nbsp;<span class="ident" id="8481226">nil</span>&nbsp;<span class="op" id="8481230">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481235">break</span>&nbsp;<span class="ident" id="8481241">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481251">if</span>&nbsp;<span class="ident" id="8481254">_</span><span class="op" id="8481255">,</span>&nbsp;<span class="ident" id="8481257">err</span>&nbsp;<span class="op" id="8481261">=</span>&nbsp;<span class="ident" id="8481263">c</span><span class="op" id="8481264">.</span><span class="ident" id="8481265">WriteTo</span><span class="op" id="8481272">(</span><span class="ident" id="8481273">buf</span><span class="op" id="8481276">[</span><span class="num" id="8481277">0</span><span class="op" id="8481278">:</span><span class="ident" id="8481279">n</span><span class="op" id="8481280">]</span><span class="op" id="8481281">,</span>&nbsp;<span class="ident" id="8481283">ra</span><span class="op" id="8481285">)</span><span class="op" id="8481286">;</span>&nbsp;<span class="ident" id="8481288">err</span>&nbsp;<span class="op" id="8481292">!=</span>&nbsp;<span class="ident" id="8481295">nil</span>&nbsp;<span class="op" id="8481299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481304">t</span><span class="op" id="8481305">.</span><span class="ident" id="8481306">Errorf</span><span class="op" id="8481312">(</span><span class="string" id="8481313">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8481337">,</span>&nbsp;<span class="ident" id="8481339">ra</span><span class="op" id="8481341">,</span>&nbsp;<span class="ident" id="8481343">err</span><span class="op" id="8481346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481351">break</span>&nbsp;<span class="ident" id="8481357">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481369">done</span>&nbsp;<span class="op" id="8481374">&lt;-</span>&nbsp;<span class="num" id="8481377">1</span><br>
<span class="lineno"></span><span class="op" id="8481379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="8481382">func</span>&nbsp;<span class="ident" id="8481387">runDatagramConnClient</span><span class="op" id="8481408">(</span><span class="ident" id="8481409">t</span>&nbsp;<span class="op" id="8481411">*</span><span class="ident" id="8481412">testing</span><span class="op" id="8481419">.</span><span class="ident" id="8481420">T</span><span class="op" id="8481421">,</span>&nbsp;<span class="ident" id="8481423">net</span><span class="op" id="8481426">,</span>&nbsp;<span class="ident" id="8481428">laddr</span><span class="op" id="8481433">,</span>&nbsp;<span class="ident" id="8481435">taddr</span>&nbsp;<span class="builtintype" id="8481441">string</span><span class="op" id="8481447">,</span>&nbsp;<span class="ident" id="8481449">isEmpty</span>&nbsp;<span class="builtintype" id="8481457">bool</span><span class="op" id="8481461">)</span>&nbsp;<span class="op" id="8481463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481466">var</span>&nbsp;<span class="ident" id="8481470">c</span>&nbsp;<span class="ident" id="8481472">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481478">var</span>&nbsp;<span class="ident" id="8481482">err</span>&nbsp;<span class="builtintype" id="8481486">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481493">switch</span>&nbsp;<span class="ident" id="8481500">net</span>&nbsp;<span class="op" id="8481504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481507">case</span>&nbsp;<span class="string" id="8481512">&#34;udp&#34;</span><span class="op" id="8481517">,</span>&nbsp;<span class="string" id="8481519">&#34;udp4&#34;</span><span class="op" id="8481525">,</span>&nbsp;<span class="string" id="8481527">&#34;udp6&#34;</span><span class="op" id="8481533">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481537">c</span><span class="op" id="8481538">,</span>&nbsp;<span class="ident" id="8481540">err</span>&nbsp;<span class="op" id="8481544">=</span>&nbsp;<span class="ident" id="8481546">Dial</span><span class="op" id="8481550">(</span><span class="ident" id="8481551">net</span><span class="op" id="8481554">,</span>&nbsp;<span class="ident" id="8481556">taddr</span><span class="op" id="8481561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481565">if</span>&nbsp;<span class="ident" id="8481568">err</span>&nbsp;<span class="op" id="8481572">!=</span>&nbsp;<span class="ident" id="8481575">nil</span>&nbsp;<span class="op" id="8481579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481584">t</span><span class="op" id="8481585">.</span><span class="ident" id="8481586">Fatalf</span><span class="op" id="8481592">(</span><span class="string" id="8481593">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8481618">,</span>&nbsp;<span class="ident" id="8481620">net</span><span class="op" id="8481623">,</span>&nbsp;<span class="ident" id="8481625">taddr</span><span class="op" id="8481630">,</span>&nbsp;<span class="ident" id="8481632">err</span><span class="op" id="8481635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481642">case</span>&nbsp;<span class="string" id="8481647">&#34;unixgram&#34;</span><span class="op" id="8481657">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481661">c</span><span class="op" id="8481662">,</span>&nbsp;<span class="ident" id="8481664">err</span>&nbsp;<span class="op" id="8481668">=</span>&nbsp;<span class="ident" id="8481670">DialUnix</span><span class="op" id="8481678">(</span><span class="ident" id="8481679">net</span><span class="op" id="8481682">,</span>&nbsp;<span class="op" id="8481684">&amp;</span><span class="ident" id="8481685">UnixAddr</span><span class="op" id="8481693">{</span><span class="ident" id="8481694">Name</span><span class="op" id="8481698">:</span>&nbsp;<span class="ident" id="8481700">laddr</span><span class="op" id="8481705">,</span>&nbsp;<span class="ident" id="8481707">Net</span><span class="op" id="8481710">:</span>&nbsp;<span class="ident" id="8481712">net</span><span class="op" id="8481715">}</span><span class="op" id="8481716">,</span>&nbsp;<span class="op" id="8481718">&amp;</span><span class="ident" id="8481719">UnixAddr</span><span class="op" id="8481727">{</span><span class="ident" id="8481728">Name</span><span class="op" id="8481732">:</span>&nbsp;<span class="ident" id="8481734">taddr</span><span class="op" id="8481739">,</span>&nbsp;<span class="ident" id="8481741">Net</span><span class="op" id="8481744">:</span>&nbsp;<span class="ident" id="8481746">net</span><span class="op" id="8481749">}</span><span class="op" id="8481750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481754">if</span>&nbsp;<span class="ident" id="8481757">err</span>&nbsp;<span class="op" id="8481761">!=</span>&nbsp;<span class="ident" id="8481764">nil</span>&nbsp;<span class="op" id="8481768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481773">t</span><span class="op" id="8481774">.</span><span class="ident" id="8481775">Fatalf</span><span class="op" id="8481781">(</span><span class="string" id="8481782">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8481817">,</span>&nbsp;<span class="ident" id="8481819">net</span><span class="op" id="8481822">,</span>&nbsp;<span class="ident" id="8481824">laddr</span><span class="op" id="8481829">,</span>&nbsp;<span class="ident" id="8481831">taddr</span><span class="op" id="8481836">,</span>&nbsp;<span class="ident" id="8481838">err</span><span class="op" id="8481841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481848">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481851">defer</span>&nbsp;<span class="ident" id="8481857">c</span><span class="op" id="8481858">.</span><span class="ident" id="8481859">Close</span><span class="op" id="8481864">(</span><span class="op" id="8481865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481868">c</span><span class="op" id="8481869">.</span><span class="ident" id="8481870">SetReadDeadline</span><span class="op" id="8481885">(</span><span class="ident" id="8481886">time</span><span class="op" id="8481890">.</span><span class="ident" id="8481891">Now</span><span class="op" id="8481894">(</span><span class="op" id="8481895">)</span><span class="op" id="8481896">.</span><span class="ident" id="8481897">Add</span><span class="op" id="8481900">(</span><span class="num" id="8481901">1</span>&nbsp;<span class="op" id="8481903">*</span>&nbsp;<span class="ident" id="8481905">time</span><span class="op" id="8481909">.</span><span class="ident" id="8481910">Second</span><span class="op" id="8481916">)</span><span class="op" id="8481917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481921">var</span>&nbsp;<span class="ident" id="8481925">wb</span>&nbsp;<span class="op" id="8481928">[</span><span class="op" id="8481929">]</span><span class="builtintype" id="8481930">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481936">if</span>&nbsp;<span class="op" id="8481939">!</span><span class="ident" id="8481940">isEmpty</span>&nbsp;<span class="op" id="8481948">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481952">wb</span>&nbsp;<span class="op" id="8481955">=</span>&nbsp;<span class="op" id="8481957">[</span><span class="op" id="8481958">]</span><span class="builtintype" id="8481959">byte</span><span class="op" id="8481963">(</span><span class="string" id="8481964">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8481994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482000">if</span>&nbsp;<span class="ident" id="8482003">n</span><span class="op" id="8482004">,</span>&nbsp;<span class="ident" id="8482006">err</span>&nbsp;<span class="op" id="8482010">:=</span>&nbsp;<span class="ident" id="8482013">c</span><span class="op" id="8482014">.</span><span class="ident" id="8482015">Write</span><span class="op" id="8482020">(</span><span class="ident" id="8482021">wb</span><span class="op" id="8482023">[</span><span class="num" id="8482024">0</span><span class="op" id="8482025">:</span><span class="op" id="8482026">]</span><span class="op" id="8482027">)</span><span class="op" id="8482028">;</span>&nbsp;<span class="ident" id="8482030">err</span>&nbsp;<span class="op" id="8482034">!=</span>&nbsp;<span class="ident" id="8482037">nil</span>&nbsp;<span class="op" id="8482041">||</span>&nbsp;<span class="ident" id="8482044">n</span>&nbsp;<span class="op" id="8482046">!=</span>&nbsp;<span class="builtinfunc" id="8482049">len</span><span class="op" id="8482052">(</span><span class="ident" id="8482053">wb</span><span class="op" id="8482055">)</span>&nbsp;<span class="op" id="8482057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482061">t</span><span class="op" id="8482062">.</span><span class="ident" id="8482063">Fatalf</span><span class="op" id="8482069">(</span><span class="string" id="8482070">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8482108">,</span>&nbsp;<span class="ident" id="8482110">n</span><span class="op" id="8482111">,</span>&nbsp;<span class="ident" id="8482113">err</span><span class="op" id="8482116">,</span>&nbsp;<span class="builtinfunc" id="8482118">len</span><span class="op" id="8482121">(</span><span class="ident" id="8482122">wb</span><span class="op" id="8482124">)</span><span class="op" id="8482125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482128">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482132">rb</span>&nbsp;<span class="op" id="8482135">:=</span>&nbsp;<span class="builtinfunc" id="8482138">make</span><span class="op" id="8482142">(</span><span class="op" id="8482143">[</span><span class="op" id="8482144">]</span><span class="builtintype" id="8482145">byte</span><span class="op" id="8482149">,</span>&nbsp;<span class="num" id="8482151">1024</span><span class="op" id="8482155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482158">if</span>&nbsp;<span class="ident" id="8482161">n</span><span class="op" id="8482162">,</span>&nbsp;<span class="ident" id="8482164">err</span>&nbsp;<span class="op" id="8482168">:=</span>&nbsp;<span class="ident" id="8482171">c</span><span class="op" id="8482172">.</span><span class="ident" id="8482173">Read</span><span class="op" id="8482177">(</span><span class="ident" id="8482178">rb</span><span class="op" id="8482180">[</span><span class="num" id="8482181">0</span><span class="op" id="8482182">:</span><span class="op" id="8482183">]</span><span class="op" id="8482184">)</span><span class="op" id="8482185">;</span>&nbsp;<span class="ident" id="8482187">err</span>&nbsp;<span class="op" id="8482191">!=</span>&nbsp;<span class="ident" id="8482194">nil</span>&nbsp;<span class="op" id="8482198">||</span>&nbsp;<span class="ident" id="8482201">n</span>&nbsp;<span class="op" id="8482203">!=</span>&nbsp;<span class="builtinfunc" id="8482206">len</span><span class="op" id="8482209">(</span><span class="ident" id="8482210">wb</span><span class="op" id="8482212">)</span>&nbsp;<span class="op" id="8482214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482218">t</span><span class="op" id="8482219">.</span><span class="ident" id="8482220">Fatalf</span><span class="op" id="8482226">(</span><span class="string" id="8482227">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8482264">,</span>&nbsp;<span class="ident" id="8482266">n</span><span class="op" id="8482267">,</span>&nbsp;<span class="ident" id="8482269">err</span><span class="op" id="8482272">,</span>&nbsp;<span class="builtinfunc" id="8482274">len</span><span class="op" id="8482277">(</span><span class="ident" id="8482278">wb</span><span class="op" id="8482280">)</span><span class="op" id="8482281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482284">}</span><br>
<span class="lineno">425</span><span class="op" id="8482286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8482289">func</span>&nbsp;<span class="ident" id="8482294">runDatagramPacketConnClient</span><span class="op" id="8482321">(</span><span class="ident" id="8482322">t</span>&nbsp;<span class="op" id="8482324">*</span><span class="ident" id="8482325">testing</span><span class="op" id="8482332">.</span><span class="ident" id="8482333">T</span><span class="op" id="8482334">,</span>&nbsp;<span class="ident" id="8482336">net</span><span class="op" id="8482339">,</span>&nbsp;<span class="ident" id="8482341">laddr</span><span class="op" id="8482346">,</span>&nbsp;<span class="ident" id="8482348">taddr</span>&nbsp;<span class="builtintype" id="8482354">string</span><span class="op" id="8482360">,</span>&nbsp;<span class="ident" id="8482362">isEmpty</span>&nbsp;<span class="builtintype" id="8482370">bool</span><span class="op" id="8482374">)</span>&nbsp;<span class="op" id="8482376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482379">var</span>&nbsp;<span class="ident" id="8482383">ra</span>&nbsp;<span class="ident" id="8482386">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482392">var</span>&nbsp;<span class="ident" id="8482396">err</span>&nbsp;<span class="builtintype" id="8482400">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482407">switch</span>&nbsp;<span class="ident" id="8482414">net</span>&nbsp;<span class="op" id="8482418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482421">case</span>&nbsp;<span class="string" id="8482426">&#34;udp&#34;</span><span class="op" id="8482431">,</span>&nbsp;<span class="string" id="8482433">&#34;udp4&#34;</span><span class="op" id="8482439">,</span>&nbsp;<span class="string" id="8482441">&#34;udp6&#34;</span><span class="op" id="8482447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482451">ra</span><span class="op" id="8482453">,</span>&nbsp;<span class="ident" id="8482455">err</span>&nbsp;<span class="op" id="8482459">=</span>&nbsp;<span class="ident" id="8482461">ResolveUDPAddr</span><span class="op" id="8482475">(</span><span class="ident" id="8482476">net</span><span class="op" id="8482479">,</span>&nbsp;<span class="ident" id="8482481">taddr</span><span class="op" id="8482486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482490">if</span>&nbsp;<span class="ident" id="8482493">err</span>&nbsp;<span class="op" id="8482497">!=</span>&nbsp;<span class="ident" id="8482500">nil</span>&nbsp;<span class="op" id="8482504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482509">t</span><span class="op" id="8482510">.</span><span class="ident" id="8482511">Fatalf</span><span class="op" id="8482517">(</span><span class="string" id="8482518">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8482553">,</span>&nbsp;<span class="ident" id="8482555">net</span><span class="op" id="8482558">,</span>&nbsp;<span class="ident" id="8482560">taddr</span><span class="op" id="8482565">,</span>&nbsp;<span class="ident" id="8482567">err</span><span class="op" id="8482570">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482577">case</span>&nbsp;<span class="string" id="8482582">&#34;unixgram&#34;</span><span class="op" id="8482592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482596">ra</span><span class="op" id="8482598">,</span>&nbsp;<span class="ident" id="8482600">err</span>&nbsp;<span class="op" id="8482604">=</span>&nbsp;<span class="ident" id="8482606">ResolveUnixAddr</span><span class="op" id="8482621">(</span><span class="ident" id="8482622">net</span><span class="op" id="8482625">,</span>&nbsp;<span class="ident" id="8482627">taddr</span><span class="op" id="8482632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482636">if</span>&nbsp;<span class="ident" id="8482639">err</span>&nbsp;<span class="op" id="8482643">!=</span>&nbsp;<span class="ident" id="8482646">nil</span>&nbsp;<span class="op" id="8482650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482655">t</span><span class="op" id="8482656">.</span><span class="ident" id="8482657">Fatalf</span><span class="op" id="8482663">(</span><span class="string" id="8482664">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8482700">,</span>&nbsp;<span class="ident" id="8482702">net</span><span class="op" id="8482705">,</span>&nbsp;<span class="ident" id="8482707">taddr</span><span class="op" id="8482712">,</span>&nbsp;<span class="ident" id="8482714">err</span><span class="op" id="8482717">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482727">c</span><span class="op" id="8482728">,</span>&nbsp;<span class="ident" id="8482730">err</span>&nbsp;<span class="op" id="8482734">:=</span>&nbsp;<span class="ident" id="8482737">ListenPacket</span><span class="op" id="8482749">(</span><span class="ident" id="8482750">net</span><span class="op" id="8482753">,</span>&nbsp;<span class="ident" id="8482755">laddr</span><span class="op" id="8482760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482763">if</span>&nbsp;<span class="ident" id="8482766">err</span>&nbsp;<span class="op" id="8482770">!=</span>&nbsp;<span class="ident" id="8482773">nil</span>&nbsp;<span class="op" id="8482777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482781">t</span><span class="op" id="8482782">.</span><span class="ident" id="8482783">Fatalf</span><span class="op" id="8482789">(</span><span class="string" id="8482790">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="8482822">,</span>&nbsp;<span class="ident" id="8482824">net</span><span class="op" id="8482827">,</span>&nbsp;<span class="ident" id="8482829">laddr</span><span class="op" id="8482834">,</span>&nbsp;<span class="ident" id="8482836">err</span><span class="op" id="8482839">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482845">defer</span>&nbsp;<span class="ident" id="8482851">c</span><span class="op" id="8482852">.</span><span class="ident" id="8482853">Close</span><span class="op" id="8482858">(</span><span class="op" id="8482859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482862">c</span><span class="op" id="8482863">.</span><span class="ident" id="8482864">SetReadDeadline</span><span class="op" id="8482879">(</span><span class="ident" id="8482880">time</span><span class="op" id="8482884">.</span><span class="ident" id="8482885">Now</span><span class="op" id="8482888">(</span><span class="op" id="8482889">)</span><span class="op" id="8482890">.</span><span class="ident" id="8482891">Add</span><span class="op" id="8482894">(</span><span class="num" id="8482895">1</span>&nbsp;<span class="op" id="8482897">*</span>&nbsp;<span class="ident" id="8482899">time</span><span class="op" id="8482903">.</span><span class="ident" id="8482904">Second</span><span class="op" id="8482910">)</span><span class="op" id="8482911">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482915">var</span>&nbsp;<span class="ident" id="8482919">wb</span>&nbsp;<span class="op" id="8482922">[</span><span class="op" id="8482923">]</span><span class="builtintype" id="8482924">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482930">if</span>&nbsp;<span class="op" id="8482933">!</span><span class="ident" id="8482934">isEmpty</span>&nbsp;<span class="op" id="8482942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482946">wb</span>&nbsp;<span class="op" id="8482949">=</span>&nbsp;<span class="op" id="8482951">[</span><span class="op" id="8482952">]</span><span class="builtintype" id="8482953">byte</span><span class="op" id="8482957">(</span><span class="string" id="8482958">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="8483002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483008">if</span>&nbsp;<span class="ident" id="8483011">n</span><span class="op" id="8483012">,</span>&nbsp;<span class="ident" id="8483014">err</span>&nbsp;<span class="op" id="8483018">:=</span>&nbsp;<span class="ident" id="8483021">c</span><span class="op" id="8483022">.</span><span class="ident" id="8483023">WriteTo</span><span class="op" id="8483030">(</span><span class="ident" id="8483031">wb</span><span class="op" id="8483033">[</span><span class="num" id="8483034">0</span><span class="op" id="8483035">:</span><span class="op" id="8483036">]</span><span class="op" id="8483037">,</span>&nbsp;<span class="ident" id="8483039">ra</span><span class="op" id="8483041">)</span><span class="op" id="8483042">;</span>&nbsp;<span class="ident" id="8483044">err</span>&nbsp;<span class="op" id="8483048">!=</span>&nbsp;<span class="ident" id="8483051">nil</span>&nbsp;<span class="op" id="8483055">||</span>&nbsp;<span class="ident" id="8483058">n</span>&nbsp;<span class="op" id="8483060">!=</span>&nbsp;<span class="builtinfunc" id="8483063">len</span><span class="op" id="8483066">(</span><span class="ident" id="8483067">wb</span><span class="op" id="8483069">)</span>&nbsp;<span class="op" id="8483071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483075">t</span><span class="op" id="8483076">.</span><span class="ident" id="8483077">Fatalf</span><span class="op" id="8483083">(</span><span class="string" id="8483084">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8483128">,</span>&nbsp;<span class="ident" id="8483130">ra</span><span class="op" id="8483132">,</span>&nbsp;<span class="ident" id="8483134">n</span><span class="op" id="8483135">,</span>&nbsp;<span class="ident" id="8483137">err</span><span class="op" id="8483140">,</span>&nbsp;<span class="builtinfunc" id="8483142">len</span><span class="op" id="8483145">(</span><span class="ident" id="8483146">wb</span><span class="op" id="8483148">)</span><span class="op" id="8483149">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483156">rb</span>&nbsp;<span class="op" id="8483159">:=</span>&nbsp;<span class="builtinfunc" id="8483162">make</span><span class="op" id="8483166">(</span><span class="op" id="8483167">[</span><span class="op" id="8483168">]</span><span class="builtintype" id="8483169">byte</span><span class="op" id="8483173">,</span>&nbsp;<span class="num" id="8483175">1024</span><span class="op" id="8483179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483182">if</span>&nbsp;<span class="ident" id="8483185">n</span><span class="op" id="8483186">,</span>&nbsp;<span class="ident" id="8483188">_</span><span class="op" id="8483189">,</span>&nbsp;<span class="ident" id="8483191">err</span>&nbsp;<span class="op" id="8483195">:=</span>&nbsp;<span class="ident" id="8483198">c</span><span class="op" id="8483199">.</span><span class="ident" id="8483200">ReadFrom</span><span class="op" id="8483208">(</span><span class="ident" id="8483209">rb</span><span class="op" id="8483211">[</span><span class="num" id="8483212">0</span><span class="op" id="8483213">:</span><span class="op" id="8483214">]</span><span class="op" id="8483215">)</span><span class="op" id="8483216">;</span>&nbsp;<span class="ident" id="8483218">err</span>&nbsp;<span class="op" id="8483222">!=</span>&nbsp;<span class="ident" id="8483225">nil</span>&nbsp;<span class="op" id="8483229">||</span>&nbsp;<span class="ident" id="8483232">n</span>&nbsp;<span class="op" id="8483234">!=</span>&nbsp;<span class="builtinfunc" id="8483237">len</span><span class="op" id="8483240">(</span><span class="ident" id="8483241">wb</span><span class="op" id="8483243">)</span>&nbsp;<span class="op" id="8483245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483249">t</span><span class="op" id="8483250">.</span><span class="ident" id="8483251">Fatalf</span><span class="op" id="8483257">(</span><span class="string" id="8483258">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8483299">,</span>&nbsp;<span class="ident" id="8483301">n</span><span class="op" id="8483302">,</span>&nbsp;<span class="ident" id="8483304">err</span><span class="op" id="8483307">,</span>&nbsp;<span class="builtinfunc" id="8483309">len</span><span class="op" id="8483312">(</span><span class="ident" id="8483313">wb</span><span class="op" id="8483315">)</span><span class="op" id="8483316">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483319">}</span><br>
<span class="lineno"></span><span class="op" id="8483321">}</span>
</div>
</body>
</html>
