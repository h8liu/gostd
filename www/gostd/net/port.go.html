<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3375288">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3375344">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3375398">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3375449">//&nbsp;Network&nbsp;service&nbsp;port&nbsp;manipulations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3375488">package</span>&nbsp;<span class="ident" id="3375496">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3375501">//&nbsp;parsePort&nbsp;parses&nbsp;port&nbsp;as&nbsp;a&nbsp;network&nbsp;service&nbsp;port&nbsp;number&nbsp;for&nbsp;both</span><br>
<span class="lineno">10</span><span class="comment" id="3375568">//&nbsp;TCP&nbsp;and&nbsp;UDP.</span><br>
<span class="lineno"></span><span class="keyword" id="3375584">func</span>&nbsp;<span class="ident" id="3375589">parsePort</span><span class="op" id="3375598">(</span><span class="ident" id="3375599">net</span><span class="op" id="3375602">,</span>&nbsp;<span class="ident" id="3375604">port</span>&nbsp;<span class="builtintype" id="3375609">string</span><span class="op" id="3375615">)</span>&nbsp;<span class="op" id="3375617">(</span><span class="builtintype" id="3375618">int</span><span class="op" id="3375621">,</span>&nbsp;<span class="builtintype" id="3375623">error</span><span class="op" id="3375628">)</span>&nbsp;<span class="op" id="3375630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375633">p</span><span class="op" id="3375634">,</span>&nbsp;<span class="ident" id="3375636">i</span><span class="op" id="3375637">,</span>&nbsp;<span class="ident" id="3375639">ok</span>&nbsp;<span class="op" id="3375642">:=</span>&nbsp;<span class="ident" id="3375645">dtoi</span><span class="op" id="3375649">(</span><span class="ident" id="3375650">port</span><span class="op" id="3375654">,</span>&nbsp;<span class="num" id="3375656">0</span><span class="op" id="3375657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375660">if</span>&nbsp;<span class="op" id="3375663">!</span><span class="ident" id="3375664">ok</span>&nbsp;<span class="op" id="3375667">||</span>&nbsp;<span class="ident" id="3375670">i</span>&nbsp;<span class="op" id="3375672">!=</span>&nbsp;<span class="builtinfunc" id="3375675">len</span><span class="op" id="3375678">(</span><span class="ident" id="3375679">port</span><span class="op" id="3375683">)</span>&nbsp;<span class="op" id="3375685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375689">var</span>&nbsp;<span class="ident" id="3375693">err</span>&nbsp;<span class="builtintype" id="3375697">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375705">p</span><span class="op" id="3375706">,</span>&nbsp;<span class="ident" id="3375708">err</span>&nbsp;<span class="op" id="3375712">=</span>&nbsp;<span class="ident" id="3375714">LookupPort</span><span class="op" id="3375724">(</span><span class="ident" id="3375725">net</span><span class="op" id="3375728">,</span>&nbsp;<span class="ident" id="3375730">port</span><span class="op" id="3375734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375738">if</span>&nbsp;<span class="ident" id="3375741">err</span>&nbsp;<span class="op" id="3375745">!=</span>&nbsp;<span class="ident" id="3375748">nil</span>&nbsp;<span class="op" id="3375752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375757">return</span>&nbsp;<span class="num" id="3375764">0</span><span class="op" id="3375765">,</span>&nbsp;<span class="ident" id="3375767">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3375773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3375776">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375779">if</span>&nbsp;<span class="ident" id="3375782">p</span>&nbsp;<span class="op" id="3375784">&lt;</span>&nbsp;<span class="num" id="3375786">0</span>&nbsp;<span class="op" id="3375788">||</span>&nbsp;<span class="ident" id="3375791">p</span>&nbsp;<span class="op" id="3375793">&gt;</span>&nbsp;<span class="num" id="3375795">0xFFFF</span>&nbsp;<span class="op" id="3375802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375806">return</span>&nbsp;<span class="num" id="3375813">0</span><span class="op" id="3375814">,</span>&nbsp;<span class="op" id="3375816">&amp;</span><span class="ident" id="3375817">AddrError</span><span class="op" id="3375826">{</span><span class="string" id="3375827">&#34;invalid&nbsp;port&#34;</span><span class="op" id="3375841">,</span>&nbsp;<span class="ident" id="3375843">port</span><span class="op" id="3375847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3375850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375853">return</span>&nbsp;<span class="ident" id="3375860">p</span><span class="op" id="3375861">,</span>&nbsp;<span class="ident" id="3375863">nil</span><br>
<span class="lineno"></span><span class="op" id="3375867">}</span>
</div>
</body>
</html>
