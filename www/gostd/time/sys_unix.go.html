<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2600070">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2600125">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2600179">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2600230">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2600300">package</span>&nbsp;<span class="ident" id="2600308">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2600314">import</span>&nbsp;<span class="op" id="2600321">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2600324">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2600334">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2600344">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2600347">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2600391">func</span>&nbsp;<span class="ident" id="2600396">interrupt</span><span class="op" id="2600405">(</span><span class="op" id="2600406">)</span>&nbsp;<span class="op" id="2600408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600411">syscall</span><span class="op" id="2600418">.</span><span class="ident" id="2600419">Kill</span><span class="op" id="2600423">(</span><span class="ident" id="2600424">syscall</span><span class="op" id="2600431">.</span><span class="ident" id="2600432">Getpid</span><span class="op" id="2600438">(</span><span class="op" id="2600439">)</span><span class="op" id="2600440">,</span>&nbsp;<span class="ident" id="2600442">syscall</span><span class="op" id="2600449">.</span><span class="ident" id="2600450">SIGCHLD</span><span class="op" id="2600457">)</span><br>
<span class="lineno"></span><span class="op" id="2600459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2600462">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2600523">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2600591">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2600638">func</span>&nbsp;<span class="ident" id="2600643">readFile</span><span class="op" id="2600651">(</span><span class="ident" id="2600652">name</span>&nbsp;<span class="builtintype" id="2600657">string</span><span class="op" id="2600663">)</span>&nbsp;<span class="op" id="2600665">(</span><span class="op" id="2600666">[</span><span class="op" id="2600667">]</span><span class="builtintype" id="2600668">byte</span><span class="op" id="2600672">,</span>&nbsp;<span class="builtintype" id="2600674">error</span><span class="op" id="2600679">)</span>&nbsp;<span class="op" id="2600681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600684">f</span><span class="op" id="2600685">,</span>&nbsp;<span class="ident" id="2600687">err</span>&nbsp;<span class="op" id="2600691">:=</span>&nbsp;<span class="ident" id="2600694">syscall</span><span class="op" id="2600701">.</span><span class="ident" id="2600702">Open</span><span class="op" id="2600706">(</span><span class="ident" id="2600707">name</span><span class="op" id="2600711">,</span>&nbsp;<span class="ident" id="2600713">syscall</span><span class="op" id="2600720">.</span><span class="ident" id="2600721">O_RDONLY</span><span class="op" id="2600729">,</span>&nbsp;<span class="num" id="2600731">0</span><span class="op" id="2600732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600735">if</span>&nbsp;<span class="ident" id="2600738">err</span>&nbsp;<span class="op" id="2600742">!=</span>&nbsp;<span class="ident" id="2600745">nil</span>&nbsp;<span class="op" id="2600749">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600753">return</span>&nbsp;<span class="ident" id="2600760">nil</span><span class="op" id="2600763">,</span>&nbsp;<span class="ident" id="2600765">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600773">defer</span>&nbsp;<span class="ident" id="2600779">syscall</span><span class="op" id="2600786">.</span><span class="ident" id="2600787">Close</span><span class="op" id="2600792">(</span><span class="ident" id="2600793">f</span><span class="op" id="2600794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600797">var</span>&nbsp;<span class="op" id="2600801">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600805">buf</span>&nbsp;<span class="op" id="2600809">[</span><span class="num" id="2600810">4096</span><span class="op" id="2600814">]</span><span class="builtintype" id="2600815">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600822">ret</span>&nbsp;<span class="op" id="2600826">[</span><span class="op" id="2600827">]</span><span class="builtintype" id="2600828">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600835">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2600839">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600847">for</span>&nbsp;<span class="op" id="2600851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600855">n</span><span class="op" id="2600856">,</span>&nbsp;<span class="ident" id="2600858">err</span>&nbsp;<span class="op" id="2600862">=</span>&nbsp;<span class="ident" id="2600864">syscall</span><span class="op" id="2600871">.</span><span class="ident" id="2600872">Read</span><span class="op" id="2600876">(</span><span class="ident" id="2600877">f</span><span class="op" id="2600878">,</span>&nbsp;<span class="ident" id="2600880">buf</span><span class="op" id="2600883">[</span><span class="op" id="2600884">:</span><span class="op" id="2600885">]</span><span class="op" id="2600886">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600890">if</span>&nbsp;<span class="ident" id="2600893">n</span>&nbsp;<span class="op" id="2600895">&gt;</span>&nbsp;<span class="num" id="2600897">0</span>&nbsp;<span class="op" id="2600899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600904">ret</span>&nbsp;<span class="op" id="2600908">=</span>&nbsp;<span class="builtinfunc" id="2600910">append</span><span class="op" id="2600916">(</span><span class="ident" id="2600917">ret</span><span class="op" id="2600920">,</span>&nbsp;<span class="ident" id="2600922">buf</span><span class="op" id="2600925">[</span><span class="op" id="2600926">:</span><span class="ident" id="2600927">n</span><span class="op" id="2600928">]</span><span class="op" id="2600929">...</span><span class="op" id="2600932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600940">if</span>&nbsp;<span class="ident" id="2600943">n</span>&nbsp;<span class="op" id="2600945">==</span>&nbsp;<span class="num" id="2600948">0</span>&nbsp;<span class="op" id="2600950">||</span>&nbsp;<span class="ident" id="2600953">err</span>&nbsp;<span class="op" id="2600957">!=</span>&nbsp;<span class="ident" id="2600960">nil</span>&nbsp;<span class="op" id="2600964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600969">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600983">return</span>&nbsp;<span class="ident" id="2600990">ret</span><span class="op" id="2600993">,</span>&nbsp;<span class="ident" id="2600995">err</span><br>
<span class="lineno"></span><span class="op" id="2600999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2601002">func</span>&nbsp;<span class="ident" id="2601007">open</span><span class="op" id="2601011">(</span><span class="ident" id="2601012">name</span>&nbsp;<span class="builtintype" id="2601017">string</span><span class="op" id="2601023">)</span>&nbsp;<span class="op" id="2601025">(</span><span class="builtintype" id="2601026">uintptr</span><span class="op" id="2601033">,</span>&nbsp;<span class="builtintype" id="2601035">error</span><span class="op" id="2601040">)</span>&nbsp;<span class="op" id="2601042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601045">fd</span><span class="op" id="2601047">,</span>&nbsp;<span class="ident" id="2601049">err</span>&nbsp;<span class="op" id="2601053">:=</span>&nbsp;<span class="ident" id="2601056">syscall</span><span class="op" id="2601063">.</span><span class="ident" id="2601064">Open</span><span class="op" id="2601068">(</span><span class="ident" id="2601069">name</span><span class="op" id="2601073">,</span>&nbsp;<span class="ident" id="2601075">syscall</span><span class="op" id="2601082">.</span><span class="ident" id="2601083">O_RDONLY</span><span class="op" id="2601091">,</span>&nbsp;<span class="num" id="2601093">0</span><span class="op" id="2601094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601097">if</span>&nbsp;<span class="ident" id="2601100">err</span>&nbsp;<span class="op" id="2601104">!=</span>&nbsp;<span class="ident" id="2601107">nil</span>&nbsp;<span class="op" id="2601111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601115">return</span>&nbsp;<span class="num" id="2601122">0</span><span class="op" id="2601123">,</span>&nbsp;<span class="ident" id="2601125">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601130">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601133">return</span>&nbsp;<span class="builtintype" id="2601140">uintptr</span><span class="op" id="2601147">(</span><span class="ident" id="2601148">fd</span><span class="op" id="2601150">)</span><span class="op" id="2601151">,</span>&nbsp;<span class="ident" id="2601153">nil</span><br>
<span class="lineno"></span><span class="op" id="2601157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2601160">func</span>&nbsp;<span class="ident" id="2601165">closefd</span><span class="op" id="2601172">(</span><span class="ident" id="2601173">fd</span>&nbsp;<span class="builtintype" id="2601176">uintptr</span><span class="op" id="2601183">)</span>&nbsp;<span class="op" id="2601185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601188">syscall</span><span class="op" id="2601195">.</span><span class="ident" id="2601196">Close</span><span class="op" id="2601201">(</span><span class="builtintype" id="2601202">int</span><span class="op" id="2601205">(</span><span class="ident" id="2601206">fd</span><span class="op" id="2601208">)</span><span class="op" id="2601209">)</span><br>
<span class="lineno">55</span><span class="op" id="2601211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2601214">func</span>&nbsp;<span class="ident" id="2601219">preadn</span><span class="op" id="2601225">(</span><span class="ident" id="2601226">fd</span>&nbsp;<span class="builtintype" id="2601229">uintptr</span><span class="op" id="2601236">,</span>&nbsp;<span class="ident" id="2601238">buf</span>&nbsp;<span class="op" id="2601242">[</span><span class="op" id="2601243">]</span><span class="builtintype" id="2601244">byte</span><span class="op" id="2601248">,</span>&nbsp;<span class="ident" id="2601250">off</span>&nbsp;<span class="builtintype" id="2601254">int</span><span class="op" id="2601257">)</span>&nbsp;<span class="builtintype" id="2601259">error</span>&nbsp;<span class="op" id="2601265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601268">whence</span>&nbsp;<span class="op" id="2601275">:=</span>&nbsp;<span class="num" id="2601278">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601281">if</span>&nbsp;<span class="ident" id="2601284">off</span>&nbsp;<span class="op" id="2601288">&lt;</span>&nbsp;<span class="num" id="2601290">0</span>&nbsp;<span class="op" id="2601292">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601296">whence</span>&nbsp;<span class="op" id="2601303">=</span>&nbsp;<span class="num" id="2601305">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601311">if</span>&nbsp;<span class="ident" id="2601314">_</span><span class="op" id="2601315">,</span>&nbsp;<span class="ident" id="2601317">err</span>&nbsp;<span class="op" id="2601321">:=</span>&nbsp;<span class="ident" id="2601324">syscall</span><span class="op" id="2601331">.</span><span class="ident" id="2601332">Seek</span><span class="op" id="2601336">(</span><span class="builtintype" id="2601337">int</span><span class="op" id="2601340">(</span><span class="ident" id="2601341">fd</span><span class="op" id="2601343">)</span><span class="op" id="2601344">,</span>&nbsp;<span class="ident" id="2601346">int64</span><span class="op" id="2601351">(</span><span class="ident" id="2601352">off</span><span class="op" id="2601355">)</span><span class="op" id="2601356">,</span>&nbsp;<span class="ident" id="2601358">whence</span><span class="op" id="2601364">)</span><span class="op" id="2601365">;</span>&nbsp;<span class="ident" id="2601367">err</span>&nbsp;<span class="op" id="2601371">!=</span>&nbsp;<span class="ident" id="2601374">nil</span>&nbsp;<span class="op" id="2601378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601382">return</span>&nbsp;<span class="ident" id="2601389">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601394">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601397">for</span>&nbsp;<span class="builtinfunc" id="2601401">len</span><span class="op" id="2601404">(</span><span class="ident" id="2601405">buf</span><span class="op" id="2601408">)</span>&nbsp;<span class="op" id="2601410">&gt;</span>&nbsp;<span class="num" id="2601412">0</span>&nbsp;<span class="op" id="2601414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601418">m</span><span class="op" id="2601419">,</span>&nbsp;<span class="ident" id="2601421">err</span>&nbsp;<span class="op" id="2601425">:=</span>&nbsp;<span class="ident" id="2601428">syscall</span><span class="op" id="2601435">.</span><span class="ident" id="2601436">Read</span><span class="op" id="2601440">(</span><span class="builtintype" id="2601441">int</span><span class="op" id="2601444">(</span><span class="ident" id="2601445">fd</span><span class="op" id="2601447">)</span><span class="op" id="2601448">,</span>&nbsp;<span class="ident" id="2601450">buf</span><span class="op" id="2601453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601457">if</span>&nbsp;<span class="ident" id="2601460">m</span>&nbsp;<span class="op" id="2601462">&lt;=</span>&nbsp;<span class="num" id="2601465">0</span>&nbsp;<span class="op" id="2601467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601472">if</span>&nbsp;<span class="ident" id="2601475">err</span>&nbsp;<span class="op" id="2601479">==</span>&nbsp;<span class="ident" id="2601482">nil</span>&nbsp;<span class="op" id="2601486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601492">return</span>&nbsp;<span class="ident" id="2601499">errors</span><span class="op" id="2601505">.</span><span class="ident" id="2601506">New</span><span class="op" id="2601509">(</span><span class="string" id="2601510">&#34;short&nbsp;read&#34;</span><span class="op" id="2601522">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601532">return</span>&nbsp;<span class="ident" id="2601539">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601549">buf</span>&nbsp;<span class="op" id="2601553">=</span>&nbsp;<span class="ident" id="2601555">buf</span><span class="op" id="2601558">[</span><span class="ident" id="2601559">m</span><span class="op" id="2601560">:</span><span class="op" id="2601561">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601564">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601567">return</span>&nbsp;<span class="ident" id="2601574">nil</span><br>
<span class="lineno"></span><span class="op" id="2601578">}</span>
</div>
</body>
</html>
