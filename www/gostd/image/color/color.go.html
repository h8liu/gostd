<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3784935">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3784990">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3785044">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3785095">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="3785146">package</span>&nbsp;<span class="ident" id="3785154">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3785161">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="3785238">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="3785270">type</span>&nbsp;<span class="ident" id="3785275">Color</span>&nbsp;<span class="keyword" id="3785281">interface</span>&nbsp;<span class="op" id="3785291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785294">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785369">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785445">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785521">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785535">RGBA</span><span class="op" id="3785539">(</span><span class="op" id="3785540">)</span>&nbsp;<span class="op" id="3785542">(</span><span class="ident" id="3785543">r</span><span class="op" id="3785544">,</span>&nbsp;<span class="ident" id="3785546">g</span><span class="op" id="3785547">,</span>&nbsp;<span class="ident" id="3785549">b</span><span class="op" id="3785550">,</span>&nbsp;<span class="ident" id="3785552">a</span>&nbsp;<span class="builtintype" id="3785554">uint32</span><span class="op" id="3785560">)</span><br>
<span class="lineno"></span><span class="op" id="3785562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3785565">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3785632">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="3785689">type</span>&nbsp;<span class="ident" id="3785694">RGBA</span>&nbsp;<span class="keyword" id="3785699">struct</span>&nbsp;<span class="op" id="3785706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785709">R</span><span class="op" id="3785710">,</span>&nbsp;<span class="ident" id="3785712">G</span><span class="op" id="3785713">,</span>&nbsp;<span class="ident" id="3785715">B</span><span class="op" id="3785716">,</span>&nbsp;<span class="ident" id="3785718">A</span>&nbsp;<span class="builtintype" id="3785720">uint8</span><br>
<span class="lineno"></span><span class="op" id="3785726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3785729">func</span>&nbsp;<span class="op" id="3785734">(</span><span class="ident" id="3785735">c</span>&nbsp;<span class="ident" id="3785737">RGBA</span><span class="op" id="3785741">)</span>&nbsp;<span class="ident" id="3785743">RGBA</span><span class="op" id="3785747">(</span><span class="op" id="3785748">)</span>&nbsp;<span class="op" id="3785750">(</span><span class="ident" id="3785751">r</span><span class="op" id="3785752">,</span>&nbsp;<span class="ident" id="3785754">g</span><span class="op" id="3785755">,</span>&nbsp;<span class="ident" id="3785757">b</span><span class="op" id="3785758">,</span>&nbsp;<span class="ident" id="3785760">a</span>&nbsp;<span class="builtintype" id="3785762">uint32</span><span class="op" id="3785768">)</span>&nbsp;<span class="op" id="3785770">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785773">r</span>&nbsp;<span class="op" id="3785775">=</span>&nbsp;<span class="builtintype" id="3785777">uint32</span><span class="op" id="3785783">(</span><span class="ident" id="3785784">c</span><span class="op" id="3785785">.</span><span class="ident" id="3785786">R</span><span class="op" id="3785787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785790">r</span>&nbsp;<span class="op" id="3785792">|=</span>&nbsp;<span class="ident" id="3785795">r</span>&nbsp;<span class="op" id="3785797">&lt;&lt;</span>&nbsp;<span class="num" id="3785800">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785803">g</span>&nbsp;<span class="op" id="3785805">=</span>&nbsp;<span class="builtintype" id="3785807">uint32</span><span class="op" id="3785813">(</span><span class="ident" id="3785814">c</span><span class="op" id="3785815">.</span><span class="ident" id="3785816">G</span><span class="op" id="3785817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785820">g</span>&nbsp;<span class="op" id="3785822">|=</span>&nbsp;<span class="ident" id="3785825">g</span>&nbsp;<span class="op" id="3785827">&lt;&lt;</span>&nbsp;<span class="num" id="3785830">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785833">b</span>&nbsp;<span class="op" id="3785835">=</span>&nbsp;<span class="builtintype" id="3785837">uint32</span><span class="op" id="3785843">(</span><span class="ident" id="3785844">c</span><span class="op" id="3785845">.</span><span class="ident" id="3785846">B</span><span class="op" id="3785847">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785850">b</span>&nbsp;<span class="op" id="3785852">|=</span>&nbsp;<span class="ident" id="3785855">b</span>&nbsp;<span class="op" id="3785857">&lt;&lt;</span>&nbsp;<span class="num" id="3785860">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785863">a</span>&nbsp;<span class="op" id="3785865">=</span>&nbsp;<span class="builtintype" id="3785867">uint32</span><span class="op" id="3785873">(</span><span class="ident" id="3785874">c</span><span class="op" id="3785875">.</span><span class="ident" id="3785876">A</span><span class="op" id="3785877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785880">a</span>&nbsp;<span class="op" id="3785882">|=</span>&nbsp;<span class="ident" id="3785885">a</span>&nbsp;<span class="op" id="3785887">&lt;&lt;</span>&nbsp;<span class="num" id="3785890">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785893">return</span><br>
<span class="lineno"></span><span class="op" id="3785900">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3785903">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3785960">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3786018">type</span>&nbsp;<span class="ident" id="3786023">RGBA64</span>&nbsp;<span class="keyword" id="3786030">struct</span>&nbsp;<span class="op" id="3786037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786040">R</span><span class="op" id="3786041">,</span>&nbsp;<span class="ident" id="3786043">G</span><span class="op" id="3786044">,</span>&nbsp;<span class="ident" id="3786046">B</span><span class="op" id="3786047">,</span>&nbsp;<span class="ident" id="3786049">A</span>&nbsp;<span class="builtintype" id="3786051">uint16</span><br>
<span class="lineno">40</span><span class="op" id="3786058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3786061">func</span>&nbsp;<span class="op" id="3786066">(</span><span class="ident" id="3786067">c</span>&nbsp;<span class="ident" id="3786069">RGBA64</span><span class="op" id="3786075">)</span>&nbsp;<span class="ident" id="3786077">RGBA</span><span class="op" id="3786081">(</span><span class="op" id="3786082">)</span>&nbsp;<span class="op" id="3786084">(</span><span class="ident" id="3786085">r</span><span class="op" id="3786086">,</span>&nbsp;<span class="ident" id="3786088">g</span><span class="op" id="3786089">,</span>&nbsp;<span class="ident" id="3786091">b</span><span class="op" id="3786092">,</span>&nbsp;<span class="ident" id="3786094">a</span>&nbsp;<span class="builtintype" id="3786096">uint32</span><span class="op" id="3786102">)</span>&nbsp;<span class="op" id="3786104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786107">return</span>&nbsp;<span class="builtintype" id="3786114">uint32</span><span class="op" id="3786120">(</span><span class="ident" id="3786121">c</span><span class="op" id="3786122">.</span><span class="ident" id="3786123">R</span><span class="op" id="3786124">)</span><span class="op" id="3786125">,</span>&nbsp;<span class="builtintype" id="3786127">uint32</span><span class="op" id="3786133">(</span><span class="ident" id="3786134">c</span><span class="op" id="3786135">.</span><span class="ident" id="3786136">G</span><span class="op" id="3786137">)</span><span class="op" id="3786138">,</span>&nbsp;<span class="builtintype" id="3786140">uint32</span><span class="op" id="3786146">(</span><span class="ident" id="3786147">c</span><span class="op" id="3786148">.</span><span class="ident" id="3786149">B</span><span class="op" id="3786150">)</span><span class="op" id="3786151">,</span>&nbsp;<span class="builtintype" id="3786153">uint32</span><span class="op" id="3786159">(</span><span class="ident" id="3786160">c</span><span class="op" id="3786161">.</span><span class="ident" id="3786162">A</span><span class="op" id="3786163">)</span><br>
<span class="lineno"></span><span class="op" id="3786165">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3786168">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3786228">type</span>&nbsp;<span class="ident" id="3786233">NRGBA</span>&nbsp;<span class="keyword" id="3786239">struct</span>&nbsp;<span class="op" id="3786246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786249">R</span><span class="op" id="3786250">,</span>&nbsp;<span class="ident" id="3786252">G</span><span class="op" id="3786253">,</span>&nbsp;<span class="ident" id="3786255">B</span><span class="op" id="3786256">,</span>&nbsp;<span class="ident" id="3786258">A</span>&nbsp;<span class="builtintype" id="3786260">uint8</span><br>
<span class="lineno"></span><span class="op" id="3786266">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3786269">func</span>&nbsp;<span class="op" id="3786274">(</span><span class="ident" id="3786275">c</span>&nbsp;<span class="ident" id="3786277">NRGBA</span><span class="op" id="3786282">)</span>&nbsp;<span class="ident" id="3786284">RGBA</span><span class="op" id="3786288">(</span><span class="op" id="3786289">)</span>&nbsp;<span class="op" id="3786291">(</span><span class="ident" id="3786292">r</span><span class="op" id="3786293">,</span>&nbsp;<span class="ident" id="3786295">g</span><span class="op" id="3786296">,</span>&nbsp;<span class="ident" id="3786298">b</span><span class="op" id="3786299">,</span>&nbsp;<span class="ident" id="3786301">a</span>&nbsp;<span class="builtintype" id="3786303">uint32</span><span class="op" id="3786309">)</span>&nbsp;<span class="op" id="3786311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786314">r</span>&nbsp;<span class="op" id="3786316">=</span>&nbsp;<span class="builtintype" id="3786318">uint32</span><span class="op" id="3786324">(</span><span class="ident" id="3786325">c</span><span class="op" id="3786326">.</span><span class="ident" id="3786327">R</span><span class="op" id="3786328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786331">r</span>&nbsp;<span class="op" id="3786333">|=</span>&nbsp;<span class="ident" id="3786336">r</span>&nbsp;<span class="op" id="3786338">&lt;&lt;</span>&nbsp;<span class="num" id="3786341">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786344">r</span>&nbsp;<span class="op" id="3786346">*=</span>&nbsp;<span class="builtintype" id="3786349">uint32</span><span class="op" id="3786355">(</span><span class="ident" id="3786356">c</span><span class="op" id="3786357">.</span><span class="ident" id="3786358">A</span><span class="op" id="3786359">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786362">r</span>&nbsp;<span class="op" id="3786364">/=</span>&nbsp;<span class="num" id="3786367">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786373">g</span>&nbsp;<span class="op" id="3786375">=</span>&nbsp;<span class="builtintype" id="3786377">uint32</span><span class="op" id="3786383">(</span><span class="ident" id="3786384">c</span><span class="op" id="3786385">.</span><span class="ident" id="3786386">G</span><span class="op" id="3786387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786390">g</span>&nbsp;<span class="op" id="3786392">|=</span>&nbsp;<span class="ident" id="3786395">g</span>&nbsp;<span class="op" id="3786397">&lt;&lt;</span>&nbsp;<span class="num" id="3786400">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786403">g</span>&nbsp;<span class="op" id="3786405">*=</span>&nbsp;<span class="builtintype" id="3786408">uint32</span><span class="op" id="3786414">(</span><span class="ident" id="3786415">c</span><span class="op" id="3786416">.</span><span class="ident" id="3786417">A</span><span class="op" id="3786418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786421">g</span>&nbsp;<span class="op" id="3786423">/=</span>&nbsp;<span class="num" id="3786426">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786432">b</span>&nbsp;<span class="op" id="3786434">=</span>&nbsp;<span class="builtintype" id="3786436">uint32</span><span class="op" id="3786442">(</span><span class="ident" id="3786443">c</span><span class="op" id="3786444">.</span><span class="ident" id="3786445">B</span><span class="op" id="3786446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786449">b</span>&nbsp;<span class="op" id="3786451">|=</span>&nbsp;<span class="ident" id="3786454">b</span>&nbsp;<span class="op" id="3786456">&lt;&lt;</span>&nbsp;<span class="num" id="3786459">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786462">b</span>&nbsp;<span class="op" id="3786464">*=</span>&nbsp;<span class="builtintype" id="3786467">uint32</span><span class="op" id="3786473">(</span><span class="ident" id="3786474">c</span><span class="op" id="3786475">.</span><span class="ident" id="3786476">A</span><span class="op" id="3786477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786480">b</span>&nbsp;<span class="op" id="3786482">/=</span>&nbsp;<span class="num" id="3786485">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786491">a</span>&nbsp;<span class="op" id="3786493">=</span>&nbsp;<span class="builtintype" id="3786495">uint32</span><span class="op" id="3786501">(</span><span class="ident" id="3786502">c</span><span class="op" id="3786503">.</span><span class="ident" id="3786504">A</span><span class="op" id="3786505">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786508">a</span>&nbsp;<span class="op" id="3786510">|=</span>&nbsp;<span class="ident" id="3786513">a</span>&nbsp;<span class="op" id="3786515">&lt;&lt;</span>&nbsp;<span class="num" id="3786518">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786521">return</span><br>
<span class="lineno"></span><span class="op" id="3786528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3786531">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="3786593">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3786651">type</span>&nbsp;<span class="ident" id="3786656">NRGBA64</span>&nbsp;<span class="keyword" id="3786664">struct</span>&nbsp;<span class="op" id="3786671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786674">R</span><span class="op" id="3786675">,</span>&nbsp;<span class="ident" id="3786677">G</span><span class="op" id="3786678">,</span>&nbsp;<span class="ident" id="3786680">B</span><span class="op" id="3786681">,</span>&nbsp;<span class="ident" id="3786683">A</span>&nbsp;<span class="builtintype" id="3786685">uint16</span><br>
<span class="lineno"></span><span class="op" id="3786692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3786695">func</span>&nbsp;<span class="op" id="3786700">(</span><span class="ident" id="3786701">c</span>&nbsp;<span class="ident" id="3786703">NRGBA64</span><span class="op" id="3786710">)</span>&nbsp;<span class="ident" id="3786712">RGBA</span><span class="op" id="3786716">(</span><span class="op" id="3786717">)</span>&nbsp;<span class="op" id="3786719">(</span><span class="ident" id="3786720">r</span><span class="op" id="3786721">,</span>&nbsp;<span class="ident" id="3786723">g</span><span class="op" id="3786724">,</span>&nbsp;<span class="ident" id="3786726">b</span><span class="op" id="3786727">,</span>&nbsp;<span class="ident" id="3786729">a</span>&nbsp;<span class="builtintype" id="3786731">uint32</span><span class="op" id="3786737">)</span>&nbsp;<span class="op" id="3786739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786742">r</span>&nbsp;<span class="op" id="3786744">=</span>&nbsp;<span class="builtintype" id="3786746">uint32</span><span class="op" id="3786752">(</span><span class="ident" id="3786753">c</span><span class="op" id="3786754">.</span><span class="ident" id="3786755">R</span><span class="op" id="3786756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786759">r</span>&nbsp;<span class="op" id="3786761">*=</span>&nbsp;<span class="builtintype" id="3786764">uint32</span><span class="op" id="3786770">(</span><span class="ident" id="3786771">c</span><span class="op" id="3786772">.</span><span class="ident" id="3786773">A</span><span class="op" id="3786774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786777">r</span>&nbsp;<span class="op" id="3786779">/=</span>&nbsp;<span class="num" id="3786782">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786790">g</span>&nbsp;<span class="op" id="3786792">=</span>&nbsp;<span class="builtintype" id="3786794">uint32</span><span class="op" id="3786800">(</span><span class="ident" id="3786801">c</span><span class="op" id="3786802">.</span><span class="ident" id="3786803">G</span><span class="op" id="3786804">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786807">g</span>&nbsp;<span class="op" id="3786809">*=</span>&nbsp;<span class="builtintype" id="3786812">uint32</span><span class="op" id="3786818">(</span><span class="ident" id="3786819">c</span><span class="op" id="3786820">.</span><span class="ident" id="3786821">A</span><span class="op" id="3786822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786825">g</span>&nbsp;<span class="op" id="3786827">/=</span>&nbsp;<span class="num" id="3786830">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786838">b</span>&nbsp;<span class="op" id="3786840">=</span>&nbsp;<span class="builtintype" id="3786842">uint32</span><span class="op" id="3786848">(</span><span class="ident" id="3786849">c</span><span class="op" id="3786850">.</span><span class="ident" id="3786851">B</span><span class="op" id="3786852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786855">b</span>&nbsp;<span class="op" id="3786857">*=</span>&nbsp;<span class="builtintype" id="3786860">uint32</span><span class="op" id="3786866">(</span><span class="ident" id="3786867">c</span><span class="op" id="3786868">.</span><span class="ident" id="3786869">A</span><span class="op" id="3786870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786873">b</span>&nbsp;<span class="op" id="3786875">/=</span>&nbsp;<span class="num" id="3786878">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786886">a</span>&nbsp;<span class="op" id="3786888">=</span>&nbsp;<span class="builtintype" id="3786890">uint32</span><span class="op" id="3786896">(</span><span class="ident" id="3786897">c</span><span class="op" id="3786898">.</span><span class="ident" id="3786899">A</span><span class="op" id="3786900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786903">return</span><br>
<span class="lineno"></span><span class="op" id="3786910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3786913">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="3786955">type</span>&nbsp;<span class="ident" id="3786960">Alpha</span>&nbsp;<span class="keyword" id="3786966">struct</span>&nbsp;<span class="op" id="3786973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786976">A</span>&nbsp;<span class="builtintype" id="3786978">uint8</span><br>
<span class="lineno"></span><span class="op" id="3786984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3786987">func</span>&nbsp;<span class="op" id="3786992">(</span><span class="ident" id="3786993">c</span>&nbsp;<span class="ident" id="3786995">Alpha</span><span class="op" id="3787000">)</span>&nbsp;<span class="ident" id="3787002">RGBA</span><span class="op" id="3787006">(</span><span class="op" id="3787007">)</span>&nbsp;<span class="op" id="3787009">(</span><span class="ident" id="3787010">r</span><span class="op" id="3787011">,</span>&nbsp;<span class="ident" id="3787013">g</span><span class="op" id="3787014">,</span>&nbsp;<span class="ident" id="3787016">b</span><span class="op" id="3787017">,</span>&nbsp;<span class="ident" id="3787019">a</span>&nbsp;<span class="builtintype" id="3787021">uint32</span><span class="op" id="3787027">)</span>&nbsp;<span class="op" id="3787029">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787032">a</span>&nbsp;<span class="op" id="3787034">=</span>&nbsp;<span class="builtintype" id="3787036">uint32</span><span class="op" id="3787042">(</span><span class="ident" id="3787043">c</span><span class="op" id="3787044">.</span><span class="ident" id="3787045">A</span><span class="op" id="3787046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787049">a</span>&nbsp;<span class="op" id="3787051">|=</span>&nbsp;<span class="ident" id="3787054">a</span>&nbsp;<span class="op" id="3787056">&lt;&lt;</span>&nbsp;<span class="num" id="3787059">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3787062">return</span>&nbsp;<span class="ident" id="3787069">a</span><span class="op" id="3787070">,</span>&nbsp;<span class="ident" id="3787072">a</span><span class="op" id="3787073">,</span>&nbsp;<span class="ident" id="3787075">a</span><span class="op" id="3787076">,</span>&nbsp;<span class="ident" id="3787078">a</span><br>
<span class="lineno"></span><span class="op" id="3787080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3787083">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3787127">type</span>&nbsp;<span class="ident" id="3787132">Alpha16</span>&nbsp;<span class="keyword" id="3787140">struct</span>&nbsp;<span class="op" id="3787147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787150">A</span>&nbsp;<span class="builtintype" id="3787152">uint16</span><br>
<span class="lineno"></span><span class="op" id="3787159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="3787162">func</span>&nbsp;<span class="op" id="3787167">(</span><span class="ident" id="3787168">c</span>&nbsp;<span class="ident" id="3787170">Alpha16</span><span class="op" id="3787177">)</span>&nbsp;<span class="ident" id="3787179">RGBA</span><span class="op" id="3787183">(</span><span class="op" id="3787184">)</span>&nbsp;<span class="op" id="3787186">(</span><span class="ident" id="3787187">r</span><span class="op" id="3787188">,</span>&nbsp;<span class="ident" id="3787190">g</span><span class="op" id="3787191">,</span>&nbsp;<span class="ident" id="3787193">b</span><span class="op" id="3787194">,</span>&nbsp;<span class="ident" id="3787196">a</span>&nbsp;<span class="builtintype" id="3787198">uint32</span><span class="op" id="3787204">)</span>&nbsp;<span class="op" id="3787206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787209">a</span>&nbsp;<span class="op" id="3787211">=</span>&nbsp;<span class="builtintype" id="3787213">uint32</span><span class="op" id="3787219">(</span><span class="ident" id="3787220">c</span><span class="op" id="3787221">.</span><span class="ident" id="3787222">A</span><span class="op" id="3787223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3787226">return</span>&nbsp;<span class="ident" id="3787233">a</span><span class="op" id="3787234">,</span>&nbsp;<span class="ident" id="3787236">a</span><span class="op" id="3787237">,</span>&nbsp;<span class="ident" id="3787239">a</span><span class="op" id="3787240">,</span>&nbsp;<span class="ident" id="3787242">a</span><br>
<span class="lineno"></span><span class="op" id="3787244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3787247">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3787292">type</span>&nbsp;<span class="ident" id="3787297">Gray</span>&nbsp;<span class="keyword" id="3787302">struct</span>&nbsp;<span class="op" id="3787309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787312">Y</span>&nbsp;<span class="builtintype" id="3787314">uint8</span><br>
<span class="lineno"></span><span class="op" id="3787320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="3787323">func</span>&nbsp;<span class="op" id="3787328">(</span><span class="ident" id="3787329">c</span>&nbsp;<span class="ident" id="3787331">Gray</span><span class="op" id="3787335">)</span>&nbsp;<span class="ident" id="3787337">RGBA</span><span class="op" id="3787341">(</span><span class="op" id="3787342">)</span>&nbsp;<span class="op" id="3787344">(</span><span class="ident" id="3787345">r</span><span class="op" id="3787346">,</span>&nbsp;<span class="ident" id="3787348">g</span><span class="op" id="3787349">,</span>&nbsp;<span class="ident" id="3787351">b</span><span class="op" id="3787352">,</span>&nbsp;<span class="ident" id="3787354">a</span>&nbsp;<span class="builtintype" id="3787356">uint32</span><span class="op" id="3787362">)</span>&nbsp;<span class="op" id="3787364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787367">y</span>&nbsp;<span class="op" id="3787369">:=</span>&nbsp;<span class="builtintype" id="3787372">uint32</span><span class="op" id="3787378">(</span><span class="ident" id="3787379">c</span><span class="op" id="3787380">.</span><span class="ident" id="3787381">Y</span><span class="op" id="3787382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787385">y</span>&nbsp;<span class="op" id="3787387">|=</span>&nbsp;<span class="ident" id="3787390">y</span>&nbsp;<span class="op" id="3787392">&lt;&lt;</span>&nbsp;<span class="num" id="3787395">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3787398">return</span>&nbsp;<span class="ident" id="3787405">y</span><span class="op" id="3787406">,</span>&nbsp;<span class="ident" id="3787408">y</span><span class="op" id="3787409">,</span>&nbsp;<span class="ident" id="3787411">y</span><span class="op" id="3787412">,</span>&nbsp;<span class="num" id="3787414">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3787421">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3787424">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3787471">type</span>&nbsp;<span class="ident" id="3787476">Gray16</span>&nbsp;<span class="keyword" id="3787483">struct</span>&nbsp;<span class="op" id="3787490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787493">Y</span>&nbsp;<span class="builtintype" id="3787495">uint16</span><br>
<span class="lineno"></span><span class="op" id="3787502">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3787505">func</span>&nbsp;<span class="op" id="3787510">(</span><span class="ident" id="3787511">c</span>&nbsp;<span class="ident" id="3787513">Gray16</span><span class="op" id="3787519">)</span>&nbsp;<span class="ident" id="3787521">RGBA</span><span class="op" id="3787525">(</span><span class="op" id="3787526">)</span>&nbsp;<span class="op" id="3787528">(</span><span class="ident" id="3787529">r</span><span class="op" id="3787530">,</span>&nbsp;<span class="ident" id="3787532">g</span><span class="op" id="3787533">,</span>&nbsp;<span class="ident" id="3787535">b</span><span class="op" id="3787536">,</span>&nbsp;<span class="ident" id="3787538">a</span>&nbsp;<span class="builtintype" id="3787540">uint32</span><span class="op" id="3787546">)</span>&nbsp;<span class="op" id="3787548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787551">y</span>&nbsp;<span class="op" id="3787553">:=</span>&nbsp;<span class="builtintype" id="3787556">uint32</span><span class="op" id="3787562">(</span><span class="ident" id="3787563">c</span><span class="op" id="3787564">.</span><span class="ident" id="3787565">Y</span><span class="op" id="3787566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3787569">return</span>&nbsp;<span class="ident" id="3787576">y</span><span class="op" id="3787577">,</span>&nbsp;<span class="ident" id="3787579">y</span><span class="op" id="3787580">,</span>&nbsp;<span class="ident" id="3787582">y</span><span class="op" id="3787583">,</span>&nbsp;<span class="num" id="3787585">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3787592">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3787595">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="3787674">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="3787691">type</span>&nbsp;<span class="ident" id="3787696">Model</span>&nbsp;<span class="keyword" id="3787702">interface</span>&nbsp;<span class="op" id="3787712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3787715">Convert</span><span class="op" id="3787722">(</span><span class="ident" id="3787723">c</span>&nbsp;<span class="ident" id="3787725">Color</span><span class="op" id="3787730">)</span>&nbsp;<span class="ident" id="3787732">Color</span><br>
<span class="lineno">135</span><span class="op" id="3787738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3787741">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="3787814">func</span>&nbsp;<span class="ident" id="3787819">ModelFunc</span><span class="op" id="3787828">(</span><span class="ident" id="3787829">f</span>&nbsp;<span class="keyword" id="3787831">func</span><span class="op" id="3787835">(</span><span class="ident" id="3787836">Color</span><span class="op" id="3787841">)</span>&nbsp;<span class="ident" id="3787843">Color</span><span class="op" id="3787848">)</span>&nbsp;<span class="ident" id="3787850">Model</span>&nbsp;<span class="op" id="3787856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3787859">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3787908">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3787957">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3788007">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3788057">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788087">return</span>&nbsp;<span class="op" id="3788094">&amp;</span><span class="ident" id="3788095">modelFunc</span><span class="op" id="3788104">{</span><span class="ident" id="3788105">f</span><span class="op" id="3788106">}</span><br>
<span class="lineno">145</span><span class="op" id="3788108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3788111">type</span>&nbsp;<span class="ident" id="3788116">modelFunc</span>&nbsp;<span class="keyword" id="3788126">struct</span>&nbsp;<span class="op" id="3788133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788136">f</span>&nbsp;<span class="keyword" id="3788138">func</span><span class="op" id="3788142">(</span><span class="ident" id="3788143">Color</span><span class="op" id="3788148">)</span>&nbsp;<span class="ident" id="3788150">Color</span><br>
<span class="lineno"></span><span class="op" id="3788156">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3788159">func</span>&nbsp;<span class="op" id="3788164">(</span><span class="ident" id="3788165">m</span>&nbsp;<span class="op" id="3788167">*</span><span class="ident" id="3788168">modelFunc</span><span class="op" id="3788177">)</span>&nbsp;<span class="ident" id="3788179">Convert</span><span class="op" id="3788186">(</span><span class="ident" id="3788187">c</span>&nbsp;<span class="ident" id="3788189">Color</span><span class="op" id="3788194">)</span>&nbsp;<span class="ident" id="3788196">Color</span>&nbsp;<span class="op" id="3788202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788205">return</span>&nbsp;<span class="ident" id="3788212">m</span><span class="op" id="3788213">.</span><span class="ident" id="3788214">f</span><span class="op" id="3788215">(</span><span class="ident" id="3788216">c</span><span class="op" id="3788217">)</span><br>
<span class="lineno"></span><span class="op" id="3788219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3788222">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="3788262">var</span>&nbsp;<span class="op" id="3788266">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788269">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788282">Model</span>&nbsp;<span class="op" id="3788288">=</span>&nbsp;<span class="ident" id="3788290">ModelFunc</span><span class="op" id="3788299">(</span><span class="ident" id="3788300">rgbaModel</span><span class="op" id="3788309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788312">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="3788325">Model</span>&nbsp;<span class="op" id="3788331">=</span>&nbsp;<span class="ident" id="3788333">ModelFunc</span><span class="op" id="3788342">(</span><span class="ident" id="3788343">rgba64Model</span><span class="op" id="3788354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788357">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3788370">Model</span>&nbsp;<span class="op" id="3788376">=</span>&nbsp;<span class="ident" id="3788378">ModelFunc</span><span class="op" id="3788387">(</span><span class="ident" id="3788388">nrgbaModel</span><span class="op" id="3788398">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788401">NRGBA64Model</span>&nbsp;<span class="ident" id="3788414">Model</span>&nbsp;<span class="op" id="3788420">=</span>&nbsp;<span class="ident" id="3788422">ModelFunc</span><span class="op" id="3788431">(</span><span class="ident" id="3788432">nrgba64Model</span><span class="op" id="3788444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788447">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3788460">Model</span>&nbsp;<span class="op" id="3788466">=</span>&nbsp;<span class="ident" id="3788468">ModelFunc</span><span class="op" id="3788477">(</span><span class="ident" id="3788478">alphaModel</span><span class="op" id="3788488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788491">Alpha16Model</span>&nbsp;<span class="ident" id="3788504">Model</span>&nbsp;<span class="op" id="3788510">=</span>&nbsp;<span class="ident" id="3788512">ModelFunc</span><span class="op" id="3788521">(</span><span class="ident" id="3788522">alpha16Model</span><span class="op" id="3788534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788537">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788550">Model</span>&nbsp;<span class="op" id="3788556">=</span>&nbsp;<span class="ident" id="3788558">ModelFunc</span><span class="op" id="3788567">(</span><span class="ident" id="3788568">grayModel</span><span class="op" id="3788577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788580">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="3788593">Model</span>&nbsp;<span class="op" id="3788599">=</span>&nbsp;<span class="ident" id="3788601">ModelFunc</span><span class="op" id="3788610">(</span><span class="ident" id="3788611">gray16Model</span><span class="op" id="3788622">)</span><br>
<span class="lineno">165</span><span class="op" id="3788624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3788627">func</span>&nbsp;<span class="ident" id="3788632">rgbaModel</span><span class="op" id="3788641">(</span><span class="ident" id="3788642">c</span>&nbsp;<span class="ident" id="3788644">Color</span><span class="op" id="3788649">)</span>&nbsp;<span class="ident" id="3788651">Color</span>&nbsp;<span class="op" id="3788657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788660">if</span>&nbsp;<span class="ident" id="3788663">_</span><span class="op" id="3788664">,</span>&nbsp;<span class="ident" id="3788666">ok</span>&nbsp;<span class="op" id="3788669">:=</span>&nbsp;<span class="ident" id="3788672">c</span><span class="op" id="3788673">.</span><span class="op" id="3788674">(</span><span class="ident" id="3788675">RGBA</span><span class="op" id="3788679">)</span><span class="op" id="3788680">;</span>&nbsp;<span class="ident" id="3788682">ok</span>&nbsp;<span class="op" id="3788685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788689">return</span>&nbsp;<span class="ident" id="3788696">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788702">r</span><span class="op" id="3788703">,</span>&nbsp;<span class="ident" id="3788705">g</span><span class="op" id="3788706">,</span>&nbsp;<span class="ident" id="3788708">b</span><span class="op" id="3788709">,</span>&nbsp;<span class="ident" id="3788711">a</span>&nbsp;<span class="op" id="3788713">:=</span>&nbsp;<span class="ident" id="3788716">c</span><span class="op" id="3788717">.</span><span class="ident" id="3788718">RGBA</span><span class="op" id="3788722">(</span><span class="op" id="3788723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788726">return</span>&nbsp;<span class="ident" id="3788733">RGBA</span><span class="op" id="3788737">{</span><span class="builtintype" id="3788738">uint8</span><span class="op" id="3788743">(</span><span class="ident" id="3788744">r</span>&nbsp;<span class="op" id="3788746">&gt;&gt;</span>&nbsp;<span class="num" id="3788749">8</span><span class="op" id="3788750">)</span><span class="op" id="3788751">,</span>&nbsp;<span class="builtintype" id="3788753">uint8</span><span class="op" id="3788758">(</span><span class="ident" id="3788759">g</span>&nbsp;<span class="op" id="3788761">&gt;&gt;</span>&nbsp;<span class="num" id="3788764">8</span><span class="op" id="3788765">)</span><span class="op" id="3788766">,</span>&nbsp;<span class="builtintype" id="3788768">uint8</span><span class="op" id="3788773">(</span><span class="ident" id="3788774">b</span>&nbsp;<span class="op" id="3788776">&gt;&gt;</span>&nbsp;<span class="num" id="3788779">8</span><span class="op" id="3788780">)</span><span class="op" id="3788781">,</span>&nbsp;<span class="builtintype" id="3788783">uint8</span><span class="op" id="3788788">(</span><span class="ident" id="3788789">a</span>&nbsp;<span class="op" id="3788791">&gt;&gt;</span>&nbsp;<span class="num" id="3788794">8</span><span class="op" id="3788795">)</span><span class="op" id="3788796">}</span><br>
<span class="lineno"></span><span class="op" id="3788798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="3788801">func</span>&nbsp;<span class="ident" id="3788806">rgba64Model</span><span class="op" id="3788817">(</span><span class="ident" id="3788818">c</span>&nbsp;<span class="ident" id="3788820">Color</span><span class="op" id="3788825">)</span>&nbsp;<span class="ident" id="3788827">Color</span>&nbsp;<span class="op" id="3788833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788836">if</span>&nbsp;<span class="ident" id="3788839">_</span><span class="op" id="3788840">,</span>&nbsp;<span class="ident" id="3788842">ok</span>&nbsp;<span class="op" id="3788845">:=</span>&nbsp;<span class="ident" id="3788848">c</span><span class="op" id="3788849">.</span><span class="op" id="3788850">(</span><span class="ident" id="3788851">RGBA64</span><span class="op" id="3788857">)</span><span class="op" id="3788858">;</span>&nbsp;<span class="ident" id="3788860">ok</span>&nbsp;<span class="op" id="3788863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788867">return</span>&nbsp;<span class="ident" id="3788874">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788880">r</span><span class="op" id="3788881">,</span>&nbsp;<span class="ident" id="3788883">g</span><span class="op" id="3788884">,</span>&nbsp;<span class="ident" id="3788886">b</span><span class="op" id="3788887">,</span>&nbsp;<span class="ident" id="3788889">a</span>&nbsp;<span class="op" id="3788891">:=</span>&nbsp;<span class="ident" id="3788894">c</span><span class="op" id="3788895">.</span><span class="ident" id="3788896">RGBA</span><span class="op" id="3788900">(</span><span class="op" id="3788901">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788904">return</span>&nbsp;<span class="ident" id="3788911">RGBA64</span><span class="op" id="3788917">{</span><span class="builtintype" id="3788918">uint16</span><span class="op" id="3788924">(</span><span class="ident" id="3788925">r</span><span class="op" id="3788926">)</span><span class="op" id="3788927">,</span>&nbsp;<span class="builtintype" id="3788929">uint16</span><span class="op" id="3788935">(</span><span class="ident" id="3788936">g</span><span class="op" id="3788937">)</span><span class="op" id="3788938">,</span>&nbsp;<span class="builtintype" id="3788940">uint16</span><span class="op" id="3788946">(</span><span class="ident" id="3788947">b</span><span class="op" id="3788948">)</span><span class="op" id="3788949">,</span>&nbsp;<span class="builtintype" id="3788951">uint16</span><span class="op" id="3788957">(</span><span class="ident" id="3788958">a</span><span class="op" id="3788959">)</span><span class="op" id="3788960">}</span><br>
<span class="lineno"></span><span class="op" id="3788962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3788965">func</span>&nbsp;<span class="ident" id="3788970">nrgbaModel</span><span class="op" id="3788980">(</span><span class="ident" id="3788981">c</span>&nbsp;<span class="ident" id="3788983">Color</span><span class="op" id="3788988">)</span>&nbsp;<span class="ident" id="3788990">Color</span>&nbsp;<span class="op" id="3788996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788999">if</span>&nbsp;<span class="ident" id="3789002">_</span><span class="op" id="3789003">,</span>&nbsp;<span class="ident" id="3789005">ok</span>&nbsp;<span class="op" id="3789008">:=</span>&nbsp;<span class="ident" id="3789011">c</span><span class="op" id="3789012">.</span><span class="op" id="3789013">(</span><span class="ident" id="3789014">NRGBA</span><span class="op" id="3789019">)</span><span class="op" id="3789020">;</span>&nbsp;<span class="ident" id="3789022">ok</span>&nbsp;<span class="op" id="3789025">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789029">return</span>&nbsp;<span class="ident" id="3789036">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789042">r</span><span class="op" id="3789043">,</span>&nbsp;<span class="ident" id="3789045">g</span><span class="op" id="3789046">,</span>&nbsp;<span class="ident" id="3789048">b</span><span class="op" id="3789049">,</span>&nbsp;<span class="ident" id="3789051">a</span>&nbsp;<span class="op" id="3789053">:=</span>&nbsp;<span class="ident" id="3789056">c</span><span class="op" id="3789057">.</span><span class="ident" id="3789058">RGBA</span><span class="op" id="3789062">(</span><span class="op" id="3789063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789066">if</span>&nbsp;<span class="ident" id="3789069">a</span>&nbsp;<span class="op" id="3789071">==</span>&nbsp;<span class="num" id="3789074">0xffff</span>&nbsp;<span class="op" id="3789081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789085">return</span>&nbsp;<span class="ident" id="3789092">NRGBA</span><span class="op" id="3789097">{</span><span class="builtintype" id="3789098">uint8</span><span class="op" id="3789103">(</span><span class="ident" id="3789104">r</span>&nbsp;<span class="op" id="3789106">&gt;&gt;</span>&nbsp;<span class="num" id="3789109">8</span><span class="op" id="3789110">)</span><span class="op" id="3789111">,</span>&nbsp;<span class="builtintype" id="3789113">uint8</span><span class="op" id="3789118">(</span><span class="ident" id="3789119">g</span>&nbsp;<span class="op" id="3789121">&gt;&gt;</span>&nbsp;<span class="num" id="3789124">8</span><span class="op" id="3789125">)</span><span class="op" id="3789126">,</span>&nbsp;<span class="builtintype" id="3789128">uint8</span><span class="op" id="3789133">(</span><span class="ident" id="3789134">b</span>&nbsp;<span class="op" id="3789136">&gt;&gt;</span>&nbsp;<span class="num" id="3789139">8</span><span class="op" id="3789140">)</span><span class="op" id="3789141">,</span>&nbsp;<span class="num" id="3789143">0xff</span><span class="op" id="3789147">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789153">if</span>&nbsp;<span class="ident" id="3789156">a</span>&nbsp;<span class="op" id="3789158">==</span>&nbsp;<span class="num" id="3789161">0</span>&nbsp;<span class="op" id="3789163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789167">return</span>&nbsp;<span class="ident" id="3789174">NRGBA</span><span class="op" id="3789179">{</span><span class="num" id="3789180">0</span><span class="op" id="3789181">,</span>&nbsp;<span class="num" id="3789183">0</span><span class="op" id="3789184">,</span>&nbsp;<span class="num" id="3789186">0</span><span class="op" id="3789187">,</span>&nbsp;<span class="num" id="3789189">0</span><span class="op" id="3789190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3789196">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789297">r</span>&nbsp;<span class="op" id="3789299">=</span>&nbsp;<span class="op" id="3789301">(</span><span class="ident" id="3789302">r</span>&nbsp;<span class="op" id="3789304">*</span>&nbsp;<span class="num" id="3789306">0xffff</span><span class="op" id="3789312">)</span>&nbsp;<span class="op" id="3789314">/</span>&nbsp;<span class="ident" id="3789316">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789319">g</span>&nbsp;<span class="op" id="3789321">=</span>&nbsp;<span class="op" id="3789323">(</span><span class="ident" id="3789324">g</span>&nbsp;<span class="op" id="3789326">*</span>&nbsp;<span class="num" id="3789328">0xffff</span><span class="op" id="3789334">)</span>&nbsp;<span class="op" id="3789336">/</span>&nbsp;<span class="ident" id="3789338">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789341">b</span>&nbsp;<span class="op" id="3789343">=</span>&nbsp;<span class="op" id="3789345">(</span><span class="ident" id="3789346">b</span>&nbsp;<span class="op" id="3789348">*</span>&nbsp;<span class="num" id="3789350">0xffff</span><span class="op" id="3789356">)</span>&nbsp;<span class="op" id="3789358">/</span>&nbsp;<span class="ident" id="3789360">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789363">return</span>&nbsp;<span class="ident" id="3789370">NRGBA</span><span class="op" id="3789375">{</span><span class="builtintype" id="3789376">uint8</span><span class="op" id="3789381">(</span><span class="ident" id="3789382">r</span>&nbsp;<span class="op" id="3789384">&gt;&gt;</span>&nbsp;<span class="num" id="3789387">8</span><span class="op" id="3789388">)</span><span class="op" id="3789389">,</span>&nbsp;<span class="builtintype" id="3789391">uint8</span><span class="op" id="3789396">(</span><span class="ident" id="3789397">g</span>&nbsp;<span class="op" id="3789399">&gt;&gt;</span>&nbsp;<span class="num" id="3789402">8</span><span class="op" id="3789403">)</span><span class="op" id="3789404">,</span>&nbsp;<span class="builtintype" id="3789406">uint8</span><span class="op" id="3789411">(</span><span class="ident" id="3789412">b</span>&nbsp;<span class="op" id="3789414">&gt;&gt;</span>&nbsp;<span class="num" id="3789417">8</span><span class="op" id="3789418">)</span><span class="op" id="3789419">,</span>&nbsp;<span class="builtintype" id="3789421">uint8</span><span class="op" id="3789426">(</span><span class="ident" id="3789427">a</span>&nbsp;<span class="op" id="3789429">&gt;&gt;</span>&nbsp;<span class="num" id="3789432">8</span><span class="op" id="3789433">)</span><span class="op" id="3789434">}</span><br>
<span class="lineno"></span><span class="op" id="3789436">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="3789439">func</span>&nbsp;<span class="ident" id="3789444">nrgba64Model</span><span class="op" id="3789456">(</span><span class="ident" id="3789457">c</span>&nbsp;<span class="ident" id="3789459">Color</span><span class="op" id="3789464">)</span>&nbsp;<span class="ident" id="3789466">Color</span>&nbsp;<span class="op" id="3789472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789475">if</span>&nbsp;<span class="ident" id="3789478">_</span><span class="op" id="3789479">,</span>&nbsp;<span class="ident" id="3789481">ok</span>&nbsp;<span class="op" id="3789484">:=</span>&nbsp;<span class="ident" id="3789487">c</span><span class="op" id="3789488">.</span><span class="op" id="3789489">(</span><span class="ident" id="3789490">NRGBA64</span><span class="op" id="3789497">)</span><span class="op" id="3789498">;</span>&nbsp;<span class="ident" id="3789500">ok</span>&nbsp;<span class="op" id="3789503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789507">return</span>&nbsp;<span class="ident" id="3789514">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789517">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789520">r</span><span class="op" id="3789521">,</span>&nbsp;<span class="ident" id="3789523">g</span><span class="op" id="3789524">,</span>&nbsp;<span class="ident" id="3789526">b</span><span class="op" id="3789527">,</span>&nbsp;<span class="ident" id="3789529">a</span>&nbsp;<span class="op" id="3789531">:=</span>&nbsp;<span class="ident" id="3789534">c</span><span class="op" id="3789535">.</span><span class="ident" id="3789536">RGBA</span><span class="op" id="3789540">(</span><span class="op" id="3789541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789544">if</span>&nbsp;<span class="ident" id="3789547">a</span>&nbsp;<span class="op" id="3789549">==</span>&nbsp;<span class="num" id="3789552">0xffff</span>&nbsp;<span class="op" id="3789559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789563">return</span>&nbsp;<span class="ident" id="3789570">NRGBA64</span><span class="op" id="3789577">{</span><span class="builtintype" id="3789578">uint16</span><span class="op" id="3789584">(</span><span class="ident" id="3789585">r</span><span class="op" id="3789586">)</span><span class="op" id="3789587">,</span>&nbsp;<span class="builtintype" id="3789589">uint16</span><span class="op" id="3789595">(</span><span class="ident" id="3789596">g</span><span class="op" id="3789597">)</span><span class="op" id="3789598">,</span>&nbsp;<span class="builtintype" id="3789600">uint16</span><span class="op" id="3789606">(</span><span class="ident" id="3789607">b</span><span class="op" id="3789608">)</span><span class="op" id="3789609">,</span>&nbsp;<span class="num" id="3789611">0xffff</span><span class="op" id="3789617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789623">if</span>&nbsp;<span class="ident" id="3789626">a</span>&nbsp;<span class="op" id="3789628">==</span>&nbsp;<span class="num" id="3789631">0</span>&nbsp;<span class="op" id="3789633">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789637">return</span>&nbsp;<span class="ident" id="3789644">NRGBA64</span><span class="op" id="3789651">{</span><span class="num" id="3789652">0</span><span class="op" id="3789653">,</span>&nbsp;<span class="num" id="3789655">0</span><span class="op" id="3789656">,</span>&nbsp;<span class="num" id="3789658">0</span><span class="op" id="3789659">,</span>&nbsp;<span class="num" id="3789661">0</span><span class="op" id="3789662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3789668">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789769">r</span>&nbsp;<span class="op" id="3789771">=</span>&nbsp;<span class="op" id="3789773">(</span><span class="ident" id="3789774">r</span>&nbsp;<span class="op" id="3789776">*</span>&nbsp;<span class="num" id="3789778">0xffff</span><span class="op" id="3789784">)</span>&nbsp;<span class="op" id="3789786">/</span>&nbsp;<span class="ident" id="3789788">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789791">g</span>&nbsp;<span class="op" id="3789793">=</span>&nbsp;<span class="op" id="3789795">(</span><span class="ident" id="3789796">g</span>&nbsp;<span class="op" id="3789798">*</span>&nbsp;<span class="num" id="3789800">0xffff</span><span class="op" id="3789806">)</span>&nbsp;<span class="op" id="3789808">/</span>&nbsp;<span class="ident" id="3789810">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789813">b</span>&nbsp;<span class="op" id="3789815">=</span>&nbsp;<span class="op" id="3789817">(</span><span class="ident" id="3789818">b</span>&nbsp;<span class="op" id="3789820">*</span>&nbsp;<span class="num" id="3789822">0xffff</span><span class="op" id="3789828">)</span>&nbsp;<span class="op" id="3789830">/</span>&nbsp;<span class="ident" id="3789832">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789835">return</span>&nbsp;<span class="ident" id="3789842">NRGBA64</span><span class="op" id="3789849">{</span><span class="builtintype" id="3789850">uint16</span><span class="op" id="3789856">(</span><span class="ident" id="3789857">r</span><span class="op" id="3789858">)</span><span class="op" id="3789859">,</span>&nbsp;<span class="builtintype" id="3789861">uint16</span><span class="op" id="3789867">(</span><span class="ident" id="3789868">g</span><span class="op" id="3789869">)</span><span class="op" id="3789870">,</span>&nbsp;<span class="builtintype" id="3789872">uint16</span><span class="op" id="3789878">(</span><span class="ident" id="3789879">b</span><span class="op" id="3789880">)</span><span class="op" id="3789881">,</span>&nbsp;<span class="builtintype" id="3789883">uint16</span><span class="op" id="3789889">(</span><span class="ident" id="3789890">a</span><span class="op" id="3789891">)</span><span class="op" id="3789892">}</span><br>
<span class="lineno"></span><span class="op" id="3789894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3789897">func</span>&nbsp;<span class="ident" id="3789902">alphaModel</span><span class="op" id="3789912">(</span><span class="ident" id="3789913">c</span>&nbsp;<span class="ident" id="3789915">Color</span><span class="op" id="3789920">)</span>&nbsp;<span class="ident" id="3789922">Color</span>&nbsp;<span class="op" id="3789928">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789931">if</span>&nbsp;<span class="ident" id="3789934">_</span><span class="op" id="3789935">,</span>&nbsp;<span class="ident" id="3789937">ok</span>&nbsp;<span class="op" id="3789940">:=</span>&nbsp;<span class="ident" id="3789943">c</span><span class="op" id="3789944">.</span><span class="op" id="3789945">(</span><span class="ident" id="3789946">Alpha</span><span class="op" id="3789951">)</span><span class="op" id="3789952">;</span>&nbsp;<span class="ident" id="3789954">ok</span>&nbsp;<span class="op" id="3789957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789961">return</span>&nbsp;<span class="ident" id="3789968">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789974">_</span><span class="op" id="3789975">,</span>&nbsp;<span class="ident" id="3789977">_</span><span class="op" id="3789978">,</span>&nbsp;<span class="ident" id="3789980">_</span><span class="op" id="3789981">,</span>&nbsp;<span class="ident" id="3789983">a</span>&nbsp;<span class="op" id="3789985">:=</span>&nbsp;<span class="ident" id="3789988">c</span><span class="op" id="3789989">.</span><span class="ident" id="3789990">RGBA</span><span class="op" id="3789994">(</span><span class="op" id="3789995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789998">return</span>&nbsp;<span class="ident" id="3790005">Alpha</span><span class="op" id="3790010">{</span><span class="builtintype" id="3790011">uint8</span><span class="op" id="3790016">(</span><span class="ident" id="3790017">a</span>&nbsp;<span class="op" id="3790019">&gt;&gt;</span>&nbsp;<span class="num" id="3790022">8</span><span class="op" id="3790023">)</span><span class="op" id="3790024">}</span><br>
<span class="lineno">225</span><span class="op" id="3790026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3790029">func</span>&nbsp;<span class="ident" id="3790034">alpha16Model</span><span class="op" id="3790046">(</span><span class="ident" id="3790047">c</span>&nbsp;<span class="ident" id="3790049">Color</span><span class="op" id="3790054">)</span>&nbsp;<span class="ident" id="3790056">Color</span>&nbsp;<span class="op" id="3790062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790065">if</span>&nbsp;<span class="ident" id="3790068">_</span><span class="op" id="3790069">,</span>&nbsp;<span class="ident" id="3790071">ok</span>&nbsp;<span class="op" id="3790074">:=</span>&nbsp;<span class="ident" id="3790077">c</span><span class="op" id="3790078">.</span><span class="op" id="3790079">(</span><span class="ident" id="3790080">Alpha16</span><span class="op" id="3790087">)</span><span class="op" id="3790088">;</span>&nbsp;<span class="ident" id="3790090">ok</span>&nbsp;<span class="op" id="3790093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790097">return</span>&nbsp;<span class="ident" id="3790104">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790110">_</span><span class="op" id="3790111">,</span>&nbsp;<span class="ident" id="3790113">_</span><span class="op" id="3790114">,</span>&nbsp;<span class="ident" id="3790116">_</span><span class="op" id="3790117">,</span>&nbsp;<span class="ident" id="3790119">a</span>&nbsp;<span class="op" id="3790121">:=</span>&nbsp;<span class="ident" id="3790124">c</span><span class="op" id="3790125">.</span><span class="ident" id="3790126">RGBA</span><span class="op" id="3790130">(</span><span class="op" id="3790131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790134">return</span>&nbsp;<span class="ident" id="3790141">Alpha16</span><span class="op" id="3790148">{</span><span class="builtintype" id="3790149">uint16</span><span class="op" id="3790155">(</span><span class="ident" id="3790156">a</span><span class="op" id="3790157">)</span><span class="op" id="3790158">}</span><br>
<span class="lineno"></span><span class="op" id="3790160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3790163">func</span>&nbsp;<span class="ident" id="3790168">grayModel</span><span class="op" id="3790177">(</span><span class="ident" id="3790178">c</span>&nbsp;<span class="ident" id="3790180">Color</span><span class="op" id="3790185">)</span>&nbsp;<span class="ident" id="3790187">Color</span>&nbsp;<span class="op" id="3790193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790196">if</span>&nbsp;<span class="ident" id="3790199">_</span><span class="op" id="3790200">,</span>&nbsp;<span class="ident" id="3790202">ok</span>&nbsp;<span class="op" id="3790205">:=</span>&nbsp;<span class="ident" id="3790208">c</span><span class="op" id="3790209">.</span><span class="op" id="3790210">(</span><span class="ident" id="3790211">Gray</span><span class="op" id="3790215">)</span><span class="op" id="3790216">;</span>&nbsp;<span class="ident" id="3790218">ok</span>&nbsp;<span class="op" id="3790221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790225">return</span>&nbsp;<span class="ident" id="3790232">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790238">r</span><span class="op" id="3790239">,</span>&nbsp;<span class="ident" id="3790241">g</span><span class="op" id="3790242">,</span>&nbsp;<span class="ident" id="3790244">b</span><span class="op" id="3790245">,</span>&nbsp;<span class="ident" id="3790247">_</span>&nbsp;<span class="op" id="3790249">:=</span>&nbsp;<span class="ident" id="3790252">c</span><span class="op" id="3790253">.</span><span class="ident" id="3790254">RGBA</span><span class="op" id="3790258">(</span><span class="op" id="3790259">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790262">y</span>&nbsp;<span class="op" id="3790264">:=</span>&nbsp;<span class="op" id="3790267">(</span><span class="num" id="3790268">299</span><span class="op" id="3790271">*</span><span class="ident" id="3790272">r</span>&nbsp;<span class="op" id="3790274">+</span>&nbsp;<span class="num" id="3790276">587</span><span class="op" id="3790279">*</span><span class="ident" id="3790280">g</span>&nbsp;<span class="op" id="3790282">+</span>&nbsp;<span class="num" id="3790284">114</span><span class="op" id="3790287">*</span><span class="ident" id="3790288">b</span>&nbsp;<span class="op" id="3790290">+</span>&nbsp;<span class="num" id="3790292">500</span><span class="op" id="3790295">)</span>&nbsp;<span class="op" id="3790297">/</span>&nbsp;<span class="num" id="3790299">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790305">return</span>&nbsp;<span class="ident" id="3790312">Gray</span><span class="op" id="3790316">{</span><span class="builtintype" id="3790317">uint8</span><span class="op" id="3790322">(</span><span class="ident" id="3790323">y</span>&nbsp;<span class="op" id="3790325">&gt;&gt;</span>&nbsp;<span class="num" id="3790328">8</span><span class="op" id="3790329">)</span><span class="op" id="3790330">}</span><br>
<span class="lineno"></span><span class="op" id="3790332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3790335">func</span>&nbsp;<span class="ident" id="3790340">gray16Model</span><span class="op" id="3790351">(</span><span class="ident" id="3790352">c</span>&nbsp;<span class="ident" id="3790354">Color</span><span class="op" id="3790359">)</span>&nbsp;<span class="ident" id="3790361">Color</span>&nbsp;<span class="op" id="3790367">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790370">if</span>&nbsp;<span class="ident" id="3790373">_</span><span class="op" id="3790374">,</span>&nbsp;<span class="ident" id="3790376">ok</span>&nbsp;<span class="op" id="3790379">:=</span>&nbsp;<span class="ident" id="3790382">c</span><span class="op" id="3790383">.</span><span class="op" id="3790384">(</span><span class="ident" id="3790385">Gray16</span><span class="op" id="3790391">)</span><span class="op" id="3790392">;</span>&nbsp;<span class="ident" id="3790394">ok</span>&nbsp;<span class="op" id="3790397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790401">return</span>&nbsp;<span class="ident" id="3790408">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790414">r</span><span class="op" id="3790415">,</span>&nbsp;<span class="ident" id="3790417">g</span><span class="op" id="3790418">,</span>&nbsp;<span class="ident" id="3790420">b</span><span class="op" id="3790421">,</span>&nbsp;<span class="ident" id="3790423">_</span>&nbsp;<span class="op" id="3790425">:=</span>&nbsp;<span class="ident" id="3790428">c</span><span class="op" id="3790429">.</span><span class="ident" id="3790430">RGBA</span><span class="op" id="3790434">(</span><span class="op" id="3790435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790438">y</span>&nbsp;<span class="op" id="3790440">:=</span>&nbsp;<span class="op" id="3790443">(</span><span class="num" id="3790444">299</span><span class="op" id="3790447">*</span><span class="ident" id="3790448">r</span>&nbsp;<span class="op" id="3790450">+</span>&nbsp;<span class="num" id="3790452">587</span><span class="op" id="3790455">*</span><span class="ident" id="3790456">g</span>&nbsp;<span class="op" id="3790458">+</span>&nbsp;<span class="num" id="3790460">114</span><span class="op" id="3790463">*</span><span class="ident" id="3790464">b</span>&nbsp;<span class="op" id="3790466">+</span>&nbsp;<span class="num" id="3790468">500</span><span class="op" id="3790471">)</span>&nbsp;<span class="op" id="3790473">/</span>&nbsp;<span class="num" id="3790475">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790481">return</span>&nbsp;<span class="ident" id="3790488">Gray16</span><span class="op" id="3790494">{</span><span class="builtintype" id="3790495">uint16</span><span class="op" id="3790501">(</span><span class="ident" id="3790502">y</span><span class="op" id="3790503">)</span><span class="op" id="3790504">}</span><br>
<span class="lineno"></span><span class="op" id="3790506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3790509">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3790544">type</span>&nbsp;<span class="ident" id="3790549">Palette</span>&nbsp;<span class="op" id="3790557">[</span><span class="op" id="3790558">]</span><span class="ident" id="3790559">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="3790566">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3790642">func</span>&nbsp;<span class="op" id="3790647">(</span><span class="ident" id="3790648">p</span>&nbsp;<span class="ident" id="3790650">Palette</span><span class="op" id="3790657">)</span>&nbsp;<span class="ident" id="3790659">Convert</span><span class="op" id="3790666">(</span><span class="ident" id="3790667">c</span>&nbsp;<span class="ident" id="3790669">Color</span><span class="op" id="3790674">)</span>&nbsp;<span class="ident" id="3790676">Color</span>&nbsp;<span class="op" id="3790682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790685">if</span>&nbsp;<span class="builtinfunc" id="3790688">len</span><span class="op" id="3790691">(</span><span class="ident" id="3790692">p</span><span class="op" id="3790693">)</span>&nbsp;<span class="op" id="3790695">==</span>&nbsp;<span class="num" id="3790698">0</span>&nbsp;<span class="op" id="3790700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790704">return</span>&nbsp;<span class="builtintype" id="3790711">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790719">return</span>&nbsp;<span class="ident" id="3790726">p</span><span class="op" id="3790727">[</span><span class="ident" id="3790728">p</span><span class="op" id="3790729">.</span><span class="ident" id="3790730">Index</span><span class="op" id="3790735">(</span><span class="ident" id="3790736">c</span><span class="op" id="3790737">)</span><span class="op" id="3790738">]</span><br>
<span class="lineno"></span><span class="op" id="3790740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3790743">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="3790817">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3790833">func</span>&nbsp;<span class="op" id="3790838">(</span><span class="ident" id="3790839">p</span>&nbsp;<span class="ident" id="3790841">Palette</span><span class="op" id="3790848">)</span>&nbsp;<span class="ident" id="3790850">Index</span><span class="op" id="3790855">(</span><span class="ident" id="3790856">c</span>&nbsp;<span class="ident" id="3790858">Color</span><span class="op" id="3790863">)</span>&nbsp;<span class="builtintype" id="3790865">int</span>&nbsp;<span class="op" id="3790869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3790872">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790939">cr</span><span class="op" id="3790941">,</span>&nbsp;<span class="ident" id="3790943">cg</span><span class="op" id="3790945">,</span>&nbsp;<span class="ident" id="3790947">cb</span><span class="op" id="3790949">,</span>&nbsp;<span class="ident" id="3790951">_</span>&nbsp;<span class="op" id="3790953">:=</span>&nbsp;<span class="ident" id="3790956">c</span><span class="op" id="3790957">.</span><span class="ident" id="3790958">RGBA</span><span class="op" id="3790962">(</span><span class="op" id="3790963">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790966">ret</span><span class="op" id="3790969">,</span>&nbsp;<span class="ident" id="3790971">bestSSD</span>&nbsp;<span class="op" id="3790979">:=</span>&nbsp;<span class="num" id="3790982">0</span><span class="op" id="3790983">,</span>&nbsp;<span class="builtintype" id="3790985">uint32</span><span class="op" id="3790991">(</span><span class="num" id="3790992">1</span><span class="op" id="3790993">&lt;&lt;</span><span class="num" id="3790995">32</span><span class="op" id="3790997">-</span><span class="num" id="3790998">1</span><span class="op" id="3790999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791002">for</span>&nbsp;<span class="ident" id="3791006">i</span><span class="op" id="3791007">,</span>&nbsp;<span class="ident" id="3791009">v</span>&nbsp;<span class="op" id="3791011">:=</span>&nbsp;<span class="keyword" id="3791014">range</span>&nbsp;<span class="ident" id="3791020">p</span>&nbsp;<span class="op" id="3791022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791026">vr</span><span class="op" id="3791028">,</span>&nbsp;<span class="ident" id="3791030">vg</span><span class="op" id="3791032">,</span>&nbsp;<span class="ident" id="3791034">vb</span><span class="op" id="3791036">,</span>&nbsp;<span class="ident" id="3791038">_</span>&nbsp;<span class="op" id="3791040">:=</span>&nbsp;<span class="ident" id="3791043">v</span><span class="op" id="3791044">.</span><span class="ident" id="3791045">RGBA</span><span class="op" id="3791049">(</span><span class="op" id="3791050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3791054">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3791115">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791144">delta</span>&nbsp;<span class="op" id="3791150">:=</span>&nbsp;<span class="op" id="3791153">(</span><span class="builtintype" id="3791154">int32</span><span class="op" id="3791159">(</span><span class="ident" id="3791160">cr</span><span class="op" id="3791162">)</span>&nbsp;<span class="op" id="3791164">-</span>&nbsp;<span class="builtintype" id="3791166">int32</span><span class="op" id="3791171">(</span><span class="ident" id="3791172">vr</span><span class="op" id="3791174">)</span><span class="op" id="3791175">)</span>&nbsp;<span class="op" id="3791177">&gt;&gt;</span>&nbsp;<span class="num" id="3791180">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791184">ssd</span>&nbsp;<span class="op" id="3791188">:=</span>&nbsp;<span class="builtintype" id="3791191">uint32</span><span class="op" id="3791197">(</span><span class="ident" id="3791198">delta</span>&nbsp;<span class="op" id="3791204">*</span>&nbsp;<span class="ident" id="3791206">delta</span><span class="op" id="3791211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791215">delta</span>&nbsp;<span class="op" id="3791221">=</span>&nbsp;<span class="op" id="3791223">(</span><span class="builtintype" id="3791224">int32</span><span class="op" id="3791229">(</span><span class="ident" id="3791230">cg</span><span class="op" id="3791232">)</span>&nbsp;<span class="op" id="3791234">-</span>&nbsp;<span class="builtintype" id="3791236">int32</span><span class="op" id="3791241">(</span><span class="ident" id="3791242">vg</span><span class="op" id="3791244">)</span><span class="op" id="3791245">)</span>&nbsp;<span class="op" id="3791247">&gt;&gt;</span>&nbsp;<span class="num" id="3791250">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791254">ssd</span>&nbsp;<span class="op" id="3791258">+=</span>&nbsp;<span class="builtintype" id="3791261">uint32</span><span class="op" id="3791267">(</span><span class="ident" id="3791268">delta</span>&nbsp;<span class="op" id="3791274">*</span>&nbsp;<span class="ident" id="3791276">delta</span><span class="op" id="3791281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791285">delta</span>&nbsp;<span class="op" id="3791291">=</span>&nbsp;<span class="op" id="3791293">(</span><span class="builtintype" id="3791294">int32</span><span class="op" id="3791299">(</span><span class="ident" id="3791300">cb</span><span class="op" id="3791302">)</span>&nbsp;<span class="op" id="3791304">-</span>&nbsp;<span class="builtintype" id="3791306">int32</span><span class="op" id="3791311">(</span><span class="ident" id="3791312">vb</span><span class="op" id="3791314">)</span><span class="op" id="3791315">)</span>&nbsp;<span class="op" id="3791317">&gt;&gt;</span>&nbsp;<span class="num" id="3791320">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791324">ssd</span>&nbsp;<span class="op" id="3791328">+=</span>&nbsp;<span class="builtintype" id="3791331">uint32</span><span class="op" id="3791337">(</span><span class="ident" id="3791338">delta</span>&nbsp;<span class="op" id="3791344">*</span>&nbsp;<span class="ident" id="3791346">delta</span><span class="op" id="3791351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791355">if</span>&nbsp;<span class="ident" id="3791358">ssd</span>&nbsp;<span class="op" id="3791362">&lt;</span>&nbsp;<span class="ident" id="3791364">bestSSD</span>&nbsp;<span class="op" id="3791372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791377">if</span>&nbsp;<span class="ident" id="3791380">ssd</span>&nbsp;<span class="op" id="3791384">==</span>&nbsp;<span class="num" id="3791387">0</span>&nbsp;<span class="op" id="3791389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791395">return</span>&nbsp;<span class="ident" id="3791402">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791407">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791412">ret</span><span class="op" id="3791415">,</span>&nbsp;<span class="ident" id="3791417">bestSSD</span>&nbsp;<span class="op" id="3791425">=</span>&nbsp;<span class="ident" id="3791427">i</span><span class="op" id="3791428">,</span>&nbsp;<span class="ident" id="3791430">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791442">return</span>&nbsp;<span class="ident" id="3791449">ret</span><br>
<span class="lineno"></span><span class="op" id="3791453">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3791456">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3791476">var</span>&nbsp;<span class="op" id="3791480">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791483">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791495">=</span>&nbsp;<span class="ident" id="3791497">Gray16</span><span class="op" id="3791503">{</span><span class="num" id="3791504">0</span><span class="op" id="3791505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791508">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791520">=</span>&nbsp;<span class="ident" id="3791522">Gray16</span><span class="op" id="3791528">{</span><span class="num" id="3791529">0xffff</span><span class="op" id="3791535">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791538">Transparent</span>&nbsp;<span class="op" id="3791550">=</span>&nbsp;<span class="ident" id="3791552">Alpha16</span><span class="op" id="3791559">{</span><span class="num" id="3791560">0</span><span class="op" id="3791561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3791564">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3791576">=</span>&nbsp;<span class="ident" id="3791578">Alpha16</span><span class="op" id="3791585">{</span><span class="num" id="3791586">0xffff</span><span class="op" id="3791592">}</span><br>
<span class="lineno"></span><span class="op" id="3791594">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
