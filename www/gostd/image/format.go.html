<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1780063">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1780118">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1780172">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1780223">package</span>&nbsp;<span class="ident" id="1780231">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1780238">import</span>&nbsp;<span class="op" id="1780245">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1780248">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1780257">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1780267">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="1780272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1780275">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="1780343">var</span>&nbsp;<span class="ident" id="1780347">ErrFormat</span>&nbsp;<span class="op" id="1780357">=</span>&nbsp;<span class="ident" id="1780359">errors</span><span class="op" id="1780365">.</span><span class="ident" id="1780366">New</span><span class="op" id="1780369">(</span><span class="string" id="1780370">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="1780393">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1780396">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1780473">type</span>&nbsp;<span class="ident" id="1780478">format</span>&nbsp;<span class="keyword" id="1780485">struct</span>&nbsp;<span class="op" id="1780492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780495">name</span><span class="op" id="1780499">,</span>&nbsp;<span class="ident" id="1780501">magic</span>&nbsp;&nbsp;<span class="builtintype" id="1780508">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780516">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780529">func</span><span class="op" id="1780533">(</span><span class="ident" id="1780534">io</span><span class="op" id="1780536">.</span><span class="ident" id="1780537">Reader</span><span class="op" id="1780543">)</span>&nbsp;<span class="op" id="1780545">(</span><span class="ident" id="1780546">Image</span><span class="op" id="1780551">,</span>&nbsp;<span class="builtintype" id="1780553">error</span><span class="op" id="1780558">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780561">decodeConfig</span>&nbsp;<span class="keyword" id="1780574">func</span><span class="op" id="1780578">(</span><span class="ident" id="1780579">io</span><span class="op" id="1780581">.</span><span class="ident" id="1780582">Reader</span><span class="op" id="1780588">)</span>&nbsp;<span class="op" id="1780590">(</span><span class="ident" id="1780591">Config</span><span class="op" id="1780597">,</span>&nbsp;<span class="builtintype" id="1780599">error</span><span class="op" id="1780604">)</span><br>
<span class="lineno"></span><span class="op" id="1780606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1780609">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="1780655">var</span>&nbsp;<span class="ident" id="1780659">formats</span>&nbsp;<span class="op" id="1780667">[</span><span class="op" id="1780668">]</span><span class="ident" id="1780669">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1780677">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="1780740">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1780797">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="1780875">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="1780941">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="1780999">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="1781068">func</span>&nbsp;<span class="ident" id="1781073">RegisterFormat</span><span class="op" id="1781087">(</span><span class="ident" id="1781088">name</span><span class="op" id="1781092">,</span>&nbsp;<span class="ident" id="1781094">magic</span>&nbsp;<span class="builtintype" id="1781100">string</span><span class="op" id="1781106">,</span>&nbsp;<span class="ident" id="1781108">decode</span>&nbsp;<span class="keyword" id="1781115">func</span><span class="op" id="1781119">(</span><span class="ident" id="1781120">io</span><span class="op" id="1781122">.</span><span class="ident" id="1781123">Reader</span><span class="op" id="1781129">)</span>&nbsp;<span class="op" id="1781131">(</span><span class="ident" id="1781132">Image</span><span class="op" id="1781137">,</span>&nbsp;<span class="builtintype" id="1781139">error</span><span class="op" id="1781144">)</span><span class="op" id="1781145">,</span>&nbsp;<span class="ident" id="1781147">decodeConfig</span>&nbsp;<span class="keyword" id="1781160">func</span><span class="op" id="1781164">(</span><span class="ident" id="1781165">io</span><span class="op" id="1781167">.</span><span class="ident" id="1781168">Reader</span><span class="op" id="1781174">)</span>&nbsp;<span class="op" id="1781176">(</span><span class="ident" id="1781177">Config</span><span class="op" id="1781183">,</span>&nbsp;<span class="builtintype" id="1781185">error</span><span class="op" id="1781190">)</span><span class="op" id="1781191">)</span>&nbsp;<span class="op" id="1781193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781196">formats</span>&nbsp;<span class="op" id="1781204">=</span>&nbsp;<span class="builtinfunc" id="1781206">append</span><span class="op" id="1781212">(</span><span class="ident" id="1781213">formats</span><span class="op" id="1781220">,</span>&nbsp;<span class="ident" id="1781222">format</span><span class="op" id="1781228">{</span><span class="ident" id="1781229">name</span><span class="op" id="1781233">,</span>&nbsp;<span class="ident" id="1781235">magic</span><span class="op" id="1781240">,</span>&nbsp;<span class="ident" id="1781242">decode</span><span class="op" id="1781248">,</span>&nbsp;<span class="ident" id="1781250">decodeConfig</span><span class="op" id="1781262">}</span><span class="op" id="1781263">)</span><br>
<span class="lineno"></span><span class="op" id="1781265">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1781268">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="1781322">type</span>&nbsp;<span class="ident" id="1781327">reader</span>&nbsp;<span class="keyword" id="1781334">interface</span>&nbsp;<span class="op" id="1781344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781347">io</span><span class="op" id="1781349">.</span><span class="ident" id="1781350">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781358">Peek</span><span class="op" id="1781362">(</span><span class="builtintype" id="1781363">int</span><span class="op" id="1781366">)</span>&nbsp;<span class="op" id="1781368">(</span><span class="op" id="1781369">[</span><span class="op" id="1781370">]</span><span class="builtintype" id="1781371">byte</span><span class="op" id="1781375">,</span>&nbsp;<span class="builtintype" id="1781377">error</span><span class="op" id="1781382">)</span><br>
<span class="lineno">40</span><span class="op" id="1781384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1781387">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="1781434">func</span>&nbsp;<span class="ident" id="1781439">asReader</span><span class="op" id="1781447">(</span><span class="ident" id="1781448">r</span>&nbsp;<span class="ident" id="1781450">io</span><span class="op" id="1781452">.</span><span class="ident" id="1781453">Reader</span><span class="op" id="1781459">)</span>&nbsp;<span class="ident" id="1781461">reader</span>&nbsp;<span class="op" id="1781468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781471">if</span>&nbsp;<span class="ident" id="1781474">rr</span><span class="op" id="1781476">,</span>&nbsp;<span class="ident" id="1781478">ok</span>&nbsp;<span class="op" id="1781481">:=</span>&nbsp;<span class="ident" id="1781484">r</span><span class="op" id="1781485">.</span><span class="op" id="1781486">(</span><span class="ident" id="1781487">reader</span><span class="op" id="1781493">)</span><span class="op" id="1781494">;</span>&nbsp;<span class="ident" id="1781496">ok</span>&nbsp;<span class="op" id="1781499">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781503">return</span>&nbsp;<span class="ident" id="1781510">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781517">return</span>&nbsp;<span class="ident" id="1781524">bufio</span><span class="op" id="1781529">.</span><span class="ident" id="1781530">NewReader</span><span class="op" id="1781539">(</span><span class="ident" id="1781540">r</span><span class="op" id="1781541">)</span><br>
<span class="lineno"></span><span class="op" id="1781543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="1781546">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="1781621">func</span>&nbsp;<span class="ident" id="1781626">match</span><span class="op" id="1781631">(</span><span class="ident" id="1781632">magic</span>&nbsp;<span class="builtintype" id="1781638">string</span><span class="op" id="1781644">,</span>&nbsp;<span class="ident" id="1781646">b</span>&nbsp;<span class="op" id="1781648">[</span><span class="op" id="1781649">]</span><span class="builtintype" id="1781650">byte</span><span class="op" id="1781654">)</span>&nbsp;<span class="builtintype" id="1781656">bool</span>&nbsp;<span class="op" id="1781661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781664">if</span>&nbsp;<span class="builtinfunc" id="1781667">len</span><span class="op" id="1781670">(</span><span class="ident" id="1781671">magic</span><span class="op" id="1781676">)</span>&nbsp;<span class="op" id="1781678">!=</span>&nbsp;<span class="builtinfunc" id="1781681">len</span><span class="op" id="1781684">(</span><span class="ident" id="1781685">b</span><span class="op" id="1781686">)</span>&nbsp;<span class="op" id="1781688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781692">return</span>&nbsp;<span class="builtintype" id="1781699">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781706">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781709">for</span>&nbsp;<span class="ident" id="1781713">i</span><span class="op" id="1781714">,</span>&nbsp;<span class="ident" id="1781716">c</span>&nbsp;<span class="op" id="1781718">:=</span>&nbsp;<span class="keyword" id="1781721">range</span>&nbsp;<span class="ident" id="1781727">b</span>&nbsp;<span class="op" id="1781729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781733">if</span>&nbsp;<span class="ident" id="1781736">magic</span><span class="op" id="1781741">[</span><span class="ident" id="1781742">i</span><span class="op" id="1781743">]</span>&nbsp;<span class="op" id="1781745">!=</span>&nbsp;<span class="ident" id="1781748">c</span>&nbsp;<span class="op" id="1781750">&amp;&amp;</span>&nbsp;<span class="ident" id="1781753">magic</span><span class="op" id="1781758">[</span><span class="ident" id="1781759">i</span><span class="op" id="1781760">]</span>&nbsp;<span class="op" id="1781762">!=</span>&nbsp;<span class="string" id="1781765">&#39;?&#39;</span>&nbsp;<span class="op" id="1781769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781774">return</span>&nbsp;<span class="builtintype" id="1781781">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781792">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781795">return</span>&nbsp;<span class="builtintype" id="1781802">true</span><br>
<span class="lineno"></span><span class="op" id="1781807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1781810">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="1781854">func</span>&nbsp;<span class="ident" id="1781859">sniff</span><span class="op" id="1781864">(</span><span class="ident" id="1781865">r</span>&nbsp;<span class="ident" id="1781867">reader</span><span class="op" id="1781873">)</span>&nbsp;<span class="ident" id="1781875">format</span>&nbsp;<span class="op" id="1781882">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781885">for</span>&nbsp;<span class="ident" id="1781889">_</span><span class="op" id="1781890">,</span>&nbsp;<span class="ident" id="1781892">f</span>&nbsp;<span class="op" id="1781894">:=</span>&nbsp;<span class="keyword" id="1781897">range</span>&nbsp;<span class="ident" id="1781903">formats</span>&nbsp;<span class="op" id="1781911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781915">b</span><span class="op" id="1781916">,</span>&nbsp;<span class="ident" id="1781918">err</span>&nbsp;<span class="op" id="1781922">:=</span>&nbsp;<span class="ident" id="1781925">r</span><span class="op" id="1781926">.</span><span class="ident" id="1781927">Peek</span><span class="op" id="1781931">(</span><span class="builtinfunc" id="1781932">len</span><span class="op" id="1781935">(</span><span class="ident" id="1781936">f</span><span class="op" id="1781937">.</span><span class="ident" id="1781938">magic</span><span class="op" id="1781943">)</span><span class="op" id="1781944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781948">if</span>&nbsp;<span class="ident" id="1781951">err</span>&nbsp;<span class="op" id="1781955">==</span>&nbsp;<span class="builtintype" id="1781958">nil</span>&nbsp;<span class="op" id="1781962">&amp;&amp;</span>&nbsp;<span class="ident" id="1781965">match</span><span class="op" id="1781970">(</span><span class="ident" id="1781971">f</span><span class="op" id="1781972">.</span><span class="ident" id="1781973">magic</span><span class="op" id="1781978">,</span>&nbsp;<span class="ident" id="1781980">b</span><span class="op" id="1781981">)</span>&nbsp;<span class="op" id="1781983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781988">return</span>&nbsp;<span class="ident" id="1781995">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781999">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782005">return</span>&nbsp;<span class="ident" id="1782012">format</span><span class="op" id="1782018">{</span><span class="op" id="1782019">}</span><br>
<span class="lineno"></span><span class="op" id="1782021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1782024">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="1782097">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="1782172">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="1782247">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="1782268">func</span>&nbsp;<span class="ident" id="1782273">Decode</span><span class="op" id="1782279">(</span><span class="ident" id="1782280">r</span>&nbsp;<span class="ident" id="1782282">io</span><span class="op" id="1782284">.</span><span class="ident" id="1782285">Reader</span><span class="op" id="1782291">)</span>&nbsp;<span class="op" id="1782293">(</span><span class="ident" id="1782294">Image</span><span class="op" id="1782299">,</span>&nbsp;<span class="builtintype" id="1782301">string</span><span class="op" id="1782307">,</span>&nbsp;<span class="builtintype" id="1782309">error</span><span class="op" id="1782314">)</span>&nbsp;<span class="op" id="1782316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782319">rr</span>&nbsp;<span class="op" id="1782322">:=</span>&nbsp;<span class="ident" id="1782325">asReader</span><span class="op" id="1782333">(</span><span class="ident" id="1782334">r</span><span class="op" id="1782335">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782338">f</span>&nbsp;<span class="op" id="1782340">:=</span>&nbsp;<span class="ident" id="1782343">sniff</span><span class="op" id="1782348">(</span><span class="ident" id="1782349">rr</span><span class="op" id="1782351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782354">if</span>&nbsp;<span class="ident" id="1782357">f</span><span class="op" id="1782358">.</span><span class="ident" id="1782359">decode</span>&nbsp;<span class="op" id="1782366">==</span>&nbsp;<span class="builtintype" id="1782369">nil</span>&nbsp;<span class="op" id="1782373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782377">return</span>&nbsp;<span class="builtintype" id="1782384">nil</span><span class="op" id="1782387">,</span>&nbsp;<span class="string" id="1782389">&#34;&#34;</span><span class="op" id="1782391">,</span>&nbsp;<span class="ident" id="1782393">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782407">m</span><span class="op" id="1782408">,</span>&nbsp;<span class="ident" id="1782410">err</span>&nbsp;<span class="op" id="1782414">:=</span>&nbsp;<span class="ident" id="1782417">f</span><span class="op" id="1782418">.</span><span class="ident" id="1782419">decode</span><span class="op" id="1782425">(</span><span class="ident" id="1782426">rr</span><span class="op" id="1782428">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782431">return</span>&nbsp;<span class="ident" id="1782438">m</span><span class="op" id="1782439">,</span>&nbsp;<span class="ident" id="1782441">f</span><span class="op" id="1782442">.</span><span class="ident" id="1782443">name</span><span class="op" id="1782447">,</span>&nbsp;<span class="ident" id="1782449">err</span><br>
<span class="lineno"></span><span class="op" id="1782453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1782456">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="1782532">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="1782611">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="1782688">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="1782739">func</span>&nbsp;<span class="ident" id="1782744">DecodeConfig</span><span class="op" id="1782756">(</span><span class="ident" id="1782757">r</span>&nbsp;<span class="ident" id="1782759">io</span><span class="op" id="1782761">.</span><span class="ident" id="1782762">Reader</span><span class="op" id="1782768">)</span>&nbsp;<span class="op" id="1782770">(</span><span class="ident" id="1782771">Config</span><span class="op" id="1782777">,</span>&nbsp;<span class="builtintype" id="1782779">string</span><span class="op" id="1782785">,</span>&nbsp;<span class="builtintype" id="1782787">error</span><span class="op" id="1782792">)</span>&nbsp;<span class="op" id="1782794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782797">rr</span>&nbsp;<span class="op" id="1782800">:=</span>&nbsp;<span class="ident" id="1782803">asReader</span><span class="op" id="1782811">(</span><span class="ident" id="1782812">r</span><span class="op" id="1782813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782816">f</span>&nbsp;<span class="op" id="1782818">:=</span>&nbsp;<span class="ident" id="1782821">sniff</span><span class="op" id="1782826">(</span><span class="ident" id="1782827">rr</span><span class="op" id="1782829">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782832">if</span>&nbsp;<span class="ident" id="1782835">f</span><span class="op" id="1782836">.</span><span class="ident" id="1782837">decodeConfig</span>&nbsp;<span class="op" id="1782850">==</span>&nbsp;<span class="builtintype" id="1782853">nil</span>&nbsp;<span class="op" id="1782857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782861">return</span>&nbsp;<span class="ident" id="1782868">Config</span><span class="op" id="1782874">{</span><span class="op" id="1782875">}</span><span class="op" id="1782876">,</span>&nbsp;<span class="string" id="1782878">&#34;&#34;</span><span class="op" id="1782880">,</span>&nbsp;<span class="ident" id="1782882">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782896">c</span><span class="op" id="1782897">,</span>&nbsp;<span class="ident" id="1782899">err</span>&nbsp;<span class="op" id="1782903">:=</span>&nbsp;<span class="ident" id="1782906">f</span><span class="op" id="1782907">.</span><span class="ident" id="1782908">decodeConfig</span><span class="op" id="1782920">(</span><span class="ident" id="1782921">rr</span><span class="op" id="1782923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782926">return</span>&nbsp;<span class="ident" id="1782933">c</span><span class="op" id="1782934">,</span>&nbsp;<span class="ident" id="1782936">f</span><span class="op" id="1782937">.</span><span class="ident" id="1782938">name</span><span class="op" id="1782942">,</span>&nbsp;<span class="ident" id="1782944">err</span><br>
<span class="lineno">100</span><span class="op" id="1782948">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
