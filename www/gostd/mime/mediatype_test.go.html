<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime</h2>
<ul>
<li><a href="/gostd/mime/grammar.go.html">grammar.go</a></li>
<li><a href="/gostd/mime/mediatype.go.html">mediatype.go</a></li>
<li><a href="/gostd/mime/mediatype_test.go.html" class="current">mediatype_test.go</a></li>
<li><a href="/gostd/mime/type.go.html">type.go</a></li>
<li><a href="/gostd/mime/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/mime/type_unix.go.html">type_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7920348">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7920403">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7920457">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7920508">package</span>&nbsp;<span class="ident" id="7920516">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7920522">import</span>&nbsp;<span class="op" id="7920529">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7920532">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7920543">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7920553">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7920556">func</span>&nbsp;<span class="ident" id="7920561">TestConsumeToken</span><span class="op" id="7920577">(</span><span class="ident" id="7920578">t</span>&nbsp;<span class="op" id="7920580">*</span><span class="ident" id="7920581">testing</span><span class="op" id="7920588">.</span><span class="ident" id="7920589">T</span><span class="op" id="7920590">)</span>&nbsp;<span class="op" id="7920592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920595">tests</span>&nbsp;<span class="op" id="7920601">:=</span>&nbsp;<span class="op" id="7920604">[</span><span class="op" id="7920605">...</span><span class="op" id="7920608">]</span><span class="op" id="7920609">[</span><span class="num" id="7920610">3</span><span class="op" id="7920611">]</span><span class="builtintype" id="7920612">string</span><span class="op" id="7920618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920622">{</span><span class="string" id="7920623">&#34;foo&nbsp;bar&#34;</span><span class="op" id="7920632">,</span>&nbsp;<span class="string" id="7920634">&#34;foo&#34;</span><span class="op" id="7920639">,</span>&nbsp;<span class="string" id="7920641">&#34;&nbsp;bar&#34;</span><span class="op" id="7920647">}</span><span class="op" id="7920648">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920652">{</span><span class="string" id="7920653">&#34;bar&#34;</span><span class="op" id="7920658">,</span>&nbsp;<span class="string" id="7920660">&#34;bar&#34;</span><span class="op" id="7920665">,</span>&nbsp;<span class="string" id="7920667">&#34;&#34;</span><span class="op" id="7920669">}</span><span class="op" id="7920670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920674">{</span><span class="string" id="7920675">&#34;&#34;</span><span class="op" id="7920677">,</span>&nbsp;<span class="string" id="7920679">&#34;&#34;</span><span class="op" id="7920681">,</span>&nbsp;<span class="string" id="7920683">&#34;&#34;</span><span class="op" id="7920685">}</span><span class="op" id="7920686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920690">{</span><span class="string" id="7920691">&#34;&nbsp;foo&#34;</span><span class="op" id="7920697">,</span>&nbsp;<span class="string" id="7920699">&#34;&#34;</span><span class="op" id="7920701">,</span>&nbsp;<span class="string" id="7920703">&#34;&nbsp;foo&#34;</span><span class="op" id="7920709">}</span><span class="op" id="7920710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920716">for</span>&nbsp;<span class="ident" id="7920720">_</span><span class="op" id="7920721">,</span>&nbsp;<span class="ident" id="7920723">test</span>&nbsp;<span class="op" id="7920728">:=</span>&nbsp;<span class="keyword" id="7920731">range</span>&nbsp;<span class="ident" id="7920737">tests</span>&nbsp;<span class="op" id="7920743">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920747">token</span><span class="op" id="7920752">,</span>&nbsp;<span class="ident" id="7920754">rest</span>&nbsp;<span class="op" id="7920759">:=</span>&nbsp;<span class="ident" id="7920762">consumeToken</span><span class="op" id="7920774">(</span><span class="ident" id="7920775">test</span><span class="op" id="7920779">[</span><span class="num" id="7920780">0</span><span class="op" id="7920781">]</span><span class="op" id="7920782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920786">expectedToken</span>&nbsp;<span class="op" id="7920800">:=</span>&nbsp;<span class="ident" id="7920803">test</span><span class="op" id="7920807">[</span><span class="num" id="7920808">1</span><span class="op" id="7920809">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920813">expectedRest</span>&nbsp;<span class="op" id="7920826">:=</span>&nbsp;<span class="ident" id="7920829">test</span><span class="op" id="7920833">[</span><span class="num" id="7920834">2</span><span class="op" id="7920835">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920839">if</span>&nbsp;<span class="ident" id="7920842">token</span>&nbsp;<span class="op" id="7920848">!=</span>&nbsp;<span class="ident" id="7920851">expectedToken</span>&nbsp;<span class="op" id="7920865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920870">t</span><span class="op" id="7920871">.</span><span class="ident" id="7920872">Errorf</span><span class="op" id="7920878">(</span><span class="string" id="7920879">&#34;expected&nbsp;to&nbsp;consume&nbsp;token&nbsp;&#39;%s&#39;,&nbsp;not&nbsp;&#39;%s&#39;&nbsp;from&nbsp;&#39;%s&#39;&#34;</span><span class="op" id="7920931">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920937">expectedToken</span><span class="op" id="7920950">,</span>&nbsp;<span class="ident" id="7920952">token</span><span class="op" id="7920957">,</span>&nbsp;<span class="ident" id="7920959">test</span><span class="op" id="7920963">[</span><span class="num" id="7920964">0</span><span class="op" id="7920965">]</span><span class="op" id="7920966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920970">}</span>&nbsp;<span class="keyword" id="7920972">else</span>&nbsp;<span class="keyword" id="7920977">if</span>&nbsp;<span class="ident" id="7920980">rest</span>&nbsp;<span class="op" id="7920985">!=</span>&nbsp;<span class="ident" id="7920988">expectedRest</span>&nbsp;<span class="op" id="7921001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921006">t</span><span class="op" id="7921007">.</span><span class="ident" id="7921008">Errorf</span><span class="op" id="7921014">(</span><span class="string" id="7921015">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;&#39;%s&#39;,&nbsp;not&nbsp;&#39;%s&#39;&nbsp;after&nbsp;reading&nbsp;token&nbsp;&#39;%s&#39;&nbsp;from&nbsp;&#39;%s&#39;&#34;</span><span class="op" id="7921088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921094">expectedRest</span><span class="op" id="7921106">,</span>&nbsp;<span class="ident" id="7921108">rest</span><span class="op" id="7921112">,</span>&nbsp;<span class="ident" id="7921114">token</span><span class="op" id="7921119">,</span>&nbsp;<span class="ident" id="7921121">test</span><span class="op" id="7921125">[</span><span class="num" id="7921126">0</span><span class="op" id="7921127">]</span><span class="op" id="7921128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921132">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921135">}</span><br>
<span class="lineno"></span><span class="op" id="7921137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7921140">func</span>&nbsp;<span class="ident" id="7921145">TestConsumeValue</span><span class="op" id="7921161">(</span><span class="ident" id="7921162">t</span>&nbsp;<span class="op" id="7921164">*</span><span class="ident" id="7921165">testing</span><span class="op" id="7921172">.</span><span class="ident" id="7921173">T</span><span class="op" id="7921174">)</span>&nbsp;<span class="op" id="7921176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921179">tests</span>&nbsp;<span class="op" id="7921185">:=</span>&nbsp;<span class="op" id="7921188">[</span><span class="op" id="7921189">...</span><span class="op" id="7921192">]</span><span class="op" id="7921193">[</span><span class="num" id="7921194">3</span><span class="op" id="7921195">]</span><span class="builtintype" id="7921196">string</span><span class="op" id="7921202">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921206">{</span><span class="string" id="7921207">&#34;foo&nbsp;bar&#34;</span><span class="op" id="7921216">,</span>&nbsp;<span class="string" id="7921218">&#34;foo&#34;</span><span class="op" id="7921223">,</span>&nbsp;<span class="string" id="7921225">&#34;&nbsp;bar&#34;</span><span class="op" id="7921231">}</span><span class="op" id="7921232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921236">{</span><span class="string" id="7921237">&#34;bar&#34;</span><span class="op" id="7921242">,</span>&nbsp;<span class="string" id="7921244">&#34;bar&#34;</span><span class="op" id="7921249">,</span>&nbsp;<span class="string" id="7921251">&#34;&#34;</span><span class="op" id="7921253">}</span><span class="op" id="7921254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921258">{</span><span class="string" id="7921259">&#34;&nbsp;bar&nbsp;&#34;</span><span class="op" id="7921266">,</span>&nbsp;<span class="string" id="7921268">&#34;&#34;</span><span class="op" id="7921270">,</span>&nbsp;<span class="string" id="7921272">&#34;&nbsp;bar&nbsp;&#34;</span><span class="op" id="7921279">}</span><span class="op" id="7921280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921284">{</span><span class="string" id="7921285">`&#34;My&nbsp;value&#34;end`</span><span class="op" id="7921300">,</span>&nbsp;<span class="string" id="7921302">&#34;My&nbsp;value&#34;</span><span class="op" id="7921312">,</span>&nbsp;<span class="string" id="7921314">&#34;end&#34;</span><span class="op" id="7921319">}</span><span class="op" id="7921320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921324">{</span><span class="string" id="7921325">`&#34;My&nbsp;value&#34;&nbsp;end`</span><span class="op" id="7921341">,</span>&nbsp;<span class="string" id="7921343">&#34;My&nbsp;value&#34;</span><span class="op" id="7921353">,</span>&nbsp;<span class="string" id="7921355">&#34;&nbsp;end&#34;</span><span class="op" id="7921361">}</span><span class="op" id="7921362">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921366">{</span><span class="string" id="7921367">`&#34;\\&#34;&nbsp;rest`</span><span class="op" id="7921378">,</span>&nbsp;<span class="string" id="7921380">&#34;\\&#34;</span><span class="op" id="7921384">,</span>&nbsp;<span class="string" id="7921386">&#34;&nbsp;rest&#34;</span><span class="op" id="7921393">}</span><span class="op" id="7921394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921398">{</span><span class="string" id="7921399">`&#34;My&nbsp;\&#34;&nbsp;value&#34;end`</span><span class="op" id="7921417">,</span>&nbsp;<span class="string" id="7921419">&#34;My&nbsp;\&#34;&nbsp;value&#34;</span><span class="op" id="7921432">,</span>&nbsp;<span class="string" id="7921434">&#34;end&#34;</span><span class="op" id="7921439">}</span><span class="op" id="7921440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921444">{</span><span class="string" id="7921445">`&#34;\&#34;&nbsp;rest`</span><span class="op" id="7921455">,</span>&nbsp;<span class="string" id="7921457">&#34;&#34;</span><span class="op" id="7921459">,</span>&nbsp;<span class="string" id="7921461">`&#34;\&#34;&nbsp;rest`</span><span class="op" id="7921471">}</span><span class="op" id="7921472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921478">for</span>&nbsp;<span class="ident" id="7921482">_</span><span class="op" id="7921483">,</span>&nbsp;<span class="ident" id="7921485">test</span>&nbsp;<span class="op" id="7921490">:=</span>&nbsp;<span class="keyword" id="7921493">range</span>&nbsp;<span class="ident" id="7921499">tests</span>&nbsp;<span class="op" id="7921505">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921509">value</span><span class="op" id="7921514">,</span>&nbsp;<span class="ident" id="7921516">rest</span>&nbsp;<span class="op" id="7921521">:=</span>&nbsp;<span class="ident" id="7921524">consumeValue</span><span class="op" id="7921536">(</span><span class="ident" id="7921537">test</span><span class="op" id="7921541">[</span><span class="num" id="7921542">0</span><span class="op" id="7921543">]</span><span class="op" id="7921544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921548">expectedValue</span>&nbsp;<span class="op" id="7921562">:=</span>&nbsp;<span class="ident" id="7921565">test</span><span class="op" id="7921569">[</span><span class="num" id="7921570">1</span><span class="op" id="7921571">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921575">expectedRest</span>&nbsp;<span class="op" id="7921588">:=</span>&nbsp;<span class="ident" id="7921591">test</span><span class="op" id="7921595">[</span><span class="num" id="7921596">2</span><span class="op" id="7921597">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921601">if</span>&nbsp;<span class="ident" id="7921604">value</span>&nbsp;<span class="op" id="7921610">!=</span>&nbsp;<span class="ident" id="7921613">expectedValue</span>&nbsp;<span class="op" id="7921627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921632">t</span><span class="op" id="7921633">.</span><span class="ident" id="7921634">Errorf</span><span class="op" id="7921640">(</span><span class="string" id="7921641">&#34;expected&nbsp;to&nbsp;consume&nbsp;value&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="7921693">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921699">expectedValue</span><span class="op" id="7921712">,</span>&nbsp;<span class="ident" id="7921714">value</span><span class="op" id="7921719">,</span>&nbsp;<span class="ident" id="7921721">test</span><span class="op" id="7921725">[</span><span class="num" id="7921726">0</span><span class="op" id="7921727">]</span><span class="op" id="7921728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921732">}</span>&nbsp;<span class="keyword" id="7921734">else</span>&nbsp;<span class="keyword" id="7921739">if</span>&nbsp;<span class="ident" id="7921742">rest</span>&nbsp;<span class="op" id="7921747">!=</span>&nbsp;<span class="ident" id="7921750">expectedRest</span>&nbsp;<span class="op" id="7921763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921768">t</span><span class="op" id="7921769">.</span><span class="ident" id="7921770">Errorf</span><span class="op" id="7921776">(</span><span class="string" id="7921777">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;after&nbsp;reading&nbsp;value&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="7921850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921856">expectedRest</span><span class="op" id="7921868">,</span>&nbsp;<span class="ident" id="7921870">rest</span><span class="op" id="7921874">,</span>&nbsp;<span class="ident" id="7921876">value</span><span class="op" id="7921881">,</span>&nbsp;<span class="ident" id="7921883">test</span><span class="op" id="7921887">[</span><span class="num" id="7921888">0</span><span class="op" id="7921889">]</span><span class="op" id="7921890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921894">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921897">}</span><br>
<span class="lineno"></span><span class="op" id="7921899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7921902">func</span>&nbsp;<span class="ident" id="7921907">TestConsumeMediaParam</span><span class="op" id="7921928">(</span><span class="ident" id="7921929">t</span>&nbsp;<span class="op" id="7921931">*</span><span class="ident" id="7921932">testing</span><span class="op" id="7921939">.</span><span class="ident" id="7921940">T</span><span class="op" id="7921941">)</span>&nbsp;<span class="op" id="7921943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921946">tests</span>&nbsp;<span class="op" id="7921952">:=</span>&nbsp;<span class="op" id="7921955">[</span><span class="op" id="7921956">...</span><span class="op" id="7921959">]</span><span class="op" id="7921960">[</span><span class="num" id="7921961">4</span><span class="op" id="7921962">]</span><span class="builtintype" id="7921963">string</span><span class="op" id="7921969">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921973">{</span><span class="string" id="7921974">&#34;&nbsp;;&nbsp;foo=bar&#34;</span><span class="op" id="7921986">,</span>&nbsp;<span class="string" id="7921988">&#34;foo&#34;</span><span class="op" id="7921993">,</span>&nbsp;<span class="string" id="7921995">&#34;bar&#34;</span><span class="op" id="7922000">,</span>&nbsp;<span class="string" id="7922002">&#34;&#34;</span><span class="op" id="7922004">}</span><span class="op" id="7922005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922009">{</span><span class="string" id="7922010">&#34;;&nbsp;foo=bar&#34;</span><span class="op" id="7922021">,</span>&nbsp;<span class="string" id="7922023">&#34;foo&#34;</span><span class="op" id="7922028">,</span>&nbsp;<span class="string" id="7922030">&#34;bar&#34;</span><span class="op" id="7922035">,</span>&nbsp;<span class="string" id="7922037">&#34;&#34;</span><span class="op" id="7922039">}</span><span class="op" id="7922040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922044">{</span><span class="string" id="7922045">&#34;;foo=bar&#34;</span><span class="op" id="7922055">,</span>&nbsp;<span class="string" id="7922057">&#34;foo&#34;</span><span class="op" id="7922062">,</span>&nbsp;<span class="string" id="7922064">&#34;bar&#34;</span><span class="op" id="7922069">,</span>&nbsp;<span class="string" id="7922071">&#34;&#34;</span><span class="op" id="7922073">}</span><span class="op" id="7922074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922078">{</span><span class="string" id="7922079">&#34;;FOO=bar&#34;</span><span class="op" id="7922089">,</span>&nbsp;<span class="string" id="7922091">&#34;foo&#34;</span><span class="op" id="7922096">,</span>&nbsp;<span class="string" id="7922098">&#34;bar&#34;</span><span class="op" id="7922103">,</span>&nbsp;<span class="string" id="7922105">&#34;&#34;</span><span class="op" id="7922107">}</span><span class="op" id="7922108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922112">{</span><span class="string" id="7922113">`;foo=&#34;bar&#34;`</span><span class="op" id="7922125">,</span>&nbsp;<span class="string" id="7922127">&#34;foo&#34;</span><span class="op" id="7922132">,</span>&nbsp;<span class="string" id="7922134">&#34;bar&#34;</span><span class="op" id="7922139">,</span>&nbsp;<span class="string" id="7922141">&#34;&#34;</span><span class="op" id="7922143">}</span><span class="op" id="7922144">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922148">{</span><span class="string" id="7922149">`;foo=&#34;bar&#34;;&nbsp;`</span><span class="op" id="7922163">,</span>&nbsp;<span class="string" id="7922165">&#34;foo&#34;</span><span class="op" id="7922170">,</span>&nbsp;<span class="string" id="7922172">&#34;bar&#34;</span><span class="op" id="7922177">,</span>&nbsp;<span class="string" id="7922179">&#34;;&nbsp;&#34;</span><span class="op" id="7922183">}</span><span class="op" id="7922184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922188">{</span><span class="string" id="7922189">`;foo=&#34;bar&#34;;&nbsp;foo=baz`</span><span class="op" id="7922210">,</span>&nbsp;<span class="string" id="7922212">&#34;foo&#34;</span><span class="op" id="7922217">,</span>&nbsp;<span class="string" id="7922219">&#34;bar&#34;</span><span class="op" id="7922224">,</span>&nbsp;<span class="string" id="7922226">&#34;;&nbsp;foo=baz&#34;</span><span class="op" id="7922237">}</span><span class="op" id="7922238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922242">{</span><span class="string" id="7922243">`&nbsp;;&nbsp;boundary=----CUT;`</span><span class="op" id="7922265">,</span>&nbsp;<span class="string" id="7922267">&#34;boundary&#34;</span><span class="op" id="7922277">,</span>&nbsp;<span class="string" id="7922279">&#34;----CUT&#34;</span><span class="op" id="7922288">,</span>&nbsp;<span class="string" id="7922290">&#34;;&#34;</span><span class="op" id="7922293">}</span><span class="op" id="7922294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922298">{</span><span class="string" id="7922299">`&nbsp;;&nbsp;key=value;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7922340">,</span>&nbsp;<span class="string" id="7922342">&#34;key&#34;</span><span class="op" id="7922347">,</span>&nbsp;<span class="string" id="7922349">&#34;value&#34;</span><span class="op" id="7922356">,</span>&nbsp;<span class="string" id="7922358">`;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7922387">}</span><span class="op" id="7922388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922392">{</span><span class="string" id="7922393">`;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7922422">,</span>&nbsp;<span class="string" id="7922424">&#34;blah&#34;</span><span class="op" id="7922430">,</span>&nbsp;<span class="string" id="7922432">&#34;value&#34;</span><span class="op" id="7922439">,</span>&nbsp;<span class="string" id="7922441">`;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7922455">}</span><span class="op" id="7922456">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922460">{</span><span class="string" id="7922461">`;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7922475">,</span>&nbsp;<span class="string" id="7922477">&#34;name&#34;</span><span class="op" id="7922483">,</span>&nbsp;<span class="string" id="7922485">&#34;foo&#34;</span><span class="op" id="7922490">,</span>&nbsp;<span class="string" id="7922492">`&nbsp;`</span><span class="op" id="7922495">}</span><span class="op" id="7922496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922502">for</span>&nbsp;<span class="ident" id="7922506">_</span><span class="op" id="7922507">,</span>&nbsp;<span class="ident" id="7922509">test</span>&nbsp;<span class="op" id="7922514">:=</span>&nbsp;<span class="keyword" id="7922517">range</span>&nbsp;<span class="ident" id="7922523">tests</span>&nbsp;<span class="op" id="7922529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922533">param</span><span class="op" id="7922538">,</span>&nbsp;<span class="ident" id="7922540">value</span><span class="op" id="7922545">,</span>&nbsp;<span class="ident" id="7922547">rest</span>&nbsp;<span class="op" id="7922552">:=</span>&nbsp;<span class="ident" id="7922555">consumeMediaParam</span><span class="op" id="7922572">(</span><span class="ident" id="7922573">test</span><span class="op" id="7922577">[</span><span class="num" id="7922578">0</span><span class="op" id="7922579">]</span><span class="op" id="7922580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922584">expectedParam</span>&nbsp;<span class="op" id="7922598">:=</span>&nbsp;<span class="ident" id="7922601">test</span><span class="op" id="7922605">[</span><span class="num" id="7922606">1</span><span class="op" id="7922607">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922611">expectedValue</span>&nbsp;<span class="op" id="7922625">:=</span>&nbsp;<span class="ident" id="7922628">test</span><span class="op" id="7922632">[</span><span class="num" id="7922633">2</span><span class="op" id="7922634">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922638">expectedRest</span>&nbsp;<span class="op" id="7922651">:=</span>&nbsp;<span class="ident" id="7922654">test</span><span class="op" id="7922658">[</span><span class="num" id="7922659">3</span><span class="op" id="7922660">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922664">if</span>&nbsp;<span class="ident" id="7922667">param</span>&nbsp;<span class="op" id="7922673">!=</span>&nbsp;<span class="ident" id="7922676">expectedParam</span>&nbsp;<span class="op" id="7922690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922695">t</span><span class="op" id="7922696">.</span><span class="ident" id="7922697">Errorf</span><span class="op" id="7922703">(</span><span class="string" id="7922704">&#34;expected&nbsp;to&nbsp;consume&nbsp;param&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="7922756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922762">expectedParam</span><span class="op" id="7922775">,</span>&nbsp;<span class="ident" id="7922777">param</span><span class="op" id="7922782">,</span>&nbsp;<span class="ident" id="7922784">test</span><span class="op" id="7922788">[</span><span class="num" id="7922789">0</span><span class="op" id="7922790">]</span><span class="op" id="7922791">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922795">}</span>&nbsp;<span class="keyword" id="7922797">else</span>&nbsp;<span class="keyword" id="7922802">if</span>&nbsp;<span class="ident" id="7922805">value</span>&nbsp;<span class="op" id="7922811">!=</span>&nbsp;<span class="ident" id="7922814">expectedValue</span>&nbsp;<span class="op" id="7922828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922833">t</span><span class="op" id="7922834">.</span><span class="ident" id="7922835">Errorf</span><span class="op" id="7922841">(</span><span class="string" id="7922842">&#34;expected&nbsp;to&nbsp;consume&nbsp;value&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="7922894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922900">expectedValue</span><span class="op" id="7922913">,</span>&nbsp;<span class="ident" id="7922915">value</span><span class="op" id="7922920">,</span>&nbsp;<span class="ident" id="7922922">test</span><span class="op" id="7922926">[</span><span class="num" id="7922927">0</span><span class="op" id="7922928">]</span><span class="op" id="7922929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922933">}</span>&nbsp;<span class="keyword" id="7922935">else</span>&nbsp;<span class="keyword" id="7922940">if</span>&nbsp;<span class="ident" id="7922943">rest</span>&nbsp;<span class="op" id="7922948">!=</span>&nbsp;<span class="ident" id="7922951">expectedRest</span>&nbsp;<span class="op" id="7922964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922969">t</span><span class="op" id="7922970">.</span><span class="ident" id="7922971">Errorf</span><span class="op" id="7922977">(</span><span class="string" id="7922978">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;after&nbsp;reading&nbsp;[%s/%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="7923048">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923054">expectedRest</span><span class="op" id="7923066">,</span>&nbsp;<span class="ident" id="7923068">rest</span><span class="op" id="7923072">,</span>&nbsp;<span class="ident" id="7923074">param</span><span class="op" id="7923079">,</span>&nbsp;<span class="ident" id="7923081">value</span><span class="op" id="7923086">,</span>&nbsp;<span class="ident" id="7923088">test</span><span class="op" id="7923092">[</span><span class="num" id="7923093">0</span><span class="op" id="7923094">]</span><span class="op" id="7923095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923102">}</span><br>
<span class="lineno"></span><span class="op" id="7923104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7923107">type</span>&nbsp;<span class="ident" id="7923112">mediaTypeTest</span>&nbsp;<span class="keyword" id="7923126">struct</span>&nbsp;<span class="op" id="7923133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923136">in</span>&nbsp;<span class="builtintype" id="7923139">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923147">t</span>&nbsp;&nbsp;<span class="builtintype" id="7923150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923158">p</span>&nbsp;&nbsp;<span class="keyword" id="7923161">map</span><span class="op" id="7923164">[</span><span class="builtintype" id="7923165">string</span><span class="op" id="7923171">]</span><span class="builtintype" id="7923172">string</span><br>
<span class="lineno"></span><span class="op" id="7923179">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7923182">func</span>&nbsp;<span class="ident" id="7923187">TestParseMediaType</span><span class="op" id="7923205">(</span><span class="ident" id="7923206">t</span>&nbsp;<span class="op" id="7923208">*</span><span class="ident" id="7923209">testing</span><span class="op" id="7923216">.</span><span class="ident" id="7923217">T</span><span class="op" id="7923218">)</span>&nbsp;<span class="op" id="7923220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923223">//&nbsp;Convenience&nbsp;map&nbsp;initializer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923255">m</span>&nbsp;<span class="op" id="7923257">:=</span>&nbsp;<span class="keyword" id="7923260">func</span><span class="op" id="7923264">(</span><span class="ident" id="7923265">s</span>&nbsp;<span class="op" id="7923267">...</span><span class="builtintype" id="7923270">string</span><span class="op" id="7923276">)</span>&nbsp;<span class="keyword" id="7923278">map</span><span class="op" id="7923281">[</span><span class="builtintype" id="7923282">string</span><span class="op" id="7923288">]</span><span class="builtintype" id="7923289">string</span>&nbsp;<span class="op" id="7923296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923300">sm</span>&nbsp;<span class="op" id="7923303">:=</span>&nbsp;<span class="builtinfunc" id="7923306">make</span><span class="op" id="7923310">(</span><span class="keyword" id="7923311">map</span><span class="op" id="7923314">[</span><span class="builtintype" id="7923315">string</span><span class="op" id="7923321">]</span><span class="builtintype" id="7923322">string</span><span class="op" id="7923328">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923332">for</span>&nbsp;<span class="ident" id="7923336">i</span>&nbsp;<span class="op" id="7923338">:=</span>&nbsp;<span class="num" id="7923341">0</span><span class="op" id="7923342">;</span>&nbsp;<span class="ident" id="7923344">i</span>&nbsp;<span class="op" id="7923346">&lt;</span>&nbsp;<span class="builtinfunc" id="7923348">len</span><span class="op" id="7923351">(</span><span class="ident" id="7923352">s</span><span class="op" id="7923353">)</span><span class="op" id="7923354">;</span>&nbsp;<span class="ident" id="7923356">i</span>&nbsp;<span class="op" id="7923358">+=</span>&nbsp;<span class="num" id="7923361">2</span>&nbsp;<span class="op" id="7923363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923368">sm</span><span class="op" id="7923370">[</span><span class="ident" id="7923371">s</span><span class="op" id="7923372">[</span><span class="ident" id="7923373">i</span><span class="op" id="7923374">]</span><span class="op" id="7923375">]</span>&nbsp;<span class="op" id="7923377">=</span>&nbsp;<span class="ident" id="7923379">s</span><span class="op" id="7923380">[</span><span class="ident" id="7923381">i</span><span class="op" id="7923382">+</span><span class="num" id="7923383">1</span><span class="op" id="7923384">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923392">return</span>&nbsp;<span class="ident" id="7923399">sm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923403">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923407">nameFoo</span>&nbsp;<span class="op" id="7923415">:=</span>&nbsp;<span class="keyword" id="7923418">map</span><span class="op" id="7923421">[</span><span class="builtintype" id="7923422">string</span><span class="op" id="7923428">]</span><span class="builtintype" id="7923429">string</span><span class="op" id="7923435">{</span><span class="string" id="7923436">&#34;name&#34;</span><span class="op" id="7923442">:</span>&nbsp;<span class="string" id="7923444">&#34;foo&#34;</span><span class="op" id="7923449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923452">tests</span>&nbsp;<span class="op" id="7923458">:=</span>&nbsp;<span class="op" id="7923461">[</span><span class="op" id="7923462">]</span><span class="ident" id="7923463">mediaTypeTest</span><span class="op" id="7923476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923480">{</span><span class="string" id="7923481">`form-data;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7923504">,</span>&nbsp;<span class="string" id="7923506">&#34;form-data&#34;</span><span class="op" id="7923517">,</span>&nbsp;<span class="ident" id="7923519">nameFoo</span><span class="op" id="7923526">}</span><span class="op" id="7923527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923531">{</span><span class="string" id="7923532">`&nbsp;form-data&nbsp;;&nbsp;name=foo`</span><span class="op" id="7923555">,</span>&nbsp;<span class="string" id="7923557">&#34;form-data&#34;</span><span class="op" id="7923568">,</span>&nbsp;<span class="ident" id="7923570">nameFoo</span><span class="op" id="7923577">}</span><span class="op" id="7923578">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923582">{</span><span class="string" id="7923583">`FORM-DATA;name=&#34;foo&#34;`</span><span class="op" id="7923605">,</span>&nbsp;<span class="string" id="7923607">&#34;form-data&#34;</span><span class="op" id="7923618">,</span>&nbsp;<span class="ident" id="7923620">nameFoo</span><span class="op" id="7923627">}</span><span class="op" id="7923628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923632">{</span><span class="string" id="7923633">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7923658">,</span>&nbsp;<span class="string" id="7923660">&#34;form-data&#34;</span><span class="op" id="7923671">,</span>&nbsp;<span class="ident" id="7923673">nameFoo</span><span class="op" id="7923680">}</span><span class="op" id="7923681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923685">{</span><span class="string" id="7923686">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7923711">,</span>&nbsp;<span class="string" id="7923713">&#34;form-data&#34;</span><span class="op" id="7923724">,</span>&nbsp;<span class="ident" id="7923726">nameFoo</span><span class="op" id="7923733">}</span><span class="op" id="7923734">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923739">{</span><span class="string" id="7923740">`form-data;&nbsp;key=value;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="7923789">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7923794">&#34;form-data&#34;</span><span class="op" id="7923805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923810">m</span><span class="op" id="7923811">(</span><span class="string" id="7923812">&#34;key&#34;</span><span class="op" id="7923817">,</span>&nbsp;<span class="string" id="7923819">&#34;value&#34;</span><span class="op" id="7923826">,</span>&nbsp;<span class="string" id="7923828">&#34;blah&#34;</span><span class="op" id="7923834">,</span>&nbsp;<span class="string" id="7923836">&#34;value&#34;</span><span class="op" id="7923843">,</span>&nbsp;<span class="string" id="7923845">&#34;name&#34;</span><span class="op" id="7923851">,</span>&nbsp;<span class="string" id="7923853">&#34;foo&#34;</span><span class="op" id="7923858">)</span><span class="op" id="7923859">}</span><span class="op" id="7923860">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923865">{</span><span class="string" id="7923866">`foo;&nbsp;key=val1;&nbsp;key=the-key-appears-again-which-is-bogus`</span><span class="op" id="7923923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7923928">&#34;&#34;</span><span class="op" id="7923930">,</span>&nbsp;<span class="ident" id="7923932">m</span><span class="op" id="7923933">(</span><span class="op" id="7923934">)</span><span class="op" id="7923935">}</span><span class="op" id="7923936">,</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923941">//&nbsp;From&nbsp;RFC&nbsp;2231:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923961">{</span><span class="string" id="7923962">`application/x-stuff;&nbsp;title*=us-ascii&#39;en-us&#39;This%20is%20%2A%2A%2Afun%2A%2A%2A`</span><span class="op" id="7924040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924045">&#34;application/x-stuff&#34;</span><span class="op" id="7924066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924071">m</span><span class="op" id="7924072">(</span><span class="string" id="7924073">&#34;title&#34;</span><span class="op" id="7924080">,</span>&nbsp;<span class="string" id="7924082">&#34;This&nbsp;is&nbsp;***fun***&#34;</span><span class="op" id="7924101">)</span><span class="op" id="7924102">}</span><span class="op" id="7924103">,</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924108">{</span><span class="string" id="7924109">`message/external-body;&nbsp;access-type=URL;&nbsp;`</span>&nbsp;<span class="op" id="7924152">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924157">`URL*0=&#34;ftp://&#34;;`</span>&nbsp;<span class="op" id="7924175">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924180">`URL*1=&#34;cs.utk.edu/pub/moore/bulk-mailer/bulk-mailer.tar&#34;`</span><span class="op" id="7924238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924243">&#34;message/external-body&#34;</span><span class="op" id="7924266">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924271">m</span><span class="op" id="7924272">(</span><span class="string" id="7924273">&#34;access-type&#34;</span><span class="op" id="7924286">,</span>&nbsp;<span class="string" id="7924288">&#34;URL&#34;</span><span class="op" id="7924293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924299">&#34;url&#34;</span><span class="op" id="7924304">,</span>&nbsp;<span class="string" id="7924306">&#34;ftp://cs.utk.edu/pub/moore/bulk-mailer/bulk-mailer.tar&#34;</span><span class="op" id="7924362">)</span><span class="op" id="7924363">}</span><span class="op" id="7924364">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924369">{</span><span class="string" id="7924370">`application/x-stuff;&nbsp;`</span>&nbsp;<span class="op" id="7924394">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924399">`title*0*=us-ascii&#39;en&#39;This%20is%20even%20more%20;&nbsp;`</span>&nbsp;<span class="op" id="7924451">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924456">`title*1*=%2A%2A%2Afun%2A%2A%2A%20;&nbsp;`</span>&nbsp;<span class="op" id="7924494">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924499">`title*2=&#34;isn&#39;t&nbsp;it!&#34;`</span><span class="op" id="7924520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924525">&#34;application/x-stuff&#34;</span><span class="op" id="7924546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924551">m</span><span class="op" id="7924552">(</span><span class="string" id="7924553">&#34;title&#34;</span><span class="op" id="7924560">,</span>&nbsp;<span class="string" id="7924562">&#34;This&nbsp;is&nbsp;even&nbsp;more&nbsp;***fun***&nbsp;isn&#39;t&nbsp;it!&#34;</span><span class="op" id="7924601">)</span><span class="op" id="7924602">}</span><span class="op" id="7924603">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7924608">//&nbsp;Tests&nbsp;from&nbsp;http://greenbytes.de/tech/tc2231/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7924658">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;tests&nbsp;from&nbsp;that&nbsp;site.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924721">{</span><span class="string" id="7924722">`attachment;&nbsp;filename=&#34;f\oo.html&#34;`</span><span class="op" id="7924756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924761">&#34;attachment&#34;</span><span class="op" id="7924773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924778">m</span><span class="op" id="7924779">(</span><span class="string" id="7924780">&#34;filename&#34;</span><span class="op" id="7924790">,</span>&nbsp;<span class="string" id="7924792">&#34;foo.html&#34;</span><span class="op" id="7924802">)</span><span class="op" id="7924803">}</span><span class="op" id="7924804">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924808">{</span><span class="string" id="7924809">`attachment;&nbsp;filename=&#34;\&#34;quoting\&#34;&nbsp;tested.html&#34;`</span><span class="op" id="7924857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924862">&#34;attachment&#34;</span><span class="op" id="7924874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924879">m</span><span class="op" id="7924880">(</span><span class="string" id="7924881">&#34;filename&#34;</span><span class="op" id="7924891">,</span>&nbsp;<span class="string" id="7924893">`&#34;quoting&#34;&nbsp;tested.html`</span><span class="op" id="7924916">)</span><span class="op" id="7924917">}</span><span class="op" id="7924918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924922">{</span><span class="string" id="7924923">`attachment;&nbsp;filename=&#34;Here&#39;s&nbsp;a&nbsp;semicolon;.html&#34;`</span><span class="op" id="7924972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7924977">&#34;attachment&#34;</span><span class="op" id="7924989">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924994">m</span><span class="op" id="7924995">(</span><span class="string" id="7924996">&#34;filename&#34;</span><span class="op" id="7925006">,</span>&nbsp;<span class="string" id="7925008">&#34;Here&#39;s&nbsp;a&nbsp;semicolon;.html&#34;</span><span class="op" id="7925034">)</span><span class="op" id="7925035">}</span><span class="op" id="7925036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925040">{</span><span class="string" id="7925041">`attachment;&nbsp;foo=&#34;\&#34;\\&#34;;filename=&#34;foo.html&#34;`</span><span class="op" id="7925085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925090">&#34;attachment&#34;</span><span class="op" id="7925102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925107">m</span><span class="op" id="7925108">(</span><span class="string" id="7925109">&#34;foo&#34;</span><span class="op" id="7925114">,</span>&nbsp;<span class="string" id="7925116">&#34;\&#34;\\&#34;</span><span class="op" id="7925122">,</span>&nbsp;<span class="string" id="7925124">&#34;filename&#34;</span><span class="op" id="7925134">,</span>&nbsp;<span class="string" id="7925136">&#34;foo.html&#34;</span><span class="op" id="7925146">)</span><span class="op" id="7925147">}</span><span class="op" id="7925148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925152">{</span><span class="string" id="7925153">`attachment;&nbsp;filename=foo.html`</span><span class="op" id="7925184">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925189">&#34;attachment&#34;</span><span class="op" id="7925201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925206">m</span><span class="op" id="7925207">(</span><span class="string" id="7925208">&#34;filename&#34;</span><span class="op" id="7925218">,</span>&nbsp;<span class="string" id="7925220">&#34;foo.html&#34;</span><span class="op" id="7925230">)</span><span class="op" id="7925231">}</span><span class="op" id="7925232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925236">{</span><span class="string" id="7925237">`attachment;&nbsp;filename=foo.html&nbsp;;`</span><span class="op" id="7925270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925275">&#34;attachment&#34;</span><span class="op" id="7925287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925292">m</span><span class="op" id="7925293">(</span><span class="string" id="7925294">&#34;filename&#34;</span><span class="op" id="7925304">,</span>&nbsp;<span class="string" id="7925306">&#34;foo.html&#34;</span><span class="op" id="7925316">)</span><span class="op" id="7925317">}</span><span class="op" id="7925318">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925322">{</span><span class="string" id="7925323">`attachment;&nbsp;filename=&#39;foo.html&#39;`</span><span class="op" id="7925356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925361">&#34;attachment&#34;</span><span class="op" id="7925373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925378">m</span><span class="op" id="7925379">(</span><span class="string" id="7925380">&#34;filename&#34;</span><span class="op" id="7925390">,</span>&nbsp;<span class="string" id="7925392">&#34;foo.html&#34;</span><span class="op" id="7925402">)</span><span class="op" id="7925403">}</span><span class="op" id="7925404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925408">{</span><span class="string" id="7925409">`attachment;&nbsp;filename=&#34;foo-%41.html&#34;`</span><span class="op" id="7925446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925451">&#34;attachment&#34;</span><span class="op" id="7925463">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925468">m</span><span class="op" id="7925469">(</span><span class="string" id="7925470">&#34;filename&#34;</span><span class="op" id="7925480">,</span>&nbsp;<span class="string" id="7925482">&#34;foo-%41.html&#34;</span><span class="op" id="7925496">)</span><span class="op" id="7925497">}</span><span class="op" id="7925498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925502">{</span><span class="string" id="7925503">`attachment;&nbsp;filename=&#34;foo-%\41.html&#34;`</span><span class="op" id="7925541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925546">&#34;attachment&#34;</span><span class="op" id="7925558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925563">m</span><span class="op" id="7925564">(</span><span class="string" id="7925565">&#34;filename&#34;</span><span class="op" id="7925575">,</span>&nbsp;<span class="string" id="7925577">&#34;foo-%41.html&#34;</span><span class="op" id="7925591">)</span><span class="op" id="7925592">}</span><span class="op" id="7925593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925597">{</span><span class="string" id="7925598">`filename=foo.html`</span><span class="op" id="7925617">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925622">&#34;&#34;</span><span class="op" id="7925624">,</span>&nbsp;<span class="ident" id="7925626">m</span><span class="op" id="7925627">(</span><span class="op" id="7925628">)</span><span class="op" id="7925629">}</span><span class="op" id="7925630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925634">{</span><span class="string" id="7925635">`x=y;&nbsp;filename=foo.html`</span><span class="op" id="7925659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925664">&#34;&#34;</span><span class="op" id="7925666">,</span>&nbsp;<span class="ident" id="7925668">m</span><span class="op" id="7925669">(</span><span class="op" id="7925670">)</span><span class="op" id="7925671">}</span><span class="op" id="7925672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925676">{</span><span class="string" id="7925677">`&#34;foo;&nbsp;filename=bar;baz&#34;;&nbsp;filename=qux`</span><span class="op" id="7925716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925721">&#34;&#34;</span><span class="op" id="7925723">,</span>&nbsp;<span class="ident" id="7925725">m</span><span class="op" id="7925726">(</span><span class="op" id="7925727">)</span><span class="op" id="7925728">}</span><span class="op" id="7925729">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925733">{</span><span class="string" id="7925734">`inline;&nbsp;attachment;&nbsp;filename=foo.html`</span><span class="op" id="7925773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925778">&#34;&#34;</span><span class="op" id="7925780">,</span>&nbsp;<span class="ident" id="7925782">m</span><span class="op" id="7925783">(</span><span class="op" id="7925784">)</span><span class="op" id="7925785">}</span><span class="op" id="7925786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925790">{</span><span class="string" id="7925791">`attachment;&nbsp;filename=&#34;foo.html&#34;.txt`</span><span class="op" id="7925828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925833">&#34;&#34;</span><span class="op" id="7925835">,</span>&nbsp;<span class="ident" id="7925837">m</span><span class="op" id="7925838">(</span><span class="op" id="7925839">)</span><span class="op" id="7925840">}</span><span class="op" id="7925841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925845">{</span><span class="string" id="7925846">`attachment;&nbsp;filename=&#34;bar`</span><span class="op" id="7925873">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925878">&#34;&#34;</span><span class="op" id="7925880">,</span>&nbsp;<span class="ident" id="7925882">m</span><span class="op" id="7925883">(</span><span class="op" id="7925884">)</span><span class="op" id="7925885">}</span><span class="op" id="7925886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925890">{</span><span class="string" id="7925891">`attachment;&nbsp;creation-date=&#34;Wed,&nbsp;12&nbsp;Feb&nbsp;1997&nbsp;16:29:51&nbsp;-0500&#34;`</span><span class="op" id="7925952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7925957">&#34;attachment&#34;</span><span class="op" id="7925969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925974">m</span><span class="op" id="7925975">(</span><span class="string" id="7925976">&#34;creation-date&#34;</span><span class="op" id="7925991">,</span>&nbsp;<span class="string" id="7925993">&#34;Wed,&nbsp;12&nbsp;Feb&nbsp;1997&nbsp;16:29:51&nbsp;-0500&#34;</span><span class="op" id="7926026">)</span><span class="op" id="7926027">}</span><span class="op" id="7926028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926032">{</span><span class="string" id="7926033">`foobar`</span><span class="op" id="7926041">,</span>&nbsp;<span class="string" id="7926043">&#34;foobar&#34;</span><span class="op" id="7926051">,</span>&nbsp;<span class="ident" id="7926053">m</span><span class="op" id="7926054">(</span><span class="op" id="7926055">)</span><span class="op" id="7926056">}</span><span class="op" id="7926057">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926061">{</span><span class="string" id="7926062">`attachment;&nbsp;filename*&nbsp;=UTF-8&#39;&#39;foo-%c3%a4.html`</span><span class="op" id="7926109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926114">&#34;attachment&#34;</span><span class="op" id="7926126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926131">m</span><span class="op" id="7926132">(</span><span class="string" id="7926133">&#34;filename&#34;</span><span class="op" id="7926143">,</span>&nbsp;<span class="string" id="7926145">&#34;foo-ä.html&#34;</span><span class="op" id="7926158">)</span><span class="op" id="7926159">}</span><span class="op" id="7926160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926164">{</span><span class="string" id="7926165">`attachment;&nbsp;filename*=UTF-8&#39;&#39;A-%2541.html`</span><span class="op" id="7926208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926213">&#34;attachment&#34;</span><span class="op" id="7926225">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926230">m</span><span class="op" id="7926231">(</span><span class="string" id="7926232">&#34;filename&#34;</span><span class="op" id="7926242">,</span>&nbsp;<span class="string" id="7926244">&#34;A-%41.html&#34;</span><span class="op" id="7926256">)</span><span class="op" id="7926257">}</span><span class="op" id="7926258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926262">{</span><span class="string" id="7926263">`attachment;&nbsp;filename*0=&#34;foo.&#34;;&nbsp;filename*1=&#34;html&#34;`</span><span class="op" id="7926313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926318">&#34;attachment&#34;</span><span class="op" id="7926330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926335">m</span><span class="op" id="7926336">(</span><span class="string" id="7926337">&#34;filename&#34;</span><span class="op" id="7926347">,</span>&nbsp;<span class="string" id="7926349">&#34;foo.html&#34;</span><span class="op" id="7926359">)</span><span class="op" id="7926360">}</span><span class="op" id="7926361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926365">{</span><span class="string" id="7926366">`attachment;&nbsp;filename*0*=UTF-8&#39;&#39;foo-%c3%a4;&nbsp;filename*1=&#34;.html&#34;`</span><span class="op" id="7926429">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926434">&#34;attachment&#34;</span><span class="op" id="7926446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926451">m</span><span class="op" id="7926452">(</span><span class="string" id="7926453">&#34;filename&#34;</span><span class="op" id="7926463">,</span>&nbsp;<span class="string" id="7926465">&#34;foo-ä.html&#34;</span><span class="op" id="7926478">)</span><span class="op" id="7926479">}</span><span class="op" id="7926480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926484">{</span><span class="string" id="7926485">`attachment;&nbsp;filename*0=&#34;foo&#34;;&nbsp;filename*01=&#34;bar&#34;`</span><span class="op" id="7926534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926539">&#34;attachment&#34;</span><span class="op" id="7926551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926556">m</span><span class="op" id="7926557">(</span><span class="string" id="7926558">&#34;filename&#34;</span><span class="op" id="7926568">,</span>&nbsp;<span class="string" id="7926570">&#34;foo&#34;</span><span class="op" id="7926575">)</span><span class="op" id="7926576">}</span><span class="op" id="7926577">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926581">{</span><span class="string" id="7926582">`attachment;&nbsp;filename*0=&#34;foo&#34;;&nbsp;filename*2=&#34;bar&#34;`</span><span class="op" id="7926630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926635">&#34;attachment&#34;</span><span class="op" id="7926647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926652">m</span><span class="op" id="7926653">(</span><span class="string" id="7926654">&#34;filename&#34;</span><span class="op" id="7926664">,</span>&nbsp;<span class="string" id="7926666">&#34;foo&#34;</span><span class="op" id="7926671">)</span><span class="op" id="7926672">}</span><span class="op" id="7926673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926677">{</span><span class="string" id="7926678">`attachment;&nbsp;filename*1=&#34;foo&#34;;&nbsp;filename*2=&#34;bar&#34;`</span><span class="op" id="7926726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926731">&#34;attachment&#34;</span><span class="op" id="7926743">,</span>&nbsp;<span class="ident" id="7926745">m</span><span class="op" id="7926746">(</span><span class="op" id="7926747">)</span><span class="op" id="7926748">}</span><span class="op" id="7926749">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926753">{</span><span class="string" id="7926754">`attachment;&nbsp;filename*1=&#34;bar&#34;;&nbsp;filename*0=&#34;foo&#34;`</span><span class="op" id="7926802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926807">&#34;attachment&#34;</span><span class="op" id="7926819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926824">m</span><span class="op" id="7926825">(</span><span class="string" id="7926826">&#34;filename&#34;</span><span class="op" id="7926836">,</span>&nbsp;<span class="string" id="7926838">&#34;foobar&#34;</span><span class="op" id="7926846">)</span><span class="op" id="7926847">}</span><span class="op" id="7926848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926852">{</span><span class="string" id="7926853">`attachment;&nbsp;filename=&#34;foo-ae.html&#34;;&nbsp;filename*=UTF-8&#39;&#39;foo-%c3%a4.html`</span><span class="op" id="7926923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7926928">&#34;attachment&#34;</span><span class="op" id="7926940">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926945">m</span><span class="op" id="7926946">(</span><span class="string" id="7926947">&#34;filename&#34;</span><span class="op" id="7926957">,</span>&nbsp;<span class="string" id="7926959">&#34;foo-ä.html&#34;</span><span class="op" id="7926972">)</span><span class="op" id="7926973">}</span><span class="op" id="7926974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926978">{</span><span class="string" id="7926979">`attachment;&nbsp;filename*=UTF-8&#39;&#39;foo-%c3%a4.html;&nbsp;filename=&#34;foo-ae.html&#34;`</span><span class="op" id="7927049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927054">&#34;attachment&#34;</span><span class="op" id="7927066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927071">m</span><span class="op" id="7927072">(</span><span class="string" id="7927073">&#34;filename&#34;</span><span class="op" id="7927083">,</span>&nbsp;<span class="string" id="7927085">&#34;foo-ä.html&#34;</span><span class="op" id="7927098">)</span><span class="op" id="7927099">}</span><span class="op" id="7927100">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927105">//&nbsp;Browsers&nbsp;also&nbsp;just&nbsp;send&nbsp;UTF-8&nbsp;directly&nbsp;without&nbsp;RFC&nbsp;2231,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927167">//&nbsp;at&nbsp;least&nbsp;when&nbsp;the&nbsp;source&nbsp;page&nbsp;is&nbsp;served&nbsp;with&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927224">{</span><span class="string" id="7927225">`form-data;&nbsp;firstname=&#34;Брэд&#34;;&nbsp;lastname=&#34;Фицпатрик&#34;`</span><span class="op" id="7927289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927294">&#34;form-data&#34;</span><span class="op" id="7927305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927310">m</span><span class="op" id="7927311">(</span><span class="string" id="7927312">&#34;firstname&#34;</span><span class="op" id="7927323">,</span>&nbsp;<span class="string" id="7927325">&#34;Брэд&#34;</span><span class="op" id="7927335">,</span>&nbsp;<span class="string" id="7927337">&#34;lastname&#34;</span><span class="op" id="7927347">,</span>&nbsp;<span class="string" id="7927349">&#34;Фицпатрик&#34;</span><span class="op" id="7927369">)</span><span class="op" id="7927370">}</span><span class="op" id="7927371">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927377">for</span>&nbsp;<span class="ident" id="7927381">_</span><span class="op" id="7927382">,</span>&nbsp;<span class="ident" id="7927384">test</span>&nbsp;<span class="op" id="7927389">:=</span>&nbsp;<span class="keyword" id="7927392">range</span>&nbsp;<span class="ident" id="7927398">tests</span>&nbsp;<span class="op" id="7927404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927408">mt</span><span class="op" id="7927410">,</span>&nbsp;<span class="ident" id="7927412">params</span><span class="op" id="7927418">,</span>&nbsp;<span class="ident" id="7927420">err</span>&nbsp;<span class="op" id="7927424">:=</span>&nbsp;<span class="ident" id="7927427">ParseMediaType</span><span class="op" id="7927441">(</span><span class="ident" id="7927442">test</span><span class="op" id="7927446">.</span><span class="ident" id="7927447">in</span><span class="op" id="7927449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927453">if</span>&nbsp;<span class="ident" id="7927456">err</span>&nbsp;<span class="op" id="7927460">!=</span>&nbsp;<span class="ident" id="7927463">nil</span>&nbsp;<span class="op" id="7927467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927472">if</span>&nbsp;<span class="ident" id="7927475">test</span><span class="op" id="7927479">.</span><span class="ident" id="7927480">t</span>&nbsp;<span class="op" id="7927482">!=</span>&nbsp;<span class="string" id="7927485">&#34;&#34;</span>&nbsp;<span class="op" id="7927488">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927494">t</span><span class="op" id="7927495">.</span><span class="ident" id="7927496">Errorf</span><span class="op" id="7927502">(</span><span class="string" id="7927503">&#34;for&nbsp;input&nbsp;%q,&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7927539">,</span>&nbsp;<span class="ident" id="7927541">test</span><span class="op" id="7927545">.</span><span class="ident" id="7927546">in</span><span class="op" id="7927548">,</span>&nbsp;<span class="ident" id="7927550">err</span><span class="op" id="7927553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927559">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927576">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927587">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927591">if</span>&nbsp;<span class="ident" id="7927594">g</span><span class="op" id="7927595">,</span>&nbsp;<span class="ident" id="7927597">e</span>&nbsp;<span class="op" id="7927599">:=</span>&nbsp;<span class="ident" id="7927602">mt</span><span class="op" id="7927604">,</span>&nbsp;<span class="ident" id="7927606">test</span><span class="op" id="7927610">.</span><span class="ident" id="7927611">t</span><span class="op" id="7927612">;</span>&nbsp;<span class="ident" id="7927614">g</span>&nbsp;<span class="op" id="7927616">!=</span>&nbsp;<span class="ident" id="7927619">e</span>&nbsp;<span class="op" id="7927621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927626">t</span><span class="op" id="7927627">.</span><span class="ident" id="7927628">Errorf</span><span class="op" id="7927634">(</span><span class="string" id="7927635">&#34;for&nbsp;input&nbsp;%q,&nbsp;expected&nbsp;type&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7927675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927681">test</span><span class="op" id="7927685">.</span><span class="ident" id="7927686">in</span><span class="op" id="7927688">,</span>&nbsp;<span class="ident" id="7927690">e</span><span class="op" id="7927691">,</span>&nbsp;<span class="ident" id="7927693">g</span><span class="op" id="7927694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927699">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927710">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927714">if</span>&nbsp;<span class="builtinfunc" id="7927717">len</span><span class="op" id="7927720">(</span><span class="ident" id="7927721">params</span><span class="op" id="7927727">)</span>&nbsp;<span class="op" id="7927729">==</span>&nbsp;<span class="num" id="7927732">0</span>&nbsp;<span class="op" id="7927734">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="7927737">len</span><span class="op" id="7927740">(</span><span class="ident" id="7927741">test</span><span class="op" id="7927745">.</span><span class="ident" id="7927746">p</span><span class="op" id="7927747">)</span>&nbsp;<span class="op" id="7927749">==</span>&nbsp;<span class="num" id="7927752">0</span>&nbsp;<span class="op" id="7927754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927759">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927774">if</span>&nbsp;<span class="op" id="7927777">!</span><span class="ident" id="7927778">reflect</span><span class="op" id="7927785">.</span><span class="ident" id="7927786">DeepEqual</span><span class="op" id="7927795">(</span><span class="ident" id="7927796">params</span><span class="op" id="7927802">,</span>&nbsp;<span class="ident" id="7927804">test</span><span class="op" id="7927808">.</span><span class="ident" id="7927809">p</span><span class="op" id="7927810">)</span>&nbsp;<span class="op" id="7927812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927817">t</span><span class="op" id="7927818">.</span><span class="ident" id="7927819">Errorf</span><span class="op" id="7927825">(</span><span class="string" id="7927826">&#34;for&nbsp;input&nbsp;%q,&nbsp;wrong&nbsp;params.\n&#34;</span><span class="op" id="7927857">+</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927863">&#34;expected:&nbsp;%#v\n&#34;</span><span class="op" id="7927880">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927886">&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got:&nbsp;%#v&#34;</span><span class="op" id="7927901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927907">test</span><span class="op" id="7927911">.</span><span class="ident" id="7927912">in</span><span class="op" id="7927914">,</span>&nbsp;<span class="ident" id="7927916">test</span><span class="op" id="7927920">.</span><span class="ident" id="7927921">p</span><span class="op" id="7927922">,</span>&nbsp;<span class="ident" id="7927924">params</span><span class="op" id="7927930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927937">}</span><br>
<span class="lineno">245</span><span class="op" id="7927939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927942">type</span>&nbsp;<span class="ident" id="7927947">badMediaTypeTest</span>&nbsp;<span class="keyword" id="7927964">struct</span>&nbsp;<span class="op" id="7927971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927974">in</span>&nbsp;&nbsp;<span class="builtintype" id="7927978">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927986">err</span>&nbsp;<span class="builtintype" id="7927990">string</span><br>
<span class="lineno">250</span><span class="op" id="7927997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928000">var</span>&nbsp;<span class="ident" id="7928004">badMediaTypeTests</span>&nbsp;<span class="op" id="7928022">=</span>&nbsp;<span class="op" id="7928024">[</span><span class="op" id="7928025">]</span><span class="ident" id="7928026">badMediaTypeTest</span><span class="op" id="7928042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928045">{</span><span class="string" id="7928046">&#34;bogus&nbsp;;=========&#34;</span><span class="op" id="7928064">,</span>&nbsp;<span class="string" id="7928066">&#34;mime:&nbsp;invalid&nbsp;media&nbsp;parameter&#34;</span><span class="op" id="7928097">}</span><span class="op" id="7928098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928101">{</span><span class="string" id="7928102">&#34;bogus/&lt;script&gt;alert&lt;/script&gt;&#34;</span><span class="op" id="7928132">,</span>&nbsp;<span class="string" id="7928134">&#34;mime:&nbsp;expected&nbsp;token&nbsp;after&nbsp;slash&#34;</span><span class="op" id="7928168">}</span><span class="op" id="7928169">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928172">{</span><span class="string" id="7928173">&#34;bogus/bogus&lt;script&gt;alert&lt;/script&gt;&#34;</span><span class="op" id="7928208">,</span>&nbsp;<span class="string" id="7928210">&#34;mime:&nbsp;unexpected&nbsp;content&nbsp;after&nbsp;media&nbsp;subtype&#34;</span><span class="op" id="7928256">}</span><span class="op" id="7928257">,</span><br>
<span class="lineno"></span><span class="op" id="7928259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928262">func</span>&nbsp;<span class="ident" id="7928267">TestParseMediaTypeBogus</span><span class="op" id="7928290">(</span><span class="ident" id="7928291">t</span>&nbsp;<span class="op" id="7928293">*</span><span class="ident" id="7928294">testing</span><span class="op" id="7928301">.</span><span class="ident" id="7928302">T</span><span class="op" id="7928303">)</span>&nbsp;<span class="op" id="7928305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928308">for</span>&nbsp;<span class="ident" id="7928312">_</span><span class="op" id="7928313">,</span>&nbsp;<span class="ident" id="7928315">tt</span>&nbsp;<span class="op" id="7928318">:=</span>&nbsp;<span class="keyword" id="7928321">range</span>&nbsp;<span class="ident" id="7928327">badMediaTypeTests</span>&nbsp;<span class="op" id="7928345">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928349">mt</span><span class="op" id="7928351">,</span>&nbsp;<span class="ident" id="7928353">params</span><span class="op" id="7928359">,</span>&nbsp;<span class="ident" id="7928361">err</span>&nbsp;<span class="op" id="7928365">:=</span>&nbsp;<span class="ident" id="7928368">ParseMediaType</span><span class="op" id="7928382">(</span><span class="ident" id="7928383">tt</span><span class="op" id="7928385">.</span><span class="ident" id="7928386">in</span><span class="op" id="7928388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928392">if</span>&nbsp;<span class="ident" id="7928395">err</span>&nbsp;<span class="op" id="7928399">==</span>&nbsp;<span class="ident" id="7928402">nil</span>&nbsp;<span class="op" id="7928406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928411">t</span><span class="op" id="7928412">.</span><span class="ident" id="7928413">Errorf</span><span class="op" id="7928419">(</span><span class="string" id="7928420">&#34;ParseMediaType(%q)&nbsp;=&nbsp;nil&nbsp;error;&nbsp;want&nbsp;parse&nbsp;error&#34;</span><span class="op" id="7928470">,</span>&nbsp;<span class="ident" id="7928472">tt</span><span class="op" id="7928474">.</span><span class="ident" id="7928475">in</span><span class="op" id="7928477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928482">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928493">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928497">if</span>&nbsp;<span class="ident" id="7928500">err</span><span class="op" id="7928503">.</span><span class="ident" id="7928504">Error</span><span class="op" id="7928509">(</span><span class="op" id="7928510">)</span>&nbsp;<span class="op" id="7928512">!=</span>&nbsp;<span class="ident" id="7928515">tt</span><span class="op" id="7928517">.</span><span class="ident" id="7928518">err</span>&nbsp;<span class="op" id="7928522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928527">t</span><span class="op" id="7928528">.</span><span class="ident" id="7928529">Errorf</span><span class="op" id="7928535">(</span><span class="string" id="7928536">&#34;ParseMediaType(%q)&nbsp;=&nbsp;err&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7928574">,</span>&nbsp;<span class="ident" id="7928576">tt</span><span class="op" id="7928578">.</span><span class="ident" id="7928579">in</span><span class="op" id="7928581">,</span>&nbsp;<span class="ident" id="7928583">err</span><span class="op" id="7928586">.</span><span class="ident" id="7928587">Error</span><span class="op" id="7928592">(</span><span class="op" id="7928593">)</span><span class="op" id="7928594">,</span>&nbsp;<span class="ident" id="7928596">tt</span><span class="op" id="7928598">.</span><span class="ident" id="7928599">err</span><span class="op" id="7928602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928610">if</span>&nbsp;<span class="ident" id="7928613">params</span>&nbsp;<span class="op" id="7928620">!=</span>&nbsp;<span class="ident" id="7928623">nil</span>&nbsp;<span class="op" id="7928627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928632">t</span><span class="op" id="7928633">.</span><span class="ident" id="7928634">Errorf</span><span class="op" id="7928640">(</span><span class="string" id="7928641">&#34;ParseMediaType(%q):&nbsp;got&nbsp;non-nil&nbsp;params&nbsp;on&nbsp;error&#34;</span><span class="op" id="7928690">,</span>&nbsp;<span class="ident" id="7928692">tt</span><span class="op" id="7928694">.</span><span class="ident" id="7928695">in</span><span class="op" id="7928697">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928705">if</span>&nbsp;<span class="ident" id="7928708">mt</span>&nbsp;<span class="op" id="7928711">!=</span>&nbsp;<span class="string" id="7928714">&#34;&#34;</span>&nbsp;<span class="op" id="7928717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928722">t</span><span class="op" id="7928723">.</span><span class="ident" id="7928724">Errorf</span><span class="op" id="7928730">(</span><span class="string" id="7928731">&#34;ParseMediaType(%q):&nbsp;got&nbsp;non-empty&nbsp;media&nbsp;type&nbsp;string&nbsp;on&nbsp;error&#34;</span><span class="op" id="7928793">,</span>&nbsp;<span class="ident" id="7928795">tt</span><span class="op" id="7928797">.</span><span class="ident" id="7928798">in</span><span class="op" id="7928800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928807">}</span><br>
<span class="lineno">275</span><span class="op" id="7928809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928812">type</span>&nbsp;<span class="ident" id="7928817">formatTest</span>&nbsp;<span class="keyword" id="7928828">struct</span>&nbsp;<span class="op" id="7928835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928838">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7928845">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928853">params</span>&nbsp;<span class="keyword" id="7928860">map</span><span class="op" id="7928863">[</span><span class="builtintype" id="7928864">string</span><span class="op" id="7928870">]</span><span class="builtintype" id="7928871">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928879">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7928886">string</span><br>
<span class="lineno"></span><span class="op" id="7928893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928896">var</span>&nbsp;<span class="ident" id="7928900">formatTests</span>&nbsp;<span class="op" id="7928912">=</span>&nbsp;<span class="op" id="7928914">[</span><span class="op" id="7928915">]</span><span class="ident" id="7928916">formatTest</span><span class="op" id="7928926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928929">{</span><span class="string" id="7928930">&#34;noslash&#34;</span><span class="op" id="7928939">,</span>&nbsp;<span class="ident" id="7928941">nil</span><span class="op" id="7928944">,</span>&nbsp;<span class="string" id="7928946">&#34;&#34;</span><span class="op" id="7928948">}</span><span class="op" id="7928949">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928952">{</span><span class="string" id="7928953">&#34;foo&nbsp;bar/baz&#34;</span><span class="op" id="7928966">,</span>&nbsp;<span class="ident" id="7928968">nil</span><span class="op" id="7928971">,</span>&nbsp;<span class="string" id="7928973">&#34;&#34;</span><span class="op" id="7928975">}</span><span class="op" id="7928976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928979">{</span><span class="string" id="7928980">&#34;foo/bar&nbsp;baz&#34;</span><span class="op" id="7928993">,</span>&nbsp;<span class="ident" id="7928995">nil</span><span class="op" id="7928998">,</span>&nbsp;<span class="string" id="7929000">&#34;&#34;</span><span class="op" id="7929002">}</span><span class="op" id="7929003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929006">{</span><span class="string" id="7929007">&#34;foo/BAR&#34;</span><span class="op" id="7929016">,</span>&nbsp;<span class="ident" id="7929018">nil</span><span class="op" id="7929021">,</span>&nbsp;<span class="string" id="7929023">&#34;foo/bar&#34;</span><span class="op" id="7929032">}</span><span class="op" id="7929033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929036">{</span><span class="string" id="7929037">&#34;foo/BAR&#34;</span><span class="op" id="7929046">,</span>&nbsp;<span class="keyword" id="7929048">map</span><span class="op" id="7929051">[</span><span class="builtintype" id="7929052">string</span><span class="op" id="7929058">]</span><span class="builtintype" id="7929059">string</span><span class="op" id="7929065">{</span><span class="string" id="7929066">&#34;X&#34;</span><span class="op" id="7929069">:</span>&nbsp;<span class="string" id="7929071">&#34;Y&#34;</span><span class="op" id="7929074">}</span><span class="op" id="7929075">,</span>&nbsp;<span class="string" id="7929077">&#34;foo/bar;&nbsp;x=Y&#34;</span><span class="op" id="7929091">}</span><span class="op" id="7929092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929095">{</span><span class="string" id="7929096">&#34;foo/BAR&#34;</span><span class="op" id="7929105">,</span>&nbsp;<span class="keyword" id="7929107">map</span><span class="op" id="7929110">[</span><span class="builtintype" id="7929111">string</span><span class="op" id="7929117">]</span><span class="builtintype" id="7929118">string</span><span class="op" id="7929124">{</span><span class="string" id="7929125">&#34;space&#34;</span><span class="op" id="7929132">:</span>&nbsp;<span class="string" id="7929134">&#34;With&nbsp;space&#34;</span><span class="op" id="7929146">}</span><span class="op" id="7929147">,</span>&nbsp;<span class="string" id="7929149">`foo/bar;&nbsp;space=&#34;With&nbsp;space&#34;`</span><span class="op" id="7929178">}</span><span class="op" id="7929179">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929182">{</span><span class="string" id="7929183">&#34;foo/BAR&#34;</span><span class="op" id="7929192">,</span>&nbsp;<span class="keyword" id="7929194">map</span><span class="op" id="7929197">[</span><span class="builtintype" id="7929198">string</span><span class="op" id="7929204">]</span><span class="builtintype" id="7929205">string</span><span class="op" id="7929211">{</span><span class="string" id="7929212">&#34;quote&#34;</span><span class="op" id="7929219">:</span>&nbsp;<span class="string" id="7929221">`With&nbsp;&#34;quote`</span><span class="op" id="7929234">}</span><span class="op" id="7929235">,</span>&nbsp;<span class="string" id="7929237">`foo/bar;&nbsp;quote=&#34;With&nbsp;\&#34;quote&#34;`</span><span class="op" id="7929268">}</span><span class="op" id="7929269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929272">{</span><span class="string" id="7929273">&#34;foo/BAR&#34;</span><span class="op" id="7929282">,</span>&nbsp;<span class="keyword" id="7929284">map</span><span class="op" id="7929287">[</span><span class="builtintype" id="7929288">string</span><span class="op" id="7929294">]</span><span class="builtintype" id="7929295">string</span><span class="op" id="7929301">{</span><span class="string" id="7929302">&#34;bslash&#34;</span><span class="op" id="7929310">:</span>&nbsp;<span class="string" id="7929312">`With&nbsp;\backslash`</span><span class="op" id="7929329">}</span><span class="op" id="7929330">,</span>&nbsp;<span class="string" id="7929332">`foo/bar;&nbsp;bslash=&#34;With&nbsp;\\backslash&#34;`</span><span class="op" id="7929368">}</span><span class="op" id="7929369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929372">{</span><span class="string" id="7929373">&#34;foo/BAR&#34;</span><span class="op" id="7929382">,</span>&nbsp;<span class="keyword" id="7929384">map</span><span class="op" id="7929387">[</span><span class="builtintype" id="7929388">string</span><span class="op" id="7929394">]</span><span class="builtintype" id="7929395">string</span><span class="op" id="7929401">{</span><span class="string" id="7929402">&#34;both&#34;</span><span class="op" id="7929408">:</span>&nbsp;<span class="string" id="7929410">`With&nbsp;\backslash&nbsp;and&nbsp;&#34;quote`</span><span class="op" id="7929438">}</span><span class="op" id="7929439">,</span>&nbsp;<span class="string" id="7929441">`foo/bar;&nbsp;both=&#34;With&nbsp;\\backslash&nbsp;and&nbsp;\&#34;quote&#34;`</span><span class="op" id="7929487">}</span><span class="op" id="7929488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929491">{</span><span class="string" id="7929492">&#34;foo/BAR&#34;</span><span class="op" id="7929501">,</span>&nbsp;<span class="keyword" id="7929503">map</span><span class="op" id="7929506">[</span><span class="builtintype" id="7929507">string</span><span class="op" id="7929513">]</span><span class="builtintype" id="7929514">string</span><span class="op" id="7929520">{</span><span class="string" id="7929521">&#34;&#34;</span><span class="op" id="7929523">:</span>&nbsp;<span class="string" id="7929525">&#34;empty&nbsp;attribute&#34;</span><span class="op" id="7929542">}</span><span class="op" id="7929543">,</span>&nbsp;<span class="string" id="7929545">&#34;&#34;</span><span class="op" id="7929547">}</span><span class="op" id="7929548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929551">{</span><span class="string" id="7929552">&#34;foo/BAR&#34;</span><span class="op" id="7929561">,</span>&nbsp;<span class="keyword" id="7929563">map</span><span class="op" id="7929566">[</span><span class="builtintype" id="7929567">string</span><span class="op" id="7929573">]</span><span class="builtintype" id="7929574">string</span><span class="op" id="7929580">{</span><span class="string" id="7929581">&#34;bad&nbsp;attribute&#34;</span><span class="op" id="7929596">:</span>&nbsp;<span class="string" id="7929598">&#34;baz&#34;</span><span class="op" id="7929603">}</span><span class="op" id="7929604">,</span>&nbsp;<span class="string" id="7929606">&#34;&#34;</span><span class="op" id="7929608">}</span><span class="op" id="7929609">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929612">{</span><span class="string" id="7929613">&#34;foo/BAR&#34;</span><span class="op" id="7929622">,</span>&nbsp;<span class="keyword" id="7929624">map</span><span class="op" id="7929627">[</span><span class="builtintype" id="7929628">string</span><span class="op" id="7929634">]</span><span class="builtintype" id="7929635">string</span><span class="op" id="7929641">{</span><span class="string" id="7929642">&#34;nonascii&#34;</span><span class="op" id="7929652">:</span>&nbsp;<span class="string" id="7929654">&#34;not&nbsp;an&nbsp;ascii&nbsp;character:&nbsp;ä&#34;</span><span class="op" id="7929682">}</span><span class="op" id="7929683">,</span>&nbsp;<span class="string" id="7929685">&#34;&#34;</span><span class="op" id="7929687">}</span><span class="op" id="7929688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929691">{</span><span class="string" id="7929692">&#34;foo/bar&#34;</span><span class="op" id="7929701">,</span>&nbsp;<span class="keyword" id="7929703">map</span><span class="op" id="7929706">[</span><span class="builtintype" id="7929707">string</span><span class="op" id="7929713">]</span><span class="builtintype" id="7929714">string</span><span class="op" id="7929720">{</span><span class="string" id="7929721">&#34;a&#34;</span><span class="op" id="7929724">:</span>&nbsp;<span class="string" id="7929726">&#34;av&#34;</span><span class="op" id="7929730">,</span>&nbsp;<span class="string" id="7929732">&#34;b&#34;</span><span class="op" id="7929735">:</span>&nbsp;<span class="string" id="7929737">&#34;bv&#34;</span><span class="op" id="7929741">,</span>&nbsp;<span class="string" id="7929743">&#34;c&#34;</span><span class="op" id="7929746">:</span>&nbsp;<span class="string" id="7929748">&#34;cv&#34;</span><span class="op" id="7929752">}</span><span class="op" id="7929753">,</span>&nbsp;<span class="string" id="7929755">&#34;foo/bar;&nbsp;a=av;&nbsp;b=bv;&nbsp;c=cv&#34;</span><span class="op" id="7929782">}</span><span class="op" id="7929783">,</span><br>
<span class="lineno"></span><span class="op" id="7929785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7929788">func</span>&nbsp;<span class="ident" id="7929793">TestFormatMediaType</span><span class="op" id="7929812">(</span><span class="ident" id="7929813">t</span>&nbsp;<span class="op" id="7929815">*</span><span class="ident" id="7929816">testing</span><span class="op" id="7929823">.</span><span class="ident" id="7929824">T</span><span class="op" id="7929825">)</span>&nbsp;<span class="op" id="7929827">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929830">for</span>&nbsp;<span class="ident" id="7929834">i</span><span class="op" id="7929835">,</span>&nbsp;<span class="ident" id="7929837">tt</span>&nbsp;<span class="op" id="7929840">:=</span>&nbsp;<span class="keyword" id="7929843">range</span>&nbsp;<span class="ident" id="7929849">formatTests</span>&nbsp;<span class="op" id="7929861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929865">got</span>&nbsp;<span class="op" id="7929869">:=</span>&nbsp;<span class="ident" id="7929872">FormatMediaType</span><span class="op" id="7929887">(</span><span class="ident" id="7929888">tt</span><span class="op" id="7929890">.</span><span class="ident" id="7929891">typ</span><span class="op" id="7929894">,</span>&nbsp;<span class="ident" id="7929896">tt</span><span class="op" id="7929898">.</span><span class="ident" id="7929899">params</span><span class="op" id="7929905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929909">if</span>&nbsp;<span class="ident" id="7929912">got</span>&nbsp;<span class="op" id="7929916">!=</span>&nbsp;<span class="ident" id="7929919">tt</span><span class="op" id="7929921">.</span><span class="ident" id="7929922">want</span>&nbsp;<span class="op" id="7929927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929932">t</span><span class="op" id="7929933">.</span><span class="ident" id="7929934">Errorf</span><span class="op" id="7929940">(</span><span class="string" id="7929941">&#34;%d.&nbsp;FormatMediaType(%q,&nbsp;%v)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7929984">,</span>&nbsp;<span class="ident" id="7929986">i</span><span class="op" id="7929987">,</span>&nbsp;<span class="ident" id="7929989">tt</span><span class="op" id="7929991">.</span><span class="ident" id="7929992">typ</span><span class="op" id="7929995">,</span>&nbsp;<span class="ident" id="7929997">tt</span><span class="op" id="7929999">.</span><span class="ident" id="7930000">params</span><span class="op" id="7930006">,</span>&nbsp;<span class="ident" id="7930008">got</span><span class="op" id="7930011">,</span>&nbsp;<span class="ident" id="7930013">tt</span><span class="op" id="7930015">.</span><span class="ident" id="7930016">want</span><span class="op" id="7930020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930024">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930027">}</span><br>
<span class="lineno"></span><span class="op" id="7930029">}</span>
</div>
</body>
</html>
