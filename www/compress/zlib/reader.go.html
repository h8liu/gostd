<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5610693">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5610748">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5610802">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5610853">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5611296">package</span>&nbsp;<span class="ident" id="5611304">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5611310">import</span>&nbsp;<span class="op" id="5611317">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611320">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611329">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611347">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611357">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611365">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5611381">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5611386">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5611389">const</span>&nbsp;<span class="ident" id="5611395">zlibDeflate</span>&nbsp;<span class="op" id="5611407">=</span>&nbsp;<span class="num" id="5611409">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5611412">var</span>&nbsp;<span class="op" id="5611416">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5611419">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611500">ErrChecksum</span>&nbsp;<span class="op" id="5611512">=</span>&nbsp;<span class="ident" id="5611514"><a href="/compress/zlib/reader.go.html#5611347">errors</a></span><span class="op" id="5611520">.</span><span class="ident" id="5611521">New</span><span class="op" id="5611524">(</span><span class="string" id="5611525">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5611549">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5611552">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611637">ErrDictionary</span>&nbsp;<span class="op" id="5611651">=</span>&nbsp;<span class="ident" id="5611653"><a href="/compress/zlib/reader.go.html#5611347">errors</a></span><span class="op" id="5611659">.</span><span class="ident" id="5611660">New</span><span class="op" id="5611663">(</span><span class="string" id="5611664">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5611690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5611693">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611770">ErrHeader</span>&nbsp;<span class="op" id="5611780">=</span>&nbsp;<span class="ident" id="5611782"><a href="/compress/zlib/reader.go.html#5611347">errors</a></span><span class="op" id="5611788">.</span><span class="ident" id="5611789">New</span><span class="op" id="5611792">(</span><span class="string" id="5611793">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5611815">)</span><br>
<span class="lineno"></span><span class="op" id="5611817">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5611820">type</span>&nbsp;<span class="ident" id="5611825">reader</span>&nbsp;<span class="keyword" id="5611832">struct</span>&nbsp;<span class="op" id="5611839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611842">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611855"><a href="/compress/zlib/reader.go.html#5611329">flate</a></span><span class="op" id="5611860">.</span><span class="ident" id="5611861">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611869">decompressor</span>&nbsp;<span class="ident" id="5611882"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5611884">.</span><span class="ident" id="5611885">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611897">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611910"><a href="/compress/zlib/reader.go.html#5611357">hash</a></span><span class="op" id="5611914">.</span><span class="ident" id="5611915">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611923">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611936">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5611943">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5611956">[</span><span class="num" id="5611957">4</span><span class="op" id="5611958">]</span><span class="builtintype" id="5611959">byte</span><br>
<span class="lineno"></span><span class="op" id="5611964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5611967">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5612041">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5612116">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5612152">type</span>&nbsp;<span class="ident" id="5612157">Resetter</span>&nbsp;<span class="keyword" id="5612166">interface</span>&nbsp;<span class="op" id="5612176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5612179">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5612253">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5612298">Reset</span><span class="op" id="5612303">(</span><span class="ident" id="5612304">r</span>&nbsp;<span class="ident" id="5612306"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5612308">.</span><span class="ident" id="5612309">Reader</span><span class="op" id="5612315">,</span>&nbsp;<span class="ident" id="5612317">dict</span>&nbsp;<span class="op" id="5612322">[</span><span class="op" id="5612323">]</span><span class="builtintype" id="5612324">byte</span><span class="op" id="5612328">)</span>&nbsp;<span class="builtintype" id="5612330">error</span><br>
<span class="lineno"></span><span class="op" id="5612336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5612339">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5612378">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5612449">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5612531">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5612611">//</span><br>
<span class="lineno"></span><span class="comment" id="5612614">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5612680">func</span>&nbsp;<span class="ident" id="5612685">NewReader</span><span class="op" id="5612694">(</span><span class="ident" id="5612695">r</span>&nbsp;<span class="ident" id="5612697"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5612699">.</span><span class="ident" id="5612700">Reader</span><span class="op" id="5612706">)</span>&nbsp;<span class="op" id="5612708">(</span><span class="ident" id="5612709"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5612711">.</span><span class="ident" id="5612712">ReadCloser</span><span class="op" id="5612722">,</span>&nbsp;<span class="builtintype" id="5612724">error</span><span class="op" id="5612729">)</span>&nbsp;<span class="op" id="5612731">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5612734">return</span>&nbsp;<span class="ident" id="5612741"><a href="/compress/zlib/reader.go.html#5613091">NewReaderDict</a></span><span class="op" id="5612754">(</span><span class="ident" id="5612755"><a href="/compress/zlib/reader.go.html#5612695">r</a></span><span class="op" id="5612756">,</span>&nbsp;<span class="ident" id="5612758">nil</span><span class="op" id="5612761">)</span><br>
<span class="lineno"></span><span class="op" id="5612763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5612766">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5612831">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5612916">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5613013">//</span><br>
<span class="lineno"></span><span class="comment" id="5613016">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5613086">func</span>&nbsp;<span class="ident" id="5613091">NewReaderDict</span><span class="op" id="5613104">(</span><span class="ident" id="5613105">r</span>&nbsp;<span class="ident" id="5613107"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5613109">.</span><span class="ident" id="5613110">Reader</span><span class="op" id="5613116">,</span>&nbsp;<span class="ident" id="5613118">dict</span>&nbsp;<span class="op" id="5613123">[</span><span class="op" id="5613124">]</span><span class="builtintype" id="5613125">byte</span><span class="op" id="5613129">)</span>&nbsp;<span class="op" id="5613131">(</span><span class="ident" id="5613132"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5613134">.</span><span class="ident" id="5613135">ReadCloser</span><span class="op" id="5613145">,</span>&nbsp;<span class="builtintype" id="5613147">error</span><span class="op" id="5613152">)</span>&nbsp;<span class="op" id="5613154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613157">z</span>&nbsp;<span class="op" id="5613159">:=</span>&nbsp;<span class="builtinfunc" id="5613162">new</span><span class="op" id="5613165">(</span><span class="ident" id="5613166"><a href="/compress/zlib/reader.go.html#5611825">reader</a></span><span class="op" id="5613172">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613175">err</span>&nbsp;<span class="op" id="5613179">:=</span>&nbsp;<span class="ident" id="5613182"><a href="/compress/zlib/reader.go.html#5613157">z</a></span><span class="op" id="5613183">.</span><span class="ident" id="5613184">Reset</span><span class="op" id="5613189">(</span><span class="ident" id="5613190"><a href="/compress/zlib/reader.go.html#5613105">r</a></span><span class="op" id="5613191">,</span>&nbsp;<span class="ident" id="5613193"><a href="/compress/zlib/reader.go.html#5613118">dict</a></span><span class="op" id="5613197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613200">if</span>&nbsp;<span class="ident" id="5613203"><a href="/compress/zlib/reader.go.html#5613175">err</a></span>&nbsp;<span class="op" id="5613207">!=</span>&nbsp;<span class="ident" id="5613210">nil</span>&nbsp;<span class="op" id="5613214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613218">return</span>&nbsp;<span class="ident" id="5613225">nil</span><span class="op" id="5613228">,</span>&nbsp;<span class="ident" id="5613230"><a href="/compress/zlib/reader.go.html#5613175">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613238">return</span>&nbsp;<span class="ident" id="5613245"><a href="/compress/zlib/reader.go.html#5613157">z</a></span><span class="op" id="5613246">,</span>&nbsp;<span class="ident" id="5613248">nil</span><br>
<span class="lineno">85</span><span class="op" id="5613252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5613255">func</span>&nbsp;<span class="op" id="5613260">(</span><span class="ident" id="5613261">z</span>&nbsp;<span class="op" id="5613263">*</span><span class="ident" id="5613264"><a href="/compress/zlib/reader.go.html#5611825">reader</a></span><span class="op" id="5613270">)</span>&nbsp;<span class="ident" id="5613272">Read</span><span class="op" id="5613276">(</span><span class="ident" id="5613277">p</span>&nbsp;<span class="op" id="5613279">[</span><span class="op" id="5613280">]</span><span class="builtintype" id="5613281">byte</span><span class="op" id="5613285">)</span>&nbsp;<span class="op" id="5613287">(</span><span class="ident" id="5613288">n</span>&nbsp;<span class="builtintype" id="5613290">int</span><span class="op" id="5613293">,</span>&nbsp;<span class="ident" id="5613295">err</span>&nbsp;<span class="builtintype" id="5613299">error</span><span class="op" id="5613304">)</span>&nbsp;<span class="op" id="5613306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613309">if</span>&nbsp;<span class="ident" id="5613312"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613313">.</span><span class="ident" id="5613314">err</span>&nbsp;<span class="op" id="5613318">!=</span>&nbsp;<span class="ident" id="5613321">nil</span>&nbsp;<span class="op" id="5613325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613329">return</span>&nbsp;<span class="num" id="5613336">0</span><span class="op" id="5613337">,</span>&nbsp;<span class="ident" id="5613339"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613340">.</span><span class="ident" id="5613341">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613349">if</span>&nbsp;<span class="builtinfunc" id="5613352">len</span><span class="op" id="5613355">(</span><span class="ident" id="5613356"><a href="/compress/zlib/reader.go.html#5613277">p</a></span><span class="op" id="5613357">)</span>&nbsp;<span class="op" id="5613359">==</span>&nbsp;<span class="num" id="5613362">0</span>&nbsp;<span class="op" id="5613364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613368">return</span>&nbsp;<span class="num" id="5613375">0</span><span class="op" id="5613376">,</span>&nbsp;<span class="ident" id="5613378">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613387"><a href="/compress/zlib/reader.go.html#5613288">n</a></span><span class="op" id="5613388">,</span>&nbsp;<span class="ident" id="5613390"><a href="/compress/zlib/reader.go.html#5613295">err</a></span>&nbsp;<span class="op" id="5613394">=</span>&nbsp;<span class="ident" id="5613396"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613397">.</span><span class="ident" id="5613398">decompressor</span><span class="op" id="5613410">.</span><span class="ident" id="5613411">Read</span><span class="op" id="5613415">(</span><span class="ident" id="5613416"><a href="/compress/zlib/reader.go.html#5613277">p</a></span><span class="op" id="5613417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613420"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613421">.</span><span class="ident" id="5613422">digest</span><span class="op" id="5613428">.</span><span class="ident" id="5613429">Write</span><span class="op" id="5613434">(</span><span class="ident" id="5613435"><a href="/compress/zlib/reader.go.html#5613277">p</a></span><span class="op" id="5613436">[</span><span class="num" id="5613437">0</span><span class="op" id="5613438">:</span><span class="ident" id="5613439"><a href="/compress/zlib/reader.go.html#5613288">n</a></span><span class="op" id="5613440">]</span><span class="op" id="5613441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613444">if</span>&nbsp;<span class="ident" id="5613447"><a href="/compress/zlib/reader.go.html#5613288">n</a></span>&nbsp;<span class="op" id="5613449">!=</span>&nbsp;<span class="num" id="5613452">0</span>&nbsp;<span class="op" id="5613454">||</span>&nbsp;<span class="ident" id="5613457"><a href="/compress/zlib/reader.go.html#5613295">err</a></span>&nbsp;<span class="op" id="5613461">!=</span>&nbsp;<span class="ident" id="5613464"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5613466">.</span><span class="ident" id="5613467">EOF</span>&nbsp;<span class="op" id="5613471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613475"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613476">.</span><span class="ident" id="5613477">err</span>&nbsp;<span class="op" id="5613481">=</span>&nbsp;<span class="ident" id="5613483"><a href="/compress/zlib/reader.go.html#5613295">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613489">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5613501">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613536">if</span>&nbsp;<span class="ident" id="5613539">_</span><span class="op" id="5613540">,</span>&nbsp;<span class="ident" id="5613542">err</span>&nbsp;<span class="op" id="5613546">:=</span>&nbsp;<span class="ident" id="5613549"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5613551">.</span><span class="ident" id="5613552">ReadFull</span><span class="op" id="5613560">(</span><span class="ident" id="5613561"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613562">.</span><span class="ident" id="5613563">r</span><span class="op" id="5613564">,</span>&nbsp;<span class="ident" id="5613566"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613567">.</span><span class="ident" id="5613568">scratch</span><span class="op" id="5613575">[</span><span class="num" id="5613576">0</span><span class="op" id="5613577">:</span><span class="num" id="5613578">4</span><span class="op" id="5613579">]</span><span class="op" id="5613580">)</span><span class="op" id="5613581">;</span>&nbsp;<span class="ident" id="5613583"><a href="/compress/zlib/reader.go.html#5613542">err</a></span>&nbsp;<span class="op" id="5613587">!=</span>&nbsp;<span class="ident" id="5613590">nil</span>&nbsp;<span class="op" id="5613594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613598"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613599">.</span><span class="ident" id="5613600">err</span>&nbsp;<span class="op" id="5613604">=</span>&nbsp;<span class="ident" id="5613606"><a href="/compress/zlib/reader.go.html#5613542">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613612">return</span>&nbsp;<span class="num" id="5613619">0</span><span class="op" id="5613620">,</span>&nbsp;<span class="ident" id="5613622"><a href="/compress/zlib/reader.go.html#5613542">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5613630">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613689">checksum</span>&nbsp;<span class="op" id="5613698">:=</span>&nbsp;<span class="builtintype" id="5613701">uint32</span><span class="op" id="5613707">(</span><span class="ident" id="5613708"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613709">.</span><span class="ident" id="5613710">scratch</span><span class="op" id="5613717">[</span><span class="num" id="5613718">0</span><span class="op" id="5613719">]</span><span class="op" id="5613720">)</span><span class="op" id="5613721">&lt;&lt;</span><span class="num" id="5613723">24</span>&nbsp;<span class="op" id="5613726">|</span>&nbsp;<span class="builtintype" id="5613728">uint32</span><span class="op" id="5613734">(</span><span class="ident" id="5613735"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613736">.</span><span class="ident" id="5613737">scratch</span><span class="op" id="5613744">[</span><span class="num" id="5613745">1</span><span class="op" id="5613746">]</span><span class="op" id="5613747">)</span><span class="op" id="5613748">&lt;&lt;</span><span class="num" id="5613750">16</span>&nbsp;<span class="op" id="5613753">|</span>&nbsp;<span class="builtintype" id="5613755">uint32</span><span class="op" id="5613761">(</span><span class="ident" id="5613762"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613763">.</span><span class="ident" id="5613764">scratch</span><span class="op" id="5613771">[</span><span class="num" id="5613772">2</span><span class="op" id="5613773">]</span><span class="op" id="5613774">)</span><span class="op" id="5613775">&lt;&lt;</span><span class="num" id="5613777">8</span>&nbsp;<span class="op" id="5613779">|</span>&nbsp;<span class="builtintype" id="5613781">uint32</span><span class="op" id="5613787">(</span><span class="ident" id="5613788"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613789">.</span><span class="ident" id="5613790">scratch</span><span class="op" id="5613797">[</span><span class="num" id="5613798">3</span><span class="op" id="5613799">]</span><span class="op" id="5613800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613803">if</span>&nbsp;<span class="ident" id="5613806"><a href="/compress/zlib/reader.go.html#5613689">checksum</a></span>&nbsp;<span class="op" id="5613815">!=</span>&nbsp;<span class="ident" id="5613818"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613819">.</span><span class="ident" id="5613820">digest</span><span class="op" id="5613826">.</span><span class="ident" id="5613827">Sum32</span><span class="op" id="5613832">(</span><span class="op" id="5613833">)</span>&nbsp;<span class="op" id="5613835">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5613839"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613840">.</span><span class="ident" id="5613841">err</span>&nbsp;<span class="op" id="5613845">=</span>&nbsp;<span class="ident" id="5613847"><a href="/compress/zlib/reader.go.html#5611500">ErrChecksum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613861">return</span>&nbsp;<span class="num" id="5613868">0</span><span class="op" id="5613869">,</span>&nbsp;<span class="ident" id="5613871"><a href="/compress/zlib/reader.go.html#5613261">z</a></span><span class="op" id="5613872">.</span><span class="ident" id="5613873">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5613878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5613881">return</span><br>
<span class="lineno"></span><span class="op" id="5613888">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5613891">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5613977">func</span>&nbsp;<span class="op" id="5613982">(</span><span class="ident" id="5613983">z</span>&nbsp;<span class="op" id="5613985">*</span><span class="ident" id="5613986"><a href="/compress/zlib/reader.go.html#5611825">reader</a></span><span class="op" id="5613992">)</span>&nbsp;<span class="ident" id="5613994">Close</span><span class="op" id="5613999">(</span><span class="op" id="5614000">)</span>&nbsp;<span class="builtintype" id="5614002">error</span>&nbsp;<span class="op" id="5614008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614011">if</span>&nbsp;<span class="ident" id="5614014"><a href="/compress/zlib/reader.go.html#5613983">z</a></span><span class="op" id="5614015">.</span><span class="ident" id="5614016">err</span>&nbsp;<span class="op" id="5614020">!=</span>&nbsp;<span class="ident" id="5614023">nil</span>&nbsp;<span class="op" id="5614027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614031">return</span>&nbsp;<span class="ident" id="5614038"><a href="/compress/zlib/reader.go.html#5613983">z</a></span><span class="op" id="5614039">.</span><span class="ident" id="5614040">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614048"><a href="/compress/zlib/reader.go.html#5613983">z</a></span><span class="op" id="5614049">.</span><span class="ident" id="5614050">err</span>&nbsp;<span class="op" id="5614054">=</span>&nbsp;<span class="ident" id="5614056"><a href="/compress/zlib/reader.go.html#5613983">z</a></span><span class="op" id="5614057">.</span><span class="ident" id="5614058">decompressor</span><span class="op" id="5614070">.</span><span class="ident" id="5614071">Close</span><span class="op" id="5614076">(</span><span class="op" id="5614077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614080">return</span>&nbsp;<span class="ident" id="5614087"><a href="/compress/zlib/reader.go.html#5613983">z</a></span><span class="op" id="5614088">.</span><span class="ident" id="5614089">err</span><br>
<span class="lineno"></span><span class="op" id="5614093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5614096">func</span>&nbsp;<span class="op" id="5614101">(</span><span class="ident" id="5614102">z</span>&nbsp;<span class="op" id="5614104">*</span><span class="ident" id="5614105"><a href="/compress/zlib/reader.go.html#5611825">reader</a></span><span class="op" id="5614111">)</span>&nbsp;<span class="ident" id="5614113">Reset</span><span class="op" id="5614118">(</span><span class="ident" id="5614119">r</span>&nbsp;<span class="ident" id="5614121"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5614123">.</span><span class="ident" id="5614124">Reader</span><span class="op" id="5614130">,</span>&nbsp;<span class="ident" id="5614132">dict</span>&nbsp;<span class="op" id="5614137">[</span><span class="op" id="5614138">]</span><span class="builtintype" id="5614139">byte</span><span class="op" id="5614143">)</span>&nbsp;<span class="builtintype" id="5614145">error</span>&nbsp;<span class="op" id="5614151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614154">if</span>&nbsp;<span class="ident" id="5614157">fr</span><span class="op" id="5614159">,</span>&nbsp;<span class="ident" id="5614161">ok</span>&nbsp;<span class="op" id="5614164">:=</span>&nbsp;<span class="ident" id="5614167"><a href="/compress/zlib/reader.go.html#5614119">r</a></span><span class="op" id="5614168">.</span><span class="op" id="5614169">(</span><span class="ident" id="5614170"><a href="/compress/zlib/reader.go.html#5611329">flate</a></span><span class="op" id="5614175">.</span><span class="ident" id="5614176">Reader</span><span class="op" id="5614182">)</span><span class="op" id="5614183">;</span>&nbsp;<span class="ident" id="5614185"><a href="/compress/zlib/reader.go.html#5614161">ok</a></span>&nbsp;<span class="op" id="5614188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614192"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614193">.</span><span class="ident" id="5614194">r</span>&nbsp;<span class="op" id="5614196">=</span>&nbsp;<span class="ident" id="5614198"><a href="/compress/zlib/reader.go.html#5614157">fr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614202">}</span>&nbsp;<span class="keyword" id="5614204">else</span>&nbsp;<span class="op" id="5614209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614213"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614214">.</span><span class="ident" id="5614215">r</span>&nbsp;<span class="op" id="5614217">=</span>&nbsp;<span class="ident" id="5614219"><a href="/compress/zlib/reader.go.html#5611320">bufio</a></span><span class="op" id="5614224">.</span><span class="ident" id="5614225">NewReader</span><span class="op" id="5614234">(</span><span class="ident" id="5614235"><a href="/compress/zlib/reader.go.html#5614119">r</a></span><span class="op" id="5614236">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614242">_</span><span class="op" id="5614243">,</span>&nbsp;<span class="ident" id="5614245">err</span>&nbsp;<span class="op" id="5614249">:=</span>&nbsp;<span class="ident" id="5614252"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5614254">.</span><span class="ident" id="5614255">ReadFull</span><span class="op" id="5614263">(</span><span class="ident" id="5614264"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614265">.</span><span class="ident" id="5614266">r</span><span class="op" id="5614267">,</span>&nbsp;<span class="ident" id="5614269"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614270">.</span><span class="ident" id="5614271">scratch</span><span class="op" id="5614278">[</span><span class="num" id="5614279">0</span><span class="op" id="5614280">:</span><span class="num" id="5614281">2</span><span class="op" id="5614282">]</span><span class="op" id="5614283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614286">if</span>&nbsp;<span class="ident" id="5614289"><a href="/compress/zlib/reader.go.html#5614245">err</a></span>&nbsp;<span class="op" id="5614293">!=</span>&nbsp;<span class="ident" id="5614296">nil</span>&nbsp;<span class="op" id="5614300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614304">return</span>&nbsp;<span class="ident" id="5614311"><a href="/compress/zlib/reader.go.html#5614245">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614316">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614319">h</span>&nbsp;<span class="op" id="5614321">:=</span>&nbsp;<span class="builtintype" id="5614324">uint</span><span class="op" id="5614328">(</span><span class="ident" id="5614329"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614330">.</span><span class="ident" id="5614331">scratch</span><span class="op" id="5614338">[</span><span class="num" id="5614339">0</span><span class="op" id="5614340">]</span><span class="op" id="5614341">)</span><span class="op" id="5614342">&lt;&lt;</span><span class="num" id="5614344">8</span>&nbsp;<span class="op" id="5614346">|</span>&nbsp;<span class="builtintype" id="5614348">uint</span><span class="op" id="5614352">(</span><span class="ident" id="5614353"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614354">.</span><span class="ident" id="5614355">scratch</span><span class="op" id="5614362">[</span><span class="num" id="5614363">1</span><span class="op" id="5614364">]</span><span class="op" id="5614365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614368">if</span>&nbsp;<span class="op" id="5614371">(</span><span class="ident" id="5614372"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614373">.</span><span class="ident" id="5614374">scratch</span><span class="op" id="5614381">[</span><span class="num" id="5614382">0</span><span class="op" id="5614383">]</span><span class="op" id="5614384">&amp;</span><span class="num" id="5614385">0x0f</span>&nbsp;<span class="op" id="5614390">!=</span>&nbsp;<span class="ident" id="5614393"><a href="/compress/zlib/reader.go.html#5611395">zlibDeflate</a></span><span class="op" id="5614404">)</span>&nbsp;<span class="op" id="5614406">||</span>&nbsp;<span class="op" id="5614409">(</span><span class="ident" id="5614410"><a href="/compress/zlib/reader.go.html#5614319">h</a></span><span class="op" id="5614411">%</span><span class="num" id="5614412">31</span>&nbsp;<span class="op" id="5614415">!=</span>&nbsp;<span class="num" id="5614418">0</span><span class="op" id="5614419">)</span>&nbsp;<span class="op" id="5614421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614425">return</span>&nbsp;<span class="ident" id="5614432"><a href="/compress/zlib/reader.go.html#5611770">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614446">haveDict</span>&nbsp;<span class="op" id="5614455">:=</span>&nbsp;<span class="ident" id="5614458"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614459">.</span><span class="ident" id="5614460">scratch</span><span class="op" id="5614467">[</span><span class="num" id="5614468">1</span><span class="op" id="5614469">]</span><span class="op" id="5614470">&amp;</span><span class="num" id="5614471">0x20</span>&nbsp;<span class="op" id="5614476">!=</span>&nbsp;<span class="num" id="5614479">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614482">if</span>&nbsp;<span class="ident" id="5614485"><a href="/compress/zlib/reader.go.html#5614446">haveDict</a></span>&nbsp;<span class="op" id="5614494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614498">_</span><span class="op" id="5614499">,</span>&nbsp;<span class="ident" id="5614501"><a href="/compress/zlib/reader.go.html#5614245">err</a></span>&nbsp;<span class="op" id="5614505">=</span>&nbsp;<span class="ident" id="5614507"><a href="/compress/zlib/reader.go.html#5611381">io</a></span><span class="op" id="5614509">.</span><span class="ident" id="5614510">ReadFull</span><span class="op" id="5614518">(</span><span class="ident" id="5614519"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614520">.</span><span class="ident" id="5614521">r</span><span class="op" id="5614522">,</span>&nbsp;<span class="ident" id="5614524"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614525">.</span><span class="ident" id="5614526">scratch</span><span class="op" id="5614533">[</span><span class="num" id="5614534">0</span><span class="op" id="5614535">:</span><span class="num" id="5614536">4</span><span class="op" id="5614537">]</span><span class="op" id="5614538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614542">if</span>&nbsp;<span class="ident" id="5614545"><a href="/compress/zlib/reader.go.html#5614245">err</a></span>&nbsp;<span class="op" id="5614549">!=</span>&nbsp;<span class="ident" id="5614552">nil</span>&nbsp;<span class="op" id="5614556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614561">return</span>&nbsp;<span class="ident" id="5614568"><a href="/compress/zlib/reader.go.html#5614245">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614574">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614578">checksum</span>&nbsp;<span class="op" id="5614587">:=</span>&nbsp;<span class="builtintype" id="5614590">uint32</span><span class="op" id="5614596">(</span><span class="ident" id="5614597"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614598">.</span><span class="ident" id="5614599">scratch</span><span class="op" id="5614606">[</span><span class="num" id="5614607">0</span><span class="op" id="5614608">]</span><span class="op" id="5614609">)</span><span class="op" id="5614610">&lt;&lt;</span><span class="num" id="5614612">24</span>&nbsp;<span class="op" id="5614615">|</span>&nbsp;<span class="builtintype" id="5614617">uint32</span><span class="op" id="5614623">(</span><span class="ident" id="5614624"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614625">.</span><span class="ident" id="5614626">scratch</span><span class="op" id="5614633">[</span><span class="num" id="5614634">1</span><span class="op" id="5614635">]</span><span class="op" id="5614636">)</span><span class="op" id="5614637">&lt;&lt;</span><span class="num" id="5614639">16</span>&nbsp;<span class="op" id="5614642">|</span>&nbsp;<span class="builtintype" id="5614644">uint32</span><span class="op" id="5614650">(</span><span class="ident" id="5614651"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614652">.</span><span class="ident" id="5614653">scratch</span><span class="op" id="5614660">[</span><span class="num" id="5614661">2</span><span class="op" id="5614662">]</span><span class="op" id="5614663">)</span><span class="op" id="5614664">&lt;&lt;</span><span class="num" id="5614666">8</span>&nbsp;<span class="op" id="5614668">|</span>&nbsp;<span class="builtintype" id="5614670">uint32</span><span class="op" id="5614676">(</span><span class="ident" id="5614677"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614678">.</span><span class="ident" id="5614679">scratch</span><span class="op" id="5614686">[</span><span class="num" id="5614687">3</span><span class="op" id="5614688">]</span><span class="op" id="5614689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614693">if</span>&nbsp;<span class="ident" id="5614696"><a href="/compress/zlib/reader.go.html#5614578">checksum</a></span>&nbsp;<span class="op" id="5614705">!=</span>&nbsp;<span class="ident" id="5614708"><a href="/compress/zlib/reader.go.html#5611365">adler32</a></span><span class="op" id="5614715">.</span><span class="ident" id="5614716">Checksum</span><span class="op" id="5614724">(</span><span class="ident" id="5614725"><a href="/compress/zlib/reader.go.html#5614132">dict</a></span><span class="op" id="5614729">)</span>&nbsp;<span class="op" id="5614731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614736">return</span>&nbsp;<span class="ident" id="5614743"><a href="/compress/zlib/reader.go.html#5611637">ErrDictionary</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614762">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614765">if</span>&nbsp;<span class="ident" id="5614768"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614769">.</span><span class="ident" id="5614770">decompressor</span>&nbsp;<span class="op" id="5614783">==</span>&nbsp;<span class="ident" id="5614786">nil</span>&nbsp;<span class="op" id="5614790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5614794">if</span>&nbsp;<span class="ident" id="5614797"><a href="/compress/zlib/reader.go.html#5614446">haveDict</a></span>&nbsp;<span class="op" id="5614806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614811"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614812">.</span><span class="ident" id="5614813">decompressor</span>&nbsp;<span class="op" id="5614826">=</span>&nbsp;<span class="ident" id="5614828"><a href="/compress/zlib/reader.go.html#5611329">flate</a></span><span class="op" id="5614833">.</span><span class="ident" id="5614834">NewReaderDict</span><span class="op" id="5614847">(</span><span class="ident" id="5614848"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614849">.</span><span class="ident" id="5614850">r</span><span class="op" id="5614851">,</span>&nbsp;<span class="ident" id="5614853"><a href="/compress/zlib/reader.go.html#5614132">dict</a></span><span class="op" id="5614857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614861">}</span>&nbsp;<span class="keyword" id="5614863">else</span>&nbsp;<span class="op" id="5614868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614873"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614874">.</span><span class="ident" id="5614875">decompressor</span>&nbsp;<span class="op" id="5614888">=</span>&nbsp;<span class="ident" id="5614890"><a href="/compress/zlib/reader.go.html#5611329">flate</a></span><span class="op" id="5614895">.</span><span class="ident" id="5614896">NewReader</span><span class="op" id="5614905">(</span><span class="ident" id="5614906"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614907">.</span><span class="ident" id="5614908">r</span><span class="op" id="5614909">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614916">}</span>&nbsp;<span class="keyword" id="5614918">else</span>&nbsp;<span class="op" id="5614923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614927"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614928">.</span><span class="ident" id="5614929">decompressor</span><span class="op" id="5614941">.</span><span class="op" id="5614942">(</span><span class="ident" id="5614943"><a href="/compress/zlib/reader.go.html#5611329">flate</a></span><span class="op" id="5614948">.</span><span class="ident" id="5614949">Resetter</span><span class="op" id="5614957">)</span><span class="op" id="5614958">.</span><span class="ident" id="5614959">Reset</span><span class="op" id="5614964">(</span><span class="ident" id="5614965"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614966">.</span><span class="ident" id="5614967">r</span><span class="op" id="5614968">,</span>&nbsp;<span class="ident" id="5614970"><a href="/compress/zlib/reader.go.html#5614132">dict</a></span><span class="op" id="5614974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5614977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5614980"><a href="/compress/zlib/reader.go.html#5614102">z</a></span><span class="op" id="5614981">.</span><span class="ident" id="5614982">digest</span>&nbsp;<span class="op" id="5614989">=</span>&nbsp;<span class="ident" id="5614991"><a href="/compress/zlib/reader.go.html#5611365">adler32</a></span><span class="op" id="5614998">.</span><span class="ident" id="5614999">New</span><span class="op" id="5615002">(</span><span class="op" id="5615003">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5615006">return</span>&nbsp;<span class="ident" id="5615013">nil</span><br>
<span class="lineno"></span><span class="op" id="5615017">}</span>
</div>
</body>
</html>
