<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5697887">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5697943">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5697997">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5698048">package</span>&nbsp;<span class="ident" id="5698056">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5698061">import</span>&nbsp;<span class="op" id="5698068">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698071">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698080">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698092">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698102">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698109">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698120">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5698131">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5698141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5698144">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="5698228">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="5698292">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="5698361">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="5698381">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="5698444">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5698468">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="5698534">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="5698599">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5698665">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5698679">//</span><br>
<span class="lineno"></span><span class="comment" id="5698682">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="5698748">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="5698817">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5698883">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="5698899">//</span><br>
<span class="lineno"></span><span class="comment" id="5698902">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="5698974">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5699050">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="5699114">//</span><br>
<span class="lineno"></span><span class="comment" id="5699117">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5699184">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="5699257">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="5699324">//</span><br>
<span class="lineno"></span><span class="comment" id="5699327">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="5699392">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5699450">//</span><br>
<span class="lineno">45</span><span class="comment" id="5699453">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5699515">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="5699581">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5699652">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5699678">//</span><br>
<span class="lineno">50</span><span class="comment" id="5699681">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5699745">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5699816">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5699889">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5699950">//</span><br>
<span class="lineno">55</span><span class="comment" id="5699953">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5700017">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5700089">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5700146">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5700214">//</span><br>
<span class="lineno">60</span><span class="comment" id="5700217">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5700286">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5700354">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5700421">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5700464">//</span><br>
<span class="lineno">65</span><span class="comment" id="5700467">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5700535">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5700602">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5700676">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5700748">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="5700817">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5700862">//</span><br>
<span class="lineno"></span><span class="comment" id="5700865">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5700933">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5700998">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="5701065">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5701111">//</span><br>
<span class="lineno"></span><span class="comment" id="5701114">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5701184">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5701260">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="5701311">//</span><br>
<span class="lineno"></span><span class="comment" id="5701314">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5701387">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5701458">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5701519">//</span><br>
<span class="lineno">85</span><span class="comment" id="5701522">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5701590">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="5701635">//</span><br>
<span class="lineno"></span><span class="comment" id="5701638">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="5701701">//</span><br>
<span class="lineno">90</span><span class="comment" id="5701704">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5701773">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5701840">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="5701882">//</span><br>
<span class="lineno"></span><span class="comment" id="5701885">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="5701954">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="5701991">//</span><br>
<span class="lineno"></span><span class="comment" id="5701994">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5702065">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5702130">//</span><br>
<span class="lineno">100</span><span class="comment" id="5702133">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5702198">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5702260">//</span><br>
<span class="lineno"></span><span class="comment" id="5702263">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5702332">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="5702394">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5702462">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5702475">//</span><br>
<span class="lineno"></span><span class="comment" id="5702478">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5702543">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="5702560">//</span><br>
<span class="lineno"></span><span class="comment" id="5702563">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="5702632">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5702708">//</span><br>
<span class="lineno"></span><span class="keyword" id="5702711">func</span>&nbsp;<span class="ident" id="5702716">Unmarshal</span><span class="op" id="5702725">(</span><span class="ident" id="5702726">data</span>&nbsp;<span class="op" id="5702731">[</span><span class="op" id="5702732">]</span><span class="builtintype" id="5702733">byte</span><span class="op" id="5702737">,</span>&nbsp;<span class="ident" id="5702739">v</span>&nbsp;<span class="keyword" id="5702741">interface</span><span class="op" id="5702750">{</span><span class="op" id="5702751">}</span><span class="op" id="5702752">)</span>&nbsp;<span class="builtintype" id="5702754">error</span>&nbsp;<span class="op" id="5702760">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702763">return</span>&nbsp;<span class="ident" id="5702770">NewDecoder</span><span class="op" id="5702780">(</span><span class="ident" id="5702781">bytes</span><span class="op" id="5702786">.</span><span class="ident" id="5702787">NewReader</span><span class="op" id="5702796">(</span><span class="ident" id="5702797">data</span><span class="op" id="5702801">)</span><span class="op" id="5702802">)</span><span class="op" id="5702803">.</span><span class="ident" id="5702804">Decode</span><span class="op" id="5702810">(</span><span class="ident" id="5702811">v</span><span class="op" id="5702812">)</span><br>
<span class="lineno"></span><span class="op" id="5702814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5702817">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="5702881">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="5702918">func</span>&nbsp;<span class="op" id="5702923">(</span><span class="ident" id="5702924">d</span>&nbsp;<span class="op" id="5702926">*</span><span class="ident" id="5702927">Decoder</span><span class="op" id="5702934">)</span>&nbsp;<span class="ident" id="5702936">Decode</span><span class="op" id="5702942">(</span><span class="ident" id="5702943">v</span>&nbsp;<span class="keyword" id="5702945">interface</span><span class="op" id="5702954">{</span><span class="op" id="5702955">}</span><span class="op" id="5702956">)</span>&nbsp;<span class="builtintype" id="5702958">error</span>&nbsp;<span class="op" id="5702964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702967">return</span>&nbsp;<span class="ident" id="5702974">d</span><span class="op" id="5702975">.</span><span class="ident" id="5702976">DecodeElement</span><span class="op" id="5702989">(</span><span class="ident" id="5702990">v</span><span class="op" id="5702991">,</span>&nbsp;<span class="ident" id="5702993">nil</span><span class="op" id="5702996">)</span><br>
<span class="lineno"></span><span class="op" id="5702998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5703001">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="5703064">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5703120">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="5703183">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="5703242">func</span>&nbsp;<span class="op" id="5703247">(</span><span class="ident" id="5703248">d</span>&nbsp;<span class="op" id="5703250">*</span><span class="ident" id="5703251">Decoder</span><span class="op" id="5703258">)</span>&nbsp;<span class="ident" id="5703260">DecodeElement</span><span class="op" id="5703273">(</span><span class="ident" id="5703274">v</span>&nbsp;<span class="keyword" id="5703276">interface</span><span class="op" id="5703285">{</span><span class="op" id="5703286">}</span><span class="op" id="5703287">,</span>&nbsp;<span class="ident" id="5703289">start</span>&nbsp;<span class="op" id="5703295">*</span><span class="ident" id="5703296">StartElement</span><span class="op" id="5703308">)</span>&nbsp;<span class="builtintype" id="5703310">error</span>&nbsp;<span class="op" id="5703316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703319">val</span>&nbsp;<span class="op" id="5703323">:=</span>&nbsp;<span class="ident" id="5703326">reflect</span><span class="op" id="5703333">.</span><span class="ident" id="5703334">ValueOf</span><span class="op" id="5703341">(</span><span class="ident" id="5703342">v</span><span class="op" id="5703343">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703346">if</span>&nbsp;<span class="ident" id="5703349">val</span><span class="op" id="5703352">.</span><span class="ident" id="5703353">Kind</span><span class="op" id="5703357">(</span><span class="op" id="5703358">)</span>&nbsp;<span class="op" id="5703360">!=</span>&nbsp;<span class="ident" id="5703363">reflect</span><span class="op" id="5703370">.</span><span class="ident" id="5703371">Ptr</span>&nbsp;<span class="op" id="5703375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703379">return</span>&nbsp;<span class="ident" id="5703386">errors</span><span class="op" id="5703392">.</span><span class="ident" id="5703393">New</span><span class="op" id="5703396">(</span><span class="string" id="5703397">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="5703430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703436">return</span>&nbsp;<span class="ident" id="5703443">d</span><span class="op" id="5703444">.</span><span class="ident" id="5703445">unmarshal</span><span class="op" id="5703454">(</span><span class="ident" id="5703455">val</span><span class="op" id="5703458">.</span><span class="ident" id="5703459">Elem</span><span class="op" id="5703463">(</span><span class="op" id="5703464">)</span><span class="op" id="5703465">,</span>&nbsp;<span class="ident" id="5703467">start</span><span class="op" id="5703472">)</span><br>
<span class="lineno"></span><span class="op" id="5703474">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="5703477">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="5703548">type</span>&nbsp;<span class="ident" id="5703553">UnmarshalError</span>&nbsp;<span class="builtintype" id="5703568">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5703576">func</span>&nbsp;<span class="op" id="5703581">(</span><span class="ident" id="5703582">e</span>&nbsp;<span class="ident" id="5703584">UnmarshalError</span><span class="op" id="5703598">)</span>&nbsp;<span class="ident" id="5703600">Error</span><span class="op" id="5703605">(</span><span class="op" id="5703606">)</span>&nbsp;<span class="builtintype" id="5703608">string</span>&nbsp;<span class="op" id="5703615">{</span>&nbsp;<span class="keyword" id="5703617">return</span>&nbsp;<span class="builtintype" id="5703624">string</span><span class="op" id="5703630">(</span><span class="ident" id="5703631">e</span><span class="op" id="5703632">)</span>&nbsp;<span class="op" id="5703634">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="5703637">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5703711">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5703756">//</span><br>
<span class="lineno"></span><span class="comment" id="5703759">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="5703804">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5703847">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5703912">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5703935">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5703989">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="5704048">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="5704108">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5704166">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="5704199">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5704259">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="5704294">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="5704334">type</span>&nbsp;<span class="ident" id="5704339">Unmarshaler</span>&nbsp;<span class="keyword" id="5704351">interface</span>&nbsp;<span class="op" id="5704361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704364">UnmarshalXML</span><span class="op" id="5704376">(</span><span class="ident" id="5704377">d</span>&nbsp;<span class="op" id="5704379">*</span><span class="ident" id="5704380">Decoder</span><span class="op" id="5704387">,</span>&nbsp;<span class="ident" id="5704389">start</span>&nbsp;<span class="ident" id="5704395">StartElement</span><span class="op" id="5704407">)</span>&nbsp;<span class="builtintype" id="5704409">error</span><br>
<span class="lineno"></span><span class="op" id="5704415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5704418">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5704496">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5704543">//</span><br>
<span class="lineno"></span><span class="comment" id="5704546">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="5704598">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="5704663">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5704686">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5704746">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="5704781">type</span>&nbsp;<span class="ident" id="5704786">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="5704802">interface</span>&nbsp;<span class="op" id="5704812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704815">UnmarshalXMLAttr</span><span class="op" id="5704831">(</span><span class="ident" id="5704832">attr</span>&nbsp;<span class="ident" id="5704837">Attr</span><span class="op" id="5704841">)</span>&nbsp;<span class="builtintype" id="5704843">error</span><br>
<span class="lineno">170</span><span class="op" id="5704849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5704852">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5704940">func</span>&nbsp;<span class="ident" id="5704945">receiverType</span><span class="op" id="5704957">(</span><span class="ident" id="5704958">val</span>&nbsp;<span class="keyword" id="5704962">interface</span><span class="op" id="5704971">{</span><span class="op" id="5704972">}</span><span class="op" id="5704973">)</span>&nbsp;<span class="builtintype" id="5704975">string</span>&nbsp;<span class="op" id="5704982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704985">t</span>&nbsp;<span class="op" id="5704987">:=</span>&nbsp;<span class="ident" id="5704990">reflect</span><span class="op" id="5704997">.</span><span class="ident" id="5704998">TypeOf</span><span class="op" id="5705004">(</span><span class="ident" id="5705005">val</span><span class="op" id="5705008">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705011">if</span>&nbsp;<span class="ident" id="5705014">t</span><span class="op" id="5705015">.</span><span class="ident" id="5705016">Name</span><span class="op" id="5705020">(</span><span class="op" id="5705021">)</span>&nbsp;<span class="op" id="5705023">!=</span>&nbsp;<span class="string" id="5705026">&#34;&#34;</span>&nbsp;<span class="op" id="5705029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705033">return</span>&nbsp;<span class="ident" id="5705040">t</span><span class="op" id="5705041">.</span><span class="ident" id="5705042">String</span><span class="op" id="5705048">(</span><span class="op" id="5705049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5705052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705055">return</span>&nbsp;<span class="string" id="5705062">&#34;(&#34;</span>&nbsp;<span class="op" id="5705066">+</span>&nbsp;<span class="ident" id="5705068">t</span><span class="op" id="5705069">.</span><span class="ident" id="5705070">String</span><span class="op" id="5705076">(</span><span class="op" id="5705077">)</span>&nbsp;<span class="op" id="5705079">+</span>&nbsp;<span class="string" id="5705081">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5705085">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="5705088">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5705152">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="5705196">func</span>&nbsp;<span class="op" id="5705201">(</span><span class="ident" id="5705202">p</span>&nbsp;<span class="op" id="5705204">*</span><span class="ident" id="5705205">Decoder</span><span class="op" id="5705212">)</span>&nbsp;<span class="ident" id="5705214">unmarshalInterface</span><span class="op" id="5705232">(</span><span class="ident" id="5705233">val</span>&nbsp;<span class="ident" id="5705237">Unmarshaler</span><span class="op" id="5705248">,</span>&nbsp;<span class="ident" id="5705250">start</span>&nbsp;<span class="op" id="5705256">*</span><span class="ident" id="5705257">StartElement</span><span class="op" id="5705269">)</span>&nbsp;<span class="builtintype" id="5705271">error</span>&nbsp;<span class="op" id="5705277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5705280">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705349">p</span><span class="op" id="5705350">.</span><span class="ident" id="5705351">pushEOF</span><span class="op" id="5705358">(</span><span class="op" id="5705359">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705363">p</span><span class="op" id="5705364">.</span><span class="ident" id="5705365">unmarshalDepth</span><span class="op" id="5705379">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705383">err</span>&nbsp;<span class="op" id="5705387">:=</span>&nbsp;<span class="ident" id="5705390">val</span><span class="op" id="5705393">.</span><span class="ident" id="5705394">UnmarshalXML</span><span class="op" id="5705406">(</span><span class="ident" id="5705407">p</span><span class="op" id="5705408">,</span>&nbsp;<span class="op" id="5705410">*</span><span class="ident" id="5705411">start</span><span class="op" id="5705416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705419">p</span><span class="op" id="5705420">.</span><span class="ident" id="5705421">unmarshalDepth</span><span class="op" id="5705435">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705439">if</span>&nbsp;<span class="ident" id="5705442">err</span>&nbsp;<span class="op" id="5705446">!=</span>&nbsp;<span class="ident" id="5705449">nil</span>&nbsp;<span class="op" id="5705453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705457">p</span><span class="op" id="5705458">.</span><span class="ident" id="5705459">popEOF</span><span class="op" id="5705465">(</span><span class="op" id="5705466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705470">return</span>&nbsp;<span class="ident" id="5705477">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5705482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705486">if</span>&nbsp;<span class="op" id="5705489">!</span><span class="ident" id="5705490">p</span><span class="op" id="5705491">.</span><span class="ident" id="5705492">popEOF</span><span class="op" id="5705498">(</span><span class="op" id="5705499">)</span>&nbsp;<span class="op" id="5705501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705505">return</span>&nbsp;<span class="ident" id="5705512">fmt</span><span class="op" id="5705515">.</span><span class="ident" id="5705516">Errorf</span><span class="op" id="5705522">(</span><span class="string" id="5705523">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="5705581">,</span>&nbsp;<span class="ident" id="5705583">receiverType</span><span class="op" id="5705595">(</span><span class="ident" id="5705596">val</span><span class="op" id="5705599">)</span><span class="op" id="5705600">,</span>&nbsp;<span class="ident" id="5705602">start</span><span class="op" id="5705607">.</span><span class="ident" id="5705608">Name</span><span class="op" id="5705612">.</span><span class="ident" id="5705613">Local</span><span class="op" id="5705618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5705621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705625">return</span>&nbsp;<span class="ident" id="5705632">nil</span><br>
<span class="lineno">200</span><span class="op" id="5705636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5705639">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5705707">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="5705771">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="5705809">func</span>&nbsp;<span class="op" id="5705814">(</span><span class="ident" id="5705815">p</span>&nbsp;<span class="op" id="5705817">*</span><span class="ident" id="5705818">Decoder</span><span class="op" id="5705825">)</span>&nbsp;<span class="ident" id="5705827">unmarshalTextInterface</span><span class="op" id="5705849">(</span><span class="ident" id="5705850">val</span>&nbsp;<span class="ident" id="5705854">encoding</span><span class="op" id="5705862">.</span><span class="ident" id="5705863">TextUnmarshaler</span><span class="op" id="5705878">,</span>&nbsp;<span class="ident" id="5705880">start</span>&nbsp;<span class="op" id="5705886">*</span><span class="ident" id="5705887">StartElement</span><span class="op" id="5705899">)</span>&nbsp;<span class="builtintype" id="5705901">error</span>&nbsp;<span class="op" id="5705907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705910">var</span>&nbsp;<span class="ident" id="5705914">buf</span>&nbsp;<span class="op" id="5705918">[</span><span class="op" id="5705919">]</span><span class="builtintype" id="5705920">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705926">depth</span>&nbsp;<span class="op" id="5705932">:=</span>&nbsp;<span class="num" id="5705935">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705938">for</span>&nbsp;<span class="ident" id="5705942">depth</span>&nbsp;<span class="op" id="5705948">&gt;</span>&nbsp;<span class="num" id="5705950">0</span>&nbsp;<span class="op" id="5705952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5705956">t</span><span class="op" id="5705957">,</span>&nbsp;<span class="ident" id="5705959">err</span>&nbsp;<span class="op" id="5705963">:=</span>&nbsp;<span class="ident" id="5705966">p</span><span class="op" id="5705967">.</span><span class="ident" id="5705968">Token</span><span class="op" id="5705973">(</span><span class="op" id="5705974">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705978">if</span>&nbsp;<span class="ident" id="5705981">err</span>&nbsp;<span class="op" id="5705985">!=</span>&nbsp;<span class="ident" id="5705988">nil</span>&nbsp;<span class="op" id="5705992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5705997">return</span>&nbsp;<span class="ident" id="5706004">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706014">switch</span>&nbsp;<span class="ident" id="5706021">t</span>&nbsp;<span class="op" id="5706023">:=</span>&nbsp;<span class="ident" id="5706026">t</span><span class="op" id="5706027">.</span><span class="op" id="5706028">(</span><span class="keyword" id="5706029">type</span><span class="op" id="5706033">)</span>&nbsp;<span class="op" id="5706035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706039">case</span>&nbsp;<span class="ident" id="5706044">CharData</span><span class="op" id="5706052">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706057">if</span>&nbsp;<span class="ident" id="5706060">depth</span>&nbsp;<span class="op" id="5706066">==</span>&nbsp;<span class="num" id="5706069">1</span>&nbsp;<span class="op" id="5706071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706077">buf</span>&nbsp;<span class="op" id="5706081">=</span>&nbsp;<span class="builtinfunc" id="5706083">append</span><span class="op" id="5706089">(</span><span class="ident" id="5706090">buf</span><span class="op" id="5706093">,</span>&nbsp;<span class="ident" id="5706095">t</span><span class="op" id="5706096">...</span><span class="op" id="5706099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706108">case</span>&nbsp;<span class="ident" id="5706113">StartElement</span><span class="op" id="5706125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706130">depth</span><span class="op" id="5706135">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706140">case</span>&nbsp;<span class="ident" id="5706145">EndElement</span><span class="op" id="5706155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706160">depth</span><span class="op" id="5706165">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706176">return</span>&nbsp;<span class="ident" id="5706183">val</span><span class="op" id="5706186">.</span><span class="ident" id="5706187">UnmarshalText</span><span class="op" id="5706200">(</span><span class="ident" id="5706201">buf</span><span class="op" id="5706204">)</span><br>
<span class="lineno">225</span><span class="op" id="5706206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5706209">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5706270">func</span>&nbsp;<span class="op" id="5706275">(</span><span class="ident" id="5706276">p</span>&nbsp;<span class="op" id="5706278">*</span><span class="ident" id="5706279">Decoder</span><span class="op" id="5706286">)</span>&nbsp;<span class="ident" id="5706288">unmarshalAttr</span><span class="op" id="5706301">(</span><span class="ident" id="5706302">val</span>&nbsp;<span class="ident" id="5706306">reflect</span><span class="op" id="5706313">.</span><span class="ident" id="5706314">Value</span><span class="op" id="5706319">,</span>&nbsp;<span class="ident" id="5706321">attr</span>&nbsp;<span class="ident" id="5706326">Attr</span><span class="op" id="5706330">)</span>&nbsp;<span class="builtintype" id="5706332">error</span>&nbsp;<span class="op" id="5706338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706341">if</span>&nbsp;<span class="ident" id="5706344">val</span><span class="op" id="5706347">.</span><span class="ident" id="5706348">Kind</span><span class="op" id="5706352">(</span><span class="op" id="5706353">)</span>&nbsp;<span class="op" id="5706355">==</span>&nbsp;<span class="ident" id="5706358">reflect</span><span class="op" id="5706365">.</span><span class="ident" id="5706366">Ptr</span>&nbsp;<span class="op" id="5706370">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706374">if</span>&nbsp;<span class="ident" id="5706377">val</span><span class="op" id="5706380">.</span><span class="ident" id="5706381">IsNil</span><span class="op" id="5706386">(</span><span class="op" id="5706387">)</span>&nbsp;<span class="op" id="5706389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706394">val</span><span class="op" id="5706397">.</span><span class="ident" id="5706398">Set</span><span class="op" id="5706401">(</span><span class="ident" id="5706402">reflect</span><span class="op" id="5706409">.</span><span class="ident" id="5706410">New</span><span class="op" id="5706413">(</span><span class="ident" id="5706414">val</span><span class="op" id="5706417">.</span><span class="ident" id="5706418">Type</span><span class="op" id="5706422">(</span><span class="op" id="5706423">)</span><span class="op" id="5706424">.</span><span class="ident" id="5706425">Elem</span><span class="op" id="5706429">(</span><span class="op" id="5706430">)</span><span class="op" id="5706431">)</span><span class="op" id="5706432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706440">val</span>&nbsp;<span class="op" id="5706444">=</span>&nbsp;<span class="ident" id="5706446">val</span><span class="op" id="5706449">.</span><span class="ident" id="5706450">Elem</span><span class="op" id="5706454">(</span><span class="op" id="5706455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706458">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706462">if</span>&nbsp;<span class="ident" id="5706465">val</span><span class="op" id="5706468">.</span><span class="ident" id="5706469">CanInterface</span><span class="op" id="5706481">(</span><span class="op" id="5706482">)</span>&nbsp;<span class="op" id="5706484">&amp;&amp;</span>&nbsp;<span class="ident" id="5706487">val</span><span class="op" id="5706490">.</span><span class="ident" id="5706491">Type</span><span class="op" id="5706495">(</span><span class="op" id="5706496">)</span><span class="op" id="5706497">.</span><span class="ident" id="5706498">Implements</span><span class="op" id="5706508">(</span><span class="ident" id="5706509">unmarshalerAttrType</span><span class="op" id="5706528">)</span>&nbsp;<span class="op" id="5706530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5706534">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5706591">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706655">return</span>&nbsp;<span class="ident" id="5706662">val</span><span class="op" id="5706665">.</span><span class="ident" id="5706666">Interface</span><span class="op" id="5706675">(</span><span class="op" id="5706676">)</span><span class="op" id="5706677">.</span><span class="op" id="5706678">(</span><span class="ident" id="5706679">UnmarshalerAttr</span><span class="op" id="5706694">)</span><span class="op" id="5706695">.</span><span class="ident" id="5706696">UnmarshalXMLAttr</span><span class="op" id="5706712">(</span><span class="ident" id="5706713">attr</span><span class="op" id="5706717">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706723">if</span>&nbsp;<span class="ident" id="5706726">val</span><span class="op" id="5706729">.</span><span class="ident" id="5706730">CanAddr</span><span class="op" id="5706737">(</span><span class="op" id="5706738">)</span>&nbsp;<span class="op" id="5706740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5706744">pv</span>&nbsp;<span class="op" id="5706747">:=</span>&nbsp;<span class="ident" id="5706750">val</span><span class="op" id="5706753">.</span><span class="ident" id="5706754">Addr</span><span class="op" id="5706758">(</span><span class="op" id="5706759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706763">if</span>&nbsp;<span class="ident" id="5706766">pv</span><span class="op" id="5706768">.</span><span class="ident" id="5706769">CanInterface</span><span class="op" id="5706781">(</span><span class="op" id="5706782">)</span>&nbsp;<span class="op" id="5706784">&amp;&amp;</span>&nbsp;<span class="ident" id="5706787">pv</span><span class="op" id="5706789">.</span><span class="ident" id="5706790">Type</span><span class="op" id="5706794">(</span><span class="op" id="5706795">)</span><span class="op" id="5706796">.</span><span class="ident" id="5706797">Implements</span><span class="op" id="5706807">(</span><span class="ident" id="5706808">unmarshalerAttrType</span><span class="op" id="5706827">)</span>&nbsp;<span class="op" id="5706829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706834">return</span>&nbsp;<span class="ident" id="5706841">pv</span><span class="op" id="5706843">.</span><span class="ident" id="5706844">Interface</span><span class="op" id="5706853">(</span><span class="op" id="5706854">)</span><span class="op" id="5706855">.</span><span class="op" id="5706856">(</span><span class="ident" id="5706857">UnmarshalerAttr</span><span class="op" id="5706872">)</span><span class="op" id="5706873">.</span><span class="ident" id="5706874">UnmarshalXMLAttr</span><span class="op" id="5706890">(</span><span class="ident" id="5706891">attr</span><span class="op" id="5706895">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5706906">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5706964">if</span>&nbsp;<span class="ident" id="5706967">val</span><span class="op" id="5706970">.</span><span class="ident" id="5706971">CanInterface</span><span class="op" id="5706983">(</span><span class="op" id="5706984">)</span>&nbsp;<span class="op" id="5706986">&amp;&amp;</span>&nbsp;<span class="ident" id="5706989">val</span><span class="op" id="5706992">.</span><span class="ident" id="5706993">Type</span><span class="op" id="5706997">(</span><span class="op" id="5706998">)</span><span class="op" id="5706999">.</span><span class="ident" id="5707000">Implements</span><span class="op" id="5707010">(</span><span class="ident" id="5707011">textUnmarshalerType</span><span class="op" id="5707030">)</span>&nbsp;<span class="op" id="5707032">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5707036">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5707093">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707157">return</span>&nbsp;<span class="ident" id="5707164">val</span><span class="op" id="5707167">.</span><span class="ident" id="5707168">Interface</span><span class="op" id="5707177">(</span><span class="op" id="5707178">)</span><span class="op" id="5707179">.</span><span class="op" id="5707180">(</span><span class="ident" id="5707181">encoding</span><span class="op" id="5707189">.</span><span class="ident" id="5707190">TextUnmarshaler</span><span class="op" id="5707205">)</span><span class="op" id="5707206">.</span><span class="ident" id="5707207">UnmarshalText</span><span class="op" id="5707220">(</span><span class="op" id="5707221">[</span><span class="op" id="5707222">]</span><span class="builtintype" id="5707223">byte</span><span class="op" id="5707227">(</span><span class="ident" id="5707228">attr</span><span class="op" id="5707232">.</span><span class="ident" id="5707233">Value</span><span class="op" id="5707238">)</span><span class="op" id="5707239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5707242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707245">if</span>&nbsp;<span class="ident" id="5707248">val</span><span class="op" id="5707251">.</span><span class="ident" id="5707252">CanAddr</span><span class="op" id="5707259">(</span><span class="op" id="5707260">)</span>&nbsp;<span class="op" id="5707262">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707266">pv</span>&nbsp;<span class="op" id="5707269">:=</span>&nbsp;<span class="ident" id="5707272">val</span><span class="op" id="5707275">.</span><span class="ident" id="5707276">Addr</span><span class="op" id="5707280">(</span><span class="op" id="5707281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707285">if</span>&nbsp;<span class="ident" id="5707288">pv</span><span class="op" id="5707290">.</span><span class="ident" id="5707291">CanInterface</span><span class="op" id="5707303">(</span><span class="op" id="5707304">)</span>&nbsp;<span class="op" id="5707306">&amp;&amp;</span>&nbsp;<span class="ident" id="5707309">pv</span><span class="op" id="5707311">.</span><span class="ident" id="5707312">Type</span><span class="op" id="5707316">(</span><span class="op" id="5707317">)</span><span class="op" id="5707318">.</span><span class="ident" id="5707319">Implements</span><span class="op" id="5707329">(</span><span class="ident" id="5707330">textUnmarshalerType</span><span class="op" id="5707349">)</span>&nbsp;<span class="op" id="5707351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707356">return</span>&nbsp;<span class="ident" id="5707363">pv</span><span class="op" id="5707365">.</span><span class="ident" id="5707366">Interface</span><span class="op" id="5707375">(</span><span class="op" id="5707376">)</span><span class="op" id="5707377">.</span><span class="op" id="5707378">(</span><span class="ident" id="5707379">encoding</span><span class="op" id="5707387">.</span><span class="ident" id="5707388">TextUnmarshaler</span><span class="op" id="5707403">)</span><span class="op" id="5707404">.</span><span class="ident" id="5707405">UnmarshalText</span><span class="op" id="5707418">(</span><span class="op" id="5707419">[</span><span class="op" id="5707420">]</span><span class="builtintype" id="5707421">byte</span><span class="op" id="5707425">(</span><span class="ident" id="5707426">attr</span><span class="op" id="5707430">.</span><span class="ident" id="5707431">Value</span><span class="op" id="5707436">)</span><span class="op" id="5707437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5707441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5707444">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707448">copyValue</span><span class="op" id="5707457">(</span><span class="ident" id="5707458">val</span><span class="op" id="5707461">,</span>&nbsp;<span class="op" id="5707463">[</span><span class="op" id="5707464">]</span><span class="builtintype" id="5707465">byte</span><span class="op" id="5707469">(</span><span class="ident" id="5707470">attr</span><span class="op" id="5707474">.</span><span class="ident" id="5707475">Value</span><span class="op" id="5707480">)</span><span class="op" id="5707481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707484">return</span>&nbsp;<span class="ident" id="5707491">nil</span><br>
<span class="lineno"></span><span class="op" id="5707495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5707498">var</span>&nbsp;<span class="op" id="5707502">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707505">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707525">=</span>&nbsp;<span class="ident" id="5707527">reflect</span><span class="op" id="5707534">.</span><span class="ident" id="5707535">TypeOf</span><span class="op" id="5707541">(</span><span class="op" id="5707542">(</span><span class="op" id="5707543">*</span><span class="ident" id="5707544">Unmarshaler</span><span class="op" id="5707555">)</span><span class="op" id="5707556">(</span><span class="ident" id="5707557">nil</span><span class="op" id="5707560">)</span><span class="op" id="5707561">)</span><span class="op" id="5707562">.</span><span class="ident" id="5707563">Elem</span><span class="op" id="5707567">(</span><span class="op" id="5707568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707571">unmarshalerAttrType</span>&nbsp;<span class="op" id="5707591">=</span>&nbsp;<span class="ident" id="5707593">reflect</span><span class="op" id="5707600">.</span><span class="ident" id="5707601">TypeOf</span><span class="op" id="5707607">(</span><span class="op" id="5707608">(</span><span class="op" id="5707609">*</span><span class="ident" id="5707610">UnmarshalerAttr</span><span class="op" id="5707625">)</span><span class="op" id="5707626">(</span><span class="ident" id="5707627">nil</span><span class="op" id="5707630">)</span><span class="op" id="5707631">)</span><span class="op" id="5707632">.</span><span class="ident" id="5707633">Elem</span><span class="op" id="5707637">(</span><span class="op" id="5707638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707641">textUnmarshalerType</span>&nbsp;<span class="op" id="5707661">=</span>&nbsp;<span class="ident" id="5707663">reflect</span><span class="op" id="5707670">.</span><span class="ident" id="5707671">TypeOf</span><span class="op" id="5707677">(</span><span class="op" id="5707678">(</span><span class="op" id="5707679">*</span><span class="ident" id="5707680">encoding</span><span class="op" id="5707688">.</span><span class="ident" id="5707689">TextUnmarshaler</span><span class="op" id="5707704">)</span><span class="op" id="5707705">(</span><span class="ident" id="5707706">nil</span><span class="op" id="5707709">)</span><span class="op" id="5707710">)</span><span class="op" id="5707711">.</span><span class="ident" id="5707712">Elem</span><span class="op" id="5707716">(</span><span class="op" id="5707717">)</span><br>
<span class="lineno"></span><span class="op" id="5707719">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5707722">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5707766">func</span>&nbsp;<span class="op" id="5707771">(</span><span class="ident" id="5707772">p</span>&nbsp;<span class="op" id="5707774">*</span><span class="ident" id="5707775">Decoder</span><span class="op" id="5707782">)</span>&nbsp;<span class="ident" id="5707784">unmarshal</span><span class="op" id="5707793">(</span><span class="ident" id="5707794">val</span>&nbsp;<span class="ident" id="5707798">reflect</span><span class="op" id="5707805">.</span><span class="ident" id="5707806">Value</span><span class="op" id="5707811">,</span>&nbsp;<span class="ident" id="5707813">start</span>&nbsp;<span class="op" id="5707819">*</span><span class="ident" id="5707820">StartElement</span><span class="op" id="5707832">)</span>&nbsp;<span class="builtintype" id="5707834">error</span>&nbsp;<span class="op" id="5707840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5707843">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707881">if</span>&nbsp;<span class="ident" id="5707884">start</span>&nbsp;<span class="op" id="5707890">==</span>&nbsp;<span class="ident" id="5707893">nil</span>&nbsp;<span class="op" id="5707897">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707901">for</span>&nbsp;<span class="op" id="5707905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5707910">tok</span><span class="op" id="5707913">,</span>&nbsp;<span class="ident" id="5707915">err</span>&nbsp;<span class="op" id="5707919">:=</span>&nbsp;<span class="ident" id="5707922">p</span><span class="op" id="5707923">.</span><span class="ident" id="5707924">Token</span><span class="op" id="5707929">(</span><span class="op" id="5707930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707935">if</span>&nbsp;<span class="ident" id="5707938">err</span>&nbsp;<span class="op" id="5707942">!=</span>&nbsp;<span class="ident" id="5707945">nil</span>&nbsp;<span class="op" id="5707949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707955">return</span>&nbsp;<span class="ident" id="5707962">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5707969">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5707974">if</span>&nbsp;<span class="ident" id="5707977">t</span><span class="op" id="5707978">,</span>&nbsp;<span class="ident" id="5707980">ok</span>&nbsp;<span class="op" id="5707983">:=</span>&nbsp;<span class="ident" id="5707986">tok</span><span class="op" id="5707989">.</span><span class="op" id="5707990">(</span><span class="ident" id="5707991">StartElement</span><span class="op" id="5708003">)</span><span class="op" id="5708004">;</span>&nbsp;<span class="ident" id="5708006">ok</span>&nbsp;<span class="op" id="5708009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708015">start</span>&nbsp;<span class="op" id="5708021">=</span>&nbsp;<span class="op" id="5708023">&amp;</span><span class="ident" id="5708024">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708030">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708043">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5708050">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5708112">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708138">if</span>&nbsp;<span class="ident" id="5708141">val</span><span class="op" id="5708144">.</span><span class="ident" id="5708145">Kind</span><span class="op" id="5708149">(</span><span class="op" id="5708150">)</span>&nbsp;<span class="op" id="5708152">==</span>&nbsp;<span class="ident" id="5708155">reflect</span><span class="op" id="5708162">.</span><span class="ident" id="5708163">Interface</span>&nbsp;<span class="op" id="5708173">&amp;&amp;</span>&nbsp;<span class="op" id="5708176">!</span><span class="ident" id="5708177">val</span><span class="op" id="5708180">.</span><span class="ident" id="5708181">IsNil</span><span class="op" id="5708186">(</span><span class="op" id="5708187">)</span>&nbsp;<span class="op" id="5708189">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708193">e</span>&nbsp;<span class="op" id="5708195">:=</span>&nbsp;<span class="ident" id="5708198">val</span><span class="op" id="5708201">.</span><span class="ident" id="5708202">Elem</span><span class="op" id="5708206">(</span><span class="op" id="5708207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708211">if</span>&nbsp;<span class="ident" id="5708214">e</span><span class="op" id="5708215">.</span><span class="ident" id="5708216">Kind</span><span class="op" id="5708220">(</span><span class="op" id="5708221">)</span>&nbsp;<span class="op" id="5708223">==</span>&nbsp;<span class="ident" id="5708226">reflect</span><span class="op" id="5708233">.</span><span class="ident" id="5708234">Ptr</span>&nbsp;<span class="op" id="5708238">&amp;&amp;</span>&nbsp;<span class="op" id="5708241">!</span><span class="ident" id="5708242">e</span><span class="op" id="5708243">.</span><span class="ident" id="5708244">IsNil</span><span class="op" id="5708249">(</span><span class="op" id="5708250">)</span>&nbsp;<span class="op" id="5708252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708257">val</span>&nbsp;<span class="op" id="5708261">=</span>&nbsp;<span class="ident" id="5708263">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708270">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708274">if</span>&nbsp;<span class="ident" id="5708277">val</span><span class="op" id="5708280">.</span><span class="ident" id="5708281">Kind</span><span class="op" id="5708285">(</span><span class="op" id="5708286">)</span>&nbsp;<span class="op" id="5708288">==</span>&nbsp;<span class="ident" id="5708291">reflect</span><span class="op" id="5708298">.</span><span class="ident" id="5708299">Ptr</span>&nbsp;<span class="op" id="5708303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708307">if</span>&nbsp;<span class="ident" id="5708310">val</span><span class="op" id="5708313">.</span><span class="ident" id="5708314">IsNil</span><span class="op" id="5708319">(</span><span class="op" id="5708320">)</span>&nbsp;<span class="op" id="5708322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708327">val</span><span class="op" id="5708330">.</span><span class="ident" id="5708331">Set</span><span class="op" id="5708334">(</span><span class="ident" id="5708335">reflect</span><span class="op" id="5708342">.</span><span class="ident" id="5708343">New</span><span class="op" id="5708346">(</span><span class="ident" id="5708347">val</span><span class="op" id="5708350">.</span><span class="ident" id="5708351">Type</span><span class="op" id="5708355">(</span><span class="op" id="5708356">)</span><span class="op" id="5708357">.</span><span class="ident" id="5708358">Elem</span><span class="op" id="5708362">(</span><span class="op" id="5708363">)</span><span class="op" id="5708364">)</span><span class="op" id="5708365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708369">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708373">val</span>&nbsp;<span class="op" id="5708377">=</span>&nbsp;<span class="ident" id="5708379">val</span><span class="op" id="5708382">.</span><span class="ident" id="5708383">Elem</span><span class="op" id="5708387">(</span><span class="op" id="5708388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708395">if</span>&nbsp;<span class="ident" id="5708398">val</span><span class="op" id="5708401">.</span><span class="ident" id="5708402">CanInterface</span><span class="op" id="5708414">(</span><span class="op" id="5708415">)</span>&nbsp;<span class="op" id="5708417">&amp;&amp;</span>&nbsp;<span class="ident" id="5708420">val</span><span class="op" id="5708423">.</span><span class="ident" id="5708424">Type</span><span class="op" id="5708428">(</span><span class="op" id="5708429">)</span><span class="op" id="5708430">.</span><span class="ident" id="5708431">Implements</span><span class="op" id="5708441">(</span><span class="ident" id="5708442">unmarshalerType</span><span class="op" id="5708457">)</span>&nbsp;<span class="op" id="5708459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5708463">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5708520">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708584">return</span>&nbsp;<span class="ident" id="5708591">p</span><span class="op" id="5708592">.</span><span class="ident" id="5708593">unmarshalInterface</span><span class="op" id="5708611">(</span><span class="ident" id="5708612">val</span><span class="op" id="5708615">.</span><span class="ident" id="5708616">Interface</span><span class="op" id="5708625">(</span><span class="op" id="5708626">)</span><span class="op" id="5708627">.</span><span class="op" id="5708628">(</span><span class="ident" id="5708629">Unmarshaler</span><span class="op" id="5708640">)</span><span class="op" id="5708641">,</span>&nbsp;<span class="ident" id="5708643">start</span><span class="op" id="5708648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708655">if</span>&nbsp;<span class="ident" id="5708658">val</span><span class="op" id="5708661">.</span><span class="ident" id="5708662">CanAddr</span><span class="op" id="5708669">(</span><span class="op" id="5708670">)</span>&nbsp;<span class="op" id="5708672">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5708676">pv</span>&nbsp;<span class="op" id="5708679">:=</span>&nbsp;<span class="ident" id="5708682">val</span><span class="op" id="5708685">.</span><span class="ident" id="5708686">Addr</span><span class="op" id="5708690">(</span><span class="op" id="5708691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708695">if</span>&nbsp;<span class="ident" id="5708698">pv</span><span class="op" id="5708700">.</span><span class="ident" id="5708701">CanInterface</span><span class="op" id="5708713">(</span><span class="op" id="5708714">)</span>&nbsp;<span class="op" id="5708716">&amp;&amp;</span>&nbsp;<span class="ident" id="5708719">pv</span><span class="op" id="5708721">.</span><span class="ident" id="5708722">Type</span><span class="op" id="5708726">(</span><span class="op" id="5708727">)</span><span class="op" id="5708728">.</span><span class="ident" id="5708729">Implements</span><span class="op" id="5708739">(</span><span class="ident" id="5708740">unmarshalerType</span><span class="op" id="5708755">)</span>&nbsp;<span class="op" id="5708757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708762">return</span>&nbsp;<span class="ident" id="5708769">p</span><span class="op" id="5708770">.</span><span class="ident" id="5708771">unmarshalInterface</span><span class="op" id="5708789">(</span><span class="ident" id="5708790">pv</span><span class="op" id="5708792">.</span><span class="ident" id="5708793">Interface</span><span class="op" id="5708802">(</span><span class="op" id="5708803">)</span><span class="op" id="5708804">.</span><span class="op" id="5708805">(</span><span class="ident" id="5708806">Unmarshaler</span><span class="op" id="5708817">)</span><span class="op" id="5708818">,</span>&nbsp;<span class="ident" id="5708820">start</span><span class="op" id="5708825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708832">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708836">if</span>&nbsp;<span class="ident" id="5708839">val</span><span class="op" id="5708842">.</span><span class="ident" id="5708843">CanInterface</span><span class="op" id="5708855">(</span><span class="op" id="5708856">)</span>&nbsp;<span class="op" id="5708858">&amp;&amp;</span>&nbsp;<span class="ident" id="5708861">val</span><span class="op" id="5708864">.</span><span class="ident" id="5708865">Type</span><span class="op" id="5708869">(</span><span class="op" id="5708870">)</span><span class="op" id="5708871">.</span><span class="ident" id="5708872">Implements</span><span class="op" id="5708882">(</span><span class="ident" id="5708883">textUnmarshalerType</span><span class="op" id="5708902">)</span>&nbsp;<span class="op" id="5708904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708908">return</span>&nbsp;<span class="ident" id="5708915">p</span><span class="op" id="5708916">.</span><span class="ident" id="5708917">unmarshalTextInterface</span><span class="op" id="5708939">(</span><span class="ident" id="5708940">val</span><span class="op" id="5708943">.</span><span class="ident" id="5708944">Interface</span><span class="op" id="5708953">(</span><span class="op" id="5708954">)</span><span class="op" id="5708955">.</span><span class="op" id="5708956">(</span><span class="ident" id="5708957">encoding</span><span class="op" id="5708965">.</span><span class="ident" id="5708966">TextUnmarshaler</span><span class="op" id="5708981">)</span><span class="op" id="5708982">,</span>&nbsp;<span class="ident" id="5708984">start</span><span class="op" id="5708989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5708992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5708996">if</span>&nbsp;<span class="ident" id="5708999">val</span><span class="op" id="5709002">.</span><span class="ident" id="5709003">CanAddr</span><span class="op" id="5709010">(</span><span class="op" id="5709011">)</span>&nbsp;<span class="op" id="5709013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709017">pv</span>&nbsp;<span class="op" id="5709020">:=</span>&nbsp;<span class="ident" id="5709023">val</span><span class="op" id="5709026">.</span><span class="ident" id="5709027">Addr</span><span class="op" id="5709031">(</span><span class="op" id="5709032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709036">if</span>&nbsp;<span class="ident" id="5709039">pv</span><span class="op" id="5709041">.</span><span class="ident" id="5709042">CanInterface</span><span class="op" id="5709054">(</span><span class="op" id="5709055">)</span>&nbsp;<span class="op" id="5709057">&amp;&amp;</span>&nbsp;<span class="ident" id="5709060">pv</span><span class="op" id="5709062">.</span><span class="ident" id="5709063">Type</span><span class="op" id="5709067">(</span><span class="op" id="5709068">)</span><span class="op" id="5709069">.</span><span class="ident" id="5709070">Implements</span><span class="op" id="5709080">(</span><span class="ident" id="5709081">textUnmarshalerType</span><span class="op" id="5709100">)</span>&nbsp;<span class="op" id="5709102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709107">return</span>&nbsp;<span class="ident" id="5709114">p</span><span class="op" id="5709115">.</span><span class="ident" id="5709116">unmarshalTextInterface</span><span class="op" id="5709138">(</span><span class="ident" id="5709139">pv</span><span class="op" id="5709141">.</span><span class="ident" id="5709142">Interface</span><span class="op" id="5709151">(</span><span class="op" id="5709152">)</span><span class="op" id="5709153">.</span><span class="op" id="5709154">(</span><span class="ident" id="5709155">encoding</span><span class="op" id="5709163">.</span><span class="ident" id="5709164">TextUnmarshaler</span><span class="op" id="5709179">)</span><span class="op" id="5709180">,</span>&nbsp;<span class="ident" id="5709182">start</span><span class="op" id="5709187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5709191">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5709194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709198">var</span>&nbsp;<span class="op" id="5709202">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709206">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709219">[</span><span class="op" id="5709220">]</span><span class="builtintype" id="5709221">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709228">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709241">reflect</span><span class="op" id="5709248">.</span><span class="ident" id="5709249">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709257">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709270">[</span><span class="op" id="5709271">]</span><span class="builtintype" id="5709272">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709279">saveComment</span>&nbsp;&nbsp;<span class="ident" id="5709292">reflect</span><span class="op" id="5709299">.</span><span class="ident" id="5709300">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709308">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709321">reflect</span><span class="op" id="5709328">.</span><span class="ident" id="5709329">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709337">saveXMLIndex</span>&nbsp;<span class="builtintype" id="5709350">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709356">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="5709369">[</span><span class="op" id="5709370">]</span><span class="builtintype" id="5709371">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709378">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709391">reflect</span><span class="op" id="5709398">.</span><span class="ident" id="5709399">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709407">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5709420">reflect</span><span class="op" id="5709427">.</span><span class="ident" id="5709428">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709436">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5709449">*</span><span class="ident" id="5709450">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709461">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5709474">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5709481">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709485">switch</span>&nbsp;<span class="ident" id="5709492">v</span>&nbsp;<span class="op" id="5709494">:=</span>&nbsp;<span class="ident" id="5709497">val</span><span class="op" id="5709500">;</span>&nbsp;<span class="ident" id="5709502">v</span><span class="op" id="5709503">.</span><span class="ident" id="5709504">Kind</span><span class="op" id="5709508">(</span><span class="op" id="5709509">)</span>&nbsp;<span class="op" id="5709511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709514">default</span><span class="op" id="5709521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709525">return</span>&nbsp;<span class="ident" id="5709532">errors</span><span class="op" id="5709538">.</span><span class="ident" id="5709539">New</span><span class="op" id="5709542">(</span><span class="string" id="5709543">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5709559">+</span>&nbsp;<span class="ident" id="5709561">v</span><span class="op" id="5709562">.</span><span class="ident" id="5709563">Type</span><span class="op" id="5709567">(</span><span class="op" id="5709568">)</span><span class="op" id="5709569">.</span><span class="ident" id="5709570">String</span><span class="op" id="5709576">(</span><span class="op" id="5709577">)</span><span class="op" id="5709578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709582">case</span>&nbsp;<span class="ident" id="5709587">reflect</span><span class="op" id="5709594">.</span><span class="ident" id="5709595">Interface</span><span class="op" id="5709604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709608">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709665">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709720">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709758">return</span>&nbsp;<span class="ident" id="5709765">p</span><span class="op" id="5709766">.</span><span class="ident" id="5709767">Skip</span><span class="op" id="5709771">(</span><span class="op" id="5709772">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709776">case</span>&nbsp;<span class="ident" id="5709781">reflect</span><span class="op" id="5709788">.</span><span class="ident" id="5709789">Slice</span><span class="op" id="5709794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709798">typ</span>&nbsp;<span class="op" id="5709802">:=</span>&nbsp;<span class="ident" id="5709805">v</span><span class="op" id="5709806">.</span><span class="ident" id="5709807">Type</span><span class="op" id="5709811">(</span><span class="op" id="5709812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709816">if</span>&nbsp;<span class="ident" id="5709819">typ</span><span class="op" id="5709822">.</span><span class="ident" id="5709823">Elem</span><span class="op" id="5709827">(</span><span class="op" id="5709828">)</span><span class="op" id="5709829">.</span><span class="ident" id="5709830">Kind</span><span class="op" id="5709834">(</span><span class="op" id="5709835">)</span>&nbsp;<span class="op" id="5709837">==</span>&nbsp;<span class="ident" id="5709840">reflect</span><span class="op" id="5709847">.</span><span class="ident" id="5709848">Uint8</span>&nbsp;<span class="op" id="5709854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709859">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709872">saveData</span>&nbsp;<span class="op" id="5709881">=</span>&nbsp;<span class="ident" id="5709883">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709888">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5709896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709901">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5709931">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709948">n</span>&nbsp;<span class="op" id="5709950">:=</span>&nbsp;<span class="ident" id="5709953">v</span><span class="op" id="5709954">.</span><span class="ident" id="5709955">Len</span><span class="op" id="5709958">(</span><span class="op" id="5709959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5709963">if</span>&nbsp;<span class="ident" id="5709966">n</span>&nbsp;<span class="op" id="5709968">&gt;=</span>&nbsp;<span class="ident" id="5709971">v</span><span class="op" id="5709972">.</span><span class="ident" id="5709973">Cap</span><span class="op" id="5709976">(</span><span class="op" id="5709977">)</span>&nbsp;<span class="op" id="5709979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5709984">ncap</span>&nbsp;<span class="op" id="5709989">:=</span>&nbsp;<span class="num" id="5709992">2</span>&nbsp;<span class="op" id="5709994">*</span>&nbsp;<span class="ident" id="5709996">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710001">if</span>&nbsp;<span class="ident" id="5710004">ncap</span>&nbsp;<span class="op" id="5710009">&lt;</span>&nbsp;<span class="num" id="5710011">4</span>&nbsp;<span class="op" id="5710013">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710019">ncap</span>&nbsp;<span class="op" id="5710024">=</span>&nbsp;<span class="num" id="5710026">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5710036">new</span>&nbsp;<span class="op" id="5710040">:=</span>&nbsp;<span class="ident" id="5710043">reflect</span><span class="op" id="5710050">.</span><span class="ident" id="5710051">MakeSlice</span><span class="op" id="5710060">(</span><span class="ident" id="5710061">typ</span><span class="op" id="5710064">,</span>&nbsp;<span class="ident" id="5710066">n</span><span class="op" id="5710067">,</span>&nbsp;<span class="ident" id="5710069">ncap</span><span class="op" id="5710073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710078">reflect</span><span class="op" id="5710085">.</span><span class="ident" id="5710086">Copy</span><span class="op" id="5710090">(</span><span class="builtinfunc" id="5710091">new</span><span class="op" id="5710094">,</span>&nbsp;<span class="ident" id="5710096">v</span><span class="op" id="5710097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710102">v</span><span class="op" id="5710103">.</span><span class="ident" id="5710104">Set</span><span class="op" id="5710107">(</span><span class="builtinfunc" id="5710108">new</span><span class="op" id="5710111">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710119">v</span><span class="op" id="5710120">.</span><span class="ident" id="5710121">SetLen</span><span class="op" id="5710127">(</span><span class="ident" id="5710128">n</span>&nbsp;<span class="op" id="5710130">+</span>&nbsp;<span class="num" id="5710132">1</span><span class="op" id="5710133">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5710138">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710177">if</span>&nbsp;<span class="ident" id="5710180">err</span>&nbsp;<span class="op" id="5710184">:=</span>&nbsp;<span class="ident" id="5710187">p</span><span class="op" id="5710188">.</span><span class="ident" id="5710189">unmarshal</span><span class="op" id="5710198">(</span><span class="ident" id="5710199">v</span><span class="op" id="5710200">.</span><span class="ident" id="5710201">Index</span><span class="op" id="5710206">(</span><span class="ident" id="5710207">n</span><span class="op" id="5710208">)</span><span class="op" id="5710209">,</span>&nbsp;<span class="ident" id="5710211">start</span><span class="op" id="5710216">)</span><span class="op" id="5710217">;</span>&nbsp;<span class="ident" id="5710219">err</span>&nbsp;<span class="op" id="5710223">!=</span>&nbsp;<span class="ident" id="5710226">nil</span>&nbsp;<span class="op" id="5710230">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710235">v</span><span class="op" id="5710236">.</span><span class="ident" id="5710237">SetLen</span><span class="op" id="5710243">(</span><span class="ident" id="5710244">n</span><span class="op" id="5710245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710250">return</span>&nbsp;<span class="ident" id="5710257">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710267">return</span>&nbsp;<span class="ident" id="5710274">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710280">case</span>&nbsp;<span class="ident" id="5710285">reflect</span><span class="op" id="5710292">.</span><span class="ident" id="5710293">Bool</span><span class="op" id="5710297">,</span>&nbsp;<span class="ident" id="5710299">reflect</span><span class="op" id="5710306">.</span><span class="ident" id="5710307">Float32</span><span class="op" id="5710314">,</span>&nbsp;<span class="ident" id="5710316">reflect</span><span class="op" id="5710323">.</span><span class="ident" id="5710324">Float64</span><span class="op" id="5710331">,</span>&nbsp;<span class="ident" id="5710333">reflect</span><span class="op" id="5710340">.</span><span class="ident" id="5710341">Int</span><span class="op" id="5710344">,</span>&nbsp;<span class="ident" id="5710346">reflect</span><span class="op" id="5710353">.</span><span class="ident" id="5710354">Int8</span><span class="op" id="5710358">,</span>&nbsp;<span class="ident" id="5710360">reflect</span><span class="op" id="5710367">.</span><span class="ident" id="5710368">Int16</span><span class="op" id="5710373">,</span>&nbsp;<span class="ident" id="5710375">reflect</span><span class="op" id="5710382">.</span><span class="ident" id="5710383">Int32</span><span class="op" id="5710388">,</span>&nbsp;<span class="ident" id="5710390">reflect</span><span class="op" id="5710397">.</span><span class="ident" id="5710398">Int64</span><span class="op" id="5710403">,</span>&nbsp;<span class="ident" id="5710405">reflect</span><span class="op" id="5710412">.</span><span class="ident" id="5710413">Uint</span><span class="op" id="5710417">,</span>&nbsp;<span class="ident" id="5710419">reflect</span><span class="op" id="5710426">.</span><span class="ident" id="5710427">Uint8</span><span class="op" id="5710432">,</span>&nbsp;<span class="ident" id="5710434">reflect</span><span class="op" id="5710441">.</span><span class="ident" id="5710442">Uint16</span><span class="op" id="5710448">,</span>&nbsp;<span class="ident" id="5710450">reflect</span><span class="op" id="5710457">.</span><span class="ident" id="5710458">Uint32</span><span class="op" id="5710464">,</span>&nbsp;<span class="ident" id="5710466">reflect</span><span class="op" id="5710473">.</span><span class="ident" id="5710474">Uint64</span><span class="op" id="5710480">,</span>&nbsp;<span class="ident" id="5710482">reflect</span><span class="op" id="5710489">.</span><span class="ident" id="5710490">Uintptr</span><span class="op" id="5710497">,</span>&nbsp;<span class="ident" id="5710499">reflect</span><span class="op" id="5710506">.</span><span class="ident" id="5710507">String</span><span class="op" id="5710513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710517">saveData</span>&nbsp;<span class="op" id="5710526">=</span>&nbsp;<span class="ident" id="5710528">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710532">case</span>&nbsp;<span class="ident" id="5710537">reflect</span><span class="op" id="5710544">.</span><span class="ident" id="5710545">Struct</span><span class="op" id="5710551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710555">typ</span>&nbsp;<span class="op" id="5710559">:=</span>&nbsp;<span class="ident" id="5710562">v</span><span class="op" id="5710563">.</span><span class="ident" id="5710564">Type</span><span class="op" id="5710568">(</span><span class="op" id="5710569">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710573">if</span>&nbsp;<span class="ident" id="5710576">typ</span>&nbsp;<span class="op" id="5710580">==</span>&nbsp;<span class="ident" id="5710583">nameType</span>&nbsp;<span class="op" id="5710592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710597">v</span><span class="op" id="5710598">.</span><span class="ident" id="5710599">Set</span><span class="op" id="5710602">(</span><span class="ident" id="5710603">reflect</span><span class="op" id="5710610">.</span><span class="ident" id="5710611">ValueOf</span><span class="op" id="5710618">(</span><span class="ident" id="5710619">start</span><span class="op" id="5710624">.</span><span class="ident" id="5710625">Name</span><span class="op" id="5710629">)</span><span class="op" id="5710630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710635">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710648">sv</span>&nbsp;<span class="op" id="5710651">=</span>&nbsp;<span class="ident" id="5710653">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710657">tinfo</span><span class="op" id="5710662">,</span>&nbsp;<span class="ident" id="5710664">err</span>&nbsp;<span class="op" id="5710668">=</span>&nbsp;<span class="ident" id="5710670">getTypeInfo</span><span class="op" id="5710681">(</span><span class="ident" id="5710682">typ</span><span class="op" id="5710685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710689">if</span>&nbsp;<span class="ident" id="5710692">err</span>&nbsp;<span class="op" id="5710696">!=</span>&nbsp;<span class="ident" id="5710699">nil</span>&nbsp;<span class="op" id="5710703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710708">return</span>&nbsp;<span class="ident" id="5710715">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710721">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5710726">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710765">if</span>&nbsp;<span class="ident" id="5710768">tinfo</span><span class="op" id="5710773">.</span><span class="ident" id="5710774">xmlname</span>&nbsp;<span class="op" id="5710782">!=</span>&nbsp;<span class="ident" id="5710785">nil</span>&nbsp;<span class="op" id="5710789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5710794">finfo</span>&nbsp;<span class="op" id="5710800">:=</span>&nbsp;<span class="ident" id="5710803">tinfo</span><span class="op" id="5710808">.</span><span class="ident" id="5710809">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710820">if</span>&nbsp;<span class="ident" id="5710823">finfo</span><span class="op" id="5710828">.</span><span class="ident" id="5710829">name</span>&nbsp;<span class="op" id="5710834">!=</span>&nbsp;<span class="string" id="5710837">&#34;&#34;</span>&nbsp;<span class="op" id="5710840">&amp;&amp;</span>&nbsp;<span class="ident" id="5710843">finfo</span><span class="op" id="5710848">.</span><span class="ident" id="5710849">name</span>&nbsp;<span class="op" id="5710854">!=</span>&nbsp;<span class="ident" id="5710857">start</span><span class="op" id="5710862">.</span><span class="ident" id="5710863">Name</span><span class="op" id="5710867">.</span><span class="ident" id="5710868">Local</span>&nbsp;<span class="op" id="5710874">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710880">return</span>&nbsp;<span class="ident" id="5710887">UnmarshalError</span><span class="op" id="5710901">(</span><span class="string" id="5710902">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5710928">+</span>&nbsp;<span class="ident" id="5710930">finfo</span><span class="op" id="5710935">.</span><span class="ident" id="5710936">name</span>&nbsp;<span class="op" id="5710941">+</span>&nbsp;<span class="string" id="5710943">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5710958">+</span>&nbsp;<span class="ident" id="5710960">start</span><span class="op" id="5710965">.</span><span class="ident" id="5710966">Name</span><span class="op" id="5710970">.</span><span class="ident" id="5710971">Local</span>&nbsp;<span class="op" id="5710977">+</span>&nbsp;<span class="string" id="5710979">&#34;&gt;&#34;</span><span class="op" id="5710982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5710987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5710992">if</span>&nbsp;<span class="ident" id="5710995">finfo</span><span class="op" id="5711000">.</span><span class="ident" id="5711001">xmlns</span>&nbsp;<span class="op" id="5711007">!=</span>&nbsp;<span class="string" id="5711010">&#34;&#34;</span>&nbsp;<span class="op" id="5711013">&amp;&amp;</span>&nbsp;<span class="ident" id="5711016">finfo</span><span class="op" id="5711021">.</span><span class="ident" id="5711022">xmlns</span>&nbsp;<span class="op" id="5711028">!=</span>&nbsp;<span class="ident" id="5711031">start</span><span class="op" id="5711036">.</span><span class="ident" id="5711037">Name</span><span class="op" id="5711041">.</span><span class="ident" id="5711042">Space</span>&nbsp;<span class="op" id="5711048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711054">e</span>&nbsp;<span class="op" id="5711056">:=</span>&nbsp;<span class="string" id="5711059">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5711080">+</span>&nbsp;<span class="ident" id="5711082">finfo</span><span class="op" id="5711087">.</span><span class="ident" id="5711088">name</span>&nbsp;<span class="op" id="5711093">+</span>&nbsp;<span class="string" id="5711095">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="5711114">+</span>&nbsp;<span class="ident" id="5711116">finfo</span><span class="op" id="5711121">.</span><span class="ident" id="5711122">xmlns</span>&nbsp;<span class="op" id="5711128">+</span>&nbsp;<span class="string" id="5711130">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711147">if</span>&nbsp;<span class="ident" id="5711150">start</span><span class="op" id="5711155">.</span><span class="ident" id="5711156">Name</span><span class="op" id="5711160">.</span><span class="ident" id="5711161">Space</span>&nbsp;<span class="op" id="5711167">==</span>&nbsp;<span class="string" id="5711170">&#34;&#34;</span>&nbsp;<span class="op" id="5711173">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711180">e</span>&nbsp;<span class="op" id="5711182">+=</span>&nbsp;<span class="string" id="5711185">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711205">}</span>&nbsp;<span class="keyword" id="5711207">else</span>&nbsp;<span class="op" id="5711212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711219">e</span>&nbsp;<span class="op" id="5711221">+=</span>&nbsp;<span class="ident" id="5711224">start</span><span class="op" id="5711229">.</span><span class="ident" id="5711230">Name</span><span class="op" id="5711234">.</span><span class="ident" id="5711235">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711251">return</span>&nbsp;<span class="ident" id="5711258">UnmarshalError</span><span class="op" id="5711272">(</span><span class="ident" id="5711273">e</span><span class="op" id="5711274">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711284">fv</span>&nbsp;<span class="op" id="5711287">:=</span>&nbsp;<span class="ident" id="5711290">finfo</span><span class="op" id="5711295">.</span><span class="ident" id="5711296">value</span><span class="op" id="5711301">(</span><span class="ident" id="5711302">sv</span><span class="op" id="5711304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711309">if</span>&nbsp;<span class="ident" id="5711312">_</span><span class="op" id="5711313">,</span>&nbsp;<span class="ident" id="5711315">ok</span>&nbsp;<span class="op" id="5711318">:=</span>&nbsp;<span class="ident" id="5711321">fv</span><span class="op" id="5711323">.</span><span class="ident" id="5711324">Interface</span><span class="op" id="5711333">(</span><span class="op" id="5711334">)</span><span class="op" id="5711335">.</span><span class="op" id="5711336">(</span><span class="ident" id="5711337">Name</span><span class="op" id="5711341">)</span><span class="op" id="5711342">;</span>&nbsp;<span class="ident" id="5711344">ok</span>&nbsp;<span class="op" id="5711347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711353">fv</span><span class="op" id="5711355">.</span><span class="ident" id="5711356">Set</span><span class="op" id="5711359">(</span><span class="ident" id="5711360">reflect</span><span class="op" id="5711367">.</span><span class="ident" id="5711368">ValueOf</span><span class="op" id="5711375">(</span><span class="ident" id="5711376">start</span><span class="op" id="5711381">.</span><span class="ident" id="5711382">Name</span><span class="op" id="5711386">)</span><span class="op" id="5711387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711392">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5711401">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5711425">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711498">for</span>&nbsp;<span class="ident" id="5711502">i</span>&nbsp;<span class="op" id="5711504">:=</span>&nbsp;<span class="keyword" id="5711507">range</span>&nbsp;<span class="ident" id="5711513">tinfo</span><span class="op" id="5711518">.</span><span class="ident" id="5711519">fields</span>&nbsp;<span class="op" id="5711526">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711531">finfo</span>&nbsp;<span class="op" id="5711537">:=</span>&nbsp;<span class="op" id="5711540">&amp;</span><span class="ident" id="5711541">tinfo</span><span class="op" id="5711546">.</span><span class="ident" id="5711547">fields</span><span class="op" id="5711553">[</span><span class="ident" id="5711554">i</span><span class="op" id="5711555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711560">switch</span>&nbsp;<span class="ident" id="5711567">finfo</span><span class="op" id="5711572">.</span><span class="ident" id="5711573">flags</span>&nbsp;<span class="op" id="5711579">&amp;</span>&nbsp;<span class="ident" id="5711581">fMode</span>&nbsp;<span class="op" id="5711587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711592">case</span>&nbsp;<span class="ident" id="5711597">fAttr</span><span class="op" id="5711602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711608">strv</span>&nbsp;<span class="op" id="5711613">:=</span>&nbsp;<span class="ident" id="5711616">finfo</span><span class="op" id="5711621">.</span><span class="ident" id="5711622">value</span><span class="op" id="5711627">(</span><span class="ident" id="5711628">sv</span><span class="op" id="5711630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5711636">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711663">for</span>&nbsp;<span class="ident" id="5711667">_</span><span class="op" id="5711668">,</span>&nbsp;<span class="ident" id="5711670">a</span>&nbsp;<span class="op" id="5711672">:=</span>&nbsp;<span class="keyword" id="5711675">range</span>&nbsp;<span class="ident" id="5711681">start</span><span class="op" id="5711686">.</span><span class="ident" id="5711687">Attr</span>&nbsp;<span class="op" id="5711692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711699">if</span>&nbsp;<span class="ident" id="5711702">a</span><span class="op" id="5711703">.</span><span class="ident" id="5711704">Name</span><span class="op" id="5711708">.</span><span class="ident" id="5711709">Local</span>&nbsp;<span class="op" id="5711715">==</span>&nbsp;<span class="ident" id="5711718">finfo</span><span class="op" id="5711723">.</span><span class="ident" id="5711724">name</span>&nbsp;<span class="op" id="5711729">&amp;&amp;</span>&nbsp;<span class="op" id="5711732">(</span><span class="ident" id="5711733">finfo</span><span class="op" id="5711738">.</span><span class="ident" id="5711739">xmlns</span>&nbsp;<span class="op" id="5711745">==</span>&nbsp;<span class="string" id="5711748">&#34;&#34;</span>&nbsp;<span class="op" id="5711751">||</span>&nbsp;<span class="ident" id="5711754">finfo</span><span class="op" id="5711759">.</span><span class="ident" id="5711760">xmlns</span>&nbsp;<span class="op" id="5711766">==</span>&nbsp;<span class="ident" id="5711769">a</span><span class="op" id="5711770">.</span><span class="ident" id="5711771">Name</span><span class="op" id="5711775">.</span><span class="ident" id="5711776">Space</span><span class="op" id="5711781">)</span>&nbsp;<span class="op" id="5711783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711791">if</span>&nbsp;<span class="ident" id="5711794">err</span>&nbsp;<span class="op" id="5711798">:=</span>&nbsp;<span class="ident" id="5711801">p</span><span class="op" id="5711802">.</span><span class="ident" id="5711803">unmarshalAttr</span><span class="op" id="5711816">(</span><span class="ident" id="5711817">strv</span><span class="op" id="5711821">,</span>&nbsp;<span class="ident" id="5711823">a</span><span class="op" id="5711824">)</span><span class="op" id="5711825">;</span>&nbsp;<span class="ident" id="5711827">err</span>&nbsp;<span class="op" id="5711831">!=</span>&nbsp;<span class="ident" id="5711834">nil</span>&nbsp;<span class="op" id="5711838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711847">return</span>&nbsp;<span class="ident" id="5711854">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711864">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711872">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711895">case</span>&nbsp;<span class="ident" id="5711900">fCharData</span><span class="op" id="5711909">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711915">if</span>&nbsp;<span class="op" id="5711918">!</span><span class="ident" id="5711919">saveData</span><span class="op" id="5711927">.</span><span class="ident" id="5711928">IsValid</span><span class="op" id="5711935">(</span><span class="op" id="5711936">)</span>&nbsp;<span class="op" id="5711938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5711945">saveData</span>&nbsp;<span class="op" id="5711954">=</span>&nbsp;<span class="ident" id="5711956">finfo</span><span class="op" id="5711961">.</span><span class="ident" id="5711962">value</span><span class="op" id="5711967">(</span><span class="ident" id="5711968">sv</span><span class="op" id="5711970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5711976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5711982">case</span>&nbsp;<span class="ident" id="5711987">fComment</span><span class="op" id="5711995">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712001">if</span>&nbsp;<span class="op" id="5712004">!</span><span class="ident" id="5712005">saveComment</span><span class="op" id="5712016">.</span><span class="ident" id="5712017">IsValid</span><span class="op" id="5712024">(</span><span class="op" id="5712025">)</span>&nbsp;<span class="op" id="5712027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712034">saveComment</span>&nbsp;<span class="op" id="5712046">=</span>&nbsp;<span class="ident" id="5712048">finfo</span><span class="op" id="5712053">.</span><span class="ident" id="5712054">value</span><span class="op" id="5712059">(</span><span class="ident" id="5712060">sv</span><span class="op" id="5712062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712074">case</span>&nbsp;<span class="ident" id="5712079">fAny</span><span class="op" id="5712083">,</span>&nbsp;<span class="ident" id="5712085">fAny</span>&nbsp;<span class="op" id="5712090">|</span>&nbsp;<span class="ident" id="5712092">fElement</span><span class="op" id="5712100">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712106">if</span>&nbsp;<span class="op" id="5712109">!</span><span class="ident" id="5712110">saveAny</span><span class="op" id="5712117">.</span><span class="ident" id="5712118">IsValid</span><span class="op" id="5712125">(</span><span class="op" id="5712126">)</span>&nbsp;<span class="op" id="5712128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712135">saveAny</span>&nbsp;<span class="op" id="5712143">=</span>&nbsp;<span class="ident" id="5712145">finfo</span><span class="op" id="5712150">.</span><span class="ident" id="5712151">value</span><span class="op" id="5712156">(</span><span class="ident" id="5712157">sv</span><span class="op" id="5712159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712171">case</span>&nbsp;<span class="ident" id="5712176">fInnerXml</span><span class="op" id="5712185">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712191">if</span>&nbsp;<span class="op" id="5712194">!</span><span class="ident" id="5712195">saveXML</span><span class="op" id="5712202">.</span><span class="ident" id="5712203">IsValid</span><span class="op" id="5712210">(</span><span class="op" id="5712211">)</span>&nbsp;<span class="op" id="5712213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712220">saveXML</span>&nbsp;<span class="op" id="5712228">=</span>&nbsp;<span class="ident" id="5712230">finfo</span><span class="op" id="5712235">.</span><span class="ident" id="5712236">value</span><span class="op" id="5712241">(</span><span class="ident" id="5712242">sv</span><span class="op" id="5712244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712251">if</span>&nbsp;<span class="ident" id="5712254">p</span><span class="op" id="5712255">.</span><span class="ident" id="5712256">saved</span>&nbsp;<span class="op" id="5712262">==</span>&nbsp;<span class="ident" id="5712265">nil</span>&nbsp;<span class="op" id="5712269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712277">saveXMLIndex</span>&nbsp;<span class="op" id="5712290">=</span>&nbsp;<span class="num" id="5712292">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712300">p</span><span class="op" id="5712301">.</span><span class="ident" id="5712302">saved</span>&nbsp;<span class="op" id="5712308">=</span>&nbsp;<span class="builtinfunc" id="5712310">new</span><span class="op" id="5712313">(</span><span class="ident" id="5712314">bytes</span><span class="op" id="5712319">.</span><span class="ident" id="5712320">Buffer</span><span class="op" id="5712326">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712333">}</span>&nbsp;<span class="keyword" id="5712335">else</span>&nbsp;<span class="op" id="5712340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712348">saveXMLIndex</span>&nbsp;<span class="op" id="5712361">=</span>&nbsp;<span class="ident" id="5712363">p</span><span class="op" id="5712364">.</span><span class="ident" id="5712365">savedOffset</span><span class="op" id="5712376">(</span><span class="op" id="5712377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712395">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5712406">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5712428">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="5712467">Loop</span><span class="op" id="5712471">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712474">for</span>&nbsp;<span class="op" id="5712478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712482">var</span>&nbsp;<span class="ident" id="5712486">savedOffset</span>&nbsp;<span class="builtintype" id="5712498">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712504">if</span>&nbsp;<span class="ident" id="5712507">saveXML</span><span class="op" id="5712514">.</span><span class="ident" id="5712515">IsValid</span><span class="op" id="5712522">(</span><span class="op" id="5712523">)</span>&nbsp;<span class="op" id="5712525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712530">savedOffset</span>&nbsp;<span class="op" id="5712542">=</span>&nbsp;<span class="ident" id="5712544">p</span><span class="op" id="5712545">.</span><span class="ident" id="5712546">savedOffset</span><span class="op" id="5712557">(</span><span class="op" id="5712558">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712566">tok</span><span class="op" id="5712569">,</span>&nbsp;<span class="ident" id="5712571">err</span>&nbsp;<span class="op" id="5712575">:=</span>&nbsp;<span class="ident" id="5712578">p</span><span class="op" id="5712579">.</span><span class="ident" id="5712580">Token</span><span class="op" id="5712585">(</span><span class="op" id="5712586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712590">if</span>&nbsp;<span class="ident" id="5712593">err</span>&nbsp;<span class="op" id="5712597">!=</span>&nbsp;<span class="ident" id="5712600">nil</span>&nbsp;<span class="op" id="5712604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712609">return</span>&nbsp;<span class="ident" id="5712616">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712622">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712626">switch</span>&nbsp;<span class="ident" id="5712633">t</span>&nbsp;<span class="op" id="5712635">:=</span>&nbsp;<span class="ident" id="5712638">tok</span><span class="op" id="5712641">.</span><span class="op" id="5712642">(</span><span class="keyword" id="5712643">type</span><span class="op" id="5712647">)</span>&nbsp;<span class="op" id="5712649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712653">case</span>&nbsp;<span class="ident" id="5712658">StartElement</span><span class="op" id="5712670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712675">consumed</span>&nbsp;<span class="op" id="5712684">:=</span>&nbsp;<span class="builtintype" id="5712687">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712696">if</span>&nbsp;<span class="ident" id="5712699">sv</span><span class="op" id="5712701">.</span><span class="ident" id="5712702">IsValid</span><span class="op" id="5712709">(</span><span class="op" id="5712710">)</span>&nbsp;<span class="op" id="5712712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712718">consumed</span><span class="op" id="5712726">,</span>&nbsp;<span class="ident" id="5712728">err</span>&nbsp;<span class="op" id="5712732">=</span>&nbsp;<span class="ident" id="5712734">p</span><span class="op" id="5712735">.</span><span class="ident" id="5712736">unmarshalPath</span><span class="op" id="5712749">(</span><span class="ident" id="5712750">tinfo</span><span class="op" id="5712755">,</span>&nbsp;<span class="ident" id="5712757">sv</span><span class="op" id="5712759">,</span>&nbsp;<span class="ident" id="5712761">nil</span><span class="op" id="5712764">,</span>&nbsp;<span class="op" id="5712766">&amp;</span><span class="ident" id="5712767">t</span><span class="op" id="5712768">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712774">if</span>&nbsp;<span class="ident" id="5712777">err</span>&nbsp;<span class="op" id="5712781">!=</span>&nbsp;<span class="ident" id="5712784">nil</span>&nbsp;<span class="op" id="5712788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712795">return</span>&nbsp;<span class="ident" id="5712802">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712816">if</span>&nbsp;<span class="op" id="5712819">!</span><span class="ident" id="5712820">consumed</span>&nbsp;<span class="op" id="5712829">&amp;&amp;</span>&nbsp;<span class="ident" id="5712832">saveAny</span><span class="op" id="5712839">.</span><span class="ident" id="5712840">IsValid</span><span class="op" id="5712847">(</span><span class="op" id="5712848">)</span>&nbsp;<span class="op" id="5712850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5712857">consumed</span>&nbsp;<span class="op" id="5712866">=</span>&nbsp;<span class="builtintype" id="5712868">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712878">if</span>&nbsp;<span class="ident" id="5712881">err</span>&nbsp;<span class="op" id="5712885">:=</span>&nbsp;<span class="ident" id="5712888">p</span><span class="op" id="5712889">.</span><span class="ident" id="5712890">unmarshal</span><span class="op" id="5712899">(</span><span class="ident" id="5712900">saveAny</span><span class="op" id="5712907">,</span>&nbsp;<span class="op" id="5712909">&amp;</span><span class="ident" id="5712910">t</span><span class="op" id="5712911">)</span><span class="op" id="5712912">;</span>&nbsp;<span class="ident" id="5712914">err</span>&nbsp;<span class="op" id="5712918">!=</span>&nbsp;<span class="ident" id="5712921">nil</span>&nbsp;<span class="op" id="5712925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712933">return</span>&nbsp;<span class="ident" id="5712940">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5712960">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712965">if</span>&nbsp;<span class="op" id="5712968">!</span><span class="ident" id="5712969">consumed</span>&nbsp;<span class="op" id="5712978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5712984">if</span>&nbsp;<span class="ident" id="5712987">err</span>&nbsp;<span class="op" id="5712991">:=</span>&nbsp;<span class="ident" id="5712994">p</span><span class="op" id="5712995">.</span><span class="ident" id="5712996">Skip</span><span class="op" id="5713000">(</span><span class="op" id="5713001">)</span><span class="op" id="5713002">;</span>&nbsp;<span class="ident" id="5713004">err</span>&nbsp;<span class="op" id="5713008">!=</span>&nbsp;<span class="ident" id="5713011">nil</span>&nbsp;<span class="op" id="5713015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713022">return</span>&nbsp;<span class="ident" id="5713029">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713042">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713047">case</span>&nbsp;<span class="ident" id="5713052">EndElement</span><span class="op" id="5713062">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713067">if</span>&nbsp;<span class="ident" id="5713070">saveXML</span><span class="op" id="5713077">.</span><span class="ident" id="5713078">IsValid</span><span class="op" id="5713085">(</span><span class="op" id="5713086">)</span>&nbsp;<span class="op" id="5713088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713094">saveXMLData</span>&nbsp;<span class="op" id="5713106">=</span>&nbsp;<span class="ident" id="5713108">p</span><span class="op" id="5713109">.</span><span class="ident" id="5713110">saved</span><span class="op" id="5713115">.</span><span class="ident" id="5713116">Bytes</span><span class="op" id="5713121">(</span><span class="op" id="5713122">)</span><span class="op" id="5713123">[</span><span class="ident" id="5713124">saveXMLIndex</span><span class="op" id="5713136">:</span><span class="ident" id="5713137">savedOffset</span><span class="op" id="5713148">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713154">if</span>&nbsp;<span class="ident" id="5713157">saveXMLIndex</span>&nbsp;<span class="op" id="5713170">==</span>&nbsp;<span class="num" id="5713173">0</span>&nbsp;<span class="op" id="5713175">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713182">p</span><span class="op" id="5713183">.</span><span class="ident" id="5713184">saved</span>&nbsp;<span class="op" id="5713190">=</span>&nbsp;<span class="ident" id="5713192">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713210">break</span>&nbsp;<span class="ident" id="5713216">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713224">case</span>&nbsp;<span class="ident" id="5713229">CharData</span><span class="op" id="5713237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713242">if</span>&nbsp;<span class="ident" id="5713245">saveData</span><span class="op" id="5713253">.</span><span class="ident" id="5713254">IsValid</span><span class="op" id="5713261">(</span><span class="op" id="5713262">)</span>&nbsp;<span class="op" id="5713264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713270">data</span>&nbsp;<span class="op" id="5713275">=</span>&nbsp;<span class="builtinfunc" id="5713277">append</span><span class="op" id="5713283">(</span><span class="ident" id="5713284">data</span><span class="op" id="5713288">,</span>&nbsp;<span class="ident" id="5713290">t</span><span class="op" id="5713291">...</span><span class="op" id="5713294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713304">case</span>&nbsp;<span class="ident" id="5713309">Comment</span><span class="op" id="5713316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713321">if</span>&nbsp;<span class="ident" id="5713324">saveComment</span><span class="op" id="5713335">.</span><span class="ident" id="5713336">IsValid</span><span class="op" id="5713343">(</span><span class="op" id="5713344">)</span>&nbsp;<span class="op" id="5713346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713352">comment</span>&nbsp;<span class="op" id="5713360">=</span>&nbsp;<span class="builtinfunc" id="5713362">append</span><span class="op" id="5713368">(</span><span class="ident" id="5713369">comment</span><span class="op" id="5713376">,</span>&nbsp;<span class="ident" id="5713378">t</span><span class="op" id="5713379">...</span><span class="op" id="5713382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713391">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713398">if</span>&nbsp;<span class="ident" id="5713401">saveData</span><span class="op" id="5713409">.</span><span class="ident" id="5713410">IsValid</span><span class="op" id="5713417">(</span><span class="op" id="5713418">)</span>&nbsp;<span class="op" id="5713420">&amp;&amp;</span>&nbsp;<span class="ident" id="5713423">saveData</span><span class="op" id="5713431">.</span><span class="ident" id="5713432">CanInterface</span><span class="op" id="5713444">(</span><span class="op" id="5713445">)</span>&nbsp;<span class="op" id="5713447">&amp;&amp;</span>&nbsp;<span class="ident" id="5713450">saveData</span><span class="op" id="5713458">.</span><span class="ident" id="5713459">Type</span><span class="op" id="5713463">(</span><span class="op" id="5713464">)</span><span class="op" id="5713465">.</span><span class="ident" id="5713466">Implements</span><span class="op" id="5713476">(</span><span class="ident" id="5713477">textUnmarshalerType</span><span class="op" id="5713496">)</span>&nbsp;<span class="op" id="5713498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713502">if</span>&nbsp;<span class="ident" id="5713505">err</span>&nbsp;<span class="op" id="5713509">:=</span>&nbsp;<span class="ident" id="5713512">saveData</span><span class="op" id="5713520">.</span><span class="ident" id="5713521">Interface</span><span class="op" id="5713530">(</span><span class="op" id="5713531">)</span><span class="op" id="5713532">.</span><span class="op" id="5713533">(</span><span class="ident" id="5713534">encoding</span><span class="op" id="5713542">.</span><span class="ident" id="5713543">TextUnmarshaler</span><span class="op" id="5713558">)</span><span class="op" id="5713559">.</span><span class="ident" id="5713560">UnmarshalText</span><span class="op" id="5713573">(</span><span class="ident" id="5713574">data</span><span class="op" id="5713578">)</span><span class="op" id="5713579">;</span>&nbsp;<span class="ident" id="5713581">err</span>&nbsp;<span class="op" id="5713585">!=</span>&nbsp;<span class="ident" id="5713588">nil</span>&nbsp;<span class="op" id="5713592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713597">return</span>&nbsp;<span class="ident" id="5713604">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713614">saveData</span>&nbsp;<span class="op" id="5713623">=</span>&nbsp;<span class="ident" id="5713625">reflect</span><span class="op" id="5713632">.</span><span class="ident" id="5713633">Value</span><span class="op" id="5713638">{</span><span class="op" id="5713639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713646">if</span>&nbsp;<span class="ident" id="5713649">saveData</span><span class="op" id="5713657">.</span><span class="ident" id="5713658">IsValid</span><span class="op" id="5713665">(</span><span class="op" id="5713666">)</span>&nbsp;<span class="op" id="5713668">&amp;&amp;</span>&nbsp;<span class="ident" id="5713671">saveData</span><span class="op" id="5713679">.</span><span class="ident" id="5713680">CanAddr</span><span class="op" id="5713687">(</span><span class="op" id="5713688">)</span>&nbsp;<span class="op" id="5713690">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713694">pv</span>&nbsp;<span class="op" id="5713697">:=</span>&nbsp;<span class="ident" id="5713700">saveData</span><span class="op" id="5713708">.</span><span class="ident" id="5713709">Addr</span><span class="op" id="5713713">(</span><span class="op" id="5713714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713718">if</span>&nbsp;<span class="ident" id="5713721">pv</span><span class="op" id="5713723">.</span><span class="ident" id="5713724">CanInterface</span><span class="op" id="5713736">(</span><span class="op" id="5713737">)</span>&nbsp;<span class="op" id="5713739">&amp;&amp;</span>&nbsp;<span class="ident" id="5713742">pv</span><span class="op" id="5713744">.</span><span class="ident" id="5713745">Type</span><span class="op" id="5713749">(</span><span class="op" id="5713750">)</span><span class="op" id="5713751">.</span><span class="ident" id="5713752">Implements</span><span class="op" id="5713762">(</span><span class="ident" id="5713763">textUnmarshalerType</span><span class="op" id="5713782">)</span>&nbsp;<span class="op" id="5713784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713789">if</span>&nbsp;<span class="ident" id="5713792">err</span>&nbsp;<span class="op" id="5713796">:=</span>&nbsp;<span class="ident" id="5713799">pv</span><span class="op" id="5713801">.</span><span class="ident" id="5713802">Interface</span><span class="op" id="5713811">(</span><span class="op" id="5713812">)</span><span class="op" id="5713813">.</span><span class="op" id="5713814">(</span><span class="ident" id="5713815">encoding</span><span class="op" id="5713823">.</span><span class="ident" id="5713824">TextUnmarshaler</span><span class="op" id="5713839">)</span><span class="op" id="5713840">.</span><span class="ident" id="5713841">UnmarshalText</span><span class="op" id="5713854">(</span><span class="ident" id="5713855">data</span><span class="op" id="5713859">)</span><span class="op" id="5713860">;</span>&nbsp;<span class="ident" id="5713862">err</span>&nbsp;<span class="op" id="5713866">!=</span>&nbsp;<span class="ident" id="5713869">nil</span>&nbsp;<span class="op" id="5713873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713879">return</span>&nbsp;<span class="ident" id="5713886">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713893">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5713898">saveData</span>&nbsp;<span class="op" id="5713907">=</span>&nbsp;<span class="ident" id="5713909">reflect</span><span class="op" id="5713916">.</span><span class="ident" id="5713917">Value</span><span class="op" id="5713922">{</span><span class="op" id="5713923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713934">if</span>&nbsp;<span class="ident" id="5713937">err</span>&nbsp;<span class="op" id="5713941">:=</span>&nbsp;<span class="ident" id="5713944">copyValue</span><span class="op" id="5713953">(</span><span class="ident" id="5713954">saveData</span><span class="op" id="5713962">,</span>&nbsp;<span class="ident" id="5713964">data</span><span class="op" id="5713968">)</span><span class="op" id="5713969">;</span>&nbsp;<span class="ident" id="5713971">err</span>&nbsp;<span class="op" id="5713975">!=</span>&nbsp;<span class="ident" id="5713978">nil</span>&nbsp;<span class="op" id="5713982">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5713986">return</span>&nbsp;<span class="ident" id="5713993">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5713998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714002">switch</span>&nbsp;<span class="ident" id="5714009">t</span>&nbsp;<span class="op" id="5714011">:=</span>&nbsp;<span class="ident" id="5714014">saveComment</span><span class="op" id="5714025">;</span>&nbsp;<span class="ident" id="5714027">t</span><span class="op" id="5714028">.</span><span class="ident" id="5714029">Kind</span><span class="op" id="5714033">(</span><span class="op" id="5714034">)</span>&nbsp;<span class="op" id="5714036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714039">case</span>&nbsp;<span class="ident" id="5714044">reflect</span><span class="op" id="5714051">.</span><span class="ident" id="5714052">String</span><span class="op" id="5714058">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714062">t</span><span class="op" id="5714063">.</span><span class="ident" id="5714064">SetString</span><span class="op" id="5714073">(</span><span class="builtintype" id="5714074">string</span><span class="op" id="5714080">(</span><span class="ident" id="5714081">comment</span><span class="op" id="5714088">)</span><span class="op" id="5714089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714092">case</span>&nbsp;<span class="ident" id="5714097">reflect</span><span class="op" id="5714104">.</span><span class="ident" id="5714105">Slice</span><span class="op" id="5714110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714114">t</span><span class="op" id="5714115">.</span><span class="ident" id="5714116">Set</span><span class="op" id="5714119">(</span><span class="ident" id="5714120">reflect</span><span class="op" id="5714127">.</span><span class="ident" id="5714128">ValueOf</span><span class="op" id="5714135">(</span><span class="ident" id="5714136">comment</span><span class="op" id="5714143">)</span><span class="op" id="5714144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5714147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714151">switch</span>&nbsp;<span class="ident" id="5714158">t</span>&nbsp;<span class="op" id="5714160">:=</span>&nbsp;<span class="ident" id="5714163">saveXML</span><span class="op" id="5714170">;</span>&nbsp;<span class="ident" id="5714172">t</span><span class="op" id="5714173">.</span><span class="ident" id="5714174">Kind</span><span class="op" id="5714178">(</span><span class="op" id="5714179">)</span>&nbsp;<span class="op" id="5714181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714184">case</span>&nbsp;<span class="ident" id="5714189">reflect</span><span class="op" id="5714196">.</span><span class="ident" id="5714197">String</span><span class="op" id="5714203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714207">t</span><span class="op" id="5714208">.</span><span class="ident" id="5714209">SetString</span><span class="op" id="5714218">(</span><span class="builtintype" id="5714219">string</span><span class="op" id="5714225">(</span><span class="ident" id="5714226">saveXMLData</span><span class="op" id="5714237">)</span><span class="op" id="5714238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714241">case</span>&nbsp;<span class="ident" id="5714246">reflect</span><span class="op" id="5714253">.</span><span class="ident" id="5714254">Slice</span><span class="op" id="5714259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714263">t</span><span class="op" id="5714264">.</span><span class="ident" id="5714265">Set</span><span class="op" id="5714268">(</span><span class="ident" id="5714269">reflect</span><span class="op" id="5714276">.</span><span class="ident" id="5714277">ValueOf</span><span class="op" id="5714284">(</span><span class="ident" id="5714285">saveXMLData</span><span class="op" id="5714296">)</span><span class="op" id="5714297">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5714300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714304">return</span>&nbsp;<span class="ident" id="5714311">nil</span><br>
<span class="lineno"></span><span class="op" id="5714315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5714318">func</span>&nbsp;<span class="ident" id="5714323">copyValue</span><span class="op" id="5714332">(</span><span class="ident" id="5714333">dst</span>&nbsp;<span class="ident" id="5714337">reflect</span><span class="op" id="5714344">.</span><span class="ident" id="5714345">Value</span><span class="op" id="5714350">,</span>&nbsp;<span class="ident" id="5714352">src</span>&nbsp;<span class="op" id="5714356">[</span><span class="op" id="5714357">]</span><span class="builtintype" id="5714358">byte</span><span class="op" id="5714362">)</span>&nbsp;<span class="op" id="5714364">(</span><span class="ident" id="5714365">err</span>&nbsp;<span class="builtintype" id="5714369">error</span><span class="op" id="5714374">)</span>&nbsp;<span class="op" id="5714376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714379">dst0</span>&nbsp;<span class="op" id="5714384">:=</span>&nbsp;<span class="ident" id="5714387">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714393">if</span>&nbsp;<span class="ident" id="5714396">dst</span><span class="op" id="5714399">.</span><span class="ident" id="5714400">Kind</span><span class="op" id="5714404">(</span><span class="op" id="5714405">)</span>&nbsp;<span class="op" id="5714407">==</span>&nbsp;<span class="ident" id="5714410">reflect</span><span class="op" id="5714417">.</span><span class="ident" id="5714418">Ptr</span>&nbsp;<span class="op" id="5714422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714426">if</span>&nbsp;<span class="ident" id="5714429">dst</span><span class="op" id="5714432">.</span><span class="ident" id="5714433">IsNil</span><span class="op" id="5714438">(</span><span class="op" id="5714439">)</span>&nbsp;<span class="op" id="5714441">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714446">dst</span><span class="op" id="5714449">.</span><span class="ident" id="5714450">Set</span><span class="op" id="5714453">(</span><span class="ident" id="5714454">reflect</span><span class="op" id="5714461">.</span><span class="ident" id="5714462">New</span><span class="op" id="5714465">(</span><span class="ident" id="5714466">dst</span><span class="op" id="5714469">.</span><span class="ident" id="5714470">Type</span><span class="op" id="5714474">(</span><span class="op" id="5714475">)</span><span class="op" id="5714476">.</span><span class="ident" id="5714477">Elem</span><span class="op" id="5714481">(</span><span class="op" id="5714482">)</span><span class="op" id="5714483">)</span><span class="op" id="5714484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5714488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714492">dst</span>&nbsp;<span class="op" id="5714496">=</span>&nbsp;<span class="ident" id="5714498">dst</span><span class="op" id="5714501">.</span><span class="ident" id="5714502">Elem</span><span class="op" id="5714506">(</span><span class="op" id="5714507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5714510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5714514">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714541">switch</span>&nbsp;<span class="ident" id="5714548">dst</span><span class="op" id="5714551">.</span><span class="ident" id="5714552">Kind</span><span class="op" id="5714556">(</span><span class="op" id="5714557">)</span>&nbsp;<span class="op" id="5714559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714562">case</span>&nbsp;<span class="ident" id="5714567">reflect</span><span class="op" id="5714574">.</span><span class="ident" id="5714575">Invalid</span><span class="op" id="5714582">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5714586">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714610">default</span><span class="op" id="5714617">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714621">return</span>&nbsp;<span class="ident" id="5714628">errors</span><span class="op" id="5714634">.</span><span class="ident" id="5714635">New</span><span class="op" id="5714638">(</span><span class="string" id="5714639">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="5714664">+</span>&nbsp;<span class="ident" id="5714666">dst0</span><span class="op" id="5714670">.</span><span class="ident" id="5714671">Type</span><span class="op" id="5714675">(</span><span class="op" id="5714676">)</span><span class="op" id="5714677">.</span><span class="ident" id="5714678">String</span><span class="op" id="5714684">(</span><span class="op" id="5714685">)</span><span class="op" id="5714686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714689">case</span>&nbsp;<span class="ident" id="5714694">reflect</span><span class="op" id="5714701">.</span><span class="ident" id="5714702">Int</span><span class="op" id="5714705">,</span>&nbsp;<span class="ident" id="5714707">reflect</span><span class="op" id="5714714">.</span><span class="ident" id="5714715">Int8</span><span class="op" id="5714719">,</span>&nbsp;<span class="ident" id="5714721">reflect</span><span class="op" id="5714728">.</span><span class="ident" id="5714729">Int16</span><span class="op" id="5714734">,</span>&nbsp;<span class="ident" id="5714736">reflect</span><span class="op" id="5714743">.</span><span class="ident" id="5714744">Int32</span><span class="op" id="5714749">,</span>&nbsp;<span class="ident" id="5714751">reflect</span><span class="op" id="5714758">.</span><span class="ident" id="5714759">Int64</span><span class="op" id="5714764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714768">itmp</span><span class="op" id="5714772">,</span>&nbsp;<span class="ident" id="5714774">err</span>&nbsp;<span class="op" id="5714778">:=</span>&nbsp;<span class="ident" id="5714781">strconv</span><span class="op" id="5714788">.</span><span class="ident" id="5714789">ParseInt</span><span class="op" id="5714797">(</span><span class="builtintype" id="5714798">string</span><span class="op" id="5714804">(</span><span class="ident" id="5714805">src</span><span class="op" id="5714808">)</span><span class="op" id="5714809">,</span>&nbsp;<span class="num" id="5714811">10</span><span class="op" id="5714813">,</span>&nbsp;<span class="ident" id="5714815">dst</span><span class="op" id="5714818">.</span><span class="ident" id="5714819">Type</span><span class="op" id="5714823">(</span><span class="op" id="5714824">)</span><span class="op" id="5714825">.</span><span class="ident" id="5714826">Bits</span><span class="op" id="5714830">(</span><span class="op" id="5714831">)</span><span class="op" id="5714832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714836">if</span>&nbsp;<span class="ident" id="5714839">err</span>&nbsp;<span class="op" id="5714843">!=</span>&nbsp;<span class="ident" id="5714846">nil</span>&nbsp;<span class="op" id="5714850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714855">return</span>&nbsp;<span class="ident" id="5714862">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5714868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714872">dst</span><span class="op" id="5714875">.</span><span class="ident" id="5714876">SetInt</span><span class="op" id="5714882">(</span><span class="ident" id="5714883">itmp</span><span class="op" id="5714887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5714890">case</span>&nbsp;<span class="ident" id="5714895">reflect</span><span class="op" id="5714902">.</span><span class="ident" id="5714903">Uint</span><span class="op" id="5714907">,</span>&nbsp;<span class="ident" id="5714909">reflect</span><span class="op" id="5714916">.</span><span class="ident" id="5714917">Uint8</span><span class="op" id="5714922">,</span>&nbsp;<span class="ident" id="5714924">reflect</span><span class="op" id="5714931">.</span><span class="ident" id="5714932">Uint16</span><span class="op" id="5714938">,</span>&nbsp;<span class="ident" id="5714940">reflect</span><span class="op" id="5714947">.</span><span class="ident" id="5714948">Uint32</span><span class="op" id="5714954">,</span>&nbsp;<span class="ident" id="5714956">reflect</span><span class="op" id="5714963">.</span><span class="ident" id="5714964">Uint64</span><span class="op" id="5714970">,</span>&nbsp;<span class="ident" id="5714972">reflect</span><span class="op" id="5714979">.</span><span class="ident" id="5714980">Uintptr</span><span class="op" id="5714987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5714991">utmp</span><span class="op" id="5714995">,</span>&nbsp;<span class="ident" id="5714997">err</span>&nbsp;<span class="op" id="5715001">:=</span>&nbsp;<span class="ident" id="5715004">strconv</span><span class="op" id="5715011">.</span><span class="ident" id="5715012">ParseUint</span><span class="op" id="5715021">(</span><span class="builtintype" id="5715022">string</span><span class="op" id="5715028">(</span><span class="ident" id="5715029">src</span><span class="op" id="5715032">)</span><span class="op" id="5715033">,</span>&nbsp;<span class="num" id="5715035">10</span><span class="op" id="5715037">,</span>&nbsp;<span class="ident" id="5715039">dst</span><span class="op" id="5715042">.</span><span class="ident" id="5715043">Type</span><span class="op" id="5715047">(</span><span class="op" id="5715048">)</span><span class="op" id="5715049">.</span><span class="ident" id="5715050">Bits</span><span class="op" id="5715054">(</span><span class="op" id="5715055">)</span><span class="op" id="5715056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715060">if</span>&nbsp;<span class="ident" id="5715063">err</span>&nbsp;<span class="op" id="5715067">!=</span>&nbsp;<span class="ident" id="5715070">nil</span>&nbsp;<span class="op" id="5715074">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715079">return</span>&nbsp;<span class="ident" id="5715086">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5715092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715096">dst</span><span class="op" id="5715099">.</span><span class="ident" id="5715100">SetUint</span><span class="op" id="5715107">(</span><span class="ident" id="5715108">utmp</span><span class="op" id="5715112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715115">case</span>&nbsp;<span class="ident" id="5715120">reflect</span><span class="op" id="5715127">.</span><span class="ident" id="5715128">Float32</span><span class="op" id="5715135">,</span>&nbsp;<span class="ident" id="5715137">reflect</span><span class="op" id="5715144">.</span><span class="ident" id="5715145">Float64</span><span class="op" id="5715152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715156">ftmp</span><span class="op" id="5715160">,</span>&nbsp;<span class="ident" id="5715162">err</span>&nbsp;<span class="op" id="5715166">:=</span>&nbsp;<span class="ident" id="5715169">strconv</span><span class="op" id="5715176">.</span><span class="ident" id="5715177">ParseFloat</span><span class="op" id="5715187">(</span><span class="builtintype" id="5715188">string</span><span class="op" id="5715194">(</span><span class="ident" id="5715195">src</span><span class="op" id="5715198">)</span><span class="op" id="5715199">,</span>&nbsp;<span class="ident" id="5715201">dst</span><span class="op" id="5715204">.</span><span class="ident" id="5715205">Type</span><span class="op" id="5715209">(</span><span class="op" id="5715210">)</span><span class="op" id="5715211">.</span><span class="ident" id="5715212">Bits</span><span class="op" id="5715216">(</span><span class="op" id="5715217">)</span><span class="op" id="5715218">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715222">if</span>&nbsp;<span class="ident" id="5715225">err</span>&nbsp;<span class="op" id="5715229">!=</span>&nbsp;<span class="ident" id="5715232">nil</span>&nbsp;<span class="op" id="5715236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715241">return</span>&nbsp;<span class="ident" id="5715248">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5715254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715258">dst</span><span class="op" id="5715261">.</span><span class="ident" id="5715262">SetFloat</span><span class="op" id="5715270">(</span><span class="ident" id="5715271">ftmp</span><span class="op" id="5715275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715278">case</span>&nbsp;<span class="ident" id="5715283">reflect</span><span class="op" id="5715290">.</span><span class="ident" id="5715291">Bool</span><span class="op" id="5715295">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715299">value</span><span class="op" id="5715304">,</span>&nbsp;<span class="ident" id="5715306">err</span>&nbsp;<span class="op" id="5715310">:=</span>&nbsp;<span class="ident" id="5715313">strconv</span><span class="op" id="5715320">.</span><span class="ident" id="5715321">ParseBool</span><span class="op" id="5715330">(</span><span class="ident" id="5715331">strings</span><span class="op" id="5715338">.</span><span class="ident" id="5715339">TrimSpace</span><span class="op" id="5715348">(</span><span class="builtintype" id="5715349">string</span><span class="op" id="5715355">(</span><span class="ident" id="5715356">src</span><span class="op" id="5715359">)</span><span class="op" id="5715360">)</span><span class="op" id="5715361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715365">if</span>&nbsp;<span class="ident" id="5715368">err</span>&nbsp;<span class="op" id="5715372">!=</span>&nbsp;<span class="ident" id="5715375">nil</span>&nbsp;<span class="op" id="5715379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715384">return</span>&nbsp;<span class="ident" id="5715391">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5715397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715401">dst</span><span class="op" id="5715404">.</span><span class="ident" id="5715405">SetBool</span><span class="op" id="5715412">(</span><span class="ident" id="5715413">value</span><span class="op" id="5715418">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715421">case</span>&nbsp;<span class="ident" id="5715426">reflect</span><span class="op" id="5715433">.</span><span class="ident" id="5715434">String</span><span class="op" id="5715440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715444">dst</span><span class="op" id="5715447">.</span><span class="ident" id="5715448">SetString</span><span class="op" id="5715457">(</span><span class="builtintype" id="5715458">string</span><span class="op" id="5715464">(</span><span class="ident" id="5715465">src</span><span class="op" id="5715468">)</span><span class="op" id="5715469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715472">case</span>&nbsp;<span class="ident" id="5715477">reflect</span><span class="op" id="5715484">.</span><span class="ident" id="5715485">Slice</span><span class="op" id="5715490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715494">if</span>&nbsp;<span class="builtinfunc" id="5715497">len</span><span class="op" id="5715500">(</span><span class="ident" id="5715501">src</span><span class="op" id="5715504">)</span>&nbsp;<span class="op" id="5715506">==</span>&nbsp;<span class="num" id="5715509">0</span>&nbsp;<span class="op" id="5715511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5715516">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715547">src</span>&nbsp;<span class="op" id="5715551">=</span>&nbsp;<span class="op" id="5715553">[</span><span class="op" id="5715554">]</span><span class="builtintype" id="5715555">byte</span><span class="op" id="5715559">{</span><span class="op" id="5715560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5715564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5715568">dst</span><span class="op" id="5715571">.</span><span class="ident" id="5715572">SetBytes</span><span class="op" id="5715580">(</span><span class="ident" id="5715581">src</span><span class="op" id="5715584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5715587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5715590">return</span>&nbsp;<span class="ident" id="5715597">nil</span><br>
<span class="lineno">605</span><span class="op" id="5715601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5715604">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="5715668">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="5715707">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="5715776">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5715843">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="5715910">func</span>&nbsp;<span class="op" id="5715915">(</span><span class="ident" id="5715916">p</span>&nbsp;<span class="op" id="5715918">*</span><span class="ident" id="5715919">Decoder</span><span class="op" id="5715926">)</span>&nbsp;<span class="ident" id="5715928">unmarshalPath</span><span class="op" id="5715941">(</span><span class="ident" id="5715942">tinfo</span>&nbsp;<span class="op" id="5715948">*</span><span class="ident" id="5715949">typeInfo</span><span class="op" id="5715957">,</span>&nbsp;<span class="ident" id="5715959">sv</span>&nbsp;<span class="ident" id="5715962">reflect</span><span class="op" id="5715969">.</span><span class="ident" id="5715970">Value</span><span class="op" id="5715975">,</span>&nbsp;<span class="ident" id="5715977">parents</span>&nbsp;<span class="op" id="5715985">[</span><span class="op" id="5715986">]</span><span class="builtintype" id="5715987">string</span><span class="op" id="5715993">,</span>&nbsp;<span class="ident" id="5715995">start</span>&nbsp;<span class="op" id="5716001">*</span><span class="ident" id="5716002">StartElement</span><span class="op" id="5716014">)</span>&nbsp;<span class="op" id="5716016">(</span><span class="ident" id="5716017">consumed</span>&nbsp;<span class="builtintype" id="5716026">bool</span><span class="op" id="5716030">,</span>&nbsp;<span class="ident" id="5716032">err</span>&nbsp;<span class="builtintype" id="5716036">error</span><span class="op" id="5716041">)</span>&nbsp;<span class="op" id="5716043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5716046">recurse</span>&nbsp;<span class="op" id="5716054">:=</span>&nbsp;<span class="builtintype" id="5716057">false</span><br>
<span class="lineno"></span><span class="ident" id="5716063">Loop</span><span class="op" id="5716067">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716070">for</span>&nbsp;<span class="ident" id="5716074">i</span>&nbsp;<span class="op" id="5716076">:=</span>&nbsp;<span class="keyword" id="5716079">range</span>&nbsp;<span class="ident" id="5716085">tinfo</span><span class="op" id="5716090">.</span><span class="ident" id="5716091">fields</span>&nbsp;<span class="op" id="5716098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5716102">finfo</span>&nbsp;<span class="op" id="5716108">:=</span>&nbsp;<span class="op" id="5716111">&amp;</span><span class="ident" id="5716112">tinfo</span><span class="op" id="5716117">.</span><span class="ident" id="5716118">fields</span><span class="op" id="5716124">[</span><span class="ident" id="5716125">i</span><span class="op" id="5716126">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716130">if</span>&nbsp;<span class="ident" id="5716133">finfo</span><span class="op" id="5716138">.</span><span class="ident" id="5716139">flags</span><span class="op" id="5716144">&amp;</span><span class="ident" id="5716145">fElement</span>&nbsp;<span class="op" id="5716154">==</span>&nbsp;<span class="num" id="5716157">0</span>&nbsp;<span class="op" id="5716159">||</span>&nbsp;<span class="builtinfunc" id="5716162">len</span><span class="op" id="5716165">(</span><span class="ident" id="5716166">finfo</span><span class="op" id="5716171">.</span><span class="ident" id="5716172">parents</span><span class="op" id="5716179">)</span>&nbsp;<span class="op" id="5716181">&lt;</span>&nbsp;<span class="builtinfunc" id="5716183">len</span><span class="op" id="5716186">(</span><span class="ident" id="5716187">parents</span><span class="op" id="5716194">)</span>&nbsp;<span class="op" id="5716196">||</span>&nbsp;<span class="ident" id="5716199">finfo</span><span class="op" id="5716204">.</span><span class="ident" id="5716205">xmlns</span>&nbsp;<span class="op" id="5716211">!=</span>&nbsp;<span class="string" id="5716214">&#34;&#34;</span>&nbsp;<span class="op" id="5716217">&amp;&amp;</span>&nbsp;<span class="ident" id="5716220">finfo</span><span class="op" id="5716225">.</span><span class="ident" id="5716226">xmlns</span>&nbsp;<span class="op" id="5716232">!=</span>&nbsp;<span class="ident" id="5716235">start</span><span class="op" id="5716240">.</span><span class="ident" id="5716241">Name</span><span class="op" id="5716245">.</span><span class="ident" id="5716246">Space</span>&nbsp;<span class="op" id="5716252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716257">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716268">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716272">for</span>&nbsp;<span class="ident" id="5716276">j</span>&nbsp;<span class="op" id="5716278">:=</span>&nbsp;<span class="keyword" id="5716281">range</span>&nbsp;<span class="ident" id="5716287">parents</span>&nbsp;<span class="op" id="5716295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716300">if</span>&nbsp;<span class="ident" id="5716303">parents</span><span class="op" id="5716310">[</span><span class="ident" id="5716311">j</span><span class="op" id="5716312">]</span>&nbsp;<span class="op" id="5716314">!=</span>&nbsp;<span class="ident" id="5716317">finfo</span><span class="op" id="5716322">.</span><span class="ident" id="5716323">parents</span><span class="op" id="5716330">[</span><span class="ident" id="5716331">j</span><span class="op" id="5716332">]</span>&nbsp;<span class="op" id="5716334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716340">continue</span>&nbsp;<span class="ident" id="5716349">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716361">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716365">if</span>&nbsp;<span class="builtinfunc" id="5716368">len</span><span class="op" id="5716371">(</span><span class="ident" id="5716372">finfo</span><span class="op" id="5716377">.</span><span class="ident" id="5716378">parents</span><span class="op" id="5716385">)</span>&nbsp;<span class="op" id="5716387">==</span>&nbsp;<span class="builtinfunc" id="5716390">len</span><span class="op" id="5716393">(</span><span class="ident" id="5716394">parents</span><span class="op" id="5716401">)</span>&nbsp;<span class="op" id="5716403">&amp;&amp;</span>&nbsp;<span class="ident" id="5716406">finfo</span><span class="op" id="5716411">.</span><span class="ident" id="5716412">name</span>&nbsp;<span class="op" id="5716417">==</span>&nbsp;<span class="ident" id="5716420">start</span><span class="op" id="5716425">.</span><span class="ident" id="5716426">Name</span><span class="op" id="5716430">.</span><span class="ident" id="5716431">Local</span>&nbsp;<span class="op" id="5716437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716442">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716491">return</span>&nbsp;<span class="builtintype" id="5716498">true</span><span class="op" id="5716502">,</span>&nbsp;<span class="ident" id="5716504">p</span><span class="op" id="5716505">.</span><span class="ident" id="5716506">unmarshal</span><span class="op" id="5716515">(</span><span class="ident" id="5716516">finfo</span><span class="op" id="5716521">.</span><span class="ident" id="5716522">value</span><span class="op" id="5716527">(</span><span class="ident" id="5716528">sv</span><span class="op" id="5716530">)</span><span class="op" id="5716531">,</span>&nbsp;<span class="ident" id="5716533">start</span><span class="op" id="5716538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716546">if</span>&nbsp;<span class="builtinfunc" id="5716549">len</span><span class="op" id="5716552">(</span><span class="ident" id="5716553">finfo</span><span class="op" id="5716558">.</span><span class="ident" id="5716559">parents</span><span class="op" id="5716566">)</span>&nbsp;<span class="op" id="5716568">&gt;</span>&nbsp;<span class="builtinfunc" id="5716570">len</span><span class="op" id="5716573">(</span><span class="ident" id="5716574">parents</span><span class="op" id="5716581">)</span>&nbsp;<span class="op" id="5716583">&amp;&amp;</span>&nbsp;<span class="ident" id="5716586">finfo</span><span class="op" id="5716591">.</span><span class="ident" id="5716592">parents</span><span class="op" id="5716599">[</span><span class="builtinfunc" id="5716600">len</span><span class="op" id="5716603">(</span><span class="ident" id="5716604">parents</span><span class="op" id="5716611">)</span><span class="op" id="5716612">]</span>&nbsp;<span class="op" id="5716614">==</span>&nbsp;<span class="ident" id="5716617">start</span><span class="op" id="5716622">.</span><span class="ident" id="5716623">Name</span><span class="op" id="5716627">.</span><span class="ident" id="5716628">Local</span>&nbsp;<span class="op" id="5716634">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716639">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716692">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716748">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5716789">recurse</span>&nbsp;<span class="op" id="5716797">=</span>&nbsp;<span class="builtintype" id="5716799">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716808">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716856">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5716889">parents</span>&nbsp;<span class="op" id="5716897">=</span>&nbsp;<span class="ident" id="5716899">finfo</span><span class="op" id="5716904">.</span><span class="ident" id="5716905">parents</span><span class="op" id="5716912">[</span><span class="op" id="5716913">:</span><span class="builtinfunc" id="5716914">len</span><span class="op" id="5716917">(</span><span class="ident" id="5716918">parents</span><span class="op" id="5716925">)</span><span class="op" id="5716926">+</span><span class="num" id="5716927">1</span><span class="op" id="5716928">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716933">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716941">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5716944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5716947">if</span>&nbsp;<span class="op" id="5716950">!</span><span class="ident" id="5716951">recurse</span>&nbsp;<span class="op" id="5716959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5716963">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717007">return</span>&nbsp;<span class="builtintype" id="5717014">false</span><span class="op" id="5717019">,</span>&nbsp;<span class="ident" id="5717021">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717026">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5717029">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5717091">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5717152">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717200">for</span>&nbsp;<span class="op" id="5717204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717208">var</span>&nbsp;<span class="ident" id="5717212">tok</span>&nbsp;<span class="ident" id="5717216">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5717224">tok</span><span class="op" id="5717227">,</span>&nbsp;<span class="ident" id="5717229">err</span>&nbsp;<span class="op" id="5717233">=</span>&nbsp;<span class="ident" id="5717235">p</span><span class="op" id="5717236">.</span><span class="ident" id="5717237">Token</span><span class="op" id="5717242">(</span><span class="op" id="5717243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717247">if</span>&nbsp;<span class="ident" id="5717250">err</span>&nbsp;<span class="op" id="5717254">!=</span>&nbsp;<span class="ident" id="5717257">nil</span>&nbsp;<span class="op" id="5717261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717266">return</span>&nbsp;<span class="builtintype" id="5717273">true</span><span class="op" id="5717277">,</span>&nbsp;<span class="ident" id="5717279">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717289">switch</span>&nbsp;<span class="ident" id="5717296">t</span>&nbsp;<span class="op" id="5717298">:=</span>&nbsp;<span class="ident" id="5717301">tok</span><span class="op" id="5717304">.</span><span class="op" id="5717305">(</span><span class="keyword" id="5717306">type</span><span class="op" id="5717310">)</span>&nbsp;<span class="op" id="5717312">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717316">case</span>&nbsp;<span class="ident" id="5717321">StartElement</span><span class="op" id="5717333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5717338">consumed2</span><span class="op" id="5717347">,</span>&nbsp;<span class="ident" id="5717349">err</span>&nbsp;<span class="op" id="5717353">:=</span>&nbsp;<span class="ident" id="5717356">p</span><span class="op" id="5717357">.</span><span class="ident" id="5717358">unmarshalPath</span><span class="op" id="5717371">(</span><span class="ident" id="5717372">tinfo</span><span class="op" id="5717377">,</span>&nbsp;<span class="ident" id="5717379">sv</span><span class="op" id="5717381">,</span>&nbsp;<span class="ident" id="5717383">parents</span><span class="op" id="5717390">,</span>&nbsp;<span class="op" id="5717392">&amp;</span><span class="ident" id="5717393">t</span><span class="op" id="5717394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717399">if</span>&nbsp;<span class="ident" id="5717402">err</span>&nbsp;<span class="op" id="5717406">!=</span>&nbsp;<span class="ident" id="5717409">nil</span>&nbsp;<span class="op" id="5717413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717419">return</span>&nbsp;<span class="builtintype" id="5717426">true</span><span class="op" id="5717430">,</span>&nbsp;<span class="ident" id="5717432">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717439">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717444">if</span>&nbsp;<span class="op" id="5717447">!</span><span class="ident" id="5717448">consumed2</span>&nbsp;<span class="op" id="5717458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717464">if</span>&nbsp;<span class="ident" id="5717467">err</span>&nbsp;<span class="op" id="5717471">:=</span>&nbsp;<span class="ident" id="5717474">p</span><span class="op" id="5717475">.</span><span class="ident" id="5717476">Skip</span><span class="op" id="5717480">(</span><span class="op" id="5717481">)</span><span class="op" id="5717482">;</span>&nbsp;<span class="ident" id="5717484">err</span>&nbsp;<span class="op" id="5717488">!=</span>&nbsp;<span class="ident" id="5717491">nil</span>&nbsp;<span class="op" id="5717495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717502">return</span>&nbsp;<span class="builtintype" id="5717509">true</span><span class="op" id="5717513">,</span>&nbsp;<span class="ident" id="5717515">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717528">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717532">case</span>&nbsp;<span class="ident" id="5717537">EndElement</span><span class="op" id="5717547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717552">return</span>&nbsp;<span class="builtintype" id="5717559">true</span><span class="op" id="5717563">,</span>&nbsp;<span class="ident" id="5717565">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5717574">}</span><br>
<span class="lineno"></span><span class="op" id="5717576">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5717579">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="5717638">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="5717698">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5717766">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="5717793">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5717857">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="5717923">func</span>&nbsp;<span class="op" id="5717928">(</span><span class="ident" id="5717929">d</span>&nbsp;<span class="op" id="5717931">*</span><span class="ident" id="5717932">Decoder</span><span class="op" id="5717939">)</span>&nbsp;<span class="ident" id="5717941">Skip</span><span class="op" id="5717945">(</span><span class="op" id="5717946">)</span>&nbsp;<span class="builtintype" id="5717948">error</span>&nbsp;<span class="op" id="5717954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717957">for</span>&nbsp;<span class="op" id="5717961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5717965">tok</span><span class="op" id="5717968">,</span>&nbsp;<span class="ident" id="5717970">err</span>&nbsp;<span class="op" id="5717974">:=</span>&nbsp;<span class="ident" id="5717977">d</span><span class="op" id="5717978">.</span><span class="ident" id="5717979">Token</span><span class="op" id="5717984">(</span><span class="op" id="5717985">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5717989">if</span>&nbsp;<span class="ident" id="5717992">err</span>&nbsp;<span class="op" id="5717996">!=</span>&nbsp;<span class="ident" id="5717999">nil</span>&nbsp;<span class="op" id="5718003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718008">return</span>&nbsp;<span class="ident" id="5718015">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5718021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718025">switch</span>&nbsp;<span class="ident" id="5718032">tok</span><span class="op" id="5718035">.</span><span class="op" id="5718036">(</span><span class="keyword" id="5718037">type</span><span class="op" id="5718041">)</span>&nbsp;<span class="op" id="5718043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718047">case</span>&nbsp;<span class="ident" id="5718052">StartElement</span><span class="op" id="5718064">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718069">if</span>&nbsp;<span class="ident" id="5718072">err</span>&nbsp;<span class="op" id="5718076">:=</span>&nbsp;<span class="ident" id="5718079">d</span><span class="op" id="5718080">.</span><span class="ident" id="5718081">Skip</span><span class="op" id="5718085">(</span><span class="op" id="5718086">)</span><span class="op" id="5718087">;</span>&nbsp;<span class="ident" id="5718089">err</span>&nbsp;<span class="op" id="5718093">!=</span>&nbsp;<span class="ident" id="5718096">nil</span>&nbsp;<span class="op" id="5718100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718106">return</span>&nbsp;<span class="ident" id="5718113">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5718120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718124">case</span>&nbsp;<span class="ident" id="5718129">EndElement</span><span class="op" id="5718139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5718144">return</span>&nbsp;<span class="ident" id="5718151">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5718157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5718160">}</span><br>
<span class="lineno"></span><span class="op" id="5718162">}</span>
</div>
</body>
</html>
