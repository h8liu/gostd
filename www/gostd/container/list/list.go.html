<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4522156">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4522211">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4522265">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4522316">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4522365">//</span><br>
<span class="lineno"></span><span class="comment" id="4522368">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4522416">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4522464">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4522497">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4522502">//</span><br>
<span class="lineno"></span><span class="keyword" id="4522505">package</span>&nbsp;<span class="ident" id="4522513">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4522519">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4522562">type</span>&nbsp;<span class="ident" id="4522567">Element</span>&nbsp;<span class="keyword" id="4522575">struct</span>&nbsp;<span class="op" id="4522582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522585">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522655">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522726">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522796">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522867">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522892">next</span><span class="op" id="4522896">,</span>&nbsp;<span class="ident" id="4522898">prev</span>&nbsp;<span class="op" id="4522903">*</span><span class="ident" id="4522904">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522914">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4522958">list</span>&nbsp;<span class="op" id="4522963">*</span><span class="ident" id="4522964">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4522971">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523011">Value</span>&nbsp;<span class="keyword" id="4523017">interface</span><span class="op" id="4523026">{</span><span class="op" id="4523027">}</span><br>
<span class="lineno"></span><span class="op" id="4523029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4523032">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4523078">func</span>&nbsp;<span class="op" id="4523083">(</span><span class="ident" id="4523084">e</span>&nbsp;<span class="op" id="4523086">*</span><span class="ident" id="4523087">Element</span><span class="op" id="4523094">)</span>&nbsp;<span class="ident" id="4523096">Next</span><span class="op" id="4523100">(</span><span class="op" id="4523101">)</span>&nbsp;<span class="op" id="4523103">*</span><span class="ident" id="4523104">Element</span>&nbsp;<span class="op" id="4523112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523115">if</span>&nbsp;<span class="ident" id="4523118">p</span>&nbsp;<span class="op" id="4523120">:=</span>&nbsp;<span class="ident" id="4523123">e</span><span class="op" id="4523124">.</span><span class="ident" id="4523125">next</span><span class="op" id="4523129">;</span>&nbsp;<span class="ident" id="4523131">e</span><span class="op" id="4523132">.</span><span class="ident" id="4523133">list</span>&nbsp;<span class="op" id="4523138">!=</span>&nbsp;<span class="ident" id="4523141">nil</span>&nbsp;<span class="op" id="4523145">&amp;&amp;</span>&nbsp;<span class="ident" id="4523148">p</span>&nbsp;<span class="op" id="4523150">!=</span>&nbsp;<span class="op" id="4523153">&amp;</span><span class="ident" id="4523154">e</span><span class="op" id="4523155">.</span><span class="ident" id="4523156">list</span><span class="op" id="4523160">.</span><span class="ident" id="4523161">root</span>&nbsp;<span class="op" id="4523166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523170">return</span>&nbsp;<span class="ident" id="4523177">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523180">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523183">return</span>&nbsp;<span class="ident" id="4523190">nil</span><br>
<span class="lineno"></span><span class="op" id="4523194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4523197">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4523247">func</span>&nbsp;<span class="op" id="4523252">(</span><span class="ident" id="4523253">e</span>&nbsp;<span class="op" id="4523255">*</span><span class="ident" id="4523256">Element</span><span class="op" id="4523263">)</span>&nbsp;<span class="ident" id="4523265">Prev</span><span class="op" id="4523269">(</span><span class="op" id="4523270">)</span>&nbsp;<span class="op" id="4523272">*</span><span class="ident" id="4523273">Element</span>&nbsp;<span class="op" id="4523281">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523284">if</span>&nbsp;<span class="ident" id="4523287">p</span>&nbsp;<span class="op" id="4523289">:=</span>&nbsp;<span class="ident" id="4523292">e</span><span class="op" id="4523293">.</span><span class="ident" id="4523294">prev</span><span class="op" id="4523298">;</span>&nbsp;<span class="ident" id="4523300">e</span><span class="op" id="4523301">.</span><span class="ident" id="4523302">list</span>&nbsp;<span class="op" id="4523307">!=</span>&nbsp;<span class="ident" id="4523310">nil</span>&nbsp;<span class="op" id="4523314">&amp;&amp;</span>&nbsp;<span class="ident" id="4523317">p</span>&nbsp;<span class="op" id="4523319">!=</span>&nbsp;<span class="op" id="4523322">&amp;</span><span class="ident" id="4523323">e</span><span class="op" id="4523324">.</span><span class="ident" id="4523325">list</span><span class="op" id="4523329">.</span><span class="ident" id="4523330">root</span>&nbsp;<span class="op" id="4523335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523339">return</span>&nbsp;<span class="ident" id="4523346">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4523349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523352">return</span>&nbsp;<span class="ident" id="4523359">nil</span><br>
<span class="lineno"></span><span class="op" id="4523363">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4523366">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4523407">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4523465">type</span>&nbsp;<span class="ident" id="4523470">List</span>&nbsp;<span class="keyword" id="4523475">struct</span>&nbsp;<span class="op" id="4523482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523485">root</span>&nbsp;<span class="ident" id="4523490">Element</span>&nbsp;<span class="comment" id="4523498">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4523571">len</span>&nbsp;&nbsp;<span class="builtintype" id="4523576">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4523584">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4523641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4523644">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4523682">func</span>&nbsp;<span class="op" id="4523687">(</span><span class="ident" id="4523688">l</span>&nbsp;<span class="op" id="4523690">*</span><span class="ident" id="4523691">List</span><span class="op" id="4523695">)</span>&nbsp;<span class="ident" id="4523697">Init</span><span class="op" id="4523701">(</span><span class="op" id="4523702">)</span>&nbsp;<span class="op" id="4523704">*</span><span class="ident" id="4523705">List</span>&nbsp;<span class="op" id="4523710">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523713">l</span><span class="op" id="4523714">.</span><span class="ident" id="4523715">root</span><span class="op" id="4523719">.</span><span class="ident" id="4523720">next</span>&nbsp;<span class="op" id="4523725">=</span>&nbsp;<span class="op" id="4523727">&amp;</span><span class="ident" id="4523728">l</span><span class="op" id="4523729">.</span><span class="ident" id="4523730">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523736">l</span><span class="op" id="4523737">.</span><span class="ident" id="4523738">root</span><span class="op" id="4523742">.</span><span class="ident" id="4523743">prev</span>&nbsp;<span class="op" id="4523748">=</span>&nbsp;<span class="op" id="4523750">&amp;</span><span class="ident" id="4523751">l</span><span class="op" id="4523752">.</span><span class="ident" id="4523753">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4523759">l</span><span class="op" id="4523760">.</span><span class="builtinfunc" id="4523761">len</span>&nbsp;<span class="op" id="4523765">=</span>&nbsp;<span class="num" id="4523767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4523770">return</span>&nbsp;<span class="ident" id="4523777">l</span><br>
<span class="lineno"></span><span class="op" id="4523779">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4523782">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4523818">func</span>&nbsp;<span class="ident" id="4523823">New</span><span class="op" id="4523826">(</span><span class="op" id="4523827">)</span>&nbsp;<span class="op" id="4523829">*</span><span class="ident" id="4523830">List</span>&nbsp;<span class="op" id="4523835">{</span>&nbsp;<span class="keyword" id="4523837">return</span>&nbsp;<span class="builtinfunc" id="4523844">new</span><span class="op" id="4523847">(</span><span class="ident" id="4523848">List</span><span class="op" id="4523852">)</span><span class="op" id="4523853">.</span><span class="ident" id="4523854">Init</span><span class="op" id="4523858">(</span><span class="op" id="4523859">)</span>&nbsp;<span class="op" id="4523861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4523864">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4523913">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4523940">func</span>&nbsp;<span class="op" id="4523945">(</span><span class="ident" id="4523946">l</span>&nbsp;<span class="op" id="4523948">*</span><span class="ident" id="4523949">List</span><span class="op" id="4523953">)</span>&nbsp;<span class="ident" id="4523955">Len</span><span class="op" id="4523958">(</span><span class="op" id="4523959">)</span>&nbsp;<span class="builtintype" id="4523961">int</span>&nbsp;<span class="op" id="4523965">{</span>&nbsp;<span class="keyword" id="4523967">return</span>&nbsp;<span class="ident" id="4523974">l</span><span class="op" id="4523975">.</span><span class="builtinfunc" id="4523976">len</span>&nbsp;<span class="op" id="4523980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4523983">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4524036">func</span>&nbsp;<span class="op" id="4524041">(</span><span class="ident" id="4524042">l</span>&nbsp;<span class="op" id="4524044">*</span><span class="ident" id="4524045">List</span><span class="op" id="4524049">)</span>&nbsp;<span class="ident" id="4524051">Front</span><span class="op" id="4524056">(</span><span class="op" id="4524057">)</span>&nbsp;<span class="op" id="4524059">*</span><span class="ident" id="4524060">Element</span>&nbsp;<span class="op" id="4524068">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524071">if</span>&nbsp;<span class="ident" id="4524074">l</span><span class="op" id="4524075">.</span><span class="builtinfunc" id="4524076">len</span>&nbsp;<span class="op" id="4524080">==</span>&nbsp;<span class="num" id="4524083">0</span>&nbsp;<span class="op" id="4524085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524089">return</span>&nbsp;<span class="ident" id="4524096">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524104">return</span>&nbsp;<span class="ident" id="4524111">l</span><span class="op" id="4524112">.</span><span class="ident" id="4524113">root</span><span class="op" id="4524117">.</span><span class="ident" id="4524118">next</span><br>
<span class="lineno"></span><span class="op" id="4524123">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4524126">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4524177">func</span>&nbsp;<span class="op" id="4524182">(</span><span class="ident" id="4524183">l</span>&nbsp;<span class="op" id="4524185">*</span><span class="ident" id="4524186">List</span><span class="op" id="4524190">)</span>&nbsp;<span class="ident" id="4524192">Back</span><span class="op" id="4524196">(</span><span class="op" id="4524197">)</span>&nbsp;<span class="op" id="4524199">*</span><span class="ident" id="4524200">Element</span>&nbsp;<span class="op" id="4524208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524211">if</span>&nbsp;<span class="ident" id="4524214">l</span><span class="op" id="4524215">.</span><span class="builtinfunc" id="4524216">len</span>&nbsp;<span class="op" id="4524220">==</span>&nbsp;<span class="num" id="4524223">0</span>&nbsp;<span class="op" id="4524225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524229">return</span>&nbsp;<span class="ident" id="4524236">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524244">return</span>&nbsp;<span class="ident" id="4524251">l</span><span class="op" id="4524252">.</span><span class="ident" id="4524253">root</span><span class="op" id="4524257">.</span><span class="ident" id="4524258">prev</span><br>
<span class="lineno"></span><span class="op" id="4524263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4524266">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4524316">func</span>&nbsp;<span class="op" id="4524321">(</span><span class="ident" id="4524322">l</span>&nbsp;<span class="op" id="4524324">*</span><span class="ident" id="4524325">List</span><span class="op" id="4524329">)</span>&nbsp;<span class="ident" id="4524331">lazyInit</span><span class="op" id="4524339">(</span><span class="op" id="4524340">)</span>&nbsp;<span class="op" id="4524342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524345">if</span>&nbsp;<span class="ident" id="4524348">l</span><span class="op" id="4524349">.</span><span class="ident" id="4524350">root</span><span class="op" id="4524354">.</span><span class="ident" id="4524355">next</span>&nbsp;<span class="op" id="4524360">==</span>&nbsp;<span class="ident" id="4524363">nil</span>&nbsp;<span class="op" id="4524367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524371">l</span><span class="op" id="4524372">.</span><span class="ident" id="4524373">Init</span><span class="op" id="4524377">(</span><span class="op" id="4524378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4524381">}</span><br>
<span class="lineno"></span><span class="op" id="4524383">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4524386">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4524449">func</span>&nbsp;<span class="op" id="4524454">(</span><span class="ident" id="4524455">l</span>&nbsp;<span class="op" id="4524457">*</span><span class="ident" id="4524458">List</span><span class="op" id="4524462">)</span>&nbsp;<span class="ident" id="4524464">insert</span><span class="op" id="4524470">(</span><span class="ident" id="4524471">e</span><span class="op" id="4524472">,</span>&nbsp;<span class="ident" id="4524474">at</span>&nbsp;<span class="op" id="4524477">*</span><span class="ident" id="4524478">Element</span><span class="op" id="4524485">)</span>&nbsp;<span class="op" id="4524487">*</span><span class="ident" id="4524488">Element</span>&nbsp;<span class="op" id="4524496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524499">n</span>&nbsp;<span class="op" id="4524501">:=</span>&nbsp;<span class="ident" id="4524504">at</span><span class="op" id="4524506">.</span><span class="ident" id="4524507">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524513">at</span><span class="op" id="4524515">.</span><span class="ident" id="4524516">next</span>&nbsp;<span class="op" id="4524521">=</span>&nbsp;<span class="ident" id="4524523">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524526">e</span><span class="op" id="4524527">.</span><span class="ident" id="4524528">prev</span>&nbsp;<span class="op" id="4524533">=</span>&nbsp;<span class="ident" id="4524535">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524539">e</span><span class="op" id="4524540">.</span><span class="ident" id="4524541">next</span>&nbsp;<span class="op" id="4524546">=</span>&nbsp;<span class="ident" id="4524548">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524551">n</span><span class="op" id="4524552">.</span><span class="ident" id="4524553">prev</span>&nbsp;<span class="op" id="4524558">=</span>&nbsp;<span class="ident" id="4524560">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524563">e</span><span class="op" id="4524564">.</span><span class="ident" id="4524565">list</span>&nbsp;<span class="op" id="4524570">=</span>&nbsp;<span class="ident" id="4524572">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524575">l</span><span class="op" id="4524576">.</span><span class="builtinfunc" id="4524577">len</span><span class="op" id="4524580">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524584">return</span>&nbsp;<span class="ident" id="4524591">e</span><br>
<span class="lineno"></span><span class="op" id="4524593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4524596">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4524672">func</span>&nbsp;<span class="op" id="4524677">(</span><span class="ident" id="4524678">l</span>&nbsp;<span class="op" id="4524680">*</span><span class="ident" id="4524681">List</span><span class="op" id="4524685">)</span>&nbsp;<span class="ident" id="4524687">insertValue</span><span class="op" id="4524698">(</span><span class="ident" id="4524699">v</span>&nbsp;<span class="keyword" id="4524701">interface</span><span class="op" id="4524710">{</span><span class="op" id="4524711">}</span><span class="op" id="4524712">,</span>&nbsp;<span class="ident" id="4524714">at</span>&nbsp;<span class="op" id="4524717">*</span><span class="ident" id="4524718">Element</span><span class="op" id="4524725">)</span>&nbsp;<span class="op" id="4524727">*</span><span class="ident" id="4524728">Element</span>&nbsp;<span class="op" id="4524736">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4524739">return</span>&nbsp;<span class="ident" id="4524746">l</span><span class="op" id="4524747">.</span><span class="ident" id="4524748">insert</span><span class="op" id="4524754">(</span><span class="op" id="4524755">&amp;</span><span class="ident" id="4524756">Element</span><span class="op" id="4524763">{</span><span class="ident" id="4524764">Value</span><span class="op" id="4524769">:</span>&nbsp;<span class="ident" id="4524771">v</span><span class="op" id="4524772">}</span><span class="op" id="4524773">,</span>&nbsp;<span class="ident" id="4524775">at</span><span class="op" id="4524777">)</span><br>
<span class="lineno"></span><span class="op" id="4524779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4524782">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4524850">func</span>&nbsp;<span class="op" id="4524855">(</span><span class="ident" id="4524856">l</span>&nbsp;<span class="op" id="4524858">*</span><span class="ident" id="4524859">List</span><span class="op" id="4524863">)</span>&nbsp;<span class="ident" id="4524865">remove</span><span class="op" id="4524871">(</span><span class="ident" id="4524872">e</span>&nbsp;<span class="op" id="4524874">*</span><span class="ident" id="4524875">Element</span><span class="op" id="4524882">)</span>&nbsp;<span class="op" id="4524884">*</span><span class="ident" id="4524885">Element</span>&nbsp;<span class="op" id="4524893">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524896">e</span><span class="op" id="4524897">.</span><span class="ident" id="4524898">prev</span><span class="op" id="4524902">.</span><span class="ident" id="4524903">next</span>&nbsp;<span class="op" id="4524908">=</span>&nbsp;<span class="ident" id="4524910">e</span><span class="op" id="4524911">.</span><span class="ident" id="4524912">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524918">e</span><span class="op" id="4524919">.</span><span class="ident" id="4524920">next</span><span class="op" id="4524924">.</span><span class="ident" id="4524925">prev</span>&nbsp;<span class="op" id="4524930">=</span>&nbsp;<span class="ident" id="4524932">e</span><span class="op" id="4524933">.</span><span class="ident" id="4524934">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524940">e</span><span class="op" id="4524941">.</span><span class="ident" id="4524942">next</span>&nbsp;<span class="op" id="4524947">=</span>&nbsp;<span class="ident" id="4524949">nil</span>&nbsp;<span class="comment" id="4524953">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4524976">e</span><span class="op" id="4524977">.</span><span class="ident" id="4524978">prev</span>&nbsp;<span class="op" id="4524983">=</span>&nbsp;<span class="ident" id="4524985">nil</span>&nbsp;<span class="comment" id="4524989">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525012">e</span><span class="op" id="4525013">.</span><span class="ident" id="4525014">list</span>&nbsp;<span class="op" id="4525019">=</span>&nbsp;<span class="ident" id="4525021">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525026">l</span><span class="op" id="4525027">.</span><span class="builtinfunc" id="4525028">len</span><span class="op" id="4525031">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525035">return</span>&nbsp;<span class="ident" id="4525042">e</span><br>
<span class="lineno"></span><span class="op" id="4525044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4525047">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4525104">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4525145">func</span>&nbsp;<span class="op" id="4525150">(</span><span class="ident" id="4525151">l</span>&nbsp;<span class="op" id="4525153">*</span><span class="ident" id="4525154">List</span><span class="op" id="4525158">)</span>&nbsp;<span class="ident" id="4525160">Remove</span><span class="op" id="4525166">(</span><span class="ident" id="4525167">e</span>&nbsp;<span class="op" id="4525169">*</span><span class="ident" id="4525170">Element</span><span class="op" id="4525177">)</span>&nbsp;<span class="keyword" id="4525179">interface</span><span class="op" id="4525188">{</span><span class="op" id="4525189">}</span>&nbsp;<span class="op" id="4525191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525194">if</span>&nbsp;<span class="ident" id="4525197">e</span><span class="op" id="4525198">.</span><span class="ident" id="4525199">list</span>&nbsp;<span class="op" id="4525204">==</span>&nbsp;<span class="ident" id="4525207">l</span>&nbsp;<span class="op" id="4525209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4525213">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4525283">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525351">l</span><span class="op" id="4525352">.</span><span class="ident" id="4525353">remove</span><span class="op" id="4525359">(</span><span class="ident" id="4525360">e</span><span class="op" id="4525361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4525364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525367">return</span>&nbsp;<span class="ident" id="4525374">e</span><span class="op" id="4525375">.</span><span class="ident" id="4525376">Value</span><br>
<span class="lineno"></span><span class="op" id="4525382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4525385">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4525473">func</span>&nbsp;<span class="op" id="4525478">(</span><span class="ident" id="4525479">l</span>&nbsp;<span class="op" id="4525481">*</span><span class="ident" id="4525482">List</span><span class="op" id="4525486">)</span>&nbsp;<span class="ident" id="4525488">PushFront</span><span class="op" id="4525497">(</span><span class="ident" id="4525498">v</span>&nbsp;<span class="keyword" id="4525500">interface</span><span class="op" id="4525509">{</span><span class="op" id="4525510">}</span><span class="op" id="4525511">)</span>&nbsp;<span class="op" id="4525513">*</span><span class="ident" id="4525514">Element</span>&nbsp;<span class="op" id="4525522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525525">l</span><span class="op" id="4525526">.</span><span class="ident" id="4525527">lazyInit</span><span class="op" id="4525535">(</span><span class="op" id="4525536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525539">return</span>&nbsp;<span class="ident" id="4525546">l</span><span class="op" id="4525547">.</span><span class="ident" id="4525548">insertValue</span><span class="op" id="4525559">(</span><span class="ident" id="4525560">v</span><span class="op" id="4525561">,</span>&nbsp;<span class="op" id="4525563">&amp;</span><span class="ident" id="4525564">l</span><span class="op" id="4525565">.</span><span class="ident" id="4525566">root</span><span class="op" id="4525570">)</span><br>
<span class="lineno"></span><span class="op" id="4525572">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4525575">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4525661">func</span>&nbsp;<span class="op" id="4525666">(</span><span class="ident" id="4525667">l</span>&nbsp;<span class="op" id="4525669">*</span><span class="ident" id="4525670">List</span><span class="op" id="4525674">)</span>&nbsp;<span class="ident" id="4525676">PushBack</span><span class="op" id="4525684">(</span><span class="ident" id="4525685">v</span>&nbsp;<span class="keyword" id="4525687">interface</span><span class="op" id="4525696">{</span><span class="op" id="4525697">}</span><span class="op" id="4525698">)</span>&nbsp;<span class="op" id="4525700">*</span><span class="ident" id="4525701">Element</span>&nbsp;<span class="op" id="4525709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4525712">l</span><span class="op" id="4525713">.</span><span class="ident" id="4525714">lazyInit</span><span class="op" id="4525722">(</span><span class="op" id="4525723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525726">return</span>&nbsp;<span class="ident" id="4525733">l</span><span class="op" id="4525734">.</span><span class="ident" id="4525735">insertValue</span><span class="op" id="4525746">(</span><span class="ident" id="4525747">v</span><span class="op" id="4525748">,</span>&nbsp;<span class="ident" id="4525750">l</span><span class="op" id="4525751">.</span><span class="ident" id="4525752">root</span><span class="op" id="4525756">.</span><span class="ident" id="4525757">prev</span><span class="op" id="4525761">)</span><br>
<span class="lineno">140</span><span class="op" id="4525763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4525766">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4525858">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4525919">func</span>&nbsp;<span class="op" id="4525924">(</span><span class="ident" id="4525925">l</span>&nbsp;<span class="op" id="4525927">*</span><span class="ident" id="4525928">List</span><span class="op" id="4525932">)</span>&nbsp;<span class="ident" id="4525934">InsertBefore</span><span class="op" id="4525946">(</span><span class="ident" id="4525947">v</span>&nbsp;<span class="keyword" id="4525949">interface</span><span class="op" id="4525958">{</span><span class="op" id="4525959">}</span><span class="op" id="4525960">,</span>&nbsp;<span class="ident" id="4525962">mark</span>&nbsp;<span class="op" id="4525967">*</span><span class="ident" id="4525968">Element</span><span class="op" id="4525975">)</span>&nbsp;<span class="op" id="4525977">*</span><span class="ident" id="4525978">Element</span>&nbsp;<span class="op" id="4525986">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4525989">if</span>&nbsp;<span class="ident" id="4525992">mark</span><span class="op" id="4525996">.</span><span class="ident" id="4525997">list</span>&nbsp;<span class="op" id="4526002">!=</span>&nbsp;<span class="ident" id="4526005">l</span>&nbsp;<span class="op" id="4526007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526011">return</span>&nbsp;<span class="ident" id="4526018">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4526023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4526026">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526083">return</span>&nbsp;<span class="ident" id="4526090">l</span><span class="op" id="4526091">.</span><span class="ident" id="4526092">insertValue</span><span class="op" id="4526103">(</span><span class="ident" id="4526104">v</span><span class="op" id="4526105">,</span>&nbsp;<span class="ident" id="4526107">mark</span><span class="op" id="4526111">.</span><span class="ident" id="4526112">prev</span><span class="op" id="4526116">)</span><br>
<span class="lineno">150</span><span class="op" id="4526118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4526121">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4526211">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4526272">func</span>&nbsp;<span class="op" id="4526277">(</span><span class="ident" id="4526278">l</span>&nbsp;<span class="op" id="4526280">*</span><span class="ident" id="4526281">List</span><span class="op" id="4526285">)</span>&nbsp;<span class="ident" id="4526287">InsertAfter</span><span class="op" id="4526298">(</span><span class="ident" id="4526299">v</span>&nbsp;<span class="keyword" id="4526301">interface</span><span class="op" id="4526310">{</span><span class="op" id="4526311">}</span><span class="op" id="4526312">,</span>&nbsp;<span class="ident" id="4526314">mark</span>&nbsp;<span class="op" id="4526319">*</span><span class="ident" id="4526320">Element</span><span class="op" id="4526327">)</span>&nbsp;<span class="op" id="4526329">*</span><span class="ident" id="4526330">Element</span>&nbsp;<span class="op" id="4526338">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526341">if</span>&nbsp;<span class="ident" id="4526344">mark</span><span class="op" id="4526348">.</span><span class="ident" id="4526349">list</span>&nbsp;<span class="op" id="4526354">!=</span>&nbsp;<span class="ident" id="4526357">l</span>&nbsp;<span class="op" id="4526359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526363">return</span>&nbsp;<span class="ident" id="4526370">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4526375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4526378">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526435">return</span>&nbsp;<span class="ident" id="4526442">l</span><span class="op" id="4526443">.</span><span class="ident" id="4526444">insertValue</span><span class="op" id="4526455">(</span><span class="ident" id="4526456">v</span><span class="op" id="4526457">,</span>&nbsp;<span class="ident" id="4526459">mark</span><span class="op" id="4526463">)</span><br>
<span class="lineno">160</span><span class="op" id="4526465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4526468">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4526523">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4526581">func</span>&nbsp;<span class="op" id="4526586">(</span><span class="ident" id="4526587">l</span>&nbsp;<span class="op" id="4526589">*</span><span class="ident" id="4526590">List</span><span class="op" id="4526594">)</span>&nbsp;<span class="ident" id="4526596">MoveToFront</span><span class="op" id="4526607">(</span><span class="ident" id="4526608">e</span>&nbsp;<span class="op" id="4526610">*</span><span class="ident" id="4526611">Element</span><span class="op" id="4526618">)</span>&nbsp;<span class="op" id="4526620">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526623">if</span>&nbsp;<span class="ident" id="4526626">e</span><span class="op" id="4526627">.</span><span class="ident" id="4526628">list</span>&nbsp;<span class="op" id="4526633">!=</span>&nbsp;<span class="ident" id="4526636">l</span>&nbsp;<span class="op" id="4526638">||</span>&nbsp;<span class="ident" id="4526641">l</span><span class="op" id="4526642">.</span><span class="ident" id="4526643">root</span><span class="op" id="4526647">.</span><span class="ident" id="4526648">next</span>&nbsp;<span class="op" id="4526653">==</span>&nbsp;<span class="ident" id="4526656">e</span>&nbsp;<span class="op" id="4526658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526662">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4526670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4526673">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4526730">l</span><span class="op" id="4526731">.</span><span class="ident" id="4526732">insert</span><span class="op" id="4526738">(</span><span class="ident" id="4526739">l</span><span class="op" id="4526740">.</span><span class="ident" id="4526741">remove</span><span class="op" id="4526747">(</span><span class="ident" id="4526748">e</span><span class="op" id="4526749">)</span><span class="op" id="4526750">,</span>&nbsp;<span class="op" id="4526752">&amp;</span><span class="ident" id="4526753">l</span><span class="op" id="4526754">.</span><span class="ident" id="4526755">root</span><span class="op" id="4526759">)</span><br>
<span class="lineno">170</span><span class="op" id="4526761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4526764">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4526817">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4526875">func</span>&nbsp;<span class="op" id="4526880">(</span><span class="ident" id="4526881">l</span>&nbsp;<span class="op" id="4526883">*</span><span class="ident" id="4526884">List</span><span class="op" id="4526888">)</span>&nbsp;<span class="ident" id="4526890">MoveToBack</span><span class="op" id="4526900">(</span><span class="ident" id="4526901">e</span>&nbsp;<span class="op" id="4526903">*</span><span class="ident" id="4526904">Element</span><span class="op" id="4526911">)</span>&nbsp;<span class="op" id="4526913">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526916">if</span>&nbsp;<span class="ident" id="4526919">e</span><span class="op" id="4526920">.</span><span class="ident" id="4526921">list</span>&nbsp;<span class="op" id="4526926">!=</span>&nbsp;<span class="ident" id="4526929">l</span>&nbsp;<span class="op" id="4526931">||</span>&nbsp;<span class="ident" id="4526934">l</span><span class="op" id="4526935">.</span><span class="ident" id="4526936">root</span><span class="op" id="4526940">.</span><span class="ident" id="4526941">prev</span>&nbsp;<span class="op" id="4526946">==</span>&nbsp;<span class="ident" id="4526949">e</span>&nbsp;<span class="op" id="4526951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4526955">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4526963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4526966">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527023">l</span><span class="op" id="4527024">.</span><span class="ident" id="4527025">insert</span><span class="op" id="4527031">(</span><span class="ident" id="4527032">l</span><span class="op" id="4527033">.</span><span class="ident" id="4527034">remove</span><span class="op" id="4527040">(</span><span class="ident" id="4527041">e</span><span class="op" id="4527042">)</span><span class="op" id="4527043">,</span>&nbsp;<span class="ident" id="4527045">l</span><span class="op" id="4527046">.</span><span class="ident" id="4527047">root</span><span class="op" id="4527051">.</span><span class="ident" id="4527052">prev</span><span class="op" id="4527056">)</span><br>
<span class="lineno">180</span><span class="op" id="4527058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4527061">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4527124">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4527204">func</span>&nbsp;<span class="op" id="4527209">(</span><span class="ident" id="4527210">l</span>&nbsp;<span class="op" id="4527212">*</span><span class="ident" id="4527213">List</span><span class="op" id="4527217">)</span>&nbsp;<span class="ident" id="4527219">MoveBefore</span><span class="op" id="4527229">(</span><span class="ident" id="4527230">e</span><span class="op" id="4527231">,</span>&nbsp;<span class="ident" id="4527233">mark</span>&nbsp;<span class="op" id="4527238">*</span><span class="ident" id="4527239">Element</span><span class="op" id="4527246">)</span>&nbsp;<span class="op" id="4527248">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527251">if</span>&nbsp;<span class="ident" id="4527254">e</span><span class="op" id="4527255">.</span><span class="ident" id="4527256">list</span>&nbsp;<span class="op" id="4527261">!=</span>&nbsp;<span class="ident" id="4527264">l</span>&nbsp;<span class="op" id="4527266">||</span>&nbsp;<span class="ident" id="4527269">e</span>&nbsp;<span class="op" id="4527271">==</span>&nbsp;<span class="ident" id="4527274">mark</span>&nbsp;<span class="op" id="4527279">||</span>&nbsp;<span class="ident" id="4527282">mark</span><span class="op" id="4527286">.</span><span class="ident" id="4527287">list</span>&nbsp;<span class="op" id="4527292">!=</span>&nbsp;<span class="ident" id="4527295">l</span>&nbsp;<span class="op" id="4527297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527301">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4527309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527312">l</span><span class="op" id="4527313">.</span><span class="ident" id="4527314">insert</span><span class="op" id="4527320">(</span><span class="ident" id="4527321">l</span><span class="op" id="4527322">.</span><span class="ident" id="4527323">remove</span><span class="op" id="4527329">(</span><span class="ident" id="4527330">e</span><span class="op" id="4527331">)</span><span class="op" id="4527332">,</span>&nbsp;<span class="ident" id="4527334">mark</span><span class="op" id="4527338">.</span><span class="ident" id="4527339">prev</span><span class="op" id="4527343">)</span><br>
<span class="lineno"></span><span class="op" id="4527345">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4527348">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4527409">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4527489">func</span>&nbsp;<span class="op" id="4527494">(</span><span class="ident" id="4527495">l</span>&nbsp;<span class="op" id="4527497">*</span><span class="ident" id="4527498">List</span><span class="op" id="4527502">)</span>&nbsp;<span class="ident" id="4527504">MoveAfter</span><span class="op" id="4527513">(</span><span class="ident" id="4527514">e</span><span class="op" id="4527515">,</span>&nbsp;<span class="ident" id="4527517">mark</span>&nbsp;<span class="op" id="4527522">*</span><span class="ident" id="4527523">Element</span><span class="op" id="4527530">)</span>&nbsp;<span class="op" id="4527532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527535">if</span>&nbsp;<span class="ident" id="4527538">e</span><span class="op" id="4527539">.</span><span class="ident" id="4527540">list</span>&nbsp;<span class="op" id="4527545">!=</span>&nbsp;<span class="ident" id="4527548">l</span>&nbsp;<span class="op" id="4527550">||</span>&nbsp;<span class="ident" id="4527553">e</span>&nbsp;<span class="op" id="4527555">==</span>&nbsp;<span class="ident" id="4527558">mark</span>&nbsp;<span class="op" id="4527563">||</span>&nbsp;<span class="ident" id="4527566">mark</span><span class="op" id="4527570">.</span><span class="ident" id="4527571">list</span>&nbsp;<span class="op" id="4527576">!=</span>&nbsp;<span class="ident" id="4527579">l</span>&nbsp;<span class="op" id="4527581">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527585">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4527593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527596">l</span><span class="op" id="4527597">.</span><span class="ident" id="4527598">insert</span><span class="op" id="4527604">(</span><span class="ident" id="4527605">l</span><span class="op" id="4527606">.</span><span class="ident" id="4527607">remove</span><span class="op" id="4527613">(</span><span class="ident" id="4527614">e</span><span class="op" id="4527615">)</span><span class="op" id="4527616">,</span>&nbsp;<span class="ident" id="4527618">mark</span><span class="op" id="4527622">)</span><br>
<span class="lineno"></span><span class="op" id="4527624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4527627">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4527698">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4527740">func</span>&nbsp;<span class="op" id="4527745">(</span><span class="ident" id="4527746">l</span>&nbsp;<span class="op" id="4527748">*</span><span class="ident" id="4527749">List</span><span class="op" id="4527753">)</span>&nbsp;<span class="ident" id="4527755">PushBackList</span><span class="op" id="4527767">(</span><span class="ident" id="4527768">other</span>&nbsp;<span class="op" id="4527774">*</span><span class="ident" id="4527775">List</span><span class="op" id="4527779">)</span>&nbsp;<span class="op" id="4527781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527784">l</span><span class="op" id="4527785">.</span><span class="ident" id="4527786">lazyInit</span><span class="op" id="4527794">(</span><span class="op" id="4527795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4527798">for</span>&nbsp;<span class="ident" id="4527802">i</span><span class="op" id="4527803">,</span>&nbsp;<span class="ident" id="4527805">e</span>&nbsp;<span class="op" id="4527807">:=</span>&nbsp;<span class="ident" id="4527810">other</span><span class="op" id="4527815">.</span><span class="ident" id="4527816">Len</span><span class="op" id="4527819">(</span><span class="op" id="4527820">)</span><span class="op" id="4527821">,</span>&nbsp;<span class="ident" id="4527823">other</span><span class="op" id="4527828">.</span><span class="ident" id="4527829">Front</span><span class="op" id="4527834">(</span><span class="op" id="4527835">)</span><span class="op" id="4527836">;</span>&nbsp;<span class="ident" id="4527838">i</span>&nbsp;<span class="op" id="4527840">&gt;</span>&nbsp;<span class="num" id="4527842">0</span><span class="op" id="4527843">;</span>&nbsp;<span class="ident" id="4527845">i</span><span class="op" id="4527846">,</span>&nbsp;<span class="ident" id="4527848">e</span>&nbsp;<span class="op" id="4527850">=</span>&nbsp;<span class="ident" id="4527852">i</span><span class="op" id="4527853">-</span><span class="num" id="4527854">1</span><span class="op" id="4527855">,</span>&nbsp;<span class="ident" id="4527857">e</span><span class="op" id="4527858">.</span><span class="ident" id="4527859">Next</span><span class="op" id="4527863">(</span><span class="op" id="4527864">)</span>&nbsp;<span class="op" id="4527866">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4527870">l</span><span class="op" id="4527871">.</span><span class="ident" id="4527872">insertValue</span><span class="op" id="4527883">(</span><span class="ident" id="4527884">e</span><span class="op" id="4527885">.</span><span class="ident" id="4527886">Value</span><span class="op" id="4527891">,</span>&nbsp;<span class="ident" id="4527893">l</span><span class="op" id="4527894">.</span><span class="ident" id="4527895">root</span><span class="op" id="4527899">.</span><span class="ident" id="4527900">prev</span><span class="op" id="4527904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4527907">}</span><br>
<span class="lineno"></span><span class="op" id="4527909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4527912">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4527985">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4528027">func</span>&nbsp;<span class="op" id="4528032">(</span><span class="ident" id="4528033">l</span>&nbsp;<span class="op" id="4528035">*</span><span class="ident" id="4528036">List</span><span class="op" id="4528040">)</span>&nbsp;<span class="ident" id="4528042">PushFrontList</span><span class="op" id="4528055">(</span><span class="ident" id="4528056">other</span>&nbsp;<span class="op" id="4528062">*</span><span class="ident" id="4528063">List</span><span class="op" id="4528067">)</span>&nbsp;<span class="op" id="4528069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4528072">l</span><span class="op" id="4528073">.</span><span class="ident" id="4528074">lazyInit</span><span class="op" id="4528082">(</span><span class="op" id="4528083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4528086">for</span>&nbsp;<span class="ident" id="4528090">i</span><span class="op" id="4528091">,</span>&nbsp;<span class="ident" id="4528093">e</span>&nbsp;<span class="op" id="4528095">:=</span>&nbsp;<span class="ident" id="4528098">other</span><span class="op" id="4528103">.</span><span class="ident" id="4528104">Len</span><span class="op" id="4528107">(</span><span class="op" id="4528108">)</span><span class="op" id="4528109">,</span>&nbsp;<span class="ident" id="4528111">other</span><span class="op" id="4528116">.</span><span class="ident" id="4528117">Back</span><span class="op" id="4528121">(</span><span class="op" id="4528122">)</span><span class="op" id="4528123">;</span>&nbsp;<span class="ident" id="4528125">i</span>&nbsp;<span class="op" id="4528127">&gt;</span>&nbsp;<span class="num" id="4528129">0</span><span class="op" id="4528130">;</span>&nbsp;<span class="ident" id="4528132">i</span><span class="op" id="4528133">,</span>&nbsp;<span class="ident" id="4528135">e</span>&nbsp;<span class="op" id="4528137">=</span>&nbsp;<span class="ident" id="4528139">i</span><span class="op" id="4528140">-</span><span class="num" id="4528141">1</span><span class="op" id="4528142">,</span>&nbsp;<span class="ident" id="4528144">e</span><span class="op" id="4528145">.</span><span class="ident" id="4528146">Prev</span><span class="op" id="4528150">(</span><span class="op" id="4528151">)</span>&nbsp;<span class="op" id="4528153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4528157">l</span><span class="op" id="4528158">.</span><span class="ident" id="4528159">insertValue</span><span class="op" id="4528170">(</span><span class="ident" id="4528171">e</span><span class="op" id="4528172">.</span><span class="ident" id="4528173">Value</span><span class="op" id="4528178">,</span>&nbsp;<span class="op" id="4528180">&amp;</span><span class="ident" id="4528181">l</span><span class="op" id="4528182">.</span><span class="ident" id="4528183">root</span><span class="op" id="4528187">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4528190">}</span><br>
<span class="lineno"></span><span class="op" id="4528192">}</span>
</div>
</body>
</html>
