<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3426507">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3426563">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3426617">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3426668">//&nbsp;Network&nbsp;service&nbsp;port&nbsp;manipulations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3426707">package</span>&nbsp;<span class="ident" id="3426715">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3426720">//&nbsp;parsePort&nbsp;parses&nbsp;port&nbsp;as&nbsp;a&nbsp;network&nbsp;service&nbsp;port&nbsp;number&nbsp;for&nbsp;both</span><br>
<span class="lineno">10</span><span class="comment" id="3426787">//&nbsp;TCP&nbsp;and&nbsp;UDP.</span><br>
<span class="lineno"></span><span class="keyword" id="3426803">func</span>&nbsp;<span class="ident" id="3426808">parsePort</span><span class="op" id="3426817">(</span><span class="ident" id="3426818">net</span><span class="op" id="3426821">,</span>&nbsp;<span class="ident" id="3426823">port</span>&nbsp;<span class="builtintype" id="3426828">string</span><span class="op" id="3426834">)</span>&nbsp;<span class="op" id="3426836">(</span><span class="builtintype" id="3426837">int</span><span class="op" id="3426840">,</span>&nbsp;<span class="builtintype" id="3426842">error</span><span class="op" id="3426847">)</span>&nbsp;<span class="op" id="3426849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3426852">p</span><span class="op" id="3426853">,</span>&nbsp;<span class="ident" id="3426855">i</span><span class="op" id="3426856">,</span>&nbsp;<span class="ident" id="3426858">ok</span>&nbsp;<span class="op" id="3426861">:=</span>&nbsp;<span class="ident" id="3426864">dtoi</span><span class="op" id="3426868">(</span><span class="ident" id="3426869">port</span><span class="op" id="3426873">,</span>&nbsp;<span class="num" id="3426875">0</span><span class="op" id="3426876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3426879">if</span>&nbsp;<span class="op" id="3426882">!</span><span class="ident" id="3426883">ok</span>&nbsp;<span class="op" id="3426886">||</span>&nbsp;<span class="ident" id="3426889">i</span>&nbsp;<span class="op" id="3426891">!=</span>&nbsp;<span class="builtinfunc" id="3426894">len</span><span class="op" id="3426897">(</span><span class="ident" id="3426898">port</span><span class="op" id="3426902">)</span>&nbsp;<span class="op" id="3426904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3426908">var</span>&nbsp;<span class="ident" id="3426912">err</span>&nbsp;<span class="builtintype" id="3426916">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3426924">p</span><span class="op" id="3426925">,</span>&nbsp;<span class="ident" id="3426927">err</span>&nbsp;<span class="op" id="3426931">=</span>&nbsp;<span class="ident" id="3426933">LookupPort</span><span class="op" id="3426943">(</span><span class="ident" id="3426944">net</span><span class="op" id="3426947">,</span>&nbsp;<span class="ident" id="3426949">port</span><span class="op" id="3426953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3426957">if</span>&nbsp;<span class="ident" id="3426960">err</span>&nbsp;<span class="op" id="3426964">!=</span>&nbsp;<span class="ident" id="3426967">nil</span>&nbsp;<span class="op" id="3426971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3426976">return</span>&nbsp;<span class="num" id="3426983">0</span><span class="op" id="3426984">,</span>&nbsp;<span class="ident" id="3426986">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3426992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3426995">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3426998">if</span>&nbsp;<span class="ident" id="3427001">p</span>&nbsp;<span class="op" id="3427003">&lt;</span>&nbsp;<span class="num" id="3427005">0</span>&nbsp;<span class="op" id="3427007">||</span>&nbsp;<span class="ident" id="3427010">p</span>&nbsp;<span class="op" id="3427012">&gt;</span>&nbsp;<span class="num" id="3427014">0xFFFF</span>&nbsp;<span class="op" id="3427021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3427025">return</span>&nbsp;<span class="num" id="3427032">0</span><span class="op" id="3427033">,</span>&nbsp;<span class="op" id="3427035">&amp;</span><span class="ident" id="3427036">AddrError</span><span class="op" id="3427045">{</span><span class="string" id="3427046">&#34;invalid&nbsp;port&#34;</span><span class="op" id="3427060">,</span>&nbsp;<span class="ident" id="3427062">port</span><span class="op" id="3427066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3427069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3427072">return</span>&nbsp;<span class="ident" id="3427079">p</span><span class="op" id="3427080">,</span>&nbsp;<span class="ident" id="3427082">nil</span><br>
<span class="lineno"></span><span class="op" id="3427086">}</span>
</div>
</body>
</html>
