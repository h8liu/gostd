<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7863449">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7863504">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7863558">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7863609">package</span>&nbsp;<span class="ident" id="7863617">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7863627">import</span>&nbsp;<span class="op" id="7863634">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7863637">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7863646">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7863654">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7863665">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7863675">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7863678">func</span>&nbsp;<span class="ident" id="7863683">TestNextJsCtx</span><span class="op" id="7863696">(</span><span class="ident" id="7863697">t</span>&nbsp;<span class="op" id="7863699">*</span><span class="ident" id="7863700">testing</span><span class="op" id="7863707">.</span><span class="ident" id="7863708">T</span><span class="op" id="7863709">)</span>&nbsp;<span class="op" id="7863711">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7863714">tests</span>&nbsp;<span class="op" id="7863720">:=</span>&nbsp;<span class="op" id="7863723">[</span><span class="op" id="7863724">]</span><span class="keyword" id="7863725">struct</span>&nbsp;<span class="op" id="7863732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7863736">jsCtx</span>&nbsp;<span class="ident" id="7863742">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7863750">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7863756">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7863764">}</span><span class="op" id="7863765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7863769">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7863813">{</span><span class="ident" id="7863814">jsCtxRegexp</span><span class="op" id="7863825">,</span>&nbsp;<span class="string" id="7863827">&#34;;&#34;</span><span class="op" id="7863830">}</span><span class="op" id="7863831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7863835">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7863862">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7863915">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7863978">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864041">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864064">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864114">{</span><span class="ident" id="7864115">jsCtxRegexp</span><span class="op" id="7864126">,</span>&nbsp;<span class="string" id="7864128">&#34;}&#34;</span><span class="op" id="7864131">}</span><span class="op" id="7864132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864136">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864202">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864224">{</span><span class="ident" id="7864225">jsCtxDivOp</span><span class="op" id="7864235">,</span>&nbsp;<span class="string" id="7864237">&#34;)&#34;</span><span class="op" id="7864240">}</span><span class="op" id="7864241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864245">{</span><span class="ident" id="7864246">jsCtxDivOp</span><span class="op" id="7864256">,</span>&nbsp;<span class="string" id="7864258">&#34;]&#34;</span><span class="op" id="7864261">}</span><span class="op" id="7864262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864266">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864330">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864363">{</span><span class="ident" id="7864364">jsCtxRegexp</span><span class="op" id="7864375">,</span>&nbsp;<span class="string" id="7864377">&#34;(&#34;</span><span class="op" id="7864380">}</span><span class="op" id="7864381">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864385">{</span><span class="ident" id="7864386">jsCtxRegexp</span><span class="op" id="7864397">,</span>&nbsp;<span class="string" id="7864399">&#34;[&#34;</span><span class="op" id="7864402">}</span><span class="op" id="7864403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864407">{</span><span class="ident" id="7864408">jsCtxRegexp</span><span class="op" id="7864419">,</span>&nbsp;<span class="string" id="7864421">&#34;{&#34;</span><span class="op" id="7864424">}</span><span class="op" id="7864425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864429">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864493">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864527">{</span><span class="ident" id="7864528">jsCtxRegexp</span><span class="op" id="7864539">,</span>&nbsp;<span class="string" id="7864541">&#34;=&#34;</span><span class="op" id="7864544">}</span><span class="op" id="7864545">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864549">{</span><span class="ident" id="7864550">jsCtxRegexp</span><span class="op" id="7864561">,</span>&nbsp;<span class="string" id="7864563">&#34;+=&#34;</span><span class="op" id="7864567">}</span><span class="op" id="7864568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864572">{</span><span class="ident" id="7864573">jsCtxRegexp</span><span class="op" id="7864584">,</span>&nbsp;<span class="string" id="7864586">&#34;*=&#34;</span><span class="op" id="7864590">}</span><span class="op" id="7864591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864595">{</span><span class="ident" id="7864596">jsCtxRegexp</span><span class="op" id="7864607">,</span>&nbsp;<span class="string" id="7864609">&#34;*&#34;</span><span class="op" id="7864612">}</span><span class="op" id="7864613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864617">{</span><span class="ident" id="7864618">jsCtxRegexp</span><span class="op" id="7864629">,</span>&nbsp;<span class="string" id="7864631">&#34;!&#34;</span><span class="op" id="7864634">}</span><span class="op" id="7864635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864639">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864703">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864716">{</span><span class="ident" id="7864717">jsCtxRegexp</span><span class="op" id="7864728">,</span>&nbsp;<span class="string" id="7864730">&#34;+&#34;</span><span class="op" id="7864733">}</span><span class="op" id="7864734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7864738">{</span><span class="ident" id="7864739">jsCtxRegexp</span><span class="op" id="7864750">,</span>&nbsp;<span class="string" id="7864752">&#34;-&#34;</span><span class="op" id="7864755">}</span><span class="op" id="7864756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864760">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864806">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864868">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864932">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7864981">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865045">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865058">{</span><span class="ident" id="7865059">jsCtxDivOp</span><span class="op" id="7865069">,</span>&nbsp;<span class="string" id="7865071">&#34;--&#34;</span><span class="op" id="7865075">}</span><span class="op" id="7865076">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865080">{</span><span class="ident" id="7865081">jsCtxDivOp</span><span class="op" id="7865091">,</span>&nbsp;<span class="string" id="7865093">&#34;++&#34;</span><span class="op" id="7865097">}</span><span class="op" id="7865098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865102">{</span><span class="ident" id="7865103">jsCtxDivOp</span><span class="op" id="7865113">,</span>&nbsp;<span class="string" id="7865115">&#34;x--&#34;</span><span class="op" id="7865120">}</span><span class="op" id="7865121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865125">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865188">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865208">{</span><span class="ident" id="7865209">jsCtxRegexp</span><span class="op" id="7865220">,</span>&nbsp;<span class="string" id="7865222">&#34;x---&#34;</span><span class="op" id="7865228">}</span><span class="op" id="7865229">,</span>&nbsp;<span class="comment" id="7865231">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865259">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865325">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865392">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865411">{</span><span class="ident" id="7865412">jsCtxRegexp</span><span class="op" id="7865423">,</span>&nbsp;<span class="string" id="7865425">&#34;return&#34;</span><span class="op" id="7865433">}</span><span class="op" id="7865434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865438">{</span><span class="ident" id="7865439">jsCtxRegexp</span><span class="op" id="7865450">,</span>&nbsp;<span class="string" id="7865452">&#34;return&nbsp;&#34;</span><span class="op" id="7865461">}</span><span class="op" id="7865462">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865466">{</span><span class="ident" id="7865467">jsCtxRegexp</span><span class="op" id="7865478">,</span>&nbsp;<span class="string" id="7865480">&#34;return\t&#34;</span><span class="op" id="7865490">}</span><span class="op" id="7865491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865495">{</span><span class="ident" id="7865496">jsCtxRegexp</span><span class="op" id="7865507">,</span>&nbsp;<span class="string" id="7865509">&#34;return\n&#34;</span><span class="op" id="7865519">}</span><span class="op" id="7865520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865524">{</span><span class="ident" id="7865525">jsCtxRegexp</span><span class="op" id="7865536">,</span>&nbsp;<span class="string" id="7865538">&#34;return\u2028&#34;</span><span class="op" id="7865552">}</span><span class="op" id="7865553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865557">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865623">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865685">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865751">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865816">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7865882">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865893">{</span><span class="ident" id="7865894">jsCtxDivOp</span><span class="op" id="7865904">,</span>&nbsp;<span class="string" id="7865906">&#34;x&#34;</span><span class="op" id="7865909">}</span><span class="op" id="7865910">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865914">{</span><span class="ident" id="7865915">jsCtxDivOp</span><span class="op" id="7865925">,</span>&nbsp;<span class="string" id="7865927">&#34;x&nbsp;&#34;</span><span class="op" id="7865931">}</span><span class="op" id="7865932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865936">{</span><span class="ident" id="7865937">jsCtxDivOp</span><span class="op" id="7865947">,</span>&nbsp;<span class="string" id="7865949">&#34;x\t&#34;</span><span class="op" id="7865954">}</span><span class="op" id="7865955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865959">{</span><span class="ident" id="7865960">jsCtxDivOp</span><span class="op" id="7865970">,</span>&nbsp;<span class="string" id="7865972">&#34;x\n&#34;</span><span class="op" id="7865977">}</span><span class="op" id="7865978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7865982">{</span><span class="ident" id="7865983">jsCtxDivOp</span><span class="op" id="7865993">,</span>&nbsp;<span class="string" id="7865995">&#34;x\u2028&#34;</span><span class="op" id="7866004">}</span><span class="op" id="7866005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866009">{</span><span class="ident" id="7866010">jsCtxDivOp</span><span class="op" id="7866020">,</span>&nbsp;<span class="string" id="7866022">&#34;preturn&#34;</span><span class="op" id="7866031">}</span><span class="op" id="7866032">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7866036">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866066">{</span><span class="ident" id="7866067">jsCtxDivOp</span><span class="op" id="7866077">,</span>&nbsp;<span class="string" id="7866079">&#34;0&#34;</span><span class="op" id="7866082">}</span><span class="op" id="7866083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7866087">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866142">{</span><span class="ident" id="7866143">jsCtxDivOp</span><span class="op" id="7866153">,</span>&nbsp;<span class="string" id="7866155">&#34;0.&#34;</span><span class="op" id="7866159">}</span><span class="op" id="7866160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866163">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7866167">for</span>&nbsp;<span class="ident" id="7866171">_</span><span class="op" id="7866172">,</span>&nbsp;<span class="ident" id="7866174">test</span>&nbsp;<span class="op" id="7866179">:=</span>&nbsp;<span class="keyword" id="7866182">range</span>&nbsp;<span class="ident" id="7866188">tests</span>&nbsp;<span class="op" id="7866194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7866198">if</span>&nbsp;<span class="ident" id="7866201">nextJSCtx</span><span class="op" id="7866210">(</span><span class="op" id="7866211">[</span><span class="op" id="7866212">]</span><span class="builtintype" id="7866213">byte</span><span class="op" id="7866217">(</span><span class="ident" id="7866218">test</span><span class="op" id="7866222">.</span><span class="ident" id="7866223">s</span><span class="op" id="7866224">)</span><span class="op" id="7866225">,</span>&nbsp;<span class="ident" id="7866227">jsCtxRegexp</span><span class="op" id="7866238">)</span>&nbsp;<span class="op" id="7866240">!=</span>&nbsp;<span class="ident" id="7866243">test</span><span class="op" id="7866247">.</span><span class="ident" id="7866248">jsCtx</span>&nbsp;<span class="op" id="7866254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866259">t</span><span class="op" id="7866260">.</span><span class="ident" id="7866261">Errorf</span><span class="op" id="7866267">(</span><span class="string" id="7866268">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7866284">,</span>&nbsp;<span class="ident" id="7866286">test</span><span class="op" id="7866290">.</span><span class="ident" id="7866291">jsCtx</span><span class="op" id="7866296">,</span>&nbsp;<span class="ident" id="7866298">test</span><span class="op" id="7866302">.</span><span class="ident" id="7866303">s</span><span class="op" id="7866304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866308">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7866312">if</span>&nbsp;<span class="ident" id="7866315">nextJSCtx</span><span class="op" id="7866324">(</span><span class="op" id="7866325">[</span><span class="op" id="7866326">]</span><span class="builtintype" id="7866327">byte</span><span class="op" id="7866331">(</span><span class="ident" id="7866332">test</span><span class="op" id="7866336">.</span><span class="ident" id="7866337">s</span><span class="op" id="7866338">)</span><span class="op" id="7866339">,</span>&nbsp;<span class="ident" id="7866341">jsCtxDivOp</span><span class="op" id="7866351">)</span>&nbsp;<span class="op" id="7866353">!=</span>&nbsp;<span class="ident" id="7866356">test</span><span class="op" id="7866360">.</span><span class="ident" id="7866361">jsCtx</span>&nbsp;<span class="op" id="7866367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866372">t</span><span class="op" id="7866373">.</span><span class="ident" id="7866374">Errorf</span><span class="op" id="7866380">(</span><span class="string" id="7866381">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7866397">,</span>&nbsp;<span class="ident" id="7866399">test</span><span class="op" id="7866403">.</span><span class="ident" id="7866404">jsCtx</span><span class="op" id="7866409">,</span>&nbsp;<span class="ident" id="7866411">test</span><span class="op" id="7866415">.</span><span class="ident" id="7866416">s</span><span class="op" id="7866417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7866428">if</span>&nbsp;<span class="ident" id="7866431">nextJSCtx</span><span class="op" id="7866440">(</span><span class="op" id="7866441">[</span><span class="op" id="7866442">]</span><span class="builtintype" id="7866443">byte</span><span class="op" id="7866447">(</span><span class="string" id="7866448">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7866453">)</span><span class="op" id="7866454">,</span>&nbsp;<span class="ident" id="7866456">jsCtxRegexp</span><span class="op" id="7866467">)</span>&nbsp;<span class="op" id="7866469">!=</span>&nbsp;<span class="ident" id="7866472">jsCtxRegexp</span>&nbsp;<span class="op" id="7866484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866488">t</span><span class="op" id="7866489">.</span><span class="ident" id="7866490">Error</span><span class="op" id="7866495">(</span><span class="string" id="7866496">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7866510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7866517">if</span>&nbsp;<span class="ident" id="7866520">nextJSCtx</span><span class="op" id="7866529">(</span><span class="op" id="7866530">[</span><span class="op" id="7866531">]</span><span class="builtintype" id="7866532">byte</span><span class="op" id="7866536">(</span><span class="string" id="7866537">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7866542">)</span><span class="op" id="7866543">,</span>&nbsp;<span class="ident" id="7866545">jsCtxDivOp</span><span class="op" id="7866555">)</span>&nbsp;<span class="op" id="7866557">!=</span>&nbsp;<span class="ident" id="7866560">jsCtxDivOp</span>&nbsp;<span class="op" id="7866571">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866575">t</span><span class="op" id="7866576">.</span><span class="ident" id="7866577">Error</span><span class="op" id="7866582">(</span><span class="string" id="7866583">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7866597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866600">}</span><br>
<span class="lineno"></span><span class="op" id="7866602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7866605">func</span>&nbsp;<span class="ident" id="7866610">TestJSValEscaper</span><span class="op" id="7866626">(</span><span class="ident" id="7866627">t</span>&nbsp;<span class="op" id="7866629">*</span><span class="ident" id="7866630">testing</span><span class="op" id="7866637">.</span><span class="ident" id="7866638">T</span><span class="op" id="7866639">)</span>&nbsp;<span class="op" id="7866641">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866644">tests</span>&nbsp;<span class="op" id="7866650">:=</span>&nbsp;<span class="op" id="7866653">[</span><span class="op" id="7866654">]</span><span class="keyword" id="7866655">struct</span>&nbsp;<span class="op" id="7866662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866666">x</span>&nbsp;&nbsp;<span class="keyword" id="7866669">interface</span><span class="op" id="7866678">{</span><span class="op" id="7866679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866683">js</span>&nbsp;<span class="builtintype" id="7866686">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866694">}</span><span class="op" id="7866695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866699">{</span><span class="builtintype" id="7866700">int</span><span class="op" id="7866703">(</span><span class="num" id="7866704">42</span><span class="op" id="7866706">)</span><span class="op" id="7866707">,</span>&nbsp;<span class="string" id="7866709">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866715">}</span><span class="op" id="7866716">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866720">{</span><span class="builtintype" id="7866721">uint</span><span class="op" id="7866725">(</span><span class="num" id="7866726">42</span><span class="op" id="7866728">)</span><span class="op" id="7866729">,</span>&nbsp;<span class="string" id="7866731">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866737">}</span><span class="op" id="7866738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866742">{</span><span class="builtintype" id="7866743">int16</span><span class="op" id="7866748">(</span><span class="num" id="7866749">42</span><span class="op" id="7866751">)</span><span class="op" id="7866752">,</span>&nbsp;<span class="string" id="7866754">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866760">}</span><span class="op" id="7866761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866765">{</span><span class="builtintype" id="7866766">uint16</span><span class="op" id="7866772">(</span><span class="num" id="7866773">42</span><span class="op" id="7866775">)</span><span class="op" id="7866776">,</span>&nbsp;<span class="string" id="7866778">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866784">}</span><span class="op" id="7866785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866789">{</span><span class="builtintype" id="7866790">int32</span><span class="op" id="7866795">(</span><span class="op" id="7866796">-</span><span class="num" id="7866797">42</span><span class="op" id="7866799">)</span><span class="op" id="7866800">,</span>&nbsp;<span class="string" id="7866802">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7866809">}</span><span class="op" id="7866810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866814">{</span><span class="builtintype" id="7866815">uint32</span><span class="op" id="7866821">(</span><span class="num" id="7866822">42</span><span class="op" id="7866824">)</span><span class="op" id="7866825">,</span>&nbsp;<span class="string" id="7866827">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866833">}</span><span class="op" id="7866834">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866838">{</span><span class="builtintype" id="7866839">int16</span><span class="op" id="7866844">(</span><span class="op" id="7866845">-</span><span class="num" id="7866846">42</span><span class="op" id="7866848">)</span><span class="op" id="7866849">,</span>&nbsp;<span class="string" id="7866851">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7866858">}</span><span class="op" id="7866859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866863">{</span><span class="builtintype" id="7866864">uint16</span><span class="op" id="7866870">(</span><span class="num" id="7866871">42</span><span class="op" id="7866873">)</span><span class="op" id="7866874">,</span>&nbsp;<span class="string" id="7866876">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866882">}</span><span class="op" id="7866883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866887">{</span><span class="ident" id="7866888">int64</span><span class="op" id="7866893">(</span><span class="op" id="7866894">-</span><span class="num" id="7866895">42</span><span class="op" id="7866897">)</span><span class="op" id="7866898">,</span>&nbsp;<span class="string" id="7866900">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7866907">}</span><span class="op" id="7866908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866912">{</span><span class="ident" id="7866913">uint64</span><span class="op" id="7866919">(</span><span class="num" id="7866920">42</span><span class="op" id="7866922">)</span><span class="op" id="7866923">,</span>&nbsp;<span class="string" id="7866925">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7866931">}</span><span class="op" id="7866932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7866936">{</span><span class="ident" id="7866937">uint64</span><span class="op" id="7866943">(</span><span class="num" id="7866944">1</span><span class="op" id="7866945">)</span>&nbsp;<span class="op" id="7866947">&lt;&lt;</span>&nbsp;<span class="num" id="7866950">53</span><span class="op" id="7866952">,</span>&nbsp;<span class="string" id="7866954">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7866974">}</span><span class="op" id="7866975">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7866979">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7867031">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867085">{</span><span class="ident" id="7867086">uint64</span><span class="op" id="7867092">(</span><span class="num" id="7867093">1</span><span class="op" id="7867094">)</span><span class="op" id="7867095">&lt;&lt;</span><span class="num" id="7867097">53</span>&nbsp;<span class="op" id="7867100">+</span>&nbsp;<span class="num" id="7867102">1</span><span class="op" id="7867103">,</span>&nbsp;<span class="string" id="7867105">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7867125">}</span><span class="op" id="7867126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867130">{</span><span class="builtintype" id="7867131">float32</span><span class="op" id="7867138">(</span><span class="num" id="7867139">1.0</span><span class="op" id="7867142">)</span><span class="op" id="7867143">,</span>&nbsp;<span class="string" id="7867145">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7867150">}</span><span class="op" id="7867151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867155">{</span><span class="builtintype" id="7867156">float32</span><span class="op" id="7867163">(</span><span class="op" id="7867164">-</span><span class="num" id="7867165">1.0</span><span class="op" id="7867168">)</span><span class="op" id="7867169">,</span>&nbsp;<span class="string" id="7867171">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7867177">}</span><span class="op" id="7867178">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867182">{</span><span class="builtintype" id="7867183">float32</span><span class="op" id="7867190">(</span><span class="num" id="7867191">0.5</span><span class="op" id="7867194">)</span><span class="op" id="7867195">,</span>&nbsp;<span class="string" id="7867197">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7867204">}</span><span class="op" id="7867205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867209">{</span><span class="builtintype" id="7867210">float32</span><span class="op" id="7867217">(</span><span class="op" id="7867218">-</span><span class="num" id="7867219">0.5</span><span class="op" id="7867222">)</span><span class="op" id="7867223">,</span>&nbsp;<span class="string" id="7867225">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7867233">}</span><span class="op" id="7867234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867238">{</span><span class="builtintype" id="7867239">float32</span><span class="op" id="7867246">(</span><span class="num" id="7867247">1.0</span><span class="op" id="7867250">)</span>&nbsp;<span class="op" id="7867252">/</span>&nbsp;<span class="builtintype" id="7867254">float32</span><span class="op" id="7867261">(</span><span class="num" id="7867262">256</span><span class="op" id="7867265">)</span><span class="op" id="7867266">,</span>&nbsp;<span class="string" id="7867268">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7867282">}</span><span class="op" id="7867283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867287">{</span><span class="builtintype" id="7867288">float32</span><span class="op" id="7867295">(</span><span class="num" id="7867296">0</span><span class="op" id="7867297">)</span><span class="op" id="7867298">,</span>&nbsp;<span class="string" id="7867300">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7867305">}</span><span class="op" id="7867306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867310">{</span><span class="ident" id="7867311">math</span><span class="op" id="7867315">.</span><span class="ident" id="7867316">Copysign</span><span class="op" id="7867324">(</span><span class="num" id="7867325">0</span><span class="op" id="7867326">,</span>&nbsp;<span class="op" id="7867328">-</span><span class="num" id="7867329">1</span><span class="op" id="7867330">)</span><span class="op" id="7867331">,</span>&nbsp;<span class="string" id="7867333">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7867339">}</span><span class="op" id="7867340">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867344">{</span><span class="builtintype" id="7867345">float64</span><span class="op" id="7867352">(</span><span class="num" id="7867353">1.0</span><span class="op" id="7867356">)</span><span class="op" id="7867357">,</span>&nbsp;<span class="string" id="7867359">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7867364">}</span><span class="op" id="7867365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867369">{</span><span class="builtintype" id="7867370">float64</span><span class="op" id="7867377">(</span><span class="op" id="7867378">-</span><span class="num" id="7867379">1.0</span><span class="op" id="7867382">)</span><span class="op" id="7867383">,</span>&nbsp;<span class="string" id="7867385">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7867391">}</span><span class="op" id="7867392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867396">{</span><span class="builtintype" id="7867397">float64</span><span class="op" id="7867404">(</span><span class="num" id="7867405">0.5</span><span class="op" id="7867408">)</span><span class="op" id="7867409">,</span>&nbsp;<span class="string" id="7867411">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7867418">}</span><span class="op" id="7867419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867423">{</span><span class="builtintype" id="7867424">float64</span><span class="op" id="7867431">(</span><span class="op" id="7867432">-</span><span class="num" id="7867433">0.5</span><span class="op" id="7867436">)</span><span class="op" id="7867437">,</span>&nbsp;<span class="string" id="7867439">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7867447">}</span><span class="op" id="7867448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867452">{</span><span class="builtintype" id="7867453">float64</span><span class="op" id="7867460">(</span><span class="num" id="7867461">0</span><span class="op" id="7867462">)</span><span class="op" id="7867463">,</span>&nbsp;<span class="string" id="7867465">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7867470">}</span><span class="op" id="7867471">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867475">{</span><span class="ident" id="7867476">math</span><span class="op" id="7867480">.</span><span class="ident" id="7867481">Copysign</span><span class="op" id="7867489">(</span><span class="num" id="7867490">0</span><span class="op" id="7867491">,</span>&nbsp;<span class="op" id="7867493">-</span><span class="num" id="7867494">1</span><span class="op" id="7867495">)</span><span class="op" id="7867496">,</span>&nbsp;<span class="string" id="7867498">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7867504">}</span><span class="op" id="7867505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867509">{</span><span class="string" id="7867510">&#34;&#34;</span><span class="op" id="7867512">,</span>&nbsp;<span class="string" id="7867514">`&#34;&#34;`</span><span class="op" id="7867518">}</span><span class="op" id="7867519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867523">{</span><span class="string" id="7867524">&#34;foo&#34;</span><span class="op" id="7867529">,</span>&nbsp;<span class="string" id="7867531">`&#34;foo&#34;`</span><span class="op" id="7867538">}</span><span class="op" id="7867539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7867543">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867558">{</span><span class="string" id="7867559">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7867577">,</span>&nbsp;<span class="string" id="7867579">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7867599">}</span><span class="op" id="7867600">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7867604">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867652">{</span><span class="string" id="7867653">&#34;\t\x0b&#34;</span><span class="op" id="7867661">,</span>&nbsp;<span class="string" id="7867663">`&#34;\t\u000b&#34;`</span><span class="op" id="7867675">}</span><span class="op" id="7867676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867680">{</span><span class="keyword" id="7867681">struct</span><span class="op" id="7867687">{</span>&nbsp;<span class="ident" id="7867689">X</span><span class="op" id="7867690">,</span>&nbsp;<span class="ident" id="7867692">Y</span>&nbsp;<span class="builtintype" id="7867694">int</span>&nbsp;<span class="op" id="7867698">}</span><span class="op" id="7867699">{</span><span class="num" id="7867700">1</span><span class="op" id="7867701">,</span>&nbsp;<span class="num" id="7867703">2</span><span class="op" id="7867704">}</span><span class="op" id="7867705">,</span>&nbsp;<span class="string" id="7867707">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7867722">}</span><span class="op" id="7867723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867727">{</span><span class="op" id="7867728">[</span><span class="op" id="7867729">]</span><span class="keyword" id="7867730">interface</span><span class="op" id="7867739">{</span><span class="op" id="7867740">}</span><span class="op" id="7867741">{</span><span class="op" id="7867742">}</span><span class="op" id="7867743">,</span>&nbsp;<span class="string" id="7867745">&#34;[]&#34;</span><span class="op" id="7867749">}</span><span class="op" id="7867750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867754">{</span><span class="op" id="7867755">[</span><span class="op" id="7867756">]</span><span class="keyword" id="7867757">interface</span><span class="op" id="7867766">{</span><span class="op" id="7867767">}</span><span class="op" id="7867768">{</span><span class="num" id="7867769">42</span><span class="op" id="7867771">,</span>&nbsp;<span class="string" id="7867773">&#34;foo&#34;</span><span class="op" id="7867778">,</span>&nbsp;<span class="ident" id="7867780">nil</span><span class="op" id="7867783">}</span><span class="op" id="7867784">,</span>&nbsp;<span class="string" id="7867786">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7867803">}</span><span class="op" id="7867804">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867808">{</span><span class="op" id="7867809">[</span><span class="op" id="7867810">]</span><span class="builtintype" id="7867811">string</span><span class="op" id="7867817">{</span><span class="string" id="7867818">&#34;&lt;!--&#34;</span><span class="op" id="7867824">,</span>&nbsp;<span class="string" id="7867826">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7867837">,</span>&nbsp;<span class="string" id="7867839">&#34;--&gt;&#34;</span><span class="op" id="7867844">}</span><span class="op" id="7867845">,</span>&nbsp;<span class="string" id="7867847">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7867895">}</span><span class="op" id="7867896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867900">{</span><span class="string" id="7867901">&#34;&lt;!--&#34;</span><span class="op" id="7867907">,</span>&nbsp;<span class="string" id="7867909">`&#34;\u003c!--&#34;`</span><span class="op" id="7867922">}</span><span class="op" id="7867923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867927">{</span><span class="string" id="7867928">&#34;--&gt;&#34;</span><span class="op" id="7867933">,</span>&nbsp;<span class="string" id="7867935">`&#34;--\u003e&#34;`</span><span class="op" id="7867947">}</span><span class="op" id="7867948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867952">{</span><span class="string" id="7867953">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7867964">,</span>&nbsp;<span class="string" id="7867966">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7867984">}</span><span class="op" id="7867985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867989">{</span><span class="string" id="7867990">&#34;]]&gt;&#34;</span><span class="op" id="7867995">,</span>&nbsp;<span class="string" id="7867997">`&#34;]]\u003e&#34;`</span><span class="op" id="7868009">}</span><span class="op" id="7868010">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868014">{</span><span class="string" id="7868015">&#34;&lt;/script&#34;</span><span class="op" id="7868025">,</span>&nbsp;<span class="string" id="7868027">`&#34;\u003c/script&#34;`</span><span class="op" id="7868044">}</span><span class="op" id="7868045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868049">{</span><span class="string" id="7868050">&#34;\U0001D11E&#34;</span><span class="op" id="7868062">,</span>&nbsp;<span class="string" id="7868064">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7868080">}</span><span class="op" id="7868081">,</span>&nbsp;<span class="comment" id="7868083">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868109">for</span>&nbsp;<span class="ident" id="7868113">_</span><span class="op" id="7868114">,</span>&nbsp;<span class="ident" id="7868116">test</span>&nbsp;<span class="op" id="7868121">:=</span>&nbsp;<span class="keyword" id="7868124">range</span>&nbsp;<span class="ident" id="7868130">tests</span>&nbsp;<span class="op" id="7868136">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868140">if</span>&nbsp;<span class="ident" id="7868143">js</span>&nbsp;<span class="op" id="7868146">:=</span>&nbsp;<span class="ident" id="7868149">jsValEscaper</span><span class="op" id="7868161">(</span><span class="ident" id="7868162">test</span><span class="op" id="7868166">.</span><span class="ident" id="7868167">x</span><span class="op" id="7868168">)</span><span class="op" id="7868169">;</span>&nbsp;<span class="ident" id="7868171">js</span>&nbsp;<span class="op" id="7868174">!=</span>&nbsp;<span class="ident" id="7868177">test</span><span class="op" id="7868181">.</span><span class="ident" id="7868182">js</span>&nbsp;<span class="op" id="7868185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868190">t</span><span class="op" id="7868191">.</span><span class="ident" id="7868192">Errorf</span><span class="op" id="7868198">(</span><span class="string" id="7868199">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7868227">,</span>&nbsp;<span class="ident" id="7868229">test</span><span class="op" id="7868233">.</span><span class="ident" id="7868234">x</span><span class="op" id="7868235">,</span>&nbsp;<span class="ident" id="7868237">test</span><span class="op" id="7868241">.</span><span class="ident" id="7868242">js</span><span class="op" id="7868244">,</span>&nbsp;<span class="ident" id="7868246">js</span><span class="op" id="7868248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7868256">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7868313">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868330">a</span>&nbsp;<span class="op" id="7868332">:=</span>&nbsp;<span class="op" id="7868335">[</span><span class="op" id="7868336">]</span><span class="keyword" id="7868337">interface</span><span class="op" id="7868346">{</span><span class="op" id="7868347">}</span><span class="op" id="7868348">{</span><span class="ident" id="7868349">test</span><span class="op" id="7868353">.</span><span class="ident" id="7868354">x</span><span class="op" id="7868355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868359">want</span>&nbsp;<span class="op" id="7868364">:=</span>&nbsp;<span class="string" id="7868367">&#34;[&#34;</span>&nbsp;<span class="op" id="7868371">+</span>&nbsp;<span class="ident" id="7868373">strings</span><span class="op" id="7868380">.</span><span class="ident" id="7868381">TrimSpace</span><span class="op" id="7868390">(</span><span class="ident" id="7868391">test</span><span class="op" id="7868395">.</span><span class="ident" id="7868396">js</span><span class="op" id="7868398">)</span>&nbsp;<span class="op" id="7868400">+</span>&nbsp;<span class="string" id="7868402">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868408">if</span>&nbsp;<span class="ident" id="7868411">js</span>&nbsp;<span class="op" id="7868414">:=</span>&nbsp;<span class="ident" id="7868417">jsValEscaper</span><span class="op" id="7868429">(</span><span class="ident" id="7868430">a</span><span class="op" id="7868431">)</span><span class="op" id="7868432">;</span>&nbsp;<span class="ident" id="7868434">js</span>&nbsp;<span class="op" id="7868437">!=</span>&nbsp;<span class="ident" id="7868440">want</span>&nbsp;<span class="op" id="7868445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868450">t</span><span class="op" id="7868451">.</span><span class="ident" id="7868452">Errorf</span><span class="op" id="7868458">(</span><span class="string" id="7868459">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7868487">,</span>&nbsp;<span class="ident" id="7868489">a</span><span class="op" id="7868490">,</span>&nbsp;<span class="ident" id="7868492">want</span><span class="op" id="7868496">,</span>&nbsp;<span class="ident" id="7868498">js</span><span class="op" id="7868500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868504">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868507">}</span><br>
<span class="lineno"></span><span class="op" id="7868509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7868512">func</span>&nbsp;<span class="ident" id="7868517">TestJSStrEscaper</span><span class="op" id="7868533">(</span><span class="ident" id="7868534">t</span>&nbsp;<span class="op" id="7868536">*</span><span class="ident" id="7868537">testing</span><span class="op" id="7868544">.</span><span class="ident" id="7868545">T</span><span class="op" id="7868546">)</span>&nbsp;<span class="op" id="7868548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868551">tests</span>&nbsp;<span class="op" id="7868557">:=</span>&nbsp;<span class="op" id="7868560">[</span><span class="op" id="7868561">]</span><span class="keyword" id="7868562">struct</span>&nbsp;<span class="op" id="7868569">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868573">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7868577">interface</span><span class="op" id="7868586">{</span><span class="op" id="7868587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868591">esc</span>&nbsp;<span class="builtintype" id="7868595">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868603">}</span><span class="op" id="7868604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868608">{</span><span class="string" id="7868609">&#34;&#34;</span><span class="op" id="7868611">,</span>&nbsp;<span class="string" id="7868613">``</span><span class="op" id="7868615">}</span><span class="op" id="7868616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868620">{</span><span class="string" id="7868621">&#34;foo&#34;</span><span class="op" id="7868626">,</span>&nbsp;<span class="string" id="7868628">`foo`</span><span class="op" id="7868633">}</span><span class="op" id="7868634">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868638">{</span><span class="string" id="7868639">&#34;\u0000&#34;</span><span class="op" id="7868647">,</span>&nbsp;<span class="string" id="7868649">`\0`</span><span class="op" id="7868653">}</span><span class="op" id="7868654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868658">{</span><span class="string" id="7868659">&#34;\t&#34;</span><span class="op" id="7868663">,</span>&nbsp;<span class="string" id="7868665">`\t`</span><span class="op" id="7868669">}</span><span class="op" id="7868670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868674">{</span><span class="string" id="7868675">&#34;\n&#34;</span><span class="op" id="7868679">,</span>&nbsp;<span class="string" id="7868681">`\n`</span><span class="op" id="7868685">}</span><span class="op" id="7868686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868690">{</span><span class="string" id="7868691">&#34;\r&#34;</span><span class="op" id="7868695">,</span>&nbsp;<span class="string" id="7868697">`\r`</span><span class="op" id="7868701">}</span><span class="op" id="7868702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868706">{</span><span class="string" id="7868707">&#34;\u2028&#34;</span><span class="op" id="7868715">,</span>&nbsp;<span class="string" id="7868717">`\u2028`</span><span class="op" id="7868725">}</span><span class="op" id="7868726">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868730">{</span><span class="string" id="7868731">&#34;\u2029&#34;</span><span class="op" id="7868739">,</span>&nbsp;<span class="string" id="7868741">`\u2029`</span><span class="op" id="7868749">}</span><span class="op" id="7868750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868754">{</span><span class="string" id="7868755">&#34;\\&#34;</span><span class="op" id="7868759">,</span>&nbsp;<span class="string" id="7868761">`\\`</span><span class="op" id="7868765">}</span><span class="op" id="7868766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868770">{</span><span class="string" id="7868771">&#34;\\n&#34;</span><span class="op" id="7868776">,</span>&nbsp;<span class="string" id="7868778">`\\n`</span><span class="op" id="7868783">}</span><span class="op" id="7868784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868788">{</span><span class="string" id="7868789">&#34;foo\r\nbar&#34;</span><span class="op" id="7868801">,</span>&nbsp;<span class="string" id="7868803">`foo\r\nbar`</span><span class="op" id="7868815">}</span><span class="op" id="7868816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7868820">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868856">{</span><span class="string" id="7868857">`&#34;`</span><span class="op" id="7868860">,</span>&nbsp;<span class="string" id="7868862">`\x22`</span><span class="op" id="7868868">}</span><span class="op" id="7868869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868873">{</span><span class="string" id="7868874">`&#39;`</span><span class="op" id="7868877">,</span>&nbsp;<span class="string" id="7868879">`\x27`</span><span class="op" id="7868885">}</span><span class="op" id="7868886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7868890">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868945">{</span><span class="string" id="7868946">`&amp;amp;`</span><span class="op" id="7868953">,</span>&nbsp;<span class="string" id="7868955">`\x26amp;`</span><span class="op" id="7868965">}</span><span class="op" id="7868966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7868970">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869033">{</span><span class="string" id="7869034">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7869045">,</span>&nbsp;<span class="string" id="7869047">`\x3c\/script\x3e`</span><span class="op" id="7869065">}</span><span class="op" id="7869066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869070">{</span><span class="string" id="7869071">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7869082">,</span>&nbsp;<span class="string" id="7869084">`\x3c![CDATA[`</span><span class="op" id="7869098">}</span><span class="op" id="7869099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869103">{</span><span class="string" id="7869104">&#34;]]&gt;&#34;</span><span class="op" id="7869109">,</span>&nbsp;<span class="string" id="7869111">`]]\x3e`</span><span class="op" id="7869119">}</span><span class="op" id="7869120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869124">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869196">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869260">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869321">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869368">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869432">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869499">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869565">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869625">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869689">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869740">{</span><span class="string" id="7869741">&#34;&lt;!--&#34;</span><span class="op" id="7869747">,</span>&nbsp;<span class="string" id="7869749">`\x3c!--`</span><span class="op" id="7869758">}</span><span class="op" id="7869759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869763">{</span><span class="string" id="7869764">&#34;--&gt;&#34;</span><span class="op" id="7869769">,</span>&nbsp;<span class="string" id="7869771">`--\x3e`</span><span class="op" id="7869779">}</span><span class="op" id="7869780">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869784">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869844">{</span><span class="string" id="7869845">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7869888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7869893">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7869949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869953">}</span><span class="op" id="7869954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869958">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869986">{</span><span class="string" id="7869987">&#34;foo\xA0bar&#34;</span><span class="op" id="7869999">,</span>&nbsp;<span class="string" id="7870001">&#34;foo\xA0bar&#34;</span><span class="op" id="7870013">}</span><span class="op" id="7870014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7870018">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870053">{</span><span class="string" id="7870054">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7870074">,</span>&nbsp;<span class="string" id="7870076">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7870096">}</span><span class="op" id="7870097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870104">for</span>&nbsp;<span class="ident" id="7870108">_</span><span class="op" id="7870109">,</span>&nbsp;<span class="ident" id="7870111">test</span>&nbsp;<span class="op" id="7870116">:=</span>&nbsp;<span class="keyword" id="7870119">range</span>&nbsp;<span class="ident" id="7870125">tests</span>&nbsp;<span class="op" id="7870131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870135">esc</span>&nbsp;<span class="op" id="7870139">:=</span>&nbsp;<span class="ident" id="7870142">jsStrEscaper</span><span class="op" id="7870154">(</span><span class="ident" id="7870155">test</span><span class="op" id="7870159">.</span><span class="ident" id="7870160">x</span><span class="op" id="7870161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870165">if</span>&nbsp;<span class="ident" id="7870168">esc</span>&nbsp;<span class="op" id="7870172">!=</span>&nbsp;<span class="ident" id="7870175">test</span><span class="op" id="7870179">.</span><span class="ident" id="7870180">esc</span>&nbsp;<span class="op" id="7870184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870189">t</span><span class="op" id="7870190">.</span><span class="ident" id="7870191">Errorf</span><span class="op" id="7870197">(</span><span class="string" id="7870198">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7870218">,</span>&nbsp;<span class="ident" id="7870220">test</span><span class="op" id="7870224">.</span><span class="ident" id="7870225">x</span><span class="op" id="7870226">,</span>&nbsp;<span class="ident" id="7870228">test</span><span class="op" id="7870232">.</span><span class="ident" id="7870233">esc</span><span class="op" id="7870236">,</span>&nbsp;<span class="ident" id="7870238">esc</span><span class="op" id="7870241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870245">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870248">}</span><br>
<span class="lineno"></span><span class="op" id="7870250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870253">func</span>&nbsp;<span class="ident" id="7870258">TestJSRegexpEscaper</span><span class="op" id="7870277">(</span><span class="ident" id="7870278">t</span>&nbsp;<span class="op" id="7870280">*</span><span class="ident" id="7870281">testing</span><span class="op" id="7870288">.</span><span class="ident" id="7870289">T</span><span class="op" id="7870290">)</span>&nbsp;<span class="op" id="7870292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870295">tests</span>&nbsp;<span class="op" id="7870301">:=</span>&nbsp;<span class="op" id="7870304">[</span><span class="op" id="7870305">]</span><span class="keyword" id="7870306">struct</span>&nbsp;<span class="op" id="7870313">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870317">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870321">interface</span><span class="op" id="7870330">{</span><span class="op" id="7870331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870335">esc</span>&nbsp;<span class="builtintype" id="7870339">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870347">}</span><span class="op" id="7870348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870352">{</span><span class="string" id="7870353">&#34;&#34;</span><span class="op" id="7870355">,</span>&nbsp;<span class="string" id="7870357">`(?:)`</span><span class="op" id="7870363">}</span><span class="op" id="7870364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870368">{</span><span class="string" id="7870369">&#34;foo&#34;</span><span class="op" id="7870374">,</span>&nbsp;<span class="string" id="7870376">`foo`</span><span class="op" id="7870381">}</span><span class="op" id="7870382">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870386">{</span><span class="string" id="7870387">&#34;\u0000&#34;</span><span class="op" id="7870395">,</span>&nbsp;<span class="string" id="7870397">`\0`</span><span class="op" id="7870401">}</span><span class="op" id="7870402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870406">{</span><span class="string" id="7870407">&#34;\t&#34;</span><span class="op" id="7870411">,</span>&nbsp;<span class="string" id="7870413">`\t`</span><span class="op" id="7870417">}</span><span class="op" id="7870418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870422">{</span><span class="string" id="7870423">&#34;\n&#34;</span><span class="op" id="7870427">,</span>&nbsp;<span class="string" id="7870429">`\n`</span><span class="op" id="7870433">}</span><span class="op" id="7870434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870438">{</span><span class="string" id="7870439">&#34;\r&#34;</span><span class="op" id="7870443">,</span>&nbsp;<span class="string" id="7870445">`\r`</span><span class="op" id="7870449">}</span><span class="op" id="7870450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870454">{</span><span class="string" id="7870455">&#34;\u2028&#34;</span><span class="op" id="7870463">,</span>&nbsp;<span class="string" id="7870465">`\u2028`</span><span class="op" id="7870473">}</span><span class="op" id="7870474">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870478">{</span><span class="string" id="7870479">&#34;\u2029&#34;</span><span class="op" id="7870487">,</span>&nbsp;<span class="string" id="7870489">`\u2029`</span><span class="op" id="7870497">}</span><span class="op" id="7870498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870502">{</span><span class="string" id="7870503">&#34;\\&#34;</span><span class="op" id="7870507">,</span>&nbsp;<span class="string" id="7870509">`\\`</span><span class="op" id="7870513">}</span><span class="op" id="7870514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870518">{</span><span class="string" id="7870519">&#34;\\n&#34;</span><span class="op" id="7870524">,</span>&nbsp;<span class="string" id="7870526">`\\n`</span><span class="op" id="7870531">}</span><span class="op" id="7870532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870536">{</span><span class="string" id="7870537">&#34;foo\r\nbar&#34;</span><span class="op" id="7870549">,</span>&nbsp;<span class="string" id="7870551">`foo\r\nbar`</span><span class="op" id="7870563">}</span><span class="op" id="7870564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7870568">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870604">{</span><span class="string" id="7870605">`&#34;`</span><span class="op" id="7870608">,</span>&nbsp;<span class="string" id="7870610">`\x22`</span><span class="op" id="7870616">}</span><span class="op" id="7870617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870621">{</span><span class="string" id="7870622">`&#39;`</span><span class="op" id="7870625">,</span>&nbsp;<span class="string" id="7870627">`\x27`</span><span class="op" id="7870633">}</span><span class="op" id="7870634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7870638">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870693">{</span><span class="string" id="7870694">`&amp;amp;`</span><span class="op" id="7870701">,</span>&nbsp;<span class="string" id="7870703">`\x26amp;`</span><span class="op" id="7870713">}</span><span class="op" id="7870714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7870718">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870781">{</span><span class="string" id="7870782">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7870793">,</span>&nbsp;<span class="string" id="7870795">`\x3c\/script\x3e`</span><span class="op" id="7870813">}</span><span class="op" id="7870814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870818">{</span><span class="string" id="7870819">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7870830">,</span>&nbsp;<span class="string" id="7870832">`\x3c!\[CDATA\[`</span><span class="op" id="7870848">}</span><span class="op" id="7870849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870853">{</span><span class="string" id="7870854">&#34;]]&gt;&#34;</span><span class="op" id="7870859">,</span>&nbsp;<span class="string" id="7870861">`\]\]\x3e`</span><span class="op" id="7870871">}</span><span class="op" id="7870872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7870876">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870902">{</span><span class="string" id="7870903">&#34;&lt;!--&#34;</span><span class="op" id="7870909">,</span>&nbsp;<span class="string" id="7870911">`\x3c!\-\-`</span><span class="op" id="7870922">}</span><span class="op" id="7870923">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870927">{</span><span class="string" id="7870928">&#34;--&gt;&#34;</span><span class="op" id="7870933">,</span>&nbsp;<span class="string" id="7870935">`\-\-\x3e`</span><span class="op" id="7870945">}</span><span class="op" id="7870946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870950">{</span><span class="string" id="7870951">&#34;*&#34;</span><span class="op" id="7870954">,</span>&nbsp;<span class="string" id="7870956">`\*`</span><span class="op" id="7870960">}</span><span class="op" id="7870961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870965">{</span><span class="string" id="7870966">&#34;+&#34;</span><span class="op" id="7870969">,</span>&nbsp;<span class="string" id="7870971">`\x2b`</span><span class="op" id="7870977">}</span><span class="op" id="7870978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870982">{</span><span class="string" id="7870983">&#34;?&#34;</span><span class="op" id="7870986">,</span>&nbsp;<span class="string" id="7870988">`\?`</span><span class="op" id="7870992">}</span><span class="op" id="7870993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870997">{</span><span class="string" id="7870998">&#34;[](){}&#34;</span><span class="op" id="7871006">,</span>&nbsp;<span class="string" id="7871008">`\[\]\(\)\{\}`</span><span class="op" id="7871022">}</span><span class="op" id="7871023">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871027">{</span><span class="string" id="7871028">&#34;$foo|x.y&#34;</span><span class="op" id="7871038">,</span>&nbsp;<span class="string" id="7871040">`\$foo\|x\.y`</span><span class="op" id="7871053">}</span><span class="op" id="7871054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871058">{</span><span class="string" id="7871059">&#34;x^y&#34;</span><span class="op" id="7871064">,</span>&nbsp;<span class="string" id="7871066">`x\^y`</span><span class="op" id="7871072">}</span><span class="op" id="7871073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871080">for</span>&nbsp;<span class="ident" id="7871084">_</span><span class="op" id="7871085">,</span>&nbsp;<span class="ident" id="7871087">test</span>&nbsp;<span class="op" id="7871092">:=</span>&nbsp;<span class="keyword" id="7871095">range</span>&nbsp;<span class="ident" id="7871101">tests</span>&nbsp;<span class="op" id="7871107">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871111">esc</span>&nbsp;<span class="op" id="7871115">:=</span>&nbsp;<span class="ident" id="7871118">jsRegexpEscaper</span><span class="op" id="7871133">(</span><span class="ident" id="7871134">test</span><span class="op" id="7871138">.</span><span class="ident" id="7871139">x</span><span class="op" id="7871140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871144">if</span>&nbsp;<span class="ident" id="7871147">esc</span>&nbsp;<span class="op" id="7871151">!=</span>&nbsp;<span class="ident" id="7871154">test</span><span class="op" id="7871158">.</span><span class="ident" id="7871159">esc</span>&nbsp;<span class="op" id="7871163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871168">t</span><span class="op" id="7871169">.</span><span class="ident" id="7871170">Errorf</span><span class="op" id="7871176">(</span><span class="string" id="7871177">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7871197">,</span>&nbsp;<span class="ident" id="7871199">test</span><span class="op" id="7871203">.</span><span class="ident" id="7871204">x</span><span class="op" id="7871205">,</span>&nbsp;<span class="ident" id="7871207">test</span><span class="op" id="7871211">.</span><span class="ident" id="7871212">esc</span><span class="op" id="7871215">,</span>&nbsp;<span class="ident" id="7871217">esc</span><span class="op" id="7871220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871227">}</span><br>
<span class="lineno">265</span><span class="op" id="7871229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871232">func</span>&nbsp;<span class="ident" id="7871237">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7871280">(</span><span class="ident" id="7871281">t</span>&nbsp;<span class="op" id="7871283">*</span><span class="ident" id="7871284">testing</span><span class="op" id="7871291">.</span><span class="ident" id="7871292">T</span><span class="op" id="7871293">)</span>&nbsp;<span class="op" id="7871295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871298">input</span>&nbsp;<span class="op" id="7871304">:=</span>&nbsp;<span class="op" id="7871307">(</span><span class="string" id="7871308">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7871369">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871373">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7871440">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871444">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7871463">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871467">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7871486">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871490">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7871509">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871513">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7871532">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871536">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7871555">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871559">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7871581">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871585">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7871627">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871631">tests</span>&nbsp;<span class="op" id="7871637">:=</span>&nbsp;<span class="op" id="7871640">[</span><span class="op" id="7871641">]</span><span class="keyword" id="7871642">struct</span>&nbsp;<span class="op" id="7871649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871653">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7871661">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871670">escaper</span>&nbsp;<span class="keyword" id="7871678">func</span><span class="op" id="7871682">(</span><span class="op" id="7871683">...</span><span class="keyword" id="7871686">interface</span><span class="op" id="7871695">{</span><span class="op" id="7871696">}</span><span class="op" id="7871697">)</span>&nbsp;<span class="builtintype" id="7871699">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871708">escaped</span>&nbsp;<span class="builtintype" id="7871716">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871724">}</span><span class="op" id="7871725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871734">&#34;jsStrEscaper&#34;</span><span class="op" id="7871748">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871753">jsStrEscaper</span><span class="op" id="7871765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871770">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7871804">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871810">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7871842">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871848">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7871883">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871889">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7871924">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871930">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7871962">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871968">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7871993">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871999">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7872018">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872024">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7872044">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872050">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7872069">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872075">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7872097">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872103">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7872147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872151">}</span><span class="op" id="7872152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872161">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7872178">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872183">jsRegexpEscaper</span><span class="op" id="7872198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872203">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7872237">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872243">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7872275">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872281">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7872316">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872322">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7872357">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872363">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7872401">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872407">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7872433">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872439">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7872458">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872464">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7872487">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872493">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7872512">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872518">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7872539">+</span>&nbsp;<span class="string" id="7872541">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7872550">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7872556">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7872600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872604">}</span><span class="op" id="7872605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872612">for</span>&nbsp;<span class="ident" id="7872616">_</span><span class="op" id="7872617">,</span>&nbsp;<span class="ident" id="7872619">test</span>&nbsp;<span class="op" id="7872624">:=</span>&nbsp;<span class="keyword" id="7872627">range</span>&nbsp;<span class="ident" id="7872633">tests</span>&nbsp;<span class="op" id="7872639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872643">if</span>&nbsp;<span class="ident" id="7872646">s</span>&nbsp;<span class="op" id="7872648">:=</span>&nbsp;<span class="ident" id="7872651">test</span><span class="op" id="7872655">.</span><span class="ident" id="7872656">escaper</span><span class="op" id="7872663">(</span><span class="ident" id="7872664">input</span><span class="op" id="7872669">)</span><span class="op" id="7872670">;</span>&nbsp;<span class="ident" id="7872672">s</span>&nbsp;<span class="op" id="7872674">!=</span>&nbsp;<span class="ident" id="7872677">test</span><span class="op" id="7872681">.</span><span class="ident" id="7872682">escaped</span>&nbsp;<span class="op" id="7872690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872695">t</span><span class="op" id="7872696">.</span><span class="ident" id="7872697">Errorf</span><span class="op" id="7872703">(</span><span class="string" id="7872704">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7872736">,</span>&nbsp;<span class="ident" id="7872738">test</span><span class="op" id="7872742">.</span><span class="ident" id="7872743">name</span><span class="op" id="7872747">,</span>&nbsp;<span class="ident" id="7872749">test</span><span class="op" id="7872753">.</span><span class="ident" id="7872754">escaped</span><span class="op" id="7872761">,</span>&nbsp;<span class="ident" id="7872763">s</span><span class="op" id="7872764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872769">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872780">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7872785">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7872835">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872884">var</span>&nbsp;<span class="ident" id="7872888">buf</span>&nbsp;<span class="ident" id="7872892">bytes</span><span class="op" id="7872897">.</span><span class="ident" id="7872898">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872907">for</span>&nbsp;<span class="ident" id="7872911">_</span><span class="op" id="7872912">,</span>&nbsp;<span class="ident" id="7872914">c</span>&nbsp;<span class="op" id="7872916">:=</span>&nbsp;<span class="keyword" id="7872919">range</span>&nbsp;<span class="ident" id="7872925">input</span>&nbsp;<span class="op" id="7872931">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872936">buf</span><span class="op" id="7872939">.</span><span class="ident" id="7872940">WriteString</span><span class="op" id="7872951">(</span><span class="ident" id="7872952">test</span><span class="op" id="7872956">.</span><span class="ident" id="7872957">escaper</span><span class="op" id="7872964">(</span><span class="builtintype" id="7872965">string</span><span class="op" id="7872971">(</span><span class="ident" id="7872972">c</span><span class="op" id="7872973">)</span><span class="op" id="7872974">)</span><span class="op" id="7872975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872984">if</span>&nbsp;<span class="ident" id="7872987">s</span>&nbsp;<span class="op" id="7872989">:=</span>&nbsp;<span class="ident" id="7872992">buf</span><span class="op" id="7872995">.</span><span class="ident" id="7872996">String</span><span class="op" id="7873002">(</span><span class="op" id="7873003">)</span><span class="op" id="7873004">;</span>&nbsp;<span class="ident" id="7873006">s</span>&nbsp;<span class="op" id="7873008">!=</span>&nbsp;<span class="ident" id="7873011">test</span><span class="op" id="7873015">.</span><span class="ident" id="7873016">escaped</span>&nbsp;<span class="op" id="7873024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873029">t</span><span class="op" id="7873030">.</span><span class="ident" id="7873031">Errorf</span><span class="op" id="7873037">(</span><span class="string" id="7873038">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7873075">,</span>&nbsp;<span class="ident" id="7873077">test</span><span class="op" id="7873081">.</span><span class="ident" id="7873082">name</span><span class="op" id="7873086">,</span>&nbsp;<span class="ident" id="7873088">test</span><span class="op" id="7873092">.</span><span class="ident" id="7873093">escaped</span><span class="op" id="7873100">,</span>&nbsp;<span class="ident" id="7873102">s</span><span class="op" id="7873103">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873108">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873122">}</span><br>
<span class="lineno"></span><span class="op" id="7873124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7873127">func</span>&nbsp;<span class="ident" id="7873132">BenchmarkJSValEscaperWithNum</span><span class="op" id="7873160">(</span><span class="ident" id="7873161">b</span>&nbsp;<span class="op" id="7873163">*</span><span class="ident" id="7873164">testing</span><span class="op" id="7873171">.</span><span class="ident" id="7873172">B</span><span class="op" id="7873173">)</span>&nbsp;<span class="op" id="7873175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873178">for</span>&nbsp;<span class="ident" id="7873182">i</span>&nbsp;<span class="op" id="7873184">:=</span>&nbsp;<span class="num" id="7873187">0</span><span class="op" id="7873188">;</span>&nbsp;<span class="ident" id="7873190">i</span>&nbsp;<span class="op" id="7873192">&lt;</span>&nbsp;<span class="ident" id="7873194">b</span><span class="op" id="7873195">.</span><span class="ident" id="7873196">N</span><span class="op" id="7873197">;</span>&nbsp;<span class="ident" id="7873199">i</span><span class="op" id="7873200">++</span>&nbsp;<span class="op" id="7873203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873207">jsValEscaper</span><span class="op" id="7873219">(</span><span class="num" id="7873220">3.141592654</span><span class="op" id="7873231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873234">}</span><br>
<span class="lineno"></span><span class="op" id="7873236">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7873239">func</span>&nbsp;<span class="ident" id="7873244">BenchmarkJSValEscaperWithStr</span><span class="op" id="7873272">(</span><span class="ident" id="7873273">b</span>&nbsp;<span class="op" id="7873275">*</span><span class="ident" id="7873276">testing</span><span class="op" id="7873283">.</span><span class="ident" id="7873284">B</span><span class="op" id="7873285">)</span>&nbsp;<span class="op" id="7873287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873290">for</span>&nbsp;<span class="ident" id="7873294">i</span>&nbsp;<span class="op" id="7873296">:=</span>&nbsp;<span class="num" id="7873299">0</span><span class="op" id="7873300">;</span>&nbsp;<span class="ident" id="7873302">i</span>&nbsp;<span class="op" id="7873304">&lt;</span>&nbsp;<span class="ident" id="7873306">b</span><span class="op" id="7873307">.</span><span class="ident" id="7873308">N</span><span class="op" id="7873309">;</span>&nbsp;<span class="ident" id="7873311">i</span><span class="op" id="7873312">++</span>&nbsp;<span class="op" id="7873315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873319">jsValEscaper</span><span class="op" id="7873331">(</span><span class="string" id="7873332">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7873453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873456">}</span><br>
<span class="lineno">345</span><span class="op" id="7873458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7873461">func</span>&nbsp;<span class="ident" id="7873466">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7873504">(</span><span class="ident" id="7873505">b</span>&nbsp;<span class="op" id="7873507">*</span><span class="ident" id="7873508">testing</span><span class="op" id="7873515">.</span><span class="ident" id="7873516">B</span><span class="op" id="7873517">)</span>&nbsp;<span class="op" id="7873519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873522">for</span>&nbsp;<span class="ident" id="7873526">i</span>&nbsp;<span class="op" id="7873528">:=</span>&nbsp;<span class="num" id="7873531">0</span><span class="op" id="7873532">;</span>&nbsp;<span class="ident" id="7873534">i</span>&nbsp;<span class="op" id="7873536">&lt;</span>&nbsp;<span class="ident" id="7873538">b</span><span class="op" id="7873539">.</span><span class="ident" id="7873540">N</span><span class="op" id="7873541">;</span>&nbsp;<span class="ident" id="7873543">i</span><span class="op" id="7873544">++</span>&nbsp;<span class="op" id="7873547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873551">jsValEscaper</span><span class="op" id="7873563">(</span><span class="string" id="7873564">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7873610">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873613">}</span><br>
<span class="lineno"></span><span class="op" id="7873615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7873618">func</span>&nbsp;<span class="ident" id="7873623">BenchmarkJSValEscaperWithObj</span><span class="op" id="7873651">(</span><span class="ident" id="7873652">b</span>&nbsp;<span class="op" id="7873654">*</span><span class="ident" id="7873655">testing</span><span class="op" id="7873662">.</span><span class="ident" id="7873663">B</span><span class="op" id="7873664">)</span>&nbsp;<span class="op" id="7873666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873669">o</span>&nbsp;<span class="op" id="7873671">:=</span>&nbsp;<span class="keyword" id="7873674">struct</span>&nbsp;<span class="op" id="7873681">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873685">S</span>&nbsp;<span class="builtintype" id="7873687">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873696">N</span>&nbsp;<span class="builtintype" id="7873698">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873703">}</span><span class="op" id="7873704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873708">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7873835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7873839">42</span><span class="op" id="7873841">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873847">for</span>&nbsp;<span class="ident" id="7873851">i</span>&nbsp;<span class="op" id="7873853">:=</span>&nbsp;<span class="num" id="7873856">0</span><span class="op" id="7873857">;</span>&nbsp;<span class="ident" id="7873859">i</span>&nbsp;<span class="op" id="7873861">&lt;</span>&nbsp;<span class="ident" id="7873863">b</span><span class="op" id="7873864">.</span><span class="ident" id="7873865">N</span><span class="op" id="7873866">;</span>&nbsp;<span class="ident" id="7873868">i</span><span class="op" id="7873869">++</span>&nbsp;<span class="op" id="7873872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873876">jsValEscaper</span><span class="op" id="7873888">(</span><span class="ident" id="7873889">o</span><span class="op" id="7873890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873893">}</span><br>
<span class="lineno"></span><span class="op" id="7873895">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7873898">func</span>&nbsp;<span class="ident" id="7873903">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7873941">(</span><span class="ident" id="7873942">b</span>&nbsp;<span class="op" id="7873944">*</span><span class="ident" id="7873945">testing</span><span class="op" id="7873952">.</span><span class="ident" id="7873953">B</span><span class="op" id="7873954">)</span>&nbsp;<span class="op" id="7873956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873959">o</span>&nbsp;<span class="op" id="7873961">:=</span>&nbsp;<span class="keyword" id="7873964">struct</span>&nbsp;<span class="op" id="7873971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873975">S</span>&nbsp;<span class="builtintype" id="7873977">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873986">N</span>&nbsp;<span class="builtintype" id="7873988">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873993">}</span><span class="op" id="7873994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873998">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7874044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7874048">42</span><span class="op" id="7874050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874056">for</span>&nbsp;<span class="ident" id="7874060">i</span>&nbsp;<span class="op" id="7874062">:=</span>&nbsp;<span class="num" id="7874065">0</span><span class="op" id="7874066">;</span>&nbsp;<span class="ident" id="7874068">i</span>&nbsp;<span class="op" id="7874070">&lt;</span>&nbsp;<span class="ident" id="7874072">b</span><span class="op" id="7874073">.</span><span class="ident" id="7874074">N</span><span class="op" id="7874075">;</span>&nbsp;<span class="ident" id="7874077">i</span><span class="op" id="7874078">++</span>&nbsp;<span class="op" id="7874081">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874085">jsValEscaper</span><span class="op" id="7874097">(</span><span class="ident" id="7874098">o</span><span class="op" id="7874099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874102">}</span><br>
<span class="lineno"></span><span class="op" id="7874104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7874107">func</span>&nbsp;<span class="ident" id="7874112">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7874143">(</span><span class="ident" id="7874144">b</span>&nbsp;<span class="op" id="7874146">*</span><span class="ident" id="7874147">testing</span><span class="op" id="7874154">.</span><span class="ident" id="7874155">B</span><span class="op" id="7874156">)</span>&nbsp;<span class="op" id="7874158">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874161">for</span>&nbsp;<span class="ident" id="7874165">i</span>&nbsp;<span class="op" id="7874167">:=</span>&nbsp;<span class="num" id="7874170">0</span><span class="op" id="7874171">;</span>&nbsp;<span class="ident" id="7874173">i</span>&nbsp;<span class="op" id="7874175">&lt;</span>&nbsp;<span class="ident" id="7874177">b</span><span class="op" id="7874178">.</span><span class="ident" id="7874179">N</span><span class="op" id="7874180">;</span>&nbsp;<span class="ident" id="7874182">i</span><span class="op" id="7874183">++</span>&nbsp;<span class="op" id="7874186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874190">jsStrEscaper</span><span class="op" id="7874202">(</span><span class="string" id="7874203">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7874250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874253">}</span><br>
<span class="lineno"></span><span class="op" id="7874255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7874258">func</span>&nbsp;<span class="ident" id="7874263">BenchmarkJSStrEscaper</span><span class="op" id="7874284">(</span><span class="ident" id="7874285">b</span>&nbsp;<span class="op" id="7874287">*</span><span class="ident" id="7874288">testing</span><span class="op" id="7874295">.</span><span class="ident" id="7874296">B</span><span class="op" id="7874297">)</span>&nbsp;<span class="op" id="7874299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874302">for</span>&nbsp;<span class="ident" id="7874306">i</span>&nbsp;<span class="op" id="7874308">:=</span>&nbsp;<span class="num" id="7874311">0</span><span class="op" id="7874312">;</span>&nbsp;<span class="ident" id="7874314">i</span>&nbsp;<span class="op" id="7874316">&lt;</span>&nbsp;<span class="ident" id="7874318">b</span><span class="op" id="7874319">.</span><span class="ident" id="7874320">N</span><span class="op" id="7874321">;</span>&nbsp;<span class="ident" id="7874323">i</span><span class="op" id="7874324">++</span>&nbsp;<span class="op" id="7874327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874331">jsStrEscaper</span><span class="op" id="7874343">(</span><span class="string" id="7874344">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7874465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874468">}</span><br>
<span class="lineno"></span><span class="op" id="7874470">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7874473">func</span>&nbsp;<span class="ident" id="7874478">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7874512">(</span><span class="ident" id="7874513">b</span>&nbsp;<span class="op" id="7874515">*</span><span class="ident" id="7874516">testing</span><span class="op" id="7874523">.</span><span class="ident" id="7874524">B</span><span class="op" id="7874525">)</span>&nbsp;<span class="op" id="7874527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874530">for</span>&nbsp;<span class="ident" id="7874534">i</span>&nbsp;<span class="op" id="7874536">:=</span>&nbsp;<span class="num" id="7874539">0</span><span class="op" id="7874540">;</span>&nbsp;<span class="ident" id="7874542">i</span>&nbsp;<span class="op" id="7874544">&lt;</span>&nbsp;<span class="ident" id="7874546">b</span><span class="op" id="7874547">.</span><span class="ident" id="7874548">N</span><span class="op" id="7874549">;</span>&nbsp;<span class="ident" id="7874551">i</span><span class="op" id="7874552">++</span>&nbsp;<span class="op" id="7874555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874559">jsRegexpEscaper</span><span class="op" id="7874574">(</span><span class="string" id="7874575">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7874621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874624">}</span><br>
<span class="lineno">395</span><span class="op" id="7874626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7874629">func</span>&nbsp;<span class="ident" id="7874634">BenchmarkJSRegexpEscaper</span><span class="op" id="7874658">(</span><span class="ident" id="7874659">b</span>&nbsp;<span class="op" id="7874661">*</span><span class="ident" id="7874662">testing</span><span class="op" id="7874669">.</span><span class="ident" id="7874670">B</span><span class="op" id="7874671">)</span>&nbsp;<span class="op" id="7874673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874676">for</span>&nbsp;<span class="ident" id="7874680">i</span>&nbsp;<span class="op" id="7874682">:=</span>&nbsp;<span class="num" id="7874685">0</span><span class="op" id="7874686">;</span>&nbsp;<span class="ident" id="7874688">i</span>&nbsp;<span class="op" id="7874690">&lt;</span>&nbsp;<span class="ident" id="7874692">b</span><span class="op" id="7874693">.</span><span class="ident" id="7874694">N</span><span class="op" id="7874695">;</span>&nbsp;<span class="ident" id="7874697">i</span><span class="op" id="7874698">++</span>&nbsp;<span class="op" id="7874701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874705">jsRegexpEscaper</span><span class="op" id="7874720">(</span><span class="string" id="7874721">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7874842">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874845">}</span><br>
<span class="lineno"></span><span class="op" id="7874847">}</span>
</div>
</body>
</html>
