<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html" class="current">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3137394">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3137449">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3137503">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3137554">package</span>&nbsp;<span class="ident" id="3137562">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3137570">import</span>&nbsp;<span class="op" id="3137577">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3137580">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3137591">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3137600">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3137603">const</span>&nbsp;<span class="ident" id="3137609">wordSize</span>&nbsp;<span class="op" id="3137618">=</span>&nbsp;<span class="builtintype" id="3137620">int</span><span class="op" id="3137623">(</span><span class="ident" id="3137624">unsafe</span><span class="op" id="3137630">.</span><span class="ident" id="3137631">Sizeof</span><span class="op" id="3137637">(</span><span class="builtintype" id="3137638">uintptr</span><span class="op" id="3137645">(</span><span class="num" id="3137646">0</span><span class="op" id="3137647">)</span><span class="op" id="3137648">)</span><span class="op" id="3137649">)</span><br>
<span class="lineno"></span><span class="keyword" id="3137651">const</span>&nbsp;<span class="ident" id="3137657">supportsUnaligned</span>&nbsp;<span class="op" id="3137675">=</span>&nbsp;<span class="ident" id="3137677">runtime</span><span class="op" id="3137684">.</span><span class="ident" id="3137685">GOARCH</span>&nbsp;<span class="op" id="3137692">==</span>&nbsp;<span class="string" id="3137695">&#34;386&#34;</span>&nbsp;<span class="op" id="3137701">||</span>&nbsp;<span class="ident" id="3137704">runtime</span><span class="op" id="3137711">.</span><span class="ident" id="3137712">GOARCH</span>&nbsp;<span class="op" id="3137719">==</span>&nbsp;<span class="string" id="3137722">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3137731">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3137797">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3137831">func</span>&nbsp;<span class="ident" id="3137836">fastXORBytes</span><span class="op" id="3137848">(</span><span class="ident" id="3137849">dst</span><span class="op" id="3137852">,</span>&nbsp;<span class="ident" id="3137854">a</span><span class="op" id="3137855">,</span>&nbsp;<span class="ident" id="3137857">b</span>&nbsp;<span class="op" id="3137859">[</span><span class="op" id="3137860">]</span><span class="builtintype" id="3137861">byte</span><span class="op" id="3137865">)</span>&nbsp;<span class="builtintype" id="3137867">int</span>&nbsp;<span class="op" id="3137871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3137874">n</span>&nbsp;<span class="op" id="3137876">:=</span>&nbsp;<span class="builtinfunc" id="3137879">len</span><span class="op" id="3137882">(</span><span class="ident" id="3137883">a</span><span class="op" id="3137884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3137887">if</span>&nbsp;<span class="builtinfunc" id="3137890">len</span><span class="op" id="3137893">(</span><span class="ident" id="3137894">b</span><span class="op" id="3137895">)</span>&nbsp;<span class="op" id="3137897">&lt;</span>&nbsp;<span class="ident" id="3137899">n</span>&nbsp;<span class="op" id="3137901">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3137905">n</span>&nbsp;<span class="op" id="3137907">=</span>&nbsp;<span class="builtinfunc" id="3137909">len</span><span class="op" id="3137912">(</span><span class="ident" id="3137913">b</span><span class="op" id="3137914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3137917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3137921">w</span>&nbsp;<span class="op" id="3137923">:=</span>&nbsp;<span class="ident" id="3137926">n</span>&nbsp;<span class="op" id="3137928">/</span>&nbsp;<span class="ident" id="3137930">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3137940">if</span>&nbsp;<span class="ident" id="3137943">w</span>&nbsp;<span class="op" id="3137945">&gt;</span>&nbsp;<span class="num" id="3137947">0</span>&nbsp;<span class="op" id="3137949">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3137953">dw</span>&nbsp;<span class="op" id="3137956">:=</span>&nbsp;<span class="op" id="3137959">*</span><span class="op" id="3137960">(</span><span class="op" id="3137961">*</span><span class="op" id="3137962">[</span><span class="op" id="3137963">]</span><span class="builtintype" id="3137964">uintptr</span><span class="op" id="3137971">)</span><span class="op" id="3137972">(</span><span class="ident" id="3137973">unsafe</span><span class="op" id="3137979">.</span><span class="ident" id="3137980">Pointer</span><span class="op" id="3137987">(</span><span class="op" id="3137988">&amp;</span><span class="ident" id="3137989">dst</span><span class="op" id="3137992">)</span><span class="op" id="3137993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3137997">aw</span>&nbsp;<span class="op" id="3138000">:=</span>&nbsp;<span class="op" id="3138003">*</span><span class="op" id="3138004">(</span><span class="op" id="3138005">*</span><span class="op" id="3138006">[</span><span class="op" id="3138007">]</span><span class="builtintype" id="3138008">uintptr</span><span class="op" id="3138015">)</span><span class="op" id="3138016">(</span><span class="ident" id="3138017">unsafe</span><span class="op" id="3138023">.</span><span class="ident" id="3138024">Pointer</span><span class="op" id="3138031">(</span><span class="op" id="3138032">&amp;</span><span class="ident" id="3138033">a</span><span class="op" id="3138034">)</span><span class="op" id="3138035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138039">bw</span>&nbsp;<span class="op" id="3138042">:=</span>&nbsp;<span class="op" id="3138045">*</span><span class="op" id="3138046">(</span><span class="op" id="3138047">*</span><span class="op" id="3138048">[</span><span class="op" id="3138049">]</span><span class="builtintype" id="3138050">uintptr</span><span class="op" id="3138057">)</span><span class="op" id="3138058">(</span><span class="ident" id="3138059">unsafe</span><span class="op" id="3138065">.</span><span class="ident" id="3138066">Pointer</span><span class="op" id="3138073">(</span><span class="op" id="3138074">&amp;</span><span class="ident" id="3138075">b</span><span class="op" id="3138076">)</span><span class="op" id="3138077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138081">for</span>&nbsp;<span class="ident" id="3138085">i</span>&nbsp;<span class="op" id="3138087">:=</span>&nbsp;<span class="num" id="3138090">0</span><span class="op" id="3138091">;</span>&nbsp;<span class="ident" id="3138093">i</span>&nbsp;<span class="op" id="3138095">&lt;</span>&nbsp;<span class="ident" id="3138097">w</span><span class="op" id="3138098">;</span>&nbsp;<span class="ident" id="3138100">i</span><span class="op" id="3138101">++</span>&nbsp;<span class="op" id="3138104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138109">dw</span><span class="op" id="3138111">[</span><span class="ident" id="3138112">i</span><span class="op" id="3138113">]</span>&nbsp;<span class="op" id="3138115">=</span>&nbsp;<span class="ident" id="3138117">aw</span><span class="op" id="3138119">[</span><span class="ident" id="3138120">i</span><span class="op" id="3138121">]</span>&nbsp;<span class="op" id="3138123">^</span>&nbsp;<span class="ident" id="3138125">bw</span><span class="op" id="3138127">[</span><span class="ident" id="3138128">i</span><span class="op" id="3138129">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138140">for</span>&nbsp;<span class="ident" id="3138144">i</span>&nbsp;<span class="op" id="3138146">:=</span>&nbsp;<span class="op" id="3138149">(</span><span class="ident" id="3138150">n</span>&nbsp;<span class="op" id="3138152">-</span>&nbsp;<span class="ident" id="3138154">n</span><span class="op" id="3138155">%</span><span class="ident" id="3138156">wordSize</span><span class="op" id="3138164">)</span><span class="op" id="3138165">;</span>&nbsp;<span class="ident" id="3138167">i</span>&nbsp;<span class="op" id="3138169">&lt;</span>&nbsp;<span class="ident" id="3138171">n</span><span class="op" id="3138172">;</span>&nbsp;<span class="ident" id="3138174">i</span><span class="op" id="3138175">++</span>&nbsp;<span class="op" id="3138178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138182">dst</span><span class="op" id="3138185">[</span><span class="ident" id="3138186">i</span><span class="op" id="3138187">]</span>&nbsp;<span class="op" id="3138189">=</span>&nbsp;<span class="ident" id="3138191">a</span><span class="op" id="3138192">[</span><span class="ident" id="3138193">i</span><span class="op" id="3138194">]</span>&nbsp;<span class="op" id="3138196">^</span>&nbsp;<span class="ident" id="3138198">b</span><span class="op" id="3138199">[</span><span class="ident" id="3138200">i</span><span class="op" id="3138201">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138208">return</span>&nbsp;<span class="ident" id="3138215">n</span><br>
<span class="lineno"></span><span class="op" id="3138217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3138220">func</span>&nbsp;<span class="ident" id="3138225">safeXORBytes</span><span class="op" id="3138237">(</span><span class="ident" id="3138238">dst</span><span class="op" id="3138241">,</span>&nbsp;<span class="ident" id="3138243">a</span><span class="op" id="3138244">,</span>&nbsp;<span class="ident" id="3138246">b</span>&nbsp;<span class="op" id="3138248">[</span><span class="op" id="3138249">]</span><span class="builtintype" id="3138250">byte</span><span class="op" id="3138254">)</span>&nbsp;<span class="builtintype" id="3138256">int</span>&nbsp;<span class="op" id="3138260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138263">n</span>&nbsp;<span class="op" id="3138265">:=</span>&nbsp;<span class="builtinfunc" id="3138268">len</span><span class="op" id="3138271">(</span><span class="ident" id="3138272">a</span><span class="op" id="3138273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138276">if</span>&nbsp;<span class="builtinfunc" id="3138279">len</span><span class="op" id="3138282">(</span><span class="ident" id="3138283">b</span><span class="op" id="3138284">)</span>&nbsp;<span class="op" id="3138286">&lt;</span>&nbsp;<span class="ident" id="3138288">n</span>&nbsp;<span class="op" id="3138290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138294">n</span>&nbsp;<span class="op" id="3138296">=</span>&nbsp;<span class="builtinfunc" id="3138298">len</span><span class="op" id="3138301">(</span><span class="ident" id="3138302">b</span><span class="op" id="3138303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138306">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138309">for</span>&nbsp;<span class="ident" id="3138313">i</span>&nbsp;<span class="op" id="3138315">:=</span>&nbsp;<span class="num" id="3138318">0</span><span class="op" id="3138319">;</span>&nbsp;<span class="ident" id="3138321">i</span>&nbsp;<span class="op" id="3138323">&lt;</span>&nbsp;<span class="ident" id="3138325">n</span><span class="op" id="3138326">;</span>&nbsp;<span class="ident" id="3138328">i</span><span class="op" id="3138329">++</span>&nbsp;<span class="op" id="3138332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3138336">dst</span><span class="op" id="3138339">[</span><span class="ident" id="3138340">i</span><span class="op" id="3138341">]</span>&nbsp;<span class="op" id="3138343">=</span>&nbsp;<span class="ident" id="3138345">a</span><span class="op" id="3138346">[</span><span class="ident" id="3138347">i</span><span class="op" id="3138348">]</span>&nbsp;<span class="op" id="3138350">^</span>&nbsp;<span class="ident" id="3138352">b</span><span class="op" id="3138353">[</span><span class="ident" id="3138354">i</span><span class="op" id="3138355">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138361">return</span>&nbsp;<span class="ident" id="3138368">n</span><br>
<span class="lineno"></span><span class="op" id="3138370">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3138373">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3138454">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3138499">func</span>&nbsp;<span class="ident" id="3138504">xorBytes</span><span class="op" id="3138512">(</span><span class="ident" id="3138513">dst</span><span class="op" id="3138516">,</span>&nbsp;<span class="ident" id="3138518">a</span><span class="op" id="3138519">,</span>&nbsp;<span class="ident" id="3138521">b</span>&nbsp;<span class="op" id="3138523">[</span><span class="op" id="3138524">]</span><span class="builtintype" id="3138525">byte</span><span class="op" id="3138529">)</span>&nbsp;<span class="builtintype" id="3138531">int</span>&nbsp;<span class="op" id="3138535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138538">if</span>&nbsp;<span class="ident" id="3138541">supportsUnaligned</span>&nbsp;<span class="op" id="3138559">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138563">return</span>&nbsp;<span class="ident" id="3138570">fastXORBytes</span><span class="op" id="3138582">(</span><span class="ident" id="3138583">dst</span><span class="op" id="3138586">,</span>&nbsp;<span class="ident" id="3138588">a</span><span class="op" id="3138589">,</span>&nbsp;<span class="ident" id="3138591">b</span><span class="op" id="3138592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138595">}</span>&nbsp;<span class="keyword" id="3138597">else</span>&nbsp;<span class="op" id="3138602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3138606">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3138662">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3138716">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3138771">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3138816">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3138834">return</span>&nbsp;<span class="ident" id="3138841">safeXORBytes</span><span class="op" id="3138853">(</span><span class="ident" id="3138854">dst</span><span class="op" id="3138857">,</span>&nbsp;<span class="ident" id="3138859">a</span><span class="op" id="3138860">,</span>&nbsp;<span class="ident" id="3138862">b</span><span class="op" id="3138863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3138866">}</span><br>
<span class="lineno"></span><span class="op" id="3138868">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3138871">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3138947">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3138999">func</span>&nbsp;<span class="ident" id="3139004">fastXORWords</span><span class="op" id="3139016">(</span><span class="ident" id="3139017">dst</span><span class="op" id="3139020">,</span>&nbsp;<span class="ident" id="3139022">a</span><span class="op" id="3139023">,</span>&nbsp;<span class="ident" id="3139025">b</span>&nbsp;<span class="op" id="3139027">[</span><span class="op" id="3139028">]</span><span class="builtintype" id="3139029">byte</span><span class="op" id="3139033">)</span>&nbsp;<span class="op" id="3139035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139038">dw</span>&nbsp;<span class="op" id="3139041">:=</span>&nbsp;<span class="op" id="3139044">*</span><span class="op" id="3139045">(</span><span class="op" id="3139046">*</span><span class="op" id="3139047">[</span><span class="op" id="3139048">]</span><span class="builtintype" id="3139049">uintptr</span><span class="op" id="3139056">)</span><span class="op" id="3139057">(</span><span class="ident" id="3139058">unsafe</span><span class="op" id="3139064">.</span><span class="ident" id="3139065">Pointer</span><span class="op" id="3139072">(</span><span class="op" id="3139073">&amp;</span><span class="ident" id="3139074">dst</span><span class="op" id="3139077">)</span><span class="op" id="3139078">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139081">aw</span>&nbsp;<span class="op" id="3139084">:=</span>&nbsp;<span class="op" id="3139087">*</span><span class="op" id="3139088">(</span><span class="op" id="3139089">*</span><span class="op" id="3139090">[</span><span class="op" id="3139091">]</span><span class="builtintype" id="3139092">uintptr</span><span class="op" id="3139099">)</span><span class="op" id="3139100">(</span><span class="ident" id="3139101">unsafe</span><span class="op" id="3139107">.</span><span class="ident" id="3139108">Pointer</span><span class="op" id="3139115">(</span><span class="op" id="3139116">&amp;</span><span class="ident" id="3139117">a</span><span class="op" id="3139118">)</span><span class="op" id="3139119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139122">bw</span>&nbsp;<span class="op" id="3139125">:=</span>&nbsp;<span class="op" id="3139128">*</span><span class="op" id="3139129">(</span><span class="op" id="3139130">*</span><span class="op" id="3139131">[</span><span class="op" id="3139132">]</span><span class="builtintype" id="3139133">uintptr</span><span class="op" id="3139140">)</span><span class="op" id="3139141">(</span><span class="ident" id="3139142">unsafe</span><span class="op" id="3139148">.</span><span class="ident" id="3139149">Pointer</span><span class="op" id="3139156">(</span><span class="op" id="3139157">&amp;</span><span class="ident" id="3139158">b</span><span class="op" id="3139159">)</span><span class="op" id="3139160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139163">n</span>&nbsp;<span class="op" id="3139165">:=</span>&nbsp;<span class="builtinfunc" id="3139168">len</span><span class="op" id="3139171">(</span><span class="ident" id="3139172">b</span><span class="op" id="3139173">)</span>&nbsp;<span class="op" id="3139175">/</span>&nbsp;<span class="ident" id="3139177">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3139187">for</span>&nbsp;<span class="ident" id="3139191">i</span>&nbsp;<span class="op" id="3139193">:=</span>&nbsp;<span class="num" id="3139196">0</span><span class="op" id="3139197">;</span>&nbsp;<span class="ident" id="3139199">i</span>&nbsp;<span class="op" id="3139201">&lt;</span>&nbsp;<span class="ident" id="3139203">n</span><span class="op" id="3139204">;</span>&nbsp;<span class="ident" id="3139206">i</span><span class="op" id="3139207">++</span>&nbsp;<span class="op" id="3139210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139214">dw</span><span class="op" id="3139216">[</span><span class="ident" id="3139217">i</span><span class="op" id="3139218">]</span>&nbsp;<span class="op" id="3139220">=</span>&nbsp;<span class="ident" id="3139222">aw</span><span class="op" id="3139224">[</span><span class="ident" id="3139225">i</span><span class="op" id="3139226">]</span>&nbsp;<span class="op" id="3139228">^</span>&nbsp;<span class="ident" id="3139230">bw</span><span class="op" id="3139232">[</span><span class="ident" id="3139233">i</span><span class="op" id="3139234">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3139237">}</span><br>
<span class="lineno"></span><span class="op" id="3139239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3139242">func</span>&nbsp;<span class="ident" id="3139247">xorWords</span><span class="op" id="3139255">(</span><span class="ident" id="3139256">dst</span><span class="op" id="3139259">,</span>&nbsp;<span class="ident" id="3139261">a</span><span class="op" id="3139262">,</span>&nbsp;<span class="ident" id="3139264">b</span>&nbsp;<span class="op" id="3139266">[</span><span class="op" id="3139267">]</span><span class="builtintype" id="3139268">byte</span><span class="op" id="3139272">)</span>&nbsp;<span class="op" id="3139274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3139277">if</span>&nbsp;<span class="ident" id="3139280">supportsUnaligned</span>&nbsp;<span class="op" id="3139298">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139302">fastXORWords</span><span class="op" id="3139314">(</span><span class="ident" id="3139315">dst</span><span class="op" id="3139318">,</span>&nbsp;<span class="ident" id="3139320">a</span><span class="op" id="3139321">,</span>&nbsp;<span class="ident" id="3139323">b</span><span class="op" id="3139324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3139327">}</span>&nbsp;<span class="keyword" id="3139329">else</span>&nbsp;<span class="op" id="3139334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3139338">safeXORBytes</span><span class="op" id="3139350">(</span><span class="ident" id="3139351">dst</span><span class="op" id="3139354">,</span>&nbsp;<span class="ident" id="3139356">a</span><span class="op" id="3139357">,</span>&nbsp;<span class="ident" id="3139359">b</span><span class="op" id="3139360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3139363">}</span><br>
<span class="lineno"></span><span class="op" id="3139365">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
