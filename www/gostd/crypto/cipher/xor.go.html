<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3543017">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3543072">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3543126">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3543177">package</span>&nbsp;<span class="ident" id="3543185">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3543193">import</span>&nbsp;<span class="op" id="3543200">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3543203">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3543214">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3543223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3543226">const</span>&nbsp;<span class="ident" id="3543232">wordSize</span>&nbsp;<span class="op" id="3543241">=</span>&nbsp;<span class="builtintype" id="3543243">int</span><span class="op" id="3543246">(</span><span class="ident" id="3543247">unsafe</span><span class="op" id="3543253">.</span><span class="ident" id="3543254">Sizeof</span><span class="op" id="3543260">(</span><span class="builtintype" id="3543261">uintptr</span><span class="op" id="3543268">(</span><span class="num" id="3543269">0</span><span class="op" id="3543270">)</span><span class="op" id="3543271">)</span><span class="op" id="3543272">)</span><br>
<span class="lineno"></span><span class="keyword" id="3543274">const</span>&nbsp;<span class="ident" id="3543280">supportsUnaligned</span>&nbsp;<span class="op" id="3543298">=</span>&nbsp;<span class="ident" id="3543300">runtime</span><span class="op" id="3543307">.</span><span class="ident" id="3543308">GOARCH</span>&nbsp;<span class="op" id="3543315">==</span>&nbsp;<span class="string" id="3543318">&#34;386&#34;</span>&nbsp;<span class="op" id="3543324">||</span>&nbsp;<span class="ident" id="3543327">runtime</span><span class="op" id="3543334">.</span><span class="ident" id="3543335">GOARCH</span>&nbsp;<span class="op" id="3543342">==</span>&nbsp;<span class="string" id="3543345">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3543354">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3543420">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3543454">func</span>&nbsp;<span class="ident" id="3543459">fastXORBytes</span><span class="op" id="3543471">(</span><span class="ident" id="3543472">dst</span><span class="op" id="3543475">,</span>&nbsp;<span class="ident" id="3543477">a</span><span class="op" id="3543478">,</span>&nbsp;<span class="ident" id="3543480">b</span>&nbsp;<span class="op" id="3543482">[</span><span class="op" id="3543483">]</span><span class="builtintype" id="3543484">byte</span><span class="op" id="3543488">)</span>&nbsp;<span class="builtintype" id="3543490">int</span>&nbsp;<span class="op" id="3543494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543497">n</span>&nbsp;<span class="op" id="3543499">:=</span>&nbsp;<span class="builtinfunc" id="3543502">len</span><span class="op" id="3543505">(</span><span class="ident" id="3543506">a</span><span class="op" id="3543507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543510">if</span>&nbsp;<span class="builtinfunc" id="3543513">len</span><span class="op" id="3543516">(</span><span class="ident" id="3543517">b</span><span class="op" id="3543518">)</span>&nbsp;<span class="op" id="3543520">&lt;</span>&nbsp;<span class="ident" id="3543522">n</span>&nbsp;<span class="op" id="3543524">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543528">n</span>&nbsp;<span class="op" id="3543530">=</span>&nbsp;<span class="builtinfunc" id="3543532">len</span><span class="op" id="3543535">(</span><span class="ident" id="3543536">b</span><span class="op" id="3543537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543544">w</span>&nbsp;<span class="op" id="3543546">:=</span>&nbsp;<span class="ident" id="3543549">n</span>&nbsp;<span class="op" id="3543551">/</span>&nbsp;<span class="ident" id="3543553">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543563">if</span>&nbsp;<span class="ident" id="3543566">w</span>&nbsp;<span class="op" id="3543568">&gt;</span>&nbsp;<span class="num" id="3543570">0</span>&nbsp;<span class="op" id="3543572">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543576">dw</span>&nbsp;<span class="op" id="3543579">:=</span>&nbsp;<span class="op" id="3543582">*</span><span class="op" id="3543583">(</span><span class="op" id="3543584">*</span><span class="op" id="3543585">[</span><span class="op" id="3543586">]</span><span class="builtintype" id="3543587">uintptr</span><span class="op" id="3543594">)</span><span class="op" id="3543595">(</span><span class="ident" id="3543596">unsafe</span><span class="op" id="3543602">.</span><span class="ident" id="3543603">Pointer</span><span class="op" id="3543610">(</span><span class="op" id="3543611">&amp;</span><span class="ident" id="3543612">dst</span><span class="op" id="3543615">)</span><span class="op" id="3543616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543620">aw</span>&nbsp;<span class="op" id="3543623">:=</span>&nbsp;<span class="op" id="3543626">*</span><span class="op" id="3543627">(</span><span class="op" id="3543628">*</span><span class="op" id="3543629">[</span><span class="op" id="3543630">]</span><span class="builtintype" id="3543631">uintptr</span><span class="op" id="3543638">)</span><span class="op" id="3543639">(</span><span class="ident" id="3543640">unsafe</span><span class="op" id="3543646">.</span><span class="ident" id="3543647">Pointer</span><span class="op" id="3543654">(</span><span class="op" id="3543655">&amp;</span><span class="ident" id="3543656">a</span><span class="op" id="3543657">)</span><span class="op" id="3543658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543662">bw</span>&nbsp;<span class="op" id="3543665">:=</span>&nbsp;<span class="op" id="3543668">*</span><span class="op" id="3543669">(</span><span class="op" id="3543670">*</span><span class="op" id="3543671">[</span><span class="op" id="3543672">]</span><span class="builtintype" id="3543673">uintptr</span><span class="op" id="3543680">)</span><span class="op" id="3543681">(</span><span class="ident" id="3543682">unsafe</span><span class="op" id="3543688">.</span><span class="ident" id="3543689">Pointer</span><span class="op" id="3543696">(</span><span class="op" id="3543697">&amp;</span><span class="ident" id="3543698">b</span><span class="op" id="3543699">)</span><span class="op" id="3543700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543704">for</span>&nbsp;<span class="ident" id="3543708">i</span>&nbsp;<span class="op" id="3543710">:=</span>&nbsp;<span class="num" id="3543713">0</span><span class="op" id="3543714">;</span>&nbsp;<span class="ident" id="3543716">i</span>&nbsp;<span class="op" id="3543718">&lt;</span>&nbsp;<span class="ident" id="3543720">w</span><span class="op" id="3543721">;</span>&nbsp;<span class="ident" id="3543723">i</span><span class="op" id="3543724">++</span>&nbsp;<span class="op" id="3543727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543732">dw</span><span class="op" id="3543734">[</span><span class="ident" id="3543735">i</span><span class="op" id="3543736">]</span>&nbsp;<span class="op" id="3543738">=</span>&nbsp;<span class="ident" id="3543740">aw</span><span class="op" id="3543742">[</span><span class="ident" id="3543743">i</span><span class="op" id="3543744">]</span>&nbsp;<span class="op" id="3543746">^</span>&nbsp;<span class="ident" id="3543748">bw</span><span class="op" id="3543750">[</span><span class="ident" id="3543751">i</span><span class="op" id="3543752">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543763">for</span>&nbsp;<span class="ident" id="3543767">i</span>&nbsp;<span class="op" id="3543769">:=</span>&nbsp;<span class="op" id="3543772">(</span><span class="ident" id="3543773">n</span>&nbsp;<span class="op" id="3543775">-</span>&nbsp;<span class="ident" id="3543777">n</span><span class="op" id="3543778">%</span><span class="ident" id="3543779">wordSize</span><span class="op" id="3543787">)</span><span class="op" id="3543788">;</span>&nbsp;<span class="ident" id="3543790">i</span>&nbsp;<span class="op" id="3543792">&lt;</span>&nbsp;<span class="ident" id="3543794">n</span><span class="op" id="3543795">;</span>&nbsp;<span class="ident" id="3543797">i</span><span class="op" id="3543798">++</span>&nbsp;<span class="op" id="3543801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543805">dst</span><span class="op" id="3543808">[</span><span class="ident" id="3543809">i</span><span class="op" id="3543810">]</span>&nbsp;<span class="op" id="3543812">=</span>&nbsp;<span class="ident" id="3543814">a</span><span class="op" id="3543815">[</span><span class="ident" id="3543816">i</span><span class="op" id="3543817">]</span>&nbsp;<span class="op" id="3543819">^</span>&nbsp;<span class="ident" id="3543821">b</span><span class="op" id="3543822">[</span><span class="ident" id="3543823">i</span><span class="op" id="3543824">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543831">return</span>&nbsp;<span class="ident" id="3543838">n</span><br>
<span class="lineno"></span><span class="op" id="3543840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3543843">func</span>&nbsp;<span class="ident" id="3543848">safeXORBytes</span><span class="op" id="3543860">(</span><span class="ident" id="3543861">dst</span><span class="op" id="3543864">,</span>&nbsp;<span class="ident" id="3543866">a</span><span class="op" id="3543867">,</span>&nbsp;<span class="ident" id="3543869">b</span>&nbsp;<span class="op" id="3543871">[</span><span class="op" id="3543872">]</span><span class="builtintype" id="3543873">byte</span><span class="op" id="3543877">)</span>&nbsp;<span class="builtintype" id="3543879">int</span>&nbsp;<span class="op" id="3543883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543886">n</span>&nbsp;<span class="op" id="3543888">:=</span>&nbsp;<span class="builtinfunc" id="3543891">len</span><span class="op" id="3543894">(</span><span class="ident" id="3543895">a</span><span class="op" id="3543896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543899">if</span>&nbsp;<span class="builtinfunc" id="3543902">len</span><span class="op" id="3543905">(</span><span class="ident" id="3543906">b</span><span class="op" id="3543907">)</span>&nbsp;<span class="op" id="3543909">&lt;</span>&nbsp;<span class="ident" id="3543911">n</span>&nbsp;<span class="op" id="3543913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543917">n</span>&nbsp;<span class="op" id="3543919">=</span>&nbsp;<span class="builtinfunc" id="3543921">len</span><span class="op" id="3543924">(</span><span class="ident" id="3543925">b</span><span class="op" id="3543926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543929">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543932">for</span>&nbsp;<span class="ident" id="3543936">i</span>&nbsp;<span class="op" id="3543938">:=</span>&nbsp;<span class="num" id="3543941">0</span><span class="op" id="3543942">;</span>&nbsp;<span class="ident" id="3543944">i</span>&nbsp;<span class="op" id="3543946">&lt;</span>&nbsp;<span class="ident" id="3543948">n</span><span class="op" id="3543949">;</span>&nbsp;<span class="ident" id="3543951">i</span><span class="op" id="3543952">++</span>&nbsp;<span class="op" id="3543955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543959">dst</span><span class="op" id="3543962">[</span><span class="ident" id="3543963">i</span><span class="op" id="3543964">]</span>&nbsp;<span class="op" id="3543966">=</span>&nbsp;<span class="ident" id="3543968">a</span><span class="op" id="3543969">[</span><span class="ident" id="3543970">i</span><span class="op" id="3543971">]</span>&nbsp;<span class="op" id="3543973">^</span>&nbsp;<span class="ident" id="3543975">b</span><span class="op" id="3543976">[</span><span class="ident" id="3543977">i</span><span class="op" id="3543978">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543984">return</span>&nbsp;<span class="ident" id="3543991">n</span><br>
<span class="lineno"></span><span class="op" id="3543993">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3543996">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3544077">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3544122">func</span>&nbsp;<span class="ident" id="3544127">xorBytes</span><span class="op" id="3544135">(</span><span class="ident" id="3544136">dst</span><span class="op" id="3544139">,</span>&nbsp;<span class="ident" id="3544141">a</span><span class="op" id="3544142">,</span>&nbsp;<span class="ident" id="3544144">b</span>&nbsp;<span class="op" id="3544146">[</span><span class="op" id="3544147">]</span><span class="builtintype" id="3544148">byte</span><span class="op" id="3544152">)</span>&nbsp;<span class="builtintype" id="3544154">int</span>&nbsp;<span class="op" id="3544158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544161">if</span>&nbsp;<span class="ident" id="3544164">supportsUnaligned</span>&nbsp;<span class="op" id="3544182">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544186">return</span>&nbsp;<span class="ident" id="3544193">fastXORBytes</span><span class="op" id="3544205">(</span><span class="ident" id="3544206">dst</span><span class="op" id="3544209">,</span>&nbsp;<span class="ident" id="3544211">a</span><span class="op" id="3544212">,</span>&nbsp;<span class="ident" id="3544214">b</span><span class="op" id="3544215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544218">}</span>&nbsp;<span class="keyword" id="3544220">else</span>&nbsp;<span class="op" id="3544225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544229">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544285">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544339">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544394">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544439">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544457">return</span>&nbsp;<span class="ident" id="3544464">safeXORBytes</span><span class="op" id="3544476">(</span><span class="ident" id="3544477">dst</span><span class="op" id="3544480">,</span>&nbsp;<span class="ident" id="3544482">a</span><span class="op" id="3544483">,</span>&nbsp;<span class="ident" id="3544485">b</span><span class="op" id="3544486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544489">}</span><br>
<span class="lineno"></span><span class="op" id="3544491">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3544494">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3544570">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3544622">func</span>&nbsp;<span class="ident" id="3544627">fastXORWords</span><span class="op" id="3544639">(</span><span class="ident" id="3544640">dst</span><span class="op" id="3544643">,</span>&nbsp;<span class="ident" id="3544645">a</span><span class="op" id="3544646">,</span>&nbsp;<span class="ident" id="3544648">b</span>&nbsp;<span class="op" id="3544650">[</span><span class="op" id="3544651">]</span><span class="builtintype" id="3544652">byte</span><span class="op" id="3544656">)</span>&nbsp;<span class="op" id="3544658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544661">dw</span>&nbsp;<span class="op" id="3544664">:=</span>&nbsp;<span class="op" id="3544667">*</span><span class="op" id="3544668">(</span><span class="op" id="3544669">*</span><span class="op" id="3544670">[</span><span class="op" id="3544671">]</span><span class="builtintype" id="3544672">uintptr</span><span class="op" id="3544679">)</span><span class="op" id="3544680">(</span><span class="ident" id="3544681">unsafe</span><span class="op" id="3544687">.</span><span class="ident" id="3544688">Pointer</span><span class="op" id="3544695">(</span><span class="op" id="3544696">&amp;</span><span class="ident" id="3544697">dst</span><span class="op" id="3544700">)</span><span class="op" id="3544701">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544704">aw</span>&nbsp;<span class="op" id="3544707">:=</span>&nbsp;<span class="op" id="3544710">*</span><span class="op" id="3544711">(</span><span class="op" id="3544712">*</span><span class="op" id="3544713">[</span><span class="op" id="3544714">]</span><span class="builtintype" id="3544715">uintptr</span><span class="op" id="3544722">)</span><span class="op" id="3544723">(</span><span class="ident" id="3544724">unsafe</span><span class="op" id="3544730">.</span><span class="ident" id="3544731">Pointer</span><span class="op" id="3544738">(</span><span class="op" id="3544739">&amp;</span><span class="ident" id="3544740">a</span><span class="op" id="3544741">)</span><span class="op" id="3544742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544745">bw</span>&nbsp;<span class="op" id="3544748">:=</span>&nbsp;<span class="op" id="3544751">*</span><span class="op" id="3544752">(</span><span class="op" id="3544753">*</span><span class="op" id="3544754">[</span><span class="op" id="3544755">]</span><span class="builtintype" id="3544756">uintptr</span><span class="op" id="3544763">)</span><span class="op" id="3544764">(</span><span class="ident" id="3544765">unsafe</span><span class="op" id="3544771">.</span><span class="ident" id="3544772">Pointer</span><span class="op" id="3544779">(</span><span class="op" id="3544780">&amp;</span><span class="ident" id="3544781">b</span><span class="op" id="3544782">)</span><span class="op" id="3544783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544786">n</span>&nbsp;<span class="op" id="3544788">:=</span>&nbsp;<span class="builtinfunc" id="3544791">len</span><span class="op" id="3544794">(</span><span class="ident" id="3544795">b</span><span class="op" id="3544796">)</span>&nbsp;<span class="op" id="3544798">/</span>&nbsp;<span class="ident" id="3544800">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544810">for</span>&nbsp;<span class="ident" id="3544814">i</span>&nbsp;<span class="op" id="3544816">:=</span>&nbsp;<span class="num" id="3544819">0</span><span class="op" id="3544820">;</span>&nbsp;<span class="ident" id="3544822">i</span>&nbsp;<span class="op" id="3544824">&lt;</span>&nbsp;<span class="ident" id="3544826">n</span><span class="op" id="3544827">;</span>&nbsp;<span class="ident" id="3544829">i</span><span class="op" id="3544830">++</span>&nbsp;<span class="op" id="3544833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544837">dw</span><span class="op" id="3544839">[</span><span class="ident" id="3544840">i</span><span class="op" id="3544841">]</span>&nbsp;<span class="op" id="3544843">=</span>&nbsp;<span class="ident" id="3544845">aw</span><span class="op" id="3544847">[</span><span class="ident" id="3544848">i</span><span class="op" id="3544849">]</span>&nbsp;<span class="op" id="3544851">^</span>&nbsp;<span class="ident" id="3544853">bw</span><span class="op" id="3544855">[</span><span class="ident" id="3544856">i</span><span class="op" id="3544857">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544860">}</span><br>
<span class="lineno"></span><span class="op" id="3544862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3544865">func</span>&nbsp;<span class="ident" id="3544870">xorWords</span><span class="op" id="3544878">(</span><span class="ident" id="3544879">dst</span><span class="op" id="3544882">,</span>&nbsp;<span class="ident" id="3544884">a</span><span class="op" id="3544885">,</span>&nbsp;<span class="ident" id="3544887">b</span>&nbsp;<span class="op" id="3544889">[</span><span class="op" id="3544890">]</span><span class="builtintype" id="3544891">byte</span><span class="op" id="3544895">)</span>&nbsp;<span class="op" id="3544897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544900">if</span>&nbsp;<span class="ident" id="3544903">supportsUnaligned</span>&nbsp;<span class="op" id="3544921">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544925">fastXORWords</span><span class="op" id="3544937">(</span><span class="ident" id="3544938">dst</span><span class="op" id="3544941">,</span>&nbsp;<span class="ident" id="3544943">a</span><span class="op" id="3544944">,</span>&nbsp;<span class="ident" id="3544946">b</span><span class="op" id="3544947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544950">}</span>&nbsp;<span class="keyword" id="3544952">else</span>&nbsp;<span class="op" id="3544957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544961">safeXORBytes</span><span class="op" id="3544973">(</span><span class="ident" id="3544974">dst</span><span class="op" id="3544977">,</span>&nbsp;<span class="ident" id="3544979">a</span><span class="op" id="3544980">,</span>&nbsp;<span class="ident" id="3544982">b</span><span class="op" id="3544983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544986">}</span><br>
<span class="lineno"></span><span class="op" id="3544988">}</span>
</div>
</body>
</html>
