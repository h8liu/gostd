<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html" class="current">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1533808">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1533863">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1533917">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1533968">package</span>&nbsp;<span class="ident" id="1533976">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1533985">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;the&nbsp;implementation&nbsp;of&nbsp;Go&#39;s&nbsp;map&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="1534044">//</span><br>
<span class="lineno"></span><span class="comment" id="1534047">//&nbsp;A&nbsp;map&nbsp;is&nbsp;just&nbsp;a&nbsp;hash&nbsp;table.&nbsp;&nbsp;The&nbsp;data&nbsp;is&nbsp;arranged</span><br>
<span class="lineno">10</span><span class="comment" id="1534100">//&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;buckets.&nbsp;&nbsp;Each&nbsp;bucket&nbsp;contains&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1534157">//&nbsp;8&nbsp;key/value&nbsp;pairs.&nbsp;&nbsp;The&nbsp;low-order&nbsp;bits&nbsp;of&nbsp;the&nbsp;hash&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="1534215">//&nbsp;used&nbsp;to&nbsp;select&nbsp;a&nbsp;bucket.&nbsp;&nbsp;Each&nbsp;bucket&nbsp;contains&nbsp;a&nbsp;few</span><br>
<span class="lineno"></span><span class="comment" id="1534271">//&nbsp;high-order&nbsp;bits&nbsp;of&nbsp;each&nbsp;hash&nbsp;to&nbsp;distinguish&nbsp;the&nbsp;entries</span><br>
<span class="lineno"></span><span class="comment" id="1534330">//&nbsp;within&nbsp;a&nbsp;single&nbsp;bucket.</span><br>
<span class="lineno">15</span><span class="comment" id="1534357">//</span><br>
<span class="lineno"></span><span class="comment" id="1534360">//&nbsp;If&nbsp;more&nbsp;than&nbsp;8&nbsp;keys&nbsp;hash&nbsp;to&nbsp;a&nbsp;bucket,&nbsp;we&nbsp;chain&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1534413">//&nbsp;extra&nbsp;buckets.</span><br>
<span class="lineno"></span><span class="comment" id="1534431">//</span><br>
<span class="lineno"></span><span class="comment" id="1534434">//&nbsp;When&nbsp;the&nbsp;hashtable&nbsp;grows,&nbsp;we&nbsp;allocate&nbsp;a&nbsp;new&nbsp;array</span><br>
<span class="lineno">20</span><span class="comment" id="1534487">//&nbsp;of&nbsp;buckets&nbsp;twice&nbsp;as&nbsp;big.&nbsp;&nbsp;Buckets&nbsp;are&nbsp;incrementally</span><br>
<span class="lineno"></span><span class="comment" id="1534542">//&nbsp;copied&nbsp;from&nbsp;the&nbsp;old&nbsp;bucket&nbsp;array&nbsp;to&nbsp;the&nbsp;new&nbsp;bucket&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="1534603">//</span><br>
<span class="lineno"></span><span class="comment" id="1534606">//&nbsp;Map&nbsp;iterators&nbsp;walk&nbsp;through&nbsp;the&nbsp;array&nbsp;of&nbsp;buckets&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1534661">//&nbsp;return&nbsp;the&nbsp;keys&nbsp;in&nbsp;walk&nbsp;order&nbsp;(bucket&nbsp;#,&nbsp;then&nbsp;overflow</span><br>
<span class="lineno">25</span><span class="comment" id="1534719">//&nbsp;chain&nbsp;order,&nbsp;then&nbsp;bucket&nbsp;index).&nbsp;&nbsp;To&nbsp;maintain&nbsp;iteration</span><br>
<span class="lineno"></span><span class="comment" id="1534778">//&nbsp;semantics,&nbsp;we&nbsp;never&nbsp;move&nbsp;keys&nbsp;within&nbsp;their&nbsp;bucket&nbsp;(if</span><br>
<span class="lineno"></span><span class="comment" id="1534835">//&nbsp;we&nbsp;did,&nbsp;keys&nbsp;might&nbsp;be&nbsp;returned&nbsp;0&nbsp;or&nbsp;2&nbsp;times).&nbsp;&nbsp;When</span><br>
<span class="lineno"></span><span class="comment" id="1534890">//&nbsp;growing&nbsp;the&nbsp;table,&nbsp;iterators&nbsp;remain&nbsp;iterating&nbsp;through&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1534951">//&nbsp;old&nbsp;table&nbsp;and&nbsp;must&nbsp;check&nbsp;the&nbsp;new&nbsp;table&nbsp;if&nbsp;the&nbsp;bucket</span><br>
<span class="lineno">30</span><span class="comment" id="1535007">//&nbsp;they&nbsp;are&nbsp;iterating&nbsp;through&nbsp;has&nbsp;been&nbsp;moved&nbsp;(&#34;evacuated&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="1535066">//&nbsp;to&nbsp;the&nbsp;new&nbsp;table.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1535088">//&nbsp;Picking&nbsp;loadFactor:&nbsp;too&nbsp;large&nbsp;and&nbsp;we&nbsp;have&nbsp;lots&nbsp;of&nbsp;overflow</span><br>
<span class="lineno"></span><span class="comment" id="1535150">//&nbsp;buckets,&nbsp;too&nbsp;small&nbsp;and&nbsp;we&nbsp;waste&nbsp;a&nbsp;lot&nbsp;of&nbsp;space.&nbsp;&nbsp;I&nbsp;wrote</span><br>
<span class="lineno">35</span><span class="comment" id="1535210">//&nbsp;a&nbsp;simple&nbsp;program&nbsp;to&nbsp;check&nbsp;some&nbsp;stats&nbsp;for&nbsp;different&nbsp;loads:</span><br>
<span class="lineno"></span><span class="comment" id="1535271">//&nbsp;(64-bit,&nbsp;8&nbsp;byte&nbsp;keys&nbsp;and&nbsp;values)</span><br>
<span class="lineno"></span><span class="comment" id="1535307">//&nbsp;&nbsp;loadFactor&nbsp;&nbsp;&nbsp;&nbsp;%overflow&nbsp;&nbsp;bytes/entry&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hitprobe&nbsp;&nbsp;&nbsp;&nbsp;missprobe</span><br>
<span class="lineno"></span><span class="comment" id="1535374">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20.77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.00</span><br>
<span class="lineno"></span><span class="comment" id="1535441">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17.30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.50</span><br>
<span class="lineno">40</span><span class="comment" id="1535508">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.85&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14.77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.00</span><br>
<span class="lineno"></span><span class="comment" id="1535575">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12.94&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.75&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.50</span><br>
<span class="lineno"></span><span class="comment" id="1535642">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11.67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.00</span><br>
<span class="lineno"></span><span class="comment" id="1535709">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20.90&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.50</span><br>
<span class="lineno"></span><span class="comment" id="1535776">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;27.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.00</span><br>
<span class="lineno">45</span><span class="comment" id="1535843">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;34.03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9.73&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.75&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.50</span><br>
<span class="lineno"></span><span class="comment" id="1535910">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;41.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9.40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.00</span><br>
<span class="lineno"></span><span class="comment" id="1535977">//</span><br>
<span class="lineno"></span><span class="comment" id="1535980">//&nbsp;%overflow&nbsp;&nbsp;&nbsp;=&nbsp;percentage&nbsp;of&nbsp;buckets&nbsp;which&nbsp;have&nbsp;an&nbsp;overflow&nbsp;bucket</span><br>
<span class="lineno"></span><span class="comment" id="1536049">//&nbsp;bytes/entry&nbsp;=&nbsp;overhead&nbsp;bytes&nbsp;used&nbsp;per&nbsp;key/value&nbsp;pair</span><br>
<span class="lineno">50</span><span class="comment" id="1536105">//&nbsp;hitprobe&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;#&nbsp;of&nbsp;entries&nbsp;to&nbsp;check&nbsp;when&nbsp;looking&nbsp;up&nbsp;a&nbsp;present&nbsp;key</span><br>
<span class="lineno"></span><span class="comment" id="1536174">//&nbsp;missprobe&nbsp;&nbsp;&nbsp;=&nbsp;#&nbsp;of&nbsp;entries&nbsp;to&nbsp;check&nbsp;when&nbsp;looking&nbsp;up&nbsp;an&nbsp;absent&nbsp;key</span><br>
<span class="lineno"></span><span class="comment" id="1536243">//</span><br>
<span class="lineno"></span><span class="comment" id="1536246">//&nbsp;Keep&nbsp;in&nbsp;mind&nbsp;this&nbsp;data&nbsp;is&nbsp;for&nbsp;maximally&nbsp;loaded&nbsp;tables,&nbsp;i.e.&nbsp;just</span><br>
<span class="lineno"></span><span class="comment" id="1536314">//&nbsp;before&nbsp;the&nbsp;table&nbsp;grows.&nbsp;&nbsp;Typical&nbsp;tables&nbsp;will&nbsp;be&nbsp;somewhat&nbsp;less&nbsp;loaded.</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="1536388">import</span>&nbsp;<span class="op" id="1536395">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1536398">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1536407">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="1536410">const</span>&nbsp;<span class="op" id="1536416">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536419">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;key/value&nbsp;pairs&nbsp;a&nbsp;bucket&nbsp;can&nbsp;hold.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536476">bucketCntBits</span>&nbsp;<span class="op" id="1536490">=</span>&nbsp;<span class="num" id="1536492">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536495">bucketCnt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536509">=</span>&nbsp;<span class="num" id="1536511">1</span>&nbsp;<span class="op" id="1536513">&lt;&lt;</span>&nbsp;<span class="ident" id="1536516"><a href="/gostd/runtime/hashmap.go.html#1536476">bucketCntBits</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536532">//&nbsp;Maximum&nbsp;average&nbsp;load&nbsp;of&nbsp;a&nbsp;bucket&nbsp;that&nbsp;triggers&nbsp;growth.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536591">loadFactor</span>&nbsp;<span class="op" id="1536602">=</span>&nbsp;<span class="num" id="1536604">6.5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536610">//&nbsp;Maximum&nbsp;key&nbsp;or&nbsp;value&nbsp;size&nbsp;to&nbsp;keep&nbsp;inline&nbsp;(instead&nbsp;of&nbsp;mallocing&nbsp;per&nbsp;element).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536691">//&nbsp;Must&nbsp;fit&nbsp;in&nbsp;a&nbsp;uint8.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536716">//&nbsp;Fast&nbsp;versions&nbsp;cannot&nbsp;handle&nbsp;big&nbsp;values&nbsp;-&nbsp;the&nbsp;cutoff&nbsp;size&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536781">//&nbsp;fast&nbsp;versions&nbsp;in&nbsp;../../cmd/gc/walk.c&nbsp;must&nbsp;be&nbsp;at&nbsp;most&nbsp;this&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536850">maxKeySize</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1536863">=</span>&nbsp;<span class="num" id="1536865">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536870">maxValueSize</span>&nbsp;<span class="op" id="1536883">=</span>&nbsp;<span class="num" id="1536885">128</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536891">//&nbsp;data&nbsp;offset&nbsp;should&nbsp;be&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;bmap&nbsp;struct,&nbsp;but&nbsp;needs&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536962">//&nbsp;aligned&nbsp;correctly.&nbsp;&nbsp;For&nbsp;amd64p32&nbsp;this&nbsp;means&nbsp;64-bit&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537027">//&nbsp;even&nbsp;though&nbsp;pointers&nbsp;are&nbsp;32&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537064">dataOffset</span>&nbsp;<span class="op" id="1537075">=</span>&nbsp;<span class="ident" id="1537077"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1537083">.</span><span class="ident" id="1537084">Offsetof</span><span class="op" id="1537092">(</span><span class="keyword" id="1537093">struct</span>&nbsp;<span class="op" id="1537100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537104">b</span>&nbsp;<span class="ident" id="1537106"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537113">v</span>&nbsp;<span class="builtintype" id="1537115">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537122">}</span><span class="op" id="1537123">{</span><span class="op" id="1537124">}</span><span class="op" id="1537125">.</span><span class="ident" id="1537126"><a href="/gostd/runtime/hashmap.go.html#1537113">v</a></span><span class="op" id="1537127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537131">//&nbsp;Possible&nbsp;tophash&nbsp;values.&nbsp;&nbsp;We&nbsp;reserve&nbsp;a&nbsp;few&nbsp;possibilities&nbsp;for&nbsp;special&nbsp;marks.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537211">//&nbsp;Each&nbsp;bucket&nbsp;(including&nbsp;its&nbsp;overflow&nbsp;buckets,&nbsp;if&nbsp;any)&nbsp;will&nbsp;have&nbsp;either&nbsp;all&nbsp;or&nbsp;none&nbsp;of&nbsp;its</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537304">//&nbsp;entries&nbsp;in&nbsp;the&nbsp;evacuated*&nbsp;states&nbsp;(except&nbsp;during&nbsp;the&nbsp;evacuate()&nbsp;method,&nbsp;which&nbsp;only&nbsp;happens</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537398">//&nbsp;during&nbsp;map&nbsp;writes&nbsp;and&nbsp;thus&nbsp;no&nbsp;one&nbsp;else&nbsp;can&nbsp;observe&nbsp;the&nbsp;map&nbsp;during&nbsp;that&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537480">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537495">=</span>&nbsp;<span class="num" id="1537497">0</span>&nbsp;<span class="comment" id="1537499">//&nbsp;cell&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537517">evacuatedEmpty</span>&nbsp;<span class="op" id="1537532">=</span>&nbsp;<span class="num" id="1537534">1</span>&nbsp;<span class="comment" id="1537536">//&nbsp;cell&nbsp;is&nbsp;empty,&nbsp;bucket&nbsp;is&nbsp;evacuated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537576">evacuatedX</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537591">=</span>&nbsp;<span class="num" id="1537593">2</span>&nbsp;<span class="comment" id="1537595">//&nbsp;key/value&nbsp;is&nbsp;valid.&nbsp;&nbsp;Entry&nbsp;has&nbsp;been&nbsp;evacuated&nbsp;to&nbsp;first&nbsp;half&nbsp;of&nbsp;larger&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537676">evacuatedY</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537691">=</span>&nbsp;<span class="num" id="1537693">3</span>&nbsp;<span class="comment" id="1537695">//&nbsp;same&nbsp;as&nbsp;above,&nbsp;but&nbsp;evacuated&nbsp;to&nbsp;second&nbsp;half&nbsp;of&nbsp;larger&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537760">minTopHash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537775">=</span>&nbsp;<span class="num" id="1537777">4</span>&nbsp;<span class="comment" id="1537779">//&nbsp;minimum&nbsp;tophash&nbsp;for&nbsp;a&nbsp;normal&nbsp;filled&nbsp;cell.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537826">//&nbsp;flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537836">iterator</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537848">=</span>&nbsp;<span class="num" id="1537850">1</span>&nbsp;<span class="comment" id="1537852">//&nbsp;there&nbsp;may&nbsp;be&nbsp;an&nbsp;iterator&nbsp;using&nbsp;buckets</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537895">oldIterator</span>&nbsp;<span class="op" id="1537907">=</span>&nbsp;<span class="num" id="1537909">2</span>&nbsp;<span class="comment" id="1537911">//&nbsp;there&nbsp;may&nbsp;be&nbsp;an&nbsp;iterator&nbsp;using&nbsp;oldbuckets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1537958">//&nbsp;sentinel&nbsp;bucket&nbsp;ID&nbsp;for&nbsp;iterator&nbsp;checks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538001">noCheck</span>&nbsp;<span class="op" id="1538009">=</span>&nbsp;<span class="num" id="1538011">1</span><span class="op" id="1538012">&lt;&lt;</span><span class="op" id="1538014">(</span><span class="num" id="1538015">8</span><span class="op" id="1538016">*</span><span class="ident" id="1538017"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1538024">)</span>&nbsp;<span class="op" id="1538026">-</span>&nbsp;<span class="num" id="1538028">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538032">//&nbsp;trigger&nbsp;a&nbsp;garbage&nbsp;collection&nbsp;at&nbsp;every&nbsp;alloc&nbsp;called&nbsp;from&nbsp;this&nbsp;code</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538102">checkgc</span>&nbsp;<span class="op" id="1538110">=</span>&nbsp;<span class="builtintype" id="1538112">false</span><br>
<span class="lineno"></span><span class="op" id="1538118">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1538121">//&nbsp;A&nbsp;header&nbsp;for&nbsp;a&nbsp;Go&nbsp;map.</span><br>
<span class="lineno">105</span><span class="keyword" id="1538147">type</span>&nbsp;<span class="ident" id="1538152">hmap</span>&nbsp;<span class="keyword" id="1538157">struct</span>&nbsp;<span class="op" id="1538164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538167">//&nbsp;Note:&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;Hmap&nbsp;is&nbsp;encoded&nbsp;in&nbsp;../../cmd/gc/reflect.c&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538241">//&nbsp;../reflect/type.go.&nbsp;&nbsp;Don&#39;t&nbsp;change&nbsp;this&nbsp;structure&nbsp;without&nbsp;also&nbsp;changing&nbsp;that&nbsp;code!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538327">count</span>&nbsp;<span class="builtintype" id="1538333">int</span>&nbsp;<span class="comment" id="1538337">//&nbsp;#&nbsp;live&nbsp;cells&nbsp;==&nbsp;size&nbsp;of&nbsp;map.&nbsp;&nbsp;Must&nbsp;be&nbsp;first&nbsp;(used&nbsp;by&nbsp;len()&nbsp;builtin)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538409">flags</span>&nbsp;<span class="builtintype" id="1538415">uint32</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538423">hash0</span>&nbsp;<span class="builtintype" id="1538429">uint32</span>&nbsp;<span class="comment" id="1538436">//&nbsp;hash&nbsp;seed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538450">B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1538456">uint8</span>&nbsp;&nbsp;<span class="comment" id="1538463">//&nbsp;log_2&nbsp;of&nbsp;#&nbsp;of&nbsp;buckets&nbsp;(can&nbsp;hold&nbsp;up&nbsp;to&nbsp;loadFactor&nbsp;*&nbsp;2^B&nbsp;items)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538530">buckets</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538541"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1538547">.</span><span class="ident" id="1538548">Pointer</span>&nbsp;<span class="comment" id="1538556">//&nbsp;array&nbsp;of&nbsp;2^B&nbsp;Buckets.&nbsp;may&nbsp;be&nbsp;nil&nbsp;if&nbsp;count==0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538606">oldbuckets</span>&nbsp;<span class="ident" id="1538617"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1538623">.</span><span class="ident" id="1538624">Pointer</span>&nbsp;<span class="comment" id="1538632">//&nbsp;previous&nbsp;bucket&nbsp;array&nbsp;of&nbsp;half&nbsp;the&nbsp;size,&nbsp;non-nil&nbsp;only&nbsp;when&nbsp;growing</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538702">nevacuate</span>&nbsp;&nbsp;<span class="builtintype" id="1538713">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538728">//&nbsp;progress&nbsp;counter&nbsp;for&nbsp;evacuation&nbsp;(buckets&nbsp;less&nbsp;than&nbsp;this&nbsp;have&nbsp;been&nbsp;evacuated)</span><br>
<span class="lineno"></span><span class="op" id="1538808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1538811">//&nbsp;A&nbsp;bucket&nbsp;for&nbsp;a&nbsp;Go&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="1538837">type</span>&nbsp;<span class="ident" id="1538842">bmap</span>&nbsp;<span class="keyword" id="1538847">struct</span>&nbsp;<span class="op" id="1538854">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538857">tophash</span>&nbsp;&nbsp;<span class="op" id="1538866">[</span><span class="ident" id="1538867"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1538876">]</span><span class="builtintype" id="1538877">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538884">overflow</span>&nbsp;<span class="op" id="1538893">*</span><span class="ident" id="1538894"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538900">//&nbsp;Followed&nbsp;by&nbsp;bucketCnt&nbsp;keys&nbsp;and&nbsp;then&nbsp;bucketCnt&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1538958">//&nbsp;NOTE:&nbsp;packing&nbsp;all&nbsp;the&nbsp;keys&nbsp;together&nbsp;and&nbsp;then&nbsp;all&nbsp;the&nbsp;values&nbsp;together&nbsp;makes&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539041">//&nbsp;code&nbsp;a&nbsp;bit&nbsp;more&nbsp;complicated&nbsp;than&nbsp;alternating&nbsp;key/value/key/value/...&nbsp;but&nbsp;it&nbsp;allows</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539128">//&nbsp;us&nbsp;to&nbsp;eliminate&nbsp;padding&nbsp;which&nbsp;would&nbsp;be&nbsp;needed&nbsp;for,&nbsp;e.g.,&nbsp;map[int64]int8.</span><br>
<span class="lineno"></span><span class="op" id="1539204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1539207">//&nbsp;A&nbsp;hash&nbsp;iteration&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="1539238">//&nbsp;If&nbsp;you&nbsp;modify&nbsp;hiter,&nbsp;also&nbsp;change&nbsp;cmd/gc/reflect.c&nbsp;to&nbsp;indicate</span><br>
<span class="lineno">130</span><span class="comment" id="1539303">//&nbsp;the&nbsp;layout&nbsp;of&nbsp;this&nbsp;structure.</span><br>
<span class="lineno"></span><span class="keyword" id="1539336">type</span>&nbsp;<span class="ident" id="1539341">hiter</span>&nbsp;<span class="keyword" id="1539347">struct</span>&nbsp;<span class="op" id="1539354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539357">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539369"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1539375">.</span><span class="ident" id="1539376">Pointer</span>&nbsp;<span class="comment" id="1539384">//&nbsp;Must&nbsp;be&nbsp;in&nbsp;first&nbsp;position.&nbsp;&nbsp;Write&nbsp;nil&nbsp;to&nbsp;indicate&nbsp;iteration&nbsp;end&nbsp;(see&nbsp;cmd/gc/range.c).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539474">value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539486"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1539492">.</span><span class="ident" id="1539493">Pointer</span>&nbsp;<span class="comment" id="1539501">//&nbsp;Must&nbsp;be&nbsp;in&nbsp;second&nbsp;position&nbsp;(see&nbsp;cmd/gc/range.c).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539554">t</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539566">*</span><span class="ident" id="1539567"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539576">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539588">*</span><span class="ident" id="1539589"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539595">buckets</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539607"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1539613">.</span><span class="ident" id="1539614">Pointer</span>&nbsp;<span class="comment" id="1539622">//&nbsp;bucket&nbsp;ptr&nbsp;at&nbsp;hash_iter&nbsp;initialization&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539670">bptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539682">*</span><span class="ident" id="1539683"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539697">//&nbsp;current&nbsp;bucket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539716">startBucket</span>&nbsp;<span class="builtintype" id="1539728">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539743">//&nbsp;bucket&nbsp;iteration&nbsp;started&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539775">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1539787">uint8</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539802">//&nbsp;intra-bucket&nbsp;offset&nbsp;to&nbsp;start&nbsp;from&nbsp;during&nbsp;iteration&nbsp;(should&nbsp;be&nbsp;big&nbsp;enough&nbsp;to&nbsp;hold&nbsp;bucketCnt-1)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539900">wrapped</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1539912">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539927">//&nbsp;already&nbsp;wrapped&nbsp;around&nbsp;from&nbsp;end&nbsp;of&nbsp;bucket&nbsp;array&nbsp;to&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539992">B</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1540004">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540011">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1540023">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540030">bucket</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1540042">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540051">checkBucket</span>&nbsp;<span class="builtintype" id="1540063">uintptr</span><br>
<span class="lineno">145</span><span class="op" id="1540071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1540074">func</span>&nbsp;<span class="ident" id="1540079">evacuated</span><span class="op" id="1540088">(</span><span class="ident" id="1540089">b</span>&nbsp;<span class="op" id="1540091">*</span><span class="ident" id="1540092"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1540096">)</span>&nbsp;<span class="builtintype" id="1540098">bool</span>&nbsp;<span class="op" id="1540103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540106">h</span>&nbsp;<span class="op" id="1540108">:=</span>&nbsp;<span class="ident" id="1540111"><a href="/gostd/runtime/hashmap.go.html#1540089">b</a></span><span class="op" id="1540112">.</span><span class="ident" id="1540113"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1540120">[</span><span class="num" id="1540121">0</span><span class="op" id="1540122">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540125">return</span>&nbsp;<span class="ident" id="1540132"><a href="/gostd/runtime/hashmap.go.html#1540106">h</a></span>&nbsp;<span class="op" id="1540134">&gt;</span>&nbsp;<span class="ident" id="1540136"><a href="/gostd/runtime/hashmap.go.html#1537480">empty</a></span>&nbsp;<span class="op" id="1540142">&amp;&amp;</span>&nbsp;<span class="ident" id="1540145"><a href="/gostd/runtime/hashmap.go.html#1540106">h</a></span>&nbsp;<span class="op" id="1540147">&lt;</span>&nbsp;<span class="ident" id="1540149"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno">150</span><span class="op" id="1540160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1540163">func</span>&nbsp;<span class="ident" id="1540168">makemap</span><span class="op" id="1540175">(</span><span class="ident" id="1540176">t</span>&nbsp;<span class="op" id="1540178">*</span><span class="ident" id="1540179"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1540186">,</span>&nbsp;<span class="ident" id="1540188">hint</span>&nbsp;<span class="builtintype" id="1540193">int64</span><span class="op" id="1540198">)</span>&nbsp;<span class="op" id="1540200">*</span><span class="ident" id="1540201"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span>&nbsp;<span class="op" id="1540206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540209">if</span>&nbsp;<span class="ident" id="1540212">sz</span>&nbsp;<span class="op" id="1540215">:=</span>&nbsp;<span class="ident" id="1540218"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1540224">.</span><span class="ident" id="1540225">Sizeof</span><span class="op" id="1540231">(</span><span class="ident" id="1540232"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1540236">{</span><span class="op" id="1540237">}</span><span class="op" id="1540238">)</span><span class="op" id="1540239">;</span>&nbsp;<span class="ident" id="1540241"><a href="/gostd/runtime/hashmap.go.html#1540212">sz</a></span>&nbsp;<span class="op" id="1540244">&gt;</span>&nbsp;<span class="num" id="1540246">48</span>&nbsp;<span class="op" id="1540249">||</span>&nbsp;<span class="ident" id="1540252"><a href="/gostd/runtime/hashmap.go.html#1540212">sz</a></span>&nbsp;<span class="op" id="1540255">!=</span>&nbsp;<span class="builtintype" id="1540258">uintptr</span><span class="op" id="1540265">(</span><span class="ident" id="1540266"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540267">.</span><span class="ident" id="1540268"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796223">hmap</a></span><span class="op" id="1540272">.</span><span class="ident" id="1540273"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1540277">)</span>&nbsp;<span class="op" id="1540279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540283"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1540290">(</span><span class="string" id="1540291">&#34;bad&nbsp;hmap&nbsp;size&#34;</span><span class="op" id="1540306">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540313">if</span>&nbsp;<span class="ident" id="1540316"><a href="/gostd/runtime/hashmap.go.html#1540188">hint</a></span>&nbsp;<span class="op" id="1540321">&lt;</span>&nbsp;<span class="num" id="1540323">0</span>&nbsp;<span class="op" id="1540325">||</span>&nbsp;<span class="builtintype" id="1540328">int64</span><span class="op" id="1540333">(</span><span class="builtintype" id="1540334">int32</span><span class="op" id="1540339">(</span><span class="ident" id="1540340"><a href="/gostd/runtime/hashmap.go.html#1540188">hint</a></span><span class="op" id="1540344">)</span><span class="op" id="1540345">)</span>&nbsp;<span class="op" id="1540347">!=</span>&nbsp;<span class="ident" id="1540350"><a href="/gostd/runtime/hashmap.go.html#1540188">hint</a></span>&nbsp;<span class="op" id="1540355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1540359">panic</span><span class="op" id="1540364">(</span><span class="string" id="1540365">&#34;makemap:&nbsp;size&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1540393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540397">//&nbsp;TODO:&nbsp;make&nbsp;hint&nbsp;an&nbsp;int,&nbsp;then&nbsp;none&nbsp;of&nbsp;this&nbsp;nonsense</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540456">if</span>&nbsp;<span class="op" id="1540459">!</span><span class="ident" id="1540460"><a href="/gostd/runtime/hashmap.go.html#1561393">ismapkey</a></span><span class="op" id="1540468">(</span><span class="ident" id="1540469"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540470">.</span><span class="ident" id="1540471"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1540474">)</span>&nbsp;<span class="op" id="1540476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540480"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1540487">(</span><span class="string" id="1540488">&#34;runtime.makemap:&nbsp;unsupported&nbsp;map&nbsp;key&nbsp;type&#34;</span><span class="op" id="1540531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540534">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540538">//&nbsp;check&nbsp;compiler&#39;s&nbsp;and&nbsp;reflect&#39;s&nbsp;math</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540578">if</span>&nbsp;<span class="ident" id="1540581"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540582">.</span><span class="ident" id="1540583"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1540586">.</span><span class="ident" id="1540587"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span>&nbsp;<span class="op" id="1540592">&gt;</span>&nbsp;<span class="ident" id="1540594"><a href="/gostd/runtime/hashmap.go.html#1536850">maxKeySize</a></span>&nbsp;<span class="op" id="1540605">&amp;&amp;</span>&nbsp;<span class="op" id="1540608">(</span><span class="op" id="1540609">!</span><span class="ident" id="1540610"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540611">.</span><span class="ident" id="1540612"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1540624">||</span>&nbsp;<span class="ident" id="1540627"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540628">.</span><span class="ident" id="1540629"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span>&nbsp;<span class="op" id="1540637">!=</span>&nbsp;<span class="builtintype" id="1540640">uint8</span><span class="op" id="1540645">(</span><span class="ident" id="1540646"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1540653">)</span><span class="op" id="1540654">)</span>&nbsp;<span class="op" id="1540656">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540661"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540662">.</span><span class="ident" id="1540663"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1540666">.</span><span class="ident" id="1540667"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span>&nbsp;<span class="op" id="1540672">&lt;=</span>&nbsp;<span class="ident" id="1540675"><a href="/gostd/runtime/hashmap.go.html#1536850">maxKeySize</a></span>&nbsp;<span class="op" id="1540686">&amp;&amp;</span>&nbsp;<span class="op" id="1540689">(</span><span class="ident" id="1540690"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540691">.</span><span class="ident" id="1540692"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1540704">||</span>&nbsp;<span class="ident" id="1540707"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540708">.</span><span class="ident" id="1540709"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span>&nbsp;<span class="op" id="1540717">!=</span>&nbsp;<span class="builtintype" id="1540720">uint8</span><span class="op" id="1540725">(</span><span class="ident" id="1540726"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540727">.</span><span class="ident" id="1540728"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1540731">.</span><span class="ident" id="1540732"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1540736">)</span><span class="op" id="1540737">)</span>&nbsp;<span class="op" id="1540739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540743"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1540750">(</span><span class="string" id="1540751">&#34;key&nbsp;size&nbsp;wrong&#34;</span><span class="op" id="1540767">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540773">if</span>&nbsp;<span class="ident" id="1540776"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540777">.</span><span class="ident" id="1540778"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1540782">.</span><span class="ident" id="1540783"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span>&nbsp;<span class="op" id="1540788">&gt;</span>&nbsp;<span class="ident" id="1540790"><a href="/gostd/runtime/hashmap.go.html#1536870">maxValueSize</a></span>&nbsp;<span class="op" id="1540803">&amp;&amp;</span>&nbsp;<span class="op" id="1540806">(</span><span class="op" id="1540807">!</span><span class="ident" id="1540808"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540809">.</span><span class="ident" id="1540810"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1540824">||</span>&nbsp;<span class="ident" id="1540827"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540828">.</span><span class="ident" id="1540829"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span>&nbsp;<span class="op" id="1540839">!=</span>&nbsp;<span class="builtintype" id="1540842">uint8</span><span class="op" id="1540847">(</span><span class="ident" id="1540848"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1540855">)</span><span class="op" id="1540856">)</span>&nbsp;<span class="op" id="1540858">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540863"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540864">.</span><span class="ident" id="1540865"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1540869">.</span><span class="ident" id="1540870"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span>&nbsp;<span class="op" id="1540875">&lt;=</span>&nbsp;<span class="ident" id="1540878"><a href="/gostd/runtime/hashmap.go.html#1536870">maxValueSize</a></span>&nbsp;<span class="op" id="1540891">&amp;&amp;</span>&nbsp;<span class="op" id="1540894">(</span><span class="ident" id="1540895"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540896">.</span><span class="ident" id="1540897"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1540911">||</span>&nbsp;<span class="ident" id="1540914"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540915">.</span><span class="ident" id="1540916"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span>&nbsp;<span class="op" id="1540926">!=</span>&nbsp;<span class="builtintype" id="1540929">uint8</span><span class="op" id="1540934">(</span><span class="ident" id="1540935"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1540936">.</span><span class="ident" id="1540937"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1540941">.</span><span class="ident" id="1540942"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1540946">)</span><span class="op" id="1540947">)</span>&nbsp;<span class="op" id="1540949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540953"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1540960">(</span><span class="string" id="1540961">&#34;value&nbsp;size&nbsp;wrong&#34;</span><span class="op" id="1540979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540982">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540986">//&nbsp;invariants&nbsp;we&nbsp;depend&nbsp;on.&nbsp;&nbsp;We&nbsp;should&nbsp;probably&nbsp;check&nbsp;these&nbsp;at&nbsp;compile&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541063">//&nbsp;somewhere,&nbsp;but&nbsp;for&nbsp;now&nbsp;we&#39;ll&nbsp;do&nbsp;it&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541108">if</span>&nbsp;<span class="ident" id="1541111"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541112">.</span><span class="ident" id="1541113"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1541116">.</span><span class="ident" id="1541117"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span>&nbsp;<span class="op" id="1541123">&gt;</span>&nbsp;<span class="ident" id="1541125"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1541135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541139"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541146">(</span><span class="string" id="1541147">&#34;key&nbsp;align&nbsp;too&nbsp;big&#34;</span><span class="op" id="1541166">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541172">if</span>&nbsp;<span class="ident" id="1541175"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541176">.</span><span class="ident" id="1541177"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1541181">.</span><span class="ident" id="1541182"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span>&nbsp;<span class="op" id="1541188">&gt;</span>&nbsp;<span class="ident" id="1541190"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1541200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541204"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541211">(</span><span class="string" id="1541212">&#34;value&nbsp;align&nbsp;too&nbsp;big&#34;</span><span class="op" id="1541233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541239">if</span>&nbsp;<span class="builtintype" id="1541242">uintptr</span><span class="op" id="1541249">(</span><span class="ident" id="1541250"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541251">.</span><span class="ident" id="1541252"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1541255">.</span><span class="ident" id="1541256"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1541260">)</span><span class="op" id="1541261">%</span><span class="builtintype" id="1541262">uintptr</span><span class="op" id="1541269">(</span><span class="ident" id="1541270"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541271">.</span><span class="ident" id="1541272"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1541275">.</span><span class="ident" id="1541276"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span><span class="op" id="1541281">)</span>&nbsp;<span class="op" id="1541283">!=</span>&nbsp;<span class="num" id="1541286">0</span>&nbsp;<span class="op" id="1541288">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541292"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541299">(</span><span class="string" id="1541300">&#34;key&nbsp;size&nbsp;not&nbsp;a&nbsp;multiple&nbsp;of&nbsp;key&nbsp;align&#34;</span><span class="op" id="1541338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541344">if</span>&nbsp;<span class="builtintype" id="1541347">uintptr</span><span class="op" id="1541354">(</span><span class="ident" id="1541355"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541356">.</span><span class="ident" id="1541357"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1541361">.</span><span class="ident" id="1541362"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1541366">)</span><span class="op" id="1541367">%</span><span class="builtintype" id="1541368">uintptr</span><span class="op" id="1541375">(</span><span class="ident" id="1541376"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541377">.</span><span class="ident" id="1541378"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1541382">.</span><span class="ident" id="1541383"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span><span class="op" id="1541388">)</span>&nbsp;<span class="op" id="1541390">!=</span>&nbsp;<span class="num" id="1541393">0</span>&nbsp;<span class="op" id="1541395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541399"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541406">(</span><span class="string" id="1541407">&#34;value&nbsp;size&nbsp;not&nbsp;a&nbsp;multiple&nbsp;of&nbsp;value&nbsp;align&#34;</span><span class="op" id="1541449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541452">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541455">if</span>&nbsp;<span class="ident" id="1541458"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1541468">&lt;</span>&nbsp;<span class="num" id="1541470">8</span>&nbsp;<span class="op" id="1541472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541476"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541483">(</span><span class="string" id="1541484">&#34;bucketsize&nbsp;too&nbsp;small&nbsp;for&nbsp;proper&nbsp;alignment&#34;</span><span class="op" id="1541527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541533">if</span>&nbsp;<span class="ident" id="1541536"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1541546">%</span><span class="builtintype" id="1541547">uintptr</span><span class="op" id="1541554">(</span><span class="ident" id="1541555"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541556">.</span><span class="ident" id="1541557"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1541560">.</span><span class="ident" id="1541561"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span><span class="op" id="1541566">)</span>&nbsp;<span class="op" id="1541568">!=</span>&nbsp;<span class="num" id="1541571">0</span>&nbsp;<span class="op" id="1541573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541577"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541584">(</span><span class="string" id="1541585">&#34;need&nbsp;padding&nbsp;in&nbsp;bucket&nbsp;(key)&#34;</span><span class="op" id="1541615">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541621">if</span>&nbsp;<span class="ident" id="1541624"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1541634">%</span><span class="builtintype" id="1541635">uintptr</span><span class="op" id="1541642">(</span><span class="ident" id="1541643"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1541644">.</span><span class="ident" id="1541645"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1541649">.</span><span class="ident" id="1541650"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795663">align</a></span><span class="op" id="1541655">)</span>&nbsp;<span class="op" id="1541657">!=</span>&nbsp;<span class="num" id="1541660">0</span>&nbsp;<span class="op" id="1541662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541666"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1541673">(</span><span class="string" id="1541674">&#34;need&nbsp;padding&nbsp;in&nbsp;bucket&nbsp;(value)&#34;</span><span class="op" id="1541706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541713">//&nbsp;find&nbsp;size&nbsp;parameter&nbsp;which&nbsp;will&nbsp;hold&nbsp;the&nbsp;requested&nbsp;#&nbsp;of&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541781">B</span>&nbsp;<span class="op" id="1541783">:=</span>&nbsp;<span class="builtintype" id="1541786">uint8</span><span class="op" id="1541791">(</span><span class="num" id="1541792">0</span><span class="op" id="1541793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541796">for</span>&nbsp;<span class="op" id="1541800">;</span>&nbsp;<span class="ident" id="1541802"><a href="/gostd/runtime/hashmap.go.html#1540188">hint</a></span>&nbsp;<span class="op" id="1541807">&gt;</span>&nbsp;<span class="ident" id="1541809"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1541819">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1541822">float32</span><span class="op" id="1541829">(</span><span class="ident" id="1541830"><a href="/gostd/runtime/hashmap.go.html#1540188">hint</a></span><span class="op" id="1541834">)</span>&nbsp;<span class="op" id="1541836">&gt;</span>&nbsp;<span class="ident" id="1541838"><a href="/gostd/runtime/hashmap.go.html#1536591">loadFactor</a></span><span class="op" id="1541848">*</span><span class="builtintype" id="1541849">float32</span><span class="op" id="1541856">(</span><span class="builtintype" id="1541857">uintptr</span><span class="op" id="1541864">(</span><span class="num" id="1541865">1</span><span class="op" id="1541866">)</span><span class="op" id="1541867">&lt;&lt;</span><span class="ident" id="1541869"><a href="/gostd/runtime/hashmap.go.html#1541781">B</a></span><span class="op" id="1541870">)</span><span class="op" id="1541871">;</span>&nbsp;<span class="ident" id="1541873"><a href="/gostd/runtime/hashmap.go.html#1541781">B</a></span><span class="op" id="1541874">++</span>&nbsp;<span class="op" id="1541877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541884">//&nbsp;allocate&nbsp;initial&nbsp;hash&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541916">//&nbsp;if&nbsp;B&nbsp;==&nbsp;0,&nbsp;the&nbsp;buckets&nbsp;field&nbsp;is&nbsp;allocated&nbsp;lazily&nbsp;later&nbsp;(in&nbsp;mapassign)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541990">//&nbsp;If&nbsp;hint&nbsp;is&nbsp;large&nbsp;zeroing&nbsp;this&nbsp;memory&nbsp;could&nbsp;take&nbsp;a&nbsp;while.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542051">var</span>&nbsp;<span class="ident" id="1542055">buckets</span>&nbsp;<span class="ident" id="1542063"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1542069">.</span><span class="ident" id="1542070">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542079">if</span>&nbsp;<span class="ident" id="1542082"><a href="/gostd/runtime/hashmap.go.html#1541781">B</a></span>&nbsp;<span class="op" id="1542084">!=</span>&nbsp;<span class="num" id="1542087">0</span>&nbsp;<span class="op" id="1542089">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542093">if</span>&nbsp;<span class="ident" id="1542096"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1542104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542109"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1542117">.</span><span class="ident" id="1542118"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1542126">=</span>&nbsp;<span class="ident" id="1542128"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1542136">.</span><span class="ident" id="1542137"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542154"><a href="/gostd/runtime/hashmap.go.html#1542055">buckets</a></span>&nbsp;<span class="op" id="1542162">=</span>&nbsp;<span class="ident" id="1542164"><a href="/gostd/runtime/malloc.go.html#1598768">newarray</a></span><span class="op" id="1542172">(</span><span class="ident" id="1542173"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1542174">.</span><span class="ident" id="1542175"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1542181">,</span>&nbsp;<span class="builtintype" id="1542183">uintptr</span><span class="op" id="1542190">(</span><span class="num" id="1542191">1</span><span class="op" id="1542192">)</span><span class="op" id="1542193">&lt;&lt;</span><span class="ident" id="1542195"><a href="/gostd/runtime/hashmap.go.html#1541781">B</a></span><span class="op" id="1542196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542199">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1542203">//&nbsp;initialize&nbsp;Hmap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542223">if</span>&nbsp;<span class="ident" id="1542226"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1542234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542238"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1542246">.</span><span class="ident" id="1542247"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1542255">=</span>&nbsp;<span class="ident" id="1542257"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1542265">.</span><span class="ident" id="1542266"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542278">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542281">h</span>&nbsp;<span class="op" id="1542283">:=</span>&nbsp;<span class="op" id="1542286">(</span><span class="op" id="1542287">*</span><span class="ident" id="1542288"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1542292">)</span><span class="op" id="1542293">(</span><span class="ident" id="1542294"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1542303">(</span><span class="ident" id="1542304"><a href="/gostd/runtime/hashmap.go.html#1540176">t</a></span><span class="op" id="1542305">.</span><span class="ident" id="1542306"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796223">hmap</a></span><span class="op" id="1542310">)</span><span class="op" id="1542311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542314"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542315">.</span><span class="ident" id="1542316"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1542322">=</span>&nbsp;<span class="num" id="1542324">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542327"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542328">.</span><span class="ident" id="1542329"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1542331">=</span>&nbsp;<span class="ident" id="1542333"><a href="/gostd/runtime/hashmap.go.html#1541781">B</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542336"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542337">.</span><span class="ident" id="1542338"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span>&nbsp;<span class="op" id="1542344">=</span>&nbsp;<span class="num" id="1542346">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542349"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542350">.</span><span class="ident" id="1542351"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span>&nbsp;<span class="op" id="1542357">=</span>&nbsp;<span class="ident" id="1542359"><a href="/gostd/runtime/stubs.go.html#1742945">fastrand1</a></span><span class="op" id="1542368">(</span><span class="op" id="1542369">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542372"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542373">.</span><span class="ident" id="1542374"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span>&nbsp;<span class="op" id="1542382">=</span>&nbsp;<span class="ident" id="1542384"><a href="/gostd/runtime/hashmap.go.html#1542055">buckets</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542393"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542394">.</span><span class="ident" id="1542395"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1542406">=</span>&nbsp;<span class="builtintype" id="1542408">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542413"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><span class="op" id="1542414">.</span><span class="ident" id="1542415"><a href="/gostd/runtime/hashmap.go.html#1538702">nevacuate</a></span>&nbsp;<span class="op" id="1542425">=</span>&nbsp;<span class="num" id="1542427">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542431">return</span>&nbsp;<span class="ident" id="1542438"><a href="/gostd/runtime/hashmap.go.html#1542281">h</a></span><br>
<span class="lineno">230</span><span class="op" id="1542440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1542443">//&nbsp;mapaccess1&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;h[key].&nbsp;&nbsp;Never&nbsp;returns&nbsp;nil,&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1542514">//&nbsp;it&nbsp;will&nbsp;return&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;zero&nbsp;object&nbsp;for&nbsp;the&nbsp;value&nbsp;type&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1542585">//&nbsp;the&nbsp;key&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;map.</span><br>
<span class="lineno">235</span><span class="comment" id="1542615">//&nbsp;NOTE:&nbsp;The&nbsp;returned&nbsp;pointer&nbsp;may&nbsp;keep&nbsp;the&nbsp;whole&nbsp;map&nbsp;live,&nbsp;so&nbsp;don&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="1542683">//&nbsp;hold&nbsp;onto&nbsp;it&nbsp;for&nbsp;very&nbsp;long.</span><br>
<span class="lineno"></span><span class="keyword" id="1542714">func</span>&nbsp;<span class="ident" id="1542719">mapaccess1</span><span class="op" id="1542729">(</span><span class="ident" id="1542730">t</span>&nbsp;<span class="op" id="1542732">*</span><span class="ident" id="1542733"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1542740">,</span>&nbsp;<span class="ident" id="1542742">h</span>&nbsp;<span class="op" id="1542744">*</span><span class="ident" id="1542745"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1542749">,</span>&nbsp;<span class="ident" id="1542751">key</span>&nbsp;<span class="ident" id="1542755"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1542761">.</span><span class="ident" id="1542762">Pointer</span><span class="op" id="1542769">)</span>&nbsp;<span class="ident" id="1542771"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1542777">.</span><span class="ident" id="1542778">Pointer</span>&nbsp;<span class="op" id="1542786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542789">if</span>&nbsp;<span class="ident" id="1542792"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1542804">&amp;&amp;</span>&nbsp;<span class="ident" id="1542807"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span>&nbsp;<span class="op" id="1542809">!=</span>&nbsp;<span class="builtintype" id="1542812">nil</span>&nbsp;<span class="op" id="1542816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542820">callerpc</span>&nbsp;<span class="op" id="1542829">:=</span>&nbsp;<span class="ident" id="1542832"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1542843">(</span><span class="ident" id="1542844"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1542850">.</span><span class="ident" id="1542851">Pointer</span><span class="op" id="1542858">(</span><span class="op" id="1542859">&amp;</span><span class="ident" id="1542860"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1542861">)</span><span class="op" id="1542862">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542866">pc</span>&nbsp;<span class="op" id="1542869">:=</span>&nbsp;<span class="ident" id="1542872"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1542878">(</span><span class="ident" id="1542879"><a href="/gostd/runtime/hashmap.go.html#1542719">mapaccess1</a></span><span class="op" id="1542889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542893"><a href="/gostd/runtime/race0.go.html#1677192">racereadpc</a></span><span class="op" id="1542903">(</span><span class="ident" id="1542904"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1542910">.</span><span class="ident" id="1542911">Pointer</span><span class="op" id="1542918">(</span><span class="ident" id="1542919"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1542920">)</span><span class="op" id="1542921">,</span>&nbsp;<span class="ident" id="1542923"><a href="/gostd/runtime/hashmap.go.html#1542820">callerpc</a></span><span class="op" id="1542931">,</span>&nbsp;<span class="ident" id="1542933"><a href="/gostd/runtime/hashmap.go.html#1542866">pc</a></span><span class="op" id="1542935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542939"><a href="/gostd/runtime/race0.go.html#1676616">raceReadObjectPC</a></span><span class="op" id="1542955">(</span><span class="ident" id="1542956"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1542957">.</span><span class="ident" id="1542958"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1542961">,</span>&nbsp;<span class="ident" id="1542963"><a href="/gostd/runtime/hashmap.go.html#1542751">key</a></span><span class="op" id="1542966">,</span>&nbsp;<span class="ident" id="1542968"><a href="/gostd/runtime/hashmap.go.html#1542820">callerpc</a></span><span class="op" id="1542976">,</span>&nbsp;<span class="ident" id="1542978"><a href="/gostd/runtime/hashmap.go.html#1542866">pc</a></span><span class="op" id="1542980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542986">if</span>&nbsp;<span class="ident" id="1542989"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span>&nbsp;<span class="op" id="1542991">==</span>&nbsp;<span class="builtintype" id="1542994">nil</span>&nbsp;<span class="op" id="1542998">||</span>&nbsp;<span class="ident" id="1543001"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1543002">.</span><span class="ident" id="1543003"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1543009">==</span>&nbsp;<span class="num" id="1543012">0</span>&nbsp;<span class="op" id="1543014">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543018">return</span>&nbsp;<span class="ident" id="1543025"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543031">.</span><span class="ident" id="1543032">Pointer</span><span class="op" id="1543039">(</span><span class="ident" id="1543040"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543041">.</span><span class="ident" id="1543042"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1543046">.</span><span class="ident" id="1543047"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795789">zero</a></span><span class="op" id="1543051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543057">alg</span>&nbsp;<span class="op" id="1543061">:=</span>&nbsp;<span class="ident" id="1543064"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1543069">(</span><span class="ident" id="1543070"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543071">.</span><span class="ident" id="1543072"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1543075">.</span><span class="ident" id="1543076"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1543079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543082">hash</span>&nbsp;<span class="op" id="1543087">:=</span>&nbsp;<span class="ident" id="1543090"><a href="/gostd/runtime/hashmap.go.html#1543057">alg</a></span><span class="op" id="1543093">.</span><span class="ident" id="1543094"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1543098">(</span><span class="ident" id="1543099"><a href="/gostd/runtime/hashmap.go.html#1542751">key</a></span><span class="op" id="1543102">,</span>&nbsp;<span class="builtintype" id="1543104">uintptr</span><span class="op" id="1543111">(</span><span class="ident" id="1543112"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543113">.</span><span class="ident" id="1543114"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1543117">.</span><span class="ident" id="1543118"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1543122">)</span><span class="op" id="1543123">,</span>&nbsp;<span class="builtintype" id="1543125">uintptr</span><span class="op" id="1543132">(</span><span class="ident" id="1543133"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1543134">.</span><span class="ident" id="1543135"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1543140">)</span><span class="op" id="1543141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543144">m</span>&nbsp;<span class="op" id="1543146">:=</span>&nbsp;<span class="builtintype" id="1543149">uintptr</span><span class="op" id="1543156">(</span><span class="num" id="1543157">1</span><span class="op" id="1543158">)</span><span class="op" id="1543159">&lt;&lt;</span><span class="ident" id="1543161"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1543162">.</span><span class="ident" id="1543163"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1543165">-</span>&nbsp;<span class="num" id="1543167">1</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543170">b</span>&nbsp;<span class="op" id="1543172">:=</span>&nbsp;<span class="op" id="1543175">(</span><span class="op" id="1543176">*</span><span class="ident" id="1543177"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1543181">)</span><span class="op" id="1543182">(</span><span class="ident" id="1543183"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1543186">(</span><span class="ident" id="1543187"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1543188">.</span><span class="ident" id="1543189"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1543196">,</span>&nbsp;<span class="op" id="1543198">(</span><span class="ident" id="1543199"><a href="/gostd/runtime/hashmap.go.html#1543082">hash</a></span><span class="op" id="1543203">&amp;</span><span class="ident" id="1543204"><a href="/gostd/runtime/hashmap.go.html#1543144">m</a></span><span class="op" id="1543205">)</span><span class="op" id="1543206">*</span><span class="builtintype" id="1543207">uintptr</span><span class="op" id="1543214">(</span><span class="ident" id="1543215"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543216">.</span><span class="ident" id="1543217"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1543227">)</span><span class="op" id="1543228">)</span><span class="op" id="1543229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543232">if</span>&nbsp;<span class="ident" id="1543235">c</span>&nbsp;<span class="op" id="1543237">:=</span>&nbsp;<span class="ident" id="1543240"><a href="/gostd/runtime/hashmap.go.html#1542742">h</a></span><span class="op" id="1543241">.</span><span class="ident" id="1543242"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1543252">;</span>&nbsp;<span class="ident" id="1543254"><a href="/gostd/runtime/hashmap.go.html#1543235">c</a></span>&nbsp;<span class="op" id="1543256">!=</span>&nbsp;<span class="builtintype" id="1543259">nil</span>&nbsp;<span class="op" id="1543263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543267">oldb</span>&nbsp;<span class="op" id="1543272">:=</span>&nbsp;<span class="op" id="1543275">(</span><span class="op" id="1543276">*</span><span class="ident" id="1543277"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1543281">)</span><span class="op" id="1543282">(</span><span class="ident" id="1543283"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1543286">(</span><span class="ident" id="1543287"><a href="/gostd/runtime/hashmap.go.html#1543235">c</a></span><span class="op" id="1543288">,</span>&nbsp;<span class="op" id="1543290">(</span><span class="ident" id="1543291"><a href="/gostd/runtime/hashmap.go.html#1543082">hash</a></span><span class="op" id="1543295">&amp;</span><span class="op" id="1543296">(</span><span class="ident" id="1543297"><a href="/gostd/runtime/hashmap.go.html#1543144">m</a></span><span class="op" id="1543298">&gt;&gt;</span><span class="num" id="1543300">1</span><span class="op" id="1543301">)</span><span class="op" id="1543302">)</span><span class="op" id="1543303">*</span><span class="builtintype" id="1543304">uintptr</span><span class="op" id="1543311">(</span><span class="ident" id="1543312"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543313">.</span><span class="ident" id="1543314"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1543324">)</span><span class="op" id="1543325">)</span><span class="op" id="1543326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543330">if</span>&nbsp;<span class="op" id="1543333">!</span><span class="ident" id="1543334"><a href="/gostd/runtime/hashmap.go.html#1540079">evacuated</a></span><span class="op" id="1543343">(</span><span class="ident" id="1543344"><a href="/gostd/runtime/hashmap.go.html#1543267">oldb</a></span><span class="op" id="1543348">)</span>&nbsp;<span class="op" id="1543350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543355"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span>&nbsp;<span class="op" id="1543357">=</span>&nbsp;<span class="ident" id="1543359"><a href="/gostd/runtime/hashmap.go.html#1543267">oldb</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543372">top</span>&nbsp;<span class="op" id="1543376">:=</span>&nbsp;<span class="builtintype" id="1543379">uint8</span><span class="op" id="1543384">(</span><span class="ident" id="1543385"><a href="/gostd/runtime/hashmap.go.html#1543082">hash</a></span>&nbsp;<span class="op" id="1543390">&gt;&gt;</span>&nbsp;<span class="op" id="1543393">(</span><span class="ident" id="1543394"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1543401">*</span><span class="num" id="1543402">8</span>&nbsp;<span class="op" id="1543404">-</span>&nbsp;<span class="num" id="1543406">8</span><span class="op" id="1543407">)</span><span class="op" id="1543408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543411">if</span>&nbsp;<span class="ident" id="1543414"><a href="/gostd/runtime/hashmap.go.html#1543372">top</a></span>&nbsp;<span class="op" id="1543418">&lt;</span>&nbsp;<span class="ident" id="1543420"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1543431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543435"><a href="/gostd/runtime/hashmap.go.html#1543372">top</a></span>&nbsp;<span class="op" id="1543439">+=</span>&nbsp;<span class="ident" id="1543442"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543457">for</span>&nbsp;<span class="op" id="1543461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543465">for</span>&nbsp;<span class="ident" id="1543469">i</span>&nbsp;<span class="op" id="1543471">:=</span>&nbsp;<span class="builtintype" id="1543474">uintptr</span><span class="op" id="1543481">(</span><span class="num" id="1543482">0</span><span class="op" id="1543483">)</span><span class="op" id="1543484">;</span>&nbsp;<span class="ident" id="1543486"><a href="/gostd/runtime/hashmap.go.html#1543469">i</a></span>&nbsp;<span class="op" id="1543488">&lt;</span>&nbsp;<span class="ident" id="1543490"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1543499">;</span>&nbsp;<span class="ident" id="1543501"><a href="/gostd/runtime/hashmap.go.html#1543469">i</a></span><span class="op" id="1543502">++</span>&nbsp;<span class="op" id="1543505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543510">if</span>&nbsp;<span class="ident" id="1543513"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span><span class="op" id="1543514">.</span><span class="ident" id="1543515"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1543522">[</span><span class="ident" id="1543523"><a href="/gostd/runtime/hashmap.go.html#1543469">i</a></span><span class="op" id="1543524">]</span>&nbsp;<span class="op" id="1543526">!=</span>&nbsp;<span class="ident" id="1543529"><a href="/gostd/runtime/hashmap.go.html#1543372">top</a></span>&nbsp;<span class="op" id="1543533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543539">continue</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543556">k</span>&nbsp;<span class="op" id="1543558">:=</span>&nbsp;<span class="ident" id="1543561"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1543564">(</span><span class="ident" id="1543565"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543571">.</span><span class="ident" id="1543572">Pointer</span><span class="op" id="1543579">(</span><span class="ident" id="1543580"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span><span class="op" id="1543581">)</span><span class="op" id="1543582">,</span>&nbsp;<span class="ident" id="1543584"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1543594">+</span><span class="ident" id="1543595"><a href="/gostd/runtime/hashmap.go.html#1543469">i</a></span><span class="op" id="1543596">*</span><span class="builtintype" id="1543597">uintptr</span><span class="op" id="1543604">(</span><span class="ident" id="1543605"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543606">.</span><span class="ident" id="1543607"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1543614">)</span><span class="op" id="1543615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543620">if</span>&nbsp;<span class="ident" id="1543623"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543624">.</span><span class="ident" id="1543625"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1543637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543643"><a href="/gostd/runtime/hashmap.go.html#1543556">k</a></span>&nbsp;<span class="op" id="1543645">=</span>&nbsp;<span class="op" id="1543647">*</span><span class="op" id="1543648">(</span><span class="op" id="1543649">(</span><span class="op" id="1543650">*</span><span class="ident" id="1543651"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543657">.</span><span class="ident" id="1543658">Pointer</span><span class="op" id="1543665">)</span><span class="op" id="1543666">(</span><span class="ident" id="1543667"><a href="/gostd/runtime/hashmap.go.html#1543556">k</a></span><span class="op" id="1543668">)</span><span class="op" id="1543669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543674">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543679">if</span>&nbsp;<span class="ident" id="1543682"><a href="/gostd/runtime/hashmap.go.html#1543057">alg</a></span><span class="op" id="1543685">.</span><span class="ident" id="1543686"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1543691">(</span><span class="ident" id="1543692"><a href="/gostd/runtime/hashmap.go.html#1542751">key</a></span><span class="op" id="1543695">,</span>&nbsp;<span class="ident" id="1543697"><a href="/gostd/runtime/hashmap.go.html#1543556">k</a></span><span class="op" id="1543698">,</span>&nbsp;<span class="builtintype" id="1543700">uintptr</span><span class="op" id="1543707">(</span><span class="ident" id="1543708"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543709">.</span><span class="ident" id="1543710"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1543713">.</span><span class="ident" id="1543714"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1543718">)</span><span class="op" id="1543719">)</span>&nbsp;<span class="op" id="1543721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543727">v</span>&nbsp;<span class="op" id="1543729">:=</span>&nbsp;<span class="ident" id="1543732"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1543735">(</span><span class="ident" id="1543736"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543742">.</span><span class="ident" id="1543743">Pointer</span><span class="op" id="1543750">(</span><span class="ident" id="1543751"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span><span class="op" id="1543752">)</span><span class="op" id="1543753">,</span>&nbsp;<span class="ident" id="1543755"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1543765">+</span><span class="ident" id="1543766"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1543775">*</span><span class="builtintype" id="1543776">uintptr</span><span class="op" id="1543783">(</span><span class="ident" id="1543784"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543785">.</span><span class="ident" id="1543786"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1543793">)</span><span class="op" id="1543794">+</span><span class="ident" id="1543795"><a href="/gostd/runtime/hashmap.go.html#1543469">i</a></span><span class="op" id="1543796">*</span><span class="builtintype" id="1543797">uintptr</span><span class="op" id="1543804">(</span><span class="ident" id="1543805"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543806">.</span><span class="ident" id="1543807"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1543816">)</span><span class="op" id="1543817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543823">if</span>&nbsp;<span class="ident" id="1543826"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543827">.</span><span class="ident" id="1543828"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1543842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543849"><a href="/gostd/runtime/hashmap.go.html#1543727">v</a></span>&nbsp;<span class="op" id="1543851">=</span>&nbsp;<span class="op" id="1543853">*</span><span class="op" id="1543854">(</span><span class="op" id="1543855">(</span><span class="op" id="1543856">*</span><span class="ident" id="1543857"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543863">.</span><span class="ident" id="1543864">Pointer</span><span class="op" id="1543871">)</span><span class="op" id="1543872">(</span><span class="ident" id="1543873"><a href="/gostd/runtime/hashmap.go.html#1543727">v</a></span><span class="op" id="1543874">)</span><span class="op" id="1543875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543881">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543887">return</span>&nbsp;<span class="ident" id="1543894"><a href="/gostd/runtime/hashmap.go.html#1543727">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543907"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span>&nbsp;<span class="op" id="1543909">=</span>&nbsp;<span class="ident" id="1543911"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span><span class="op" id="1543912">.</span><span class="ident" id="1543913"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543924">if</span>&nbsp;<span class="ident" id="1543927"><a href="/gostd/runtime/hashmap.go.html#1543170">b</a></span>&nbsp;<span class="op" id="1543929">==</span>&nbsp;<span class="builtintype" id="1543932">nil</span>&nbsp;<span class="op" id="1543936">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543941">return</span>&nbsp;<span class="ident" id="1543948"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1543954">.</span><span class="ident" id="1543955">Pointer</span><span class="op" id="1543962">(</span><span class="ident" id="1543963"><a href="/gostd/runtime/hashmap.go.html#1542730">t</a></span><span class="op" id="1543964">.</span><span class="ident" id="1543965"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1543969">.</span><span class="ident" id="1543970"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795789">zero</a></span><span class="op" id="1543974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543981">}</span><br>
<span class="lineno"></span><span class="op" id="1543983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1543986">func</span>&nbsp;<span class="ident" id="1543991">mapaccess2</span><span class="op" id="1544001">(</span><span class="ident" id="1544002">t</span>&nbsp;<span class="op" id="1544004">*</span><span class="ident" id="1544005"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1544012">,</span>&nbsp;<span class="ident" id="1544014">h</span>&nbsp;<span class="op" id="1544016">*</span><span class="ident" id="1544017"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1544021">,</span>&nbsp;<span class="ident" id="1544023">key</span>&nbsp;<span class="ident" id="1544027"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544033">.</span><span class="ident" id="1544034">Pointer</span><span class="op" id="1544041">)</span>&nbsp;<span class="op" id="1544043">(</span><span class="ident" id="1544044"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544050">.</span><span class="ident" id="1544051">Pointer</span><span class="op" id="1544058">,</span>&nbsp;<span class="builtintype" id="1544060">bool</span><span class="op" id="1544064">)</span>&nbsp;<span class="op" id="1544066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544069">if</span>&nbsp;<span class="ident" id="1544072"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1544084">&amp;&amp;</span>&nbsp;<span class="ident" id="1544087"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span>&nbsp;<span class="op" id="1544089">!=</span>&nbsp;<span class="builtintype" id="1544092">nil</span>&nbsp;<span class="op" id="1544096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544100">callerpc</span>&nbsp;<span class="op" id="1544109">:=</span>&nbsp;<span class="ident" id="1544112"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1544123">(</span><span class="ident" id="1544124"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544130">.</span><span class="ident" id="1544131">Pointer</span><span class="op" id="1544138">(</span><span class="op" id="1544139">&amp;</span><span class="ident" id="1544140"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544141">)</span><span class="op" id="1544142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544146">pc</span>&nbsp;<span class="op" id="1544149">:=</span>&nbsp;<span class="ident" id="1544152"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1544158">(</span><span class="ident" id="1544159"><a href="/gostd/runtime/hashmap.go.html#1543991">mapaccess2</a></span><span class="op" id="1544169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544173"><a href="/gostd/runtime/race0.go.html#1677192">racereadpc</a></span><span class="op" id="1544183">(</span><span class="ident" id="1544184"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544190">.</span><span class="ident" id="1544191">Pointer</span><span class="op" id="1544198">(</span><span class="ident" id="1544199"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544200">)</span><span class="op" id="1544201">,</span>&nbsp;<span class="ident" id="1544203"><a href="/gostd/runtime/hashmap.go.html#1544100">callerpc</a></span><span class="op" id="1544211">,</span>&nbsp;<span class="ident" id="1544213"><a href="/gostd/runtime/hashmap.go.html#1544146">pc</a></span><span class="op" id="1544215">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544219"><a href="/gostd/runtime/race0.go.html#1676616">raceReadObjectPC</a></span><span class="op" id="1544235">(</span><span class="ident" id="1544236"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544237">.</span><span class="ident" id="1544238"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1544241">,</span>&nbsp;<span class="ident" id="1544243"><a href="/gostd/runtime/hashmap.go.html#1544023">key</a></span><span class="op" id="1544246">,</span>&nbsp;<span class="ident" id="1544248"><a href="/gostd/runtime/hashmap.go.html#1544100">callerpc</a></span><span class="op" id="1544256">,</span>&nbsp;<span class="ident" id="1544258"><a href="/gostd/runtime/hashmap.go.html#1544146">pc</a></span><span class="op" id="1544260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544266">if</span>&nbsp;<span class="ident" id="1544269"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span>&nbsp;<span class="op" id="1544271">==</span>&nbsp;<span class="builtintype" id="1544274">nil</span>&nbsp;<span class="op" id="1544278">||</span>&nbsp;<span class="ident" id="1544281"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544282">.</span><span class="ident" id="1544283"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1544289">==</span>&nbsp;<span class="num" id="1544292">0</span>&nbsp;<span class="op" id="1544294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544298">return</span>&nbsp;<span class="ident" id="1544305"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544311">.</span><span class="ident" id="1544312">Pointer</span><span class="op" id="1544319">(</span><span class="ident" id="1544320"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544321">.</span><span class="ident" id="1544322"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1544326">.</span><span class="ident" id="1544327"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795789">zero</a></span><span class="op" id="1544331">)</span><span class="op" id="1544332">,</span>&nbsp;<span class="builtintype" id="1544334">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544341">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544344">alg</span>&nbsp;<span class="op" id="1544348">:=</span>&nbsp;<span class="ident" id="1544351"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1544356">(</span><span class="ident" id="1544357"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544358">.</span><span class="ident" id="1544359"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1544362">.</span><span class="ident" id="1544363"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1544366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544369">hash</span>&nbsp;<span class="op" id="1544374">:=</span>&nbsp;<span class="ident" id="1544377"><a href="/gostd/runtime/hashmap.go.html#1544344">alg</a></span><span class="op" id="1544380">.</span><span class="ident" id="1544381"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1544385">(</span><span class="ident" id="1544386"><a href="/gostd/runtime/hashmap.go.html#1544023">key</a></span><span class="op" id="1544389">,</span>&nbsp;<span class="builtintype" id="1544391">uintptr</span><span class="op" id="1544398">(</span><span class="ident" id="1544399"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544400">.</span><span class="ident" id="1544401"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1544404">.</span><span class="ident" id="1544405"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1544409">)</span><span class="op" id="1544410">,</span>&nbsp;<span class="builtintype" id="1544412">uintptr</span><span class="op" id="1544419">(</span><span class="ident" id="1544420"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544421">.</span><span class="ident" id="1544422"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1544427">)</span><span class="op" id="1544428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544431">m</span>&nbsp;<span class="op" id="1544433">:=</span>&nbsp;<span class="builtintype" id="1544436">uintptr</span><span class="op" id="1544443">(</span><span class="num" id="1544444">1</span><span class="op" id="1544445">)</span><span class="op" id="1544446">&lt;&lt;</span><span class="ident" id="1544448"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544449">.</span><span class="ident" id="1544450"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1544452">-</span>&nbsp;<span class="num" id="1544454">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544457">b</span>&nbsp;<span class="op" id="1544459">:=</span>&nbsp;<span class="op" id="1544462">(</span><span class="op" id="1544463">*</span><span class="ident" id="1544464"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1544468">)</span><span class="op" id="1544469">(</span><span class="ident" id="1544470"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544476">.</span><span class="ident" id="1544477">Pointer</span><span class="op" id="1544484">(</span><span class="builtintype" id="1544485">uintptr</span><span class="op" id="1544492">(</span><span class="ident" id="1544493"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544494">.</span><span class="ident" id="1544495"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1544502">)</span>&nbsp;<span class="op" id="1544504">+</span>&nbsp;<span class="op" id="1544506">(</span><span class="ident" id="1544507"><a href="/gostd/runtime/hashmap.go.html#1544369">hash</a></span><span class="op" id="1544511">&amp;</span><span class="ident" id="1544512"><a href="/gostd/runtime/hashmap.go.html#1544431">m</a></span><span class="op" id="1544513">)</span><span class="op" id="1544514">*</span><span class="builtintype" id="1544515">uintptr</span><span class="op" id="1544522">(</span><span class="ident" id="1544523"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544524">.</span><span class="ident" id="1544525"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1544535">)</span><span class="op" id="1544536">)</span><span class="op" id="1544537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544540">if</span>&nbsp;<span class="ident" id="1544543">c</span>&nbsp;<span class="op" id="1544545">:=</span>&nbsp;<span class="ident" id="1544548"><a href="/gostd/runtime/hashmap.go.html#1544014">h</a></span><span class="op" id="1544549">.</span><span class="ident" id="1544550"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1544560">;</span>&nbsp;<span class="ident" id="1544562"><a href="/gostd/runtime/hashmap.go.html#1544543">c</a></span>&nbsp;<span class="op" id="1544564">!=</span>&nbsp;<span class="builtintype" id="1544567">nil</span>&nbsp;<span class="op" id="1544571">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544575">oldb</span>&nbsp;<span class="op" id="1544580">:=</span>&nbsp;<span class="op" id="1544583">(</span><span class="op" id="1544584">*</span><span class="ident" id="1544585"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1544589">)</span><span class="op" id="1544590">(</span><span class="ident" id="1544591"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544597">.</span><span class="ident" id="1544598">Pointer</span><span class="op" id="1544605">(</span><span class="builtintype" id="1544606">uintptr</span><span class="op" id="1544613">(</span><span class="ident" id="1544614"><a href="/gostd/runtime/hashmap.go.html#1544543">c</a></span><span class="op" id="1544615">)</span>&nbsp;<span class="op" id="1544617">+</span>&nbsp;<span class="op" id="1544619">(</span><span class="ident" id="1544620"><a href="/gostd/runtime/hashmap.go.html#1544369">hash</a></span><span class="op" id="1544624">&amp;</span><span class="op" id="1544625">(</span><span class="ident" id="1544626"><a href="/gostd/runtime/hashmap.go.html#1544431">m</a></span><span class="op" id="1544627">&gt;&gt;</span><span class="num" id="1544629">1</span><span class="op" id="1544630">)</span><span class="op" id="1544631">)</span><span class="op" id="1544632">*</span><span class="builtintype" id="1544633">uintptr</span><span class="op" id="1544640">(</span><span class="ident" id="1544641"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544642">.</span><span class="ident" id="1544643"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1544653">)</span><span class="op" id="1544654">)</span><span class="op" id="1544655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544659">if</span>&nbsp;<span class="op" id="1544662">!</span><span class="ident" id="1544663"><a href="/gostd/runtime/hashmap.go.html#1540079">evacuated</a></span><span class="op" id="1544672">(</span><span class="ident" id="1544673"><a href="/gostd/runtime/hashmap.go.html#1544575">oldb</a></span><span class="op" id="1544677">)</span>&nbsp;<span class="op" id="1544679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544684"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span>&nbsp;<span class="op" id="1544686">=</span>&nbsp;<span class="ident" id="1544688"><a href="/gostd/runtime/hashmap.go.html#1544575">oldb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544698">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544701">top</span>&nbsp;<span class="op" id="1544705">:=</span>&nbsp;<span class="builtintype" id="1544708">uint8</span><span class="op" id="1544713">(</span><span class="ident" id="1544714"><a href="/gostd/runtime/hashmap.go.html#1544369">hash</a></span>&nbsp;<span class="op" id="1544719">&gt;&gt;</span>&nbsp;<span class="op" id="1544722">(</span><span class="ident" id="1544723"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1544730">*</span><span class="num" id="1544731">8</span>&nbsp;<span class="op" id="1544733">-</span>&nbsp;<span class="num" id="1544735">8</span><span class="op" id="1544736">)</span><span class="op" id="1544737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544740">if</span>&nbsp;<span class="ident" id="1544743"><a href="/gostd/runtime/hashmap.go.html#1544701">top</a></span>&nbsp;<span class="op" id="1544747">&lt;</span>&nbsp;<span class="ident" id="1544749"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1544760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544764"><a href="/gostd/runtime/hashmap.go.html#1544701">top</a></span>&nbsp;<span class="op" id="1544768">+=</span>&nbsp;<span class="ident" id="1544771"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544786">for</span>&nbsp;<span class="op" id="1544790">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544794">for</span>&nbsp;<span class="ident" id="1544798">i</span>&nbsp;<span class="op" id="1544800">:=</span>&nbsp;<span class="builtintype" id="1544803">uintptr</span><span class="op" id="1544810">(</span><span class="num" id="1544811">0</span><span class="op" id="1544812">)</span><span class="op" id="1544813">;</span>&nbsp;<span class="ident" id="1544815"><a href="/gostd/runtime/hashmap.go.html#1544798">i</a></span>&nbsp;<span class="op" id="1544817">&lt;</span>&nbsp;<span class="ident" id="1544819"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1544828">;</span>&nbsp;<span class="ident" id="1544830"><a href="/gostd/runtime/hashmap.go.html#1544798">i</a></span><span class="op" id="1544831">++</span>&nbsp;<span class="op" id="1544834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544839">if</span>&nbsp;<span class="ident" id="1544842"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span><span class="op" id="1544843">.</span><span class="ident" id="1544844"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1544851">[</span><span class="ident" id="1544852"><a href="/gostd/runtime/hashmap.go.html#1544798">i</a></span><span class="op" id="1544853">]</span>&nbsp;<span class="op" id="1544855">!=</span>&nbsp;<span class="ident" id="1544858"><a href="/gostd/runtime/hashmap.go.html#1544701">top</a></span>&nbsp;<span class="op" id="1544862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544868">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544885">k</span>&nbsp;<span class="op" id="1544887">:=</span>&nbsp;<span class="ident" id="1544890"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1544893">(</span><span class="ident" id="1544894"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544900">.</span><span class="ident" id="1544901">Pointer</span><span class="op" id="1544908">(</span><span class="ident" id="1544909"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span><span class="op" id="1544910">)</span><span class="op" id="1544911">,</span>&nbsp;<span class="ident" id="1544913"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1544923">+</span><span class="ident" id="1544924"><a href="/gostd/runtime/hashmap.go.html#1544798">i</a></span><span class="op" id="1544925">*</span><span class="builtintype" id="1544926">uintptr</span><span class="op" id="1544933">(</span><span class="ident" id="1544934"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544935">.</span><span class="ident" id="1544936"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1544943">)</span><span class="op" id="1544944">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544949">if</span>&nbsp;<span class="ident" id="1544952"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1544953">.</span><span class="ident" id="1544954"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1544966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544972"><a href="/gostd/runtime/hashmap.go.html#1544885">k</a></span>&nbsp;<span class="op" id="1544974">=</span>&nbsp;<span class="op" id="1544976">*</span><span class="op" id="1544977">(</span><span class="op" id="1544978">(</span><span class="op" id="1544979">*</span><span class="ident" id="1544980"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1544986">.</span><span class="ident" id="1544987">Pointer</span><span class="op" id="1544994">)</span><span class="op" id="1544995">(</span><span class="ident" id="1544996"><a href="/gostd/runtime/hashmap.go.html#1544885">k</a></span><span class="op" id="1544997">)</span><span class="op" id="1544998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545008">if</span>&nbsp;<span class="ident" id="1545011"><a href="/gostd/runtime/hashmap.go.html#1544344">alg</a></span><span class="op" id="1545014">.</span><span class="ident" id="1545015"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1545020">(</span><span class="ident" id="1545021"><a href="/gostd/runtime/hashmap.go.html#1544023">key</a></span><span class="op" id="1545024">,</span>&nbsp;<span class="ident" id="1545026"><a href="/gostd/runtime/hashmap.go.html#1544885">k</a></span><span class="op" id="1545027">,</span>&nbsp;<span class="builtintype" id="1545029">uintptr</span><span class="op" id="1545036">(</span><span class="ident" id="1545037"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1545038">.</span><span class="ident" id="1545039"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1545042">.</span><span class="ident" id="1545043"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1545047">)</span><span class="op" id="1545048">)</span>&nbsp;<span class="op" id="1545050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545056">v</span>&nbsp;<span class="op" id="1545058">:=</span>&nbsp;<span class="ident" id="1545061"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1545064">(</span><span class="ident" id="1545065"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545071">.</span><span class="ident" id="1545072">Pointer</span><span class="op" id="1545079">(</span><span class="ident" id="1545080"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span><span class="op" id="1545081">)</span><span class="op" id="1545082">,</span>&nbsp;<span class="ident" id="1545084"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1545094">+</span><span class="ident" id="1545095"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1545104">*</span><span class="builtintype" id="1545105">uintptr</span><span class="op" id="1545112">(</span><span class="ident" id="1545113"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1545114">.</span><span class="ident" id="1545115"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1545122">)</span><span class="op" id="1545123">+</span><span class="ident" id="1545124"><a href="/gostd/runtime/hashmap.go.html#1544798">i</a></span><span class="op" id="1545125">*</span><span class="builtintype" id="1545126">uintptr</span><span class="op" id="1545133">(</span><span class="ident" id="1545134"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1545135">.</span><span class="ident" id="1545136"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1545145">)</span><span class="op" id="1545146">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545152">if</span>&nbsp;<span class="ident" id="1545155"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1545156">.</span><span class="ident" id="1545157"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1545171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545178"><a href="/gostd/runtime/hashmap.go.html#1545056">v</a></span>&nbsp;<span class="op" id="1545180">=</span>&nbsp;<span class="op" id="1545182">*</span><span class="op" id="1545183">(</span><span class="op" id="1545184">(</span><span class="op" id="1545185">*</span><span class="ident" id="1545186"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545192">.</span><span class="ident" id="1545193">Pointer</span><span class="op" id="1545200">)</span><span class="op" id="1545201">(</span><span class="ident" id="1545202"><a href="/gostd/runtime/hashmap.go.html#1545056">v</a></span><span class="op" id="1545203">)</span><span class="op" id="1545204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545216">return</span>&nbsp;<span class="ident" id="1545223"><a href="/gostd/runtime/hashmap.go.html#1545056">v</a></span><span class="op" id="1545224">,</span>&nbsp;<span class="builtintype" id="1545226">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545234">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545242"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span>&nbsp;<span class="op" id="1545244">=</span>&nbsp;<span class="ident" id="1545246"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span><span class="op" id="1545247">.</span><span class="ident" id="1545248"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545259">if</span>&nbsp;<span class="ident" id="1545262"><a href="/gostd/runtime/hashmap.go.html#1544457">b</a></span>&nbsp;<span class="op" id="1545264">==</span>&nbsp;<span class="builtintype" id="1545267">nil</span>&nbsp;<span class="op" id="1545271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545276">return</span>&nbsp;<span class="ident" id="1545283"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545289">.</span><span class="ident" id="1545290">Pointer</span><span class="op" id="1545297">(</span><span class="ident" id="1545298"><a href="/gostd/runtime/hashmap.go.html#1544002">t</a></span><span class="op" id="1545299">.</span><span class="ident" id="1545300"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1545304">.</span><span class="ident" id="1545305"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795789">zero</a></span><span class="op" id="1545309">)</span><span class="op" id="1545310">,</span>&nbsp;<span class="builtintype" id="1545312">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545320">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545323">}</span><br>
<span class="lineno"></span><span class="op" id="1545325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1545328">//&nbsp;returns&nbsp;both&nbsp;key&nbsp;and&nbsp;value.&nbsp;&nbsp;Used&nbsp;by&nbsp;map&nbsp;iterator</span><br>
<span class="lineno"></span><span class="keyword" id="1545381">func</span>&nbsp;<span class="ident" id="1545386">mapaccessK</span><span class="op" id="1545396">(</span><span class="ident" id="1545397">t</span>&nbsp;<span class="op" id="1545399">*</span><span class="ident" id="1545400"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1545407">,</span>&nbsp;<span class="ident" id="1545409">h</span>&nbsp;<span class="op" id="1545411">*</span><span class="ident" id="1545412"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1545416">,</span>&nbsp;<span class="ident" id="1545418">key</span>&nbsp;<span class="ident" id="1545422"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545428">.</span><span class="ident" id="1545429">Pointer</span><span class="op" id="1545436">)</span>&nbsp;<span class="op" id="1545438">(</span><span class="ident" id="1545439"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545445">.</span><span class="ident" id="1545446">Pointer</span><span class="op" id="1545453">,</span>&nbsp;<span class="ident" id="1545455"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545461">.</span><span class="ident" id="1545462">Pointer</span><span class="op" id="1545469">)</span>&nbsp;<span class="op" id="1545471">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545474">if</span>&nbsp;<span class="ident" id="1545477"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span>&nbsp;<span class="op" id="1545479">==</span>&nbsp;<span class="builtintype" id="1545482">nil</span>&nbsp;<span class="op" id="1545486">||</span>&nbsp;<span class="ident" id="1545489"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span><span class="op" id="1545490">.</span><span class="ident" id="1545491"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1545497">==</span>&nbsp;<span class="num" id="1545500">0</span>&nbsp;<span class="op" id="1545502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545506">return</span>&nbsp;<span class="builtintype" id="1545513">nil</span><span class="op" id="1545516">,</span>&nbsp;<span class="builtintype" id="1545518">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545526">alg</span>&nbsp;<span class="op" id="1545530">:=</span>&nbsp;<span class="ident" id="1545533"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1545538">(</span><span class="ident" id="1545539"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1545540">.</span><span class="ident" id="1545541"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1545544">.</span><span class="ident" id="1545545"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1545548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545551">hash</span>&nbsp;<span class="op" id="1545556">:=</span>&nbsp;<span class="ident" id="1545559"><a href="/gostd/runtime/hashmap.go.html#1545526">alg</a></span><span class="op" id="1545562">.</span><span class="ident" id="1545563"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1545567">(</span><span class="ident" id="1545568"><a href="/gostd/runtime/hashmap.go.html#1545418">key</a></span><span class="op" id="1545571">,</span>&nbsp;<span class="builtintype" id="1545573">uintptr</span><span class="op" id="1545580">(</span><span class="ident" id="1545581"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1545582">.</span><span class="ident" id="1545583"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1545586">.</span><span class="ident" id="1545587"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1545591">)</span><span class="op" id="1545592">,</span>&nbsp;<span class="builtintype" id="1545594">uintptr</span><span class="op" id="1545601">(</span><span class="ident" id="1545602"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span><span class="op" id="1545603">.</span><span class="ident" id="1545604"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1545609">)</span><span class="op" id="1545610">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545613">m</span>&nbsp;<span class="op" id="1545615">:=</span>&nbsp;<span class="builtintype" id="1545618">uintptr</span><span class="op" id="1545625">(</span><span class="num" id="1545626">1</span><span class="op" id="1545627">)</span><span class="op" id="1545628">&lt;&lt;</span><span class="ident" id="1545630"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span><span class="op" id="1545631">.</span><span class="ident" id="1545632"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1545634">-</span>&nbsp;<span class="num" id="1545636">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545639">b</span>&nbsp;<span class="op" id="1545641">:=</span>&nbsp;<span class="op" id="1545644">(</span><span class="op" id="1545645">*</span><span class="ident" id="1545646"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1545650">)</span><span class="op" id="1545651">(</span><span class="ident" id="1545652"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545658">.</span><span class="ident" id="1545659">Pointer</span><span class="op" id="1545666">(</span><span class="builtintype" id="1545667">uintptr</span><span class="op" id="1545674">(</span><span class="ident" id="1545675"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span><span class="op" id="1545676">.</span><span class="ident" id="1545677"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1545684">)</span>&nbsp;<span class="op" id="1545686">+</span>&nbsp;<span class="op" id="1545688">(</span><span class="ident" id="1545689"><a href="/gostd/runtime/hashmap.go.html#1545551">hash</a></span><span class="op" id="1545693">&amp;</span><span class="ident" id="1545694"><a href="/gostd/runtime/hashmap.go.html#1545613">m</a></span><span class="op" id="1545695">)</span><span class="op" id="1545696">*</span><span class="builtintype" id="1545697">uintptr</span><span class="op" id="1545704">(</span><span class="ident" id="1545705"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1545706">.</span><span class="ident" id="1545707"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1545717">)</span><span class="op" id="1545718">)</span><span class="op" id="1545719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545722">if</span>&nbsp;<span class="ident" id="1545725">c</span>&nbsp;<span class="op" id="1545727">:=</span>&nbsp;<span class="ident" id="1545730"><a href="/gostd/runtime/hashmap.go.html#1545409">h</a></span><span class="op" id="1545731">.</span><span class="ident" id="1545732"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1545742">;</span>&nbsp;<span class="ident" id="1545744"><a href="/gostd/runtime/hashmap.go.html#1545725">c</a></span>&nbsp;<span class="op" id="1545746">!=</span>&nbsp;<span class="builtintype" id="1545749">nil</span>&nbsp;<span class="op" id="1545753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545757">oldb</span>&nbsp;<span class="op" id="1545762">:=</span>&nbsp;<span class="op" id="1545765">(</span><span class="op" id="1545766">*</span><span class="ident" id="1545767"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1545771">)</span><span class="op" id="1545772">(</span><span class="ident" id="1545773"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1545779">.</span><span class="ident" id="1545780">Pointer</span><span class="op" id="1545787">(</span><span class="builtintype" id="1545788">uintptr</span><span class="op" id="1545795">(</span><span class="ident" id="1545796"><a href="/gostd/runtime/hashmap.go.html#1545725">c</a></span><span class="op" id="1545797">)</span>&nbsp;<span class="op" id="1545799">+</span>&nbsp;<span class="op" id="1545801">(</span><span class="ident" id="1545802"><a href="/gostd/runtime/hashmap.go.html#1545551">hash</a></span><span class="op" id="1545806">&amp;</span><span class="op" id="1545807">(</span><span class="ident" id="1545808"><a href="/gostd/runtime/hashmap.go.html#1545613">m</a></span><span class="op" id="1545809">&gt;&gt;</span><span class="num" id="1545811">1</span><span class="op" id="1545812">)</span><span class="op" id="1545813">)</span><span class="op" id="1545814">*</span><span class="builtintype" id="1545815">uintptr</span><span class="op" id="1545822">(</span><span class="ident" id="1545823"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1545824">.</span><span class="ident" id="1545825"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1545835">)</span><span class="op" id="1545836">)</span><span class="op" id="1545837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545841">if</span>&nbsp;<span class="op" id="1545844">!</span><span class="ident" id="1545845"><a href="/gostd/runtime/hashmap.go.html#1540079">evacuated</a></span><span class="op" id="1545854">(</span><span class="ident" id="1545855"><a href="/gostd/runtime/hashmap.go.html#1545757">oldb</a></span><span class="op" id="1545859">)</span>&nbsp;<span class="op" id="1545861">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545866"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span>&nbsp;<span class="op" id="1545868">=</span>&nbsp;<span class="ident" id="1545870"><a href="/gostd/runtime/hashmap.go.html#1545757">oldb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545883">top</span>&nbsp;<span class="op" id="1545887">:=</span>&nbsp;<span class="builtintype" id="1545890">uint8</span><span class="op" id="1545895">(</span><span class="ident" id="1545896"><a href="/gostd/runtime/hashmap.go.html#1545551">hash</a></span>&nbsp;<span class="op" id="1545901">&gt;&gt;</span>&nbsp;<span class="op" id="1545904">(</span><span class="ident" id="1545905"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1545912">*</span><span class="num" id="1545913">8</span>&nbsp;<span class="op" id="1545915">-</span>&nbsp;<span class="num" id="1545917">8</span><span class="op" id="1545918">)</span><span class="op" id="1545919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545922">if</span>&nbsp;<span class="ident" id="1545925"><a href="/gostd/runtime/hashmap.go.html#1545883">top</a></span>&nbsp;<span class="op" id="1545929">&lt;</span>&nbsp;<span class="ident" id="1545931"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1545942">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545946"><a href="/gostd/runtime/hashmap.go.html#1545883">top</a></span>&nbsp;<span class="op" id="1545950">+=</span>&nbsp;<span class="ident" id="1545953"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545968">for</span>&nbsp;<span class="op" id="1545972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545976">for</span>&nbsp;<span class="ident" id="1545980">i</span>&nbsp;<span class="op" id="1545982">:=</span>&nbsp;<span class="builtintype" id="1545985">uintptr</span><span class="op" id="1545992">(</span><span class="num" id="1545993">0</span><span class="op" id="1545994">)</span><span class="op" id="1545995">;</span>&nbsp;<span class="ident" id="1545997"><a href="/gostd/runtime/hashmap.go.html#1545980">i</a></span>&nbsp;<span class="op" id="1545999">&lt;</span>&nbsp;<span class="ident" id="1546001"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1546010">;</span>&nbsp;<span class="ident" id="1546012"><a href="/gostd/runtime/hashmap.go.html#1545980">i</a></span><span class="op" id="1546013">++</span>&nbsp;<span class="op" id="1546016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546021">if</span>&nbsp;<span class="ident" id="1546024"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span><span class="op" id="1546025">.</span><span class="ident" id="1546026"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1546033">[</span><span class="ident" id="1546034"><a href="/gostd/runtime/hashmap.go.html#1545980">i</a></span><span class="op" id="1546035">]</span>&nbsp;<span class="op" id="1546037">!=</span>&nbsp;<span class="ident" id="1546040"><a href="/gostd/runtime/hashmap.go.html#1545883">top</a></span>&nbsp;<span class="op" id="1546044">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546050">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546067">k</span>&nbsp;<span class="op" id="1546069">:=</span>&nbsp;<span class="ident" id="1546072"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1546075">(</span><span class="ident" id="1546076"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546082">.</span><span class="ident" id="1546083">Pointer</span><span class="op" id="1546090">(</span><span class="ident" id="1546091"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span><span class="op" id="1546092">)</span><span class="op" id="1546093">,</span>&nbsp;<span class="ident" id="1546095"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1546105">+</span><span class="ident" id="1546106"><a href="/gostd/runtime/hashmap.go.html#1545980">i</a></span><span class="op" id="1546107">*</span><span class="builtintype" id="1546108">uintptr</span><span class="op" id="1546115">(</span><span class="ident" id="1546116"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546117">.</span><span class="ident" id="1546118"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1546125">)</span><span class="op" id="1546126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546131">if</span>&nbsp;<span class="ident" id="1546134"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546135">.</span><span class="ident" id="1546136"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1546148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546154"><a href="/gostd/runtime/hashmap.go.html#1546067">k</a></span>&nbsp;<span class="op" id="1546156">=</span>&nbsp;<span class="op" id="1546158">*</span><span class="op" id="1546159">(</span><span class="op" id="1546160">(</span><span class="op" id="1546161">*</span><span class="ident" id="1546162"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546168">.</span><span class="ident" id="1546169">Pointer</span><span class="op" id="1546176">)</span><span class="op" id="1546177">(</span><span class="ident" id="1546178"><a href="/gostd/runtime/hashmap.go.html#1546067">k</a></span><span class="op" id="1546179">)</span><span class="op" id="1546180">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546190">if</span>&nbsp;<span class="ident" id="1546193"><a href="/gostd/runtime/hashmap.go.html#1545526">alg</a></span><span class="op" id="1546196">.</span><span class="ident" id="1546197"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1546202">(</span><span class="ident" id="1546203"><a href="/gostd/runtime/hashmap.go.html#1545418">key</a></span><span class="op" id="1546206">,</span>&nbsp;<span class="ident" id="1546208"><a href="/gostd/runtime/hashmap.go.html#1546067">k</a></span><span class="op" id="1546209">,</span>&nbsp;<span class="builtintype" id="1546211">uintptr</span><span class="op" id="1546218">(</span><span class="ident" id="1546219"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546220">.</span><span class="ident" id="1546221"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1546224">.</span><span class="ident" id="1546225"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1546229">)</span><span class="op" id="1546230">)</span>&nbsp;<span class="op" id="1546232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546238">v</span>&nbsp;<span class="op" id="1546240">:=</span>&nbsp;<span class="ident" id="1546243"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1546246">(</span><span class="ident" id="1546247"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546253">.</span><span class="ident" id="1546254">Pointer</span><span class="op" id="1546261">(</span><span class="ident" id="1546262"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span><span class="op" id="1546263">)</span><span class="op" id="1546264">,</span>&nbsp;<span class="ident" id="1546266"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1546276">+</span><span class="ident" id="1546277"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1546286">*</span><span class="builtintype" id="1546287">uintptr</span><span class="op" id="1546294">(</span><span class="ident" id="1546295"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546296">.</span><span class="ident" id="1546297"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1546304">)</span><span class="op" id="1546305">+</span><span class="ident" id="1546306"><a href="/gostd/runtime/hashmap.go.html#1545980">i</a></span><span class="op" id="1546307">*</span><span class="builtintype" id="1546308">uintptr</span><span class="op" id="1546315">(</span><span class="ident" id="1546316"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546317">.</span><span class="ident" id="1546318"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1546327">)</span><span class="op" id="1546328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546334">if</span>&nbsp;<span class="ident" id="1546337"><a href="/gostd/runtime/hashmap.go.html#1545397">t</a></span><span class="op" id="1546338">.</span><span class="ident" id="1546339"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1546353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546360"><a href="/gostd/runtime/hashmap.go.html#1546238">v</a></span>&nbsp;<span class="op" id="1546362">=</span>&nbsp;<span class="op" id="1546364">*</span><span class="op" id="1546365">(</span><span class="op" id="1546366">(</span><span class="op" id="1546367">*</span><span class="ident" id="1546368"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546374">.</span><span class="ident" id="1546375">Pointer</span><span class="op" id="1546382">)</span><span class="op" id="1546383">(</span><span class="ident" id="1546384"><a href="/gostd/runtime/hashmap.go.html#1546238">v</a></span><span class="op" id="1546385">)</span><span class="op" id="1546386">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546398">return</span>&nbsp;<span class="ident" id="1546405"><a href="/gostd/runtime/hashmap.go.html#1546067">k</a></span><span class="op" id="1546406">,</span>&nbsp;<span class="ident" id="1546408"><a href="/gostd/runtime/hashmap.go.html#1546238">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546421"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span>&nbsp;<span class="op" id="1546423">=</span>&nbsp;<span class="ident" id="1546425"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span><span class="op" id="1546426">.</span><span class="ident" id="1546427"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546438">if</span>&nbsp;<span class="ident" id="1546441"><a href="/gostd/runtime/hashmap.go.html#1545639">b</a></span>&nbsp;<span class="op" id="1546443">==</span>&nbsp;<span class="builtintype" id="1546446">nil</span>&nbsp;<span class="op" id="1546450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546455">return</span>&nbsp;<span class="builtintype" id="1546462">nil</span><span class="op" id="1546465">,</span>&nbsp;<span class="builtintype" id="1546467">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546476">}</span><br>
<span class="lineno"></span><span class="op" id="1546478">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="1546481">func</span>&nbsp;<span class="ident" id="1546486">mapassign1</span><span class="op" id="1546496">(</span><span class="ident" id="1546497">t</span>&nbsp;<span class="op" id="1546499">*</span><span class="ident" id="1546500"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1546507">,</span>&nbsp;<span class="ident" id="1546509">h</span>&nbsp;<span class="op" id="1546511">*</span><span class="ident" id="1546512"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1546516">,</span>&nbsp;<span class="ident" id="1546518">key</span>&nbsp;<span class="ident" id="1546522"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546528">.</span><span class="ident" id="1546529">Pointer</span><span class="op" id="1546536">,</span>&nbsp;<span class="ident" id="1546538">val</span>&nbsp;<span class="ident" id="1546542"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546548">.</span><span class="ident" id="1546549">Pointer</span><span class="op" id="1546556">)</span>&nbsp;<span class="op" id="1546558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546561">if</span>&nbsp;<span class="ident" id="1546564"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span>&nbsp;<span class="op" id="1546566">==</span>&nbsp;<span class="builtintype" id="1546569">nil</span>&nbsp;<span class="op" id="1546573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1546577">panic</span><span class="op" id="1546582">(</span><span class="string" id="1546583">&#34;assignment&nbsp;to&nbsp;entry&nbsp;in&nbsp;nil&nbsp;map&#34;</span><span class="op" id="1546615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546618">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546621">if</span>&nbsp;<span class="ident" id="1546624"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1546636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546640">callerpc</span>&nbsp;<span class="op" id="1546649">:=</span>&nbsp;<span class="ident" id="1546652"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1546663">(</span><span class="ident" id="1546664"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546670">.</span><span class="ident" id="1546671">Pointer</span><span class="op" id="1546678">(</span><span class="op" id="1546679">&amp;</span><span class="ident" id="1546680"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1546681">)</span><span class="op" id="1546682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546686">pc</span>&nbsp;<span class="op" id="1546689">:=</span>&nbsp;<span class="ident" id="1546692"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1546698">(</span><span class="ident" id="1546699"><a href="/gostd/runtime/hashmap.go.html#1546486">mapassign1</a></span><span class="op" id="1546709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546713"><a href="/gostd/runtime/race0.go.html#1677096">racewritepc</a></span><span class="op" id="1546724">(</span><span class="ident" id="1546725"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1546731">.</span><span class="ident" id="1546732">Pointer</span><span class="op" id="1546739">(</span><span class="ident" id="1546740"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1546741">)</span><span class="op" id="1546742">,</span>&nbsp;<span class="ident" id="1546744"><a href="/gostd/runtime/hashmap.go.html#1546640">callerpc</a></span><span class="op" id="1546752">,</span>&nbsp;<span class="ident" id="1546754"><a href="/gostd/runtime/hashmap.go.html#1546686">pc</a></span><span class="op" id="1546756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546760"><a href="/gostd/runtime/race0.go.html#1676616">raceReadObjectPC</a></span><span class="op" id="1546776">(</span><span class="ident" id="1546777"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1546778">.</span><span class="ident" id="1546779"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1546782">,</span>&nbsp;<span class="ident" id="1546784"><a href="/gostd/runtime/hashmap.go.html#1546518">key</a></span><span class="op" id="1546787">,</span>&nbsp;<span class="ident" id="1546789"><a href="/gostd/runtime/hashmap.go.html#1546640">callerpc</a></span><span class="op" id="1546797">,</span>&nbsp;<span class="ident" id="1546799"><a href="/gostd/runtime/hashmap.go.html#1546686">pc</a></span><span class="op" id="1546801">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546805"><a href="/gostd/runtime/race0.go.html#1676616">raceReadObjectPC</a></span><span class="op" id="1546821">(</span><span class="ident" id="1546822"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1546823">.</span><span class="ident" id="1546824"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1546828">,</span>&nbsp;<span class="ident" id="1546830"><a href="/gostd/runtime/hashmap.go.html#1546538">val</a></span><span class="op" id="1546833">,</span>&nbsp;<span class="ident" id="1546835"><a href="/gostd/runtime/hashmap.go.html#1546640">callerpc</a></span><span class="op" id="1546843">,</span>&nbsp;<span class="ident" id="1546845"><a href="/gostd/runtime/hashmap.go.html#1546686">pc</a></span><span class="op" id="1546847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546854">alg</span>&nbsp;<span class="op" id="1546858">:=</span>&nbsp;<span class="ident" id="1546861"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1546866">(</span><span class="ident" id="1546867"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1546868">.</span><span class="ident" id="1546869"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1546872">.</span><span class="ident" id="1546873"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1546876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546879">hash</span>&nbsp;<span class="op" id="1546884">:=</span>&nbsp;<span class="ident" id="1546887"><a href="/gostd/runtime/hashmap.go.html#1546854">alg</a></span><span class="op" id="1546890">.</span><span class="ident" id="1546891"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1546895">(</span><span class="ident" id="1546896"><a href="/gostd/runtime/hashmap.go.html#1546518">key</a></span><span class="op" id="1546899">,</span>&nbsp;<span class="builtintype" id="1546901">uintptr</span><span class="op" id="1546908">(</span><span class="ident" id="1546909"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1546910">.</span><span class="ident" id="1546911"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1546914">.</span><span class="ident" id="1546915"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1546919">)</span><span class="op" id="1546920">,</span>&nbsp;<span class="builtintype" id="1546922">uintptr</span><span class="op" id="1546929">(</span><span class="ident" id="1546930"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1546931">.</span><span class="ident" id="1546932"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1546937">)</span><span class="op" id="1546938">)</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546942">if</span>&nbsp;<span class="ident" id="1546945"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1546946">.</span><span class="ident" id="1546947"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span>&nbsp;<span class="op" id="1546955">==</span>&nbsp;<span class="builtintype" id="1546958">nil</span>&nbsp;<span class="op" id="1546962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546966">if</span>&nbsp;<span class="ident" id="1546969"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1546977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546982"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1546990">.</span><span class="ident" id="1546991"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1546999">=</span>&nbsp;<span class="ident" id="1547001"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1547009">.</span><span class="ident" id="1547010"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547023">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547027"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1547028">.</span><span class="ident" id="1547029"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span>&nbsp;<span class="op" id="1547037">=</span>&nbsp;<span class="ident" id="1547039"><a href="/gostd/runtime/malloc.go.html#1598768">newarray</a></span><span class="op" id="1547047">(</span><span class="ident" id="1547048"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547049">.</span><span class="ident" id="1547050"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1547056">,</span>&nbsp;<span class="num" id="1547058">1</span><span class="op" id="1547059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1547065">again</span><span class="op" id="1547070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547073">bucket</span>&nbsp;<span class="op" id="1547080">:=</span>&nbsp;<span class="ident" id="1547083"><a href="/gostd/runtime/hashmap.go.html#1546879">hash</a></span>&nbsp;<span class="op" id="1547088">&amp;</span>&nbsp;<span class="op" id="1547090">(</span><span class="builtintype" id="1547091">uintptr</span><span class="op" id="1547098">(</span><span class="num" id="1547099">1</span><span class="op" id="1547100">)</span><span class="op" id="1547101">&lt;&lt;</span><span class="ident" id="1547103"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1547104">.</span><span class="ident" id="1547105"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1547107">-</span>&nbsp;<span class="num" id="1547109">1</span><span class="op" id="1547110">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547113">if</span>&nbsp;<span class="ident" id="1547116"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1547117">.</span><span class="ident" id="1547118"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1547129">!=</span>&nbsp;<span class="builtintype" id="1547132">nil</span>&nbsp;<span class="op" id="1547136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547140"><a href="/gostd/runtime/hashmap.go.html#1556737">growWork</a></span><span class="op" id="1547148">(</span><span class="ident" id="1547149"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547150">,</span>&nbsp;<span class="ident" id="1547152"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1547153">,</span>&nbsp;<span class="ident" id="1547155"><a href="/gostd/runtime/hashmap.go.html#1547073">bucket</a></span><span class="op" id="1547161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547167">b</span>&nbsp;<span class="op" id="1547169">:=</span>&nbsp;<span class="op" id="1547172">(</span><span class="op" id="1547173">*</span><span class="ident" id="1547174"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1547178">)</span><span class="op" id="1547179">(</span><span class="ident" id="1547180"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547186">.</span><span class="ident" id="1547187">Pointer</span><span class="op" id="1547194">(</span><span class="builtintype" id="1547195">uintptr</span><span class="op" id="1547202">(</span><span class="ident" id="1547203"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1547204">.</span><span class="ident" id="1547205"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1547212">)</span>&nbsp;<span class="op" id="1547214">+</span>&nbsp;<span class="ident" id="1547216"><a href="/gostd/runtime/hashmap.go.html#1547073">bucket</a></span><span class="op" id="1547222">*</span><span class="builtintype" id="1547223">uintptr</span><span class="op" id="1547230">(</span><span class="ident" id="1547231"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547232">.</span><span class="ident" id="1547233"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1547243">)</span><span class="op" id="1547244">)</span><span class="op" id="1547245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547248">top</span>&nbsp;<span class="op" id="1547252">:=</span>&nbsp;<span class="builtintype" id="1547255">uint8</span><span class="op" id="1547260">(</span><span class="ident" id="1547261"><a href="/gostd/runtime/hashmap.go.html#1546879">hash</a></span>&nbsp;<span class="op" id="1547266">&gt;&gt;</span>&nbsp;<span class="op" id="1547269">(</span><span class="ident" id="1547270"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1547277">*</span><span class="num" id="1547278">8</span>&nbsp;<span class="op" id="1547280">-</span>&nbsp;<span class="num" id="1547282">8</span><span class="op" id="1547283">)</span><span class="op" id="1547284">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547287">if</span>&nbsp;<span class="ident" id="1547290"><a href="/gostd/runtime/hashmap.go.html#1547248">top</a></span>&nbsp;<span class="op" id="1547294">&lt;</span>&nbsp;<span class="ident" id="1547296"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1547307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547311"><a href="/gostd/runtime/hashmap.go.html#1547248">top</a></span>&nbsp;<span class="op" id="1547315">+=</span>&nbsp;<span class="ident" id="1547318"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547334">var</span>&nbsp;<span class="ident" id="1547338">inserti</span>&nbsp;<span class="op" id="1547346">*</span><span class="builtintype" id="1547347">uint8</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547354">var</span>&nbsp;<span class="ident" id="1547358">insertk</span>&nbsp;<span class="ident" id="1547366"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547372">.</span><span class="ident" id="1547373">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547382">var</span>&nbsp;<span class="ident" id="1547386">insertv</span>&nbsp;<span class="ident" id="1547394"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547400">.</span><span class="ident" id="1547401">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547410">for</span>&nbsp;<span class="op" id="1547414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547418">for</span>&nbsp;<span class="ident" id="1547422">i</span>&nbsp;<span class="op" id="1547424">:=</span>&nbsp;<span class="builtintype" id="1547427">uintptr</span><span class="op" id="1547434">(</span><span class="num" id="1547435">0</span><span class="op" id="1547436">)</span><span class="op" id="1547437">;</span>&nbsp;<span class="ident" id="1547439"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span>&nbsp;<span class="op" id="1547441">&lt;</span>&nbsp;<span class="ident" id="1547443"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1547452">;</span>&nbsp;<span class="ident" id="1547454"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547455">++</span>&nbsp;<span class="op" id="1547458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547463">if</span>&nbsp;<span class="ident" id="1547466"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547467">.</span><span class="ident" id="1547468"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1547475">[</span><span class="ident" id="1547476"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547477">]</span>&nbsp;<span class="op" id="1547479">!=</span>&nbsp;<span class="ident" id="1547482"><a href="/gostd/runtime/hashmap.go.html#1547248">top</a></span>&nbsp;<span class="op" id="1547486">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547492">if</span>&nbsp;<span class="ident" id="1547495"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547496">.</span><span class="ident" id="1547497"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1547504">[</span><span class="ident" id="1547505"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547506">]</span>&nbsp;<span class="op" id="1547508">==</span>&nbsp;<span class="ident" id="1547511"><a href="/gostd/runtime/hashmap.go.html#1537480">empty</a></span>&nbsp;<span class="op" id="1547517">&amp;&amp;</span>&nbsp;<span class="ident" id="1547520"><a href="/gostd/runtime/hashmap.go.html#1547338">inserti</a></span>&nbsp;<span class="op" id="1547528">==</span>&nbsp;<span class="builtintype" id="1547531">nil</span>&nbsp;<span class="op" id="1547535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547542"><a href="/gostd/runtime/hashmap.go.html#1547338">inserti</a></span>&nbsp;<span class="op" id="1547550">=</span>&nbsp;<span class="op" id="1547552">&amp;</span><span class="ident" id="1547553"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547554">.</span><span class="ident" id="1547555"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1547562">[</span><span class="ident" id="1547563"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547564">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547571"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span>&nbsp;<span class="op" id="1547579">=</span>&nbsp;<span class="ident" id="1547581"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1547584">(</span><span class="ident" id="1547585"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547591">.</span><span class="ident" id="1547592">Pointer</span><span class="op" id="1547599">(</span><span class="ident" id="1547600"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547601">)</span><span class="op" id="1547602">,</span>&nbsp;<span class="ident" id="1547604"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1547614">+</span><span class="ident" id="1547615"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547616">*</span><span class="builtintype" id="1547617">uintptr</span><span class="op" id="1547624">(</span><span class="ident" id="1547625"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547626">.</span><span class="ident" id="1547627"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1547634">)</span><span class="op" id="1547635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547642"><a href="/gostd/runtime/hashmap.go.html#1547386">insertv</a></span>&nbsp;<span class="op" id="1547650">=</span>&nbsp;<span class="ident" id="1547652"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1547655">(</span><span class="ident" id="1547656"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547662">.</span><span class="ident" id="1547663">Pointer</span><span class="op" id="1547670">(</span><span class="ident" id="1547671"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547672">)</span><span class="op" id="1547673">,</span>&nbsp;<span class="ident" id="1547675"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1547685">+</span><span class="ident" id="1547686"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1547695">*</span><span class="builtintype" id="1547696">uintptr</span><span class="op" id="1547703">(</span><span class="ident" id="1547704"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547705">.</span><span class="ident" id="1547706"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1547713">)</span><span class="op" id="1547714">+</span><span class="ident" id="1547715"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547716">*</span><span class="builtintype" id="1547717">uintptr</span><span class="op" id="1547724">(</span><span class="ident" id="1547725"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547726">.</span><span class="ident" id="1547727"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1547736">)</span><span class="op" id="1547737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547743">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547749">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547766">k</span>&nbsp;<span class="op" id="1547768">:=</span>&nbsp;<span class="ident" id="1547771"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1547774">(</span><span class="ident" id="1547775"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547781">.</span><span class="ident" id="1547782">Pointer</span><span class="op" id="1547789">(</span><span class="ident" id="1547790"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1547791">)</span><span class="op" id="1547792">,</span>&nbsp;<span class="ident" id="1547794"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1547804">+</span><span class="ident" id="1547805"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1547806">*</span><span class="builtintype" id="1547807">uintptr</span><span class="op" id="1547814">(</span><span class="ident" id="1547815"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547816">.</span><span class="ident" id="1547817"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1547824">)</span><span class="op" id="1547825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547830">k2</span>&nbsp;<span class="op" id="1547833">:=</span>&nbsp;<span class="ident" id="1547836"><a href="/gostd/runtime/hashmap.go.html#1547766">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547841">if</span>&nbsp;<span class="ident" id="1547844"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547845">.</span><span class="ident" id="1547846"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1547858">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547864"><a href="/gostd/runtime/hashmap.go.html#1547830">k2</a></span>&nbsp;<span class="op" id="1547867">=</span>&nbsp;<span class="op" id="1547869">*</span><span class="op" id="1547870">(</span><span class="op" id="1547871">(</span><span class="op" id="1547872">*</span><span class="ident" id="1547873"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1547879">.</span><span class="ident" id="1547880">Pointer</span><span class="op" id="1547887">)</span><span class="op" id="1547888">(</span><span class="ident" id="1547889"><a href="/gostd/runtime/hashmap.go.html#1547830">k2</a></span><span class="op" id="1547891">)</span><span class="op" id="1547892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547902">if</span>&nbsp;<span class="op" id="1547905">!</span><span class="ident" id="1547906"><a href="/gostd/runtime/hashmap.go.html#1546854">alg</a></span><span class="op" id="1547909">.</span><span class="ident" id="1547910"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1547915">(</span><span class="ident" id="1547916"><a href="/gostd/runtime/hashmap.go.html#1546518">key</a></span><span class="op" id="1547919">,</span>&nbsp;<span class="ident" id="1547921"><a href="/gostd/runtime/hashmap.go.html#1547830">k2</a></span><span class="op" id="1547923">,</span>&nbsp;<span class="builtintype" id="1547925">uintptr</span><span class="op" id="1547932">(</span><span class="ident" id="1547933"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1547934">.</span><span class="ident" id="1547935"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1547938">.</span><span class="ident" id="1547939"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1547943">)</span><span class="op" id="1547944">)</span>&nbsp;<span class="op" id="1547946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547952">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547964">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1547969">//&nbsp;already&nbsp;have&nbsp;a&nbsp;mapping&nbsp;for&nbsp;key.&nbsp;&nbsp;Update&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548019"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1548026">(</span><span class="ident" id="1548027"><a href="/gostd/runtime/hashmap.go.html#1547830">k2</a></span><span class="op" id="1548029">,</span>&nbsp;<span class="ident" id="1548031"><a href="/gostd/runtime/hashmap.go.html#1546518">key</a></span><span class="op" id="1548034">,</span>&nbsp;<span class="builtintype" id="1548036">uintptr</span><span class="op" id="1548043">(</span><span class="ident" id="1548044"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548045">.</span><span class="ident" id="1548046"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1548049">.</span><span class="ident" id="1548050"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1548054">)</span><span class="op" id="1548055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548060">v</span>&nbsp;<span class="op" id="1548062">:=</span>&nbsp;<span class="ident" id="1548065"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1548068">(</span><span class="ident" id="1548069"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1548075">.</span><span class="ident" id="1548076">Pointer</span><span class="op" id="1548083">(</span><span class="ident" id="1548084"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1548085">)</span><span class="op" id="1548086">,</span>&nbsp;<span class="ident" id="1548088"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1548098">+</span><span class="ident" id="1548099"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1548108">*</span><span class="builtintype" id="1548109">uintptr</span><span class="op" id="1548116">(</span><span class="ident" id="1548117"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548118">.</span><span class="ident" id="1548119"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1548126">)</span><span class="op" id="1548127">+</span><span class="ident" id="1548128"><a href="/gostd/runtime/hashmap.go.html#1547422">i</a></span><span class="op" id="1548129">*</span><span class="builtintype" id="1548130">uintptr</span><span class="op" id="1548137">(</span><span class="ident" id="1548138"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548139">.</span><span class="ident" id="1548140"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1548149">)</span><span class="op" id="1548150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548155">v2</span>&nbsp;<span class="op" id="1548158">:=</span>&nbsp;<span class="ident" id="1548161"><a href="/gostd/runtime/hashmap.go.html#1548060">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548166">if</span>&nbsp;<span class="ident" id="1548169"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548170">.</span><span class="ident" id="1548171"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1548185">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548191"><a href="/gostd/runtime/hashmap.go.html#1548155">v2</a></span>&nbsp;<span class="op" id="1548194">=</span>&nbsp;<span class="op" id="1548196">*</span><span class="op" id="1548197">(</span><span class="op" id="1548198">(</span><span class="op" id="1548199">*</span><span class="ident" id="1548200"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1548206">.</span><span class="ident" id="1548207">Pointer</span><span class="op" id="1548214">)</span><span class="op" id="1548215">(</span><span class="ident" id="1548216"><a href="/gostd/runtime/hashmap.go.html#1548155">v2</a></span><span class="op" id="1548218">)</span><span class="op" id="1548219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548229"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1548236">(</span><span class="ident" id="1548237"><a href="/gostd/runtime/hashmap.go.html#1548155">v2</a></span><span class="op" id="1548239">,</span>&nbsp;<span class="ident" id="1548241"><a href="/gostd/runtime/hashmap.go.html#1546538">val</a></span><span class="op" id="1548244">,</span>&nbsp;<span class="builtintype" id="1548246">uintptr</span><span class="op" id="1548253">(</span><span class="ident" id="1548254"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548255">.</span><span class="ident" id="1548256"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1548260">.</span><span class="ident" id="1548261"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1548265">)</span><span class="op" id="1548266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548271">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548280">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548284">if</span>&nbsp;<span class="ident" id="1548287"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1548288">.</span><span class="ident" id="1548289"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1548298">==</span>&nbsp;<span class="builtintype" id="1548301">nil</span>&nbsp;<span class="op" id="1548305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548310">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548322"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span>&nbsp;<span class="op" id="1548324">=</span>&nbsp;<span class="ident" id="1548326"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1548327">.</span><span class="ident" id="1548328"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548338">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1548342">//&nbsp;did&nbsp;not&nbsp;find&nbsp;mapping&nbsp;for&nbsp;key.&nbsp;&nbsp;Allocate&nbsp;new&nbsp;cell&nbsp;&amp;&nbsp;add&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548408">if</span>&nbsp;<span class="builtintype" id="1548411">float32</span><span class="op" id="1548418">(</span><span class="ident" id="1548419"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1548420">.</span><span class="ident" id="1548421"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span><span class="op" id="1548426">)</span>&nbsp;<span class="op" id="1548428">&gt;=</span>&nbsp;<span class="ident" id="1548431"><a href="/gostd/runtime/hashmap.go.html#1536591">loadFactor</a></span><span class="op" id="1548441">*</span><span class="builtintype" id="1548442">float32</span><span class="op" id="1548449">(</span><span class="op" id="1548450">(</span><span class="builtintype" id="1548451">uintptr</span><span class="op" id="1548458">(</span><span class="num" id="1548459">1</span><span class="op" id="1548460">)</span><span class="op" id="1548461">&lt;&lt;</span><span class="ident" id="1548463"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1548464">.</span><span class="ident" id="1548465"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span><span class="op" id="1548466">)</span><span class="op" id="1548467">)</span>&nbsp;<span class="op" id="1548469">&amp;&amp;</span>&nbsp;<span class="ident" id="1548472"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1548473">.</span><span class="ident" id="1548474"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1548480">&gt;=</span>&nbsp;<span class="ident" id="1548483"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1548493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548497"><a href="/gostd/runtime/hashmap.go.html#1556158">hashGrow</a></span><span class="op" id="1548505">(</span><span class="ident" id="1548506"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548507">,</span>&nbsp;<span class="ident" id="1548509"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1548510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548514">goto</span>&nbsp;<span class="ident" id="1548519"><a href="/gostd/runtime/hashmap.go.html#1547065">again</a></span>&nbsp;<span class="comment" id="1548525">//&nbsp;Growing&nbsp;the&nbsp;table&nbsp;invalidates&nbsp;everything,&nbsp;so&nbsp;try&nbsp;again</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548588">if</span>&nbsp;<span class="ident" id="1548591"><a href="/gostd/runtime/hashmap.go.html#1547338">inserti</a></span>&nbsp;<span class="op" id="1548599">==</span>&nbsp;<span class="builtintype" id="1548602">nil</span>&nbsp;<span class="op" id="1548606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1548610">//&nbsp;all&nbsp;current&nbsp;buckets&nbsp;are&nbsp;full,&nbsp;allocate&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548665">if</span>&nbsp;<span class="ident" id="1548668"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1548676">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548681"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1548689">.</span><span class="ident" id="1548690"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1548698">=</span>&nbsp;<span class="ident" id="1548700"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1548708">.</span><span class="ident" id="1548709"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548726">newb</span>&nbsp;<span class="op" id="1548731">:=</span>&nbsp;<span class="op" id="1548734">(</span><span class="op" id="1548735">*</span><span class="ident" id="1548736"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1548740">)</span><span class="op" id="1548741">(</span><span class="ident" id="1548742"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1548751">(</span><span class="ident" id="1548752"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548753">.</span><span class="ident" id="1548754"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1548760">)</span><span class="op" id="1548761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548765"><a href="/gostd/runtime/hashmap.go.html#1547167">b</a></span><span class="op" id="1548766">.</span><span class="ident" id="1548767"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1548776">=</span>&nbsp;<span class="ident" id="1548778"><a href="/gostd/runtime/hashmap.go.html#1548726">newb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548785"><a href="/gostd/runtime/hashmap.go.html#1547338">inserti</a></span>&nbsp;<span class="op" id="1548793">=</span>&nbsp;<span class="op" id="1548795">&amp;</span><span class="ident" id="1548796"><a href="/gostd/runtime/hashmap.go.html#1548726">newb</a></span><span class="op" id="1548800">.</span><span class="ident" id="1548801"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1548808">[</span><span class="num" id="1548809">0</span><span class="op" id="1548810">]</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548814"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span>&nbsp;<span class="op" id="1548822">=</span>&nbsp;<span class="ident" id="1548824"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1548827">(</span><span class="ident" id="1548828"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1548834">.</span><span class="ident" id="1548835">Pointer</span><span class="op" id="1548842">(</span><span class="ident" id="1548843"><a href="/gostd/runtime/hashmap.go.html#1548726">newb</a></span><span class="op" id="1548847">)</span><span class="op" id="1548848">,</span>&nbsp;<span class="ident" id="1548850"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1548860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548864"><a href="/gostd/runtime/hashmap.go.html#1547386">insertv</a></span>&nbsp;<span class="op" id="1548872">=</span>&nbsp;<span class="ident" id="1548874"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1548877">(</span><span class="ident" id="1548878"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span><span class="op" id="1548885">,</span>&nbsp;<span class="ident" id="1548887"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1548896">*</span><span class="builtintype" id="1548897">uintptr</span><span class="op" id="1548904">(</span><span class="ident" id="1548905"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548906">.</span><span class="ident" id="1548907"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1548914">)</span><span class="op" id="1548915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1548922">//&nbsp;store&nbsp;new&nbsp;key/value&nbsp;at&nbsp;insert&nbsp;position</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548965">if</span>&nbsp;<span class="ident" id="1548968"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1548969">.</span><span class="ident" id="1548970"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1548982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548986">if</span>&nbsp;<span class="ident" id="1548989"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1548997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549002"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1549010">.</span><span class="ident" id="1549011"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1549019">=</span>&nbsp;<span class="ident" id="1549021"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1549029">.</span><span class="ident" id="1549030"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549047">kmem</span>&nbsp;<span class="op" id="1549052">:=</span>&nbsp;<span class="ident" id="1549055"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1549064">(</span><span class="ident" id="1549065"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1549066">.</span><span class="ident" id="1549067"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1549070">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549074">*</span><span class="op" id="1549075">(</span><span class="op" id="1549076">*</span><span class="ident" id="1549077"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549083">.</span><span class="ident" id="1549084">Pointer</span><span class="op" id="1549091">)</span><span class="op" id="1549092">(</span><span class="ident" id="1549093"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span><span class="op" id="1549100">)</span>&nbsp;<span class="op" id="1549102">=</span>&nbsp;<span class="ident" id="1549104"><a href="/gostd/runtime/hashmap.go.html#1549047">kmem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549111"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span>&nbsp;<span class="op" id="1549119">=</span>&nbsp;<span class="ident" id="1549121"><a href="/gostd/runtime/hashmap.go.html#1549047">kmem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549130">if</span>&nbsp;<span class="ident" id="1549133"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1549134">.</span><span class="ident" id="1549135"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1549149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549153">if</span>&nbsp;<span class="ident" id="1549156"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1549164">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549169"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1549177">.</span><span class="ident" id="1549178"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1549186">=</span>&nbsp;<span class="ident" id="1549188"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1549196">.</span><span class="ident" id="1549197"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549214">vmem</span>&nbsp;<span class="op" id="1549219">:=</span>&nbsp;<span class="ident" id="1549222"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1549231">(</span><span class="ident" id="1549232"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1549233">.</span><span class="ident" id="1549234"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1549238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549242">*</span><span class="op" id="1549243">(</span><span class="op" id="1549244">*</span><span class="ident" id="1549245"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549251">.</span><span class="ident" id="1549252">Pointer</span><span class="op" id="1549259">)</span><span class="op" id="1549260">(</span><span class="ident" id="1549261"><a href="/gostd/runtime/hashmap.go.html#1547386">insertv</a></span><span class="op" id="1549268">)</span>&nbsp;<span class="op" id="1549270">=</span>&nbsp;<span class="ident" id="1549272"><a href="/gostd/runtime/hashmap.go.html#1549214">vmem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549279"><a href="/gostd/runtime/hashmap.go.html#1547386">insertv</a></span>&nbsp;<span class="op" id="1549287">=</span>&nbsp;<span class="ident" id="1549289"><a href="/gostd/runtime/hashmap.go.html#1549214">vmem</a></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549298"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1549305">(</span><span class="ident" id="1549306"><a href="/gostd/runtime/hashmap.go.html#1547358">insertk</a></span><span class="op" id="1549313">,</span>&nbsp;<span class="ident" id="1549315"><a href="/gostd/runtime/hashmap.go.html#1546518">key</a></span><span class="op" id="1549318">,</span>&nbsp;<span class="builtintype" id="1549320">uintptr</span><span class="op" id="1549327">(</span><span class="ident" id="1549328"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1549329">.</span><span class="ident" id="1549330"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1549333">.</span><span class="ident" id="1549334"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1549338">)</span><span class="op" id="1549339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549342"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1549349">(</span><span class="ident" id="1549350"><a href="/gostd/runtime/hashmap.go.html#1547386">insertv</a></span><span class="op" id="1549357">,</span>&nbsp;<span class="ident" id="1549359"><a href="/gostd/runtime/hashmap.go.html#1546538">val</a></span><span class="op" id="1549362">,</span>&nbsp;<span class="builtintype" id="1549364">uintptr</span><span class="op" id="1549371">(</span><span class="ident" id="1549372"><a href="/gostd/runtime/hashmap.go.html#1546497">t</a></span><span class="op" id="1549373">.</span><span class="ident" id="1549374"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1549378">.</span><span class="ident" id="1549379"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1549383">)</span><span class="op" id="1549384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549387">*</span><span class="ident" id="1549388"><a href="/gostd/runtime/hashmap.go.html#1547338">inserti</a></span>&nbsp;<span class="op" id="1549396">=</span>&nbsp;<span class="ident" id="1549398"><a href="/gostd/runtime/hashmap.go.html#1547248">top</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549403"><a href="/gostd/runtime/hashmap.go.html#1546509">h</a></span><span class="op" id="1549404">.</span><span class="ident" id="1549405"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span><span class="op" id="1549410">++</span><br>
<span class="lineno">485</span><span class="op" id="1549413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1549416">func</span>&nbsp;<span class="ident" id="1549421">mapdelete</span><span class="op" id="1549430">(</span><span class="ident" id="1549431">t</span>&nbsp;<span class="op" id="1549433">*</span><span class="ident" id="1549434"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1549441">,</span>&nbsp;<span class="ident" id="1549443">h</span>&nbsp;<span class="op" id="1549445">*</span><span class="ident" id="1549446"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1549450">,</span>&nbsp;<span class="ident" id="1549452">key</span>&nbsp;<span class="ident" id="1549456"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549462">.</span><span class="ident" id="1549463">Pointer</span><span class="op" id="1549470">)</span>&nbsp;<span class="op" id="1549472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549475">if</span>&nbsp;<span class="ident" id="1549478"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1549490">&amp;&amp;</span>&nbsp;<span class="ident" id="1549493"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span>&nbsp;<span class="op" id="1549495">!=</span>&nbsp;<span class="builtintype" id="1549498">nil</span>&nbsp;<span class="op" id="1549502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549506">callerpc</span>&nbsp;<span class="op" id="1549515">:=</span>&nbsp;<span class="ident" id="1549518"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1549529">(</span><span class="ident" id="1549530"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549536">.</span><span class="ident" id="1549537">Pointer</span><span class="op" id="1549544">(</span><span class="op" id="1549545">&amp;</span><span class="ident" id="1549546"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549547">)</span><span class="op" id="1549548">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549552">pc</span>&nbsp;<span class="op" id="1549555">:=</span>&nbsp;<span class="ident" id="1549558"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1549564">(</span><span class="ident" id="1549565"><a href="/gostd/runtime/hashmap.go.html#1549421">mapdelete</a></span><span class="op" id="1549574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549578"><a href="/gostd/runtime/race0.go.html#1677096">racewritepc</a></span><span class="op" id="1549589">(</span><span class="ident" id="1549590"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549596">.</span><span class="ident" id="1549597">Pointer</span><span class="op" id="1549604">(</span><span class="ident" id="1549605"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549606">)</span><span class="op" id="1549607">,</span>&nbsp;<span class="ident" id="1549609"><a href="/gostd/runtime/hashmap.go.html#1549506">callerpc</a></span><span class="op" id="1549617">,</span>&nbsp;<span class="ident" id="1549619"><a href="/gostd/runtime/hashmap.go.html#1549552">pc</a></span><span class="op" id="1549621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549625"><a href="/gostd/runtime/race0.go.html#1676616">raceReadObjectPC</a></span><span class="op" id="1549641">(</span><span class="ident" id="1549642"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549643">.</span><span class="ident" id="1549644"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1549647">,</span>&nbsp;<span class="ident" id="1549649"><a href="/gostd/runtime/hashmap.go.html#1549452">key</a></span><span class="op" id="1549652">,</span>&nbsp;<span class="ident" id="1549654"><a href="/gostd/runtime/hashmap.go.html#1549506">callerpc</a></span><span class="op" id="1549662">,</span>&nbsp;<span class="ident" id="1549664"><a href="/gostd/runtime/hashmap.go.html#1549552">pc</a></span><span class="op" id="1549666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549672">if</span>&nbsp;<span class="ident" id="1549675"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span>&nbsp;<span class="op" id="1549677">==</span>&nbsp;<span class="builtintype" id="1549680">nil</span>&nbsp;<span class="op" id="1549684">||</span>&nbsp;<span class="ident" id="1549687"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549688">.</span><span class="ident" id="1549689"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1549695">==</span>&nbsp;<span class="num" id="1549698">0</span>&nbsp;<span class="op" id="1549700">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549704">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549715">alg</span>&nbsp;<span class="op" id="1549719">:=</span>&nbsp;<span class="ident" id="1549722"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1549727">(</span><span class="ident" id="1549728"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549729">.</span><span class="ident" id="1549730"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1549733">.</span><span class="ident" id="1549734"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1549737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549740">hash</span>&nbsp;<span class="op" id="1549745">:=</span>&nbsp;<span class="ident" id="1549748"><a href="/gostd/runtime/hashmap.go.html#1549715">alg</a></span><span class="op" id="1549751">.</span><span class="ident" id="1549752"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1549756">(</span><span class="ident" id="1549757"><a href="/gostd/runtime/hashmap.go.html#1549452">key</a></span><span class="op" id="1549760">,</span>&nbsp;<span class="builtintype" id="1549762">uintptr</span><span class="op" id="1549769">(</span><span class="ident" id="1549770"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549771">.</span><span class="ident" id="1549772"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1549775">.</span><span class="ident" id="1549776"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1549780">)</span><span class="op" id="1549781">,</span>&nbsp;<span class="builtintype" id="1549783">uintptr</span><span class="op" id="1549790">(</span><span class="ident" id="1549791"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549792">.</span><span class="ident" id="1549793"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1549798">)</span><span class="op" id="1549799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549802">bucket</span>&nbsp;<span class="op" id="1549809">:=</span>&nbsp;<span class="ident" id="1549812"><a href="/gostd/runtime/hashmap.go.html#1549740">hash</a></span>&nbsp;<span class="op" id="1549817">&amp;</span>&nbsp;<span class="op" id="1549819">(</span><span class="builtintype" id="1549820">uintptr</span><span class="op" id="1549827">(</span><span class="num" id="1549828">1</span><span class="op" id="1549829">)</span><span class="op" id="1549830">&lt;&lt;</span><span class="ident" id="1549832"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549833">.</span><span class="ident" id="1549834"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1549836">-</span>&nbsp;<span class="num" id="1549838">1</span><span class="op" id="1549839">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549842">if</span>&nbsp;<span class="ident" id="1549845"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549846">.</span><span class="ident" id="1549847"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1549858">!=</span>&nbsp;<span class="builtintype" id="1549861">nil</span>&nbsp;<span class="op" id="1549865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549869"><a href="/gostd/runtime/hashmap.go.html#1556737">growWork</a></span><span class="op" id="1549877">(</span><span class="ident" id="1549878"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549879">,</span>&nbsp;<span class="ident" id="1549881"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549882">,</span>&nbsp;<span class="ident" id="1549884"><a href="/gostd/runtime/hashmap.go.html#1549802">bucket</a></span><span class="op" id="1549890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549896">b</span>&nbsp;<span class="op" id="1549898">:=</span>&nbsp;<span class="op" id="1549901">(</span><span class="op" id="1549902">*</span><span class="ident" id="1549903"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1549907">)</span><span class="op" id="1549908">(</span><span class="ident" id="1549909"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1549915">.</span><span class="ident" id="1549916">Pointer</span><span class="op" id="1549923">(</span><span class="builtintype" id="1549924">uintptr</span><span class="op" id="1549931">(</span><span class="ident" id="1549932"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1549933">.</span><span class="ident" id="1549934"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1549941">)</span>&nbsp;<span class="op" id="1549943">+</span>&nbsp;<span class="ident" id="1549945"><a href="/gostd/runtime/hashmap.go.html#1549802">bucket</a></span><span class="op" id="1549951">*</span><span class="builtintype" id="1549952">uintptr</span><span class="op" id="1549959">(</span><span class="ident" id="1549960"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1549961">.</span><span class="ident" id="1549962"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1549972">)</span><span class="op" id="1549973">)</span><span class="op" id="1549974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549977">top</span>&nbsp;<span class="op" id="1549981">:=</span>&nbsp;<span class="builtintype" id="1549984">uint8</span><span class="op" id="1549989">(</span><span class="ident" id="1549990"><a href="/gostd/runtime/hashmap.go.html#1549740">hash</a></span>&nbsp;<span class="op" id="1549995">&gt;&gt;</span>&nbsp;<span class="op" id="1549998">(</span><span class="ident" id="1549999"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1550006">*</span><span class="num" id="1550007">8</span>&nbsp;<span class="op" id="1550009">-</span>&nbsp;<span class="num" id="1550011">8</span><span class="op" id="1550012">)</span><span class="op" id="1550013">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550016">if</span>&nbsp;<span class="ident" id="1550019"><a href="/gostd/runtime/hashmap.go.html#1549977">top</a></span>&nbsp;<span class="op" id="1550023">&lt;</span>&nbsp;<span class="ident" id="1550025"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1550036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550040"><a href="/gostd/runtime/hashmap.go.html#1549977">top</a></span>&nbsp;<span class="op" id="1550044">+=</span>&nbsp;<span class="ident" id="1550047"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550062">for</span>&nbsp;<span class="op" id="1550066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550070">for</span>&nbsp;<span class="ident" id="1550074">i</span>&nbsp;<span class="op" id="1550076">:=</span>&nbsp;<span class="builtintype" id="1550079">uintptr</span><span class="op" id="1550086">(</span><span class="num" id="1550087">0</span><span class="op" id="1550088">)</span><span class="op" id="1550089">;</span>&nbsp;<span class="ident" id="1550091"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span>&nbsp;<span class="op" id="1550093">&lt;</span>&nbsp;<span class="ident" id="1550095"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1550104">;</span>&nbsp;<span class="ident" id="1550106"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span><span class="op" id="1550107">++</span>&nbsp;<span class="op" id="1550110">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550115">if</span>&nbsp;<span class="ident" id="1550118"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span><span class="op" id="1550119">.</span><span class="ident" id="1550120"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1550127">[</span><span class="ident" id="1550128"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span><span class="op" id="1550129">]</span>&nbsp;<span class="op" id="1550131">!=</span>&nbsp;<span class="ident" id="1550134"><a href="/gostd/runtime/hashmap.go.html#1549977">top</a></span>&nbsp;<span class="op" id="1550138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550144">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550161">k</span>&nbsp;<span class="op" id="1550163">:=</span>&nbsp;<span class="ident" id="1550166"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1550169">(</span><span class="ident" id="1550170"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550176">.</span><span class="ident" id="1550177">Pointer</span><span class="op" id="1550184">(</span><span class="ident" id="1550185"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span><span class="op" id="1550186">)</span><span class="op" id="1550187">,</span>&nbsp;<span class="ident" id="1550189"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1550199">+</span><span class="ident" id="1550200"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span><span class="op" id="1550201">*</span><span class="builtintype" id="1550202">uintptr</span><span class="op" id="1550209">(</span><span class="ident" id="1550210"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550211">.</span><span class="ident" id="1550212"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1550219">)</span><span class="op" id="1550220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550225">k2</span>&nbsp;<span class="op" id="1550228">:=</span>&nbsp;<span class="ident" id="1550231"><a href="/gostd/runtime/hashmap.go.html#1550161">k</a></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550236">if</span>&nbsp;<span class="ident" id="1550239"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550240">.</span><span class="ident" id="1550241"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1550253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550259"><a href="/gostd/runtime/hashmap.go.html#1550225">k2</a></span>&nbsp;<span class="op" id="1550262">=</span>&nbsp;<span class="op" id="1550264">*</span><span class="op" id="1550265">(</span><span class="op" id="1550266">(</span><span class="op" id="1550267">*</span><span class="ident" id="1550268"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550274">.</span><span class="ident" id="1550275">Pointer</span><span class="op" id="1550282">)</span><span class="op" id="1550283">(</span><span class="ident" id="1550284"><a href="/gostd/runtime/hashmap.go.html#1550225">k2</a></span><span class="op" id="1550286">)</span><span class="op" id="1550287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550297">if</span>&nbsp;<span class="op" id="1550300">!</span><span class="ident" id="1550301"><a href="/gostd/runtime/hashmap.go.html#1549715">alg</a></span><span class="op" id="1550304">.</span><span class="ident" id="1550305"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1550310">(</span><span class="ident" id="1550311"><a href="/gostd/runtime/hashmap.go.html#1549452">key</a></span><span class="op" id="1550314">,</span>&nbsp;<span class="ident" id="1550316"><a href="/gostd/runtime/hashmap.go.html#1550225">k2</a></span><span class="op" id="1550318">,</span>&nbsp;<span class="builtintype" id="1550320">uintptr</span><span class="op" id="1550327">(</span><span class="ident" id="1550328"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550329">.</span><span class="ident" id="1550330"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1550333">.</span><span class="ident" id="1550334"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1550338">)</span><span class="op" id="1550339">)</span>&nbsp;<span class="op" id="1550341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550347">continue</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550364"><a href="/gostd/runtime/stubs.go.html#1742585">memclr</a></span><span class="op" id="1550370">(</span><span class="ident" id="1550371"><a href="/gostd/runtime/hashmap.go.html#1550161">k</a></span><span class="op" id="1550372">,</span>&nbsp;<span class="builtintype" id="1550374">uintptr</span><span class="op" id="1550381">(</span><span class="ident" id="1550382"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550383">.</span><span class="ident" id="1550384"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1550391">)</span><span class="op" id="1550392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550397">v</span>&nbsp;<span class="op" id="1550399">:=</span>&nbsp;<span class="ident" id="1550402"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550408">.</span><span class="ident" id="1550409">Pointer</span><span class="op" id="1550416">(</span><span class="builtintype" id="1550417">uintptr</span><span class="op" id="1550424">(</span><span class="ident" id="1550425"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550431">.</span><span class="ident" id="1550432">Pointer</span><span class="op" id="1550439">(</span><span class="ident" id="1550440"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span><span class="op" id="1550441">)</span><span class="op" id="1550442">)</span>&nbsp;<span class="op" id="1550444">+</span>&nbsp;<span class="ident" id="1550446"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span>&nbsp;<span class="op" id="1550457">+</span>&nbsp;<span class="ident" id="1550459"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1550468">*</span><span class="builtintype" id="1550469">uintptr</span><span class="op" id="1550476">(</span><span class="ident" id="1550477"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550478">.</span><span class="ident" id="1550479"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1550486">)</span>&nbsp;<span class="op" id="1550488">+</span>&nbsp;<span class="ident" id="1550490"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span><span class="op" id="1550491">*</span><span class="builtintype" id="1550492">uintptr</span><span class="op" id="1550499">(</span><span class="ident" id="1550500"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550501">.</span><span class="ident" id="1550502"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1550511">)</span><span class="op" id="1550512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550517"><a href="/gostd/runtime/stubs.go.html#1742585">memclr</a></span><span class="op" id="1550523">(</span><span class="ident" id="1550524"><a href="/gostd/runtime/hashmap.go.html#1550397">v</a></span><span class="op" id="1550525">,</span>&nbsp;<span class="builtintype" id="1550527">uintptr</span><span class="op" id="1550534">(</span><span class="ident" id="1550535"><a href="/gostd/runtime/hashmap.go.html#1549431">t</a></span><span class="op" id="1550536">.</span><span class="ident" id="1550537"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1550546">)</span><span class="op" id="1550547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550552"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span><span class="op" id="1550553">.</span><span class="ident" id="1550554"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1550561">[</span><span class="ident" id="1550562"><a href="/gostd/runtime/hashmap.go.html#1550074">i</a></span><span class="op" id="1550563">]</span>&nbsp;<span class="op" id="1550565">=</span>&nbsp;<span class="ident" id="1550567"><a href="/gostd/runtime/hashmap.go.html#1537480">empty</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550576"><a href="/gostd/runtime/hashmap.go.html#1549443">h</a></span><span class="op" id="1550577">.</span><span class="ident" id="1550578"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span><span class="op" id="1550583">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550589">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550602"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span>&nbsp;<span class="op" id="1550604">=</span>&nbsp;<span class="ident" id="1550606"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span><span class="op" id="1550607">.</span><span class="ident" id="1550608"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550619">if</span>&nbsp;<span class="ident" id="1550622"><a href="/gostd/runtime/hashmap.go.html#1549896">b</a></span>&nbsp;<span class="op" id="1550624">==</span>&nbsp;<span class="builtintype" id="1550627">nil</span>&nbsp;<span class="op" id="1550631">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550636">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550648">}</span><br>
<span class="lineno"></span><span class="op" id="1550650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="keyword" id="1550653">func</span>&nbsp;<span class="ident" id="1550658">mapiterinit</span><span class="op" id="1550669">(</span><span class="ident" id="1550670">t</span>&nbsp;<span class="op" id="1550672">*</span><span class="ident" id="1550673"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1550680">,</span>&nbsp;<span class="ident" id="1550682">h</span>&nbsp;<span class="op" id="1550684">*</span><span class="ident" id="1550685"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1550689">,</span>&nbsp;<span class="ident" id="1550691">it</span>&nbsp;<span class="op" id="1550694">*</span><span class="ident" id="1550695"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1550700">)</span>&nbsp;<span class="op" id="1550702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1550705">//&nbsp;Clear&nbsp;pointer&nbsp;fields&nbsp;so&nbsp;garbage&nbsp;collector&nbsp;does&nbsp;not&nbsp;complain.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550770"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550772">.</span><span class="ident" id="1550773"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1550777">=</span>&nbsp;<span class="builtintype" id="1550779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550784"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550786">.</span><span class="ident" id="1550787"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1550793">=</span>&nbsp;<span class="builtintype" id="1550795">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550800"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550802">.</span><span class="ident" id="1550803"><a href="/gostd/runtime/hashmap.go.html#1539554">t</a></span>&nbsp;<span class="op" id="1550805">=</span>&nbsp;<span class="builtintype" id="1550807">nil</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550812"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550814">.</span><span class="ident" id="1550815"><a href="/gostd/runtime/hashmap.go.html#1539576">h</a></span>&nbsp;<span class="op" id="1550817">=</span>&nbsp;<span class="builtintype" id="1550819">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550824"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550826">.</span><span class="ident" id="1550827"><a href="/gostd/runtime/hashmap.go.html#1539595">buckets</a></span>&nbsp;<span class="op" id="1550835">=</span>&nbsp;<span class="builtintype" id="1550837">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550842"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1550844">.</span><span class="ident" id="1550845"><a href="/gostd/runtime/hashmap.go.html#1539670">bptr</a></span>&nbsp;<span class="op" id="1550850">=</span>&nbsp;<span class="builtintype" id="1550852">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1550858">if</span>&nbsp;<span class="ident" id="1550861"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1550873">&amp;&amp;</span>&nbsp;<span class="ident" id="1550876"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span>&nbsp;<span class="op" id="1550878">!=</span>&nbsp;<span class="builtintype" id="1550881">nil</span>&nbsp;<span class="op" id="1550885">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550889">callerpc</span>&nbsp;<span class="op" id="1550898">:=</span>&nbsp;<span class="ident" id="1550901"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1550912">(</span><span class="ident" id="1550913"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550919">.</span><span class="ident" id="1550920">Pointer</span><span class="op" id="1550927">(</span><span class="op" id="1550928">&amp;</span><span class="ident" id="1550929"><a href="/gostd/runtime/hashmap.go.html#1550670">t</a></span><span class="op" id="1550930">)</span><span class="op" id="1550931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1550935"><a href="/gostd/runtime/race0.go.html#1677192">racereadpc</a></span><span class="op" id="1550945">(</span><span class="ident" id="1550946"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1550952">.</span><span class="ident" id="1550953">Pointer</span><span class="op" id="1550960">(</span><span class="ident" id="1550961"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1550962">)</span><span class="op" id="1550963">,</span>&nbsp;<span class="ident" id="1550965"><a href="/gostd/runtime/hashmap.go.html#1550889">callerpc</a></span><span class="op" id="1550973">,</span>&nbsp;<span class="ident" id="1550975"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1550981">(</span><span class="ident" id="1550982"><a href="/gostd/runtime/hashmap.go.html#1550658">mapiterinit</a></span><span class="op" id="1550993">)</span><span class="op" id="1550994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1550997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551001">if</span>&nbsp;<span class="ident" id="1551004"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span>&nbsp;<span class="op" id="1551006">==</span>&nbsp;<span class="builtintype" id="1551009">nil</span>&nbsp;<span class="op" id="1551013">||</span>&nbsp;<span class="ident" id="1551016"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551017">.</span><span class="ident" id="1551018"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span>&nbsp;<span class="op" id="1551024">==</span>&nbsp;<span class="num" id="1551027">0</span>&nbsp;<span class="op" id="1551029">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551033"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551035">.</span><span class="ident" id="1551036"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1551040">=</span>&nbsp;<span class="builtintype" id="1551042">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551048"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551050">.</span><span class="ident" id="1551051"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1551057">=</span>&nbsp;<span class="builtintype" id="1551059">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551065">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551077">if</span>&nbsp;<span class="ident" id="1551080"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1551086">.</span><span class="ident" id="1551087">Sizeof</span><span class="op" id="1551093">(</span><span class="ident" id="1551094"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1551099">{</span><span class="op" id="1551100">}</span><span class="op" id="1551101">)</span><span class="op" id="1551102">/</span><span class="ident" id="1551103"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span>&nbsp;<span class="op" id="1551111">!=</span>&nbsp;<span class="num" id="1551114">10</span>&nbsp;<span class="op" id="1551117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551121"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1551128">(</span><span class="string" id="1551129">&#34;hash_iter&nbsp;size&nbsp;incorrect&#34;</span><span class="op" id="1551155">)</span>&nbsp;<span class="comment" id="1551157">//&nbsp;see&nbsp;../../cmd/gc/reflect.c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551191"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551193">.</span><span class="ident" id="1551194"><a href="/gostd/runtime/hashmap.go.html#1539554">t</a></span>&nbsp;<span class="op" id="1551196">=</span>&nbsp;<span class="ident" id="1551198"><a href="/gostd/runtime/hashmap.go.html#1550670">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551201"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551203">.</span><span class="ident" id="1551204"><a href="/gostd/runtime/hashmap.go.html#1539576">h</a></span>&nbsp;<span class="op" id="1551206">=</span>&nbsp;<span class="ident" id="1551208"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><br>
<span class="lineno">560</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1551212">//&nbsp;grab&nbsp;snapshot&nbsp;of&nbsp;bucket&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551246"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551248">.</span><span class="ident" id="1551249"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span>&nbsp;<span class="op" id="1551251">=</span>&nbsp;<span class="ident" id="1551253"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551254">.</span><span class="ident" id="1551255"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551258"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551260">.</span><span class="ident" id="1551261"><a href="/gostd/runtime/hashmap.go.html#1539595">buckets</a></span>&nbsp;<span class="op" id="1551269">=</span>&nbsp;<span class="ident" id="1551271"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551272">.</span><span class="ident" id="1551273"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1551283">//&nbsp;decide&nbsp;where&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551309">r</span>&nbsp;<span class="op" id="1551311">:=</span>&nbsp;<span class="builtintype" id="1551314">uintptr</span><span class="op" id="1551321">(</span><span class="ident" id="1551322"><a href="/gostd/runtime/stubs.go.html#1742945">fastrand1</a></span><span class="op" id="1551331">(</span><span class="op" id="1551332">)</span><span class="op" id="1551333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551336">if</span>&nbsp;<span class="ident" id="1551339"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551340">.</span><span class="ident" id="1551341"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1551343">&gt;</span>&nbsp;<span class="num" id="1551345">31</span><span class="op" id="1551347">-</span><span class="ident" id="1551348"><a href="/gostd/runtime/hashmap.go.html#1536476">bucketCntBits</a></span>&nbsp;<span class="op" id="1551362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551366"><a href="/gostd/runtime/hashmap.go.html#1551309">r</a></span>&nbsp;<span class="op" id="1551368">+=</span>&nbsp;<span class="builtintype" id="1551371">uintptr</span><span class="op" id="1551378">(</span><span class="ident" id="1551379"><a href="/gostd/runtime/stubs.go.html#1742945">fastrand1</a></span><span class="op" id="1551388">(</span><span class="op" id="1551389">)</span><span class="op" id="1551390">)</span>&nbsp;<span class="op" id="1551392">&lt;&lt;</span>&nbsp;<span class="num" id="1551395">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551399">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551402"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551404">.</span><span class="ident" id="1551405"><a href="/gostd/runtime/hashmap.go.html#1539716">startBucket</a></span>&nbsp;<span class="op" id="1551417">=</span>&nbsp;<span class="ident" id="1551419"><a href="/gostd/runtime/hashmap.go.html#1551309">r</a></span>&nbsp;<span class="op" id="1551421">&amp;</span>&nbsp;<span class="op" id="1551423">(</span><span class="builtintype" id="1551424">uintptr</span><span class="op" id="1551431">(</span><span class="num" id="1551432">1</span><span class="op" id="1551433">)</span><span class="op" id="1551434">&lt;&lt;</span><span class="ident" id="1551436"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551437">.</span><span class="ident" id="1551438"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1551440">-</span>&nbsp;<span class="num" id="1551442">1</span><span class="op" id="1551443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551446"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551448">.</span><span class="ident" id="1551449"><a href="/gostd/runtime/hashmap.go.html#1539775">offset</a></span>&nbsp;<span class="op" id="1551456">=</span>&nbsp;<span class="builtintype" id="1551458">uint8</span><span class="op" id="1551463">(</span><span class="ident" id="1551464"><a href="/gostd/runtime/hashmap.go.html#1551309">r</a></span>&nbsp;<span class="op" id="1551466">&gt;&gt;</span>&nbsp;<span class="ident" id="1551469"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551470">.</span><span class="ident" id="1551471"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1551473">&amp;</span>&nbsp;<span class="op" id="1551475">(</span><span class="ident" id="1551476"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1551486">-</span>&nbsp;<span class="num" id="1551488">1</span><span class="op" id="1551489">)</span><span class="op" id="1551490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1551494">//&nbsp;iterator&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551513"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551515">.</span><span class="ident" id="1551516"><a href="/gostd/runtime/hashmap.go.html#1540030">bucket</a></span>&nbsp;<span class="op" id="1551523">=</span>&nbsp;<span class="ident" id="1551525"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551527">.</span><span class="ident" id="1551528"><a href="/gostd/runtime/hashmap.go.html#1539716">startBucket</a></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551541"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551543">.</span><span class="ident" id="1551544"><a href="/gostd/runtime/hashmap.go.html#1539900">wrapped</a></span>&nbsp;<span class="op" id="1551552">=</span>&nbsp;<span class="builtintype" id="1551554">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551561"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551563">.</span><span class="ident" id="1551564"><a href="/gostd/runtime/hashmap.go.html#1539670">bptr</a></span>&nbsp;<span class="op" id="1551569">=</span>&nbsp;<span class="builtintype" id="1551571">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1551577">//&nbsp;Remember&nbsp;we&nbsp;have&nbsp;an&nbsp;iterator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1551611">//&nbsp;Can&nbsp;run&nbsp;concurrently&nbsp;with&nbsp;another&nbsp;hash_iter_init().</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551667">for</span>&nbsp;<span class="op" id="1551671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551675">old</span>&nbsp;<span class="op" id="1551679">:=</span>&nbsp;<span class="ident" id="1551682"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551683">.</span><span class="ident" id="1551684"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551692">if</span>&nbsp;<span class="ident" id="1551695"><a href="/gostd/runtime/hashmap.go.html#1551675">old</a></span>&nbsp;<span class="op" id="1551699">==</span>&nbsp;<span class="ident" id="1551702"><a href="/gostd/runtime/hashmap.go.html#1551675">old</a></span><span class="op" id="1551705">|</span><span class="ident" id="1551706"><a href="/gostd/runtime/hashmap.go.html#1537836">iterator</a></span><span class="op" id="1551714">|</span><span class="ident" id="1551715"><a href="/gostd/runtime/hashmap.go.html#1537895">oldIterator</a></span>&nbsp;<span class="op" id="1551727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551732">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551740">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551744">if</span>&nbsp;<span class="ident" id="1551747"><a href="/gostd/runtime/stubs.go.html#1744744">cas</a></span><span class="op" id="1551750">(</span><span class="op" id="1551751">&amp;</span><span class="ident" id="1551752"><a href="/gostd/runtime/hashmap.go.html#1550682">h</a></span><span class="op" id="1551753">.</span><span class="ident" id="1551754"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span><span class="op" id="1551759">,</span>&nbsp;<span class="ident" id="1551761"><a href="/gostd/runtime/hashmap.go.html#1551675">old</a></span><span class="op" id="1551764">,</span>&nbsp;<span class="ident" id="1551766"><a href="/gostd/runtime/hashmap.go.html#1551675">old</a></span><span class="op" id="1551769">|</span><span class="ident" id="1551770"><a href="/gostd/runtime/hashmap.go.html#1537836">iterator</a></span><span class="op" id="1551778">|</span><span class="ident" id="1551779"><a href="/gostd/runtime/hashmap.go.html#1537895">oldIterator</a></span><span class="op" id="1551790">)</span>&nbsp;<span class="op" id="1551792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551797">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1551808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551812"><a href="/gostd/runtime/hashmap.go.html#1551836">mapiternext</a></span><span class="op" id="1551823">(</span><span class="ident" id="1551824"><a href="/gostd/runtime/hashmap.go.html#1550691">it</a></span><span class="op" id="1551826">)</span><br>
<span class="lineno"></span><span class="op" id="1551828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1551831">func</span>&nbsp;<span class="ident" id="1551836">mapiternext</span><span class="op" id="1551847">(</span><span class="ident" id="1551848">it</span>&nbsp;<span class="op" id="1551851">*</span><span class="ident" id="1551852"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1551857">)</span>&nbsp;<span class="op" id="1551859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551862">h</span>&nbsp;<span class="op" id="1551864">:=</span>&nbsp;<span class="ident" id="1551867"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1551869">.</span><span class="ident" id="1551870"><a href="/gostd/runtime/hashmap.go.html#1539576">h</a></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1551873">if</span>&nbsp;<span class="ident" id="1551876"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1551888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551892">callerpc</span>&nbsp;<span class="op" id="1551901">:=</span>&nbsp;<span class="ident" id="1551904"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1551915">(</span><span class="ident" id="1551916"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1551922">.</span><span class="ident" id="1551923">Pointer</span><span class="op" id="1551930">(</span><span class="op" id="1551931">&amp;</span><span class="ident" id="1551932"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1551934">)</span><span class="op" id="1551935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1551939"><a href="/gostd/runtime/race0.go.html#1677192">racereadpc</a></span><span class="op" id="1551949">(</span><span class="ident" id="1551950"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1551956">.</span><span class="ident" id="1551957">Pointer</span><span class="op" id="1551964">(</span><span class="ident" id="1551965"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1551966">)</span><span class="op" id="1551967">,</span>&nbsp;<span class="ident" id="1551969"><a href="/gostd/runtime/hashmap.go.html#1551892">callerpc</a></span><span class="op" id="1551977">,</span>&nbsp;<span class="ident" id="1551979"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1551985">(</span><span class="ident" id="1551986"><a href="/gostd/runtime/hashmap.go.html#1551836">mapiternext</a></span><span class="op" id="1551997">)</span><span class="op" id="1551998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552004">t</span>&nbsp;<span class="op" id="1552006">:=</span>&nbsp;<span class="ident" id="1552009"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552011">.</span><span class="ident" id="1552012"><a href="/gostd/runtime/hashmap.go.html#1539554">t</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552015">bucket</span>&nbsp;<span class="op" id="1552022">:=</span>&nbsp;<span class="ident" id="1552025"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552027">.</span><span class="ident" id="1552028"><a href="/gostd/runtime/hashmap.go.html#1540030">bucket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552036">b</span>&nbsp;<span class="op" id="1552038">:=</span>&nbsp;<span class="ident" id="1552041"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552043">.</span><span class="ident" id="1552044"><a href="/gostd/runtime/hashmap.go.html#1539670">bptr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552050">i</span>&nbsp;<span class="op" id="1552052">:=</span>&nbsp;<span class="ident" id="1552055"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552057">.</span><span class="ident" id="1552058"><a href="/gostd/runtime/hashmap.go.html#1540011">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552061">checkBucket</span>&nbsp;<span class="op" id="1552073">:=</span>&nbsp;<span class="ident" id="1552076"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552078">.</span><span class="ident" id="1552079"><a href="/gostd/runtime/hashmap.go.html#1540051">checkBucket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552092">alg</span>&nbsp;<span class="op" id="1552096">:=</span>&nbsp;<span class="ident" id="1552099"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1552104">(</span><span class="ident" id="1552105"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1552106">.</span><span class="ident" id="1552107"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1552110">.</span><span class="ident" id="1552111"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1552114">)</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="ident" id="1552117">next</span><span class="op" id="1552121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552124">if</span>&nbsp;<span class="ident" id="1552127"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span>&nbsp;<span class="op" id="1552129">==</span>&nbsp;<span class="builtintype" id="1552132">nil</span>&nbsp;<span class="op" id="1552136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552140">if</span>&nbsp;<span class="ident" id="1552143"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span>&nbsp;<span class="op" id="1552150">==</span>&nbsp;<span class="ident" id="1552153"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552155">.</span><span class="ident" id="1552156"><a href="/gostd/runtime/hashmap.go.html#1539716">startBucket</a></span>&nbsp;<span class="op" id="1552168">&amp;&amp;</span>&nbsp;<span class="ident" id="1552171"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552173">.</span><span class="ident" id="1552174"><a href="/gostd/runtime/hashmap.go.html#1539900">wrapped</a></span>&nbsp;<span class="op" id="1552182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1552187">//&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552210"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552212">.</span><span class="ident" id="1552213"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1552217">=</span>&nbsp;<span class="builtintype" id="1552219">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552226"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552228">.</span><span class="ident" id="1552229"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1552235">=</span>&nbsp;<span class="builtintype" id="1552237">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552244">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552257">if</span>&nbsp;<span class="ident" id="1552260"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1552261">.</span><span class="ident" id="1552262"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1552273">!=</span>&nbsp;<span class="builtintype" id="1552276">nil</span>&nbsp;<span class="op" id="1552280">&amp;&amp;</span>&nbsp;<span class="ident" id="1552283"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552285">.</span><span class="ident" id="1552286"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span>&nbsp;<span class="op" id="1552288">==</span>&nbsp;<span class="ident" id="1552291"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1552292">.</span><span class="ident" id="1552293"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1552295">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1552300">//&nbsp;Iterator&nbsp;was&nbsp;started&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;a&nbsp;grow,&nbsp;and&nbsp;the&nbsp;grow&nbsp;isn&#39;t&nbsp;done&nbsp;yet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1552381">//&nbsp;If&nbsp;the&nbsp;bucket&nbsp;we&#39;re&nbsp;looking&nbsp;at&nbsp;hasn&#39;t&nbsp;been&nbsp;filled&nbsp;in&nbsp;yet&nbsp;(i.e.&nbsp;the&nbsp;old</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1552458">//&nbsp;bucket&nbsp;hasn&#39;t&nbsp;been&nbsp;evacuated)&nbsp;then&nbsp;we&nbsp;need&nbsp;to&nbsp;iterate&nbsp;through&nbsp;the&nbsp;old</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1552534">//&nbsp;bucket&nbsp;and&nbsp;only&nbsp;return&nbsp;the&nbsp;ones&nbsp;that&nbsp;will&nbsp;be&nbsp;migrated&nbsp;to&nbsp;this&nbsp;bucket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552610">oldbucket</span>&nbsp;<span class="op" id="1552620">:=</span>&nbsp;<span class="ident" id="1552623"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span>&nbsp;<span class="op" id="1552630">&amp;</span>&nbsp;<span class="op" id="1552632">(</span><span class="builtintype" id="1552633">uintptr</span><span class="op" id="1552640">(</span><span class="num" id="1552641">1</span><span class="op" id="1552642">)</span><span class="op" id="1552643">&lt;&lt;</span><span class="op" id="1552645">(</span><span class="ident" id="1552646"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552648">.</span><span class="ident" id="1552649"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span><span class="op" id="1552650">-</span><span class="num" id="1552651">1</span><span class="op" id="1552652">)</span>&nbsp;<span class="op" id="1552654">-</span>&nbsp;<span class="num" id="1552656">1</span><span class="op" id="1552657">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552662"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span>&nbsp;<span class="op" id="1552664">=</span>&nbsp;<span class="op" id="1552666">(</span><span class="op" id="1552667">*</span><span class="ident" id="1552668"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1552672">)</span><span class="op" id="1552673">(</span><span class="ident" id="1552674"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1552677">(</span><span class="ident" id="1552678"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1552679">.</span><span class="ident" id="1552680"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1552690">,</span>&nbsp;<span class="ident" id="1552692"><a href="/gostd/runtime/hashmap.go.html#1552610">oldbucket</a></span><span class="op" id="1552701">*</span><span class="builtintype" id="1552702">uintptr</span><span class="op" id="1552709">(</span><span class="ident" id="1552710"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1552711">.</span><span class="ident" id="1552712"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1552722">)</span><span class="op" id="1552723">)</span><span class="op" id="1552724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552729">if</span>&nbsp;<span class="op" id="1552732">!</span><span class="ident" id="1552733"><a href="/gostd/runtime/hashmap.go.html#1540079">evacuated</a></span><span class="op" id="1552742">(</span><span class="ident" id="1552743"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1552744">)</span>&nbsp;<span class="op" id="1552746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552752"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span>&nbsp;<span class="op" id="1552764">=</span>&nbsp;<span class="ident" id="1552766"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552776">}</span>&nbsp;<span class="keyword" id="1552778">else</span>&nbsp;<span class="op" id="1552783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552789"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span>&nbsp;<span class="op" id="1552791">=</span>&nbsp;<span class="op" id="1552793">(</span><span class="op" id="1552794">*</span><span class="ident" id="1552795"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1552799">)</span><span class="op" id="1552800">(</span><span class="ident" id="1552801"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1552804">(</span><span class="ident" id="1552805"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552807">.</span><span class="ident" id="1552808"><a href="/gostd/runtime/hashmap.go.html#1539595">buckets</a></span><span class="op" id="1552815">,</span>&nbsp;<span class="ident" id="1552817"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span><span class="op" id="1552823">*</span><span class="builtintype" id="1552824">uintptr</span><span class="op" id="1552831">(</span><span class="ident" id="1552832"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1552833">.</span><span class="ident" id="1552834"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1552844">)</span><span class="op" id="1552845">)</span><span class="op" id="1552846">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552852"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span>&nbsp;<span class="op" id="1552864">=</span>&nbsp;<span class="ident" id="1552866"><a href="/gostd/runtime/hashmap.go.html#1538001">noCheck</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552881">}</span>&nbsp;<span class="keyword" id="1552883">else</span>&nbsp;<span class="op" id="1552888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552893"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span>&nbsp;<span class="op" id="1552895">=</span>&nbsp;<span class="op" id="1552897">(</span><span class="op" id="1552898">*</span><span class="ident" id="1552899"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1552903">)</span><span class="op" id="1552904">(</span><span class="ident" id="1552905"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1552908">(</span><span class="ident" id="1552909"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1552911">.</span><span class="ident" id="1552912"><a href="/gostd/runtime/hashmap.go.html#1539595">buckets</a></span><span class="op" id="1552919">,</span>&nbsp;<span class="ident" id="1552921"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span><span class="op" id="1552927">*</span><span class="builtintype" id="1552928">uintptr</span><span class="op" id="1552935">(</span><span class="ident" id="1552936"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1552937">.</span><span class="ident" id="1552938"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1552948">)</span><span class="op" id="1552949">)</span><span class="op" id="1552950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552955"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span>&nbsp;<span class="op" id="1552967">=</span>&nbsp;<span class="ident" id="1552969"><a href="/gostd/runtime/hashmap.go.html#1538001">noCheck</a></span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1552979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1552983"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span><span class="op" id="1552989">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1552994">if</span>&nbsp;<span class="ident" id="1552997"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span>&nbsp;<span class="op" id="1553004">==</span>&nbsp;<span class="builtintype" id="1553007">uintptr</span><span class="op" id="1553014">(</span><span class="num" id="1553015">1</span><span class="op" id="1553016">)</span><span class="op" id="1553017">&lt;&lt;</span><span class="ident" id="1553019"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1553021">.</span><span class="ident" id="1553022"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span>&nbsp;<span class="op" id="1553024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553029"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span>&nbsp;<span class="op" id="1553036">=</span>&nbsp;<span class="num" id="1553038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553043"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1553045">.</span><span class="ident" id="1553046"><a href="/gostd/runtime/hashmap.go.html#1539900">wrapped</a></span>&nbsp;<span class="op" id="1553054">=</span>&nbsp;<span class="builtintype" id="1553056">true</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1553063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553067"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span>&nbsp;<span class="op" id="1553069">=</span>&nbsp;<span class="num" id="1553071">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1553074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1553077">for</span>&nbsp;<span class="op" id="1553081">;</span>&nbsp;<span class="ident" id="1553083"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span>&nbsp;<span class="op" id="1553085">&lt;</span>&nbsp;<span class="ident" id="1553087"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1553096">;</span>&nbsp;<span class="ident" id="1553098"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span><span class="op" id="1553099">++</span>&nbsp;<span class="op" id="1553102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553106">offi</span>&nbsp;<span class="op" id="1553111">:=</span>&nbsp;<span class="op" id="1553114">(</span><span class="ident" id="1553115"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span>&nbsp;<span class="op" id="1553117">+</span>&nbsp;<span class="ident" id="1553119"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1553121">.</span><span class="ident" id="1553122"><a href="/gostd/runtime/hashmap.go.html#1539775">offset</a></span><span class="op" id="1553128">)</span>&nbsp;<span class="op" id="1553130">&amp;</span>&nbsp;<span class="op" id="1553132">(</span><span class="ident" id="1553133"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1553143">-</span>&nbsp;<span class="num" id="1553145">1</span><span class="op" id="1553146">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553150">k</span>&nbsp;<span class="op" id="1553152">:=</span>&nbsp;<span class="ident" id="1553155"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1553158">(</span><span class="ident" id="1553159"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1553165">.</span><span class="ident" id="1553166">Pointer</span><span class="op" id="1553173">(</span><span class="ident" id="1553174"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1553175">)</span><span class="op" id="1553176">,</span>&nbsp;<span class="ident" id="1553178"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1553188">+</span><span class="builtintype" id="1553189">uintptr</span><span class="op" id="1553196">(</span><span class="ident" id="1553197"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1553201">)</span><span class="op" id="1553202">*</span><span class="builtintype" id="1553203">uintptr</span><span class="op" id="1553210">(</span><span class="ident" id="1553211"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1553212">.</span><span class="ident" id="1553213"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1553220">)</span><span class="op" id="1553221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553225">v</span>&nbsp;<span class="op" id="1553227">:=</span>&nbsp;<span class="ident" id="1553230"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1553233">(</span><span class="ident" id="1553234"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1553240">.</span><span class="ident" id="1553241">Pointer</span><span class="op" id="1553248">(</span><span class="ident" id="1553249"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1553250">)</span><span class="op" id="1553251">,</span>&nbsp;<span class="ident" id="1553253"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1553263">+</span><span class="ident" id="1553264"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1553273">*</span><span class="builtintype" id="1553274">uintptr</span><span class="op" id="1553281">(</span><span class="ident" id="1553282"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1553283">.</span><span class="ident" id="1553284"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1553291">)</span><span class="op" id="1553292">+</span><span class="builtintype" id="1553293">uintptr</span><span class="op" id="1553300">(</span><span class="ident" id="1553301"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1553305">)</span><span class="op" id="1553306">*</span><span class="builtintype" id="1553307">uintptr</span><span class="op" id="1553314">(</span><span class="ident" id="1553315"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1553316">.</span><span class="ident" id="1553317"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1553326">)</span><span class="op" id="1553327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1553331">if</span>&nbsp;<span class="ident" id="1553334"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1553335">.</span><span class="ident" id="1553336"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1553343">[</span><span class="ident" id="1553344"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1553348">]</span>&nbsp;<span class="op" id="1553350">!=</span>&nbsp;<span class="ident" id="1553353"><a href="/gostd/runtime/hashmap.go.html#1537480">empty</a></span>&nbsp;<span class="op" id="1553359">&amp;&amp;</span>&nbsp;<span class="ident" id="1553362"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1553363">.</span><span class="ident" id="1553364"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1553371">[</span><span class="ident" id="1553372"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1553376">]</span>&nbsp;<span class="op" id="1553378">!=</span>&nbsp;<span class="ident" id="1553381"><a href="/gostd/runtime/hashmap.go.html#1537517">evacuatedEmpty</a></span>&nbsp;<span class="op" id="1553396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1553401">if</span>&nbsp;<span class="ident" id="1553404"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span>&nbsp;<span class="op" id="1553416">!=</span>&nbsp;<span class="ident" id="1553419"><a href="/gostd/runtime/hashmap.go.html#1538001">noCheck</a></span>&nbsp;<span class="op" id="1553427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553433">//&nbsp;Special&nbsp;case:&nbsp;iterator&nbsp;was&nbsp;started&nbsp;during&nbsp;a&nbsp;grow&nbsp;and&nbsp;the</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553497">//&nbsp;grow&nbsp;is&nbsp;not&nbsp;done&nbsp;yet.&nbsp;&nbsp;We&#39;re&nbsp;working&nbsp;on&nbsp;a&nbsp;bucket&nbsp;whose</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553559">//&nbsp;oldbucket&nbsp;has&nbsp;not&nbsp;been&nbsp;evacuated&nbsp;yet.&nbsp;&nbsp;Or&nbsp;at&nbsp;least,&nbsp;it&nbsp;wasn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553628">//&nbsp;evacuated&nbsp;when&nbsp;we&nbsp;started&nbsp;the&nbsp;bucket.&nbsp;&nbsp;So&nbsp;we&#39;re&nbsp;iterating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553693">//&nbsp;through&nbsp;the&nbsp;oldbucket,&nbsp;skipping&nbsp;any&nbsp;keys&nbsp;that&nbsp;will&nbsp;go</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553754">//&nbsp;to&nbsp;the&nbsp;other&nbsp;new&nbsp;bucket&nbsp;(each&nbsp;oldbucket&nbsp;expands&nbsp;to&nbsp;two</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553816">//&nbsp;buckets&nbsp;during&nbsp;a&nbsp;grow).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553847">k2</span>&nbsp;<span class="op" id="1553850">:=</span>&nbsp;<span class="ident" id="1553853"><a href="/gostd/runtime/hashmap.go.html#1553150">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1553859">if</span>&nbsp;<span class="ident" id="1553862"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1553863">.</span><span class="ident" id="1553864"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1553876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1553883"><a href="/gostd/runtime/hashmap.go.html#1553847">k2</a></span>&nbsp;<span class="op" id="1553886">=</span>&nbsp;<span class="op" id="1553888">*</span><span class="op" id="1553889">(</span><span class="op" id="1553890">(</span><span class="op" id="1553891">*</span><span class="ident" id="1553892"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1553898">.</span><span class="ident" id="1553899">Pointer</span><span class="op" id="1553906">)</span><span class="op" id="1553907">(</span><span class="ident" id="1553908"><a href="/gostd/runtime/hashmap.go.html#1553847">k2</a></span><span class="op" id="1553910">)</span><span class="op" id="1553911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1553917">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1553923">if</span>&nbsp;<span class="ident" id="1553926"><a href="/gostd/runtime/hashmap.go.html#1552092">alg</a></span><span class="op" id="1553929">.</span><span class="ident" id="1553930"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1553935">(</span><span class="ident" id="1553936"><a href="/gostd/runtime/hashmap.go.html#1553847">k2</a></span><span class="op" id="1553938">,</span>&nbsp;<span class="ident" id="1553940"><a href="/gostd/runtime/hashmap.go.html#1553847">k2</a></span><span class="op" id="1553942">,</span>&nbsp;<span class="builtintype" id="1553944">uintptr</span><span class="op" id="1553951">(</span><span class="ident" id="1553952"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1553953">.</span><span class="ident" id="1553954"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1553957">.</span><span class="ident" id="1553958"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1553962">)</span><span class="op" id="1553963">)</span>&nbsp;<span class="op" id="1553965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1553972">//&nbsp;If&nbsp;the&nbsp;item&nbsp;in&nbsp;the&nbsp;oldbucket&nbsp;is&nbsp;not&nbsp;destined&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554029">//&nbsp;the&nbsp;current&nbsp;new&nbsp;bucket&nbsp;in&nbsp;the&nbsp;iteration,&nbsp;skip&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1554087">hash</span>&nbsp;<span class="op" id="1554092">:=</span>&nbsp;<span class="ident" id="1554095"><a href="/gostd/runtime/hashmap.go.html#1552092">alg</a></span><span class="op" id="1554098">.</span><span class="ident" id="1554099"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1554103">(</span><span class="ident" id="1554104"><a href="/gostd/runtime/hashmap.go.html#1553847">k2</a></span><span class="op" id="1554106">,</span>&nbsp;<span class="builtintype" id="1554108">uintptr</span><span class="op" id="1554115">(</span><span class="ident" id="1554116"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1554117">.</span><span class="ident" id="1554118"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1554121">.</span><span class="ident" id="1554122"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1554126">)</span><span class="op" id="1554127">,</span>&nbsp;<span class="builtintype" id="1554129">uintptr</span><span class="op" id="1554136">(</span><span class="ident" id="1554137"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1554138">.</span><span class="ident" id="1554139"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1554144">)</span><span class="op" id="1554145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554152">if</span>&nbsp;<span class="ident" id="1554155"><a href="/gostd/runtime/hashmap.go.html#1554087">hash</a></span><span class="op" id="1554159">&amp;</span><span class="op" id="1554160">(</span><span class="builtintype" id="1554161">uintptr</span><span class="op" id="1554168">(</span><span class="num" id="1554169">1</span><span class="op" id="1554170">)</span><span class="op" id="1554171">&lt;&lt;</span><span class="ident" id="1554173"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1554175">.</span><span class="ident" id="1554176"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span><span class="op" id="1554177">-</span><span class="num" id="1554178">1</span><span class="op" id="1554179">)</span>&nbsp;<span class="op" id="1554181">!=</span>&nbsp;<span class="ident" id="1554184"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span>&nbsp;<span class="op" id="1554196">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554204">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554224">}</span>&nbsp;<span class="keyword" id="1554226">else</span>&nbsp;<span class="op" id="1554231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554238">//&nbsp;Hash&nbsp;isn&#39;t&nbsp;repeatable&nbsp;if&nbsp;k&nbsp;!=&nbsp;k&nbsp;(NaNs).&nbsp;&nbsp;We&nbsp;need&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554297">//&nbsp;repeatable&nbsp;and&nbsp;randomish&nbsp;choice&nbsp;of&nbsp;which&nbsp;direction</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554356">//&nbsp;to&nbsp;send&nbsp;NaNs&nbsp;during&nbsp;evacuation.&nbsp;&nbsp;We&#39;ll&nbsp;use&nbsp;the&nbsp;low</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554415">//&nbsp;bit&nbsp;of&nbsp;tophash&nbsp;to&nbsp;decide&nbsp;which&nbsp;way&nbsp;NaNs&nbsp;go.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554467">//&nbsp;NOTE:&nbsp;this&nbsp;case&nbsp;is&nbsp;why&nbsp;we&nbsp;need&nbsp;two&nbsp;evacuate&nbsp;tophash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554527">//&nbsp;values,&nbsp;evacuatedX&nbsp;and&nbsp;evacuatedY,&nbsp;that&nbsp;differ&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554585">//&nbsp;their&nbsp;low&nbsp;bit.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554608">if</span>&nbsp;<span class="ident" id="1554611"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span><span class="op" id="1554622">&gt;&gt;</span><span class="op" id="1554624">(</span><span class="ident" id="1554625"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1554627">.</span><span class="ident" id="1554628"><a href="/gostd/runtime/hashmap.go.html#1539992">B</a></span><span class="op" id="1554629">-</span><span class="num" id="1554630">1</span><span class="op" id="1554631">)</span>&nbsp;<span class="op" id="1554633">!=</span>&nbsp;<span class="builtintype" id="1554636">uintptr</span><span class="op" id="1554643">(</span><span class="ident" id="1554644"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1554645">.</span><span class="ident" id="1554646"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1554653">[</span><span class="ident" id="1554654"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1554658">]</span><span class="op" id="1554659">&amp;</span><span class="num" id="1554660">1</span><span class="op" id="1554661">)</span>&nbsp;<span class="op" id="1554663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554671">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554696">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554701">if</span>&nbsp;<span class="ident" id="1554704"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1554705">.</span><span class="ident" id="1554706"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1554713">[</span><span class="ident" id="1554714"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1554718">]</span>&nbsp;<span class="op" id="1554720">!=</span>&nbsp;<span class="ident" id="1554723"><a href="/gostd/runtime/hashmap.go.html#1537576">evacuatedX</a></span>&nbsp;<span class="op" id="1554734">&amp;&amp;</span>&nbsp;<span class="ident" id="1554737"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1554738">.</span><span class="ident" id="1554739"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1554746">[</span><span class="ident" id="1554747"><a href="/gostd/runtime/hashmap.go.html#1553106">offi</a></span><span class="op" id="1554751">]</span>&nbsp;<span class="op" id="1554753">!=</span>&nbsp;<span class="ident" id="1554756"><a href="/gostd/runtime/hashmap.go.html#1537676">evacuatedY</a></span>&nbsp;<span class="op" id="1554767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554773">//&nbsp;this&nbsp;is&nbsp;the&nbsp;golden&nbsp;data,&nbsp;we&nbsp;can&nbsp;return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554823">if</span>&nbsp;<span class="ident" id="1554826"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1554827">.</span><span class="ident" id="1554828"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1554840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1554847"><a href="/gostd/runtime/hashmap.go.html#1553150">k</a></span>&nbsp;<span class="op" id="1554849">=</span>&nbsp;<span class="op" id="1554851">*</span><span class="op" id="1554852">(</span><span class="op" id="1554853">(</span><span class="op" id="1554854">*</span><span class="ident" id="1554855"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1554861">.</span><span class="ident" id="1554862">Pointer</span><span class="op" id="1554869">)</span><span class="op" id="1554870">(</span><span class="ident" id="1554871"><a href="/gostd/runtime/hashmap.go.html#1553150">k</a></span><span class="op" id="1554872">)</span><span class="op" id="1554873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554879">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1554885"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1554887">.</span><span class="ident" id="1554888"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1554892">=</span>&nbsp;<span class="ident" id="1554894"><a href="/gostd/runtime/hashmap.go.html#1553150">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1554900">if</span>&nbsp;<span class="ident" id="1554903"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1554904">.</span><span class="ident" id="1554905"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1554919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1554926"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span>&nbsp;<span class="op" id="1554928">=</span>&nbsp;<span class="op" id="1554930">*</span><span class="op" id="1554931">(</span><span class="op" id="1554932">(</span><span class="op" id="1554933">*</span><span class="ident" id="1554934"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1554940">.</span><span class="ident" id="1554941">Pointer</span><span class="op" id="1554948">)</span><span class="op" id="1554949">(</span><span class="ident" id="1554950"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span><span class="op" id="1554951">)</span><span class="op" id="1554952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1554964"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1554966">.</span><span class="ident" id="1554967"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1554973">=</span>&nbsp;<span class="ident" id="1554975"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1554980">}</span>&nbsp;<span class="keyword" id="1554982">else</span>&nbsp;<span class="op" id="1554987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1554993">//&nbsp;The&nbsp;hash&nbsp;table&nbsp;has&nbsp;grown&nbsp;since&nbsp;the&nbsp;iterator&nbsp;was&nbsp;started.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555057">//&nbsp;The&nbsp;golden&nbsp;data&nbsp;for&nbsp;this&nbsp;key&nbsp;is&nbsp;now&nbsp;somewhere&nbsp;else.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555116">k2</span>&nbsp;<span class="op" id="1555119">:=</span>&nbsp;<span class="ident" id="1555122"><a href="/gostd/runtime/hashmap.go.html#1553150">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1555128">if</span>&nbsp;<span class="ident" id="1555131"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1555132">.</span><span class="ident" id="1555133"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1555145">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555152"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span>&nbsp;<span class="op" id="1555155">=</span>&nbsp;<span class="op" id="1555157">*</span><span class="op" id="1555158">(</span><span class="op" id="1555159">(</span><span class="op" id="1555160">*</span><span class="ident" id="1555161"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1555167">.</span><span class="ident" id="1555168">Pointer</span><span class="op" id="1555175">)</span><span class="op" id="1555176">(</span><span class="ident" id="1555177"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span><span class="op" id="1555179">)</span><span class="op" id="1555180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1555186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1555192">if</span>&nbsp;<span class="ident" id="1555195"><a href="/gostd/runtime/hashmap.go.html#1552092">alg</a></span><span class="op" id="1555198">.</span><span class="ident" id="1555199"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1555204">(</span><span class="ident" id="1555205"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span><span class="op" id="1555207">,</span>&nbsp;<span class="ident" id="1555209"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span><span class="op" id="1555211">,</span>&nbsp;<span class="builtintype" id="1555213">uintptr</span><span class="op" id="1555220">(</span><span class="ident" id="1555221"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1555222">.</span><span class="ident" id="1555223"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1555226">.</span><span class="ident" id="1555227"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1555231">)</span><span class="op" id="1555232">)</span>&nbsp;<span class="op" id="1555234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555241">//&nbsp;Check&nbsp;the&nbsp;current&nbsp;hash&nbsp;table&nbsp;for&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555292">//&nbsp;This&nbsp;code&nbsp;handles&nbsp;the&nbsp;case&nbsp;where&nbsp;the&nbsp;key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555341">//&nbsp;has&nbsp;been&nbsp;deleted,&nbsp;updated,&nbsp;or&nbsp;deleted&nbsp;and&nbsp;reinserted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555403">//&nbsp;NOTE:&nbsp;we&nbsp;need&nbsp;to&nbsp;regrab&nbsp;the&nbsp;key&nbsp;as&nbsp;it&nbsp;has&nbsp;potentially&nbsp;been</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555470">//&nbsp;updated&nbsp;to&nbsp;an&nbsp;equal()&nbsp;but&nbsp;not&nbsp;identical&nbsp;key&nbsp;(e.g.&nbsp;+0.0&nbsp;vs&nbsp;-0.0).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555543">rk</span><span class="op" id="1555545">,</span>&nbsp;<span class="ident" id="1555547">rv</span>&nbsp;<span class="op" id="1555550">:=</span>&nbsp;<span class="ident" id="1555553"><a href="/gostd/runtime/hashmap.go.html#1545386">mapaccessK</a></span><span class="op" id="1555563">(</span><span class="ident" id="1555564"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1555565">,</span>&nbsp;<span class="ident" id="1555567"><a href="/gostd/runtime/hashmap.go.html#1551862">h</a></span><span class="op" id="1555568">,</span>&nbsp;<span class="ident" id="1555570"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span><span class="op" id="1555572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1555579">if</span>&nbsp;<span class="ident" id="1555582"><a href="/gostd/runtime/hashmap.go.html#1555543">rk</a></span>&nbsp;<span class="op" id="1555585">==</span>&nbsp;<span class="builtintype" id="1555588">nil</span>&nbsp;<span class="op" id="1555592">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1555600">continue</span>&nbsp;<span class="comment" id="1555609">//&nbsp;key&nbsp;has&nbsp;been&nbsp;deleted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1555638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555645"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1555647">.</span><span class="ident" id="1555648"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1555652">=</span>&nbsp;<span class="ident" id="1555654"><a href="/gostd/runtime/hashmap.go.html#1555543">rk</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555662"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1555664">.</span><span class="ident" id="1555665"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1555671">=</span>&nbsp;<span class="ident" id="1555673"><a href="/gostd/runtime/hashmap.go.html#1555547">rv</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1555680">}</span>&nbsp;<span class="keyword" id="1555682">else</span>&nbsp;<span class="op" id="1555687">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555694">//&nbsp;if&nbsp;key!=key&nbsp;then&nbsp;the&nbsp;entry&nbsp;can&#39;t&nbsp;be&nbsp;deleted&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555749">//&nbsp;updated,&nbsp;so&nbsp;we&nbsp;can&nbsp;just&nbsp;return&nbsp;it.&nbsp;&nbsp;That&#39;s&nbsp;lucky&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555810">//&nbsp;us&nbsp;because&nbsp;when&nbsp;key!=key&nbsp;we&nbsp;can&#39;t&nbsp;look&nbsp;it&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1555863">//&nbsp;successfully&nbsp;in&nbsp;the&nbsp;current&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555906"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1555908">.</span><span class="ident" id="1555909"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span>&nbsp;<span class="op" id="1555913">=</span>&nbsp;<span class="ident" id="1555915"><a href="/gostd/runtime/hashmap.go.html#1555116">k2</a></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1555923">if</span>&nbsp;<span class="ident" id="1555926"><a href="/gostd/runtime/hashmap.go.html#1552004">t</a></span><span class="op" id="1555927">.</span><span class="ident" id="1555928"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1555942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555950"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span>&nbsp;<span class="op" id="1555952">=</span>&nbsp;<span class="op" id="1555954">*</span><span class="op" id="1555955">(</span><span class="op" id="1555956">(</span><span class="op" id="1555957">*</span><span class="ident" id="1555958"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1555964">.</span><span class="ident" id="1555965">Pointer</span><span class="op" id="1555972">)</span><span class="op" id="1555973">(</span><span class="ident" id="1555974"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span><span class="op" id="1555975">)</span><span class="op" id="1555976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1555983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1555990"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1555992">.</span><span class="ident" id="1555993"><a href="/gostd/runtime/hashmap.go.html#1539474">value</a></span>&nbsp;<span class="op" id="1555999">=</span>&nbsp;<span class="ident" id="1556001"><a href="/gostd/runtime/hashmap.go.html#1553225">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556007">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556017"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1556019">.</span><span class="ident" id="1556020"><a href="/gostd/runtime/hashmap.go.html#1540030">bucket</a></span>&nbsp;<span class="op" id="1556027">=</span>&nbsp;<span class="ident" id="1556029"><a href="/gostd/runtime/hashmap.go.html#1552015">bucket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556039"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1556041">.</span><span class="ident" id="1556042"><a href="/gostd/runtime/hashmap.go.html#1539670">bptr</a></span>&nbsp;<span class="op" id="1556047">=</span>&nbsp;<span class="ident" id="1556049"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556054"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1556056">.</span><span class="ident" id="1556057"><a href="/gostd/runtime/hashmap.go.html#1540011">i</a></span>&nbsp;<span class="op" id="1556059">=</span>&nbsp;<span class="ident" id="1556061"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span>&nbsp;<span class="op" id="1556063">+</span>&nbsp;<span class="num" id="1556065">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556070"><a href="/gostd/runtime/hashmap.go.html#1551848">it</a></span><span class="op" id="1556072">.</span><span class="ident" id="1556073"><a href="/gostd/runtime/hashmap.go.html#1540051">checkBucket</a></span>&nbsp;<span class="op" id="1556085">=</span>&nbsp;<span class="ident" id="1556087"><a href="/gostd/runtime/hashmap.go.html#1552061">checkBucket</a></span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1556102">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556117"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span>&nbsp;<span class="op" id="1556119">=</span>&nbsp;<span class="ident" id="1556121"><a href="/gostd/runtime/hashmap.go.html#1552036">b</a></span><span class="op" id="1556122">.</span><span class="ident" id="1556123"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556133"><a href="/gostd/runtime/hashmap.go.html#1552050">i</a></span>&nbsp;<span class="op" id="1556135">=</span>&nbsp;<span class="num" id="1556137">0</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1556140">goto</span>&nbsp;<span class="ident" id="1556145"><a href="/gostd/runtime/hashmap.go.html#1552117">next</a></span><br>
<span class="lineno"></span><span class="op" id="1556150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1556153">func</span>&nbsp;<span class="ident" id="1556158">hashGrow</span><span class="op" id="1556166">(</span><span class="ident" id="1556167">t</span>&nbsp;<span class="op" id="1556169">*</span><span class="ident" id="1556170"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1556177">,</span>&nbsp;<span class="ident" id="1556179">h</span>&nbsp;<span class="op" id="1556181">*</span><span class="ident" id="1556182"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1556186">)</span>&nbsp;<span class="op" id="1556188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1556191">if</span>&nbsp;<span class="ident" id="1556194"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556195">.</span><span class="ident" id="1556196"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1556207">!=</span>&nbsp;<span class="builtintype" id="1556210">nil</span>&nbsp;<span class="op" id="1556214">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556218"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1556225">(</span><span class="string" id="1556226">&#34;evacuation&nbsp;not&nbsp;done&nbsp;in&nbsp;time&#34;</span><span class="op" id="1556255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556261">oldbuckets</span>&nbsp;<span class="op" id="1556272">:=</span>&nbsp;<span class="ident" id="1556275"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556276">.</span><span class="ident" id="1556277"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1556286">if</span>&nbsp;<span class="ident" id="1556289"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1556297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556301"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1556309">.</span><span class="ident" id="1556310"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1556318">=</span>&nbsp;<span class="ident" id="1556320"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1556328">.</span><span class="ident" id="1556329"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556344">newbuckets</span>&nbsp;<span class="op" id="1556355">:=</span>&nbsp;<span class="ident" id="1556358"><a href="/gostd/runtime/malloc.go.html#1598768">newarray</a></span><span class="op" id="1556366">(</span><span class="ident" id="1556367"><a href="/gostd/runtime/hashmap.go.html#1556167">t</a></span><span class="op" id="1556368">.</span><span class="ident" id="1556369"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1556375">,</span>&nbsp;<span class="builtintype" id="1556377">uintptr</span><span class="op" id="1556384">(</span><span class="num" id="1556385">1</span><span class="op" id="1556386">)</span><span class="op" id="1556387">&lt;&lt;</span><span class="op" id="1556389">(</span><span class="ident" id="1556390"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556391">.</span><span class="ident" id="1556392"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span><span class="op" id="1556393">+</span><span class="num" id="1556394">1</span><span class="op" id="1556395">)</span><span class="op" id="1556396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556399">flags</span>&nbsp;<span class="op" id="1556405">:=</span>&nbsp;<span class="ident" id="1556408"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556409">.</span><span class="ident" id="1556410"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span>&nbsp;<span class="op" id="1556416">&amp;^</span>&nbsp;<span class="op" id="1556419">(</span><span class="ident" id="1556420"><a href="/gostd/runtime/hashmap.go.html#1537836">iterator</a></span>&nbsp;<span class="op" id="1556429">|</span>&nbsp;<span class="ident" id="1556431"><a href="/gostd/runtime/hashmap.go.html#1537895">oldIterator</a></span><span class="op" id="1556442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1556445">if</span>&nbsp;<span class="ident" id="1556448"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556449">.</span><span class="ident" id="1556450"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span><span class="op" id="1556455">&amp;</span><span class="ident" id="1556456"><a href="/gostd/runtime/hashmap.go.html#1537836">iterator</a></span>&nbsp;<span class="op" id="1556465">!=</span>&nbsp;<span class="num" id="1556468">0</span>&nbsp;<span class="op" id="1556470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556474"><a href="/gostd/runtime/hashmap.go.html#1556399">flags</a></span>&nbsp;<span class="op" id="1556480">|=</span>&nbsp;<span class="ident" id="1556483"><a href="/gostd/runtime/hashmap.go.html#1537895">oldIterator</a></span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1556496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556499">//&nbsp;commit&nbsp;the&nbsp;grow&nbsp;(atomic&nbsp;wrt&nbsp;gc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556535"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556536">.</span><span class="ident" id="1556537"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span><span class="op" id="1556538">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556542"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556543">.</span><span class="ident" id="1556544"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span>&nbsp;<span class="op" id="1556550">=</span>&nbsp;<span class="ident" id="1556552"><a href="/gostd/runtime/hashmap.go.html#1556399">flags</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556559"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556560">.</span><span class="ident" id="1556561"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1556572">=</span>&nbsp;<span class="ident" id="1556574"><a href="/gostd/runtime/hashmap.go.html#1556261">oldbuckets</a></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556586"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556587">.</span><span class="ident" id="1556588"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span>&nbsp;<span class="op" id="1556596">=</span>&nbsp;<span class="ident" id="1556598"><a href="/gostd/runtime/hashmap.go.html#1556344">newbuckets</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556610"><a href="/gostd/runtime/hashmap.go.html#1556179">h</a></span><span class="op" id="1556611">.</span><span class="ident" id="1556612"><a href="/gostd/runtime/hashmap.go.html#1538702">nevacuate</a></span>&nbsp;<span class="op" id="1556622">=</span>&nbsp;<span class="num" id="1556624">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556628">//&nbsp;the&nbsp;actual&nbsp;copying&nbsp;of&nbsp;the&nbsp;hash&nbsp;table&nbsp;data&nbsp;is&nbsp;done&nbsp;incrementally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556696">//&nbsp;by&nbsp;growWork()&nbsp;and&nbsp;evacuate().</span><br>
<span class="lineno">750</span><span class="op" id="1556729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1556732">func</span>&nbsp;<span class="ident" id="1556737">growWork</span><span class="op" id="1556745">(</span><span class="ident" id="1556746">t</span>&nbsp;<span class="op" id="1556748">*</span><span class="ident" id="1556749"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1556756">,</span>&nbsp;<span class="ident" id="1556758">h</span>&nbsp;<span class="op" id="1556760">*</span><span class="ident" id="1556761"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1556765">,</span>&nbsp;<span class="ident" id="1556767">bucket</span>&nbsp;<span class="builtintype" id="1556774">uintptr</span><span class="op" id="1556781">)</span>&nbsp;<span class="op" id="1556783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556786">noldbuckets</span>&nbsp;<span class="op" id="1556798">:=</span>&nbsp;<span class="builtintype" id="1556801">uintptr</span><span class="op" id="1556808">(</span><span class="num" id="1556809">1</span><span class="op" id="1556810">)</span>&nbsp;<span class="op" id="1556812">&lt;&lt;</span>&nbsp;<span class="op" id="1556815">(</span><span class="ident" id="1556816"><a href="/gostd/runtime/hashmap.go.html#1556758">h</a></span><span class="op" id="1556817">.</span><span class="ident" id="1556818"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1556820">-</span>&nbsp;<span class="num" id="1556822">1</span><span class="op" id="1556823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556827">//&nbsp;make&nbsp;sure&nbsp;we&nbsp;evacuate&nbsp;the&nbsp;oldbucket&nbsp;corresponding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556881">//&nbsp;to&nbsp;the&nbsp;bucket&nbsp;we&#39;re&nbsp;about&nbsp;to&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1556918"><a href="/gostd/runtime/hashmap.go.html#1557085">evacuate</a></span><span class="op" id="1556926">(</span><span class="ident" id="1556927"><a href="/gostd/runtime/hashmap.go.html#1556746">t</a></span><span class="op" id="1556928">,</span>&nbsp;<span class="ident" id="1556930"><a href="/gostd/runtime/hashmap.go.html#1556758">h</a></span><span class="op" id="1556931">,</span>&nbsp;<span class="ident" id="1556933"><a href="/gostd/runtime/hashmap.go.html#1556767">bucket</a></span><span class="op" id="1556939">&amp;</span><span class="op" id="1556940">(</span><span class="ident" id="1556941"><a href="/gostd/runtime/hashmap.go.html#1556786">noldbuckets</a></span><span class="op" id="1556952">-</span><span class="num" id="1556953">1</span><span class="op" id="1556954">)</span><span class="op" id="1556955">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1556959">//&nbsp;evacuate&nbsp;one&nbsp;more&nbsp;oldbucket&nbsp;to&nbsp;make&nbsp;progress&nbsp;on&nbsp;growing</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1557019">if</span>&nbsp;<span class="ident" id="1557022"><a href="/gostd/runtime/hashmap.go.html#1556758">h</a></span><span class="op" id="1557023">.</span><span class="ident" id="1557024"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1557035">!=</span>&nbsp;<span class="builtintype" id="1557038">nil</span>&nbsp;<span class="op" id="1557042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557046"><a href="/gostd/runtime/hashmap.go.html#1557085">evacuate</a></span><span class="op" id="1557054">(</span><span class="ident" id="1557055"><a href="/gostd/runtime/hashmap.go.html#1556746">t</a></span><span class="op" id="1557056">,</span>&nbsp;<span class="ident" id="1557058"><a href="/gostd/runtime/hashmap.go.html#1556758">h</a></span><span class="op" id="1557059">,</span>&nbsp;<span class="ident" id="1557061"><a href="/gostd/runtime/hashmap.go.html#1556758">h</a></span><span class="op" id="1557062">.</span><span class="ident" id="1557063"><a href="/gostd/runtime/hashmap.go.html#1538702">nevacuate</a></span><span class="op" id="1557072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1557075">}</span><br>
<span class="lineno"></span><span class="op" id="1557077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">765</span><span class="keyword" id="1557080">func</span>&nbsp;<span class="ident" id="1557085">evacuate</span><span class="op" id="1557093">(</span><span class="ident" id="1557094">t</span>&nbsp;<span class="op" id="1557096">*</span><span class="ident" id="1557097"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1557104">,</span>&nbsp;<span class="ident" id="1557106">h</span>&nbsp;<span class="op" id="1557108">*</span><span class="ident" id="1557109"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1557113">,</span>&nbsp;<span class="ident" id="1557115">oldbucket</span>&nbsp;<span class="builtintype" id="1557125">uintptr</span><span class="op" id="1557132">)</span>&nbsp;<span class="op" id="1557134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557137">b</span>&nbsp;<span class="op" id="1557139">:=</span>&nbsp;<span class="op" id="1557142">(</span><span class="op" id="1557143">*</span><span class="ident" id="1557144"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1557148">)</span><span class="op" id="1557149">(</span><span class="ident" id="1557150"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557153">(</span><span class="ident" id="1557154"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1557155">.</span><span class="ident" id="1557156"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1557166">,</span>&nbsp;<span class="ident" id="1557168"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span><span class="op" id="1557177">*</span><span class="builtintype" id="1557178">uintptr</span><span class="op" id="1557185">(</span><span class="ident" id="1557186"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557187">.</span><span class="ident" id="1557188"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1557198">)</span><span class="op" id="1557199">)</span><span class="op" id="1557200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557203">newbit</span>&nbsp;<span class="op" id="1557210">:=</span>&nbsp;<span class="builtintype" id="1557213">uintptr</span><span class="op" id="1557220">(</span><span class="num" id="1557221">1</span><span class="op" id="1557222">)</span>&nbsp;<span class="op" id="1557224">&lt;&lt;</span>&nbsp;<span class="op" id="1557227">(</span><span class="ident" id="1557228"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1557229">.</span><span class="ident" id="1557230"><a href="/gostd/runtime/hashmap.go.html#1538450">B</a></span>&nbsp;<span class="op" id="1557232">-</span>&nbsp;<span class="num" id="1557234">1</span><span class="op" id="1557235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557238">alg</span>&nbsp;<span class="op" id="1557242">:=</span>&nbsp;<span class="ident" id="1557245"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1557250">(</span><span class="ident" id="1557251"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557252">.</span><span class="ident" id="1557253"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1557256">.</span><span class="ident" id="1557257"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1557260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1557263">if</span>&nbsp;<span class="op" id="1557266">!</span><span class="ident" id="1557267"><a href="/gostd/runtime/hashmap.go.html#1540079">evacuated</a></span><span class="op" id="1557276">(</span><span class="ident" id="1557277"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1557278">)</span>&nbsp;<span class="op" id="1557280">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1557284">//&nbsp;TODO:&nbsp;reuse&nbsp;overflow&nbsp;buckets&nbsp;instead&nbsp;of&nbsp;using&nbsp;new&nbsp;ones,&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1557354">//&nbsp;is&nbsp;no&nbsp;iterator&nbsp;using&nbsp;the&nbsp;old&nbsp;buckets.&nbsp;&nbsp;(If&nbsp;!oldIterator.)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557418">x</span>&nbsp;<span class="op" id="1557420">:=</span>&nbsp;<span class="op" id="1557423">(</span><span class="op" id="1557424">*</span><span class="ident" id="1557425"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1557429">)</span><span class="op" id="1557430">(</span><span class="ident" id="1557431"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557434">(</span><span class="ident" id="1557435"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1557436">.</span><span class="ident" id="1557437"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1557444">,</span>&nbsp;<span class="ident" id="1557446"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span><span class="op" id="1557455">*</span><span class="builtintype" id="1557456">uintptr</span><span class="op" id="1557463">(</span><span class="ident" id="1557464"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557465">.</span><span class="ident" id="1557466"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1557476">)</span><span class="op" id="1557477">)</span><span class="op" id="1557478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557482">y</span>&nbsp;<span class="op" id="1557484">:=</span>&nbsp;<span class="op" id="1557487">(</span><span class="op" id="1557488">*</span><span class="ident" id="1557489"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1557493">)</span><span class="op" id="1557494">(</span><span class="ident" id="1557495"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557498">(</span><span class="ident" id="1557499"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1557500">.</span><span class="ident" id="1557501"><a href="/gostd/runtime/hashmap.go.html#1538530">buckets</a></span><span class="op" id="1557508">,</span>&nbsp;<span class="op" id="1557510">(</span><span class="ident" id="1557511"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span><span class="op" id="1557520">+</span><span class="ident" id="1557521"><a href="/gostd/runtime/hashmap.go.html#1557203">newbit</a></span><span class="op" id="1557527">)</span><span class="op" id="1557528">*</span><span class="builtintype" id="1557529">uintptr</span><span class="op" id="1557536">(</span><span class="ident" id="1557537"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557538">.</span><span class="ident" id="1557539"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1557549">)</span><span class="op" id="1557550">)</span><span class="op" id="1557551">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557555">xi</span>&nbsp;<span class="op" id="1557558">:=</span>&nbsp;<span class="num" id="1557561">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557565">yi</span>&nbsp;<span class="op" id="1557568">:=</span>&nbsp;<span class="num" id="1557571">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557575">xk</span>&nbsp;<span class="op" id="1557578">:=</span>&nbsp;<span class="ident" id="1557581"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557584">(</span><span class="ident" id="1557585"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1557591">.</span><span class="ident" id="1557592">Pointer</span><span class="op" id="1557599">(</span><span class="ident" id="1557600"><a href="/gostd/runtime/hashmap.go.html#1557418">x</a></span><span class="op" id="1557601">)</span><span class="op" id="1557602">,</span>&nbsp;<span class="ident" id="1557604"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1557614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557618">yk</span>&nbsp;<span class="op" id="1557621">:=</span>&nbsp;<span class="ident" id="1557624"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557627">(</span><span class="ident" id="1557628"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1557634">.</span><span class="ident" id="1557635">Pointer</span><span class="op" id="1557642">(</span><span class="ident" id="1557643"><a href="/gostd/runtime/hashmap.go.html#1557482">y</a></span><span class="op" id="1557644">)</span><span class="op" id="1557645">,</span>&nbsp;<span class="ident" id="1557647"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1557657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557661">xv</span>&nbsp;<span class="op" id="1557664">:=</span>&nbsp;<span class="ident" id="1557667"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557670">(</span><span class="ident" id="1557671"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span><span class="op" id="1557673">,</span>&nbsp;<span class="ident" id="1557675"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1557684">*</span><span class="builtintype" id="1557685">uintptr</span><span class="op" id="1557692">(</span><span class="ident" id="1557693"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557694">.</span><span class="ident" id="1557695"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1557702">)</span><span class="op" id="1557703">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557707">yv</span>&nbsp;<span class="op" id="1557710">:=</span>&nbsp;<span class="ident" id="1557713"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557716">(</span><span class="ident" id="1557717"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span><span class="op" id="1557719">,</span>&nbsp;<span class="ident" id="1557721"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1557730">*</span><span class="builtintype" id="1557731">uintptr</span><span class="op" id="1557738">(</span><span class="ident" id="1557739"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557740">.</span><span class="ident" id="1557741"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1557748">)</span><span class="op" id="1557749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1557753">for</span>&nbsp;<span class="op" id="1557757">;</span>&nbsp;<span class="ident" id="1557759"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span>&nbsp;<span class="op" id="1557761">!=</span>&nbsp;<span class="builtintype" id="1557764">nil</span><span class="op" id="1557767">;</span>&nbsp;<span class="ident" id="1557769"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span>&nbsp;<span class="op" id="1557771">=</span>&nbsp;<span class="ident" id="1557773"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1557774">.</span><span class="ident" id="1557775"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1557784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557789">k</span>&nbsp;<span class="op" id="1557791">:=</span>&nbsp;<span class="ident" id="1557794"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557797">(</span><span class="ident" id="1557798"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1557804">.</span><span class="ident" id="1557805">Pointer</span><span class="op" id="1557812">(</span><span class="ident" id="1557813"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1557814">)</span><span class="op" id="1557815">,</span>&nbsp;<span class="ident" id="1557817"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1557827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557832">v</span>&nbsp;<span class="op" id="1557834">:=</span>&nbsp;<span class="ident" id="1557837"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557840">(</span><span class="ident" id="1557841"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><span class="op" id="1557842">,</span>&nbsp;<span class="ident" id="1557844"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1557853">*</span><span class="builtintype" id="1557854">uintptr</span><span class="op" id="1557861">(</span><span class="ident" id="1557862"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557863">.</span><span class="ident" id="1557864"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1557871">)</span><span class="op" id="1557872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1557877">for</span>&nbsp;<span class="ident" id="1557881">i</span>&nbsp;<span class="op" id="1557883">:=</span>&nbsp;<span class="num" id="1557886">0</span><span class="op" id="1557887">;</span>&nbsp;<span class="ident" id="1557889"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span>&nbsp;<span class="op" id="1557891">&lt;</span>&nbsp;<span class="ident" id="1557893"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1557902">;</span>&nbsp;<span class="ident" id="1557904"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1557905">,</span>&nbsp;<span class="ident" id="1557907"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><span class="op" id="1557908">,</span>&nbsp;<span class="ident" id="1557910"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span>&nbsp;<span class="op" id="1557912">=</span>&nbsp;<span class="ident" id="1557914"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1557915">+</span><span class="num" id="1557916">1</span><span class="op" id="1557917">,</span>&nbsp;<span class="ident" id="1557919"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557922">(</span><span class="ident" id="1557923"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><span class="op" id="1557924">,</span>&nbsp;<span class="builtintype" id="1557926">uintptr</span><span class="op" id="1557933">(</span><span class="ident" id="1557934"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557935">.</span><span class="ident" id="1557936"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1557943">)</span><span class="op" id="1557944">)</span><span class="op" id="1557945">,</span>&nbsp;<span class="ident" id="1557947"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1557950">(</span><span class="ident" id="1557951"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span><span class="op" id="1557952">,</span>&nbsp;<span class="builtintype" id="1557954">uintptr</span><span class="op" id="1557961">(</span><span class="ident" id="1557962"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1557963">.</span><span class="ident" id="1557964"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1557973">)</span><span class="op" id="1557974">)</span>&nbsp;<span class="op" id="1557976">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1557982">top</span>&nbsp;<span class="op" id="1557986">:=</span>&nbsp;<span class="ident" id="1557989"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1557990">.</span><span class="ident" id="1557991"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1557998">[</span><span class="ident" id="1557999"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1558000">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558006">if</span>&nbsp;<span class="ident" id="1558009"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1558013">==</span>&nbsp;<span class="ident" id="1558016"><a href="/gostd/runtime/hashmap.go.html#1537480">empty</a></span>&nbsp;<span class="op" id="1558022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1558029"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1558030">.</span><span class="ident" id="1558031"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1558038">[</span><span class="ident" id="1558039"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1558040">]</span>&nbsp;<span class="op" id="1558042">=</span>&nbsp;<span class="ident" id="1558044"><a href="/gostd/runtime/hashmap.go.html#1537517">evacuatedEmpty</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558064">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1558077">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558083">if</span>&nbsp;<span class="ident" id="1558086"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1558090">&lt;</span>&nbsp;<span class="ident" id="1558092"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1558103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1558110"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1558117">(</span><span class="string" id="1558118">&#34;bad&nbsp;map&nbsp;state&#34;</span><span class="op" id="1558133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1558139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1558145">k2</span>&nbsp;<span class="op" id="1558148">:=</span>&nbsp;<span class="ident" id="1558151"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558157">if</span>&nbsp;<span class="ident" id="1558160"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1558161">.</span><span class="ident" id="1558162"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1558174">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1558181"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span>&nbsp;<span class="op" id="1558184">=</span>&nbsp;<span class="op" id="1558186">*</span><span class="op" id="1558187">(</span><span class="op" id="1558188">(</span><span class="op" id="1558189">*</span><span class="ident" id="1558190"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1558196">.</span><span class="ident" id="1558197">Pointer</span><span class="op" id="1558204">)</span><span class="op" id="1558205">(</span><span class="ident" id="1558206"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span><span class="op" id="1558208">)</span><span class="op" id="1558209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1558215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558221">//&nbsp;Compute&nbsp;hash&nbsp;to&nbsp;make&nbsp;our&nbsp;evacuation&nbsp;decision&nbsp;(whether&nbsp;we&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558290">//&nbsp;to&nbsp;send&nbsp;this&nbsp;key/value&nbsp;to&nbsp;bucket&nbsp;x&nbsp;or&nbsp;bucket&nbsp;y).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1558346">hash</span>&nbsp;<span class="op" id="1558351">:=</span>&nbsp;<span class="ident" id="1558354"><a href="/gostd/runtime/hashmap.go.html#1557238">alg</a></span><span class="op" id="1558357">.</span><span class="ident" id="1558358"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span><span class="op" id="1558362">(</span><span class="ident" id="1558363"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span><span class="op" id="1558365">,</span>&nbsp;<span class="builtintype" id="1558367">uintptr</span><span class="op" id="1558374">(</span><span class="ident" id="1558375"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1558376">.</span><span class="ident" id="1558377"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1558380">.</span><span class="ident" id="1558381"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1558385">)</span><span class="op" id="1558386">,</span>&nbsp;<span class="builtintype" id="1558388">uintptr</span><span class="op" id="1558395">(</span><span class="ident" id="1558396"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1558397">.</span><span class="ident" id="1558398"><a href="/gostd/runtime/hashmap.go.html#1538423">hash0</a></span><span class="op" id="1558403">)</span><span class="op" id="1558404">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558410">if</span>&nbsp;<span class="ident" id="1558413"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1558414">.</span><span class="ident" id="1558415"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span><span class="op" id="1558420">&amp;</span><span class="ident" id="1558421"><a href="/gostd/runtime/hashmap.go.html#1537836">iterator</a></span>&nbsp;<span class="op" id="1558430">!=</span>&nbsp;<span class="num" id="1558433">0</span>&nbsp;<span class="op" id="1558435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1558442">if</span>&nbsp;<span class="op" id="1558445">!</span><span class="ident" id="1558446"><a href="/gostd/runtime/hashmap.go.html#1557238">alg</a></span><span class="op" id="1558449">.</span><span class="ident" id="1558450"><a href="/gostd/runtime/alg.go.html#1472418">equal</a></span><span class="op" id="1558455">(</span><span class="ident" id="1558456"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span><span class="op" id="1558458">,</span>&nbsp;<span class="ident" id="1558460"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span><span class="op" id="1558462">,</span>&nbsp;<span class="builtintype" id="1558464">uintptr</span><span class="op" id="1558471">(</span><span class="ident" id="1558472"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1558473">.</span><span class="ident" id="1558474"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1558477">.</span><span class="ident" id="1558478"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1558482">)</span><span class="op" id="1558483">)</span>&nbsp;<span class="op" id="1558485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558493">//&nbsp;If&nbsp;key&nbsp;!=&nbsp;key&nbsp;(NaNs),&nbsp;then&nbsp;the&nbsp;hash&nbsp;could&nbsp;be&nbsp;(and&nbsp;probably</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558561">//&nbsp;will&nbsp;be)&nbsp;entirely&nbsp;different&nbsp;from&nbsp;the&nbsp;old&nbsp;hash.&nbsp;&nbsp;Moreover,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558628">//&nbsp;it&nbsp;isn&#39;t&nbsp;reproducible.&nbsp;&nbsp;Reproducibility&nbsp;is&nbsp;required&nbsp;in&nbsp;the</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558696">//&nbsp;presence&nbsp;of&nbsp;iterators,&nbsp;as&nbsp;our&nbsp;evacuation&nbsp;decision&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558760">//&nbsp;match&nbsp;whatever&nbsp;decision&nbsp;the&nbsp;iterator&nbsp;made.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558812">//&nbsp;Fortunately,&nbsp;we&nbsp;have&nbsp;the&nbsp;freedom&nbsp;to&nbsp;send&nbsp;these&nbsp;keys&nbsp;either</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558880">//&nbsp;way.&nbsp;&nbsp;Also,&nbsp;tophash&nbsp;is&nbsp;meaningless&nbsp;for&nbsp;these&nbsp;kinds&nbsp;of&nbsp;keys.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1558949">//&nbsp;We&nbsp;let&nbsp;the&nbsp;low&nbsp;bit&nbsp;of&nbsp;tophash&nbsp;drive&nbsp;the&nbsp;evacuation&nbsp;decision.</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1559019">//&nbsp;We&nbsp;recompute&nbsp;a&nbsp;new&nbsp;random&nbsp;tophash&nbsp;for&nbsp;the&nbsp;next&nbsp;level&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1559084">//&nbsp;these&nbsp;keys&nbsp;will&nbsp;get&nbsp;evenly&nbsp;distributed&nbsp;across&nbsp;all&nbsp;buckets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1559151">//&nbsp;after&nbsp;multiple&nbsp;grows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559182">if</span>&nbsp;<span class="op" id="1559185">(</span><span class="ident" id="1559186"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1559190">&amp;</span>&nbsp;<span class="num" id="1559192">1</span><span class="op" id="1559193">)</span>&nbsp;<span class="op" id="1559195">!=</span>&nbsp;<span class="num" id="1559198">0</span>&nbsp;<span class="op" id="1559200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559209"><a href="/gostd/runtime/hashmap.go.html#1558346">hash</a></span>&nbsp;<span class="op" id="1559214">|=</span>&nbsp;<span class="ident" id="1559217"><a href="/gostd/runtime/hashmap.go.html#1557203">newbit</a></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559230">}</span>&nbsp;<span class="keyword" id="1559232">else</span>&nbsp;<span class="op" id="1559237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559246"><a href="/gostd/runtime/hashmap.go.html#1558346">hash</a></span>&nbsp;<span class="op" id="1559251">&amp;^=</span>&nbsp;<span class="ident" id="1559255"><a href="/gostd/runtime/hashmap.go.html#1557203">newbit</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559276"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1559280">=</span>&nbsp;<span class="builtintype" id="1559282">uint8</span><span class="op" id="1559287">(</span><span class="ident" id="1559288"><a href="/gostd/runtime/hashmap.go.html#1558346">hash</a></span>&nbsp;<span class="op" id="1559293">&gt;&gt;</span>&nbsp;<span class="op" id="1559296">(</span><span class="ident" id="1559297"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1559304">*</span><span class="num" id="1559305">8</span>&nbsp;<span class="op" id="1559307">-</span>&nbsp;<span class="num" id="1559309">8</span><span class="op" id="1559310">)</span><span class="op" id="1559311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559319">if</span>&nbsp;<span class="ident" id="1559322"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1559326">&lt;</span>&nbsp;<span class="ident" id="1559328"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span>&nbsp;<span class="op" id="1559339">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559348"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span>&nbsp;<span class="op" id="1559352">+=</span>&nbsp;<span class="ident" id="1559355"><a href="/gostd/runtime/hashmap.go.html#1537760">minTopHash</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559391">if</span>&nbsp;<span class="op" id="1559394">(</span><span class="ident" id="1559395"><a href="/gostd/runtime/hashmap.go.html#1558346">hash</a></span>&nbsp;<span class="op" id="1559400">&amp;</span>&nbsp;<span class="ident" id="1559402"><a href="/gostd/runtime/hashmap.go.html#1557203">newbit</a></span><span class="op" id="1559408">)</span>&nbsp;<span class="op" id="1559410">==</span>&nbsp;<span class="num" id="1559413">0</span>&nbsp;<span class="op" id="1559415">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559422"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1559423">.</span><span class="ident" id="1559424"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1559431">[</span><span class="ident" id="1559432"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1559433">]</span>&nbsp;<span class="op" id="1559435">=</span>&nbsp;<span class="ident" id="1559437"><a href="/gostd/runtime/hashmap.go.html#1537576">evacuatedX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559453">if</span>&nbsp;<span class="ident" id="1559456"><a href="/gostd/runtime/hashmap.go.html#1557555">xi</a></span>&nbsp;<span class="op" id="1559459">==</span>&nbsp;<span class="ident" id="1559462"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1559472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559480">if</span>&nbsp;<span class="ident" id="1559483"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1559491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559500"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1559508">.</span><span class="ident" id="1559509"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1559517">=</span>&nbsp;<span class="ident" id="1559519"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1559527">.</span><span class="ident" id="1559528"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559545">}</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559553">newx</span>&nbsp;<span class="op" id="1559558">:=</span>&nbsp;<span class="op" id="1559561">(</span><span class="op" id="1559562">*</span><span class="ident" id="1559563"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1559567">)</span><span class="op" id="1559568">(</span><span class="ident" id="1559569"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1559578">(</span><span class="ident" id="1559579"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1559580">.</span><span class="ident" id="1559581"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1559587">)</span><span class="op" id="1559588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559596"><a href="/gostd/runtime/hashmap.go.html#1557418">x</a></span><span class="op" id="1559597">.</span><span class="ident" id="1559598"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1559607">=</span>&nbsp;<span class="ident" id="1559609"><a href="/gostd/runtime/hashmap.go.html#1559553">newx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559620"><a href="/gostd/runtime/hashmap.go.html#1557418">x</a></span>&nbsp;<span class="op" id="1559622">=</span>&nbsp;<span class="ident" id="1559624"><a href="/gostd/runtime/hashmap.go.html#1559553">newx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559635"><a href="/gostd/runtime/hashmap.go.html#1557555">xi</a></span>&nbsp;<span class="op" id="1559638">=</span>&nbsp;<span class="num" id="1559640">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559648"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span>&nbsp;<span class="op" id="1559651">=</span>&nbsp;<span class="ident" id="1559653"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1559656">(</span><span class="ident" id="1559657"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1559663">.</span><span class="ident" id="1559664">Pointer</span><span class="op" id="1559671">(</span><span class="ident" id="1559672"><a href="/gostd/runtime/hashmap.go.html#1557418">x</a></span><span class="op" id="1559673">)</span><span class="op" id="1559674">,</span>&nbsp;<span class="ident" id="1559676"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1559686">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559694"><a href="/gostd/runtime/hashmap.go.html#1557661">xv</a></span>&nbsp;<span class="op" id="1559697">=</span>&nbsp;<span class="ident" id="1559699"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1559702">(</span><span class="ident" id="1559703"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span><span class="op" id="1559705">,</span>&nbsp;<span class="ident" id="1559707"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1559716">*</span><span class="builtintype" id="1559717">uintptr</span><span class="op" id="1559724">(</span><span class="ident" id="1559725"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1559726">.</span><span class="ident" id="1559727"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1559734">)</span><span class="op" id="1559735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559749"><a href="/gostd/runtime/hashmap.go.html#1557418">x</a></span><span class="op" id="1559750">.</span><span class="ident" id="1559751"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1559758">[</span><span class="ident" id="1559759"><a href="/gostd/runtime/hashmap.go.html#1557555">xi</a></span><span class="op" id="1559761">]</span>&nbsp;<span class="op" id="1559763">=</span>&nbsp;<span class="ident" id="1559765"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559774">if</span>&nbsp;<span class="ident" id="1559777"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1559778">.</span><span class="ident" id="1559779"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1559791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559799">*</span><span class="op" id="1559800">(</span><span class="op" id="1559801">*</span><span class="ident" id="1559802"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1559808">.</span><span class="ident" id="1559809">Pointer</span><span class="op" id="1559816">)</span><span class="op" id="1559817">(</span><span class="ident" id="1559818"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span><span class="op" id="1559820">)</span>&nbsp;<span class="op" id="1559822">=</span>&nbsp;<span class="ident" id="1559824"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span>&nbsp;<span class="comment" id="1559827">//&nbsp;copy&nbsp;pointer</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559848">}</span>&nbsp;<span class="keyword" id="1559850">else</span>&nbsp;<span class="op" id="1559855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1559863"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1559870">(</span><span class="ident" id="1559871"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span><span class="op" id="1559873">,</span>&nbsp;<span class="ident" id="1559875"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><span class="op" id="1559876">,</span>&nbsp;<span class="builtintype" id="1559878">uintptr</span><span class="op" id="1559885">(</span><span class="ident" id="1559886"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1559887">.</span><span class="ident" id="1559888"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1559891">.</span><span class="ident" id="1559892"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1559896">)</span><span class="op" id="1559897">)</span>&nbsp;<span class="comment" id="1559899">//&nbsp;copy&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1559925">if</span>&nbsp;<span class="ident" id="1559928"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1559929">.</span><span class="ident" id="1559930"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1559944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1559952">*</span><span class="op" id="1559953">(</span><span class="op" id="1559954">*</span><span class="ident" id="1559955"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1559961">.</span><span class="ident" id="1559962">Pointer</span><span class="op" id="1559969">)</span><span class="op" id="1559970">(</span><span class="ident" id="1559971"><a href="/gostd/runtime/hashmap.go.html#1557661">xv</a></span><span class="op" id="1559973">)</span>&nbsp;<span class="op" id="1559975">=</span>&nbsp;<span class="op" id="1559977">*</span><span class="op" id="1559978">(</span><span class="op" id="1559979">*</span><span class="ident" id="1559980"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1559986">.</span><span class="ident" id="1559987">Pointer</span><span class="op" id="1559994">)</span><span class="op" id="1559995">(</span><span class="ident" id="1559996"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span><span class="op" id="1559997">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560004">}</span>&nbsp;<span class="keyword" id="1560006">else</span>&nbsp;<span class="op" id="1560011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560019"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1560026">(</span><span class="ident" id="1560027"><a href="/gostd/runtime/hashmap.go.html#1557661">xv</a></span><span class="op" id="1560029">,</span>&nbsp;<span class="ident" id="1560031"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span><span class="op" id="1560032">,</span>&nbsp;<span class="builtintype" id="1560034">uintptr</span><span class="op" id="1560041">(</span><span class="ident" id="1560042"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560043">.</span><span class="ident" id="1560044"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1560048">.</span><span class="ident" id="1560049"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1560053">)</span><span class="op" id="1560054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560068"><a href="/gostd/runtime/hashmap.go.html#1557555">xi</a></span><span class="op" id="1560070">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560078"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span>&nbsp;<span class="op" id="1560081">=</span>&nbsp;<span class="ident" id="1560083"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560086">(</span><span class="ident" id="1560087"><a href="/gostd/runtime/hashmap.go.html#1557575">xk</a></span><span class="op" id="1560089">,</span>&nbsp;<span class="builtintype" id="1560091">uintptr</span><span class="op" id="1560098">(</span><span class="ident" id="1560099"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560100">.</span><span class="ident" id="1560101"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1560108">)</span><span class="op" id="1560109">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560116"><a href="/gostd/runtime/hashmap.go.html#1557661">xv</a></span>&nbsp;<span class="op" id="1560119">=</span>&nbsp;<span class="ident" id="1560121"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560124">(</span><span class="ident" id="1560125"><a href="/gostd/runtime/hashmap.go.html#1557661">xv</a></span><span class="op" id="1560127">,</span>&nbsp;<span class="builtintype" id="1560129">uintptr</span><span class="op" id="1560136">(</span><span class="ident" id="1560137"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560138">.</span><span class="ident" id="1560139"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1560148">)</span><span class="op" id="1560149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560155">}</span>&nbsp;<span class="keyword" id="1560157">else</span>&nbsp;<span class="op" id="1560162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560169"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1560170">.</span><span class="ident" id="1560171"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1560178">[</span><span class="ident" id="1560179"><a href="/gostd/runtime/hashmap.go.html#1557881">i</a></span><span class="op" id="1560180">]</span>&nbsp;<span class="op" id="1560182">=</span>&nbsp;<span class="ident" id="1560184"><a href="/gostd/runtime/hashmap.go.html#1537676">evacuatedY</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1560200">if</span>&nbsp;<span class="ident" id="1560203"><a href="/gostd/runtime/hashmap.go.html#1557565">yi</a></span>&nbsp;<span class="op" id="1560206">==</span>&nbsp;<span class="ident" id="1560209"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span>&nbsp;<span class="op" id="1560219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1560227">if</span>&nbsp;<span class="ident" id="1560230"><a href="/gostd/runtime/hashmap.go.html#1538102">checkgc</a></span>&nbsp;<span class="op" id="1560238">{</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560247"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1560255">.</span><span class="ident" id="1560256"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792876">next_gc</a></span>&nbsp;<span class="op" id="1560264">=</span>&nbsp;<span class="ident" id="1560266"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1560274">.</span><span class="ident" id="1560275"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792588">heap_alloc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560300">newy</span>&nbsp;<span class="op" id="1560305">:=</span>&nbsp;<span class="op" id="1560308">(</span><span class="op" id="1560309">*</span><span class="ident" id="1560310"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1560314">)</span><span class="op" id="1560315">(</span><span class="ident" id="1560316"><a href="/gostd/runtime/malloc.go.html#1598548">newobject</a></span><span class="op" id="1560325">(</span><span class="ident" id="1560326"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560327">.</span><span class="ident" id="1560328"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796208">bucket</a></span><span class="op" id="1560334">)</span><span class="op" id="1560335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560343"><a href="/gostd/runtime/hashmap.go.html#1557482">y</a></span><span class="op" id="1560344">.</span><span class="ident" id="1560345"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1560354">=</span>&nbsp;<span class="ident" id="1560356"><a href="/gostd/runtime/hashmap.go.html#1560300">newy</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560367"><a href="/gostd/runtime/hashmap.go.html#1557482">y</a></span>&nbsp;<span class="op" id="1560369">=</span>&nbsp;<span class="ident" id="1560371"><a href="/gostd/runtime/hashmap.go.html#1560300">newy</a></span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560382"><a href="/gostd/runtime/hashmap.go.html#1557565">yi</a></span>&nbsp;<span class="op" id="1560385">=</span>&nbsp;<span class="num" id="1560387">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560395"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span>&nbsp;<span class="op" id="1560398">=</span>&nbsp;<span class="ident" id="1560400"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560403">(</span><span class="ident" id="1560404"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1560410">.</span><span class="ident" id="1560411">Pointer</span><span class="op" id="1560418">(</span><span class="ident" id="1560419"><a href="/gostd/runtime/hashmap.go.html#1557482">y</a></span><span class="op" id="1560420">)</span><span class="op" id="1560421">,</span>&nbsp;<span class="ident" id="1560423"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1560433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560441"><a href="/gostd/runtime/hashmap.go.html#1557707">yv</a></span>&nbsp;<span class="op" id="1560444">=</span>&nbsp;<span class="ident" id="1560446"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560449">(</span><span class="ident" id="1560450"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span><span class="op" id="1560452">,</span>&nbsp;<span class="ident" id="1560454"><a href="/gostd/runtime/hashmap.go.html#1536495">bucketCnt</a></span><span class="op" id="1560463">*</span><span class="builtintype" id="1560464">uintptr</span><span class="op" id="1560471">(</span><span class="ident" id="1560472"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560473">.</span><span class="ident" id="1560474"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1560481">)</span><span class="op" id="1560482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560496"><a href="/gostd/runtime/hashmap.go.html#1557482">y</a></span><span class="op" id="1560497">.</span><span class="ident" id="1560498"><a href="/gostd/runtime/hashmap.go.html#1538857">tophash</a></span><span class="op" id="1560505">[</span><span class="ident" id="1560506"><a href="/gostd/runtime/hashmap.go.html#1557565">yi</a></span><span class="op" id="1560508">]</span>&nbsp;<span class="op" id="1560510">=</span>&nbsp;<span class="ident" id="1560512"><a href="/gostd/runtime/hashmap.go.html#1557982">top</a></span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1560521">if</span>&nbsp;<span class="ident" id="1560524"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560525">.</span><span class="ident" id="1560526"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796251">indirectkey</a></span>&nbsp;<span class="op" id="1560538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560546">*</span><span class="op" id="1560547">(</span><span class="op" id="1560548">*</span><span class="ident" id="1560549"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1560555">.</span><span class="ident" id="1560556">Pointer</span><span class="op" id="1560563">)</span><span class="op" id="1560564">(</span><span class="ident" id="1560565"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span><span class="op" id="1560567">)</span>&nbsp;<span class="op" id="1560569">=</span>&nbsp;<span class="ident" id="1560571"><a href="/gostd/runtime/hashmap.go.html#1558145">k2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560579">}</span>&nbsp;<span class="keyword" id="1560581">else</span>&nbsp;<span class="op" id="1560586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560594"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1560601">(</span><span class="ident" id="1560602"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span><span class="op" id="1560604">,</span>&nbsp;<span class="ident" id="1560606"><a href="/gostd/runtime/hashmap.go.html#1557789">k</a></span><span class="op" id="1560607">,</span>&nbsp;<span class="builtintype" id="1560609">uintptr</span><span class="op" id="1560616">(</span><span class="ident" id="1560617"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560618">.</span><span class="ident" id="1560619"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796183">key</a></span><span class="op" id="1560622">.</span><span class="ident" id="1560623"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1560627">)</span><span class="op" id="1560628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560635">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1560642">if</span>&nbsp;<span class="ident" id="1560645"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560646">.</span><span class="ident" id="1560647"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796286">indirectvalue</a></span>&nbsp;<span class="op" id="1560661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560669">*</span><span class="op" id="1560670">(</span><span class="op" id="1560671">*</span><span class="ident" id="1560672"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1560678">.</span><span class="ident" id="1560679">Pointer</span><span class="op" id="1560686">)</span><span class="op" id="1560687">(</span><span class="ident" id="1560688"><a href="/gostd/runtime/hashmap.go.html#1557707">yv</a></span><span class="op" id="1560690">)</span>&nbsp;<span class="op" id="1560692">=</span>&nbsp;<span class="op" id="1560694">*</span><span class="op" id="1560695">(</span><span class="op" id="1560696">*</span><span class="ident" id="1560697"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1560703">.</span><span class="ident" id="1560704">Pointer</span><span class="op" id="1560711">)</span><span class="op" id="1560712">(</span><span class="ident" id="1560713"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span><span class="op" id="1560714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560721">}</span>&nbsp;<span class="keyword" id="1560723">else</span>&nbsp;<span class="op" id="1560728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560736"><a href="/gostd/runtime/stubs.go.html#1742708">memmove</a></span><span class="op" id="1560743">(</span><span class="ident" id="1560744"><a href="/gostd/runtime/hashmap.go.html#1557707">yv</a></span><span class="op" id="1560746">,</span>&nbsp;<span class="ident" id="1560748"><a href="/gostd/runtime/hashmap.go.html#1557832">v</a></span><span class="op" id="1560749">,</span>&nbsp;<span class="builtintype" id="1560751">uintptr</span><span class="op" id="1560758">(</span><span class="ident" id="1560759"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560760">.</span><span class="ident" id="1560761"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796195">elem</a></span><span class="op" id="1560765">.</span><span class="ident" id="1560766"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795621">size</a></span><span class="op" id="1560770">)</span><span class="op" id="1560771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560778">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560785"><a href="/gostd/runtime/hashmap.go.html#1557565">yi</a></span><span class="op" id="1560787">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560795"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span>&nbsp;<span class="op" id="1560798">=</span>&nbsp;<span class="ident" id="1560800"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560803">(</span><span class="ident" id="1560804"><a href="/gostd/runtime/hashmap.go.html#1557618">yk</a></span><span class="op" id="1560806">,</span>&nbsp;<span class="builtintype" id="1560808">uintptr</span><span class="op" id="1560815">(</span><span class="ident" id="1560816"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560817">.</span><span class="ident" id="1560818"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796236">keysize</a></span><span class="op" id="1560825">)</span><span class="op" id="1560826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560833"><a href="/gostd/runtime/hashmap.go.html#1557707">yv</a></span>&nbsp;<span class="op" id="1560836">=</span>&nbsp;<span class="ident" id="1560838"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560841">(</span><span class="ident" id="1560842"><a href="/gostd/runtime/hashmap.go.html#1557707">yv</a></span><span class="op" id="1560844">,</span>&nbsp;<span class="builtintype" id="1560846">uintptr</span><span class="op" id="1560853">(</span><span class="ident" id="1560854"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1560855">.</span><span class="ident" id="1560856"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796269">valuesize</a></span><span class="op" id="1560865">)</span><span class="op" id="1560866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560877">}</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1560881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1560885">//&nbsp;Unlink&nbsp;the&nbsp;overflow&nbsp;buckets&nbsp;&amp;&nbsp;clear&nbsp;key/value&nbsp;to&nbsp;help&nbsp;GC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1560948">if</span>&nbsp;<span class="ident" id="1560951"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1560952">.</span><span class="ident" id="1560953"><a href="/gostd/runtime/hashmap.go.html#1538409">flags</a></span><span class="op" id="1560958">&amp;</span><span class="ident" id="1560959"><a href="/gostd/runtime/hashmap.go.html#1537895">oldIterator</a></span>&nbsp;<span class="op" id="1560971">==</span>&nbsp;<span class="num" id="1560974">0</span>&nbsp;<span class="op" id="1560976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1560981"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span>&nbsp;<span class="op" id="1560983">=</span>&nbsp;<span class="op" id="1560985">(</span><span class="op" id="1560986">*</span><span class="ident" id="1560987"><a href="/gostd/runtime/hashmap.go.html#1538842">bmap</a></span><span class="op" id="1560991">)</span><span class="op" id="1560992">(</span><span class="ident" id="1560993"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1560996">(</span><span class="ident" id="1560997"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1560998">.</span><span class="ident" id="1560999"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span><span class="op" id="1561009">,</span>&nbsp;<span class="ident" id="1561011"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span><span class="op" id="1561020">*</span><span class="builtintype" id="1561021">uintptr</span><span class="op" id="1561028">(</span><span class="ident" id="1561029"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1561030">.</span><span class="ident" id="1561031"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1561041">)</span><span class="op" id="1561042">)</span><span class="op" id="1561043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561048"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1561049">.</span><span class="ident" id="1561050"><a href="/gostd/runtime/hashmap.go.html#1538884">overflow</a></span>&nbsp;<span class="op" id="1561059">=</span>&nbsp;<span class="builtintype" id="1561061">nil</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561068"><a href="/gostd/runtime/stubs.go.html#1742585">memclr</a></span><span class="op" id="1561074">(</span><span class="ident" id="1561075"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1561078">(</span><span class="ident" id="1561079"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561085">.</span><span class="ident" id="1561086">Pointer</span><span class="op" id="1561093">(</span><span class="ident" id="1561094"><a href="/gostd/runtime/hashmap.go.html#1557137">b</a></span><span class="op" id="1561095">)</span><span class="op" id="1561096">,</span>&nbsp;<span class="ident" id="1561098"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1561108">)</span><span class="op" id="1561109">,</span>&nbsp;<span class="builtintype" id="1561111">uintptr</span><span class="op" id="1561118">(</span><span class="ident" id="1561119"><a href="/gostd/runtime/hashmap.go.html#1557094">t</a></span><span class="op" id="1561120">.</span><span class="ident" id="1561121"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796306">bucketsize</a></span><span class="op" id="1561131">)</span><span class="op" id="1561132">-</span><span class="ident" id="1561133"><a href="/gostd/runtime/hashmap.go.html#1537064">dataOffset</a></span><span class="op" id="1561143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1561147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1561150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1561154">//&nbsp;Advance&nbsp;evacuation&nbsp;mark</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561182">if</span>&nbsp;<span class="ident" id="1561185"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span>&nbsp;<span class="op" id="1561195">==</span>&nbsp;<span class="ident" id="1561198"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1561199">.</span><span class="ident" id="1561200"><a href="/gostd/runtime/hashmap.go.html#1538702">nevacuate</a></span>&nbsp;<span class="op" id="1561210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561214"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1561215">.</span><span class="ident" id="1561216"><a href="/gostd/runtime/hashmap.go.html#1538702">nevacuate</a></span>&nbsp;<span class="op" id="1561226">=</span>&nbsp;<span class="ident" id="1561228"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span>&nbsp;<span class="op" id="1561238">+</span>&nbsp;<span class="num" id="1561240">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561244">if</span>&nbsp;<span class="ident" id="1561247"><a href="/gostd/runtime/hashmap.go.html#1557115">oldbucket</a></span><span class="op" id="1561256">+</span><span class="num" id="1561257">1</span>&nbsp;<span class="op" id="1561259">==</span>&nbsp;<span class="ident" id="1561262"><a href="/gostd/runtime/hashmap.go.html#1557203">newbit</a></span>&nbsp;<span class="op" id="1561269">{</span>&nbsp;<span class="comment" id="1561271">//&nbsp;newbit&nbsp;==&nbsp;#&nbsp;of&nbsp;oldbuckets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1561303">//&nbsp;Growing&nbsp;is&nbsp;all&nbsp;done.&nbsp;&nbsp;Free&nbsp;old&nbsp;main&nbsp;bucket&nbsp;array.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561359"><a href="/gostd/runtime/hashmap.go.html#1557106">h</a></span><span class="op" id="1561360">.</span><span class="ident" id="1561361"><a href="/gostd/runtime/hashmap.go.html#1538606">oldbuckets</a></span>&nbsp;<span class="op" id="1561372">=</span>&nbsp;<span class="builtintype" id="1561374">nil</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1561380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1561383">}</span><br>
<span class="lineno"></span><span class="op" id="1561385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1561388">func</span>&nbsp;<span class="ident" id="1561393">ismapkey</span><span class="op" id="1561401">(</span><span class="ident" id="1561402">t</span>&nbsp;<span class="op" id="1561404">*</span><span class="ident" id="1561405"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795605">_type</a></span><span class="op" id="1561410">)</span>&nbsp;<span class="builtintype" id="1561412">bool</span>&nbsp;<span class="op" id="1561417">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561420">return</span>&nbsp;<span class="ident" id="1561427"><a href="/gostd/runtime/alg.go.html#1479263">goalg</a></span><span class="op" id="1561432">(</span><span class="ident" id="1561433"><a href="/gostd/runtime/hashmap.go.html#1561402">t</a></span><span class="op" id="1561434">.</span><span class="ident" id="1561435"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795706">alg</a></span><span class="op" id="1561438">)</span><span class="op" id="1561439">.</span><span class="ident" id="1561440"><a href="/gostd/runtime/alg.go.html#1472265">hash</a></span>&nbsp;<span class="op" id="1561445">!=</span>&nbsp;<span class="builtintype" id="1561448">nil</span><br>
<span class="lineno"></span><span class="op" id="1561452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1561455">//&nbsp;Reflect&nbsp;stubs.&nbsp;&nbsp;Called&nbsp;from&nbsp;../reflect/asm_*.s</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="keyword" id="1561506">func</span>&nbsp;<span class="ident" id="1561511">reflect_makemap</span><span class="op" id="1561526">(</span><span class="ident" id="1561527">t</span>&nbsp;<span class="op" id="1561529">*</span><span class="ident" id="1561530"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1561537">)</span>&nbsp;<span class="op" id="1561539">*</span><span class="ident" id="1561540"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span>&nbsp;<span class="op" id="1561545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561548">return</span>&nbsp;<span class="ident" id="1561555"><a href="/gostd/runtime/hashmap.go.html#1540168">makemap</a></span><span class="op" id="1561562">(</span><span class="ident" id="1561563"><a href="/gostd/runtime/hashmap.go.html#1561527">t</a></span><span class="op" id="1561564">,</span>&nbsp;<span class="num" id="1561566">0</span><span class="op" id="1561567">)</span><br>
<span class="lineno"></span><span class="op" id="1561569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1561572">func</span>&nbsp;<span class="ident" id="1561577">reflect_mapaccess</span><span class="op" id="1561594">(</span><span class="ident" id="1561595">t</span>&nbsp;<span class="op" id="1561597">*</span><span class="ident" id="1561598"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1561605">,</span>&nbsp;<span class="ident" id="1561607">h</span>&nbsp;<span class="op" id="1561609">*</span><span class="ident" id="1561610"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1561614">,</span>&nbsp;<span class="ident" id="1561616">key</span>&nbsp;<span class="ident" id="1561620"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561626">.</span><span class="ident" id="1561627">Pointer</span><span class="op" id="1561634">)</span>&nbsp;<span class="ident" id="1561636"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561642">.</span><span class="ident" id="1561643">Pointer</span>&nbsp;<span class="op" id="1561651">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561654">val</span><span class="op" id="1561657">,</span>&nbsp;<span class="ident" id="1561659">ok</span>&nbsp;<span class="op" id="1561662">:=</span>&nbsp;<span class="ident" id="1561665"><a href="/gostd/runtime/hashmap.go.html#1543991">mapaccess2</a></span><span class="op" id="1561675">(</span><span class="ident" id="1561676"><a href="/gostd/runtime/hashmap.go.html#1561595">t</a></span><span class="op" id="1561677">,</span>&nbsp;<span class="ident" id="1561679"><a href="/gostd/runtime/hashmap.go.html#1561607">h</a></span><span class="op" id="1561680">,</span>&nbsp;<span class="ident" id="1561682"><a href="/gostd/runtime/hashmap.go.html#1561616">key</a></span><span class="op" id="1561685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561688">if</span>&nbsp;<span class="op" id="1561691">!</span><span class="ident" id="1561692"><a href="/gostd/runtime/hashmap.go.html#1561659">ok</a></span>&nbsp;<span class="op" id="1561695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1561699">//&nbsp;reflect&nbsp;wants&nbsp;nil&nbsp;for&nbsp;a&nbsp;missing&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561744"><a href="/gostd/runtime/hashmap.go.html#1561654">val</a></span>&nbsp;<span class="op" id="1561748">=</span>&nbsp;<span class="builtintype" id="1561750">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1561755">}</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1561758">return</span>&nbsp;<span class="ident" id="1561765"><a href="/gostd/runtime/hashmap.go.html#1561654">val</a></span><br>
<span class="lineno"></span><span class="op" id="1561769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1561772">func</span>&nbsp;<span class="ident" id="1561777">reflect_mapassign</span><span class="op" id="1561794">(</span><span class="ident" id="1561795">t</span>&nbsp;<span class="op" id="1561797">*</span><span class="ident" id="1561798"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1561805">,</span>&nbsp;<span class="ident" id="1561807">h</span>&nbsp;<span class="op" id="1561809">*</span><span class="ident" id="1561810"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1561814">,</span>&nbsp;<span class="ident" id="1561816">key</span>&nbsp;<span class="ident" id="1561820"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561826">.</span><span class="ident" id="1561827">Pointer</span><span class="op" id="1561834">,</span>&nbsp;<span class="ident" id="1561836">val</span>&nbsp;<span class="ident" id="1561840"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561846">.</span><span class="ident" id="1561847">Pointer</span><span class="op" id="1561854">)</span>&nbsp;<span class="op" id="1561856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561859"><a href="/gostd/runtime/hashmap.go.html#1546486">mapassign1</a></span><span class="op" id="1561869">(</span><span class="ident" id="1561870"><a href="/gostd/runtime/hashmap.go.html#1561795">t</a></span><span class="op" id="1561871">,</span>&nbsp;<span class="ident" id="1561873"><a href="/gostd/runtime/hashmap.go.html#1561807">h</a></span><span class="op" id="1561874">,</span>&nbsp;<span class="ident" id="1561876"><a href="/gostd/runtime/hashmap.go.html#1561816">key</a></span><span class="op" id="1561879">,</span>&nbsp;<span class="ident" id="1561881"><a href="/gostd/runtime/hashmap.go.html#1561836">val</a></span><span class="op" id="1561884">)</span><br>
<span class="lineno">920</span><span class="op" id="1561886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1561889">func</span>&nbsp;<span class="ident" id="1561894">reflect_mapdelete</span><span class="op" id="1561911">(</span><span class="ident" id="1561912">t</span>&nbsp;<span class="op" id="1561914">*</span><span class="ident" id="1561915"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1561922">,</span>&nbsp;<span class="ident" id="1561924">h</span>&nbsp;<span class="op" id="1561926">*</span><span class="ident" id="1561927"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1561931">,</span>&nbsp;<span class="ident" id="1561933">key</span>&nbsp;<span class="ident" id="1561937"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1561943">.</span><span class="ident" id="1561944">Pointer</span><span class="op" id="1561951">)</span>&nbsp;<span class="op" id="1561953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1561956"><a href="/gostd/runtime/hashmap.go.html#1549421">mapdelete</a></span><span class="op" id="1561965">(</span><span class="ident" id="1561966"><a href="/gostd/runtime/hashmap.go.html#1561912">t</a></span><span class="op" id="1561967">,</span>&nbsp;<span class="ident" id="1561969"><a href="/gostd/runtime/hashmap.go.html#1561924">h</a></span><span class="op" id="1561970">,</span>&nbsp;<span class="ident" id="1561972"><a href="/gostd/runtime/hashmap.go.html#1561933">key</a></span><span class="op" id="1561975">)</span><br>
<span class="lineno"></span><span class="op" id="1561977">}</span><br>
<span class="lineno">925</span><br>
<span class="lineno"></span><span class="keyword" id="1561980">func</span>&nbsp;<span class="ident" id="1561985">reflect_mapiterinit</span><span class="op" id="1562004">(</span><span class="ident" id="1562005">t</span>&nbsp;<span class="op" id="1562007">*</span><span class="ident" id="1562008"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1796154">maptype</a></span><span class="op" id="1562015">,</span>&nbsp;<span class="ident" id="1562017">h</span>&nbsp;<span class="op" id="1562019">*</span><span class="ident" id="1562020"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1562024">)</span>&nbsp;<span class="op" id="1562026">*</span><span class="ident" id="1562027"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span>&nbsp;<span class="op" id="1562033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1562036">it</span>&nbsp;<span class="op" id="1562039">:=</span>&nbsp;<span class="builtinfunc" id="1562042">new</span><span class="op" id="1562045">(</span><span class="ident" id="1562046"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1562051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1562054"><a href="/gostd/runtime/hashmap.go.html#1550658">mapiterinit</a></span><span class="op" id="1562065">(</span><span class="ident" id="1562066"><a href="/gostd/runtime/hashmap.go.html#1562005">t</a></span><span class="op" id="1562067">,</span>&nbsp;<span class="ident" id="1562069"><a href="/gostd/runtime/hashmap.go.html#1562017">h</a></span><span class="op" id="1562070">,</span>&nbsp;<span class="ident" id="1562072"><a href="/gostd/runtime/hashmap.go.html#1562036">it</a></span><span class="op" id="1562074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562077">return</span>&nbsp;<span class="ident" id="1562084"><a href="/gostd/runtime/hashmap.go.html#1562036">it</a></span><br>
<span class="lineno">930</span><span class="op" id="1562087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1562090">func</span>&nbsp;<span class="ident" id="1562095">reflect_mapiternext</span><span class="op" id="1562114">(</span><span class="ident" id="1562115">it</span>&nbsp;<span class="op" id="1562118">*</span><span class="ident" id="1562119"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1562124">)</span>&nbsp;<span class="op" id="1562126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1562129"><a href="/gostd/runtime/hashmap.go.html#1551836">mapiternext</a></span><span class="op" id="1562140">(</span><span class="ident" id="1562141"><a href="/gostd/runtime/hashmap.go.html#1562115">it</a></span><span class="op" id="1562143">)</span><br>
<span class="lineno"></span><span class="op" id="1562145">}</span><br>
<span class="lineno">935</span><br>
<span class="lineno"></span><span class="keyword" id="1562148">func</span>&nbsp;<span class="ident" id="1562153">reflect_mapiterkey</span><span class="op" id="1562171">(</span><span class="ident" id="1562172">it</span>&nbsp;<span class="op" id="1562175">*</span><span class="ident" id="1562176"><a href="/gostd/runtime/hashmap.go.html#1539341">hiter</a></span><span class="op" id="1562181">)</span>&nbsp;<span class="ident" id="1562183"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1562189">.</span><span class="ident" id="1562190">Pointer</span>&nbsp;<span class="op" id="1562198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562201">return</span>&nbsp;<span class="ident" id="1562208"><a href="/gostd/runtime/hashmap.go.html#1562172">it</a></span><span class="op" id="1562210">.</span><span class="ident" id="1562211"><a href="/gostd/runtime/hashmap.go.html#1539357">key</a></span><br>
<span class="lineno"></span><span class="op" id="1562215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">940</span><span class="keyword" id="1562218">func</span>&nbsp;<span class="ident" id="1562223">reflect_maplen</span><span class="op" id="1562237">(</span><span class="ident" id="1562238">h</span>&nbsp;<span class="op" id="1562240">*</span><span class="ident" id="1562241"><a href="/gostd/runtime/hashmap.go.html#1538152">hmap</a></span><span class="op" id="1562245">)</span>&nbsp;<span class="builtintype" id="1562247">int</span>&nbsp;<span class="op" id="1562251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562254">if</span>&nbsp;<span class="ident" id="1562257"><a href="/gostd/runtime/hashmap.go.html#1562238">h</a></span>&nbsp;<span class="op" id="1562259">==</span>&nbsp;<span class="builtintype" id="1562262">nil</span>&nbsp;<span class="op" id="1562266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562270">return</span>&nbsp;<span class="num" id="1562277">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1562280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562283">if</span>&nbsp;<span class="ident" id="1562286"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1562298">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1562302">callerpc</span>&nbsp;<span class="op" id="1562311">:=</span>&nbsp;<span class="ident" id="1562314"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1562325">(</span><span class="ident" id="1562326"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1562332">.</span><span class="ident" id="1562333">Pointer</span><span class="op" id="1562340">(</span><span class="op" id="1562341">&amp;</span><span class="ident" id="1562342"><a href="/gostd/runtime/hashmap.go.html#1562238">h</a></span><span class="op" id="1562343">)</span><span class="op" id="1562344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1562348"><a href="/gostd/runtime/race0.go.html#1677192">racereadpc</a></span><span class="op" id="1562358">(</span><span class="ident" id="1562359"><a href="/gostd/runtime/hashmap.go.html#1536398">unsafe</a></span><span class="op" id="1562365">.</span><span class="ident" id="1562366">Pointer</span><span class="op" id="1562373">(</span><span class="ident" id="1562374"><a href="/gostd/runtime/hashmap.go.html#1562238">h</a></span><span class="op" id="1562375">)</span><span class="op" id="1562376">,</span>&nbsp;<span class="ident" id="1562378"><a href="/gostd/runtime/hashmap.go.html#1562302">callerpc</a></span><span class="op" id="1562386">,</span>&nbsp;<span class="ident" id="1562388"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1562394">(</span><span class="ident" id="1562395"><a href="/gostd/runtime/hashmap.go.html#1562223">reflect_maplen</a></span><span class="op" id="1562409">)</span><span class="op" id="1562410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1562413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562416">return</span>&nbsp;<span class="ident" id="1562423"><a href="/gostd/runtime/hashmap.go.html#1562238">h</a></span><span class="op" id="1562424">.</span><span class="ident" id="1562425"><a href="/gostd/runtime/hashmap.go.html#1538327">count</a></span><br>
<span class="lineno"></span><span class="op" id="1562431">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="keyword" id="1562434">func</span>&nbsp;<span class="ident" id="1562439">reflect_ismapkey</span><span class="op" id="1562455">(</span><span class="ident" id="1562456">t</span>&nbsp;<span class="op" id="1562458">*</span><span class="ident" id="1562459"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795605">_type</a></span><span class="op" id="1562464">)</span>&nbsp;<span class="builtintype" id="1562466">bool</span>&nbsp;<span class="op" id="1562471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1562474">return</span>&nbsp;<span class="ident" id="1562481"><a href="/gostd/runtime/hashmap.go.html#1561393">ismapkey</a></span><span class="op" id="1562489">(</span><span class="ident" id="1562490"><a href="/gostd/runtime/hashmap.go.html#1562456">t</a></span><span class="op" id="1562491">)</span><br>
<span class="lineno"></span><span class="op" id="1562493">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
