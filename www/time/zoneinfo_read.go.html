<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2375577">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2375632">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2375686">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2375737">//&nbsp;Parse&nbsp;&#34;zoneinfo&#34;&nbsp;time&nbsp;zone&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2375773">//&nbsp;This&nbsp;is&nbsp;a&nbsp;fairly&nbsp;standard&nbsp;file&nbsp;format&nbsp;used&nbsp;on&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;BSD,&nbsp;Sun,&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span><span class="comment" id="2375857">//&nbsp;See&nbsp;tzfile(5),&nbsp;http://en.wikipedia.org/wiki/Zoneinfo,</span><br>
<span class="lineno"></span><span class="comment" id="2375914">//&nbsp;and&nbsp;ftp://munnari.oz.au/pub/oldtz/</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2375953">package</span>&nbsp;<span class="ident" id="2375961">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2375967">import</span>&nbsp;<span class="string" id="2375974">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2375984">//&nbsp;Simple&nbsp;I/O&nbsp;interface&nbsp;to&nbsp;binary&nbsp;blob&nbsp;of&nbsp;data.</span><br>
<span class="lineno">15</span><span class="keyword" id="2376032">type</span>&nbsp;<span class="ident" id="2376037">data</span>&nbsp;<span class="keyword" id="2376042">struct</span>&nbsp;<span class="op" id="2376049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376052">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2376058">[</span><span class="op" id="2376059">]</span><span class="builtintype" id="2376060">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2376066">error</span>&nbsp;<span class="builtintype" id="2376072">bool</span><br>
<span class="lineno"></span><span class="op" id="2376077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="2376080">func</span>&nbsp;<span class="op" id="2376085">(</span><span class="ident" id="2376086">d</span>&nbsp;<span class="op" id="2376088">*</span><span class="ident" id="2376089"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2376093">)</span>&nbsp;<span class="ident" id="2376095">read</span><span class="op" id="2376099">(</span><span class="ident" id="2376100">n</span>&nbsp;<span class="builtintype" id="2376102">int</span><span class="op" id="2376105">)</span>&nbsp;<span class="op" id="2376107">[</span><span class="op" id="2376108">]</span><span class="builtintype" id="2376109">byte</span>&nbsp;<span class="op" id="2376114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376117">if</span>&nbsp;<span class="builtinfunc" id="2376120">len</span><span class="op" id="2376123">(</span><span class="ident" id="2376124"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376125">.</span><span class="ident" id="2376126">p</span><span class="op" id="2376127">)</span>&nbsp;<span class="op" id="2376129">&lt;</span>&nbsp;<span class="ident" id="2376131"><a href="/time/zoneinfo_read.go.html#2376100">n</a></span>&nbsp;<span class="op" id="2376133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376137"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376138">.</span><span class="ident" id="2376139">p</span>&nbsp;<span class="op" id="2376141">=</span>&nbsp;<span class="ident" id="2376143">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376149"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376150">.</span><span class="builtintype" id="2376151">error</span>&nbsp;<span class="op" id="2376157">=</span>&nbsp;<span class="ident" id="2376159">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376166">return</span>&nbsp;<span class="ident" id="2376173">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376181">p</span>&nbsp;<span class="op" id="2376183">:=</span>&nbsp;<span class="ident" id="2376186"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376187">.</span><span class="ident" id="2376188">p</span><span class="op" id="2376189">[</span><span class="num" id="2376190">0</span><span class="op" id="2376191">:</span><span class="ident" id="2376192"><a href="/time/zoneinfo_read.go.html#2376100">n</a></span><span class="op" id="2376193">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376196"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376197">.</span><span class="ident" id="2376198">p</span>&nbsp;<span class="op" id="2376200">=</span>&nbsp;<span class="ident" id="2376202"><a href="/time/zoneinfo_read.go.html#2376086">d</a></span><span class="op" id="2376203">.</span><span class="ident" id="2376204">p</span><span class="op" id="2376205">[</span><span class="ident" id="2376206"><a href="/time/zoneinfo_read.go.html#2376100">n</a></span><span class="op" id="2376207">:</span><span class="op" id="2376208">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376211">return</span>&nbsp;<span class="ident" id="2376218"><a href="/time/zoneinfo_read.go.html#2376181">p</a></span><br>
<span class="lineno"></span><span class="op" id="2376220">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2376223">func</span>&nbsp;<span class="op" id="2376228">(</span><span class="ident" id="2376229">d</span>&nbsp;<span class="op" id="2376231">*</span><span class="ident" id="2376232"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2376236">)</span>&nbsp;<span class="ident" id="2376238">big4</span><span class="op" id="2376242">(</span><span class="op" id="2376243">)</span>&nbsp;<span class="op" id="2376245">(</span><span class="ident" id="2376246">n</span>&nbsp;<span class="builtintype" id="2376248">uint32</span><span class="op" id="2376254">,</span>&nbsp;<span class="ident" id="2376256">ok</span>&nbsp;<span class="builtintype" id="2376259">bool</span><span class="op" id="2376263">)</span>&nbsp;<span class="op" id="2376265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376268">p</span>&nbsp;<span class="op" id="2376270">:=</span>&nbsp;<span class="ident" id="2376273"><a href="/time/zoneinfo_read.go.html#2376229">d</a></span><span class="op" id="2376274">.</span><span class="ident" id="2376275">read</span><span class="op" id="2376279">(</span><span class="num" id="2376280">4</span><span class="op" id="2376281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376284">if</span>&nbsp;<span class="builtinfunc" id="2376287">len</span><span class="op" id="2376290">(</span><span class="ident" id="2376291"><a href="/time/zoneinfo_read.go.html#2376268">p</a></span><span class="op" id="2376292">)</span>&nbsp;<span class="op" id="2376294">&lt;</span>&nbsp;<span class="num" id="2376296">4</span>&nbsp;<span class="op" id="2376298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376302"><a href="/time/zoneinfo_read.go.html#2376229">d</a></span><span class="op" id="2376303">.</span><span class="builtintype" id="2376304">error</span>&nbsp;<span class="op" id="2376310">=</span>&nbsp;<span class="ident" id="2376312">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376319">return</span>&nbsp;<span class="num" id="2376326">0</span><span class="op" id="2376327">,</span>&nbsp;<span class="ident" id="2376329">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376339">return</span>&nbsp;<span class="builtintype" id="2376346">uint32</span><span class="op" id="2376352">(</span><span class="ident" id="2376353"><a href="/time/zoneinfo_read.go.html#2376268">p</a></span><span class="op" id="2376354">[</span><span class="num" id="2376355">0</span><span class="op" id="2376356">]</span><span class="op" id="2376357">)</span><span class="op" id="2376358">&lt;&lt;</span><span class="num" id="2376360">24</span>&nbsp;<span class="op" id="2376363">|</span>&nbsp;<span class="builtintype" id="2376365">uint32</span><span class="op" id="2376371">(</span><span class="ident" id="2376372"><a href="/time/zoneinfo_read.go.html#2376268">p</a></span><span class="op" id="2376373">[</span><span class="num" id="2376374">1</span><span class="op" id="2376375">]</span><span class="op" id="2376376">)</span><span class="op" id="2376377">&lt;&lt;</span><span class="num" id="2376379">16</span>&nbsp;<span class="op" id="2376382">|</span>&nbsp;<span class="builtintype" id="2376384">uint32</span><span class="op" id="2376390">(</span><span class="ident" id="2376391"><a href="/time/zoneinfo_read.go.html#2376268">p</a></span><span class="op" id="2376392">[</span><span class="num" id="2376393">2</span><span class="op" id="2376394">]</span><span class="op" id="2376395">)</span><span class="op" id="2376396">&lt;&lt;</span><span class="num" id="2376398">8</span>&nbsp;<span class="op" id="2376400">|</span>&nbsp;<span class="builtintype" id="2376402">uint32</span><span class="op" id="2376408">(</span><span class="ident" id="2376409"><a href="/time/zoneinfo_read.go.html#2376268">p</a></span><span class="op" id="2376410">[</span><span class="num" id="2376411">3</span><span class="op" id="2376412">]</span><span class="op" id="2376413">)</span><span class="op" id="2376414">,</span>&nbsp;<span class="ident" id="2376416">true</span><br>
<span class="lineno"></span><span class="op" id="2376421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="2376424">func</span>&nbsp;<span class="op" id="2376429">(</span><span class="ident" id="2376430">d</span>&nbsp;<span class="op" id="2376432">*</span><span class="ident" id="2376433"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2376437">)</span>&nbsp;<span class="builtintype" id="2376439">byte</span><span class="op" id="2376443">(</span><span class="op" id="2376444">)</span>&nbsp;<span class="op" id="2376446">(</span><span class="ident" id="2376447">n</span>&nbsp;<span class="builtintype" id="2376449">byte</span><span class="op" id="2376453">,</span>&nbsp;<span class="ident" id="2376455">ok</span>&nbsp;<span class="builtintype" id="2376458">bool</span><span class="op" id="2376462">)</span>&nbsp;<span class="op" id="2376464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376467">p</span>&nbsp;<span class="op" id="2376469">:=</span>&nbsp;<span class="ident" id="2376472"><a href="/time/zoneinfo_read.go.html#2376430">d</a></span><span class="op" id="2376473">.</span><span class="ident" id="2376474">read</span><span class="op" id="2376478">(</span><span class="num" id="2376479">1</span><span class="op" id="2376480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376483">if</span>&nbsp;<span class="builtinfunc" id="2376486">len</span><span class="op" id="2376489">(</span><span class="ident" id="2376490"><a href="/time/zoneinfo_read.go.html#2376467">p</a></span><span class="op" id="2376491">)</span>&nbsp;<span class="op" id="2376493">&lt;</span>&nbsp;<span class="num" id="2376495">1</span>&nbsp;<span class="op" id="2376497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376501"><a href="/time/zoneinfo_read.go.html#2376430">d</a></span><span class="op" id="2376502">.</span><span class="builtintype" id="2376503">error</span>&nbsp;<span class="op" id="2376509">=</span>&nbsp;<span class="ident" id="2376511">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376518">return</span>&nbsp;<span class="num" id="2376525">0</span><span class="op" id="2376526">,</span>&nbsp;<span class="ident" id="2376528">false</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376538">return</span>&nbsp;<span class="ident" id="2376545"><a href="/time/zoneinfo_read.go.html#2376467">p</a></span><span class="op" id="2376546">[</span><span class="num" id="2376547">0</span><span class="op" id="2376548">]</span><span class="op" id="2376549">,</span>&nbsp;<span class="ident" id="2376551">true</span><br>
<span class="lineno"></span><span class="op" id="2376556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2376559">//&nbsp;Make&nbsp;a&nbsp;string&nbsp;by&nbsp;stopping&nbsp;at&nbsp;the&nbsp;first&nbsp;NUL</span><br>
<span class="lineno">50</span><span class="keyword" id="2376605">func</span>&nbsp;<span class="ident" id="2376610">byteString</span><span class="op" id="2376620">(</span><span class="ident" id="2376621">p</span>&nbsp;<span class="op" id="2376623">[</span><span class="op" id="2376624">]</span><span class="builtintype" id="2376625">byte</span><span class="op" id="2376629">)</span>&nbsp;<span class="builtintype" id="2376631">string</span>&nbsp;<span class="op" id="2376638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376641">for</span>&nbsp;<span class="ident" id="2376645">i</span>&nbsp;<span class="op" id="2376647">:=</span>&nbsp;<span class="num" id="2376650">0</span><span class="op" id="2376651">;</span>&nbsp;<span class="ident" id="2376653"><a href="/time/zoneinfo_read.go.html#2376645">i</a></span>&nbsp;<span class="op" id="2376655">&lt;</span>&nbsp;<span class="builtinfunc" id="2376657">len</span><span class="op" id="2376660">(</span><span class="ident" id="2376661"><a href="/time/zoneinfo_read.go.html#2376621">p</a></span><span class="op" id="2376662">)</span><span class="op" id="2376663">;</span>&nbsp;<span class="ident" id="2376665"><a href="/time/zoneinfo_read.go.html#2376645">i</a></span><span class="op" id="2376666">++</span>&nbsp;<span class="op" id="2376669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376673">if</span>&nbsp;<span class="ident" id="2376676"><a href="/time/zoneinfo_read.go.html#2376621">p</a></span><span class="op" id="2376677">[</span><span class="ident" id="2376678"><a href="/time/zoneinfo_read.go.html#2376645">i</a></span><span class="op" id="2376679">]</span>&nbsp;<span class="op" id="2376681">==</span>&nbsp;<span class="num" id="2376684">0</span>&nbsp;<span class="op" id="2376686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376691">return</span>&nbsp;<span class="builtintype" id="2376698">string</span><span class="op" id="2376704">(</span><span class="ident" id="2376705"><a href="/time/zoneinfo_read.go.html#2376621">p</a></span><span class="op" id="2376706">[</span><span class="num" id="2376707">0</span><span class="op" id="2376708">:</span><span class="ident" id="2376709"><a href="/time/zoneinfo_read.go.html#2376645">i</a></span><span class="op" id="2376710">]</span><span class="op" id="2376711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376715">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376721">return</span>&nbsp;<span class="builtintype" id="2376728">string</span><span class="op" id="2376734">(</span><span class="ident" id="2376735"><a href="/time/zoneinfo_read.go.html#2376621">p</a></span><span class="op" id="2376736">)</span><br>
<span class="lineno"></span><span class="op" id="2376738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2376741">var</span>&nbsp;<span class="ident" id="2376745">badData</span>&nbsp;<span class="op" id="2376753">=</span>&nbsp;<span class="ident" id="2376755"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2376761">.</span><span class="ident" id="2376762">New</span><span class="op" id="2376765">(</span><span class="string" id="2376766">&#34;malformed&nbsp;time&nbsp;zone&nbsp;information&#34;</span><span class="op" id="2376799">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2376802">func</span>&nbsp;<span class="ident" id="2376807">loadZoneData</span><span class="op" id="2376819">(</span><span class="ident" id="2376820">bytes</span>&nbsp;<span class="op" id="2376826">[</span><span class="op" id="2376827">]</span><span class="builtintype" id="2376828">byte</span><span class="op" id="2376832">)</span>&nbsp;<span class="op" id="2376834">(</span><span class="ident" id="2376835">l</span>&nbsp;<span class="op" id="2376837">*</span><span class="ident" id="2376838"><a href="/time/zoneinfo.go.html#2368196">Location</a></span><span class="op" id="2376846">,</span>&nbsp;<span class="ident" id="2376848">err</span>&nbsp;<span class="builtintype" id="2376852">error</span><span class="op" id="2376857">)</span>&nbsp;<span class="op" id="2376859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2376862">d</span>&nbsp;<span class="op" id="2376864">:=</span>&nbsp;<span class="ident" id="2376867"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2376871">{</span><span class="ident" id="2376872"><a href="/time/zoneinfo_read.go.html#2376820">bytes</a></span><span class="op" id="2376877">,</span>&nbsp;<span class="ident" id="2376879">false</span><span class="op" id="2376884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2376888">//&nbsp;4-byte&nbsp;magic&nbsp;&#34;TZif&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376912">if</span>&nbsp;<span class="ident" id="2376915">magic</span>&nbsp;<span class="op" id="2376921">:=</span>&nbsp;<span class="ident" id="2376924"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2376925">.</span><span class="ident" id="2376926">read</span><span class="op" id="2376930">(</span><span class="num" id="2376931">4</span><span class="op" id="2376932">)</span><span class="op" id="2376933">;</span>&nbsp;<span class="builtintype" id="2376935">string</span><span class="op" id="2376941">(</span><span class="ident" id="2376942"><a href="/time/zoneinfo_read.go.html#2376915">magic</a></span><span class="op" id="2376947">)</span>&nbsp;<span class="op" id="2376949">!=</span>&nbsp;<span class="string" id="2376952">&#34;TZif&#34;</span>&nbsp;<span class="op" id="2376959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2376963">return</span>&nbsp;<span class="ident" id="2376970">nil</span><span class="op" id="2376973">,</span>&nbsp;<span class="ident" id="2376975"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2376984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2376988">//&nbsp;1-byte&nbsp;version,&nbsp;then&nbsp;15&nbsp;bytes&nbsp;of&nbsp;padding</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377033">var</span>&nbsp;<span class="ident" id="2377037">p</span>&nbsp;<span class="op" id="2377039">[</span><span class="op" id="2377040">]</span><span class="builtintype" id="2377041">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377047">if</span>&nbsp;<span class="ident" id="2377050"><a href="/time/zoneinfo_read.go.html#2377037">p</a></span>&nbsp;<span class="op" id="2377052">=</span>&nbsp;<span class="ident" id="2377054"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377055">.</span><span class="ident" id="2377056">read</span><span class="op" id="2377060">(</span><span class="num" id="2377061">16</span><span class="op" id="2377063">)</span><span class="op" id="2377064">;</span>&nbsp;<span class="builtinfunc" id="2377066">len</span><span class="op" id="2377069">(</span><span class="ident" id="2377070"><a href="/time/zoneinfo_read.go.html#2377037">p</a></span><span class="op" id="2377071">)</span>&nbsp;<span class="op" id="2377073">!=</span>&nbsp;<span class="num" id="2377076">16</span>&nbsp;<span class="op" id="2377079">||</span>&nbsp;<span class="ident" id="2377082"><a href="/time/zoneinfo_read.go.html#2377037">p</a></span><span class="op" id="2377083">[</span><span class="num" id="2377084">0</span><span class="op" id="2377085">]</span>&nbsp;<span class="op" id="2377087">!=</span>&nbsp;<span class="num" id="2377090">0</span>&nbsp;<span class="op" id="2377092">&amp;&amp;</span>&nbsp;<span class="ident" id="2377095"><a href="/time/zoneinfo_read.go.html#2377037">p</a></span><span class="op" id="2377096">[</span><span class="num" id="2377097">0</span><span class="op" id="2377098">]</span>&nbsp;<span class="op" id="2377100">!=</span>&nbsp;<span class="string" id="2377103">&#39;2&#39;</span>&nbsp;<span class="op" id="2377107">&amp;&amp;</span>&nbsp;<span class="ident" id="2377110"><a href="/time/zoneinfo_read.go.html#2377037">p</a></span><span class="op" id="2377111">[</span><span class="num" id="2377112">0</span><span class="op" id="2377113">]</span>&nbsp;<span class="op" id="2377115">!=</span>&nbsp;<span class="string" id="2377118">&#39;3&#39;</span>&nbsp;<span class="op" id="2377122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377126">return</span>&nbsp;<span class="ident" id="2377133">nil</span><span class="op" id="2377136">,</span>&nbsp;<span class="ident" id="2377138"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2377147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377151">//&nbsp;six&nbsp;big-endian&nbsp;32-bit&nbsp;integers:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377187">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;UTC/local&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377222">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;standard/wall&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377261">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;leap&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377288">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;transition&nbsp;times</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377319">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;local&nbsp;time&nbsp;zones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377350">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;characters&nbsp;of&nbsp;time&nbsp;zone&nbsp;abbrev&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377403">const</span>&nbsp;<span class="op" id="2377409">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377413">NUTCLocal</span>&nbsp;<span class="op" id="2377423">=</span>&nbsp;<span class="ident" id="2377425">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377432">NStdWall</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377443">NLeap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377451">NTime</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377459">NZone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377467">NChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2377474">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377477">var</span>&nbsp;<span class="ident" id="2377481">n</span>&nbsp;<span class="op" id="2377483">[</span><span class="num" id="2377484">6</span><span class="op" id="2377485">]</span><span class="builtintype" id="2377486">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377491">for</span>&nbsp;<span class="ident" id="2377495">i</span>&nbsp;<span class="op" id="2377497">:=</span>&nbsp;<span class="num" id="2377500">0</span><span class="op" id="2377501">;</span>&nbsp;<span class="ident" id="2377503"><a href="/time/zoneinfo_read.go.html#2377495">i</a></span>&nbsp;<span class="op" id="2377505">&lt;</span>&nbsp;<span class="num" id="2377507">6</span><span class="op" id="2377508">;</span>&nbsp;<span class="ident" id="2377510"><a href="/time/zoneinfo_read.go.html#2377495">i</a></span><span class="op" id="2377511">++</span>&nbsp;<span class="op" id="2377514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377518">nn</span><span class="op" id="2377520">,</span>&nbsp;<span class="ident" id="2377522">ok</span>&nbsp;<span class="op" id="2377525">:=</span>&nbsp;<span class="ident" id="2377528"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377529">.</span><span class="ident" id="2377530">big4</span><span class="op" id="2377534">(</span><span class="op" id="2377535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377539">if</span>&nbsp;<span class="op" id="2377542">!</span><span class="ident" id="2377543"><a href="/time/zoneinfo_read.go.html#2377522">ok</a></span>&nbsp;<span class="op" id="2377546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2377551">return</span>&nbsp;<span class="ident" id="2377558">nil</span><span class="op" id="2377561">,</span>&nbsp;<span class="ident" id="2377563"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2377573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377577"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377578">[</span><span class="ident" id="2377579"><a href="/time/zoneinfo_read.go.html#2377495">i</a></span><span class="op" id="2377580">]</span>&nbsp;<span class="op" id="2377582">=</span>&nbsp;<span class="builtintype" id="2377584">int</span><span class="op" id="2377587">(</span><span class="ident" id="2377588"><a href="/time/zoneinfo_read.go.html#2377518">nn</a></span><span class="op" id="2377590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2377593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377597">//&nbsp;Transition&nbsp;times.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377619">txtimes</span>&nbsp;<span class="op" id="2377627">:=</span>&nbsp;<span class="ident" id="2377630"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2377634">{</span><span class="ident" id="2377635"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377636">.</span><span class="ident" id="2377637">read</span><span class="op" id="2377641">(</span><span class="ident" id="2377642"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377643">[</span><span class="ident" id="2377644"><a href="/time/zoneinfo_read.go.html#2377451">NTime</a></span><span class="op" id="2377649">]</span>&nbsp;<span class="op" id="2377651">*</span>&nbsp;<span class="num" id="2377653">4</span><span class="op" id="2377654">)</span><span class="op" id="2377655">,</span>&nbsp;<span class="ident" id="2377657">false</span><span class="op" id="2377662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377666">//&nbsp;Time&nbsp;zone&nbsp;indices&nbsp;for&nbsp;transition&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377710">txzones</span>&nbsp;<span class="op" id="2377718">:=</span>&nbsp;<span class="ident" id="2377721"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377722">.</span><span class="ident" id="2377723">read</span><span class="op" id="2377727">(</span><span class="ident" id="2377728"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377729">[</span><span class="ident" id="2377730"><a href="/time/zoneinfo_read.go.html#2377451">NTime</a></span><span class="op" id="2377735">]</span><span class="op" id="2377736">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377740">//&nbsp;Zone&nbsp;info&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377765">zonedata</span>&nbsp;<span class="op" id="2377774">:=</span>&nbsp;<span class="ident" id="2377777"><a href="/time/zoneinfo_read.go.html#2376037">data</a></span><span class="op" id="2377781">{</span><span class="ident" id="2377782"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377783">.</span><span class="ident" id="2377784">read</span><span class="op" id="2377788">(</span><span class="ident" id="2377789"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377790">[</span><span class="ident" id="2377791"><a href="/time/zoneinfo_read.go.html#2377459">NZone</a></span><span class="op" id="2377796">]</span>&nbsp;<span class="op" id="2377798">*</span>&nbsp;<span class="num" id="2377800">6</span><span class="op" id="2377801">)</span><span class="op" id="2377802">,</span>&nbsp;<span class="ident" id="2377804">false</span><span class="op" id="2377809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377813">//&nbsp;Time&nbsp;zone&nbsp;abbreviations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377842">abbrev</span>&nbsp;<span class="op" id="2377849">:=</span>&nbsp;<span class="ident" id="2377852"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377853">.</span><span class="ident" id="2377854">read</span><span class="op" id="2377858">(</span><span class="ident" id="2377859"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377860">[</span><span class="ident" id="2377861"><a href="/time/zoneinfo_read.go.html#2377467">NChar</a></span><span class="op" id="2377866">]</span><span class="op" id="2377867">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377871">//&nbsp;Leap-second&nbsp;time&nbsp;pairs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2377898"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2377899">.</span><span class="ident" id="2377900">read</span><span class="op" id="2377904">(</span><span class="ident" id="2377905"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2377906">[</span><span class="ident" id="2377907"><a href="/time/zoneinfo_read.go.html#2377443">NLeap</a></span><span class="op" id="2377912">]</span>&nbsp;<span class="op" id="2377914">*</span>&nbsp;<span class="num" id="2377916">8</span><span class="op" id="2377917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377921">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2377975">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;standard&nbsp;time&nbsp;or&nbsp;wall&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378024">isstd</span>&nbsp;<span class="op" id="2378030">:=</span>&nbsp;<span class="ident" id="2378033"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2378034">.</span><span class="ident" id="2378035">read</span><span class="op" id="2378039">(</span><span class="ident" id="2378040"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2378041">[</span><span class="ident" id="2378042"><a href="/time/zoneinfo_read.go.html#2377432">NStdWall</a></span><span class="op" id="2378050">]</span><span class="op" id="2378051">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378055">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378109">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;UTC&nbsp;or&nbsp;local&nbsp;time.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378149">isutc</span>&nbsp;<span class="op" id="2378155">:=</span>&nbsp;<span class="ident" id="2378158"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2378159">.</span><span class="ident" id="2378160">read</span><span class="op" id="2378164">(</span><span class="ident" id="2378165"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2378166">[</span><span class="ident" id="2378167"><a href="/time/zoneinfo_read.go.html#2377413">NUTCLocal</a></span><span class="op" id="2378176">]</span><span class="op" id="2378177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378181">if</span>&nbsp;<span class="ident" id="2378184"><a href="/time/zoneinfo_read.go.html#2376862">d</a></span><span class="op" id="2378185">.</span><span class="builtintype" id="2378186">error</span>&nbsp;<span class="op" id="2378192">{</span>&nbsp;<span class="comment" id="2378194">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378215">return</span>&nbsp;<span class="ident" id="2378222">nil</span><span class="op" id="2378225">,</span>&nbsp;<span class="ident" id="2378227"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2378236">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378240">//&nbsp;If&nbsp;version&nbsp;==&nbsp;2&nbsp;or&nbsp;3,&nbsp;the&nbsp;entire&nbsp;file&nbsp;repeats,&nbsp;this&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378307">//&nbsp;8-byte&nbsp;ints&nbsp;for&nbsp;txtimes&nbsp;and&nbsp;leap&nbsp;seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378353">//&nbsp;We&nbsp;won&#39;t&nbsp;need&nbsp;those&nbsp;until&nbsp;2106.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378390">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;build&nbsp;up&nbsp;a&nbsp;useful&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378439">//&nbsp;First&nbsp;the&nbsp;zone&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378471">//&nbsp;&nbsp;&nbsp;&nbsputcoff[4]&nbsp;isdst[1]&nbsp;nameindex[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378507">zone</span>&nbsp;<span class="op" id="2378512">:=</span>&nbsp;<span class="builtinfunc" id="2378515">make</span><span class="op" id="2378519">(</span><span class="op" id="2378520">[</span><span class="op" id="2378521">]</span><span class="ident" id="2378522"><a href="/time/zoneinfo.go.html#2368775">zone</a></span><span class="op" id="2378526">,</span>&nbsp;<span class="ident" id="2378528"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2378529">[</span><span class="ident" id="2378530"><a href="/time/zoneinfo_read.go.html#2377459">NZone</a></span><span class="op" id="2378535">]</span><span class="op" id="2378536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378539">for</span>&nbsp;<span class="ident" id="2378543">i</span>&nbsp;<span class="op" id="2378545">:=</span>&nbsp;<span class="keyword" id="2378548">range</span>&nbsp;<span class="ident" id="2378554"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span>&nbsp;<span class="op" id="2378559">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378563">var</span>&nbsp;<span class="ident" id="2378567">ok</span>&nbsp;<span class="builtintype" id="2378570">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378577">var</span>&nbsp;<span class="ident" id="2378581">n</span>&nbsp;<span class="builtintype" id="2378583">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378592">if</span>&nbsp;<span class="ident" id="2378595"><a href="/time/zoneinfo_read.go.html#2378581">n</a></span><span class="op" id="2378596">,</span>&nbsp;<span class="ident" id="2378598"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378601">=</span>&nbsp;<span class="ident" id="2378603"><a href="/time/zoneinfo_read.go.html#2377765">zonedata</a></span><span class="op" id="2378611">.</span><span class="ident" id="2378612">big4</span><span class="op" id="2378616">(</span><span class="op" id="2378617">)</span><span class="op" id="2378618">;</span>&nbsp;<span class="op" id="2378620">!</span><span class="ident" id="2378621"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378629">return</span>&nbsp;<span class="ident" id="2378636">nil</span><span class="op" id="2378639">,</span>&nbsp;<span class="ident" id="2378641"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2378651">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378655"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span><span class="op" id="2378659">[</span><span class="ident" id="2378660"><a href="/time/zoneinfo_read.go.html#2378543">i</a></span><span class="op" id="2378661">]</span><span class="op" id="2378662">.</span><span class="ident" id="2378663">offset</span>&nbsp;<span class="op" id="2378670">=</span>&nbsp;<span class="builtintype" id="2378672">int</span><span class="op" id="2378675">(</span><span class="builtintype" id="2378676">int32</span><span class="op" id="2378681">(</span><span class="ident" id="2378682"><a href="/time/zoneinfo_read.go.html#2378581">n</a></span><span class="op" id="2378683">)</span><span class="op" id="2378684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378688">var</span>&nbsp;<span class="ident" id="2378692">b</span>&nbsp;<span class="builtintype" id="2378694">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378701">if</span>&nbsp;<span class="ident" id="2378704"><a href="/time/zoneinfo_read.go.html#2378692">b</a></span><span class="op" id="2378705">,</span>&nbsp;<span class="ident" id="2378707"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378710">=</span>&nbsp;<span class="ident" id="2378712"><a href="/time/zoneinfo_read.go.html#2377765">zonedata</a></span><span class="op" id="2378720">.</span><span class="builtintype" id="2378721">byte</span><span class="op" id="2378725">(</span><span class="op" id="2378726">)</span><span class="op" id="2378727">;</span>&nbsp;<span class="op" id="2378729">!</span><span class="ident" id="2378730"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378738">return</span>&nbsp;<span class="ident" id="2378745">nil</span><span class="op" id="2378748">,</span>&nbsp;<span class="ident" id="2378750"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2378760">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378764"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span><span class="op" id="2378768">[</span><span class="ident" id="2378769"><a href="/time/zoneinfo_read.go.html#2378543">i</a></span><span class="op" id="2378770">]</span><span class="op" id="2378771">.</span><span class="ident" id="2378772">isDST</span>&nbsp;<span class="op" id="2378778">=</span>&nbsp;<span class="ident" id="2378780"><a href="/time/zoneinfo_read.go.html#2378692">b</a></span>&nbsp;<span class="op" id="2378782">!=</span>&nbsp;<span class="num" id="2378785">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378789">if</span>&nbsp;<span class="ident" id="2378792"><a href="/time/zoneinfo_read.go.html#2378692">b</a></span><span class="op" id="2378793">,</span>&nbsp;<span class="ident" id="2378795"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378798">=</span>&nbsp;<span class="ident" id="2378800"><a href="/time/zoneinfo_read.go.html#2377765">zonedata</a></span><span class="op" id="2378808">.</span><span class="builtintype" id="2378809">byte</span><span class="op" id="2378813">(</span><span class="op" id="2378814">)</span><span class="op" id="2378815">;</span>&nbsp;<span class="op" id="2378817">!</span><span class="ident" id="2378818"><a href="/time/zoneinfo_read.go.html#2378567">ok</a></span>&nbsp;<span class="op" id="2378821">||</span>&nbsp;<span class="builtintype" id="2378824">int</span><span class="op" id="2378827">(</span><span class="ident" id="2378828"><a href="/time/zoneinfo_read.go.html#2378692">b</a></span><span class="op" id="2378829">)</span>&nbsp;<span class="op" id="2378831">&gt;=</span>&nbsp;<span class="builtinfunc" id="2378834">len</span><span class="op" id="2378837">(</span><span class="ident" id="2378838"><a href="/time/zoneinfo_read.go.html#2377842">abbrev</a></span><span class="op" id="2378844">)</span>&nbsp;<span class="op" id="2378846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378851">return</span>&nbsp;<span class="ident" id="2378858">nil</span><span class="op" id="2378861">,</span>&nbsp;<span class="ident" id="2378863"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2378873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378877"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span><span class="op" id="2378881">[</span><span class="ident" id="2378882"><a href="/time/zoneinfo_read.go.html#2378543">i</a></span><span class="op" id="2378883">]</span><span class="op" id="2378884">.</span><span class="ident" id="2378885">name</span>&nbsp;<span class="op" id="2378890">=</span>&nbsp;<span class="ident" id="2378892"><a href="/time/zoneinfo_read.go.html#2376610">byteString</a></span><span class="op" id="2378902">(</span><span class="ident" id="2378903"><a href="/time/zoneinfo_read.go.html#2377842">abbrev</a></span><span class="op" id="2378909">[</span><span class="ident" id="2378910"><a href="/time/zoneinfo_read.go.html#2378692">b</a></span><span class="op" id="2378911">:</span><span class="op" id="2378912">]</span><span class="op" id="2378913">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2378916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2378920">//&nbsp;Now&nbsp;the&nbsp;transition&nbsp;time&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2378954">tx</span>&nbsp;<span class="op" id="2378957">:=</span>&nbsp;<span class="builtinfunc" id="2378960">make</span><span class="op" id="2378964">(</span><span class="op" id="2378965">[</span><span class="op" id="2378966">]</span><span class="ident" id="2378967"><a href="/time/zoneinfo.go.html#2368988">zoneTrans</a></span><span class="op" id="2378976">,</span>&nbsp;<span class="ident" id="2378978"><a href="/time/zoneinfo_read.go.html#2377481">n</a></span><span class="op" id="2378979">[</span><span class="ident" id="2378980"><a href="/time/zoneinfo_read.go.html#2377451">NTime</a></span><span class="op" id="2378985">]</span><span class="op" id="2378986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2378989">for</span>&nbsp;<span class="ident" id="2378993">i</span>&nbsp;<span class="op" id="2378995">:=</span>&nbsp;<span class="keyword" id="2378998">range</span>&nbsp;<span class="ident" id="2379004"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span>&nbsp;<span class="op" id="2379007">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379011">var</span>&nbsp;<span class="ident" id="2379015">ok</span>&nbsp;<span class="builtintype" id="2379018">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379025">var</span>&nbsp;<span class="ident" id="2379029">n</span>&nbsp;<span class="builtintype" id="2379031">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379040">if</span>&nbsp;<span class="ident" id="2379043"><a href="/time/zoneinfo_read.go.html#2379029">n</a></span><span class="op" id="2379044">,</span>&nbsp;<span class="ident" id="2379046"><a href="/time/zoneinfo_read.go.html#2379015">ok</a></span>&nbsp;<span class="op" id="2379049">=</span>&nbsp;<span class="ident" id="2379051"><a href="/time/zoneinfo_read.go.html#2377619">txtimes</a></span><span class="op" id="2379058">.</span><span class="ident" id="2379059">big4</span><span class="op" id="2379063">(</span><span class="op" id="2379064">)</span><span class="op" id="2379065">;</span>&nbsp;<span class="op" id="2379067">!</span><span class="ident" id="2379068"><a href="/time/zoneinfo_read.go.html#2379015">ok</a></span>&nbsp;<span class="op" id="2379071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379076">return</span>&nbsp;<span class="ident" id="2379083">nil</span><span class="op" id="2379086">,</span>&nbsp;<span class="ident" id="2379088"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379098">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379102"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379104">[</span><span class="ident" id="2379105"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379106">]</span><span class="op" id="2379107">.</span><span class="ident" id="2379108">when</span>&nbsp;<span class="op" id="2379113">=</span>&nbsp;<span class="ident" id="2379115">int64</span><span class="op" id="2379120">(</span><span class="builtintype" id="2379121">int32</span><span class="op" id="2379126">(</span><span class="ident" id="2379127"><a href="/time/zoneinfo_read.go.html#2379029">n</a></span><span class="op" id="2379128">)</span><span class="op" id="2379129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379133">if</span>&nbsp;<span class="builtintype" id="2379136">int</span><span class="op" id="2379139">(</span><span class="ident" id="2379140"><a href="/time/zoneinfo_read.go.html#2377710">txzones</a></span><span class="op" id="2379147">[</span><span class="ident" id="2379148"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379149">]</span><span class="op" id="2379150">)</span>&nbsp;<span class="op" id="2379152">&gt;=</span>&nbsp;<span class="builtinfunc" id="2379155">len</span><span class="op" id="2379158">(</span><span class="ident" id="2379159"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span><span class="op" id="2379163">)</span>&nbsp;<span class="op" id="2379165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379170">return</span>&nbsp;<span class="ident" id="2379177">nil</span><span class="op" id="2379180">,</span>&nbsp;<span class="ident" id="2379182"><a href="/time/zoneinfo_read.go.html#2376745">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379196"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379198">[</span><span class="ident" id="2379199"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379200">]</span><span class="op" id="2379201">.</span><span class="ident" id="2379202">index</span>&nbsp;<span class="op" id="2379208">=</span>&nbsp;<span class="ident" id="2379210"><a href="/time/zoneinfo_read.go.html#2377710">txzones</a></span><span class="op" id="2379217">[</span><span class="ident" id="2379218"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379219">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379223">if</span>&nbsp;<span class="ident" id="2379226"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span>&nbsp;<span class="op" id="2379228">&lt;</span>&nbsp;<span class="builtinfunc" id="2379230">len</span><span class="op" id="2379233">(</span><span class="ident" id="2379234"><a href="/time/zoneinfo_read.go.html#2378024">isstd</a></span><span class="op" id="2379239">)</span>&nbsp;<span class="op" id="2379241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379246"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379248">[</span><span class="ident" id="2379249"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379250">]</span><span class="op" id="2379251">.</span><span class="ident" id="2379252">isstd</span>&nbsp;<span class="op" id="2379258">=</span>&nbsp;<span class="ident" id="2379260"><a href="/time/zoneinfo_read.go.html#2378024">isstd</a></span><span class="op" id="2379265">[</span><span class="ident" id="2379266"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379267">]</span>&nbsp;<span class="op" id="2379269">!=</span>&nbsp;<span class="num" id="2379272">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379280">if</span>&nbsp;<span class="ident" id="2379283"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span>&nbsp;<span class="op" id="2379285">&lt;</span>&nbsp;<span class="builtinfunc" id="2379287">len</span><span class="op" id="2379290">(</span><span class="ident" id="2379291"><a href="/time/zoneinfo_read.go.html#2378149">isutc</a></span><span class="op" id="2379296">)</span>&nbsp;<span class="op" id="2379298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379303"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379305">[</span><span class="ident" id="2379306"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379307">]</span><span class="op" id="2379308">.</span><span class="ident" id="2379309">isutc</span>&nbsp;<span class="op" id="2379315">=</span>&nbsp;<span class="ident" id="2379317"><a href="/time/zoneinfo_read.go.html#2378149">isutc</a></span><span class="op" id="2379322">[</span><span class="ident" id="2379323"><a href="/time/zoneinfo_read.go.html#2378993">i</a></span><span class="op" id="2379324">]</span>&nbsp;<span class="op" id="2379326">!=</span>&nbsp;<span class="num" id="2379329">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379340">if</span>&nbsp;<span class="builtinfunc" id="2379343">len</span><span class="op" id="2379346">(</span><span class="ident" id="2379347"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379349">)</span>&nbsp;<span class="op" id="2379351">==</span>&nbsp;<span class="num" id="2379354">0</span>&nbsp;<span class="op" id="2379356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2379360">//&nbsp;Build&nbsp;fake&nbsp;transition&nbsp;to&nbsp;cover&nbsp;all&nbsp;time.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2379406">//&nbsp;This&nbsp;happens&nbsp;in&nbsp;fixed&nbsp;locations&nbsp;like&nbsp;&#34;Etc/GMT0&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379460"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span>&nbsp;<span class="op" id="2379463">=</span>&nbsp;<span class="builtinfunc" id="2379465">append</span><span class="op" id="2379471">(</span><span class="ident" id="2379472"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379474">,</span>&nbsp;<span class="ident" id="2379476"><a href="/time/zoneinfo.go.html#2368988">zoneTrans</a></span><span class="op" id="2379485">{</span><span class="ident" id="2379486">when</span><span class="op" id="2379490">:</span>&nbsp;<span class="ident" id="2379492"><a href="/time/zoneinfo.go.html#2369300">alpha</a></span><span class="op" id="2379497">,</span>&nbsp;<span class="ident" id="2379499">index</span><span class="op" id="2379504">:</span>&nbsp;<span class="num" id="2379506">0</span><span class="op" id="2379507">}</span><span class="op" id="2379508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2379515">//&nbsp;Committed&nbsp;to&nbsp;succeed.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379541"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span>&nbsp;<span class="op" id="2379543">=</span>&nbsp;<span class="op" id="2379545">&amp;</span><span class="ident" id="2379546"><a href="/time/zoneinfo.go.html#2368196">Location</a></span><span class="op" id="2379554">{</span><span class="ident" id="2379555">zone</span><span class="op" id="2379559">:</span>&nbsp;<span class="ident" id="2379561"><a href="/time/zoneinfo_read.go.html#2378507">zone</a></span><span class="op" id="2379565">,</span>&nbsp;<span class="ident" id="2379567">tx</span><span class="op" id="2379569">:</span>&nbsp;<span class="ident" id="2379571"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2379577">//&nbsp;Fill&nbsp;in&nbsp;the&nbsp;cache&nbsp;with&nbsp;information&nbsp;about&nbsp;right&nbsp;now,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2379633">//&nbsp;since&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;common&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379680">sec</span><span class="op" id="2379683">,</span>&nbsp;<span class="ident" id="2379685">_</span>&nbsp;<span class="op" id="2379687">:=</span>&nbsp;<span class="ident" id="2379690"><a href="/time/time.go.html#2356341">now</a></span><span class="op" id="2379693">(</span><span class="op" id="2379694">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379697">for</span>&nbsp;<span class="ident" id="2379701">i</span>&nbsp;<span class="op" id="2379703">:=</span>&nbsp;<span class="keyword" id="2379706">range</span>&nbsp;<span class="ident" id="2379712"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span>&nbsp;<span class="op" id="2379715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379719">if</span>&nbsp;<span class="ident" id="2379722"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379724">[</span><span class="ident" id="2379725"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379726">]</span><span class="op" id="2379727">.</span><span class="ident" id="2379728">when</span>&nbsp;<span class="op" id="2379733">&lt;=</span>&nbsp;<span class="ident" id="2379736"><a href="/time/zoneinfo_read.go.html#2379680">sec</a></span>&nbsp;<span class="op" id="2379740">&amp;&amp;</span>&nbsp;<span class="op" id="2379743">(</span><span class="ident" id="2379744"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379745">+</span><span class="num" id="2379746">1</span>&nbsp;<span class="op" id="2379748">==</span>&nbsp;<span class="builtinfunc" id="2379751">len</span><span class="op" id="2379754">(</span><span class="ident" id="2379755"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379757">)</span>&nbsp;<span class="op" id="2379759">||</span>&nbsp;<span class="ident" id="2379762"><a href="/time/zoneinfo_read.go.html#2379680">sec</a></span>&nbsp;<span class="op" id="2379766">&lt;</span>&nbsp;<span class="ident" id="2379768"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379770">[</span><span class="ident" id="2379771"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379772">+</span><span class="num" id="2379773">1</span><span class="op" id="2379774">]</span><span class="op" id="2379775">.</span><span class="ident" id="2379776">when</span><span class="op" id="2379780">)</span>&nbsp;<span class="op" id="2379782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379787"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379788">.</span><span class="ident" id="2379789">cacheStart</span>&nbsp;<span class="op" id="2379800">=</span>&nbsp;<span class="ident" id="2379802"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379804">[</span><span class="ident" id="2379805"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379806">]</span><span class="op" id="2379807">.</span><span class="ident" id="2379808">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379816"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379817">.</span><span class="ident" id="2379818">cacheEnd</span>&nbsp;<span class="op" id="2379827">=</span>&nbsp;<span class="ident" id="2379829"><a href="/time/zoneinfo.go.html#2369336">omega</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379838">if</span>&nbsp;<span class="ident" id="2379841"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379842">+</span><span class="num" id="2379843">1</span>&nbsp;<span class="op" id="2379845">&lt;</span>&nbsp;<span class="builtinfunc" id="2379847">len</span><span class="op" id="2379850">(</span><span class="ident" id="2379851"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379853">)</span>&nbsp;<span class="op" id="2379855">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379861"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379862">.</span><span class="ident" id="2379863">cacheEnd</span>&nbsp;<span class="op" id="2379872">=</span>&nbsp;<span class="ident" id="2379874"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379876">[</span><span class="ident" id="2379877"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379878">+</span><span class="num" id="2379879">1</span><span class="op" id="2379880">]</span><span class="op" id="2379881">.</span><span class="ident" id="2379882">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2379895"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379896">.</span><span class="ident" id="2379897">cacheZone</span>&nbsp;<span class="op" id="2379907">=</span>&nbsp;<span class="op" id="2379909">&amp;</span><span class="ident" id="2379910"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379911">.</span><span class="ident" id="2379912">zone</span><span class="op" id="2379916">[</span><span class="ident" id="2379917"><a href="/time/zoneinfo_read.go.html#2378954">tx</a></span><span class="op" id="2379919">[</span><span class="ident" id="2379920"><a href="/time/zoneinfo_read.go.html#2379701">i</a></span><span class="op" id="2379921">]</span><span class="op" id="2379922">.</span><span class="ident" id="2379923">index</span><span class="op" id="2379928">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2379935">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2379939">return</span>&nbsp;<span class="ident" id="2379946"><a href="/time/zoneinfo_read.go.html#2376835">l</a></span><span class="op" id="2379947">,</span>&nbsp;<span class="ident" id="2379949">nil</span><br>
<span class="lineno"></span><span class="op" id="2379953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2379956">func</span>&nbsp;<span class="ident" id="2379961">loadZoneFile</span><span class="op" id="2379973">(</span><span class="ident" id="2379974">dir</span><span class="op" id="2379977">,</span>&nbsp;<span class="ident" id="2379979">name</span>&nbsp;<span class="builtintype" id="2379984">string</span><span class="op" id="2379990">)</span>&nbsp;<span class="op" id="2379992">(</span><span class="ident" id="2379993">l</span>&nbsp;<span class="op" id="2379995">*</span><span class="ident" id="2379996"><a href="/time/zoneinfo.go.html#2368196">Location</a></span><span class="op" id="2380004">,</span>&nbsp;<span class="ident" id="2380006">err</span>&nbsp;<span class="builtintype" id="2380010">error</span><span class="op" id="2380015">)</span>&nbsp;<span class="op" id="2380017">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380020">if</span>&nbsp;<span class="builtinfunc" id="2380023">len</span><span class="op" id="2380026">(</span><span class="ident" id="2380027"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span><span class="op" id="2380030">)</span>&nbsp;<span class="op" id="2380032">&gt;</span>&nbsp;<span class="num" id="2380034">4</span>&nbsp;<span class="op" id="2380036">&amp;&amp;</span>&nbsp;<span class="ident" id="2380039"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span><span class="op" id="2380042">[</span><span class="builtinfunc" id="2380043">len</span><span class="op" id="2380046">(</span><span class="ident" id="2380047"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span><span class="op" id="2380050">)</span><span class="op" id="2380051">-</span><span class="num" id="2380052">4</span><span class="op" id="2380053">:</span><span class="op" id="2380054">]</span>&nbsp;<span class="op" id="2380056">==</span>&nbsp;<span class="string" id="2380059">&#34;.zip&#34;</span>&nbsp;<span class="op" id="2380066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380070">return</span>&nbsp;<span class="ident" id="2380077"><a href="/time/zoneinfo_read.go.html#2381021">loadZoneZip</a></span><span class="op" id="2380088">(</span><span class="ident" id="2380089"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span><span class="op" id="2380092">,</span>&nbsp;<span class="ident" id="2380094"><a href="/time/zoneinfo_read.go.html#2379979">name</a></span><span class="op" id="2380098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2380101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380104">if</span>&nbsp;<span class="ident" id="2380107"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span>&nbsp;<span class="op" id="2380111">!=</span>&nbsp;<span class="string" id="2380114">&#34;&#34;</span>&nbsp;<span class="op" id="2380117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2380121"><a href="/time/zoneinfo_read.go.html#2379979">name</a></span>&nbsp;<span class="op" id="2380126">=</span>&nbsp;<span class="ident" id="2380128"><a href="/time/zoneinfo_read.go.html#2379974">dir</a></span>&nbsp;<span class="op" id="2380132">+</span>&nbsp;<span class="string" id="2380134">&#34;/&#34;</span>&nbsp;<span class="op" id="2380138">+</span>&nbsp;<span class="ident" id="2380140"><a href="/time/zoneinfo_read.go.html#2379979">name</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2380146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2380149">buf</span><span class="op" id="2380152">,</span>&nbsp;<span class="ident" id="2380154"><a href="/time/zoneinfo_read.go.html#2380006">err</a></span>&nbsp;<span class="op" id="2380158">:=</span>&nbsp;<span class="ident" id="2380161"><a href="/time/sys_unix.go.html#2331002">readFile</a></span><span class="op" id="2380169">(</span><span class="ident" id="2380170"><a href="/time/zoneinfo_read.go.html#2379979">name</a></span><span class="op" id="2380174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380177">if</span>&nbsp;<span class="ident" id="2380180"><a href="/time/zoneinfo_read.go.html#2380006">err</a></span>&nbsp;<span class="op" id="2380184">!=</span>&nbsp;<span class="ident" id="2380187">nil</span>&nbsp;<span class="op" id="2380191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380195">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2380203">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380206">return</span>&nbsp;<span class="ident" id="2380213"><a href="/time/zoneinfo_read.go.html#2376807">loadZoneData</a></span><span class="op" id="2380225">(</span><span class="ident" id="2380226"><a href="/time/zoneinfo_read.go.html#2380149">buf</a></span><span class="op" id="2380229">)</span><br>
<span class="lineno"></span><span class="op" id="2380231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2380234">//&nbsp;There&nbsp;are&nbsp;500+&nbsp;zoneinfo&nbsp;files.&nbsp;&nbsp;Rather&nbsp;than&nbsp;distribute&nbsp;them&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2380301">//&nbsp;individually,&nbsp;we&nbsp;ship&nbsp;them&nbsp;in&nbsp;an&nbsp;uncompressed&nbsp;zip&nbsp;file.</span><br>
<span class="lineno">215</span><span class="comment" id="2380360">//&nbsp;Used&nbsp;this&nbsp;way,&nbsp;the&nbsp;zip&nbsp;file&nbsp;format&nbsp;serves&nbsp;as&nbsp;a&nbsp;commonly&nbsp;readable</span><br>
<span class="lineno"></span><span class="comment" id="2380428">//&nbsp;container&nbsp;for&nbsp;the&nbsp;individual&nbsp;small&nbsp;files.&nbsp;&nbsp;We&nbsp;choose&nbsp;zip&nbsp;over&nbsp;tar</span><br>
<span class="lineno"></span><span class="comment" id="2380497">//&nbsp;because&nbsp;zip&nbsp;files&nbsp;have&nbsp;a&nbsp;contiguous&nbsp;table&nbsp;of&nbsp;contents,&nbsp;making</span><br>
<span class="lineno"></span><span class="comment" id="2380562">//&nbsp;individual&nbsp;file&nbsp;lookups&nbsp;faster,&nbsp;and&nbsp;because&nbsp;the&nbsp;per-file&nbsp;overhead</span><br>
<span class="lineno"></span><span class="comment" id="2380631">//&nbsp;in&nbsp;a&nbsp;zip&nbsp;file&nbsp;is&nbsp;considerably&nbsp;less&nbsp;than&nbsp;tar&#39;s&nbsp;512&nbsp;bytes.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2380692">//&nbsp;get4&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;32-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2380745">func</span>&nbsp;<span class="ident" id="2380750">get4</span><span class="op" id="2380754">(</span><span class="ident" id="2380755">b</span>&nbsp;<span class="op" id="2380757">[</span><span class="op" id="2380758">]</span><span class="builtintype" id="2380759">byte</span><span class="op" id="2380763">)</span>&nbsp;<span class="builtintype" id="2380765">int</span>&nbsp;<span class="op" id="2380769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380772">if</span>&nbsp;<span class="builtinfunc" id="2380775">len</span><span class="op" id="2380778">(</span><span class="ident" id="2380779"><a href="/time/zoneinfo_read.go.html#2380755">b</a></span><span class="op" id="2380780">)</span>&nbsp;<span class="op" id="2380782">&lt;</span>&nbsp;<span class="num" id="2380784">4</span>&nbsp;<span class="op" id="2380786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380790">return</span>&nbsp;<span class="num" id="2380797">0</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2380800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380803">return</span>&nbsp;<span class="builtintype" id="2380810">int</span><span class="op" id="2380813">(</span><span class="ident" id="2380814"><a href="/time/zoneinfo_read.go.html#2380755">b</a></span><span class="op" id="2380815">[</span><span class="num" id="2380816">0</span><span class="op" id="2380817">]</span><span class="op" id="2380818">)</span>&nbsp;<span class="op" id="2380820">|</span>&nbsp;<span class="builtintype" id="2380822">int</span><span class="op" id="2380825">(</span><span class="ident" id="2380826"><a href="/time/zoneinfo_read.go.html#2380755">b</a></span><span class="op" id="2380827">[</span><span class="num" id="2380828">1</span><span class="op" id="2380829">]</span><span class="op" id="2380830">)</span><span class="op" id="2380831">&lt;&lt;</span><span class="num" id="2380833">8</span>&nbsp;<span class="op" id="2380835">|</span>&nbsp;<span class="builtintype" id="2380837">int</span><span class="op" id="2380840">(</span><span class="ident" id="2380841"><a href="/time/zoneinfo_read.go.html#2380755">b</a></span><span class="op" id="2380842">[</span><span class="num" id="2380843">2</span><span class="op" id="2380844">]</span><span class="op" id="2380845">)</span><span class="op" id="2380846">&lt;&lt;</span><span class="num" id="2380848">16</span>&nbsp;<span class="op" id="2380851">|</span>&nbsp;<span class="builtintype" id="2380853">int</span><span class="op" id="2380856">(</span><span class="ident" id="2380857"><a href="/time/zoneinfo_read.go.html#2380755">b</a></span><span class="op" id="2380858">[</span><span class="num" id="2380859">3</span><span class="op" id="2380860">]</span><span class="op" id="2380861">)</span><span class="op" id="2380862">&lt;&lt;</span><span class="num" id="2380864">24</span><br>
<span class="lineno"></span><span class="op" id="2380867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2380870">//&nbsp;get2&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;16-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno">230</span><span class="keyword" id="2380923">func</span>&nbsp;<span class="ident" id="2380928">get2</span><span class="op" id="2380932">(</span><span class="ident" id="2380933">b</span>&nbsp;<span class="op" id="2380935">[</span><span class="op" id="2380936">]</span><span class="builtintype" id="2380937">byte</span><span class="op" id="2380941">)</span>&nbsp;<span class="builtintype" id="2380943">int</span>&nbsp;<span class="op" id="2380947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380950">if</span>&nbsp;<span class="builtinfunc" id="2380953">len</span><span class="op" id="2380956">(</span><span class="ident" id="2380957"><a href="/time/zoneinfo_read.go.html#2380933">b</a></span><span class="op" id="2380958">)</span>&nbsp;<span class="op" id="2380960">&lt;</span>&nbsp;<span class="num" id="2380962">2</span>&nbsp;<span class="op" id="2380964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380968">return</span>&nbsp;<span class="num" id="2380975">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2380978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2380981">return</span>&nbsp;<span class="builtintype" id="2380988">int</span><span class="op" id="2380991">(</span><span class="ident" id="2380992"><a href="/time/zoneinfo_read.go.html#2380933">b</a></span><span class="op" id="2380993">[</span><span class="num" id="2380994">0</span><span class="op" id="2380995">]</span><span class="op" id="2380996">)</span>&nbsp;<span class="op" id="2380998">|</span>&nbsp;<span class="builtintype" id="2381000">int</span><span class="op" id="2381003">(</span><span class="ident" id="2381004"><a href="/time/zoneinfo_read.go.html#2380933">b</a></span><span class="op" id="2381005">[</span><span class="num" id="2381006">1</span><span class="op" id="2381007">]</span><span class="op" id="2381008">)</span><span class="op" id="2381009">&lt;&lt;</span><span class="num" id="2381011">8</span><br>
<span class="lineno">235</span><span class="op" id="2381013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2381016">func</span>&nbsp;<span class="ident" id="2381021">loadZoneZip</span><span class="op" id="2381032">(</span><span class="ident" id="2381033">zipfile</span><span class="op" id="2381040">,</span>&nbsp;<span class="ident" id="2381042">name</span>&nbsp;<span class="builtintype" id="2381047">string</span><span class="op" id="2381053">)</span>&nbsp;<span class="op" id="2381055">(</span><span class="ident" id="2381056">l</span>&nbsp;<span class="op" id="2381058">*</span><span class="ident" id="2381059"><a href="/time/zoneinfo.go.html#2368196">Location</a></span><span class="op" id="2381067">,</span>&nbsp;<span class="ident" id="2381069">err</span>&nbsp;<span class="builtintype" id="2381073">error</span><span class="op" id="2381078">)</span>&nbsp;<span class="op" id="2381080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381083">fd</span><span class="op" id="2381085">,</span>&nbsp;<span class="ident" id="2381087"><a href="/time/zoneinfo_read.go.html#2381069">err</a></span>&nbsp;<span class="op" id="2381091">:=</span>&nbsp;<span class="ident" id="2381094"><a href="/time/sys_unix.go.html#2331366">open</a></span><span class="op" id="2381098">(</span><span class="ident" id="2381099"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2381106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381109">if</span>&nbsp;<span class="ident" id="2381112"><a href="/time/zoneinfo_read.go.html#2381069">err</a></span>&nbsp;<span class="op" id="2381116">!=</span>&nbsp;<span class="ident" id="2381119">nil</span>&nbsp;<span class="op" id="2381123">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381127">return</span>&nbsp;<span class="ident" id="2381134">nil</span><span class="op" id="2381137">,</span>&nbsp;<span class="ident" id="2381139"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2381145">.</span><span class="ident" id="2381146">New</span><span class="op" id="2381149">(</span><span class="string" id="2381150">&#34;open&nbsp;&#34;</span>&nbsp;<span class="op" id="2381158">+</span>&nbsp;<span class="ident" id="2381160"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span>&nbsp;<span class="op" id="2381168">+</span>&nbsp;<span class="string" id="2381170">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2381175">+</span>&nbsp;<span class="ident" id="2381177"><a href="/time/zoneinfo_read.go.html#2381069">err</a></span><span class="op" id="2381180">.</span><span class="ident" id="2381181">Error</span><span class="op" id="2381186">(</span><span class="op" id="2381187">)</span><span class="op" id="2381188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2381191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381194">defer</span>&nbsp;<span class="ident" id="2381200"><a href="/time/sys_unix.go.html#2331524">closefd</a></span><span class="op" id="2381207">(</span><span class="ident" id="2381208"><a href="/time/zoneinfo_read.go.html#2381083">fd</a></span><span class="op" id="2381210">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381214">const</span>&nbsp;<span class="op" id="2381220">(</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381224">zecheader</span>&nbsp;<span class="op" id="2381234">=</span>&nbsp;<span class="num" id="2381236">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381249">zcheader</span>&nbsp;&nbsp;<span class="op" id="2381259">=</span>&nbsp;<span class="num" id="2381261">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381274">ztailsize</span>&nbsp;<span class="op" id="2381284">=</span>&nbsp;<span class="num" id="2381286">22</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381292">zheadersize</span>&nbsp;<span class="op" id="2381304">=</span>&nbsp;<span class="num" id="2381306">30</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381311">zheader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2381323">=</span>&nbsp;<span class="num" id="2381325">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2381337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381341">buf</span>&nbsp;<span class="op" id="2381345">:=</span>&nbsp;<span class="builtinfunc" id="2381348">make</span><span class="op" id="2381352">(</span><span class="op" id="2381353">[</span><span class="op" id="2381354">]</span><span class="builtintype" id="2381355">byte</span><span class="op" id="2381359">,</span>&nbsp;<span class="ident" id="2381361"><a href="/time/zoneinfo_read.go.html#2381274">ztailsize</a></span><span class="op" id="2381370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381373">if</span>&nbsp;<span class="ident" id="2381376">err</span>&nbsp;<span class="op" id="2381380">:=</span>&nbsp;<span class="ident" id="2381383"><a href="/time/sys_unix.go.html#2331578">preadn</a></span><span class="op" id="2381389">(</span><span class="ident" id="2381390"><a href="/time/zoneinfo_read.go.html#2381083">fd</a></span><span class="op" id="2381392">,</span>&nbsp;<span class="ident" id="2381394"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381397">,</span>&nbsp;<span class="op" id="2381399">-</span><span class="ident" id="2381400"><a href="/time/zoneinfo_read.go.html#2381274">ztailsize</a></span><span class="op" id="2381409">)</span><span class="op" id="2381410">;</span>&nbsp;<span class="ident" id="2381412"><a href="/time/zoneinfo_read.go.html#2381376">err</a></span>&nbsp;<span class="op" id="2381416">!=</span>&nbsp;<span class="ident" id="2381419">nil</span>&nbsp;<span class="op" id="2381423">||</span>&nbsp;<span class="ident" id="2381426"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2381430">(</span><span class="ident" id="2381431"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381434">)</span>&nbsp;<span class="op" id="2381436">!=</span>&nbsp;<span class="ident" id="2381439"><a href="/time/zoneinfo_read.go.html#2381224">zecheader</a></span>&nbsp;<span class="op" id="2381449">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381453">return</span>&nbsp;<span class="ident" id="2381460">nil</span><span class="op" id="2381463">,</span>&nbsp;<span class="ident" id="2381465"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2381471">.</span><span class="ident" id="2381472">New</span><span class="op" id="2381475">(</span><span class="string" id="2381476">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2381496">+</span>&nbsp;<span class="ident" id="2381498"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2381505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2381508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381511">n</span>&nbsp;<span class="op" id="2381513">:=</span>&nbsp;<span class="ident" id="2381516"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2381520">(</span><span class="ident" id="2381521"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381524">[</span><span class="num" id="2381525">10</span><span class="op" id="2381527">:</span><span class="op" id="2381528">]</span><span class="op" id="2381529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381532">size</span>&nbsp;<span class="op" id="2381537">:=</span>&nbsp;<span class="ident" id="2381540"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2381544">(</span><span class="ident" id="2381545"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381548">[</span><span class="num" id="2381549">12</span><span class="op" id="2381551">:</span><span class="op" id="2381552">]</span><span class="op" id="2381553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381556">off</span>&nbsp;<span class="op" id="2381560">:=</span>&nbsp;<span class="ident" id="2381563"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2381567">(</span><span class="ident" id="2381568"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381571">[</span><span class="num" id="2381572">16</span><span class="op" id="2381574">:</span><span class="op" id="2381575">]</span><span class="op" id="2381576">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2381580"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span>&nbsp;<span class="op" id="2381584">=</span>&nbsp;<span class="builtinfunc" id="2381586">make</span><span class="op" id="2381590">(</span><span class="op" id="2381591">[</span><span class="op" id="2381592">]</span><span class="builtintype" id="2381593">byte</span><span class="op" id="2381597">,</span>&nbsp;<span class="ident" id="2381599"><a href="/time/zoneinfo_read.go.html#2381532">size</a></span><span class="op" id="2381603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381606">if</span>&nbsp;<span class="ident" id="2381609">err</span>&nbsp;<span class="op" id="2381613">:=</span>&nbsp;<span class="ident" id="2381616"><a href="/time/sys_unix.go.html#2331578">preadn</a></span><span class="op" id="2381622">(</span><span class="ident" id="2381623"><a href="/time/zoneinfo_read.go.html#2381083">fd</a></span><span class="op" id="2381625">,</span>&nbsp;<span class="ident" id="2381627"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2381630">,</span>&nbsp;<span class="ident" id="2381632"><a href="/time/zoneinfo_read.go.html#2381556">off</a></span><span class="op" id="2381635">)</span><span class="op" id="2381636">;</span>&nbsp;<span class="ident" id="2381638"><a href="/time/zoneinfo_read.go.html#2381609">err</a></span>&nbsp;<span class="op" id="2381642">!=</span>&nbsp;<span class="ident" id="2381645">nil</span>&nbsp;<span class="op" id="2381649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381653">return</span>&nbsp;<span class="ident" id="2381660">nil</span><span class="op" id="2381663">,</span>&nbsp;<span class="ident" id="2381665"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2381671">.</span><span class="ident" id="2381672">New</span><span class="op" id="2381675">(</span><span class="string" id="2381676">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2381696">+</span>&nbsp;<span class="ident" id="2381698"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2381705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2381708">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2381712">for</span>&nbsp;<span class="ident" id="2381716">i</span>&nbsp;<span class="op" id="2381718">:=</span>&nbsp;<span class="num" id="2381721">0</span><span class="op" id="2381722">;</span>&nbsp;<span class="ident" id="2381724"><a href="/time/zoneinfo_read.go.html#2381716">i</a></span>&nbsp;<span class="op" id="2381726">&lt;</span>&nbsp;<span class="ident" id="2381728"><a href="/time/zoneinfo_read.go.html#2381511">n</a></span><span class="op" id="2381729">;</span>&nbsp;<span class="ident" id="2381731"><a href="/time/zoneinfo_read.go.html#2381716">i</a></span><span class="op" id="2381732">++</span>&nbsp;<span class="op" id="2381735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381739">//&nbsp;zip&nbsp;entry&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381762">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381778">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspmadevers[1]</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381797">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspmadeos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381814">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381832">//&nbsp;&nbsp;&nbsp;&nbsp7&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381848">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381864">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381880">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381899">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381918">//&nbsp;&nbsp;&nbsp;&nbsp16&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381933">//&nbsp;&nbsp;&nbsp;&nbsp20&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381950">//&nbsp;&nbsp;&nbsp;&nbsp24&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381969">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2381988">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382004">//&nbsp;&nbsp;&nbsp;&nbsp32&nbsp;&nbsp;&nbsp;&nbspfclen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382021">//&nbsp;&nbsp;&nbsp;&nbsp34&nbsp;&nbsp;&nbsp;&nbspdisknum[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382040">//&nbsp;&nbsp;&nbsp;&nbsp36&nbsp;&nbsp;&nbsp;&nbspiattr[2]</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382057">//&nbsp;&nbsp;&nbsp;&nbsp38&nbsp;&nbsp;&nbsp;&nbspeattr[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382074">//&nbsp;&nbsp;&nbsp;&nbsp42&nbsp;&nbsp;&nbsp;&nbspoff[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382089">//&nbsp;&nbsp;&nbsp;&nbsp46&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382111">//&nbsp;&nbsp;&nbsp;&nbsp46+namelen+xlen+fclen&nbsp;-&nbsp;next&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382152">//</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382157">if</span>&nbsp;<span class="ident" id="2382160"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2382164">(</span><span class="ident" id="2382165"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382168">)</span>&nbsp;<span class="op" id="2382170">!=</span>&nbsp;<span class="ident" id="2382173"><a href="/time/zoneinfo_read.go.html#2381249">zcheader</a></span>&nbsp;<span class="op" id="2382182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382187">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2382195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382199">meth</span>&nbsp;<span class="op" id="2382204">:=</span>&nbsp;<span class="ident" id="2382207"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2382211">(</span><span class="ident" id="2382212"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382215">[</span><span class="num" id="2382216">10</span><span class="op" id="2382218">:</span><span class="op" id="2382219">]</span><span class="op" id="2382220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382224">size</span>&nbsp;<span class="op" id="2382229">:=</span>&nbsp;<span class="ident" id="2382232"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2382236">(</span><span class="ident" id="2382237"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382240">[</span><span class="num" id="2382241">24</span><span class="op" id="2382243">:</span><span class="op" id="2382244">]</span><span class="op" id="2382245">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382249">namelen</span>&nbsp;<span class="op" id="2382257">:=</span>&nbsp;<span class="ident" id="2382260"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2382264">(</span><span class="ident" id="2382265"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382268">[</span><span class="num" id="2382269">28</span><span class="op" id="2382271">:</span><span class="op" id="2382272">]</span><span class="op" id="2382273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382277">xlen</span>&nbsp;<span class="op" id="2382282">:=</span>&nbsp;<span class="ident" id="2382285"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2382289">(</span><span class="ident" id="2382290"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382293">[</span><span class="num" id="2382294">30</span><span class="op" id="2382296">:</span><span class="op" id="2382297">]</span><span class="op" id="2382298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382302">fclen</span>&nbsp;<span class="op" id="2382308">:=</span>&nbsp;<span class="ident" id="2382311"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2382315">(</span><span class="ident" id="2382316"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382319">[</span><span class="num" id="2382320">32</span><span class="op" id="2382322">:</span><span class="op" id="2382323">]</span><span class="op" id="2382324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382328">off</span>&nbsp;<span class="op" id="2382332">:=</span>&nbsp;<span class="ident" id="2382335"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2382339">(</span><span class="ident" id="2382340"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382343">[</span><span class="num" id="2382344">42</span><span class="op" id="2382346">:</span><span class="op" id="2382347">]</span><span class="op" id="2382348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382352">zname</span>&nbsp;<span class="op" id="2382358">:=</span>&nbsp;<span class="ident" id="2382361"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382364">[</span><span class="num" id="2382365">46</span>&nbsp;<span class="op" id="2382368">:</span>&nbsp;<span class="num" id="2382370">46</span><span class="op" id="2382372">+</span><span class="ident" id="2382373"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span><span class="op" id="2382380">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382384"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span>&nbsp;<span class="op" id="2382388">=</span>&nbsp;<span class="ident" id="2382390"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382393">[</span><span class="num" id="2382394">46</span><span class="op" id="2382396">+</span><span class="ident" id="2382397"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span><span class="op" id="2382404">+</span><span class="ident" id="2382405"><a href="/time/zoneinfo_read.go.html#2382277">xlen</a></span><span class="op" id="2382409">+</span><span class="ident" id="2382410"><a href="/time/zoneinfo_read.go.html#2382302">fclen</a></span><span class="op" id="2382415">:</span><span class="op" id="2382416">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382420">if</span>&nbsp;<span class="builtintype" id="2382423">string</span><span class="op" id="2382429">(</span><span class="ident" id="2382430"><a href="/time/zoneinfo_read.go.html#2382352">zname</a></span><span class="op" id="2382435">)</span>&nbsp;<span class="op" id="2382437">!=</span>&nbsp;<span class="ident" id="2382440"><a href="/time/zoneinfo_read.go.html#2381042">name</a></span>&nbsp;<span class="op" id="2382445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382450">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2382461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382465">if</span>&nbsp;<span class="ident" id="2382468"><a href="/time/zoneinfo_read.go.html#2382199">meth</a></span>&nbsp;<span class="op" id="2382473">!=</span>&nbsp;<span class="num" id="2382476">0</span>&nbsp;<span class="op" id="2382478">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382483">return</span>&nbsp;<span class="ident" id="2382490">nil</span><span class="op" id="2382493">,</span>&nbsp;<span class="ident" id="2382495"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2382501">.</span><span class="ident" id="2382502">New</span><span class="op" id="2382505">(</span><span class="string" id="2382506">&#34;unsupported&nbsp;compression&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2382537">+</span>&nbsp;<span class="ident" id="2382539"><a href="/time/zoneinfo_read.go.html#2381042">name</a></span>&nbsp;<span class="op" id="2382544">+</span>&nbsp;<span class="string" id="2382546">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2382553">+</span>&nbsp;<span class="ident" id="2382555"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2382562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2382566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382571">//&nbsp;zip&nbsp;per-file&nbsp;header&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382604">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382620">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382638">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382654">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382670">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382685">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382704">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382723">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382738">//&nbsp;&nbsp;&nbsp;&nbsp18&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382755">//&nbsp;&nbsp;&nbsp;&nbsp22&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382774">//&nbsp;&nbsp;&nbsp;&nbsp26&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382793">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382809">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382831">//&nbsp;&nbsp;&nbsp;&nbsp30+namelen+xlen&nbsp;-&nbsp;file&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2382864">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382869"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span>&nbsp;<span class="op" id="2382873">=</span>&nbsp;<span class="builtinfunc" id="2382875">make</span><span class="op" id="2382879">(</span><span class="op" id="2382880">[</span><span class="op" id="2382881">]</span><span class="builtintype" id="2382882">byte</span><span class="op" id="2382886">,</span>&nbsp;<span class="ident" id="2382888"><a href="/time/zoneinfo_read.go.html#2381292">zheadersize</a></span><span class="op" id="2382899">+</span><span class="ident" id="2382900"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span><span class="op" id="2382907">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2382911">if</span>&nbsp;<span class="ident" id="2382914">err</span>&nbsp;<span class="op" id="2382918">:=</span>&nbsp;<span class="ident" id="2382921"><a href="/time/sys_unix.go.html#2331578">preadn</a></span><span class="op" id="2382927">(</span><span class="ident" id="2382928"><a href="/time/zoneinfo_read.go.html#2381083">fd</a></span><span class="op" id="2382930">,</span>&nbsp;<span class="ident" id="2382932"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382935">,</span>&nbsp;<span class="ident" id="2382937"><a href="/time/zoneinfo_read.go.html#2382328">off</a></span><span class="op" id="2382940">)</span><span class="op" id="2382941">;</span>&nbsp;<span class="ident" id="2382943"><a href="/time/zoneinfo_read.go.html#2382914">err</a></span>&nbsp;<span class="op" id="2382947">!=</span>&nbsp;<span class="ident" id="2382950">nil</span>&nbsp;<span class="op" id="2382954">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382960"><a href="/time/zoneinfo_read.go.html#2380750">get4</a></span><span class="op" id="2382964">(</span><span class="ident" id="2382965"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382968">)</span>&nbsp;<span class="op" id="2382970">!=</span>&nbsp;<span class="ident" id="2382973"><a href="/time/zoneinfo_read.go.html#2381311">zheader</a></span>&nbsp;<span class="op" id="2382981">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2382987"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2382991">(</span><span class="ident" id="2382992"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2382995">[</span><span class="num" id="2382996">8</span><span class="op" id="2382997">:</span><span class="op" id="2382998">]</span><span class="op" id="2382999">)</span>&nbsp;<span class="op" id="2383001">!=</span>&nbsp;<span class="ident" id="2383004"><a href="/time/zoneinfo_read.go.html#2382199">meth</a></span>&nbsp;<span class="op" id="2383009">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2383015"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2383019">(</span><span class="ident" id="2383020"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2383023">[</span><span class="num" id="2383024">26</span><span class="op" id="2383026">:</span><span class="op" id="2383027">]</span><span class="op" id="2383028">)</span>&nbsp;<span class="op" id="2383030">!=</span>&nbsp;<span class="ident" id="2383033"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span>&nbsp;<span class="op" id="2383041">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2383047">string</span><span class="op" id="2383053">(</span><span class="ident" id="2383054"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2383057">[</span><span class="num" id="2383058">30</span><span class="op" id="2383060">:</span><span class="num" id="2383061">30</span><span class="op" id="2383063">+</span><span class="ident" id="2383064"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span><span class="op" id="2383071">]</span><span class="op" id="2383072">)</span>&nbsp;<span class="op" id="2383074">!=</span>&nbsp;<span class="ident" id="2383077"><a href="/time/zoneinfo_read.go.html#2381042">name</a></span>&nbsp;<span class="op" id="2383082">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2383087">return</span>&nbsp;<span class="ident" id="2383094">nil</span><span class="op" id="2383097">,</span>&nbsp;<span class="ident" id="2383099"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2383105">.</span><span class="ident" id="2383106">New</span><span class="op" id="2383109">(</span><span class="string" id="2383110">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2383130">+</span>&nbsp;<span class="ident" id="2383132"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2383139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2383143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2383147"><a href="/time/zoneinfo_read.go.html#2382277">xlen</a></span>&nbsp;<span class="op" id="2383152">=</span>&nbsp;<span class="ident" id="2383154"><a href="/time/zoneinfo_read.go.html#2380928">get2</a></span><span class="op" id="2383158">(</span><span class="ident" id="2383159"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2383162">[</span><span class="num" id="2383163">28</span><span class="op" id="2383165">:</span><span class="op" id="2383166">]</span><span class="op" id="2383167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2383172"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span>&nbsp;<span class="op" id="2383176">=</span>&nbsp;<span class="builtinfunc" id="2383178">make</span><span class="op" id="2383182">(</span><span class="op" id="2383183">[</span><span class="op" id="2383184">]</span><span class="builtintype" id="2383185">byte</span><span class="op" id="2383189">,</span>&nbsp;<span class="ident" id="2383191"><a href="/time/zoneinfo_read.go.html#2382224">size</a></span><span class="op" id="2383195">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2383199">if</span>&nbsp;<span class="ident" id="2383202">err</span>&nbsp;<span class="op" id="2383206">:=</span>&nbsp;<span class="ident" id="2383209"><a href="/time/sys_unix.go.html#2331578">preadn</a></span><span class="op" id="2383215">(</span><span class="ident" id="2383216"><a href="/time/zoneinfo_read.go.html#2381083">fd</a></span><span class="op" id="2383218">,</span>&nbsp;<span class="ident" id="2383220"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2383223">,</span>&nbsp;<span class="ident" id="2383225"><a href="/time/zoneinfo_read.go.html#2382328">off</a></span><span class="op" id="2383228">+</span><span class="num" id="2383229">30</span><span class="op" id="2383231">+</span><span class="ident" id="2383232"><a href="/time/zoneinfo_read.go.html#2382249">namelen</a></span><span class="op" id="2383239">+</span><span class="ident" id="2383240"><a href="/time/zoneinfo_read.go.html#2382277">xlen</a></span><span class="op" id="2383244">)</span><span class="op" id="2383245">;</span>&nbsp;<span class="ident" id="2383247"><a href="/time/zoneinfo_read.go.html#2383202">err</a></span>&nbsp;<span class="op" id="2383251">!=</span>&nbsp;<span class="ident" id="2383254">nil</span>&nbsp;<span class="op" id="2383258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2383263">return</span>&nbsp;<span class="ident" id="2383270">nil</span><span class="op" id="2383273">,</span>&nbsp;<span class="ident" id="2383275"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2383281">.</span><span class="ident" id="2383282">New</span><span class="op" id="2383285">(</span><span class="string" id="2383286">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2383306">+</span>&nbsp;<span class="ident" id="2383308"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2383315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2383319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2383324">return</span>&nbsp;<span class="ident" id="2383331"><a href="/time/zoneinfo_read.go.html#2376807">loadZoneData</a></span><span class="op" id="2383343">(</span><span class="ident" id="2383344"><a href="/time/zoneinfo_read.go.html#2381341">buf</a></span><span class="op" id="2383347">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2383350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2383354">return</span>&nbsp;<span class="ident" id="2383361">nil</span><span class="op" id="2383364">,</span>&nbsp;<span class="ident" id="2383366"><a href="/time/zoneinfo_read.go.html#2375974">errors</a></span><span class="op" id="2383372">.</span><span class="ident" id="2383373">New</span><span class="op" id="2383376">(</span><span class="string" id="2383377">&#34;cannot&nbsp;find&nbsp;&#34;</span>&nbsp;<span class="op" id="2383392">+</span>&nbsp;<span class="ident" id="2383394"><a href="/time/zoneinfo_read.go.html#2381042">name</a></span>&nbsp;<span class="op" id="2383399">+</span>&nbsp;<span class="string" id="2383401">&#34;&nbsp;in&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2383417">+</span>&nbsp;<span class="ident" id="2383419"><a href="/time/zoneinfo_read.go.html#2381033">zipfile</a></span><span class="op" id="2383426">)</span><br>
<span class="lineno"></span><span class="op" id="2383428">}</span>
</div>
</body>
</html>
