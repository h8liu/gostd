<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5833227">package</span>&nbsp;<span class="ident" id="5833235">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5833241">import</span>&nbsp;<span class="op" id="5833248">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5833251">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5833258">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5833281">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5833304">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="comment" id="5833307">//&nbsp;BuildSingleFile&nbsp;builds&nbsp;a&nbsp;package&nbsp;named&nbsp;&#34;main&#34;&nbsp;from&nbsp;a&nbsp;single&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5833376">func</span>&nbsp;<span class="ident" id="5833381">BuildSingleFile</span><span class="op" id="5833396">(</span><span class="ident" id="5833397">f</span>&nbsp;<span class="builtintype" id="5833399">string</span><span class="op" id="5833405">,</span>&nbsp;<span class="ident" id="5833407">rc</span>&nbsp;<span class="ident" id="5833410">io</span><span class="op" id="5833412">.</span><span class="ident" id="5833413">ReadCloser</span><span class="op" id="5833423">)</span>&nbsp;<span class="op" id="5833425">(</span><span class="op" id="5833426">[</span><span class="op" id="5833427">]</span><span class="builtintype" id="5833428">byte</span><span class="op" id="5833432">,</span>&nbsp;<span class="op" id="5833434">[</span><span class="op" id="5833435">]</span><span class="op" id="5833436">*</span><span class="ident" id="5833437">lex8</span><span class="op" id="5833441">.</span><span class="ident" id="5833442">Error</span><span class="op" id="5833447">)</span>&nbsp;<span class="op" id="5833449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833452">p</span>&nbsp;<span class="op" id="5833454">:=</span>&nbsp;<span class="ident" id="5833457">newParser</span><span class="op" id="5833466">(</span><span class="ident" id="5833467">f</span><span class="op" id="5833468">,</span>&nbsp;<span class="ident" id="5833470">rc</span><span class="op" id="5833472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833475">file</span>&nbsp;<span class="op" id="5833480">:=</span>&nbsp;<span class="ident" id="5833483">parseFile</span><span class="op" id="5833492">(</span><span class="ident" id="5833493">p</span><span class="op" id="5833494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833497">if</span>&nbsp;<span class="ident" id="5833500">es</span>&nbsp;<span class="op" id="5833503">:=</span>&nbsp;<span class="ident" id="5833506">p</span><span class="op" id="5833507">.</span><span class="ident" id="5833508">Errs</span><span class="op" id="5833512">(</span><span class="op" id="5833513">)</span><span class="op" id="5833514">;</span>&nbsp;<span class="ident" id="5833516">es</span>&nbsp;<span class="op" id="5833519">!=</span>&nbsp;<span class="ident" id="5833522">nil</span>&nbsp;<span class="op" id="5833526">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833530">return</span>&nbsp;<span class="ident" id="5833537">nil</span><span class="op" id="5833540">,</span>&nbsp;<span class="ident" id="5833542">es</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833550">pkgName</span>&nbsp;<span class="op" id="5833558">:=</span>&nbsp;<span class="string" id="5833561">&#34;main&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833569">pkg</span>&nbsp;<span class="op" id="5833573">:=</span>&nbsp;<span class="ident" id="5833576">newPkg</span><span class="op" id="5833582">(</span><span class="ident" id="5833583">pkgName</span><span class="op" id="5833590">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833593">pkg</span><span class="op" id="5833596">.</span><span class="ident" id="5833597">AddFile</span><span class="op" id="5833604">(</span><span class="ident" id="5833605">file</span><span class="op" id="5833609">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833613">b</span>&nbsp;<span class="op" id="5833615">:=</span>&nbsp;<span class="ident" id="5833618">newBuilder</span><span class="op" id="5833628">(</span><span class="op" id="5833629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833632">main</span>&nbsp;<span class="op" id="5833637">:=</span>&nbsp;<span class="ident" id="5833640">buildLib</span><span class="op" id="5833648">(</span><span class="ident" id="5833649">b</span><span class="op" id="5833650">,</span>&nbsp;<span class="ident" id="5833652">pkg</span><span class="op" id="5833655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833658">if</span>&nbsp;<span class="ident" id="5833661">es</span>&nbsp;<span class="op" id="5833664">:=</span>&nbsp;<span class="ident" id="5833667">b</span><span class="op" id="5833668">.</span><span class="ident" id="5833669">Errs</span><span class="op" id="5833673">(</span><span class="op" id="5833674">)</span><span class="op" id="5833675">;</span>&nbsp;<span class="ident" id="5833677">es</span>&nbsp;<span class="op" id="5833680">!=</span>&nbsp;<span class="ident" id="5833683">nil</span>&nbsp;<span class="op" id="5833687">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833691">return</span>&nbsp;<span class="ident" id="5833698">nil</span><span class="op" id="5833701">,</span>&nbsp;<span class="ident" id="5833703">es</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833711">ret</span><span class="op" id="5833714">,</span>&nbsp;<span class="ident" id="5833716">e</span>&nbsp;<span class="op" id="5833718">:=</span>&nbsp;<span class="ident" id="5833721">link8</span><span class="op" id="5833726">.</span><span class="ident" id="5833727">LinkMain</span><span class="op" id="5833735">(</span><span class="ident" id="5833736">main</span><span class="op" id="5833740">.</span><span class="ident" id="5833741">Package</span><span class="op" id="5833748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833751">if</span>&nbsp;<span class="ident" id="5833754">e</span>&nbsp;<span class="op" id="5833756">!=</span>&nbsp;<span class="ident" id="5833759">nil</span>&nbsp;<span class="op" id="5833763">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833767">return</span>&nbsp;<span class="ident" id="5833774">nil</span><span class="op" id="5833777">,</span>&nbsp;<span class="ident" id="5833779">lex8</span><span class="op" id="5833783">.</span><span class="ident" id="5833784">SingleErr</span><span class="op" id="5833793">(</span><span class="ident" id="5833794">e</span><span class="op" id="5833795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833802">return</span>&nbsp;<span class="ident" id="5833809">ret</span><span class="op" id="5833812">,</span>&nbsp;<span class="ident" id="5833814">nil</span><br>
<span class="lineno"></span><span class="op" id="5833818">}</span>
</div>
</body>
</html>
