<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html" class="current">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1708226">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1708281">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1708335">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1708386">package</span>&nbsp;<span class="ident" id="1708394">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1708403">import</span>&nbsp;<span class="string" id="1708410">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708420">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1708504">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1708587">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1708614">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708689">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1708747">type</span>&nbsp;<span class="ident" id="1708752">Func</span>&nbsp;<span class="keyword" id="1708757">struct</span>&nbsp;<span class="op" id="1708764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1708767">opaque</span>&nbsp;<span class="keyword" id="1708774">struct</span><span class="op" id="1708780">{</span><span class="op" id="1708781">}</span>&nbsp;<span class="comment" id="1708783">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1708827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1708830">func</span>&nbsp;<span class="op" id="1708835">(</span><span class="ident" id="1708836">f</span>&nbsp;<span class="op" id="1708838">*</span><span class="ident" id="1708839">Func</span><span class="op" id="1708843">)</span>&nbsp;<span class="ident" id="1708845">raw</span><span class="op" id="1708848">(</span><span class="op" id="1708849">)</span>&nbsp;<span class="op" id="1708851">*</span><span class="ident" id="1708852">_func</span>&nbsp;<span class="op" id="1708858">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1708861">return</span>&nbsp;<span class="op" id="1708868">(</span><span class="op" id="1708869">*</span><span class="ident" id="1708870">_func</span><span class="op" id="1708875">)</span><span class="op" id="1708876">(</span><span class="ident" id="1708877">unsafe</span><span class="op" id="1708883">.</span><span class="ident" id="1708884">Pointer</span><span class="op" id="1708891">(</span><span class="ident" id="1708892">f</span><span class="op" id="1708893">)</span><span class="op" id="1708894">)</span><br>
<span class="lineno"></span><span class="op" id="1708896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708899">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1708913">const</span>&nbsp;<span class="op" id="1708919">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1708922">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1708950">=</span>&nbsp;<span class="num" id="1708952">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1708955">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1708983">=</span>&nbsp;<span class="num" id="1708985">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1708988">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1709016">=</span>&nbsp;<span class="num" id="1709018">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709021">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1709049">=</span>&nbsp;<span class="num" id="1709051">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709054">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1709082">=</span>&nbsp;<span class="num" id="1709084">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709087">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1709115">=</span>&nbsp;<span class="op" id="1709117">-</span><span class="num" id="1709118">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1709129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1709132">var</span>&nbsp;<span class="op" id="1709136">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709139">pclntable</span>&nbsp;<span class="op" id="1709149">[</span><span class="op" id="1709150">]</span><span class="builtintype" id="1709151">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709157">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1709167">[</span><span class="op" id="1709168">]</span><span class="ident" id="1709169">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709178">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1709188">[</span><span class="op" id="1709189">]</span><span class="builtintype" id="1709190">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709199">pclntab</span><span class="op" id="1709206">,</span>&nbsp;<span class="ident" id="1709208">epclntab</span>&nbsp;<span class="keyword" id="1709217">struct</span><span class="op" id="1709223">{</span><span class="op" id="1709224">}</span>&nbsp;<span class="comment" id="1709226">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1709244">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1709247">type</span>&nbsp;<span class="ident" id="1709252">functab</span>&nbsp;<span class="keyword" id="1709260">struct</span>&nbsp;<span class="op" id="1709267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709270">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1709278">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709287">funcoff</span>&nbsp;<span class="builtintype" id="1709295">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1709303">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1709306">func</span>&nbsp;<span class="ident" id="1709311">symtabinit</span><span class="op" id="1709321">(</span><span class="op" id="1709322">)</span>&nbsp;<span class="op" id="1709324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1709327">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1709383">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1709433">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709483">pcln</span>&nbsp;<span class="op" id="1709488">:=</span>&nbsp;<span class="op" id="1709491">(</span><span class="op" id="1709492">*</span><span class="op" id="1709493">[</span><span class="num" id="1709494">8</span><span class="op" id="1709495">]</span><span class="builtintype" id="1709496">byte</span><span class="op" id="1709500">)</span><span class="op" id="1709501">(</span><span class="ident" id="1709502">unsafe</span><span class="op" id="1709508">.</span><span class="ident" id="1709509">Pointer</span><span class="op" id="1709516">(</span><span class="op" id="1709517">&amp;</span><span class="ident" id="1709518">pclntab</span><span class="op" id="1709525">)</span><span class="op" id="1709526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709529">pcln32</span>&nbsp;<span class="op" id="1709536">:=</span>&nbsp;<span class="op" id="1709539">(</span><span class="op" id="1709540">*</span><span class="op" id="1709541">[</span><span class="num" id="1709542">2</span><span class="op" id="1709543">]</span><span class="builtintype" id="1709544">uint32</span><span class="op" id="1709550">)</span><span class="op" id="1709551">(</span><span class="ident" id="1709552">unsafe</span><span class="op" id="1709558">.</span><span class="ident" id="1709559">Pointer</span><span class="op" id="1709566">(</span><span class="op" id="1709567">&amp;</span><span class="ident" id="1709568">pclntab</span><span class="op" id="1709575">)</span><span class="op" id="1709576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1709579">if</span>&nbsp;<span class="ident" id="1709582">pcln32</span><span class="op" id="1709588">[</span><span class="num" id="1709589">0</span><span class="op" id="1709590">]</span>&nbsp;<span class="op" id="1709592">!=</span>&nbsp;<span class="num" id="1709595">0xfffffffb</span>&nbsp;<span class="op" id="1709606">||</span>&nbsp;<span class="ident" id="1709609">pcln</span><span class="op" id="1709613">[</span><span class="num" id="1709614">4</span><span class="op" id="1709615">]</span>&nbsp;<span class="op" id="1709617">!=</span>&nbsp;<span class="num" id="1709620">0</span>&nbsp;<span class="op" id="1709622">||</span>&nbsp;<span class="ident" id="1709625">pcln</span><span class="op" id="1709629">[</span><span class="num" id="1709630">5</span><span class="op" id="1709631">]</span>&nbsp;<span class="op" id="1709633">!=</span>&nbsp;<span class="num" id="1709636">0</span>&nbsp;<span class="op" id="1709638">||</span>&nbsp;<span class="ident" id="1709641">pcln</span><span class="op" id="1709645">[</span><span class="num" id="1709646">6</span><span class="op" id="1709647">]</span>&nbsp;<span class="op" id="1709649">!=</span>&nbsp;<span class="ident" id="1709652">_PCQuantum</span>&nbsp;<span class="op" id="1709663">||</span>&nbsp;<span class="ident" id="1709666">pcln</span><span class="op" id="1709670">[</span><span class="num" id="1709671">7</span><span class="op" id="1709672">]</span>&nbsp;<span class="op" id="1709674">!=</span>&nbsp;<span class="ident" id="1709677">ptrSize</span>&nbsp;<span class="op" id="1709685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1709689">println</span><span class="op" id="1709696">(</span><span class="string" id="1709697">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1709737">,</span>&nbsp;<span class="ident" id="1709739">hex</span><span class="op" id="1709742">(</span><span class="ident" id="1709743">pcln32</span><span class="op" id="1709749">[</span><span class="num" id="1709750">0</span><span class="op" id="1709751">]</span><span class="op" id="1709752">)</span><span class="op" id="1709753">,</span>&nbsp;<span class="ident" id="1709755">hex</span><span class="op" id="1709758">(</span><span class="ident" id="1709759">pcln</span><span class="op" id="1709763">[</span><span class="num" id="1709764">4</span><span class="op" id="1709765">]</span><span class="op" id="1709766">)</span><span class="op" id="1709767">,</span>&nbsp;<span class="ident" id="1709769">hex</span><span class="op" id="1709772">(</span><span class="ident" id="1709773">pcln</span><span class="op" id="1709777">[</span><span class="num" id="1709778">5</span><span class="op" id="1709779">]</span><span class="op" id="1709780">)</span><span class="op" id="1709781">,</span>&nbsp;<span class="ident" id="1709783">hex</span><span class="op" id="1709786">(</span><span class="ident" id="1709787">pcln</span><span class="op" id="1709791">[</span><span class="num" id="1709792">6</span><span class="op" id="1709793">]</span><span class="op" id="1709794">)</span><span class="op" id="1709795">,</span>&nbsp;<span class="ident" id="1709797">hex</span><span class="op" id="1709800">(</span><span class="ident" id="1709801">pcln</span><span class="op" id="1709805">[</span><span class="num" id="1709806">7</span><span class="op" id="1709807">]</span><span class="op" id="1709808">)</span><span class="op" id="1709809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709813">gothrow</span><span class="op" id="1709820">(</span><span class="string" id="1709821">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1709854">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1709857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1709861">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709907">sp</span>&nbsp;<span class="op" id="1709910">:=</span>&nbsp;<span class="op" id="1709913">(</span><span class="op" id="1709914">*</span><span class="ident" id="1709915">sliceStruct</span><span class="op" id="1709926">)</span><span class="op" id="1709927">(</span><span class="ident" id="1709928">unsafe</span><span class="op" id="1709934">.</span><span class="ident" id="1709935">Pointer</span><span class="op" id="1709942">(</span><span class="op" id="1709943">&amp;</span><span class="ident" id="1709944">pclntable</span><span class="op" id="1709953">)</span><span class="op" id="1709954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709957">sp</span><span class="op" id="1709959">.</span><span class="ident" id="1709960">array</span>&nbsp;<span class="op" id="1709966">=</span>&nbsp;<span class="ident" id="1709968">unsafe</span><span class="op" id="1709974">.</span><span class="ident" id="1709975">Pointer</span><span class="op" id="1709982">(</span><span class="op" id="1709983">&amp;</span><span class="ident" id="1709984">pclntab</span><span class="op" id="1709991">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1709994">sp</span><span class="op" id="1709996">.</span><span class="builtinfunc" id="1709997">len</span>&nbsp;<span class="op" id="1710001">=</span>&nbsp;<span class="builtintype" id="1710003">int</span><span class="op" id="1710006">(</span><span class="builtintype" id="1710007">uintptr</span><span class="op" id="1710014">(</span><span class="ident" id="1710015">unsafe</span><span class="op" id="1710021">.</span><span class="ident" id="1710022">Pointer</span><span class="op" id="1710029">(</span><span class="op" id="1710030">&amp;</span><span class="ident" id="1710031">epclntab</span><span class="op" id="1710039">)</span><span class="op" id="1710040">)</span>&nbsp;<span class="op" id="1710042">-</span>&nbsp;<span class="builtintype" id="1710044">uintptr</span><span class="op" id="1710051">(</span><span class="ident" id="1710052">unsafe</span><span class="op" id="1710058">.</span><span class="ident" id="1710059">Pointer</span><span class="op" id="1710066">(</span><span class="op" id="1710067">&amp;</span><span class="ident" id="1710068">pclntab</span><span class="op" id="1710075">)</span><span class="op" id="1710076">)</span><span class="op" id="1710077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710080">sp</span><span class="op" id="1710082">.</span><span class="builtinfunc" id="1710083">cap</span>&nbsp;<span class="op" id="1710087">=</span>&nbsp;<span class="ident" id="1710089">sp</span><span class="op" id="1710091">.</span><span class="builtinfunc" id="1710092">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1710098">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710156">nftab</span>&nbsp;<span class="op" id="1710162">:=</span>&nbsp;<span class="builtintype" id="1710165">int</span><span class="op" id="1710168">(</span><span class="op" id="1710169">*</span><span class="op" id="1710170">(</span><span class="op" id="1710171">*</span><span class="builtintype" id="1710172">uintptr</span><span class="op" id="1710179">)</span><span class="op" id="1710180">(</span><span class="ident" id="1710181">add</span><span class="op" id="1710184">(</span><span class="ident" id="1710185">unsafe</span><span class="op" id="1710191">.</span><span class="ident" id="1710192">Pointer</span><span class="op" id="1710199">(</span><span class="ident" id="1710200">pcln</span><span class="op" id="1710204">)</span><span class="op" id="1710205">,</span>&nbsp;<span class="num" id="1710207">8</span><span class="op" id="1710208">)</span><span class="op" id="1710209">)</span><span class="op" id="1710210">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710213">p</span>&nbsp;<span class="op" id="1710215">:=</span>&nbsp;<span class="ident" id="1710218">add</span><span class="op" id="1710221">(</span><span class="ident" id="1710222">unsafe</span><span class="op" id="1710228">.</span><span class="ident" id="1710229">Pointer</span><span class="op" id="1710236">(</span><span class="ident" id="1710237">pcln</span><span class="op" id="1710241">)</span><span class="op" id="1710242">,</span>&nbsp;<span class="num" id="1710244">8</span><span class="op" id="1710245">+</span><span class="ident" id="1710246">ptrSize</span><span class="op" id="1710253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710256">sp</span>&nbsp;<span class="op" id="1710259">=</span>&nbsp;<span class="op" id="1710261">(</span><span class="op" id="1710262">*</span><span class="ident" id="1710263">sliceStruct</span><span class="op" id="1710274">)</span><span class="op" id="1710275">(</span><span class="ident" id="1710276">unsafe</span><span class="op" id="1710282">.</span><span class="ident" id="1710283">Pointer</span><span class="op" id="1710290">(</span><span class="op" id="1710291">&amp;</span><span class="ident" id="1710292">ftab</span><span class="op" id="1710296">)</span><span class="op" id="1710297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710300">sp</span><span class="op" id="1710302">.</span><span class="ident" id="1710303">array</span>&nbsp;<span class="op" id="1710309">=</span>&nbsp;<span class="ident" id="1710311">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710314">sp</span><span class="op" id="1710316">.</span><span class="builtinfunc" id="1710317">len</span>&nbsp;<span class="op" id="1710321">=</span>&nbsp;<span class="ident" id="1710323">nftab</span>&nbsp;<span class="op" id="1710329">+</span>&nbsp;<span class="num" id="1710331">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710334">sp</span><span class="op" id="1710336">.</span><span class="builtinfunc" id="1710337">cap</span>&nbsp;<span class="op" id="1710341">=</span>&nbsp;<span class="ident" id="1710343">sp</span><span class="op" id="1710345">.</span><span class="builtinfunc" id="1710346">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1710351">for</span>&nbsp;<span class="ident" id="1710355">i</span>&nbsp;<span class="op" id="1710357">:=</span>&nbsp;<span class="num" id="1710360">0</span><span class="op" id="1710361">;</span>&nbsp;<span class="ident" id="1710363">i</span>&nbsp;<span class="op" id="1710365">&lt;</span>&nbsp;<span class="ident" id="1710367">nftab</span><span class="op" id="1710372">;</span>&nbsp;<span class="ident" id="1710374">i</span><span class="op" id="1710375">++</span>&nbsp;<span class="op" id="1710378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1710382">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1710466">if</span>&nbsp;<span class="ident" id="1710469">ftab</span><span class="op" id="1710473">[</span><span class="ident" id="1710474">i</span><span class="op" id="1710475">]</span><span class="op" id="1710476">.</span><span class="ident" id="1710477">entry</span>&nbsp;<span class="op" id="1710483">&gt;</span>&nbsp;<span class="ident" id="1710485">ftab</span><span class="op" id="1710489">[</span><span class="ident" id="1710490">i</span><span class="op" id="1710491">+</span><span class="num" id="1710492">1</span><span class="op" id="1710493">]</span><span class="op" id="1710494">.</span><span class="ident" id="1710495">entry</span>&nbsp;<span class="op" id="1710501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710506">f1</span>&nbsp;<span class="op" id="1710509">:=</span>&nbsp;<span class="op" id="1710512">(</span><span class="op" id="1710513">*</span><span class="ident" id="1710514">_func</span><span class="op" id="1710519">)</span><span class="op" id="1710520">(</span><span class="ident" id="1710521">unsafe</span><span class="op" id="1710527">.</span><span class="ident" id="1710528">Pointer</span><span class="op" id="1710535">(</span><span class="op" id="1710536">&amp;</span><span class="ident" id="1710537">pclntable</span><span class="op" id="1710546">[</span><span class="ident" id="1710547">ftab</span><span class="op" id="1710551">[</span><span class="ident" id="1710552">i</span><span class="op" id="1710553">]</span><span class="op" id="1710554">.</span><span class="ident" id="1710555">funcoff</span><span class="op" id="1710562">]</span><span class="op" id="1710563">)</span><span class="op" id="1710564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710569">f2</span>&nbsp;<span class="op" id="1710572">:=</span>&nbsp;<span class="op" id="1710575">(</span><span class="op" id="1710576">*</span><span class="ident" id="1710577">_func</span><span class="op" id="1710582">)</span><span class="op" id="1710583">(</span><span class="ident" id="1710584">unsafe</span><span class="op" id="1710590">.</span><span class="ident" id="1710591">Pointer</span><span class="op" id="1710598">(</span><span class="op" id="1710599">&amp;</span><span class="ident" id="1710600">pclntable</span><span class="op" id="1710609">[</span><span class="ident" id="1710610">ftab</span><span class="op" id="1710614">[</span><span class="ident" id="1710615">i</span><span class="op" id="1710616">+</span><span class="num" id="1710617">1</span><span class="op" id="1710618">]</span><span class="op" id="1710619">.</span><span class="ident" id="1710620">funcoff</span><span class="op" id="1710627">]</span><span class="op" id="1710628">)</span><span class="op" id="1710629">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710634">f2name</span>&nbsp;<span class="op" id="1710641">:=</span>&nbsp;<span class="string" id="1710644">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1710653">if</span>&nbsp;<span class="ident" id="1710656">i</span><span class="op" id="1710657">+</span><span class="num" id="1710658">1</span>&nbsp;<span class="op" id="1710660">&lt;</span>&nbsp;<span class="ident" id="1710662">nftab</span>&nbsp;<span class="op" id="1710668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710674">f2name</span>&nbsp;<span class="op" id="1710681">=</span>&nbsp;<span class="ident" id="1710683">gofuncname</span><span class="op" id="1710693">(</span><span class="ident" id="1710694">f2</span><span class="op" id="1710696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1710701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1710706">println</span><span class="op" id="1710713">(</span><span class="string" id="1710714">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1710768">,</span>&nbsp;<span class="ident" id="1710770">hex</span><span class="op" id="1710773">(</span><span class="ident" id="1710774">ftab</span><span class="op" id="1710778">[</span><span class="ident" id="1710779">i</span><span class="op" id="1710780">]</span><span class="op" id="1710781">.</span><span class="ident" id="1710782">entry</span><span class="op" id="1710787">)</span><span class="op" id="1710788">,</span>&nbsp;<span class="ident" id="1710790">gofuncname</span><span class="op" id="1710800">(</span><span class="ident" id="1710801">f1</span><span class="op" id="1710803">)</span><span class="op" id="1710804">,</span>&nbsp;<span class="string" id="1710806">&#34;&gt;&#34;</span><span class="op" id="1710809">,</span>&nbsp;<span class="ident" id="1710811">hex</span><span class="op" id="1710814">(</span><span class="ident" id="1710815">ftab</span><span class="op" id="1710819">[</span><span class="ident" id="1710820">i</span><span class="op" id="1710821">+</span><span class="num" id="1710822">1</span><span class="op" id="1710823">]</span><span class="op" id="1710824">.</span><span class="ident" id="1710825">entry</span><span class="op" id="1710830">)</span><span class="op" id="1710831">,</span>&nbsp;<span class="ident" id="1710833">f2name</span><span class="op" id="1710839">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1710844">for</span>&nbsp;<span class="ident" id="1710848">j</span>&nbsp;<span class="op" id="1710850">:=</span>&nbsp;<span class="num" id="1710853">0</span><span class="op" id="1710854">;</span>&nbsp;<span class="ident" id="1710856">j</span>&nbsp;<span class="op" id="1710858">&lt;=</span>&nbsp;<span class="ident" id="1710861">i</span><span class="op" id="1710862">;</span>&nbsp;<span class="ident" id="1710864">j</span><span class="op" id="1710865">++</span>&nbsp;<span class="op" id="1710868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1710874">print</span><span class="op" id="1710879">(</span><span class="string" id="1710880">&#34;\t&#34;</span><span class="op" id="1710884">,</span>&nbsp;<span class="ident" id="1710886">hex</span><span class="op" id="1710889">(</span><span class="ident" id="1710890">ftab</span><span class="op" id="1710894">[</span><span class="ident" id="1710895">j</span><span class="op" id="1710896">]</span><span class="op" id="1710897">.</span><span class="ident" id="1710898">entry</span><span class="op" id="1710903">)</span><span class="op" id="1710904">,</span>&nbsp;<span class="string" id="1710906">&#34;&nbsp;&#34;</span><span class="op" id="1710909">,</span>&nbsp;<span class="ident" id="1710911">gofuncname</span><span class="op" id="1710921">(</span><span class="op" id="1710922">(</span><span class="op" id="1710923">*</span><span class="ident" id="1710924">_func</span><span class="op" id="1710929">)</span><span class="op" id="1710930">(</span><span class="ident" id="1710931">unsafe</span><span class="op" id="1710937">.</span><span class="ident" id="1710938">Pointer</span><span class="op" id="1710945">(</span><span class="op" id="1710946">&amp;</span><span class="ident" id="1710947">pclntable</span><span class="op" id="1710956">[</span><span class="ident" id="1710957">ftab</span><span class="op" id="1710961">[</span><span class="ident" id="1710962">j</span><span class="op" id="1710963">]</span><span class="op" id="1710964">.</span><span class="ident" id="1710965">funcoff</span><span class="op" id="1710972">]</span><span class="op" id="1710973">)</span><span class="op" id="1710974">)</span><span class="op" id="1710975">)</span><span class="op" id="1710976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1710981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1710986">gothrow</span><span class="op" id="1710993">(</span><span class="string" id="1710994">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1711024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1711028">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1711031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1711035">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1711092">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1711151">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711181">sp</span>&nbsp;<span class="op" id="1711184">=</span>&nbsp;<span class="op" id="1711186">(</span><span class="op" id="1711187">*</span><span class="ident" id="1711188">sliceStruct</span><span class="op" id="1711199">)</span><span class="op" id="1711200">(</span><span class="ident" id="1711201">unsafe</span><span class="op" id="1711207">.</span><span class="ident" id="1711208">Pointer</span><span class="op" id="1711215">(</span><span class="op" id="1711216">&amp;</span><span class="ident" id="1711217">filetab</span><span class="op" id="1711224">)</span><span class="op" id="1711225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711228">end</span>&nbsp;<span class="op" id="1711232">:=</span>&nbsp;<span class="ident" id="1711235">unsafe</span><span class="op" id="1711241">.</span><span class="ident" id="1711242">Pointer</span><span class="op" id="1711249">(</span><span class="op" id="1711250">&amp;</span><span class="ident" id="1711251">ftab</span><span class="op" id="1711255">[</span><span class="ident" id="1711256">nftab</span><span class="op" id="1711261">]</span><span class="op" id="1711262">.</span><span class="ident" id="1711263">funcoff</span><span class="op" id="1711270">)</span>&nbsp;<span class="comment" id="1711272">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711293">fileoffset</span>&nbsp;<span class="op" id="1711304">:=</span>&nbsp;<span class="op" id="1711307">*</span><span class="op" id="1711308">(</span><span class="op" id="1711309">*</span><span class="builtintype" id="1711310">uint32</span><span class="op" id="1711316">)</span><span class="op" id="1711317">(</span><span class="ident" id="1711318">end</span><span class="op" id="1711321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711324">sp</span><span class="op" id="1711326">.</span><span class="ident" id="1711327">array</span>&nbsp;<span class="op" id="1711333">=</span>&nbsp;<span class="ident" id="1711335">unsafe</span><span class="op" id="1711341">.</span><span class="ident" id="1711342">Pointer</span><span class="op" id="1711349">(</span><span class="op" id="1711350">&amp;</span><span class="ident" id="1711351">pclntable</span><span class="op" id="1711360">[</span><span class="ident" id="1711361">fileoffset</span><span class="op" id="1711371">]</span><span class="op" id="1711372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1711375">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1711416">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711462">sp</span><span class="op" id="1711464">.</span><span class="builtinfunc" id="1711465">len</span>&nbsp;<span class="op" id="1711469">=</span>&nbsp;<span class="num" id="1711471">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711474">sp</span><span class="op" id="1711476">.</span><span class="builtinfunc" id="1711477">cap</span>&nbsp;<span class="op" id="1711481">=</span>&nbsp;<span class="num" id="1711483">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711486">sp</span><span class="op" id="1711488">.</span><span class="builtinfunc" id="1711489">len</span>&nbsp;<span class="op" id="1711493">=</span>&nbsp;<span class="builtintype" id="1711495">int</span><span class="op" id="1711498">(</span><span class="ident" id="1711499">filetab</span><span class="op" id="1711506">[</span><span class="num" id="1711507">0</span><span class="op" id="1711508">]</span><span class="op" id="1711509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1711512">sp</span><span class="op" id="1711514">.</span><span class="builtinfunc" id="1711515">cap</span>&nbsp;<span class="op" id="1711519">=</span>&nbsp;<span class="ident" id="1711521">sp</span><span class="op" id="1711523">.</span><span class="builtinfunc" id="1711524">len</span><br>
<span class="lineno">100</span><span class="op" id="1711528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1711531">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1711602">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1711649">func</span>&nbsp;<span class="ident" id="1711654">FuncForPC</span><span class="op" id="1711663">(</span><span class="ident" id="1711664">pc</span>&nbsp;<span class="builtintype" id="1711667">uintptr</span><span class="op" id="1711674">)</span>&nbsp;<span class="op" id="1711676">*</span><span class="ident" id="1711677">Func</span>&nbsp;<span class="op" id="1711682">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1711685">return</span>&nbsp;<span class="op" id="1711692">(</span><span class="op" id="1711693">*</span><span class="ident" id="1711694">Func</span><span class="op" id="1711698">)</span><span class="op" id="1711699">(</span><span class="ident" id="1711700">unsafe</span><span class="op" id="1711706">.</span><span class="ident" id="1711707">Pointer</span><span class="op" id="1711714">(</span><span class="ident" id="1711715">findfunc</span><span class="op" id="1711723">(</span><span class="ident" id="1711724">pc</span><span class="op" id="1711726">)</span><span class="op" id="1711727">)</span><span class="op" id="1711728">)</span><br>
<span class="lineno"></span><span class="op" id="1711730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1711733">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1711775">func</span>&nbsp;<span class="op" id="1711780">(</span><span class="ident" id="1711781">f</span>&nbsp;<span class="op" id="1711783">*</span><span class="ident" id="1711784">Func</span><span class="op" id="1711788">)</span>&nbsp;<span class="ident" id="1711790">Name</span><span class="op" id="1711794">(</span><span class="op" id="1711795">)</span>&nbsp;<span class="builtintype" id="1711797">string</span>&nbsp;<span class="op" id="1711804">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1711807">return</span>&nbsp;<span class="ident" id="1711814">gofuncname</span><span class="op" id="1711824">(</span><span class="ident" id="1711825">f</span><span class="op" id="1711826">.</span><span class="ident" id="1711827">raw</span><span class="op" id="1711830">(</span><span class="op" id="1711831">)</span><span class="op" id="1711832">)</span><br>
<span class="lineno"></span><span class="op" id="1711834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1711837">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1711889">func</span>&nbsp;<span class="op" id="1711894">(</span><span class="ident" id="1711895">f</span>&nbsp;<span class="op" id="1711897">*</span><span class="ident" id="1711898">Func</span><span class="op" id="1711902">)</span>&nbsp;<span class="ident" id="1711904">Entry</span><span class="op" id="1711909">(</span><span class="op" id="1711910">)</span>&nbsp;<span class="builtintype" id="1711912">uintptr</span>&nbsp;<span class="op" id="1711920">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1711923">return</span>&nbsp;<span class="ident" id="1711930">f</span><span class="op" id="1711931">.</span><span class="ident" id="1711932">raw</span><span class="op" id="1711935">(</span><span class="op" id="1711936">)</span><span class="op" id="1711937">.</span><span class="ident" id="1711938">entry</span><br>
<span class="lineno"></span><span class="op" id="1711944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1711947">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1712004">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1712060">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1712118">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1712139">func</span>&nbsp;<span class="op" id="1712144">(</span><span class="ident" id="1712145">f</span>&nbsp;<span class="op" id="1712147">*</span><span class="ident" id="1712148">Func</span><span class="op" id="1712152">)</span>&nbsp;<span class="ident" id="1712154">FileLine</span><span class="op" id="1712162">(</span><span class="ident" id="1712163">pc</span>&nbsp;<span class="builtintype" id="1712166">uintptr</span><span class="op" id="1712173">)</span>&nbsp;<span class="op" id="1712175">(</span><span class="ident" id="1712176">file</span>&nbsp;<span class="builtintype" id="1712181">string</span><span class="op" id="1712187">,</span>&nbsp;<span class="ident" id="1712189">line</span>&nbsp;<span class="builtintype" id="1712194">int</span><span class="op" id="1712197">)</span>&nbsp;<span class="op" id="1712199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1712202">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1712269">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712333">line</span>&nbsp;<span class="op" id="1712338">=</span>&nbsp;<span class="builtintype" id="1712340">int</span><span class="op" id="1712343">(</span><span class="ident" id="1712344">funcline1</span><span class="op" id="1712353">(</span><span class="ident" id="1712354">f</span><span class="op" id="1712355">.</span><span class="ident" id="1712356">raw</span><span class="op" id="1712359">(</span><span class="op" id="1712360">)</span><span class="op" id="1712361">,</span>&nbsp;<span class="ident" id="1712363">pc</span><span class="op" id="1712365">,</span>&nbsp;<span class="op" id="1712367">&amp;</span><span class="ident" id="1712368">file</span><span class="op" id="1712372">,</span>&nbsp;<span class="builtintype" id="1712374">false</span><span class="op" id="1712379">)</span><span class="op" id="1712380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712383">return</span>&nbsp;<span class="ident" id="1712390">file</span><span class="op" id="1712394">,</span>&nbsp;<span class="ident" id="1712396">line</span><br>
<span class="lineno"></span><span class="op" id="1712401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1712404">func</span>&nbsp;<span class="ident" id="1712409">findfunc</span><span class="op" id="1712417">(</span><span class="ident" id="1712418">pc</span>&nbsp;<span class="builtintype" id="1712421">uintptr</span><span class="op" id="1712428">)</span>&nbsp;<span class="op" id="1712430">*</span><span class="ident" id="1712431">_func</span>&nbsp;<span class="op" id="1712437">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712440">if</span>&nbsp;<span class="builtinfunc" id="1712443">len</span><span class="op" id="1712446">(</span><span class="ident" id="1712447">ftab</span><span class="op" id="1712451">)</span>&nbsp;<span class="op" id="1712453">==</span>&nbsp;<span class="num" id="1712456">0</span>&nbsp;<span class="op" id="1712458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712462">return</span>&nbsp;<span class="builtintype" id="1712469">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712478">if</span>&nbsp;<span class="ident" id="1712481">pc</span>&nbsp;<span class="op" id="1712484">&lt;</span>&nbsp;<span class="ident" id="1712486">ftab</span><span class="op" id="1712490">[</span><span class="num" id="1712491">0</span><span class="op" id="1712492">]</span><span class="op" id="1712493">.</span><span class="ident" id="1712494">entry</span>&nbsp;<span class="op" id="1712500">||</span>&nbsp;<span class="ident" id="1712503">pc</span>&nbsp;<span class="op" id="1712506">&gt;=</span>&nbsp;<span class="ident" id="1712509">ftab</span><span class="op" id="1712513">[</span><span class="builtinfunc" id="1712514">len</span><span class="op" id="1712517">(</span><span class="ident" id="1712518">ftab</span><span class="op" id="1712522">)</span><span class="op" id="1712523">-</span><span class="num" id="1712524">1</span><span class="op" id="1712525">]</span><span class="op" id="1712526">.</span><span class="ident" id="1712527">entry</span>&nbsp;<span class="op" id="1712533">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712537">return</span>&nbsp;<span class="builtintype" id="1712544">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1712553">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712602">lo</span>&nbsp;<span class="op" id="1712605">:=</span>&nbsp;<span class="num" id="1712608">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712611">nf</span>&nbsp;<span class="op" id="1712614">:=</span>&nbsp;<span class="builtinfunc" id="1712617">len</span><span class="op" id="1712620">(</span><span class="ident" id="1712621">ftab</span><span class="op" id="1712625">)</span>&nbsp;<span class="op" id="1712627">-</span>&nbsp;<span class="num" id="1712629">1</span>&nbsp;<span class="comment" id="1712631">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712658">for</span>&nbsp;<span class="ident" id="1712662">nf</span>&nbsp;<span class="op" id="1712665">&gt;</span>&nbsp;<span class="num" id="1712667">0</span>&nbsp;<span class="op" id="1712669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712673">n</span>&nbsp;<span class="op" id="1712675">:=</span>&nbsp;<span class="ident" id="1712678">nf</span>&nbsp;<span class="op" id="1712681">/</span>&nbsp;<span class="num" id="1712683">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712687">f</span>&nbsp;<span class="op" id="1712689">:=</span>&nbsp;<span class="op" id="1712692">&amp;</span><span class="ident" id="1712693">ftab</span><span class="op" id="1712697">[</span><span class="ident" id="1712698">lo</span><span class="op" id="1712700">+</span><span class="ident" id="1712701">n</span><span class="op" id="1712702">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712706">if</span>&nbsp;<span class="ident" id="1712709">f</span><span class="op" id="1712710">.</span><span class="ident" id="1712711">entry</span>&nbsp;<span class="op" id="1712717">&lt;=</span>&nbsp;<span class="ident" id="1712720">pc</span>&nbsp;<span class="op" id="1712723">&amp;&amp;</span>&nbsp;<span class="ident" id="1712726">pc</span>&nbsp;<span class="op" id="1712729">&lt;</span>&nbsp;<span class="ident" id="1712731">ftab</span><span class="op" id="1712735">[</span><span class="ident" id="1712736">lo</span><span class="op" id="1712738">+</span><span class="ident" id="1712739">n</span><span class="op" id="1712740">+</span><span class="num" id="1712741">1</span><span class="op" id="1712742">]</span><span class="op" id="1712743">.</span><span class="ident" id="1712744">entry</span>&nbsp;<span class="op" id="1712750">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712755">return</span>&nbsp;<span class="op" id="1712762">(</span><span class="op" id="1712763">*</span><span class="ident" id="1712764">_func</span><span class="op" id="1712769">)</span><span class="op" id="1712770">(</span><span class="ident" id="1712771">unsafe</span><span class="op" id="1712777">.</span><span class="ident" id="1712778">Pointer</span><span class="op" id="1712785">(</span><span class="op" id="1712786">&amp;</span><span class="ident" id="1712787">pclntable</span><span class="op" id="1712796">[</span><span class="ident" id="1712797">f</span><span class="op" id="1712798">.</span><span class="ident" id="1712799">funcoff</span><span class="op" id="1712806">]</span><span class="op" id="1712807">)</span><span class="op" id="1712808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712812">}</span>&nbsp;<span class="keyword" id="1712814">else</span>&nbsp;<span class="keyword" id="1712819">if</span>&nbsp;<span class="ident" id="1712822">pc</span>&nbsp;<span class="op" id="1712825">&lt;</span>&nbsp;<span class="ident" id="1712827">f</span><span class="op" id="1712828">.</span><span class="ident" id="1712829">entry</span>&nbsp;<span class="op" id="1712835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712840">nf</span>&nbsp;<span class="op" id="1712843">=</span>&nbsp;<span class="ident" id="1712845">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712849">}</span>&nbsp;<span class="keyword" id="1712851">else</span>&nbsp;<span class="op" id="1712856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712861">lo</span>&nbsp;<span class="op" id="1712864">+=</span>&nbsp;<span class="ident" id="1712867">n</span>&nbsp;<span class="op" id="1712869">+</span>&nbsp;<span class="num" id="1712871">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712876">nf</span>&nbsp;<span class="op" id="1712879">-=</span>&nbsp;<span class="ident" id="1712882">n</span>&nbsp;<span class="op" id="1712884">+</span>&nbsp;<span class="num" id="1712886">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1712893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1712897">gothrow</span><span class="op" id="1712904">(</span><span class="string" id="1712905">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1712937">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1712940">return</span>&nbsp;<span class="builtintype" id="1712947">nil</span><br>
<span class="lineno"></span><span class="op" id="1712951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1712954">func</span>&nbsp;<span class="ident" id="1712959">pcvalue</span><span class="op" id="1712966">(</span><span class="ident" id="1712967">f</span>&nbsp;<span class="op" id="1712969">*</span><span class="ident" id="1712970">_func</span><span class="op" id="1712975">,</span>&nbsp;<span class="ident" id="1712977">off</span>&nbsp;<span class="builtintype" id="1712981">int32</span><span class="op" id="1712986">,</span>&nbsp;<span class="ident" id="1712988">targetpc</span>&nbsp;<span class="builtintype" id="1712997">uintptr</span><span class="op" id="1713004">,</span>&nbsp;<span class="ident" id="1713006">strict</span>&nbsp;<span class="builtintype" id="1713013">bool</span><span class="op" id="1713017">)</span>&nbsp;<span class="builtintype" id="1713019">int32</span>&nbsp;<span class="op" id="1713025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713028">if</span>&nbsp;<span class="ident" id="1713031">off</span>&nbsp;<span class="op" id="1713035">==</span>&nbsp;<span class="num" id="1713038">0</span>&nbsp;<span class="op" id="1713040">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713044">return</span>&nbsp;<span class="op" id="1713051">-</span><span class="num" id="1713052">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713058">p</span>&nbsp;<span class="op" id="1713060">:=</span>&nbsp;<span class="ident" id="1713063">pclntable</span><span class="op" id="1713072">[</span><span class="ident" id="1713073">off</span><span class="op" id="1713076">:</span><span class="op" id="1713077">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713080">pc</span>&nbsp;<span class="op" id="1713083">:=</span>&nbsp;<span class="ident" id="1713086">f</span><span class="op" id="1713087">.</span><span class="ident" id="1713088">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713095">val</span>&nbsp;<span class="op" id="1713099">:=</span>&nbsp;<span class="builtintype" id="1713102">int32</span><span class="op" id="1713107">(</span><span class="op" id="1713108">-</span><span class="num" id="1713109">1</span><span class="op" id="1713110">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713113">for</span>&nbsp;<span class="op" id="1713117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713121">var</span>&nbsp;<span class="ident" id="1713125">ok</span>&nbsp;<span class="builtintype" id="1713128">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713135">p</span><span class="op" id="1713136">,</span>&nbsp;<span class="ident" id="1713138">ok</span>&nbsp;<span class="op" id="1713141">=</span>&nbsp;<span class="ident" id="1713143">step</span><span class="op" id="1713147">(</span><span class="ident" id="1713148">p</span><span class="op" id="1713149">,</span>&nbsp;<span class="op" id="1713151">&amp;</span><span class="ident" id="1713152">pc</span><span class="op" id="1713154">,</span>&nbsp;<span class="op" id="1713156">&amp;</span><span class="ident" id="1713157">val</span><span class="op" id="1713160">,</span>&nbsp;<span class="ident" id="1713162">pc</span>&nbsp;<span class="op" id="1713165">==</span>&nbsp;<span class="ident" id="1713168">f</span><span class="op" id="1713169">.</span><span class="ident" id="1713170">entry</span><span class="op" id="1713175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713179">if</span>&nbsp;<span class="op" id="1713182">!</span><span class="ident" id="1713183">ok</span>&nbsp;<span class="op" id="1713186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713191">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713203">if</span>&nbsp;<span class="ident" id="1713206">targetpc</span>&nbsp;<span class="op" id="1713215">&lt;</span>&nbsp;<span class="ident" id="1713217">pc</span>&nbsp;<span class="op" id="1713220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713225">return</span>&nbsp;<span class="ident" id="1713232">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713241">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1713245">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1713316">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713348">if</span>&nbsp;<span class="ident" id="1713351">panicking</span>&nbsp;<span class="op" id="1713361">!=</span>&nbsp;<span class="num" id="1713364">0</span>&nbsp;<span class="op" id="1713366">||</span>&nbsp;<span class="op" id="1713369">!</span><span class="ident" id="1713370">strict</span>&nbsp;<span class="op" id="1713377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713381">return</span>&nbsp;<span class="op" id="1713388">-</span><span class="num" id="1713389">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1713396">print</span><span class="op" id="1713401">(</span><span class="string" id="1713402">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1713440">,</span>&nbsp;<span class="ident" id="1713442">gofuncname</span><span class="op" id="1713452">(</span><span class="ident" id="1713453">f</span><span class="op" id="1713454">)</span><span class="op" id="1713455">,</span>&nbsp;<span class="string" id="1713457">&#34;&nbsp;pc=&#34;</span><span class="op" id="1713463">,</span>&nbsp;<span class="ident" id="1713465">hex</span><span class="op" id="1713468">(</span><span class="ident" id="1713469">pc</span><span class="op" id="1713471">)</span><span class="op" id="1713472">,</span>&nbsp;<span class="string" id="1713474">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1713486">,</span>&nbsp;<span class="ident" id="1713488">hex</span><span class="op" id="1713491">(</span><span class="ident" id="1713492">targetpc</span><span class="op" id="1713500">)</span><span class="op" id="1713501">,</span>&nbsp;<span class="string" id="1713503">&#34;&nbsp;tab=&#34;</span><span class="op" id="1713510">,</span>&nbsp;<span class="ident" id="1713512">p</span><span class="op" id="1713513">,</span>&nbsp;<span class="string" id="1713515">&#34;\n&#34;</span><span class="op" id="1713519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713523">p</span>&nbsp;<span class="op" id="1713525">=</span>&nbsp;<span class="ident" id="1713527">pclntable</span><span class="op" id="1713536">[</span><span class="ident" id="1713537">off</span><span class="op" id="1713540">:</span><span class="op" id="1713541">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713544">pc</span>&nbsp;<span class="op" id="1713547">=</span>&nbsp;<span class="ident" id="1713549">f</span><span class="op" id="1713550">.</span><span class="ident" id="1713551">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713558">val</span>&nbsp;<span class="op" id="1713562">=</span>&nbsp;<span class="op" id="1713564">-</span><span class="num" id="1713565">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713568">for</span>&nbsp;<span class="op" id="1713572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713576">var</span>&nbsp;<span class="ident" id="1713580">ok</span>&nbsp;<span class="builtintype" id="1713583">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713590">p</span><span class="op" id="1713591">,</span>&nbsp;<span class="ident" id="1713593">ok</span>&nbsp;<span class="op" id="1713596">=</span>&nbsp;<span class="ident" id="1713598">step</span><span class="op" id="1713602">(</span><span class="ident" id="1713603">p</span><span class="op" id="1713604">,</span>&nbsp;<span class="op" id="1713606">&amp;</span><span class="ident" id="1713607">pc</span><span class="op" id="1713609">,</span>&nbsp;<span class="op" id="1713611">&amp;</span><span class="ident" id="1713612">val</span><span class="op" id="1713615">,</span>&nbsp;<span class="ident" id="1713617">pc</span>&nbsp;<span class="op" id="1713620">==</span>&nbsp;<span class="ident" id="1713623">f</span><span class="op" id="1713624">.</span><span class="ident" id="1713625">entry</span><span class="op" id="1713630">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713634">if</span>&nbsp;<span class="op" id="1713637">!</span><span class="ident" id="1713638">ok</span>&nbsp;<span class="op" id="1713641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713646">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1713658">print</span><span class="op" id="1713663">(</span><span class="string" id="1713664">&#34;\tvalue=&#34;</span><span class="op" id="1713674">,</span>&nbsp;<span class="ident" id="1713676">val</span><span class="op" id="1713679">,</span>&nbsp;<span class="string" id="1713681">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1713693">,</span>&nbsp;<span class="ident" id="1713695">hex</span><span class="op" id="1713698">(</span><span class="ident" id="1713699">pc</span><span class="op" id="1713701">)</span><span class="op" id="1713702">,</span>&nbsp;<span class="string" id="1713704">&#34;\n&#34;</span><span class="op" id="1713708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713711">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1713715">gothrow</span><span class="op" id="1713722">(</span><span class="string" id="1713723">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1713753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713756">return</span>&nbsp;<span class="op" id="1713763">-</span><span class="num" id="1713764">1</span><br>
<span class="lineno"></span><span class="op" id="1713766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1713769">func</span>&nbsp;<span class="ident" id="1713774">funcname</span><span class="op" id="1713782">(</span><span class="ident" id="1713783">f</span>&nbsp;<span class="op" id="1713785">*</span><span class="ident" id="1713786">_func</span><span class="op" id="1713791">)</span>&nbsp;<span class="op" id="1713793">*</span><span class="builtintype" id="1713794">byte</span>&nbsp;<span class="op" id="1713799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713802">if</span>&nbsp;<span class="ident" id="1713805">f</span>&nbsp;<span class="op" id="1713807">==</span>&nbsp;<span class="builtintype" id="1713810">nil</span>&nbsp;<span class="op" id="1713814">||</span>&nbsp;<span class="ident" id="1713817">f</span><span class="op" id="1713818">.</span><span class="ident" id="1713819">nameoff</span>&nbsp;<span class="op" id="1713827">==</span>&nbsp;<span class="num" id="1713830">0</span>&nbsp;<span class="op" id="1713832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713836">return</span>&nbsp;<span class="builtintype" id="1713843">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1713848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713851">return</span>&nbsp;<span class="op" id="1713858">(</span><span class="op" id="1713859">*</span><span class="builtintype" id="1713860">byte</span><span class="op" id="1713864">)</span><span class="op" id="1713865">(</span><span class="ident" id="1713866">unsafe</span><span class="op" id="1713872">.</span><span class="ident" id="1713873">Pointer</span><span class="op" id="1713880">(</span><span class="op" id="1713881">&amp;</span><span class="ident" id="1713882">pclntable</span><span class="op" id="1713891">[</span><span class="ident" id="1713892">f</span><span class="op" id="1713893">.</span><span class="ident" id="1713894">nameoff</span><span class="op" id="1713901">]</span><span class="op" id="1713902">)</span><span class="op" id="1713903">)</span><br>
<span class="lineno">205</span><span class="op" id="1713905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1713908">func</span>&nbsp;<span class="ident" id="1713913">gofuncname</span><span class="op" id="1713923">(</span><span class="ident" id="1713924">f</span>&nbsp;<span class="op" id="1713926">*</span><span class="ident" id="1713927">_func</span><span class="op" id="1713932">)</span>&nbsp;<span class="builtintype" id="1713934">string</span>&nbsp;<span class="op" id="1713941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1713944">return</span>&nbsp;<span class="ident" id="1713951">gostringnocopy</span><span class="op" id="1713965">(</span><span class="ident" id="1713966">funcname</span><span class="op" id="1713974">(</span><span class="ident" id="1713975">f</span><span class="op" id="1713976">)</span><span class="op" id="1713977">)</span><br>
<span class="lineno"></span><span class="op" id="1713979">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1713982">func</span>&nbsp;<span class="ident" id="1713987">funcline1</span><span class="op" id="1713996">(</span><span class="ident" id="1713997">f</span>&nbsp;<span class="op" id="1713999">*</span><span class="ident" id="1714000">_func</span><span class="op" id="1714005">,</span>&nbsp;<span class="ident" id="1714007">targetpc</span>&nbsp;<span class="builtintype" id="1714016">uintptr</span><span class="op" id="1714023">,</span>&nbsp;<span class="ident" id="1714025">file</span>&nbsp;<span class="op" id="1714030">*</span><span class="builtintype" id="1714031">string</span><span class="op" id="1714037">,</span>&nbsp;<span class="ident" id="1714039">strict</span>&nbsp;<span class="builtintype" id="1714046">bool</span><span class="op" id="1714050">)</span>&nbsp;<span class="builtintype" id="1714052">int32</span>&nbsp;<span class="op" id="1714058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714061">*</span><span class="ident" id="1714062">file</span>&nbsp;<span class="op" id="1714067">=</span>&nbsp;<span class="string" id="1714069">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714074">fileno</span>&nbsp;<span class="op" id="1714081">:=</span>&nbsp;<span class="builtintype" id="1714084">int</span><span class="op" id="1714087">(</span><span class="ident" id="1714088">pcvalue</span><span class="op" id="1714095">(</span><span class="ident" id="1714096">f</span><span class="op" id="1714097">,</span>&nbsp;<span class="ident" id="1714099">f</span><span class="op" id="1714100">.</span><span class="ident" id="1714101">pcfile</span><span class="op" id="1714107">,</span>&nbsp;<span class="ident" id="1714109">targetpc</span><span class="op" id="1714117">,</span>&nbsp;<span class="ident" id="1714119">strict</span><span class="op" id="1714125">)</span><span class="op" id="1714126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714129">line</span>&nbsp;<span class="op" id="1714134">:=</span>&nbsp;<span class="ident" id="1714137">pcvalue</span><span class="op" id="1714144">(</span><span class="ident" id="1714145">f</span><span class="op" id="1714146">,</span>&nbsp;<span class="ident" id="1714148">f</span><span class="op" id="1714149">.</span><span class="ident" id="1714150">pcln</span><span class="op" id="1714154">,</span>&nbsp;<span class="ident" id="1714156">targetpc</span><span class="op" id="1714164">,</span>&nbsp;<span class="ident" id="1714166">strict</span><span class="op" id="1714172">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714175">if</span>&nbsp;<span class="ident" id="1714178">fileno</span>&nbsp;<span class="op" id="1714185">==</span>&nbsp;<span class="op" id="1714188">-</span><span class="num" id="1714189">1</span>&nbsp;<span class="op" id="1714191">||</span>&nbsp;<span class="ident" id="1714194">line</span>&nbsp;<span class="op" id="1714199">==</span>&nbsp;<span class="op" id="1714202">-</span><span class="num" id="1714203">1</span>&nbsp;<span class="op" id="1714205">||</span>&nbsp;<span class="ident" id="1714208">fileno</span>&nbsp;<span class="op" id="1714215">&gt;=</span>&nbsp;<span class="builtinfunc" id="1714218">len</span><span class="op" id="1714221">(</span><span class="ident" id="1714222">filetab</span><span class="op" id="1714229">)</span>&nbsp;<span class="op" id="1714231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1714235">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714346">return</span>&nbsp;<span class="num" id="1714353">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714359">*</span><span class="ident" id="1714360">file</span>&nbsp;<span class="op" id="1714365">=</span>&nbsp;<span class="ident" id="1714367">gostringnocopy</span><span class="op" id="1714381">(</span><span class="op" id="1714382">&amp;</span><span class="ident" id="1714383">pclntable</span><span class="op" id="1714392">[</span><span class="ident" id="1714393">filetab</span><span class="op" id="1714400">[</span><span class="ident" id="1714401">fileno</span><span class="op" id="1714407">]</span><span class="op" id="1714408">]</span><span class="op" id="1714409">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714412">return</span>&nbsp;<span class="ident" id="1714419">line</span><br>
<span class="lineno"></span><span class="op" id="1714424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714427">func</span>&nbsp;<span class="ident" id="1714432">funcline</span><span class="op" id="1714440">(</span><span class="ident" id="1714441">f</span>&nbsp;<span class="op" id="1714443">*</span><span class="ident" id="1714444">_func</span><span class="op" id="1714449">,</span>&nbsp;<span class="ident" id="1714451">targetpc</span>&nbsp;<span class="builtintype" id="1714460">uintptr</span><span class="op" id="1714467">,</span>&nbsp;<span class="ident" id="1714469">file</span>&nbsp;<span class="op" id="1714474">*</span><span class="builtintype" id="1714475">string</span><span class="op" id="1714481">)</span>&nbsp;<span class="builtintype" id="1714483">int32</span>&nbsp;<span class="op" id="1714489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714492">return</span>&nbsp;<span class="ident" id="1714499">funcline1</span><span class="op" id="1714508">(</span><span class="ident" id="1714509">f</span><span class="op" id="1714510">,</span>&nbsp;<span class="ident" id="1714512">targetpc</span><span class="op" id="1714520">,</span>&nbsp;<span class="ident" id="1714522">file</span><span class="op" id="1714526">,</span>&nbsp;<span class="builtintype" id="1714528">true</span><span class="op" id="1714532">)</span><br>
<span class="lineno">225</span><span class="op" id="1714534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714537">func</span>&nbsp;<span class="ident" id="1714542">funcspdelta</span><span class="op" id="1714553">(</span><span class="ident" id="1714554">f</span>&nbsp;<span class="op" id="1714556">*</span><span class="ident" id="1714557">_func</span><span class="op" id="1714562">,</span>&nbsp;<span class="ident" id="1714564">targetpc</span>&nbsp;<span class="builtintype" id="1714573">uintptr</span><span class="op" id="1714580">)</span>&nbsp;<span class="builtintype" id="1714582">int32</span>&nbsp;<span class="op" id="1714588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714591">x</span>&nbsp;<span class="op" id="1714593">:=</span>&nbsp;<span class="ident" id="1714596">pcvalue</span><span class="op" id="1714603">(</span><span class="ident" id="1714604">f</span><span class="op" id="1714605">,</span>&nbsp;<span class="ident" id="1714607">f</span><span class="op" id="1714608">.</span><span class="ident" id="1714609">pcsp</span><span class="op" id="1714613">,</span>&nbsp;<span class="ident" id="1714615">targetpc</span><span class="op" id="1714623">,</span>&nbsp;<span class="builtintype" id="1714625">true</span><span class="op" id="1714629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714632">if</span>&nbsp;<span class="ident" id="1714635">x</span><span class="op" id="1714636">&amp;</span><span class="op" id="1714637">(</span><span class="ident" id="1714638">ptrSize</span><span class="op" id="1714645">-</span><span class="num" id="1714646">1</span><span class="op" id="1714647">)</span>&nbsp;<span class="op" id="1714649">!=</span>&nbsp;<span class="num" id="1714652">0</span>&nbsp;<span class="op" id="1714654">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1714658">print</span><span class="op" id="1714663">(</span><span class="string" id="1714664">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1714682">,</span>&nbsp;<span class="ident" id="1714684">hex</span><span class="op" id="1714687">(</span><span class="ident" id="1714688">f</span><span class="op" id="1714689">.</span><span class="ident" id="1714690">entry</span><span class="op" id="1714695">)</span><span class="op" id="1714696">,</span>&nbsp;<span class="string" id="1714698">&#34;&nbsp;&#34;</span><span class="op" id="1714701">,</span>&nbsp;<span class="ident" id="1714703">hex</span><span class="op" id="1714706">(</span><span class="ident" id="1714707">targetpc</span><span class="op" id="1714715">)</span><span class="op" id="1714716">,</span>&nbsp;<span class="string" id="1714718">&#34;&nbsp;&#34;</span><span class="op" id="1714721">,</span>&nbsp;<span class="ident" id="1714723">hex</span><span class="op" id="1714726">(</span><span class="ident" id="1714727">f</span><span class="op" id="1714728">.</span><span class="ident" id="1714729">pcsp</span><span class="op" id="1714733">)</span><span class="op" id="1714734">,</span>&nbsp;<span class="string" id="1714736">&#34;&nbsp;&#34;</span><span class="op" id="1714739">,</span>&nbsp;<span class="ident" id="1714741">x</span><span class="op" id="1714742">,</span>&nbsp;<span class="string" id="1714744">&#34;\n&#34;</span><span class="op" id="1714748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714754">return</span>&nbsp;<span class="ident" id="1714761">x</span><br>
<span class="lineno"></span><span class="op" id="1714763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1714766">func</span>&nbsp;<span class="ident" id="1714771">pcdatavalue</span><span class="op" id="1714782">(</span><span class="ident" id="1714783">f</span>&nbsp;<span class="op" id="1714785">*</span><span class="ident" id="1714786">_func</span><span class="op" id="1714791">,</span>&nbsp;<span class="ident" id="1714793">table</span>&nbsp;<span class="builtintype" id="1714799">int32</span><span class="op" id="1714804">,</span>&nbsp;<span class="ident" id="1714806">targetpc</span>&nbsp;<span class="builtintype" id="1714815">uintptr</span><span class="op" id="1714822">)</span>&nbsp;<span class="builtintype" id="1714824">int32</span>&nbsp;<span class="op" id="1714830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714833">if</span>&nbsp;<span class="ident" id="1714836">table</span>&nbsp;<span class="op" id="1714842">&lt;</span>&nbsp;<span class="num" id="1714844">0</span>&nbsp;<span class="op" id="1714846">||</span>&nbsp;<span class="ident" id="1714849">table</span>&nbsp;<span class="op" id="1714855">&gt;=</span>&nbsp;<span class="ident" id="1714858">f</span><span class="op" id="1714859">.</span><span class="ident" id="1714860">npcdata</span>&nbsp;<span class="op" id="1714868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714872">return</span>&nbsp;<span class="op" id="1714879">-</span><span class="num" id="1714880">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714886">off</span>&nbsp;<span class="op" id="1714890">:=</span>&nbsp;<span class="op" id="1714893">*</span><span class="op" id="1714894">(</span><span class="op" id="1714895">*</span><span class="builtintype" id="1714896">int32</span><span class="op" id="1714901">)</span><span class="op" id="1714902">(</span><span class="ident" id="1714903">add</span><span class="op" id="1714906">(</span><span class="ident" id="1714907">unsafe</span><span class="op" id="1714913">.</span><span class="ident" id="1714914">Pointer</span><span class="op" id="1714921">(</span><span class="op" id="1714922">&amp;</span><span class="ident" id="1714923">f</span><span class="op" id="1714924">.</span><span class="ident" id="1714925">nfuncdata</span><span class="op" id="1714934">)</span><span class="op" id="1714935">,</span>&nbsp;<span class="ident" id="1714937">unsafe</span><span class="op" id="1714943">.</span><span class="ident" id="1714944">Sizeof</span><span class="op" id="1714950">(</span><span class="ident" id="1714951">f</span><span class="op" id="1714952">.</span><span class="ident" id="1714953">nfuncdata</span><span class="op" id="1714962">)</span><span class="op" id="1714963">+</span><span class="builtintype" id="1714964">uintptr</span><span class="op" id="1714971">(</span><span class="ident" id="1714972">table</span><span class="op" id="1714977">)</span><span class="op" id="1714978">*</span><span class="num" id="1714979">4</span><span class="op" id="1714980">)</span><span class="op" id="1714981">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714984">return</span>&nbsp;<span class="ident" id="1714991">pcvalue</span><span class="op" id="1714998">(</span><span class="ident" id="1714999">f</span><span class="op" id="1715000">,</span>&nbsp;<span class="ident" id="1715002">off</span><span class="op" id="1715005">,</span>&nbsp;<span class="ident" id="1715007">targetpc</span><span class="op" id="1715015">,</span>&nbsp;<span class="builtintype" id="1715017">true</span><span class="op" id="1715021">)</span><br>
<span class="lineno"></span><span class="op" id="1715023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1715026">func</span>&nbsp;<span class="ident" id="1715031">funcdata</span><span class="op" id="1715039">(</span><span class="ident" id="1715040">f</span>&nbsp;<span class="op" id="1715042">*</span><span class="ident" id="1715043">_func</span><span class="op" id="1715048">,</span>&nbsp;<span class="ident" id="1715050">i</span>&nbsp;<span class="builtintype" id="1715052">int32</span><span class="op" id="1715057">)</span>&nbsp;<span class="ident" id="1715059">unsafe</span><span class="op" id="1715065">.</span><span class="ident" id="1715066">Pointer</span>&nbsp;<span class="op" id="1715074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715077">if</span>&nbsp;<span class="ident" id="1715080">i</span>&nbsp;<span class="op" id="1715082">&lt;</span>&nbsp;<span class="num" id="1715084">0</span>&nbsp;<span class="op" id="1715086">||</span>&nbsp;<span class="ident" id="1715089">i</span>&nbsp;<span class="op" id="1715091">&gt;=</span>&nbsp;<span class="ident" id="1715094">f</span><span class="op" id="1715095">.</span><span class="ident" id="1715096">nfuncdata</span>&nbsp;<span class="op" id="1715106">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715110">return</span>&nbsp;<span class="builtintype" id="1715117">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715125">p</span>&nbsp;<span class="op" id="1715127">:=</span>&nbsp;<span class="ident" id="1715130">add</span><span class="op" id="1715133">(</span><span class="ident" id="1715134">unsafe</span><span class="op" id="1715140">.</span><span class="ident" id="1715141">Pointer</span><span class="op" id="1715148">(</span><span class="op" id="1715149">&amp;</span><span class="ident" id="1715150">f</span><span class="op" id="1715151">.</span><span class="ident" id="1715152">nfuncdata</span><span class="op" id="1715161">)</span><span class="op" id="1715162">,</span>&nbsp;<span class="ident" id="1715164">unsafe</span><span class="op" id="1715170">.</span><span class="ident" id="1715171">Sizeof</span><span class="op" id="1715177">(</span><span class="ident" id="1715178">f</span><span class="op" id="1715179">.</span><span class="ident" id="1715180">nfuncdata</span><span class="op" id="1715189">)</span><span class="op" id="1715190">+</span><span class="builtintype" id="1715191">uintptr</span><span class="op" id="1715198">(</span><span class="ident" id="1715199">f</span><span class="op" id="1715200">.</span><span class="ident" id="1715201">npcdata</span><span class="op" id="1715208">)</span><span class="op" id="1715209">*</span><span class="num" id="1715210">4</span><span class="op" id="1715211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715214">if</span>&nbsp;<span class="ident" id="1715217">ptrSize</span>&nbsp;<span class="op" id="1715225">==</span>&nbsp;<span class="num" id="1715228">8</span>&nbsp;<span class="op" id="1715230">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1715233">uintptr</span><span class="op" id="1715240">(</span><span class="ident" id="1715241">p</span><span class="op" id="1715242">)</span><span class="op" id="1715243">&amp;</span><span class="num" id="1715244">4</span>&nbsp;<span class="op" id="1715246">!=</span>&nbsp;<span class="num" id="1715249">0</span>&nbsp;<span class="op" id="1715251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715255">if</span>&nbsp;<span class="builtintype" id="1715258">uintptr</span><span class="op" id="1715265">(</span><span class="ident" id="1715266">unsafe</span><span class="op" id="1715272">.</span><span class="ident" id="1715273">Pointer</span><span class="op" id="1715280">(</span><span class="ident" id="1715281">f</span><span class="op" id="1715282">)</span><span class="op" id="1715283">)</span><span class="op" id="1715284">&amp;</span><span class="num" id="1715285">4</span>&nbsp;<span class="op" id="1715287">!=</span>&nbsp;<span class="num" id="1715290">0</span>&nbsp;<span class="op" id="1715292">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1715297">println</span><span class="op" id="1715304">(</span><span class="string" id="1715305">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1715331">,</span>&nbsp;<span class="ident" id="1715333">f</span><span class="op" id="1715334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715342">p</span>&nbsp;<span class="op" id="1715344">=</span>&nbsp;<span class="ident" id="1715346">add</span><span class="op" id="1715349">(</span><span class="ident" id="1715350">p</span><span class="op" id="1715351">,</span>&nbsp;<span class="num" id="1715353">4</span><span class="op" id="1715354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715360">return</span>&nbsp;<span class="op" id="1715367">*</span><span class="op" id="1715368">(</span><span class="op" id="1715369">*</span><span class="ident" id="1715370">unsafe</span><span class="op" id="1715376">.</span><span class="ident" id="1715377">Pointer</span><span class="op" id="1715384">)</span><span class="op" id="1715385">(</span><span class="ident" id="1715386">add</span><span class="op" id="1715389">(</span><span class="ident" id="1715390">p</span><span class="op" id="1715391">,</span>&nbsp;<span class="builtintype" id="1715393">uintptr</span><span class="op" id="1715400">(</span><span class="ident" id="1715401">i</span><span class="op" id="1715402">)</span><span class="op" id="1715403">*</span><span class="ident" id="1715404">ptrSize</span><span class="op" id="1715411">)</span><span class="op" id="1715412">)</span><br>
<span class="lineno">255</span><span class="op" id="1715414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1715417">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1715483">func</span>&nbsp;<span class="ident" id="1715488">step</span><span class="op" id="1715492">(</span><span class="ident" id="1715493">p</span>&nbsp;<span class="op" id="1715495">[</span><span class="op" id="1715496">]</span><span class="builtintype" id="1715497">byte</span><span class="op" id="1715501">,</span>&nbsp;<span class="ident" id="1715503">pc</span>&nbsp;<span class="op" id="1715506">*</span><span class="builtintype" id="1715507">uintptr</span><span class="op" id="1715514">,</span>&nbsp;<span class="ident" id="1715516">val</span>&nbsp;<span class="op" id="1715520">*</span><span class="builtintype" id="1715521">int32</span><span class="op" id="1715526">,</span>&nbsp;<span class="ident" id="1715528">first</span>&nbsp;<span class="builtintype" id="1715534">bool</span><span class="op" id="1715538">)</span>&nbsp;<span class="op" id="1715540">(</span><span class="ident" id="1715541">newp</span>&nbsp;<span class="op" id="1715546">[</span><span class="op" id="1715547">]</span><span class="builtintype" id="1715548">byte</span><span class="op" id="1715552">,</span>&nbsp;<span class="ident" id="1715554">ok</span>&nbsp;<span class="builtintype" id="1715557">bool</span><span class="op" id="1715561">)</span>&nbsp;<span class="op" id="1715563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715566">p</span><span class="op" id="1715567">,</span>&nbsp;<span class="ident" id="1715569">uvdelta</span>&nbsp;<span class="op" id="1715577">:=</span>&nbsp;<span class="ident" id="1715580">readvarint</span><span class="op" id="1715590">(</span><span class="ident" id="1715591">p</span><span class="op" id="1715592">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715595">if</span>&nbsp;<span class="ident" id="1715598">uvdelta</span>&nbsp;<span class="op" id="1715606">==</span>&nbsp;<span class="num" id="1715609">0</span>&nbsp;<span class="op" id="1715611">&amp;&amp;</span>&nbsp;<span class="op" id="1715614">!</span><span class="ident" id="1715615">first</span>&nbsp;<span class="op" id="1715621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715625">return</span>&nbsp;<span class="builtintype" id="1715632">nil</span><span class="op" id="1715635">,</span>&nbsp;<span class="builtintype" id="1715637">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715647">if</span>&nbsp;<span class="ident" id="1715650">uvdelta</span><span class="op" id="1715657">&amp;</span><span class="num" id="1715658">1</span>&nbsp;<span class="op" id="1715660">!=</span>&nbsp;<span class="num" id="1715663">0</span>&nbsp;<span class="op" id="1715665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715669">uvdelta</span>&nbsp;<span class="op" id="1715677">=</span>&nbsp;<span class="op" id="1715679">^</span><span class="op" id="1715680">(</span><span class="ident" id="1715681">uvdelta</span>&nbsp;<span class="op" id="1715689">&gt;&gt;</span>&nbsp;<span class="num" id="1715692">1</span><span class="op" id="1715693">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715696">}</span>&nbsp;<span class="keyword" id="1715698">else</span>&nbsp;<span class="op" id="1715703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715707">uvdelta</span>&nbsp;<span class="op" id="1715715">&gt;&gt;=</span>&nbsp;<span class="num" id="1715719">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715725">vdelta</span>&nbsp;<span class="op" id="1715732">:=</span>&nbsp;<span class="builtintype" id="1715735">int32</span><span class="op" id="1715740">(</span><span class="ident" id="1715741">uvdelta</span><span class="op" id="1715748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715751">p</span><span class="op" id="1715752">,</span>&nbsp;<span class="ident" id="1715754">pcdelta</span>&nbsp;<span class="op" id="1715762">:=</span>&nbsp;<span class="ident" id="1715765">readvarint</span><span class="op" id="1715775">(</span><span class="ident" id="1715776">p</span><span class="op" id="1715777">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715780">*</span><span class="ident" id="1715781">pc</span>&nbsp;<span class="op" id="1715784">+=</span>&nbsp;<span class="builtintype" id="1715787">uintptr</span><span class="op" id="1715794">(</span><span class="ident" id="1715795">pcdelta</span>&nbsp;<span class="op" id="1715803">*</span>&nbsp;<span class="ident" id="1715805">_PCQuantum</span><span class="op" id="1715815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715818">*</span><span class="ident" id="1715819">val</span>&nbsp;<span class="op" id="1715823">+=</span>&nbsp;<span class="ident" id="1715826">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715834">return</span>&nbsp;<span class="ident" id="1715841">p</span><span class="op" id="1715842">,</span>&nbsp;<span class="builtintype" id="1715844">true</span><br>
<span class="lineno"></span><span class="op" id="1715849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1715852">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1715889">func</span>&nbsp;<span class="ident" id="1715894">readvarint</span><span class="op" id="1715904">(</span><span class="ident" id="1715905">p</span>&nbsp;<span class="op" id="1715907">[</span><span class="op" id="1715908">]</span><span class="builtintype" id="1715909">byte</span><span class="op" id="1715913">)</span>&nbsp;<span class="op" id="1715915">(</span><span class="ident" id="1715916">newp</span>&nbsp;<span class="op" id="1715921">[</span><span class="op" id="1715922">]</span><span class="builtintype" id="1715923">byte</span><span class="op" id="1715927">,</span>&nbsp;<span class="ident" id="1715929">val</span>&nbsp;<span class="builtintype" id="1715933">uint32</span><span class="op" id="1715939">)</span>&nbsp;<span class="op" id="1715941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715944">var</span>&nbsp;<span class="ident" id="1715948">v</span><span class="op" id="1715949">,</span>&nbsp;<span class="ident" id="1715951">shift</span>&nbsp;<span class="builtintype" id="1715957">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715965">for</span>&nbsp;<span class="op" id="1715969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715973">b</span>&nbsp;<span class="op" id="1715975">:=</span>&nbsp;<span class="ident" id="1715978">p</span><span class="op" id="1715979">[</span><span class="num" id="1715980">0</span><span class="op" id="1715981">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715985">p</span>&nbsp;<span class="op" id="1715987">=</span>&nbsp;<span class="ident" id="1715989">p</span><span class="op" id="1715990">[</span><span class="num" id="1715991">1</span><span class="op" id="1715992">:</span><span class="op" id="1715993">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715997">v</span>&nbsp;<span class="op" id="1715999">|=</span>&nbsp;<span class="op" id="1716002">(</span><span class="builtintype" id="1716003">uint32</span><span class="op" id="1716009">(</span><span class="ident" id="1716010">b</span><span class="op" id="1716011">)</span>&nbsp;<span class="op" id="1716013">&amp;</span>&nbsp;<span class="num" id="1716015">0x7F</span><span class="op" id="1716019">)</span>&nbsp;<span class="op" id="1716021">&lt;&lt;</span>&nbsp;<span class="ident" id="1716024">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716032">if</span>&nbsp;<span class="ident" id="1716035">b</span><span class="op" id="1716036">&amp;</span><span class="num" id="1716037">0x80</span>&nbsp;<span class="op" id="1716042">==</span>&nbsp;<span class="num" id="1716045">0</span>&nbsp;<span class="op" id="1716047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716052">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716060">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716064">shift</span>&nbsp;<span class="op" id="1716070">+=</span>&nbsp;<span class="num" id="1716073">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716079">return</span>&nbsp;<span class="ident" id="1716086">p</span><span class="op" id="1716087">,</span>&nbsp;<span class="ident" id="1716089">v</span><br>
<span class="lineno"></span><span class="op" id="1716091">}</span>
</div>
</body>
</html>
