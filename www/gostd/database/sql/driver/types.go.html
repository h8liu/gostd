<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html" class="current">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5747429">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5747484">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5747538">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5747589">package</span>&nbsp;<span class="ident" id="5747597">driver</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5747605">import</span>&nbsp;<span class="op" id="5747612">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5747615">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5747622">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5747633">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5747644">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5747651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5747654">//&nbsp;ValueConverter&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;ConvertValue&nbsp;method.</span><br>
<span class="lineno">15</span><span class="comment" id="5747724">//</span><br>
<span class="lineno"></span><span class="comment" id="5747727">//&nbsp;Various&nbsp;implementations&nbsp;of&nbsp;ValueConverter&nbsp;are&nbsp;provided&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5747792">//&nbsp;driver&nbsp;package&nbsp;to&nbsp;provide&nbsp;consistent&nbsp;implementations&nbsp;of&nbsp;conversions</span><br>
<span class="lineno"></span><span class="comment" id="5747863">//&nbsp;between&nbsp;drivers.&nbsp;&nbsp;The&nbsp;ValueConverters&nbsp;have&nbsp;several&nbsp;uses:</span><br>
<span class="lineno"></span><span class="comment" id="5747923">//</span><br>
<span class="lineno">20</span><span class="comment" id="5747926">//&nbsp;&nbsp;*&nbsp;converting&nbsp;from&nbsp;the&nbsp;Value&nbsp;types&nbsp;as&nbsp;provided&nbsp;by&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5747995">//&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;database&nbsp;table&#39;s&nbsp;specific&nbsp;column&nbsp;type&nbsp;and&nbsp;making&nbsp;sure&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5748065">//&nbsp;&nbsp;&nbsp;&nbsp;fits,&nbsp;such&nbsp;as&nbsp;making&nbsp;sure&nbsp;a&nbsp;particular&nbsp;int64&nbsp;fits&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5748126">//&nbsp;&nbsp;&nbsp;&nbsp;table&#39;s&nbsp;uint16&nbsp;column.</span><br>
<span class="lineno"></span><span class="comment" id="5748155">//</span><br>
<span class="lineno">25</span><span class="comment" id="5748158">//&nbsp;&nbsp;*&nbsp;converting&nbsp;a&nbsp;value&nbsp;as&nbsp;given&nbsp;from&nbsp;the&nbsp;database&nbsp;into&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5748226">//&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;Value&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="5748252">//</span><br>
<span class="lineno"></span><span class="comment" id="5748255">//&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;sql&nbsp;package,&nbsp;for&nbsp;converting&nbsp;from&nbsp;a&nbsp;driver&#39;s&nbsp;Value&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5748323">//&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;user&#39;s&nbsp;type&nbsp;in&nbsp;a&nbsp;scan.</span><br>
<span class="lineno">30</span><span class="keyword" id="5748357">type</span>&nbsp;<span class="ident" id="5748362">ValueConverter</span>&nbsp;<span class="keyword" id="5748377">interface</span>&nbsp;<span class="op" id="5748387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5748390">//&nbsp;ConvertValue&nbsp;converts&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748443">ConvertValue</span><span class="op" id="5748455">(</span><span class="ident" id="5748456">v</span>&nbsp;<span class="keyword" id="5748458">interface</span><span class="op" id="5748467">{</span><span class="op" id="5748468">}</span><span class="op" id="5748469">)</span>&nbsp;<span class="op" id="5748471">(</span><span class="ident" id="5748472">Value</span><span class="op" id="5748477">,</span>&nbsp;<span class="builtintype" id="5748479">error</span><span class="op" id="5748484">)</span><br>
<span class="lineno"></span><span class="op" id="5748486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5748489">//&nbsp;Valuer&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;Value&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5748544">//</span><br>
<span class="lineno"></span><span class="comment" id="5748547">//&nbsp;Types&nbsp;implementing&nbsp;Valuer&nbsp;interface&nbsp;are&nbsp;able&nbsp;to&nbsp;convert</span><br>
<span class="lineno"></span><span class="comment" id="5748606">//&nbsp;themselves&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="5748639">type</span>&nbsp;<span class="ident" id="5748644">Valuer</span>&nbsp;<span class="keyword" id="5748651">interface</span>&nbsp;<span class="op" id="5748661">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5748664">//&nbsp;Value&nbsp;returns&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748698">Value</span><span class="op" id="5748703">(</span><span class="op" id="5748704">)</span>&nbsp;<span class="op" id="5748706">(</span><span class="ident" id="5748707">Value</span><span class="op" id="5748712">,</span>&nbsp;<span class="builtintype" id="5748714">error</span><span class="op" id="5748719">)</span><br>
<span class="lineno"></span><span class="op" id="5748721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5748724">//&nbsp;Bool&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;bools.</span><br>
<span class="lineno">45</span><span class="comment" id="5748789">//</span><br>
<span class="lineno"></span><span class="comment" id="5748792">//&nbsp;The&nbsp;conversion&nbsp;rules&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5748821">//&nbsp;&nbsp;-&nbsp;booleans&nbsp;are&nbsp;returned&nbsp;unchanged</span><br>
<span class="lineno"></span><span class="comment" id="5748859">//&nbsp;&nbsp;-&nbsp;for&nbsp;integer&nbsp;types,</span><br>
<span class="lineno"></span><span class="comment" id="5748884">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;is&nbsp;true</span><br>
<span class="lineno">50</span><span class="comment" id="5748903">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;is&nbsp;false,</span><br>
<span class="lineno"></span><span class="comment" id="5748924">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;integers&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5748961">//&nbsp;&nbsp;-&nbsp;for&nbsp;strings&nbsp;and&nbsp;[]byte,&nbsp;same&nbsp;rules&nbsp;as&nbsp;strconv.ParseBool</span><br>
<span class="lineno"></span><span class="comment" id="5749023">//&nbsp;&nbsp;-&nbsp;all&nbsp;other&nbsp;types&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="5749058">var</span>&nbsp;<span class="ident" id="5749062">Bool</span>&nbsp;<span class="ident" id="5749067">boolType</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5749077">type</span>&nbsp;<span class="ident" id="5749082">boolType</span>&nbsp;<span class="keyword" id="5749091">struct</span><span class="op" id="5749097">{</span><span class="op" id="5749098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5749101">var</span>&nbsp;<span class="ident" id="5749105">_</span>&nbsp;<span class="ident" id="5749107">ValueConverter</span>&nbsp;<span class="op" id="5749122">=</span>&nbsp;<span class="ident" id="5749124">boolType</span><span class="op" id="5749132">{</span><span class="op" id="5749133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5749136">func</span>&nbsp;<span class="op" id="5749141">(</span><span class="ident" id="5749142">boolType</span><span class="op" id="5749150">)</span>&nbsp;<span class="ident" id="5749152">String</span><span class="op" id="5749158">(</span><span class="op" id="5749159">)</span>&nbsp;<span class="builtintype" id="5749161">string</span>&nbsp;<span class="op" id="5749168">{</span>&nbsp;<span class="keyword" id="5749170">return</span>&nbsp;<span class="string" id="5749177">&#34;Bool&#34;</span>&nbsp;<span class="op" id="5749184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5749187">func</span>&nbsp;<span class="op" id="5749192">(</span><span class="ident" id="5749193">boolType</span><span class="op" id="5749201">)</span>&nbsp;<span class="ident" id="5749203">ConvertValue</span><span class="op" id="5749215">(</span><span class="ident" id="5749216">src</span>&nbsp;<span class="keyword" id="5749220">interface</span><span class="op" id="5749229">{</span><span class="op" id="5749230">}</span><span class="op" id="5749231">)</span>&nbsp;<span class="op" id="5749233">(</span><span class="ident" id="5749234">Value</span><span class="op" id="5749239">,</span>&nbsp;<span class="builtintype" id="5749241">error</span><span class="op" id="5749246">)</span>&nbsp;<span class="op" id="5749248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749251">switch</span>&nbsp;<span class="ident" id="5749258">s</span>&nbsp;<span class="op" id="5749260">:=</span>&nbsp;<span class="ident" id="5749263">src</span><span class="op" id="5749266">.</span><span class="op" id="5749267">(</span><span class="keyword" id="5749268">type</span><span class="op" id="5749272">)</span>&nbsp;<span class="op" id="5749274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749277">case</span>&nbsp;<span class="builtintype" id="5749282">bool</span><span class="op" id="5749286">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749290">return</span>&nbsp;<span class="ident" id="5749297">s</span><span class="op" id="5749298">,</span>&nbsp;<span class="ident" id="5749300">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749305">case</span>&nbsp;<span class="builtintype" id="5749310">string</span><span class="op" id="5749316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749320">b</span><span class="op" id="5749321">,</span>&nbsp;<span class="ident" id="5749323">err</span>&nbsp;<span class="op" id="5749327">:=</span>&nbsp;<span class="ident" id="5749330">strconv</span><span class="op" id="5749337">.</span><span class="ident" id="5749338">ParseBool</span><span class="op" id="5749347">(</span><span class="ident" id="5749348">s</span><span class="op" id="5749349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749353">if</span>&nbsp;<span class="ident" id="5749356">err</span>&nbsp;<span class="op" id="5749360">!=</span>&nbsp;<span class="ident" id="5749363">nil</span>&nbsp;<span class="op" id="5749367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749372">return</span>&nbsp;<span class="ident" id="5749379">nil</span><span class="op" id="5749382">,</span>&nbsp;<span class="ident" id="5749384">fmt</span><span class="op" id="5749387">.</span><span class="ident" id="5749388">Errorf</span><span class="op" id="5749394">(</span><span class="string" id="5749395">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5749443">,</span>&nbsp;<span class="ident" id="5749445">s</span><span class="op" id="5749446">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749454">return</span>&nbsp;<span class="ident" id="5749461">b</span><span class="op" id="5749462">,</span>&nbsp;<span class="ident" id="5749464">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749469">case</span>&nbsp;<span class="op" id="5749474">[</span><span class="op" id="5749475">]</span><span class="builtintype" id="5749476">byte</span><span class="op" id="5749480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749484">b</span><span class="op" id="5749485">,</span>&nbsp;<span class="ident" id="5749487">err</span>&nbsp;<span class="op" id="5749491">:=</span>&nbsp;<span class="ident" id="5749494">strconv</span><span class="op" id="5749501">.</span><span class="ident" id="5749502">ParseBool</span><span class="op" id="5749511">(</span><span class="builtintype" id="5749512">string</span><span class="op" id="5749518">(</span><span class="ident" id="5749519">s</span><span class="op" id="5749520">)</span><span class="op" id="5749521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749525">if</span>&nbsp;<span class="ident" id="5749528">err</span>&nbsp;<span class="op" id="5749532">!=</span>&nbsp;<span class="ident" id="5749535">nil</span>&nbsp;<span class="op" id="5749539">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749544">return</span>&nbsp;<span class="ident" id="5749551">nil</span><span class="op" id="5749554">,</span>&nbsp;<span class="ident" id="5749556">fmt</span><span class="op" id="5749559">.</span><span class="ident" id="5749560">Errorf</span><span class="op" id="5749566">(</span><span class="string" id="5749567">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5749615">,</span>&nbsp;<span class="ident" id="5749617">s</span><span class="op" id="5749618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749626">return</span>&nbsp;<span class="ident" id="5749633">b</span><span class="op" id="5749634">,</span>&nbsp;<span class="ident" id="5749636">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749645">sv</span>&nbsp;<span class="op" id="5749648">:=</span>&nbsp;<span class="ident" id="5749651">reflect</span><span class="op" id="5749658">.</span><span class="ident" id="5749659">ValueOf</span><span class="op" id="5749666">(</span><span class="ident" id="5749667">src</span><span class="op" id="5749670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749673">switch</span>&nbsp;<span class="ident" id="5749680">sv</span><span class="op" id="5749682">.</span><span class="ident" id="5749683">Kind</span><span class="op" id="5749687">(</span><span class="op" id="5749688">)</span>&nbsp;<span class="op" id="5749690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749693">case</span>&nbsp;<span class="ident" id="5749698">reflect</span><span class="op" id="5749705">.</span><span class="ident" id="5749706">Int</span><span class="op" id="5749709">,</span>&nbsp;<span class="ident" id="5749711">reflect</span><span class="op" id="5749718">.</span><span class="ident" id="5749719">Int8</span><span class="op" id="5749723">,</span>&nbsp;<span class="ident" id="5749725">reflect</span><span class="op" id="5749732">.</span><span class="ident" id="5749733">Int16</span><span class="op" id="5749738">,</span>&nbsp;<span class="ident" id="5749740">reflect</span><span class="op" id="5749747">.</span><span class="ident" id="5749748">Int32</span><span class="op" id="5749753">,</span>&nbsp;<span class="ident" id="5749755">reflect</span><span class="op" id="5749762">.</span><span class="ident" id="5749763">Int64</span><span class="op" id="5749768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749772">iv</span>&nbsp;<span class="op" id="5749775">:=</span>&nbsp;<span class="ident" id="5749778">sv</span><span class="op" id="5749780">.</span><span class="ident" id="5749781">Int</span><span class="op" id="5749784">(</span><span class="op" id="5749785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749789">if</span>&nbsp;<span class="ident" id="5749792">iv</span>&nbsp;<span class="op" id="5749795">==</span>&nbsp;<span class="num" id="5749798">1</span>&nbsp;<span class="op" id="5749800">||</span>&nbsp;<span class="ident" id="5749803">iv</span>&nbsp;<span class="op" id="5749806">==</span>&nbsp;<span class="num" id="5749809">0</span>&nbsp;<span class="op" id="5749811">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749816">return</span>&nbsp;<span class="ident" id="5749823">iv</span>&nbsp;<span class="op" id="5749826">==</span>&nbsp;<span class="num" id="5749829">1</span><span class="op" id="5749830">,</span>&nbsp;<span class="ident" id="5749832">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749842">return</span>&nbsp;<span class="ident" id="5749849">nil</span><span class="op" id="5749852">,</span>&nbsp;<span class="ident" id="5749854">fmt</span><span class="op" id="5749857">.</span><span class="ident" id="5749858">Errorf</span><span class="op" id="5749864">(</span><span class="string" id="5749865">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5749913">,</span>&nbsp;<span class="ident" id="5749915">iv</span><span class="op" id="5749917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749920">case</span>&nbsp;<span class="ident" id="5749925">reflect</span><span class="op" id="5749932">.</span><span class="ident" id="5749933">Uint</span><span class="op" id="5749937">,</span>&nbsp;<span class="ident" id="5749939">reflect</span><span class="op" id="5749946">.</span><span class="ident" id="5749947">Uint8</span><span class="op" id="5749952">,</span>&nbsp;<span class="ident" id="5749954">reflect</span><span class="op" id="5749961">.</span><span class="ident" id="5749962">Uint16</span><span class="op" id="5749968">,</span>&nbsp;<span class="ident" id="5749970">reflect</span><span class="op" id="5749977">.</span><span class="ident" id="5749978">Uint32</span><span class="op" id="5749984">,</span>&nbsp;<span class="ident" id="5749986">reflect</span><span class="op" id="5749993">.</span><span class="ident" id="5749994">Uint64</span><span class="op" id="5750000">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750004">uv</span>&nbsp;<span class="op" id="5750007">:=</span>&nbsp;<span class="ident" id="5750010">sv</span><span class="op" id="5750012">.</span><span class="ident" id="5750013">Uint</span><span class="op" id="5750017">(</span><span class="op" id="5750018">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750022">if</span>&nbsp;<span class="ident" id="5750025">uv</span>&nbsp;<span class="op" id="5750028">==</span>&nbsp;<span class="num" id="5750031">1</span>&nbsp;<span class="op" id="5750033">||</span>&nbsp;<span class="ident" id="5750036">uv</span>&nbsp;<span class="op" id="5750039">==</span>&nbsp;<span class="num" id="5750042">0</span>&nbsp;<span class="op" id="5750044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750049">return</span>&nbsp;<span class="ident" id="5750056">uv</span>&nbsp;<span class="op" id="5750059">==</span>&nbsp;<span class="num" id="5750062">1</span><span class="op" id="5750063">,</span>&nbsp;<span class="ident" id="5750065">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5750071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750075">return</span>&nbsp;<span class="ident" id="5750082">nil</span><span class="op" id="5750085">,</span>&nbsp;<span class="ident" id="5750087">fmt</span><span class="op" id="5750090">.</span><span class="ident" id="5750091">Errorf</span><span class="op" id="5750097">(</span><span class="string" id="5750098">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5750146">,</span>&nbsp;<span class="ident" id="5750148">uv</span><span class="op" id="5750150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5750153">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750157">return</span>&nbsp;<span class="ident" id="5750164">nil</span><span class="op" id="5750167">,</span>&nbsp;<span class="ident" id="5750169">fmt</span><span class="op" id="5750172">.</span><span class="ident" id="5750173">Errorf</span><span class="op" id="5750179">(</span><span class="string" id="5750180">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%v&nbsp;(%T)&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5750233">,</span>&nbsp;<span class="ident" id="5750235">src</span><span class="op" id="5750238">,</span>&nbsp;<span class="ident" id="5750240">src</span><span class="op" id="5750243">)</span><br>
<span class="lineno"></span><span class="op" id="5750245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5750248">//&nbsp;Int32&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;int64,</span><br>
<span class="lineno">100</span><span class="comment" id="5750314">//&nbsp;respecting&nbsp;the&nbsp;limits&nbsp;of&nbsp;an&nbsp;int32&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5750358">var</span>&nbsp;<span class="ident" id="5750362">Int32</span>&nbsp;<span class="ident" id="5750368">int32Type</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5750379">type</span>&nbsp;<span class="ident" id="5750384">int32Type</span>&nbsp;<span class="keyword" id="5750394">struct</span><span class="op" id="5750400">{</span><span class="op" id="5750401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5750404">var</span>&nbsp;<span class="ident" id="5750408">_</span>&nbsp;<span class="ident" id="5750410">ValueConverter</span>&nbsp;<span class="op" id="5750425">=</span>&nbsp;<span class="ident" id="5750427">int32Type</span><span class="op" id="5750436">{</span><span class="op" id="5750437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5750440">func</span>&nbsp;<span class="op" id="5750445">(</span><span class="ident" id="5750446">int32Type</span><span class="op" id="5750455">)</span>&nbsp;<span class="ident" id="5750457">ConvertValue</span><span class="op" id="5750469">(</span><span class="ident" id="5750470">v</span>&nbsp;<span class="keyword" id="5750472">interface</span><span class="op" id="5750481">{</span><span class="op" id="5750482">}</span><span class="op" id="5750483">)</span>&nbsp;<span class="op" id="5750485">(</span><span class="ident" id="5750486">Value</span><span class="op" id="5750491">,</span>&nbsp;<span class="builtintype" id="5750493">error</span><span class="op" id="5750498">)</span>&nbsp;<span class="op" id="5750500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750503">rv</span>&nbsp;<span class="op" id="5750506">:=</span>&nbsp;<span class="ident" id="5750509">reflect</span><span class="op" id="5750516">.</span><span class="ident" id="5750517">ValueOf</span><span class="op" id="5750524">(</span><span class="ident" id="5750525">v</span><span class="op" id="5750526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750529">switch</span>&nbsp;<span class="ident" id="5750536">rv</span><span class="op" id="5750538">.</span><span class="ident" id="5750539">Kind</span><span class="op" id="5750543">(</span><span class="op" id="5750544">)</span>&nbsp;<span class="op" id="5750546">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750549">case</span>&nbsp;<span class="ident" id="5750554">reflect</span><span class="op" id="5750561">.</span><span class="ident" id="5750562">Int</span><span class="op" id="5750565">,</span>&nbsp;<span class="ident" id="5750567">reflect</span><span class="op" id="5750574">.</span><span class="ident" id="5750575">Int8</span><span class="op" id="5750579">,</span>&nbsp;<span class="ident" id="5750581">reflect</span><span class="op" id="5750588">.</span><span class="ident" id="5750589">Int16</span><span class="op" id="5750594">,</span>&nbsp;<span class="ident" id="5750596">reflect</span><span class="op" id="5750603">.</span><span class="ident" id="5750604">Int32</span><span class="op" id="5750609">,</span>&nbsp;<span class="ident" id="5750611">reflect</span><span class="op" id="5750618">.</span><span class="ident" id="5750619">Int64</span><span class="op" id="5750624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750628">i64</span>&nbsp;<span class="op" id="5750632">:=</span>&nbsp;<span class="ident" id="5750635">rv</span><span class="op" id="5750637">.</span><span class="ident" id="5750638">Int</span><span class="op" id="5750641">(</span><span class="op" id="5750642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750646">if</span>&nbsp;<span class="ident" id="5750649">i64</span>&nbsp;<span class="op" id="5750653">&gt;</span>&nbsp;<span class="op" id="5750655">(</span><span class="num" id="5750656">1</span><span class="op" id="5750657">&lt;&lt;</span><span class="num" id="5750659">31</span><span class="op" id="5750661">)</span><span class="op" id="5750662">-</span><span class="num" id="5750663">1</span>&nbsp;<span class="op" id="5750665">||</span>&nbsp;<span class="ident" id="5750668">i64</span>&nbsp;<span class="op" id="5750672">&lt;</span>&nbsp;<span class="op" id="5750674">-</span><span class="op" id="5750675">(</span><span class="num" id="5750676">1</span><span class="op" id="5750677">&lt;&lt;</span><span class="num" id="5750679">31</span><span class="op" id="5750681">)</span>&nbsp;<span class="op" id="5750683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750688">return</span>&nbsp;<span class="ident" id="5750695">nil</span><span class="op" id="5750698">,</span>&nbsp;<span class="ident" id="5750700">fmt</span><span class="op" id="5750703">.</span><span class="ident" id="5750704">Errorf</span><span class="op" id="5750710">(</span><span class="string" id="5750711">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5750749">,</span>&nbsp;<span class="ident" id="5750751">v</span><span class="op" id="5750752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5750756">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750760">return</span>&nbsp;<span class="ident" id="5750767">i64</span><span class="op" id="5750770">,</span>&nbsp;<span class="ident" id="5750772">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750777">case</span>&nbsp;<span class="ident" id="5750782">reflect</span><span class="op" id="5750789">.</span><span class="ident" id="5750790">Uint</span><span class="op" id="5750794">,</span>&nbsp;<span class="ident" id="5750796">reflect</span><span class="op" id="5750803">.</span><span class="ident" id="5750804">Uint8</span><span class="op" id="5750809">,</span>&nbsp;<span class="ident" id="5750811">reflect</span><span class="op" id="5750818">.</span><span class="ident" id="5750819">Uint16</span><span class="op" id="5750825">,</span>&nbsp;<span class="ident" id="5750827">reflect</span><span class="op" id="5750834">.</span><span class="ident" id="5750835">Uint32</span><span class="op" id="5750841">,</span>&nbsp;<span class="ident" id="5750843">reflect</span><span class="op" id="5750850">.</span><span class="ident" id="5750851">Uint64</span><span class="op" id="5750857">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750861">u64</span>&nbsp;<span class="op" id="5750865">:=</span>&nbsp;<span class="ident" id="5750868">rv</span><span class="op" id="5750870">.</span><span class="ident" id="5750871">Uint</span><span class="op" id="5750875">(</span><span class="op" id="5750876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750880">if</span>&nbsp;<span class="ident" id="5750883">u64</span>&nbsp;<span class="op" id="5750887">&gt;</span>&nbsp;<span class="op" id="5750889">(</span><span class="num" id="5750890">1</span><span class="op" id="5750891">&lt;&lt;</span><span class="num" id="5750893">31</span><span class="op" id="5750895">)</span><span class="op" id="5750896">-</span><span class="num" id="5750897">1</span>&nbsp;<span class="op" id="5750899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750904">return</span>&nbsp;<span class="ident" id="5750911">nil</span><span class="op" id="5750914">,</span>&nbsp;<span class="ident" id="5750916">fmt</span><span class="op" id="5750919">.</span><span class="ident" id="5750920">Errorf</span><span class="op" id="5750926">(</span><span class="string" id="5750927">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5750965">,</span>&nbsp;<span class="ident" id="5750967">v</span><span class="op" id="5750968">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5750972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5750976">return</span>&nbsp;<span class="ident" id="5750983">int64</span><span class="op" id="5750988">(</span><span class="ident" id="5750989">u64</span><span class="op" id="5750992">)</span><span class="op" id="5750993">,</span>&nbsp;<span class="ident" id="5750995">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751000">case</span>&nbsp;<span class="ident" id="5751005">reflect</span><span class="op" id="5751012">.</span><span class="ident" id="5751013">String</span><span class="op" id="5751019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751023">i</span><span class="op" id="5751024">,</span>&nbsp;<span class="ident" id="5751026">err</span>&nbsp;<span class="op" id="5751030">:=</span>&nbsp;<span class="ident" id="5751033">strconv</span><span class="op" id="5751040">.</span><span class="ident" id="5751041">Atoi</span><span class="op" id="5751045">(</span><span class="ident" id="5751046">rv</span><span class="op" id="5751048">.</span><span class="ident" id="5751049">String</span><span class="op" id="5751055">(</span><span class="op" id="5751056">)</span><span class="op" id="5751057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751061">if</span>&nbsp;<span class="ident" id="5751064">err</span>&nbsp;<span class="op" id="5751068">!=</span>&nbsp;<span class="ident" id="5751071">nil</span>&nbsp;<span class="op" id="5751075">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751080">return</span>&nbsp;<span class="ident" id="5751087">nil</span><span class="op" id="5751090">,</span>&nbsp;<span class="ident" id="5751092">fmt</span><span class="op" id="5751095">.</span><span class="ident" id="5751096">Errorf</span><span class="op" id="5751102">(</span><span class="string" id="5751103">&#34;sql/driver:&nbsp;value&nbsp;%q&nbsp;can&#39;t&nbsp;be&nbsp;converted&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5751153">,</span>&nbsp;<span class="ident" id="5751155">v</span><span class="op" id="5751156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751164">return</span>&nbsp;<span class="ident" id="5751171">int64</span><span class="op" id="5751176">(</span><span class="ident" id="5751177">i</span><span class="op" id="5751178">)</span><span class="op" id="5751179">,</span>&nbsp;<span class="ident" id="5751181">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751189">return</span>&nbsp;<span class="ident" id="5751196">nil</span><span class="op" id="5751199">,</span>&nbsp;<span class="ident" id="5751201">fmt</span><span class="op" id="5751204">.</span><span class="ident" id="5751205">Errorf</span><span class="op" id="5751211">(</span><span class="string" id="5751212">&#34;sql/driver:&nbsp;unsupported&nbsp;value&nbsp;%v&nbsp;(type&nbsp;%T)&nbsp;converting&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5751276">,</span>&nbsp;<span class="ident" id="5751278">v</span><span class="op" id="5751279">,</span>&nbsp;<span class="ident" id="5751281">v</span><span class="op" id="5751282">)</span><br>
<span class="lineno">130</span><span class="op" id="5751284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5751287">//&nbsp;String&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;its&nbsp;input&nbsp;to&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5751354">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;already&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte,&nbsp;it&#39;s&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5751417">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;of&nbsp;another&nbsp;type,&nbsp;conversion&nbsp;to&nbsp;string&nbsp;is&nbsp;done</span><br>
<span class="lineno">135</span><span class="comment" id="5751482">//&nbsp;with&nbsp;fmt.Sprintf(&#34;%v&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="5751512">var</span>&nbsp;<span class="ident" id="5751516">String</span>&nbsp;<span class="ident" id="5751523">stringType</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5751535">type</span>&nbsp;<span class="ident" id="5751540">stringType</span>&nbsp;<span class="keyword" id="5751551">struct</span><span class="op" id="5751557">{</span><span class="op" id="5751558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="5751561">func</span>&nbsp;<span class="op" id="5751566">(</span><span class="ident" id="5751567">stringType</span><span class="op" id="5751577">)</span>&nbsp;<span class="ident" id="5751579">ConvertValue</span><span class="op" id="5751591">(</span><span class="ident" id="5751592">v</span>&nbsp;<span class="keyword" id="5751594">interface</span><span class="op" id="5751603">{</span><span class="op" id="5751604">}</span><span class="op" id="5751605">)</span>&nbsp;<span class="op" id="5751607">(</span><span class="ident" id="5751608">Value</span><span class="op" id="5751613">,</span>&nbsp;<span class="builtintype" id="5751615">error</span><span class="op" id="5751620">)</span>&nbsp;<span class="op" id="5751622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751625">switch</span>&nbsp;<span class="ident" id="5751632">v</span><span class="op" id="5751633">.</span><span class="op" id="5751634">(</span><span class="keyword" id="5751635">type</span><span class="op" id="5751639">)</span>&nbsp;<span class="op" id="5751641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751644">case</span>&nbsp;<span class="builtintype" id="5751649">string</span><span class="op" id="5751655">,</span>&nbsp;<span class="op" id="5751657">[</span><span class="op" id="5751658">]</span><span class="builtintype" id="5751659">byte</span><span class="op" id="5751663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751667">return</span>&nbsp;<span class="ident" id="5751674">v</span><span class="op" id="5751675">,</span>&nbsp;<span class="ident" id="5751677">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751682">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751685">return</span>&nbsp;<span class="ident" id="5751692">fmt</span><span class="op" id="5751695">.</span><span class="ident" id="5751696">Sprintf</span><span class="op" id="5751703">(</span><span class="string" id="5751704">&#34;%v&#34;</span><span class="op" id="5751708">,</span>&nbsp;<span class="ident" id="5751710">v</span><span class="op" id="5751711">)</span><span class="op" id="5751712">,</span>&nbsp;<span class="ident" id="5751714">nil</span><br>
<span class="lineno"></span><span class="op" id="5751718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5751721">//&nbsp;Null&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;allowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5751786">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno">150</span><span class="keyword" id="5751848">type</span>&nbsp;<span class="ident" id="5751853">Null</span>&nbsp;<span class="keyword" id="5751858">struct</span>&nbsp;<span class="op" id="5751865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751868">Converter</span>&nbsp;<span class="ident" id="5751878">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="5751893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5751896">func</span>&nbsp;<span class="op" id="5751901">(</span><span class="ident" id="5751902">n</span>&nbsp;<span class="ident" id="5751904">Null</span><span class="op" id="5751908">)</span>&nbsp;<span class="ident" id="5751910">ConvertValue</span><span class="op" id="5751922">(</span><span class="ident" id="5751923">v</span>&nbsp;<span class="keyword" id="5751925">interface</span><span class="op" id="5751934">{</span><span class="op" id="5751935">}</span><span class="op" id="5751936">)</span>&nbsp;<span class="op" id="5751938">(</span><span class="ident" id="5751939">Value</span><span class="op" id="5751944">,</span>&nbsp;<span class="builtintype" id="5751946">error</span><span class="op" id="5751951">)</span>&nbsp;<span class="op" id="5751953">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751956">if</span>&nbsp;<span class="ident" id="5751959">v</span>&nbsp;<span class="op" id="5751961">==</span>&nbsp;<span class="ident" id="5751964">nil</span>&nbsp;<span class="op" id="5751968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751972">return</span>&nbsp;<span class="ident" id="5751979">nil</span><span class="op" id="5751982">,</span>&nbsp;<span class="ident" id="5751984">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751992">return</span>&nbsp;<span class="ident" id="5751999">n</span><span class="op" id="5752000">.</span><span class="ident" id="5752001">Converter</span><span class="op" id="5752010">.</span><span class="ident" id="5752011">ConvertValue</span><span class="op" id="5752023">(</span><span class="ident" id="5752024">v</span><span class="op" id="5752025">)</span><br>
<span class="lineno"></span><span class="op" id="5752027">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="5752030">//&nbsp;NotNull&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;disallowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5752101">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno"></span><span class="keyword" id="5752163">type</span>&nbsp;<span class="ident" id="5752168">NotNull</span>&nbsp;<span class="keyword" id="5752176">struct</span>&nbsp;<span class="op" id="5752183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752186">Converter</span>&nbsp;<span class="ident" id="5752196">ValueConverter</span><br>
<span class="lineno">165</span><span class="op" id="5752211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5752214">func</span>&nbsp;<span class="op" id="5752219">(</span><span class="ident" id="5752220">n</span>&nbsp;<span class="ident" id="5752222">NotNull</span><span class="op" id="5752229">)</span>&nbsp;<span class="ident" id="5752231">ConvertValue</span><span class="op" id="5752243">(</span><span class="ident" id="5752244">v</span>&nbsp;<span class="keyword" id="5752246">interface</span><span class="op" id="5752255">{</span><span class="op" id="5752256">}</span><span class="op" id="5752257">)</span>&nbsp;<span class="op" id="5752259">(</span><span class="ident" id="5752260">Value</span><span class="op" id="5752265">,</span>&nbsp;<span class="builtintype" id="5752267">error</span><span class="op" id="5752272">)</span>&nbsp;<span class="op" id="5752274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752277">if</span>&nbsp;<span class="ident" id="5752280">v</span>&nbsp;<span class="op" id="5752282">==</span>&nbsp;<span class="ident" id="5752285">nil</span>&nbsp;<span class="op" id="5752289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752293">return</span>&nbsp;<span class="ident" id="5752300">nil</span><span class="op" id="5752303">,</span>&nbsp;<span class="ident" id="5752305">fmt</span><span class="op" id="5752308">.</span><span class="ident" id="5752309">Errorf</span><span class="op" id="5752315">(</span><span class="string" id="5752316">&#34;nil&nbsp;value&nbsp;not&nbsp;allowed&#34;</span><span class="op" id="5752339">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752345">return</span>&nbsp;<span class="ident" id="5752352">n</span><span class="op" id="5752353">.</span><span class="ident" id="5752354">Converter</span><span class="op" id="5752363">.</span><span class="ident" id="5752364">ConvertValue</span><span class="op" id="5752376">(</span><span class="ident" id="5752377">v</span><span class="op" id="5752378">)</span><br>
<span class="lineno"></span><span class="op" id="5752380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5752383">//&nbsp;IsValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;parameter&nbsp;type.</span><br>
<span class="lineno">175</span><span class="comment" id="5752445">//&nbsp;Unlike&nbsp;IsScanValue,&nbsp;IsValue&nbsp;permits&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5752501">func</span>&nbsp;<span class="ident" id="5752506">IsValue</span><span class="op" id="5752513">(</span><span class="ident" id="5752514">v</span>&nbsp;<span class="keyword" id="5752516">interface</span><span class="op" id="5752525">{</span><span class="op" id="5752526">}</span><span class="op" id="5752527">)</span>&nbsp;<span class="builtintype" id="5752529">bool</span>&nbsp;<span class="op" id="5752534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752537">if</span>&nbsp;<span class="ident" id="5752540">IsScanValue</span><span class="op" id="5752551">(</span><span class="ident" id="5752552">v</span><span class="op" id="5752553">)</span>&nbsp;<span class="op" id="5752555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752559">return</span>&nbsp;<span class="builtintype" id="5752566">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752572">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752575">if</span>&nbsp;<span class="ident" id="5752578">_</span><span class="op" id="5752579">,</span>&nbsp;<span class="ident" id="5752581">ok</span>&nbsp;<span class="op" id="5752584">:=</span>&nbsp;<span class="ident" id="5752587">v</span><span class="op" id="5752588">.</span><span class="op" id="5752589">(</span><span class="builtintype" id="5752590">string</span><span class="op" id="5752596">)</span><span class="op" id="5752597">;</span>&nbsp;<span class="ident" id="5752599">ok</span>&nbsp;<span class="op" id="5752602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752606">return</span>&nbsp;<span class="builtintype" id="5752613">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752622">return</span>&nbsp;<span class="builtintype" id="5752629">false</span><br>
<span class="lineno"></span><span class="op" id="5752635">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="5752638">//&nbsp;IsScanValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;scan&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5752699">//&nbsp;Unlike&nbsp;IsValue,&nbsp;IsScanValue&nbsp;does&nbsp;not&nbsp;permit&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5752763">func</span>&nbsp;<span class="ident" id="5752768">IsScanValue</span><span class="op" id="5752779">(</span><span class="ident" id="5752780">v</span>&nbsp;<span class="keyword" id="5752782">interface</span><span class="op" id="5752791">{</span><span class="op" id="5752792">}</span><span class="op" id="5752793">)</span>&nbsp;<span class="builtintype" id="5752795">bool</span>&nbsp;<span class="op" id="5752800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752803">if</span>&nbsp;<span class="ident" id="5752806">v</span>&nbsp;<span class="op" id="5752808">==</span>&nbsp;<span class="ident" id="5752811">nil</span>&nbsp;<span class="op" id="5752815">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752819">return</span>&nbsp;<span class="builtintype" id="5752826">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752835">switch</span>&nbsp;<span class="ident" id="5752842">v</span><span class="op" id="5752843">.</span><span class="op" id="5752844">(</span><span class="keyword" id="5752845">type</span><span class="op" id="5752849">)</span>&nbsp;<span class="op" id="5752851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752854">case</span>&nbsp;<span class="ident" id="5752859">int64</span><span class="op" id="5752864">,</span>&nbsp;<span class="builtintype" id="5752866">float64</span><span class="op" id="5752873">,</span>&nbsp;<span class="op" id="5752875">[</span><span class="op" id="5752876">]</span><span class="builtintype" id="5752877">byte</span><span class="op" id="5752881">,</span>&nbsp;<span class="builtintype" id="5752883">bool</span><span class="op" id="5752887">,</span>&nbsp;<span class="ident" id="5752889">time</span><span class="op" id="5752893">.</span><span class="ident" id="5752894">Time</span><span class="op" id="5752898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752902">return</span>&nbsp;<span class="builtintype" id="5752909">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752918">return</span>&nbsp;<span class="builtintype" id="5752925">false</span><br>
<span class="lineno"></span><span class="op" id="5752931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5752934">//&nbsp;DefaultParameterConverter&nbsp;is&nbsp;the&nbsp;default&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">200</span><span class="comment" id="5752996">//&nbsp;ValueConverter&nbsp;that&#39;s&nbsp;used&nbsp;when&nbsp;a&nbsp;Stmt&nbsp;doesn&#39;t&nbsp;implement</span><br>
<span class="lineno"></span><span class="comment" id="5753056">//&nbsp;ColumnConverter.</span><br>
<span class="lineno"></span><span class="comment" id="5753076">//</span><br>
<span class="lineno"></span><span class="comment" id="5753079">//&nbsp;DefaultParameterConverter&nbsp;returns&nbsp;the&nbsp;given&nbsp;value&nbsp;directly&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5753144">//&nbsp;IsValue(value).&nbsp;&nbsp;Otherwise&nbsp;integer&nbsp;type&nbsp;are&nbsp;converted&nbsp;to</span><br>
<span class="lineno">205</span><span class="comment" id="5753204">//&nbsp;int64,&nbsp;floats&nbsp;to&nbsp;float64,&nbsp;and&nbsp;strings&nbsp;to&nbsp;[]byte.&nbsp;&nbsp;Other&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5753273">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5753286">var</span>&nbsp;<span class="ident" id="5753290">DefaultParameterConverter</span>&nbsp;<span class="ident" id="5753316">defaultConverter</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5753334">type</span>&nbsp;<span class="ident" id="5753339">defaultConverter</span>&nbsp;<span class="keyword" id="5753356">struct</span><span class="op" id="5753362">{</span><span class="op" id="5753363">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="5753366">var</span>&nbsp;<span class="ident" id="5753370">_</span>&nbsp;<span class="ident" id="5753372">ValueConverter</span>&nbsp;<span class="op" id="5753387">=</span>&nbsp;<span class="ident" id="5753389">defaultConverter</span><span class="op" id="5753405">{</span><span class="op" id="5753406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5753409">func</span>&nbsp;<span class="op" id="5753414">(</span><span class="ident" id="5753415">defaultConverter</span><span class="op" id="5753431">)</span>&nbsp;<span class="ident" id="5753433">ConvertValue</span><span class="op" id="5753445">(</span><span class="ident" id="5753446">v</span>&nbsp;<span class="keyword" id="5753448">interface</span><span class="op" id="5753457">{</span><span class="op" id="5753458">}</span><span class="op" id="5753459">)</span>&nbsp;<span class="op" id="5753461">(</span><span class="ident" id="5753462">Value</span><span class="op" id="5753467">,</span>&nbsp;<span class="builtintype" id="5753469">error</span><span class="op" id="5753474">)</span>&nbsp;<span class="op" id="5753476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753479">if</span>&nbsp;<span class="ident" id="5753482">IsValue</span><span class="op" id="5753489">(</span><span class="ident" id="5753490">v</span><span class="op" id="5753491">)</span>&nbsp;<span class="op" id="5753493">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753497">return</span>&nbsp;<span class="ident" id="5753504">v</span><span class="op" id="5753505">,</span>&nbsp;<span class="ident" id="5753507">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753516">if</span>&nbsp;<span class="ident" id="5753519">svi</span><span class="op" id="5753522">,</span>&nbsp;<span class="ident" id="5753524">ok</span>&nbsp;<span class="op" id="5753527">:=</span>&nbsp;<span class="ident" id="5753530">v</span><span class="op" id="5753531">.</span><span class="op" id="5753532">(</span><span class="ident" id="5753533">Valuer</span><span class="op" id="5753539">)</span><span class="op" id="5753540">;</span>&nbsp;<span class="ident" id="5753542">ok</span>&nbsp;<span class="op" id="5753545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753549">sv</span><span class="op" id="5753551">,</span>&nbsp;<span class="ident" id="5753553">err</span>&nbsp;<span class="op" id="5753557">:=</span>&nbsp;<span class="ident" id="5753560">svi</span><span class="op" id="5753563">.</span><span class="ident" id="5753564">Value</span><span class="op" id="5753569">(</span><span class="op" id="5753570">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753574">if</span>&nbsp;<span class="ident" id="5753577">err</span>&nbsp;<span class="op" id="5753581">!=</span>&nbsp;<span class="ident" id="5753584">nil</span>&nbsp;<span class="op" id="5753588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753593">return</span>&nbsp;<span class="ident" id="5753600">nil</span><span class="op" id="5753603">,</span>&nbsp;<span class="ident" id="5753605">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753615">if</span>&nbsp;<span class="op" id="5753618">!</span><span class="ident" id="5753619">IsValue</span><span class="op" id="5753626">(</span><span class="ident" id="5753627">sv</span><span class="op" id="5753629">)</span>&nbsp;<span class="op" id="5753631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753636">return</span>&nbsp;<span class="ident" id="5753643">nil</span><span class="op" id="5753646">,</span>&nbsp;<span class="ident" id="5753648">fmt</span><span class="op" id="5753651">.</span><span class="ident" id="5753652">Errorf</span><span class="op" id="5753658">(</span><span class="string" id="5753659">&#34;non-Value&nbsp;type&nbsp;%T&nbsp;returned&nbsp;from&nbsp;Value&#34;</span><span class="op" id="5753698">,</span>&nbsp;<span class="ident" id="5753700">sv</span><span class="op" id="5753702">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753710">return</span>&nbsp;<span class="ident" id="5753717">sv</span><span class="op" id="5753719">,</span>&nbsp;<span class="ident" id="5753721">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753730">rv</span>&nbsp;<span class="op" id="5753733">:=</span>&nbsp;<span class="ident" id="5753736">reflect</span><span class="op" id="5753743">.</span><span class="ident" id="5753744">ValueOf</span><span class="op" id="5753751">(</span><span class="ident" id="5753752">v</span><span class="op" id="5753753">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753756">switch</span>&nbsp;<span class="ident" id="5753763">rv</span><span class="op" id="5753765">.</span><span class="ident" id="5753766">Kind</span><span class="op" id="5753770">(</span><span class="op" id="5753771">)</span>&nbsp;<span class="op" id="5753773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753776">case</span>&nbsp;<span class="ident" id="5753781">reflect</span><span class="op" id="5753788">.</span><span class="ident" id="5753789">Ptr</span><span class="op" id="5753792">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753796">//&nbsp;indirect&nbsp;pointers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753819">if</span>&nbsp;<span class="ident" id="5753822">rv</span><span class="op" id="5753824">.</span><span class="ident" id="5753825">IsNil</span><span class="op" id="5753830">(</span><span class="op" id="5753831">)</span>&nbsp;<span class="op" id="5753833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753838">return</span>&nbsp;<span class="ident" id="5753845">nil</span><span class="op" id="5753848">,</span>&nbsp;<span class="ident" id="5753850">nil</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753856">}</span>&nbsp;<span class="keyword" id="5753858">else</span>&nbsp;<span class="op" id="5753863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753868">return</span>&nbsp;<span class="ident" id="5753875">defaultConverter</span><span class="op" id="5753891">{</span><span class="op" id="5753892">}</span><span class="op" id="5753893">.</span><span class="ident" id="5753894">ConvertValue</span><span class="op" id="5753906">(</span><span class="ident" id="5753907">rv</span><span class="op" id="5753909">.</span><span class="ident" id="5753910">Elem</span><span class="op" id="5753914">(</span><span class="op" id="5753915">)</span><span class="op" id="5753916">.</span><span class="ident" id="5753917">Interface</span><span class="op" id="5753926">(</span><span class="op" id="5753927">)</span><span class="op" id="5753928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753935">case</span>&nbsp;<span class="ident" id="5753940">reflect</span><span class="op" id="5753947">.</span><span class="ident" id="5753948">Int</span><span class="op" id="5753951">,</span>&nbsp;<span class="ident" id="5753953">reflect</span><span class="op" id="5753960">.</span><span class="ident" id="5753961">Int8</span><span class="op" id="5753965">,</span>&nbsp;<span class="ident" id="5753967">reflect</span><span class="op" id="5753974">.</span><span class="ident" id="5753975">Int16</span><span class="op" id="5753980">,</span>&nbsp;<span class="ident" id="5753982">reflect</span><span class="op" id="5753989">.</span><span class="ident" id="5753990">Int32</span><span class="op" id="5753995">,</span>&nbsp;<span class="ident" id="5753997">reflect</span><span class="op" id="5754004">.</span><span class="ident" id="5754005">Int64</span><span class="op" id="5754010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754014">return</span>&nbsp;<span class="ident" id="5754021">rv</span><span class="op" id="5754023">.</span><span class="ident" id="5754024">Int</span><span class="op" id="5754027">(</span><span class="op" id="5754028">)</span><span class="op" id="5754029">,</span>&nbsp;<span class="ident" id="5754031">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754036">case</span>&nbsp;<span class="ident" id="5754041">reflect</span><span class="op" id="5754048">.</span><span class="ident" id="5754049">Uint</span><span class="op" id="5754053">,</span>&nbsp;<span class="ident" id="5754055">reflect</span><span class="op" id="5754062">.</span><span class="ident" id="5754063">Uint8</span><span class="op" id="5754068">,</span>&nbsp;<span class="ident" id="5754070">reflect</span><span class="op" id="5754077">.</span><span class="ident" id="5754078">Uint16</span><span class="op" id="5754084">,</span>&nbsp;<span class="ident" id="5754086">reflect</span><span class="op" id="5754093">.</span><span class="ident" id="5754094">Uint32</span><span class="op" id="5754100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754104">return</span>&nbsp;<span class="ident" id="5754111">int64</span><span class="op" id="5754116">(</span><span class="ident" id="5754117">rv</span><span class="op" id="5754119">.</span><span class="ident" id="5754120">Uint</span><span class="op" id="5754124">(</span><span class="op" id="5754125">)</span><span class="op" id="5754126">)</span><span class="op" id="5754127">,</span>&nbsp;<span class="ident" id="5754129">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754134">case</span>&nbsp;<span class="ident" id="5754139">reflect</span><span class="op" id="5754146">.</span><span class="ident" id="5754147">Uint64</span><span class="op" id="5754153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754157">u64</span>&nbsp;<span class="op" id="5754161">:=</span>&nbsp;<span class="ident" id="5754164">rv</span><span class="op" id="5754166">.</span><span class="ident" id="5754167">Uint</span><span class="op" id="5754171">(</span><span class="op" id="5754172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754176">if</span>&nbsp;<span class="ident" id="5754179">u64</span>&nbsp;<span class="op" id="5754183">&gt;=</span>&nbsp;<span class="num" id="5754186">1</span><span class="op" id="5754187">&lt;&lt;</span><span class="num" id="5754189">63</span>&nbsp;<span class="op" id="5754192">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754197">return</span>&nbsp;<span class="ident" id="5754204">nil</span><span class="op" id="5754207">,</span>&nbsp;<span class="ident" id="5754209">fmt</span><span class="op" id="5754212">.</span><span class="ident" id="5754213">Errorf</span><span class="op" id="5754219">(</span><span class="string" id="5754220">&#34;uint64&nbsp;values&nbsp;with&nbsp;high&nbsp;bit&nbsp;set&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5754271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754279">return</span>&nbsp;<span class="ident" id="5754286">int64</span><span class="op" id="5754291">(</span><span class="ident" id="5754292">u64</span><span class="op" id="5754295">)</span><span class="op" id="5754296">,</span>&nbsp;<span class="ident" id="5754298">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754303">case</span>&nbsp;<span class="ident" id="5754308">reflect</span><span class="op" id="5754315">.</span><span class="ident" id="5754316">Float32</span><span class="op" id="5754323">,</span>&nbsp;<span class="ident" id="5754325">reflect</span><span class="op" id="5754332">.</span><span class="ident" id="5754333">Float64</span><span class="op" id="5754340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754344">return</span>&nbsp;<span class="ident" id="5754351">rv</span><span class="op" id="5754353">.</span><span class="ident" id="5754354">Float</span><span class="op" id="5754359">(</span><span class="op" id="5754360">)</span><span class="op" id="5754361">,</span>&nbsp;<span class="ident" id="5754363">nil</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754371">return</span>&nbsp;<span class="ident" id="5754378">nil</span><span class="op" id="5754381">,</span>&nbsp;<span class="ident" id="5754383">fmt</span><span class="op" id="5754386">.</span><span class="ident" id="5754387">Errorf</span><span class="op" id="5754393">(</span><span class="string" id="5754394">&#34;unsupported&nbsp;type&nbsp;%T,&nbsp;a&nbsp;%s&#34;</span><span class="op" id="5754421">,</span>&nbsp;<span class="ident" id="5754423">v</span><span class="op" id="5754424">,</span>&nbsp;<span class="ident" id="5754426">rv</span><span class="op" id="5754428">.</span><span class="ident" id="5754429">Kind</span><span class="op" id="5754433">(</span><span class="op" id="5754434">)</span><span class="op" id="5754435">)</span><br>
<span class="lineno"></span><span class="op" id="5754437">}</span>
</div>
</body>
</html>
