<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html" class="current">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8270197">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8270252">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8270306">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8270357">package</span>&nbsp;<span class="ident" id="8270365">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8270373">import</span>&nbsp;<span class="op" id="8270380">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270383">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270392">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270399">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270409">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270421">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270427">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270438">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8270448">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8270451">var</span>&nbsp;<span class="ident" id="8270455">fset</span>&nbsp;<span class="op" id="8270460">=</span>&nbsp;<span class="ident" id="8270462">token</span><span class="op" id="8270467">.</span><span class="ident" id="8270468">NewFileSet</span><span class="op" id="8270478">(</span><span class="op" id="8270479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8270482">var</span>&nbsp;<span class="ident" id="8270486">validFiles</span>&nbsp;<span class="op" id="8270497">=</span>&nbsp;<span class="op" id="8270499">[</span><span class="op" id="8270500">]</span><span class="builtintype" id="8270501">string</span><span class="op" id="8270507">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270510">&#34;parser.go&#34;</span><span class="op" id="8270521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270524">&#34;parser_test.go&#34;</span><span class="op" id="8270540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270543">&#34;error_test.go&#34;</span><span class="op" id="8270558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270561">&#34;short_test.go&#34;</span><span class="op" id="8270576">,</span><br>
<span class="lineno"></span><span class="op" id="8270578">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8270581">func</span>&nbsp;<span class="ident" id="8270586">TestParse</span><span class="op" id="8270595">(</span><span class="ident" id="8270596">t</span>&nbsp;<span class="op" id="8270598">*</span><span class="ident" id="8270599">testing</span><span class="op" id="8270606">.</span><span class="ident" id="8270607">T</span><span class="op" id="8270608">)</span>&nbsp;<span class="op" id="8270610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270613">for</span>&nbsp;<span class="ident" id="8270617">_</span><span class="op" id="8270618">,</span>&nbsp;<span class="ident" id="8270620">filename</span>&nbsp;<span class="op" id="8270629">:=</span>&nbsp;<span class="keyword" id="8270632">range</span>&nbsp;<span class="ident" id="8270638">validFiles</span>&nbsp;<span class="op" id="8270649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270653">_</span><span class="op" id="8270654">,</span>&nbsp;<span class="ident" id="8270656">err</span>&nbsp;<span class="op" id="8270660">:=</span>&nbsp;<span class="ident" id="8270663">ParseFile</span><span class="op" id="8270672">(</span><span class="ident" id="8270673">fset</span><span class="op" id="8270677">,</span>&nbsp;<span class="ident" id="8270679">filename</span><span class="op" id="8270687">,</span>&nbsp;<span class="builtintype" id="8270689">nil</span><span class="op" id="8270692">,</span>&nbsp;<span class="ident" id="8270694">DeclarationErrors</span><span class="op" id="8270711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270715">if</span>&nbsp;<span class="ident" id="8270718">err</span>&nbsp;<span class="op" id="8270722">!=</span>&nbsp;<span class="builtintype" id="8270725">nil</span>&nbsp;<span class="op" id="8270729">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270734">t</span><span class="op" id="8270735">.</span><span class="ident" id="8270736">Fatalf</span><span class="op" id="8270742">(</span><span class="string" id="8270743">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8270762">,</span>&nbsp;<span class="ident" id="8270764">filename</span><span class="op" id="8270772">,</span>&nbsp;<span class="ident" id="8270774">err</span><span class="op" id="8270777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270784">}</span><br>
<span class="lineno"></span><span class="op" id="8270786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8270789">func</span>&nbsp;<span class="ident" id="8270794">nameFilter</span><span class="op" id="8270804">(</span><span class="ident" id="8270805">filename</span>&nbsp;<span class="builtintype" id="8270814">string</span><span class="op" id="8270820">)</span>&nbsp;<span class="builtintype" id="8270822">bool</span>&nbsp;<span class="op" id="8270827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270830">switch</span>&nbsp;<span class="ident" id="8270837">filename</span>&nbsp;<span class="op" id="8270846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270849">case</span>&nbsp;<span class="string" id="8270854">&#34;parser.go&#34;</span><span class="op" id="8270865">,</span>&nbsp;<span class="string" id="8270867">&#34;interface.go&#34;</span><span class="op" id="8270881">,</span>&nbsp;<span class="string" id="8270883">&#34;parser_test.go&#34;</span><span class="op" id="8270899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270903">return</span>&nbsp;<span class="builtintype" id="8270910">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270916">case</span>&nbsp;<span class="string" id="8270921">&#34;parser.go.orig&#34;</span><span class="op" id="8270937">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8270941">return</span>&nbsp;<span class="builtintype" id="8270948">true</span>&nbsp;<span class="comment" id="8270953">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271001">return</span>&nbsp;<span class="builtintype" id="8271008">false</span><br>
<span class="lineno"></span><span class="op" id="8271014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8271017">func</span>&nbsp;<span class="ident" id="8271022">dirFilter</span><span class="op" id="8271031">(</span><span class="ident" id="8271032">f</span>&nbsp;<span class="ident" id="8271034">os</span><span class="op" id="8271036">.</span><span class="ident" id="8271037">FileInfo</span><span class="op" id="8271045">)</span>&nbsp;<span class="builtintype" id="8271047">bool</span>&nbsp;<span class="op" id="8271052">{</span>&nbsp;<span class="keyword" id="8271054">return</span>&nbsp;<span class="ident" id="8271061">nameFilter</span><span class="op" id="8271071">(</span><span class="ident" id="8271072">f</span><span class="op" id="8271073">.</span><span class="ident" id="8271074">Name</span><span class="op" id="8271078">(</span><span class="op" id="8271079">)</span><span class="op" id="8271080">)</span>&nbsp;<span class="op" id="8271082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8271085">func</span>&nbsp;<span class="ident" id="8271090">TestParseDir</span><span class="op" id="8271102">(</span><span class="ident" id="8271103">t</span>&nbsp;<span class="op" id="8271105">*</span><span class="ident" id="8271106">testing</span><span class="op" id="8271113">.</span><span class="ident" id="8271114">T</span><span class="op" id="8271115">)</span>&nbsp;<span class="op" id="8271117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271120">path</span>&nbsp;<span class="op" id="8271125">:=</span>&nbsp;<span class="string" id="8271128">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271133">pkgs</span><span class="op" id="8271137">,</span>&nbsp;<span class="ident" id="8271139">err</span>&nbsp;<span class="op" id="8271143">:=</span>&nbsp;<span class="ident" id="8271146">ParseDir</span><span class="op" id="8271154">(</span><span class="ident" id="8271155">fset</span><span class="op" id="8271159">,</span>&nbsp;<span class="ident" id="8271161">path</span><span class="op" id="8271165">,</span>&nbsp;<span class="ident" id="8271167">dirFilter</span><span class="op" id="8271176">,</span>&nbsp;<span class="num" id="8271178">0</span><span class="op" id="8271179">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271182">if</span>&nbsp;<span class="ident" id="8271185">err</span>&nbsp;<span class="op" id="8271189">!=</span>&nbsp;<span class="builtintype" id="8271192">nil</span>&nbsp;<span class="op" id="8271196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271200">t</span><span class="op" id="8271201">.</span><span class="ident" id="8271202">Fatalf</span><span class="op" id="8271208">(</span><span class="string" id="8271209">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8271227">,</span>&nbsp;<span class="ident" id="8271229">path</span><span class="op" id="8271233">,</span>&nbsp;<span class="ident" id="8271235">err</span><span class="op" id="8271238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271244">if</span>&nbsp;<span class="ident" id="8271247">n</span>&nbsp;<span class="op" id="8271249">:=</span>&nbsp;<span class="builtinfunc" id="8271252">len</span><span class="op" id="8271255">(</span><span class="ident" id="8271256">pkgs</span><span class="op" id="8271260">)</span><span class="op" id="8271261">;</span>&nbsp;<span class="ident" id="8271263">n</span>&nbsp;<span class="op" id="8271265">!=</span>&nbsp;<span class="num" id="8271268">1</span>&nbsp;<span class="op" id="8271270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271274">t</span><span class="op" id="8271275">.</span><span class="ident" id="8271276">Errorf</span><span class="op" id="8271282">(</span><span class="string" id="8271283">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8271308">,</span>&nbsp;<span class="ident" id="8271310">n</span><span class="op" id="8271311">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271317">pkg</span>&nbsp;<span class="op" id="8271321">:=</span>&nbsp;<span class="ident" id="8271324">pkgs</span><span class="op" id="8271328">[</span><span class="string" id="8271329">&#34;parser&#34;</span><span class="op" id="8271337">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271340">if</span>&nbsp;<span class="ident" id="8271343">pkg</span>&nbsp;<span class="op" id="8271347">==</span>&nbsp;<span class="builtintype" id="8271350">nil</span>&nbsp;<span class="op" id="8271354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271358">t</span><span class="op" id="8271359">.</span><span class="ident" id="8271360">Errorf</span><span class="op" id="8271366">(</span><span class="string" id="8271367">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8271395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271399">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271410">if</span>&nbsp;<span class="ident" id="8271413">n</span>&nbsp;<span class="op" id="8271415">:=</span>&nbsp;<span class="builtinfunc" id="8271418">len</span><span class="op" id="8271421">(</span><span class="ident" id="8271422">pkg</span><span class="op" id="8271425">.</span><span class="ident" id="8271426">Files</span><span class="op" id="8271431">)</span><span class="op" id="8271432">;</span>&nbsp;<span class="ident" id="8271434">n</span>&nbsp;<span class="op" id="8271436">!=</span>&nbsp;<span class="num" id="8271439">3</span>&nbsp;<span class="op" id="8271441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271445">t</span><span class="op" id="8271446">.</span><span class="ident" id="8271447">Errorf</span><span class="op" id="8271453">(</span><span class="string" id="8271454">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8271484">,</span>&nbsp;<span class="ident" id="8271486">n</span><span class="op" id="8271487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271493">for</span>&nbsp;<span class="ident" id="8271497">filename</span>&nbsp;<span class="op" id="8271506">:=</span>&nbsp;<span class="keyword" id="8271509">range</span>&nbsp;<span class="ident" id="8271515">pkg</span><span class="op" id="8271518">.</span><span class="ident" id="8271519">Files</span>&nbsp;<span class="op" id="8271525">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271529">if</span>&nbsp;<span class="op" id="8271532">!</span><span class="ident" id="8271533">nameFilter</span><span class="op" id="8271543">(</span><span class="ident" id="8271544">filename</span><span class="op" id="8271552">)</span>&nbsp;<span class="op" id="8271554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271559">t</span><span class="op" id="8271560">.</span><span class="ident" id="8271561">Errorf</span><span class="op" id="8271567">(</span><span class="string" id="8271568">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8271597">,</span>&nbsp;<span class="ident" id="8271599">filename</span><span class="op" id="8271607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271614">}</span><br>
<span class="lineno"></span><span class="op" id="8271616">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8271619">func</span>&nbsp;<span class="ident" id="8271624">TestParseExpr</span><span class="op" id="8271637">(</span><span class="ident" id="8271638">t</span>&nbsp;<span class="op" id="8271640">*</span><span class="ident" id="8271641">testing</span><span class="op" id="8271648">.</span><span class="ident" id="8271649">T</span><span class="op" id="8271650">)</span>&nbsp;<span class="op" id="8271652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271655">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271683">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271717">src</span>&nbsp;<span class="op" id="8271721">:=</span>&nbsp;<span class="string" id="8271724">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271733">x</span><span class="op" id="8271734">,</span>&nbsp;<span class="ident" id="8271736">err</span>&nbsp;<span class="op" id="8271740">:=</span>&nbsp;<span class="ident" id="8271743">ParseExpr</span><span class="op" id="8271752">(</span><span class="ident" id="8271753">src</span><span class="op" id="8271756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271759">if</span>&nbsp;<span class="ident" id="8271762">err</span>&nbsp;<span class="op" id="8271766">!=</span>&nbsp;<span class="builtintype" id="8271769">nil</span>&nbsp;<span class="op" id="8271773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271777">t</span><span class="op" id="8271778">.</span><span class="ident" id="8271779">Errorf</span><span class="op" id="8271785">(</span><span class="string" id="8271786">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8271805">,</span>&nbsp;<span class="ident" id="8271807">src</span><span class="op" id="8271810">,</span>&nbsp;<span class="ident" id="8271812">err</span><span class="op" id="8271815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271821">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8271838">if</span>&nbsp;<span class="ident" id="8271841">_</span><span class="op" id="8271842">,</span>&nbsp;<span class="ident" id="8271844">ok</span>&nbsp;<span class="op" id="8271847">:=</span>&nbsp;<span class="ident" id="8271850">x</span><span class="op" id="8271851">.</span><span class="op" id="8271852">(</span><span class="op" id="8271853">*</span><span class="ident" id="8271854">ast</span><span class="op" id="8271857">.</span><span class="ident" id="8271858">BinaryExpr</span><span class="op" id="8271868">)</span><span class="op" id="8271869">;</span>&nbsp;<span class="op" id="8271871">!</span><span class="ident" id="8271872">ok</span>&nbsp;<span class="op" id="8271875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271879">t</span><span class="op" id="8271880">.</span><span class="ident" id="8271881">Errorf</span><span class="op" id="8271887">(</span><span class="string" id="8271888">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8271933">,</span>&nbsp;<span class="ident" id="8271935">src</span><span class="op" id="8271938">,</span>&nbsp;<span class="ident" id="8271940">x</span><span class="op" id="8271941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271948">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271976">src</span>&nbsp;<span class="op" id="8271980">=</span>&nbsp;<span class="string" id="8271982">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272000">x</span><span class="op" id="8272001">,</span>&nbsp;<span class="ident" id="8272003">err</span>&nbsp;<span class="op" id="8272007">=</span>&nbsp;<span class="ident" id="8272009">ParseExpr</span><span class="op" id="8272018">(</span><span class="ident" id="8272019">src</span><span class="op" id="8272022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272025">if</span>&nbsp;<span class="ident" id="8272028">err</span>&nbsp;<span class="op" id="8272032">!=</span>&nbsp;<span class="builtintype" id="8272035">nil</span>&nbsp;<span class="op" id="8272039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272043">t</span><span class="op" id="8272044">.</span><span class="ident" id="8272045">Errorf</span><span class="op" id="8272051">(</span><span class="string" id="8272052">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8272071">,</span>&nbsp;<span class="ident" id="8272073">src</span><span class="op" id="8272076">,</span>&nbsp;<span class="ident" id="8272078">err</span><span class="op" id="8272081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272084">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272087">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272104">if</span>&nbsp;<span class="ident" id="8272107">_</span><span class="op" id="8272108">,</span>&nbsp;<span class="ident" id="8272110">ok</span>&nbsp;<span class="op" id="8272113">:=</span>&nbsp;<span class="ident" id="8272116">x</span><span class="op" id="8272117">.</span><span class="op" id="8272118">(</span><span class="op" id="8272119">*</span><span class="ident" id="8272120">ast</span><span class="op" id="8272123">.</span><span class="ident" id="8272124">StructType</span><span class="op" id="8272134">)</span><span class="op" id="8272135">;</span>&nbsp;<span class="op" id="8272137">!</span><span class="ident" id="8272138">ok</span>&nbsp;<span class="op" id="8272141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272145">t</span><span class="op" id="8272146">.</span><span class="ident" id="8272147">Errorf</span><span class="op" id="8272153">(</span><span class="string" id="8272154">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8272199">,</span>&nbsp;<span class="ident" id="8272201">src</span><span class="op" id="8272204">,</span>&nbsp;<span class="ident" id="8272206">x</span><span class="op" id="8272207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272214">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272240">src</span>&nbsp;<span class="op" id="8272244">=</span>&nbsp;<span class="string" id="8272246">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272255">if</span>&nbsp;<span class="ident" id="8272258">_</span><span class="op" id="8272259">,</span>&nbsp;<span class="ident" id="8272261">err</span>&nbsp;<span class="op" id="8272265">:=</span>&nbsp;<span class="ident" id="8272268">ParseExpr</span><span class="op" id="8272277">(</span><span class="ident" id="8272278">src</span><span class="op" id="8272281">)</span><span class="op" id="8272282">;</span>&nbsp;<span class="ident" id="8272284">err</span>&nbsp;<span class="op" id="8272288">==</span>&nbsp;<span class="builtintype" id="8272291">nil</span>&nbsp;<span class="op" id="8272295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272299">t</span><span class="op" id="8272300">.</span><span class="ident" id="8272301">Errorf</span><span class="op" id="8272307">(</span><span class="string" id="8272308">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8272337">,</span>&nbsp;<span class="ident" id="8272339">src</span><span class="op" id="8272342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272345">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272349">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272408">src</span>&nbsp;<span class="op" id="8272412">=</span>&nbsp;<span class="string" id="8272414">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272427">if</span>&nbsp;<span class="ident" id="8272430">_</span><span class="op" id="8272431">,</span>&nbsp;<span class="ident" id="8272433">err</span>&nbsp;<span class="op" id="8272437">:=</span>&nbsp;<span class="ident" id="8272440">ParseExpr</span><span class="op" id="8272449">(</span><span class="ident" id="8272450">src</span><span class="op" id="8272453">)</span><span class="op" id="8272454">;</span>&nbsp;<span class="ident" id="8272456">err</span>&nbsp;<span class="op" id="8272460">==</span>&nbsp;<span class="builtintype" id="8272463">nil</span>&nbsp;<span class="op" id="8272467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272471">t</span><span class="op" id="8272472">.</span><span class="ident" id="8272473">Errorf</span><span class="op" id="8272479">(</span><span class="string" id="8272480">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8272509">,</span>&nbsp;<span class="ident" id="8272511">src</span><span class="op" id="8272514">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272521">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272584">src</span>&nbsp;<span class="op" id="8272588">=</span>&nbsp;<span class="string" id="8272590">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272601">if</span>&nbsp;<span class="ident" id="8272604">_</span><span class="op" id="8272605">,</span>&nbsp;<span class="ident" id="8272607">err</span>&nbsp;<span class="op" id="8272611">:=</span>&nbsp;<span class="ident" id="8272614">ParseExpr</span><span class="op" id="8272623">(</span><span class="ident" id="8272624">src</span><span class="op" id="8272627">)</span><span class="op" id="8272628">;</span>&nbsp;<span class="ident" id="8272630">err</span>&nbsp;<span class="op" id="8272634">!=</span>&nbsp;<span class="builtintype" id="8272637">nil</span>&nbsp;<span class="op" id="8272641">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272645">t</span><span class="op" id="8272646">.</span><span class="ident" id="8272647">Errorf</span><span class="op" id="8272653">(</span><span class="string" id="8272654">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8272683">,</span>&nbsp;<span class="ident" id="8272685">src</span><span class="op" id="8272688">,</span>&nbsp;<span class="ident" id="8272690">err</span><span class="op" id="8272693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272699">src</span>&nbsp;<span class="op" id="8272703">=</span>&nbsp;<span class="string" id="8272705">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272715">if</span>&nbsp;<span class="ident" id="8272718">_</span><span class="op" id="8272719">,</span>&nbsp;<span class="ident" id="8272721">err</span>&nbsp;<span class="op" id="8272725">:=</span>&nbsp;<span class="ident" id="8272728">ParseExpr</span><span class="op" id="8272737">(</span><span class="ident" id="8272738">src</span><span class="op" id="8272741">)</span><span class="op" id="8272742">;</span>&nbsp;<span class="ident" id="8272744">err</span>&nbsp;<span class="op" id="8272748">==</span>&nbsp;<span class="builtintype" id="8272751">nil</span>&nbsp;<span class="op" id="8272755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272759">t</span><span class="op" id="8272760">.</span><span class="ident" id="8272761">Errorf</span><span class="op" id="8272767">(</span><span class="string" id="8272768">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8272797">,</span>&nbsp;<span class="ident" id="8272799">src</span><span class="op" id="8272802">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272809">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272862">const</span>&nbsp;<span class="ident" id="8272868">validExpr</span>&nbsp;<span class="op" id="8272878">=</span>&nbsp;<span class="string" id="8272880">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272889">const</span>&nbsp;<span class="ident" id="8272895">anything</span>&nbsp;<span class="op" id="8272904">=</span>&nbsp;<span class="string" id="8272906">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272919">for</span>&nbsp;<span class="ident" id="8272923">_</span><span class="op" id="8272924">,</span>&nbsp;<span class="ident" id="8272926">c</span>&nbsp;<span class="op" id="8272928">:=</span>&nbsp;<span class="keyword" id="8272931">range</span>&nbsp;<span class="string" id="8272937">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8272946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272950">src</span>&nbsp;<span class="op" id="8272954">:=</span>&nbsp;<span class="ident" id="8272957">validExpr</span>&nbsp;<span class="op" id="8272967">+</span>&nbsp;<span class="builtintype" id="8272969">string</span><span class="op" id="8272975">(</span><span class="ident" id="8272976">c</span><span class="op" id="8272977">)</span>&nbsp;<span class="op" id="8272979">+</span>&nbsp;<span class="ident" id="8272981">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8272992">if</span>&nbsp;<span class="ident" id="8272995">_</span><span class="op" id="8272996">,</span>&nbsp;<span class="ident" id="8272998">err</span>&nbsp;<span class="op" id="8273002">:=</span>&nbsp;<span class="ident" id="8273005">ParseExpr</span><span class="op" id="8273014">(</span><span class="ident" id="8273015">src</span><span class="op" id="8273018">)</span><span class="op" id="8273019">;</span>&nbsp;<span class="ident" id="8273021">err</span>&nbsp;<span class="op" id="8273025">==</span>&nbsp;<span class="builtintype" id="8273028">nil</span>&nbsp;<span class="op" id="8273032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273037">t</span><span class="op" id="8273038">.</span><span class="ident" id="8273039">Errorf</span><span class="op" id="8273045">(</span><span class="string" id="8273046">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8273075">,</span>&nbsp;<span class="ident" id="8273077">src</span><span class="op" id="8273080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273084">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273091">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273120">for</span>&nbsp;<span class="ident" id="8273124">_</span><span class="op" id="8273125">,</span>&nbsp;<span class="ident" id="8273127">src</span>&nbsp;<span class="op" id="8273131">:=</span>&nbsp;<span class="keyword" id="8273134">range</span>&nbsp;<span class="ident" id="8273140">valids</span>&nbsp;<span class="op" id="8273147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273151">ParseExpr</span><span class="op" id="8273160">(</span><span class="ident" id="8273161">src</span><span class="op" id="8273164">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273167">}</span><br>
<span class="lineno"></span><span class="op" id="8273169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8273172">func</span>&nbsp;<span class="ident" id="8273177">TestColonEqualsScope</span><span class="op" id="8273197">(</span><span class="ident" id="8273198">t</span>&nbsp;<span class="op" id="8273200">*</span><span class="ident" id="8273201">testing</span><span class="op" id="8273208">.</span><span class="ident" id="8273209">T</span><span class="op" id="8273210">)</span>&nbsp;<span class="op" id="8273212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273215">f</span><span class="op" id="8273216">,</span>&nbsp;<span class="ident" id="8273218">err</span>&nbsp;<span class="op" id="8273222">:=</span>&nbsp;<span class="ident" id="8273225">ParseFile</span><span class="op" id="8273234">(</span><span class="ident" id="8273235">fset</span><span class="op" id="8273239">,</span>&nbsp;<span class="string" id="8273241">&#34;&#34;</span><span class="op" id="8273243">,</span>&nbsp;<span class="string" id="8273245">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8273289">,</span>&nbsp;<span class="num" id="8273291">0</span><span class="op" id="8273292">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273295">if</span>&nbsp;<span class="ident" id="8273298">err</span>&nbsp;<span class="op" id="8273302">!=</span>&nbsp;<span class="builtintype" id="8273305">nil</span>&nbsp;<span class="op" id="8273309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273313">t</span><span class="op" id="8273314">.</span><span class="ident" id="8273315">Fatal</span><span class="op" id="8273320">(</span><span class="ident" id="8273321">err</span><span class="op" id="8273324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273331">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273382">as</span>&nbsp;<span class="op" id="8273385">:=</span>&nbsp;<span class="ident" id="8273388">f</span><span class="op" id="8273389">.</span><span class="ident" id="8273390">Decls</span><span class="op" id="8273395">[</span><span class="num" id="8273396">0</span><span class="op" id="8273397">]</span><span class="op" id="8273398">.</span><span class="op" id="8273399">(</span><span class="op" id="8273400">*</span><span class="ident" id="8273401">ast</span><span class="op" id="8273404">.</span><span class="ident" id="8273405">FuncDecl</span><span class="op" id="8273413">)</span><span class="op" id="8273414">.</span><span class="ident" id="8273415">Body</span><span class="op" id="8273419">.</span><span class="ident" id="8273420">List</span><span class="op" id="8273424">[</span><span class="num" id="8273425">0</span><span class="op" id="8273426">]</span><span class="op" id="8273427">.</span><span class="op" id="8273428">(</span><span class="op" id="8273429">*</span><span class="ident" id="8273430">ast</span><span class="op" id="8273433">.</span><span class="ident" id="8273434">AssignStmt</span><span class="op" id="8273444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273447">for</span>&nbsp;<span class="ident" id="8273451">_</span><span class="op" id="8273452">,</span>&nbsp;<span class="ident" id="8273454">v</span>&nbsp;<span class="op" id="8273456">:=</span>&nbsp;<span class="keyword" id="8273459">range</span>&nbsp;<span class="ident" id="8273465">as</span><span class="op" id="8273467">.</span><span class="ident" id="8273468">Rhs</span>&nbsp;<span class="op" id="8273472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273476">id</span>&nbsp;<span class="op" id="8273479">:=</span>&nbsp;<span class="ident" id="8273482">v</span><span class="op" id="8273483">.</span><span class="op" id="8273484">(</span><span class="op" id="8273485">*</span><span class="ident" id="8273486">ast</span><span class="op" id="8273489">.</span><span class="ident" id="8273490">Ident</span><span class="op" id="8273495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273499">if</span>&nbsp;<span class="ident" id="8273502">id</span><span class="op" id="8273504">.</span><span class="ident" id="8273505">Obj</span>&nbsp;<span class="op" id="8273509">!=</span>&nbsp;<span class="builtintype" id="8273512">nil</span>&nbsp;<span class="op" id="8273516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273521">t</span><span class="op" id="8273522">.</span><span class="ident" id="8273523">Errorf</span><span class="op" id="8273529">(</span><span class="string" id="8273530">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8273558">,</span>&nbsp;<span class="ident" id="8273560">id</span><span class="op" id="8273562">.</span><span class="ident" id="8273563">Name</span><span class="op" id="8273567">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273577">for</span>&nbsp;<span class="ident" id="8273581">_</span><span class="op" id="8273582">,</span>&nbsp;<span class="ident" id="8273584">v</span>&nbsp;<span class="op" id="8273586">:=</span>&nbsp;<span class="keyword" id="8273589">range</span>&nbsp;<span class="ident" id="8273595">as</span><span class="op" id="8273597">.</span><span class="ident" id="8273598">Lhs</span>&nbsp;<span class="op" id="8273602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273606">id</span>&nbsp;<span class="op" id="8273609">:=</span>&nbsp;<span class="ident" id="8273612">v</span><span class="op" id="8273613">.</span><span class="op" id="8273614">(</span><span class="op" id="8273615">*</span><span class="ident" id="8273616">ast</span><span class="op" id="8273619">.</span><span class="ident" id="8273620">Ident</span><span class="op" id="8273625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273629">if</span>&nbsp;<span class="ident" id="8273632">id</span><span class="op" id="8273634">.</span><span class="ident" id="8273635">Obj</span>&nbsp;<span class="op" id="8273639">==</span>&nbsp;<span class="builtintype" id="8273642">nil</span>&nbsp;<span class="op" id="8273646">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273651">t</span><span class="op" id="8273652">.</span><span class="ident" id="8273653">Errorf</span><span class="op" id="8273659">(</span><span class="string" id="8273660">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8273694">,</span>&nbsp;<span class="ident" id="8273696">id</span><span class="op" id="8273698">.</span><span class="ident" id="8273699">Name</span><span class="op" id="8273703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273710">}</span><br>
<span class="lineno"></span><span class="op" id="8273712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8273715">func</span>&nbsp;<span class="ident" id="8273720">TestVarScope</span><span class="op" id="8273732">(</span><span class="ident" id="8273733">t</span>&nbsp;<span class="op" id="8273735">*</span><span class="ident" id="8273736">testing</span><span class="op" id="8273743">.</span><span class="ident" id="8273744">T</span><span class="op" id="8273745">)</span>&nbsp;<span class="op" id="8273747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273750">f</span><span class="op" id="8273751">,</span>&nbsp;<span class="ident" id="8273753">err</span>&nbsp;<span class="op" id="8273757">:=</span>&nbsp;<span class="ident" id="8273760">ParseFile</span><span class="op" id="8273769">(</span><span class="ident" id="8273770">fset</span><span class="op" id="8273774">,</span>&nbsp;<span class="string" id="8273776">&#34;&#34;</span><span class="op" id="8273778">,</span>&nbsp;<span class="string" id="8273780">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8273827">,</span>&nbsp;<span class="num" id="8273829">0</span><span class="op" id="8273830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8273833">if</span>&nbsp;<span class="ident" id="8273836">err</span>&nbsp;<span class="op" id="8273840">!=</span>&nbsp;<span class="builtintype" id="8273843">nil</span>&nbsp;<span class="op" id="8273847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273851">t</span><span class="op" id="8273852">.</span><span class="ident" id="8273853">Fatal</span><span class="op" id="8273858">(</span><span class="ident" id="8273859">err</span><span class="op" id="8273862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273865">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273869">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273920">as</span>&nbsp;<span class="op" id="8273923">:=</span>&nbsp;<span class="ident" id="8273926">f</span><span class="op" id="8273927">.</span><span class="ident" id="8273928">Decls</span><span class="op" id="8273933">[</span><span class="num" id="8273934">0</span><span class="op" id="8273935">]</span><span class="op" id="8273936">.</span><span class="op" id="8273937">(</span><span class="op" id="8273938">*</span><span class="ident" id="8273939">ast</span><span class="op" id="8273942">.</span><span class="ident" id="8273943">FuncDecl</span><span class="op" id="8273951">)</span><span class="op" id="8273952">.</span><span class="ident" id="8273953">Body</span><span class="op" id="8273957">.</span><span class="ident" id="8273958">List</span><span class="op" id="8273962">[</span><span class="num" id="8273963">0</span><span class="op" id="8273964">]</span><span class="op" id="8273965">.</span><span class="op" id="8273966">(</span><span class="op" id="8273967">*</span><span class="ident" id="8273968">ast</span><span class="op" id="8273971">.</span><span class="ident" id="8273972">DeclStmt</span><span class="op" id="8273980">)</span><span class="op" id="8273981">.</span><span class="ident" id="8273982">Decl</span><span class="op" id="8273986">.</span><span class="op" id="8273987">(</span><span class="op" id="8273988">*</span><span class="ident" id="8273989">ast</span><span class="op" id="8273992">.</span><span class="ident" id="8273993">GenDecl</span><span class="op" id="8274000">)</span><span class="op" id="8274001">.</span><span class="ident" id="8274002">Specs</span><span class="op" id="8274007">[</span><span class="num" id="8274008">0</span><span class="op" id="8274009">]</span><span class="op" id="8274010">.</span><span class="op" id="8274011">(</span><span class="op" id="8274012">*</span><span class="ident" id="8274013">ast</span><span class="op" id="8274016">.</span><span class="ident" id="8274017">ValueSpec</span><span class="op" id="8274026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274029">for</span>&nbsp;<span class="ident" id="8274033">_</span><span class="op" id="8274034">,</span>&nbsp;<span class="ident" id="8274036">v</span>&nbsp;<span class="op" id="8274038">:=</span>&nbsp;<span class="keyword" id="8274041">range</span>&nbsp;<span class="ident" id="8274047">as</span><span class="op" id="8274049">.</span><span class="ident" id="8274050">Values</span>&nbsp;<span class="op" id="8274057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274061">id</span>&nbsp;<span class="op" id="8274064">:=</span>&nbsp;<span class="ident" id="8274067">v</span><span class="op" id="8274068">.</span><span class="op" id="8274069">(</span><span class="op" id="8274070">*</span><span class="ident" id="8274071">ast</span><span class="op" id="8274074">.</span><span class="ident" id="8274075">Ident</span><span class="op" id="8274080">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274084">if</span>&nbsp;<span class="ident" id="8274087">id</span><span class="op" id="8274089">.</span><span class="ident" id="8274090">Obj</span>&nbsp;<span class="op" id="8274094">!=</span>&nbsp;<span class="builtintype" id="8274097">nil</span>&nbsp;<span class="op" id="8274101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274106">t</span><span class="op" id="8274107">.</span><span class="ident" id="8274108">Errorf</span><span class="op" id="8274114">(</span><span class="string" id="8274115">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8274143">,</span>&nbsp;<span class="ident" id="8274145">id</span><span class="op" id="8274147">.</span><span class="ident" id="8274148">Name</span><span class="op" id="8274152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274162">for</span>&nbsp;<span class="ident" id="8274166">_</span><span class="op" id="8274167">,</span>&nbsp;<span class="ident" id="8274169">id</span>&nbsp;<span class="op" id="8274172">:=</span>&nbsp;<span class="keyword" id="8274175">range</span>&nbsp;<span class="ident" id="8274181">as</span><span class="op" id="8274183">.</span><span class="ident" id="8274184">Names</span>&nbsp;<span class="op" id="8274190">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274194">if</span>&nbsp;<span class="ident" id="8274197">id</span><span class="op" id="8274199">.</span><span class="ident" id="8274200">Obj</span>&nbsp;<span class="op" id="8274204">==</span>&nbsp;<span class="builtintype" id="8274207">nil</span>&nbsp;<span class="op" id="8274211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274216">t</span><span class="op" id="8274217">.</span><span class="ident" id="8274218">Errorf</span><span class="op" id="8274224">(</span><span class="string" id="8274225">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8274259">,</span>&nbsp;<span class="ident" id="8274261">id</span><span class="op" id="8274263">.</span><span class="ident" id="8274264">Name</span><span class="op" id="8274268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274275">}</span><br>
<span class="lineno"></span><span class="op" id="8274277">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8274280">func</span>&nbsp;<span class="ident" id="8274285">TestObjects</span><span class="op" id="8274296">(</span><span class="ident" id="8274297">t</span>&nbsp;<span class="op" id="8274299">*</span><span class="ident" id="8274300">testing</span><span class="op" id="8274307">.</span><span class="ident" id="8274308">T</span><span class="op" id="8274309">)</span>&nbsp;<span class="op" id="8274311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274314">const</span>&nbsp;<span class="ident" id="8274320">src</span>&nbsp;<span class="op" id="8274324">=</span>&nbsp;<span class="string" id="8274326">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274417">f</span><span class="op" id="8274418">,</span>&nbsp;<span class="ident" id="8274420">err</span>&nbsp;<span class="op" id="8274424">:=</span>&nbsp;<span class="ident" id="8274427">ParseFile</span><span class="op" id="8274436">(</span><span class="ident" id="8274437">fset</span><span class="op" id="8274441">,</span>&nbsp;<span class="string" id="8274443">&#34;&#34;</span><span class="op" id="8274445">,</span>&nbsp;<span class="ident" id="8274447">src</span><span class="op" id="8274450">,</span>&nbsp;<span class="num" id="8274452">0</span><span class="op" id="8274453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274456">if</span>&nbsp;<span class="ident" id="8274459">err</span>&nbsp;<span class="op" id="8274463">!=</span>&nbsp;<span class="builtintype" id="8274466">nil</span>&nbsp;<span class="op" id="8274470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274474">t</span><span class="op" id="8274475">.</span><span class="ident" id="8274476">Fatal</span><span class="op" id="8274481">(</span><span class="ident" id="8274482">err</span><span class="op" id="8274485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274488">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274492">objects</span>&nbsp;<span class="op" id="8274500">:=</span>&nbsp;<span class="keyword" id="8274503">map</span><span class="op" id="8274506">[</span><span class="builtintype" id="8274507">string</span><span class="op" id="8274513">]</span><span class="ident" id="8274514">ast</span><span class="op" id="8274517">.</span><span class="ident" id="8274518">ObjKind</span><span class="op" id="8274525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274529">&#34;p&#34;</span><span class="op" id="8274532">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8274536">ast</span><span class="op" id="8274539">.</span><span class="ident" id="8274540">Bad</span><span class="op" id="8274543">,</span>&nbsp;<span class="comment" id="8274545">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274565">&#34;fmt&#34;</span><span class="op" id="8274570">:</span>&nbsp;<span class="ident" id="8274572">ast</span><span class="op" id="8274575">.</span><span class="ident" id="8274576">Bad</span><span class="op" id="8274579">,</span>&nbsp;<span class="comment" id="8274581">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274603">&#34;pi&#34;</span><span class="op" id="8274607">:</span>&nbsp;&nbsp;<span class="ident" id="8274610">ast</span><span class="op" id="8274613">.</span><span class="ident" id="8274614">Con</span><span class="op" id="8274617">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274621">&#34;T&#34;</span><span class="op" id="8274624">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8274628">ast</span><span class="op" id="8274631">.</span><span class="ident" id="8274632">Typ</span><span class="op" id="8274635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274639">&#34;x&#34;</span><span class="op" id="8274642">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8274646">ast</span><span class="op" id="8274649">.</span><span class="ident" id="8274650">Var</span><span class="op" id="8274653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274657">&#34;int&#34;</span><span class="op" id="8274662">:</span>&nbsp;<span class="ident" id="8274664">ast</span><span class="op" id="8274667">.</span><span class="ident" id="8274668">Bad</span><span class="op" id="8274671">,</span>&nbsp;<span class="comment" id="8274673">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274695">&#34;f&#34;</span><span class="op" id="8274698">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8274702">ast</span><span class="op" id="8274705">.</span><span class="ident" id="8274706">Fun</span><span class="op" id="8274709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274713">&#34;L&#34;</span><span class="op" id="8274716">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8274720">ast</span><span class="op" id="8274723">.</span><span class="ident" id="8274724">Lbl</span><span class="op" id="8274727">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274734">ast</span><span class="op" id="8274737">.</span><span class="ident" id="8274738">Inspect</span><span class="op" id="8274745">(</span><span class="ident" id="8274746">f</span><span class="op" id="8274747">,</span>&nbsp;<span class="keyword" id="8274749">func</span><span class="op" id="8274753">(</span><span class="ident" id="8274754">n</span>&nbsp;<span class="ident" id="8274756">ast</span><span class="op" id="8274759">.</span><span class="ident" id="8274760">Node</span><span class="op" id="8274764">)</span>&nbsp;<span class="builtintype" id="8274766">bool</span>&nbsp;<span class="op" id="8274771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274775">if</span>&nbsp;<span class="ident" id="8274778">ident</span><span class="op" id="8274783">,</span>&nbsp;<span class="ident" id="8274785">ok</span>&nbsp;<span class="op" id="8274788">:=</span>&nbsp;<span class="ident" id="8274791">n</span><span class="op" id="8274792">.</span><span class="op" id="8274793">(</span><span class="op" id="8274794">*</span><span class="ident" id="8274795">ast</span><span class="op" id="8274798">.</span><span class="ident" id="8274799">Ident</span><span class="op" id="8274804">)</span><span class="op" id="8274805">;</span>&nbsp;<span class="ident" id="8274807">ok</span>&nbsp;<span class="op" id="8274810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274815">obj</span>&nbsp;<span class="op" id="8274819">:=</span>&nbsp;<span class="ident" id="8274822">ident</span><span class="op" id="8274827">.</span><span class="ident" id="8274828">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274835">if</span>&nbsp;<span class="ident" id="8274838">obj</span>&nbsp;<span class="op" id="8274842">==</span>&nbsp;<span class="builtintype" id="8274845">nil</span>&nbsp;<span class="op" id="8274849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274855">if</span>&nbsp;<span class="ident" id="8274858">objects</span><span class="op" id="8274865">[</span><span class="ident" id="8274866">ident</span><span class="op" id="8274871">.</span><span class="ident" id="8274872">Name</span><span class="op" id="8274876">]</span>&nbsp;<span class="op" id="8274878">!=</span>&nbsp;<span class="ident" id="8274881">ast</span><span class="op" id="8274884">.</span><span class="ident" id="8274885">Bad</span>&nbsp;<span class="op" id="8274889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274896">t</span><span class="op" id="8274897">.</span><span class="ident" id="8274898">Errorf</span><span class="op" id="8274904">(</span><span class="string" id="8274905">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8274923">,</span>&nbsp;<span class="ident" id="8274925">ident</span><span class="op" id="8274930">.</span><span class="ident" id="8274931">Name</span><span class="op" id="8274935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274947">return</span>&nbsp;<span class="builtintype" id="8274954">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8274967">if</span>&nbsp;<span class="ident" id="8274970">obj</span><span class="op" id="8274973">.</span><span class="ident" id="8274974">Name</span>&nbsp;<span class="op" id="8274979">!=</span>&nbsp;<span class="ident" id="8274982">ident</span><span class="op" id="8274987">.</span><span class="ident" id="8274988">Name</span>&nbsp;<span class="op" id="8274993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274999">t</span><span class="op" id="8275000">.</span><span class="ident" id="8275001">Errorf</span><span class="op" id="8275007">(</span><span class="string" id="8275008">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8275059">,</span>&nbsp;<span class="ident" id="8275061">obj</span><span class="op" id="8275064">.</span><span class="ident" id="8275065">Name</span><span class="op" id="8275069">,</span>&nbsp;<span class="ident" id="8275071">ident</span><span class="op" id="8275076">.</span><span class="ident" id="8275077">Name</span><span class="op" id="8275081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275091">kind</span>&nbsp;<span class="op" id="8275096">:=</span>&nbsp;<span class="ident" id="8275099">objects</span><span class="op" id="8275106">[</span><span class="ident" id="8275107">ident</span><span class="op" id="8275112">.</span><span class="ident" id="8275113">Name</span><span class="op" id="8275117">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8275122">if</span>&nbsp;<span class="ident" id="8275125">obj</span><span class="op" id="8275128">.</span><span class="ident" id="8275129">Kind</span>&nbsp;<span class="op" id="8275134">!=</span>&nbsp;<span class="ident" id="8275137">kind</span>&nbsp;<span class="op" id="8275142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275148">t</span><span class="op" id="8275149">.</span><span class="ident" id="8275150">Errorf</span><span class="op" id="8275156">(</span><span class="string" id="8275157">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8275185">,</span>&nbsp;<span class="ident" id="8275187">ident</span><span class="op" id="8275192">.</span><span class="ident" id="8275193">Name</span><span class="op" id="8275197">,</span>&nbsp;<span class="ident" id="8275199">obj</span><span class="op" id="8275202">.</span><span class="ident" id="8275203">Kind</span><span class="op" id="8275207">,</span>&nbsp;<span class="ident" id="8275209">kind</span><span class="op" id="8275213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8275226">return</span>&nbsp;<span class="builtintype" id="8275233">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275239">}</span><span class="op" id="8275240">)</span><br>
<span class="lineno"></span><span class="op" id="8275242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8275245">func</span>&nbsp;<span class="ident" id="8275250">TestUnresolved</span><span class="op" id="8275264">(</span><span class="ident" id="8275265">t</span>&nbsp;<span class="op" id="8275267">*</span><span class="ident" id="8275268">testing</span><span class="op" id="8275275">.</span><span class="ident" id="8275276">T</span><span class="op" id="8275277">)</span>&nbsp;<span class="op" id="8275279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275282">f</span><span class="op" id="8275283">,</span>&nbsp;<span class="ident" id="8275285">err</span>&nbsp;<span class="op" id="8275289">:=</span>&nbsp;<span class="ident" id="8275292">ParseFile</span><span class="op" id="8275301">(</span><span class="ident" id="8275302">fset</span><span class="op" id="8275306">,</span>&nbsp;<span class="string" id="8275308">&#34;&#34;</span><span class="op" id="8275310">,</span>&nbsp;<span class="string" id="8275312">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8275790">,</span>&nbsp;<span class="num" id="8275792">0</span><span class="op" id="8275793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8275796">if</span>&nbsp;<span class="ident" id="8275799">err</span>&nbsp;<span class="op" id="8275803">!=</span>&nbsp;<span class="builtintype" id="8275806">nil</span>&nbsp;<span class="op" id="8275810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275814">t</span><span class="op" id="8275815">.</span><span class="ident" id="8275816">Fatal</span><span class="op" id="8275821">(</span><span class="ident" id="8275822">err</span><span class="op" id="8275825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275828">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275832">want</span>&nbsp;<span class="op" id="8275837">:=</span>&nbsp;<span class="string" id="8275840">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8275847">+</span>&nbsp;<span class="comment" id="8275849">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275858">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8275876">+</span>&nbsp;<span class="comment" id="8275878">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275887">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8275900">+</span>&nbsp;<span class="comment" id="8275902">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275911">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8275922">+</span>&nbsp;<span class="comment" id="8275924">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275933">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8275944">+</span>&nbsp;<span class="comment" id="8275946">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8275955">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275960">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8275967">+</span>&nbsp;<span class="comment" id="8275969">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275978">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8275996">+</span>&nbsp;<span class="comment" id="8275998">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276007">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8276020">+</span>&nbsp;<span class="comment" id="8276022">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276031">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8276042">+</span>&nbsp;<span class="comment" id="8276044">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276053">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8276064">+</span>&nbsp;<span class="comment" id="8276066">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276075">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276080">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8276087">+</span>&nbsp;<span class="comment" id="8276089">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276098">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8276110">+</span>&nbsp;<span class="comment" id="8276112">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276121">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8276134">+</span>&nbsp;<span class="comment" id="8276136">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276145">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276150">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8276157">+</span>&nbsp;<span class="comment" id="8276159">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276168">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8276186">+</span>&nbsp;<span class="comment" id="8276188">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276197">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8276206">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276215">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276250">var</span>&nbsp;<span class="ident" id="8276254">buf</span>&nbsp;<span class="ident" id="8276258">bytes</span><span class="op" id="8276263">.</span><span class="ident" id="8276264">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276272">for</span>&nbsp;<span class="ident" id="8276276">_</span><span class="op" id="8276277">,</span>&nbsp;<span class="ident" id="8276279">u</span>&nbsp;<span class="op" id="8276281">:=</span>&nbsp;<span class="keyword" id="8276284">range</span>&nbsp;<span class="ident" id="8276290">f</span><span class="op" id="8276291">.</span><span class="ident" id="8276292">Unresolved</span>&nbsp;<span class="op" id="8276303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276307">buf</span><span class="op" id="8276310">.</span><span class="ident" id="8276311">WriteString</span><span class="op" id="8276322">(</span><span class="ident" id="8276323">u</span><span class="op" id="8276324">.</span><span class="ident" id="8276325">Name</span><span class="op" id="8276329">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276333">buf</span><span class="op" id="8276336">.</span><span class="ident" id="8276337">WriteByte</span><span class="op" id="8276346">(</span><span class="string" id="8276347">&#39;&nbsp;&#39;</span><span class="op" id="8276350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276356">got</span>&nbsp;<span class="op" id="8276360">:=</span>&nbsp;<span class="ident" id="8276363">buf</span><span class="op" id="8276366">.</span><span class="ident" id="8276367">String</span><span class="op" id="8276373">(</span><span class="op" id="8276374">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276378">if</span>&nbsp;<span class="ident" id="8276381">got</span>&nbsp;<span class="op" id="8276385">!=</span>&nbsp;<span class="ident" id="8276388">want</span>&nbsp;<span class="op" id="8276393">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276397">t</span><span class="op" id="8276398">.</span><span class="ident" id="8276399">Errorf</span><span class="op" id="8276405">(</span><span class="string" id="8276406">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8276428">,</span>&nbsp;<span class="ident" id="8276430">got</span><span class="op" id="8276433">,</span>&nbsp;<span class="ident" id="8276435">want</span><span class="op" id="8276439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276442">}</span><br>
<span class="lineno"></span><span class="op" id="8276444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8276447">var</span>&nbsp;<span class="ident" id="8276451">imports</span>&nbsp;<span class="op" id="8276459">=</span>&nbsp;<span class="keyword" id="8276461">map</span><span class="op" id="8276464">[</span><span class="builtintype" id="8276465">string</span><span class="op" id="8276471">]</span><span class="builtintype" id="8276472">bool</span><span class="op" id="8276476">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276479">`&#34;a&#34;`</span><span class="op" id="8276484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276493">true</span><span class="op" id="8276497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276500">&#34;`a`&#34;</span><span class="op" id="8276505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276514">true</span><span class="op" id="8276518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276521">`&#34;a/b&#34;`</span><span class="op" id="8276528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276535">true</span><span class="op" id="8276539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276542">`&#34;a.b&#34;`</span><span class="op" id="8276549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276556">true</span><span class="op" id="8276560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276563">`&#34;m\x61th&#34;`</span><span class="op" id="8276574">:</span>&nbsp;&nbsp;<span class="builtintype" id="8276577">true</span><span class="op" id="8276581">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276584">`&#34;greek/&#34;`</span><span class="op" id="8276598">:</span>&nbsp;<span class="builtintype" id="8276600">true</span><span class="op" id="8276604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276607">`&#34;&#34;`</span><span class="op" id="8276611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276621">false</span><span class="op" id="8276626">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276630">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276682">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276736">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276779">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8276824">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276877">`&#34;\x00&#34;`</span><span class="op" id="8276885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276891">false</span><span class="op" id="8276896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276899">&#34;`\x00`&#34;</span><span class="op" id="8276907">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276913">false</span><span class="op" id="8276918">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276921">`&#34;\x7f&#34;`</span><span class="op" id="8276929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276935">false</span><span class="op" id="8276940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276943">&#34;`\x7f`&#34;</span><span class="op" id="8276951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276957">false</span><span class="op" id="8276962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276965">`&#34;a!&#34;`</span><span class="op" id="8276971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8276979">false</span><span class="op" id="8276984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276987">&#34;`a!`&#34;</span><span class="op" id="8276993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277001">false</span><span class="op" id="8277006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277009">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8277016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277023">false</span><span class="op" id="8277028">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277031">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8277038">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277045">false</span><span class="op" id="8277050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277053">`&#34;a\\b&#34;`</span><span class="op" id="8277061">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277067">false</span><span class="op" id="8277072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277075">&#34;`a\\b`&#34;</span><span class="op" id="8277083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277089">false</span><span class="op" id="8277094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277097">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8277106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277111">false</span><span class="op" id="8277116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277119">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8277128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277133">false</span><span class="op" id="8277138">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277141">`&#34;\x80\x80&#34;`</span><span class="op" id="8277153">:</span>&nbsp;<span class="builtintype" id="8277155">false</span><span class="op" id="8277160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277163">&#34;`\x80\x80`&#34;</span><span class="op" id="8277175">:</span>&nbsp;<span class="builtintype" id="8277177">false</span><span class="op" id="8277182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277185">`&#34;\xFFFD&#34;`</span><span class="op" id="8277195">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277199">false</span><span class="op" id="8277204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8277207">&#34;`\xFFFD`&#34;</span><span class="op" id="8277217">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277221">false</span><span class="op" id="8277226">,</span><br>
<span class="lineno"></span><span class="op" id="8277228">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8277231">func</span>&nbsp;<span class="ident" id="8277236">TestImports</span><span class="op" id="8277247">(</span><span class="ident" id="8277248">t</span>&nbsp;<span class="op" id="8277250">*</span><span class="ident" id="8277251">testing</span><span class="op" id="8277258">.</span><span class="ident" id="8277259">T</span><span class="op" id="8277260">)</span>&nbsp;<span class="op" id="8277262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277265">for</span>&nbsp;<span class="ident" id="8277269">path</span><span class="op" id="8277273">,</span>&nbsp;<span class="ident" id="8277275">isValid</span>&nbsp;<span class="op" id="8277283">:=</span>&nbsp;<span class="keyword" id="8277286">range</span>&nbsp;<span class="ident" id="8277292">imports</span>&nbsp;<span class="op" id="8277300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277304">src</span>&nbsp;<span class="op" id="8277308">:=</span>&nbsp;<span class="ident" id="8277311">fmt</span><span class="op" id="8277314">.</span><span class="ident" id="8277315">Sprintf</span><span class="op" id="8277322">(</span><span class="string" id="8277323">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8277345">,</span>&nbsp;<span class="ident" id="8277347">path</span><span class="op" id="8277351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277355">_</span><span class="op" id="8277356">,</span>&nbsp;<span class="ident" id="8277358">err</span>&nbsp;<span class="op" id="8277362">:=</span>&nbsp;<span class="ident" id="8277365">ParseFile</span><span class="op" id="8277374">(</span><span class="ident" id="8277375">fset</span><span class="op" id="8277379">,</span>&nbsp;<span class="string" id="8277381">&#34;&#34;</span><span class="op" id="8277383">,</span>&nbsp;<span class="ident" id="8277385">src</span><span class="op" id="8277388">,</span>&nbsp;<span class="num" id="8277390">0</span><span class="op" id="8277391">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277395">switch</span>&nbsp;<span class="op" id="8277402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277406">case</span>&nbsp;<span class="ident" id="8277411">err</span>&nbsp;<span class="op" id="8277415">!=</span>&nbsp;<span class="builtintype" id="8277418">nil</span>&nbsp;<span class="op" id="8277422">&amp;&amp;</span>&nbsp;<span class="ident" id="8277425">isValid</span><span class="op" id="8277432">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277437">t</span><span class="op" id="8277438">.</span><span class="ident" id="8277439">Errorf</span><span class="op" id="8277445">(</span><span class="string" id="8277446">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8277488">,</span>&nbsp;<span class="ident" id="8277490">src</span><span class="op" id="8277493">,</span>&nbsp;<span class="ident" id="8277495">err</span><span class="op" id="8277498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277502">case</span>&nbsp;<span class="ident" id="8277507">err</span>&nbsp;<span class="op" id="8277511">==</span>&nbsp;<span class="builtintype" id="8277514">nil</span>&nbsp;<span class="op" id="8277518">&amp;&amp;</span>&nbsp;<span class="op" id="8277521">!</span><span class="ident" id="8277522">isValid</span><span class="op" id="8277529">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277534">t</span><span class="op" id="8277535">.</span><span class="ident" id="8277536">Errorf</span><span class="op" id="8277542">(</span><span class="string" id="8277543">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8277586">,</span>&nbsp;<span class="ident" id="8277588">src</span><span class="op" id="8277591">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277598">}</span><br>
<span class="lineno"></span><span class="op" id="8277600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8277603">func</span>&nbsp;<span class="ident" id="8277608">TestCommentGroups</span><span class="op" id="8277625">(</span><span class="ident" id="8277626">t</span>&nbsp;<span class="op" id="8277628">*</span><span class="ident" id="8277629">testing</span><span class="op" id="8277636">.</span><span class="ident" id="8277637">T</span><span class="op" id="8277638">)</span>&nbsp;<span class="op" id="8277640">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277643">f</span><span class="op" id="8277644">,</span>&nbsp;<span class="ident" id="8277646">err</span>&nbsp;<span class="op" id="8277650">:=</span>&nbsp;<span class="ident" id="8277653">ParseFile</span><span class="op" id="8277662">(</span><span class="ident" id="8277663">fset</span><span class="op" id="8277667">,</span>&nbsp;<span class="string" id="8277669">&#34;&#34;</span><span class="op" id="8277671">,</span>&nbsp;<span class="string" id="8277673">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8277985">,</span>&nbsp;<span class="ident" id="8277987">ParseComments</span><span class="op" id="8278000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278003">if</span>&nbsp;<span class="ident" id="8278006">err</span>&nbsp;<span class="op" id="8278010">!=</span>&nbsp;<span class="builtintype" id="8278013">nil</span>&nbsp;<span class="op" id="8278017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278021">t</span><span class="op" id="8278022">.</span><span class="ident" id="8278023">Fatal</span><span class="op" id="8278028">(</span><span class="ident" id="8278029">err</span><span class="op" id="8278032">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278038">expected</span>&nbsp;<span class="op" id="8278047">:=</span>&nbsp;<span class="op" id="8278050">[</span><span class="op" id="8278051">]</span><span class="op" id="8278052">[</span><span class="op" id="8278053">]</span><span class="builtintype" id="8278054">string</span><span class="op" id="8278060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278064">{</span><span class="string" id="8278065">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8278075">,</span>&nbsp;<span class="string" id="8278077">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8278087">,</span>&nbsp;<span class="string" id="8278089">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8278099">,</span>&nbsp;<span class="string" id="8278101">&#34;//&nbsp;1d&#34;</span><span class="op" id="8278108">}</span><span class="op" id="8278109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278113">{</span><span class="string" id="8278114">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8278125">,</span>&nbsp;<span class="string" id="8278127">&#34;//&nbsp;2b&#34;</span><span class="op" id="8278134">}</span><span class="op" id="8278135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278139">{</span><span class="string" id="8278140">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8278150">,</span>&nbsp;<span class="string" id="8278152">&#34;//&nbsp;3b&#34;</span><span class="op" id="8278159">,</span>&nbsp;<span class="string" id="8278161">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8278171">}</span><span class="op" id="8278172">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278176">{</span><span class="string" id="8278177">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8278205">}</span><span class="op" id="8278206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278210">{</span><span class="string" id="8278211">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8278240">}</span><span class="op" id="8278241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278245">{</span><span class="string" id="8278246">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8278258">,</span>&nbsp;<span class="string" id="8278260">&#34;//&nbsp;3&#34;</span><span class="op" id="8278266">,</span>&nbsp;<span class="string" id="8278268">&#34;//&nbsp;5&#34;</span><span class="op" id="8278274">}</span><span class="op" id="8278275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278281">if</span>&nbsp;<span class="builtinfunc" id="8278284">len</span><span class="op" id="8278287">(</span><span class="ident" id="8278288">f</span><span class="op" id="8278289">.</span><span class="ident" id="8278290">Comments</span><span class="op" id="8278298">)</span>&nbsp;<span class="op" id="8278300">!=</span>&nbsp;<span class="builtinfunc" id="8278303">len</span><span class="op" id="8278306">(</span><span class="ident" id="8278307">expected</span><span class="op" id="8278315">)</span>&nbsp;<span class="op" id="8278317">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278321">t</span><span class="op" id="8278322">.</span><span class="ident" id="8278323">Fatalf</span><span class="op" id="8278329">(</span><span class="string" id="8278330">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8278366">,</span>&nbsp;<span class="builtinfunc" id="8278368">len</span><span class="op" id="8278371">(</span><span class="ident" id="8278372">f</span><span class="op" id="8278373">.</span><span class="ident" id="8278374">Comments</span><span class="op" id="8278382">)</span><span class="op" id="8278383">,</span>&nbsp;<span class="builtinfunc" id="8278385">len</span><span class="op" id="8278388">(</span><span class="ident" id="8278389">expected</span><span class="op" id="8278397">)</span><span class="op" id="8278398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278404">for</span>&nbsp;<span class="ident" id="8278408">i</span><span class="op" id="8278409">,</span>&nbsp;<span class="ident" id="8278411">exp</span>&nbsp;<span class="op" id="8278415">:=</span>&nbsp;<span class="keyword" id="8278418">range</span>&nbsp;<span class="ident" id="8278424">expected</span>&nbsp;<span class="op" id="8278433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278437">got</span>&nbsp;<span class="op" id="8278441">:=</span>&nbsp;<span class="ident" id="8278444">f</span><span class="op" id="8278445">.</span><span class="ident" id="8278446">Comments</span><span class="op" id="8278454">[</span><span class="ident" id="8278455">i</span><span class="op" id="8278456">]</span><span class="op" id="8278457">.</span><span class="ident" id="8278458">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278465">if</span>&nbsp;<span class="builtinfunc" id="8278468">len</span><span class="op" id="8278471">(</span><span class="ident" id="8278472">got</span><span class="op" id="8278475">)</span>&nbsp;<span class="op" id="8278477">!=</span>&nbsp;<span class="builtinfunc" id="8278480">len</span><span class="op" id="8278483">(</span><span class="ident" id="8278484">exp</span><span class="op" id="8278487">)</span>&nbsp;<span class="op" id="8278489">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278494">t</span><span class="op" id="8278495">.</span><span class="ident" id="8278496">Errorf</span><span class="op" id="8278502">(</span><span class="string" id="8278503">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8278545">,</span>&nbsp;<span class="builtinfunc" id="8278547">len</span><span class="op" id="8278550">(</span><span class="ident" id="8278551">got</span><span class="op" id="8278554">)</span><span class="op" id="8278555">,</span>&nbsp;<span class="ident" id="8278557">i</span><span class="op" id="8278558">,</span>&nbsp;<span class="builtinfunc" id="8278560">len</span><span class="op" id="8278563">(</span><span class="ident" id="8278564">exp</span><span class="op" id="8278567">)</span><span class="op" id="8278568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278573">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278588">for</span>&nbsp;<span class="ident" id="8278592">j</span><span class="op" id="8278593">,</span>&nbsp;<span class="ident" id="8278595">exp</span>&nbsp;<span class="op" id="8278599">:=</span>&nbsp;<span class="keyword" id="8278602">range</span>&nbsp;<span class="ident" id="8278608">exp</span>&nbsp;<span class="op" id="8278612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278617">got</span>&nbsp;<span class="op" id="8278621">:=</span>&nbsp;<span class="ident" id="8278624">got</span><span class="op" id="8278627">[</span><span class="ident" id="8278628">j</span><span class="op" id="8278629">]</span><span class="op" id="8278630">.</span><span class="ident" id="8278631">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278639">if</span>&nbsp;<span class="ident" id="8278642">got</span>&nbsp;<span class="op" id="8278646">!=</span>&nbsp;<span class="ident" id="8278649">exp</span>&nbsp;<span class="op" id="8278653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278659">t</span><span class="op" id="8278660">.</span><span class="ident" id="8278661">Errorf</span><span class="op" id="8278667">(</span><span class="string" id="8278668">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8278701">,</span>&nbsp;<span class="ident" id="8278703">got</span><span class="op" id="8278706">,</span>&nbsp;<span class="ident" id="8278708">i</span><span class="op" id="8278709">,</span>&nbsp;<span class="ident" id="8278711">exp</span><span class="op" id="8278714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278726">}</span><br>
<span class="lineno">375</span><span class="op" id="8278728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8278731">func</span>&nbsp;<span class="ident" id="8278736">getField</span><span class="op" id="8278744">(</span><span class="ident" id="8278745">file</span>&nbsp;<span class="op" id="8278750">*</span><span class="ident" id="8278751">ast</span><span class="op" id="8278754">.</span><span class="ident" id="8278755">File</span><span class="op" id="8278759">,</span>&nbsp;<span class="ident" id="8278761">fieldname</span>&nbsp;<span class="builtintype" id="8278771">string</span><span class="op" id="8278777">)</span>&nbsp;<span class="op" id="8278779">*</span><span class="ident" id="8278780">ast</span><span class="op" id="8278783">.</span><span class="ident" id="8278784">Field</span>&nbsp;<span class="op" id="8278790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278793">parts</span>&nbsp;<span class="op" id="8278799">:=</span>&nbsp;<span class="ident" id="8278802">strings</span><span class="op" id="8278809">.</span><span class="ident" id="8278810">Split</span><span class="op" id="8278815">(</span><span class="ident" id="8278816">fieldname</span><span class="op" id="8278825">,</span>&nbsp;<span class="string" id="8278827">&#34;.&#34;</span><span class="op" id="8278830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278833">for</span>&nbsp;<span class="ident" id="8278837">_</span><span class="op" id="8278838">,</span>&nbsp;<span class="ident" id="8278840">d</span>&nbsp;<span class="op" id="8278842">:=</span>&nbsp;<span class="keyword" id="8278845">range</span>&nbsp;<span class="ident" id="8278851">file</span><span class="op" id="8278855">.</span><span class="ident" id="8278856">Decls</span>&nbsp;<span class="op" id="8278862">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278866">if</span>&nbsp;<span class="ident" id="8278869">d</span><span class="op" id="8278870">,</span>&nbsp;<span class="ident" id="8278872">ok</span>&nbsp;<span class="op" id="8278875">:=</span>&nbsp;<span class="ident" id="8278878">d</span><span class="op" id="8278879">.</span><span class="op" id="8278880">(</span><span class="op" id="8278881">*</span><span class="ident" id="8278882">ast</span><span class="op" id="8278885">.</span><span class="ident" id="8278886">GenDecl</span><span class="op" id="8278893">)</span><span class="op" id="8278894">;</span>&nbsp;<span class="ident" id="8278896">ok</span>&nbsp;<span class="op" id="8278899">&amp;&amp;</span>&nbsp;<span class="ident" id="8278902">d</span><span class="op" id="8278903">.</span><span class="ident" id="8278904">Tok</span>&nbsp;<span class="op" id="8278908">==</span>&nbsp;<span class="ident" id="8278911">token</span><span class="op" id="8278916">.</span><span class="ident" id="8278917">TYPE</span>&nbsp;<span class="op" id="8278922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278927">for</span>&nbsp;<span class="ident" id="8278931">_</span><span class="op" id="8278932">,</span>&nbsp;<span class="ident" id="8278934">s</span>&nbsp;<span class="op" id="8278936">:=</span>&nbsp;<span class="keyword" id="8278939">range</span>&nbsp;<span class="ident" id="8278945">d</span><span class="op" id="8278946">.</span><span class="ident" id="8278947">Specs</span>&nbsp;<span class="op" id="8278953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278959">if</span>&nbsp;<span class="ident" id="8278962">s</span><span class="op" id="8278963">,</span>&nbsp;<span class="ident" id="8278965">ok</span>&nbsp;<span class="op" id="8278968">:=</span>&nbsp;<span class="ident" id="8278971">s</span><span class="op" id="8278972">.</span><span class="op" id="8278973">(</span><span class="op" id="8278974">*</span><span class="ident" id="8278975">ast</span><span class="op" id="8278978">.</span><span class="ident" id="8278979">TypeSpec</span><span class="op" id="8278987">)</span><span class="op" id="8278988">;</span>&nbsp;<span class="ident" id="8278990">ok</span>&nbsp;<span class="op" id="8278993">&amp;&amp;</span>&nbsp;<span class="ident" id="8278996">s</span><span class="op" id="8278997">.</span><span class="ident" id="8278998">Name</span><span class="op" id="8279002">.</span><span class="ident" id="8279003">Name</span>&nbsp;<span class="op" id="8279008">==</span>&nbsp;<span class="ident" id="8279011">parts</span><span class="op" id="8279016">[</span><span class="num" id="8279017">0</span><span class="op" id="8279018">]</span>&nbsp;<span class="op" id="8279020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279027">if</span>&nbsp;<span class="ident" id="8279030">s</span><span class="op" id="8279031">,</span>&nbsp;<span class="ident" id="8279033">ok</span>&nbsp;<span class="op" id="8279036">:=</span>&nbsp;<span class="ident" id="8279039">s</span><span class="op" id="8279040">.</span><span class="ident" id="8279041">Type</span><span class="op" id="8279045">.</span><span class="op" id="8279046">(</span><span class="op" id="8279047">*</span><span class="ident" id="8279048">ast</span><span class="op" id="8279051">.</span><span class="ident" id="8279052">StructType</span><span class="op" id="8279062">)</span><span class="op" id="8279063">;</span>&nbsp;<span class="ident" id="8279065">ok</span>&nbsp;<span class="op" id="8279068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279076">for</span>&nbsp;<span class="ident" id="8279080">_</span><span class="op" id="8279081">,</span>&nbsp;<span class="ident" id="8279083">f</span>&nbsp;<span class="op" id="8279085">:=</span>&nbsp;<span class="keyword" id="8279088">range</span>&nbsp;<span class="ident" id="8279094">s</span><span class="op" id="8279095">.</span><span class="ident" id="8279096">Fields</span><span class="op" id="8279102">.</span><span class="ident" id="8279103">List</span>&nbsp;<span class="op" id="8279108">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279117">for</span>&nbsp;<span class="ident" id="8279121">_</span><span class="op" id="8279122">,</span>&nbsp;<span class="ident" id="8279124">name</span>&nbsp;<span class="op" id="8279129">:=</span>&nbsp;<span class="keyword" id="8279132">range</span>&nbsp;<span class="ident" id="8279138">f</span><span class="op" id="8279139">.</span><span class="ident" id="8279140">Names</span>&nbsp;<span class="op" id="8279146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279156">if</span>&nbsp;<span class="ident" id="8279159">name</span><span class="op" id="8279163">.</span><span class="ident" id="8279164">Name</span>&nbsp;<span class="op" id="8279169">==</span>&nbsp;<span class="ident" id="8279172">parts</span><span class="op" id="8279177">[</span><span class="num" id="8279178">1</span><span class="op" id="8279179">]</span>&nbsp;<span class="op" id="8279181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279192">return</span>&nbsp;<span class="ident" id="8279199">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279218">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279248">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279254">return</span>&nbsp;<span class="builtintype" id="8279261">nil</span><br>
<span class="lineno"></span><span class="op" id="8279265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8279268">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8279342">func</span>&nbsp;<span class="ident" id="8279347">commentText</span><span class="op" id="8279358">(</span><span class="ident" id="8279359">c</span>&nbsp;<span class="op" id="8279361">*</span><span class="ident" id="8279362">ast</span><span class="op" id="8279365">.</span><span class="ident" id="8279366">CommentGroup</span><span class="op" id="8279378">)</span>&nbsp;<span class="builtintype" id="8279380">string</span>&nbsp;<span class="op" id="8279387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279390">var</span>&nbsp;<span class="ident" id="8279394">buf</span>&nbsp;<span class="ident" id="8279398">bytes</span><span class="op" id="8279403">.</span><span class="ident" id="8279404">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279412">if</span>&nbsp;<span class="ident" id="8279415">c</span>&nbsp;<span class="op" id="8279417">!=</span>&nbsp;<span class="builtintype" id="8279420">nil</span>&nbsp;<span class="op" id="8279424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279428">for</span>&nbsp;<span class="ident" id="8279432">_</span><span class="op" id="8279433">,</span>&nbsp;<span class="ident" id="8279435">c</span>&nbsp;<span class="op" id="8279437">:=</span>&nbsp;<span class="keyword" id="8279440">range</span>&nbsp;<span class="ident" id="8279446">c</span><span class="op" id="8279447">.</span><span class="ident" id="8279448">List</span>&nbsp;<span class="op" id="8279453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279458">buf</span><span class="op" id="8279461">.</span><span class="ident" id="8279462">WriteString</span><span class="op" id="8279473">(</span><span class="ident" id="8279474">c</span><span class="op" id="8279475">.</span><span class="ident" id="8279476">Text</span><span class="op" id="8279480">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279490">return</span>&nbsp;<span class="ident" id="8279497">buf</span><span class="op" id="8279500">.</span><span class="ident" id="8279501">String</span><span class="op" id="8279507">(</span><span class="op" id="8279508">)</span><br>
<span class="lineno"></span><span class="op" id="8279510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8279513">func</span>&nbsp;<span class="ident" id="8279518">checkFieldComments</span><span class="op" id="8279536">(</span><span class="ident" id="8279537">t</span>&nbsp;<span class="op" id="8279539">*</span><span class="ident" id="8279540">testing</span><span class="op" id="8279547">.</span><span class="ident" id="8279548">T</span><span class="op" id="8279549">,</span>&nbsp;<span class="ident" id="8279551">file</span>&nbsp;<span class="op" id="8279556">*</span><span class="ident" id="8279557">ast</span><span class="op" id="8279560">.</span><span class="ident" id="8279561">File</span><span class="op" id="8279565">,</span>&nbsp;<span class="ident" id="8279567">fieldname</span><span class="op" id="8279576">,</span>&nbsp;<span class="ident" id="8279578">lead</span><span class="op" id="8279582">,</span>&nbsp;<span class="ident" id="8279584">line</span>&nbsp;<span class="builtintype" id="8279589">string</span><span class="op" id="8279595">)</span>&nbsp;<span class="op" id="8279597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279600">f</span>&nbsp;<span class="op" id="8279602">:=</span>&nbsp;<span class="ident" id="8279605">getField</span><span class="op" id="8279613">(</span><span class="ident" id="8279614">file</span><span class="op" id="8279618">,</span>&nbsp;<span class="ident" id="8279620">fieldname</span><span class="op" id="8279629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279632">if</span>&nbsp;<span class="ident" id="8279635">f</span>&nbsp;<span class="op" id="8279637">==</span>&nbsp;<span class="builtintype" id="8279640">nil</span>&nbsp;<span class="op" id="8279644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279648">t</span><span class="op" id="8279649">.</span><span class="ident" id="8279650">Fatalf</span><span class="op" id="8279656">(</span><span class="string" id="8279657">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8279678">,</span>&nbsp;<span class="ident" id="8279680">fieldname</span><span class="op" id="8279689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279692">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279695">if</span>&nbsp;<span class="ident" id="8279698">got</span>&nbsp;<span class="op" id="8279702">:=</span>&nbsp;<span class="ident" id="8279705">commentText</span><span class="op" id="8279716">(</span><span class="ident" id="8279717">f</span><span class="op" id="8279718">.</span><span class="ident" id="8279719">Doc</span><span class="op" id="8279722">)</span><span class="op" id="8279723">;</span>&nbsp;<span class="ident" id="8279725">got</span>&nbsp;<span class="op" id="8279729">!=</span>&nbsp;<span class="ident" id="8279732">lead</span>&nbsp;<span class="op" id="8279737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279741">t</span><span class="op" id="8279742">.</span><span class="ident" id="8279743">Errorf</span><span class="op" id="8279749">(</span><span class="string" id="8279750">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8279784">,</span>&nbsp;<span class="ident" id="8279786">got</span><span class="op" id="8279789">,</span>&nbsp;<span class="ident" id="8279791">lead</span><span class="op" id="8279795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279801">if</span>&nbsp;<span class="ident" id="8279804">got</span>&nbsp;<span class="op" id="8279808">:=</span>&nbsp;<span class="ident" id="8279811">commentText</span><span class="op" id="8279822">(</span><span class="ident" id="8279823">f</span><span class="op" id="8279824">.</span><span class="ident" id="8279825">Comment</span><span class="op" id="8279832">)</span><span class="op" id="8279833">;</span>&nbsp;<span class="ident" id="8279835">got</span>&nbsp;<span class="op" id="8279839">!=</span>&nbsp;<span class="ident" id="8279842">line</span>&nbsp;<span class="op" id="8279847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279851">t</span><span class="op" id="8279852">.</span><span class="ident" id="8279853">Errorf</span><span class="op" id="8279859">(</span><span class="string" id="8279860">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8279894">,</span>&nbsp;<span class="ident" id="8279896">got</span><span class="op" id="8279899">,</span>&nbsp;<span class="ident" id="8279901">line</span><span class="op" id="8279905">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279908">}</span><br>
<span class="lineno"></span><span class="op" id="8279910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8279913">func</span>&nbsp;<span class="ident" id="8279918">TestLeadAndLineComments</span><span class="op" id="8279941">(</span><span class="ident" id="8279942">t</span>&nbsp;<span class="op" id="8279944">*</span><span class="ident" id="8279945">testing</span><span class="op" id="8279952">.</span><span class="ident" id="8279953">T</span><span class="op" id="8279954">)</span>&nbsp;<span class="op" id="8279956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279959">f</span><span class="op" id="8279960">,</span>&nbsp;<span class="ident" id="8279962">err</span>&nbsp;<span class="op" id="8279966">:=</span>&nbsp;<span class="ident" id="8279969">ParseFile</span><span class="op" id="8279978">(</span><span class="ident" id="8279979">fset</span><span class="op" id="8279983">,</span>&nbsp;<span class="string" id="8279985">&#34;&#34;</span><span class="op" id="8279987">,</span>&nbsp;<span class="string" id="8279989">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;f3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8280181">,</span>&nbsp;<span class="ident" id="8280183">ParseComments</span><span class="op" id="8280196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280199">if</span>&nbsp;<span class="ident" id="8280202">err</span>&nbsp;<span class="op" id="8280206">!=</span>&nbsp;<span class="builtintype" id="8280209">nil</span>&nbsp;<span class="op" id="8280213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280217">t</span><span class="op" id="8280218">.</span><span class="ident" id="8280219">Fatal</span><span class="op" id="8280224">(</span><span class="ident" id="8280225">err</span><span class="op" id="8280228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280231">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280234">checkFieldComments</span><span class="op" id="8280252">(</span><span class="ident" id="8280253">t</span><span class="op" id="8280254">,</span>&nbsp;<span class="ident" id="8280256">f</span><span class="op" id="8280257">,</span>&nbsp;<span class="string" id="8280259">&#34;T.F1&#34;</span><span class="op" id="8280265">,</span>&nbsp;<span class="string" id="8280267">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8280292">,</span>&nbsp;<span class="string" id="8280294">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8280319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280322">checkFieldComments</span><span class="op" id="8280340">(</span><span class="ident" id="8280341">t</span><span class="op" id="8280342">,</span>&nbsp;<span class="ident" id="8280344">f</span><span class="op" id="8280345">,</span>&nbsp;<span class="string" id="8280347">&#34;T.F2&#34;</span><span class="op" id="8280353">,</span>&nbsp;<span class="string" id="8280355">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8280377">,</span>&nbsp;<span class="string" id="8280379">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8280399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280402">checkFieldComments</span><span class="op" id="8280420">(</span><span class="ident" id="8280421">t</span><span class="op" id="8280422">,</span>&nbsp;<span class="ident" id="8280424">f</span><span class="op" id="8280425">,</span>&nbsp;<span class="string" id="8280427">&#34;T.f3&#34;</span><span class="op" id="8280433">,</span>&nbsp;<span class="string" id="8280435">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8280455">,</span>&nbsp;<span class="string" id="8280457">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8280477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280480">ast</span><span class="op" id="8280483">.</span><span class="ident" id="8280484">FileExports</span><span class="op" id="8280495">(</span><span class="ident" id="8280496">f</span><span class="op" id="8280497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280500">checkFieldComments</span><span class="op" id="8280518">(</span><span class="ident" id="8280519">t</span><span class="op" id="8280520">,</span>&nbsp;<span class="ident" id="8280522">f</span><span class="op" id="8280523">,</span>&nbsp;<span class="string" id="8280525">&#34;T.F1&#34;</span><span class="op" id="8280531">,</span>&nbsp;<span class="string" id="8280533">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8280558">,</span>&nbsp;<span class="string" id="8280560">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8280585">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280588">checkFieldComments</span><span class="op" id="8280606">(</span><span class="ident" id="8280607">t</span><span class="op" id="8280608">,</span>&nbsp;<span class="ident" id="8280610">f</span><span class="op" id="8280611">,</span>&nbsp;<span class="string" id="8280613">&#34;T.F2&#34;</span><span class="op" id="8280619">,</span>&nbsp;<span class="string" id="8280621">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8280643">,</span>&nbsp;<span class="string" id="8280645">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8280665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280668">if</span>&nbsp;<span class="ident" id="8280671">getField</span><span class="op" id="8280679">(</span><span class="ident" id="8280680">f</span><span class="op" id="8280681">,</span>&nbsp;<span class="string" id="8280683">&#34;T.f3&#34;</span><span class="op" id="8280689">)</span>&nbsp;<span class="op" id="8280691">!=</span>&nbsp;<span class="builtintype" id="8280694">nil</span>&nbsp;<span class="op" id="8280698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280702">t</span><span class="op" id="8280703">.</span><span class="ident" id="8280704">Error</span><span class="op" id="8280709">(</span><span class="string" id="8280710">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8280737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280740">}</span><br>
<span class="lineno"></span><span class="op" id="8280742">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
