<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3320319">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3320374">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3320428">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3320479">package</span>&nbsp;<span class="ident" id="3320487">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3320493">import</span>&nbsp;<span class="op" id="3320500">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3320503">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3320513">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3320516">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3320589">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="3320657">type</span>&nbsp;<span class="ident" id="3320662">tagOptions</span>&nbsp;<span class="builtintype" id="3320673">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3320681">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3320744">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="3320772">func</span>&nbsp;<span class="ident" id="3320777">parseTag</span><span class="op" id="3320785">(</span><span class="ident" id="3320786">tag</span>&nbsp;<span class="builtintype" id="3320790">string</span><span class="op" id="3320796">)</span>&nbsp;<span class="op" id="3320798">(</span><span class="builtintype" id="3320799">string</span><span class="op" id="3320805">,</span>&nbsp;<span class="ident" id="3320807">tagOptions</span><span class="op" id="3320817">)</span>&nbsp;<span class="op" id="3320819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3320822">if</span>&nbsp;<span class="ident" id="3320825">idx</span>&nbsp;<span class="op" id="3320829">:=</span>&nbsp;<span class="ident" id="3320832">strings</span><span class="op" id="3320839">.</span><span class="ident" id="3320840">Index</span><span class="op" id="3320845">(</span><span class="ident" id="3320846">tag</span><span class="op" id="3320849">,</span>&nbsp;<span class="string" id="3320851">&#34;,&#34;</span><span class="op" id="3320854">)</span><span class="op" id="3320855">;</span>&nbsp;<span class="ident" id="3320857">idx</span>&nbsp;<span class="op" id="3320861">!=</span>&nbsp;<span class="op" id="3320864">-</span><span class="num" id="3320865">1</span>&nbsp;<span class="op" id="3320867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3320871">return</span>&nbsp;<span class="ident" id="3320878">tag</span><span class="op" id="3320881">[</span><span class="op" id="3320882">:</span><span class="ident" id="3320883">idx</span><span class="op" id="3320886">]</span><span class="op" id="3320887">,</span>&nbsp;<span class="ident" id="3320889">tagOptions</span><span class="op" id="3320899">(</span><span class="ident" id="3320900">tag</span><span class="op" id="3320903">[</span><span class="ident" id="3320904">idx</span><span class="op" id="3320907">+</span><span class="num" id="3320908">1</span><span class="op" id="3320909">:</span><span class="op" id="3320910">]</span><span class="op" id="3320911">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3320914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3320917">return</span>&nbsp;<span class="ident" id="3320924">tag</span><span class="op" id="3320927">,</span>&nbsp;<span class="ident" id="3320929">tagOptions</span><span class="op" id="3320939">(</span><span class="string" id="3320940">&#34;&#34;</span><span class="op" id="3320942">)</span><br>
<span class="lineno"></span><span class="op" id="3320944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3320947">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="3321009">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3321078">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="3321108">func</span>&nbsp;<span class="op" id="3321113">(</span><span class="ident" id="3321114">o</span>&nbsp;<span class="ident" id="3321116">tagOptions</span><span class="op" id="3321126">)</span>&nbsp;<span class="ident" id="3321128">Contains</span><span class="op" id="3321136">(</span><span class="ident" id="3321137">optionName</span>&nbsp;<span class="builtintype" id="3321148">string</span><span class="op" id="3321154">)</span>&nbsp;<span class="builtintype" id="3321156">bool</span>&nbsp;<span class="op" id="3321161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321164">if</span>&nbsp;<span class="builtinfunc" id="3321167">len</span><span class="op" id="3321170">(</span><span class="ident" id="3321171">o</span><span class="op" id="3321172">)</span>&nbsp;<span class="op" id="3321174">==</span>&nbsp;<span class="num" id="3321177">0</span>&nbsp;<span class="op" id="3321179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321183">return</span>&nbsp;<span class="builtintype" id="3321190">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321200">s</span>&nbsp;<span class="op" id="3321202">:=</span>&nbsp;<span class="builtintype" id="3321205">string</span><span class="op" id="3321211">(</span><span class="ident" id="3321212">o</span><span class="op" id="3321213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321216">for</span>&nbsp;<span class="ident" id="3321220">s</span>&nbsp;<span class="op" id="3321222">!=</span>&nbsp;<span class="string" id="3321225">&#34;&#34;</span>&nbsp;<span class="op" id="3321228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321232">var</span>&nbsp;<span class="ident" id="3321236">next</span>&nbsp;<span class="builtintype" id="3321241">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321250">i</span>&nbsp;<span class="op" id="3321252">:=</span>&nbsp;<span class="ident" id="3321255">strings</span><span class="op" id="3321262">.</span><span class="ident" id="3321263">Index</span><span class="op" id="3321268">(</span><span class="ident" id="3321269">s</span><span class="op" id="3321270">,</span>&nbsp;<span class="string" id="3321272">&#34;,&#34;</span><span class="op" id="3321275">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321279">if</span>&nbsp;<span class="ident" id="3321282">i</span>&nbsp;<span class="op" id="3321284">&gt;=</span>&nbsp;<span class="num" id="3321287">0</span>&nbsp;<span class="op" id="3321289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321294">s</span><span class="op" id="3321295">,</span>&nbsp;<span class="ident" id="3321297">next</span>&nbsp;<span class="op" id="3321302">=</span>&nbsp;<span class="ident" id="3321304">s</span><span class="op" id="3321305">[</span><span class="op" id="3321306">:</span><span class="ident" id="3321307">i</span><span class="op" id="3321308">]</span><span class="op" id="3321309">,</span>&nbsp;<span class="ident" id="3321311">s</span><span class="op" id="3321312">[</span><span class="ident" id="3321313">i</span><span class="op" id="3321314">+</span><span class="num" id="3321315">1</span><span class="op" id="3321316">:</span><span class="op" id="3321317">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321325">if</span>&nbsp;<span class="ident" id="3321328">s</span>&nbsp;<span class="op" id="3321330">==</span>&nbsp;<span class="ident" id="3321333">optionName</span>&nbsp;<span class="op" id="3321344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321349">return</span>&nbsp;<span class="builtintype" id="3321356">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3321367">s</span>&nbsp;<span class="op" id="3321369">=</span>&nbsp;<span class="ident" id="3321371">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3321377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3321380">return</span>&nbsp;<span class="builtintype" id="3321387">false</span><br>
<span class="lineno"></span><span class="op" id="3321393">}</span>
</div>
</body>
</html>
