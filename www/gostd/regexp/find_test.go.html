<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp</h2>
<ul>
<li><a href="/gostd/regexp/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/regexp/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/regexp/exec.go.html">exec.go</a></li>
<li><a href="/gostd/regexp/exec2_test.go.html">exec2_test.go</a></li>
<li><a href="/gostd/regexp/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/regexp/find_test.go.html">find_test.go</a></li>
<li><a href="/gostd/regexp/onepass.go.html">onepass.go</a></li>
<li><a href="/gostd/regexp/onepass_test.go.html">onepass_test.go</a></li>
<li><a href="/gostd/regexp/regexp.go.html">regexp.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8255010">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8255065">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8255119">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8255170">package</span>&nbsp;<span class="ident" id="8255178">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255186">import</span>&nbsp;<span class="op" id="8255193">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255196">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255203">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255214">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8255224">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8255227">//&nbsp;For&nbsp;each&nbsp;pattern/text&nbsp;pair,&nbsp;what&nbsp;is&nbsp;the&nbsp;expected&nbsp;output&nbsp;of&nbsp;each&nbsp;function?</span><br>
<span class="lineno"></span><span class="comment" id="8255304">//&nbsp;We&nbsp;can&nbsp;derive&nbsp;the&nbsp;textual&nbsp;results&nbsp;from&nbsp;the&nbsp;indexed&nbsp;results,&nbsp;the&nbsp;non-submatch</span><br>
<span class="lineno">15</span><span class="comment" id="8255384">//&nbsp;results&nbsp;from&nbsp;the&nbsp;submatched&nbsp;results,&nbsp;the&nbsp;single&nbsp;results&nbsp;from&nbsp;the&nbsp;&#39;all&#39;&nbsp;results,</span><br>
<span class="lineno"></span><span class="comment" id="8255467">//&nbsp;and&nbsp;the&nbsp;byte&nbsp;results&nbsp;from&nbsp;the&nbsp;string&nbsp;results.&nbsp;Therefore&nbsp;the&nbsp;table&nbsp;includes</span><br>
<span class="lineno"></span><span class="comment" id="8255545">//&nbsp;only&nbsp;the&nbsp;FindAllStringSubmatchIndex&nbsp;result.</span><br>
<span class="lineno"></span><span class="keyword" id="8255592">type</span>&nbsp;<span class="ident" id="8255597">FindTest</span>&nbsp;<span class="keyword" id="8255606">struct</span>&nbsp;<span class="op" id="8255613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255616">pat</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8255624">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255632">text</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8255640">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255648">matches</span>&nbsp;<span class="op" id="8255656">[</span><span class="op" id="8255657">]</span><span class="op" id="8255658">[</span><span class="op" id="8255659">]</span><span class="builtintype" id="8255660">int</span><br>
<span class="lineno"></span><span class="op" id="8255664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255667">func</span>&nbsp;<span class="op" id="8255672">(</span><span class="ident" id="8255673">t</span>&nbsp;<span class="ident" id="8255675">FindTest</span><span class="op" id="8255683">)</span>&nbsp;<span class="ident" id="8255685">String</span><span class="op" id="8255691">(</span><span class="op" id="8255692">)</span>&nbsp;<span class="builtintype" id="8255694">string</span>&nbsp;<span class="op" id="8255701">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8255704">return</span>&nbsp;<span class="ident" id="8255711">fmt</span><span class="op" id="8255714">.</span><span class="ident" id="8255715">Sprintf</span><span class="op" id="8255722">(</span><span class="string" id="8255723">&#34;pat:&nbsp;%#q&nbsp;text:&nbsp;%#q&#34;</span><span class="op" id="8255743">,</span>&nbsp;<span class="ident" id="8255745">t</span><span class="op" id="8255746">.</span><span class="ident" id="8255747">pat</span><span class="op" id="8255750">,</span>&nbsp;<span class="ident" id="8255752">t</span><span class="op" id="8255753">.</span><span class="ident" id="8255754">text</span><span class="op" id="8255758">)</span><br>
<span class="lineno"></span><span class="op" id="8255760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255763">var</span>&nbsp;<span class="ident" id="8255767">findTests</span>&nbsp;<span class="op" id="8255777">=</span>&nbsp;<span class="op" id="8255779">[</span><span class="op" id="8255780">]</span><span class="ident" id="8255781">FindTest</span><span class="op" id="8255789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255792">{</span><span class="string" id="8255793">``</span><span class="op" id="8255795">,</span>&nbsp;<span class="string" id="8255797">``</span><span class="op" id="8255799">,</span>&nbsp;<span class="ident" id="8255801">build</span><span class="op" id="8255806">(</span><span class="num" id="8255807">1</span><span class="op" id="8255808">,</span>&nbsp;<span class="num" id="8255810">0</span><span class="op" id="8255811">,</span>&nbsp;<span class="num" id="8255813">0</span><span class="op" id="8255814">)</span><span class="op" id="8255815">}</span><span class="op" id="8255816">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255819">{</span><span class="string" id="8255820">`^abcdefg`</span><span class="op" id="8255830">,</span>&nbsp;<span class="string" id="8255832">&#34;abcdefg&#34;</span><span class="op" id="8255841">,</span>&nbsp;<span class="ident" id="8255843">build</span><span class="op" id="8255848">(</span><span class="num" id="8255849">1</span><span class="op" id="8255850">,</span>&nbsp;<span class="num" id="8255852">0</span><span class="op" id="8255853">,</span>&nbsp;<span class="num" id="8255855">7</span><span class="op" id="8255856">)</span><span class="op" id="8255857">}</span><span class="op" id="8255858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255861">{</span><span class="string" id="8255862">`a+`</span><span class="op" id="8255866">,</span>&nbsp;<span class="string" id="8255868">&#34;baaab&#34;</span><span class="op" id="8255875">,</span>&nbsp;<span class="ident" id="8255877">build</span><span class="op" id="8255882">(</span><span class="num" id="8255883">1</span><span class="op" id="8255884">,</span>&nbsp;<span class="num" id="8255886">1</span><span class="op" id="8255887">,</span>&nbsp;<span class="num" id="8255889">4</span><span class="op" id="8255890">)</span><span class="op" id="8255891">}</span><span class="op" id="8255892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255895">{</span><span class="string" id="8255896">&#34;abcd..&#34;</span><span class="op" id="8255904">,</span>&nbsp;<span class="string" id="8255906">&#34;abcdef&#34;</span><span class="op" id="8255914">,</span>&nbsp;<span class="ident" id="8255916">build</span><span class="op" id="8255921">(</span><span class="num" id="8255922">1</span><span class="op" id="8255923">,</span>&nbsp;<span class="num" id="8255925">0</span><span class="op" id="8255926">,</span>&nbsp;<span class="num" id="8255928">6</span><span class="op" id="8255929">)</span><span class="op" id="8255930">}</span><span class="op" id="8255931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255934">{</span><span class="string" id="8255935">`a`</span><span class="op" id="8255938">,</span>&nbsp;<span class="string" id="8255940">&#34;a&#34;</span><span class="op" id="8255943">,</span>&nbsp;<span class="ident" id="8255945">build</span><span class="op" id="8255950">(</span><span class="num" id="8255951">1</span><span class="op" id="8255952">,</span>&nbsp;<span class="num" id="8255954">0</span><span class="op" id="8255955">,</span>&nbsp;<span class="num" id="8255957">1</span><span class="op" id="8255958">)</span><span class="op" id="8255959">}</span><span class="op" id="8255960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255963">{</span><span class="string" id="8255964">`x`</span><span class="op" id="8255967">,</span>&nbsp;<span class="string" id="8255969">&#34;y&#34;</span><span class="op" id="8255972">,</span>&nbsp;<span class="ident" id="8255974">nil</span><span class="op" id="8255977">}</span><span class="op" id="8255978">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255981">{</span><span class="string" id="8255982">`b`</span><span class="op" id="8255985">,</span>&nbsp;<span class="string" id="8255987">&#34;abc&#34;</span><span class="op" id="8255992">,</span>&nbsp;<span class="ident" id="8255994">build</span><span class="op" id="8255999">(</span><span class="num" id="8256000">1</span><span class="op" id="8256001">,</span>&nbsp;<span class="num" id="8256003">1</span><span class="op" id="8256004">,</span>&nbsp;<span class="num" id="8256006">2</span><span class="op" id="8256007">)</span><span class="op" id="8256008">}</span><span class="op" id="8256009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256012">{</span><span class="string" id="8256013">`.`</span><span class="op" id="8256016">,</span>&nbsp;<span class="string" id="8256018">&#34;a&#34;</span><span class="op" id="8256021">,</span>&nbsp;<span class="ident" id="8256023">build</span><span class="op" id="8256028">(</span><span class="num" id="8256029">1</span><span class="op" id="8256030">,</span>&nbsp;<span class="num" id="8256032">0</span><span class="op" id="8256033">,</span>&nbsp;<span class="num" id="8256035">1</span><span class="op" id="8256036">)</span><span class="op" id="8256037">}</span><span class="op" id="8256038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256041">{</span><span class="string" id="8256042">`.*`</span><span class="op" id="8256046">,</span>&nbsp;<span class="string" id="8256048">&#34;abcdef&#34;</span><span class="op" id="8256056">,</span>&nbsp;<span class="ident" id="8256058">build</span><span class="op" id="8256063">(</span><span class="num" id="8256064">1</span><span class="op" id="8256065">,</span>&nbsp;<span class="num" id="8256067">0</span><span class="op" id="8256068">,</span>&nbsp;<span class="num" id="8256070">6</span><span class="op" id="8256071">)</span><span class="op" id="8256072">}</span><span class="op" id="8256073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256076">{</span><span class="string" id="8256077">`^`</span><span class="op" id="8256080">,</span>&nbsp;<span class="string" id="8256082">&#34;abcde&#34;</span><span class="op" id="8256089">,</span>&nbsp;<span class="ident" id="8256091">build</span><span class="op" id="8256096">(</span><span class="num" id="8256097">1</span><span class="op" id="8256098">,</span>&nbsp;<span class="num" id="8256100">0</span><span class="op" id="8256101">,</span>&nbsp;<span class="num" id="8256103">0</span><span class="op" id="8256104">)</span><span class="op" id="8256105">}</span><span class="op" id="8256106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256109">{</span><span class="string" id="8256110">`$`</span><span class="op" id="8256113">,</span>&nbsp;<span class="string" id="8256115">&#34;abcde&#34;</span><span class="op" id="8256122">,</span>&nbsp;<span class="ident" id="8256124">build</span><span class="op" id="8256129">(</span><span class="num" id="8256130">1</span><span class="op" id="8256131">,</span>&nbsp;<span class="num" id="8256133">5</span><span class="op" id="8256134">,</span>&nbsp;<span class="num" id="8256136">5</span><span class="op" id="8256137">)</span><span class="op" id="8256138">}</span><span class="op" id="8256139">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256142">{</span><span class="string" id="8256143">`^abcd$`</span><span class="op" id="8256151">,</span>&nbsp;<span class="string" id="8256153">&#34;abcd&#34;</span><span class="op" id="8256159">,</span>&nbsp;<span class="ident" id="8256161">build</span><span class="op" id="8256166">(</span><span class="num" id="8256167">1</span><span class="op" id="8256168">,</span>&nbsp;<span class="num" id="8256170">0</span><span class="op" id="8256171">,</span>&nbsp;<span class="num" id="8256173">4</span><span class="op" id="8256174">)</span><span class="op" id="8256175">}</span><span class="op" id="8256176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256179">{</span><span class="string" id="8256180">`^bcd&#39;`</span><span class="op" id="8256187">,</span>&nbsp;<span class="string" id="8256189">&#34;abcdef&#34;</span><span class="op" id="8256197">,</span>&nbsp;<span class="ident" id="8256199">nil</span><span class="op" id="8256202">}</span><span class="op" id="8256203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256206">{</span><span class="string" id="8256207">`^abcd$`</span><span class="op" id="8256215">,</span>&nbsp;<span class="string" id="8256217">&#34;abcde&#34;</span><span class="op" id="8256224">,</span>&nbsp;<span class="ident" id="8256226">nil</span><span class="op" id="8256229">}</span><span class="op" id="8256230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256233">{</span><span class="string" id="8256234">`a+`</span><span class="op" id="8256238">,</span>&nbsp;<span class="string" id="8256240">&#34;baaab&#34;</span><span class="op" id="8256247">,</span>&nbsp;<span class="ident" id="8256249">build</span><span class="op" id="8256254">(</span><span class="num" id="8256255">1</span><span class="op" id="8256256">,</span>&nbsp;<span class="num" id="8256258">1</span><span class="op" id="8256259">,</span>&nbsp;<span class="num" id="8256261">4</span><span class="op" id="8256262">)</span><span class="op" id="8256263">}</span><span class="op" id="8256264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256267">{</span><span class="string" id="8256268">`a*`</span><span class="op" id="8256272">,</span>&nbsp;<span class="string" id="8256274">&#34;baaab&#34;</span><span class="op" id="8256281">,</span>&nbsp;<span class="ident" id="8256283">build</span><span class="op" id="8256288">(</span><span class="num" id="8256289">3</span><span class="op" id="8256290">,</span>&nbsp;<span class="num" id="8256292">0</span><span class="op" id="8256293">,</span>&nbsp;<span class="num" id="8256295">0</span><span class="op" id="8256296">,</span>&nbsp;<span class="num" id="8256298">1</span><span class="op" id="8256299">,</span>&nbsp;<span class="num" id="8256301">4</span><span class="op" id="8256302">,</span>&nbsp;<span class="num" id="8256304">5</span><span class="op" id="8256305">,</span>&nbsp;<span class="num" id="8256307">5</span><span class="op" id="8256308">)</span><span class="op" id="8256309">}</span><span class="op" id="8256310">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256313">{</span><span class="string" id="8256314">`[a-z]+`</span><span class="op" id="8256322">,</span>&nbsp;<span class="string" id="8256324">&#34;abcd&#34;</span><span class="op" id="8256330">,</span>&nbsp;<span class="ident" id="8256332">build</span><span class="op" id="8256337">(</span><span class="num" id="8256338">1</span><span class="op" id="8256339">,</span>&nbsp;<span class="num" id="8256341">0</span><span class="op" id="8256342">,</span>&nbsp;<span class="num" id="8256344">4</span><span class="op" id="8256345">)</span><span class="op" id="8256346">}</span><span class="op" id="8256347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256350">{</span><span class="string" id="8256351">`[^a-z]+`</span><span class="op" id="8256360">,</span>&nbsp;<span class="string" id="8256362">&#34;ab1234cd&#34;</span><span class="op" id="8256372">,</span>&nbsp;<span class="ident" id="8256374">build</span><span class="op" id="8256379">(</span><span class="num" id="8256380">1</span><span class="op" id="8256381">,</span>&nbsp;<span class="num" id="8256383">2</span><span class="op" id="8256384">,</span>&nbsp;<span class="num" id="8256386">6</span><span class="op" id="8256387">)</span><span class="op" id="8256388">}</span><span class="op" id="8256389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256392">{</span><span class="string" id="8256393">`[a\-\]z]+`</span><span class="op" id="8256404">,</span>&nbsp;<span class="string" id="8256406">&#34;az]-bcz&#34;</span><span class="op" id="8256415">,</span>&nbsp;<span class="ident" id="8256417">build</span><span class="op" id="8256422">(</span><span class="num" id="8256423">2</span><span class="op" id="8256424">,</span>&nbsp;<span class="num" id="8256426">0</span><span class="op" id="8256427">,</span>&nbsp;<span class="num" id="8256429">4</span><span class="op" id="8256430">,</span>&nbsp;<span class="num" id="8256432">6</span><span class="op" id="8256433">,</span>&nbsp;<span class="num" id="8256435">7</span><span class="op" id="8256436">)</span><span class="op" id="8256437">}</span><span class="op" id="8256438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256441">{</span><span class="string" id="8256442">`[^\n]+`</span><span class="op" id="8256450">,</span>&nbsp;<span class="string" id="8256452">&#34;abcd\n&#34;</span><span class="op" id="8256460">,</span>&nbsp;<span class="ident" id="8256462">build</span><span class="op" id="8256467">(</span><span class="num" id="8256468">1</span><span class="op" id="8256469">,</span>&nbsp;<span class="num" id="8256471">0</span><span class="op" id="8256472">,</span>&nbsp;<span class="num" id="8256474">4</span><span class="op" id="8256475">)</span><span class="op" id="8256476">}</span><span class="op" id="8256477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256480">{</span><span class="string" id="8256481">`[日本語]+`</span><span class="op" id="8256495">,</span>&nbsp;<span class="string" id="8256497">&#34;日本語日本語&#34;</span><span class="op" id="8256517">,</span>&nbsp;<span class="ident" id="8256519">build</span><span class="op" id="8256524">(</span><span class="num" id="8256525">1</span><span class="op" id="8256526">,</span>&nbsp;<span class="num" id="8256528">0</span><span class="op" id="8256529">,</span>&nbsp;<span class="num" id="8256531">18</span><span class="op" id="8256533">)</span><span class="op" id="8256534">}</span><span class="op" id="8256535">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256538">{</span><span class="string" id="8256539">`日本語+`</span><span class="op" id="8256551">,</span>&nbsp;<span class="string" id="8256553">&#34;日本語&#34;</span><span class="op" id="8256564">,</span>&nbsp;<span class="ident" id="8256566">build</span><span class="op" id="8256571">(</span><span class="num" id="8256572">1</span><span class="op" id="8256573">,</span>&nbsp;<span class="num" id="8256575">0</span><span class="op" id="8256576">,</span>&nbsp;<span class="num" id="8256578">9</span><span class="op" id="8256579">)</span><span class="op" id="8256580">}</span><span class="op" id="8256581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256584">{</span><span class="string" id="8256585">`日本語+`</span><span class="op" id="8256597">,</span>&nbsp;<span class="string" id="8256599">&#34;日本語語語語&#34;</span><span class="op" id="8256619">,</span>&nbsp;<span class="ident" id="8256621">build</span><span class="op" id="8256626">(</span><span class="num" id="8256627">1</span><span class="op" id="8256628">,</span>&nbsp;<span class="num" id="8256630">0</span><span class="op" id="8256631">,</span>&nbsp;<span class="num" id="8256633">18</span><span class="op" id="8256635">)</span><span class="op" id="8256636">}</span><span class="op" id="8256637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256640">{</span><span class="string" id="8256641">`()`</span><span class="op" id="8256645">,</span>&nbsp;<span class="string" id="8256647">&#34;&#34;</span><span class="op" id="8256649">,</span>&nbsp;<span class="ident" id="8256651">build</span><span class="op" id="8256656">(</span><span class="num" id="8256657">1</span><span class="op" id="8256658">,</span>&nbsp;<span class="num" id="8256660">0</span><span class="op" id="8256661">,</span>&nbsp;<span class="num" id="8256663">0</span><span class="op" id="8256664">,</span>&nbsp;<span class="num" id="8256666">0</span><span class="op" id="8256667">,</span>&nbsp;<span class="num" id="8256669">0</span><span class="op" id="8256670">)</span><span class="op" id="8256671">}</span><span class="op" id="8256672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256675">{</span><span class="string" id="8256676">`(a)`</span><span class="op" id="8256681">,</span>&nbsp;<span class="string" id="8256683">&#34;a&#34;</span><span class="op" id="8256686">,</span>&nbsp;<span class="ident" id="8256688">build</span><span class="op" id="8256693">(</span><span class="num" id="8256694">1</span><span class="op" id="8256695">,</span>&nbsp;<span class="num" id="8256697">0</span><span class="op" id="8256698">,</span>&nbsp;<span class="num" id="8256700">1</span><span class="op" id="8256701">,</span>&nbsp;<span class="num" id="8256703">0</span><span class="op" id="8256704">,</span>&nbsp;<span class="num" id="8256706">1</span><span class="op" id="8256707">)</span><span class="op" id="8256708">}</span><span class="op" id="8256709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256712">{</span><span class="string" id="8256713">`(.)(.)`</span><span class="op" id="8256721">,</span>&nbsp;<span class="string" id="8256723">&#34;日a&#34;</span><span class="op" id="8256729">,</span>&nbsp;<span class="ident" id="8256731">build</span><span class="op" id="8256736">(</span><span class="num" id="8256737">1</span><span class="op" id="8256738">,</span>&nbsp;<span class="num" id="8256740">0</span><span class="op" id="8256741">,</span>&nbsp;<span class="num" id="8256743">4</span><span class="op" id="8256744">,</span>&nbsp;<span class="num" id="8256746">0</span><span class="op" id="8256747">,</span>&nbsp;<span class="num" id="8256749">3</span><span class="op" id="8256750">,</span>&nbsp;<span class="num" id="8256752">3</span><span class="op" id="8256753">,</span>&nbsp;<span class="num" id="8256755">4</span><span class="op" id="8256756">)</span><span class="op" id="8256757">}</span><span class="op" id="8256758">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256761">{</span><span class="string" id="8256762">`(.*)`</span><span class="op" id="8256768">,</span>&nbsp;<span class="string" id="8256770">&#34;&#34;</span><span class="op" id="8256772">,</span>&nbsp;<span class="ident" id="8256774">build</span><span class="op" id="8256779">(</span><span class="num" id="8256780">1</span><span class="op" id="8256781">,</span>&nbsp;<span class="num" id="8256783">0</span><span class="op" id="8256784">,</span>&nbsp;<span class="num" id="8256786">0</span><span class="op" id="8256787">,</span>&nbsp;<span class="num" id="8256789">0</span><span class="op" id="8256790">,</span>&nbsp;<span class="num" id="8256792">0</span><span class="op" id="8256793">)</span><span class="op" id="8256794">}</span><span class="op" id="8256795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256798">{</span><span class="string" id="8256799">`(.*)`</span><span class="op" id="8256805">,</span>&nbsp;<span class="string" id="8256807">&#34;abcd&#34;</span><span class="op" id="8256813">,</span>&nbsp;<span class="ident" id="8256815">build</span><span class="op" id="8256820">(</span><span class="num" id="8256821">1</span><span class="op" id="8256822">,</span>&nbsp;<span class="num" id="8256824">0</span><span class="op" id="8256825">,</span>&nbsp;<span class="num" id="8256827">4</span><span class="op" id="8256828">,</span>&nbsp;<span class="num" id="8256830">0</span><span class="op" id="8256831">,</span>&nbsp;<span class="num" id="8256833">4</span><span class="op" id="8256834">)</span><span class="op" id="8256835">}</span><span class="op" id="8256836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256839">{</span><span class="string" id="8256840">`(..)(..)`</span><span class="op" id="8256850">,</span>&nbsp;<span class="string" id="8256852">&#34;abcd&#34;</span><span class="op" id="8256858">,</span>&nbsp;<span class="ident" id="8256860">build</span><span class="op" id="8256865">(</span><span class="num" id="8256866">1</span><span class="op" id="8256867">,</span>&nbsp;<span class="num" id="8256869">0</span><span class="op" id="8256870">,</span>&nbsp;<span class="num" id="8256872">4</span><span class="op" id="8256873">,</span>&nbsp;<span class="num" id="8256875">0</span><span class="op" id="8256876">,</span>&nbsp;<span class="num" id="8256878">2</span><span class="op" id="8256879">,</span>&nbsp;<span class="num" id="8256881">2</span><span class="op" id="8256882">,</span>&nbsp;<span class="num" id="8256884">4</span><span class="op" id="8256885">)</span><span class="op" id="8256886">}</span><span class="op" id="8256887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256890">{</span><span class="string" id="8256891">`(([^xyz]*)(d))`</span><span class="op" id="8256907">,</span>&nbsp;<span class="string" id="8256909">&#34;abcd&#34;</span><span class="op" id="8256915">,</span>&nbsp;<span class="ident" id="8256917">build</span><span class="op" id="8256922">(</span><span class="num" id="8256923">1</span><span class="op" id="8256924">,</span>&nbsp;<span class="num" id="8256926">0</span><span class="op" id="8256927">,</span>&nbsp;<span class="num" id="8256929">4</span><span class="op" id="8256930">,</span>&nbsp;<span class="num" id="8256932">0</span><span class="op" id="8256933">,</span>&nbsp;<span class="num" id="8256935">4</span><span class="op" id="8256936">,</span>&nbsp;<span class="num" id="8256938">0</span><span class="op" id="8256939">,</span>&nbsp;<span class="num" id="8256941">3</span><span class="op" id="8256942">,</span>&nbsp;<span class="num" id="8256944">3</span><span class="op" id="8256945">,</span>&nbsp;<span class="num" id="8256947">4</span><span class="op" id="8256948">)</span><span class="op" id="8256949">}</span><span class="op" id="8256950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256953">{</span><span class="string" id="8256954">`((a|b|c)*(d))`</span><span class="op" id="8256969">,</span>&nbsp;<span class="string" id="8256971">&#34;abcd&#34;</span><span class="op" id="8256977">,</span>&nbsp;<span class="ident" id="8256979">build</span><span class="op" id="8256984">(</span><span class="num" id="8256985">1</span><span class="op" id="8256986">,</span>&nbsp;<span class="num" id="8256988">0</span><span class="op" id="8256989">,</span>&nbsp;<span class="num" id="8256991">4</span><span class="op" id="8256992">,</span>&nbsp;<span class="num" id="8256994">0</span><span class="op" id="8256995">,</span>&nbsp;<span class="num" id="8256997">4</span><span class="op" id="8256998">,</span>&nbsp;<span class="num" id="8257000">2</span><span class="op" id="8257001">,</span>&nbsp;<span class="num" id="8257003">3</span><span class="op" id="8257004">,</span>&nbsp;<span class="num" id="8257006">3</span><span class="op" id="8257007">,</span>&nbsp;<span class="num" id="8257009">4</span><span class="op" id="8257010">)</span><span class="op" id="8257011">}</span><span class="op" id="8257012">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257015">{</span><span class="string" id="8257016">`(((a|b|c)*)(d))`</span><span class="op" id="8257033">,</span>&nbsp;<span class="string" id="8257035">&#34;abcd&#34;</span><span class="op" id="8257041">,</span>&nbsp;<span class="ident" id="8257043">build</span><span class="op" id="8257048">(</span><span class="num" id="8257049">1</span><span class="op" id="8257050">,</span>&nbsp;<span class="num" id="8257052">0</span><span class="op" id="8257053">,</span>&nbsp;<span class="num" id="8257055">4</span><span class="op" id="8257056">,</span>&nbsp;<span class="num" id="8257058">0</span><span class="op" id="8257059">,</span>&nbsp;<span class="num" id="8257061">4</span><span class="op" id="8257062">,</span>&nbsp;<span class="num" id="8257064">0</span><span class="op" id="8257065">,</span>&nbsp;<span class="num" id="8257067">3</span><span class="op" id="8257068">,</span>&nbsp;<span class="num" id="8257070">2</span><span class="op" id="8257071">,</span>&nbsp;<span class="num" id="8257073">3</span><span class="op" id="8257074">,</span>&nbsp;<span class="num" id="8257076">3</span><span class="op" id="8257077">,</span>&nbsp;<span class="num" id="8257079">4</span><span class="op" id="8257080">)</span><span class="op" id="8257081">}</span><span class="op" id="8257082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257085">{</span><span class="string" id="8257086">`\a\f\n\r\t\v`</span><span class="op" id="8257100">,</span>&nbsp;<span class="string" id="8257102">&#34;\a\f\n\r\t\v&#34;</span><span class="op" id="8257116">,</span>&nbsp;<span class="ident" id="8257118">build</span><span class="op" id="8257123">(</span><span class="num" id="8257124">1</span><span class="op" id="8257125">,</span>&nbsp;<span class="num" id="8257127">0</span><span class="op" id="8257128">,</span>&nbsp;<span class="num" id="8257130">6</span><span class="op" id="8257131">)</span><span class="op" id="8257132">}</span><span class="op" id="8257133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257136">{</span><span class="string" id="8257137">`[\a\f\n\r\t\v]+`</span><span class="op" id="8257154">,</span>&nbsp;<span class="string" id="8257156">&#34;\a\f\n\r\t\v&#34;</span><span class="op" id="8257170">,</span>&nbsp;<span class="ident" id="8257172">build</span><span class="op" id="8257177">(</span><span class="num" id="8257178">1</span><span class="op" id="8257179">,</span>&nbsp;<span class="num" id="8257181">0</span><span class="op" id="8257182">,</span>&nbsp;<span class="num" id="8257184">6</span><span class="op" id="8257185">)</span><span class="op" id="8257186">}</span><span class="op" id="8257187">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257191">{</span><span class="string" id="8257192">`a*(|(b))c*`</span><span class="op" id="8257204">,</span>&nbsp;<span class="string" id="8257206">&#34;aacc&#34;</span><span class="op" id="8257212">,</span>&nbsp;<span class="ident" id="8257214">build</span><span class="op" id="8257219">(</span><span class="num" id="8257220">1</span><span class="op" id="8257221">,</span>&nbsp;<span class="num" id="8257223">0</span><span class="op" id="8257224">,</span>&nbsp;<span class="num" id="8257226">4</span><span class="op" id="8257227">,</span>&nbsp;<span class="num" id="8257229">2</span><span class="op" id="8257230">,</span>&nbsp;<span class="num" id="8257232">2</span><span class="op" id="8257233">,</span>&nbsp;<span class="op" id="8257235">-</span><span class="num" id="8257236">1</span><span class="op" id="8257237">,</span>&nbsp;<span class="op" id="8257239">-</span><span class="num" id="8257240">1</span><span class="op" id="8257241">)</span><span class="op" id="8257242">}</span><span class="op" id="8257243">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257246">{</span><span class="string" id="8257247">`(.*).*`</span><span class="op" id="8257255">,</span>&nbsp;<span class="string" id="8257257">&#34;ab&#34;</span><span class="op" id="8257261">,</span>&nbsp;<span class="ident" id="8257263">build</span><span class="op" id="8257268">(</span><span class="num" id="8257269">1</span><span class="op" id="8257270">,</span>&nbsp;<span class="num" id="8257272">0</span><span class="op" id="8257273">,</span>&nbsp;<span class="num" id="8257275">2</span><span class="op" id="8257276">,</span>&nbsp;<span class="num" id="8257278">0</span><span class="op" id="8257279">,</span>&nbsp;<span class="num" id="8257281">2</span><span class="op" id="8257282">)</span><span class="op" id="8257283">}</span><span class="op" id="8257284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257287">{</span><span class="string" id="8257288">`[.]`</span><span class="op" id="8257293">,</span>&nbsp;<span class="string" id="8257295">&#34;.&#34;</span><span class="op" id="8257298">,</span>&nbsp;<span class="ident" id="8257300">build</span><span class="op" id="8257305">(</span><span class="num" id="8257306">1</span><span class="op" id="8257307">,</span>&nbsp;<span class="num" id="8257309">0</span><span class="op" id="8257310">,</span>&nbsp;<span class="num" id="8257312">1</span><span class="op" id="8257313">)</span><span class="op" id="8257314">}</span><span class="op" id="8257315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257318">{</span><span class="string" id="8257319">`/$`</span><span class="op" id="8257323">,</span>&nbsp;<span class="string" id="8257325">&#34;/abc/&#34;</span><span class="op" id="8257332">,</span>&nbsp;<span class="ident" id="8257334">build</span><span class="op" id="8257339">(</span><span class="num" id="8257340">1</span><span class="op" id="8257341">,</span>&nbsp;<span class="num" id="8257343">4</span><span class="op" id="8257344">,</span>&nbsp;<span class="num" id="8257346">5</span><span class="op" id="8257347">)</span><span class="op" id="8257348">}</span><span class="op" id="8257349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257352">{</span><span class="string" id="8257353">`/$`</span><span class="op" id="8257357">,</span>&nbsp;<span class="string" id="8257359">&#34;/abc&#34;</span><span class="op" id="8257365">,</span>&nbsp;<span class="ident" id="8257367">nil</span><span class="op" id="8257370">}</span><span class="op" id="8257371">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8257375">//&nbsp;multiple&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257396">{</span><span class="string" id="8257397">`.`</span><span class="op" id="8257400">,</span>&nbsp;<span class="string" id="8257402">&#34;abc&#34;</span><span class="op" id="8257407">,</span>&nbsp;<span class="ident" id="8257409">build</span><span class="op" id="8257414">(</span><span class="num" id="8257415">3</span><span class="op" id="8257416">,</span>&nbsp;<span class="num" id="8257418">0</span><span class="op" id="8257419">,</span>&nbsp;<span class="num" id="8257421">1</span><span class="op" id="8257422">,</span>&nbsp;<span class="num" id="8257424">1</span><span class="op" id="8257425">,</span>&nbsp;<span class="num" id="8257427">2</span><span class="op" id="8257428">,</span>&nbsp;<span class="num" id="8257430">2</span><span class="op" id="8257431">,</span>&nbsp;<span class="num" id="8257433">3</span><span class="op" id="8257434">)</span><span class="op" id="8257435">}</span><span class="op" id="8257436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257439">{</span><span class="string" id="8257440">`(.)`</span><span class="op" id="8257445">,</span>&nbsp;<span class="string" id="8257447">&#34;abc&#34;</span><span class="op" id="8257452">,</span>&nbsp;<span class="ident" id="8257454">build</span><span class="op" id="8257459">(</span><span class="num" id="8257460">3</span><span class="op" id="8257461">,</span>&nbsp;<span class="num" id="8257463">0</span><span class="op" id="8257464">,</span>&nbsp;<span class="num" id="8257466">1</span><span class="op" id="8257467">,</span>&nbsp;<span class="num" id="8257469">0</span><span class="op" id="8257470">,</span>&nbsp;<span class="num" id="8257472">1</span><span class="op" id="8257473">,</span>&nbsp;<span class="num" id="8257475">1</span><span class="op" id="8257476">,</span>&nbsp;<span class="num" id="8257478">2</span><span class="op" id="8257479">,</span>&nbsp;<span class="num" id="8257481">1</span><span class="op" id="8257482">,</span>&nbsp;<span class="num" id="8257484">2</span><span class="op" id="8257485">,</span>&nbsp;<span class="num" id="8257487">2</span><span class="op" id="8257488">,</span>&nbsp;<span class="num" id="8257490">3</span><span class="op" id="8257491">,</span>&nbsp;<span class="num" id="8257493">2</span><span class="op" id="8257494">,</span>&nbsp;<span class="num" id="8257496">3</span><span class="op" id="8257497">)</span><span class="op" id="8257498">}</span><span class="op" id="8257499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257502">{</span><span class="string" id="8257503">`.(.)`</span><span class="op" id="8257509">,</span>&nbsp;<span class="string" id="8257511">&#34;abcd&#34;</span><span class="op" id="8257517">,</span>&nbsp;<span class="ident" id="8257519">build</span><span class="op" id="8257524">(</span><span class="num" id="8257525">2</span><span class="op" id="8257526">,</span>&nbsp;<span class="num" id="8257528">0</span><span class="op" id="8257529">,</span>&nbsp;<span class="num" id="8257531">2</span><span class="op" id="8257532">,</span>&nbsp;<span class="num" id="8257534">1</span><span class="op" id="8257535">,</span>&nbsp;<span class="num" id="8257537">2</span><span class="op" id="8257538">,</span>&nbsp;<span class="num" id="8257540">2</span><span class="op" id="8257541">,</span>&nbsp;<span class="num" id="8257543">4</span><span class="op" id="8257544">,</span>&nbsp;<span class="num" id="8257546">3</span><span class="op" id="8257547">,</span>&nbsp;<span class="num" id="8257549">4</span><span class="op" id="8257550">)</span><span class="op" id="8257551">}</span><span class="op" id="8257552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257555">{</span><span class="string" id="8257556">`ab*`</span><span class="op" id="8257561">,</span>&nbsp;<span class="string" id="8257563">&#34;abbaab&#34;</span><span class="op" id="8257571">,</span>&nbsp;<span class="ident" id="8257573">build</span><span class="op" id="8257578">(</span><span class="num" id="8257579">3</span><span class="op" id="8257580">,</span>&nbsp;<span class="num" id="8257582">0</span><span class="op" id="8257583">,</span>&nbsp;<span class="num" id="8257585">3</span><span class="op" id="8257586">,</span>&nbsp;<span class="num" id="8257588">3</span><span class="op" id="8257589">,</span>&nbsp;<span class="num" id="8257591">4</span><span class="op" id="8257592">,</span>&nbsp;<span class="num" id="8257594">4</span><span class="op" id="8257595">,</span>&nbsp;<span class="num" id="8257597">6</span><span class="op" id="8257598">)</span><span class="op" id="8257599">}</span><span class="op" id="8257600">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257603">{</span><span class="string" id="8257604">`a(b*)`</span><span class="op" id="8257611">,</span>&nbsp;<span class="string" id="8257613">&#34;abbaab&#34;</span><span class="op" id="8257621">,</span>&nbsp;<span class="ident" id="8257623">build</span><span class="op" id="8257628">(</span><span class="num" id="8257629">3</span><span class="op" id="8257630">,</span>&nbsp;<span class="num" id="8257632">0</span><span class="op" id="8257633">,</span>&nbsp;<span class="num" id="8257635">3</span><span class="op" id="8257636">,</span>&nbsp;<span class="num" id="8257638">1</span><span class="op" id="8257639">,</span>&nbsp;<span class="num" id="8257641">3</span><span class="op" id="8257642">,</span>&nbsp;<span class="num" id="8257644">3</span><span class="op" id="8257645">,</span>&nbsp;<span class="num" id="8257647">4</span><span class="op" id="8257648">,</span>&nbsp;<span class="num" id="8257650">4</span><span class="op" id="8257651">,</span>&nbsp;<span class="num" id="8257653">4</span><span class="op" id="8257654">,</span>&nbsp;<span class="num" id="8257656">4</span><span class="op" id="8257657">,</span>&nbsp;<span class="num" id="8257659">6</span><span class="op" id="8257660">,</span>&nbsp;<span class="num" id="8257662">5</span><span class="op" id="8257663">,</span>&nbsp;<span class="num" id="8257665">6</span><span class="op" id="8257666">)</span><span class="op" id="8257667">}</span><span class="op" id="8257668">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8257672">//&nbsp;fixed&nbsp;bugs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257687">{</span><span class="string" id="8257688">`ab$`</span><span class="op" id="8257693">,</span>&nbsp;<span class="string" id="8257695">&#34;cab&#34;</span><span class="op" id="8257700">,</span>&nbsp;<span class="ident" id="8257702">build</span><span class="op" id="8257707">(</span><span class="num" id="8257708">1</span><span class="op" id="8257709">,</span>&nbsp;<span class="num" id="8257711">1</span><span class="op" id="8257712">,</span>&nbsp;<span class="num" id="8257714">3</span><span class="op" id="8257715">)</span><span class="op" id="8257716">}</span><span class="op" id="8257717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257720">{</span><span class="string" id="8257721">`axxb$`</span><span class="op" id="8257728">,</span>&nbsp;<span class="string" id="8257730">&#34;axxcb&#34;</span><span class="op" id="8257737">,</span>&nbsp;<span class="ident" id="8257739">nil</span><span class="op" id="8257742">}</span><span class="op" id="8257743">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257746">{</span><span class="string" id="8257747">`data`</span><span class="op" id="8257753">,</span>&nbsp;<span class="string" id="8257755">&#34;daXY&nbsp;data&#34;</span><span class="op" id="8257766">,</span>&nbsp;<span class="ident" id="8257768">build</span><span class="op" id="8257773">(</span><span class="num" id="8257774">1</span><span class="op" id="8257775">,</span>&nbsp;<span class="num" id="8257777">5</span><span class="op" id="8257778">,</span>&nbsp;<span class="num" id="8257780">9</span><span class="op" id="8257781">)</span><span class="op" id="8257782">}</span><span class="op" id="8257783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257786">{</span><span class="string" id="8257787">`da(.)a$`</span><span class="op" id="8257796">,</span>&nbsp;<span class="string" id="8257798">&#34;daXY&nbsp;data&#34;</span><span class="op" id="8257809">,</span>&nbsp;<span class="ident" id="8257811">build</span><span class="op" id="8257816">(</span><span class="num" id="8257817">1</span><span class="op" id="8257818">,</span>&nbsp;<span class="num" id="8257820">5</span><span class="op" id="8257821">,</span>&nbsp;<span class="num" id="8257823">9</span><span class="op" id="8257824">,</span>&nbsp;<span class="num" id="8257826">7</span><span class="op" id="8257827">,</span>&nbsp;<span class="num" id="8257829">8</span><span class="op" id="8257830">)</span><span class="op" id="8257831">}</span><span class="op" id="8257832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257835">{</span><span class="string" id="8257836">`zx+`</span><span class="op" id="8257841">,</span>&nbsp;<span class="string" id="8257843">&#34;zzx&#34;</span><span class="op" id="8257848">,</span>&nbsp;<span class="ident" id="8257850">build</span><span class="op" id="8257855">(</span><span class="num" id="8257856">1</span><span class="op" id="8257857">,</span>&nbsp;<span class="num" id="8257859">1</span><span class="op" id="8257860">,</span>&nbsp;<span class="num" id="8257862">3</span><span class="op" id="8257863">)</span><span class="op" id="8257864">}</span><span class="op" id="8257865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257868">{</span><span class="string" id="8257869">`ab$`</span><span class="op" id="8257874">,</span>&nbsp;<span class="string" id="8257876">&#34;abcab&#34;</span><span class="op" id="8257883">,</span>&nbsp;<span class="ident" id="8257885">build</span><span class="op" id="8257890">(</span><span class="num" id="8257891">1</span><span class="op" id="8257892">,</span>&nbsp;<span class="num" id="8257894">3</span><span class="op" id="8257895">,</span>&nbsp;<span class="num" id="8257897">5</span><span class="op" id="8257898">)</span><span class="op" id="8257899">}</span><span class="op" id="8257900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257903">{</span><span class="string" id="8257904">`(aa)*$`</span><span class="op" id="8257912">,</span>&nbsp;<span class="string" id="8257914">&#34;a&#34;</span><span class="op" id="8257917">,</span>&nbsp;<span class="ident" id="8257919">build</span><span class="op" id="8257924">(</span><span class="num" id="8257925">1</span><span class="op" id="8257926">,</span>&nbsp;<span class="num" id="8257928">1</span><span class="op" id="8257929">,</span>&nbsp;<span class="num" id="8257931">1</span><span class="op" id="8257932">,</span>&nbsp;<span class="op" id="8257934">-</span><span class="num" id="8257935">1</span><span class="op" id="8257936">,</span>&nbsp;<span class="op" id="8257938">-</span><span class="num" id="8257939">1</span><span class="op" id="8257940">)</span><span class="op" id="8257941">}</span><span class="op" id="8257942">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257945">{</span><span class="string" id="8257946">`(?:.|(?:.a))`</span><span class="op" id="8257960">,</span>&nbsp;<span class="string" id="8257962">&#34;&#34;</span><span class="op" id="8257964">,</span>&nbsp;<span class="ident" id="8257966">nil</span><span class="op" id="8257969">}</span><span class="op" id="8257970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257973">{</span><span class="string" id="8257974">`(?:A(?:A|a))`</span><span class="op" id="8257988">,</span>&nbsp;<span class="string" id="8257990">&#34;Aa&#34;</span><span class="op" id="8257994">,</span>&nbsp;<span class="ident" id="8257996">build</span><span class="op" id="8258001">(</span><span class="num" id="8258002">1</span><span class="op" id="8258003">,</span>&nbsp;<span class="num" id="8258005">0</span><span class="op" id="8258006">,</span>&nbsp;<span class="num" id="8258008">2</span><span class="op" id="8258009">)</span><span class="op" id="8258010">}</span><span class="op" id="8258011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258014">{</span><span class="string" id="8258015">`(?:A|(?:A|a))`</span><span class="op" id="8258030">,</span>&nbsp;<span class="string" id="8258032">&#34;a&#34;</span><span class="op" id="8258035">,</span>&nbsp;<span class="ident" id="8258037">build</span><span class="op" id="8258042">(</span><span class="num" id="8258043">1</span><span class="op" id="8258044">,</span>&nbsp;<span class="num" id="8258046">0</span><span class="op" id="8258047">,</span>&nbsp;<span class="num" id="8258049">1</span><span class="op" id="8258050">)</span><span class="op" id="8258051">}</span><span class="op" id="8258052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258055">{</span><span class="string" id="8258056">`(a){0}`</span><span class="op" id="8258064">,</span>&nbsp;<span class="string" id="8258066">&#34;&#34;</span><span class="op" id="8258068">,</span>&nbsp;<span class="ident" id="8258070">build</span><span class="op" id="8258075">(</span><span class="num" id="8258076">1</span><span class="op" id="8258077">,</span>&nbsp;<span class="num" id="8258079">0</span><span class="op" id="8258080">,</span>&nbsp;<span class="num" id="8258082">0</span><span class="op" id="8258083">,</span>&nbsp;<span class="op" id="8258085">-</span><span class="num" id="8258086">1</span><span class="op" id="8258087">,</span>&nbsp;<span class="op" id="8258089">-</span><span class="num" id="8258090">1</span><span class="op" id="8258091">)</span><span class="op" id="8258092">}</span><span class="op" id="8258093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258096">{</span><span class="string" id="8258097">`(?-s)(?:(?:^).)`</span><span class="op" id="8258114">,</span>&nbsp;<span class="string" id="8258116">&#34;\n&#34;</span><span class="op" id="8258120">,</span>&nbsp;<span class="ident" id="8258122">nil</span><span class="op" id="8258125">}</span><span class="op" id="8258126">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258129">{</span><span class="string" id="8258130">`(?s)(?:(?:^).)`</span><span class="op" id="8258146">,</span>&nbsp;<span class="string" id="8258148">&#34;\n&#34;</span><span class="op" id="8258152">,</span>&nbsp;<span class="ident" id="8258154">build</span><span class="op" id="8258159">(</span><span class="num" id="8258160">1</span><span class="op" id="8258161">,</span>&nbsp;<span class="num" id="8258163">0</span><span class="op" id="8258164">,</span>&nbsp;<span class="num" id="8258166">1</span><span class="op" id="8258167">)</span><span class="op" id="8258168">}</span><span class="op" id="8258169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258172">{</span><span class="string" id="8258173">`(?:(?:^).)`</span><span class="op" id="8258185">,</span>&nbsp;<span class="string" id="8258187">&#34;\n&#34;</span><span class="op" id="8258191">,</span>&nbsp;<span class="ident" id="8258193">nil</span><span class="op" id="8258196">}</span><span class="op" id="8258197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258200">{</span><span class="string" id="8258201">`\b`</span><span class="op" id="8258205">,</span>&nbsp;<span class="string" id="8258207">&#34;x&#34;</span><span class="op" id="8258210">,</span>&nbsp;<span class="ident" id="8258212">build</span><span class="op" id="8258217">(</span><span class="num" id="8258218">2</span><span class="op" id="8258219">,</span>&nbsp;<span class="num" id="8258221">0</span><span class="op" id="8258222">,</span>&nbsp;<span class="num" id="8258224">0</span><span class="op" id="8258225">,</span>&nbsp;<span class="num" id="8258227">1</span><span class="op" id="8258228">,</span>&nbsp;<span class="num" id="8258230">1</span><span class="op" id="8258231">)</span><span class="op" id="8258232">}</span><span class="op" id="8258233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258236">{</span><span class="string" id="8258237">`\b`</span><span class="op" id="8258241">,</span>&nbsp;<span class="string" id="8258243">&#34;xx&#34;</span><span class="op" id="8258247">,</span>&nbsp;<span class="ident" id="8258249">build</span><span class="op" id="8258254">(</span><span class="num" id="8258255">2</span><span class="op" id="8258256">,</span>&nbsp;<span class="num" id="8258258">0</span><span class="op" id="8258259">,</span>&nbsp;<span class="num" id="8258261">0</span><span class="op" id="8258262">,</span>&nbsp;<span class="num" id="8258264">2</span><span class="op" id="8258265">,</span>&nbsp;<span class="num" id="8258267">2</span><span class="op" id="8258268">)</span><span class="op" id="8258269">}</span><span class="op" id="8258270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258273">{</span><span class="string" id="8258274">`\b`</span><span class="op" id="8258278">,</span>&nbsp;<span class="string" id="8258280">&#34;x&nbsp;y&#34;</span><span class="op" id="8258285">,</span>&nbsp;<span class="ident" id="8258287">build</span><span class="op" id="8258292">(</span><span class="num" id="8258293">4</span><span class="op" id="8258294">,</span>&nbsp;<span class="num" id="8258296">0</span><span class="op" id="8258297">,</span>&nbsp;<span class="num" id="8258299">0</span><span class="op" id="8258300">,</span>&nbsp;<span class="num" id="8258302">1</span><span class="op" id="8258303">,</span>&nbsp;<span class="num" id="8258305">1</span><span class="op" id="8258306">,</span>&nbsp;<span class="num" id="8258308">2</span><span class="op" id="8258309">,</span>&nbsp;<span class="num" id="8258311">2</span><span class="op" id="8258312">,</span>&nbsp;<span class="num" id="8258314">3</span><span class="op" id="8258315">,</span>&nbsp;<span class="num" id="8258317">3</span><span class="op" id="8258318">)</span><span class="op" id="8258319">}</span><span class="op" id="8258320">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258323">{</span><span class="string" id="8258324">`\b`</span><span class="op" id="8258328">,</span>&nbsp;<span class="string" id="8258330">&#34;xx&nbsp;yy&#34;</span><span class="op" id="8258337">,</span>&nbsp;<span class="ident" id="8258339">build</span><span class="op" id="8258344">(</span><span class="num" id="8258345">4</span><span class="op" id="8258346">,</span>&nbsp;<span class="num" id="8258348">0</span><span class="op" id="8258349">,</span>&nbsp;<span class="num" id="8258351">0</span><span class="op" id="8258352">,</span>&nbsp;<span class="num" id="8258354">2</span><span class="op" id="8258355">,</span>&nbsp;<span class="num" id="8258357">2</span><span class="op" id="8258358">,</span>&nbsp;<span class="num" id="8258360">3</span><span class="op" id="8258361">,</span>&nbsp;<span class="num" id="8258363">3</span><span class="op" id="8258364">,</span>&nbsp;<span class="num" id="8258366">5</span><span class="op" id="8258367">,</span>&nbsp;<span class="num" id="8258369">5</span><span class="op" id="8258370">)</span><span class="op" id="8258371">}</span><span class="op" id="8258372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258375">{</span><span class="string" id="8258376">`\B`</span><span class="op" id="8258380">,</span>&nbsp;<span class="string" id="8258382">&#34;x&#34;</span><span class="op" id="8258385">,</span>&nbsp;<span class="ident" id="8258387">nil</span><span class="op" id="8258390">}</span><span class="op" id="8258391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258394">{</span><span class="string" id="8258395">`\B`</span><span class="op" id="8258399">,</span>&nbsp;<span class="string" id="8258401">&#34;xx&#34;</span><span class="op" id="8258405">,</span>&nbsp;<span class="ident" id="8258407">build</span><span class="op" id="8258412">(</span><span class="num" id="8258413">1</span><span class="op" id="8258414">,</span>&nbsp;<span class="num" id="8258416">1</span><span class="op" id="8258417">,</span>&nbsp;<span class="num" id="8258419">1</span><span class="op" id="8258420">)</span><span class="op" id="8258421">}</span><span class="op" id="8258422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258425">{</span><span class="string" id="8258426">`\B`</span><span class="op" id="8258430">,</span>&nbsp;<span class="string" id="8258432">&#34;x&nbsp;y&#34;</span><span class="op" id="8258437">,</span>&nbsp;<span class="ident" id="8258439">nil</span><span class="op" id="8258442">}</span><span class="op" id="8258443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258446">{</span><span class="string" id="8258447">`\B`</span><span class="op" id="8258451">,</span>&nbsp;<span class="string" id="8258453">&#34;xx&nbsp;yy&#34;</span><span class="op" id="8258460">,</span>&nbsp;<span class="ident" id="8258462">build</span><span class="op" id="8258467">(</span><span class="num" id="8258468">2</span><span class="op" id="8258469">,</span>&nbsp;<span class="num" id="8258471">1</span><span class="op" id="8258472">,</span>&nbsp;<span class="num" id="8258474">1</span><span class="op" id="8258475">,</span>&nbsp;<span class="num" id="8258477">4</span><span class="op" id="8258478">,</span>&nbsp;<span class="num" id="8258480">4</span><span class="op" id="8258481">)</span><span class="op" id="8258482">}</span><span class="op" id="8258483">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258487">//&nbsp;RE2&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258501">{</span><span class="string" id="8258502">`[^\S\s]`</span><span class="op" id="8258511">,</span>&nbsp;<span class="string" id="8258513">&#34;abcd&#34;</span><span class="op" id="8258519">,</span>&nbsp;<span class="ident" id="8258521">nil</span><span class="op" id="8258524">}</span><span class="op" id="8258525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258528">{</span><span class="string" id="8258529">`[^\S[:space:]]`</span><span class="op" id="8258545">,</span>&nbsp;<span class="string" id="8258547">&#34;abcd&#34;</span><span class="op" id="8258553">,</span>&nbsp;<span class="ident" id="8258555">nil</span><span class="op" id="8258558">}</span><span class="op" id="8258559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258562">{</span><span class="string" id="8258563">`[^\D\d]`</span><span class="op" id="8258572">,</span>&nbsp;<span class="string" id="8258574">&#34;abcd&#34;</span><span class="op" id="8258580">,</span>&nbsp;<span class="ident" id="8258582">nil</span><span class="op" id="8258585">}</span><span class="op" id="8258586">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258589">{</span><span class="string" id="8258590">`[^\D[:digit:]]`</span><span class="op" id="8258606">,</span>&nbsp;<span class="string" id="8258608">&#34;abcd&#34;</span><span class="op" id="8258614">,</span>&nbsp;<span class="ident" id="8258616">nil</span><span class="op" id="8258619">}</span><span class="op" id="8258620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258623">{</span><span class="string" id="8258624">`(?i)\W`</span><span class="op" id="8258632">,</span>&nbsp;<span class="string" id="8258634">&#34;x&#34;</span><span class="op" id="8258637">,</span>&nbsp;<span class="ident" id="8258639">nil</span><span class="op" id="8258642">}</span><span class="op" id="8258643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258646">{</span><span class="string" id="8258647">`(?i)\W`</span><span class="op" id="8258655">,</span>&nbsp;<span class="string" id="8258657">&#34;k&#34;</span><span class="op" id="8258660">,</span>&nbsp;<span class="ident" id="8258662">nil</span><span class="op" id="8258665">}</span><span class="op" id="8258666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258669">{</span><span class="string" id="8258670">`(?i)\W`</span><span class="op" id="8258678">,</span>&nbsp;<span class="string" id="8258680">&#34;s&#34;</span><span class="op" id="8258683">,</span>&nbsp;<span class="ident" id="8258685">nil</span><span class="op" id="8258688">}</span><span class="op" id="8258689">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258693">//&nbsp;can&nbsp;backslash-escape&nbsp;any&nbsp;punctuation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258734">{</span><span class="string" id="8258735">`\!\&#34;\#\$\%\&amp;\&#39;\(\)\*\+\,\-\.\/\:\;\&lt;\=\&gt;\?\@\[\\\]\^\_\{\|\}\~`</span><span class="op" id="8258799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8258803">`!&#34;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_{|}~`</span><span class="op" id="8258836">,</span>&nbsp;<span class="ident" id="8258838">build</span><span class="op" id="8258843">(</span><span class="num" id="8258844">1</span><span class="op" id="8258845">,</span>&nbsp;<span class="num" id="8258847">0</span><span class="op" id="8258848">,</span>&nbsp;<span class="num" id="8258850">31</span><span class="op" id="8258852">)</span><span class="op" id="8258853">}</span><span class="op" id="8258854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258857">{</span><span class="string" id="8258858">`[\!\&#34;\#\$\%\&amp;\&#39;\(\)\*\+\,\-\.\/\:\;\&lt;\=\&gt;\?\@\[\\\]\^\_\{\|\}\~]+`</span><span class="op" id="8258925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8258929">`!&#34;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_{|}~`</span><span class="op" id="8258962">,</span>&nbsp;<span class="ident" id="8258964">build</span><span class="op" id="8258969">(</span><span class="num" id="8258970">1</span><span class="op" id="8258971">,</span>&nbsp;<span class="num" id="8258973">0</span><span class="op" id="8258974">,</span>&nbsp;<span class="num" id="8258976">31</span><span class="op" id="8258978">)</span><span class="op" id="8258979">}</span><span class="op" id="8258980">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258983">{</span><span class="string" id="8258984">&#34;\\`&#34;</span><span class="op" id="8258989">,</span>&nbsp;<span class="string" id="8258991">&#34;`&#34;</span><span class="op" id="8258994">,</span>&nbsp;<span class="ident" id="8258996">build</span><span class="op" id="8259001">(</span><span class="num" id="8259002">1</span><span class="op" id="8259003">,</span>&nbsp;<span class="num" id="8259005">0</span><span class="op" id="8259006">,</span>&nbsp;<span class="num" id="8259008">1</span><span class="op" id="8259009">)</span><span class="op" id="8259010">}</span><span class="op" id="8259011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259014">{</span><span class="string" id="8259015">&#34;[\\`]+&#34;</span><span class="op" id="8259023">,</span>&nbsp;<span class="string" id="8259025">&#34;`&#34;</span><span class="op" id="8259028">,</span>&nbsp;<span class="ident" id="8259030">build</span><span class="op" id="8259035">(</span><span class="num" id="8259036">1</span><span class="op" id="8259037">,</span>&nbsp;<span class="num" id="8259039">0</span><span class="op" id="8259040">,</span>&nbsp;<span class="num" id="8259042">1</span><span class="op" id="8259043">)</span><span class="op" id="8259044">}</span><span class="op" id="8259045">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8259049">//&nbsp;long&nbsp;set&nbsp;of&nbsp;matches&nbsp;(longer&nbsp;than&nbsp;startSize)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259097">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259101">&#34;.&#34;</span><span class="op" id="8259104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259108">&#34;qwertyuiopasdfghjklzxcvbnm1234567890&#34;</span><span class="op" id="8259146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259150">build</span><span class="op" id="8259155">(</span><span class="num" id="8259156">36</span><span class="op" id="8259158">,</span>&nbsp;<span class="num" id="8259160">0</span><span class="op" id="8259161">,</span>&nbsp;<span class="num" id="8259163">1</span><span class="op" id="8259164">,</span>&nbsp;<span class="num" id="8259166">1</span><span class="op" id="8259167">,</span>&nbsp;<span class="num" id="8259169">2</span><span class="op" id="8259170">,</span>&nbsp;<span class="num" id="8259172">2</span><span class="op" id="8259173">,</span>&nbsp;<span class="num" id="8259175">3</span><span class="op" id="8259176">,</span>&nbsp;<span class="num" id="8259178">3</span><span class="op" id="8259179">,</span>&nbsp;<span class="num" id="8259181">4</span><span class="op" id="8259182">,</span>&nbsp;<span class="num" id="8259184">4</span><span class="op" id="8259185">,</span>&nbsp;<span class="num" id="8259187">5</span><span class="op" id="8259188">,</span>&nbsp;<span class="num" id="8259190">5</span><span class="op" id="8259191">,</span>&nbsp;<span class="num" id="8259193">6</span><span class="op" id="8259194">,</span>&nbsp;<span class="num" id="8259196">6</span><span class="op" id="8259197">,</span>&nbsp;<span class="num" id="8259199">7</span><span class="op" id="8259200">,</span>&nbsp;<span class="num" id="8259202">7</span><span class="op" id="8259203">,</span>&nbsp;<span class="num" id="8259205">8</span><span class="op" id="8259206">,</span>&nbsp;<span class="num" id="8259208">8</span><span class="op" id="8259209">,</span>&nbsp;<span class="num" id="8259211">9</span><span class="op" id="8259212">,</span>&nbsp;<span class="num" id="8259214">9</span><span class="op" id="8259215">,</span>&nbsp;<span class="num" id="8259217">10</span><span class="op" id="8259219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8259224">10</span><span class="op" id="8259226">,</span>&nbsp;<span class="num" id="8259228">11</span><span class="op" id="8259230">,</span>&nbsp;<span class="num" id="8259232">11</span><span class="op" id="8259234">,</span>&nbsp;<span class="num" id="8259236">12</span><span class="op" id="8259238">,</span>&nbsp;<span class="num" id="8259240">12</span><span class="op" id="8259242">,</span>&nbsp;<span class="num" id="8259244">13</span><span class="op" id="8259246">,</span>&nbsp;<span class="num" id="8259248">13</span><span class="op" id="8259250">,</span>&nbsp;<span class="num" id="8259252">14</span><span class="op" id="8259254">,</span>&nbsp;<span class="num" id="8259256">14</span><span class="op" id="8259258">,</span>&nbsp;<span class="num" id="8259260">15</span><span class="op" id="8259262">,</span>&nbsp;<span class="num" id="8259264">15</span><span class="op" id="8259266">,</span>&nbsp;<span class="num" id="8259268">16</span><span class="op" id="8259270">,</span>&nbsp;<span class="num" id="8259272">16</span><span class="op" id="8259274">,</span>&nbsp;<span class="num" id="8259276">17</span><span class="op" id="8259278">,</span>&nbsp;<span class="num" id="8259280">17</span><span class="op" id="8259282">,</span>&nbsp;<span class="num" id="8259284">18</span><span class="op" id="8259286">,</span>&nbsp;<span class="num" id="8259288">18</span><span class="op" id="8259290">,</span>&nbsp;<span class="num" id="8259292">19</span><span class="op" id="8259294">,</span>&nbsp;<span class="num" id="8259296">19</span><span class="op" id="8259298">,</span>&nbsp;<span class="num" id="8259300">20</span><span class="op" id="8259302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8259307">20</span><span class="op" id="8259309">,</span>&nbsp;<span class="num" id="8259311">21</span><span class="op" id="8259313">,</span>&nbsp;<span class="num" id="8259315">21</span><span class="op" id="8259317">,</span>&nbsp;<span class="num" id="8259319">22</span><span class="op" id="8259321">,</span>&nbsp;<span class="num" id="8259323">22</span><span class="op" id="8259325">,</span>&nbsp;<span class="num" id="8259327">23</span><span class="op" id="8259329">,</span>&nbsp;<span class="num" id="8259331">23</span><span class="op" id="8259333">,</span>&nbsp;<span class="num" id="8259335">24</span><span class="op" id="8259337">,</span>&nbsp;<span class="num" id="8259339">24</span><span class="op" id="8259341">,</span>&nbsp;<span class="num" id="8259343">25</span><span class="op" id="8259345">,</span>&nbsp;<span class="num" id="8259347">25</span><span class="op" id="8259349">,</span>&nbsp;<span class="num" id="8259351">26</span><span class="op" id="8259353">,</span>&nbsp;<span class="num" id="8259355">26</span><span class="op" id="8259357">,</span>&nbsp;<span class="num" id="8259359">27</span><span class="op" id="8259361">,</span>&nbsp;<span class="num" id="8259363">27</span><span class="op" id="8259365">,</span>&nbsp;<span class="num" id="8259367">28</span><span class="op" id="8259369">,</span>&nbsp;<span class="num" id="8259371">28</span><span class="op" id="8259373">,</span>&nbsp;<span class="num" id="8259375">29</span><span class="op" id="8259377">,</span>&nbsp;<span class="num" id="8259379">29</span><span class="op" id="8259381">,</span>&nbsp;<span class="num" id="8259383">30</span><span class="op" id="8259385">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8259390">30</span><span class="op" id="8259392">,</span>&nbsp;<span class="num" id="8259394">31</span><span class="op" id="8259396">,</span>&nbsp;<span class="num" id="8259398">31</span><span class="op" id="8259400">,</span>&nbsp;<span class="num" id="8259402">32</span><span class="op" id="8259404">,</span>&nbsp;<span class="num" id="8259406">32</span><span class="op" id="8259408">,</span>&nbsp;<span class="num" id="8259410">33</span><span class="op" id="8259412">,</span>&nbsp;<span class="num" id="8259414">33</span><span class="op" id="8259416">,</span>&nbsp;<span class="num" id="8259418">34</span><span class="op" id="8259420">,</span>&nbsp;<span class="num" id="8259422">34</span><span class="op" id="8259424">,</span>&nbsp;<span class="num" id="8259426">35</span><span class="op" id="8259428">,</span>&nbsp;<span class="num" id="8259430">35</span><span class="op" id="8259432">,</span>&nbsp;<span class="num" id="8259434">36</span><span class="op" id="8259436">)</span><span class="op" id="8259437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259440">}</span><span class="op" id="8259441">,</span><br>
<span class="lineno"></span><span class="op" id="8259443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8259446">//&nbsp;build&nbsp;is&nbsp;a&nbsp;helper&nbsp;to&nbsp;construct&nbsp;a&nbsp;[][]int&nbsp;by&nbsp;extracting&nbsp;n&nbsp;sequences&nbsp;from&nbsp;x.</span><br>
<span class="lineno">130</span><span class="comment" id="8259524">//&nbsp;This&nbsp;represents&nbsp;n&nbsp;matches&nbsp;with&nbsp;len(x)/n&nbsp;submatches&nbsp;each.</span><br>
<span class="lineno"></span><span class="keyword" id="8259584">func</span>&nbsp;<span class="ident" id="8259589">build</span><span class="op" id="8259594">(</span><span class="ident" id="8259595">n</span>&nbsp;<span class="builtintype" id="8259597">int</span><span class="op" id="8259600">,</span>&nbsp;<span class="ident" id="8259602">x</span>&nbsp;<span class="op" id="8259604">...</span><span class="builtintype" id="8259607">int</span><span class="op" id="8259610">)</span>&nbsp;<span class="op" id="8259612">[</span><span class="op" id="8259613">]</span><span class="op" id="8259614">[</span><span class="op" id="8259615">]</span><span class="builtintype" id="8259616">int</span>&nbsp;<span class="op" id="8259620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259623">ret</span>&nbsp;<span class="op" id="8259627">:=</span>&nbsp;<span class="builtinfunc" id="8259630">make</span><span class="op" id="8259634">(</span><span class="op" id="8259635">[</span><span class="op" id="8259636">]</span><span class="op" id="8259637">[</span><span class="op" id="8259638">]</span><span class="builtintype" id="8259639">int</span><span class="op" id="8259642">,</span>&nbsp;<span class="ident" id="8259644">n</span><span class="op" id="8259645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259648">runLength</span>&nbsp;<span class="op" id="8259658">:=</span>&nbsp;<span class="builtinfunc" id="8259661">len</span><span class="op" id="8259664">(</span><span class="ident" id="8259665">x</span><span class="op" id="8259666">)</span>&nbsp;<span class="op" id="8259668">/</span>&nbsp;<span class="ident" id="8259670">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259673">j</span>&nbsp;<span class="op" id="8259675">:=</span>&nbsp;<span class="num" id="8259678">0</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259681">for</span>&nbsp;<span class="ident" id="8259685">i</span>&nbsp;<span class="op" id="8259687">:=</span>&nbsp;<span class="keyword" id="8259690">range</span>&nbsp;<span class="ident" id="8259696">ret</span>&nbsp;<span class="op" id="8259700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259704">ret</span><span class="op" id="8259707">[</span><span class="ident" id="8259708">i</span><span class="op" id="8259709">]</span>&nbsp;<span class="op" id="8259711">=</span>&nbsp;<span class="builtinfunc" id="8259713">make</span><span class="op" id="8259717">(</span><span class="op" id="8259718">[</span><span class="op" id="8259719">]</span><span class="builtintype" id="8259720">int</span><span class="op" id="8259723">,</span>&nbsp;<span class="ident" id="8259725">runLength</span><span class="op" id="8259734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8259738">copy</span><span class="op" id="8259742">(</span><span class="ident" id="8259743">ret</span><span class="op" id="8259746">[</span><span class="ident" id="8259747">i</span><span class="op" id="8259748">]</span><span class="op" id="8259749">,</span>&nbsp;<span class="ident" id="8259751">x</span><span class="op" id="8259752">[</span><span class="ident" id="8259753">j</span><span class="op" id="8259754">:</span><span class="op" id="8259755">]</span><span class="op" id="8259756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259760">j</span>&nbsp;<span class="op" id="8259762">+=</span>&nbsp;<span class="ident" id="8259765">runLength</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259777">if</span>&nbsp;<span class="ident" id="8259780">j</span>&nbsp;<span class="op" id="8259782">&gt;</span>&nbsp;<span class="builtinfunc" id="8259784">len</span><span class="op" id="8259787">(</span><span class="ident" id="8259788">x</span><span class="op" id="8259789">)</span>&nbsp;<span class="op" id="8259791">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8259796">panic</span><span class="op" id="8259801">(</span><span class="string" id="8259802">&#34;invalid&nbsp;build&nbsp;entry&#34;</span><span class="op" id="8259823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259833">return</span>&nbsp;<span class="ident" id="8259840">ret</span><br>
<span class="lineno"></span><span class="op" id="8259844">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="8259847">//&nbsp;First&nbsp;the&nbsp;simple&nbsp;cases.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259875">func</span>&nbsp;<span class="ident" id="8259880">TestFind</span><span class="op" id="8259888">(</span><span class="ident" id="8259889">t</span>&nbsp;<span class="op" id="8259891">*</span><span class="ident" id="8259892">testing</span><span class="op" id="8259899">.</span><span class="ident" id="8259900">T</span><span class="op" id="8259901">)</span>&nbsp;<span class="op" id="8259903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259906">for</span>&nbsp;<span class="ident" id="8259910">_</span><span class="op" id="8259911">,</span>&nbsp;<span class="ident" id="8259913">test</span>&nbsp;<span class="op" id="8259918">:=</span>&nbsp;<span class="keyword" id="8259921">range</span>&nbsp;<span class="ident" id="8259927">findTests</span>&nbsp;<span class="op" id="8259937">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259941">re</span>&nbsp;<span class="op" id="8259944">:=</span>&nbsp;<span class="ident" id="8259947">MustCompile</span><span class="op" id="8259958">(</span><span class="ident" id="8259959">test</span><span class="op" id="8259963">.</span><span class="ident" id="8259964">pat</span><span class="op" id="8259967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259971">if</span>&nbsp;<span class="ident" id="8259974">re</span><span class="op" id="8259976">.</span><span class="ident" id="8259977">String</span><span class="op" id="8259983">(</span><span class="op" id="8259984">)</span>&nbsp;<span class="op" id="8259986">!=</span>&nbsp;<span class="ident" id="8259989">test</span><span class="op" id="8259993">.</span><span class="ident" id="8259994">pat</span>&nbsp;<span class="op" id="8259998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260003">t</span><span class="op" id="8260004">.</span><span class="ident" id="8260005">Errorf</span><span class="op" id="8260011">(</span><span class="string" id="8260012">&#34;String()&nbsp;=&nbsp;`%s`;&nbsp;should&nbsp;be&nbsp;`%s`&#34;</span><span class="op" id="8260045">,</span>&nbsp;<span class="ident" id="8260047">re</span><span class="op" id="8260049">.</span><span class="ident" id="8260050">String</span><span class="op" id="8260056">(</span><span class="op" id="8260057">)</span><span class="op" id="8260058">,</span>&nbsp;<span class="ident" id="8260060">test</span><span class="op" id="8260064">.</span><span class="ident" id="8260065">pat</span><span class="op" id="8260068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260076">result</span>&nbsp;<span class="op" id="8260083">:=</span>&nbsp;<span class="ident" id="8260086">re</span><span class="op" id="8260088">.</span><span class="ident" id="8260089">Find</span><span class="op" id="8260093">(</span><span class="op" id="8260094">[</span><span class="op" id="8260095">]</span><span class="builtintype" id="8260096">byte</span><span class="op" id="8260100">(</span><span class="ident" id="8260101">test</span><span class="op" id="8260105">.</span><span class="ident" id="8260106">text</span><span class="op" id="8260110">)</span><span class="op" id="8260111">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260115">switch</span>&nbsp;<span class="op" id="8260122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260126">case</span>&nbsp;<span class="builtinfunc" id="8260131">len</span><span class="op" id="8260134">(</span><span class="ident" id="8260135">test</span><span class="op" id="8260139">.</span><span class="ident" id="8260140">matches</span><span class="op" id="8260147">)</span>&nbsp;<span class="op" id="8260149">==</span>&nbsp;<span class="num" id="8260152">0</span>&nbsp;<span class="op" id="8260154">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="8260157">len</span><span class="op" id="8260160">(</span><span class="ident" id="8260161">result</span><span class="op" id="8260167">)</span>&nbsp;<span class="op" id="8260169">==</span>&nbsp;<span class="num" id="8260172">0</span><span class="op" id="8260173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260178">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260186">case</span>&nbsp;<span class="ident" id="8260191">test</span><span class="op" id="8260195">.</span><span class="ident" id="8260196">matches</span>&nbsp;<span class="op" id="8260204">==</span>&nbsp;<span class="ident" id="8260207">nil</span>&nbsp;<span class="op" id="8260211">&amp;&amp;</span>&nbsp;<span class="ident" id="8260214">result</span>&nbsp;<span class="op" id="8260221">!=</span>&nbsp;<span class="ident" id="8260224">nil</span><span class="op" id="8260227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260232">t</span><span class="op" id="8260233">.</span><span class="ident" id="8260234">Errorf</span><span class="op" id="8260240">(</span><span class="string" id="8260241">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8260273">,</span>&nbsp;<span class="ident" id="8260275">test</span><span class="op" id="8260279">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260283">case</span>&nbsp;<span class="ident" id="8260288">test</span><span class="op" id="8260292">.</span><span class="ident" id="8260293">matches</span>&nbsp;<span class="op" id="8260301">!=</span>&nbsp;<span class="ident" id="8260304">nil</span>&nbsp;<span class="op" id="8260308">&amp;&amp;</span>&nbsp;<span class="ident" id="8260311">result</span>&nbsp;<span class="op" id="8260318">==</span>&nbsp;<span class="ident" id="8260321">nil</span><span class="op" id="8260324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260329">t</span><span class="op" id="8260330">.</span><span class="ident" id="8260331">Errorf</span><span class="op" id="8260337">(</span><span class="string" id="8260338">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8260368">,</span>&nbsp;<span class="ident" id="8260370">test</span><span class="op" id="8260374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260378">case</span>&nbsp;<span class="ident" id="8260383">test</span><span class="op" id="8260387">.</span><span class="ident" id="8260388">matches</span>&nbsp;<span class="op" id="8260396">!=</span>&nbsp;<span class="ident" id="8260399">nil</span>&nbsp;<span class="op" id="8260403">&amp;&amp;</span>&nbsp;<span class="ident" id="8260406">result</span>&nbsp;<span class="op" id="8260413">!=</span>&nbsp;<span class="ident" id="8260416">nil</span><span class="op" id="8260419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260424">expect</span>&nbsp;<span class="op" id="8260431">:=</span>&nbsp;<span class="ident" id="8260434">test</span><span class="op" id="8260438">.</span><span class="ident" id="8260439">text</span><span class="op" id="8260443">[</span><span class="ident" id="8260444">test</span><span class="op" id="8260448">.</span><span class="ident" id="8260449">matches</span><span class="op" id="8260456">[</span><span class="num" id="8260457">0</span><span class="op" id="8260458">]</span><span class="op" id="8260459">[</span><span class="num" id="8260460">0</span><span class="op" id="8260461">]</span><span class="op" id="8260462">:</span><span class="ident" id="8260463">test</span><span class="op" id="8260467">.</span><span class="ident" id="8260468">matches</span><span class="op" id="8260475">[</span><span class="num" id="8260476">0</span><span class="op" id="8260477">]</span><span class="op" id="8260478">[</span><span class="num" id="8260479">1</span><span class="op" id="8260480">]</span><span class="op" id="8260481">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260486">if</span>&nbsp;<span class="ident" id="8260489">expect</span>&nbsp;<span class="op" id="8260496">!=</span>&nbsp;<span class="builtintype" id="8260499">string</span><span class="op" id="8260505">(</span><span class="ident" id="8260506">result</span><span class="op" id="8260512">)</span>&nbsp;<span class="op" id="8260514">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260520">t</span><span class="op" id="8260521">.</span><span class="ident" id="8260522">Errorf</span><span class="op" id="8260528">(</span><span class="string" id="8260529">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8260553">,</span>&nbsp;<span class="ident" id="8260555">expect</span><span class="op" id="8260561">,</span>&nbsp;<span class="ident" id="8260563">result</span><span class="op" id="8260569">,</span>&nbsp;<span class="ident" id="8260571">test</span><span class="op" id="8260575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260587">}</span><br>
<span class="lineno"></span><span class="op" id="8260589">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="8260592">func</span>&nbsp;<span class="ident" id="8260597">TestFindString</span><span class="op" id="8260611">(</span><span class="ident" id="8260612">t</span>&nbsp;<span class="op" id="8260614">*</span><span class="ident" id="8260615">testing</span><span class="op" id="8260622">.</span><span class="ident" id="8260623">T</span><span class="op" id="8260624">)</span>&nbsp;<span class="op" id="8260626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260629">for</span>&nbsp;<span class="ident" id="8260633">_</span><span class="op" id="8260634">,</span>&nbsp;<span class="ident" id="8260636">test</span>&nbsp;<span class="op" id="8260641">:=</span>&nbsp;<span class="keyword" id="8260644">range</span>&nbsp;<span class="ident" id="8260650">findTests</span>&nbsp;<span class="op" id="8260660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260664">result</span>&nbsp;<span class="op" id="8260671">:=</span>&nbsp;<span class="ident" id="8260674">MustCompile</span><span class="op" id="8260685">(</span><span class="ident" id="8260686">test</span><span class="op" id="8260690">.</span><span class="ident" id="8260691">pat</span><span class="op" id="8260694">)</span><span class="op" id="8260695">.</span><span class="ident" id="8260696">FindString</span><span class="op" id="8260706">(</span><span class="ident" id="8260707">test</span><span class="op" id="8260711">.</span><span class="ident" id="8260712">text</span><span class="op" id="8260716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260720">switch</span>&nbsp;<span class="op" id="8260727">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260731">case</span>&nbsp;<span class="builtinfunc" id="8260736">len</span><span class="op" id="8260739">(</span><span class="ident" id="8260740">test</span><span class="op" id="8260744">.</span><span class="ident" id="8260745">matches</span><span class="op" id="8260752">)</span>&nbsp;<span class="op" id="8260754">==</span>&nbsp;<span class="num" id="8260757">0</span>&nbsp;<span class="op" id="8260759">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="8260762">len</span><span class="op" id="8260765">(</span><span class="ident" id="8260766">result</span><span class="op" id="8260772">)</span>&nbsp;<span class="op" id="8260774">==</span>&nbsp;<span class="num" id="8260777">0</span><span class="op" id="8260778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260783">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260791">case</span>&nbsp;<span class="ident" id="8260796">test</span><span class="op" id="8260800">.</span><span class="ident" id="8260801">matches</span>&nbsp;<span class="op" id="8260809">==</span>&nbsp;<span class="ident" id="8260812">nil</span>&nbsp;<span class="op" id="8260816">&amp;&amp;</span>&nbsp;<span class="ident" id="8260819">result</span>&nbsp;<span class="op" id="8260826">!=</span>&nbsp;<span class="string" id="8260829">&#34;&#34;</span><span class="op" id="8260831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260836">t</span><span class="op" id="8260837">.</span><span class="ident" id="8260838">Errorf</span><span class="op" id="8260844">(</span><span class="string" id="8260845">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8260877">,</span>&nbsp;<span class="ident" id="8260879">test</span><span class="op" id="8260883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260887">case</span>&nbsp;<span class="ident" id="8260892">test</span><span class="op" id="8260896">.</span><span class="ident" id="8260897">matches</span>&nbsp;<span class="op" id="8260905">!=</span>&nbsp;<span class="ident" id="8260908">nil</span>&nbsp;<span class="op" id="8260912">&amp;&amp;</span>&nbsp;<span class="ident" id="8260915">result</span>&nbsp;<span class="op" id="8260922">==</span>&nbsp;<span class="string" id="8260925">&#34;&#34;</span><span class="op" id="8260927">:</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260932">//&nbsp;Tricky&nbsp;because&nbsp;an&nbsp;empty&nbsp;result&nbsp;has&nbsp;two&nbsp;meanings:&nbsp;no&nbsp;match&nbsp;or&nbsp;empty&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261012">if</span>&nbsp;<span class="ident" id="8261015">test</span><span class="op" id="8261019">.</span><span class="ident" id="8261020">matches</span><span class="op" id="8261027">[</span><span class="num" id="8261028">0</span><span class="op" id="8261029">]</span><span class="op" id="8261030">[</span><span class="num" id="8261031">0</span><span class="op" id="8261032">]</span>&nbsp;<span class="op" id="8261034">!=</span>&nbsp;<span class="ident" id="8261037">test</span><span class="op" id="8261041">.</span><span class="ident" id="8261042">matches</span><span class="op" id="8261049">[</span><span class="num" id="8261050">0</span><span class="op" id="8261051">]</span><span class="op" id="8261052">[</span><span class="num" id="8261053">1</span><span class="op" id="8261054">]</span>&nbsp;<span class="op" id="8261056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261062">t</span><span class="op" id="8261063">.</span><span class="ident" id="8261064">Errorf</span><span class="op" id="8261070">(</span><span class="string" id="8261071">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8261101">,</span>&nbsp;<span class="ident" id="8261103">test</span><span class="op" id="8261107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261116">case</span>&nbsp;<span class="ident" id="8261121">test</span><span class="op" id="8261125">.</span><span class="ident" id="8261126">matches</span>&nbsp;<span class="op" id="8261134">!=</span>&nbsp;<span class="ident" id="8261137">nil</span>&nbsp;<span class="op" id="8261141">&amp;&amp;</span>&nbsp;<span class="ident" id="8261144">result</span>&nbsp;<span class="op" id="8261151">!=</span>&nbsp;<span class="string" id="8261154">&#34;&#34;</span><span class="op" id="8261156">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261161">expect</span>&nbsp;<span class="op" id="8261168">:=</span>&nbsp;<span class="ident" id="8261171">test</span><span class="op" id="8261175">.</span><span class="ident" id="8261176">text</span><span class="op" id="8261180">[</span><span class="ident" id="8261181">test</span><span class="op" id="8261185">.</span><span class="ident" id="8261186">matches</span><span class="op" id="8261193">[</span><span class="num" id="8261194">0</span><span class="op" id="8261195">]</span><span class="op" id="8261196">[</span><span class="num" id="8261197">0</span><span class="op" id="8261198">]</span><span class="op" id="8261199">:</span><span class="ident" id="8261200">test</span><span class="op" id="8261204">.</span><span class="ident" id="8261205">matches</span><span class="op" id="8261212">[</span><span class="num" id="8261213">0</span><span class="op" id="8261214">]</span><span class="op" id="8261215">[</span><span class="num" id="8261216">1</span><span class="op" id="8261217">]</span><span class="op" id="8261218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261223">if</span>&nbsp;<span class="ident" id="8261226">expect</span>&nbsp;<span class="op" id="8261233">!=</span>&nbsp;<span class="ident" id="8261236">result</span>&nbsp;<span class="op" id="8261243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261249">t</span><span class="op" id="8261250">.</span><span class="ident" id="8261251">Errorf</span><span class="op" id="8261257">(</span><span class="string" id="8261258">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8261282">,</span>&nbsp;<span class="ident" id="8261284">expect</span><span class="op" id="8261290">,</span>&nbsp;<span class="ident" id="8261292">result</span><span class="op" id="8261298">,</span>&nbsp;<span class="ident" id="8261300">test</span><span class="op" id="8261304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261313">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261316">}</span><br>
<span class="lineno"></span><span class="op" id="8261318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8261321">func</span>&nbsp;<span class="ident" id="8261326">testFindIndex</span><span class="op" id="8261339">(</span><span class="ident" id="8261340">test</span>&nbsp;<span class="op" id="8261345">*</span><span class="ident" id="8261346">FindTest</span><span class="op" id="8261354">,</span>&nbsp;<span class="ident" id="8261356">result</span>&nbsp;<span class="op" id="8261363">[</span><span class="op" id="8261364">]</span><span class="builtintype" id="8261365">int</span><span class="op" id="8261368">,</span>&nbsp;<span class="ident" id="8261370">t</span>&nbsp;<span class="op" id="8261372">*</span><span class="ident" id="8261373">testing</span><span class="op" id="8261380">.</span><span class="ident" id="8261381">T</span><span class="op" id="8261382">)</span>&nbsp;<span class="op" id="8261384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261387">switch</span>&nbsp;<span class="op" id="8261394">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261397">case</span>&nbsp;<span class="builtinfunc" id="8261402">len</span><span class="op" id="8261405">(</span><span class="ident" id="8261406">test</span><span class="op" id="8261410">.</span><span class="ident" id="8261411">matches</span><span class="op" id="8261418">)</span>&nbsp;<span class="op" id="8261420">==</span>&nbsp;<span class="num" id="8261423">0</span>&nbsp;<span class="op" id="8261425">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="8261428">len</span><span class="op" id="8261431">(</span><span class="ident" id="8261432">result</span><span class="op" id="8261438">)</span>&nbsp;<span class="op" id="8261440">==</span>&nbsp;<span class="num" id="8261443">0</span><span class="op" id="8261444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261448">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261455">case</span>&nbsp;<span class="ident" id="8261460">test</span><span class="op" id="8261464">.</span><span class="ident" id="8261465">matches</span>&nbsp;<span class="op" id="8261473">==</span>&nbsp;<span class="ident" id="8261476">nil</span>&nbsp;<span class="op" id="8261480">&amp;&amp;</span>&nbsp;<span class="ident" id="8261483">result</span>&nbsp;<span class="op" id="8261490">!=</span>&nbsp;<span class="ident" id="8261493">nil</span><span class="op" id="8261496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261500">t</span><span class="op" id="8261501">.</span><span class="ident" id="8261502">Errorf</span><span class="op" id="8261508">(</span><span class="string" id="8261509">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8261541">,</span>&nbsp;<span class="ident" id="8261543">test</span><span class="op" id="8261547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261550">case</span>&nbsp;<span class="ident" id="8261555">test</span><span class="op" id="8261559">.</span><span class="ident" id="8261560">matches</span>&nbsp;<span class="op" id="8261568">!=</span>&nbsp;<span class="ident" id="8261571">nil</span>&nbsp;<span class="op" id="8261575">&amp;&amp;</span>&nbsp;<span class="ident" id="8261578">result</span>&nbsp;<span class="op" id="8261585">==</span>&nbsp;<span class="ident" id="8261588">nil</span><span class="op" id="8261591">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261595">t</span><span class="op" id="8261596">.</span><span class="ident" id="8261597">Errorf</span><span class="op" id="8261603">(</span><span class="string" id="8261604">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8261634">,</span>&nbsp;<span class="ident" id="8261636">test</span><span class="op" id="8261640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261643">case</span>&nbsp;<span class="ident" id="8261648">test</span><span class="op" id="8261652">.</span><span class="ident" id="8261653">matches</span>&nbsp;<span class="op" id="8261661">!=</span>&nbsp;<span class="ident" id="8261664">nil</span>&nbsp;<span class="op" id="8261668">&amp;&amp;</span>&nbsp;<span class="ident" id="8261671">result</span>&nbsp;<span class="op" id="8261678">!=</span>&nbsp;<span class="ident" id="8261681">nil</span><span class="op" id="8261684">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261688">expect</span>&nbsp;<span class="op" id="8261695">:=</span>&nbsp;<span class="ident" id="8261698">test</span><span class="op" id="8261702">.</span><span class="ident" id="8261703">matches</span><span class="op" id="8261710">[</span><span class="num" id="8261711">0</span><span class="op" id="8261712">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261716">if</span>&nbsp;<span class="ident" id="8261719">expect</span><span class="op" id="8261725">[</span><span class="num" id="8261726">0</span><span class="op" id="8261727">]</span>&nbsp;<span class="op" id="8261729">!=</span>&nbsp;<span class="ident" id="8261732">result</span><span class="op" id="8261738">[</span><span class="num" id="8261739">0</span><span class="op" id="8261740">]</span>&nbsp;<span class="op" id="8261742">||</span>&nbsp;<span class="ident" id="8261745">expect</span><span class="op" id="8261751">[</span><span class="num" id="8261752">1</span><span class="op" id="8261753">]</span>&nbsp;<span class="op" id="8261755">!=</span>&nbsp;<span class="ident" id="8261758">result</span><span class="op" id="8261764">[</span><span class="num" id="8261765">1</span><span class="op" id="8261766">]</span>&nbsp;<span class="op" id="8261768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261773">t</span><span class="op" id="8261774">.</span><span class="ident" id="8261775">Errorf</span><span class="op" id="8261781">(</span><span class="string" id="8261782">&#34;expected&nbsp;%v&nbsp;got&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8261806">,</span>&nbsp;<span class="ident" id="8261808">expect</span><span class="op" id="8261814">,</span>&nbsp;<span class="ident" id="8261816">result</span><span class="op" id="8261822">,</span>&nbsp;<span class="ident" id="8261824">test</span><span class="op" id="8261828">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261835">}</span><br>
<span class="lineno"></span><span class="op" id="8261837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8261840">func</span>&nbsp;<span class="ident" id="8261845">TestFindIndex</span><span class="op" id="8261858">(</span><span class="ident" id="8261859">t</span>&nbsp;<span class="op" id="8261861">*</span><span class="ident" id="8261862">testing</span><span class="op" id="8261869">.</span><span class="ident" id="8261870">T</span><span class="op" id="8261871">)</span>&nbsp;<span class="op" id="8261873">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261876">for</span>&nbsp;<span class="ident" id="8261880">_</span><span class="op" id="8261881">,</span>&nbsp;<span class="ident" id="8261883">test</span>&nbsp;<span class="op" id="8261888">:=</span>&nbsp;<span class="keyword" id="8261891">range</span>&nbsp;<span class="ident" id="8261897">findTests</span>&nbsp;<span class="op" id="8261907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261911">testFindIndex</span><span class="op" id="8261924">(</span><span class="op" id="8261925">&amp;</span><span class="ident" id="8261926">test</span><span class="op" id="8261930">,</span>&nbsp;<span class="ident" id="8261932">MustCompile</span><span class="op" id="8261943">(</span><span class="ident" id="8261944">test</span><span class="op" id="8261948">.</span><span class="ident" id="8261949">pat</span><span class="op" id="8261952">)</span><span class="op" id="8261953">.</span><span class="ident" id="8261954">FindIndex</span><span class="op" id="8261963">(</span><span class="op" id="8261964">[</span><span class="op" id="8261965">]</span><span class="builtintype" id="8261966">byte</span><span class="op" id="8261970">(</span><span class="ident" id="8261971">test</span><span class="op" id="8261975">.</span><span class="ident" id="8261976">text</span><span class="op" id="8261980">)</span><span class="op" id="8261981">)</span><span class="op" id="8261982">,</span>&nbsp;<span class="ident" id="8261984">t</span><span class="op" id="8261985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261988">}</span><br>
<span class="lineno"></span><span class="op" id="8261990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8261993">func</span>&nbsp;<span class="ident" id="8261998">TestFindStringIndex</span><span class="op" id="8262017">(</span><span class="ident" id="8262018">t</span>&nbsp;<span class="op" id="8262020">*</span><span class="ident" id="8262021">testing</span><span class="op" id="8262028">.</span><span class="ident" id="8262029">T</span><span class="op" id="8262030">)</span>&nbsp;<span class="op" id="8262032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262035">for</span>&nbsp;<span class="ident" id="8262039">_</span><span class="op" id="8262040">,</span>&nbsp;<span class="ident" id="8262042">test</span>&nbsp;<span class="op" id="8262047">:=</span>&nbsp;<span class="keyword" id="8262050">range</span>&nbsp;<span class="ident" id="8262056">findTests</span>&nbsp;<span class="op" id="8262066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262070">testFindIndex</span><span class="op" id="8262083">(</span><span class="op" id="8262084">&amp;</span><span class="ident" id="8262085">test</span><span class="op" id="8262089">,</span>&nbsp;<span class="ident" id="8262091">MustCompile</span><span class="op" id="8262102">(</span><span class="ident" id="8262103">test</span><span class="op" id="8262107">.</span><span class="ident" id="8262108">pat</span><span class="op" id="8262111">)</span><span class="op" id="8262112">.</span><span class="ident" id="8262113">FindStringIndex</span><span class="op" id="8262128">(</span><span class="ident" id="8262129">test</span><span class="op" id="8262133">.</span><span class="ident" id="8262134">text</span><span class="op" id="8262138">)</span><span class="op" id="8262139">,</span>&nbsp;<span class="ident" id="8262141">t</span><span class="op" id="8262142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262145">}</span><br>
<span class="lineno"></span><span class="op" id="8262147">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="8262150">func</span>&nbsp;<span class="ident" id="8262155">TestFindReaderIndex</span><span class="op" id="8262174">(</span><span class="ident" id="8262175">t</span>&nbsp;<span class="op" id="8262177">*</span><span class="ident" id="8262178">testing</span><span class="op" id="8262185">.</span><span class="ident" id="8262186">T</span><span class="op" id="8262187">)</span>&nbsp;<span class="op" id="8262189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262192">for</span>&nbsp;<span class="ident" id="8262196">_</span><span class="op" id="8262197">,</span>&nbsp;<span class="ident" id="8262199">test</span>&nbsp;<span class="op" id="8262204">:=</span>&nbsp;<span class="keyword" id="8262207">range</span>&nbsp;<span class="ident" id="8262213">findTests</span>&nbsp;<span class="op" id="8262223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262227">testFindIndex</span><span class="op" id="8262240">(</span><span class="op" id="8262241">&amp;</span><span class="ident" id="8262242">test</span><span class="op" id="8262246">,</span>&nbsp;<span class="ident" id="8262248">MustCompile</span><span class="op" id="8262259">(</span><span class="ident" id="8262260">test</span><span class="op" id="8262264">.</span><span class="ident" id="8262265">pat</span><span class="op" id="8262268">)</span><span class="op" id="8262269">.</span><span class="ident" id="8262270">FindReaderIndex</span><span class="op" id="8262285">(</span><span class="ident" id="8262286">strings</span><span class="op" id="8262293">.</span><span class="ident" id="8262294">NewReader</span><span class="op" id="8262303">(</span><span class="ident" id="8262304">test</span><span class="op" id="8262308">.</span><span class="ident" id="8262309">text</span><span class="op" id="8262313">)</span><span class="op" id="8262314">)</span><span class="op" id="8262315">,</span>&nbsp;<span class="ident" id="8262317">t</span><span class="op" id="8262318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262321">}</span><br>
<span class="lineno">225</span><span class="op" id="8262323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8262326">//&nbsp;Now&nbsp;come&nbsp;the&nbsp;simple&nbsp;All&nbsp;cases.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8262361">func</span>&nbsp;<span class="ident" id="8262366">TestFindAll</span><span class="op" id="8262377">(</span><span class="ident" id="8262378">t</span>&nbsp;<span class="op" id="8262380">*</span><span class="ident" id="8262381">testing</span><span class="op" id="8262388">.</span><span class="ident" id="8262389">T</span><span class="op" id="8262390">)</span>&nbsp;<span class="op" id="8262392">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262395">for</span>&nbsp;<span class="ident" id="8262399">_</span><span class="op" id="8262400">,</span>&nbsp;<span class="ident" id="8262402">test</span>&nbsp;<span class="op" id="8262407">:=</span>&nbsp;<span class="keyword" id="8262410">range</span>&nbsp;<span class="ident" id="8262416">findTests</span>&nbsp;<span class="op" id="8262426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262430">result</span>&nbsp;<span class="op" id="8262437">:=</span>&nbsp;<span class="ident" id="8262440">MustCompile</span><span class="op" id="8262451">(</span><span class="ident" id="8262452">test</span><span class="op" id="8262456">.</span><span class="ident" id="8262457">pat</span><span class="op" id="8262460">)</span><span class="op" id="8262461">.</span><span class="ident" id="8262462">FindAll</span><span class="op" id="8262469">(</span><span class="op" id="8262470">[</span><span class="op" id="8262471">]</span><span class="builtintype" id="8262472">byte</span><span class="op" id="8262476">(</span><span class="ident" id="8262477">test</span><span class="op" id="8262481">.</span><span class="ident" id="8262482">text</span><span class="op" id="8262486">)</span><span class="op" id="8262487">,</span>&nbsp;<span class="op" id="8262489">-</span><span class="num" id="8262490">1</span><span class="op" id="8262491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262495">switch</span>&nbsp;<span class="op" id="8262502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262506">case</span>&nbsp;<span class="ident" id="8262511">test</span><span class="op" id="8262515">.</span><span class="ident" id="8262516">matches</span>&nbsp;<span class="op" id="8262524">==</span>&nbsp;<span class="ident" id="8262527">nil</span>&nbsp;<span class="op" id="8262531">&amp;&amp;</span>&nbsp;<span class="ident" id="8262534">result</span>&nbsp;<span class="op" id="8262541">==</span>&nbsp;<span class="ident" id="8262544">nil</span><span class="op" id="8262547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8262552">//&nbsp;ok</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262560">case</span>&nbsp;<span class="ident" id="8262565">test</span><span class="op" id="8262569">.</span><span class="ident" id="8262570">matches</span>&nbsp;<span class="op" id="8262578">==</span>&nbsp;<span class="ident" id="8262581">nil</span>&nbsp;<span class="op" id="8262585">&amp;&amp;</span>&nbsp;<span class="ident" id="8262588">result</span>&nbsp;<span class="op" id="8262595">!=</span>&nbsp;<span class="ident" id="8262598">nil</span><span class="op" id="8262601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262606">t</span><span class="op" id="8262607">.</span><span class="ident" id="8262608">Errorf</span><span class="op" id="8262614">(</span><span class="string" id="8262615">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8262647">,</span>&nbsp;<span class="ident" id="8262649">test</span><span class="op" id="8262653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262657">case</span>&nbsp;<span class="ident" id="8262662">test</span><span class="op" id="8262666">.</span><span class="ident" id="8262667">matches</span>&nbsp;<span class="op" id="8262675">!=</span>&nbsp;<span class="ident" id="8262678">nil</span>&nbsp;<span class="op" id="8262682">&amp;&amp;</span>&nbsp;<span class="ident" id="8262685">result</span>&nbsp;<span class="op" id="8262692">==</span>&nbsp;<span class="ident" id="8262695">nil</span><span class="op" id="8262698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262703">t</span><span class="op" id="8262704">.</span><span class="ident" id="8262705">Fatalf</span><span class="op" id="8262711">(</span><span class="string" id="8262712">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8262742">,</span>&nbsp;<span class="ident" id="8262744">test</span><span class="op" id="8262748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262752">case</span>&nbsp;<span class="ident" id="8262757">test</span><span class="op" id="8262761">.</span><span class="ident" id="8262762">matches</span>&nbsp;<span class="op" id="8262770">!=</span>&nbsp;<span class="ident" id="8262773">nil</span>&nbsp;<span class="op" id="8262777">&amp;&amp;</span>&nbsp;<span class="ident" id="8262780">result</span>&nbsp;<span class="op" id="8262787">!=</span>&nbsp;<span class="ident" id="8262790">nil</span><span class="op" id="8262793">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262798">if</span>&nbsp;<span class="builtinfunc" id="8262801">len</span><span class="op" id="8262804">(</span><span class="ident" id="8262805">test</span><span class="op" id="8262809">.</span><span class="ident" id="8262810">matches</span><span class="op" id="8262817">)</span>&nbsp;<span class="op" id="8262819">!=</span>&nbsp;<span class="builtinfunc" id="8262822">len</span><span class="op" id="8262825">(</span><span class="ident" id="8262826">result</span><span class="op" id="8262832">)</span>&nbsp;<span class="op" id="8262834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262840">t</span><span class="op" id="8262841">.</span><span class="ident" id="8262842">Errorf</span><span class="op" id="8262848">(</span><span class="string" id="8262849">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8262882">,</span>&nbsp;<span class="builtinfunc" id="8262884">len</span><span class="op" id="8262887">(</span><span class="ident" id="8262888">test</span><span class="op" id="8262892">.</span><span class="ident" id="8262893">matches</span><span class="op" id="8262900">)</span><span class="op" id="8262901">,</span>&nbsp;<span class="builtinfunc" id="8262903">len</span><span class="op" id="8262906">(</span><span class="ident" id="8262907">result</span><span class="op" id="8262913">)</span><span class="op" id="8262914">,</span>&nbsp;<span class="ident" id="8262916">test</span><span class="op" id="8262920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262926">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262943">for</span>&nbsp;<span class="ident" id="8262947">k</span><span class="op" id="8262948">,</span>&nbsp;<span class="ident" id="8262950">e</span>&nbsp;<span class="op" id="8262952">:=</span>&nbsp;<span class="keyword" id="8262955">range</span>&nbsp;<span class="ident" id="8262961">test</span><span class="op" id="8262965">.</span><span class="ident" id="8262966">matches</span>&nbsp;<span class="op" id="8262974">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262980">expect</span>&nbsp;<span class="op" id="8262987">:=</span>&nbsp;<span class="ident" id="8262990">test</span><span class="op" id="8262994">.</span><span class="ident" id="8262995">text</span><span class="op" id="8262999">[</span><span class="ident" id="8263000">e</span><span class="op" id="8263001">[</span><span class="num" id="8263002">0</span><span class="op" id="8263003">]</span><span class="op" id="8263004">:</span><span class="ident" id="8263005">e</span><span class="op" id="8263006">[</span><span class="num" id="8263007">1</span><span class="op" id="8263008">]</span><span class="op" id="8263009">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263015">if</span>&nbsp;<span class="ident" id="8263018">expect</span>&nbsp;<span class="op" id="8263025">!=</span>&nbsp;<span class="builtintype" id="8263028">string</span><span class="op" id="8263034">(</span><span class="ident" id="8263035">result</span><span class="op" id="8263041">[</span><span class="ident" id="8263042">k</span><span class="op" id="8263043">]</span><span class="op" id="8263044">)</span>&nbsp;<span class="op" id="8263046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263053">t</span><span class="op" id="8263054">.</span><span class="ident" id="8263055">Errorf</span><span class="op" id="8263061">(</span><span class="string" id="8263062">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8263096">,</span>&nbsp;<span class="ident" id="8263098">k</span><span class="op" id="8263099">,</span>&nbsp;<span class="ident" id="8263101">expect</span><span class="op" id="8263107">,</span>&nbsp;<span class="ident" id="8263109">result</span><span class="op" id="8263115">[</span><span class="ident" id="8263116">k</span><span class="op" id="8263117">]</span><span class="op" id="8263118">,</span>&nbsp;<span class="ident" id="8263120">test</span><span class="op" id="8263124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263135">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263142">}</span><br>
<span class="lineno"></span><span class="op" id="8263144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8263147">func</span>&nbsp;<span class="ident" id="8263152">TestFindAllString</span><span class="op" id="8263169">(</span><span class="ident" id="8263170">t</span>&nbsp;<span class="op" id="8263172">*</span><span class="ident" id="8263173">testing</span><span class="op" id="8263180">.</span><span class="ident" id="8263181">T</span><span class="op" id="8263182">)</span>&nbsp;<span class="op" id="8263184">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263187">for</span>&nbsp;<span class="ident" id="8263191">_</span><span class="op" id="8263192">,</span>&nbsp;<span class="ident" id="8263194">test</span>&nbsp;<span class="op" id="8263199">:=</span>&nbsp;<span class="keyword" id="8263202">range</span>&nbsp;<span class="ident" id="8263208">findTests</span>&nbsp;<span class="op" id="8263218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263222">result</span>&nbsp;<span class="op" id="8263229">:=</span>&nbsp;<span class="ident" id="8263232">MustCompile</span><span class="op" id="8263243">(</span><span class="ident" id="8263244">test</span><span class="op" id="8263248">.</span><span class="ident" id="8263249">pat</span><span class="op" id="8263252">)</span><span class="op" id="8263253">.</span><span class="ident" id="8263254">FindAllString</span><span class="op" id="8263267">(</span><span class="ident" id="8263268">test</span><span class="op" id="8263272">.</span><span class="ident" id="8263273">text</span><span class="op" id="8263277">,</span>&nbsp;<span class="op" id="8263279">-</span><span class="num" id="8263280">1</span><span class="op" id="8263281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263285">switch</span>&nbsp;<span class="op" id="8263292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263296">case</span>&nbsp;<span class="ident" id="8263301">test</span><span class="op" id="8263305">.</span><span class="ident" id="8263306">matches</span>&nbsp;<span class="op" id="8263314">==</span>&nbsp;<span class="ident" id="8263317">nil</span>&nbsp;<span class="op" id="8263321">&amp;&amp;</span>&nbsp;<span class="ident" id="8263324">result</span>&nbsp;<span class="op" id="8263331">==</span>&nbsp;<span class="ident" id="8263334">nil</span><span class="op" id="8263337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8263342">//&nbsp;ok</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263350">case</span>&nbsp;<span class="ident" id="8263355">test</span><span class="op" id="8263359">.</span><span class="ident" id="8263360">matches</span>&nbsp;<span class="op" id="8263368">==</span>&nbsp;<span class="ident" id="8263371">nil</span>&nbsp;<span class="op" id="8263375">&amp;&amp;</span>&nbsp;<span class="ident" id="8263378">result</span>&nbsp;<span class="op" id="8263385">!=</span>&nbsp;<span class="ident" id="8263388">nil</span><span class="op" id="8263391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263396">t</span><span class="op" id="8263397">.</span><span class="ident" id="8263398">Errorf</span><span class="op" id="8263404">(</span><span class="string" id="8263405">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8263437">,</span>&nbsp;<span class="ident" id="8263439">test</span><span class="op" id="8263443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263447">case</span>&nbsp;<span class="ident" id="8263452">test</span><span class="op" id="8263456">.</span><span class="ident" id="8263457">matches</span>&nbsp;<span class="op" id="8263465">!=</span>&nbsp;<span class="ident" id="8263468">nil</span>&nbsp;<span class="op" id="8263472">&amp;&amp;</span>&nbsp;<span class="ident" id="8263475">result</span>&nbsp;<span class="op" id="8263482">==</span>&nbsp;<span class="ident" id="8263485">nil</span><span class="op" id="8263488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263493">t</span><span class="op" id="8263494">.</span><span class="ident" id="8263495">Errorf</span><span class="op" id="8263501">(</span><span class="string" id="8263502">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8263532">,</span>&nbsp;<span class="ident" id="8263534">test</span><span class="op" id="8263538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263542">case</span>&nbsp;<span class="ident" id="8263547">test</span><span class="op" id="8263551">.</span><span class="ident" id="8263552">matches</span>&nbsp;<span class="op" id="8263560">!=</span>&nbsp;<span class="ident" id="8263563">nil</span>&nbsp;<span class="op" id="8263567">&amp;&amp;</span>&nbsp;<span class="ident" id="8263570">result</span>&nbsp;<span class="op" id="8263577">!=</span>&nbsp;<span class="ident" id="8263580">nil</span><span class="op" id="8263583">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263588">if</span>&nbsp;<span class="builtinfunc" id="8263591">len</span><span class="op" id="8263594">(</span><span class="ident" id="8263595">test</span><span class="op" id="8263599">.</span><span class="ident" id="8263600">matches</span><span class="op" id="8263607">)</span>&nbsp;<span class="op" id="8263609">!=</span>&nbsp;<span class="builtinfunc" id="8263612">len</span><span class="op" id="8263615">(</span><span class="ident" id="8263616">result</span><span class="op" id="8263622">)</span>&nbsp;<span class="op" id="8263624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263630">t</span><span class="op" id="8263631">.</span><span class="ident" id="8263632">Errorf</span><span class="op" id="8263638">(</span><span class="string" id="8263639">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8263672">,</span>&nbsp;<span class="builtinfunc" id="8263674">len</span><span class="op" id="8263677">(</span><span class="ident" id="8263678">test</span><span class="op" id="8263682">.</span><span class="ident" id="8263683">matches</span><span class="op" id="8263690">)</span><span class="op" id="8263691">,</span>&nbsp;<span class="builtinfunc" id="8263693">len</span><span class="op" id="8263696">(</span><span class="ident" id="8263697">result</span><span class="op" id="8263703">)</span><span class="op" id="8263704">,</span>&nbsp;<span class="ident" id="8263706">test</span><span class="op" id="8263710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263716">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263733">for</span>&nbsp;<span class="ident" id="8263737">k</span><span class="op" id="8263738">,</span>&nbsp;<span class="ident" id="8263740">e</span>&nbsp;<span class="op" id="8263742">:=</span>&nbsp;<span class="keyword" id="8263745">range</span>&nbsp;<span class="ident" id="8263751">test</span><span class="op" id="8263755">.</span><span class="ident" id="8263756">matches</span>&nbsp;<span class="op" id="8263764">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263770">expect</span>&nbsp;<span class="op" id="8263777">:=</span>&nbsp;<span class="ident" id="8263780">test</span><span class="op" id="8263784">.</span><span class="ident" id="8263785">text</span><span class="op" id="8263789">[</span><span class="ident" id="8263790">e</span><span class="op" id="8263791">[</span><span class="num" id="8263792">0</span><span class="op" id="8263793">]</span><span class="op" id="8263794">:</span><span class="ident" id="8263795">e</span><span class="op" id="8263796">[</span><span class="num" id="8263797">1</span><span class="op" id="8263798">]</span><span class="op" id="8263799">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263805">if</span>&nbsp;<span class="ident" id="8263808">expect</span>&nbsp;<span class="op" id="8263815">!=</span>&nbsp;<span class="ident" id="8263818">result</span><span class="op" id="8263824">[</span><span class="ident" id="8263825">k</span><span class="op" id="8263826">]</span>&nbsp;<span class="op" id="8263828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263835">t</span><span class="op" id="8263836">.</span><span class="ident" id="8263837">Errorf</span><span class="op" id="8263843">(</span><span class="string" id="8263844">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8263868">,</span>&nbsp;<span class="ident" id="8263870">expect</span><span class="op" id="8263876">,</span>&nbsp;<span class="ident" id="8263878">result</span><span class="op" id="8263884">,</span>&nbsp;<span class="ident" id="8263886">test</span><span class="op" id="8263890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263901">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263908">}</span><br>
<span class="lineno"></span><span class="op" id="8263910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8263913">func</span>&nbsp;<span class="ident" id="8263918">testFindAllIndex</span><span class="op" id="8263934">(</span><span class="ident" id="8263935">test</span>&nbsp;<span class="op" id="8263940">*</span><span class="ident" id="8263941">FindTest</span><span class="op" id="8263949">,</span>&nbsp;<span class="ident" id="8263951">result</span>&nbsp;<span class="op" id="8263958">[</span><span class="op" id="8263959">]</span><span class="op" id="8263960">[</span><span class="op" id="8263961">]</span><span class="builtintype" id="8263962">int</span><span class="op" id="8263965">,</span>&nbsp;<span class="ident" id="8263967">t</span>&nbsp;<span class="op" id="8263969">*</span><span class="ident" id="8263970">testing</span><span class="op" id="8263977">.</span><span class="ident" id="8263978">T</span><span class="op" id="8263979">)</span>&nbsp;<span class="op" id="8263981">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263984">switch</span>&nbsp;<span class="op" id="8263991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263994">case</span>&nbsp;<span class="ident" id="8263999">test</span><span class="op" id="8264003">.</span><span class="ident" id="8264004">matches</span>&nbsp;<span class="op" id="8264012">==</span>&nbsp;<span class="ident" id="8264015">nil</span>&nbsp;<span class="op" id="8264019">&amp;&amp;</span>&nbsp;<span class="ident" id="8264022">result</span>&nbsp;<span class="op" id="8264029">==</span>&nbsp;<span class="ident" id="8264032">nil</span><span class="op" id="8264035">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8264039">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264046">case</span>&nbsp;<span class="ident" id="8264051">test</span><span class="op" id="8264055">.</span><span class="ident" id="8264056">matches</span>&nbsp;<span class="op" id="8264064">==</span>&nbsp;<span class="ident" id="8264067">nil</span>&nbsp;<span class="op" id="8264071">&amp;&amp;</span>&nbsp;<span class="ident" id="8264074">result</span>&nbsp;<span class="op" id="8264081">!=</span>&nbsp;<span class="ident" id="8264084">nil</span><span class="op" id="8264087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264091">t</span><span class="op" id="8264092">.</span><span class="ident" id="8264093">Errorf</span><span class="op" id="8264099">(</span><span class="string" id="8264100">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8264132">,</span>&nbsp;<span class="ident" id="8264134">test</span><span class="op" id="8264138">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264141">case</span>&nbsp;<span class="ident" id="8264146">test</span><span class="op" id="8264150">.</span><span class="ident" id="8264151">matches</span>&nbsp;<span class="op" id="8264159">!=</span>&nbsp;<span class="ident" id="8264162">nil</span>&nbsp;<span class="op" id="8264166">&amp;&amp;</span>&nbsp;<span class="ident" id="8264169">result</span>&nbsp;<span class="op" id="8264176">==</span>&nbsp;<span class="ident" id="8264179">nil</span><span class="op" id="8264182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264186">t</span><span class="op" id="8264187">.</span><span class="ident" id="8264188">Errorf</span><span class="op" id="8264194">(</span><span class="string" id="8264195">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8264225">,</span>&nbsp;<span class="ident" id="8264227">test</span><span class="op" id="8264231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264234">case</span>&nbsp;<span class="ident" id="8264239">test</span><span class="op" id="8264243">.</span><span class="ident" id="8264244">matches</span>&nbsp;<span class="op" id="8264252">!=</span>&nbsp;<span class="ident" id="8264255">nil</span>&nbsp;<span class="op" id="8264259">&amp;&amp;</span>&nbsp;<span class="ident" id="8264262">result</span>&nbsp;<span class="op" id="8264269">!=</span>&nbsp;<span class="ident" id="8264272">nil</span><span class="op" id="8264275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264279">if</span>&nbsp;<span class="builtinfunc" id="8264282">len</span><span class="op" id="8264285">(</span><span class="ident" id="8264286">test</span><span class="op" id="8264290">.</span><span class="ident" id="8264291">matches</span><span class="op" id="8264298">)</span>&nbsp;<span class="op" id="8264300">!=</span>&nbsp;<span class="builtinfunc" id="8264303">len</span><span class="op" id="8264306">(</span><span class="ident" id="8264307">result</span><span class="op" id="8264313">)</span>&nbsp;<span class="op" id="8264315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264320">t</span><span class="op" id="8264321">.</span><span class="ident" id="8264322">Errorf</span><span class="op" id="8264328">(</span><span class="string" id="8264329">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8264362">,</span>&nbsp;<span class="builtinfunc" id="8264364">len</span><span class="op" id="8264367">(</span><span class="ident" id="8264368">test</span><span class="op" id="8264372">.</span><span class="ident" id="8264373">matches</span><span class="op" id="8264380">)</span><span class="op" id="8264381">,</span>&nbsp;<span class="builtinfunc" id="8264383">len</span><span class="op" id="8264386">(</span><span class="ident" id="8264387">result</span><span class="op" id="8264393">)</span><span class="op" id="8264394">,</span>&nbsp;<span class="ident" id="8264396">test</span><span class="op" id="8264400">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264405">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264418">for</span>&nbsp;<span class="ident" id="8264422">k</span><span class="op" id="8264423">,</span>&nbsp;<span class="ident" id="8264425">e</span>&nbsp;<span class="op" id="8264427">:=</span>&nbsp;<span class="keyword" id="8264430">range</span>&nbsp;<span class="ident" id="8264436">test</span><span class="op" id="8264440">.</span><span class="ident" id="8264441">matches</span>&nbsp;<span class="op" id="8264449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264454">if</span>&nbsp;<span class="ident" id="8264457">e</span><span class="op" id="8264458">[</span><span class="num" id="8264459">0</span><span class="op" id="8264460">]</span>&nbsp;<span class="op" id="8264462">!=</span>&nbsp;<span class="ident" id="8264465">result</span><span class="op" id="8264471">[</span><span class="ident" id="8264472">k</span><span class="op" id="8264473">]</span><span class="op" id="8264474">[</span><span class="num" id="8264475">0</span><span class="op" id="8264476">]</span>&nbsp;<span class="op" id="8264478">||</span>&nbsp;<span class="ident" id="8264481">e</span><span class="op" id="8264482">[</span><span class="num" id="8264483">1</span><span class="op" id="8264484">]</span>&nbsp;<span class="op" id="8264486">!=</span>&nbsp;<span class="ident" id="8264489">result</span><span class="op" id="8264495">[</span><span class="ident" id="8264496">k</span><span class="op" id="8264497">]</span><span class="op" id="8264498">[</span><span class="num" id="8264499">1</span><span class="op" id="8264500">]</span>&nbsp;<span class="op" id="8264502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264508">t</span><span class="op" id="8264509">.</span><span class="ident" id="8264510">Errorf</span><span class="op" id="8264516">(</span><span class="string" id="8264517">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8264551">,</span>&nbsp;<span class="ident" id="8264553">k</span><span class="op" id="8264554">,</span>&nbsp;<span class="ident" id="8264556">e</span><span class="op" id="8264557">,</span>&nbsp;<span class="ident" id="8264559">result</span><span class="op" id="8264565">[</span><span class="ident" id="8264566">k</span><span class="op" id="8264567">]</span><span class="op" id="8264568">,</span>&nbsp;<span class="ident" id="8264570">test</span><span class="op" id="8264574">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264586">}</span><br>
<span class="lineno"></span><span class="op" id="8264588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="keyword" id="8264591">func</span>&nbsp;<span class="ident" id="8264596">TestFindAllIndex</span><span class="op" id="8264612">(</span><span class="ident" id="8264613">t</span>&nbsp;<span class="op" id="8264615">*</span><span class="ident" id="8264616">testing</span><span class="op" id="8264623">.</span><span class="ident" id="8264624">T</span><span class="op" id="8264625">)</span>&nbsp;<span class="op" id="8264627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264630">for</span>&nbsp;<span class="ident" id="8264634">_</span><span class="op" id="8264635">,</span>&nbsp;<span class="ident" id="8264637">test</span>&nbsp;<span class="op" id="8264642">:=</span>&nbsp;<span class="keyword" id="8264645">range</span>&nbsp;<span class="ident" id="8264651">findTests</span>&nbsp;<span class="op" id="8264661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264665">testFindAllIndex</span><span class="op" id="8264681">(</span><span class="op" id="8264682">&amp;</span><span class="ident" id="8264683">test</span><span class="op" id="8264687">,</span>&nbsp;<span class="ident" id="8264689">MustCompile</span><span class="op" id="8264700">(</span><span class="ident" id="8264701">test</span><span class="op" id="8264705">.</span><span class="ident" id="8264706">pat</span><span class="op" id="8264709">)</span><span class="op" id="8264710">.</span><span class="ident" id="8264711">FindAllIndex</span><span class="op" id="8264723">(</span><span class="op" id="8264724">[</span><span class="op" id="8264725">]</span><span class="builtintype" id="8264726">byte</span><span class="op" id="8264730">(</span><span class="ident" id="8264731">test</span><span class="op" id="8264735">.</span><span class="ident" id="8264736">text</span><span class="op" id="8264740">)</span><span class="op" id="8264741">,</span>&nbsp;<span class="op" id="8264743">-</span><span class="num" id="8264744">1</span><span class="op" id="8264745">)</span><span class="op" id="8264746">,</span>&nbsp;<span class="ident" id="8264748">t</span><span class="op" id="8264749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264752">}</span><br>
<span class="lineno"></span><span class="op" id="8264754">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="8264757">func</span>&nbsp;<span class="ident" id="8264762">TestFindAllStringIndex</span><span class="op" id="8264784">(</span><span class="ident" id="8264785">t</span>&nbsp;<span class="op" id="8264787">*</span><span class="ident" id="8264788">testing</span><span class="op" id="8264795">.</span><span class="ident" id="8264796">T</span><span class="op" id="8264797">)</span>&nbsp;<span class="op" id="8264799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264802">for</span>&nbsp;<span class="ident" id="8264806">_</span><span class="op" id="8264807">,</span>&nbsp;<span class="ident" id="8264809">test</span>&nbsp;<span class="op" id="8264814">:=</span>&nbsp;<span class="keyword" id="8264817">range</span>&nbsp;<span class="ident" id="8264823">findTests</span>&nbsp;<span class="op" id="8264833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264837">testFindAllIndex</span><span class="op" id="8264853">(</span><span class="op" id="8264854">&amp;</span><span class="ident" id="8264855">test</span><span class="op" id="8264859">,</span>&nbsp;<span class="ident" id="8264861">MustCompile</span><span class="op" id="8264872">(</span><span class="ident" id="8264873">test</span><span class="op" id="8264877">.</span><span class="ident" id="8264878">pat</span><span class="op" id="8264881">)</span><span class="op" id="8264882">.</span><span class="ident" id="8264883">FindAllStringIndex</span><span class="op" id="8264901">(</span><span class="ident" id="8264902">test</span><span class="op" id="8264906">.</span><span class="ident" id="8264907">text</span><span class="op" id="8264911">,</span>&nbsp;<span class="op" id="8264913">-</span><span class="num" id="8264914">1</span><span class="op" id="8264915">)</span><span class="op" id="8264916">,</span>&nbsp;<span class="ident" id="8264918">t</span><span class="op" id="8264919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264922">}</span><br>
<span class="lineno">310</span><span class="op" id="8264924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8264927">//&nbsp;Now&nbsp;come&nbsp;the&nbsp;Submatch&nbsp;cases.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8264960">func</span>&nbsp;<span class="ident" id="8264965">testSubmatchBytes</span><span class="op" id="8264982">(</span><span class="ident" id="8264983">test</span>&nbsp;<span class="op" id="8264988">*</span><span class="ident" id="8264989">FindTest</span><span class="op" id="8264997">,</span>&nbsp;<span class="ident" id="8264999">n</span>&nbsp;<span class="builtintype" id="8265001">int</span><span class="op" id="8265004">,</span>&nbsp;<span class="ident" id="8265006">submatches</span>&nbsp;<span class="op" id="8265017">[</span><span class="op" id="8265018">]</span><span class="builtintype" id="8265019">int</span><span class="op" id="8265022">,</span>&nbsp;<span class="ident" id="8265024">result</span>&nbsp;<span class="op" id="8265031">[</span><span class="op" id="8265032">]</span><span class="op" id="8265033">[</span><span class="op" id="8265034">]</span><span class="builtintype" id="8265035">byte</span><span class="op" id="8265039">,</span>&nbsp;<span class="ident" id="8265041">t</span>&nbsp;<span class="op" id="8265043">*</span><span class="ident" id="8265044">testing</span><span class="op" id="8265051">.</span><span class="ident" id="8265052">T</span><span class="op" id="8265053">)</span>&nbsp;<span class="op" id="8265055">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265058">if</span>&nbsp;<span class="builtinfunc" id="8265061">len</span><span class="op" id="8265064">(</span><span class="ident" id="8265065">submatches</span><span class="op" id="8265075">)</span>&nbsp;<span class="op" id="8265077">!=</span>&nbsp;<span class="builtinfunc" id="8265080">len</span><span class="op" id="8265083">(</span><span class="ident" id="8265084">result</span><span class="op" id="8265090">)</span><span class="op" id="8265091">*</span><span class="num" id="8265092">2</span>&nbsp;<span class="op" id="8265094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265098">t</span><span class="op" id="8265099">.</span><span class="ident" id="8265100">Errorf</span><span class="op" id="8265106">(</span><span class="string" id="8265107">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%d&nbsp;submatches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8265153">,</span>&nbsp;<span class="ident" id="8265155">n</span><span class="op" id="8265156">,</span>&nbsp;<span class="builtinfunc" id="8265158">len</span><span class="op" id="8265161">(</span><span class="ident" id="8265162">submatches</span><span class="op" id="8265172">)</span><span class="op" id="8265173">/</span><span class="num" id="8265174">2</span><span class="op" id="8265175">,</span>&nbsp;<span class="builtinfunc" id="8265177">len</span><span class="op" id="8265180">(</span><span class="ident" id="8265181">result</span><span class="op" id="8265187">)</span><span class="op" id="8265188">,</span>&nbsp;<span class="ident" id="8265190">test</span><span class="op" id="8265194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265198">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265209">for</span>&nbsp;<span class="ident" id="8265213">k</span>&nbsp;<span class="op" id="8265215">:=</span>&nbsp;<span class="num" id="8265218">0</span><span class="op" id="8265219">;</span>&nbsp;<span class="ident" id="8265221">k</span>&nbsp;<span class="op" id="8265223">&lt;</span>&nbsp;<span class="builtinfunc" id="8265225">len</span><span class="op" id="8265228">(</span><span class="ident" id="8265229">submatches</span><span class="op" id="8265239">)</span><span class="op" id="8265240">;</span>&nbsp;<span class="ident" id="8265242">k</span>&nbsp;<span class="op" id="8265244">+=</span>&nbsp;<span class="num" id="8265247">2</span>&nbsp;<span class="op" id="8265249">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265253">if</span>&nbsp;<span class="ident" id="8265256">submatches</span><span class="op" id="8265266">[</span><span class="ident" id="8265267">k</span><span class="op" id="8265268">]</span>&nbsp;<span class="op" id="8265270">==</span>&nbsp;<span class="op" id="8265273">-</span><span class="num" id="8265274">1</span>&nbsp;<span class="op" id="8265276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265281">if</span>&nbsp;<span class="ident" id="8265284">result</span><span class="op" id="8265290">[</span><span class="ident" id="8265291">k</span><span class="op" id="8265292">/</span><span class="num" id="8265293">2</span><span class="op" id="8265294">]</span>&nbsp;<span class="op" id="8265296">!=</span>&nbsp;<span class="ident" id="8265299">nil</span>&nbsp;<span class="op" id="8265303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265309">t</span><span class="op" id="8265310">.</span><span class="ident" id="8265311">Errorf</span><span class="op" id="8265317">(</span><span class="string" id="8265318">&#34;match&nbsp;%d:&nbsp;expected&nbsp;nil&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8265353">,</span>&nbsp;<span class="ident" id="8265355">n</span><span class="op" id="8265356">,</span>&nbsp;<span class="ident" id="8265358">result</span><span class="op" id="8265364">,</span>&nbsp;<span class="ident" id="8265366">test</span><span class="op" id="8265370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265380">continue</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265395">expect</span>&nbsp;<span class="op" id="8265402">:=</span>&nbsp;<span class="ident" id="8265405">test</span><span class="op" id="8265409">.</span><span class="ident" id="8265410">text</span><span class="op" id="8265414">[</span><span class="ident" id="8265415">submatches</span><span class="op" id="8265425">[</span><span class="ident" id="8265426">k</span><span class="op" id="8265427">]</span><span class="op" id="8265428">:</span><span class="ident" id="8265429">submatches</span><span class="op" id="8265439">[</span><span class="ident" id="8265440">k</span><span class="op" id="8265441">+</span><span class="num" id="8265442">1</span><span class="op" id="8265443">]</span><span class="op" id="8265444">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265448">if</span>&nbsp;<span class="ident" id="8265451">expect</span>&nbsp;<span class="op" id="8265458">!=</span>&nbsp;<span class="builtintype" id="8265461">string</span><span class="op" id="8265467">(</span><span class="ident" id="8265468">result</span><span class="op" id="8265474">[</span><span class="ident" id="8265475">k</span><span class="op" id="8265476">/</span><span class="num" id="8265477">2</span><span class="op" id="8265478">]</span><span class="op" id="8265479">)</span>&nbsp;<span class="op" id="8265481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265486">t</span><span class="op" id="8265487">.</span><span class="ident" id="8265488">Errorf</span><span class="op" id="8265494">(</span><span class="string" id="8265495">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8265529">,</span>&nbsp;<span class="ident" id="8265531">n</span><span class="op" id="8265532">,</span>&nbsp;<span class="ident" id="8265534">expect</span><span class="op" id="8265540">,</span>&nbsp;<span class="ident" id="8265542">result</span><span class="op" id="8265548">,</span>&nbsp;<span class="ident" id="8265550">test</span><span class="op" id="8265554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265559">return</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265571">}</span><br>
<span class="lineno"></span><span class="op" id="8265573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8265576">func</span>&nbsp;<span class="ident" id="8265581">TestFindSubmatch</span><span class="op" id="8265597">(</span><span class="ident" id="8265598">t</span>&nbsp;<span class="op" id="8265600">*</span><span class="ident" id="8265601">testing</span><span class="op" id="8265608">.</span><span class="ident" id="8265609">T</span><span class="op" id="8265610">)</span>&nbsp;<span class="op" id="8265612">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265615">for</span>&nbsp;<span class="ident" id="8265619">_</span><span class="op" id="8265620">,</span>&nbsp;<span class="ident" id="8265622">test</span>&nbsp;<span class="op" id="8265627">:=</span>&nbsp;<span class="keyword" id="8265630">range</span>&nbsp;<span class="ident" id="8265636">findTests</span>&nbsp;<span class="op" id="8265646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265650">result</span>&nbsp;<span class="op" id="8265657">:=</span>&nbsp;<span class="ident" id="8265660">MustCompile</span><span class="op" id="8265671">(</span><span class="ident" id="8265672">test</span><span class="op" id="8265676">.</span><span class="ident" id="8265677">pat</span><span class="op" id="8265680">)</span><span class="op" id="8265681">.</span><span class="ident" id="8265682">FindSubmatch</span><span class="op" id="8265694">(</span><span class="op" id="8265695">[</span><span class="op" id="8265696">]</span><span class="builtintype" id="8265697">byte</span><span class="op" id="8265701">(</span><span class="ident" id="8265702">test</span><span class="op" id="8265706">.</span><span class="ident" id="8265707">text</span><span class="op" id="8265711">)</span><span class="op" id="8265712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265716">switch</span>&nbsp;<span class="op" id="8265723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265727">case</span>&nbsp;<span class="ident" id="8265732">test</span><span class="op" id="8265736">.</span><span class="ident" id="8265737">matches</span>&nbsp;<span class="op" id="8265745">==</span>&nbsp;<span class="ident" id="8265748">nil</span>&nbsp;<span class="op" id="8265752">&amp;&amp;</span>&nbsp;<span class="ident" id="8265755">result</span>&nbsp;<span class="op" id="8265762">==</span>&nbsp;<span class="ident" id="8265765">nil</span><span class="op" id="8265768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265773">//&nbsp;ok</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265781">case</span>&nbsp;<span class="ident" id="8265786">test</span><span class="op" id="8265790">.</span><span class="ident" id="8265791">matches</span>&nbsp;<span class="op" id="8265799">==</span>&nbsp;<span class="ident" id="8265802">nil</span>&nbsp;<span class="op" id="8265806">&amp;&amp;</span>&nbsp;<span class="ident" id="8265809">result</span>&nbsp;<span class="op" id="8265816">!=</span>&nbsp;<span class="ident" id="8265819">nil</span><span class="op" id="8265822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265827">t</span><span class="op" id="8265828">.</span><span class="ident" id="8265829">Errorf</span><span class="op" id="8265835">(</span><span class="string" id="8265836">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8265868">,</span>&nbsp;<span class="ident" id="8265870">test</span><span class="op" id="8265874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265878">case</span>&nbsp;<span class="ident" id="8265883">test</span><span class="op" id="8265887">.</span><span class="ident" id="8265888">matches</span>&nbsp;<span class="op" id="8265896">!=</span>&nbsp;<span class="ident" id="8265899">nil</span>&nbsp;<span class="op" id="8265903">&amp;&amp;</span>&nbsp;<span class="ident" id="8265906">result</span>&nbsp;<span class="op" id="8265913">==</span>&nbsp;<span class="ident" id="8265916">nil</span><span class="op" id="8265919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265924">t</span><span class="op" id="8265925">.</span><span class="ident" id="8265926">Errorf</span><span class="op" id="8265932">(</span><span class="string" id="8265933">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8265963">,</span>&nbsp;<span class="ident" id="8265965">test</span><span class="op" id="8265969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8265973">case</span>&nbsp;<span class="ident" id="8265978">test</span><span class="op" id="8265982">.</span><span class="ident" id="8265983">matches</span>&nbsp;<span class="op" id="8265991">!=</span>&nbsp;<span class="ident" id="8265994">nil</span>&nbsp;<span class="op" id="8265998">&amp;&amp;</span>&nbsp;<span class="ident" id="8266001">result</span>&nbsp;<span class="op" id="8266008">!=</span>&nbsp;<span class="ident" id="8266011">nil</span><span class="op" id="8266014">:</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266019">testSubmatchBytes</span><span class="op" id="8266036">(</span><span class="op" id="8266037">&amp;</span><span class="ident" id="8266038">test</span><span class="op" id="8266042">,</span>&nbsp;<span class="num" id="8266044">0</span><span class="op" id="8266045">,</span>&nbsp;<span class="ident" id="8266047">test</span><span class="op" id="8266051">.</span><span class="ident" id="8266052">matches</span><span class="op" id="8266059">[</span><span class="num" id="8266060">0</span><span class="op" id="8266061">]</span><span class="op" id="8266062">,</span>&nbsp;<span class="ident" id="8266064">result</span><span class="op" id="8266070">,</span>&nbsp;<span class="ident" id="8266072">t</span><span class="op" id="8266073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266080">}</span><br>
<span class="lineno"></span><span class="op" id="8266082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="8266085">func</span>&nbsp;<span class="ident" id="8266090">testSubmatchString</span><span class="op" id="8266108">(</span><span class="ident" id="8266109">test</span>&nbsp;<span class="op" id="8266114">*</span><span class="ident" id="8266115">FindTest</span><span class="op" id="8266123">,</span>&nbsp;<span class="ident" id="8266125">n</span>&nbsp;<span class="builtintype" id="8266127">int</span><span class="op" id="8266130">,</span>&nbsp;<span class="ident" id="8266132">submatches</span>&nbsp;<span class="op" id="8266143">[</span><span class="op" id="8266144">]</span><span class="builtintype" id="8266145">int</span><span class="op" id="8266148">,</span>&nbsp;<span class="ident" id="8266150">result</span>&nbsp;<span class="op" id="8266157">[</span><span class="op" id="8266158">]</span><span class="builtintype" id="8266159">string</span><span class="op" id="8266165">,</span>&nbsp;<span class="ident" id="8266167">t</span>&nbsp;<span class="op" id="8266169">*</span><span class="ident" id="8266170">testing</span><span class="op" id="8266177">.</span><span class="ident" id="8266178">T</span><span class="op" id="8266179">)</span>&nbsp;<span class="op" id="8266181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266184">if</span>&nbsp;<span class="builtinfunc" id="8266187">len</span><span class="op" id="8266190">(</span><span class="ident" id="8266191">submatches</span><span class="op" id="8266201">)</span>&nbsp;<span class="op" id="8266203">!=</span>&nbsp;<span class="builtinfunc" id="8266206">len</span><span class="op" id="8266209">(</span><span class="ident" id="8266210">result</span><span class="op" id="8266216">)</span><span class="op" id="8266217">*</span><span class="num" id="8266218">2</span>&nbsp;<span class="op" id="8266220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266224">t</span><span class="op" id="8266225">.</span><span class="ident" id="8266226">Errorf</span><span class="op" id="8266232">(</span><span class="string" id="8266233">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%d&nbsp;submatches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8266279">,</span>&nbsp;<span class="ident" id="8266281">n</span><span class="op" id="8266282">,</span>&nbsp;<span class="builtinfunc" id="8266284">len</span><span class="op" id="8266287">(</span><span class="ident" id="8266288">submatches</span><span class="op" id="8266298">)</span><span class="op" id="8266299">/</span><span class="num" id="8266300">2</span><span class="op" id="8266301">,</span>&nbsp;<span class="builtinfunc" id="8266303">len</span><span class="op" id="8266306">(</span><span class="ident" id="8266307">result</span><span class="op" id="8266313">)</span><span class="op" id="8266314">,</span>&nbsp;<span class="ident" id="8266316">test</span><span class="op" id="8266320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266324">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266332">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266335">for</span>&nbsp;<span class="ident" id="8266339">k</span>&nbsp;<span class="op" id="8266341">:=</span>&nbsp;<span class="num" id="8266344">0</span><span class="op" id="8266345">;</span>&nbsp;<span class="ident" id="8266347">k</span>&nbsp;<span class="op" id="8266349">&lt;</span>&nbsp;<span class="builtinfunc" id="8266351">len</span><span class="op" id="8266354">(</span><span class="ident" id="8266355">submatches</span><span class="op" id="8266365">)</span><span class="op" id="8266366">;</span>&nbsp;<span class="ident" id="8266368">k</span>&nbsp;<span class="op" id="8266370">+=</span>&nbsp;<span class="num" id="8266373">2</span>&nbsp;<span class="op" id="8266375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266379">if</span>&nbsp;<span class="ident" id="8266382">submatches</span><span class="op" id="8266392">[</span><span class="ident" id="8266393">k</span><span class="op" id="8266394">]</span>&nbsp;<span class="op" id="8266396">==</span>&nbsp;<span class="op" id="8266399">-</span><span class="num" id="8266400">1</span>&nbsp;<span class="op" id="8266402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266407">if</span>&nbsp;<span class="ident" id="8266410">result</span><span class="op" id="8266416">[</span><span class="ident" id="8266417">k</span><span class="op" id="8266418">/</span><span class="num" id="8266419">2</span><span class="op" id="8266420">]</span>&nbsp;<span class="op" id="8266422">!=</span>&nbsp;<span class="string" id="8266425">&#34;&#34;</span>&nbsp;<span class="op" id="8266428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266434">t</span><span class="op" id="8266435">.</span><span class="ident" id="8266436">Errorf</span><span class="op" id="8266442">(</span><span class="string" id="8266443">&#34;match&nbsp;%d:&nbsp;expected&nbsp;nil&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8266478">,</span>&nbsp;<span class="ident" id="8266480">n</span><span class="op" id="8266481">,</span>&nbsp;<span class="ident" id="8266483">result</span><span class="op" id="8266489">,</span>&nbsp;<span class="ident" id="8266491">test</span><span class="op" id="8266495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266500">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266505">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266520">expect</span>&nbsp;<span class="op" id="8266527">:=</span>&nbsp;<span class="ident" id="8266530">test</span><span class="op" id="8266534">.</span><span class="ident" id="8266535">text</span><span class="op" id="8266539">[</span><span class="ident" id="8266540">submatches</span><span class="op" id="8266550">[</span><span class="ident" id="8266551">k</span><span class="op" id="8266552">]</span><span class="op" id="8266553">:</span><span class="ident" id="8266554">submatches</span><span class="op" id="8266564">[</span><span class="ident" id="8266565">k</span><span class="op" id="8266566">+</span><span class="num" id="8266567">1</span><span class="op" id="8266568">]</span><span class="op" id="8266569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266573">if</span>&nbsp;<span class="ident" id="8266576">expect</span>&nbsp;<span class="op" id="8266583">!=</span>&nbsp;<span class="ident" id="8266586">result</span><span class="op" id="8266592">[</span><span class="ident" id="8266593">k</span><span class="op" id="8266594">/</span><span class="num" id="8266595">2</span><span class="op" id="8266596">]</span>&nbsp;<span class="op" id="8266598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266603">t</span><span class="op" id="8266604">.</span><span class="ident" id="8266605">Errorf</span><span class="op" id="8266611">(</span><span class="string" id="8266612">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8266646">,</span>&nbsp;<span class="ident" id="8266648">n</span><span class="op" id="8266649">,</span>&nbsp;<span class="ident" id="8266651">expect</span><span class="op" id="8266657">,</span>&nbsp;<span class="ident" id="8266659">result</span><span class="op" id="8266665">,</span>&nbsp;<span class="ident" id="8266667">test</span><span class="op" id="8266671">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266676">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266688">}</span><br>
<span class="lineno"></span><span class="op" id="8266690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="8266693">func</span>&nbsp;<span class="ident" id="8266698">TestFindStringSubmatch</span><span class="op" id="8266720">(</span><span class="ident" id="8266721">t</span>&nbsp;<span class="op" id="8266723">*</span><span class="ident" id="8266724">testing</span><span class="op" id="8266731">.</span><span class="ident" id="8266732">T</span><span class="op" id="8266733">)</span>&nbsp;<span class="op" id="8266735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266738">for</span>&nbsp;<span class="ident" id="8266742">_</span><span class="op" id="8266743">,</span>&nbsp;<span class="ident" id="8266745">test</span>&nbsp;<span class="op" id="8266750">:=</span>&nbsp;<span class="keyword" id="8266753">range</span>&nbsp;<span class="ident" id="8266759">findTests</span>&nbsp;<span class="op" id="8266769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266773">result</span>&nbsp;<span class="op" id="8266780">:=</span>&nbsp;<span class="ident" id="8266783">MustCompile</span><span class="op" id="8266794">(</span><span class="ident" id="8266795">test</span><span class="op" id="8266799">.</span><span class="ident" id="8266800">pat</span><span class="op" id="8266803">)</span><span class="op" id="8266804">.</span><span class="ident" id="8266805">FindStringSubmatch</span><span class="op" id="8266823">(</span><span class="ident" id="8266824">test</span><span class="op" id="8266828">.</span><span class="ident" id="8266829">text</span><span class="op" id="8266833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266837">switch</span>&nbsp;<span class="op" id="8266844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266848">case</span>&nbsp;<span class="ident" id="8266853">test</span><span class="op" id="8266857">.</span><span class="ident" id="8266858">matches</span>&nbsp;<span class="op" id="8266866">==</span>&nbsp;<span class="ident" id="8266869">nil</span>&nbsp;<span class="op" id="8266873">&amp;&amp;</span>&nbsp;<span class="ident" id="8266876">result</span>&nbsp;<span class="op" id="8266883">==</span>&nbsp;<span class="ident" id="8266886">nil</span><span class="op" id="8266889">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8266894">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266902">case</span>&nbsp;<span class="ident" id="8266907">test</span><span class="op" id="8266911">.</span><span class="ident" id="8266912">matches</span>&nbsp;<span class="op" id="8266920">==</span>&nbsp;<span class="ident" id="8266923">nil</span>&nbsp;<span class="op" id="8266927">&amp;&amp;</span>&nbsp;<span class="ident" id="8266930">result</span>&nbsp;<span class="op" id="8266937">!=</span>&nbsp;<span class="ident" id="8266940">nil</span><span class="op" id="8266943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266948">t</span><span class="op" id="8266949">.</span><span class="ident" id="8266950">Errorf</span><span class="op" id="8266956">(</span><span class="string" id="8266957">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8266989">,</span>&nbsp;<span class="ident" id="8266991">test</span><span class="op" id="8266995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266999">case</span>&nbsp;<span class="ident" id="8267004">test</span><span class="op" id="8267008">.</span><span class="ident" id="8267009">matches</span>&nbsp;<span class="op" id="8267017">!=</span>&nbsp;<span class="ident" id="8267020">nil</span>&nbsp;<span class="op" id="8267024">&amp;&amp;</span>&nbsp;<span class="ident" id="8267027">result</span>&nbsp;<span class="op" id="8267034">==</span>&nbsp;<span class="ident" id="8267037">nil</span><span class="op" id="8267040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267045">t</span><span class="op" id="8267046">.</span><span class="ident" id="8267047">Errorf</span><span class="op" id="8267053">(</span><span class="string" id="8267054">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8267084">,</span>&nbsp;<span class="ident" id="8267086">test</span><span class="op" id="8267090">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267094">case</span>&nbsp;<span class="ident" id="8267099">test</span><span class="op" id="8267103">.</span><span class="ident" id="8267104">matches</span>&nbsp;<span class="op" id="8267112">!=</span>&nbsp;<span class="ident" id="8267115">nil</span>&nbsp;<span class="op" id="8267119">&amp;&amp;</span>&nbsp;<span class="ident" id="8267122">result</span>&nbsp;<span class="op" id="8267129">!=</span>&nbsp;<span class="ident" id="8267132">nil</span><span class="op" id="8267135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267140">testSubmatchString</span><span class="op" id="8267158">(</span><span class="op" id="8267159">&amp;</span><span class="ident" id="8267160">test</span><span class="op" id="8267164">,</span>&nbsp;<span class="num" id="8267166">0</span><span class="op" id="8267167">,</span>&nbsp;<span class="ident" id="8267169">test</span><span class="op" id="8267173">.</span><span class="ident" id="8267174">matches</span><span class="op" id="8267181">[</span><span class="num" id="8267182">0</span><span class="op" id="8267183">]</span><span class="op" id="8267184">,</span>&nbsp;<span class="ident" id="8267186">result</span><span class="op" id="8267192">,</span>&nbsp;<span class="ident" id="8267194">t</span><span class="op" id="8267195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267202">}</span><br>
<span class="lineno"></span><span class="op" id="8267204">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="8267207">func</span>&nbsp;<span class="ident" id="8267212">testSubmatchIndices</span><span class="op" id="8267231">(</span><span class="ident" id="8267232">test</span>&nbsp;<span class="op" id="8267237">*</span><span class="ident" id="8267238">FindTest</span><span class="op" id="8267246">,</span>&nbsp;<span class="ident" id="8267248">n</span>&nbsp;<span class="builtintype" id="8267250">int</span><span class="op" id="8267253">,</span>&nbsp;<span class="ident" id="8267255">expect</span><span class="op" id="8267261">,</span>&nbsp;<span class="ident" id="8267263">result</span>&nbsp;<span class="op" id="8267270">[</span><span class="op" id="8267271">]</span><span class="builtintype" id="8267272">int</span><span class="op" id="8267275">,</span>&nbsp;<span class="ident" id="8267277">t</span>&nbsp;<span class="op" id="8267279">*</span><span class="ident" id="8267280">testing</span><span class="op" id="8267287">.</span><span class="ident" id="8267288">T</span><span class="op" id="8267289">)</span>&nbsp;<span class="op" id="8267291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267294">if</span>&nbsp;<span class="builtinfunc" id="8267297">len</span><span class="op" id="8267300">(</span><span class="ident" id="8267301">expect</span><span class="op" id="8267307">)</span>&nbsp;<span class="op" id="8267309">!=</span>&nbsp;<span class="builtinfunc" id="8267312">len</span><span class="op" id="8267315">(</span><span class="ident" id="8267316">result</span><span class="op" id="8267322">)</span>&nbsp;<span class="op" id="8267324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267328">t</span><span class="op" id="8267329">.</span><span class="ident" id="8267330">Errorf</span><span class="op" id="8267336">(</span><span class="string" id="8267337">&#34;match&nbsp;%d:&nbsp;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8267380">,</span>&nbsp;<span class="ident" id="8267382">n</span><span class="op" id="8267383">,</span>&nbsp;<span class="builtinfunc" id="8267385">len</span><span class="op" id="8267388">(</span><span class="ident" id="8267389">expect</span><span class="op" id="8267395">)</span><span class="op" id="8267396">/</span><span class="num" id="8267397">2</span><span class="op" id="8267398">,</span>&nbsp;<span class="builtinfunc" id="8267400">len</span><span class="op" id="8267403">(</span><span class="ident" id="8267404">result</span><span class="op" id="8267410">)</span><span class="op" id="8267411">/</span><span class="num" id="8267412">2</span><span class="op" id="8267413">,</span>&nbsp;<span class="ident" id="8267415">test</span><span class="op" id="8267419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267423">return</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267434">for</span>&nbsp;<span class="ident" id="8267438">k</span><span class="op" id="8267439">,</span>&nbsp;<span class="ident" id="8267441">e</span>&nbsp;<span class="op" id="8267443">:=</span>&nbsp;<span class="keyword" id="8267446">range</span>&nbsp;<span class="ident" id="8267452">expect</span>&nbsp;<span class="op" id="8267459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267463">if</span>&nbsp;<span class="ident" id="8267466">e</span>&nbsp;<span class="op" id="8267468">!=</span>&nbsp;<span class="ident" id="8267471">result</span><span class="op" id="8267477">[</span><span class="ident" id="8267478">k</span><span class="op" id="8267479">]</span>&nbsp;<span class="op" id="8267481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267486">t</span><span class="op" id="8267487">.</span><span class="ident" id="8267488">Errorf</span><span class="op" id="8267494">(</span><span class="string" id="8267495">&#34;match&nbsp;%d:&nbsp;submatch&nbsp;error:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8267545">,</span>&nbsp;<span class="ident" id="8267547">n</span><span class="op" id="8267548">,</span>&nbsp;<span class="ident" id="8267550">expect</span><span class="op" id="8267556">,</span>&nbsp;<span class="ident" id="8267558">result</span><span class="op" id="8267564">,</span>&nbsp;<span class="ident" id="8267566">test</span><span class="op" id="8267570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267574">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267577">}</span><br>
<span class="lineno"></span><span class="op" id="8267579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8267582">func</span>&nbsp;<span class="ident" id="8267587">testFindSubmatchIndex</span><span class="op" id="8267608">(</span><span class="ident" id="8267609">test</span>&nbsp;<span class="op" id="8267614">*</span><span class="ident" id="8267615">FindTest</span><span class="op" id="8267623">,</span>&nbsp;<span class="ident" id="8267625">result</span>&nbsp;<span class="op" id="8267632">[</span><span class="op" id="8267633">]</span><span class="builtintype" id="8267634">int</span><span class="op" id="8267637">,</span>&nbsp;<span class="ident" id="8267639">t</span>&nbsp;<span class="op" id="8267641">*</span><span class="ident" id="8267642">testing</span><span class="op" id="8267649">.</span><span class="ident" id="8267650">T</span><span class="op" id="8267651">)</span>&nbsp;<span class="op" id="8267653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267656">switch</span>&nbsp;<span class="op" id="8267663">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267666">case</span>&nbsp;<span class="ident" id="8267671">test</span><span class="op" id="8267675">.</span><span class="ident" id="8267676">matches</span>&nbsp;<span class="op" id="8267684">==</span>&nbsp;<span class="ident" id="8267687">nil</span>&nbsp;<span class="op" id="8267691">&amp;&amp;</span>&nbsp;<span class="ident" id="8267694">result</span>&nbsp;<span class="op" id="8267701">==</span>&nbsp;<span class="ident" id="8267704">nil</span><span class="op" id="8267707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8267711">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267718">case</span>&nbsp;<span class="ident" id="8267723">test</span><span class="op" id="8267727">.</span><span class="ident" id="8267728">matches</span>&nbsp;<span class="op" id="8267736">==</span>&nbsp;<span class="ident" id="8267739">nil</span>&nbsp;<span class="op" id="8267743">&amp;&amp;</span>&nbsp;<span class="ident" id="8267746">result</span>&nbsp;<span class="op" id="8267753">!=</span>&nbsp;<span class="ident" id="8267756">nil</span><span class="op" id="8267759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267763">t</span><span class="op" id="8267764">.</span><span class="ident" id="8267765">Errorf</span><span class="op" id="8267771">(</span><span class="string" id="8267772">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8267804">,</span>&nbsp;<span class="ident" id="8267806">test</span><span class="op" id="8267810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267813">case</span>&nbsp;<span class="ident" id="8267818">test</span><span class="op" id="8267822">.</span><span class="ident" id="8267823">matches</span>&nbsp;<span class="op" id="8267831">!=</span>&nbsp;<span class="ident" id="8267834">nil</span>&nbsp;<span class="op" id="8267838">&amp;&amp;</span>&nbsp;<span class="ident" id="8267841">result</span>&nbsp;<span class="op" id="8267848">==</span>&nbsp;<span class="ident" id="8267851">nil</span><span class="op" id="8267854">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267858">t</span><span class="op" id="8267859">.</span><span class="ident" id="8267860">Errorf</span><span class="op" id="8267866">(</span><span class="string" id="8267867">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8267897">,</span>&nbsp;<span class="ident" id="8267899">test</span><span class="op" id="8267903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267906">case</span>&nbsp;<span class="ident" id="8267911">test</span><span class="op" id="8267915">.</span><span class="ident" id="8267916">matches</span>&nbsp;<span class="op" id="8267924">!=</span>&nbsp;<span class="ident" id="8267927">nil</span>&nbsp;<span class="op" id="8267931">&amp;&amp;</span>&nbsp;<span class="ident" id="8267934">result</span>&nbsp;<span class="op" id="8267941">!=</span>&nbsp;<span class="ident" id="8267944">nil</span><span class="op" id="8267947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267951">testSubmatchIndices</span><span class="op" id="8267970">(</span><span class="ident" id="8267971">test</span><span class="op" id="8267975">,</span>&nbsp;<span class="num" id="8267977">0</span><span class="op" id="8267978">,</span>&nbsp;<span class="ident" id="8267980">test</span><span class="op" id="8267984">.</span><span class="ident" id="8267985">matches</span><span class="op" id="8267992">[</span><span class="num" id="8267993">0</span><span class="op" id="8267994">]</span><span class="op" id="8267995">,</span>&nbsp;<span class="ident" id="8267997">result</span><span class="op" id="8268003">,</span>&nbsp;<span class="ident" id="8268005">t</span><span class="op" id="8268006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268009">}</span><br>
<span class="lineno"></span><span class="op" id="8268011">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="8268014">func</span>&nbsp;<span class="ident" id="8268019">TestFindSubmatchIndex</span><span class="op" id="8268040">(</span><span class="ident" id="8268041">t</span>&nbsp;<span class="op" id="8268043">*</span><span class="ident" id="8268044">testing</span><span class="op" id="8268051">.</span><span class="ident" id="8268052">T</span><span class="op" id="8268053">)</span>&nbsp;<span class="op" id="8268055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268058">for</span>&nbsp;<span class="ident" id="8268062">_</span><span class="op" id="8268063">,</span>&nbsp;<span class="ident" id="8268065">test</span>&nbsp;<span class="op" id="8268070">:=</span>&nbsp;<span class="keyword" id="8268073">range</span>&nbsp;<span class="ident" id="8268079">findTests</span>&nbsp;<span class="op" id="8268089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268093">testFindSubmatchIndex</span><span class="op" id="8268114">(</span><span class="op" id="8268115">&amp;</span><span class="ident" id="8268116">test</span><span class="op" id="8268120">,</span>&nbsp;<span class="ident" id="8268122">MustCompile</span><span class="op" id="8268133">(</span><span class="ident" id="8268134">test</span><span class="op" id="8268138">.</span><span class="ident" id="8268139">pat</span><span class="op" id="8268142">)</span><span class="op" id="8268143">.</span><span class="ident" id="8268144">FindSubmatchIndex</span><span class="op" id="8268161">(</span><span class="op" id="8268162">[</span><span class="op" id="8268163">]</span><span class="builtintype" id="8268164">byte</span><span class="op" id="8268168">(</span><span class="ident" id="8268169">test</span><span class="op" id="8268173">.</span><span class="ident" id="8268174">text</span><span class="op" id="8268178">)</span><span class="op" id="8268179">)</span><span class="op" id="8268180">,</span>&nbsp;<span class="ident" id="8268182">t</span><span class="op" id="8268183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268186">}</span><br>
<span class="lineno">415</span><span class="op" id="8268188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268191">func</span>&nbsp;<span class="ident" id="8268196">TestFindStringSubmatchIndex</span><span class="op" id="8268223">(</span><span class="ident" id="8268224">t</span>&nbsp;<span class="op" id="8268226">*</span><span class="ident" id="8268227">testing</span><span class="op" id="8268234">.</span><span class="ident" id="8268235">T</span><span class="op" id="8268236">)</span>&nbsp;<span class="op" id="8268238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268241">for</span>&nbsp;<span class="ident" id="8268245">_</span><span class="op" id="8268246">,</span>&nbsp;<span class="ident" id="8268248">test</span>&nbsp;<span class="op" id="8268253">:=</span>&nbsp;<span class="keyword" id="8268256">range</span>&nbsp;<span class="ident" id="8268262">findTests</span>&nbsp;<span class="op" id="8268272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268276">testFindSubmatchIndex</span><span class="op" id="8268297">(</span><span class="op" id="8268298">&amp;</span><span class="ident" id="8268299">test</span><span class="op" id="8268303">,</span>&nbsp;<span class="ident" id="8268305">MustCompile</span><span class="op" id="8268316">(</span><span class="ident" id="8268317">test</span><span class="op" id="8268321">.</span><span class="ident" id="8268322">pat</span><span class="op" id="8268325">)</span><span class="op" id="8268326">.</span><span class="ident" id="8268327">FindStringSubmatchIndex</span><span class="op" id="8268350">(</span><span class="ident" id="8268351">test</span><span class="op" id="8268355">.</span><span class="ident" id="8268356">text</span><span class="op" id="8268360">)</span><span class="op" id="8268361">,</span>&nbsp;<span class="ident" id="8268363">t</span><span class="op" id="8268364">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268367">}</span><br>
<span class="lineno"></span><span class="op" id="8268369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268372">func</span>&nbsp;<span class="ident" id="8268377">TestFindReaderSubmatchIndex</span><span class="op" id="8268404">(</span><span class="ident" id="8268405">t</span>&nbsp;<span class="op" id="8268407">*</span><span class="ident" id="8268408">testing</span><span class="op" id="8268415">.</span><span class="ident" id="8268416">T</span><span class="op" id="8268417">)</span>&nbsp;<span class="op" id="8268419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268422">for</span>&nbsp;<span class="ident" id="8268426">_</span><span class="op" id="8268427">,</span>&nbsp;<span class="ident" id="8268429">test</span>&nbsp;<span class="op" id="8268434">:=</span>&nbsp;<span class="keyword" id="8268437">range</span>&nbsp;<span class="ident" id="8268443">findTests</span>&nbsp;<span class="op" id="8268453">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268457">testFindSubmatchIndex</span><span class="op" id="8268478">(</span><span class="op" id="8268479">&amp;</span><span class="ident" id="8268480">test</span><span class="op" id="8268484">,</span>&nbsp;<span class="ident" id="8268486">MustCompile</span><span class="op" id="8268497">(</span><span class="ident" id="8268498">test</span><span class="op" id="8268502">.</span><span class="ident" id="8268503">pat</span><span class="op" id="8268506">)</span><span class="op" id="8268507">.</span><span class="ident" id="8268508">FindReaderSubmatchIndex</span><span class="op" id="8268531">(</span><span class="ident" id="8268532">strings</span><span class="op" id="8268539">.</span><span class="ident" id="8268540">NewReader</span><span class="op" id="8268549">(</span><span class="ident" id="8268550">test</span><span class="op" id="8268554">.</span><span class="ident" id="8268555">text</span><span class="op" id="8268559">)</span><span class="op" id="8268560">)</span><span class="op" id="8268561">,</span>&nbsp;<span class="ident" id="8268563">t</span><span class="op" id="8268564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268567">}</span><br>
<span class="lineno"></span><span class="op" id="8268569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8268572">//&nbsp;Now&nbsp;come&nbsp;the&nbsp;monster&nbsp;AllSubmatch&nbsp;cases.</span><br>
<span class="lineno">430</span><br>
<span class="lineno"></span><span class="keyword" id="8268616">func</span>&nbsp;<span class="ident" id="8268621">TestFindAllSubmatch</span><span class="op" id="8268640">(</span><span class="ident" id="8268641">t</span>&nbsp;<span class="op" id="8268643">*</span><span class="ident" id="8268644">testing</span><span class="op" id="8268651">.</span><span class="ident" id="8268652">T</span><span class="op" id="8268653">)</span>&nbsp;<span class="op" id="8268655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268658">for</span>&nbsp;<span class="ident" id="8268662">_</span><span class="op" id="8268663">,</span>&nbsp;<span class="ident" id="8268665">test</span>&nbsp;<span class="op" id="8268670">:=</span>&nbsp;<span class="keyword" id="8268673">range</span>&nbsp;<span class="ident" id="8268679">findTests</span>&nbsp;<span class="op" id="8268689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268693">result</span>&nbsp;<span class="op" id="8268700">:=</span>&nbsp;<span class="ident" id="8268703">MustCompile</span><span class="op" id="8268714">(</span><span class="ident" id="8268715">test</span><span class="op" id="8268719">.</span><span class="ident" id="8268720">pat</span><span class="op" id="8268723">)</span><span class="op" id="8268724">.</span><span class="ident" id="8268725">FindAllSubmatch</span><span class="op" id="8268740">(</span><span class="op" id="8268741">[</span><span class="op" id="8268742">]</span><span class="builtintype" id="8268743">byte</span><span class="op" id="8268747">(</span><span class="ident" id="8268748">test</span><span class="op" id="8268752">.</span><span class="ident" id="8268753">text</span><span class="op" id="8268757">)</span><span class="op" id="8268758">,</span>&nbsp;<span class="op" id="8268760">-</span><span class="num" id="8268761">1</span><span class="op" id="8268762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268766">switch</span>&nbsp;<span class="op" id="8268773">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268777">case</span>&nbsp;<span class="ident" id="8268782">test</span><span class="op" id="8268786">.</span><span class="ident" id="8268787">matches</span>&nbsp;<span class="op" id="8268795">==</span>&nbsp;<span class="ident" id="8268798">nil</span>&nbsp;<span class="op" id="8268802">&amp;&amp;</span>&nbsp;<span class="ident" id="8268805">result</span>&nbsp;<span class="op" id="8268812">==</span>&nbsp;<span class="ident" id="8268815">nil</span><span class="op" id="8268818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8268823">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268831">case</span>&nbsp;<span class="ident" id="8268836">test</span><span class="op" id="8268840">.</span><span class="ident" id="8268841">matches</span>&nbsp;<span class="op" id="8268849">==</span>&nbsp;<span class="ident" id="8268852">nil</span>&nbsp;<span class="op" id="8268856">&amp;&amp;</span>&nbsp;<span class="ident" id="8268859">result</span>&nbsp;<span class="op" id="8268866">!=</span>&nbsp;<span class="ident" id="8268869">nil</span><span class="op" id="8268872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268877">t</span><span class="op" id="8268878">.</span><span class="ident" id="8268879">Errorf</span><span class="op" id="8268885">(</span><span class="string" id="8268886">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8268918">,</span>&nbsp;<span class="ident" id="8268920">test</span><span class="op" id="8268924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268928">case</span>&nbsp;<span class="ident" id="8268933">test</span><span class="op" id="8268937">.</span><span class="ident" id="8268938">matches</span>&nbsp;<span class="op" id="8268946">!=</span>&nbsp;<span class="ident" id="8268949">nil</span>&nbsp;<span class="op" id="8268953">&amp;&amp;</span>&nbsp;<span class="ident" id="8268956">result</span>&nbsp;<span class="op" id="8268963">==</span>&nbsp;<span class="ident" id="8268966">nil</span><span class="op" id="8268969">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268974">t</span><span class="op" id="8268975">.</span><span class="ident" id="8268976">Errorf</span><span class="op" id="8268982">(</span><span class="string" id="8268983">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8269013">,</span>&nbsp;<span class="ident" id="8269015">test</span><span class="op" id="8269019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269023">case</span>&nbsp;<span class="builtinfunc" id="8269028">len</span><span class="op" id="8269031">(</span><span class="ident" id="8269032">test</span><span class="op" id="8269036">.</span><span class="ident" id="8269037">matches</span><span class="op" id="8269044">)</span>&nbsp;<span class="op" id="8269046">!=</span>&nbsp;<span class="builtinfunc" id="8269049">len</span><span class="op" id="8269052">(</span><span class="ident" id="8269053">result</span><span class="op" id="8269059">)</span><span class="op" id="8269060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269065">t</span><span class="op" id="8269066">.</span><span class="ident" id="8269067">Errorf</span><span class="op" id="8269073">(</span><span class="string" id="8269074">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8269107">,</span>&nbsp;<span class="builtinfunc" id="8269109">len</span><span class="op" id="8269112">(</span><span class="ident" id="8269113">test</span><span class="op" id="8269117">.</span><span class="ident" id="8269118">matches</span><span class="op" id="8269125">)</span><span class="op" id="8269126">,</span>&nbsp;<span class="builtinfunc" id="8269128">len</span><span class="op" id="8269131">(</span><span class="ident" id="8269132">result</span><span class="op" id="8269138">)</span><span class="op" id="8269139">,</span>&nbsp;<span class="ident" id="8269141">test</span><span class="op" id="8269145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269149">case</span>&nbsp;<span class="ident" id="8269154">test</span><span class="op" id="8269158">.</span><span class="ident" id="8269159">matches</span>&nbsp;<span class="op" id="8269167">!=</span>&nbsp;<span class="ident" id="8269170">nil</span>&nbsp;<span class="op" id="8269174">&amp;&amp;</span>&nbsp;<span class="ident" id="8269177">result</span>&nbsp;<span class="op" id="8269184">!=</span>&nbsp;<span class="ident" id="8269187">nil</span><span class="op" id="8269190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269195">for</span>&nbsp;<span class="ident" id="8269199">k</span><span class="op" id="8269200">,</span>&nbsp;<span class="ident" id="8269202">match</span>&nbsp;<span class="op" id="8269208">:=</span>&nbsp;<span class="keyword" id="8269211">range</span>&nbsp;<span class="ident" id="8269217">test</span><span class="op" id="8269221">.</span><span class="ident" id="8269222">matches</span>&nbsp;<span class="op" id="8269230">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269236">testSubmatchBytes</span><span class="op" id="8269253">(</span><span class="op" id="8269254">&amp;</span><span class="ident" id="8269255">test</span><span class="op" id="8269259">,</span>&nbsp;<span class="ident" id="8269261">k</span><span class="op" id="8269262">,</span>&nbsp;<span class="ident" id="8269264">match</span><span class="op" id="8269269">,</span>&nbsp;<span class="ident" id="8269271">result</span><span class="op" id="8269277">[</span><span class="ident" id="8269278">k</span><span class="op" id="8269279">]</span><span class="op" id="8269280">,</span>&nbsp;<span class="ident" id="8269282">t</span><span class="op" id="8269283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269295">}</span><br>
<span class="lineno"></span><span class="op" id="8269297">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="8269300">func</span>&nbsp;<span class="ident" id="8269305">TestFindAllStringSubmatch</span><span class="op" id="8269330">(</span><span class="ident" id="8269331">t</span>&nbsp;<span class="op" id="8269333">*</span><span class="ident" id="8269334">testing</span><span class="op" id="8269341">.</span><span class="ident" id="8269342">T</span><span class="op" id="8269343">)</span>&nbsp;<span class="op" id="8269345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269348">for</span>&nbsp;<span class="ident" id="8269352">_</span><span class="op" id="8269353">,</span>&nbsp;<span class="ident" id="8269355">test</span>&nbsp;<span class="op" id="8269360">:=</span>&nbsp;<span class="keyword" id="8269363">range</span>&nbsp;<span class="ident" id="8269369">findTests</span>&nbsp;<span class="op" id="8269379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269383">result</span>&nbsp;<span class="op" id="8269390">:=</span>&nbsp;<span class="ident" id="8269393">MustCompile</span><span class="op" id="8269404">(</span><span class="ident" id="8269405">test</span><span class="op" id="8269409">.</span><span class="ident" id="8269410">pat</span><span class="op" id="8269413">)</span><span class="op" id="8269414">.</span><span class="ident" id="8269415">FindAllStringSubmatch</span><span class="op" id="8269436">(</span><span class="ident" id="8269437">test</span><span class="op" id="8269441">.</span><span class="ident" id="8269442">text</span><span class="op" id="8269446">,</span>&nbsp;<span class="op" id="8269448">-</span><span class="num" id="8269449">1</span><span class="op" id="8269450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269454">switch</span>&nbsp;<span class="op" id="8269461">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269465">case</span>&nbsp;<span class="ident" id="8269470">test</span><span class="op" id="8269474">.</span><span class="ident" id="8269475">matches</span>&nbsp;<span class="op" id="8269483">==</span>&nbsp;<span class="ident" id="8269486">nil</span>&nbsp;<span class="op" id="8269490">&amp;&amp;</span>&nbsp;<span class="ident" id="8269493">result</span>&nbsp;<span class="op" id="8269500">==</span>&nbsp;<span class="ident" id="8269503">nil</span><span class="op" id="8269506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8269511">//&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269519">case</span>&nbsp;<span class="ident" id="8269524">test</span><span class="op" id="8269528">.</span><span class="ident" id="8269529">matches</span>&nbsp;<span class="op" id="8269537">==</span>&nbsp;<span class="ident" id="8269540">nil</span>&nbsp;<span class="op" id="8269544">&amp;&amp;</span>&nbsp;<span class="ident" id="8269547">result</span>&nbsp;<span class="op" id="8269554">!=</span>&nbsp;<span class="ident" id="8269557">nil</span><span class="op" id="8269560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269565">t</span><span class="op" id="8269566">.</span><span class="ident" id="8269567">Errorf</span><span class="op" id="8269573">(</span><span class="string" id="8269574">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8269606">,</span>&nbsp;<span class="ident" id="8269608">test</span><span class="op" id="8269612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269616">case</span>&nbsp;<span class="ident" id="8269621">test</span><span class="op" id="8269625">.</span><span class="ident" id="8269626">matches</span>&nbsp;<span class="op" id="8269634">!=</span>&nbsp;<span class="ident" id="8269637">nil</span>&nbsp;<span class="op" id="8269641">&amp;&amp;</span>&nbsp;<span class="ident" id="8269644">result</span>&nbsp;<span class="op" id="8269651">==</span>&nbsp;<span class="ident" id="8269654">nil</span><span class="op" id="8269657">:</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269662">t</span><span class="op" id="8269663">.</span><span class="ident" id="8269664">Errorf</span><span class="op" id="8269670">(</span><span class="string" id="8269671">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8269701">,</span>&nbsp;<span class="ident" id="8269703">test</span><span class="op" id="8269707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269711">case</span>&nbsp;<span class="builtinfunc" id="8269716">len</span><span class="op" id="8269719">(</span><span class="ident" id="8269720">test</span><span class="op" id="8269724">.</span><span class="ident" id="8269725">matches</span><span class="op" id="8269732">)</span>&nbsp;<span class="op" id="8269734">!=</span>&nbsp;<span class="builtinfunc" id="8269737">len</span><span class="op" id="8269740">(</span><span class="ident" id="8269741">result</span><span class="op" id="8269747">)</span><span class="op" id="8269748">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269753">t</span><span class="op" id="8269754">.</span><span class="ident" id="8269755">Errorf</span><span class="op" id="8269761">(</span><span class="string" id="8269762">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8269795">,</span>&nbsp;<span class="builtinfunc" id="8269797">len</span><span class="op" id="8269800">(</span><span class="ident" id="8269801">test</span><span class="op" id="8269805">.</span><span class="ident" id="8269806">matches</span><span class="op" id="8269813">)</span><span class="op" id="8269814">,</span>&nbsp;<span class="builtinfunc" id="8269816">len</span><span class="op" id="8269819">(</span><span class="ident" id="8269820">result</span><span class="op" id="8269826">)</span><span class="op" id="8269827">,</span>&nbsp;<span class="ident" id="8269829">test</span><span class="op" id="8269833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269837">case</span>&nbsp;<span class="ident" id="8269842">test</span><span class="op" id="8269846">.</span><span class="ident" id="8269847">matches</span>&nbsp;<span class="op" id="8269855">!=</span>&nbsp;<span class="ident" id="8269858">nil</span>&nbsp;<span class="op" id="8269862">&amp;&amp;</span>&nbsp;<span class="ident" id="8269865">result</span>&nbsp;<span class="op" id="8269872">!=</span>&nbsp;<span class="ident" id="8269875">nil</span><span class="op" id="8269878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8269883">for</span>&nbsp;<span class="ident" id="8269887">k</span><span class="op" id="8269888">,</span>&nbsp;<span class="ident" id="8269890">match</span>&nbsp;<span class="op" id="8269896">:=</span>&nbsp;<span class="keyword" id="8269899">range</span>&nbsp;<span class="ident" id="8269905">test</span><span class="op" id="8269909">.</span><span class="ident" id="8269910">matches</span>&nbsp;<span class="op" id="8269918">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269924">testSubmatchString</span><span class="op" id="8269942">(</span><span class="op" id="8269943">&amp;</span><span class="ident" id="8269944">test</span><span class="op" id="8269948">,</span>&nbsp;<span class="ident" id="8269950">k</span><span class="op" id="8269951">,</span>&nbsp;<span class="ident" id="8269953">match</span><span class="op" id="8269958">,</span>&nbsp;<span class="ident" id="8269960">result</span><span class="op" id="8269966">[</span><span class="ident" id="8269967">k</span><span class="op" id="8269968">]</span><span class="op" id="8269969">,</span>&nbsp;<span class="ident" id="8269971">t</span><span class="op" id="8269972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269984">}</span><br>
<span class="lineno"></span><span class="op" id="8269986">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="8269989">func</span>&nbsp;<span class="ident" id="8269994">testFindAllSubmatchIndex</span><span class="op" id="8270018">(</span><span class="ident" id="8270019">test</span>&nbsp;<span class="op" id="8270024">*</span><span class="ident" id="8270025">FindTest</span><span class="op" id="8270033">,</span>&nbsp;<span class="ident" id="8270035">result</span>&nbsp;<span class="op" id="8270042">[</span><span class="op" id="8270043">]</span><span class="op" id="8270044">[</span><span class="op" id="8270045">]</span><span class="builtintype" id="8270046">int</span><span class="op" id="8270049">,</span>&nbsp;<span class="ident" id="8270051">t</span>&nbsp;<span class="op" id="8270053">*</span><span class="ident" id="8270054">testing</span><span class="op" id="8270061">.</span><span class="ident" id="8270062">T</span><span class="op" id="8270063">)</span>&nbsp;<span class="op" id="8270065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270068">switch</span>&nbsp;<span class="op" id="8270075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270078">case</span>&nbsp;<span class="ident" id="8270083">test</span><span class="op" id="8270087">.</span><span class="ident" id="8270088">matches</span>&nbsp;<span class="op" id="8270096">==</span>&nbsp;<span class="ident" id="8270099">nil</span>&nbsp;<span class="op" id="8270103">&amp;&amp;</span>&nbsp;<span class="ident" id="8270106">result</span>&nbsp;<span class="op" id="8270113">==</span>&nbsp;<span class="ident" id="8270116">nil</span><span class="op" id="8270119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8270123">//&nbsp;ok</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270130">case</span>&nbsp;<span class="ident" id="8270135">test</span><span class="op" id="8270139">.</span><span class="ident" id="8270140">matches</span>&nbsp;<span class="op" id="8270148">==</span>&nbsp;<span class="ident" id="8270151">nil</span>&nbsp;<span class="op" id="8270155">&amp;&amp;</span>&nbsp;<span class="ident" id="8270158">result</span>&nbsp;<span class="op" id="8270165">!=</span>&nbsp;<span class="ident" id="8270168">nil</span><span class="op" id="8270171">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270175">t</span><span class="op" id="8270176">.</span><span class="ident" id="8270177">Errorf</span><span class="op" id="8270183">(</span><span class="string" id="8270184">&#34;expected&nbsp;no&nbsp;match;&nbsp;got&nbsp;one:&nbsp;%s&#34;</span><span class="op" id="8270216">,</span>&nbsp;<span class="ident" id="8270218">test</span><span class="op" id="8270222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270225">case</span>&nbsp;<span class="ident" id="8270230">test</span><span class="op" id="8270234">.</span><span class="ident" id="8270235">matches</span>&nbsp;<span class="op" id="8270243">!=</span>&nbsp;<span class="ident" id="8270246">nil</span>&nbsp;<span class="op" id="8270250">&amp;&amp;</span>&nbsp;<span class="ident" id="8270253">result</span>&nbsp;<span class="op" id="8270260">==</span>&nbsp;<span class="ident" id="8270263">nil</span><span class="op" id="8270266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270270">t</span><span class="op" id="8270271">.</span><span class="ident" id="8270272">Errorf</span><span class="op" id="8270278">(</span><span class="string" id="8270279">&#34;expected&nbsp;match;&nbsp;got&nbsp;none:&nbsp;%s&#34;</span><span class="op" id="8270309">,</span>&nbsp;<span class="ident" id="8270311">test</span><span class="op" id="8270315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270318">case</span>&nbsp;<span class="builtinfunc" id="8270323">len</span><span class="op" id="8270326">(</span><span class="ident" id="8270327">test</span><span class="op" id="8270331">.</span><span class="ident" id="8270332">matches</span><span class="op" id="8270339">)</span>&nbsp;<span class="op" id="8270341">!=</span>&nbsp;<span class="builtinfunc" id="8270344">len</span><span class="op" id="8270347">(</span><span class="ident" id="8270348">result</span><span class="op" id="8270354">)</span><span class="op" id="8270355">:</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270359">t</span><span class="op" id="8270360">.</span><span class="ident" id="8270361">Errorf</span><span class="op" id="8270367">(</span><span class="string" id="8270368">&#34;expected&nbsp;%d&nbsp;matches;&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8270401">,</span>&nbsp;<span class="builtinfunc" id="8270403">len</span><span class="op" id="8270406">(</span><span class="ident" id="8270407">test</span><span class="op" id="8270411">.</span><span class="ident" id="8270412">matches</span><span class="op" id="8270419">)</span><span class="op" id="8270420">,</span>&nbsp;<span class="builtinfunc" id="8270422">len</span><span class="op" id="8270425">(</span><span class="ident" id="8270426">result</span><span class="op" id="8270432">)</span><span class="op" id="8270433">,</span>&nbsp;<span class="ident" id="8270435">test</span><span class="op" id="8270439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270442">case</span>&nbsp;<span class="ident" id="8270447">test</span><span class="op" id="8270451">.</span><span class="ident" id="8270452">matches</span>&nbsp;<span class="op" id="8270460">!=</span>&nbsp;<span class="ident" id="8270463">nil</span>&nbsp;<span class="op" id="8270467">&amp;&amp;</span>&nbsp;<span class="ident" id="8270470">result</span>&nbsp;<span class="op" id="8270477">!=</span>&nbsp;<span class="ident" id="8270480">nil</span><span class="op" id="8270483">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270487">for</span>&nbsp;<span class="ident" id="8270491">k</span><span class="op" id="8270492">,</span>&nbsp;<span class="ident" id="8270494">match</span>&nbsp;<span class="op" id="8270500">:=</span>&nbsp;<span class="keyword" id="8270503">range</span>&nbsp;<span class="ident" id="8270509">test</span><span class="op" id="8270513">.</span><span class="ident" id="8270514">matches</span>&nbsp;<span class="op" id="8270522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270527">testSubmatchIndices</span><span class="op" id="8270546">(</span><span class="ident" id="8270547">test</span><span class="op" id="8270551">,</span>&nbsp;<span class="ident" id="8270553">k</span><span class="op" id="8270554">,</span>&nbsp;<span class="ident" id="8270556">match</span><span class="op" id="8270561">,</span>&nbsp;<span class="ident" id="8270563">result</span><span class="op" id="8270569">[</span><span class="ident" id="8270570">k</span><span class="op" id="8270571">]</span><span class="op" id="8270572">,</span>&nbsp;<span class="ident" id="8270574">t</span><span class="op" id="8270575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270579">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270582">}</span><br>
<span class="lineno"></span><span class="op" id="8270584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8270587">func</span>&nbsp;<span class="ident" id="8270592">TestFindAllSubmatchIndex</span><span class="op" id="8270616">(</span><span class="ident" id="8270617">t</span>&nbsp;<span class="op" id="8270619">*</span><span class="ident" id="8270620">testing</span><span class="op" id="8270627">.</span><span class="ident" id="8270628">T</span><span class="op" id="8270629">)</span>&nbsp;<span class="op" id="8270631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270634">for</span>&nbsp;<span class="ident" id="8270638">_</span><span class="op" id="8270639">,</span>&nbsp;<span class="ident" id="8270641">test</span>&nbsp;<span class="op" id="8270646">:=</span>&nbsp;<span class="keyword" id="8270649">range</span>&nbsp;<span class="ident" id="8270655">findTests</span>&nbsp;<span class="op" id="8270665">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270669">testFindAllSubmatchIndex</span><span class="op" id="8270693">(</span><span class="op" id="8270694">&amp;</span><span class="ident" id="8270695">test</span><span class="op" id="8270699">,</span>&nbsp;<span class="ident" id="8270701">MustCompile</span><span class="op" id="8270712">(</span><span class="ident" id="8270713">test</span><span class="op" id="8270717">.</span><span class="ident" id="8270718">pat</span><span class="op" id="8270721">)</span><span class="op" id="8270722">.</span><span class="ident" id="8270723">FindAllSubmatchIndex</span><span class="op" id="8270743">(</span><span class="op" id="8270744">[</span><span class="op" id="8270745">]</span><span class="builtintype" id="8270746">byte</span><span class="op" id="8270750">(</span><span class="ident" id="8270751">test</span><span class="op" id="8270755">.</span><span class="ident" id="8270756">text</span><span class="op" id="8270760">)</span><span class="op" id="8270761">,</span>&nbsp;<span class="op" id="8270763">-</span><span class="num" id="8270764">1</span><span class="op" id="8270765">)</span><span class="op" id="8270766">,</span>&nbsp;<span class="ident" id="8270768">t</span><span class="op" id="8270769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270772">}</span><br>
<span class="lineno"></span><span class="op" id="8270774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8270777">func</span>&nbsp;<span class="ident" id="8270782">TestFindAllStringSubmatchIndex</span><span class="op" id="8270812">(</span><span class="ident" id="8270813">t</span>&nbsp;<span class="op" id="8270815">*</span><span class="ident" id="8270816">testing</span><span class="op" id="8270823">.</span><span class="ident" id="8270824">T</span><span class="op" id="8270825">)</span>&nbsp;<span class="op" id="8270827">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270830">for</span>&nbsp;<span class="ident" id="8270834">_</span><span class="op" id="8270835">,</span>&nbsp;<span class="ident" id="8270837">test</span>&nbsp;<span class="op" id="8270842">:=</span>&nbsp;<span class="keyword" id="8270845">range</span>&nbsp;<span class="ident" id="8270851">findTests</span>&nbsp;<span class="op" id="8270861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270865">testFindAllSubmatchIndex</span><span class="op" id="8270889">(</span><span class="op" id="8270890">&amp;</span><span class="ident" id="8270891">test</span><span class="op" id="8270895">,</span>&nbsp;<span class="ident" id="8270897">MustCompile</span><span class="op" id="8270908">(</span><span class="ident" id="8270909">test</span><span class="op" id="8270913">.</span><span class="ident" id="8270914">pat</span><span class="op" id="8270917">)</span><span class="op" id="8270918">.</span><span class="ident" id="8270919">FindAllStringSubmatchIndex</span><span class="op" id="8270945">(</span><span class="ident" id="8270946">test</span><span class="op" id="8270950">.</span><span class="ident" id="8270951">text</span><span class="op" id="8270955">,</span>&nbsp;<span class="op" id="8270957">-</span><span class="num" id="8270958">1</span><span class="op" id="8270959">)</span><span class="op" id="8270960">,</span>&nbsp;<span class="ident" id="8270962">t</span><span class="op" id="8270963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270966">}</span><br>
<span class="lineno"></span><span class="op" id="8270968">}</span>
</div>
</body>
</html>
