<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5556653">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5556708">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5556762">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5556813">package</span>&nbsp;<span class="ident" id="5556821">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5556828">//&nbsp;RGBToYCbCr&nbsp;converts&nbsp;an&nbsp;RGB&nbsp;triple&nbsp;to&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5556885">func</span>&nbsp;<span class="ident" id="5556890">RGBToYCbCr</span><span class="op" id="5556900">(</span><span class="ident" id="5556901">r</span><span class="op" id="5556902">,</span>&nbsp;<span class="ident" id="5556904">g</span><span class="op" id="5556905">,</span>&nbsp;<span class="ident" id="5556907">b</span>&nbsp;<span class="builtintype" id="5556909">uint8</span><span class="op" id="5556914">)</span>&nbsp;<span class="op" id="5556916">(</span><span class="builtintype" id="5556917">uint8</span><span class="op" id="5556922">,</span>&nbsp;<span class="builtintype" id="5556924">uint8</span><span class="op" id="5556929">,</span>&nbsp;<span class="builtintype" id="5556931">uint8</span><span class="op" id="5556936">)</span>&nbsp;<span class="op" id="5556938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5556941">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5556974">//&nbsp;&nbsp;&nbsp;&nbspY&#39;&nbsp;=&nbsp;&nbsp;0.2990*R&nbsp;+&nbsp;0.5870*G&nbsp;+&nbsp;0.1140*B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557015">//&nbsp;&nbsp;&nbsp;&nbspCb&nbsp;=&nbsp;-0.1687*R&nbsp;-&nbsp;0.3313*G&nbsp;+&nbsp;0.5000*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557062">//&nbsp;&nbsp;&nbsp;&nbspCr&nbsp;=&nbsp;&nbsp;0.5000*R&nbsp;-&nbsp;0.4187*G&nbsp;-&nbsp;0.0813*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557109">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557176">r1</span>&nbsp;<span class="op" id="5557179">:=</span>&nbsp;<span class="builtintype" id="5557182">int</span><span class="op" id="5557185">(</span><span class="ident" id="5557186">r</span><span class="op" id="5557187">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557190">g1</span>&nbsp;<span class="op" id="5557193">:=</span>&nbsp;<span class="builtintype" id="5557196">int</span><span class="op" id="5557199">(</span><span class="ident" id="5557200">g</span><span class="op" id="5557201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557204">b1</span>&nbsp;<span class="op" id="5557207">:=</span>&nbsp;<span class="builtintype" id="5557210">int</span><span class="op" id="5557213">(</span><span class="ident" id="5557214">b</span><span class="op" id="5557215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557218">yy</span>&nbsp;<span class="op" id="5557221">:=</span>&nbsp;<span class="op" id="5557224">(</span><span class="num" id="5557225">19595</span><span class="op" id="5557230">*</span><span class="ident" id="5557231">r1</span>&nbsp;<span class="op" id="5557234">+</span>&nbsp;<span class="num" id="5557236">38470</span><span class="op" id="5557241">*</span><span class="ident" id="5557242">g1</span>&nbsp;<span class="op" id="5557245">+</span>&nbsp;<span class="num" id="5557247">7471</span><span class="op" id="5557251">*</span><span class="ident" id="5557252">b1</span>&nbsp;<span class="op" id="5557255">+</span>&nbsp;<span class="num" id="5557257">1</span><span class="op" id="5557258">&lt;&lt;</span><span class="num" id="5557260">15</span><span class="op" id="5557262">)</span>&nbsp;<span class="op" id="5557264">&gt;&gt;</span>&nbsp;<span class="num" id="5557267">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557271">cb</span>&nbsp;<span class="op" id="5557274">:=</span>&nbsp;<span class="op" id="5557277">(</span><span class="op" id="5557278">-</span><span class="num" id="5557279">11056</span><span class="op" id="5557284">*</span><span class="ident" id="5557285">r1</span>&nbsp;<span class="op" id="5557288">-</span>&nbsp;<span class="num" id="5557290">21712</span><span class="op" id="5557295">*</span><span class="ident" id="5557296">g1</span>&nbsp;<span class="op" id="5557299">+</span>&nbsp;<span class="num" id="5557301">32768</span><span class="op" id="5557306">*</span><span class="ident" id="5557307">b1</span>&nbsp;<span class="op" id="5557310">+</span>&nbsp;<span class="num" id="5557312">257</span><span class="op" id="5557315">&lt;&lt;</span><span class="num" id="5557317">15</span><span class="op" id="5557319">)</span>&nbsp;<span class="op" id="5557321">&gt;&gt;</span>&nbsp;<span class="num" id="5557324">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557328">cr</span>&nbsp;<span class="op" id="5557331">:=</span>&nbsp;<span class="op" id="5557334">(</span><span class="num" id="5557335">32768</span><span class="op" id="5557340">*</span><span class="ident" id="5557341">r1</span>&nbsp;<span class="op" id="5557344">-</span>&nbsp;<span class="num" id="5557346">27440</span><span class="op" id="5557351">*</span><span class="ident" id="5557352">g1</span>&nbsp;<span class="op" id="5557355">-</span>&nbsp;<span class="num" id="5557357">5328</span><span class="op" id="5557361">*</span><span class="ident" id="5557362">b1</span>&nbsp;<span class="op" id="5557365">+</span>&nbsp;<span class="num" id="5557367">257</span><span class="op" id="5557370">&lt;&lt;</span><span class="num" id="5557372">15</span><span class="op" id="5557374">)</span>&nbsp;<span class="op" id="5557376">&gt;&gt;</span>&nbsp;<span class="num" id="5557379">16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5557383">if</span>&nbsp;<span class="ident" id="5557386">yy</span>&nbsp;<span class="op" id="5557389">&lt;</span>&nbsp;<span class="num" id="5557391">0</span>&nbsp;<span class="op" id="5557393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557397">yy</span>&nbsp;<span class="op" id="5557400">=</span>&nbsp;<span class="num" id="5557402">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557405">}</span>&nbsp;<span class="keyword" id="5557407">else</span>&nbsp;<span class="keyword" id="5557412">if</span>&nbsp;<span class="ident" id="5557415">yy</span>&nbsp;<span class="op" id="5557418">&gt;</span>&nbsp;<span class="num" id="5557420">255</span>&nbsp;<span class="op" id="5557424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557428">yy</span>&nbsp;<span class="op" id="5557431">=</span>&nbsp;<span class="num" id="5557433">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557438">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5557441">if</span>&nbsp;<span class="ident" id="5557444">cb</span>&nbsp;<span class="op" id="5557447">&lt;</span>&nbsp;<span class="num" id="5557449">0</span>&nbsp;<span class="op" id="5557451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557455">cb</span>&nbsp;<span class="op" id="5557458">=</span>&nbsp;<span class="num" id="5557460">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557463">}</span>&nbsp;<span class="keyword" id="5557465">else</span>&nbsp;<span class="keyword" id="5557470">if</span>&nbsp;<span class="ident" id="5557473">cb</span>&nbsp;<span class="op" id="5557476">&gt;</span>&nbsp;<span class="num" id="5557478">255</span>&nbsp;<span class="op" id="5557482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557486">cb</span>&nbsp;<span class="op" id="5557489">=</span>&nbsp;<span class="num" id="5557491">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557496">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5557499">if</span>&nbsp;<span class="ident" id="5557502">cr</span>&nbsp;<span class="op" id="5557505">&lt;</span>&nbsp;<span class="num" id="5557507">0</span>&nbsp;<span class="op" id="5557509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557513">cr</span>&nbsp;<span class="op" id="5557516">=</span>&nbsp;<span class="num" id="5557518">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557521">}</span>&nbsp;<span class="keyword" id="5557523">else</span>&nbsp;<span class="keyword" id="5557528">if</span>&nbsp;<span class="ident" id="5557531">cr</span>&nbsp;<span class="op" id="5557534">&gt;</span>&nbsp;<span class="num" id="5557536">255</span>&nbsp;<span class="op" id="5557540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557544">cr</span>&nbsp;<span class="op" id="5557547">=</span>&nbsp;<span class="num" id="5557549">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5557554">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5557557">return</span>&nbsp;<span class="builtintype" id="5557564">uint8</span><span class="op" id="5557569">(</span><span class="ident" id="5557570">yy</span><span class="op" id="5557572">)</span><span class="op" id="5557573">,</span>&nbsp;<span class="builtintype" id="5557575">uint8</span><span class="op" id="5557580">(</span><span class="ident" id="5557581">cb</span><span class="op" id="5557583">)</span><span class="op" id="5557584">,</span>&nbsp;<span class="builtintype" id="5557586">uint8</span><span class="op" id="5557591">(</span><span class="ident" id="5557592">cr</span><span class="op" id="5557594">)</span><br>
<span class="lineno"></span><span class="op" id="5557596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5557599">//&nbsp;YCbCrToRGB&nbsp;converts&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple&nbsp;to&nbsp;an&nbsp;RGB&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5557656">func</span>&nbsp;<span class="ident" id="5557661">YCbCrToRGB</span><span class="op" id="5557671">(</span><span class="ident" id="5557672">y</span><span class="op" id="5557673">,</span>&nbsp;<span class="ident" id="5557675">cb</span><span class="op" id="5557677">,</span>&nbsp;<span class="ident" id="5557679">cr</span>&nbsp;<span class="builtintype" id="5557682">uint8</span><span class="op" id="5557687">)</span>&nbsp;<span class="op" id="5557689">(</span><span class="builtintype" id="5557690">uint8</span><span class="op" id="5557695">,</span>&nbsp;<span class="builtintype" id="5557697">uint8</span><span class="op" id="5557702">,</span>&nbsp;<span class="builtintype" id="5557704">uint8</span><span class="op" id="5557709">)</span>&nbsp;<span class="op" id="5557711">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557714">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557747">//&nbsp;&nbsp;&nbsp;&nbspR&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.40200*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557777">//&nbsp;&nbsp;&nbsp;&nbspG&nbsp;=&nbsp;Y&#39;&nbsp;-&nbsp;0.34414*(Cb-128)&nbsp;-&nbsp;0.71414*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557826">//&nbsp;&nbsp;&nbsp;&nbspB&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.77200*(Cb-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5557856">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557923">yy1</span>&nbsp;<span class="op" id="5557927">:=</span>&nbsp;<span class="builtintype" id="5557930">int</span><span class="op" id="5557933">(</span><span class="ident" id="5557934">y</span><span class="op" id="5557935">)</span><span class="op" id="5557936">&lt;&lt;</span><span class="num" id="5557938">16</span>&nbsp;<span class="op" id="5557941">+</span>&nbsp;<span class="num" id="5557943">1</span><span class="op" id="5557944">&lt;&lt;</span><span class="num" id="5557946">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557950">cb1</span>&nbsp;<span class="op" id="5557954">:=</span>&nbsp;<span class="builtintype" id="5557957">int</span><span class="op" id="5557960">(</span><span class="ident" id="5557961">cb</span><span class="op" id="5557963">)</span>&nbsp;<span class="op" id="5557965">-</span>&nbsp;<span class="num" id="5557967">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557972">cr1</span>&nbsp;<span class="op" id="5557976">:=</span>&nbsp;<span class="builtintype" id="5557979">int</span><span class="op" id="5557982">(</span><span class="ident" id="5557983">cr</span><span class="op" id="5557985">)</span>&nbsp;<span class="op" id="5557987">-</span>&nbsp;<span class="num" id="5557989">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5557994">r</span>&nbsp;<span class="op" id="5557996">:=</span>&nbsp;<span class="op" id="5557999">(</span><span class="ident" id="5558000">yy1</span>&nbsp;<span class="op" id="5558004">+</span>&nbsp;<span class="num" id="5558006">91881</span><span class="op" id="5558011">*</span><span class="ident" id="5558012">cr1</span><span class="op" id="5558015">)</span>&nbsp;<span class="op" id="5558017">&gt;&gt;</span>&nbsp;<span class="num" id="5558020">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558024">g</span>&nbsp;<span class="op" id="5558026">:=</span>&nbsp;<span class="op" id="5558029">(</span><span class="ident" id="5558030">yy1</span>&nbsp;<span class="op" id="5558034">-</span>&nbsp;<span class="num" id="5558036">22554</span><span class="op" id="5558041">*</span><span class="ident" id="5558042">cb1</span>&nbsp;<span class="op" id="5558046">-</span>&nbsp;<span class="num" id="5558048">46802</span><span class="op" id="5558053">*</span><span class="ident" id="5558054">cr1</span><span class="op" id="5558057">)</span>&nbsp;<span class="op" id="5558059">&gt;&gt;</span>&nbsp;<span class="num" id="5558062">16</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558066">b</span>&nbsp;<span class="op" id="5558068">:=</span>&nbsp;<span class="op" id="5558071">(</span><span class="ident" id="5558072">yy1</span>&nbsp;<span class="op" id="5558076">+</span>&nbsp;<span class="num" id="5558078">116130</span><span class="op" id="5558084">*</span><span class="ident" id="5558085">cb1</span><span class="op" id="5558088">)</span>&nbsp;<span class="op" id="5558090">&gt;&gt;</span>&nbsp;<span class="num" id="5558093">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5558097">if</span>&nbsp;<span class="ident" id="5558100">r</span>&nbsp;<span class="op" id="5558102">&lt;</span>&nbsp;<span class="num" id="5558104">0</span>&nbsp;<span class="op" id="5558106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558110">r</span>&nbsp;<span class="op" id="5558112">=</span>&nbsp;<span class="num" id="5558114">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558117">}</span>&nbsp;<span class="keyword" id="5558119">else</span>&nbsp;<span class="keyword" id="5558124">if</span>&nbsp;<span class="ident" id="5558127">r</span>&nbsp;<span class="op" id="5558129">&gt;</span>&nbsp;<span class="num" id="5558131">255</span>&nbsp;<span class="op" id="5558135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558139">r</span>&nbsp;<span class="op" id="5558141">=</span>&nbsp;<span class="num" id="5558143">255</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5558151">if</span>&nbsp;<span class="ident" id="5558154">g</span>&nbsp;<span class="op" id="5558156">&lt;</span>&nbsp;<span class="num" id="5558158">0</span>&nbsp;<span class="op" id="5558160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558164">g</span>&nbsp;<span class="op" id="5558166">=</span>&nbsp;<span class="num" id="5558168">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558171">}</span>&nbsp;<span class="keyword" id="5558173">else</span>&nbsp;<span class="keyword" id="5558178">if</span>&nbsp;<span class="ident" id="5558181">g</span>&nbsp;<span class="op" id="5558183">&gt;</span>&nbsp;<span class="num" id="5558185">255</span>&nbsp;<span class="op" id="5558189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558193">g</span>&nbsp;<span class="op" id="5558195">=</span>&nbsp;<span class="num" id="5558197">255</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5558205">if</span>&nbsp;<span class="ident" id="5558208">b</span>&nbsp;<span class="op" id="5558210">&lt;</span>&nbsp;<span class="num" id="5558212">0</span>&nbsp;<span class="op" id="5558214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558218">b</span>&nbsp;<span class="op" id="5558220">=</span>&nbsp;<span class="num" id="5558222">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558225">}</span>&nbsp;<span class="keyword" id="5558227">else</span>&nbsp;<span class="keyword" id="5558232">if</span>&nbsp;<span class="ident" id="5558235">b</span>&nbsp;<span class="op" id="5558237">&gt;</span>&nbsp;<span class="num" id="5558239">255</span>&nbsp;<span class="op" id="5558243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558247">b</span>&nbsp;<span class="op" id="5558249">=</span>&nbsp;<span class="num" id="5558251">255</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5558256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5558259">return</span>&nbsp;<span class="builtintype" id="5558266">uint8</span><span class="op" id="5558271">(</span><span class="ident" id="5558272">r</span><span class="op" id="5558273">)</span><span class="op" id="5558274">,</span>&nbsp;<span class="builtintype" id="5558276">uint8</span><span class="op" id="5558281">(</span><span class="ident" id="5558282">g</span><span class="op" id="5558283">)</span><span class="op" id="5558284">,</span>&nbsp;<span class="builtintype" id="5558286">uint8</span><span class="op" id="5558291">(</span><span class="ident" id="5558292">b</span><span class="op" id="5558293">)</span><br>
<span class="lineno"></span><span class="op" id="5558295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5558298">//&nbsp;YCbCr&nbsp;represents&nbsp;a&nbsp;fully&nbsp;opaque&nbsp;24-bit&nbsp;Y&#39;CbCr&nbsp;color,&nbsp;having&nbsp;8&nbsp;bits&nbsp;each&nbsp;for</span><br>
<span class="lineno">70</span><span class="comment" id="5558377">//&nbsp;one&nbsp;luma&nbsp;and&nbsp;two&nbsp;chroma&nbsp;components.</span><br>
<span class="lineno"></span><span class="comment" id="5558416">//</span><br>
<span class="lineno"></span><span class="comment" id="5558419">//&nbsp;JPEG,&nbsp;VP8,&nbsp;the&nbsp;MPEG&nbsp;family&nbsp;and&nbsp;other&nbsp;codecs&nbsp;use&nbsp;this&nbsp;color&nbsp;model.&nbsp;Such</span><br>
<span class="lineno"></span><span class="comment" id="5558493">//&nbsp;codecs&nbsp;often&nbsp;use&nbsp;the&nbsp;terms&nbsp;YUV&nbsp;and&nbsp;Y&#39;CbCr&nbsp;interchangeably,&nbsp;but&nbsp;strictly</span><br>
<span class="lineno"></span><span class="comment" id="5558568">//&nbsp;speaking,&nbsp;the&nbsp;term&nbsp;YUV&nbsp;applies&nbsp;only&nbsp;to&nbsp;analog&nbsp;video&nbsp;signals,&nbsp;and&nbsp;Y&#39;&nbsp;(luma)</span><br>
<span class="lineno">75</span><span class="comment" id="5558646">//&nbsp;is&nbsp;Y&nbsp;(luminance)&nbsp;after&nbsp;applying&nbsp;gamma&nbsp;correction.</span><br>
<span class="lineno"></span><span class="comment" id="5558699">//</span><br>
<span class="lineno"></span><span class="comment" id="5558702">//&nbsp;Conversion&nbsp;between&nbsp;RGB&nbsp;and&nbsp;Y&#39;CbCr&nbsp;is&nbsp;lossy&nbsp;and&nbsp;there&nbsp;are&nbsp;multiple,&nbsp;slightly</span><br>
<span class="lineno"></span><span class="comment" id="5558781">//&nbsp;different&nbsp;formulae&nbsp;for&nbsp;converting&nbsp;between&nbsp;the&nbsp;two.&nbsp;This&nbsp;package&nbsp;follows</span><br>
<span class="lineno"></span><span class="comment" id="5558856">//&nbsp;the&nbsp;JFIF&nbsp;specification&nbsp;at&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf.</span><br>
<span class="lineno">80</span><span class="keyword" id="5558928">type</span>&nbsp;<span class="ident" id="5558933">YCbCr</span>&nbsp;<span class="keyword" id="5558939">struct</span>&nbsp;<span class="op" id="5558946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5558949">Y</span><span class="op" id="5558950">,</span>&nbsp;<span class="ident" id="5558952">Cb</span><span class="op" id="5558954">,</span>&nbsp;<span class="ident" id="5558956">Cr</span>&nbsp;<span class="builtintype" id="5558959">uint8</span><br>
<span class="lineno"></span><span class="op" id="5558965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5558968">func</span>&nbsp;<span class="op" id="5558973">(</span><span class="ident" id="5558974">c</span>&nbsp;<span class="ident" id="5558976">YCbCr</span><span class="op" id="5558981">)</span>&nbsp;<span class="ident" id="5558983">RGBA</span><span class="op" id="5558987">(</span><span class="op" id="5558988">)</span>&nbsp;<span class="op" id="5558990">(</span><span class="builtintype" id="5558991">uint32</span><span class="op" id="5558997">,</span>&nbsp;<span class="builtintype" id="5558999">uint32</span><span class="op" id="5559005">,</span>&nbsp;<span class="builtintype" id="5559007">uint32</span><span class="op" id="5559013">,</span>&nbsp;<span class="builtintype" id="5559015">uint32</span><span class="op" id="5559021">)</span>&nbsp;<span class="op" id="5559023">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5559026">r</span><span class="op" id="5559027">,</span>&nbsp;<span class="ident" id="5559029">g</span><span class="op" id="5559030">,</span>&nbsp;<span class="ident" id="5559032">b</span>&nbsp;<span class="op" id="5559034">:=</span>&nbsp;<span class="ident" id="5559037">YCbCrToRGB</span><span class="op" id="5559047">(</span><span class="ident" id="5559048">c</span><span class="op" id="5559049">.</span><span class="ident" id="5559050">Y</span><span class="op" id="5559051">,</span>&nbsp;<span class="ident" id="5559053">c</span><span class="op" id="5559054">.</span><span class="ident" id="5559055">Cb</span><span class="op" id="5559057">,</span>&nbsp;<span class="ident" id="5559059">c</span><span class="op" id="5559060">.</span><span class="ident" id="5559061">Cr</span><span class="op" id="5559063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5559066">return</span>&nbsp;<span class="builtintype" id="5559073">uint32</span><span class="op" id="5559079">(</span><span class="ident" id="5559080">r</span><span class="op" id="5559081">)</span>&nbsp;<span class="op" id="5559083">*</span>&nbsp;<span class="num" id="5559085">0x101</span><span class="op" id="5559090">,</span>&nbsp;<span class="builtintype" id="5559092">uint32</span><span class="op" id="5559098">(</span><span class="ident" id="5559099">g</span><span class="op" id="5559100">)</span>&nbsp;<span class="op" id="5559102">*</span>&nbsp;<span class="num" id="5559104">0x101</span><span class="op" id="5559109">,</span>&nbsp;<span class="builtintype" id="5559111">uint32</span><span class="op" id="5559117">(</span><span class="ident" id="5559118">b</span><span class="op" id="5559119">)</span>&nbsp;<span class="op" id="5559121">*</span>&nbsp;<span class="num" id="5559123">0x101</span><span class="op" id="5559128">,</span>&nbsp;<span class="num" id="5559130">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5559137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5559140">//&nbsp;YCbCrModel&nbsp;is&nbsp;the&nbsp;Model&nbsp;for&nbsp;Y&#39;CbCr&nbsp;colors.</span><br>
<span class="lineno">90</span><span class="keyword" id="5559186">var</span>&nbsp;<span class="ident" id="5559190">YCbCrModel</span>&nbsp;<span class="ident" id="5559201">Model</span>&nbsp;<span class="op" id="5559207">=</span>&nbsp;<span class="ident" id="5559209">ModelFunc</span><span class="op" id="5559218">(</span><span class="ident" id="5559219">yCbCrModel</span><span class="op" id="5559229">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5559232">func</span>&nbsp;<span class="ident" id="5559237">yCbCrModel</span><span class="op" id="5559247">(</span><span class="ident" id="5559248">c</span>&nbsp;<span class="ident" id="5559250">Color</span><span class="op" id="5559255">)</span>&nbsp;<span class="ident" id="5559257">Color</span>&nbsp;<span class="op" id="5559263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5559266">if</span>&nbsp;<span class="ident" id="5559269">_</span><span class="op" id="5559270">,</span>&nbsp;<span class="ident" id="5559272">ok</span>&nbsp;<span class="op" id="5559275">:=</span>&nbsp;<span class="ident" id="5559278">c</span><span class="op" id="5559279">.</span><span class="op" id="5559280">(</span><span class="ident" id="5559281">YCbCr</span><span class="op" id="5559286">)</span><span class="op" id="5559287">;</span>&nbsp;<span class="ident" id="5559289">ok</span>&nbsp;<span class="op" id="5559292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5559296">return</span>&nbsp;<span class="ident" id="5559303">c</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5559306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5559309">r</span><span class="op" id="5559310">,</span>&nbsp;<span class="ident" id="5559312">g</span><span class="op" id="5559313">,</span>&nbsp;<span class="ident" id="5559315">b</span><span class="op" id="5559316">,</span>&nbsp;<span class="ident" id="5559318">_</span>&nbsp;<span class="op" id="5559320">:=</span>&nbsp;<span class="ident" id="5559323">c</span><span class="op" id="5559324">.</span><span class="ident" id="5559325">RGBA</span><span class="op" id="5559329">(</span><span class="op" id="5559330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5559333">y</span><span class="op" id="5559334">,</span>&nbsp;<span class="ident" id="5559336">u</span><span class="op" id="5559337">,</span>&nbsp;<span class="ident" id="5559339">v</span>&nbsp;<span class="op" id="5559341">:=</span>&nbsp;<span class="ident" id="5559344">RGBToYCbCr</span><span class="op" id="5559354">(</span><span class="builtintype" id="5559355">uint8</span><span class="op" id="5559360">(</span><span class="ident" id="5559361">r</span><span class="op" id="5559362">&gt;&gt;</span><span class="num" id="5559364">8</span><span class="op" id="5559365">)</span><span class="op" id="5559366">,</span>&nbsp;<span class="builtintype" id="5559368">uint8</span><span class="op" id="5559373">(</span><span class="ident" id="5559374">g</span><span class="op" id="5559375">&gt;&gt;</span><span class="num" id="5559377">8</span><span class="op" id="5559378">)</span><span class="op" id="5559379">,</span>&nbsp;<span class="builtintype" id="5559381">uint8</span><span class="op" id="5559386">(</span><span class="ident" id="5559387">b</span><span class="op" id="5559388">&gt;&gt;</span><span class="num" id="5559390">8</span><span class="op" id="5559391">)</span><span class="op" id="5559392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5559395">return</span>&nbsp;<span class="ident" id="5559402">YCbCr</span><span class="op" id="5559407">{</span><span class="ident" id="5559408">y</span><span class="op" id="5559409">,</span>&nbsp;<span class="ident" id="5559411">u</span><span class="op" id="5559412">,</span>&nbsp;<span class="ident" id="5559414">v</span><span class="op" id="5559415">}</span><br>
<span class="lineno"></span><span class="op" id="5559417">}</span>
</div>
</body>
</html>
