<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5108980">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5109035">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5109089">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5109140">//go:generate&nbsp;go&nbsp;run&nbsp;encgen.go&nbsp;-output&nbsp;enc_helpers.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5109195">package</span>&nbsp;<span class="ident" id="5109203">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5109208">import</span>&nbsp;<span class="op" id="5109215">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5109218">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5109230">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5109238">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="5109248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5109251">const</span>&nbsp;<span class="ident" id="5109257">uint64Size</span>&nbsp;<span class="op" id="5109268">=</span>&nbsp;<span class="num" id="5109270">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5109273">type</span>&nbsp;<span class="ident" id="5109278">encHelper</span>&nbsp;<span class="keyword" id="5109288">func</span><span class="op" id="5109292">(</span><span class="ident" id="5109293">state</span>&nbsp;<span class="op" id="5109299">*</span><span class="ident" id="5109300"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5109312">,</span>&nbsp;<span class="ident" id="5109314">v</span>&nbsp;<span class="ident" id="5109316"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5109323">.</span><span class="ident" id="5109324">Value</span><span class="op" id="5109329">)</span>&nbsp;<span class="builtintype" id="5109331">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5109337">//&nbsp;encoderState&nbsp;is&nbsp;the&nbsp;global&nbsp;execution&nbsp;state&nbsp;of&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;encoder.</span><br>
<span class="lineno">20</span><span class="comment" id="5109414">//&nbsp;Field&nbsp;numbers&nbsp;are&nbsp;delta&nbsp;encoded&nbsp;and&nbsp;always&nbsp;increase.&nbsp;The&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5109480">//&nbsp;number&nbsp;is&nbsp;initialized&nbsp;to&nbsp;-1&nbsp;so&nbsp;0&nbsp;comes&nbsp;out&nbsp;as&nbsp;delta(1).&nbsp;A&nbsp;delta&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5109550">//&nbsp;0&nbsp;terminates&nbsp;the&nbsp;structure.</span><br>
<span class="lineno"></span><span class="keyword" id="5109581">type</span>&nbsp;<span class="ident" id="5109586">encoderState</span>&nbsp;<span class="keyword" id="5109599">struct</span>&nbsp;<span class="op" id="5109606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109609">enc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5109618">*</span><span class="ident" id="5109619"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109628">b</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5109637">*</span><span class="ident" id="5109638"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109649">sendZero</span>&nbsp;<span class="builtintype" id="5109658">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5109679">//&nbsp;encoding&nbsp;an&nbsp;array&nbsp;element&nbsp;or&nbsp;map&nbsp;key/value&nbsp;pair;&nbsp;send&nbsp;zero&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109749">fieldnum</span>&nbsp;<span class="builtintype" id="5109758">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5109779">//&nbsp;the&nbsp;last&nbsp;field&nbsp;number&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109814">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5109823">[</span><span class="num" id="5109824">1</span>&nbsp;<span class="op" id="5109826">+</span>&nbsp;<span class="ident" id="5109828"><a href="/encoding/gob/encode.go.html#5109257">uint64Size</a></span><span class="op" id="5109838">]</span><span class="builtintype" id="5109839">byte</span>&nbsp;<span class="comment" id="5109844">//&nbsp;buffer&nbsp;used&nbsp;by&nbsp;the&nbsp;encoder;&nbsp;here&nbsp;to&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5109902">next</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5109911">*</span><span class="ident" id="5109912"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5109932">//&nbsp;for&nbsp;free&nbsp;list</span><br>
<span class="lineno">30</span><span class="op" id="5109949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5109952">//&nbsp;encBuffer&nbsp;is&nbsp;an&nbsp;extremely&nbsp;simple,&nbsp;fast&nbsp;implementation&nbsp;of&nbsp;a&nbsp;write-only&nbsp;byte&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5110038">//&nbsp;It&nbsp;never&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error,&nbsp;but&nbsp;Write&nbsp;returns&nbsp;an&nbsp;error&nbsp;value&nbsp;so&nbsp;it&nbsp;matches&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5110133">type</span>&nbsp;<span class="ident" id="5110138">encBuffer</span>&nbsp;<span class="keyword" id="5110148">struct</span>&nbsp;<span class="op" id="5110155">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110158">data</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5110166">[</span><span class="op" id="5110167">]</span><span class="builtintype" id="5110168">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110174">scratch</span>&nbsp;<span class="op" id="5110182">[</span><span class="num" id="5110183">64</span><span class="op" id="5110185">]</span><span class="builtintype" id="5110186">byte</span><br>
<span class="lineno"></span><span class="op" id="5110191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5110194">func</span>&nbsp;<span class="op" id="5110199">(</span><span class="ident" id="5110200">e</span>&nbsp;<span class="op" id="5110202">*</span><span class="ident" id="5110203"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110212">)</span>&nbsp;<span class="ident" id="5110214">WriteByte</span><span class="op" id="5110223">(</span><span class="ident" id="5110224">c</span>&nbsp;<span class="builtintype" id="5110226">byte</span><span class="op" id="5110230">)</span>&nbsp;<span class="op" id="5110232">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110235"><a href="/encoding/gob/encode.go.html#5110200">e</a></span><span class="op" id="5110236">.</span><span class="ident" id="5110237">data</span>&nbsp;<span class="op" id="5110242">=</span>&nbsp;<span class="builtinfunc" id="5110244">append</span><span class="op" id="5110250">(</span><span class="ident" id="5110251"><a href="/encoding/gob/encode.go.html#5110200">e</a></span><span class="op" id="5110252">.</span><span class="ident" id="5110253">data</span><span class="op" id="5110257">,</span>&nbsp;<span class="ident" id="5110259"><a href="/encoding/gob/encode.go.html#5110224">c</a></span><span class="op" id="5110260">)</span><br>
<span class="lineno"></span><span class="op" id="5110262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5110265">func</span>&nbsp;<span class="op" id="5110270">(</span><span class="ident" id="5110271">e</span>&nbsp;<span class="op" id="5110273">*</span><span class="ident" id="5110274"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110283">)</span>&nbsp;<span class="ident" id="5110285">Write</span><span class="op" id="5110290">(</span><span class="ident" id="5110291">p</span>&nbsp;<span class="op" id="5110293">[</span><span class="op" id="5110294">]</span><span class="builtintype" id="5110295">byte</span><span class="op" id="5110299">)</span>&nbsp;<span class="op" id="5110301">(</span><span class="builtintype" id="5110302">int</span><span class="op" id="5110305">,</span>&nbsp;<span class="builtintype" id="5110307">error</span><span class="op" id="5110312">)</span>&nbsp;<span class="op" id="5110314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110317"><a href="/encoding/gob/encode.go.html#5110271">e</a></span><span class="op" id="5110318">.</span><span class="ident" id="5110319">data</span>&nbsp;<span class="op" id="5110324">=</span>&nbsp;<span class="builtinfunc" id="5110326">append</span><span class="op" id="5110332">(</span><span class="ident" id="5110333"><a href="/encoding/gob/encode.go.html#5110271">e</a></span><span class="op" id="5110334">.</span><span class="ident" id="5110335">data</span><span class="op" id="5110339">,</span>&nbsp;<span class="ident" id="5110341"><a href="/encoding/gob/encode.go.html#5110291">p</a></span><span class="op" id="5110342">...</span><span class="op" id="5110345">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110348">return</span>&nbsp;<span class="builtinfunc" id="5110355">len</span><span class="op" id="5110358">(</span><span class="ident" id="5110359"><a href="/encoding/gob/encode.go.html#5110291">p</a></span><span class="op" id="5110360">)</span><span class="op" id="5110361">,</span>&nbsp;<span class="ident" id="5110363">nil</span><br>
<span class="lineno"></span><span class="op" id="5110367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5110370">func</span>&nbsp;<span class="op" id="5110375">(</span><span class="ident" id="5110376">e</span>&nbsp;<span class="op" id="5110378">*</span><span class="ident" id="5110379"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110388">)</span>&nbsp;<span class="ident" id="5110390">WriteString</span><span class="op" id="5110401">(</span><span class="ident" id="5110402">s</span>&nbsp;<span class="builtintype" id="5110404">string</span><span class="op" id="5110410">)</span>&nbsp;<span class="op" id="5110412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110415"><a href="/encoding/gob/encode.go.html#5110376">e</a></span><span class="op" id="5110416">.</span><span class="ident" id="5110417">data</span>&nbsp;<span class="op" id="5110422">=</span>&nbsp;<span class="builtinfunc" id="5110424">append</span><span class="op" id="5110430">(</span><span class="ident" id="5110431"><a href="/encoding/gob/encode.go.html#5110376">e</a></span><span class="op" id="5110432">.</span><span class="ident" id="5110433">data</span><span class="op" id="5110437">,</span>&nbsp;<span class="ident" id="5110439"><a href="/encoding/gob/encode.go.html#5110402">s</a></span><span class="op" id="5110440">...</span><span class="op" id="5110443">)</span><br>
<span class="lineno">50</span><span class="op" id="5110445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5110448">func</span>&nbsp;<span class="op" id="5110453">(</span><span class="ident" id="5110454">e</span>&nbsp;<span class="op" id="5110456">*</span><span class="ident" id="5110457"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110466">)</span>&nbsp;<span class="ident" id="5110468">Len</span><span class="op" id="5110471">(</span><span class="op" id="5110472">)</span>&nbsp;<span class="builtintype" id="5110474">int</span>&nbsp;<span class="op" id="5110478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110481">return</span>&nbsp;<span class="builtinfunc" id="5110488">len</span><span class="op" id="5110491">(</span><span class="ident" id="5110492"><a href="/encoding/gob/encode.go.html#5110454">e</a></span><span class="op" id="5110493">.</span><span class="ident" id="5110494">data</span><span class="op" id="5110498">)</span><br>
<span class="lineno"></span><span class="op" id="5110500">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5110503">func</span>&nbsp;<span class="op" id="5110508">(</span><span class="ident" id="5110509">e</span>&nbsp;<span class="op" id="5110511">*</span><span class="ident" id="5110512"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110521">)</span>&nbsp;<span class="ident" id="5110523">Bytes</span><span class="op" id="5110528">(</span><span class="op" id="5110529">)</span>&nbsp;<span class="op" id="5110531">[</span><span class="op" id="5110532">]</span><span class="builtintype" id="5110533">byte</span>&nbsp;<span class="op" id="5110538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110541">return</span>&nbsp;<span class="ident" id="5110548"><a href="/encoding/gob/encode.go.html#5110509">e</a></span><span class="op" id="5110549">.</span><span class="ident" id="5110550">data</span><br>
<span class="lineno"></span><span class="op" id="5110555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5110558">func</span>&nbsp;<span class="op" id="5110563">(</span><span class="ident" id="5110564">e</span>&nbsp;<span class="op" id="5110566">*</span><span class="ident" id="5110567"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110576">)</span>&nbsp;<span class="ident" id="5110578">Reset</span><span class="op" id="5110583">(</span><span class="op" id="5110584">)</span>&nbsp;<span class="op" id="5110586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110589"><a href="/encoding/gob/encode.go.html#5110564">e</a></span><span class="op" id="5110590">.</span><span class="ident" id="5110591">data</span>&nbsp;<span class="op" id="5110596">=</span>&nbsp;<span class="ident" id="5110598"><a href="/encoding/gob/encode.go.html#5110564">e</a></span><span class="op" id="5110599">.</span><span class="ident" id="5110600">data</span><span class="op" id="5110604">[</span><span class="num" id="5110605">0</span><span class="op" id="5110606">:</span><span class="num" id="5110607">0</span><span class="op" id="5110608">]</span><br>
<span class="lineno"></span><span class="op" id="5110610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5110613">func</span>&nbsp;<span class="op" id="5110618">(</span><span class="ident" id="5110619">enc</span>&nbsp;<span class="op" id="5110623">*</span><span class="ident" id="5110624"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5110631">)</span>&nbsp;<span class="ident" id="5110633">newEncoderState</span><span class="op" id="5110648">(</span><span class="ident" id="5110649">b</span>&nbsp;<span class="op" id="5110651">*</span><span class="ident" id="5110652"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5110661">)</span>&nbsp;<span class="op" id="5110663">*</span><span class="ident" id="5110664"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span>&nbsp;<span class="op" id="5110677">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110680">e</span>&nbsp;<span class="op" id="5110682">:=</span>&nbsp;<span class="ident" id="5110685"><a href="/encoding/gob/encode.go.html#5110619">enc</a></span><span class="op" id="5110688">.</span><span class="ident" id="5110689">freeList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110699">if</span>&nbsp;<span class="ident" id="5110702"><a href="/encoding/gob/encode.go.html#5110680">e</a></span>&nbsp;<span class="op" id="5110704">==</span>&nbsp;<span class="ident" id="5110707">nil</span>&nbsp;<span class="op" id="5110711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110715"><a href="/encoding/gob/encode.go.html#5110680">e</a></span>&nbsp;<span class="op" id="5110717">=</span>&nbsp;<span class="builtinfunc" id="5110719">new</span><span class="op" id="5110722">(</span><span class="ident" id="5110723"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5110735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110739"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><span class="op" id="5110740">.</span><span class="ident" id="5110741">enc</span>&nbsp;<span class="op" id="5110745">=</span>&nbsp;<span class="ident" id="5110747"><a href="/encoding/gob/encode.go.html#5110619">enc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5110752">}</span>&nbsp;<span class="keyword" id="5110754">else</span>&nbsp;<span class="op" id="5110759">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110763"><a href="/encoding/gob/encode.go.html#5110619">enc</a></span><span class="op" id="5110766">.</span><span class="ident" id="5110767">freeList</span>&nbsp;<span class="op" id="5110776">=</span>&nbsp;<span class="ident" id="5110778"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><span class="op" id="5110779">.</span><span class="ident" id="5110780">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5110786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110789"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><span class="op" id="5110790">.</span><span class="ident" id="5110791">sendZero</span>&nbsp;<span class="op" id="5110800">=</span>&nbsp;<span class="ident" id="5110802">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110809"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><span class="op" id="5110810">.</span><span class="ident" id="5110811">fieldnum</span>&nbsp;<span class="op" id="5110820">=</span>&nbsp;<span class="num" id="5110822">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110825"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><span class="op" id="5110826">.</span><span class="ident" id="5110827">b</span>&nbsp;<span class="op" id="5110829">=</span>&nbsp;<span class="ident" id="5110831"><a href="/encoding/gob/encode.go.html#5110649">b</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110834">if</span>&nbsp;<span class="builtinfunc" id="5110837">len</span><span class="op" id="5110840">(</span><span class="ident" id="5110841"><a href="/encoding/gob/encode.go.html#5110649">b</a></span><span class="op" id="5110842">.</span><span class="ident" id="5110843">data</span><span class="op" id="5110847">)</span>&nbsp;<span class="op" id="5110849">==</span>&nbsp;<span class="num" id="5110852">0</span>&nbsp;<span class="op" id="5110854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110858"><a href="/encoding/gob/encode.go.html#5110649">b</a></span><span class="op" id="5110859">.</span><span class="ident" id="5110860">data</span>&nbsp;<span class="op" id="5110865">=</span>&nbsp;<span class="ident" id="5110867"><a href="/encoding/gob/encode.go.html#5110649">b</a></span><span class="op" id="5110868">.</span><span class="ident" id="5110869">scratch</span><span class="op" id="5110876">[</span><span class="num" id="5110877">0</span><span class="op" id="5110878">:</span><span class="num" id="5110879">0</span><span class="op" id="5110880">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5110883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5110886">return</span>&nbsp;<span class="ident" id="5110893"><a href="/encoding/gob/encode.go.html#5110680">e</a></span><br>
<span class="lineno"></span><span class="op" id="5110895">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="5110898">func</span>&nbsp;<span class="op" id="5110903">(</span><span class="ident" id="5110904">enc</span>&nbsp;<span class="op" id="5110908">*</span><span class="ident" id="5110909"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5110916">)</span>&nbsp;<span class="ident" id="5110918">freeEncoderState</span><span class="op" id="5110934">(</span><span class="ident" id="5110935">e</span>&nbsp;<span class="op" id="5110937">*</span><span class="ident" id="5110938"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5110950">)</span>&nbsp;<span class="op" id="5110952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110955"><a href="/encoding/gob/encode.go.html#5110935">e</a></span><span class="op" id="5110956">.</span><span class="ident" id="5110957">next</span>&nbsp;<span class="op" id="5110962">=</span>&nbsp;<span class="ident" id="5110964"><a href="/encoding/gob/encode.go.html#5110904">enc</a></span><span class="op" id="5110967">.</span><span class="ident" id="5110968">freeList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5110978"><a href="/encoding/gob/encode.go.html#5110904">enc</a></span><span class="op" id="5110981">.</span><span class="ident" id="5110982">freeList</span>&nbsp;<span class="op" id="5110991">=</span>&nbsp;<span class="ident" id="5110993"><a href="/encoding/gob/encode.go.html#5110935">e</a></span><br>
<span class="lineno"></span><span class="op" id="5110995">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="5110998">//&nbsp;Unsigned&nbsp;integers&nbsp;have&nbsp;a&nbsp;two-state&nbsp;encoding.&nbsp;&nbsp;If&nbsp;the&nbsp;number&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="5111069">//&nbsp;than&nbsp;128&nbsp;(0&nbsp;through&nbsp;0x7F),&nbsp;its&nbsp;value&nbsp;is&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span><span class="comment" id="5111130">//&nbsp;Otherwise&nbsp;the&nbsp;value&nbsp;is&nbsp;written&nbsp;in&nbsp;big-endian&nbsp;byte&nbsp;order&nbsp;preceded</span><br>
<span class="lineno"></span><span class="comment" id="5111198">//&nbsp;by&nbsp;the&nbsp;byte&nbsp;length,&nbsp;negated.</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5111231">//&nbsp;encodeUint&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;unsigned&nbsp;integer&nbsp;to&nbsp;state.b.</span><br>
<span class="lineno"></span><span class="keyword" id="5111292">func</span>&nbsp;<span class="op" id="5111297">(</span><span class="ident" id="5111298">state</span>&nbsp;<span class="op" id="5111304">*</span><span class="ident" id="5111305"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5111317">)</span>&nbsp;<span class="ident" id="5111319">encodeUint</span><span class="op" id="5111329">(</span><span class="ident" id="5111330">x</span>&nbsp;<span class="ident" id="5111332">uint64</span><span class="op" id="5111338">)</span>&nbsp;<span class="op" id="5111340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5111343">if</span>&nbsp;<span class="ident" id="5111346"><a href="/encoding/gob/encode.go.html#5111330">x</a></span>&nbsp;<span class="op" id="5111348">&lt;=</span>&nbsp;<span class="num" id="5111351">0x7F</span>&nbsp;<span class="op" id="5111356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111360"><a href="/encoding/gob/encode.go.html#5111298">state</a></span><span class="op" id="5111365">.</span><span class="ident" id="5111366">b</span><span class="op" id="5111367">.</span><span class="ident" id="5111368">WriteByte</span><span class="op" id="5111377">(</span><span class="builtintype" id="5111378">uint8</span><span class="op" id="5111383">(</span><span class="ident" id="5111384"><a href="/encoding/gob/encode.go.html#5111330">x</a></span><span class="op" id="5111385">)</span><span class="op" id="5111386">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5111390">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5111398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111401">i</span>&nbsp;<span class="op" id="5111403">:=</span>&nbsp;<span class="ident" id="5111406"><a href="/encoding/gob/encode.go.html#5109257">uint64Size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5111418">for</span>&nbsp;<span class="ident" id="5111422"><a href="/encoding/gob/encode.go.html#5111330">x</a></span>&nbsp;<span class="op" id="5111424">&gt;</span>&nbsp;<span class="num" id="5111426">0</span>&nbsp;<span class="op" id="5111428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111432"><a href="/encoding/gob/encode.go.html#5111298">state</a></span><span class="op" id="5111437">.</span><span class="ident" id="5111438">buf</span><span class="op" id="5111441">[</span><span class="ident" id="5111442"><a href="/encoding/gob/encode.go.html#5111401">i</a></span><span class="op" id="5111443">]</span>&nbsp;<span class="op" id="5111445">=</span>&nbsp;<span class="builtintype" id="5111447">uint8</span><span class="op" id="5111452">(</span><span class="ident" id="5111453"><a href="/encoding/gob/encode.go.html#5111330">x</a></span><span class="op" id="5111454">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111458"><a href="/encoding/gob/encode.go.html#5111330">x</a></span>&nbsp;<span class="op" id="5111460">&gt;&gt;=</span>&nbsp;<span class="num" id="5111464">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111468"><a href="/encoding/gob/encode.go.html#5111401">i</a></span><span class="op" id="5111469">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5111473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111476"><a href="/encoding/gob/encode.go.html#5111298">state</a></span><span class="op" id="5111481">.</span><span class="ident" id="5111482">buf</span><span class="op" id="5111485">[</span><span class="ident" id="5111486"><a href="/encoding/gob/encode.go.html#5111401">i</a></span><span class="op" id="5111487">]</span>&nbsp;<span class="op" id="5111489">=</span>&nbsp;<span class="builtintype" id="5111491">uint8</span><span class="op" id="5111496">(</span><span class="ident" id="5111497"><a href="/encoding/gob/encode.go.html#5111401">i</a></span>&nbsp;<span class="op" id="5111499">-</span>&nbsp;<span class="ident" id="5111501"><a href="/encoding/gob/encode.go.html#5109257">uint64Size</a></span><span class="op" id="5111511">)</span>&nbsp;<span class="comment" id="5111513">//&nbsp;=&nbsp;loop&nbsp;count,&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111539"><a href="/encoding/gob/encode.go.html#5111298">state</a></span><span class="op" id="5111544">.</span><span class="ident" id="5111545">b</span><span class="op" id="5111546">.</span><span class="ident" id="5111547">Write</span><span class="op" id="5111552">(</span><span class="ident" id="5111553"><a href="/encoding/gob/encode.go.html#5111298">state</a></span><span class="op" id="5111558">.</span><span class="ident" id="5111559">buf</span><span class="op" id="5111562">[</span><span class="ident" id="5111563"><a href="/encoding/gob/encode.go.html#5111401">i</a></span>&nbsp;<span class="op" id="5111565">:</span>&nbsp;<span class="ident" id="5111567"><a href="/encoding/gob/encode.go.html#5109257">uint64Size</a></span><span class="op" id="5111577">+</span><span class="num" id="5111578">1</span><span class="op" id="5111579">]</span><span class="op" id="5111580">)</span><br>
<span class="lineno">105</span><span class="op" id="5111582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5111585">//&nbsp;encodeInt&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;signed&nbsp;integer&nbsp;to&nbsp;state.w.</span><br>
<span class="lineno"></span><span class="comment" id="5111643">//&nbsp;The&nbsp;low&nbsp;bit&nbsp;of&nbsp;the&nbsp;encoding&nbsp;says&nbsp;whether&nbsp;to&nbsp;bit&nbsp;complement&nbsp;the&nbsp;(other&nbsp;bits&nbsp;of&nbsp;the)</span><br>
<span class="lineno"></span><span class="comment" id="5111729">//&nbsp;uint&nbsp;to&nbsp;recover&nbsp;the&nbsp;int.</span><br>
<span class="lineno">110</span><span class="keyword" id="5111757">func</span>&nbsp;<span class="op" id="5111762">(</span><span class="ident" id="5111763">state</span>&nbsp;<span class="op" id="5111769">*</span><span class="ident" id="5111770"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5111782">)</span>&nbsp;<span class="ident" id="5111784">encodeInt</span><span class="op" id="5111793">(</span><span class="ident" id="5111794">i</span>&nbsp;<span class="ident" id="5111796">int64</span><span class="op" id="5111801">)</span>&nbsp;<span class="op" id="5111803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5111806">var</span>&nbsp;<span class="ident" id="5111810">x</span>&nbsp;<span class="ident" id="5111812">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5111820">if</span>&nbsp;<span class="ident" id="5111823"><a href="/encoding/gob/encode.go.html#5111794">i</a></span>&nbsp;<span class="op" id="5111825">&lt;</span>&nbsp;<span class="num" id="5111827">0</span>&nbsp;<span class="op" id="5111829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111833"><a href="/encoding/gob/encode.go.html#5111810">x</a></span>&nbsp;<span class="op" id="5111835">=</span>&nbsp;<span class="ident" id="5111837">uint64</span><span class="op" id="5111843">(</span><span class="op" id="5111844">^</span><span class="ident" id="5111845"><a href="/encoding/gob/encode.go.html#5111794">i</a></span><span class="op" id="5111846">&lt;&lt;</span><span class="num" id="5111848">1</span><span class="op" id="5111849">)</span>&nbsp;<span class="op" id="5111851">|</span>&nbsp;<span class="num" id="5111853">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5111856">}</span>&nbsp;<span class="keyword" id="5111858">else</span>&nbsp;<span class="op" id="5111863">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111867"><a href="/encoding/gob/encode.go.html#5111810">x</a></span>&nbsp;<span class="op" id="5111869">=</span>&nbsp;<span class="ident" id="5111871">uint64</span><span class="op" id="5111877">(</span><span class="ident" id="5111878"><a href="/encoding/gob/encode.go.html#5111794">i</a></span>&nbsp;<span class="op" id="5111880">&lt;&lt;</span>&nbsp;<span class="num" id="5111883">1</span><span class="op" id="5111884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5111887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5111890"><a href="/encoding/gob/encode.go.html#5111763">state</a></span><span class="op" id="5111895">.</span><span class="ident" id="5111896">encodeUint</span><span class="op" id="5111906">(</span><span class="ident" id="5111907">uint64</span><span class="op" id="5111913">(</span><span class="ident" id="5111914"><a href="/encoding/gob/encode.go.html#5111810">x</a></span><span class="op" id="5111915">)</span><span class="op" id="5111916">)</span><br>
<span class="lineno"></span><span class="op" id="5111918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5111921">//&nbsp;encOp&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;an&nbsp;encoding&nbsp;operator&nbsp;for&nbsp;a&nbsp;given&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5111989">type</span>&nbsp;<span class="ident" id="5111994">encOp</span>&nbsp;<span class="keyword" id="5112000">func</span><span class="op" id="5112004">(</span><span class="ident" id="5112005">i</span>&nbsp;<span class="op" id="5112007">*</span><span class="ident" id="5112008"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5112016">,</span>&nbsp;<span class="ident" id="5112018">state</span>&nbsp;<span class="op" id="5112024">*</span><span class="ident" id="5112025"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5112037">,</span>&nbsp;<span class="ident" id="5112039">v</span>&nbsp;<span class="ident" id="5112041"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5112048">.</span><span class="ident" id="5112049">Value</span><span class="op" id="5112054">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5112057">//&nbsp;The&nbsp;&#39;instructions&#39;&nbsp;of&nbsp;the&nbsp;encoding&nbsp;machine</span><br>
<span class="lineno"></span><span class="keyword" id="5112103">type</span>&nbsp;<span class="ident" id="5112108">encInstr</span>&nbsp;<span class="keyword" id="5112117">struct</span>&nbsp;<span class="op" id="5112124">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112127">op</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5112133"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112140">field</span>&nbsp;<span class="builtintype" id="5112146">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5112152">//&nbsp;field&nbsp;number&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112178">index</span>&nbsp;<span class="op" id="5112184">[</span><span class="op" id="5112185">]</span><span class="builtintype" id="5112186">int</span>&nbsp;<span class="comment" id="5112190">//&nbsp;struct&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112207">indir</span>&nbsp;<span class="builtintype" id="5112213">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5112219">//&nbsp;how&nbsp;many&nbsp;pointer&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;struct</span><br>
<span class="lineno"></span><span class="op" id="5112285">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5112288">//&nbsp;update&nbsp;emits&nbsp;a&nbsp;field&nbsp;number&nbsp;and&nbsp;updates&nbsp;the&nbsp;state&nbsp;to&nbsp;record&nbsp;its&nbsp;value&nbsp;for&nbsp;delta&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="5112381">//&nbsp;If&nbsp;the&nbsp;instruction&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;it&nbsp;does&nbsp;nothing</span><br>
<span class="lineno"></span><span class="keyword" id="5112435">func</span>&nbsp;<span class="op" id="5112440">(</span><span class="ident" id="5112441">state</span>&nbsp;<span class="op" id="5112447">*</span><span class="ident" id="5112448"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5112460">)</span>&nbsp;<span class="ident" id="5112462">update</span><span class="op" id="5112468">(</span><span class="ident" id="5112469">instr</span>&nbsp;<span class="op" id="5112475">*</span><span class="ident" id="5112476"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5112484">)</span>&nbsp;<span class="op" id="5112486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5112489">if</span>&nbsp;<span class="ident" id="5112492"><a href="/encoding/gob/encode.go.html#5112469">instr</a></span>&nbsp;<span class="op" id="5112498">!=</span>&nbsp;<span class="ident" id="5112501">nil</span>&nbsp;<span class="op" id="5112505">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112509"><a href="/encoding/gob/encode.go.html#5112441">state</a></span><span class="op" id="5112514">.</span><span class="ident" id="5112515">encodeUint</span><span class="op" id="5112525">(</span><span class="ident" id="5112526">uint64</span><span class="op" id="5112532">(</span><span class="ident" id="5112533"><a href="/encoding/gob/encode.go.html#5112469">instr</a></span><span class="op" id="5112538">.</span><span class="ident" id="5112539">field</span>&nbsp;<span class="op" id="5112545">-</span>&nbsp;<span class="ident" id="5112547"><a href="/encoding/gob/encode.go.html#5112441">state</a></span><span class="op" id="5112552">.</span><span class="ident" id="5112553">fieldnum</span><span class="op" id="5112561">)</span><span class="op" id="5112562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5112566"><a href="/encoding/gob/encode.go.html#5112441">state</a></span><span class="op" id="5112571">.</span><span class="ident" id="5112572">fieldnum</span>&nbsp;<span class="op" id="5112581">=</span>&nbsp;<span class="ident" id="5112583"><a href="/encoding/gob/encode.go.html#5112469">instr</a></span><span class="op" id="5112588">.</span><span class="ident" id="5112589">field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5112596">}</span><br>
<span class="lineno"></span><span class="op" id="5112598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="5112601">//&nbsp;Each&nbsp;encoder&nbsp;for&nbsp;a&nbsp;composite&nbsp;is&nbsp;responsible&nbsp;for&nbsp;handling&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5112665">//&nbsp;indirections&nbsp;associated&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="5112733">//&nbsp;If&nbsp;any&nbsp;pointer&nbsp;so&nbsp;reached&nbsp;is&nbsp;nil,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5112800">//&nbsp;data&nbsp;item&nbsp;is&nbsp;zero,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;Single&nbsp;values&nbsp;-&nbsp;ints,</span><br>
<span class="lineno"></span><span class="comment" id="5112867">//&nbsp;strings&nbsp;etc.&nbsp;-&nbsp;are&nbsp;indirected&nbsp;before&nbsp;calling&nbsp;their&nbsp;encoders.</span><br>
<span class="lineno">145</span><span class="comment" id="5112931">//&nbsp;Otherwise,&nbsp;the&nbsp;output&nbsp;(for&nbsp;a&nbsp;scalar)&nbsp;is&nbsp;the&nbsp;field&nbsp;number,&nbsp;as&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5112998">//&nbsp;encoded&nbsp;integer,&nbsp;followed&nbsp;by&nbsp;the&nbsp;field&nbsp;data&nbsp;in&nbsp;its&nbsp;appropriate</span><br>
<span class="lineno"></span><span class="comment" id="5113064">//&nbsp;format.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5113076">//&nbsp;encIndirect&nbsp;dereferences&nbsp;pv&nbsp;indir&nbsp;times&nbsp;and&nbsp;returns&nbsp;the&nbsp;result.</span><br>
<span class="lineno">150</span><span class="keyword" id="5113143">func</span>&nbsp;<span class="ident" id="5113148">encIndirect</span><span class="op" id="5113159">(</span><span class="ident" id="5113160">pv</span>&nbsp;<span class="ident" id="5113163"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5113170">.</span><span class="ident" id="5113171">Value</span><span class="op" id="5113176">,</span>&nbsp;<span class="ident" id="5113178">indir</span>&nbsp;<span class="builtintype" id="5113184">int</span><span class="op" id="5113187">)</span>&nbsp;<span class="ident" id="5113189"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5113196">.</span><span class="ident" id="5113197">Value</span>&nbsp;<span class="op" id="5113203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113206">for</span>&nbsp;<span class="op" id="5113210">;</span>&nbsp;<span class="ident" id="5113212"><a href="/encoding/gob/encode.go.html#5113178">indir</a></span>&nbsp;<span class="op" id="5113218">&gt;</span>&nbsp;<span class="num" id="5113220">0</span><span class="op" id="5113221">;</span>&nbsp;<span class="ident" id="5113223"><a href="/encoding/gob/encode.go.html#5113178">indir</a></span><span class="op" id="5113228">--</span>&nbsp;<span class="op" id="5113231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113235">if</span>&nbsp;<span class="ident" id="5113238"><a href="/encoding/gob/encode.go.html#5113160">pv</a></span><span class="op" id="5113240">.</span><span class="ident" id="5113241">IsNil</span><span class="op" id="5113246">(</span><span class="op" id="5113247">)</span>&nbsp;<span class="op" id="5113249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113254">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113262">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113266"><a href="/encoding/gob/encode.go.html#5113160">pv</a></span>&nbsp;<span class="op" id="5113269">=</span>&nbsp;<span class="ident" id="5113271"><a href="/encoding/gob/encode.go.html#5113160">pv</a></span><span class="op" id="5113273">.</span><span class="ident" id="5113274">Elem</span><span class="op" id="5113278">(</span><span class="op" id="5113279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113285">return</span>&nbsp;<span class="ident" id="5113292"><a href="/encoding/gob/encode.go.html#5113160">pv</a></span><br>
<span class="lineno"></span><span class="op" id="5113295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5113298">//&nbsp;encBool&nbsp;encodes&nbsp;the&nbsp;bool&nbsp;referenced&nbsp;by&nbsp;v&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;0&nbsp;or&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="5113365">func</span>&nbsp;<span class="ident" id="5113370">encBool</span><span class="op" id="5113377">(</span><span class="ident" id="5113378">i</span>&nbsp;<span class="op" id="5113380">*</span><span class="ident" id="5113381"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5113389">,</span>&nbsp;<span class="ident" id="5113391">state</span>&nbsp;<span class="op" id="5113397">*</span><span class="ident" id="5113398"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5113410">,</span>&nbsp;<span class="ident" id="5113412">v</span>&nbsp;<span class="ident" id="5113414"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5113421">.</span><span class="ident" id="5113422">Value</span><span class="op" id="5113427">)</span>&nbsp;<span class="op" id="5113429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113432">b</span>&nbsp;<span class="op" id="5113434">:=</span>&nbsp;<span class="ident" id="5113437"><a href="/encoding/gob/encode.go.html#5113412">v</a></span><span class="op" id="5113438">.</span><span class="ident" id="5113439">Bool</span><span class="op" id="5113443">(</span><span class="op" id="5113444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113447">if</span>&nbsp;<span class="ident" id="5113450"><a href="/encoding/gob/encode.go.html#5113432">b</a></span>&nbsp;<span class="op" id="5113452">||</span>&nbsp;<span class="ident" id="5113455"><a href="/encoding/gob/encode.go.html#5113391">state</a></span><span class="op" id="5113460">.</span><span class="ident" id="5113461">sendZero</span>&nbsp;<span class="op" id="5113470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113474"><a href="/encoding/gob/encode.go.html#5113391">state</a></span><span class="op" id="5113479">.</span><span class="ident" id="5113480">update</span><span class="op" id="5113486">(</span><span class="ident" id="5113487"><a href="/encoding/gob/encode.go.html#5113378">i</a></span><span class="op" id="5113488">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113492">if</span>&nbsp;<span class="ident" id="5113495"><a href="/encoding/gob/encode.go.html#5113432">b</a></span>&nbsp;<span class="op" id="5113497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113502"><a href="/encoding/gob/encode.go.html#5113391">state</a></span><span class="op" id="5113507">.</span><span class="ident" id="5113508">encodeUint</span><span class="op" id="5113518">(</span><span class="num" id="5113519">1</span><span class="op" id="5113520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113524">}</span>&nbsp;<span class="keyword" id="5113526">else</span>&nbsp;<span class="op" id="5113531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113536"><a href="/encoding/gob/encode.go.html#5113391">state</a></span><span class="op" id="5113541">.</span><span class="ident" id="5113542">encodeUint</span><span class="op" id="5113552">(</span><span class="num" id="5113553">0</span><span class="op" id="5113554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113558">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113561">}</span><br>
<span class="lineno"></span><span class="op" id="5113563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5113566">//&nbsp;encInt&nbsp;encodes&nbsp;the&nbsp;signed&nbsp;integer&nbsp;(int&nbsp;int8&nbsp;int16&nbsp;int32&nbsp;int64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5113649">func</span>&nbsp;<span class="ident" id="5113654">encInt</span><span class="op" id="5113660">(</span><span class="ident" id="5113661">i</span>&nbsp;<span class="op" id="5113663">*</span><span class="ident" id="5113664"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5113672">,</span>&nbsp;<span class="ident" id="5113674">state</span>&nbsp;<span class="op" id="5113680">*</span><span class="ident" id="5113681"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5113693">,</span>&nbsp;<span class="ident" id="5113695">v</span>&nbsp;<span class="ident" id="5113697"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5113704">.</span><span class="ident" id="5113705">Value</span><span class="op" id="5113710">)</span>&nbsp;<span class="op" id="5113712">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113715">value</span>&nbsp;<span class="op" id="5113721">:=</span>&nbsp;<span class="ident" id="5113724"><a href="/encoding/gob/encode.go.html#5113695">v</a></span><span class="op" id="5113725">.</span><span class="ident" id="5113726">Int</span><span class="op" id="5113729">(</span><span class="op" id="5113730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5113733">if</span>&nbsp;<span class="ident" id="5113736"><a href="/encoding/gob/encode.go.html#5113715">value</a></span>&nbsp;<span class="op" id="5113742">!=</span>&nbsp;<span class="num" id="5113745">0</span>&nbsp;<span class="op" id="5113747">||</span>&nbsp;<span class="ident" id="5113750"><a href="/encoding/gob/encode.go.html#5113674">state</a></span><span class="op" id="5113755">.</span><span class="ident" id="5113756">sendZero</span>&nbsp;<span class="op" id="5113765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113769"><a href="/encoding/gob/encode.go.html#5113674">state</a></span><span class="op" id="5113774">.</span><span class="ident" id="5113775">update</span><span class="op" id="5113781">(</span><span class="ident" id="5113782"><a href="/encoding/gob/encode.go.html#5113661">i</a></span><span class="op" id="5113783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113787"><a href="/encoding/gob/encode.go.html#5113674">state</a></span><span class="op" id="5113792">.</span><span class="ident" id="5113793">encodeInt</span><span class="op" id="5113802">(</span><span class="ident" id="5113803"><a href="/encoding/gob/encode.go.html#5113715">value</a></span><span class="op" id="5113808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5113811">}</span><br>
<span class="lineno">180</span><span class="op" id="5113813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5113816">//&nbsp;encUint&nbsp;encodes&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;(uint&nbsp;uint8&nbsp;uint16&nbsp;uint32&nbsp;uint64&nbsp;uintptr)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5113915">func</span>&nbsp;<span class="ident" id="5113920">encUint</span><span class="op" id="5113927">(</span><span class="ident" id="5113928">i</span>&nbsp;<span class="op" id="5113930">*</span><span class="ident" id="5113931"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5113939">,</span>&nbsp;<span class="ident" id="5113941">state</span>&nbsp;<span class="op" id="5113947">*</span><span class="ident" id="5113948"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5113960">,</span>&nbsp;<span class="ident" id="5113962">v</span>&nbsp;<span class="ident" id="5113964"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5113971">.</span><span class="ident" id="5113972">Value</span><span class="op" id="5113977">)</span>&nbsp;<span class="op" id="5113979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113982">value</span>&nbsp;<span class="op" id="5113988">:=</span>&nbsp;<span class="ident" id="5113991"><a href="/encoding/gob/encode.go.html#5113962">v</a></span><span class="op" id="5113992">.</span><span class="ident" id="5113993">Uint</span><span class="op" id="5113997">(</span><span class="op" id="5113998">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114001">if</span>&nbsp;<span class="ident" id="5114004"><a href="/encoding/gob/encode.go.html#5113982">value</a></span>&nbsp;<span class="op" id="5114010">!=</span>&nbsp;<span class="num" id="5114013">0</span>&nbsp;<span class="op" id="5114015">||</span>&nbsp;<span class="ident" id="5114018"><a href="/encoding/gob/encode.go.html#5113941">state</a></span><span class="op" id="5114023">.</span><span class="ident" id="5114024">sendZero</span>&nbsp;<span class="op" id="5114033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114037"><a href="/encoding/gob/encode.go.html#5113941">state</a></span><span class="op" id="5114042">.</span><span class="ident" id="5114043">update</span><span class="op" id="5114049">(</span><span class="ident" id="5114050"><a href="/encoding/gob/encode.go.html#5113928">i</a></span><span class="op" id="5114051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114055"><a href="/encoding/gob/encode.go.html#5113941">state</a></span><span class="op" id="5114060">.</span><span class="ident" id="5114061">encodeUint</span><span class="op" id="5114071">(</span><span class="ident" id="5114072"><a href="/encoding/gob/encode.go.html#5113982">value</a></span><span class="op" id="5114077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5114080">}</span><br>
<span class="lineno"></span><span class="op" id="5114082">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5114085">//&nbsp;floatBits&nbsp;returns&nbsp;a&nbsp;uint64&nbsp;holding&nbsp;the&nbsp;bits&nbsp;of&nbsp;a&nbsp;floating-point&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="5114160">//&nbsp;Floating-point&nbsp;numbers&nbsp;are&nbsp;transmitted&nbsp;as&nbsp;uint64s&nbsp;holding&nbsp;the&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="5114230">//&nbsp;of&nbsp;the&nbsp;underlying&nbsp;representation.&nbsp;&nbsp;They&nbsp;are&nbsp;sent&nbsp;byte-reversed,&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5114302">//&nbsp;the&nbsp;exponent&nbsp;end&nbsp;coming&nbsp;out&nbsp;first,&nbsp;so&nbsp;integer&nbsp;floating&nbsp;point&nbsp;numbers</span><br>
<span class="lineno">195</span><span class="comment" id="5114374">//&nbsp;(for&nbsp;example)&nbsp;transmit&nbsp;more&nbsp;compactly.&nbsp;&nbsp;This&nbsp;routine&nbsp;does&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5114439">//&nbsp;swizzling.</span><br>
<span class="lineno"></span><span class="keyword" id="5114453">func</span>&nbsp;<span class="ident" id="5114458">floatBits</span><span class="op" id="5114467">(</span><span class="ident" id="5114468">f</span>&nbsp;<span class="builtintype" id="5114470">float64</span><span class="op" id="5114477">)</span>&nbsp;<span class="ident" id="5114479">uint64</span>&nbsp;<span class="op" id="5114486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114489">u</span>&nbsp;<span class="op" id="5114491">:=</span>&nbsp;<span class="ident" id="5114494"><a href="/encoding/gob/encode.go.html#5109230">math</a></span><span class="op" id="5114498">.</span><span class="ident" id="5114499">Float64bits</span><span class="op" id="5114510">(</span><span class="ident" id="5114511"><a href="/encoding/gob/encode.go.html#5114468">f</a></span><span class="op" id="5114512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114515">var</span>&nbsp;<span class="ident" id="5114519">v</span>&nbsp;<span class="ident" id="5114521">uint64</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114529">for</span>&nbsp;<span class="ident" id="5114533">i</span>&nbsp;<span class="op" id="5114535">:=</span>&nbsp;<span class="num" id="5114538">0</span><span class="op" id="5114539">;</span>&nbsp;<span class="ident" id="5114541"><a href="/encoding/gob/encode.go.html#5114533">i</a></span>&nbsp;<span class="op" id="5114543">&lt;</span>&nbsp;<span class="num" id="5114545">8</span><span class="op" id="5114546">;</span>&nbsp;<span class="ident" id="5114548"><a href="/encoding/gob/encode.go.html#5114533">i</a></span><span class="op" id="5114549">++</span>&nbsp;<span class="op" id="5114552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114556"><a href="/encoding/gob/encode.go.html#5114519">v</a></span>&nbsp;<span class="op" id="5114558">&lt;&lt;=</span>&nbsp;<span class="num" id="5114562">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114566"><a href="/encoding/gob/encode.go.html#5114519">v</a></span>&nbsp;<span class="op" id="5114568">|=</span>&nbsp;<span class="ident" id="5114571"><a href="/encoding/gob/encode.go.html#5114489">u</a></span>&nbsp;<span class="op" id="5114573">&amp;</span>&nbsp;<span class="num" id="5114575">0xFF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114582"><a href="/encoding/gob/encode.go.html#5114489">u</a></span>&nbsp;<span class="op" id="5114584">&gt;&gt;=</span>&nbsp;<span class="num" id="5114588">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5114591">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114594">return</span>&nbsp;<span class="ident" id="5114601"><a href="/encoding/gob/encode.go.html#5114519">v</a></span><br>
<span class="lineno"></span><span class="op" id="5114603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5114606">//&nbsp;encFloat&nbsp;encodes&nbsp;the&nbsp;floating&nbsp;point&nbsp;value&nbsp;(float32&nbsp;float64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5114686">func</span>&nbsp;<span class="ident" id="5114691">encFloat</span><span class="op" id="5114699">(</span><span class="ident" id="5114700">i</span>&nbsp;<span class="op" id="5114702">*</span><span class="ident" id="5114703"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5114711">,</span>&nbsp;<span class="ident" id="5114713">state</span>&nbsp;<span class="op" id="5114719">*</span><span class="ident" id="5114720"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5114732">,</span>&nbsp;<span class="ident" id="5114734">v</span>&nbsp;<span class="ident" id="5114736"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5114743">.</span><span class="ident" id="5114744">Value</span><span class="op" id="5114749">)</span>&nbsp;<span class="op" id="5114751">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114754">f</span>&nbsp;<span class="op" id="5114756">:=</span>&nbsp;<span class="ident" id="5114759"><a href="/encoding/gob/encode.go.html#5114734">v</a></span><span class="op" id="5114760">.</span><span class="ident" id="5114761">Float</span><span class="op" id="5114766">(</span><span class="op" id="5114767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114770">if</span>&nbsp;<span class="ident" id="5114773"><a href="/encoding/gob/encode.go.html#5114754">f</a></span>&nbsp;<span class="op" id="5114775">!=</span>&nbsp;<span class="num" id="5114778">0</span>&nbsp;<span class="op" id="5114780">||</span>&nbsp;<span class="ident" id="5114783"><a href="/encoding/gob/encode.go.html#5114713">state</a></span><span class="op" id="5114788">.</span><span class="ident" id="5114789">sendZero</span>&nbsp;<span class="op" id="5114798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114802">bits</span>&nbsp;<span class="op" id="5114807">:=</span>&nbsp;<span class="ident" id="5114810"><a href="/encoding/gob/encode.go.html#5114458">floatBits</a></span><span class="op" id="5114819">(</span><span class="ident" id="5114820"><a href="/encoding/gob/encode.go.html#5114754">f</a></span><span class="op" id="5114821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114825"><a href="/encoding/gob/encode.go.html#5114713">state</a></span><span class="op" id="5114830">.</span><span class="ident" id="5114831">update</span><span class="op" id="5114837">(</span><span class="ident" id="5114838"><a href="/encoding/gob/encode.go.html#5114700">i</a></span><span class="op" id="5114839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114843"><a href="/encoding/gob/encode.go.html#5114713">state</a></span><span class="op" id="5114848">.</span><span class="ident" id="5114849">encodeUint</span><span class="op" id="5114859">(</span><span class="ident" id="5114860"><a href="/encoding/gob/encode.go.html#5114802">bits</a></span><span class="op" id="5114864">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5114867">}</span><br>
<span class="lineno"></span><span class="op" id="5114869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5114872">//&nbsp;encComplex&nbsp;encodes&nbsp;the&nbsp;complex&nbsp;value&nbsp;(complex64&nbsp;complex128)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5114952">//&nbsp;Complex&nbsp;numbers&nbsp;are&nbsp;just&nbsp;a&nbsp;pair&nbsp;of&nbsp;floating-point&nbsp;numbers,&nbsp;real&nbsp;part&nbsp;first.</span><br>
<span class="lineno">220</span><span class="keyword" id="5115031">func</span>&nbsp;<span class="ident" id="5115036">encComplex</span><span class="op" id="5115046">(</span><span class="ident" id="5115047">i</span>&nbsp;<span class="op" id="5115049">*</span><span class="ident" id="5115050"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5115058">,</span>&nbsp;<span class="ident" id="5115060">state</span>&nbsp;<span class="op" id="5115066">*</span><span class="ident" id="5115067"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5115079">,</span>&nbsp;<span class="ident" id="5115081">v</span>&nbsp;<span class="ident" id="5115083"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5115090">.</span><span class="ident" id="5115091">Value</span><span class="op" id="5115096">)</span>&nbsp;<span class="op" id="5115098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115101">c</span>&nbsp;<span class="op" id="5115103">:=</span>&nbsp;<span class="ident" id="5115106"><a href="/encoding/gob/encode.go.html#5115081">v</a></span><span class="op" id="5115107">.</span><span class="ident" id="5115108">Complex</span><span class="op" id="5115115">(</span><span class="op" id="5115116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115119">if</span>&nbsp;<span class="ident" id="5115122"><a href="/encoding/gob/encode.go.html#5115101">c</a></span>&nbsp;<span class="op" id="5115124">!=</span>&nbsp;<span class="num" id="5115127">0</span><span class="op" id="5115128">+</span><span class="num" id="5115129">0i</span>&nbsp;<span class="op" id="5115132">||</span>&nbsp;<span class="ident" id="5115135"><a href="/encoding/gob/encode.go.html#5115060">state</a></span><span class="op" id="5115140">.</span><span class="ident" id="5115141">sendZero</span>&nbsp;<span class="op" id="5115150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115154">rpart</span>&nbsp;<span class="op" id="5115160">:=</span>&nbsp;<span class="ident" id="5115163"><a href="/encoding/gob/encode.go.html#5114458">floatBits</a></span><span class="op" id="5115172">(</span><span class="builtinfunc" id="5115173">real</span><span class="op" id="5115177">(</span><span class="ident" id="5115178"><a href="/encoding/gob/encode.go.html#5115101">c</a></span><span class="op" id="5115179">)</span><span class="op" id="5115180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115184">ipart</span>&nbsp;<span class="op" id="5115190">:=</span>&nbsp;<span class="ident" id="5115193"><a href="/encoding/gob/encode.go.html#5114458">floatBits</a></span><span class="op" id="5115202">(</span><span class="builtinfunc" id="5115203">imag</span><span class="op" id="5115207">(</span><span class="ident" id="5115208"><a href="/encoding/gob/encode.go.html#5115101">c</a></span><span class="op" id="5115209">)</span><span class="op" id="5115210">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115214"><a href="/encoding/gob/encode.go.html#5115060">state</a></span><span class="op" id="5115219">.</span><span class="ident" id="5115220">update</span><span class="op" id="5115226">(</span><span class="ident" id="5115227"><a href="/encoding/gob/encode.go.html#5115047">i</a></span><span class="op" id="5115228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115232"><a href="/encoding/gob/encode.go.html#5115060">state</a></span><span class="op" id="5115237">.</span><span class="ident" id="5115238">encodeUint</span><span class="op" id="5115248">(</span><span class="ident" id="5115249"><a href="/encoding/gob/encode.go.html#5115154">rpart</a></span><span class="op" id="5115254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115258"><a href="/encoding/gob/encode.go.html#5115060">state</a></span><span class="op" id="5115263">.</span><span class="ident" id="5115264">encodeUint</span><span class="op" id="5115274">(</span><span class="ident" id="5115275"><a href="/encoding/gob/encode.go.html#5115184">ipart</a></span><span class="op" id="5115280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115283">}</span><br>
<span class="lineno"></span><span class="op" id="5115285">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="5115288">//&nbsp;encUint8Array&nbsp;encodes&nbsp;the&nbsp;byte&nbsp;array&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5115345">//&nbsp;Byte&nbsp;arrays&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5115420">func</span>&nbsp;<span class="ident" id="5115425">encUint8Array</span><span class="op" id="5115438">(</span><span class="ident" id="5115439">i</span>&nbsp;<span class="op" id="5115441">*</span><span class="ident" id="5115442"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5115450">,</span>&nbsp;<span class="ident" id="5115452">state</span>&nbsp;<span class="op" id="5115458">*</span><span class="ident" id="5115459"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5115471">,</span>&nbsp;<span class="ident" id="5115473">v</span>&nbsp;<span class="ident" id="5115475"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5115482">.</span><span class="ident" id="5115483">Value</span><span class="op" id="5115488">)</span>&nbsp;<span class="op" id="5115490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115493">b</span>&nbsp;<span class="op" id="5115495">:=</span>&nbsp;<span class="ident" id="5115498"><a href="/encoding/gob/encode.go.html#5115473">v</a></span><span class="op" id="5115499">.</span><span class="ident" id="5115500">Bytes</span><span class="op" id="5115505">(</span><span class="op" id="5115506">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115509">if</span>&nbsp;<span class="builtinfunc" id="5115512">len</span><span class="op" id="5115515">(</span><span class="ident" id="5115516"><a href="/encoding/gob/encode.go.html#5115493">b</a></span><span class="op" id="5115517">)</span>&nbsp;<span class="op" id="5115519">&gt;</span>&nbsp;<span class="num" id="5115521">0</span>&nbsp;<span class="op" id="5115523">||</span>&nbsp;<span class="ident" id="5115526"><a href="/encoding/gob/encode.go.html#5115452">state</a></span><span class="op" id="5115531">.</span><span class="ident" id="5115532">sendZero</span>&nbsp;<span class="op" id="5115541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115545"><a href="/encoding/gob/encode.go.html#5115452">state</a></span><span class="op" id="5115550">.</span><span class="ident" id="5115551">update</span><span class="op" id="5115557">(</span><span class="ident" id="5115558"><a href="/encoding/gob/encode.go.html#5115439">i</a></span><span class="op" id="5115559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115563"><a href="/encoding/gob/encode.go.html#5115452">state</a></span><span class="op" id="5115568">.</span><span class="ident" id="5115569">encodeUint</span><span class="op" id="5115579">(</span><span class="ident" id="5115580">uint64</span><span class="op" id="5115586">(</span><span class="builtinfunc" id="5115587">len</span><span class="op" id="5115590">(</span><span class="ident" id="5115591"><a href="/encoding/gob/encode.go.html#5115493">b</a></span><span class="op" id="5115592">)</span><span class="op" id="5115593">)</span><span class="op" id="5115594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115598"><a href="/encoding/gob/encode.go.html#5115452">state</a></span><span class="op" id="5115603">.</span><span class="ident" id="5115604">b</span><span class="op" id="5115605">.</span><span class="ident" id="5115606">Write</span><span class="op" id="5115611">(</span><span class="ident" id="5115612"><a href="/encoding/gob/encode.go.html#5115493">b</a></span><span class="op" id="5115613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115616">}</span><br>
<span class="lineno">240</span><span class="op" id="5115618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5115621">//&nbsp;encString&nbsp;encodes&nbsp;the&nbsp;string&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5115670">//&nbsp;Strings&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5115741">func</span>&nbsp;<span class="ident" id="5115746">encString</span><span class="op" id="5115755">(</span><span class="ident" id="5115756">i</span>&nbsp;<span class="op" id="5115758">*</span><span class="ident" id="5115759"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5115767">,</span>&nbsp;<span class="ident" id="5115769">state</span>&nbsp;<span class="op" id="5115775">*</span><span class="ident" id="5115776"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5115788">,</span>&nbsp;<span class="ident" id="5115790">v</span>&nbsp;<span class="ident" id="5115792"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5115799">.</span><span class="ident" id="5115800">Value</span><span class="op" id="5115805">)</span>&nbsp;<span class="op" id="5115807">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115810">s</span>&nbsp;<span class="op" id="5115812">:=</span>&nbsp;<span class="ident" id="5115815"><a href="/encoding/gob/encode.go.html#5115790">v</a></span><span class="op" id="5115816">.</span><span class="ident" id="5115817">String</span><span class="op" id="5115823">(</span><span class="op" id="5115824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115827">if</span>&nbsp;<span class="builtinfunc" id="5115830">len</span><span class="op" id="5115833">(</span><span class="ident" id="5115834"><a href="/encoding/gob/encode.go.html#5115810">s</a></span><span class="op" id="5115835">)</span>&nbsp;<span class="op" id="5115837">&gt;</span>&nbsp;<span class="num" id="5115839">0</span>&nbsp;<span class="op" id="5115841">||</span>&nbsp;<span class="ident" id="5115844"><a href="/encoding/gob/encode.go.html#5115769">state</a></span><span class="op" id="5115849">.</span><span class="ident" id="5115850">sendZero</span>&nbsp;<span class="op" id="5115859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115863"><a href="/encoding/gob/encode.go.html#5115769">state</a></span><span class="op" id="5115868">.</span><span class="ident" id="5115869">update</span><span class="op" id="5115875">(</span><span class="ident" id="5115876"><a href="/encoding/gob/encode.go.html#5115756">i</a></span><span class="op" id="5115877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115881"><a href="/encoding/gob/encode.go.html#5115769">state</a></span><span class="op" id="5115886">.</span><span class="ident" id="5115887">encodeUint</span><span class="op" id="5115897">(</span><span class="ident" id="5115898">uint64</span><span class="op" id="5115904">(</span><span class="builtinfunc" id="5115905">len</span><span class="op" id="5115908">(</span><span class="ident" id="5115909"><a href="/encoding/gob/encode.go.html#5115810">s</a></span><span class="op" id="5115910">)</span><span class="op" id="5115911">)</span><span class="op" id="5115912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115916"><a href="/encoding/gob/encode.go.html#5115769">state</a></span><span class="op" id="5115921">.</span><span class="ident" id="5115922">b</span><span class="op" id="5115923">.</span><span class="ident" id="5115924">WriteString</span><span class="op" id="5115935">(</span><span class="ident" id="5115936"><a href="/encoding/gob/encode.go.html#5115810">s</a></span><span class="op" id="5115937">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115940">}</span><br>
<span class="lineno"></span><span class="op" id="5115942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5115945">//&nbsp;encStructTerminator&nbsp;encodes&nbsp;the&nbsp;end&nbsp;of&nbsp;an&nbsp;encoded&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5116005">//&nbsp;as&nbsp;delta&nbsp;field&nbsp;number&nbsp;of&nbsp;0.</span><br>
<span class="lineno">255</span><span class="keyword" id="5116036">func</span>&nbsp;<span class="ident" id="5116041">encStructTerminator</span><span class="op" id="5116060">(</span><span class="ident" id="5116061">i</span>&nbsp;<span class="op" id="5116063">*</span><span class="ident" id="5116064"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5116072">,</span>&nbsp;<span class="ident" id="5116074">state</span>&nbsp;<span class="op" id="5116080">*</span><span class="ident" id="5116081"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5116093">,</span>&nbsp;<span class="ident" id="5116095">v</span>&nbsp;<span class="ident" id="5116097"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5116104">.</span><span class="ident" id="5116105">Value</span><span class="op" id="5116110">)</span>&nbsp;<span class="op" id="5116112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116115"><a href="/encoding/gob/encode.go.html#5116074">state</a></span><span class="op" id="5116120">.</span><span class="ident" id="5116121">encodeUint</span><span class="op" id="5116131">(</span><span class="num" id="5116132">0</span><span class="op" id="5116133">)</span><br>
<span class="lineno"></span><span class="op" id="5116135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5116138">//&nbsp;Execution&nbsp;engine</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="5116159">//&nbsp;encEngine&nbsp;an&nbsp;array&nbsp;of&nbsp;instructions&nbsp;indexed&nbsp;by&nbsp;field&nbsp;number&nbsp;of&nbsp;the&nbsp;encoding</span><br>
<span class="lineno"></span><span class="comment" id="5116237">//&nbsp;data,&nbsp;typically&nbsp;a&nbsp;struct.&nbsp;&nbsp;It&nbsp;is&nbsp;executed&nbsp;top&nbsp;to&nbsp;bottom,&nbsp;walking&nbsp;the&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="5116317">type</span>&nbsp;<span class="ident" id="5116322">encEngine</span>&nbsp;<span class="keyword" id="5116332">struct</span>&nbsp;<span class="op" id="5116339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116342">instr</span>&nbsp;<span class="op" id="5116348">[</span><span class="op" id="5116349">]</span><span class="ident" id="5116350"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><br>
<span class="lineno">265</span><span class="op" id="5116359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5116362">const</span>&nbsp;<span class="ident" id="5116368">singletonField</span>&nbsp;<span class="op" id="5116383">=</span>&nbsp;<span class="num" id="5116385">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5116388">//&nbsp;valid&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;a&nbsp;non-nil&nbsp;pointer.</span><br>
<span class="lineno">270</span><span class="comment" id="5116455">//&nbsp;(Slices,&nbsp;maps,&nbsp;and&nbsp;chans&nbsp;take&nbsp;care&nbsp;of&nbsp;themselves.)</span><br>
<span class="lineno"></span><span class="keyword" id="5116509">func</span>&nbsp;<span class="ident" id="5116514">valid</span><span class="op" id="5116519">(</span><span class="ident" id="5116520">v</span>&nbsp;<span class="ident" id="5116522"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5116529">.</span><span class="ident" id="5116530">Value</span><span class="op" id="5116535">)</span>&nbsp;<span class="builtintype" id="5116537">bool</span>&nbsp;<span class="op" id="5116542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116545">switch</span>&nbsp;<span class="ident" id="5116552"><a href="/encoding/gob/encode.go.html#5116520">v</a></span><span class="op" id="5116553">.</span><span class="ident" id="5116554">Kind</span><span class="op" id="5116558">(</span><span class="op" id="5116559">)</span>&nbsp;<span class="op" id="5116561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116564">case</span>&nbsp;<span class="ident" id="5116569"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5116576">.</span><span class="ident" id="5116577">Invalid</span><span class="op" id="5116584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116588">return</span>&nbsp;<span class="ident" id="5116595">false</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116602">case</span>&nbsp;<span class="ident" id="5116607"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5116614">.</span><span class="ident" id="5116615">Ptr</span><span class="op" id="5116618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116622">return</span>&nbsp;<span class="op" id="5116629">!</span><span class="ident" id="5116630"><a href="/encoding/gob/encode.go.html#5116520">v</a></span><span class="op" id="5116631">.</span><span class="ident" id="5116632">IsNil</span><span class="op" id="5116637">(</span><span class="op" id="5116638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5116641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116644">return</span>&nbsp;<span class="ident" id="5116651">true</span><br>
<span class="lineno"></span><span class="op" id="5116656">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="5116659">//&nbsp;encodeSingle&nbsp;encodes&nbsp;a&nbsp;single&nbsp;top-level&nbsp;non-struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5116720">func</span>&nbsp;<span class="op" id="5116725">(</span><span class="ident" id="5116726">enc</span>&nbsp;<span class="op" id="5116730">*</span><span class="ident" id="5116731"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5116738">)</span>&nbsp;<span class="ident" id="5116740">encodeSingle</span><span class="op" id="5116752">(</span><span class="ident" id="5116753">b</span>&nbsp;<span class="op" id="5116755">*</span><span class="ident" id="5116756"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5116765">,</span>&nbsp;<span class="ident" id="5116767">engine</span>&nbsp;<span class="op" id="5116774">*</span><span class="ident" id="5116775"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5116784">,</span>&nbsp;<span class="ident" id="5116786">value</span>&nbsp;<span class="ident" id="5116792"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5116799">.</span><span class="ident" id="5116800">Value</span><span class="op" id="5116805">)</span>&nbsp;<span class="op" id="5116807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116810">state</span>&nbsp;<span class="op" id="5116816">:=</span>&nbsp;<span class="ident" id="5116819"><a href="/encoding/gob/encode.go.html#5116726">enc</a></span><span class="op" id="5116822">.</span><span class="ident" id="5116823">newEncoderState</span><span class="op" id="5116838">(</span><span class="ident" id="5116839"><a href="/encoding/gob/encode.go.html#5116753">b</a></span><span class="op" id="5116840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116843">defer</span>&nbsp;<span class="ident" id="5116849"><a href="/encoding/gob/encode.go.html#5116726">enc</a></span><span class="op" id="5116852">.</span><span class="ident" id="5116853">freeEncoderState</span><span class="op" id="5116869">(</span><span class="ident" id="5116870"><a href="/encoding/gob/encode.go.html#5116810">state</a></span><span class="op" id="5116875">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116878"><a href="/encoding/gob/encode.go.html#5116810">state</a></span><span class="op" id="5116883">.</span><span class="ident" id="5116884">fieldnum</span>&nbsp;<span class="op" id="5116893">=</span>&nbsp;<span class="ident" id="5116895"><a href="/encoding/gob/encode.go.html#5116368">singletonField</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5116911">//&nbsp;There&nbsp;is&nbsp;no&nbsp;surrounding&nbsp;struct&nbsp;to&nbsp;frame&nbsp;the&nbsp;transmission,&nbsp;so&nbsp;we&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5116984">//&nbsp;generate&nbsp;data&nbsp;even&nbsp;if&nbsp;the&nbsp;item&nbsp;is&nbsp;zero.&nbsp;&nbsp;To&nbsp;do&nbsp;this,&nbsp;set&nbsp;sendZero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117055"><a href="/encoding/gob/encode.go.html#5116810">state</a></span><span class="op" id="5117060">.</span><span class="ident" id="5117061">sendZero</span>&nbsp;<span class="op" id="5117070">=</span>&nbsp;<span class="ident" id="5117072">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117078">instr</span>&nbsp;<span class="op" id="5117084">:=</span>&nbsp;<span class="op" id="5117087">&amp;</span><span class="ident" id="5117088"><a href="/encoding/gob/encode.go.html#5116767">engine</a></span><span class="op" id="5117094">.</span><span class="ident" id="5117095">instr</span><span class="op" id="5117100">[</span><span class="ident" id="5117101"><a href="/encoding/gob/encode.go.html#5116368">singletonField</a></span><span class="op" id="5117115">]</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117118">if</span>&nbsp;<span class="ident" id="5117121"><a href="/encoding/gob/encode.go.html#5117078">instr</a></span><span class="op" id="5117126">.</span><span class="ident" id="5117127">indir</span>&nbsp;<span class="op" id="5117133">&gt;</span>&nbsp;<span class="num" id="5117135">0</span>&nbsp;<span class="op" id="5117137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117141"><a href="/encoding/gob/encode.go.html#5116786">value</a></span>&nbsp;<span class="op" id="5117147">=</span>&nbsp;<span class="ident" id="5117149"><a href="/encoding/gob/encode.go.html#5113148">encIndirect</a></span><span class="op" id="5117160">(</span><span class="ident" id="5117161"><a href="/encoding/gob/encode.go.html#5116786">value</a></span><span class="op" id="5117166">,</span>&nbsp;<span class="ident" id="5117168"><a href="/encoding/gob/encode.go.html#5117078">instr</a></span><span class="op" id="5117173">.</span><span class="ident" id="5117174">indir</span><span class="op" id="5117179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117185">if</span>&nbsp;<span class="ident" id="5117188"><a href="/encoding/gob/encode.go.html#5116514">valid</a></span><span class="op" id="5117193">(</span><span class="ident" id="5117194"><a href="/encoding/gob/encode.go.html#5116786">value</a></span><span class="op" id="5117199">)</span>&nbsp;<span class="op" id="5117201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117205"><a href="/encoding/gob/encode.go.html#5117078">instr</a></span><span class="op" id="5117210">.</span><span class="ident" id="5117211">op</span><span class="op" id="5117213">(</span><span class="ident" id="5117214"><a href="/encoding/gob/encode.go.html#5117078">instr</a></span><span class="op" id="5117219">,</span>&nbsp;<span class="ident" id="5117221"><a href="/encoding/gob/encode.go.html#5116810">state</a></span><span class="op" id="5117226">,</span>&nbsp;<span class="ident" id="5117228"><a href="/encoding/gob/encode.go.html#5116786">value</a></span><span class="op" id="5117233">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117236">}</span><br>
<span class="lineno"></span><span class="op" id="5117238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5117241">//&nbsp;encodeStruct&nbsp;encodes&nbsp;a&nbsp;single&nbsp;struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5117288">func</span>&nbsp;<span class="op" id="5117293">(</span><span class="ident" id="5117294">enc</span>&nbsp;<span class="op" id="5117298">*</span><span class="ident" id="5117299"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5117306">)</span>&nbsp;<span class="ident" id="5117308">encodeStruct</span><span class="op" id="5117320">(</span><span class="ident" id="5117321">b</span>&nbsp;<span class="op" id="5117323">*</span><span class="ident" id="5117324"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5117333">,</span>&nbsp;<span class="ident" id="5117335">engine</span>&nbsp;<span class="op" id="5117342">*</span><span class="ident" id="5117343"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5117352">,</span>&nbsp;<span class="ident" id="5117354">value</span>&nbsp;<span class="ident" id="5117360"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5117367">.</span><span class="ident" id="5117368">Value</span><span class="op" id="5117373">)</span>&nbsp;<span class="op" id="5117375">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117378">if</span>&nbsp;<span class="op" id="5117381">!</span><span class="ident" id="5117382"><a href="/encoding/gob/encode.go.html#5116514">valid</a></span><span class="op" id="5117387">(</span><span class="ident" id="5117388"><a href="/encoding/gob/encode.go.html#5117354">value</a></span><span class="op" id="5117393">)</span>&nbsp;<span class="op" id="5117395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117399">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117410">state</span>&nbsp;<span class="op" id="5117416">:=</span>&nbsp;<span class="ident" id="5117419"><a href="/encoding/gob/encode.go.html#5117294">enc</a></span><span class="op" id="5117422">.</span><span class="ident" id="5117423">newEncoderState</span><span class="op" id="5117438">(</span><span class="ident" id="5117439"><a href="/encoding/gob/encode.go.html#5117321">b</a></span><span class="op" id="5117440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117443">defer</span>&nbsp;<span class="ident" id="5117449"><a href="/encoding/gob/encode.go.html#5117294">enc</a></span><span class="op" id="5117452">.</span><span class="ident" id="5117453">freeEncoderState</span><span class="op" id="5117469">(</span><span class="ident" id="5117470"><a href="/encoding/gob/encode.go.html#5117410">state</a></span><span class="op" id="5117475">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117478"><a href="/encoding/gob/encode.go.html#5117410">state</a></span><span class="op" id="5117483">.</span><span class="ident" id="5117484">fieldnum</span>&nbsp;<span class="op" id="5117493">=</span>&nbsp;<span class="op" id="5117495">-</span><span class="num" id="5117496">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117499">for</span>&nbsp;<span class="ident" id="5117503">i</span>&nbsp;<span class="op" id="5117505">:=</span>&nbsp;<span class="num" id="5117508">0</span><span class="op" id="5117509">;</span>&nbsp;<span class="ident" id="5117511"><a href="/encoding/gob/encode.go.html#5117503">i</a></span>&nbsp;<span class="op" id="5117513">&lt;</span>&nbsp;<span class="builtinfunc" id="5117515">len</span><span class="op" id="5117518">(</span><span class="ident" id="5117519"><a href="/encoding/gob/encode.go.html#5117335">engine</a></span><span class="op" id="5117525">.</span><span class="ident" id="5117526">instr</span><span class="op" id="5117531">)</span><span class="op" id="5117532">;</span>&nbsp;<span class="ident" id="5117534"><a href="/encoding/gob/encode.go.html#5117503">i</a></span><span class="op" id="5117535">++</span>&nbsp;<span class="op" id="5117538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117542">instr</span>&nbsp;<span class="op" id="5117548">:=</span>&nbsp;<span class="op" id="5117551">&amp;</span><span class="ident" id="5117552"><a href="/encoding/gob/encode.go.html#5117335">engine</a></span><span class="op" id="5117558">.</span><span class="ident" id="5117559">instr</span><span class="op" id="5117564">[</span><span class="ident" id="5117565"><a href="/encoding/gob/encode.go.html#5117503">i</a></span><span class="op" id="5117566">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117570">if</span>&nbsp;<span class="ident" id="5117573"><a href="/encoding/gob/encode.go.html#5117503">i</a></span>&nbsp;<span class="op" id="5117575">&gt;=</span>&nbsp;<span class="ident" id="5117578"><a href="/encoding/gob/encode.go.html#5117354">value</a></span><span class="op" id="5117583">.</span><span class="ident" id="5117584">NumField</span><span class="op" id="5117592">(</span><span class="op" id="5117593">)</span>&nbsp;<span class="op" id="5117595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5117600">//&nbsp;encStructTerminator</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117626"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117631">.</span><span class="ident" id="5117632">op</span><span class="op" id="5117634">(</span><span class="ident" id="5117635"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117640">,</span>&nbsp;<span class="ident" id="5117642"><a href="/encoding/gob/encode.go.html#5117410">state</a></span><span class="op" id="5117647">,</span>&nbsp;<span class="ident" id="5117649"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5117656">.</span><span class="ident" id="5117657">Value</span><span class="op" id="5117662">{</span><span class="op" id="5117663">}</span><span class="op" id="5117664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117669">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117681">field</span>&nbsp;<span class="op" id="5117687">:=</span>&nbsp;<span class="ident" id="5117690"><a href="/encoding/gob/encode.go.html#5117354">value</a></span><span class="op" id="5117695">.</span><span class="ident" id="5117696">FieldByIndex</span><span class="op" id="5117708">(</span><span class="ident" id="5117709"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117714">.</span><span class="ident" id="5117715">index</span><span class="op" id="5117720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117724">if</span>&nbsp;<span class="ident" id="5117727"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117732">.</span><span class="ident" id="5117733">indir</span>&nbsp;<span class="op" id="5117739">&gt;</span>&nbsp;<span class="num" id="5117741">0</span>&nbsp;<span class="op" id="5117743">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117748"><a href="/encoding/gob/encode.go.html#5117681">field</a></span>&nbsp;<span class="op" id="5117754">=</span>&nbsp;<span class="ident" id="5117756"><a href="/encoding/gob/encode.go.html#5113148">encIndirect</a></span><span class="op" id="5117767">(</span><span class="ident" id="5117768"><a href="/encoding/gob/encode.go.html#5117681">field</a></span><span class="op" id="5117773">,</span>&nbsp;<span class="ident" id="5117775"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117780">.</span><span class="ident" id="5117781">indir</span><span class="op" id="5117786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5117791">//&nbsp;TODO:&nbsp;Is&nbsp;field&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117863">if</span>&nbsp;<span class="op" id="5117866">!</span><span class="ident" id="5117867"><a href="/encoding/gob/encode.go.html#5116514">valid</a></span><span class="op" id="5117872">(</span><span class="ident" id="5117873"><a href="/encoding/gob/encode.go.html#5117681">field</a></span><span class="op" id="5117878">)</span>&nbsp;<span class="op" id="5117880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117886">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117898">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117906"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117911">.</span><span class="ident" id="5117912">op</span><span class="op" id="5117914">(</span><span class="ident" id="5117915"><a href="/encoding/gob/encode.go.html#5117542">instr</a></span><span class="op" id="5117920">,</span>&nbsp;<span class="ident" id="5117922"><a href="/encoding/gob/encode.go.html#5117410">state</a></span><span class="op" id="5117927">,</span>&nbsp;<span class="ident" id="5117929"><a href="/encoding/gob/encode.go.html#5117681">field</a></span><span class="op" id="5117934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117937">}</span><br>
<span class="lineno"></span><span class="op" id="5117939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="5117942">//&nbsp;encodeArray&nbsp;encodes&nbsp;an&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5117975">func</span>&nbsp;<span class="op" id="5117980">(</span><span class="ident" id="5117981">enc</span>&nbsp;<span class="op" id="5117985">*</span><span class="ident" id="5117986"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5117993">)</span>&nbsp;<span class="ident" id="5117995">encodeArray</span><span class="op" id="5118006">(</span><span class="ident" id="5118007">b</span>&nbsp;<span class="op" id="5118009">*</span><span class="ident" id="5118010"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5118019">,</span>&nbsp;<span class="ident" id="5118021">value</span>&nbsp;<span class="ident" id="5118027"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5118034">.</span><span class="ident" id="5118035">Value</span><span class="op" id="5118040">,</span>&nbsp;<span class="ident" id="5118042">op</span>&nbsp;<span class="ident" id="5118045"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5118050">,</span>&nbsp;<span class="ident" id="5118052">elemIndir</span>&nbsp;<span class="builtintype" id="5118062">int</span><span class="op" id="5118065">,</span>&nbsp;<span class="ident" id="5118067">length</span>&nbsp;<span class="builtintype" id="5118074">int</span><span class="op" id="5118077">,</span>&nbsp;<span class="ident" id="5118079">helper</span>&nbsp;<span class="ident" id="5118086"><a href="/encoding/gob/encode.go.html#5109278">encHelper</a></span><span class="op" id="5118095">)</span>&nbsp;<span class="op" id="5118097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118100">state</span>&nbsp;<span class="op" id="5118106">:=</span>&nbsp;<span class="ident" id="5118109"><a href="/encoding/gob/encode.go.html#5117981">enc</a></span><span class="op" id="5118112">.</span><span class="ident" id="5118113">newEncoderState</span><span class="op" id="5118128">(</span><span class="ident" id="5118129"><a href="/encoding/gob/encode.go.html#5118007">b</a></span><span class="op" id="5118130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118133">defer</span>&nbsp;<span class="ident" id="5118139"><a href="/encoding/gob/encode.go.html#5117981">enc</a></span><span class="op" id="5118142">.</span><span class="ident" id="5118143">freeEncoderState</span><span class="op" id="5118159">(</span><span class="ident" id="5118160"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118168"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118173">.</span><span class="ident" id="5118174">fieldnum</span>&nbsp;<span class="op" id="5118183">=</span>&nbsp;<span class="op" id="5118185">-</span><span class="num" id="5118186">1</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118189"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118194">.</span><span class="ident" id="5118195">sendZero</span>&nbsp;<span class="op" id="5118204">=</span>&nbsp;<span class="ident" id="5118206">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118212"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118217">.</span><span class="ident" id="5118218">encodeUint</span><span class="op" id="5118228">(</span><span class="ident" id="5118229">uint64</span><span class="op" id="5118235">(</span><span class="ident" id="5118236"><a href="/encoding/gob/encode.go.html#5118067">length</a></span><span class="op" id="5118242">)</span><span class="op" id="5118243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118246">if</span>&nbsp;<span class="ident" id="5118249"><a href="/encoding/gob/encode.go.html#5118079">helper</a></span>&nbsp;<span class="op" id="5118256">!=</span>&nbsp;<span class="ident" id="5118259">nil</span>&nbsp;<span class="op" id="5118263">&amp;&amp;</span>&nbsp;<span class="ident" id="5118266"><a href="/encoding/gob/encode.go.html#5118079">helper</a></span><span class="op" id="5118272">(</span><span class="ident" id="5118273"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118278">,</span>&nbsp;<span class="ident" id="5118280"><a href="/encoding/gob/encode.go.html#5118021">value</a></span><span class="op" id="5118285">)</span>&nbsp;<span class="op" id="5118287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118291">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118299">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118302">for</span>&nbsp;<span class="ident" id="5118306">i</span>&nbsp;<span class="op" id="5118308">:=</span>&nbsp;<span class="num" id="5118311">0</span><span class="op" id="5118312">;</span>&nbsp;<span class="ident" id="5118314"><a href="/encoding/gob/encode.go.html#5118306">i</a></span>&nbsp;<span class="op" id="5118316">&lt;</span>&nbsp;<span class="ident" id="5118318"><a href="/encoding/gob/encode.go.html#5118067">length</a></span><span class="op" id="5118324">;</span>&nbsp;<span class="ident" id="5118326"><a href="/encoding/gob/encode.go.html#5118306">i</a></span><span class="op" id="5118327">++</span>&nbsp;<span class="op" id="5118330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118334">elem</span>&nbsp;<span class="op" id="5118339">:=</span>&nbsp;<span class="ident" id="5118342"><a href="/encoding/gob/encode.go.html#5118021">value</a></span><span class="op" id="5118347">.</span><span class="ident" id="5118348">Index</span><span class="op" id="5118353">(</span><span class="ident" id="5118354"><a href="/encoding/gob/encode.go.html#5118306">i</a></span><span class="op" id="5118355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118359">if</span>&nbsp;<span class="ident" id="5118362"><a href="/encoding/gob/encode.go.html#5118052">elemIndir</a></span>&nbsp;<span class="op" id="5118372">&gt;</span>&nbsp;<span class="num" id="5118374">0</span>&nbsp;<span class="op" id="5118376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118381"><a href="/encoding/gob/encode.go.html#5118334">elem</a></span>&nbsp;<span class="op" id="5118386">=</span>&nbsp;<span class="ident" id="5118388"><a href="/encoding/gob/encode.go.html#5113148">encIndirect</a></span><span class="op" id="5118399">(</span><span class="ident" id="5118400"><a href="/encoding/gob/encode.go.html#5118334">elem</a></span><span class="op" id="5118404">,</span>&nbsp;<span class="ident" id="5118406"><a href="/encoding/gob/encode.go.html#5118052">elemIndir</a></span><span class="op" id="5118415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5118420">//&nbsp;TODO:&nbsp;Is&nbsp;elem&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118491">if</span>&nbsp;<span class="op" id="5118494">!</span><span class="ident" id="5118495"><a href="/encoding/gob/encode.go.html#5116514">valid</a></span><span class="op" id="5118500">(</span><span class="ident" id="5118501"><a href="/encoding/gob/encode.go.html#5118334">elem</a></span><span class="op" id="5118505">)</span>&nbsp;<span class="op" id="5118507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118513"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5118519">(</span><span class="string" id="5118520">&#34;encodeArray:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5118546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118559"><a href="/encoding/gob/encode.go.html#5118042">op</a></span><span class="op" id="5118561">(</span><span class="ident" id="5118562">nil</span><span class="op" id="5118565">,</span>&nbsp;<span class="ident" id="5118567"><a href="/encoding/gob/encode.go.html#5118100">state</a></span><span class="op" id="5118572">,</span>&nbsp;<span class="ident" id="5118574"><a href="/encoding/gob/encode.go.html#5118334">elem</a></span><span class="op" id="5118578">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118581">}</span><br>
<span class="lineno"></span><span class="op" id="5118583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5118586">//&nbsp;encodeReflectValue&nbsp;is&nbsp;a&nbsp;helper&nbsp;for&nbsp;maps.&nbsp;It&nbsp;encodes&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5118654">func</span>&nbsp;<span class="ident" id="5118659">encodeReflectValue</span><span class="op" id="5118677">(</span><span class="ident" id="5118678">state</span>&nbsp;<span class="op" id="5118684">*</span><span class="ident" id="5118685"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5118697">,</span>&nbsp;<span class="ident" id="5118699">v</span>&nbsp;<span class="ident" id="5118701"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5118708">.</span><span class="ident" id="5118709">Value</span><span class="op" id="5118714">,</span>&nbsp;<span class="ident" id="5118716">op</span>&nbsp;<span class="ident" id="5118719"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5118724">,</span>&nbsp;<span class="ident" id="5118726">indir</span>&nbsp;<span class="builtintype" id="5118732">int</span><span class="op" id="5118735">)</span>&nbsp;<span class="op" id="5118737">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118740">for</span>&nbsp;<span class="ident" id="5118744">i</span>&nbsp;<span class="op" id="5118746">:=</span>&nbsp;<span class="num" id="5118749">0</span><span class="op" id="5118750">;</span>&nbsp;<span class="ident" id="5118752"><a href="/encoding/gob/encode.go.html#5118744">i</a></span>&nbsp;<span class="op" id="5118754">&lt;</span>&nbsp;<span class="ident" id="5118756"><a href="/encoding/gob/encode.go.html#5118726">indir</a></span>&nbsp;<span class="op" id="5118762">&amp;&amp;</span>&nbsp;<span class="ident" id="5118765"><a href="/encoding/gob/encode.go.html#5118699">v</a></span><span class="op" id="5118766">.</span><span class="ident" id="5118767">IsValid</span><span class="op" id="5118774">(</span><span class="op" id="5118775">)</span><span class="op" id="5118776">;</span>&nbsp;<span class="ident" id="5118778"><a href="/encoding/gob/encode.go.html#5118744">i</a></span><span class="op" id="5118779">++</span>&nbsp;<span class="op" id="5118782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118786"><a href="/encoding/gob/encode.go.html#5118699">v</a></span>&nbsp;<span class="op" id="5118788">=</span>&nbsp;<span class="ident" id="5118790"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5118797">.</span><span class="ident" id="5118798">Indirect</span><span class="op" id="5118806">(</span><span class="ident" id="5118807"><a href="/encoding/gob/encode.go.html#5118699">v</a></span><span class="op" id="5118808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5118814">if</span>&nbsp;<span class="op" id="5118817">!</span><span class="ident" id="5118818"><a href="/encoding/gob/encode.go.html#5118699">v</a></span><span class="op" id="5118819">.</span><span class="ident" id="5118820">IsValid</span><span class="op" id="5118827">(</span><span class="op" id="5118828">)</span>&nbsp;<span class="op" id="5118830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118834"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5118840">(</span><span class="string" id="5118841">&#34;encodeReflectValue:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5118874">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5118877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5118880"><a href="/encoding/gob/encode.go.html#5118716">op</a></span><span class="op" id="5118882">(</span><span class="ident" id="5118883">nil</span><span class="op" id="5118886">,</span>&nbsp;<span class="ident" id="5118888"><a href="/encoding/gob/encode.go.html#5118678">state</a></span><span class="op" id="5118893">,</span>&nbsp;<span class="ident" id="5118895"><a href="/encoding/gob/encode.go.html#5118699">v</a></span><span class="op" id="5118896">)</span><br>
<span class="lineno"></span><span class="op" id="5118898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5118901">//&nbsp;encodeMap&nbsp;encodes&nbsp;a&nbsp;map&nbsp;as&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;key:value&nbsp;pairs.</span><br>
<span class="lineno">360</span><span class="keyword" id="5118975">func</span>&nbsp;<span class="op" id="5118980">(</span><span class="ident" id="5118981">enc</span>&nbsp;<span class="op" id="5118985">*</span><span class="ident" id="5118986"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5118993">)</span>&nbsp;<span class="ident" id="5118995">encodeMap</span><span class="op" id="5119004">(</span><span class="ident" id="5119005">b</span>&nbsp;<span class="op" id="5119007">*</span><span class="ident" id="5119008"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5119017">,</span>&nbsp;<span class="ident" id="5119019">mv</span>&nbsp;<span class="ident" id="5119022"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5119029">.</span><span class="ident" id="5119030">Value</span><span class="op" id="5119035">,</span>&nbsp;<span class="ident" id="5119037">keyOp</span><span class="op" id="5119042">,</span>&nbsp;<span class="ident" id="5119044">elemOp</span>&nbsp;<span class="ident" id="5119051"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5119056">,</span>&nbsp;<span class="ident" id="5119058">keyIndir</span><span class="op" id="5119066">,</span>&nbsp;<span class="ident" id="5119068">elemIndir</span>&nbsp;<span class="builtintype" id="5119078">int</span><span class="op" id="5119081">)</span>&nbsp;<span class="op" id="5119083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119086">state</span>&nbsp;<span class="op" id="5119092">:=</span>&nbsp;<span class="ident" id="5119095"><a href="/encoding/gob/encode.go.html#5118981">enc</a></span><span class="op" id="5119098">.</span><span class="ident" id="5119099">newEncoderState</span><span class="op" id="5119114">(</span><span class="ident" id="5119115"><a href="/encoding/gob/encode.go.html#5119005">b</a></span><span class="op" id="5119116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119119"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119124">.</span><span class="ident" id="5119125">fieldnum</span>&nbsp;<span class="op" id="5119134">=</span>&nbsp;<span class="op" id="5119136">-</span><span class="num" id="5119137">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119140"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119145">.</span><span class="ident" id="5119146">sendZero</span>&nbsp;<span class="op" id="5119155">=</span>&nbsp;<span class="ident" id="5119157">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119163">keys</span>&nbsp;<span class="op" id="5119168">:=</span>&nbsp;<span class="ident" id="5119171"><a href="/encoding/gob/encode.go.html#5119019">mv</a></span><span class="op" id="5119173">.</span><span class="ident" id="5119174">MapKeys</span><span class="op" id="5119181">(</span><span class="op" id="5119182">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119185"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119190">.</span><span class="ident" id="5119191">encodeUint</span><span class="op" id="5119201">(</span><span class="ident" id="5119202">uint64</span><span class="op" id="5119208">(</span><span class="builtinfunc" id="5119209">len</span><span class="op" id="5119212">(</span><span class="ident" id="5119213"><a href="/encoding/gob/encode.go.html#5119163">keys</a></span><span class="op" id="5119217">)</span><span class="op" id="5119218">)</span><span class="op" id="5119219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119222">for</span>&nbsp;<span class="ident" id="5119226">_</span><span class="op" id="5119227">,</span>&nbsp;<span class="ident" id="5119229">key</span>&nbsp;<span class="op" id="5119233">:=</span>&nbsp;<span class="keyword" id="5119236">range</span>&nbsp;<span class="ident" id="5119242"><a href="/encoding/gob/encode.go.html#5119163">keys</a></span>&nbsp;<span class="op" id="5119247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119251"><a href="/encoding/gob/encode.go.html#5118659">encodeReflectValue</a></span><span class="op" id="5119269">(</span><span class="ident" id="5119270"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119275">,</span>&nbsp;<span class="ident" id="5119277"><a href="/encoding/gob/encode.go.html#5119229">key</a></span><span class="op" id="5119280">,</span>&nbsp;<span class="ident" id="5119282"><a href="/encoding/gob/encode.go.html#5119037">keyOp</a></span><span class="op" id="5119287">,</span>&nbsp;<span class="ident" id="5119289"><a href="/encoding/gob/encode.go.html#5119058">keyIndir</a></span><span class="op" id="5119297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119301"><a href="/encoding/gob/encode.go.html#5118659">encodeReflectValue</a></span><span class="op" id="5119319">(</span><span class="ident" id="5119320"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119325">,</span>&nbsp;<span class="ident" id="5119327"><a href="/encoding/gob/encode.go.html#5119019">mv</a></span><span class="op" id="5119329">.</span><span class="ident" id="5119330">MapIndex</span><span class="op" id="5119338">(</span><span class="ident" id="5119339"><a href="/encoding/gob/encode.go.html#5119229">key</a></span><span class="op" id="5119342">)</span><span class="op" id="5119343">,</span>&nbsp;<span class="ident" id="5119345"><a href="/encoding/gob/encode.go.html#5119044">elemOp</a></span><span class="op" id="5119351">,</span>&nbsp;<span class="ident" id="5119353"><a href="/encoding/gob/encode.go.html#5119068">elemIndir</a></span><span class="op" id="5119362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5119365">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119368"><a href="/encoding/gob/encode.go.html#5118981">enc</a></span><span class="op" id="5119371">.</span><span class="ident" id="5119372">freeEncoderState</span><span class="op" id="5119388">(</span><span class="ident" id="5119389"><a href="/encoding/gob/encode.go.html#5119086">state</a></span><span class="op" id="5119394">)</span><br>
<span class="lineno"></span><span class="op" id="5119396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5119399">//&nbsp;encodeInterface&nbsp;encodes&nbsp;the&nbsp;interface&nbsp;value&nbsp;iv.</span><br>
<span class="lineno"></span><span class="comment" id="5119450">//&nbsp;To&nbsp;send&nbsp;an&nbsp;interface,&nbsp;we&nbsp;send&nbsp;a&nbsp;string&nbsp;identifying&nbsp;the&nbsp;concrete&nbsp;type,&nbsp;followed</span><br>
<span class="lineno">375</span><span class="comment" id="5119532">//&nbsp;by&nbsp;the&nbsp;type&nbsp;identifier&nbsp;(which&nbsp;might&nbsp;require&nbsp;defining&nbsp;that&nbsp;type&nbsp;right&nbsp;now),&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="5119619">//&nbsp;by&nbsp;the&nbsp;concrete&nbsp;value.&nbsp;&nbsp;A&nbsp;nil&nbsp;value&nbsp;gets&nbsp;sent&nbsp;as&nbsp;the&nbsp;empty&nbsp;string&nbsp;for&nbsp;the&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="5119702">//&nbsp;followed&nbsp;by&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5119727">func</span>&nbsp;<span class="op" id="5119732">(</span><span class="ident" id="5119733">enc</span>&nbsp;<span class="op" id="5119737">*</span><span class="ident" id="5119738"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5119745">)</span>&nbsp;<span class="ident" id="5119747">encodeInterface</span><span class="op" id="5119762">(</span><span class="ident" id="5119763">b</span>&nbsp;<span class="op" id="5119765">*</span><span class="ident" id="5119766"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5119775">,</span>&nbsp;<span class="ident" id="5119777">iv</span>&nbsp;<span class="ident" id="5119780"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5119787">.</span><span class="ident" id="5119788">Value</span><span class="op" id="5119793">)</span>&nbsp;<span class="op" id="5119795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5119798">//&nbsp;Gobs&nbsp;can&nbsp;encode&nbsp;nil&nbsp;interface&nbsp;values&nbsp;but&nbsp;not&nbsp;typed&nbsp;interface</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5119863">//&nbsp;values&nbsp;holding&nbsp;nil&nbsp;pointers,&nbsp;since&nbsp;nil&nbsp;pointers&nbsp;point&nbsp;to&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5119934">elem</span>&nbsp;<span class="op" id="5119939">:=</span>&nbsp;<span class="ident" id="5119942"><a href="/encoding/gob/encode.go.html#5119777">iv</a></span><span class="op" id="5119944">.</span><span class="ident" id="5119945">Elem</span><span class="op" id="5119949">(</span><span class="op" id="5119950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5119953">if</span>&nbsp;<span class="ident" id="5119956"><a href="/encoding/gob/encode.go.html#5119934">elem</a></span><span class="op" id="5119960">.</span><span class="ident" id="5119961">Kind</span><span class="op" id="5119965">(</span><span class="op" id="5119966">)</span>&nbsp;<span class="op" id="5119968">==</span>&nbsp;<span class="ident" id="5119971"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5119978">.</span><span class="ident" id="5119979">Ptr</span>&nbsp;<span class="op" id="5119983">&amp;&amp;</span>&nbsp;<span class="ident" id="5119986"><a href="/encoding/gob/encode.go.html#5119934">elem</a></span><span class="op" id="5119990">.</span><span class="ident" id="5119991">IsNil</span><span class="op" id="5119996">(</span><span class="op" id="5119997">)</span>&nbsp;<span class="op" id="5119999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120003"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5120009">(</span><span class="string" id="5120010">&#34;gob:&nbsp;cannot&nbsp;encode&nbsp;nil&nbsp;pointer&nbsp;of&nbsp;type&nbsp;%s&nbsp;inside&nbsp;interface&#34;</span><span class="op" id="5120070">,</span>&nbsp;<span class="ident" id="5120072"><a href="/encoding/gob/encode.go.html#5119777">iv</a></span><span class="op" id="5120074">.</span><span class="ident" id="5120075">Elem</span><span class="op" id="5120079">(</span><span class="op" id="5120080">)</span><span class="op" id="5120081">.</span><span class="ident" id="5120082">Type</span><span class="op" id="5120086">(</span><span class="op" id="5120087">)</span><span class="op" id="5120088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5120091">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120094">state</span>&nbsp;<span class="op" id="5120100">:=</span>&nbsp;<span class="ident" id="5120103"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120106">.</span><span class="ident" id="5120107">newEncoderState</span><span class="op" id="5120122">(</span><span class="ident" id="5120123"><a href="/encoding/gob/encode.go.html#5119763">b</a></span><span class="op" id="5120124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120127"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120132">.</span><span class="ident" id="5120133">fieldnum</span>&nbsp;<span class="op" id="5120142">=</span>&nbsp;<span class="op" id="5120144">-</span><span class="num" id="5120145">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120148"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120153">.</span><span class="ident" id="5120154">sendZero</span>&nbsp;<span class="op" id="5120163">=</span>&nbsp;<span class="ident" id="5120165">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5120171">if</span>&nbsp;<span class="ident" id="5120174"><a href="/encoding/gob/encode.go.html#5119777">iv</a></span><span class="op" id="5120176">.</span><span class="ident" id="5120177">IsNil</span><span class="op" id="5120182">(</span><span class="op" id="5120183">)</span>&nbsp;<span class="op" id="5120185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120189"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120194">.</span><span class="ident" id="5120195">encodeUint</span><span class="op" id="5120205">(</span><span class="num" id="5120206">0</span><span class="op" id="5120207">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5120211">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5120219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120223">ut</span>&nbsp;<span class="op" id="5120226">:=</span>&nbsp;<span class="ident" id="5120229"><a href="/encoding/gob/type.go.html#5143544">userType</a></span><span class="op" id="5120237">(</span><span class="ident" id="5120238"><a href="/encoding/gob/encode.go.html#5119777">iv</a></span><span class="op" id="5120240">.</span><span class="ident" id="5120241">Elem</span><span class="op" id="5120245">(</span><span class="op" id="5120246">)</span><span class="op" id="5120247">.</span><span class="ident" id="5120248">Type</span><span class="op" id="5120252">(</span><span class="op" id="5120253">)</span><span class="op" id="5120254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120257"><a href="/encoding/gob/type.go.html#5162127">registerLock</a></span><span class="op" id="5120269">.</span><span class="ident" id="5120270">RLock</span><span class="op" id="5120275">(</span><span class="op" id="5120276">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120279">name</span><span class="op" id="5120283">,</span>&nbsp;<span class="ident" id="5120285">ok</span>&nbsp;<span class="op" id="5120288">:=</span>&nbsp;<span class="ident" id="5120291"><a href="/encoding/gob/type.go.html#5162212">concreteTypeToName</a></span><span class="op" id="5120309">[</span><span class="ident" id="5120310"><a href="/encoding/gob/encode.go.html#5120223">ut</a></span><span class="op" id="5120312">.</span><span class="ident" id="5120313">base</span><span class="op" id="5120317">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120320"><a href="/encoding/gob/type.go.html#5162127">registerLock</a></span><span class="op" id="5120332">.</span><span class="ident" id="5120333">RUnlock</span><span class="op" id="5120340">(</span><span class="op" id="5120341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5120344">if</span>&nbsp;<span class="op" id="5120347">!</span><span class="ident" id="5120348"><a href="/encoding/gob/encode.go.html#5120285">ok</a></span>&nbsp;<span class="op" id="5120351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120355"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5120361">(</span><span class="string" id="5120362">&#34;type&nbsp;not&nbsp;registered&nbsp;for&nbsp;interface:&nbsp;%s&#34;</span><span class="op" id="5120401">,</span>&nbsp;<span class="ident" id="5120403"><a href="/encoding/gob/encode.go.html#5120223">ut</a></span><span class="op" id="5120405">.</span><span class="ident" id="5120406">base</span><span class="op" id="5120410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5120413">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5120416">//&nbsp;Send&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120435"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120440">.</span><span class="ident" id="5120441">encodeUint</span><span class="op" id="5120451">(</span><span class="ident" id="5120452">uint64</span><span class="op" id="5120458">(</span><span class="builtinfunc" id="5120459">len</span><span class="op" id="5120462">(</span><span class="ident" id="5120463"><a href="/encoding/gob/encode.go.html#5120279">name</a></span><span class="op" id="5120467">)</span><span class="op" id="5120468">)</span><span class="op" id="5120469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120472"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120477">.</span><span class="ident" id="5120478">b</span><span class="op" id="5120479">.</span><span class="ident" id="5120480">WriteString</span><span class="op" id="5120491">(</span><span class="ident" id="5120492"><a href="/encoding/gob/encode.go.html#5120279">name</a></span><span class="op" id="5120496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5120499">//&nbsp;Define&nbsp;the&nbsp;type&nbsp;id&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120536"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120539">.</span><span class="ident" id="5120540">sendTypeDescriptor</span><span class="op" id="5120558">(</span><span class="ident" id="5120559"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120562">.</span><span class="ident" id="5120563">writer</span><span class="op" id="5120569">(</span><span class="op" id="5120570">)</span><span class="op" id="5120571">,</span>&nbsp;<span class="ident" id="5120573"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120578">,</span>&nbsp;<span class="ident" id="5120580"><a href="/encoding/gob/encode.go.html#5120223">ut</a></span><span class="op" id="5120582">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5120585">//&nbsp;Send&nbsp;the&nbsp;type&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120607"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120610">.</span><span class="ident" id="5120611">sendTypeId</span><span class="op" id="5120621">(</span><span class="ident" id="5120622"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5120627">,</span>&nbsp;<span class="ident" id="5120629"><a href="/encoding/gob/encode.go.html#5120223">ut</a></span><span class="op" id="5120631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5120634">//&nbsp;Encode&nbsp;the&nbsp;value&nbsp;into&nbsp;a&nbsp;new&nbsp;buffer.&nbsp;&nbsp;Any&nbsp;nested&nbsp;type&nbsp;definitions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5120703">//&nbsp;should&nbsp;be&nbsp;written&nbsp;to&nbsp;b,&nbsp;before&nbsp;the&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120757"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120760">.</span><span class="ident" id="5120761">pushWriter</span><span class="op" id="5120771">(</span><span class="ident" id="5120772"><a href="/encoding/gob/encode.go.html#5119763">b</a></span><span class="op" id="5120773">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120776">data</span>&nbsp;<span class="op" id="5120781">:=</span>&nbsp;<span class="builtinfunc" id="5120784">new</span><span class="op" id="5120787">(</span><span class="ident" id="5120788"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5120797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120800"><a href="/encoding/gob/encode.go.html#5120776">data</a></span><span class="op" id="5120804">.</span><span class="ident" id="5120805">Write</span><span class="op" id="5120810">(</span><span class="ident" id="5120811"><a href="/encoding/gob/encoder.go.html#5130276">spaceForLength</a></span><span class="op" id="5120825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120828"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120831">.</span><span class="ident" id="5120832">encode</span><span class="op" id="5120838">(</span><span class="ident" id="5120839"><a href="/encoding/gob/encode.go.html#5120776">data</a></span><span class="op" id="5120843">,</span>&nbsp;<span class="ident" id="5120845"><a href="/encoding/gob/encode.go.html#5119934">elem</a></span><span class="op" id="5120849">,</span>&nbsp;<span class="ident" id="5120851"><a href="/encoding/gob/encode.go.html#5120223">ut</a></span><span class="op" id="5120853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5120856">if</span>&nbsp;<span class="ident" id="5120859"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120862">.</span><span class="ident" id="5120863">err</span>&nbsp;<span class="op" id="5120867">!=</span>&nbsp;<span class="ident" id="5120870">nil</span>&nbsp;<span class="op" id="5120874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120878"><a href="/encoding/gob/error.go.html#5137812">error_</a></span><span class="op" id="5120884">(</span><span class="ident" id="5120885"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120888">.</span><span class="ident" id="5120889">err</span><span class="op" id="5120892">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5120895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120898"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120901">.</span><span class="ident" id="5120902">popWriter</span><span class="op" id="5120911">(</span><span class="op" id="5120912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120915"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120918">.</span><span class="ident" id="5120919">writeMessage</span><span class="op" id="5120931">(</span><span class="ident" id="5120932"><a href="/encoding/gob/encode.go.html#5119763">b</a></span><span class="op" id="5120933">,</span>&nbsp;<span class="ident" id="5120935"><a href="/encoding/gob/encode.go.html#5120776">data</a></span><span class="op" id="5120939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5120942">if</span>&nbsp;<span class="ident" id="5120945"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120948">.</span><span class="ident" id="5120949">err</span>&nbsp;<span class="op" id="5120953">!=</span>&nbsp;<span class="ident" id="5120956">nil</span>&nbsp;<span class="op" id="5120960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120964"><a href="/encoding/gob/error.go.html#5137812">error_</a></span><span class="op" id="5120970">(</span><span class="ident" id="5120971"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120974">.</span><span class="ident" id="5120975">err</span><span class="op" id="5120978">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5120981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5120984"><a href="/encoding/gob/encode.go.html#5119733">enc</a></span><span class="op" id="5120987">.</span><span class="ident" id="5120988">freeEncoderState</span><span class="op" id="5121004">(</span><span class="ident" id="5121005"><a href="/encoding/gob/encode.go.html#5120094">state</a></span><span class="op" id="5121010">)</span><br>
<span class="lineno"></span><span class="op" id="5121012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5121015">//&nbsp;isZero&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;the&nbsp;zero&nbsp;of&nbsp;its&nbsp;type.</span><br>
<span class="lineno">425</span><span class="keyword" id="5121076">func</span>&nbsp;<span class="ident" id="5121081">isZero</span><span class="op" id="5121087">(</span><span class="ident" id="5121088">val</span>&nbsp;<span class="ident" id="5121092"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121099">.</span><span class="ident" id="5121100">Value</span><span class="op" id="5121105">)</span>&nbsp;<span class="builtintype" id="5121107">bool</span>&nbsp;<span class="op" id="5121112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121115">switch</span>&nbsp;<span class="ident" id="5121122"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121125">.</span><span class="ident" id="5121126">Kind</span><span class="op" id="5121130">(</span><span class="op" id="5121131">)</span>&nbsp;<span class="op" id="5121133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121136">case</span>&nbsp;<span class="ident" id="5121141"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121148">.</span><span class="ident" id="5121149">Array</span><span class="op" id="5121154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121158">for</span>&nbsp;<span class="ident" id="5121162">i</span>&nbsp;<span class="op" id="5121164">:=</span>&nbsp;<span class="num" id="5121167">0</span><span class="op" id="5121168">;</span>&nbsp;<span class="ident" id="5121170"><a href="/encoding/gob/encode.go.html#5121162">i</a></span>&nbsp;<span class="op" id="5121172">&lt;</span>&nbsp;<span class="ident" id="5121174"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121177">.</span><span class="ident" id="5121178">Len</span><span class="op" id="5121181">(</span><span class="op" id="5121182">)</span><span class="op" id="5121183">;</span>&nbsp;<span class="ident" id="5121185"><a href="/encoding/gob/encode.go.html#5121162">i</a></span><span class="op" id="5121186">++</span>&nbsp;<span class="op" id="5121189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121194">if</span>&nbsp;<span class="op" id="5121197">!</span><span class="ident" id="5121198"><a href="/encoding/gob/encode.go.html#5121081">isZero</a></span><span class="op" id="5121204">(</span><span class="ident" id="5121205"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121208">.</span><span class="ident" id="5121209">Index</span><span class="op" id="5121214">(</span><span class="ident" id="5121215"><a href="/encoding/gob/encode.go.html#5121162">i</a></span><span class="op" id="5121216">)</span><span class="op" id="5121217">)</span>&nbsp;<span class="op" id="5121219">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121225">return</span>&nbsp;<span class="ident" id="5121232">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5121241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5121245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121249">return</span>&nbsp;<span class="ident" id="5121256">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121262">case</span>&nbsp;<span class="ident" id="5121267"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121274">.</span><span class="ident" id="5121275">Map</span><span class="op" id="5121278">,</span>&nbsp;<span class="ident" id="5121280"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121287">.</span><span class="ident" id="5121288">Slice</span><span class="op" id="5121293">,</span>&nbsp;<span class="ident" id="5121295"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121302">.</span><span class="ident" id="5121303">String</span><span class="op" id="5121309">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121313">return</span>&nbsp;<span class="ident" id="5121320"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121323">.</span><span class="ident" id="5121324">Len</span><span class="op" id="5121327">(</span><span class="op" id="5121328">)</span>&nbsp;<span class="op" id="5121330">==</span>&nbsp;<span class="num" id="5121333">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121336">case</span>&nbsp;<span class="ident" id="5121341"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121348">.</span><span class="ident" id="5121349">Bool</span><span class="op" id="5121353">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121357">return</span>&nbsp;<span class="op" id="5121364">!</span><span class="ident" id="5121365"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121368">.</span><span class="ident" id="5121369">Bool</span><span class="op" id="5121373">(</span><span class="op" id="5121374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121377">case</span>&nbsp;<span class="ident" id="5121382"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121389">.</span><span class="ident" id="5121390">Complex64</span><span class="op" id="5121399">,</span>&nbsp;<span class="ident" id="5121401"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121408">.</span><span class="ident" id="5121409">Complex128</span><span class="op" id="5121419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121423">return</span>&nbsp;<span class="ident" id="5121430"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121433">.</span><span class="ident" id="5121434">Complex</span><span class="op" id="5121441">(</span><span class="op" id="5121442">)</span>&nbsp;<span class="op" id="5121444">==</span>&nbsp;<span class="num" id="5121447">0</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121450">case</span>&nbsp;<span class="ident" id="5121455"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121462">.</span><span class="ident" id="5121463">Chan</span><span class="op" id="5121467">,</span>&nbsp;<span class="ident" id="5121469"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121476">.</span><span class="ident" id="5121477">Func</span><span class="op" id="5121481">,</span>&nbsp;<span class="ident" id="5121483"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121490">.</span><span class="ident" id="5121491">Interface</span><span class="op" id="5121500">,</span>&nbsp;<span class="ident" id="5121502"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121509">.</span><span class="ident" id="5121510">Ptr</span><span class="op" id="5121513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121517">return</span>&nbsp;<span class="ident" id="5121524"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121527">.</span><span class="ident" id="5121528">IsNil</span><span class="op" id="5121533">(</span><span class="op" id="5121534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121537">case</span>&nbsp;<span class="ident" id="5121542"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121549">.</span><span class="ident" id="5121550">Int</span><span class="op" id="5121553">,</span>&nbsp;<span class="ident" id="5121555"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121562">.</span><span class="ident" id="5121563">Int8</span><span class="op" id="5121567">,</span>&nbsp;<span class="ident" id="5121569"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121576">.</span><span class="ident" id="5121577">Int16</span><span class="op" id="5121582">,</span>&nbsp;<span class="ident" id="5121584"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121591">.</span><span class="ident" id="5121592">Int32</span><span class="op" id="5121597">,</span>&nbsp;<span class="ident" id="5121599"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121606">.</span><span class="ident" id="5121607">Int64</span><span class="op" id="5121612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121616">return</span>&nbsp;<span class="ident" id="5121623"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121626">.</span><span class="ident" id="5121627">Int</span><span class="op" id="5121630">(</span><span class="op" id="5121631">)</span>&nbsp;<span class="op" id="5121633">==</span>&nbsp;<span class="num" id="5121636">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121639">case</span>&nbsp;<span class="ident" id="5121644"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121651">.</span><span class="ident" id="5121652">Float32</span><span class="op" id="5121659">,</span>&nbsp;<span class="ident" id="5121661"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121668">.</span><span class="ident" id="5121669">Float64</span><span class="op" id="5121676">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121680">return</span>&nbsp;<span class="ident" id="5121687"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121690">.</span><span class="ident" id="5121691">Float</span><span class="op" id="5121696">(</span><span class="op" id="5121697">)</span>&nbsp;<span class="op" id="5121699">==</span>&nbsp;<span class="num" id="5121702">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121705">case</span>&nbsp;<span class="ident" id="5121710"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121717">.</span><span class="ident" id="5121718">Uint</span><span class="op" id="5121722">,</span>&nbsp;<span class="ident" id="5121724"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121731">.</span><span class="ident" id="5121732">Uint8</span><span class="op" id="5121737">,</span>&nbsp;<span class="ident" id="5121739"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121746">.</span><span class="ident" id="5121747">Uint16</span><span class="op" id="5121753">,</span>&nbsp;<span class="ident" id="5121755"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121762">.</span><span class="ident" id="5121763">Uint32</span><span class="op" id="5121769">,</span>&nbsp;<span class="ident" id="5121771"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121778">.</span><span class="ident" id="5121779">Uint64</span><span class="op" id="5121785">,</span>&nbsp;<span class="ident" id="5121787"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121794">.</span><span class="ident" id="5121795">Uintptr</span><span class="op" id="5121802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121806">return</span>&nbsp;<span class="ident" id="5121813"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121816">.</span><span class="ident" id="5121817">Uint</span><span class="op" id="5121821">(</span><span class="op" id="5121822">)</span>&nbsp;<span class="op" id="5121824">==</span>&nbsp;<span class="num" id="5121827">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121830">case</span>&nbsp;<span class="ident" id="5121835"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5121842">.</span><span class="ident" id="5121843">Struct</span><span class="op" id="5121849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121853">for</span>&nbsp;<span class="ident" id="5121857">i</span>&nbsp;<span class="op" id="5121859">:=</span>&nbsp;<span class="num" id="5121862">0</span><span class="op" id="5121863">;</span>&nbsp;<span class="ident" id="5121865"><a href="/encoding/gob/encode.go.html#5121857">i</a></span>&nbsp;<span class="op" id="5121867">&lt;</span>&nbsp;<span class="ident" id="5121869"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121872">.</span><span class="ident" id="5121873">NumField</span><span class="op" id="5121881">(</span><span class="op" id="5121882">)</span><span class="op" id="5121883">;</span>&nbsp;<span class="ident" id="5121885"><a href="/encoding/gob/encode.go.html#5121857">i</a></span><span class="op" id="5121886">++</span>&nbsp;<span class="op" id="5121889">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121894">if</span>&nbsp;<span class="op" id="5121897">!</span><span class="ident" id="5121898"><a href="/encoding/gob/encode.go.html#5121081">isZero</a></span><span class="op" id="5121904">(</span><span class="ident" id="5121905"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5121908">.</span><span class="ident" id="5121909">Field</span><span class="op" id="5121914">(</span><span class="ident" id="5121915"><a href="/encoding/gob/encode.go.html#5121857">i</a></span><span class="op" id="5121916">)</span><span class="op" id="5121917">)</span>&nbsp;<span class="op" id="5121919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121925">return</span>&nbsp;<span class="ident" id="5121932">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5121941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5121945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5121949">return</span>&nbsp;<span class="ident" id="5121956">true</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5121962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5121965">panic</span><span class="op" id="5121970">(</span><span class="string" id="5121971">&#34;unknown&nbsp;type&nbsp;in&nbsp;isZero&nbsp;&#34;</span>&nbsp;<span class="op" id="5121997">+</span>&nbsp;<span class="ident" id="5121999"><a href="/encoding/gob/encode.go.html#5121088">val</a></span><span class="op" id="5122002">.</span><span class="ident" id="5122003">Type</span><span class="op" id="5122007">(</span><span class="op" id="5122008">)</span><span class="op" id="5122009">.</span><span class="ident" id="5122010">String</span><span class="op" id="5122016">(</span><span class="op" id="5122017">)</span><span class="op" id="5122018">)</span><br>
<span class="lineno"></span><span class="op" id="5122020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5122023">//&nbsp;encGobEncoder&nbsp;encodes&nbsp;a&nbsp;value&nbsp;that&nbsp;implements&nbsp;the&nbsp;GobEncoder&nbsp;interface.</span><br>
<span class="lineno">460</span><span class="comment" id="5122098">//&nbsp;The&nbsp;data&nbsp;is&nbsp;sent&nbsp;as&nbsp;a&nbsp;byte&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5122135">func</span>&nbsp;<span class="op" id="5122140">(</span><span class="ident" id="5122141">enc</span>&nbsp;<span class="op" id="5122145">*</span><span class="ident" id="5122146"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5122153">)</span>&nbsp;<span class="ident" id="5122155">encodeGobEncoder</span><span class="op" id="5122171">(</span><span class="ident" id="5122172">b</span>&nbsp;<span class="op" id="5122174">*</span><span class="ident" id="5122175"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5122184">,</span>&nbsp;<span class="ident" id="5122186">ut</span>&nbsp;<span class="op" id="5122189">*</span><span class="ident" id="5122190"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5122202">,</span>&nbsp;<span class="ident" id="5122204">v</span>&nbsp;<span class="ident" id="5122206"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122213">.</span><span class="ident" id="5122214">Value</span><span class="op" id="5122219">)</span>&nbsp;<span class="op" id="5122221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5122224">//&nbsp;TODO:&nbsp;should&nbsp;we&nbsp;catch&nbsp;panics&nbsp;from&nbsp;the&nbsp;called&nbsp;method?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122282">var</span>&nbsp;<span class="ident" id="5122286">data</span>&nbsp;<span class="op" id="5122291">[</span><span class="op" id="5122292">]</span><span class="builtintype" id="5122293">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122299">var</span>&nbsp;<span class="ident" id="5122303">err</span>&nbsp;<span class="builtintype" id="5122307">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5122314">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;one&nbsp;of&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122345">switch</span>&nbsp;<span class="ident" id="5122352"><a href="/encoding/gob/encode.go.html#5122186">ut</a></span><span class="op" id="5122354">.</span><span class="ident" id="5122355">externalEnc</span>&nbsp;<span class="op" id="5122367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122370">case</span>&nbsp;<span class="ident" id="5122375"><a href="/encoding/gob/type.go.html#5139188">xGob</a></span><span class="op" id="5122379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122383"><a href="/encoding/gob/encode.go.html#5122286">data</a></span><span class="op" id="5122387">,</span>&nbsp;<span class="ident" id="5122389"><a href="/encoding/gob/encode.go.html#5122303">err</a></span>&nbsp;<span class="op" id="5122393">=</span>&nbsp;<span class="ident" id="5122395"><a href="/encoding/gob/encode.go.html#5122204">v</a></span><span class="op" id="5122396">.</span><span class="ident" id="5122397">Interface</span><span class="op" id="5122406">(</span><span class="op" id="5122407">)</span><span class="op" id="5122408">.</span><span class="op" id="5122409">(</span><span class="ident" id="5122410"><a href="/encoding/gob/type.go.html#5161535">GobEncoder</a></span><span class="op" id="5122420">)</span><span class="op" id="5122421">.</span><span class="ident" id="5122422">GobEncode</span><span class="op" id="5122431">(</span><span class="op" id="5122432">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122435">case</span>&nbsp;<span class="ident" id="5122440"><a href="/encoding/gob/type.go.html#5139236">xBinary</a></span><span class="op" id="5122447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122451"><a href="/encoding/gob/encode.go.html#5122286">data</a></span><span class="op" id="5122455">,</span>&nbsp;<span class="ident" id="5122457"><a href="/encoding/gob/encode.go.html#5122303">err</a></span>&nbsp;<span class="op" id="5122461">=</span>&nbsp;<span class="ident" id="5122463"><a href="/encoding/gob/encode.go.html#5122204">v</a></span><span class="op" id="5122464">.</span><span class="ident" id="5122465">Interface</span><span class="op" id="5122474">(</span><span class="op" id="5122475">)</span><span class="op" id="5122476">.</span><span class="op" id="5122477">(</span><span class="ident" id="5122478"><a href="/encoding/gob/encode.go.html#5109218">encoding</a></span><span class="op" id="5122486">.</span><span class="ident" id="5122487">BinaryMarshaler</span><span class="op" id="5122502">)</span><span class="op" id="5122503">.</span><span class="ident" id="5122504">MarshalBinary</span><span class="op" id="5122517">(</span><span class="op" id="5122518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122521">case</span>&nbsp;<span class="ident" id="5122526"><a href="/encoding/gob/type.go.html#5139314">xText</a></span><span class="op" id="5122531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122535"><a href="/encoding/gob/encode.go.html#5122286">data</a></span><span class="op" id="5122539">,</span>&nbsp;<span class="ident" id="5122541"><a href="/encoding/gob/encode.go.html#5122303">err</a></span>&nbsp;<span class="op" id="5122545">=</span>&nbsp;<span class="ident" id="5122547"><a href="/encoding/gob/encode.go.html#5122204">v</a></span><span class="op" id="5122548">.</span><span class="ident" id="5122549">Interface</span><span class="op" id="5122558">(</span><span class="op" id="5122559">)</span><span class="op" id="5122560">.</span><span class="op" id="5122561">(</span><span class="ident" id="5122562"><a href="/encoding/gob/encode.go.html#5109218">encoding</a></span><span class="op" id="5122570">.</span><span class="ident" id="5122571">TextMarshaler</span><span class="op" id="5122584">)</span><span class="op" id="5122585">.</span><span class="ident" id="5122586">MarshalText</span><span class="op" id="5122597">(</span><span class="op" id="5122598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5122601">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5122604">if</span>&nbsp;<span class="ident" id="5122607"><a href="/encoding/gob/encode.go.html#5122303">err</a></span>&nbsp;<span class="op" id="5122611">!=</span>&nbsp;<span class="ident" id="5122614">nil</span>&nbsp;<span class="op" id="5122618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122622"><a href="/encoding/gob/error.go.html#5137812">error_</a></span><span class="op" id="5122628">(</span><span class="ident" id="5122629"><a href="/encoding/gob/encode.go.html#5122303">err</a></span><span class="op" id="5122632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5122635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122638">state</span>&nbsp;<span class="op" id="5122644">:=</span>&nbsp;<span class="ident" id="5122647"><a href="/encoding/gob/encode.go.html#5122141">enc</a></span><span class="op" id="5122650">.</span><span class="ident" id="5122651">newEncoderState</span><span class="op" id="5122666">(</span><span class="ident" id="5122667"><a href="/encoding/gob/encode.go.html#5122172">b</a></span><span class="op" id="5122668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122671"><a href="/encoding/gob/encode.go.html#5122638">state</a></span><span class="op" id="5122676">.</span><span class="ident" id="5122677">fieldnum</span>&nbsp;<span class="op" id="5122686">=</span>&nbsp;<span class="op" id="5122688">-</span><span class="num" id="5122689">1</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122692"><a href="/encoding/gob/encode.go.html#5122638">state</a></span><span class="op" id="5122697">.</span><span class="ident" id="5122698">encodeUint</span><span class="op" id="5122708">(</span><span class="ident" id="5122709">uint64</span><span class="op" id="5122715">(</span><span class="builtinfunc" id="5122716">len</span><span class="op" id="5122719">(</span><span class="ident" id="5122720"><a href="/encoding/gob/encode.go.html#5122286">data</a></span><span class="op" id="5122724">)</span><span class="op" id="5122725">)</span><span class="op" id="5122726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122729"><a href="/encoding/gob/encode.go.html#5122638">state</a></span><span class="op" id="5122734">.</span><span class="ident" id="5122735">b</span><span class="op" id="5122736">.</span><span class="ident" id="5122737">Write</span><span class="op" id="5122742">(</span><span class="ident" id="5122743"><a href="/encoding/gob/encode.go.html#5122286">data</a></span><span class="op" id="5122747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122750"><a href="/encoding/gob/encode.go.html#5122141">enc</a></span><span class="op" id="5122753">.</span><span class="ident" id="5122754">freeEncoderState</span><span class="op" id="5122770">(</span><span class="ident" id="5122771"><a href="/encoding/gob/encode.go.html#5122638">state</a></span><span class="op" id="5122776">)</span><br>
<span class="lineno"></span><span class="op" id="5122778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="5122781">var</span>&nbsp;<span class="ident" id="5122785">encOpTable</span>&nbsp;<span class="op" id="5122796">=</span>&nbsp;<span class="op" id="5122798">[</span><span class="op" id="5122799">...</span><span class="op" id="5122802">]</span><span class="ident" id="5122803"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5122808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122811"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122818">.</span><span class="ident" id="5122819">Bool</span><span class="op" id="5122823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122831"><a href="/encoding/gob/encode.go.html#5113370">encBool</a></span><span class="op" id="5122838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122841"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122848">.</span><span class="ident" id="5122849">Int</span><span class="op" id="5122852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122861"><a href="/encoding/gob/encode.go.html#5113654">encInt</a></span><span class="op" id="5122867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122870"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122877">.</span><span class="ident" id="5122878">Int8</span><span class="op" id="5122882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122890"><a href="/encoding/gob/encode.go.html#5113654">encInt</a></span><span class="op" id="5122896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122899"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122906">.</span><span class="ident" id="5122907">Int16</span><span class="op" id="5122912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122919"><a href="/encoding/gob/encode.go.html#5113654">encInt</a></span><span class="op" id="5122925">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122928"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122935">.</span><span class="ident" id="5122936">Int32</span><span class="op" id="5122941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122948"><a href="/encoding/gob/encode.go.html#5113654">encInt</a></span><span class="op" id="5122954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122957"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122964">.</span><span class="ident" id="5122965">Int64</span><span class="op" id="5122970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122977"><a href="/encoding/gob/encode.go.html#5113654">encInt</a></span><span class="op" id="5122983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5122986"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5122993">.</span><span class="ident" id="5122994">Uint</span><span class="op" id="5122998">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123006"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123016"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123023">.</span><span class="ident" id="5123024">Uint8</span><span class="op" id="5123029">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123036"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123046"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123053">.</span><span class="ident" id="5123054">Uint16</span><span class="op" id="5123060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123066"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123073">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123076"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123083">.</span><span class="ident" id="5123084">Uint32</span><span class="op" id="5123090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123096"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123106"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123113">.</span><span class="ident" id="5123114">Uint64</span><span class="op" id="5123120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123126"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123136"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123143">.</span><span class="ident" id="5123144">Uintptr</span><span class="op" id="5123151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123156"><a href="/encoding/gob/encode.go.html#5113920">encUint</a></span><span class="op" id="5123163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123166"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123173">.</span><span class="ident" id="5123174">Float32</span><span class="op" id="5123181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123186"><a href="/encoding/gob/encode.go.html#5114691">encFloat</a></span><span class="op" id="5123194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123197"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123204">.</span><span class="ident" id="5123205">Float64</span><span class="op" id="5123212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123217"><a href="/encoding/gob/encode.go.html#5114691">encFloat</a></span><span class="op" id="5123225">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123228"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123235">.</span><span class="ident" id="5123236">Complex64</span><span class="op" id="5123245">:</span>&nbsp;&nbsp;<span class="ident" id="5123248"><a href="/encoding/gob/encode.go.html#5115036">encComplex</a></span><span class="op" id="5123258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123261"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123268">.</span><span class="ident" id="5123269">Complex128</span><span class="op" id="5123279">:</span>&nbsp;<span class="ident" id="5123281"><a href="/encoding/gob/encode.go.html#5115036">encComplex</a></span><span class="op" id="5123291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123294"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123301">.</span><span class="ident" id="5123302">String</span><span class="op" id="5123308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123314"><a href="/encoding/gob/encode.go.html#5115746">encString</a></span><span class="op" id="5123323">,</span><br>
<span class="lineno"></span><span class="op" id="5123325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="comment" id="5123328">//&nbsp;encOpFor&nbsp;returns&nbsp;(a&nbsp;pointer&nbsp;to)&nbsp;the&nbsp;encoding&nbsp;op&nbsp;for&nbsp;the&nbsp;base&nbsp;type&nbsp;under&nbsp;rt&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5123410">//&nbsp;the&nbsp;indirection&nbsp;count&nbsp;to&nbsp;reach&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5123448">func</span>&nbsp;<span class="ident" id="5123453">encOpFor</span><span class="op" id="5123461">(</span><span class="ident" id="5123462">rt</span>&nbsp;<span class="ident" id="5123465"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123472">.</span><span class="ident" id="5123473">Type</span><span class="op" id="5123477">,</span>&nbsp;<span class="ident" id="5123479">inProgress</span>&nbsp;<span class="keyword" id="5123490">map</span><span class="op" id="5123493">[</span><span class="ident" id="5123494"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5123501">.</span><span class="ident" id="5123502">Type</span><span class="op" id="5123506">]</span><span class="op" id="5123507">*</span><span class="ident" id="5123508"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5123513">,</span>&nbsp;<span class="ident" id="5123515">building</span>&nbsp;<span class="keyword" id="5123524">map</span><span class="op" id="5123527">[</span><span class="op" id="5123528">*</span><span class="ident" id="5123529"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5123537">]</span><span class="builtintype" id="5123538">bool</span><span class="op" id="5123542">)</span>&nbsp;<span class="op" id="5123544">(</span><span class="op" id="5123545">*</span><span class="ident" id="5123546"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5123551">,</span>&nbsp;<span class="builtintype" id="5123553">int</span><span class="op" id="5123556">)</span>&nbsp;<span class="op" id="5123558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123561">ut</span>&nbsp;<span class="op" id="5123564">:=</span>&nbsp;<span class="ident" id="5123567"><a href="/encoding/gob/type.go.html#5143544">userType</a></span><span class="op" id="5123575">(</span><span class="ident" id="5123576"><a href="/encoding/gob/encode.go.html#5123462">rt</a></span><span class="op" id="5123578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5123581">//&nbsp;If&nbsp;the&nbsp;type&nbsp;implements&nbsp;GobEncoder,&nbsp;we&nbsp;handle&nbsp;it&nbsp;without&nbsp;further&nbsp;processing.</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123661">if</span>&nbsp;<span class="ident" id="5123664"><a href="/encoding/gob/encode.go.html#5123561">ut</a></span><span class="op" id="5123666">.</span><span class="ident" id="5123667">externalEnc</span>&nbsp;<span class="op" id="5123679">!=</span>&nbsp;<span class="num" id="5123682">0</span>&nbsp;<span class="op" id="5123684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123688">return</span>&nbsp;<span class="ident" id="5123695"><a href="/encoding/gob/encode.go.html#5126353">gobEncodeOpFor</a></span><span class="op" id="5123709">(</span><span class="ident" id="5123710"><a href="/encoding/gob/encode.go.html#5123561">ut</a></span><span class="op" id="5123712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5123715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5123718">//&nbsp;If&nbsp;this&nbsp;type&nbsp;is&nbsp;already&nbsp;in&nbsp;progress,&nbsp;it&#39;s&nbsp;a&nbsp;recursive&nbsp;type&nbsp;(e.g.&nbsp;map[string]*T).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5123803">//&nbsp;Return&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;op&nbsp;we&#39;re&nbsp;already&nbsp;building.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123860">if</span>&nbsp;<span class="ident" id="5123863">opPtr</span>&nbsp;<span class="op" id="5123869">:=</span>&nbsp;<span class="ident" id="5123872"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5123882">[</span><span class="ident" id="5123883"><a href="/encoding/gob/encode.go.html#5123462">rt</a></span><span class="op" id="5123885">]</span><span class="op" id="5123886">;</span>&nbsp;<span class="ident" id="5123888"><a href="/encoding/gob/encode.go.html#5123863">opPtr</a></span>&nbsp;<span class="op" id="5123894">!=</span>&nbsp;<span class="ident" id="5123897">nil</span>&nbsp;<span class="op" id="5123901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123905">return</span>&nbsp;<span class="ident" id="5123912"><a href="/encoding/gob/encode.go.html#5123863">opPtr</a></span><span class="op" id="5123917">,</span>&nbsp;<span class="ident" id="5123919"><a href="/encoding/gob/encode.go.html#5123561">ut</a></span><span class="op" id="5123921">.</span><span class="ident" id="5123922">indir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5123929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123932">typ</span>&nbsp;<span class="op" id="5123936">:=</span>&nbsp;<span class="ident" id="5123939"><a href="/encoding/gob/encode.go.html#5123561">ut</a></span><span class="op" id="5123941">.</span><span class="ident" id="5123942">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123948">indir</span>&nbsp;<span class="op" id="5123954">:=</span>&nbsp;<span class="ident" id="5123957"><a href="/encoding/gob/encode.go.html#5123561">ut</a></span><span class="op" id="5123959">.</span><span class="ident" id="5123960">indir</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5123967">k</span>&nbsp;<span class="op" id="5123969">:=</span>&nbsp;<span class="ident" id="5123972"><a href="/encoding/gob/encode.go.html#5123932">typ</a></span><span class="op" id="5123975">.</span><span class="ident" id="5123976">Kind</span><span class="op" id="5123980">(</span><span class="op" id="5123981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123984">var</span>&nbsp;<span class="ident" id="5123988">op</span>&nbsp;<span class="ident" id="5123991"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5123998">if</span>&nbsp;<span class="builtintype" id="5124001">int</span><span class="op" id="5124004">(</span><span class="ident" id="5124005"><a href="/encoding/gob/encode.go.html#5123967">k</a></span><span class="op" id="5124006">)</span>&nbsp;<span class="op" id="5124008">&lt;</span>&nbsp;<span class="builtinfunc" id="5124010">len</span><span class="op" id="5124013">(</span><span class="ident" id="5124014"><a href="/encoding/gob/encode.go.html#5122785">encOpTable</a></span><span class="op" id="5124024">)</span>&nbsp;<span class="op" id="5124026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124030"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5124033">=</span>&nbsp;<span class="ident" id="5124035"><a href="/encoding/gob/encode.go.html#5122785">encOpTable</a></span><span class="op" id="5124045">[</span><span class="ident" id="5124046"><a href="/encoding/gob/encode.go.html#5123967">k</a></span><span class="op" id="5124047">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5124050">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124053">if</span>&nbsp;<span class="ident" id="5124056"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5124059">==</span>&nbsp;<span class="ident" id="5124062">nil</span>&nbsp;<span class="op" id="5124066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124070"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5124080">[</span><span class="ident" id="5124081"><a href="/encoding/gob/encode.go.html#5123462">rt</a></span><span class="op" id="5124083">]</span>&nbsp;<span class="op" id="5124085">=</span>&nbsp;<span class="op" id="5124087">&amp;</span><span class="ident" id="5124088"><a href="/encoding/gob/encode.go.html#5123988">op</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5124093">//&nbsp;Special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124112">switch</span>&nbsp;<span class="ident" id="5124119">t</span>&nbsp;<span class="op" id="5124121">:=</span>&nbsp;<span class="ident" id="5124124"><a href="/encoding/gob/encode.go.html#5123932">typ</a></span><span class="op" id="5124127">;</span>&nbsp;<span class="ident" id="5124129"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124130">.</span><span class="ident" id="5124131">Kind</span><span class="op" id="5124135">(</span><span class="op" id="5124136">)</span>&nbsp;<span class="op" id="5124138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124142">case</span>&nbsp;<span class="ident" id="5124147"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5124154">.</span><span class="ident" id="5124155">Slice</span><span class="op" id="5124160">:</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124165">if</span>&nbsp;<span class="ident" id="5124168"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124169">.</span><span class="ident" id="5124170">Elem</span><span class="op" id="5124174">(</span><span class="op" id="5124175">)</span><span class="op" id="5124176">.</span><span class="ident" id="5124177">Kind</span><span class="op" id="5124181">(</span><span class="op" id="5124182">)</span>&nbsp;<span class="op" id="5124184">==</span>&nbsp;<span class="ident" id="5124187"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5124194">.</span><span class="ident" id="5124195">Uint8</span>&nbsp;<span class="op" id="5124201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124207"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5124210">=</span>&nbsp;<span class="ident" id="5124212"><a href="/encoding/gob/encode.go.html#5115425">encUint8Array</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124230">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5124239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5124244">//&nbsp;Slices&nbsp;have&nbsp;a&nbsp;header;&nbsp;we&nbsp;decode&nbsp;it&nbsp;to&nbsp;find&nbsp;the&nbsp;underlying&nbsp;array.</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124315">elemOp</span><span class="op" id="5124321">,</span>&nbsp;<span class="ident" id="5124323">elemIndir</span>&nbsp;<span class="op" id="5124333">:=</span>&nbsp;<span class="ident" id="5124336"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5124344">(</span><span class="ident" id="5124345"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124346">.</span><span class="ident" id="5124347">Elem</span><span class="op" id="5124351">(</span><span class="op" id="5124352">)</span><span class="op" id="5124353">,</span>&nbsp;<span class="ident" id="5124355"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5124365">,</span>&nbsp;<span class="ident" id="5124367"><a href="/encoding/gob/encode.go.html#5123515">building</a></span><span class="op" id="5124375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124380">helper</span>&nbsp;<span class="op" id="5124387">:=</span>&nbsp;<span class="ident" id="5124390"><a href="/encoding/gob/enc_helpers.go.html#5099722">encSliceHelper</a></span><span class="op" id="5124404">[</span><span class="ident" id="5124405"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124406">.</span><span class="ident" id="5124407">Elem</span><span class="op" id="5124411">(</span><span class="op" id="5124412">)</span><span class="op" id="5124413">.</span><span class="ident" id="5124414">Kind</span><span class="op" id="5124418">(</span><span class="op" id="5124419">)</span><span class="op" id="5124420">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124425"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5124428">=</span>&nbsp;<span class="keyword" id="5124430">func</span><span class="op" id="5124434">(</span><span class="ident" id="5124435">i</span>&nbsp;<span class="op" id="5124437">*</span><span class="ident" id="5124438"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5124446">,</span>&nbsp;<span class="ident" id="5124448">state</span>&nbsp;<span class="op" id="5124454">*</span><span class="ident" id="5124455"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5124467">,</span>&nbsp;<span class="ident" id="5124469">slice</span>&nbsp;<span class="ident" id="5124475"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5124482">.</span><span class="ident" id="5124483">Value</span><span class="op" id="5124488">)</span>&nbsp;<span class="op" id="5124490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124496">if</span>&nbsp;<span class="op" id="5124499">!</span><span class="ident" id="5124500"><a href="/encoding/gob/encode.go.html#5124448">state</a></span><span class="op" id="5124505">.</span><span class="ident" id="5124506">sendZero</span>&nbsp;<span class="op" id="5124515">&amp;&amp;</span>&nbsp;<span class="ident" id="5124518"><a href="/encoding/gob/encode.go.html#5124469">slice</a></span><span class="op" id="5124523">.</span><span class="ident" id="5124524">Len</span><span class="op" id="5124527">(</span><span class="op" id="5124528">)</span>&nbsp;<span class="op" id="5124530">==</span>&nbsp;<span class="num" id="5124533">0</span>&nbsp;<span class="op" id="5124535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124542">return</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5124553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124559"><a href="/encoding/gob/encode.go.html#5124448">state</a></span><span class="op" id="5124564">.</span><span class="ident" id="5124565">update</span><span class="op" id="5124571">(</span><span class="ident" id="5124572"><a href="/encoding/gob/encode.go.html#5124435">i</a></span><span class="op" id="5124573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124579"><a href="/encoding/gob/encode.go.html#5124448">state</a></span><span class="op" id="5124584">.</span><span class="ident" id="5124585">enc</span><span class="op" id="5124588">.</span><span class="ident" id="5124589">encodeArray</span><span class="op" id="5124600">(</span><span class="ident" id="5124601"><a href="/encoding/gob/encode.go.html#5124448">state</a></span><span class="op" id="5124606">.</span><span class="ident" id="5124607">b</span><span class="op" id="5124608">,</span>&nbsp;<span class="ident" id="5124610"><a href="/encoding/gob/encode.go.html#5124469">slice</a></span><span class="op" id="5124615">,</span>&nbsp;<span class="op" id="5124617">*</span><span class="ident" id="5124618"><a href="/encoding/gob/encode.go.html#5124315">elemOp</a></span><span class="op" id="5124624">,</span>&nbsp;<span class="ident" id="5124626"><a href="/encoding/gob/encode.go.html#5124323">elemIndir</a></span><span class="op" id="5124635">,</span>&nbsp;<span class="ident" id="5124637"><a href="/encoding/gob/encode.go.html#5124469">slice</a></span><span class="op" id="5124642">.</span><span class="ident" id="5124643">Len</span><span class="op" id="5124646">(</span><span class="op" id="5124647">)</span><span class="op" id="5124648">,</span>&nbsp;<span class="ident" id="5124650"><a href="/encoding/gob/encode.go.html#5124380">helper</a></span><span class="op" id="5124656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5124661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124665">case</span>&nbsp;<span class="ident" id="5124670"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5124677">.</span><span class="ident" id="5124678">Array</span><span class="op" id="5124683">:</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5124688">//&nbsp;True&nbsp;arrays&nbsp;have&nbsp;size&nbsp;in&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124729">elemOp</span><span class="op" id="5124735">,</span>&nbsp;<span class="ident" id="5124737">elemIndir</span>&nbsp;<span class="op" id="5124747">:=</span>&nbsp;<span class="ident" id="5124750"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5124758">(</span><span class="ident" id="5124759"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124760">.</span><span class="ident" id="5124761">Elem</span><span class="op" id="5124765">(</span><span class="op" id="5124766">)</span><span class="op" id="5124767">,</span>&nbsp;<span class="ident" id="5124769"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5124779">,</span>&nbsp;<span class="ident" id="5124781"><a href="/encoding/gob/encode.go.html#5123515">building</a></span><span class="op" id="5124789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124794">helper</span>&nbsp;<span class="op" id="5124801">:=</span>&nbsp;<span class="ident" id="5124804"><a href="/encoding/gob/enc_helpers.go.html#5099080">encArrayHelper</a></span><span class="op" id="5124818">[</span><span class="ident" id="5124819"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5124820">.</span><span class="ident" id="5124821">Elem</span><span class="op" id="5124825">(</span><span class="op" id="5124826">)</span><span class="op" id="5124827">.</span><span class="ident" id="5124828">Kind</span><span class="op" id="5124832">(</span><span class="op" id="5124833">)</span><span class="op" id="5124834">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124839"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5124842">=</span>&nbsp;<span class="keyword" id="5124844">func</span><span class="op" id="5124848">(</span><span class="ident" id="5124849">i</span>&nbsp;<span class="op" id="5124851">*</span><span class="ident" id="5124852"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5124860">,</span>&nbsp;<span class="ident" id="5124862">state</span>&nbsp;<span class="op" id="5124868">*</span><span class="ident" id="5124869"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5124881">,</span>&nbsp;<span class="ident" id="5124883">array</span>&nbsp;<span class="ident" id="5124889"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5124896">.</span><span class="ident" id="5124897">Value</span><span class="op" id="5124902">)</span>&nbsp;<span class="op" id="5124904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124910"><a href="/encoding/gob/encode.go.html#5124862">state</a></span><span class="op" id="5124915">.</span><span class="ident" id="5124916">update</span><span class="op" id="5124922">(</span><span class="ident" id="5124923"><a href="/encoding/gob/encode.go.html#5124849">i</a></span><span class="op" id="5124924">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5124930"><a href="/encoding/gob/encode.go.html#5124862">state</a></span><span class="op" id="5124935">.</span><span class="ident" id="5124936">enc</span><span class="op" id="5124939">.</span><span class="ident" id="5124940">encodeArray</span><span class="op" id="5124951">(</span><span class="ident" id="5124952"><a href="/encoding/gob/encode.go.html#5124862">state</a></span><span class="op" id="5124957">.</span><span class="ident" id="5124958">b</span><span class="op" id="5124959">,</span>&nbsp;<span class="ident" id="5124961"><a href="/encoding/gob/encode.go.html#5124883">array</a></span><span class="op" id="5124966">,</span>&nbsp;<span class="op" id="5124968">*</span><span class="ident" id="5124969"><a href="/encoding/gob/encode.go.html#5124729">elemOp</a></span><span class="op" id="5124975">,</span>&nbsp;<span class="ident" id="5124977"><a href="/encoding/gob/encode.go.html#5124737">elemIndir</a></span><span class="op" id="5124986">,</span>&nbsp;<span class="ident" id="5124988"><a href="/encoding/gob/encode.go.html#5124883">array</a></span><span class="op" id="5124993">.</span><span class="ident" id="5124994">Len</span><span class="op" id="5124997">(</span><span class="op" id="5124998">)</span><span class="op" id="5124999">,</span>&nbsp;<span class="ident" id="5125001"><a href="/encoding/gob/encode.go.html#5124794">helper</a></span><span class="op" id="5125007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5125012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5125016">case</span>&nbsp;<span class="ident" id="5125021"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5125028">.</span><span class="ident" id="5125029">Map</span><span class="op" id="5125032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125037">keyOp</span><span class="op" id="5125042">,</span>&nbsp;<span class="ident" id="5125044">keyIndir</span>&nbsp;<span class="op" id="5125053">:=</span>&nbsp;<span class="ident" id="5125056"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5125064">(</span><span class="ident" id="5125065"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5125066">.</span><span class="ident" id="5125067">Key</span><span class="op" id="5125070">(</span><span class="op" id="5125071">)</span><span class="op" id="5125072">,</span>&nbsp;<span class="ident" id="5125074"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5125084">,</span>&nbsp;<span class="ident" id="5125086"><a href="/encoding/gob/encode.go.html#5123515">building</a></span><span class="op" id="5125094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125099">elemOp</span><span class="op" id="5125105">,</span>&nbsp;<span class="ident" id="5125107">elemIndir</span>&nbsp;<span class="op" id="5125117">:=</span>&nbsp;<span class="ident" id="5125120"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5125128">(</span><span class="ident" id="5125129"><a href="/encoding/gob/encode.go.html#5124119">t</a></span><span class="op" id="5125130">.</span><span class="ident" id="5125131">Elem</span><span class="op" id="5125135">(</span><span class="op" id="5125136">)</span><span class="op" id="5125137">,</span>&nbsp;<span class="ident" id="5125139"><a href="/encoding/gob/encode.go.html#5123479">inProgress</a></span><span class="op" id="5125149">,</span>&nbsp;<span class="ident" id="5125151"><a href="/encoding/gob/encode.go.html#5123515">building</a></span><span class="op" id="5125159">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125164"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5125167">=</span>&nbsp;<span class="keyword" id="5125169">func</span><span class="op" id="5125173">(</span><span class="ident" id="5125174">i</span>&nbsp;<span class="op" id="5125176">*</span><span class="ident" id="5125177"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5125185">,</span>&nbsp;<span class="ident" id="5125187">state</span>&nbsp;<span class="op" id="5125193">*</span><span class="ident" id="5125194"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5125206">,</span>&nbsp;<span class="ident" id="5125208">mv</span>&nbsp;<span class="ident" id="5125211"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5125218">.</span><span class="ident" id="5125219">Value</span><span class="op" id="5125224">)</span>&nbsp;<span class="op" id="5125226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5125232">//&nbsp;We&nbsp;send&nbsp;zero-length&nbsp;(but&nbsp;non-nil)&nbsp;maps&nbsp;because&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5125290">//&nbsp;receiver&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;map.&nbsp;&nbsp;(Maps&nbsp;don&#39;t&nbsp;use&nbsp;append.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5125359">if</span>&nbsp;<span class="op" id="5125362">!</span><span class="ident" id="5125363"><a href="/encoding/gob/encode.go.html#5125187">state</a></span><span class="op" id="5125368">.</span><span class="ident" id="5125369">sendZero</span>&nbsp;<span class="op" id="5125378">&amp;&amp;</span>&nbsp;<span class="ident" id="5125381"><a href="/encoding/gob/encode.go.html#5125208">mv</a></span><span class="op" id="5125383">.</span><span class="ident" id="5125384">IsNil</span><span class="op" id="5125389">(</span><span class="op" id="5125390">)</span>&nbsp;<span class="op" id="5125392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5125399">return</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5125410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125416"><a href="/encoding/gob/encode.go.html#5125187">state</a></span><span class="op" id="5125421">.</span><span class="ident" id="5125422">update</span><span class="op" id="5125428">(</span><span class="ident" id="5125429"><a href="/encoding/gob/encode.go.html#5125174">i</a></span><span class="op" id="5125430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125436"><a href="/encoding/gob/encode.go.html#5125187">state</a></span><span class="op" id="5125441">.</span><span class="ident" id="5125442">enc</span><span class="op" id="5125445">.</span><span class="ident" id="5125446">encodeMap</span><span class="op" id="5125455">(</span><span class="ident" id="5125456"><a href="/encoding/gob/encode.go.html#5125187">state</a></span><span class="op" id="5125461">.</span><span class="ident" id="5125462">b</span><span class="op" id="5125463">,</span>&nbsp;<span class="ident" id="5125465"><a href="/encoding/gob/encode.go.html#5125208">mv</a></span><span class="op" id="5125467">,</span>&nbsp;<span class="op" id="5125469">*</span><span class="ident" id="5125470"><a href="/encoding/gob/encode.go.html#5125037">keyOp</a></span><span class="op" id="5125475">,</span>&nbsp;<span class="op" id="5125477">*</span><span class="ident" id="5125478"><a href="/encoding/gob/encode.go.html#5125099">elemOp</a></span><span class="op" id="5125484">,</span>&nbsp;<span class="ident" id="5125486"><a href="/encoding/gob/encode.go.html#5125044">keyIndir</a></span><span class="op" id="5125494">,</span>&nbsp;<span class="ident" id="5125496"><a href="/encoding/gob/encode.go.html#5125107">elemIndir</a></span><span class="op" id="5125505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5125510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5125514">case</span>&nbsp;<span class="ident" id="5125519"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5125526">.</span><span class="ident" id="5125527">Struct</span><span class="op" id="5125533">:</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5125538">//&nbsp;Generate&nbsp;a&nbsp;closure&nbsp;that&nbsp;calls&nbsp;out&nbsp;to&nbsp;the&nbsp;engine&nbsp;for&nbsp;the&nbsp;nested&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125613"><a href="/encoding/gob/encode.go.html#5128080">getEncEngine</a></span><span class="op" id="5125625">(</span><span class="ident" id="5125626"><a href="/encoding/gob/type.go.html#5143544">userType</a></span><span class="op" id="5125634">(</span><span class="ident" id="5125635"><a href="/encoding/gob/encode.go.html#5123932">typ</a></span><span class="op" id="5125638">)</span><span class="op" id="5125639">,</span>&nbsp;<span class="ident" id="5125641"><a href="/encoding/gob/encode.go.html#5123515">building</a></span><span class="op" id="5125649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125654">info</span>&nbsp;<span class="op" id="5125659">:=</span>&nbsp;<span class="ident" id="5125662"><a href="/encoding/gob/type.go.html#5160730">mustGetTypeInfo</a></span><span class="op" id="5125677">(</span><span class="ident" id="5125678"><a href="/encoding/gob/encode.go.html#5123932">typ</a></span><span class="op" id="5125681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125686"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5125689">=</span>&nbsp;<span class="keyword" id="5125691">func</span><span class="op" id="5125695">(</span><span class="ident" id="5125696">i</span>&nbsp;<span class="op" id="5125698">*</span><span class="ident" id="5125699"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5125707">,</span>&nbsp;<span class="ident" id="5125709">state</span>&nbsp;<span class="op" id="5125715">*</span><span class="ident" id="5125716"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5125728">,</span>&nbsp;<span class="ident" id="5125730">sv</span>&nbsp;<span class="ident" id="5125733"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5125740">.</span><span class="ident" id="5125741">Value</span><span class="op" id="5125746">)</span>&nbsp;<span class="op" id="5125748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125754"><a href="/encoding/gob/encode.go.html#5125709">state</a></span><span class="op" id="5125759">.</span><span class="ident" id="5125760">update</span><span class="op" id="5125766">(</span><span class="ident" id="5125767"><a href="/encoding/gob/encode.go.html#5125696">i</a></span><span class="op" id="5125768">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5125774">//&nbsp;indirect&nbsp;through&nbsp;info&nbsp;to&nbsp;delay&nbsp;evaluation&nbsp;for&nbsp;recursive&nbsp;structs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125845">enc</span>&nbsp;<span class="op" id="5125849">:=</span>&nbsp;<span class="ident" id="5125852"><a href="/encoding/gob/encode.go.html#5125654">info</a></span><span class="op" id="5125856">.</span><span class="ident" id="5125857">encoder</span><span class="op" id="5125864">.</span><span class="ident" id="5125865">Load</span><span class="op" id="5125869">(</span><span class="op" id="5125870">)</span><span class="op" id="5125871">.</span><span class="op" id="5125872">(</span><span class="op" id="5125873">*</span><span class="ident" id="5125874"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5125883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125889"><a href="/encoding/gob/encode.go.html#5125709">state</a></span><span class="op" id="5125894">.</span><span class="ident" id="5125895">enc</span><span class="op" id="5125898">.</span><span class="ident" id="5125899">encodeStruct</span><span class="op" id="5125911">(</span><span class="ident" id="5125912"><a href="/encoding/gob/encode.go.html#5125709">state</a></span><span class="op" id="5125917">.</span><span class="ident" id="5125918">b</span><span class="op" id="5125919">,</span>&nbsp;<span class="ident" id="5125921"><a href="/encoding/gob/encode.go.html#5125845">enc</a></span><span class="op" id="5125924">,</span>&nbsp;<span class="ident" id="5125926"><a href="/encoding/gob/encode.go.html#5125730">sv</a></span><span class="op" id="5125928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5125933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5125937">case</span>&nbsp;<span class="ident" id="5125942"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5125949">.</span><span class="ident" id="5125950">Interface</span><span class="op" id="5125959">:</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5125964"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5125967">=</span>&nbsp;<span class="keyword" id="5125969">func</span><span class="op" id="5125973">(</span><span class="ident" id="5125974">i</span>&nbsp;<span class="op" id="5125976">*</span><span class="ident" id="5125977"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5125985">,</span>&nbsp;<span class="ident" id="5125987">state</span>&nbsp;<span class="op" id="5125993">*</span><span class="ident" id="5125994"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5126006">,</span>&nbsp;<span class="ident" id="5126008">iv</span>&nbsp;<span class="ident" id="5126011"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5126018">.</span><span class="ident" id="5126019">Value</span><span class="op" id="5126024">)</span>&nbsp;<span class="op" id="5126026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126032">if</span>&nbsp;<span class="op" id="5126035">!</span><span class="ident" id="5126036"><a href="/encoding/gob/encode.go.html#5125987">state</a></span><span class="op" id="5126041">.</span><span class="ident" id="5126042">sendZero</span>&nbsp;<span class="op" id="5126051">&amp;&amp;</span>&nbsp;<span class="op" id="5126054">(</span><span class="op" id="5126055">!</span><span class="ident" id="5126056"><a href="/encoding/gob/encode.go.html#5126008">iv</a></span><span class="op" id="5126058">.</span><span class="ident" id="5126059">IsValid</span><span class="op" id="5126066">(</span><span class="op" id="5126067">)</span>&nbsp;<span class="op" id="5126069">||</span>&nbsp;<span class="ident" id="5126072"><a href="/encoding/gob/encode.go.html#5126008">iv</a></span><span class="op" id="5126074">.</span><span class="ident" id="5126075">IsNil</span><span class="op" id="5126080">(</span><span class="op" id="5126081">)</span><span class="op" id="5126082">)</span>&nbsp;<span class="op" id="5126084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126091">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126108"><a href="/encoding/gob/encode.go.html#5125987">state</a></span><span class="op" id="5126113">.</span><span class="ident" id="5126114">update</span><span class="op" id="5126120">(</span><span class="ident" id="5126121"><a href="/encoding/gob/encode.go.html#5125974">i</a></span><span class="op" id="5126122">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126128"><a href="/encoding/gob/encode.go.html#5125987">state</a></span><span class="op" id="5126133">.</span><span class="ident" id="5126134">enc</span><span class="op" id="5126137">.</span><span class="ident" id="5126138">encodeInterface</span><span class="op" id="5126153">(</span><span class="ident" id="5126154"><a href="/encoding/gob/encode.go.html#5125987">state</a></span><span class="op" id="5126159">.</span><span class="ident" id="5126160">b</span><span class="op" id="5126161">,</span>&nbsp;<span class="ident" id="5126163"><a href="/encoding/gob/encode.go.html#5126008">iv</a></span><span class="op" id="5126165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126180">if</span>&nbsp;<span class="ident" id="5126183"><a href="/encoding/gob/encode.go.html#5123988">op</a></span>&nbsp;<span class="op" id="5126186">==</span>&nbsp;<span class="ident" id="5126189">nil</span>&nbsp;<span class="op" id="5126193">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126197"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5126203">(</span><span class="string" id="5126204">&#34;can&#39;t&nbsp;happen:&nbsp;encode&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5126234">,</span>&nbsp;<span class="ident" id="5126236"><a href="/encoding/gob/encode.go.html#5123462">rt</a></span><span class="op" id="5126238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126244">return</span>&nbsp;<span class="op" id="5126251">&amp;</span><span class="ident" id="5126252"><a href="/encoding/gob/encode.go.html#5123988">op</a></span><span class="op" id="5126254">,</span>&nbsp;<span class="ident" id="5126256"><a href="/encoding/gob/encode.go.html#5123948">indir</a></span><br>
<span class="lineno"></span><span class="op" id="5126262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5126265">//&nbsp;gobEncodeOpFor&nbsp;returns&nbsp;the&nbsp;op&nbsp;for&nbsp;a&nbsp;type&nbsp;that&nbsp;is&nbsp;known&nbsp;to&nbsp;implement&nbsp;GobEncoder.</span><br>
<span class="lineno"></span><span class="keyword" id="5126348">func</span>&nbsp;<span class="ident" id="5126353">gobEncodeOpFor</span><span class="op" id="5126367">(</span><span class="ident" id="5126368">ut</span>&nbsp;<span class="op" id="5126371">*</span><span class="ident" id="5126372"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5126384">)</span>&nbsp;<span class="op" id="5126386">(</span><span class="op" id="5126387">*</span><span class="ident" id="5126388"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5126393">,</span>&nbsp;<span class="builtintype" id="5126395">int</span><span class="op" id="5126398">)</span>&nbsp;<span class="op" id="5126400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126403">rt</span>&nbsp;<span class="op" id="5126406">:=</span>&nbsp;<span class="ident" id="5126409"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126411">.</span><span class="ident" id="5126412">user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126418">if</span>&nbsp;<span class="ident" id="5126421"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126423">.</span><span class="ident" id="5126424">encIndir</span>&nbsp;<span class="op" id="5126433">==</span>&nbsp;<span class="op" id="5126436">-</span><span class="num" id="5126437">1</span>&nbsp;<span class="op" id="5126439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126443"><a href="/encoding/gob/encode.go.html#5126403">rt</a></span>&nbsp;<span class="op" id="5126446">=</span>&nbsp;<span class="ident" id="5126448"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5126455">.</span><span class="ident" id="5126456">PtrTo</span><span class="op" id="5126461">(</span><span class="ident" id="5126462"><a href="/encoding/gob/encode.go.html#5126403">rt</a></span><span class="op" id="5126464">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126467">}</span>&nbsp;<span class="keyword" id="5126469">else</span>&nbsp;<span class="keyword" id="5126474">if</span>&nbsp;<span class="ident" id="5126477"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126479">.</span><span class="ident" id="5126480">encIndir</span>&nbsp;<span class="op" id="5126489">&gt;</span>&nbsp;<span class="num" id="5126491">0</span>&nbsp;<span class="op" id="5126493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126497">for</span>&nbsp;<span class="ident" id="5126501">i</span>&nbsp;<span class="op" id="5126503">:=</span>&nbsp;<span class="builtintype" id="5126506">int8</span><span class="op" id="5126510">(</span><span class="num" id="5126511">0</span><span class="op" id="5126512">)</span><span class="op" id="5126513">;</span>&nbsp;<span class="ident" id="5126515"><a href="/encoding/gob/encode.go.html#5126501">i</a></span>&nbsp;<span class="op" id="5126517">&lt;</span>&nbsp;<span class="ident" id="5126519"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126521">.</span><span class="ident" id="5126522">encIndir</span><span class="op" id="5126530">;</span>&nbsp;<span class="ident" id="5126532"><a href="/encoding/gob/encode.go.html#5126501">i</a></span><span class="op" id="5126533">++</span>&nbsp;<span class="op" id="5126536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126541"><a href="/encoding/gob/encode.go.html#5126403">rt</a></span>&nbsp;<span class="op" id="5126544">=</span>&nbsp;<span class="ident" id="5126546"><a href="/encoding/gob/encode.go.html#5126403">rt</a></span><span class="op" id="5126548">.</span><span class="ident" id="5126549">Elem</span><span class="op" id="5126553">(</span><span class="op" id="5126554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126561">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126564">var</span>&nbsp;<span class="ident" id="5126568">op</span>&nbsp;<span class="ident" id="5126571"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126578"><a href="/encoding/gob/encode.go.html#5126568">op</a></span>&nbsp;<span class="op" id="5126581">=</span>&nbsp;<span class="keyword" id="5126583">func</span><span class="op" id="5126587">(</span><span class="ident" id="5126588">i</span>&nbsp;<span class="op" id="5126590">*</span><span class="ident" id="5126591"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5126599">,</span>&nbsp;<span class="ident" id="5126601">state</span>&nbsp;<span class="op" id="5126607">*</span><span class="ident" id="5126608"><a href="/encoding/gob/encode.go.html#5109586">encoderState</a></span><span class="op" id="5126620">,</span>&nbsp;<span class="ident" id="5126622">v</span>&nbsp;<span class="ident" id="5126624"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5126631">.</span><span class="ident" id="5126632">Value</span><span class="op" id="5126637">)</span>&nbsp;<span class="op" id="5126639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126643">if</span>&nbsp;<span class="ident" id="5126646"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126648">.</span><span class="ident" id="5126649">encIndir</span>&nbsp;<span class="op" id="5126658">==</span>&nbsp;<span class="op" id="5126661">-</span><span class="num" id="5126662">1</span>&nbsp;<span class="op" id="5126664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5126669">//&nbsp;Need&nbsp;to&nbsp;climb&nbsp;up&nbsp;one&nbsp;level&nbsp;to&nbsp;turn&nbsp;value&nbsp;into&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126730">if</span>&nbsp;<span class="op" id="5126733">!</span><span class="ident" id="5126734"><a href="/encoding/gob/encode.go.html#5126622">v</a></span><span class="op" id="5126735">.</span><span class="ident" id="5126736">CanAddr</span><span class="op" id="5126743">(</span><span class="op" id="5126744">)</span>&nbsp;<span class="op" id="5126746">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126752"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5126758">(</span><span class="string" id="5126759">&#34;unaddressable&nbsp;value&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5126791">,</span>&nbsp;<span class="ident" id="5126793"><a href="/encoding/gob/encode.go.html#5126403">rt</a></span><span class="op" id="5126795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126805"><a href="/encoding/gob/encode.go.html#5126622">v</a></span>&nbsp;<span class="op" id="5126807">=</span>&nbsp;<span class="ident" id="5126809"><a href="/encoding/gob/encode.go.html#5126622">v</a></span><span class="op" id="5126810">.</span><span class="ident" id="5126811">Addr</span><span class="op" id="5126815">(</span><span class="op" id="5126816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126824">if</span>&nbsp;<span class="op" id="5126827">!</span><span class="ident" id="5126828"><a href="/encoding/gob/encode.go.html#5126601">state</a></span><span class="op" id="5126833">.</span><span class="ident" id="5126834">sendZero</span>&nbsp;<span class="op" id="5126843">&amp;&amp;</span>&nbsp;<span class="ident" id="5126846"><a href="/encoding/gob/encode.go.html#5121081">isZero</a></span><span class="op" id="5126852">(</span><span class="ident" id="5126853"><a href="/encoding/gob/encode.go.html#5126622">v</a></span><span class="op" id="5126854">)</span>&nbsp;<span class="op" id="5126856">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126861">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126874"><a href="/encoding/gob/encode.go.html#5126601">state</a></span><span class="op" id="5126879">.</span><span class="ident" id="5126880">update</span><span class="op" id="5126886">(</span><span class="ident" id="5126887"><a href="/encoding/gob/encode.go.html#5126588">i</a></span><span class="op" id="5126888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5126892"><a href="/encoding/gob/encode.go.html#5126601">state</a></span><span class="op" id="5126897">.</span><span class="ident" id="5126898">enc</span><span class="op" id="5126901">.</span><span class="ident" id="5126902">encodeGobEncoder</span><span class="op" id="5126918">(</span><span class="ident" id="5126919"><a href="/encoding/gob/encode.go.html#5126601">state</a></span><span class="op" id="5126924">.</span><span class="ident" id="5126925">b</span><span class="op" id="5126926">,</span>&nbsp;<span class="ident" id="5126928"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126930">,</span>&nbsp;<span class="ident" id="5126932"><a href="/encoding/gob/encode.go.html#5126622">v</a></span><span class="op" id="5126933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5126936">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5126939">return</span>&nbsp;<span class="op" id="5126946">&amp;</span><span class="ident" id="5126947"><a href="/encoding/gob/encode.go.html#5126568">op</a></span><span class="op" id="5126949">,</span>&nbsp;<span class="builtintype" id="5126951">int</span><span class="op" id="5126954">(</span><span class="ident" id="5126955"><a href="/encoding/gob/encode.go.html#5126368">ut</a></span><span class="op" id="5126957">.</span><span class="ident" id="5126958">encIndir</span><span class="op" id="5126966">)</span>&nbsp;<span class="comment" id="5126968">//&nbsp;encIndir:&nbsp;op&nbsp;will&nbsp;get&nbsp;called&nbsp;with&nbsp;p&nbsp;==&nbsp;address&nbsp;of&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="5127031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5127034">//&nbsp;compileEnc&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5127088">func</span>&nbsp;<span class="ident" id="5127093">compileEnc</span><span class="op" id="5127103">(</span><span class="ident" id="5127104">ut</span>&nbsp;<span class="op" id="5127107">*</span><span class="ident" id="5127108"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5127120">,</span>&nbsp;<span class="ident" id="5127122">building</span>&nbsp;<span class="keyword" id="5127131">map</span><span class="op" id="5127134">[</span><span class="op" id="5127135">*</span><span class="ident" id="5127136"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5127144">]</span><span class="builtintype" id="5127145">bool</span><span class="op" id="5127149">)</span>&nbsp;<span class="op" id="5127151">*</span><span class="ident" id="5127152"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span>&nbsp;<span class="op" id="5127162">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127165">srt</span>&nbsp;<span class="op" id="5127169">:=</span>&nbsp;<span class="ident" id="5127172"><a href="/encoding/gob/encode.go.html#5127104">ut</a></span><span class="op" id="5127174">.</span><span class="ident" id="5127175">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127181">engine</span>&nbsp;<span class="op" id="5127188">:=</span>&nbsp;<span class="builtinfunc" id="5127191">new</span><span class="op" id="5127194">(</span><span class="ident" id="5127195"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5127204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127207">seen</span>&nbsp;<span class="op" id="5127212">:=</span>&nbsp;<span class="builtinfunc" id="5127215">make</span><span class="op" id="5127219">(</span><span class="keyword" id="5127220">map</span><span class="op" id="5127223">[</span><span class="ident" id="5127224"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5127231">.</span><span class="ident" id="5127232">Type</span><span class="op" id="5127236">]</span><span class="op" id="5127237">*</span><span class="ident" id="5127238"><a href="/encoding/gob/encode.go.html#5111994">encOp</a></span><span class="op" id="5127243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127246">rt</span>&nbsp;<span class="op" id="5127249">:=</span>&nbsp;<span class="ident" id="5127252"><a href="/encoding/gob/encode.go.html#5127104">ut</a></span><span class="op" id="5127254">.</span><span class="ident" id="5127255">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127261">if</span>&nbsp;<span class="ident" id="5127264"><a href="/encoding/gob/encode.go.html#5127104">ut</a></span><span class="op" id="5127266">.</span><span class="ident" id="5127267">externalEnc</span>&nbsp;<span class="op" id="5127279">!=</span>&nbsp;<span class="num" id="5127282">0</span>&nbsp;<span class="op" id="5127284">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127288"><a href="/encoding/gob/encode.go.html#5127246">rt</a></span>&nbsp;<span class="op" id="5127291">=</span>&nbsp;<span class="ident" id="5127293"><a href="/encoding/gob/encode.go.html#5127104">ut</a></span><span class="op" id="5127295">.</span><span class="ident" id="5127296">user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127305">if</span>&nbsp;<span class="ident" id="5127308"><a href="/encoding/gob/encode.go.html#5127104">ut</a></span><span class="op" id="5127310">.</span><span class="ident" id="5127311">externalEnc</span>&nbsp;<span class="op" id="5127323">==</span>&nbsp;<span class="num" id="5127326">0</span>&nbsp;<span class="op" id="5127328">&amp;&amp;</span>&nbsp;<span class="ident" id="5127331"><a href="/encoding/gob/encode.go.html#5127165">srt</a></span><span class="op" id="5127334">.</span><span class="ident" id="5127335">Kind</span><span class="op" id="5127339">(</span><span class="op" id="5127340">)</span>&nbsp;<span class="op" id="5127342">==</span>&nbsp;<span class="ident" id="5127345"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5127352">.</span><span class="ident" id="5127353">Struct</span>&nbsp;<span class="op" id="5127360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127364">for</span>&nbsp;<span class="ident" id="5127368">fieldNum</span><span class="op" id="5127376">,</span>&nbsp;<span class="ident" id="5127378">wireFieldNum</span>&nbsp;<span class="op" id="5127391">:=</span>&nbsp;<span class="num" id="5127394">0</span><span class="op" id="5127395">,</span>&nbsp;<span class="num" id="5127397">0</span><span class="op" id="5127398">;</span>&nbsp;<span class="ident" id="5127400"><a href="/encoding/gob/encode.go.html#5127368">fieldNum</a></span>&nbsp;<span class="op" id="5127409">&lt;</span>&nbsp;<span class="ident" id="5127411"><a href="/encoding/gob/encode.go.html#5127165">srt</a></span><span class="op" id="5127414">.</span><span class="ident" id="5127415">NumField</span><span class="op" id="5127423">(</span><span class="op" id="5127424">)</span><span class="op" id="5127425">;</span>&nbsp;<span class="ident" id="5127427"><a href="/encoding/gob/encode.go.html#5127368">fieldNum</a></span><span class="op" id="5127435">++</span>&nbsp;<span class="op" id="5127438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127443">f</span>&nbsp;<span class="op" id="5127445">:=</span>&nbsp;<span class="ident" id="5127448"><a href="/encoding/gob/encode.go.html#5127165">srt</a></span><span class="op" id="5127451">.</span><span class="ident" id="5127452">Field</span><span class="op" id="5127457">(</span><span class="ident" id="5127458"><a href="/encoding/gob/encode.go.html#5127368">fieldNum</a></span><span class="op" id="5127466">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127471">if</span>&nbsp;<span class="op" id="5127474">!</span><span class="ident" id="5127475"><a href="/encoding/gob/type.go.html#5154985">isSent</a></span><span class="op" id="5127481">(</span><span class="op" id="5127482">&amp;</span><span class="ident" id="5127483"><a href="/encoding/gob/encode.go.html#5127443">f</a></span><span class="op" id="5127484">)</span>&nbsp;<span class="op" id="5127486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127492">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127509">op</span><span class="op" id="5127511">,</span>&nbsp;<span class="ident" id="5127513">indir</span>&nbsp;<span class="op" id="5127519">:=</span>&nbsp;<span class="ident" id="5127522"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5127530">(</span><span class="ident" id="5127531"><a href="/encoding/gob/encode.go.html#5127443">f</a></span><span class="op" id="5127532">.</span><span class="ident" id="5127533">Type</span><span class="op" id="5127537">,</span>&nbsp;<span class="ident" id="5127539"><a href="/encoding/gob/encode.go.html#5127207">seen</a></span><span class="op" id="5127543">,</span>&nbsp;<span class="ident" id="5127545"><a href="/encoding/gob/encode.go.html#5127122">building</a></span><span class="op" id="5127553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127558"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127564">.</span><span class="ident" id="5127565">instr</span>&nbsp;<span class="op" id="5127571">=</span>&nbsp;<span class="builtinfunc" id="5127573">append</span><span class="op" id="5127579">(</span><span class="ident" id="5127580"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127586">.</span><span class="ident" id="5127587">instr</span><span class="op" id="5127592">,</span>&nbsp;<span class="ident" id="5127594"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5127602">{</span><span class="op" id="5127603">*</span><span class="ident" id="5127604"><a href="/encoding/gob/encode.go.html#5127509">op</a></span><span class="op" id="5127606">,</span>&nbsp;<span class="ident" id="5127608"><a href="/encoding/gob/encode.go.html#5127378">wireFieldNum</a></span><span class="op" id="5127620">,</span>&nbsp;<span class="ident" id="5127622"><a href="/encoding/gob/encode.go.html#5127443">f</a></span><span class="op" id="5127623">.</span><span class="ident" id="5127624">Index</span><span class="op" id="5127629">,</span>&nbsp;<span class="ident" id="5127631"><a href="/encoding/gob/encode.go.html#5127513">indir</a></span><span class="op" id="5127636">}</span><span class="op" id="5127637">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127642"><a href="/encoding/gob/encode.go.html#5127378">wireFieldNum</a></span><span class="op" id="5127654">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5127663">if</span>&nbsp;<span class="ident" id="5127666"><a href="/encoding/gob/encode.go.html#5127165">srt</a></span><span class="op" id="5127669">.</span><span class="ident" id="5127670">NumField</span><span class="op" id="5127678">(</span><span class="op" id="5127679">)</span>&nbsp;<span class="op" id="5127681">&gt;</span>&nbsp;<span class="num" id="5127683">0</span>&nbsp;<span class="op" id="5127685">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5127688">len</span><span class="op" id="5127691">(</span><span class="ident" id="5127692"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127698">.</span><span class="ident" id="5127699">instr</span><span class="op" id="5127704">)</span>&nbsp;<span class="op" id="5127706">==</span>&nbsp;<span class="num" id="5127709">0</span>&nbsp;<span class="op" id="5127711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127716"><a href="/encoding/gob/error.go.html#5137642">errorf</a></span><span class="op" id="5127722">(</span><span class="string" id="5127723">&#34;type&nbsp;%s&nbsp;has&nbsp;no&nbsp;exported&nbsp;fields&#34;</span><span class="op" id="5127755">,</span>&nbsp;<span class="ident" id="5127757"><a href="/encoding/gob/encode.go.html#5127246">rt</a></span><span class="op" id="5127759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127763">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127767"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127773">.</span><span class="ident" id="5127774">instr</span>&nbsp;<span class="op" id="5127780">=</span>&nbsp;<span class="builtinfunc" id="5127782">append</span><span class="op" id="5127788">(</span><span class="ident" id="5127789"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127795">.</span><span class="ident" id="5127796">instr</span><span class="op" id="5127801">,</span>&nbsp;<span class="ident" id="5127803"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5127811">{</span><span class="ident" id="5127812"><a href="/encoding/gob/encode.go.html#5116041">encStructTerminator</a></span><span class="op" id="5127831">,</span>&nbsp;<span class="num" id="5127833">0</span><span class="op" id="5127834">,</span>&nbsp;<span class="ident" id="5127836">nil</span><span class="op" id="5127839">,</span>&nbsp;<span class="num" id="5127841">0</span><span class="op" id="5127842">}</span><span class="op" id="5127843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127846">}</span>&nbsp;<span class="keyword" id="5127848">else</span>&nbsp;<span class="op" id="5127853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127857"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127863">.</span><span class="ident" id="5127864">instr</span>&nbsp;<span class="op" id="5127870">=</span>&nbsp;<span class="builtinfunc" id="5127872">make</span><span class="op" id="5127876">(</span><span class="op" id="5127877">[</span><span class="op" id="5127878">]</span><span class="ident" id="5127879"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5127887">,</span>&nbsp;<span class="num" id="5127889">1</span><span class="op" id="5127890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127894">op</span><span class="op" id="5127896">,</span>&nbsp;<span class="ident" id="5127898">indir</span>&nbsp;<span class="op" id="5127904">:=</span>&nbsp;<span class="ident" id="5127907"><a href="/encoding/gob/encode.go.html#5123453">encOpFor</a></span><span class="op" id="5127915">(</span><span class="ident" id="5127916"><a href="/encoding/gob/encode.go.html#5127246">rt</a></span><span class="op" id="5127918">,</span>&nbsp;<span class="ident" id="5127920"><a href="/encoding/gob/encode.go.html#5127207">seen</a></span><span class="op" id="5127924">,</span>&nbsp;<span class="ident" id="5127926"><a href="/encoding/gob/encode.go.html#5127122">building</a></span><span class="op" id="5127934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5127938"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><span class="op" id="5127944">.</span><span class="ident" id="5127945">instr</span><span class="op" id="5127950">[</span><span class="num" id="5127951">0</span><span class="op" id="5127952">]</span>&nbsp;<span class="op" id="5127954">=</span>&nbsp;<span class="ident" id="5127956"><a href="/encoding/gob/encode.go.html#5112108">encInstr</a></span><span class="op" id="5127964">{</span><span class="op" id="5127965">*</span><span class="ident" id="5127966"><a href="/encoding/gob/encode.go.html#5127894">op</a></span><span class="op" id="5127968">,</span>&nbsp;<span class="ident" id="5127970"><a href="/encoding/gob/encode.go.html#5116368">singletonField</a></span><span class="op" id="5127984">,</span>&nbsp;<span class="ident" id="5127986">nil</span><span class="op" id="5127989">,</span>&nbsp;<span class="ident" id="5127991"><a href="/encoding/gob/encode.go.html#5127898">indir</a></span><span class="op" id="5127996">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5127999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128002">return</span>&nbsp;<span class="ident" id="5128009"><a href="/encoding/gob/encode.go.html#5127181">engine</a></span><br>
<span class="lineno"></span><span class="op" id="5128016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5128019">//&nbsp;getEncEngine&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno">650</span><span class="keyword" id="5128075">func</span>&nbsp;<span class="ident" id="5128080">getEncEngine</span><span class="op" id="5128092">(</span><span class="ident" id="5128093">ut</span>&nbsp;<span class="op" id="5128096">*</span><span class="ident" id="5128097"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5128109">,</span>&nbsp;<span class="ident" id="5128111">building</span>&nbsp;<span class="keyword" id="5128120">map</span><span class="op" id="5128123">[</span><span class="op" id="5128124">*</span><span class="ident" id="5128125"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5128133">]</span><span class="builtintype" id="5128134">bool</span><span class="op" id="5128138">)</span>&nbsp;<span class="op" id="5128140">*</span><span class="ident" id="5128141"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span>&nbsp;<span class="op" id="5128151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128154">info</span><span class="op" id="5128158">,</span>&nbsp;<span class="ident" id="5128160">err</span>&nbsp;<span class="op" id="5128164">:=</span>&nbsp;<span class="ident" id="5128167"><a href="/encoding/gob/type.go.html#5158904">getTypeInfo</a></span><span class="op" id="5128178">(</span><span class="ident" id="5128179"><a href="/encoding/gob/encode.go.html#5128093">ut</a></span><span class="op" id="5128181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128184">if</span>&nbsp;<span class="ident" id="5128187"><a href="/encoding/gob/encode.go.html#5128160">err</a></span>&nbsp;<span class="op" id="5128191">!=</span>&nbsp;<span class="ident" id="5128194">nil</span>&nbsp;<span class="op" id="5128198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128202"><a href="/encoding/gob/error.go.html#5137812">error_</a></span><span class="op" id="5128208">(</span><span class="ident" id="5128209"><a href="/encoding/gob/encode.go.html#5128160">err</a></span><span class="op" id="5128212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5128215">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128218">enc</span><span class="op" id="5128221">,</span>&nbsp;<span class="ident" id="5128223">ok</span>&nbsp;<span class="op" id="5128226">:=</span>&nbsp;<span class="ident" id="5128229"><a href="/encoding/gob/encode.go.html#5128154">info</a></span><span class="op" id="5128233">.</span><span class="ident" id="5128234">encoder</span><span class="op" id="5128241">.</span><span class="ident" id="5128242">Load</span><span class="op" id="5128246">(</span><span class="op" id="5128247">)</span><span class="op" id="5128248">.</span><span class="op" id="5128249">(</span><span class="op" id="5128250">*</span><span class="ident" id="5128251"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5128260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128263">if</span>&nbsp;<span class="op" id="5128266">!</span><span class="ident" id="5128267"><a href="/encoding/gob/encode.go.html#5128223">ok</a></span>&nbsp;<span class="op" id="5128270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128274"><a href="/encoding/gob/encode.go.html#5128218">enc</a></span>&nbsp;<span class="op" id="5128278">=</span>&nbsp;<span class="ident" id="5128280"><a href="/encoding/gob/encode.go.html#5128338">buildEncEngine</a></span><span class="op" id="5128294">(</span><span class="ident" id="5128295"><a href="/encoding/gob/encode.go.html#5128154">info</a></span><span class="op" id="5128299">,</span>&nbsp;<span class="ident" id="5128301"><a href="/encoding/gob/encode.go.html#5128093">ut</a></span><span class="op" id="5128303">,</span>&nbsp;<span class="ident" id="5128305"><a href="/encoding/gob/encode.go.html#5128111">building</a></span><span class="op" id="5128313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5128316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128319">return</span>&nbsp;<span class="ident" id="5128326"><a href="/encoding/gob/encode.go.html#5128218">enc</a></span><br>
<span class="lineno">660</span><span class="op" id="5128330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5128333">func</span>&nbsp;<span class="ident" id="5128338">buildEncEngine</span><span class="op" id="5128352">(</span><span class="ident" id="5128353">info</span>&nbsp;<span class="op" id="5128358">*</span><span class="ident" id="5128359"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5128367">,</span>&nbsp;<span class="ident" id="5128369">ut</span>&nbsp;<span class="op" id="5128372">*</span><span class="ident" id="5128373"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5128385">,</span>&nbsp;<span class="ident" id="5128387">building</span>&nbsp;<span class="keyword" id="5128396">map</span><span class="op" id="5128399">[</span><span class="op" id="5128400">*</span><span class="ident" id="5128401"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5128409">]</span><span class="builtintype" id="5128410">bool</span><span class="op" id="5128414">)</span>&nbsp;<span class="op" id="5128416">*</span><span class="ident" id="5128417"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span>&nbsp;<span class="op" id="5128427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5128430">//&nbsp;Check&nbsp;for&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128461">if</span>&nbsp;<span class="ident" id="5128464"><a href="/encoding/gob/encode.go.html#5128387">building</a></span>&nbsp;<span class="op" id="5128473">!=</span>&nbsp;<span class="ident" id="5128476">nil</span>&nbsp;<span class="op" id="5128480">&amp;&amp;</span>&nbsp;<span class="ident" id="5128483"><a href="/encoding/gob/encode.go.html#5128387">building</a></span><span class="op" id="5128491">[</span><span class="ident" id="5128492"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128496">]</span>&nbsp;<span class="op" id="5128498">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128502">return</span>&nbsp;<span class="ident" id="5128509">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5128514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128517"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128521">.</span><span class="ident" id="5128522">encInit</span><span class="op" id="5128529">.</span><span class="ident" id="5128530">Lock</span><span class="op" id="5128534">(</span><span class="op" id="5128535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128538">defer</span>&nbsp;<span class="ident" id="5128544"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128548">.</span><span class="ident" id="5128549">encInit</span><span class="op" id="5128556">.</span><span class="ident" id="5128557">Unlock</span><span class="op" id="5128563">(</span><span class="op" id="5128564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128567">enc</span><span class="op" id="5128570">,</span>&nbsp;<span class="ident" id="5128572">ok</span>&nbsp;<span class="op" id="5128575">:=</span>&nbsp;<span class="ident" id="5128578"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128582">.</span><span class="ident" id="5128583">encoder</span><span class="op" id="5128590">.</span><span class="ident" id="5128591">Load</span><span class="op" id="5128595">(</span><span class="op" id="5128596">)</span><span class="op" id="5128597">.</span><span class="op" id="5128598">(</span><span class="op" id="5128599">*</span><span class="ident" id="5128600"><a href="/encoding/gob/encode.go.html#5116322">encEngine</a></span><span class="op" id="5128609">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128612">if</span>&nbsp;<span class="op" id="5128615">!</span><span class="ident" id="5128616"><a href="/encoding/gob/encode.go.html#5128572">ok</a></span>&nbsp;<span class="op" id="5128619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128623">if</span>&nbsp;<span class="ident" id="5128626"><a href="/encoding/gob/encode.go.html#5128387">building</a></span>&nbsp;<span class="op" id="5128635">==</span>&nbsp;<span class="ident" id="5128638">nil</span>&nbsp;<span class="op" id="5128642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128647"><a href="/encoding/gob/encode.go.html#5128387">building</a></span>&nbsp;<span class="op" id="5128656">=</span>&nbsp;<span class="builtinfunc" id="5128658">make</span><span class="op" id="5128662">(</span><span class="keyword" id="5128663">map</span><span class="op" id="5128666">[</span><span class="op" id="5128667">*</span><span class="ident" id="5128668"><a href="/encoding/gob/type.go.html#5158234">typeInfo</a></span><span class="op" id="5128676">]</span><span class="builtintype" id="5128677">bool</span><span class="op" id="5128681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5128685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128689"><a href="/encoding/gob/encode.go.html#5128387">building</a></span><span class="op" id="5128697">[</span><span class="ident" id="5128698"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128702">]</span>&nbsp;<span class="op" id="5128704">=</span>&nbsp;<span class="ident" id="5128706">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128713"><a href="/encoding/gob/encode.go.html#5128567">enc</a></span>&nbsp;<span class="op" id="5128717">=</span>&nbsp;<span class="ident" id="5128719"><a href="/encoding/gob/encode.go.html#5127093">compileEnc</a></span><span class="op" id="5128729">(</span><span class="ident" id="5128730"><a href="/encoding/gob/encode.go.html#5128369">ut</a></span><span class="op" id="5128732">,</span>&nbsp;<span class="ident" id="5128734"><a href="/encoding/gob/encode.go.html#5128387">building</a></span><span class="op" id="5128742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128746"><a href="/encoding/gob/encode.go.html#5128353">info</a></span><span class="op" id="5128750">.</span><span class="ident" id="5128751">encoder</span><span class="op" id="5128758">.</span><span class="ident" id="5128759">Store</span><span class="op" id="5128764">(</span><span class="ident" id="5128765"><a href="/encoding/gob/encode.go.html#5128567">enc</a></span><span class="op" id="5128768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5128771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128774">return</span>&nbsp;<span class="ident" id="5128781"><a href="/encoding/gob/encode.go.html#5128567">enc</a></span><br>
<span class="lineno"></span><span class="op" id="5128785">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5128788">func</span>&nbsp;<span class="op" id="5128793">(</span><span class="ident" id="5128794">enc</span>&nbsp;<span class="op" id="5128798">*</span><span class="ident" id="5128799"><a href="/encoding/gob/encoder.go.html#5129551">Encoder</a></span><span class="op" id="5128806">)</span>&nbsp;<span class="ident" id="5128808">encode</span><span class="op" id="5128814">(</span><span class="ident" id="5128815">b</span>&nbsp;<span class="op" id="5128817">*</span><span class="ident" id="5128818"><a href="/encoding/gob/encode.go.html#5110138">encBuffer</a></span><span class="op" id="5128827">,</span>&nbsp;<span class="ident" id="5128829">value</span>&nbsp;<span class="ident" id="5128835"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5128842">.</span><span class="ident" id="5128843">Value</span><span class="op" id="5128848">,</span>&nbsp;<span class="ident" id="5128850">ut</span>&nbsp;<span class="op" id="5128853">*</span><span class="ident" id="5128854"><a href="/encoding/gob/type.go.html#5138634">userTypeInfo</a></span><span class="op" id="5128866">)</span>&nbsp;<span class="op" id="5128868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128871">defer</span>&nbsp;<span class="ident" id="5128877"><a href="/encoding/gob/error.go.html#5138040">catchError</a></span><span class="op" id="5128887">(</span><span class="op" id="5128888">&amp;</span><span class="ident" id="5128889"><a href="/encoding/gob/encode.go.html#5128794">enc</a></span><span class="op" id="5128892">.</span><span class="ident" id="5128893">err</span><span class="op" id="5128896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128899">engine</span>&nbsp;<span class="op" id="5128906">:=</span>&nbsp;<span class="ident" id="5128909"><a href="/encoding/gob/encode.go.html#5128080">getEncEngine</a></span><span class="op" id="5128921">(</span><span class="ident" id="5128922"><a href="/encoding/gob/encode.go.html#5128850">ut</a></span><span class="op" id="5128924">,</span>&nbsp;<span class="ident" id="5128926">nil</span><span class="op" id="5128929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128932">indir</span>&nbsp;<span class="op" id="5128938">:=</span>&nbsp;<span class="ident" id="5128941"><a href="/encoding/gob/encode.go.html#5128850">ut</a></span><span class="op" id="5128943">.</span><span class="ident" id="5128944">indir</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5128951">if</span>&nbsp;<span class="ident" id="5128954"><a href="/encoding/gob/encode.go.html#5128850">ut</a></span><span class="op" id="5128956">.</span><span class="ident" id="5128957">externalEnc</span>&nbsp;<span class="op" id="5128969">!=</span>&nbsp;<span class="num" id="5128972">0</span>&nbsp;<span class="op" id="5128974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5128978"><a href="/encoding/gob/encode.go.html#5128932">indir</a></span>&nbsp;<span class="op" id="5128984">=</span>&nbsp;<span class="builtintype" id="5128986">int</span><span class="op" id="5128989">(</span><span class="ident" id="5128990"><a href="/encoding/gob/encode.go.html#5128850">ut</a></span><span class="op" id="5128992">.</span><span class="ident" id="5128993">encIndir</span><span class="op" id="5129001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5129004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5129007">for</span>&nbsp;<span class="ident" id="5129011">i</span>&nbsp;<span class="op" id="5129013">:=</span>&nbsp;<span class="num" id="5129016">0</span><span class="op" id="5129017">;</span>&nbsp;<span class="ident" id="5129019"><a href="/encoding/gob/encode.go.html#5129011">i</a></span>&nbsp;<span class="op" id="5129021">&lt;</span>&nbsp;<span class="ident" id="5129023"><a href="/encoding/gob/encode.go.html#5128932">indir</a></span><span class="op" id="5129028">;</span>&nbsp;<span class="ident" id="5129030"><a href="/encoding/gob/encode.go.html#5129011">i</a></span><span class="op" id="5129031">++</span>&nbsp;<span class="op" id="5129034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5129038"><a href="/encoding/gob/encode.go.html#5128829">value</a></span>&nbsp;<span class="op" id="5129044">=</span>&nbsp;<span class="ident" id="5129046"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5129053">.</span><span class="ident" id="5129054">Indirect</span><span class="op" id="5129062">(</span><span class="ident" id="5129063"><a href="/encoding/gob/encode.go.html#5128829">value</a></span><span class="op" id="5129068">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5129071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5129074">if</span>&nbsp;<span class="ident" id="5129077"><a href="/encoding/gob/encode.go.html#5128850">ut</a></span><span class="op" id="5129079">.</span><span class="ident" id="5129080">externalEnc</span>&nbsp;<span class="op" id="5129092">==</span>&nbsp;<span class="num" id="5129095">0</span>&nbsp;<span class="op" id="5129097">&amp;&amp;</span>&nbsp;<span class="ident" id="5129100"><a href="/encoding/gob/encode.go.html#5128829">value</a></span><span class="op" id="5129105">.</span><span class="ident" id="5129106">Type</span><span class="op" id="5129110">(</span><span class="op" id="5129111">)</span><span class="op" id="5129112">.</span><span class="ident" id="5129113">Kind</span><span class="op" id="5129117">(</span><span class="op" id="5129118">)</span>&nbsp;<span class="op" id="5129120">==</span>&nbsp;<span class="ident" id="5129123"><a href="/encoding/gob/encode.go.html#5109238">reflect</a></span><span class="op" id="5129130">.</span><span class="ident" id="5129131">Struct</span>&nbsp;<span class="op" id="5129138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5129142"><a href="/encoding/gob/encode.go.html#5128794">enc</a></span><span class="op" id="5129145">.</span><span class="ident" id="5129146">encodeStruct</span><span class="op" id="5129158">(</span><span class="ident" id="5129159"><a href="/encoding/gob/encode.go.html#5128815">b</a></span><span class="op" id="5129160">,</span>&nbsp;<span class="ident" id="5129162"><a href="/encoding/gob/encode.go.html#5128899">engine</a></span><span class="op" id="5129168">,</span>&nbsp;<span class="ident" id="5129170"><a href="/encoding/gob/encode.go.html#5128829">value</a></span><span class="op" id="5129175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5129178">}</span>&nbsp;<span class="keyword" id="5129180">else</span>&nbsp;<span class="op" id="5129185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5129189"><a href="/encoding/gob/encode.go.html#5128794">enc</a></span><span class="op" id="5129192">.</span><span class="ident" id="5129193">encodeSingle</span><span class="op" id="5129205">(</span><span class="ident" id="5129206"><a href="/encoding/gob/encode.go.html#5128815">b</a></span><span class="op" id="5129207">,</span>&nbsp;<span class="ident" id="5129209"><a href="/encoding/gob/encode.go.html#5128899">engine</a></span><span class="op" id="5129215">,</span>&nbsp;<span class="ident" id="5129217"><a href="/encoding/gob/encode.go.html#5128829">value</a></span><span class="op" id="5129222">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5129225">}</span><br>
<span class="lineno"></span><span class="op" id="5129227">}</span>
</div>
</body>
</html>
