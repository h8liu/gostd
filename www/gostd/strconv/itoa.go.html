<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2289469">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2289524">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2289578">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2289629">package</span>&nbsp;<span class="ident" id="2289637">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2289646">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2289718">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2289792">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2289819">func</span>&nbsp;<span class="ident" id="2289824">FormatUint</span><span class="op" id="2289834">(</span><span class="ident" id="2289835">i</span>&nbsp;<span class="ident" id="2289837">uint64</span><span class="op" id="2289843">,</span>&nbsp;<span class="ident" id="2289845">base</span>&nbsp;<span class="builtintype" id="2289850">int</span><span class="op" id="2289853">)</span>&nbsp;<span class="builtintype" id="2289855">string</span>&nbsp;<span class="op" id="2289862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2289865">_</span><span class="op" id="2289866">,</span>&nbsp;<span class="ident" id="2289868">s</span>&nbsp;<span class="op" id="2289870">:=</span>&nbsp;<span class="ident" id="2289873">formatBits</span><span class="op" id="2289883">(</span><span class="ident" id="2289884">nil</span><span class="op" id="2289887">,</span>&nbsp;<span class="ident" id="2289889">i</span><span class="op" id="2289890">,</span>&nbsp;<span class="ident" id="2289892">base</span><span class="op" id="2289896">,</span>&nbsp;<span class="builtintype" id="2289898">false</span><span class="op" id="2289903">,</span>&nbsp;<span class="builtintype" id="2289905">false</span><span class="op" id="2289910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2289913">return</span>&nbsp;<span class="ident" id="2289920">s</span><br>
<span class="lineno"></span><span class="op" id="2289922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2289925">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2289996">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2290070">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2290097">func</span>&nbsp;<span class="ident" id="2290102">FormatInt</span><span class="op" id="2290111">(</span><span class="ident" id="2290112">i</span>&nbsp;<span class="ident" id="2290114">int64</span><span class="op" id="2290119">,</span>&nbsp;<span class="ident" id="2290121">base</span>&nbsp;<span class="builtintype" id="2290126">int</span><span class="op" id="2290129">)</span>&nbsp;<span class="builtintype" id="2290131">string</span>&nbsp;<span class="op" id="2290138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290141">_</span><span class="op" id="2290142">,</span>&nbsp;<span class="ident" id="2290144">s</span>&nbsp;<span class="op" id="2290146">:=</span>&nbsp;<span class="ident" id="2290149">formatBits</span><span class="op" id="2290159">(</span><span class="ident" id="2290160">nil</span><span class="op" id="2290163">,</span>&nbsp;<span class="ident" id="2290165">uint64</span><span class="op" id="2290171">(</span><span class="ident" id="2290172">i</span><span class="op" id="2290173">)</span><span class="op" id="2290174">,</span>&nbsp;<span class="ident" id="2290176">base</span><span class="op" id="2290180">,</span>&nbsp;<span class="ident" id="2290182">i</span>&nbsp;<span class="op" id="2290184">&lt;</span>&nbsp;<span class="num" id="2290186">0</span><span class="op" id="2290187">,</span>&nbsp;<span class="builtintype" id="2290189">false</span><span class="op" id="2290194">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2290197">return</span>&nbsp;<span class="ident" id="2290204">s</span><br>
<span class="lineno"></span><span class="op" id="2290206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2290209">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2290252">func</span>&nbsp;<span class="ident" id="2290257">Itoa</span><span class="op" id="2290261">(</span><span class="ident" id="2290262">i</span>&nbsp;<span class="builtintype" id="2290264">int</span><span class="op" id="2290267">)</span>&nbsp;<span class="builtintype" id="2290269">string</span>&nbsp;<span class="op" id="2290276">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2290279">return</span>&nbsp;<span class="ident" id="2290286">FormatInt</span><span class="op" id="2290295">(</span><span class="ident" id="2290296">int64</span><span class="op" id="2290301">(</span><span class="ident" id="2290302">i</span><span class="op" id="2290303">)</span><span class="op" id="2290304">,</span>&nbsp;<span class="num" id="2290306">10</span><span class="op" id="2290308">)</span><br>
<span class="lineno"></span><span class="op" id="2290310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2290313">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2290368">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2290438">func</span>&nbsp;<span class="ident" id="2290443">AppendInt</span><span class="op" id="2290452">(</span><span class="ident" id="2290453">dst</span>&nbsp;<span class="op" id="2290457">[</span><span class="op" id="2290458">]</span><span class="builtintype" id="2290459">byte</span><span class="op" id="2290463">,</span>&nbsp;<span class="ident" id="2290465">i</span>&nbsp;<span class="ident" id="2290467">int64</span><span class="op" id="2290472">,</span>&nbsp;<span class="ident" id="2290474">base</span>&nbsp;<span class="builtintype" id="2290479">int</span><span class="op" id="2290482">)</span>&nbsp;<span class="op" id="2290484">[</span><span class="op" id="2290485">]</span><span class="builtintype" id="2290486">byte</span>&nbsp;<span class="op" id="2290491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290494">dst</span><span class="op" id="2290497">,</span>&nbsp;<span class="ident" id="2290499">_</span>&nbsp;<span class="op" id="2290501">=</span>&nbsp;<span class="ident" id="2290503">formatBits</span><span class="op" id="2290513">(</span><span class="ident" id="2290514">dst</span><span class="op" id="2290517">,</span>&nbsp;<span class="ident" id="2290519">uint64</span><span class="op" id="2290525">(</span><span class="ident" id="2290526">i</span><span class="op" id="2290527">)</span><span class="op" id="2290528">,</span>&nbsp;<span class="ident" id="2290530">base</span><span class="op" id="2290534">,</span>&nbsp;<span class="ident" id="2290536">i</span>&nbsp;<span class="op" id="2290538">&lt;</span>&nbsp;<span class="num" id="2290540">0</span><span class="op" id="2290541">,</span>&nbsp;<span class="builtintype" id="2290543">true</span><span class="op" id="2290547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2290550">return</span>&nbsp;<span class="ident" id="2290557">dst</span><br>
<span class="lineno"></span><span class="op" id="2290561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2290564">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2290629">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2290700">func</span>&nbsp;<span class="ident" id="2290705">AppendUint</span><span class="op" id="2290715">(</span><span class="ident" id="2290716">dst</span>&nbsp;<span class="op" id="2290720">[</span><span class="op" id="2290721">]</span><span class="builtintype" id="2290722">byte</span><span class="op" id="2290726">,</span>&nbsp;<span class="ident" id="2290728">i</span>&nbsp;<span class="ident" id="2290730">uint64</span><span class="op" id="2290736">,</span>&nbsp;<span class="ident" id="2290738">base</span>&nbsp;<span class="builtintype" id="2290743">int</span><span class="op" id="2290746">)</span>&nbsp;<span class="op" id="2290748">[</span><span class="op" id="2290749">]</span><span class="builtintype" id="2290750">byte</span>&nbsp;<span class="op" id="2290755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290758">dst</span><span class="op" id="2290761">,</span>&nbsp;<span class="ident" id="2290763">_</span>&nbsp;<span class="op" id="2290765">=</span>&nbsp;<span class="ident" id="2290767">formatBits</span><span class="op" id="2290777">(</span><span class="ident" id="2290778">dst</span><span class="op" id="2290781">,</span>&nbsp;<span class="ident" id="2290783">i</span><span class="op" id="2290784">,</span>&nbsp;<span class="ident" id="2290786">base</span><span class="op" id="2290790">,</span>&nbsp;<span class="builtintype" id="2290792">false</span><span class="op" id="2290797">,</span>&nbsp;<span class="builtintype" id="2290799">true</span><span class="op" id="2290803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2290806">return</span>&nbsp;<span class="ident" id="2290813">dst</span><br>
<span class="lineno">40</span><span class="op" id="2290817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2290820">const</span>&nbsp;<span class="op" id="2290826">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290829">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2290838">=</span>&nbsp;<span class="string" id="2290840">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290880">digits01</span>&nbsp;<span class="op" id="2290889">=</span>&nbsp;<span class="string" id="2290891">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2290995">digits10</span>&nbsp;<span class="op" id="2291004">=</span>&nbsp;<span class="string" id="2291006">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2291109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2291112">var</span>&nbsp;<span class="ident" id="2291116">shifts</span>&nbsp;<span class="op" id="2291123">=</span>&nbsp;<span class="op" id="2291125">[</span><span class="builtinfunc" id="2291126">len</span><span class="op" id="2291129">(</span><span class="ident" id="2291130">digits</span><span class="op" id="2291136">)</span>&nbsp;<span class="op" id="2291138">+</span>&nbsp;<span class="num" id="2291140">1</span><span class="op" id="2291141">]</span><span class="builtintype" id="2291142">uint</span><span class="op" id="2291146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2291149">1</span>&nbsp;<span class="op" id="2291151">&lt;&lt;</span>&nbsp;<span class="num" id="2291154">1</span><span class="op" id="2291155">:</span>&nbsp;<span class="num" id="2291157">1</span><span class="op" id="2291158">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2291161">1</span>&nbsp;<span class="op" id="2291163">&lt;&lt;</span>&nbsp;<span class="num" id="2291166">2</span><span class="op" id="2291167">:</span>&nbsp;<span class="num" id="2291169">2</span><span class="op" id="2291170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2291173">1</span>&nbsp;<span class="op" id="2291175">&lt;&lt;</span>&nbsp;<span class="num" id="2291178">3</span><span class="op" id="2291179">:</span>&nbsp;<span class="num" id="2291181">3</span><span class="op" id="2291182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2291185">1</span>&nbsp;<span class="op" id="2291187">&lt;&lt;</span>&nbsp;<span class="num" id="2291190">4</span><span class="op" id="2291191">:</span>&nbsp;<span class="num" id="2291193">4</span><span class="op" id="2291194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2291197">1</span>&nbsp;<span class="op" id="2291199">&lt;&lt;</span>&nbsp;<span class="num" id="2291202">5</span><span class="op" id="2291203">:</span>&nbsp;<span class="num" id="2291205">5</span><span class="op" id="2291206">,</span><br>
<span class="lineno"></span><span class="op" id="2291208">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2291211">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2291284">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2291354">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2291424">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2291496">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2291527">//</span><br>
<span class="lineno"></span><span class="keyword" id="2291530">func</span>&nbsp;<span class="ident" id="2291535">formatBits</span><span class="op" id="2291545">(</span><span class="ident" id="2291546">dst</span>&nbsp;<span class="op" id="2291550">[</span><span class="op" id="2291551">]</span><span class="builtintype" id="2291552">byte</span><span class="op" id="2291556">,</span>&nbsp;<span class="ident" id="2291558">u</span>&nbsp;<span class="ident" id="2291560">uint64</span><span class="op" id="2291566">,</span>&nbsp;<span class="ident" id="2291568">base</span>&nbsp;<span class="builtintype" id="2291573">int</span><span class="op" id="2291576">,</span>&nbsp;<span class="ident" id="2291578">neg</span><span class="op" id="2291581">,</span>&nbsp;<span class="ident" id="2291583">append_</span>&nbsp;<span class="builtintype" id="2291591">bool</span><span class="op" id="2291595">)</span>&nbsp;<span class="op" id="2291597">(</span><span class="ident" id="2291598">d</span>&nbsp;<span class="op" id="2291600">[</span><span class="op" id="2291601">]</span><span class="builtintype" id="2291602">byte</span><span class="op" id="2291606">,</span>&nbsp;<span class="ident" id="2291608">s</span>&nbsp;<span class="builtintype" id="2291610">string</span><span class="op" id="2291616">)</span>&nbsp;<span class="op" id="2291618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2291621">if</span>&nbsp;<span class="ident" id="2291624">base</span>&nbsp;<span class="op" id="2291629">&lt;</span>&nbsp;<span class="num" id="2291631">2</span>&nbsp;<span class="op" id="2291633">||</span>&nbsp;<span class="ident" id="2291636">base</span>&nbsp;<span class="op" id="2291641">&gt;</span>&nbsp;<span class="builtinfunc" id="2291643">len</span><span class="op" id="2291646">(</span><span class="ident" id="2291647">digits</span><span class="op" id="2291653">)</span>&nbsp;<span class="op" id="2291655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2291659">panic</span><span class="op" id="2291664">(</span><span class="string" id="2291665">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2291708">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2291711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2291714">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2291752">var</span>&nbsp;<span class="ident" id="2291756">a</span>&nbsp;<span class="op" id="2291758">[</span><span class="num" id="2291759">64</span>&nbsp;<span class="op" id="2291762">+</span>&nbsp;<span class="num" id="2291764">1</span><span class="op" id="2291765">]</span><span class="builtintype" id="2291766">byte</span>&nbsp;<span class="comment" id="2291771">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2291812">i</span>&nbsp;<span class="op" id="2291814">:=</span>&nbsp;<span class="builtinfunc" id="2291817">len</span><span class="op" id="2291820">(</span><span class="ident" id="2291821">a</span><span class="op" id="2291822">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2291826">if</span>&nbsp;<span class="ident" id="2291829">neg</span>&nbsp;<span class="op" id="2291833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2291837">u</span>&nbsp;<span class="op" id="2291839">=</span>&nbsp;<span class="op" id="2291841">-</span><span class="ident" id="2291842">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2291845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2291849">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2291866">if</span>&nbsp;<span class="ident" id="2291869">base</span>&nbsp;<span class="op" id="2291874">==</span>&nbsp;<span class="num" id="2291877">10</span>&nbsp;<span class="op" id="2291880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2291884">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2291936">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2291993">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292014">for</span>&nbsp;<span class="ident" id="2292018">u</span>&nbsp;<span class="op" id="2292020">&gt;=</span>&nbsp;<span class="num" id="2292023">100</span>&nbsp;<span class="op" id="2292027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292032">i</span>&nbsp;<span class="op" id="2292034">-=</span>&nbsp;<span class="num" id="2292037">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292042">q</span>&nbsp;<span class="op" id="2292044">:=</span>&nbsp;<span class="ident" id="2292047">u</span>&nbsp;<span class="op" id="2292049">/</span>&nbsp;<span class="num" id="2292051">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292058">j</span>&nbsp;<span class="op" id="2292060">:=</span>&nbsp;<span class="builtintype" id="2292063">uintptr</span><span class="op" id="2292070">(</span><span class="ident" id="2292071">u</span>&nbsp;<span class="op" id="2292073">-</span>&nbsp;<span class="ident" id="2292075">q</span><span class="op" id="2292076">*</span><span class="num" id="2292077">100</span><span class="op" id="2292080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292085">a</span><span class="op" id="2292086">[</span><span class="ident" id="2292087">i</span><span class="op" id="2292088">+</span><span class="num" id="2292089">1</span><span class="op" id="2292090">]</span>&nbsp;<span class="op" id="2292092">=</span>&nbsp;<span class="ident" id="2292094">digits01</span><span class="op" id="2292102">[</span><span class="ident" id="2292103">j</span><span class="op" id="2292104">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292109">a</span><span class="op" id="2292110">[</span><span class="ident" id="2292111">i</span><span class="op" id="2292112">+</span><span class="num" id="2292113">0</span><span class="op" id="2292114">]</span>&nbsp;<span class="op" id="2292116">=</span>&nbsp;<span class="ident" id="2292118">digits10</span><span class="op" id="2292126">[</span><span class="ident" id="2292127">j</span><span class="op" id="2292128">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292133">u</span>&nbsp;<span class="op" id="2292135">=</span>&nbsp;<span class="ident" id="2292137">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292145">if</span>&nbsp;<span class="ident" id="2292148">u</span>&nbsp;<span class="op" id="2292150">&gt;=</span>&nbsp;<span class="num" id="2292153">10</span>&nbsp;<span class="op" id="2292156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292161">i</span><span class="op" id="2292162">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292168">q</span>&nbsp;<span class="op" id="2292170">:=</span>&nbsp;<span class="ident" id="2292173">u</span>&nbsp;<span class="op" id="2292175">/</span>&nbsp;<span class="num" id="2292177">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292183">a</span><span class="op" id="2292184">[</span><span class="ident" id="2292185">i</span><span class="op" id="2292186">]</span>&nbsp;<span class="op" id="2292188">=</span>&nbsp;<span class="ident" id="2292190">digits</span><span class="op" id="2292196">[</span><span class="builtintype" id="2292197">uintptr</span><span class="op" id="2292204">(</span><span class="ident" id="2292205">u</span><span class="op" id="2292206">-</span><span class="ident" id="2292207">q</span><span class="op" id="2292208">*</span><span class="num" id="2292209">10</span><span class="op" id="2292211">)</span><span class="op" id="2292212">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292217">u</span>&nbsp;<span class="op" id="2292219">=</span>&nbsp;<span class="ident" id="2292221">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292229">}</span>&nbsp;<span class="keyword" id="2292231">else</span>&nbsp;<span class="keyword" id="2292236">if</span>&nbsp;<span class="ident" id="2292239">s</span>&nbsp;<span class="op" id="2292241">:=</span>&nbsp;<span class="ident" id="2292244">shifts</span><span class="op" id="2292250">[</span><span class="ident" id="2292251">base</span><span class="op" id="2292255">]</span><span class="op" id="2292256">;</span>&nbsp;<span class="ident" id="2292258">s</span>&nbsp;<span class="op" id="2292260">&gt;</span>&nbsp;<span class="num" id="2292262">0</span>&nbsp;<span class="op" id="2292264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2292268">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292333">b</span>&nbsp;<span class="op" id="2292335">:=</span>&nbsp;<span class="ident" id="2292338">uint64</span><span class="op" id="2292344">(</span><span class="ident" id="2292345">base</span><span class="op" id="2292349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292353">m</span>&nbsp;<span class="op" id="2292355">:=</span>&nbsp;<span class="builtintype" id="2292358">uintptr</span><span class="op" id="2292365">(</span><span class="ident" id="2292366">b</span><span class="op" id="2292367">)</span>&nbsp;<span class="op" id="2292369">-</span>&nbsp;<span class="num" id="2292371">1</span>&nbsp;<span class="comment" id="2292373">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292390">for</span>&nbsp;<span class="ident" id="2292394">u</span>&nbsp;<span class="op" id="2292396">&gt;=</span>&nbsp;<span class="ident" id="2292399">b</span>&nbsp;<span class="op" id="2292401">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292406">i</span><span class="op" id="2292407">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292413">a</span><span class="op" id="2292414">[</span><span class="ident" id="2292415">i</span><span class="op" id="2292416">]</span>&nbsp;<span class="op" id="2292418">=</span>&nbsp;<span class="ident" id="2292420">digits</span><span class="op" id="2292426">[</span><span class="builtintype" id="2292427">uintptr</span><span class="op" id="2292434">(</span><span class="ident" id="2292435">u</span><span class="op" id="2292436">)</span><span class="op" id="2292437">&amp;</span><span class="ident" id="2292438">m</span><span class="op" id="2292439">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292444">u</span>&nbsp;<span class="op" id="2292446">&gt;&gt;=</span>&nbsp;<span class="ident" id="2292450">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292458">}</span>&nbsp;<span class="keyword" id="2292460">else</span>&nbsp;<span class="op" id="2292465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2292469">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292487">b</span>&nbsp;<span class="op" id="2292489">:=</span>&nbsp;<span class="ident" id="2292492">uint64</span><span class="op" id="2292498">(</span><span class="ident" id="2292499">base</span><span class="op" id="2292503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292507">for</span>&nbsp;<span class="ident" id="2292511">u</span>&nbsp;<span class="op" id="2292513">&gt;=</span>&nbsp;<span class="ident" id="2292516">b</span>&nbsp;<span class="op" id="2292518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292523">i</span><span class="op" id="2292524">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292530">a</span><span class="op" id="2292531">[</span><span class="ident" id="2292532">i</span><span class="op" id="2292533">]</span>&nbsp;<span class="op" id="2292535">=</span>&nbsp;<span class="ident" id="2292537">digits</span><span class="op" id="2292543">[</span><span class="builtintype" id="2292544">uintptr</span><span class="op" id="2292551">(</span><span class="ident" id="2292552">u</span><span class="op" id="2292553">%</span><span class="ident" id="2292554">b</span><span class="op" id="2292555">)</span><span class="op" id="2292556">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292561">u</span>&nbsp;<span class="op" id="2292563">/=</span>&nbsp;<span class="ident" id="2292566">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2292577">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292590">i</span><span class="op" id="2292591">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292595">a</span><span class="op" id="2292596">[</span><span class="ident" id="2292597">i</span><span class="op" id="2292598">]</span>&nbsp;<span class="op" id="2292600">=</span>&nbsp;<span class="ident" id="2292602">digits</span><span class="op" id="2292608">[</span><span class="builtintype" id="2292609">uintptr</span><span class="op" id="2292616">(</span><span class="ident" id="2292617">u</span><span class="op" id="2292618">)</span><span class="op" id="2292619">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2292623">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292644">if</span>&nbsp;<span class="ident" id="2292647">neg</span>&nbsp;<span class="op" id="2292651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292655">i</span><span class="op" id="2292656">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292661">a</span><span class="op" id="2292662">[</span><span class="ident" id="2292663">i</span><span class="op" id="2292664">]</span>&nbsp;<span class="op" id="2292666">=</span>&nbsp;<span class="string" id="2292668">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292677">if</span>&nbsp;<span class="ident" id="2292680">append_</span>&nbsp;<span class="op" id="2292688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292692">d</span>&nbsp;<span class="op" id="2292694">=</span>&nbsp;<span class="builtinfunc" id="2292696">append</span><span class="op" id="2292702">(</span><span class="ident" id="2292703">dst</span><span class="op" id="2292706">,</span>&nbsp;<span class="ident" id="2292708">a</span><span class="op" id="2292709">[</span><span class="ident" id="2292710">i</span><span class="op" id="2292711">:</span><span class="op" id="2292712">]</span><span class="op" id="2292713">...</span><span class="op" id="2292716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292720">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2292728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2292731">s</span>&nbsp;<span class="op" id="2292733">=</span>&nbsp;<span class="builtintype" id="2292735">string</span><span class="op" id="2292741">(</span><span class="ident" id="2292742">a</span><span class="op" id="2292743">[</span><span class="ident" id="2292744">i</span><span class="op" id="2292745">:</span><span class="op" id="2292746">]</span><span class="op" id="2292747">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2292750">return</span><br>
<span class="lineno"></span><span class="op" id="2292757">}</span>
</div>
</body>
</html>
