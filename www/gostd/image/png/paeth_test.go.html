<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8460465">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8460520">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8460574">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8460625">package</span>&nbsp;<span class="ident" id="8460633">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8460638">import</span>&nbsp;<span class="op" id="8460645">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8460648">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8460657">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8460670">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8460680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8460683">func</span>&nbsp;<span class="ident" id="8460688">slowAbs</span><span class="op" id="8460695">(</span><span class="ident" id="8460696">x</span>&nbsp;<span class="builtintype" id="8460698">int</span><span class="op" id="8460701">)</span>&nbsp;<span class="builtintype" id="8460703">int</span>&nbsp;<span class="op" id="8460707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8460710">if</span>&nbsp;<span class="ident" id="8460713">x</span>&nbsp;<span class="op" id="8460715">&lt;</span>&nbsp;<span class="num" id="8460717">0</span>&nbsp;<span class="op" id="8460719">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8460723">return</span>&nbsp;<span class="op" id="8460730">-</span><span class="ident" id="8460731">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8460734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8460737">return</span>&nbsp;<span class="ident" id="8460744">x</span><br>
<span class="lineno"></span><span class="op" id="8460746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8460749">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="8460821">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="8460895">func</span>&nbsp;<span class="ident" id="8460900">slowPaeth</span><span class="op" id="8460909">(</span><span class="ident" id="8460910">a</span><span class="op" id="8460911">,</span>&nbsp;<span class="ident" id="8460913">b</span><span class="op" id="8460914">,</span>&nbsp;<span class="ident" id="8460916">c</span>&nbsp;<span class="builtintype" id="8460918">uint8</span><span class="op" id="8460923">)</span>&nbsp;<span class="builtintype" id="8460925">uint8</span>&nbsp;<span class="op" id="8460931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8460934">p</span>&nbsp;<span class="op" id="8460936">:=</span>&nbsp;<span class="builtintype" id="8460939">int</span><span class="op" id="8460942">(</span><span class="ident" id="8460943">a</span><span class="op" id="8460944">)</span>&nbsp;<span class="op" id="8460946">+</span>&nbsp;<span class="builtintype" id="8460948">int</span><span class="op" id="8460951">(</span><span class="ident" id="8460952">b</span><span class="op" id="8460953">)</span>&nbsp;<span class="op" id="8460955">-</span>&nbsp;<span class="builtintype" id="8460957">int</span><span class="op" id="8460960">(</span><span class="ident" id="8460961">c</span><span class="op" id="8460962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8460965">pa</span>&nbsp;<span class="op" id="8460968">:=</span>&nbsp;<span class="ident" id="8460971">slowAbs</span><span class="op" id="8460978">(</span><span class="ident" id="8460979">p</span>&nbsp;<span class="op" id="8460981">-</span>&nbsp;<span class="builtintype" id="8460983">int</span><span class="op" id="8460986">(</span><span class="ident" id="8460987">a</span><span class="op" id="8460988">)</span><span class="op" id="8460989">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8460992">pb</span>&nbsp;<span class="op" id="8460995">:=</span>&nbsp;<span class="ident" id="8460998">slowAbs</span><span class="op" id="8461005">(</span><span class="ident" id="8461006">p</span>&nbsp;<span class="op" id="8461008">-</span>&nbsp;<span class="builtintype" id="8461010">int</span><span class="op" id="8461013">(</span><span class="ident" id="8461014">b</span><span class="op" id="8461015">)</span><span class="op" id="8461016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461019">pc</span>&nbsp;<span class="op" id="8461022">:=</span>&nbsp;<span class="ident" id="8461025">slowAbs</span><span class="op" id="8461032">(</span><span class="ident" id="8461033">p</span>&nbsp;<span class="op" id="8461035">-</span>&nbsp;<span class="builtintype" id="8461037">int</span><span class="op" id="8461040">(</span><span class="ident" id="8461041">c</span><span class="op" id="8461042">)</span><span class="op" id="8461043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461046">if</span>&nbsp;<span class="ident" id="8461049">pa</span>&nbsp;<span class="op" id="8461052">&lt;=</span>&nbsp;<span class="ident" id="8461055">pb</span>&nbsp;<span class="op" id="8461058">&amp;&amp;</span>&nbsp;<span class="ident" id="8461061">pa</span>&nbsp;<span class="op" id="8461064">&lt;=</span>&nbsp;<span class="ident" id="8461067">pc</span>&nbsp;<span class="op" id="8461070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461074">return</span>&nbsp;<span class="ident" id="8461081">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461084">}</span>&nbsp;<span class="keyword" id="8461086">else</span>&nbsp;<span class="keyword" id="8461091">if</span>&nbsp;<span class="ident" id="8461094">pb</span>&nbsp;<span class="op" id="8461097">&lt;=</span>&nbsp;<span class="ident" id="8461100">pc</span>&nbsp;<span class="op" id="8461103">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461107">return</span>&nbsp;<span class="ident" id="8461114">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461120">return</span>&nbsp;<span class="ident" id="8461127">c</span><br>
<span class="lineno"></span><span class="op" id="8461129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="8461132">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="8461208">func</span>&nbsp;<span class="ident" id="8461213">slowFilterPaeth</span><span class="op" id="8461228">(</span><span class="ident" id="8461229">cdat</span><span class="op" id="8461233">,</span>&nbsp;<span class="ident" id="8461235">pdat</span>&nbsp;<span class="op" id="8461240">[</span><span class="op" id="8461241">]</span><span class="builtintype" id="8461242">byte</span><span class="op" id="8461246">,</span>&nbsp;<span class="ident" id="8461248">bytesPerPixel</span>&nbsp;<span class="builtintype" id="8461262">int</span><span class="op" id="8461265">)</span>&nbsp;<span class="op" id="8461267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461270">for</span>&nbsp;<span class="ident" id="8461274">i</span>&nbsp;<span class="op" id="8461276">:=</span>&nbsp;<span class="num" id="8461279">0</span><span class="op" id="8461280">;</span>&nbsp;<span class="ident" id="8461282">i</span>&nbsp;<span class="op" id="8461284">&lt;</span>&nbsp;<span class="ident" id="8461286">bytesPerPixel</span><span class="op" id="8461299">;</span>&nbsp;<span class="ident" id="8461301">i</span><span class="op" id="8461302">++</span>&nbsp;<span class="op" id="8461305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461309">cdat</span><span class="op" id="8461313">[</span><span class="ident" id="8461314">i</span><span class="op" id="8461315">]</span>&nbsp;<span class="op" id="8461317">+=</span>&nbsp;<span class="ident" id="8461320">paeth</span><span class="op" id="8461325">(</span><span class="num" id="8461326">0</span><span class="op" id="8461327">,</span>&nbsp;<span class="ident" id="8461329">pdat</span><span class="op" id="8461333">[</span><span class="ident" id="8461334">i</span><span class="op" id="8461335">]</span><span class="op" id="8461336">,</span>&nbsp;<span class="num" id="8461338">0</span><span class="op" id="8461339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461342">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461345">for</span>&nbsp;<span class="ident" id="8461349">i</span>&nbsp;<span class="op" id="8461351">:=</span>&nbsp;<span class="ident" id="8461354">bytesPerPixel</span><span class="op" id="8461367">;</span>&nbsp;<span class="ident" id="8461369">i</span>&nbsp;<span class="op" id="8461371">&lt;</span>&nbsp;<span class="builtinfunc" id="8461373">len</span><span class="op" id="8461376">(</span><span class="ident" id="8461377">cdat</span><span class="op" id="8461381">)</span><span class="op" id="8461382">;</span>&nbsp;<span class="ident" id="8461384">i</span><span class="op" id="8461385">++</span>&nbsp;<span class="op" id="8461388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461392">cdat</span><span class="op" id="8461396">[</span><span class="ident" id="8461397">i</span><span class="op" id="8461398">]</span>&nbsp;<span class="op" id="8461400">+=</span>&nbsp;<span class="ident" id="8461403">paeth</span><span class="op" id="8461408">(</span><span class="ident" id="8461409">cdat</span><span class="op" id="8461413">[</span><span class="ident" id="8461414">i</span><span class="op" id="8461415">-</span><span class="ident" id="8461416">bytesPerPixel</span><span class="op" id="8461429">]</span><span class="op" id="8461430">,</span>&nbsp;<span class="ident" id="8461432">pdat</span><span class="op" id="8461436">[</span><span class="ident" id="8461437">i</span><span class="op" id="8461438">]</span><span class="op" id="8461439">,</span>&nbsp;<span class="ident" id="8461441">pdat</span><span class="op" id="8461445">[</span><span class="ident" id="8461446">i</span><span class="op" id="8461447">-</span><span class="ident" id="8461448">bytesPerPixel</span><span class="op" id="8461461">]</span><span class="op" id="8461462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461465">}</span><br>
<span class="lineno"></span><span class="op" id="8461467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8461470">func</span>&nbsp;<span class="ident" id="8461475">TestPaeth</span><span class="op" id="8461484">(</span><span class="ident" id="8461485">t</span>&nbsp;<span class="op" id="8461487">*</span><span class="ident" id="8461488">testing</span><span class="op" id="8461495">.</span><span class="ident" id="8461496">T</span><span class="op" id="8461497">)</span>&nbsp;<span class="op" id="8461499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461502">for</span>&nbsp;<span class="ident" id="8461506">a</span>&nbsp;<span class="op" id="8461508">:=</span>&nbsp;<span class="num" id="8461511">0</span><span class="op" id="8461512">;</span>&nbsp;<span class="ident" id="8461514">a</span>&nbsp;<span class="op" id="8461516">&lt;</span>&nbsp;<span class="num" id="8461518">256</span><span class="op" id="8461521">;</span>&nbsp;<span class="ident" id="8461523">a</span>&nbsp;<span class="op" id="8461525">+=</span>&nbsp;<span class="num" id="8461528">15</span>&nbsp;<span class="op" id="8461531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461535">for</span>&nbsp;<span class="ident" id="8461539">b</span>&nbsp;<span class="op" id="8461541">:=</span>&nbsp;<span class="num" id="8461544">0</span><span class="op" id="8461545">;</span>&nbsp;<span class="ident" id="8461547">b</span>&nbsp;<span class="op" id="8461549">&lt;</span>&nbsp;<span class="num" id="8461551">256</span><span class="op" id="8461554">;</span>&nbsp;<span class="ident" id="8461556">b</span>&nbsp;<span class="op" id="8461558">+=</span>&nbsp;<span class="num" id="8461561">15</span>&nbsp;<span class="op" id="8461564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461569">for</span>&nbsp;<span class="ident" id="8461573">c</span>&nbsp;<span class="op" id="8461575">:=</span>&nbsp;<span class="num" id="8461578">0</span><span class="op" id="8461579">;</span>&nbsp;<span class="ident" id="8461581">c</span>&nbsp;<span class="op" id="8461583">&lt;</span>&nbsp;<span class="num" id="8461585">256</span><span class="op" id="8461588">;</span>&nbsp;<span class="ident" id="8461590">c</span>&nbsp;<span class="op" id="8461592">+=</span>&nbsp;<span class="num" id="8461595">15</span>&nbsp;<span class="op" id="8461598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461604">got</span>&nbsp;<span class="op" id="8461608">:=</span>&nbsp;<span class="ident" id="8461611">paeth</span><span class="op" id="8461616">(</span><span class="builtintype" id="8461617">uint8</span><span class="op" id="8461622">(</span><span class="ident" id="8461623">a</span><span class="op" id="8461624">)</span><span class="op" id="8461625">,</span>&nbsp;<span class="builtintype" id="8461627">uint8</span><span class="op" id="8461632">(</span><span class="ident" id="8461633">b</span><span class="op" id="8461634">)</span><span class="op" id="8461635">,</span>&nbsp;<span class="builtintype" id="8461637">uint8</span><span class="op" id="8461642">(</span><span class="ident" id="8461643">c</span><span class="op" id="8461644">)</span><span class="op" id="8461645">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461651">want</span>&nbsp;<span class="op" id="8461656">:=</span>&nbsp;<span class="ident" id="8461659">slowPaeth</span><span class="op" id="8461668">(</span><span class="builtintype" id="8461669">uint8</span><span class="op" id="8461674">(</span><span class="ident" id="8461675">a</span><span class="op" id="8461676">)</span><span class="op" id="8461677">,</span>&nbsp;<span class="builtintype" id="8461679">uint8</span><span class="op" id="8461684">(</span><span class="ident" id="8461685">b</span><span class="op" id="8461686">)</span><span class="op" id="8461687">,</span>&nbsp;<span class="builtintype" id="8461689">uint8</span><span class="op" id="8461694">(</span><span class="ident" id="8461695">c</span><span class="op" id="8461696">)</span><span class="op" id="8461697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461703">if</span>&nbsp;<span class="ident" id="8461706">got</span>&nbsp;<span class="op" id="8461710">!=</span>&nbsp;<span class="ident" id="8461713">want</span>&nbsp;<span class="op" id="8461718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461725">t</span><span class="op" id="8461726">.</span><span class="ident" id="8461727">Errorf</span><span class="op" id="8461733">(</span><span class="string" id="8461734">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8461773">,</span>&nbsp;<span class="ident" id="8461775">a</span><span class="op" id="8461776">,</span>&nbsp;<span class="ident" id="8461778">b</span><span class="op" id="8461779">,</span>&nbsp;<span class="ident" id="8461781">c</span><span class="op" id="8461782">,</span>&nbsp;<span class="ident" id="8461784">got</span><span class="op" id="8461787">,</span>&nbsp;<span class="ident" id="8461789">want</span><span class="op" id="8461793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461804">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461811">}</span><br>
<span class="lineno"></span><span class="op" id="8461813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8461816">func</span>&nbsp;<span class="ident" id="8461821">BenchmarkPaeth</span><span class="op" id="8461835">(</span><span class="ident" id="8461836">b</span>&nbsp;<span class="op" id="8461838">*</span><span class="ident" id="8461839">testing</span><span class="op" id="8461846">.</span><span class="ident" id="8461847">B</span><span class="op" id="8461848">)</span>&nbsp;<span class="op" id="8461850">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8461853">for</span>&nbsp;<span class="ident" id="8461857">i</span>&nbsp;<span class="op" id="8461859">:=</span>&nbsp;<span class="num" id="8461862">0</span><span class="op" id="8461863">;</span>&nbsp;<span class="ident" id="8461865">i</span>&nbsp;<span class="op" id="8461867">&lt;</span>&nbsp;<span class="ident" id="8461869">b</span><span class="op" id="8461870">.</span><span class="ident" id="8461871">N</span><span class="op" id="8461872">;</span>&nbsp;<span class="ident" id="8461874">i</span><span class="op" id="8461875">++</span>&nbsp;<span class="op" id="8461878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461882">paeth</span><span class="op" id="8461887">(</span><span class="builtintype" id="8461888">uint8</span><span class="op" id="8461893">(</span><span class="ident" id="8461894">i</span><span class="op" id="8461895">&gt;&gt;</span><span class="num" id="8461897">16</span><span class="op" id="8461899">)</span><span class="op" id="8461900">,</span>&nbsp;<span class="builtintype" id="8461902">uint8</span><span class="op" id="8461907">(</span><span class="ident" id="8461908">i</span><span class="op" id="8461909">&gt;&gt;</span><span class="num" id="8461911">8</span><span class="op" id="8461912">)</span><span class="op" id="8461913">,</span>&nbsp;<span class="builtintype" id="8461915">uint8</span><span class="op" id="8461920">(</span><span class="ident" id="8461921">i</span><span class="op" id="8461922">)</span><span class="op" id="8461923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8461926">}</span><br>
<span class="lineno"></span><span class="op" id="8461928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8461931">func</span>&nbsp;<span class="ident" id="8461936">TestPaethDecode</span><span class="op" id="8461951">(</span><span class="ident" id="8461952">t</span>&nbsp;<span class="op" id="8461954">*</span><span class="ident" id="8461955">testing</span><span class="op" id="8461962">.</span><span class="ident" id="8461963">T</span><span class="op" id="8461964">)</span>&nbsp;<span class="op" id="8461966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461969">pdat0</span>&nbsp;<span class="op" id="8461975">:=</span>&nbsp;<span class="builtinfunc" id="8461978">make</span><span class="op" id="8461982">(</span><span class="op" id="8461983">[</span><span class="op" id="8461984">]</span><span class="builtintype" id="8461985">byte</span><span class="op" id="8461989">,</span>&nbsp;<span class="num" id="8461991">32</span><span class="op" id="8461993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8461996">pdat1</span>&nbsp;<span class="op" id="8462002">:=</span>&nbsp;<span class="builtinfunc" id="8462005">make</span><span class="op" id="8462009">(</span><span class="op" id="8462010">[</span><span class="op" id="8462011">]</span><span class="builtintype" id="8462012">byte</span><span class="op" id="8462016">,</span>&nbsp;<span class="num" id="8462018">32</span><span class="op" id="8462020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462023">pdat2</span>&nbsp;<span class="op" id="8462029">:=</span>&nbsp;<span class="builtinfunc" id="8462032">make</span><span class="op" id="8462036">(</span><span class="op" id="8462037">[</span><span class="op" id="8462038">]</span><span class="builtintype" id="8462039">byte</span><span class="op" id="8462043">,</span>&nbsp;<span class="num" id="8462045">32</span><span class="op" id="8462047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462050">cdat0</span>&nbsp;<span class="op" id="8462056">:=</span>&nbsp;<span class="builtinfunc" id="8462059">make</span><span class="op" id="8462063">(</span><span class="op" id="8462064">[</span><span class="op" id="8462065">]</span><span class="builtintype" id="8462066">byte</span><span class="op" id="8462070">,</span>&nbsp;<span class="num" id="8462072">32</span><span class="op" id="8462074">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462077">cdat1</span>&nbsp;<span class="op" id="8462083">:=</span>&nbsp;<span class="builtinfunc" id="8462086">make</span><span class="op" id="8462090">(</span><span class="op" id="8462091">[</span><span class="op" id="8462092">]</span><span class="builtintype" id="8462093">byte</span><span class="op" id="8462097">,</span>&nbsp;<span class="num" id="8462099">32</span><span class="op" id="8462101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462104">cdat2</span>&nbsp;<span class="op" id="8462110">:=</span>&nbsp;<span class="builtinfunc" id="8462113">make</span><span class="op" id="8462117">(</span><span class="op" id="8462118">[</span><span class="op" id="8462119">]</span><span class="builtintype" id="8462120">byte</span><span class="op" id="8462124">,</span>&nbsp;<span class="num" id="8462126">32</span><span class="op" id="8462128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462131">r</span>&nbsp;<span class="op" id="8462133">:=</span>&nbsp;<span class="ident" id="8462136">rand</span><span class="op" id="8462140">.</span><span class="ident" id="8462141">New</span><span class="op" id="8462144">(</span><span class="ident" id="8462145">rand</span><span class="op" id="8462149">.</span><span class="ident" id="8462150">NewSource</span><span class="op" id="8462159">(</span><span class="num" id="8462160">1</span><span class="op" id="8462161">)</span><span class="op" id="8462162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8462165">for</span>&nbsp;<span class="ident" id="8462169">bytesPerPixel</span>&nbsp;<span class="op" id="8462183">:=</span>&nbsp;<span class="num" id="8462186">1</span><span class="op" id="8462187">;</span>&nbsp;<span class="ident" id="8462189">bytesPerPixel</span>&nbsp;<span class="op" id="8462203">&lt;=</span>&nbsp;<span class="num" id="8462206">8</span><span class="op" id="8462207">;</span>&nbsp;<span class="ident" id="8462209">bytesPerPixel</span><span class="op" id="8462222">++</span>&nbsp;<span class="op" id="8462225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8462229">for</span>&nbsp;<span class="ident" id="8462233">i</span>&nbsp;<span class="op" id="8462235">:=</span>&nbsp;<span class="num" id="8462238">0</span><span class="op" id="8462239">;</span>&nbsp;<span class="ident" id="8462241">i</span>&nbsp;<span class="op" id="8462243">&lt;</span>&nbsp;<span class="num" id="8462245">100</span><span class="op" id="8462248">;</span>&nbsp;<span class="ident" id="8462250">i</span><span class="op" id="8462251">++</span>&nbsp;<span class="op" id="8462254">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8462259">for</span>&nbsp;<span class="ident" id="8462263">j</span>&nbsp;<span class="op" id="8462265">:=</span>&nbsp;<span class="keyword" id="8462268">range</span>&nbsp;<span class="ident" id="8462274">pdat0</span>&nbsp;<span class="op" id="8462280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462286">pdat0</span><span class="op" id="8462291">[</span><span class="ident" id="8462292">j</span><span class="op" id="8462293">]</span>&nbsp;<span class="op" id="8462295">=</span>&nbsp;<span class="builtintype" id="8462297">uint8</span><span class="op" id="8462302">(</span><span class="ident" id="8462303">r</span><span class="op" id="8462304">.</span><span class="ident" id="8462305">Uint32</span><span class="op" id="8462311">(</span><span class="op" id="8462312">)</span><span class="op" id="8462313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462319">cdat0</span><span class="op" id="8462324">[</span><span class="ident" id="8462325">j</span><span class="op" id="8462326">]</span>&nbsp;<span class="op" id="8462328">=</span>&nbsp;<span class="builtintype" id="8462330">uint8</span><span class="op" id="8462335">(</span><span class="ident" id="8462336">r</span><span class="op" id="8462337">.</span><span class="ident" id="8462338">Uint32</span><span class="op" id="8462344">(</span><span class="op" id="8462345">)</span><span class="op" id="8462346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8462351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8462356">copy</span><span class="op" id="8462360">(</span><span class="ident" id="8462361">pdat1</span><span class="op" id="8462366">,</span>&nbsp;<span class="ident" id="8462368">pdat0</span><span class="op" id="8462373">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8462378">copy</span><span class="op" id="8462382">(</span><span class="ident" id="8462383">pdat2</span><span class="op" id="8462388">,</span>&nbsp;<span class="ident" id="8462390">pdat0</span><span class="op" id="8462395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8462400">copy</span><span class="op" id="8462404">(</span><span class="ident" id="8462405">cdat1</span><span class="op" id="8462410">,</span>&nbsp;<span class="ident" id="8462412">cdat0</span><span class="op" id="8462417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8462422">copy</span><span class="op" id="8462426">(</span><span class="ident" id="8462427">cdat2</span><span class="op" id="8462432">,</span>&nbsp;<span class="ident" id="8462434">cdat0</span><span class="op" id="8462439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462444">filterPaeth</span><span class="op" id="8462455">(</span><span class="ident" id="8462456">cdat1</span><span class="op" id="8462461">,</span>&nbsp;<span class="ident" id="8462463">pdat1</span><span class="op" id="8462468">,</span>&nbsp;<span class="ident" id="8462470">bytesPerPixel</span><span class="op" id="8462483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462488">slowFilterPaeth</span><span class="op" id="8462503">(</span><span class="ident" id="8462504">cdat2</span><span class="op" id="8462509">,</span>&nbsp;<span class="ident" id="8462511">pdat2</span><span class="op" id="8462516">,</span>&nbsp;<span class="ident" id="8462518">bytesPerPixel</span><span class="op" id="8462531">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8462536">if</span>&nbsp;<span class="op" id="8462539">!</span><span class="ident" id="8462540">bytes</span><span class="op" id="8462545">.</span><span class="ident" id="8462546">Equal</span><span class="op" id="8462551">(</span><span class="ident" id="8462552">cdat1</span><span class="op" id="8462557">,</span>&nbsp;<span class="ident" id="8462559">cdat2</span><span class="op" id="8462564">)</span>&nbsp;<span class="op" id="8462566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8462572">t</span><span class="op" id="8462573">.</span><span class="ident" id="8462574">Errorf</span><span class="op" id="8462580">(</span><span class="string" id="8462581">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="8462648">,</span>&nbsp;<span class="ident" id="8462650">bytesPerPixel</span><span class="op" id="8462663">,</span>&nbsp;<span class="ident" id="8462665">pdat0</span><span class="op" id="8462670">,</span>&nbsp;<span class="ident" id="8462672">cdat0</span><span class="op" id="8462677">,</span>&nbsp;<span class="ident" id="8462679">cdat1</span><span class="op" id="8462684">,</span>&nbsp;<span class="ident" id="8462686">cdat2</span><span class="op" id="8462691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8462697">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8462706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8462710">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8462713">}</span><br>
<span class="lineno"></span><span class="op" id="8462715">}</span>
</div>
</body>
</html>
