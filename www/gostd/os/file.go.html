<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2475351">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2475406">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2475460">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2475511">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2475587">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2475661">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2475742">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2475813">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2475888">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2475959">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2476018">//</span><br>
<span class="lineno"></span><span class="comment" id="2476021">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2476097">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2476180">//</span><br>
<span class="lineno"></span><span class="comment" id="2476183">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2476251">//</span><br>
<span class="lineno"></span><span class="comment" id="2476254">//&nbsp;&nbsp;&nbsp;&nbsp;file,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2476309">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2476328">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2476347">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2476352">//</span><br>
<span class="lineno"></span><span class="comment" id="2476355">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2476425">//</span><br>
<span class="lineno">25</span><span class="comment" id="2476428">//&nbsp;&nbsp;&nbsp;&nbsp;open&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2476471">//</span><br>
<span class="lineno"></span><span class="comment" id="2476474">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2476542">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2476613">//</span><br>
<span class="lineno">30</span><span class="comment" id="2476616">//&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2476645">//&nbsp;&nbsp;&nbsp;&nbsp;count,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2476678">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2476697">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2476716">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">35</span><span class="comment" id="2476721">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2476779">//</span><br>
<span class="lineno"></span><span class="keyword" id="2476782">package</span>&nbsp;<span class="ident" id="2476790">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2476794">import</span>&nbsp;<span class="op" id="2476801">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2476804">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2476810">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2476820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2476823">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2476882">func</span>&nbsp;<span class="op" id="2476887">(</span><span class="ident" id="2476888">f</span>&nbsp;<span class="op" id="2476890">*</span><span class="ident" id="2476891">File</span><span class="op" id="2476895">)</span>&nbsp;<span class="ident" id="2476897">Name</span><span class="op" id="2476901">(</span><span class="op" id="2476902">)</span>&nbsp;<span class="builtintype" id="2476904">string</span>&nbsp;<span class="op" id="2476911">{</span>&nbsp;<span class="keyword" id="2476913">return</span>&nbsp;<span class="ident" id="2476920">f</span><span class="op" id="2476921">.</span><span class="ident" id="2476922">name</span>&nbsp;<span class="op" id="2476927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2476930">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2477006">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2477063">var</span>&nbsp;<span class="op" id="2477067">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477070">Stdin</span>&nbsp;&nbsp;<span class="op" id="2477077">=</span>&nbsp;<span class="ident" id="2477079">NewFile</span><span class="op" id="2477086">(</span><span class="builtintype" id="2477087">uintptr</span><span class="op" id="2477094">(</span><span class="ident" id="2477095">syscall</span><span class="op" id="2477102">.</span><span class="ident" id="2477103">Stdin</span><span class="op" id="2477108">)</span><span class="op" id="2477109">,</span>&nbsp;<span class="string" id="2477111">&#34;/dev/stdin&#34;</span><span class="op" id="2477123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477126">Stdout</span>&nbsp;<span class="op" id="2477133">=</span>&nbsp;<span class="ident" id="2477135">NewFile</span><span class="op" id="2477142">(</span><span class="builtintype" id="2477143">uintptr</span><span class="op" id="2477150">(</span><span class="ident" id="2477151">syscall</span><span class="op" id="2477158">.</span><span class="ident" id="2477159">Stdout</span><span class="op" id="2477165">)</span><span class="op" id="2477166">,</span>&nbsp;<span class="string" id="2477168">&#34;/dev/stdout&#34;</span><span class="op" id="2477181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477184">Stderr</span>&nbsp;<span class="op" id="2477191">=</span>&nbsp;<span class="ident" id="2477193">NewFile</span><span class="op" id="2477200">(</span><span class="builtintype" id="2477201">uintptr</span><span class="op" id="2477208">(</span><span class="ident" id="2477209">syscall</span><span class="op" id="2477216">.</span><span class="ident" id="2477217">Stderr</span><span class="op" id="2477223">)</span><span class="op" id="2477224">,</span>&nbsp;<span class="string" id="2477226">&#34;/dev/stderr&#34;</span><span class="op" id="2477239">)</span><br>
<span class="lineno"></span><span class="op" id="2477241">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2477244">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2477316">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2477357">const</span>&nbsp;<span class="op" id="2477363">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477366">O_RDONLY</span>&nbsp;<span class="builtintype" id="2477375">int</span>&nbsp;<span class="op" id="2477379">=</span>&nbsp;<span class="ident" id="2477381">syscall</span><span class="op" id="2477388">.</span><span class="ident" id="2477389">O_RDONLY</span>&nbsp;<span class="comment" id="2477398">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477427">O_WRONLY</span>&nbsp;<span class="builtintype" id="2477436">int</span>&nbsp;<span class="op" id="2477440">=</span>&nbsp;<span class="ident" id="2477442">syscall</span><span class="op" id="2477449">.</span><span class="ident" id="2477450">O_WRONLY</span>&nbsp;<span class="comment" id="2477459">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477489">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2477498">int</span>&nbsp;<span class="op" id="2477502">=</span>&nbsp;<span class="ident" id="2477504">syscall</span><span class="op" id="2477511">.</span><span class="ident" id="2477512">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2477521">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477551">O_APPEND</span>&nbsp;<span class="builtintype" id="2477560">int</span>&nbsp;<span class="op" id="2477564">=</span>&nbsp;<span class="ident" id="2477566">syscall</span><span class="op" id="2477573">.</span><span class="ident" id="2477574">O_APPEND</span>&nbsp;<span class="comment" id="2477583">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477625">O_CREATE</span>&nbsp;<span class="builtintype" id="2477634">int</span>&nbsp;<span class="op" id="2477638">=</span>&nbsp;<span class="ident" id="2477640">syscall</span><span class="op" id="2477647">.</span><span class="ident" id="2477648">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2477657">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477695">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2477704">int</span>&nbsp;<span class="op" id="2477708">=</span>&nbsp;<span class="ident" id="2477710">syscall</span><span class="op" id="2477717">.</span><span class="ident" id="2477718">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2477727">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477771">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2477780">int</span>&nbsp;<span class="op" id="2477784">=</span>&nbsp;<span class="ident" id="2477786">syscall</span><span class="op" id="2477793">.</span><span class="ident" id="2477794">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2477803">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477833">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2477842">int</span>&nbsp;<span class="op" id="2477846">=</span>&nbsp;<span class="ident" id="2477848">syscall</span><span class="op" id="2477855">.</span><span class="ident" id="2477856">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2477865">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2477908">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2477911">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2477934">const</span>&nbsp;<span class="op" id="2477940">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477943">SEEK_SET</span>&nbsp;<span class="builtintype" id="2477952">int</span>&nbsp;<span class="op" id="2477956">=</span>&nbsp;<span class="num" id="2477958">0</span>&nbsp;<span class="comment" id="2477960">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478004">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2478013">int</span>&nbsp;<span class="op" id="2478017">=</span>&nbsp;<span class="num" id="2478019">1</span>&nbsp;<span class="comment" id="2478021">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478061">SEEK_END</span>&nbsp;<span class="builtintype" id="2478070">int</span>&nbsp;<span class="op" id="2478074">=</span>&nbsp;<span class="num" id="2478076">2</span>&nbsp;<span class="comment" id="2478078">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2478106">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2478109">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2478174">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2478219">type</span>&nbsp;<span class="ident" id="2478224">LinkError</span>&nbsp;<span class="keyword" id="2478234">struct</span>&nbsp;<span class="op" id="2478241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478244">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2478248">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478256">Old</span>&nbsp;<span class="builtintype" id="2478260">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478268">New</span>&nbsp;<span class="builtintype" id="2478272">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478280">Err</span>&nbsp;<span class="builtintype" id="2478284">error</span><br>
<span class="lineno"></span><span class="op" id="2478290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2478293">func</span>&nbsp;<span class="op" id="2478298">(</span><span class="ident" id="2478299">e</span>&nbsp;<span class="op" id="2478301">*</span><span class="ident" id="2478302">LinkError</span><span class="op" id="2478311">)</span>&nbsp;<span class="ident" id="2478313">Error</span><span class="op" id="2478318">(</span><span class="op" id="2478319">)</span>&nbsp;<span class="builtintype" id="2478321">string</span>&nbsp;<span class="op" id="2478328">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478331">return</span>&nbsp;<span class="ident" id="2478338">e</span><span class="op" id="2478339">.</span><span class="ident" id="2478340">Op</span>&nbsp;<span class="op" id="2478343">+</span>&nbsp;<span class="string" id="2478345">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2478349">+</span>&nbsp;<span class="ident" id="2478351">e</span><span class="op" id="2478352">.</span><span class="ident" id="2478353">Old</span>&nbsp;<span class="op" id="2478357">+</span>&nbsp;<span class="string" id="2478359">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2478363">+</span>&nbsp;<span class="ident" id="2478365">e</span><span class="op" id="2478366">.</span><span class="ident" id="2478367">New</span>&nbsp;<span class="op" id="2478371">+</span>&nbsp;<span class="string" id="2478373">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2478378">+</span>&nbsp;<span class="ident" id="2478380">e</span><span class="op" id="2478381">.</span><span class="ident" id="2478382">Err</span><span class="op" id="2478385">.</span><span class="ident" id="2478386">Error</span><span class="op" id="2478391">(</span><span class="op" id="2478392">)</span><br>
<span class="lineno"></span><span class="op" id="2478394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478397">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2478445">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2478506">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2478565">func</span>&nbsp;<span class="op" id="2478570">(</span><span class="ident" id="2478571">f</span>&nbsp;<span class="op" id="2478573">*</span><span class="ident" id="2478574">File</span><span class="op" id="2478578">)</span>&nbsp;<span class="ident" id="2478580">Read</span><span class="op" id="2478584">(</span><span class="ident" id="2478585">b</span>&nbsp;<span class="op" id="2478587">[</span><span class="op" id="2478588">]</span><span class="builtintype" id="2478589">byte</span><span class="op" id="2478593">)</span>&nbsp;<span class="op" id="2478595">(</span><span class="ident" id="2478596">n</span>&nbsp;<span class="builtintype" id="2478598">int</span><span class="op" id="2478601">,</span>&nbsp;<span class="ident" id="2478603">err</span>&nbsp;<span class="builtintype" id="2478607">error</span><span class="op" id="2478612">)</span>&nbsp;<span class="op" id="2478614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478617">if</span>&nbsp;<span class="ident" id="2478620">f</span>&nbsp;<span class="op" id="2478622">==</span>&nbsp;<span class="builtintype" id="2478625">nil</span>&nbsp;<span class="op" id="2478629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478633">return</span>&nbsp;<span class="num" id="2478640">0</span><span class="op" id="2478641">,</span>&nbsp;<span class="ident" id="2478643">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478655">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478658">n</span><span class="op" id="2478659">,</span>&nbsp;<span class="ident" id="2478661">e</span>&nbsp;<span class="op" id="2478663">:=</span>&nbsp;<span class="ident" id="2478666">f</span><span class="op" id="2478667">.</span><span class="ident" id="2478668">read</span><span class="op" id="2478672">(</span><span class="ident" id="2478673">b</span><span class="op" id="2478674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478677">if</span>&nbsp;<span class="ident" id="2478680">n</span>&nbsp;<span class="op" id="2478682">&lt;</span>&nbsp;<span class="num" id="2478684">0</span>&nbsp;<span class="op" id="2478686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478690">n</span>&nbsp;<span class="op" id="2478692">=</span>&nbsp;<span class="num" id="2478694">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478700">if</span>&nbsp;<span class="ident" id="2478703">n</span>&nbsp;<span class="op" id="2478705">==</span>&nbsp;<span class="num" id="2478708">0</span>&nbsp;<span class="op" id="2478710">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2478713">len</span><span class="op" id="2478716">(</span><span class="ident" id="2478717">b</span><span class="op" id="2478718">)</span>&nbsp;<span class="op" id="2478720">&gt;</span>&nbsp;<span class="num" id="2478722">0</span>&nbsp;<span class="op" id="2478724">&amp;&amp;</span>&nbsp;<span class="ident" id="2478727">e</span>&nbsp;<span class="op" id="2478729">==</span>&nbsp;<span class="builtintype" id="2478732">nil</span>&nbsp;<span class="op" id="2478736">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478740">return</span>&nbsp;<span class="num" id="2478747">0</span><span class="op" id="2478748">,</span>&nbsp;<span class="ident" id="2478750">io</span><span class="op" id="2478752">.</span><span class="ident" id="2478753">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478761">if</span>&nbsp;<span class="ident" id="2478764">e</span>&nbsp;<span class="op" id="2478766">!=</span>&nbsp;<span class="builtintype" id="2478769">nil</span>&nbsp;<span class="op" id="2478773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478777">err</span>&nbsp;<span class="op" id="2478781">=</span>&nbsp;<span class="op" id="2478783">&amp;</span><span class="ident" id="2478784">PathError</span><span class="op" id="2478793">{</span><span class="string" id="2478794">&#34;read&#34;</span><span class="op" id="2478800">,</span>&nbsp;<span class="ident" id="2478802">f</span><span class="op" id="2478803">.</span><span class="ident" id="2478804">name</span><span class="op" id="2478808">,</span>&nbsp;<span class="ident" id="2478810">e</span><span class="op" id="2478811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478814">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478817">return</span>&nbsp;<span class="ident" id="2478824">n</span><span class="op" id="2478825">,</span>&nbsp;<span class="ident" id="2478827">err</span><br>
<span class="lineno"></span><span class="op" id="2478831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478834">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2478906">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2478968">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2479026">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2479067">func</span>&nbsp;<span class="op" id="2479072">(</span><span class="ident" id="2479073">f</span>&nbsp;<span class="op" id="2479075">*</span><span class="ident" id="2479076">File</span><span class="op" id="2479080">)</span>&nbsp;<span class="ident" id="2479082">ReadAt</span><span class="op" id="2479088">(</span><span class="ident" id="2479089">b</span>&nbsp;<span class="op" id="2479091">[</span><span class="op" id="2479092">]</span><span class="builtintype" id="2479093">byte</span><span class="op" id="2479097">,</span>&nbsp;<span class="ident" id="2479099">off</span>&nbsp;<span class="builtintype" id="2479103">int64</span><span class="op" id="2479108">)</span>&nbsp;<span class="op" id="2479110">(</span><span class="ident" id="2479111">n</span>&nbsp;<span class="builtintype" id="2479113">int</span><span class="op" id="2479116">,</span>&nbsp;<span class="ident" id="2479118">err</span>&nbsp;<span class="builtintype" id="2479122">error</span><span class="op" id="2479127">)</span>&nbsp;<span class="op" id="2479129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479132">if</span>&nbsp;<span class="ident" id="2479135">f</span>&nbsp;<span class="op" id="2479137">==</span>&nbsp;<span class="builtintype" id="2479140">nil</span>&nbsp;<span class="op" id="2479144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479148">return</span>&nbsp;<span class="num" id="2479155">0</span><span class="op" id="2479156">,</span>&nbsp;<span class="ident" id="2479158">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479173">for</span>&nbsp;<span class="builtinfunc" id="2479177">len</span><span class="op" id="2479180">(</span><span class="ident" id="2479181">b</span><span class="op" id="2479182">)</span>&nbsp;<span class="op" id="2479184">&gt;</span>&nbsp;<span class="num" id="2479186">0</span>&nbsp;<span class="op" id="2479188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479192">m</span><span class="op" id="2479193">,</span>&nbsp;<span class="ident" id="2479195">e</span>&nbsp;<span class="op" id="2479197">:=</span>&nbsp;<span class="ident" id="2479200">f</span><span class="op" id="2479201">.</span><span class="ident" id="2479202">pread</span><span class="op" id="2479207">(</span><span class="ident" id="2479208">b</span><span class="op" id="2479209">,</span>&nbsp;<span class="ident" id="2479211">off</span><span class="op" id="2479214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479218">if</span>&nbsp;<span class="ident" id="2479221">m</span>&nbsp;<span class="op" id="2479223">==</span>&nbsp;<span class="num" id="2479226">0</span>&nbsp;<span class="op" id="2479228">&amp;&amp;</span>&nbsp;<span class="ident" id="2479231">e</span>&nbsp;<span class="op" id="2479233">==</span>&nbsp;<span class="builtintype" id="2479236">nil</span>&nbsp;<span class="op" id="2479240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479245">return</span>&nbsp;<span class="ident" id="2479252">n</span><span class="op" id="2479253">,</span>&nbsp;<span class="ident" id="2479255">io</span><span class="op" id="2479257">.</span><span class="ident" id="2479258">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479268">if</span>&nbsp;<span class="ident" id="2479271">e</span>&nbsp;<span class="op" id="2479273">!=</span>&nbsp;<span class="builtintype" id="2479276">nil</span>&nbsp;<span class="op" id="2479280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479285">err</span>&nbsp;<span class="op" id="2479289">=</span>&nbsp;<span class="op" id="2479291">&amp;</span><span class="ident" id="2479292">PathError</span><span class="op" id="2479301">{</span><span class="string" id="2479302">&#34;read&#34;</span><span class="op" id="2479308">,</span>&nbsp;<span class="ident" id="2479310">f</span><span class="op" id="2479311">.</span><span class="ident" id="2479312">name</span><span class="op" id="2479316">,</span>&nbsp;<span class="ident" id="2479318">e</span><span class="op" id="2479319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479324">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479332">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479336">n</span>&nbsp;<span class="op" id="2479338">+=</span>&nbsp;<span class="ident" id="2479341">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479345">b</span>&nbsp;<span class="op" id="2479347">=</span>&nbsp;<span class="ident" id="2479349">b</span><span class="op" id="2479350">[</span><span class="ident" id="2479351">m</span><span class="op" id="2479352">:</span><span class="op" id="2479353">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479357">off</span>&nbsp;<span class="op" id="2479361">+=</span>&nbsp;<span class="builtintype" id="2479364">int64</span><span class="op" id="2479369">(</span><span class="ident" id="2479370">m</span><span class="op" id="2479371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479377">return</span><br>
<span class="lineno">130</span><span class="op" id="2479384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2479387">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2479429">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2479493">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2479544">func</span>&nbsp;<span class="op" id="2479549">(</span><span class="ident" id="2479550">f</span>&nbsp;<span class="op" id="2479552">*</span><span class="ident" id="2479553">File</span><span class="op" id="2479557">)</span>&nbsp;<span class="ident" id="2479559">Write</span><span class="op" id="2479564">(</span><span class="ident" id="2479565">b</span>&nbsp;<span class="op" id="2479567">[</span><span class="op" id="2479568">]</span><span class="builtintype" id="2479569">byte</span><span class="op" id="2479573">)</span>&nbsp;<span class="op" id="2479575">(</span><span class="ident" id="2479576">n</span>&nbsp;<span class="builtintype" id="2479578">int</span><span class="op" id="2479581">,</span>&nbsp;<span class="ident" id="2479583">err</span>&nbsp;<span class="builtintype" id="2479587">error</span><span class="op" id="2479592">)</span>&nbsp;<span class="op" id="2479594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479597">if</span>&nbsp;<span class="ident" id="2479600">f</span>&nbsp;<span class="op" id="2479602">==</span>&nbsp;<span class="builtintype" id="2479605">nil</span>&nbsp;<span class="op" id="2479609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479613">return</span>&nbsp;<span class="num" id="2479620">0</span><span class="op" id="2479621">,</span>&nbsp;<span class="ident" id="2479623">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479638">n</span><span class="op" id="2479639">,</span>&nbsp;<span class="ident" id="2479641">e</span>&nbsp;<span class="op" id="2479643">:=</span>&nbsp;<span class="ident" id="2479646">f</span><span class="op" id="2479647">.</span><span class="ident" id="2479648">write</span><span class="op" id="2479653">(</span><span class="ident" id="2479654">b</span><span class="op" id="2479655">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479658">if</span>&nbsp;<span class="ident" id="2479661">n</span>&nbsp;<span class="op" id="2479663">&lt;</span>&nbsp;<span class="num" id="2479665">0</span>&nbsp;<span class="op" id="2479667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479671">n</span>&nbsp;<span class="op" id="2479673">=</span>&nbsp;<span class="num" id="2479675">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479681">if</span>&nbsp;<span class="ident" id="2479684">n</span>&nbsp;<span class="op" id="2479686">!=</span>&nbsp;<span class="builtinfunc" id="2479689">len</span><span class="op" id="2479692">(</span><span class="ident" id="2479693">b</span><span class="op" id="2479694">)</span>&nbsp;<span class="op" id="2479696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479700">err</span>&nbsp;<span class="op" id="2479704">=</span>&nbsp;<span class="ident" id="2479706">io</span><span class="op" id="2479708">.</span><span class="ident" id="2479709">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479728">epipecheck</span><span class="op" id="2479738">(</span><span class="ident" id="2479739">f</span><span class="op" id="2479740">,</span>&nbsp;<span class="ident" id="2479742">e</span><span class="op" id="2479743">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479747">if</span>&nbsp;<span class="ident" id="2479750">e</span>&nbsp;<span class="op" id="2479752">!=</span>&nbsp;<span class="builtintype" id="2479755">nil</span>&nbsp;<span class="op" id="2479759">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479763">err</span>&nbsp;<span class="op" id="2479767">=</span>&nbsp;<span class="op" id="2479769">&amp;</span><span class="ident" id="2479770">PathError</span><span class="op" id="2479779">{</span><span class="string" id="2479780">&#34;write&#34;</span><span class="op" id="2479787">,</span>&nbsp;<span class="ident" id="2479789">f</span><span class="op" id="2479790">.</span><span class="ident" id="2479791">name</span><span class="op" id="2479795">,</span>&nbsp;<span class="ident" id="2479797">e</span><span class="op" id="2479798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479804">return</span>&nbsp;<span class="ident" id="2479811">n</span><span class="op" id="2479812">,</span>&nbsp;<span class="ident" id="2479814">err</span><br>
<span class="lineno"></span><span class="op" id="2479818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2479821">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2479893">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2479957">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2480010">func</span>&nbsp;<span class="op" id="2480015">(</span><span class="ident" id="2480016">f</span>&nbsp;<span class="op" id="2480018">*</span><span class="ident" id="2480019">File</span><span class="op" id="2480023">)</span>&nbsp;<span class="ident" id="2480025">WriteAt</span><span class="op" id="2480032">(</span><span class="ident" id="2480033">b</span>&nbsp;<span class="op" id="2480035">[</span><span class="op" id="2480036">]</span><span class="builtintype" id="2480037">byte</span><span class="op" id="2480041">,</span>&nbsp;<span class="ident" id="2480043">off</span>&nbsp;<span class="builtintype" id="2480047">int64</span><span class="op" id="2480052">)</span>&nbsp;<span class="op" id="2480054">(</span><span class="ident" id="2480055">n</span>&nbsp;<span class="builtintype" id="2480057">int</span><span class="op" id="2480060">,</span>&nbsp;<span class="ident" id="2480062">err</span>&nbsp;<span class="builtintype" id="2480066">error</span><span class="op" id="2480071">)</span>&nbsp;<span class="op" id="2480073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480076">if</span>&nbsp;<span class="ident" id="2480079">f</span>&nbsp;<span class="op" id="2480081">==</span>&nbsp;<span class="builtintype" id="2480084">nil</span>&nbsp;<span class="op" id="2480088">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480092">return</span>&nbsp;<span class="num" id="2480099">0</span><span class="op" id="2480100">,</span>&nbsp;<span class="ident" id="2480102">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480117">for</span>&nbsp;<span class="builtinfunc" id="2480121">len</span><span class="op" id="2480124">(</span><span class="ident" id="2480125">b</span><span class="op" id="2480126">)</span>&nbsp;<span class="op" id="2480128">&gt;</span>&nbsp;<span class="num" id="2480130">0</span>&nbsp;<span class="op" id="2480132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480136">m</span><span class="op" id="2480137">,</span>&nbsp;<span class="ident" id="2480139">e</span>&nbsp;<span class="op" id="2480141">:=</span>&nbsp;<span class="ident" id="2480144">f</span><span class="op" id="2480145">.</span><span class="ident" id="2480146">pwrite</span><span class="op" id="2480152">(</span><span class="ident" id="2480153">b</span><span class="op" id="2480154">,</span>&nbsp;<span class="ident" id="2480156">off</span><span class="op" id="2480159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480163">if</span>&nbsp;<span class="ident" id="2480166">e</span>&nbsp;<span class="op" id="2480168">!=</span>&nbsp;<span class="builtintype" id="2480171">nil</span>&nbsp;<span class="op" id="2480175">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480180">err</span>&nbsp;<span class="op" id="2480184">=</span>&nbsp;<span class="op" id="2480186">&amp;</span><span class="ident" id="2480187">PathError</span><span class="op" id="2480196">{</span><span class="string" id="2480197">&#34;write&#34;</span><span class="op" id="2480204">,</span>&nbsp;<span class="ident" id="2480206">f</span><span class="op" id="2480207">.</span><span class="ident" id="2480208">name</span><span class="op" id="2480212">,</span>&nbsp;<span class="ident" id="2480214">e</span><span class="op" id="2480215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480220">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480232">n</span>&nbsp;<span class="op" id="2480234">+=</span>&nbsp;<span class="ident" id="2480237">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480241">b</span>&nbsp;<span class="op" id="2480243">=</span>&nbsp;<span class="ident" id="2480245">b</span><span class="op" id="2480246">[</span><span class="ident" id="2480247">m</span><span class="op" id="2480248">:</span><span class="op" id="2480249">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480253">off</span>&nbsp;<span class="op" id="2480257">+=</span>&nbsp;<span class="builtintype" id="2480260">int64</span><span class="op" id="2480265">(</span><span class="ident" id="2480266">m</span><span class="op" id="2480267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480273">return</span><br>
<span class="lineno"></span><span class="op" id="2480280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2480283">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2480365">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2480441">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2480509">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2480560">func</span>&nbsp;<span class="op" id="2480565">(</span><span class="ident" id="2480566">f</span>&nbsp;<span class="op" id="2480568">*</span><span class="ident" id="2480569">File</span><span class="op" id="2480573">)</span>&nbsp;<span class="ident" id="2480575">Seek</span><span class="op" id="2480579">(</span><span class="ident" id="2480580">offset</span>&nbsp;<span class="builtintype" id="2480587">int64</span><span class="op" id="2480592">,</span>&nbsp;<span class="ident" id="2480594">whence</span>&nbsp;<span class="builtintype" id="2480601">int</span><span class="op" id="2480604">)</span>&nbsp;<span class="op" id="2480606">(</span><span class="ident" id="2480607">ret</span>&nbsp;<span class="builtintype" id="2480611">int64</span><span class="op" id="2480616">,</span>&nbsp;<span class="ident" id="2480618">err</span>&nbsp;<span class="builtintype" id="2480622">error</span><span class="op" id="2480627">)</span>&nbsp;<span class="op" id="2480629">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480632">if</span>&nbsp;<span class="ident" id="2480635">f</span>&nbsp;<span class="op" id="2480637">==</span>&nbsp;<span class="builtintype" id="2480640">nil</span>&nbsp;<span class="op" id="2480644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480648">return</span>&nbsp;<span class="num" id="2480655">0</span><span class="op" id="2480656">,</span>&nbsp;<span class="ident" id="2480658">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480673">r</span><span class="op" id="2480674">,</span>&nbsp;<span class="ident" id="2480676">e</span>&nbsp;<span class="op" id="2480678">:=</span>&nbsp;<span class="ident" id="2480681">f</span><span class="op" id="2480682">.</span><span class="ident" id="2480683">seek</span><span class="op" id="2480687">(</span><span class="ident" id="2480688">offset</span><span class="op" id="2480694">,</span>&nbsp;<span class="ident" id="2480696">whence</span><span class="op" id="2480702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480705">if</span>&nbsp;<span class="ident" id="2480708">e</span>&nbsp;<span class="op" id="2480710">==</span>&nbsp;<span class="builtintype" id="2480713">nil</span>&nbsp;<span class="op" id="2480717">&amp;&amp;</span>&nbsp;<span class="ident" id="2480720">f</span><span class="op" id="2480721">.</span><span class="ident" id="2480722">dirinfo</span>&nbsp;<span class="op" id="2480730">!=</span>&nbsp;<span class="builtintype" id="2480733">nil</span>&nbsp;<span class="op" id="2480737">&amp;&amp;</span>&nbsp;<span class="ident" id="2480740">r</span>&nbsp;<span class="op" id="2480742">!=</span>&nbsp;<span class="num" id="2480745">0</span>&nbsp;<span class="op" id="2480747">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2480751">e</span>&nbsp;<span class="op" id="2480753">=</span>&nbsp;<span class="ident" id="2480755">syscall</span><span class="op" id="2480762">.</span><span class="ident" id="2480763">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480774">if</span>&nbsp;<span class="ident" id="2480777">e</span>&nbsp;<span class="op" id="2480779">!=</span>&nbsp;<span class="builtintype" id="2480782">nil</span>&nbsp;<span class="op" id="2480786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480790">return</span>&nbsp;<span class="num" id="2480797">0</span><span class="op" id="2480798">,</span>&nbsp;<span class="op" id="2480800">&amp;</span><span class="ident" id="2480801">PathError</span><span class="op" id="2480810">{</span><span class="string" id="2480811">&#34;seek&#34;</span><span class="op" id="2480817">,</span>&nbsp;<span class="ident" id="2480819">f</span><span class="op" id="2480820">.</span><span class="ident" id="2480821">name</span><span class="op" id="2480825">,</span>&nbsp;<span class="ident" id="2480827">e</span><span class="op" id="2480828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2480831">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2480834">return</span>&nbsp;<span class="ident" id="2480841">r</span><span class="op" id="2480842">,</span>&nbsp;<span class="builtintype" id="2480844">nil</span><br>
<span class="lineno"></span><span class="op" id="2480848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2480851">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2480929">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2480950">func</span>&nbsp;<span class="op" id="2480955">(</span><span class="ident" id="2480956">f</span>&nbsp;<span class="op" id="2480958">*</span><span class="ident" id="2480959">File</span><span class="op" id="2480963">)</span>&nbsp;<span class="ident" id="2480965">WriteString</span><span class="op" id="2480976">(</span><span class="ident" id="2480977">s</span>&nbsp;<span class="builtintype" id="2480979">string</span><span class="op" id="2480985">)</span>&nbsp;<span class="op" id="2480987">(</span><span class="ident" id="2480988">ret</span>&nbsp;<span class="builtintype" id="2480992">int</span><span class="op" id="2480995">,</span>&nbsp;<span class="ident" id="2480997">err</span>&nbsp;<span class="builtintype" id="2481001">error</span><span class="op" id="2481006">)</span>&nbsp;<span class="op" id="2481008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481011">if</span>&nbsp;<span class="ident" id="2481014">f</span>&nbsp;<span class="op" id="2481016">==</span>&nbsp;<span class="builtintype" id="2481019">nil</span>&nbsp;<span class="op" id="2481023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481027">return</span>&nbsp;<span class="num" id="2481034">0</span><span class="op" id="2481035">,</span>&nbsp;<span class="ident" id="2481037">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2481049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481052">return</span>&nbsp;<span class="ident" id="2481059">f</span><span class="op" id="2481060">.</span><span class="ident" id="2481061">Write</span><span class="op" id="2481066">(</span><span class="op" id="2481067">[</span><span class="op" id="2481068">]</span><span class="builtintype" id="2481069">byte</span><span class="op" id="2481073">(</span><span class="ident" id="2481074">s</span><span class="op" id="2481075">)</span><span class="op" id="2481076">)</span><br>
<span class="lineno">200</span><span class="op" id="2481078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2481081">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2481159">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2481215">func</span>&nbsp;<span class="ident" id="2481220">Mkdir</span><span class="op" id="2481225">(</span><span class="ident" id="2481226">name</span>&nbsp;<span class="builtintype" id="2481231">string</span><span class="op" id="2481237">,</span>&nbsp;<span class="ident" id="2481239">perm</span>&nbsp;<span class="ident" id="2481244">FileMode</span><span class="op" id="2481252">)</span>&nbsp;<span class="builtintype" id="2481254">error</span>&nbsp;<span class="op" id="2481260">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2481263">e</span>&nbsp;<span class="op" id="2481265">:=</span>&nbsp;<span class="ident" id="2481268">syscall</span><span class="op" id="2481275">.</span><span class="ident" id="2481276">Mkdir</span><span class="op" id="2481281">(</span><span class="ident" id="2481282">name</span><span class="op" id="2481286">,</span>&nbsp;<span class="ident" id="2481288">syscallMode</span><span class="op" id="2481299">(</span><span class="ident" id="2481300">perm</span><span class="op" id="2481304">)</span><span class="op" id="2481305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481308">if</span>&nbsp;<span class="ident" id="2481311">e</span>&nbsp;<span class="op" id="2481313">!=</span>&nbsp;<span class="builtintype" id="2481316">nil</span>&nbsp;<span class="op" id="2481320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481324">return</span>&nbsp;<span class="op" id="2481331">&amp;</span><span class="ident" id="2481332">PathError</span><span class="op" id="2481341">{</span><span class="string" id="2481342">&#34;mkdir&#34;</span><span class="op" id="2481349">,</span>&nbsp;<span class="ident" id="2481351">name</span><span class="op" id="2481355">,</span>&nbsp;<span class="ident" id="2481357">e</span><span class="op" id="2481358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2481361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481364">return</span>&nbsp;<span class="builtintype" id="2481371">nil</span><br>
<span class="lineno">210</span><span class="op" id="2481375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2481378">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2481449">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2481505">func</span>&nbsp;<span class="ident" id="2481510">Chdir</span><span class="op" id="2481515">(</span><span class="ident" id="2481516">dir</span>&nbsp;<span class="builtintype" id="2481520">string</span><span class="op" id="2481526">)</span>&nbsp;<span class="builtintype" id="2481528">error</span>&nbsp;<span class="op" id="2481534">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481537">if</span>&nbsp;<span class="ident" id="2481540">e</span>&nbsp;<span class="op" id="2481542">:=</span>&nbsp;<span class="ident" id="2481545">syscall</span><span class="op" id="2481552">.</span><span class="ident" id="2481553">Chdir</span><span class="op" id="2481558">(</span><span class="ident" id="2481559">dir</span><span class="op" id="2481562">)</span><span class="op" id="2481563">;</span>&nbsp;<span class="ident" id="2481565">e</span>&nbsp;<span class="op" id="2481567">!=</span>&nbsp;<span class="builtintype" id="2481570">nil</span>&nbsp;<span class="op" id="2481574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481578">return</span>&nbsp;<span class="op" id="2481585">&amp;</span><span class="ident" id="2481586">PathError</span><span class="op" id="2481595">{</span><span class="string" id="2481596">&#34;chdir&#34;</span><span class="op" id="2481603">,</span>&nbsp;<span class="ident" id="2481605">dir</span><span class="op" id="2481608">,</span>&nbsp;<span class="ident" id="2481610">e</span><span class="op" id="2481611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2481614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481617">return</span>&nbsp;<span class="builtintype" id="2481624">nil</span><br>
<span class="lineno"></span><span class="op" id="2481628">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2481631">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2481691">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2481721">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2481777">func</span>&nbsp;<span class="op" id="2481782">(</span><span class="ident" id="2481783">f</span>&nbsp;<span class="op" id="2481785">*</span><span class="ident" id="2481786">File</span><span class="op" id="2481790">)</span>&nbsp;<span class="ident" id="2481792">Chdir</span><span class="op" id="2481797">(</span><span class="op" id="2481798">)</span>&nbsp;<span class="builtintype" id="2481800">error</span>&nbsp;<span class="op" id="2481806">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481809">if</span>&nbsp;<span class="ident" id="2481812">f</span>&nbsp;<span class="op" id="2481814">==</span>&nbsp;<span class="builtintype" id="2481817">nil</span>&nbsp;<span class="op" id="2481821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481825">return</span>&nbsp;<span class="ident" id="2481832">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2481844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481847">if</span>&nbsp;<span class="ident" id="2481850">e</span>&nbsp;<span class="op" id="2481852">:=</span>&nbsp;<span class="ident" id="2481855">syscall</span><span class="op" id="2481862">.</span><span class="ident" id="2481863">Fchdir</span><span class="op" id="2481869">(</span><span class="ident" id="2481870">f</span><span class="op" id="2481871">.</span><span class="ident" id="2481872">fd</span><span class="op" id="2481874">)</span><span class="op" id="2481875">;</span>&nbsp;<span class="ident" id="2481877">e</span>&nbsp;<span class="op" id="2481879">!=</span>&nbsp;<span class="builtintype" id="2481882">nil</span>&nbsp;<span class="op" id="2481886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481890">return</span>&nbsp;<span class="op" id="2481897">&amp;</span><span class="ident" id="2481898">PathError</span><span class="op" id="2481907">{</span><span class="string" id="2481908">&#34;chdir&#34;</span><span class="op" id="2481915">,</span>&nbsp;<span class="ident" id="2481917">f</span><span class="op" id="2481918">.</span><span class="ident" id="2481919">name</span><span class="op" id="2481923">,</span>&nbsp;<span class="ident" id="2481925">e</span><span class="op" id="2481926">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2481929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2481932">return</span>&nbsp;<span class="builtintype" id="2481939">nil</span><br>
<span class="lineno"></span><span class="op" id="2481943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2481946">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2482015">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2482081">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2482114">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2482170">func</span>&nbsp;<span class="ident" id="2482175">Open</span><span class="op" id="2482179">(</span><span class="ident" id="2482180">name</span>&nbsp;<span class="builtintype" id="2482185">string</span><span class="op" id="2482191">)</span>&nbsp;<span class="op" id="2482193">(</span><span class="ident" id="2482194">file</span>&nbsp;<span class="op" id="2482199">*</span><span class="ident" id="2482200">File</span><span class="op" id="2482204">,</span>&nbsp;<span class="ident" id="2482206">err</span>&nbsp;<span class="builtintype" id="2482210">error</span><span class="op" id="2482215">)</span>&nbsp;<span class="op" id="2482217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2482220">return</span>&nbsp;<span class="ident" id="2482227">OpenFile</span><span class="op" id="2482235">(</span><span class="ident" id="2482236">name</span><span class="op" id="2482240">,</span>&nbsp;<span class="ident" id="2482242">O_RDONLY</span><span class="op" id="2482250">,</span>&nbsp;<span class="num" id="2482252">0</span><span class="op" id="2482253">)</span><br>
<span class="lineno">240</span><span class="op" id="2482255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2482258">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2482328">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2482396">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2482465">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2482476">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2482532">func</span>&nbsp;<span class="ident" id="2482537">Create</span><span class="op" id="2482543">(</span><span class="ident" id="2482544">name</span>&nbsp;<span class="builtintype" id="2482549">string</span><span class="op" id="2482555">)</span>&nbsp;<span class="op" id="2482557">(</span><span class="ident" id="2482558">file</span>&nbsp;<span class="op" id="2482563">*</span><span class="ident" id="2482564">File</span><span class="op" id="2482568">,</span>&nbsp;<span class="ident" id="2482570">err</span>&nbsp;<span class="builtintype" id="2482574">error</span><span class="op" id="2482579">)</span>&nbsp;<span class="op" id="2482581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2482584">return</span>&nbsp;<span class="ident" id="2482591">OpenFile</span><span class="op" id="2482599">(</span><span class="ident" id="2482600">name</span><span class="op" id="2482604">,</span>&nbsp;<span class="ident" id="2482606">O_RDWR</span><span class="op" id="2482612">|</span><span class="ident" id="2482613">O_CREATE</span><span class="op" id="2482621">|</span><span class="ident" id="2482622">O_TRUNC</span><span class="op" id="2482629">,</span>&nbsp;<span class="num" id="2482631">0666</span><span class="op" id="2482635">)</span><br>
<span class="lineno"></span><span class="op" id="2482637">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2482640">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2482673">var</span>&nbsp;<span class="ident" id="2482677">lstat</span>&nbsp;<span class="op" id="2482683">=</span>&nbsp;<span class="ident" id="2482685">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2482692">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2482764">func</span>&nbsp;<span class="ident" id="2482769">Rename</span><span class="op" id="2482775">(</span><span class="ident" id="2482776">oldpath</span><span class="op" id="2482783">,</span>&nbsp;<span class="ident" id="2482785">newpath</span>&nbsp;<span class="builtintype" id="2482793">string</span><span class="op" id="2482799">)</span>&nbsp;<span class="builtintype" id="2482801">error</span>&nbsp;<span class="op" id="2482807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2482810">return</span>&nbsp;<span class="ident" id="2482817">rename</span><span class="op" id="2482823">(</span><span class="ident" id="2482824">oldpath</span><span class="op" id="2482831">,</span>&nbsp;<span class="ident" id="2482833">newpath</span><span class="op" id="2482840">)</span><br>
<span class="lineno"></span><span class="op" id="2482842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2482845">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2482917">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2482981">func</span>&nbsp;<span class="ident" id="2482986">fixCount</span><span class="op" id="2482994">(</span><span class="ident" id="2482995">n</span>&nbsp;<span class="builtintype" id="2482997">int</span><span class="op" id="2483000">,</span>&nbsp;<span class="ident" id="2483002">err</span>&nbsp;<span class="builtintype" id="2483006">error</span><span class="op" id="2483011">)</span>&nbsp;<span class="op" id="2483013">(</span><span class="builtintype" id="2483014">int</span><span class="op" id="2483017">,</span>&nbsp;<span class="builtintype" id="2483019">error</span><span class="op" id="2483024">)</span>&nbsp;<span class="op" id="2483026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2483029">if</span>&nbsp;<span class="ident" id="2483032">n</span>&nbsp;<span class="op" id="2483034">&lt;</span>&nbsp;<span class="num" id="2483036">0</span>&nbsp;<span class="op" id="2483038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2483042">n</span>&nbsp;<span class="op" id="2483044">=</span>&nbsp;<span class="num" id="2483046">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2483049">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2483052">return</span>&nbsp;<span class="ident" id="2483059">n</span><span class="op" id="2483060">,</span>&nbsp;<span class="ident" id="2483062">err</span><br>
<span class="lineno"></span><span class="op" id="2483066">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
