<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8387417">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8387473">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8387527">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8387578">package</span>&nbsp;<span class="ident" id="8387586">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8387591">import</span>&nbsp;<span class="op" id="8387598">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8387601">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8387608">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8387619">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8387629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8387632">func</span>&nbsp;<span class="op" id="8387637">(</span><span class="ident" id="8387638">ti</span>&nbsp;<span class="op" id="8387641">*</span><span class="ident" id="8387642">testInterface</span><span class="op" id="8387655">)</span>&nbsp;<span class="ident" id="8387657">setBroadcast</span><span class="op" id="8387669">(</span><span class="ident" id="8387670">suffix</span>&nbsp;<span class="builtintype" id="8387677">int</span><span class="op" id="8387680">)</span>&nbsp;<span class="builtintype" id="8387682">error</span>&nbsp;<span class="op" id="8387688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387691">ti</span><span class="op" id="8387693">.</span><span class="ident" id="8387694">name</span>&nbsp;<span class="op" id="8387699">=</span>&nbsp;<span class="ident" id="8387701">fmt</span><span class="op" id="8387704">.</span><span class="ident" id="8387705">Sprintf</span><span class="op" id="8387712">(</span><span class="string" id="8387713">&#34;gotest%d&#34;</span><span class="op" id="8387723">,</span>&nbsp;<span class="ident" id="8387725">suffix</span><span class="op" id="8387731">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387734">xname</span><span class="op" id="8387739">,</span>&nbsp;<span class="ident" id="8387741">err</span>&nbsp;<span class="op" id="8387745">:=</span>&nbsp;<span class="ident" id="8387748">exec</span><span class="op" id="8387752">.</span><span class="ident" id="8387753">LookPath</span><span class="op" id="8387761">(</span><span class="string" id="8387762">&#34;ip&#34;</span><span class="op" id="8387766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387769">if</span>&nbsp;<span class="ident" id="8387772">err</span>&nbsp;<span class="op" id="8387776">!=</span>&nbsp;<span class="ident" id="8387779">nil</span>&nbsp;<span class="op" id="8387783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387787">return</span>&nbsp;<span class="ident" id="8387794">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387802">ti</span><span class="op" id="8387804">.</span><span class="ident" id="8387805">setupCmds</span>&nbsp;<span class="op" id="8387815">=</span>&nbsp;<span class="builtinfunc" id="8387817">append</span><span class="op" id="8387823">(</span><span class="ident" id="8387824">ti</span><span class="op" id="8387826">.</span><span class="ident" id="8387827">setupCmds</span><span class="op" id="8387836">,</span>&nbsp;<span class="op" id="8387838">&amp;</span><span class="ident" id="8387839">exec</span><span class="op" id="8387843">.</span><span class="ident" id="8387844">Cmd</span><span class="op" id="8387847">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387851">Path</span><span class="op" id="8387855">:</span>&nbsp;<span class="ident" id="8387857">xname</span><span class="op" id="8387862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387866">Args</span><span class="op" id="8387870">:</span>&nbsp;<span class="op" id="8387872">[</span><span class="op" id="8387873">]</span><span class="builtintype" id="8387874">string</span><span class="op" id="8387880">{</span><span class="string" id="8387881">&#34;ip&#34;</span><span class="op" id="8387885">,</span>&nbsp;<span class="string" id="8387887">&#34;link&#34;</span><span class="op" id="8387893">,</span>&nbsp;<span class="string" id="8387895">&#34;add&#34;</span><span class="op" id="8387900">,</span>&nbsp;<span class="ident" id="8387902">ti</span><span class="op" id="8387904">.</span><span class="ident" id="8387905">name</span><span class="op" id="8387909">,</span>&nbsp;<span class="string" id="8387911">&#34;type&#34;</span><span class="op" id="8387917">,</span>&nbsp;<span class="string" id="8387919">&#34;dummy&#34;</span><span class="op" id="8387926">}</span><span class="op" id="8387927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387930">}</span><span class="op" id="8387931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387934">ti</span><span class="op" id="8387936">.</span><span class="ident" id="8387937">teardownCmds</span>&nbsp;<span class="op" id="8387950">=</span>&nbsp;<span class="builtinfunc" id="8387952">append</span><span class="op" id="8387958">(</span><span class="ident" id="8387959">ti</span><span class="op" id="8387961">.</span><span class="ident" id="8387962">teardownCmds</span><span class="op" id="8387974">,</span>&nbsp;<span class="op" id="8387976">&amp;</span><span class="ident" id="8387977">exec</span><span class="op" id="8387981">.</span><span class="ident" id="8387982">Cmd</span><span class="op" id="8387985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387989">Path</span><span class="op" id="8387993">:</span>&nbsp;<span class="ident" id="8387995">xname</span><span class="op" id="8388000">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388004">Args</span><span class="op" id="8388008">:</span>&nbsp;<span class="op" id="8388010">[</span><span class="op" id="8388011">]</span><span class="builtintype" id="8388012">string</span><span class="op" id="8388018">{</span><span class="string" id="8388019">&#34;ip&#34;</span><span class="op" id="8388023">,</span>&nbsp;<span class="string" id="8388025">&#34;link&#34;</span><span class="op" id="8388031">,</span>&nbsp;<span class="string" id="8388033">&#34;delete&#34;</span><span class="op" id="8388041">,</span>&nbsp;<span class="ident" id="8388043">ti</span><span class="op" id="8388045">.</span><span class="ident" id="8388046">name</span><span class="op" id="8388050">,</span>&nbsp;<span class="string" id="8388052">&#34;type&#34;</span><span class="op" id="8388058">,</span>&nbsp;<span class="string" id="8388060">&#34;dummy&#34;</span><span class="op" id="8388067">}</span><span class="op" id="8388068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388071">}</span><span class="op" id="8388072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388075">return</span>&nbsp;<span class="ident" id="8388082">nil</span><br>
<span class="lineno"></span><span class="op" id="8388086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8388089">func</span>&nbsp;<span class="op" id="8388094">(</span><span class="ident" id="8388095">ti</span>&nbsp;<span class="op" id="8388098">*</span><span class="ident" id="8388099">testInterface</span><span class="op" id="8388112">)</span>&nbsp;<span class="ident" id="8388114">setPointToPoint</span><span class="op" id="8388129">(</span><span class="ident" id="8388130">suffix</span>&nbsp;<span class="builtintype" id="8388137">int</span><span class="op" id="8388140">,</span>&nbsp;<span class="ident" id="8388142">local</span><span class="op" id="8388147">,</span>&nbsp;<span class="ident" id="8388149">remote</span>&nbsp;<span class="builtintype" id="8388156">string</span><span class="op" id="8388162">)</span>&nbsp;<span class="builtintype" id="8388164">error</span>&nbsp;<span class="op" id="8388170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388173">ti</span><span class="op" id="8388175">.</span><span class="ident" id="8388176">name</span>&nbsp;<span class="op" id="8388181">=</span>&nbsp;<span class="ident" id="8388183">fmt</span><span class="op" id="8388186">.</span><span class="ident" id="8388187">Sprintf</span><span class="op" id="8388194">(</span><span class="string" id="8388195">&#34;gotest%d&#34;</span><span class="op" id="8388205">,</span>&nbsp;<span class="ident" id="8388207">suffix</span><span class="op" id="8388213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388216">ti</span><span class="op" id="8388218">.</span><span class="ident" id="8388219">local</span>&nbsp;<span class="op" id="8388225">=</span>&nbsp;<span class="ident" id="8388227">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388234">ti</span><span class="op" id="8388236">.</span><span class="ident" id="8388237">remote</span>&nbsp;<span class="op" id="8388244">=</span>&nbsp;<span class="ident" id="8388246">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388254">xname</span><span class="op" id="8388259">,</span>&nbsp;<span class="ident" id="8388261">err</span>&nbsp;<span class="op" id="8388265">:=</span>&nbsp;<span class="ident" id="8388268">exec</span><span class="op" id="8388272">.</span><span class="ident" id="8388273">LookPath</span><span class="op" id="8388281">(</span><span class="string" id="8388282">&#34;ip&#34;</span><span class="op" id="8388286">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388289">if</span>&nbsp;<span class="ident" id="8388292">err</span>&nbsp;<span class="op" id="8388296">!=</span>&nbsp;<span class="ident" id="8388299">nil</span>&nbsp;<span class="op" id="8388303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388307">return</span>&nbsp;<span class="ident" id="8388314">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388322">ti</span><span class="op" id="8388324">.</span><span class="ident" id="8388325">setupCmds</span>&nbsp;<span class="op" id="8388335">=</span>&nbsp;<span class="builtinfunc" id="8388337">append</span><span class="op" id="8388343">(</span><span class="ident" id="8388344">ti</span><span class="op" id="8388346">.</span><span class="ident" id="8388347">setupCmds</span><span class="op" id="8388356">,</span>&nbsp;<span class="op" id="8388358">&amp;</span><span class="ident" id="8388359">exec</span><span class="op" id="8388363">.</span><span class="ident" id="8388364">Cmd</span><span class="op" id="8388367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388371">Path</span><span class="op" id="8388375">:</span>&nbsp;<span class="ident" id="8388377">xname</span><span class="op" id="8388382">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388386">Args</span><span class="op" id="8388390">:</span>&nbsp;<span class="op" id="8388392">[</span><span class="op" id="8388393">]</span><span class="builtintype" id="8388394">string</span><span class="op" id="8388400">{</span><span class="string" id="8388401">&#34;ip&#34;</span><span class="op" id="8388405">,</span>&nbsp;<span class="string" id="8388407">&#34;tunnel&#34;</span><span class="op" id="8388415">,</span>&nbsp;<span class="string" id="8388417">&#34;add&#34;</span><span class="op" id="8388422">,</span>&nbsp;<span class="ident" id="8388424">ti</span><span class="op" id="8388426">.</span><span class="ident" id="8388427">name</span><span class="op" id="8388431">,</span>&nbsp;<span class="string" id="8388433">&#34;mode&#34;</span><span class="op" id="8388439">,</span>&nbsp;<span class="string" id="8388441">&#34;gre&#34;</span><span class="op" id="8388446">,</span>&nbsp;<span class="string" id="8388448">&#34;local&#34;</span><span class="op" id="8388455">,</span>&nbsp;<span class="ident" id="8388457">local</span><span class="op" id="8388462">,</span>&nbsp;<span class="string" id="8388464">&#34;remote&#34;</span><span class="op" id="8388472">,</span>&nbsp;<span class="ident" id="8388474">remote</span><span class="op" id="8388480">}</span><span class="op" id="8388481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388484">}</span><span class="op" id="8388485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388488">ti</span><span class="op" id="8388490">.</span><span class="ident" id="8388491">teardownCmds</span>&nbsp;<span class="op" id="8388504">=</span>&nbsp;<span class="builtinfunc" id="8388506">append</span><span class="op" id="8388512">(</span><span class="ident" id="8388513">ti</span><span class="op" id="8388515">.</span><span class="ident" id="8388516">teardownCmds</span><span class="op" id="8388528">,</span>&nbsp;<span class="op" id="8388530">&amp;</span><span class="ident" id="8388531">exec</span><span class="op" id="8388535">.</span><span class="ident" id="8388536">Cmd</span><span class="op" id="8388539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388543">Path</span><span class="op" id="8388547">:</span>&nbsp;<span class="ident" id="8388549">xname</span><span class="op" id="8388554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388558">Args</span><span class="op" id="8388562">:</span>&nbsp;<span class="op" id="8388564">[</span><span class="op" id="8388565">]</span><span class="builtintype" id="8388566">string</span><span class="op" id="8388572">{</span><span class="string" id="8388573">&#34;ip&#34;</span><span class="op" id="8388577">,</span>&nbsp;<span class="string" id="8388579">&#34;tunnel&#34;</span><span class="op" id="8388587">,</span>&nbsp;<span class="string" id="8388589">&#34;del&#34;</span><span class="op" id="8388594">,</span>&nbsp;<span class="ident" id="8388596">ti</span><span class="op" id="8388598">.</span><span class="ident" id="8388599">name</span><span class="op" id="8388603">,</span>&nbsp;<span class="string" id="8388605">&#34;mode&#34;</span><span class="op" id="8388611">,</span>&nbsp;<span class="string" id="8388613">&#34;gre&#34;</span><span class="op" id="8388618">,</span>&nbsp;<span class="string" id="8388620">&#34;local&#34;</span><span class="op" id="8388627">,</span>&nbsp;<span class="ident" id="8388629">local</span><span class="op" id="8388634">,</span>&nbsp;<span class="string" id="8388636">&#34;remote&#34;</span><span class="op" id="8388644">,</span>&nbsp;<span class="ident" id="8388646">remote</span><span class="op" id="8388652">}</span><span class="op" id="8388653">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388656">}</span><span class="op" id="8388657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388660">xname</span><span class="op" id="8388665">,</span>&nbsp;<span class="ident" id="8388667">err</span>&nbsp;<span class="op" id="8388671">=</span>&nbsp;<span class="ident" id="8388673">exec</span><span class="op" id="8388677">.</span><span class="ident" id="8388678">LookPath</span><span class="op" id="8388686">(</span><span class="string" id="8388687">&#34;ifconfig&#34;</span><span class="op" id="8388697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388700">if</span>&nbsp;<span class="ident" id="8388703">err</span>&nbsp;<span class="op" id="8388707">!=</span>&nbsp;<span class="ident" id="8388710">nil</span>&nbsp;<span class="op" id="8388714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388718">return</span>&nbsp;<span class="ident" id="8388725">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388730">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388733">ti</span><span class="op" id="8388735">.</span><span class="ident" id="8388736">setupCmds</span>&nbsp;<span class="op" id="8388746">=</span>&nbsp;<span class="builtinfunc" id="8388748">append</span><span class="op" id="8388754">(</span><span class="ident" id="8388755">ti</span><span class="op" id="8388757">.</span><span class="ident" id="8388758">setupCmds</span><span class="op" id="8388767">,</span>&nbsp;<span class="op" id="8388769">&amp;</span><span class="ident" id="8388770">exec</span><span class="op" id="8388774">.</span><span class="ident" id="8388775">Cmd</span><span class="op" id="8388778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388782">Path</span><span class="op" id="8388786">:</span>&nbsp;<span class="ident" id="8388788">xname</span><span class="op" id="8388793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388797">Args</span><span class="op" id="8388801">:</span>&nbsp;<span class="op" id="8388803">[</span><span class="op" id="8388804">]</span><span class="builtintype" id="8388805">string</span><span class="op" id="8388811">{</span><span class="string" id="8388812">&#34;ifconfig&#34;</span><span class="op" id="8388822">,</span>&nbsp;<span class="ident" id="8388824">ti</span><span class="op" id="8388826">.</span><span class="ident" id="8388827">name</span><span class="op" id="8388831">,</span>&nbsp;<span class="string" id="8388833">&#34;inet&#34;</span><span class="op" id="8388839">,</span>&nbsp;<span class="ident" id="8388841">local</span><span class="op" id="8388846">,</span>&nbsp;<span class="string" id="8388848">&#34;dstaddr&#34;</span><span class="op" id="8388857">,</span>&nbsp;<span class="ident" id="8388859">remote</span><span class="op" id="8388865">}</span><span class="op" id="8388866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388869">}</span><span class="op" id="8388870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388873">return</span>&nbsp;<span class="ident" id="8388880">nil</span><br>
<span class="lineno">55</span><span class="op" id="8388884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8388887">const</span>&nbsp;<span class="op" id="8388893">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388896">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8388917">=</span>&nbsp;<span class="num" id="8388919">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388923">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8388944">=</span>&nbsp;<span class="num" id="8388946">18</span><br>
<span class="lineno">60</span><span class="op" id="8388949">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8388952">var</span>&nbsp;<span class="op" id="8388956">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388959">igmpInterfaceTable</span>&nbsp;<span class="op" id="8388978">=</span>&nbsp;<span class="op" id="8388980">[</span><span class="op" id="8388981">]</span><span class="ident" id="8388982">Interface</span><span class="op" id="8388991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388995">{</span><span class="ident" id="8388996">Name</span><span class="op" id="8389000">:</span>&nbsp;<span class="string" id="8389002">&#34;lo&#34;</span><span class="op" id="8389006">}</span><span class="op" id="8389007">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389011">{</span><span class="ident" id="8389012">Name</span><span class="op" id="8389016">:</span>&nbsp;<span class="string" id="8389018">&#34;eth0&#34;</span><span class="op" id="8389024">}</span><span class="op" id="8389025">,</span>&nbsp;<span class="op" id="8389027">{</span><span class="ident" id="8389028">Name</span><span class="op" id="8389032">:</span>&nbsp;<span class="string" id="8389034">&#34;eth1&#34;</span><span class="op" id="8389040">}</span><span class="op" id="8389041">,</span>&nbsp;<span class="op" id="8389043">{</span><span class="ident" id="8389044">Name</span><span class="op" id="8389048">:</span>&nbsp;<span class="string" id="8389050">&#34;eth2&#34;</span><span class="op" id="8389056">}</span><span class="op" id="8389057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389061">{</span><span class="ident" id="8389062">Name</span><span class="op" id="8389066">:</span>&nbsp;<span class="string" id="8389068">&#34;eth0.100&#34;</span><span class="op" id="8389078">}</span><span class="op" id="8389079">,</span>&nbsp;<span class="op" id="8389081">{</span><span class="ident" id="8389082">Name</span><span class="op" id="8389086">:</span>&nbsp;<span class="string" id="8389088">&#34;eth0.101&#34;</span><span class="op" id="8389098">}</span><span class="op" id="8389099">,</span>&nbsp;<span class="op" id="8389101">{</span><span class="ident" id="8389102">Name</span><span class="op" id="8389106">:</span>&nbsp;<span class="string" id="8389108">&#34;eth0.102&#34;</span><span class="op" id="8389118">}</span><span class="op" id="8389119">,</span>&nbsp;<span class="op" id="8389121">{</span><span class="ident" id="8389122">Name</span><span class="op" id="8389126">:</span>&nbsp;<span class="string" id="8389128">&#34;eth0.103&#34;</span><span class="op" id="8389138">}</span><span class="op" id="8389139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389143">{</span><span class="ident" id="8389144">Name</span><span class="op" id="8389148">:</span>&nbsp;<span class="string" id="8389150">&#34;device1tap2&#34;</span><span class="op" id="8389163">}</span><span class="op" id="8389164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389170">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8389190">=</span>&nbsp;<span class="op" id="8389192">[</span><span class="op" id="8389193">]</span><span class="ident" id="8389194">Interface</span><span class="op" id="8389203">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389207">{</span><span class="ident" id="8389208">Name</span><span class="op" id="8389212">:</span>&nbsp;<span class="string" id="8389214">&#34;lo&#34;</span><span class="op" id="8389218">}</span><span class="op" id="8389219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389223">{</span><span class="ident" id="8389224">Name</span><span class="op" id="8389228">:</span>&nbsp;<span class="string" id="8389230">&#34;eth0&#34;</span><span class="op" id="8389236">}</span><span class="op" id="8389237">,</span>&nbsp;<span class="op" id="8389239">{</span><span class="ident" id="8389240">Name</span><span class="op" id="8389244">:</span>&nbsp;<span class="string" id="8389246">&#34;eth1&#34;</span><span class="op" id="8389252">}</span><span class="op" id="8389253">,</span>&nbsp;<span class="op" id="8389255">{</span><span class="ident" id="8389256">Name</span><span class="op" id="8389260">:</span>&nbsp;<span class="string" id="8389262">&#34;eth2&#34;</span><span class="op" id="8389268">}</span><span class="op" id="8389269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389273">{</span><span class="ident" id="8389274">Name</span><span class="op" id="8389278">:</span>&nbsp;<span class="string" id="8389280">&#34;eth0.100&#34;</span><span class="op" id="8389290">}</span><span class="op" id="8389291">,</span>&nbsp;<span class="op" id="8389293">{</span><span class="ident" id="8389294">Name</span><span class="op" id="8389298">:</span>&nbsp;<span class="string" id="8389300">&#34;eth0.101&#34;</span><span class="op" id="8389310">}</span><span class="op" id="8389311">,</span>&nbsp;<span class="op" id="8389313">{</span><span class="ident" id="8389314">Name</span><span class="op" id="8389318">:</span>&nbsp;<span class="string" id="8389320">&#34;eth0.102&#34;</span><span class="op" id="8389330">}</span><span class="op" id="8389331">,</span>&nbsp;<span class="op" id="8389333">{</span><span class="ident" id="8389334">Name</span><span class="op" id="8389338">:</span>&nbsp;<span class="string" id="8389340">&#34;eth0.103&#34;</span><span class="op" id="8389350">}</span><span class="op" id="8389351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389355">{</span><span class="ident" id="8389356">Name</span><span class="op" id="8389360">:</span>&nbsp;<span class="string" id="8389362">&#34;device1tap2&#34;</span><span class="op" id="8389375">}</span><span class="op" id="8389376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389380">{</span><span class="ident" id="8389381">Name</span><span class="op" id="8389385">:</span>&nbsp;<span class="string" id="8389387">&#34;pan0&#34;</span><span class="op" id="8389393">}</span><span class="op" id="8389394">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389397">}</span><br>
<span class="lineno"></span><span class="op" id="8389399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8389402">func</span>&nbsp;<span class="ident" id="8389407">TestParseProcNet</span><span class="op" id="8389423">(</span><span class="ident" id="8389424">t</span>&nbsp;<span class="op" id="8389426">*</span><span class="ident" id="8389427">testing</span><span class="op" id="8389434">.</span><span class="ident" id="8389435">T</span><span class="op" id="8389436">)</span>&nbsp;<span class="op" id="8389438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389441">defer</span>&nbsp;<span class="keyword" id="8389447">func</span><span class="op" id="8389451">(</span><span class="op" id="8389452">)</span>&nbsp;<span class="op" id="8389454">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389458">if</span>&nbsp;<span class="ident" id="8389461">p</span>&nbsp;<span class="op" id="8389463">:=</span>&nbsp;<span class="builtinfunc" id="8389466">recover</span><span class="op" id="8389473">(</span><span class="op" id="8389474">)</span><span class="op" id="8389475">;</span>&nbsp;<span class="ident" id="8389477">p</span>&nbsp;<span class="op" id="8389479">!=</span>&nbsp;<span class="ident" id="8389482">nil</span>&nbsp;<span class="op" id="8389486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389491">t</span><span class="op" id="8389492">.</span><span class="ident" id="8389493">Fatalf</span><span class="op" id="8389499">(</span><span class="string" id="8389500">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="8389552">,</span>&nbsp;<span class="ident" id="8389554">p</span><span class="op" id="8389555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389562">}</span><span class="op" id="8389563">(</span><span class="op" id="8389564">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389568">var</span>&nbsp;<span class="ident" id="8389572">ifmat4</span>&nbsp;<span class="op" id="8389579">[</span><span class="op" id="8389580">]</span><span class="ident" id="8389581">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389587">for</span>&nbsp;<span class="ident" id="8389591">_</span><span class="op" id="8389592">,</span>&nbsp;<span class="ident" id="8389594">ifi</span>&nbsp;<span class="op" id="8389598">:=</span>&nbsp;<span class="keyword" id="8389601">range</span>&nbsp;<span class="ident" id="8389607">igmpInterfaceTable</span>&nbsp;<span class="op" id="8389626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389630">ifmat</span>&nbsp;<span class="op" id="8389636">:=</span>&nbsp;<span class="ident" id="8389639">parseProcNetIGMP</span><span class="op" id="8389655">(</span><span class="string" id="8389656">&#34;testdata/igmp&#34;</span><span class="op" id="8389671">,</span>&nbsp;<span class="op" id="8389673">&amp;</span><span class="ident" id="8389674">ifi</span><span class="op" id="8389677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389681">ifmat4</span>&nbsp;<span class="op" id="8389688">=</span>&nbsp;<span class="builtinfunc" id="8389690">append</span><span class="op" id="8389696">(</span><span class="ident" id="8389697">ifmat4</span><span class="op" id="8389703">,</span>&nbsp;<span class="ident" id="8389705">ifmat</span><span class="op" id="8389710">...</span><span class="op" id="8389713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389716">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389719">if</span>&nbsp;<span class="builtinfunc" id="8389722">len</span><span class="op" id="8389725">(</span><span class="ident" id="8389726">ifmat4</span><span class="op" id="8389732">)</span>&nbsp;<span class="op" id="8389734">!=</span>&nbsp;<span class="ident" id="8389737">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8389758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389762">t</span><span class="op" id="8389763">.</span><span class="ident" id="8389764">Fatalf</span><span class="op" id="8389770">(</span><span class="string" id="8389771">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8389823">,</span>&nbsp;<span class="builtinfunc" id="8389825">len</span><span class="op" id="8389828">(</span><span class="ident" id="8389829">ifmat4</span><span class="op" id="8389835">)</span><span class="op" id="8389836">,</span>&nbsp;<span class="ident" id="8389838">numOfTestIPv4MCAddrs</span><span class="op" id="8389858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389865">var</span>&nbsp;<span class="ident" id="8389869">ifmat6</span>&nbsp;<span class="op" id="8389876">[</span><span class="op" id="8389877">]</span><span class="ident" id="8389878">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389884">for</span>&nbsp;<span class="ident" id="8389888">_</span><span class="op" id="8389889">,</span>&nbsp;<span class="ident" id="8389891">ifi</span>&nbsp;<span class="op" id="8389895">:=</span>&nbsp;<span class="keyword" id="8389898">range</span>&nbsp;<span class="ident" id="8389904">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8389924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389928">ifmat</span>&nbsp;<span class="op" id="8389934">:=</span>&nbsp;<span class="ident" id="8389937">parseProcNetIGMP6</span><span class="op" id="8389954">(</span><span class="string" id="8389955">&#34;testdata/igmp6&#34;</span><span class="op" id="8389971">,</span>&nbsp;<span class="op" id="8389973">&amp;</span><span class="ident" id="8389974">ifi</span><span class="op" id="8389977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389981">ifmat6</span>&nbsp;<span class="op" id="8389988">=</span>&nbsp;<span class="builtinfunc" id="8389990">append</span><span class="op" id="8389996">(</span><span class="ident" id="8389997">ifmat6</span><span class="op" id="8390003">,</span>&nbsp;<span class="ident" id="8390005">ifmat</span><span class="op" id="8390010">...</span><span class="op" id="8390013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390019">if</span>&nbsp;<span class="builtinfunc" id="8390022">len</span><span class="op" id="8390025">(</span><span class="ident" id="8390026">ifmat6</span><span class="op" id="8390032">)</span>&nbsp;<span class="op" id="8390034">!=</span>&nbsp;<span class="ident" id="8390037">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8390058">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390062">t</span><span class="op" id="8390063">.</span><span class="ident" id="8390064">Fatalf</span><span class="op" id="8390070">(</span><span class="string" id="8390071">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8390124">,</span>&nbsp;<span class="builtinfunc" id="8390126">len</span><span class="op" id="8390129">(</span><span class="ident" id="8390130">ifmat6</span><span class="op" id="8390136">)</span><span class="op" id="8390137">,</span>&nbsp;<span class="ident" id="8390139">numOfTestIPv6MCAddrs</span><span class="op" id="8390159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390162">}</span><br>
<span class="lineno"></span><span class="op" id="8390164">}</span>
</div>
</body>
</html>
