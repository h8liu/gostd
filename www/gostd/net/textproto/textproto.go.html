<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html" class="current">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4348925">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4348981">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4349035">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4349086">//&nbsp;Package&nbsp;textproto&nbsp;implements&nbsp;generic&nbsp;support&nbsp;for&nbsp;text-based&nbsp;request/response</span><br>
<span class="lineno"></span><span class="comment" id="4349166">//&nbsp;protocols&nbsp;in&nbsp;the&nbsp;style&nbsp;of&nbsp;HTTP,&nbsp;NNTP,&nbsp;and&nbsp;SMTP.</span><br>
<span class="lineno"></span><span class="comment" id="4349217">//</span><br>
<span class="lineno"></span><span class="comment" id="4349220">//&nbsp;The&nbsp;package&nbsp;provides:</span><br>
<span class="lineno"></span><span class="comment" id="4349245">//</span><br>
<span class="lineno">10</span><span class="comment" id="4349248">//&nbsp;Error,&nbsp;which&nbsp;represents&nbsp;a&nbsp;numeric&nbsp;error&nbsp;response&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="4349305">//&nbsp;a&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="4349318">//</span><br>
<span class="lineno"></span><span class="comment" id="4349321">//&nbsp;Pipeline,&nbsp;to&nbsp;manage&nbsp;pipelined&nbsp;requests&nbsp;and&nbsp;responses</span><br>
<span class="lineno"></span><span class="comment" id="4349377">//&nbsp;in&nbsp;a&nbsp;client.</span><br>
<span class="lineno">15</span><span class="comment" id="4349393">//</span><br>
<span class="lineno"></span><span class="comment" id="4349396">//&nbsp;Reader,&nbsp;to&nbsp;read&nbsp;numeric&nbsp;response&nbsp;code&nbsp;lines,</span><br>
<span class="lineno"></span><span class="comment" id="4349444">//&nbsp;key:&nbsp;value&nbsp;headers,&nbsp;lines&nbsp;wrapped&nbsp;with&nbsp;leading&nbsp;spaces</span><br>
<span class="lineno"></span><span class="comment" id="4349501">//&nbsp;on&nbsp;continuation&nbsp;lines,&nbsp;and&nbsp;whole&nbsp;text&nbsp;blocks&nbsp;ending</span><br>
<span class="lineno"></span><span class="comment" id="4349556">//&nbsp;with&nbsp;a&nbsp;dot&nbsp;on&nbsp;a&nbsp;line&nbsp;by&nbsp;itself.</span><br>
<span class="lineno">20</span><span class="comment" id="4349591">//</span><br>
<span class="lineno"></span><span class="comment" id="4349594">//&nbsp;Writer,&nbsp;to&nbsp;write&nbsp;dot-encoded&nbsp;text&nbsp;blocks.</span><br>
<span class="lineno"></span><span class="comment" id="4349639">//</span><br>
<span class="lineno"></span><span class="comment" id="4349642">//&nbsp;Conn,&nbsp;a&nbsp;convenient&nbsp;packaging&nbsp;of&nbsp;Reader,&nbsp;Writer,&nbsp;and&nbsp;Pipeline&nbsp;for&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="4349714">//&nbsp;with&nbsp;a&nbsp;single&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">25</span><span class="comment" id="4349751">//</span><br>
<span class="lineno"></span><span class="keyword" id="4349754">package</span>&nbsp;<span class="ident" id="4349762">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4349773">import</span>&nbsp;<span class="op" id="4349780">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4349783">&#34;bufio&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4349792">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4349799">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4349805">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="4349811">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4349814">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;numeric&nbsp;error&nbsp;response&nbsp;from&nbsp;a&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="4349877">type</span>&nbsp;<span class="ident" id="4349882">Error</span>&nbsp;<span class="keyword" id="4349888">struct</span>&nbsp;<span class="op" id="4349895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4349898">Code</span>&nbsp;<span class="builtintype" id="4349903">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4349908">Msg</span>&nbsp;&nbsp;<span class="builtintype" id="4349913">string</span><br>
<span class="lineno"></span><span class="op" id="4349920">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4349923">func</span>&nbsp;<span class="op" id="4349928">(</span><span class="ident" id="4349929">e</span>&nbsp;<span class="op" id="4349931">*</span><span class="ident" id="4349932"><a href="/gostd/net/textproto/textproto.go.html#4349882">Error</a></span><span class="op" id="4349937">)</span>&nbsp;<span class="ident" id="4349939">Error</span><span class="op" id="4349944">(</span><span class="op" id="4349945">)</span>&nbsp;<span class="builtintype" id="4349947">string</span>&nbsp;<span class="op" id="4349954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4349957">return</span>&nbsp;<span class="ident" id="4349964"><a href="/gostd/net/textproto/textproto.go.html#4349792">fmt</a></span><span class="op" id="4349967">.</span><span class="ident" id="4349968"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="4349975">(</span><span class="string" id="4349976">&#34;%03d&nbsp;%s&#34;</span><span class="op" id="4349985">,</span>&nbsp;<span class="ident" id="4349987"><a href="/gostd/net/textproto/textproto.go.html#4349929">e</a></span><span class="op" id="4349988">.</span><span class="ident" id="4349989"><a href="/gostd/net/textproto/textproto.go.html#4349898">Code</a></span><span class="op" id="4349993">,</span>&nbsp;<span class="ident" id="4349995"><a href="/gostd/net/textproto/textproto.go.html#4349929">e</a></span><span class="op" id="4349996">.</span><span class="ident" id="4349997"><a href="/gostd/net/textproto/textproto.go.html#4349908">Msg</a></span><span class="op" id="4350000">)</span><br>
<span class="lineno"></span><span class="op" id="4350002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="4350005">//&nbsp;A&nbsp;ProtocolError&nbsp;describes&nbsp;a&nbsp;protocol&nbsp;violation&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="4350060">//&nbsp;as&nbsp;an&nbsp;invalid&nbsp;response&nbsp;or&nbsp;a&nbsp;hung-up&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4350111">type</span>&nbsp;<span class="ident" id="4350116">ProtocolError</span>&nbsp;<span class="builtintype" id="4350130">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4350138">func</span>&nbsp;<span class="op" id="4350143">(</span><span class="ident" id="4350144">p</span>&nbsp;<span class="ident" id="4350146"><a href="/gostd/net/textproto/textproto.go.html#4350116">ProtocolError</a></span><span class="op" id="4350159">)</span>&nbsp;<span class="ident" id="4350161">Error</span><span class="op" id="4350166">(</span><span class="op" id="4350167">)</span>&nbsp;<span class="builtintype" id="4350169">string</span>&nbsp;<span class="op" id="4350176">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4350179">return</span>&nbsp;<span class="builtintype" id="4350186">string</span><span class="op" id="4350192">(</span><span class="ident" id="4350193"><a href="/gostd/net/textproto/textproto.go.html#4350144">p</a></span><span class="op" id="4350194">)</span><br>
<span class="lineno"></span><span class="op" id="4350196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4350199">//&nbsp;A&nbsp;Conn&nbsp;represents&nbsp;a&nbsp;textual&nbsp;network&nbsp;protocol&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="4350259">//&nbsp;It&nbsp;consists&nbsp;of&nbsp;a&nbsp;Reader&nbsp;and&nbsp;Writer&nbsp;to&nbsp;manage&nbsp;I/O</span><br>
<span class="lineno">55</span><span class="comment" id="4350311">//&nbsp;and&nbsp;a&nbsp;Pipeline&nbsp;to&nbsp;sequence&nbsp;concurrent&nbsp;requests&nbsp;on&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="4350380">//&nbsp;These&nbsp;embedded&nbsp;types&nbsp;carry&nbsp;methods&nbsp;with&nbsp;them;</span><br>
<span class="lineno"></span><span class="comment" id="4350429">//&nbsp;see&nbsp;the&nbsp;documentation&nbsp;of&nbsp;those&nbsp;types&nbsp;for&nbsp;details.</span><br>
<span class="lineno"></span><span class="keyword" id="4350482">type</span>&nbsp;<span class="ident" id="4350487">Conn</span>&nbsp;<span class="keyword" id="4350492">struct</span>&nbsp;<span class="op" id="4350499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350502"><a href="/gostd/net/textproto/reader.go.html#4333179">Reader</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350510"><a href="/gostd/net/textproto/writer.go.html#4353033">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350518"><a href="/gostd/net/textproto/pipeline.go.html#4330440">Pipeline</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350528">conn</span>&nbsp;<span class="ident" id="4350533"><a href="/gostd/net/textproto/textproto.go.html#4349799">io</a></span><span class="op" id="4350535">.</span><span class="ident" id="4350536"><a href="/gostd/io/io.go.html#1423677">ReadWriteCloser</a></span><br>
<span class="lineno"></span><span class="op" id="4350552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="4350555">//&nbsp;NewConn&nbsp;returns&nbsp;a&nbsp;new&nbsp;Conn&nbsp;using&nbsp;conn&nbsp;for&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="keyword" id="4350605">func</span>&nbsp;<span class="ident" id="4350610">NewConn</span><span class="op" id="4350617">(</span><span class="ident" id="4350618">conn</span>&nbsp;<span class="ident" id="4350623"><a href="/gostd/net/textproto/textproto.go.html#4349799">io</a></span><span class="op" id="4350625">.</span><span class="ident" id="4350626"><a href="/gostd/io/io.go.html#1423677">ReadWriteCloser</a></span><span class="op" id="4350641">)</span>&nbsp;<span class="op" id="4350643">*</span><span class="ident" id="4350644"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span>&nbsp;<span class="op" id="4350649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4350652">return</span>&nbsp;<span class="op" id="4350659">&amp;</span><span class="ident" id="4350660"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span><span class="op" id="4350664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350668"><a href="/gostd/net/textproto/textproto.go.html#4350502">Reader</a></span><span class="op" id="4350674">:</span>&nbsp;<span class="ident" id="4350676"><a href="/gostd/net/textproto/reader.go.html#4333179">Reader</a></span><span class="op" id="4350682">{</span><span class="ident" id="4350683"><a href="/gostd/net/textproto/reader.go.html#4333196">R</a></span><span class="op" id="4350684">:</span>&nbsp;<span class="ident" id="4350686"><a href="/gostd/net/textproto/textproto.go.html#4349783">bufio</a></span><span class="op" id="4350691">.</span><span class="ident" id="4350692"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="4350701">(</span><span class="ident" id="4350702"><a href="/gostd/net/textproto/textproto.go.html#4350618">conn</a></span><span class="op" id="4350706">)</span><span class="op" id="4350707">}</span><span class="op" id="4350708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350712"><a href="/gostd/net/textproto/textproto.go.html#4350510">Writer</a></span><span class="op" id="4350718">:</span>&nbsp;<span class="ident" id="4350720"><a href="/gostd/net/textproto/writer.go.html#4353033">Writer</a></span><span class="op" id="4350726">{</span><span class="ident" id="4350727"><a href="/gostd/net/textproto/writer.go.html#4353050">W</a></span><span class="op" id="4350728">:</span>&nbsp;<span class="ident" id="4350730"><a href="/gostd/net/textproto/textproto.go.html#4349783">bufio</a></span><span class="op" id="4350735">.</span><span class="ident" id="4350736"><a href="/gostd/bufio/bufio.go.html#1367149">NewWriter</a></span><span class="op" id="4350745">(</span><span class="ident" id="4350746"><a href="/gostd/net/textproto/textproto.go.html#4350618">conn</a></span><span class="op" id="4350750">)</span><span class="op" id="4350751">}</span><span class="op" id="4350752">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4350756"><a href="/gostd/net/textproto/textproto.go.html#4350528">conn</a></span><span class="op" id="4350760">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4350764"><a href="/gostd/net/textproto/textproto.go.html#4350618">conn</a></span><span class="op" id="4350768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4350771">}</span><br>
<span class="lineno"></span><span class="op" id="4350773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4350776">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">75</span><span class="keyword" id="4350808">func</span>&nbsp;<span class="op" id="4350813">(</span><span class="ident" id="4350814">c</span>&nbsp;<span class="op" id="4350816">*</span><span class="ident" id="4350817"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span><span class="op" id="4350821">)</span>&nbsp;<span class="ident" id="4350823">Close</span><span class="op" id="4350828">(</span><span class="op" id="4350829">)</span>&nbsp;<span class="builtintype" id="4350831">error</span>&nbsp;<span class="op" id="4350837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4350840">return</span>&nbsp;<span class="ident" id="4350847"><a href="/gostd/net/textproto/textproto.go.html#4350814">c</a></span><span class="op" id="4350848">.</span><span class="ident" id="4350849"><a href="/gostd/net/textproto/textproto.go.html#4350528">conn</a></span><span class="op" id="4350853">.</span><span class="ident" id="4350854"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="4350859">(</span><span class="op" id="4350860">)</span><br>
<span class="lineno"></span><span class="op" id="4350862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4350865">//&nbsp;Dial&nbsp;connects&nbsp;to&nbsp;the&nbsp;given&nbsp;address&nbsp;on&nbsp;the&nbsp;given&nbsp;network&nbsp;using&nbsp;net.Dial</span><br>
<span class="lineno">80</span><span class="comment" id="4350939">//&nbsp;and&nbsp;then&nbsp;returns&nbsp;a&nbsp;new&nbsp;Conn&nbsp;for&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4350990">func</span>&nbsp;<span class="ident" id="4350995">Dial</span><span class="op" id="4350999">(</span><span class="ident" id="4351000">network</span><span class="op" id="4351007">,</span>&nbsp;<span class="ident" id="4351009">addr</span>&nbsp;<span class="builtintype" id="4351014">string</span><span class="op" id="4351020">)</span>&nbsp;<span class="op" id="4351022">(</span><span class="op" id="4351023">*</span><span class="ident" id="4351024"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span><span class="op" id="4351028">,</span>&nbsp;<span class="builtintype" id="4351030">error</span><span class="op" id="4351035">)</span>&nbsp;<span class="op" id="4351037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4351040">c</span><span class="op" id="4351041">,</span>&nbsp;<span class="ident" id="4351043">err</span>&nbsp;<span class="op" id="4351047">:=</span>&nbsp;<span class="ident" id="4351050"><a href="/gostd/net/textproto/textproto.go.html#4349805">net</a></span><span class="op" id="4351053">.</span><span class="ident" id="4351054"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="4351058">(</span><span class="ident" id="4351059"><a href="/gostd/net/textproto/textproto.go.html#4351000">network</a></span><span class="op" id="4351066">,</span>&nbsp;<span class="ident" id="4351068"><a href="/gostd/net/textproto/textproto.go.html#4351009">addr</a></span><span class="op" id="4351072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4351075">if</span>&nbsp;<span class="ident" id="4351078"><a href="/gostd/net/textproto/textproto.go.html#4351043">err</a></span>&nbsp;<span class="op" id="4351082">!=</span>&nbsp;<span class="builtintype" id="4351085">nil</span>&nbsp;<span class="op" id="4351089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4351093">return</span>&nbsp;<span class="builtintype" id="4351100">nil</span><span class="op" id="4351103">,</span>&nbsp;<span class="ident" id="4351105"><a href="/gostd/net/textproto/textproto.go.html#4351043">err</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4351110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4351113">return</span>&nbsp;<span class="ident" id="4351120"><a href="/gostd/net/textproto/textproto.go.html#4350610">NewConn</a></span><span class="op" id="4351127">(</span><span class="ident" id="4351128"><a href="/gostd/net/textproto/textproto.go.html#4351040">c</a></span><span class="op" id="4351129">)</span><span class="op" id="4351130">,</span>&nbsp;<span class="builtintype" id="4351132">nil</span><br>
<span class="lineno"></span><span class="op" id="4351136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4351139">//&nbsp;Cmd&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method&nbsp;that&nbsp;sends&nbsp;a&nbsp;command&nbsp;after</span><br>
<span class="lineno">90</span><span class="comment" id="4351197">//&nbsp;waiting&nbsp;its&nbsp;turn&nbsp;in&nbsp;the&nbsp;pipeline.&nbsp;&nbsp;The&nbsp;command&nbsp;text&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4351259">//&nbsp;result&nbsp;of&nbsp;formatting&nbsp;format&nbsp;with&nbsp;args&nbsp;and&nbsp;appending&nbsp;\r\n.</span><br>
<span class="lineno"></span><span class="comment" id="4351320">//&nbsp;Cmd&nbsp;returns&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;command,&nbsp;for&nbsp;use&nbsp;with&nbsp;StartResponse&nbsp;and&nbsp;EndResponse.</span><br>
<span class="lineno"></span><span class="comment" id="4351402">//</span><br>
<span class="lineno"></span><span class="comment" id="4351405">//&nbsp;For&nbsp;example,&nbsp;a&nbsp;client&nbsp;might&nbsp;run&nbsp;a&nbsp;HELP&nbsp;command&nbsp;that&nbsp;returns&nbsp;a&nbsp;dot-body</span><br>
<span class="lineno">95</span><span class="comment" id="4351479">//&nbsp;by&nbsp;using:</span><br>
<span class="lineno"></span><span class="comment" id="4351492">//</span><br>
<span class="lineno"></span><span class="comment" id="4351495">//&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;err&nbsp;:=&nbsp;c.Cmd(&#34;HELP&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="4351523">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4351542">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;err</span><br>
<span class="lineno">100</span><span class="comment" id="4351562">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4351567">//</span><br>
<span class="lineno"></span><span class="comment" id="4351570">//&nbsp;&nbsp;&nbsp;&nbsp;c.StartResponse(id)</span><br>
<span class="lineno"></span><span class="comment" id="4351593">//&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;c.EndResponse(id)</span><br>
<span class="lineno"></span><span class="comment" id="4351620">//</span><br>
<span class="lineno">105</span><span class="comment" id="4351623">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;_,&nbsp;_,&nbsp;err&nbsp;=&nbsp;c.ReadCodeLine(110);&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4351675">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;err</span><br>
<span class="lineno"></span><span class="comment" id="4351695">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4351700">//&nbsp;&nbsp;&nbsp;&nbsp;text,&nbsp;err&nbsp;:=&nbsp;c.ReadDotBytes()</span><br>
<span class="lineno"></span><span class="comment" id="4351733">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">110</span><span class="comment" id="4351752">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil,&nbsp;err</span><br>
<span class="lineno"></span><span class="comment" id="4351772">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4351777">//&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;c.ReadCodeLine(250)</span><br>
<span class="lineno"></span><span class="comment" id="4351807">//</span><br>
<span class="lineno"></span><span class="keyword" id="4351810">func</span>&nbsp;<span class="op" id="4351815">(</span><span class="ident" id="4351816">c</span>&nbsp;<span class="op" id="4351818">*</span><span class="ident" id="4351819"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span><span class="op" id="4351823">)</span>&nbsp;<span class="ident" id="4351825">Cmd</span><span class="op" id="4351828">(</span><span class="ident" id="4351829">format</span>&nbsp;<span class="builtintype" id="4351836">string</span><span class="op" id="4351842">,</span>&nbsp;<span class="ident" id="4351844">args</span>&nbsp;<span class="op" id="4351849">...</span><span class="keyword" id="4351852">interface</span><span class="op" id="4351861">{</span><span class="op" id="4351862">}</span><span class="op" id="4351863">)</span>&nbsp;<span class="op" id="4351865">(</span><span class="ident" id="4351866">id</span>&nbsp;<span class="builtintype" id="4351869">uint</span><span class="op" id="4351873">,</span>&nbsp;<span class="ident" id="4351875">err</span>&nbsp;<span class="builtintype" id="4351879">error</span><span class="op" id="4351884">)</span>&nbsp;<span class="op" id="4351886">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4351889"><a href="/gostd/net/textproto/textproto.go.html#4351866">id</a></span>&nbsp;<span class="op" id="4351892">=</span>&nbsp;<span class="ident" id="4351894"><a href="/gostd/net/textproto/textproto.go.html#4351816">c</a></span><span class="op" id="4351895">.</span><span class="ident" id="4351896"><a href="/gostd/net/textproto/pipeline.go.html#4330613">Next</a></span><span class="op" id="4351900">(</span><span class="op" id="4351901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4351904"><a href="/gostd/net/textproto/textproto.go.html#4351816">c</a></span><span class="op" id="4351905">.</span><span class="ident" id="4351906"><a href="/gostd/net/textproto/pipeline.go.html#4330825">StartRequest</a></span><span class="op" id="4351918">(</span><span class="ident" id="4351919"><a href="/gostd/net/textproto/textproto.go.html#4351866">id</a></span><span class="op" id="4351921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4351924"><a href="/gostd/net/textproto/textproto.go.html#4351875">err</a></span>&nbsp;<span class="op" id="4351928">=</span>&nbsp;<span class="ident" id="4351930"><a href="/gostd/net/textproto/textproto.go.html#4351816">c</a></span><span class="op" id="4351931">.</span><span class="ident" id="4351932"><a href="/gostd/net/textproto/writer.go.html#4353348">PrintfLine</a></span><span class="op" id="4351942">(</span><span class="ident" id="4351943"><a href="/gostd/net/textproto/textproto.go.html#4351829">format</a></span><span class="op" id="4351949">,</span>&nbsp;<span class="ident" id="4351951"><a href="/gostd/net/textproto/textproto.go.html#4351844">args</a></span><span class="op" id="4351955">...</span><span class="op" id="4351958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4351961"><a href="/gostd/net/textproto/textproto.go.html#4351816">c</a></span><span class="op" id="4351962">.</span><span class="ident" id="4351963"><a href="/gostd/net/textproto/pipeline.go.html#4331006">EndRequest</a></span><span class="op" id="4351973">(</span><span class="ident" id="4351974"><a href="/gostd/net/textproto/textproto.go.html#4351866">id</a></span><span class="op" id="4351976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4351979">if</span>&nbsp;<span class="ident" id="4351982"><a href="/gostd/net/textproto/textproto.go.html#4351875">err</a></span>&nbsp;<span class="op" id="4351986">!=</span>&nbsp;<span class="builtintype" id="4351989">nil</span>&nbsp;<span class="op" id="4351993">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4351997">return</span>&nbsp;<span class="num" id="4352004">0</span><span class="op" id="4352005">,</span>&nbsp;<span class="ident" id="4352007"><a href="/gostd/net/textproto/textproto.go.html#4351875">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352015">return</span>&nbsp;<span class="ident" id="4352022"><a href="/gostd/net/textproto/textproto.go.html#4351866">id</a></span><span class="op" id="4352024">,</span>&nbsp;<span class="builtintype" id="4352026">nil</span><br>
<span class="lineno"></span><span class="op" id="4352030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="4352033">//&nbsp;TrimString&nbsp;returns&nbsp;s&nbsp;without&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;ASCII&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4352099">func</span>&nbsp;<span class="ident" id="4352104">TrimString</span><span class="op" id="4352114">(</span><span class="ident" id="4352115">s</span>&nbsp;<span class="builtintype" id="4352117">string</span><span class="op" id="4352123">)</span>&nbsp;<span class="builtintype" id="4352125">string</span>&nbsp;<span class="op" id="4352132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352135">for</span>&nbsp;<span class="builtinfunc" id="4352139">len</span><span class="op" id="4352142">(</span><span class="ident" id="4352143"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352144">)</span>&nbsp;<span class="op" id="4352146">&gt;</span>&nbsp;<span class="num" id="4352148">0</span>&nbsp;<span class="op" id="4352150">&amp;&amp;</span>&nbsp;<span class="ident" id="4352153"><a href="/gostd/net/textproto/textproto.go.html#4352512">isASCIISpace</a></span><span class="op" id="4352165">(</span><span class="ident" id="4352166"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352167">[</span><span class="num" id="4352168">0</span><span class="op" id="4352169">]</span><span class="op" id="4352170">)</span>&nbsp;<span class="op" id="4352172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4352176"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span>&nbsp;<span class="op" id="4352178">=</span>&nbsp;<span class="ident" id="4352180"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352181">[</span><span class="num" id="4352182">1</span><span class="op" id="4352183">:</span><span class="op" id="4352184">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352187">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352190">for</span>&nbsp;<span class="builtinfunc" id="4352194">len</span><span class="op" id="4352197">(</span><span class="ident" id="4352198"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352199">)</span>&nbsp;<span class="op" id="4352201">&gt;</span>&nbsp;<span class="num" id="4352203">0</span>&nbsp;<span class="op" id="4352205">&amp;&amp;</span>&nbsp;<span class="ident" id="4352208"><a href="/gostd/net/textproto/textproto.go.html#4352512">isASCIISpace</a></span><span class="op" id="4352220">(</span><span class="ident" id="4352221"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352222">[</span><span class="builtinfunc" id="4352223">len</span><span class="op" id="4352226">(</span><span class="ident" id="4352227"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352228">)</span><span class="op" id="4352229">-</span><span class="num" id="4352230">1</span><span class="op" id="4352231">]</span><span class="op" id="4352232">)</span>&nbsp;<span class="op" id="4352234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4352238"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span>&nbsp;<span class="op" id="4352240">=</span>&nbsp;<span class="ident" id="4352242"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352243">[</span><span class="op" id="4352244">:</span><span class="builtinfunc" id="4352245">len</span><span class="op" id="4352248">(</span><span class="ident" id="4352249"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><span class="op" id="4352250">)</span><span class="op" id="4352251">-</span><span class="num" id="4352252">1</span><span class="op" id="4352253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352259">return</span>&nbsp;<span class="ident" id="4352266"><a href="/gostd/net/textproto/textproto.go.html#4352115">s</a></span><br>
<span class="lineno"></span><span class="op" id="4352268">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4352271">//&nbsp;TrimBytes&nbsp;returns&nbsp;b&nbsp;without&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;ASCII&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4352336">func</span>&nbsp;<span class="ident" id="4352341">TrimBytes</span><span class="op" id="4352350">(</span><span class="ident" id="4352351">b</span>&nbsp;<span class="op" id="4352353">[</span><span class="op" id="4352354">]</span><span class="builtintype" id="4352355">byte</span><span class="op" id="4352359">)</span>&nbsp;<span class="op" id="4352361">[</span><span class="op" id="4352362">]</span><span class="builtintype" id="4352363">byte</span>&nbsp;<span class="op" id="4352368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352371">for</span>&nbsp;<span class="builtinfunc" id="4352375">len</span><span class="op" id="4352378">(</span><span class="ident" id="4352379"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352380">)</span>&nbsp;<span class="op" id="4352382">&gt;</span>&nbsp;<span class="num" id="4352384">0</span>&nbsp;<span class="op" id="4352386">&amp;&amp;</span>&nbsp;<span class="ident" id="4352389"><a href="/gostd/net/textproto/textproto.go.html#4352512">isASCIISpace</a></span><span class="op" id="4352401">(</span><span class="ident" id="4352402"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352403">[</span><span class="num" id="4352404">0</span><span class="op" id="4352405">]</span><span class="op" id="4352406">)</span>&nbsp;<span class="op" id="4352408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4352412"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span>&nbsp;<span class="op" id="4352414">=</span>&nbsp;<span class="ident" id="4352416"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352417">[</span><span class="num" id="4352418">1</span><span class="op" id="4352419">:</span><span class="op" id="4352420">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352426">for</span>&nbsp;<span class="builtinfunc" id="4352430">len</span><span class="op" id="4352433">(</span><span class="ident" id="4352434"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352435">)</span>&nbsp;<span class="op" id="4352437">&gt;</span>&nbsp;<span class="num" id="4352439">0</span>&nbsp;<span class="op" id="4352441">&amp;&amp;</span>&nbsp;<span class="ident" id="4352444"><a href="/gostd/net/textproto/textproto.go.html#4352512">isASCIISpace</a></span><span class="op" id="4352456">(</span><span class="ident" id="4352457"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352458">[</span><span class="builtinfunc" id="4352459">len</span><span class="op" id="4352462">(</span><span class="ident" id="4352463"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352464">)</span><span class="op" id="4352465">-</span><span class="num" id="4352466">1</span><span class="op" id="4352467">]</span><span class="op" id="4352468">)</span>&nbsp;<span class="op" id="4352470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4352474"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span>&nbsp;<span class="op" id="4352476">=</span>&nbsp;<span class="ident" id="4352478"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352479">[</span><span class="op" id="4352480">:</span><span class="builtinfunc" id="4352481">len</span><span class="op" id="4352484">(</span><span class="ident" id="4352485"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><span class="op" id="4352486">)</span><span class="op" id="4352487">-</span><span class="num" id="4352488">1</span><span class="op" id="4352489">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352495">return</span>&nbsp;<span class="ident" id="4352502"><a href="/gostd/net/textproto/textproto.go.html#4352351">b</a></span><br>
<span class="lineno">145</span><span class="op" id="4352504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4352507">func</span>&nbsp;<span class="ident" id="4352512">isASCIISpace</span><span class="op" id="4352524">(</span><span class="ident" id="4352525">b</span>&nbsp;<span class="builtintype" id="4352527">byte</span><span class="op" id="4352531">)</span>&nbsp;<span class="builtintype" id="4352533">bool</span>&nbsp;<span class="op" id="4352538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352541">return</span>&nbsp;<span class="ident" id="4352548"><a href="/gostd/net/textproto/textproto.go.html#4352525">b</a></span>&nbsp;<span class="op" id="4352550">==</span>&nbsp;<span class="string" id="4352553">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4352557">||</span>&nbsp;<span class="ident" id="4352560"><a href="/gostd/net/textproto/textproto.go.html#4352525">b</a></span>&nbsp;<span class="op" id="4352562">==</span>&nbsp;<span class="string" id="4352565">&#39;\t&#39;</span>&nbsp;<span class="op" id="4352570">||</span>&nbsp;<span class="ident" id="4352573"><a href="/gostd/net/textproto/textproto.go.html#4352525">b</a></span>&nbsp;<span class="op" id="4352575">==</span>&nbsp;<span class="string" id="4352578">&#39;\n&#39;</span>&nbsp;<span class="op" id="4352583">||</span>&nbsp;<span class="ident" id="4352586"><a href="/gostd/net/textproto/textproto.go.html#4352525">b</a></span>&nbsp;<span class="op" id="4352588">==</span>&nbsp;<span class="string" id="4352591">&#39;\r&#39;</span><br>
<span class="lineno"></span><span class="op" id="4352596">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="4352599">func</span>&nbsp;<span class="ident" id="4352604">isASCIILetter</span><span class="op" id="4352617">(</span><span class="ident" id="4352618">b</span>&nbsp;<span class="builtintype" id="4352620">byte</span><span class="op" id="4352624">)</span>&nbsp;<span class="builtintype" id="4352626">bool</span>&nbsp;<span class="op" id="4352631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4352634"><a href="/gostd/net/textproto/textproto.go.html#4352618">b</a></span>&nbsp;<span class="op" id="4352636">|=</span>&nbsp;<span class="num" id="4352639">0x20</span>&nbsp;<span class="comment" id="4352644">//&nbsp;make&nbsp;lower&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4352664">return</span>&nbsp;<span class="string" id="4352671">&#39;a&#39;</span>&nbsp;<span class="op" id="4352675">&lt;=</span>&nbsp;<span class="ident" id="4352678"><a href="/gostd/net/textproto/textproto.go.html#4352618">b</a></span>&nbsp;<span class="op" id="4352680">&amp;&amp;</span>&nbsp;<span class="ident" id="4352683"><a href="/gostd/net/textproto/textproto.go.html#4352618">b</a></span>&nbsp;<span class="op" id="4352685">&lt;=</span>&nbsp;<span class="string" id="4352688">&#39;z&#39;</span><br>
<span class="lineno"></span><span class="op" id="4352692">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
