<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5108130">package</span>&nbsp;<span class="ident" id="5108138">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5108144">import</span>&nbsp;<span class="op" id="5108151">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5108154">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5108176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5108179">func</span>&nbsp;<span class="ident" id="5108184">parseOps</span><span class="op" id="5108192">(</span><span class="ident" id="5108193">p</span>&nbsp;<span class="op" id="5108195">*</span><span class="ident" id="5108196">parser</span><span class="op" id="5108202">)</span>&nbsp;<span class="op" id="5108204">(</span><span class="ident" id="5108205">ops</span>&nbsp;<span class="op" id="5108209">[</span><span class="op" id="5108210">]</span><span class="op" id="5108211">*</span><span class="ident" id="5108212">lex8</span><span class="op" id="5108216">.</span><span class="ident" id="5108217">Token</span><span class="op" id="5108222">)</span>&nbsp;<span class="op" id="5108224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108227">for</span>&nbsp;<span class="op" id="5108231">!</span><span class="ident" id="5108232">p</span><span class="op" id="5108233">.</span><span class="ident" id="5108234">acceptType</span><span class="op" id="5108244">(</span><span class="ident" id="5108245">Semi</span><span class="op" id="5108249">)</span>&nbsp;<span class="op" id="5108251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108255">t</span>&nbsp;<span class="op" id="5108257">:=</span>&nbsp;<span class="ident" id="5108260">p</span><span class="op" id="5108261">.</span><span class="ident" id="5108262">expect</span><span class="op" id="5108268">(</span><span class="ident" id="5108269">Operand</span><span class="op" id="5108276">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108280">if</span>&nbsp;<span class="ident" id="5108283">t</span>&nbsp;<span class="op" id="5108285">!=</span>&nbsp;<span class="ident" id="5108288">nil</span>&nbsp;<span class="op" id="5108292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108297">ops</span>&nbsp;<span class="op" id="5108301">=</span>&nbsp;<span class="builtinfunc" id="5108303">append</span><span class="op" id="5108309">(</span><span class="ident" id="5108310">ops</span><span class="op" id="5108313">,</span>&nbsp;<span class="ident" id="5108315">t</span><span class="op" id="5108316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108320">}</span>&nbsp;<span class="keyword" id="5108322">else</span>&nbsp;<span class="op" id="5108327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108332">ops</span>&nbsp;<span class="op" id="5108336">=</span>&nbsp;<span class="ident" id="5108338">nil</span>&nbsp;<span class="comment" id="5108342">//&nbsp;error&nbsp;now</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108358">if</span>&nbsp;<span class="ident" id="5108361">p</span><span class="op" id="5108362">.</span><span class="ident" id="5108363">see</span><span class="op" id="5108366">(</span><span class="ident" id="5108367">lex8</span><span class="op" id="5108371">.</span><span class="ident" id="5108372">EOF</span><span class="op" id="5108375">)</span>&nbsp;<span class="op" id="5108377">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108383">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108397">p</span><span class="op" id="5108398">.</span><span class="ident" id="5108399">next</span><span class="op" id="5108403">(</span><span class="op" id="5108404">)</span>&nbsp;<span class="comment" id="5108406">//&nbsp;proceed&nbsp;anyway&nbsp;for&nbsp;other&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108445">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108449">p</span><span class="op" id="5108450">.</span><span class="ident" id="5108451">clearErr</span><span class="op" id="5108459">(</span><span class="op" id="5108460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108463">return</span>&nbsp;<span class="ident" id="5108470">ops</span><br>
<span class="lineno"></span><span class="op" id="5108474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5108477">func</span>&nbsp;<span class="ident" id="5108482">parseFuncStmt</span><span class="op" id="5108495">(</span><span class="ident" id="5108496">p</span>&nbsp;<span class="op" id="5108498">*</span><span class="ident" id="5108499">parser</span><span class="op" id="5108505">)</span>&nbsp;<span class="op" id="5108507">*</span><span class="ident" id="5108508">funcStmt</span>&nbsp;<span class="op" id="5108517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108520">ops</span>&nbsp;<span class="op" id="5108524">:=</span>&nbsp;<span class="ident" id="5108527">parseOps</span><span class="op" id="5108535">(</span><span class="ident" id="5108536">p</span><span class="op" id="5108537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108540">if</span>&nbsp;<span class="builtinfunc" id="5108543">len</span><span class="op" id="5108546">(</span><span class="ident" id="5108547">ops</span><span class="op" id="5108550">)</span>&nbsp;<span class="op" id="5108552">==</span>&nbsp;<span class="num" id="5108555">0</span>&nbsp;<span class="op" id="5108557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108561">return</span>&nbsp;<span class="ident" id="5108568">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108573">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108577">op0</span>&nbsp;<span class="op" id="5108581">:=</span>&nbsp;<span class="ident" id="5108584">ops</span><span class="op" id="5108587">[</span><span class="num" id="5108588">0</span><span class="op" id="5108589">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108592">lead</span>&nbsp;<span class="op" id="5108597">:=</span>&nbsp;<span class="ident" id="5108600">op0</span><span class="op" id="5108603">.</span><span class="ident" id="5108604">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108609">if</span>&nbsp;<span class="ident" id="5108612">lead</span>&nbsp;<span class="op" id="5108617">==</span>&nbsp;<span class="string" id="5108620">&#34;&#34;</span>&nbsp;<span class="op" id="5108623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5108627">panic</span><span class="op" id="5108632">(</span><span class="string" id="5108633">&#34;empty&nbsp;operand&#34;</span><span class="op" id="5108648">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108655">if</span>&nbsp;<span class="ident" id="5108658">parseLabel</span><span class="op" id="5108668">(</span><span class="ident" id="5108669">p</span><span class="op" id="5108670">,</span>&nbsp;<span class="ident" id="5108672">op0</span><span class="op" id="5108675">)</span>&nbsp;<span class="op" id="5108677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108681">if</span>&nbsp;<span class="builtinfunc" id="5108684">len</span><span class="op" id="5108687">(</span><span class="ident" id="5108688">ops</span><span class="op" id="5108691">)</span>&nbsp;<span class="op" id="5108693">&gt;</span>&nbsp;<span class="num" id="5108695">1</span>&nbsp;<span class="op" id="5108697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108702">p</span><span class="op" id="5108703">.</span><span class="ident" id="5108704">err</span><span class="op" id="5108707">(</span><span class="ident" id="5108708">op0</span><span class="op" id="5108711">.</span><span class="ident" id="5108712">Pos</span><span class="op" id="5108715">,</span>&nbsp;<span class="string" id="5108717">&#34;label&nbsp;should&nbsp;take&nbsp;the&nbsp;entire&nbsp;line&#34;</span><span class="op" id="5108752">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108757">return</span>&nbsp;<span class="ident" id="5108764">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108774">return</span>&nbsp;<span class="op" id="5108781">&amp;</span><span class="ident" id="5108782">funcStmt</span><span class="op" id="5108790">{</span><span class="ident" id="5108791">label</span><span class="op" id="5108796">:</span>&nbsp;<span class="ident" id="5108798">lead</span><span class="op" id="5108802">,</span>&nbsp;<span class="ident" id="5108804">ops</span><span class="op" id="5108807">:</span>&nbsp;<span class="ident" id="5108809">ops</span><span class="op" id="5108812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108819">return</span>&nbsp;<span class="op" id="5108826">&amp;</span><span class="ident" id="5108827">funcStmt</span><span class="op" id="5108835">{</span><span class="ident" id="5108836">inst</span><span class="op" id="5108840">:</span>&nbsp;<span class="ident" id="5108842">parseInst</span><span class="op" id="5108851">(</span><span class="ident" id="5108852">p</span><span class="op" id="5108853">,</span>&nbsp;<span class="ident" id="5108855">ops</span><span class="op" id="5108858">)</span><span class="op" id="5108859">,</span>&nbsp;<span class="ident" id="5108861">ops</span><span class="op" id="5108864">:</span>&nbsp;<span class="ident" id="5108866">ops</span><span class="op" id="5108869">}</span><br>
<span class="lineno"></span><span class="op" id="5108871">}</span>
</div>
</body>
</html>
